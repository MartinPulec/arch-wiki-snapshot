<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Pure-FTPd - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pure-FTPd rootpage-Pure-FTPd skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Set_up_virtual_users" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Set_up_virtual_users">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Set up virtual users</span>
				</div>
			</a>
			
			<ul id="toc-Set_up_virtual_users-sublist" class="vector-toc-list">
				<li id="toc-Changing_user_password" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Changing_user_password">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>Changing user password</span>
				</div>
			</a>
			
			<ul id="toc-Changing_user_password-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Removing_user" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Removing_user">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.2</span>
					<span>Removing user</span>
				</div>
			</a>
			
			<ul id="toc-Removing_user-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Checking_user_settings" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Checking_user_settings">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.3</span>
					<span>Checking user settings</span>
				</div>
			</a>
			
			<ul id="toc-Checking_user_settings-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Backends" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Backends">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Backends</span>
				</div>
			</a>
			
			<ul id="toc-Backends-sublist" class="vector-toc-list">
				<li id="toc-PAM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#PAM">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>PAM</span>
				</div>
			</a>
			
			<ul id="toc-PAM-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Set_up_TLS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Set_up_TLS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Set up TLS</span>
				</div>
			</a>
			
			<ul id="toc-Set_up_TLS-sublist" class="vector-toc-list">
				<li id="toc-Create_a_certificate" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_a_certificate">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.1</span>
					<span>Create a certificate</span>
				</div>
			</a>
			
			<ul id="toc-Create_a_certificate-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_TLS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Enable_TLS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.2</span>
					<span>Enable TLS</span>
				</div>
			</a>
			
			<ul id="toc-Enable_TLS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Pure-FTPd</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Pure-FTPd" title="Pure-FTPd – 日本語" lang="ja" hreflang="ja" data-title="Pure-FTPd" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/SFTP_chroot.html" title="SFTP chroot">SFTP chroot</a></li>
<li><a href="../en/SCP_and_SFTP.html" title="SCP and SFTP">SCP and SFTP</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.pureftpd.org/project/pure-ftpd">Pure-FTPd</a> is an FTP server designed with security in mind.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pure-ftpd/">pure-ftpd</a></span><sup><small>AUR</small></sup> can be installed from the <a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>pure-ftpd.service</code>.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Pure-FTPd configuration is completely done with its startup arguments.
</p>
<p>There is a wrapper script, which reads <code>/etc/pure-ftpd/pure-ftpd.conf</code>. It then starts Pure-FTPd with the corresponding arguments.
</p>
<h3><span class="mw-headline" id="Set_up_virtual_users">Set up virtual users</span></h3>
<p>With Pure-FTPd, it is possible to use virtual users instead of real system users.
</p>
<p>The available users need to be provided by one or more backends. See <a href="#Backends">backends</a>.
</p>
<p>For simplicity and demonstration purposes, the PureDB backend will be used. Uncomment the following two lines:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pure-ftpd/pure-ftpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># We disable the anonymous account.
NoAnonymous yes
# We use PureDB as backend and specify its path.
PureDB /etc/pureftpd.pdb
</pre>
<p>Now only authenticated users can connect. To add users to the PureDB we need to create a <code>/etc/passwd</code>-like file which is then used to create the PureDB.
</p>
<p>To create, view, or modify the <code>/etc/pureftpd.passwd</code> file, we use the <code>pure-pw</code> command.
</p>
<pre># pure-pw useradd someuser -u ftp -d /srv/ftp
</pre>
<p>This creates the user <b>someuser</b> which runs as the FTP system user. By default, the user is chrooted to <code>/srv/ftp</code>. In the event that that's undesirable, replace <code>-d</code> with <code>-D</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<p>The virtual users running as the FTP system users can not log in by default. To change that behavior, set the option MinUID in <code>/etc/pure-ftpd.conf</code> to 14 (UID of the ftp user).
</p>
<p>We also need to list the shell of the FTP system user in <code>/etc/shells</code>. 
</p>
<pre># echo "/bin/false" &gt;&gt; /etc/shells
</pre>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Symlinks outside of the chrooted directory do not work since the package is not compiled with <code>--with-virtualchroot</code>. You can use <code>mount --bind source target</code> as a workaround.</div>
<p>Before this account is usable, we need to commit our changes:
</p>
<pre># pure-pw mkdb
</pre>
<p>The virtual user can now access everything in <code>/srv/ftp</code>.
</p>
<p>The command <code>pure-pw mkdb</code> creates the file mentioned earlier called <code>/etc/pureftpd.pdb</code>, which houses all information related to your virtual users. There is no need to restart your service when issuing this command as it is updated on the fly and changes take effect immediately.
</p>
<h4><span class="mw-headline" id="Changing_user_password">Changing user password</span></h4>
<p>For example, to change a user's password, type the command:
</p>
<pre># pure-pw passwd someuser
</pre>
<p>Afterwards, commit your changes by updating <code>/etc/pureftpd.pdb</code>:
</p>
<pre># pure-pw mkdb
</pre>
<h4><span class="mw-headline" id="Removing_user">Removing user</span></h4>
<p>To remove a user, type the command:
</p>
<pre># pure-pw userdel someuser
</pre>
<p>The user's home directory is not removed via this command; therefore, it must be removed manually.
</p>
<h4><span class="mw-headline" id="Checking_user_settings">Checking user settings</span></h4>
<p>To check a user's current account settings, type the command:
</p>
<pre># pure-pw show someuser
</pre>
<h3><span class="mw-headline" id="Backends">Backends</span></h3>
<p>You need to specify one or more backends. If you specify more than one, Pure-FTPd will respect the order in which they are specified. It will use the first backend which contains the requested user.
</p>
<p>Available backends are:
</p>
<ul>
<li><code>/etc/passwd</code></li>
<li><a href="../en/MySQL.html" title="MySQL">MySQL</a></li>
<li><a href="../en/OpenLDAP.html" class="mw-redirect" title="LDAP">LDAP</a></li>
<li><a href="../en/PostgreSQL.html" title="PostgreSQL">PostgreSQL</a></li>
<li><a href="../en/PAM.html" title="PAM">PAM</a></li>
<li>PureDB</li>
<li>Or you can write <a rel="nofollow" class="external text" href="https://download.pureftpd.org/pub/pure-ftpd/doc/README.Authentication-Modules">your own</a>
</li>
</ul>
<h4><span class="mw-headline" id="PAM">PAM</span></h4>
<p>To enable PAM backend, create the following file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/pure-ftpd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">auth       required     pam_unix.so
auth       required     pam_env.so
account    required     pam_unix.so
session    required     pam_unix.so
</pre>
<p>and uncomment the PAMAuthentication line in the config file like so:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pure-ftpd/pure-ftpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># If you want to enable PAM authentication, uncomment the following line

PAMAuthentication            yes
</pre>
<h3><span class="mw-headline" id="Set_up_TLS">Set up TLS</span></h3>
<h4><span class="mw-headline" id="Create_a_certificate">Create a certificate</span></h4>
<p>Refer to <a rel="nofollow" class="external text" href="https://download.pureftpd.org/pub/pure-ftpd/doc/README.TLS">the documentation</a> for more information. The short version is this:
</p>
<p>Create a Self-Signed Certificate:
</p>
<pre># mkdir -p /etc/ssl/private
# openssl req -x509 -nodes -days 7300 -newkey rsa:2048 -sha256 -keyout /etc/ssl/private/pure-ftpd.pem -out /etc/ssl/private/pure-ftpd.pem
</pre>
<p>Make it private:
</p>
<pre># chmod 600 /etc/ssl/private/*.pem
</pre>
<h4><span class="mw-headline" id="Enable_TLS">Enable TLS</span></h4>
<p>Towards the bottom of <code>/etc/pure-ftpd/pure-ftpd.conf</code> you should find a section for TLS. Uncomment and change the <code>TLS</code> setting to <code>1</code> to enable both FTP and FTPS:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pure-ftpd/pure-ftpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TLS             1</pre>
<p>Now <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>pure-ftpd.service</code> unit and you should be able to log in with FTPS-capable clients, e.g. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=filezilla">filezilla</a></span> or <a rel="nofollow" class="external text" href="https://www.smartftp.com/">SmartFTP</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.pureftpd.org/project/pure-ftpd">Official homepage</a></li>
<li><a rel="nofollow" class="external text" href="https://download.pureftpd.org/pub/pure-ftpd/doc/README.Virtual-Users">Virtual users</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:FTP_servers.html" title="Category:FTP servers">FTP servers</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pure-FTPd&amp;oldid=802546">https://wiki.archlinux.org/index.php?title=Pure-FTPd&amp;oldid=802546</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 8 March 2024, at 02:23.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
