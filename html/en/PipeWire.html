<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>PipeWire - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PipeWire rootpage-PipeWire skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Session_manager" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Session_manager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Session manager</div>
			</a>
			
			<ul id="toc-Session_manager-sublist" class="vector-toc-list">
				<li id="toc-WirePlumber" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#WirePlumber">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>WirePlumber</div>
			</a>
			
			<ul id="toc-WirePlumber-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PipeWire_Media_Session" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#PipeWire_Media_Session">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>PipeWire Media Session</div>
			</a>
			
			<ul id="toc-PipeWire_Media_Session-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-GUI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GUI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>GUI</div>
			</a>
			
			<ul id="toc-GUI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Profiles" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Profiles">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Profiles</div>
			</a>
			
			<ul id="toc-Profiles-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Usage</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Audio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Audio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Audio</div>
			</a>
			
			<ul id="toc-Audio-sublist" class="vector-toc-list">
				<li id="toc-ALSA_clients" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#ALSA_clients">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.1</span>ALSA clients</div>
			</a>
			
			<ul id="toc-ALSA_clients-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PulseAudio_clients" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#PulseAudio_clients">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.2</span>PulseAudio clients</div>
			</a>
			
			<ul id="toc-PulseAudio_clients-sublist" class="vector-toc-list">
				<li id="toc-Setting_overall_or_individual_channel_volume" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Setting_overall_or_individual_channel_volume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.2.1</span>Setting overall or individual channel volume</div>
			</a>
			
			<ul id="toc-Setting_overall_or_individual_channel_volume-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-JACK_clients" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#JACK_clients">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.3</span>JACK clients</div>
			</a>
			
			<ul id="toc-JACK_clients-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth_devices" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth_devices">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.4</span>Bluetooth devices</div>
			</a>
			
			<ul id="toc-Bluetooth_devices-sublist" class="vector-toc-list">
				<li id="toc-Automatic_profile_selection" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Automatic_profile_selection">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.4.1</span>Automatic profile selection</div>
			</a>
			
			<ul id="toc-Automatic_profile_selection-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-PipeWire_patch_sets_for_command_line" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#PipeWire_patch_sets_for_command_line">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.5</span>PipeWire patch sets for command line</div>
			</a>
			
			<ul id="toc-PipeWire_patch_sets_for_command_line-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sharing_audio_devices_with_computers_on_the_network" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Sharing_audio_devices_with_computers_on_the_network">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.6</span>Sharing audio devices with computers on the network</div>
			</a>
			
			<ul id="toc-Sharing_audio_devices_with_computers_on_the_network-sublist" class="vector-toc-list">
				<li id="toc-Streaming_audio_to_an_AirPlay_receiver" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Streaming_audio_to_an_AirPlay_receiver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.6.1</span>Streaming audio to an AirPlay receiver</div>
			</a>
			
			<ul id="toc-Streaming_audio_to_an_AirPlay_receiver-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Run_PipeWire_on_top_of_native_JACK" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Run_PipeWire_on_top_of_native_JACK">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.7</span>Run PipeWire on top of native JACK</div>
			</a>
			
			<ul id="toc-Run_PipeWire_on_top_of_native_JACK-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_ALSA_dmix_devices_as_PipeWire_sinks" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Use_ALSA_dmix_devices_as_PipeWire_sinks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.8</span>Use ALSA dmix devices as PipeWire sinks</div>
			</a>
			
			<ul id="toc-Use_ALSA_dmix_devices_as_PipeWire_sinks-sublist" class="vector-toc-list">
				<li id="toc-ALSA_dmix_setup" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#ALSA_dmix_setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.8.1</span>ALSA dmix setup</div>
			</a>
			
			<ul id="toc-ALSA_dmix_setup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PipeWire_dmix_setup" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#PipeWire_dmix_setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.8.2</span>PipeWire dmix setup</div>
			</a>
			
			<ul id="toc-PipeWire_dmix_setup-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Switching_between_device_profiles" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Switching_between_device_profiles">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.9</span>Switching between device profiles</div>
			</a>
			
			<ul id="toc-Switching_between_device_profiles-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-WebRTC_screen_sharing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#WebRTC_screen_sharing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>WebRTC screen sharing</div>
			</a>
			
			<ul id="toc-WebRTC_screen_sharing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Video" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Video">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Video</div>
			</a>
			
			<ul id="toc-Video-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Audio_post-processing" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Audio_post-processing">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Audio post-processing</div>
		</a>
		
			<button aria-controls="toc-Audio_post-processing-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Audio post-processing subsection</span>
			</button>
		
		<ul id="toc-Audio_post-processing-sublist" class="vector-toc-list">
			<li id="toc-Pipewire_module-filter-chain" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pipewire_module-filter-chain">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Pipewire module-filter-chain</div>
			</a>
			
			<ul id="toc-Pipewire_module-filter-chain-sublist" class="vector-toc-list">
				<li id="toc-Systemwide_parametric_equalization" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Systemwide_parametric_equalization">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.1</span>Systemwide parametric equalization</div>
			</a>
			
			<ul id="toc-Systemwide_parametric_equalization-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-EasyEffects" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#EasyEffects">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>EasyEffects</div>
			</a>
			
			<ul id="toc-EasyEffects-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-NoiseTorch" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#NoiseTorch">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>NoiseTorch</div>
			</a>
			
			<ul id="toc-NoiseTorch-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Noise_suppression_for_voice" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Noise_suppression_for_voice">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Noise suppression for voice</div>
			</a>
			
			<ul id="toc-Noise_suppression_for_voice-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-JamesDSP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#JamesDSP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>JamesDSP</div>
			</a>
			
			<ul id="toc-JamesDSP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_LADSPA,_LV2_and_VST_plugins_with_PulseAudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_LADSPA,_LV2_and_VST_plugins_with_PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>Using LADSPA, LV2 and VST plugins with PulseAudio</div>
			</a>
			
			<ul id="toc-Using_LADSPA,_LV2_and_VST_plugins_with_PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Audio_2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Audio_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Audio</div>
			</a>
			
			<ul id="toc-Audio_2-sublist" class="vector-toc-list">
				<li id="toc-Microphone_is_not_detected_by_PipeWire" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Microphone_is_not_detected_by_PipeWire">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.1</span>Microphone is not detected by PipeWire</div>
			</a>
			
			<ul id="toc-Microphone_is_not_detected_by_PipeWire-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sound_does_not_automatically_switch_when_connecting_a_new_device" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Sound_does_not_automatically_switch_when_connecting_a_new_device">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.2</span>Sound does not automatically switch when connecting a new device</div>
			</a>
			
			<ul id="toc-Sound_does_not_automatically_switch_when_connecting_a_new_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sound_does_not_automatically_switch_to_Bluetooth_headphones" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Sound_does_not_automatically_switch_to_Bluetooth_headphones">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.3</span>Sound does not automatically switch to Bluetooth headphones</div>
			</a>
			
			<ul id="toc-Sound_does_not_automatically_switch_to_Bluetooth_headphones-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_sound_after_connecting_to_Bluetooth_device" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_sound_after_connecting_to_Bluetooth_device">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.4</span>No sound after connecting to Bluetooth device</div>
			</a>
			
			<ul id="toc-No_sound_after_connecting_to_Bluetooth_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_sound_in_mpv,_vlc,_totem,_but_sound_works_in_web_browser_and_GNOME_speaker_test" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_sound_in_mpv,_vlc,_totem,_but_sound_works_in_web_browser_and_GNOME_speaker_test">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.5</span>No sound in mpv, vlc, totem, but sound works in web browser and GNOME speaker test</div>
			</a>
			
			<ul id="toc-No_sound_in_mpv,_vlc,_totem,_but_sound_works_in_web_browser_and_GNOME_speaker_test-sublist" class="vector-toc-list">
				<li id="toc-Condition_Description" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Condition_Description">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.5.1</span>Condition Description</div>
			</a>
			
			<ul id="toc-Condition_Description-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reason_for_the_issue" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Reason_for_the_issue">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.5.2</span>Reason for the issue</div>
			</a>
			
			<ul id="toc-Reason_for_the_issue-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Solution" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Solution">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.5.3</span>Solution</div>
			</a>
			
			<ul id="toc-Solution-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Low_volume" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Low_volume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.6</span>Low volume</div>
			</a>
			
			<ul id="toc-Low_volume-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Increasing_RLIMIT_MEMLOCK" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Increasing_RLIMIT_MEMLOCK">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.7</span>Increasing RLIMIT_MEMLOCK</div>
			</a>
			
			<ul id="toc-Increasing_RLIMIT_MEMLOCK-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Changing_the_default_sample_rate" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Changing_the_default_sample_rate">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.8</span>Changing the default sample rate</div>
			</a>
			
			<ul id="toc-Changing_the_default_sample_rate-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Changing_the_allowed_sample_rate(s)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Changing_the_allowed_sample_rate(s)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.9</span>Changing the allowed sample rate(s)</div>
			</a>
			
			<ul id="toc-Changing_the_allowed_sample_rate(s)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sound_quality_(resampling_quality)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Sound_quality_(resampling_quality)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.10</span>Sound quality (resampling quality)</div>
			</a>
			
			<ul id="toc-Sound_quality_(resampling_quality)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-External_sound_card_not_activated_after_reconnect" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#External_sound_card_not_activated_after_reconnect">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.11</span>External sound card not activated after reconnect</div>
			</a>
			
			<ul id="toc-External_sound_card_not_activated_after_reconnect-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_Sound_or_pactl_info_shows_Failure:_Connection_refused" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_Sound_or_pactl_info_shows_Failure:_Connection_refused">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.12</span>No Sound or pactl info shows Failure: Connection refused</div>
			</a>
			
			<ul id="toc-No_Sound_or_pactl_info_shows_Failure:_Connection_refused-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Low_audio_quality_on_Bluetooth" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Low_audio_quality_on_Bluetooth">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.13</span>Low audio quality on Bluetooth</div>
			</a>
			
			<ul id="toc-Low_audio_quality_on_Bluetooth-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Noticeable_audio_delay_or_audible_pop/crack_when_starting_playback" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Noticeable_audio_delay_or_audible_pop/crack_when_starting_playback">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.14</span>Noticeable audio delay or audible pop/crack when starting playback</div>
			</a>
			
			<ul id="toc-Noticeable_audio_delay_or_audible_pop/crack_when_starting_playback-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Audio_cutting_out_when_multiple_streams_start_playing" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Audio_cutting_out_when_multiple_streams_start_playing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.15</span>Audio cutting out when multiple streams start playing</div>
			</a>
			
			<ul id="toc-Audio_cutting_out_when_multiple_streams_start_playing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Audio_is_distorted" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Audio_is_distorted">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.16</span>Audio is distorted</div>
			</a>
			
			<ul id="toc-Audio_is_distorted-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Audio_problems_after_standby" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Audio_problems_after_standby">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.17</span>Audio problems after standby</div>
			</a>
			
			<ul id="toc-Audio_problems_after_standby-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-High_latency_with_USB_DACs_(e.g._Schiit_DACs)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#High_latency_with_USB_DACs_(e.g._Schiit_DACs)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.18</span>High latency with USB DACs (e.g. Schiit DACs)</div>
			</a>
			
			<ul id="toc-High_latency_with_USB_DACs_(e.g._Schiit_DACs)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_sound_from_USB_DAC_until_30%_volume" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_sound_from_USB_DAC_until_30%_volume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.19</span>No sound from USB DAC until 30% volume</div>
			</a>
			
			<ul id="toc-No_sound_from_USB_DAC_until_30%_volume-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realtime_audio_does_not_work" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Realtime_audio_does_not_work">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.20</span>Realtime audio does not work</div>
			</a>
			
			<ul id="toc-Realtime_audio_does_not_work-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Simultaneous_output_to_multiple_sinks_on_the_same_sound_card" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Simultaneous_output_to_multiple_sinks_on_the_same_sound_card">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.21</span>Simultaneous output to multiple sinks on the same sound card</div>
			</a>
			
			<ul id="toc-Simultaneous_output_to_multiple_sinks_on_the_same_sound_card-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_notification_sounds_from_Discord" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_notification_sounds_from_Discord">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.22</span>No notification sounds from Discord</div>
			</a>
			
			<ul id="toc-No_notification_sounds_from_Discord-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-FMOD_games_crashing_under_PipeWire" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#FMOD_games_crashing_under_PipeWire">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.23</span>FMOD games crashing under PipeWire</div>
			</a>
			
			<ul id="toc-FMOD_games_crashing_under_PipeWire-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Auto-switching_is_not_working" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Auto-switching_is_not_working">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.24</span>Auto-switching is not working</div>
			</a>
			
			<ul id="toc-Auto-switching_is_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Missing_realtime_priority/crackling_under_load_after_suspend" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Missing_realtime_priority/crackling_under_load_after_suspend">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.25</span>Missing realtime priority/crackling under load after suspend</div>
			</a>
			
			<ul id="toc-Missing_realtime_priority/crackling_under_load_after_suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_sound_during_streaming_to_RAOP_devices_(Sonos_etc.)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_sound_during_streaming_to_RAOP_devices_(Sonos_etc.)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.26</span>No sound during streaming to RAOP devices (Sonos etc.)</div>
			</a>
			
			<ul id="toc-No_sound_during_streaming_to_RAOP_devices_(Sonos_etc.)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_sound_devices_show_up_in_KDE_Plasma" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_sound_devices_show_up_in_KDE_Plasma">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.27</span>No sound devices show up in KDE Plasma</div>
			</a>
			
			<ul id="toc-No_sound_devices_show_up_in_KDE_Plasma-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Video_2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Video_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Video</div>
			</a>
			
			<ul id="toc-Video_2-sublist" class="vector-toc-list">
				<li id="toc-OBS_(etc.)_display_nothing,_even_if_they_ask_for_a_window/screen" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#OBS_(etc.)_display_nothing,_even_if_they_ask_for_a_window/screen">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.1</span>OBS (etc.) display nothing, even if they ask for a window/screen</div>
			</a>
			
			<ul id="toc-OBS_(etc.)_display_nothing,_even_if_they_ask_for_a_window/screen-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">PipeWire</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-fi mw-list-item"><a href="../fi/PipeWire.html" title="PipeWire – suomi" lang="fi" hreflang="fi" class="interlanguage-link-target"><span>Suomi</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/PipeWire" title="PipeWire – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/PipeWire.html" title="PipeWire – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/PipeWire.html" title="PipeWire – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/PipeWire" title="PipeWire – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/PipeWire/Examples.html" title="PipeWire/Examples">PipeWire/Examples</a></li>
<li><a href="../en/Sound_system.html" title="Sound system">Sound system</a></li>
<li><a href="../en/WirePlumber.html" title="WirePlumber">WirePlumber</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://pipewire.org">PipeWire</a> is a new low-level multimedia framework. It aims to offer capture and playback for both audio and video with minimal latency and support for <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a>, <a href="../en/JACK_Audio_Connection_Kit.html" class="mw-redirect" title="JACK">JACK</a>, <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> and <a href="../en/GStreamer.html" title="GStreamer">GStreamer</a>-based applications.
</p>
<p>The daemon based on the framework can be configured to be both an audio server (with PulseAudio and JACK features) and a video capture server.
</p>
<p>PipeWire also supports containers like <a href="../en/Flatpak.html" title="Flatpak">Flatpak</a> and does not rely on the <code>audio</code> and <code>video</code> <a href="../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">user groups</a>. Instead, it uses a <a href="../en/Polkit.html" title="Polkit">Polkit</a>-like security model, asking Flatpak or Wayland for permission to record screen or audio.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire">pipewire</a></span> package from the official repositories. There is also <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-pipewire">lib32-pipewire</a></span> for <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> support.
</p>
<p>Pipewire uses <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a> for management of the server and automatic socket activation.
</p>
<p>Optionally, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-docs">pipewire-docs</a></span> to review the documentation.
</p>
<p>Pipewire can work as drop-in replacement for others audio servers. See <a href="#Audio">#Audio</a> for details.
</p>
<h3><span class="mw-headline" id="Session_manager">Session manager</span></h3>
<p>Like <a href="../en/JACK_Audio_Connection_Kit.html" class="mw-redirect" title="JACK">JACK</a>, PipeWire implements no connection logic internally. The burden of watching for new streams and connect them to the appropriate output device or application is left to an external component known as a session manager.
</p>
<h4><span class="mw-headline" id="WirePlumber">WirePlumber</span></h4>
<p><a href="../en/WirePlumber.html" title="WirePlumber">WirePlumber</a> is the recommended session manager. It is based on a modular design, with Lua plugins that implement the actual management functionality. <a rel="nofollow" class="external free" href="https://pipewire.pages.freedesktop.org/wireplumber/">https://pipewire.pages.freedesktop.org/wireplumber/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span>
</p>
<p>The stock configuration files are stored in <code>/usr/share/wireplumber</code>. The recommended way to customize Wireplumber is adding snippets overriding specific settings in <code>/etc/wireplumber</code> or <code>~/.config/wireplumber</code>. <a rel="nofollow" class="external autonumber" href="https://pipewire.pages.freedesktop.org/wireplumber/daemon/locations.html#config-locations">[1]</a>.
</p>
<p>WirePlumber changed its configuration format in version 0.5 from <code>.lua</code> to <code>.conf</code>. See <a rel="nofollow" class="external free" href="https://pipewire.pages.freedesktop.org/wireplumber/daemon/configuration/migration.html#config-migration">https://pipewire.pages.freedesktop.org/wireplumber/daemon/configuration/migration.html#config-migration</a> for migration instructions.
</p>
<h4><span class="mw-headline" id="PipeWire_Media_Session">PipeWire Media Session</span></h4>
<p>PipeWire Media Session is deprecated and no longer recommended. It was mostly implemented for testing and as an example for building new session managers.
</p>
<p><a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/pipewire/media-session">https://gitlab.freedesktop.org/pipewire/media-session</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-media-session">pipewire-media-session</a></span>
</p>
<h3><span class="mw-headline" id="GUI">GUI</span></h3>
<ul><li>
<b>coppwr</b> — Low level control and diagnostic GUI for PipeWire.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/dimtpap/coppwr">https://github.com/dimtpap/coppwr</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/coppwr/">coppwr</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Helvum</b> — GTK-based patchbay for PipeWire, inspired by the JACK tool <i>catia</i>. Does not save wire sets.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/pipewire/helvum">https://gitlab.freedesktop.org/pipewire/helvum</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=helvum">helvum</a></span>
</dd></dl>
<ul><li>
<b>qpwgraph</b> — Qt-based Graph/Patchbay for PipeWire, inspired by the JACK tool QjackCtl. Saves wire sets.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/rncbc/qpwgraph">https://gitlab.freedesktop.org/rncbc/qpwgraph</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qpwgraph">qpwgraph</a></span>
</dd></dl>
<ul><li>
<b>pwvucontrol</b> — Pipewire Volume Control. Alternative to pavucontrol.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/saivert/pwvucontrol">https://github.com/saivert/pwvucontrol</a> || <small>not packaged? <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/">search in AUR</a></small>
</dd></dl>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>The PipeWire package provides an initial set of configuration files in <code>/usr/share/pipewire</code>. You should not edit these files directly, as package updates will overwrite your changes. To configure PipeWire, you can copy files from <code>/usr/share/pipewire</code> to the alternate system-wide location <code>/etc/pipewire</code>, or to the user location <code>~/.config/pipewire</code>. An equally named file in a directory with a higher precedence makes the analogous files ignored. <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-PipeWire#configuration-file-pipewireconf">[2]</a>
</p>
<h3><span class="mw-headline" id="Profiles">Profiles</span></h3>
<p>Pipewire brings a custom "Pro Audio" profile in addition to the PulseAudio profiles, selectable through <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>. The effect of which is described in <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/FAQ#what-is-the-pro-audio-profile">the PipeWire wiki</a>.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<h3><span class="mw-headline" id="Audio">Audio</span></h3>
<p>PipeWire can be used as an audio server, similar to PulseAudio and JACK. It aims to replace both PulseAudio and JACK, by providing a PulseAudio-compatible server implementation and ABI-compatible libraries for JACK clients. See the blog post <a rel="nofollow" class="external text" href="https://blogs.gnome.org/uraeus/2020/09/04/pipewire-late-summer-update-2020/">PipeWire Late Summer Update 2020</a> for more information.
</p>
<p>First, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-audio">pipewire-audio</a></span>. Depending on the type of audio clients, you may also need to take some extra steps. You may need to install additional firmware for your audio device, see <a href="../en/Advanced_Linux_Sound_Architecture.html#ALSA_firmware" title="Advanced Linux Sound Architecture">Advanced Linux Sound Architecture#ALSA firmware</a>.
</p>
<h4><span class="mw-headline" id="ALSA_clients">ALSA clients</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-alsa">pipewire-alsa</a></span> (and remove <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span> if it was installed) to route all applications using the ALSA API through PipeWire.
</p>
<h4><span class="mw-headline" id="PulseAudio_clients">PulseAudio clients</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-pulse">pipewire-pulse</a></span>. It will replace <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio">pulseaudio</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span>. Reboot, re-login or <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">stop</a> <code>pulseaudio.service</code> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the <code>pipewire-pulse.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a> to see the effect.
</p>
<p>Normally, no further action is needed as the user service <code>pipewire-pulse.socket</code> should be enabled automatically by the package. To check if the replacement is working, run the following command for the <i>Server Name</i> and default input/output:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pactl info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Server Name: PulseAudio (on PipeWire <i>x.y.z</i>)
...
Default Sink: alsa_output.{bus}-{device}.{profile}
Default Source: alsa_input.{bus}-{device}.{profile}
...</pre>
<p><span class="plainlinks archwiki-template-man" title="$ man 1 pactl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pactl.1">pactl(1)</a></span> is provided by PulseAudio client library package (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libpulse">libpulse</a></span>), which is installed with <i>pipewire-pulse</i> as a dependency.
</p>
<h5><span class="mw-headline" id="Setting_overall_or_individual_channel_volume">Setting overall or individual channel volume</span></h5>
<p>To adjust output channel volume, the <i>sink</i> needs to be specified using <code>pactl get-sink-volume {sink</code>} using the value of <i>Default Sink:</i> (above) or <i>Name:</i> (below), default sink device (<i>@DEFAULT_SINK@</i>), or <i>Sink #</i> (e.g. <i>1</i> below):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pactl list sinks | grep -B1 -A9 State:</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Sink #1
        State: RUNNING
        Name: alsa_output.pci-0000_2d_00.4.analog-surround-51
...
        Driver: PipeWire
...
        Mute: no
        Volume: front-left: 65536 / 100% / 0.00 dB,   front-right: 65536 / 100% / 0.00 dB,   rear-left: 65536 / 100% / 0.00 dB,   rear-right: 65536 / 100% / 0.00 dB,   front-center: 65536 / 100% / 0.00 dB,   lfe: 65536 / 100% / 0.00 dB
                balance 0.00</pre>
<p>Hint: if audio is playing, <span class="plainlinks archwiki-template-man" title="$ man 1 grep"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/grep.1">grep(1)</a></span> for <i>RUNNING</i> as other devices will be <i>SUSPENDED</i>.
</p>
<p>
The <i>balance</i> ratio is calculated automatically. To set the overall volume of the default device use: </p>
<pre>pactl set-sink-volume @DEFAULT_SINK@ 75%</pre>
<p>To set individual channels, provide each channel volume separately:
</p>
<pre>pactl set-sink-volume @DEFAULT_SINK@ 100% 75% 100% 75% 100% 100%</pre>
<p><i>Source</i> inputs are handled similarly.  For further configuration (e.g. regarding modules) see the official upstream Wiki about <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Migrate-PulseAudio">Migration from PulseAudio</a> and <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-PulseAudio">Pipewire-Pulse Configuration</a>.
</p>
<h4><span class="mw-headline" id="JACK_clients">JACK clients</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-jack">pipewire-jack</a></span> for <a href="../en/JACK_Audio_Connection_Kit.html" class="mw-redirect" title="JACK">JACK</a> support. There is also <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-pipewire-jack">lib32-pipewire-jack</a></span> for <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> support.
</p>
<p><span class="plainlinks archwiki-template-man" title="$ man 1 pw-jack"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pw-jack.1">pw-jack(1)</a></span> may be used to start JACK clients, but it is technically not required, as it only serves as a wrapper around the <code>PIPEWIRE_REMOTE</code>, <code>PIPEWIRE_DEBUG</code> and <code>PIPEWIRE_LATENCY</code> environment variables.
</p>
<p>It is possible to request a custom buffer size by setting a quotient of buffersize/samplerate (which equals the block latency in seconds):
</p>
<pre>PIPEWIRE_LATENCY="128/48000" <i>application</i>
</pre>
<h4><span class="mw-headline" id="Bluetooth_devices">Bluetooth devices</span></h4>
<p>PipeWire handles <a href="../en/Bluetooth.html#Audio" title="Bluetooth">Bluetooth audio devices</a> if the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-audio">pipewire-audio</a></span> package is installed.
</p>
<h5><span class="mw-headline" id="Automatic_profile_selection">Automatic profile selection</span></h5>
<p><a href="../en/WirePlumber.html" title="WirePlumber">WirePlumber</a> has profile auto-switching enabled by default. It can automatically switch between HSP/HFP and A2DP profiles whenever an input stream is detected. You can disable it with:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/wireplumber.conf.d/11-bluetooth-policy.conf (or ~/.config/wireplumber/wireplumber.conf.d/11-bluetooth-policy.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">wireplumber.settings = {
    bluetooth.autoswitch-to-headset-profile = false
}</pre>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-media-session">pipewire-media-session</a></span> has it disabled by default. You can set <code>bluez5.autoswitch-profile</code> property to <code>true</code> to enable it:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/media-session.d/bluez-monitor.conf (or ~/.config/pipewire/media-session.d/bluez-monitor.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
rules = [
    {
        ...
        actions = {
            update-props = {
                ...
                <b>bluez5.autoswitch-profile = true</b>
...</pre>
<h4><span class="mw-headline" id="PipeWire_patch_sets_for_command_line">PipeWire patch sets for command line</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qpwgraph">qpwgraph</a></span> can be used to visualize and create connections, and also save and load patch sets.
</p>
<p>For non-GUI needs, the following are bash scripts to save wiresets, load wiresets, and dewire all connections. For saving and loading, use a command-line parameter for the filename.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pw-savewires</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

if [[ "$#" -ne 1 ]]; then
	echo
	echo 'usage: pw-savewires filename'
	echo
	exit 0
fi

rm $1 &amp;&gt; /dev/null
while IFS= read -r line; do
	link_on=`echo $line | cut -f 4 -d '"'`
	link_op=`echo $line | cut -f 6 -d '"'`
	link_in=`echo $line | cut -f 8 -d '"'`
	link_ip=`echo $line | cut -f 10 -d '"'`
	echo "Saving: " "'"$link_on:$link_op"','"$link_in:$link_ip"'"
	echo "'"$link_on:$link_op"','"$link_in:$link_ip"'" &gt;&gt; $1
done &lt; &lt;(pw-cli dump short link)
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pw-loadwires</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/python

import sys
import csv
import os

if len(sys.argv) &lt; 2:
	print('\n usage: pw-loadwires filename\n')
	quit()

with open(sys.argv[1], newline='') as csvfile:
	pwwreader = csv.reader(csvfile, delimiter=',', quotechar='"')
	for row in pwwreader:
		print('Loading:  ' + row[0] + ' --&gt; ' + row[1])
		process = os.popen('pw-link ' + row[0] + ' ' + row[1])
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pw-dewire</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
while read -r line; do
	echo 'Dewiring: ' $line '...'
	pw-link -d $line
done &lt; &lt;(pw-cli dump short link {{!}} grep -Eo '^[0-9]+')
</pre>
<h4><span class="mw-headline" id="Sharing_audio_devices_with_computers_on_the_network">Sharing audio devices with computers on the network</span></h4>
<p>While PipeWire itself is not network transparent, its pulse implementation supports <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-PulseAudio#network-support">network streaming</a>. An easy way to share audio between computers on the network is to use the <a href="../en/Avahi.html" title="Avahi">Avahi</a> daemon for discovery. To enable this functionality, <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-zeroconf">pipewire-zeroconf</a></span> package.
</p>
<p>Make sure that the <code>avahi-daemon.service</code> is running (and UDP port <code>5353</code> is open if using a <a href="../en/Avahi.html#Firewall" title="Avahi">firewall</a>) on all computers that will be sharing audio.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some GUI volume managers hide network cards by default. (ex: in Plasma one has to "Configure Audio Volume..." and check "Show virtual devices".</div>
<p>To share the local audio devices load the appropriate modules on the host (make sure to use the local IP address):
</p>
<pre>$ pactl load-module module-native-protocol-tcp listen=<i>192.168.1.10</i>
$ pactl load-module module-zeroconf-publish
</pre>
<p>Then load the discovery module on the clients:
</p>
<pre>$ pactl load-module module-zeroconf-discover
</pre>
<p>It is also possible to load the modules automatically by creating a dedicated configuration file:
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Use <code>context.modules</code> instead of <code>context.exec</code> as below. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/pipewire-pulse.conf.d/50-network-party.conf (or ~/.config/pipewire/pipewire-pulse.conf.d/50-network-party.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">context.exec = [
    { path = "pactl" args = "load-module module-native-protocol-tcp" }
    { path = "pactl" args = "load-module module-zeroconf-discover" }
    { path = "pactl" args = "load-module module-zeroconf-publish" }
]</pre>
<h5><span class="mw-headline" id="Streaming_audio_to_an_AirPlay_receiver">Streaming audio to an AirPlay receiver</span></h5>
<p>It is possible to stream audio to a device that is posing as an <a href="https://en.wikipedia.org/wiki/AirPlay#Receivers" class="extiw" title="wikipedia:AirPlay">AirPlay Receiver</a>. To enable this functionality, load the <a rel="nofollow" class="external text" href="https://docs.pipewire.org/page_module_raop_discover.html">RAOP Discover module</a>:
</p>
<pre>$ pactl load-module module-raop-discover
</pre>
<p>It is also possible to load this module automatically by creating a dedicated configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/pipewire.conf.d/raop-discover.conf (or ~/.config/pipewire/pipewire.conf.d/raop-discover.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">context.modules = [
   {
       name = libpipewire-module-raop-discover
       args = { }
   }
]</pre>
<p>Some speakers' AirPlay implementations (like Sonos AirPlay 2 speakers) may require opening up ports 6001 and 6002 for incoming UDP traffic on your source device.
</p>
<h4><span class="mw-headline" id="Run_PipeWire_on_top_of_native_JACK">Run PipeWire on top of native JACK</span></h4>
<p>PipeWire can also run as a <a href="../en/JACK_Audio_Connection_Kit.html" class="mw-redirect" title="JACK">JACK</a> client on top of the native JACK daemon if desired.
</p>
<p>See <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/JACK">JACK and PipeWire (PipeWire wiki)</a> and <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-JACK#jack-bridge">JACK Bridge (PipeWire wiki)</a> for more information and additional configuration (like available channels for example).
</p>
<p>To use it install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-jack-client">pipewire-jack-client</a></span> and start JACK. Pipewire should be bridged automatically.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Since pipewire <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/releases/0.3.81">0.3.81</a> loading the jackdbus module is done automatically and is no longer necessary.
<p>It can manually be loaded (as explained by <span class="plainlinks archwiki-template-man" title="$ man 1 pactl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pactl.1">pactl(1)</a></span>) like a PulseAudio module: <code>pactl load-module module-jackdbus-detect</code> before starting jack.
</p>
</div>
<h4><span class="mw-headline" id="Use_ALSA_dmix_devices_as_PipeWire_sinks">Use ALSA dmix devices as PipeWire sinks</span></h4>
<p>It is possible to have a PipeWire server (or multiple, for each user) output to ALSA via <a href="../en/Advanced_Linux_Sound_Architecture.html#Dmix" title="Advanced Linux Sound Architecture">ALSA dmix devices</a>. This allows you to use ALSA as the primary audio output system while being able to use non-ALSA devices such as Bluetooth headphones.
</p>
<h5><span class="mw-headline" id="ALSA_dmix_setup">ALSA dmix setup</span></h5>
<p>Suppose you have two cards, <code>PCH</code> and <code>HDMI</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/proc/asound/cards</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> 0 [PCH            ]: HDA-Intel - HDA Intel PCH
                      HDA Intel PCH at 0xdff40000 irq 146
 1 [HDMI           ]: HDA-Intel - HDA ATI HDMI
                      HDA ATI HDMI at 0xdfe60000 irq 147
</pre>
<p>and your PCMs look like:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/proc/asound/pcm</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">00-00: ALC1220 Analog : ALC1220 Analog : playback 1 : capture 1
00-02: ALC1220 Alt Analog : ALC1220 Alt Analog : capture 1
01-03: HDMI 0 : HDMI 0 : playback 1
01-07: HDMI 1 : HDMI 1 : playback 1
01-08: HDMI 2 : HDMI 2 : playback 1
01-09: HDMI 3 : HDMI 3 : playback 1
01-10: HDMI 4 : HDMI 4 : playback 1
01-11: HDMI 5 : HDMI 5 : playback 1
</pre>
<p>and suppose your ALSA configuration looks something like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/asound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ctl.!default {
  type hw
  card PCH
}

pcm.!default {
  type plug
  slave.pcm "<b>dmix:PCH,0</b>"
}

pcm.dhdmi {
  type plug
  slave.pcm "<b>dmix:HDMI,9</b>"
}
</pre>
<p>In this particular example, the dmix devices would be <code>dmix:PCH,0</code> and <code>dmix:HDMI,9</code>.
</p>
<h5><span class="mw-headline" id="PipeWire_dmix_setup">PipeWire dmix setup</span></h5>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<p>First of all, stop <code>wireplumber</code> from monitoring and adding hardware ALSA devices by commenting out <code>alsa_monitor.enable()</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/main.lua.d/90-enable-all.lua (or ~/.config/wireplumber/main.lua.d/90-enable-all.lua)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
-- Load devices
<b>-- alsa_monitor.enable()</b>
v4l2_monitor.enable()
libcamera_monitor.enable()
...
</pre>
<p>Now, configure <code>pipewire</code> to use dmix devices. The default configuration file (<code>/usr/share/pipewire/pipewire.conf</code>) contains a <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/blob/0.3.59/src/daemon/pipewire.conf.in#L219-239">commented out example</a> which you can use as a basis.
</p>
<p>Add your own element to the <code>context.objects</code> array:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/main.lua.d/90-enable-all.lua (or ~/.config/pipewire/pipewire.conf.d/alsa-dmix.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">context.objects = [
    # We do not start with dmix, but with an input device.
    # Do not forget to add an input device.
    # On a friend's Laptop, I saw Zoom having a nervous
    # breakdown and endlessly crying because no input device
    # was configured! You have been warned.
    { factory = adapter
        args = {
            factory.name           = api.alsa.pcm.source
            node.name              = "alsa-mic-internal" # name of pulse device (mpv)
            node.description       = "Mic Internal" # name of pulse device (pavucontrol)
            media.class            = "Audio/Source"
            api.alsa.path          = "<b>hw:PCH,0</b>"
        }
    }
    # Okay, now we add our dmix PCMs
    { factory = adapter
        args = {
            factory.name           = api.alsa.pcm.sink # sink for dmix
            node.name              = "alsa-dmix-internal" # name of pulse device (mpv)
            node.description       = "PCM Internal" # name of pulse device (pavucontrol)
            media.class            = "Audio/Sink" # Sink for dmix
            api.alsa.path          = "<b>dmix:PCH,0</b>"
        }
    }

    { factory = adapter
        args = {
            factory.name           = api.alsa.pcm.sink # sink for dmix
            node.name              = "alsa-dmix-hdmi" # name of pulse device (mpv)
            node.description       = "PCM HDMI" # name of pulse device (pavucontrol)
            media.class            = "Audio/Sink" # Sink for dmix
            # remember this is a non-default dmix from /etc/asound.conf
            api.alsa.path          = "<b>dmix:HDMI,9</b>"
        }
    }
]</pre>
<p>As a user (non-root), check out the output of <code>wpctl status</code>, and set the default input(source) and output(sink) devices to your liking with <code>wpctl set-default <i>ID</i></code>. <code><i>ID</i></code> is the number before sink/source names.
</p>
<p>Now, you can fully test your configuration.
</p>
<h4><span class="mw-headline" id="Switching_between_device_profiles">Switching between device profiles</span></h4>
<p>Some hardware audio devices, like <code>snd_hda_intel</code>, function differently depending on which profile the device is running in. In the case of <code>snd_hda_intel</code>, there are separate profiles for HDMI and analog output.
</p>
<p>Switching to HDMI with WirePlumber:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ wpctl set-profile &lt;device-ID&gt; 3
$ wpctl status
</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
├─ Sinks:
│  *   53. Built-in Audio Digital Stereo (HDMI) [vol: 1.00]
...</pre>
<p>Switching to analog with WirePlumber:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ wpctl set-profile &lt;device-ID&gt; 1
$ wpctl status
</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
├─ Sinks:
│  *   51. Built-in Audio Analog Stereo        [vol: 0.60]
...</pre>
<h3><span class="mw-headline" id="WebRTC_screen_sharing">WebRTC screen sharing</span></h3>
<p>Most applications used to rely on X11 for capturing the desktop (or individual applications), for example when using WebRTC in web browsers (e.g. on Google Meet). On Wayland, the screen sharing mechanism is handled through the <a href="../en/XDG_Desktop_Portal.html" title="XDG Desktop Portal">XDG Desktop Portal</a> and PipeWire, which enables sharing content under Wayland with fine-grained access controls.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Test whether WebRTC screen sharing is working by using <a rel="nofollow" class="external text" href="https://mozilla.github.io/webrtc-landing/gum_test.html">Mozilla's GetUserMedia WebRTC test page</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal">xdg-desktop-portal</a></span> 1.10.0 fixed a mismatch between specification and implementation of its D-Bus interface. <a rel="nofollow" class="external autonumber" href="https://github.com/flatpak/xdg-desktop-portal/pull/609">[3]</a> Hence, some clients may not work with xdg-desktop-portal 1.10.0 or newer.</div>
<p>Firefox (84+) and Chromium (110+) support this method by default, while on older versions of Chromium (73+), one needs to enable <a rel="nofollow" class="external text" href="https://bugs.chromium.org/p/chromium/issues/detail?id=682122">WebRTC PipeWire support</a> by setting the corresponding (experimental) flag at the URL <code>chrome://flags/#enable-webrtc-pipewire-capturer</code> or via CLI argument <code>--enable-features=WebRTCPipeWireCapturer</code>.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=obs-studio">obs-studio</a></span> (27+) supports this method by using the new PipeWire capture source.
</p>
<h3><span class="mw-headline" id="Video">Video</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-v4l2">pipewire-v4l2</a></span> (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<p>Although the software is not yet production-ready, it is safe to play around with. Most applications that rely on <a href="../en/GStreamer.html" title="GStreamer">GStreamer</a> to handle e.g. video streams should work out-of-the-box using the PipeWire GStreamer plugin, see <a href="../en/GStreamer.html#PipeWire" title="GStreamer">GStreamer#PipeWire</a>. Applications like e.g. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cheese">cheese</a></span> are therefore already able to share video input using it.
</p>
<p>Using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-v4l2">pipewire-v4l2</a></span>, it should also be possible to use the <code>pw-v4l2</code> script to preload a library (<code>/lib/pipewire-0.3/v4l2/libpw-v4l2.so</code>) that intercepts v4l2 calls and routes video through pipewire.
</p>
<h2><span class="mw-headline" id="Audio_post-processing">Audio post-processing</span></h2>
<h3><span class="mw-headline" id="Pipewire_module-filter-chain">Pipewire module-filter-chain</span></h3>
<p>Pipewire has an internal module called <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Filter-Chain">filter-chain</a> that can create nodes to process audio input and output. See <code>/usr/share/pipewire/filter-chain/</code> for examples including equalization, virtual surround sound, LADSPA plugins and channel mixing.
</p>
<h4><span class="mw-headline" id="Systemwide_parametric_equalization">Systemwide parametric equalization</span></h4>
<p>Copy <code>/usr/share/pipewire/filter-chain/sink-eq6.conf</code> to <code>/etc/pipewire</code> (or <code>~/.config/pipewire</code>).
</p>
<p>Then edit <code>sink-eq6.conf</code> to incorporate the desired parameters. For headphones, these can be obtained from <a rel="nofollow" class="external text" href="https://old.reddit.com/r/oratory1990/wiki/index">Oratory1990's database</a> or, if not listed there, the <a rel="nofollow" class="external text" href="https://github.com/jaakkopasanen/AutoEq/tree/master/results/">AutoEQ project</a>.
</p>
<p>If you require a pre-amp, modify <code>eq_band_1</code> to apply a <code>bq_highshelf</code> filter at frequency 0Hz with a negative gain (gains from -120 to +20dB supported):
</p>
<pre>label = bq_highshelf
control = { "Freq" = 0 "Q" = 1.0 "Gain" = -7.5 }
</pre>
<p>For more than 6 bands, add more entries to the <code>nodes</code> list and corresponding <code>links</code> connecting one filter ":Out" to the next filter ":In", for instance to increase to 11 bands (preamp + 10):
</p>
<pre>                    { output = "eq_band_6:Out" input = "eq_band_7:In" }
                    { output = "eq_band_7:Out" input = "eq_band_8:In" }
                    { output = "eq_band_8:Out" input = "eq_band_9:In" }
                    { output = "eq_band_9:Out" input = "eq_band_10:In" }
                    { output = "eq_band_10:Out" input = "eq_band_11:In" }
</pre>
<p>Restart Pipewire, select "Equalizer Sink" as your default sound output device; this should then apply to all applications.
</p>
<h3><span class="mw-headline" id="EasyEffects">EasyEffects</span></h3>
<p>EasyEffects (former PulseEffects) is a GTK utility which provides a large array of audio effects and filters to individual application output streams and microphone input streams. Notable effects include an input/output equalizer, output loudness equalization and bass enhancement, input de-esser and noise reduction plug-in. See <a rel="nofollow" class="external text" href="https://github.com/wwmm/easyeffects">the GitHub page</a> for a full list of effects.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Firefox has an issue with microphone stream, see <a rel="nofollow" class="external text" href="https://github.com/wwmm/easyeffects/issues/957#issuecomment-830640221">Github issue</a>.</div>
<p>In order to use EasyEffects, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=easyeffects">easyeffects</a></span>. See <a rel="nofollow" class="external text" href="https://github.com/wwmm/easyeffects/wiki/Community-presets">Community Presets</a> for a collection of preset configurations. See <a rel="nofollow" class="external text" href="https://github.com/jaakkopasanen/AutoEq">AutoEq</a> for collection of algorithmically generated EQ presets for headphones.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> For PulseEffects legacy version, see <a href="../en/PulseAudio.html#PulseEffects" title="PulseAudio">PulseAudio#PulseEffects</a>.</div>
<h3><span class="mw-headline" id="NoiseTorch">NoiseTorch</span></h3>
<p>NoiseTorch is an alternative way for noise suppression, packaged with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/noisetorch/">noisetorch</a></span><sup><small>AUR</small></sup>. There also exists <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/noisetorch-git/">noisetorch-git</a></span><sup><small>AUR</small></sup>.
</p>
<p>After starting it the module can be loaded for the selected microphone. It is possible to adjust the voice activation threshold, which should be set to the highest level, not filtering out any actual voice.
</p>
<p>You can start audio processing with systemd automatically, see <a rel="nofollow" class="external autonumber" href="https://github.com/noisetorch/NoiseTorch/wiki/Start-automatically-with-Systemd">[4]</a>. Note that the noisetorch binary path is different if installed from AUR.
</p>
<h3><span class="mw-headline" id="Noise_suppression_for_voice">Noise suppression for voice</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=noise-suppression-for-voice">noise-suppression-for-voice</a></span> package.
</p>
<p>Then simply follow the instructions given on <a rel="nofollow" class="external text" href="https://github.com/werman/noise-suppression-for-voice#pipewire">GitHub</a>.
</p>
<h3><span class="mw-headline" id="JamesDSP">JamesDSP</span></h3>
<p><a rel="nofollow" class="external text" href="https://github.com/Audio4Linux/JDSP4Linux#readme">JamesDSP for Linux</a> (available as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jamesdsp/">jamesdsp</a></span><sup><small>AUR</small></sup>) provides open-source sound effects for PipeWire and PulseAudio. It uses its own effects engine and without depending on LADSPA, Calf, etc. JamesDSP was initially published as an audio effects processor for Android devices.
</p>
<h3>
<span id="Using_LADSPA.2C_LV2_and_VST_plugins_with_PulseAudio"></span><span class="mw-headline" id="Using_LADSPA,_LV2_and_VST_plugins_with_PulseAudio">Using LADSPA, LV2 and VST plugins with PulseAudio</span>
</h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Does this section relate to using the pulseaudio daemon or the pipewire's interface for pulseaudio clients? (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<p>You can create input/output destinations to connect <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> to Carla's audio plug-ins.
</p>
<p>If you want to choose between the full list of available LADSPA, LV2 and VST plugins, you can apply them using a custom Pulseaudio null sink and Carla Jack host. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-pulse">pipewire-pulse</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-jack">pipewire-jack</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=carla">carla</a></span>. At the begin, create a new PulseAudio null sink named <code>default_null_sink</code>.
</p>
<pre>pactl load-module module-null-sink object.linger=1 media.class=Audio/Sink sink_name=default_null_sink channel_map=FL,FR
</pre>
<p>Start Carla through Pipewire, <code>pw-jack carla-rack</code>. In <i>Rack</i> tab add whichever plugin you want. Make sure they are <i>stereo</i> type. You can change their order, the one on top of the list will be the first to receive the audio stream, just like in EasyEffects. Afterwards move to <i>Patchbay</i> tab and connect the <code>default_null_sink</code> L/R monitors to Carla inputs, then Carla outputs to the playbacks of your desired device (speakers, earphones, HDMI, etc). Save the configuration to a local folder, i.e. <code>~/Documents/carla_sink_effects.carxp</code>.
</p>
<p>You can test the effects while a multimedia application is reproducing audio, i.e. watching a video on a website through Firefox. There are two methods to do it. The first one, inside Carla <i>Patchbay</i> tab, disconnecting all Firefox connections and linking its L/R outputs to <code>default_null_sink</code> playbacks. The second through <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>, locating Firefox audio stream and redirecting it to <code>default_null_sink</code> (this should remember the connection to automatically redirect the application to the same sink on the next instance).
</p>
<p>To apply these settings at startup, create two systemd user service units:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/jack-carla-rack.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Load Carla Rack JACK host

[Service]
PassEnvironment="PIPEWIRE_LINK_PASSIVE=true"
Type=exec
ExecStart=/usr/bin/pw-jack carla-rack -n

[Install]
WantedBy=default.target</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/pulseaudio-null-sink@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Load %i Pulseaudio null sink
Before=jack-carla-rack.service
After=pipewire-pulse.service

[Service]
Type=oneshot
ExecStart=/usr/bin/pactl load-module module-null-sink object.linger=1 media.class=Audio/Sink sink_name=%i channel_map=FL,FR
ExecStop=/usr/bin/pactl unload-module module-null-sink
RemainAfterExit=yes

[Install]
WantedBy=default.target</pre>
<p>Then override <i>jack-carla-rack</i> service specifying the full path of your Carla configuration at <i>Environment</i> directive:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/jack-carla-rack.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Environment="CARLA_CONFIG_FILE=/home/username/Documents/carla_sink_effects.carxp"
ExecStart=
ExecStart=/usr/bin/pw-jack carla-rack -n $CARLA_CONFIG_FILE</pre>
<p>At last, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the <code>pulseaudio-null-sink@default_null_sink.service</code> and <code>jack-carla-rack.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user units</a>.
</p>
<p>Note that if you set the <code>default_null_sink</code> as the default device in system settings, all applications will be redirected to it and the volume keys will change its level, not the one on the speakers. If you want to control volume speakers, leave them as the default in system settings and redirect your desired application to <code>default_null_sink</code> inside pavucontrol (Pipewire compatibility layer will remember the connection on the next instance of the same application).
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="/index.php?title=PipeWire/Troubleshooting&amp;action=edit&amp;redlink=1" class="new" title="PipeWire/Troubleshooting (page does not exist)">PipeWire/Troubleshooting</a>.</b></p>
<div>
<b>Notes:</b> This section is long enough to be split into a dedicated subpage. (Discuss in <a href="../en/Talk:PipeWire.html#Move_Troubleshooting_into_a_new_separate_page" title="Talk:PipeWire">Talk:PipeWire#Move Troubleshooting into a new separate page</a>)</div>
</div>
<h3><span class="mw-headline" id="Audio_2">Audio</span></h3>
<h4><span class="mw-headline" id="Microphone_is_not_detected_by_PipeWire">Microphone is not detected by PipeWire</span></h4>
<p>PipeWire's <code>alsa-monitor</code> module uses <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-card-profiles">alsa-card-profiles</a></span> to detect devices by default. If this is not working for you, try to turn off <code>api.alsa.use-acp</code>, or optionally turn on <code>api.alsa.use-ucm</code> in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/wireplumber.conf.d/50-alsa-config.conf (or ~/.config/wireplumber/wireplumber.conf.d/50-alsa-config.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">monitor.alsa.properties = {
  # Use ALSA-Card-Profile devices. They use UCM or the profile
  # configuration to configure the device and mixer settings.
  <b># alsa.use-acp = true</b>
  # Use UCM instead of profile when available. Can be disabled
  # to skip trying to use the UCM profile.
  <b>alsa.use-ucm = true</b>
}</pre>
<p><br>
With <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-media-session">pipewire-media-session</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/media-session.d/alsa-monitor.conf (or ~/.config/pipewire/media-session.d/alsa-monitor.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
rules = [
    {
        ...
        actions = {
        update-props = {
            ...
            <b>api.alsa.use-acp = false</b>
...</pre>
<p>Then, restart WirePlumber and check available devices:
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> Option <code>--list-targets</code> is no longer available in the recent versions of <code>pw-record</code>; in order to list objects use either <code>wpctl status</code> or <code>pw-cli ls</code> or <code>pw-dump</code> instead. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pw-record --list-targets</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Available targets ("*" denotes default): 62
	58: description="Built-in Audio" prio=1872
	60: description="Built-in Audio" prio=2000
*	62: description="Built-in Audio (Loopback PCM)" prio=1984</pre>
<p>An alternative solution suggested in <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/2332">this PipeWire issue</a> is to add the microphone manually. First of all, make sure the microphone is detected by ALSA.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ arecord -l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">**** List of CAPTURE Hardware Devices ****
card <i>card_number</i>: <i>card_name</i>, device <i>device_number</i>: <i>device_name</i>
  ...
</pre>
<p>Choose your microphone from the list, and to further test the microphone, run the following commands.
</p>
<pre>$ arecord --duration=5 --format=dat --device=hw:<i>card_number</i>,<i>device_number</i> test-mic.wav # record from the mic
$ aplay test-mic.wav # play it</pre>
<p>If the microphone is working with <code>arecord</code>, but not detected by PipeWire, try to add a config file to manually add this device.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/pipewire.conf.d/microphone.conf (or ~/.config/pipewire/pipewire.conf.d/microphone.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">context.objects = [
    { factory = adapter
        args = {
            factory.name           = api.alsa.pcm.source
            node.name              = "microphone"
            node.description       = "Undetected Microphone"
            media.class            = "Audio/Source"
            api.alsa.path          = "hw:<i>card_number</i>,<i>device_number</i>"
        }
    }
]</pre>
<p>And then restart PipeWire to reload the config.
</p>
<h4><span class="mw-headline" id="Sound_does_not_automatically_switch_when_connecting_a_new_device">Sound does not automatically switch when connecting a new device</span></h4>
<p>To automatically switch to newly connected devices, create this file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/pipewire-pulse.conf.d/switch-on-connect.conf (or ~/.config/pipewire/pipewire-pulse.conf.d/switch-on-connect.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># override for pipewire-pulse.conf file
pulse.cmd = [
    { cmd = "load-module" args = "module-always-sink" flags = [ ] }
    { cmd = "load-module" args = "module-switch-on-connect" }
]</pre>
<h4><span class="mw-headline" id="Sound_does_not_automatically_switch_to_Bluetooth_headphones">Sound does not automatically switch to Bluetooth headphones</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> The linked upstream issue is specific to the xfce pulseaudio panel plugin. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<p>Run <code>pactl load-module module-switch-on-connect</code> and configure your desktop environment to automatically run that command on login. You might need to execute <code>wpctl set-default &lt;id&gt;</code>. The <code>&lt;id&gt;</code> may be found using output of <code>wpctl status</code>. See <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/wireplumber/-/issues/89">wireplumber issue #89</a> for more details.
</p>
<h4><span class="mw-headline" id="No_sound_after_connecting_to_Bluetooth_device">No sound after connecting to Bluetooth device</span></h4>
<p>As of 2020-12-07, if there is no sound after connecting a Bluetooth device, you might need to switch the default sink and/or move a sink input to the correct sink. Use <code>pactl list sinks</code> to list the available sinks and <code>pactl set-default-sink</code> to switch the default sink to the Bluetooth device. This can be automated via <a href="../en/Udev.html" title="Udev">udev</a> using a script similar to <a rel="nofollow" class="external text" href="https://gist.github.com/tinywrkb/04e7fd644afa9b92d33a3a99ab07ee9e">this one</a>.
</p>
<p>See this <a rel="nofollow" class="external text" href="https://www.reddit.com/r/archlinux/comments/jydd02/pipewirepulse_03164_in_testing_now_replaces/gd3m7fu/?context=3">Reddit thread</a> for a discussion of the issue. According to author of the script, the headset profile (HSP) might still have problems.
</p>
<h4>
<span id="No_sound_in_mpv.2C_vlc.2C_totem.2C_but_sound_works_in_web_browser_and_GNOME_speaker_test"></span><span class="mw-headline" id="No_sound_in_mpv,_vlc,_totem,_but_sound_works_in_web_browser_and_GNOME_speaker_test">No sound in mpv, vlc, totem, but sound works in web browser and GNOME speaker test</span>
</h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> The writing style is not wiki, but more like a blog. It needs a rephrase + shortening. Sub chapters are overkill as well. Issue root cause is guessed not verified.  (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<h5><span class="mw-headline" id="Condition_Description">Condition Description</span></h5>
<p>The best tool to verify the condition of this issue is to use <code>mpv</code> on a file that's expected to work with installed codecs:
</p>
<pre>mpv --ao=alsa test_file.mpv
mpv --ao=pcm test_file.mpv
mpv --ao=jack test_file.mpv
mpv --ao=pulse test_file.mpv
mpv --ao=openal test_file.mpv
</pre>
<p>This recipie applies if some or all of the above tests produce sound and the same test with <code>pipewire</code> option does not produce sound:
</p>
<pre> mpv --ao=pipewire test_file.mpv
</pre>
<p>Gnome desktop speaker test and web browser 'youtube' produce valid sound outcomes.  
</p>
<p>Switching inputs, muting, unmuting, changing volume in Gnome does not resolve the issue.
</p>
<p>Sink status reported by <code>pactl list sink</code> as 'SUSPENDED' is of no concern, because status properly changes when running video through a web browser.
</p>
<p>Use of <code>pactl info</code> does not point to any obvious issues.  
</p>
<p>Inspection of relevant <code>systemd</code> unit logs does not point to any obvious issues.
</p>
<h5><span class="mw-headline" id="Reason_for_the_issue">Reason for the issue</span></h5>
<p>It seems that a path from <code>pipewire</code> to hardware got muted somehow.  The original author does not know how to identify and point out at the issue using command line tooling.
</p>
<h5><span class="mw-headline" id="Solution">Solution</span></h5>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> package.  Run <code>pavucontrol</code>, select appropriate source and then use Mute button to mute and unmute the source while <code>mpv --ao=pipewire test.mp4</code> video is running.
</p>
<h4><span class="mw-headline" id="Low_volume">Low volume</span></h4>
<p>After replacing PulseAudio with Pipewire, sound may work fine, but after a reboot, the volume becomes intolerably low.
</p>
<p>Open <code>alsamixer</code>, use <code>F6</code> to select the proper soundcard, and make sure the ALSA volumes are at 100%. <code>alsactl</code> should maintain this setting after reboot.
</p>
<h4><span class="mw-headline" id="Increasing_RLIMIT_MEMLOCK">Increasing RLIMIT_MEMLOCK</span></h4>
<pre>Dec 13 11:11:11 HOST pipewire-pulse[99999]: Failed to mlock memory 0x7f4f659d8000 32832: This is not a problem but for best performance, consider increasing RLIMIT_MEMLOCK
</pre>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=realtime-privileges">realtime-privileges</a></span> and add your own user to the <code>realtime</code> group.
</p>
<p>Alternatively, increasing memlock from 64kB to 128kB seems enough to fix this. If you are running <code>pipewire-pulse</code> under <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a>, add:
</p>
<pre>username	soft	memlock	64
username	hard	memlock	128
</pre>
<p>to <code>/etc/security/limits.d/username.conf</code>
</p>
<h4><span class="mw-headline" id="Changing_the_default_sample_rate">Changing the default sample rate</span></h4>
<p>By default PipeWire sets a fixed global sample rate of 48kHz. If you need to change it (e.g. you own a DAC supporting a higher value), you can set a new default:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/pipewire.conf (or ~/.config/pipewire/pipewire.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
context.properties = {
    ...
    <b>default.clock.rate          = <i>sample_rate</i></b>
    ...</pre>
<h4>
<span id="Changing_the_allowed_sample_rate.28s.29"></span><span class="mw-headline" id="Changing_the_allowed_sample_rate(s)">Changing the allowed sample rate(s)</span>
</h4>
<p>PipeWire can also change dynamically the output sample rates supported by your DAC. The sample rate follows the sample rate of the audio stream being played.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pipewire/pipewire.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
context.properties = {
    ...
    <b>default.clock.allowed-rates = [ <i>sample_rate_1</i> <i>sample_rate_2</i> <i>sample_rate_3</i> ... ]</b>
    ...</pre>
<p>for example, <code>[ 44100 48000 88200 96000 ]</code>.
</p>
<p>According to <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/1523">the developer</a>: "PipeWire allows up to 16 different sample rates and will switch when possible". That means, with configuration above, <b>no resampling is done</b> when supported. Since PipeWire <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/releases/0.3.61#pipewire">0.3.61</a> up to 32 different sample rates can be configured.
</p>
<p>Consult your hardware manual for supported values of your DAC. Supported rates by the kernel driver codec are listed with the following command.
</p>
<pre>$ grep -E 'Codec|Audio Output|rates' /proc/asound/card*/codec#*
</pre>
<p>To check out which output sample rate are configured for a card run:
</p>
<pre>$ grep rate: /proc/asound/card?/pcm??/sub?/hw_params
/proc/asound/card1/pcm0p/sub0/hw_params:rate: 96000 (96000/1)
</pre>
<p>In <code>pcm0p</code> or <code>pcm0c</code> <code>c</code> is short for "capture" and <code>p</code> is for "playback".
</p>
<pre>$ pw-top
</pre>
<p>also shows sample rate for each card and audio stream.
</p>
<h4>
<span id="Sound_quality_.28resampling_quality.29"></span><span class="mw-headline" id="Sound_quality_(resampling_quality)">Sound quality (resampling quality)</span>
</h4>
<p>If you used PulseAudio with <code>resample-method = speex-float-10</code> or <code>soxr-vhq</code>, then you might consider setting <code>resample.quality</code> to <code>10</code> or the maximum <code>14</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/pipewire-client.conf.d/resample.conf (or ~/.config/pipewire/pipewire-client.conf.d/resample.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">stream.properties = {
    resample.quality = 10
}</pre>
<p>Do not forget to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>pipewire.service</code> and <code>pipewire-pulse.socket</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user units</a> (never forget <code>pipewire-pulse.socket</code> if you want your configuration changes to be applied).
</p>
<p>There is a very little quality difference between <code>10</code> and <code>14</code>, but the CPU load difference is 2-3x. And the latency difference between <code>4</code>, <code>10</code>, <code>14</code> is yet to be investigated by anybody. <code>resample.quality = 14</code> on 44100→48000 Hz on Ryzen 2600 causes <code>pipewire</code> or <code>pipewire-pulse</code> processes to cause 4.0% one CPU core load.
</p>
<p>You can compare resamplers here: <a rel="nofollow" class="external free" href="https://src.infinitewave.ca/">https://src.infinitewave.ca/</a> (do not pay attention to anything above 18 KHz and over 120 dB). speex is listed as "Xiph.org Speex".
</p>
<p>PipeWire uses its own resampling algorithm called Spa. Like with SoX's <code>sox</code>, Speex's <code>speexenc</code>, PipeWire includes its standalone version: <code>spa-resample</code>. Usage:
</p>
<pre>$ spa-resample -q 14 -f s24 -r 48000 input16bit44100orAnythingElse.wav output24bit48000hz.wav
</pre>
<p>It is probably somehow possible to use other resamplers by creating your own sink. Or just use a plugin in your music player (e.g., Qmmp has SoX plugin).
</p>
<h4><span class="mw-headline" id="External_sound_card_not_activated_after_reconnect">External sound card not activated after reconnect</span></h4>
<p>Check <code>~/.config/pipewire/media-session.d/default-profile</code> if there is any entry with default profile "off" and remove it. If that does not help, remove all files from <code>~/.config/pipewire/media-session.d/</code> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>pipewire.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a>.
</p>
<h4><span class="mw-headline" id="No_Sound_or_pactl_info_shows_Failure:_Connection_refused">No Sound or pactl info shows Failure: Connection refused</span></h4>
<p>It means applications are unable to connect to the PipeWire-Pulse service check if the <code>pipewire-pulse.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a> is running.
</p>
<p>If that does not fix it, run <code>strace -f -o /tmp/pipe.txt pactl info</code> and pastebin <code>/tmp/pipe.txt</code> while seeking help on IRC (<a rel="nofollow" class="external text" href="ircs://irc.oftc.net/pipewire">#pipewire</a> on OFTC) or the mailing-lists.
</p>
<h4><span class="mw-headline" id="Low_audio_quality_on_Bluetooth">Low audio quality on Bluetooth</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<p>In case Bluetooth playback stutters, check the <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Unit status">unit status</a> of the <code>pipewire.service</code> user unit for errors similar as below:
</p>
<pre>Feb 17 18:23:01 HOST pipewire[249297]: (bluez_input.18:54:CF:04:00:56.a2dp-sink-60) client too slow! rate:512/48000 pos:370688 status:triggered
</pre>
<p>If they appear, check the currently selected codec using <code>pactl list sinks</code> and try changing it by setting <code>bluez5.codecs</code> to one of <code>sbc aac ldac aptx aptx_hd</code>. You can also try mSBC support (fixes mic on Sony 1000XM3, i.e. Headphones WH-1000XM3 and Earbuds WF-1000XM3), and the SBC-XQ codec.
</p>
<p>With <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/bluetooth.lua.d/51-bluez-config.lua (or ~/.config/wireplumber/bluetooth.lua.d/51-bluez-config.lua)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">bluez_monitor.properties = {
  ["bluez5.enable-sbc-xq"] = true,
  ["bluez5.enable-msbc"] = true,
  ["bluez5.codecs"] = "[sbc sbc_xq]",
}</pre>
<p>With <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-media-session">pipewire-media-session</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/media-session.d/bluez-monitor.conf (or ~/.config/pipewire/media-session.d/bluez-monitor.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
properties = {
  ...
  <b>bluez5.enable-msbc = true</b>
  <b>bluez5.enable-sbc-xq = true</b>
  <b>bluez5.codecs = [sbc sbc_xq]</b>
...</pre>
<p>Restart PipeWire by <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restarting</a> the <code>pipewire.service</code> user unit for the changes to take effect.
</p>
<h4>
<span id="Noticeable_audio_delay_or_audible_pop.2Fcrack_when_starting_playback"></span><span class="mw-headline" id="Noticeable_audio_delay_or_audible_pop/crack_when_starting_playback">Noticeable audio delay or audible pop/crack when starting playback</span>
</h4>
<p>This is caused by node suspension when inactive.
</p>
<p>With <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span>, create a new file to overwrite the default configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/wireplumber.conf.d/51-disable-suspension.conf (or ~/.config/wireplumber/wireplumber.conf.d/51-disable-suspension.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">monitor.alsa.rules = [
  {
    matches = [
      {
        # Matches all sources
        node.name = "~alsa_input.*"
      },
      {
        # Matches all sinks
        node.name = "~alsa_output.*"
      }
    ]
    actions = {
      update-props = {
        session.suspend-timeout-seconds = 0
      }
    }
  }
]
# bluetooth devices
monitor.bluez.rules = [
  {
    matches = [
      {
        # Matches all sources
        node.name = "~bluez_input.*"
      },
      {
        # Matches all sinks
        node.name = "~bluez_output.*"
      }
    ]
    actions = {
      update-props = {
        session.suspend-timeout-seconds = 0
      }
    }
  }
]</pre>
<p>Restart <code>pipewire.service</code> and <code>wireplumber.service</code> to apply changes.
</p>
<p>Instead of disabling suspension entirely, you can also change the timeout value to the desired number of seconds of delay before source suspension.
</p>
<p>Some devices implement their own detection of silence and suspension. For them disabling node suspention alone won't work. It's possible to work around them by adding a small amount of noise, making it so the output never goes fully silent:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.../51-disable-suspension.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
    session.suspend-timeout-seconds = 0,  # 0 disables suspend
    dither.method = "wannamaker3", # add dither of desired shape
    dither.noise = 2, # add additional bits of noise
...</pre>
<p>It may be neccessary to play with <code>dither.noise</code> and <code>dither.method</code> parameters to make it so the noise is sufficiently silent and simultaneously loud enough to prevent detection of silence. See <a rel="nofollow" class="external text" href="https://docs.pipewire.org/page_man_pipewire-client_conf_5.html#client_conf__dither_noise">PipeWire documentation</a>.
</p>
<p>With <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-media-session">pipewire-media-session</a></span>:
</p>
<p>Disable this by editing <code>/etc/pipewire/media-session.d/*-monitor.conf</code> depending on where the delay occurs and changing property <code>session.suspend-timeout-seconds</code> to 0 to disable or experiment with other values and see what works.
</p>
<p>Alternatively you can comment out the line <code>suspend-node</code> in <code>/etc/pipewire/media-session.d/media-session.conf</code>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">Restart</a> both <code>pipewire.service</code> and <code>pipewire-pulse.service</code> to apply these changes, or alternatively reboot.
</p>
<h4><span class="mw-headline" id="Audio_cutting_out_when_multiple_streams_start_playing">Audio cutting out when multiple streams start playing</span></h4>
<p>This problem can typically be diagnosed by reading the <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journal">journal</a> of the <code>pipewire-pulse.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a> and finding lines similar to:
</p>
<pre>pipewire-pulse[21740]: pulse-server 0x56009b9d5de0: [Nightly] UNDERFLOW channel:0 offset:370676 underrun:940
</pre>
<p>According to the <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Troubleshooting#underrununderflow-and-broken-pipe-errors">official PipeWire troubleshooting guide</a>, to solve this problem for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/wireplumber.conf.d/50-alsa-config.conf (or ~/.config/wireplumber/wireplumber.conf.d/50-alsa-config.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">monitor.alsa.rules = [
  {
    matches = [
      {
        node.name = "~alsa_output.*"
      }
    ]
    actions = {
      update-props = {
        api.alsa.period-size   = 1024
        api.alsa.headroom      = 8192
      }
    }
  }
]</pre>
<p>With <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-media-session">pipewire-media-session</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/media-session.d/alsa-monitor.conf (or ~/.config/pipewire/media-session.d/alsa-monitor.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">api.alsa.headroom = 1024</pre>
<p>If you experience audio stuttering because of kernel page locking or late scheduling see <a href="../en/Gaming.html#Tweaking_kernel_parameters_for_response_time_consistency" title="Gaming">Gaming#Tweaking kernel parameters for response time consistency</a>.
</p>
<h4><span class="mw-headline" id="Audio_is_distorted">Audio is distorted</span></h4>
<ul>
<li>For microphones, try navigating to the card that is having issues after running <code>alsamixer</code> and use the arrow keys to reduce any "Mic Boost" or "Internal Mic Boost" options.</li>
<li>Follow <a href="#Changing_the_default_sample_rate">#Changing the default sample rate</a>, reducing the sample rate to <code>44100</code> (44.1 kHz).</li>
</ul>
<h4><span class="mw-headline" id="Audio_problems_after_standby">Audio problems after standby</span></h4>
<p>If the sound is missing or otherwise garbled after waking the machine up from sleep, it might help to reinitialize ALSA:
</p>
<pre># alsactl init
</pre>
<h4>
<span id="High_latency_with_USB_DACs_.28e.g._Schiit_DACs.29"></span><span class="mw-headline" id="High_latency_with_USB_DACs_(e.g._Schiit_DACs)">High latency with USB DACs (e.g. Schiit DACs)</span>
</h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Add <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span> instructions. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<p>Changing sample rates or formats might help reduce latency with some DACs such as Schiit Hel 2.<a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/osugame/comments/msifdd/usb_dacamp_and_audio_lag/">[5]</a>
Using matching rules in <i>pipewire-media-session</i> we can set properties for devices.<a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-pipewire-media-session#matching-rules">[6]</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-07-30 ⓘ]</sup>
</p>
<p>Copy the default configuration file <code>/usr/share/pipewire/media-session.d/alsa-monitor.conf</code> into <code>/etc/pipewire/media-session.d/</code> (or <code>~/.config/pipewire/media-session.d/</code>).
Then append a new rule-block similar to the following one:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/media-session.d/alsa-monitor.conf (or ~/.config/pipewire/media-session.d/alsa-monitor.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
rules = {
    ...
    {
        matches = [
            {
                node.name = "alsa_output.<i>name-of-node</i>"
            }
        ]
        actions = {
            update-props = {
                audio.format = "S24_3LE"
                audio.rate = 96000
                # Following value should be doubled until audio does not cut out or other issues stop occurring
                api.alsa.period-size = 128
...</pre>
<p><code>alsa_output.<i>name-of-node</i></code> node can be obtained using <code>pw-top</code>.
</p>
<p>Your DAC might support a different format or sample rate. You can check what your DAC supports by querying <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a>:
</p>
<p>First get the card number of your DAC:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ aplay -l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
card 3: S2 [Schiit Hel 2], device 0: USB Audio [USB Audio]
  Subdevices: 0/1
  Subdevice #0: subdevice #0
...
</pre>
<p>So in this example it would be card 3.
Get all supported sample rates and formats:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /proc/asound/card<i>X</i>/stream<i>X</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Playback:
  ...
  Interface 1
    Altset 1
    Format: S16_LE
    Channels: 2
    Endpoint: 0x05 (5 OUT) (ASYNC)
    Rates: 44100, 48000, 88200, 96000, 176400, 192000, 352800, 384000
    Data packet interval: 125 us
    Bits: 16
    ...
  Interface 1
    Altset 2
    Format: S24_3LE
    Channels: 2
    Endpoint: 0x05 (5 OUT) (ASYNC)
    Rates: 44100, 48000, 88200, 96000, 176400, 192000, 352800, 384000
    Data packet interval: 125 us
    Bits: 24
    ...
  Interface 1
    Altset 3
    Format: S32_LE
    Channels: 2
    Endpoint: 0x05 (5 OUT) (ASYNC)
    Rates: 44100, 48000, 88200, 96000, 176400, 192000, 352800, 384000
    Data packet interval: 125 us
    Bits: 32
    ...
...
</pre>
<p>In this case <code>S16_LE, S24_3LE, S32_LE</code> are the supported formats and <code>44100, 48000, 88200, 96000, 176400, 192000, 352800, 384000</code> are the supported sample rates across all formats.
</p>
<h4>
<span id="No_sound_from_USB_DAC_until_30.25_volume"></span><span class="mw-headline" id="No_sound_from_USB_DAC_until_30%_volume">No sound from USB DAC until 30% volume</span>
</h4>
<p>Some USB DACs will have no sound output until a certain level of volume is reached <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/1117">[7]</a>. Typically this is around 25% - 30% which then leads to an uncomfortably loud initial volume and the inability to maintain a low volume. The solution is to ignore hardware mixer volume control by setting <code>api.alsa.soft-mixer</code> to <code>true</code>.
</p>
<p>To achieve this with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span> use:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/wireplumber.conf.d/alsa-soft-mixer.conf (or ~/.config/wireplumber/wireplumber.conf.d/alsa-soft-mixer.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">monitor.alsa.rules = [
  {
    matches = [
      {
        device.name = "~alsa_card.*"
      }
    ]
    actions = {
      update-props = {
        # Do not use the hardware mixer for volume control. It
        # will only use software volume. The mixer is still used
        # to mute unused paths based on the selected port.
        api.alsa.soft-mixer = true
      }
    }
  }
]</pre>
<p>Then, restart pipewire. Set your master volume in <code>alsamixer</code> and then save the settings by running <code>alsactl store</code> as root. You should now be able to use your volume mixer as normal.
</p>
<h4><span class="mw-headline" id="Realtime_audio_does_not_work">Realtime audio does not work</span></h4>
<p>If <code>RTKit error: org.freedesktop.DBus.Error.AccessDenied</code> shows up in the <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Unit status">status</a> of the <code>pipewire.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a>, then the priority of the pipewire daemon was not changed to realtime. See <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/1069">[8]</a> for this issue.
</p>
<h4><span class="mw-headline" id="Simultaneous_output_to_multiple_sinks_on_the_same_sound_card">Simultaneous output to multiple sinks on the same sound card</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Add <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span> instructions. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:PipeWire.html">Talk:PipeWire</a>)</div>
</div>
<p>Create a copy of <code>/usr/share/alsa-card-profile/mixer/profile-sets/default.conf</code> so that changes persist across updates. Here we define a profile joining the two default mappings for Analog and HDMI.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/alsa-card-profile/mixer/profile-sets/multiple.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
auto-profiles = no

[Mapping analog-stereo]
device-strings = front:%f
channel-map = left,right
paths-output = analog-output analog-output-lineout analog-output-speaker analog-output-headphones analog-output-headphones-2
paths-input = analog-input-front-mic analog-input-rear-mic analog-input-internal-mic analog-input-dock-mic analog-input analog-input-mic analog-input-linein analog-input-aux analog-input-video analog-input-tvtuner analog-input-fm analog-input-mic-line analog-input-headphone-mic analog-input-headset-mic
priority = 15

[Mapping hdmi-stereo]
description = Digital Stereo (HDMI)
device-strings = hdmi:%f
paths-output = hdmi-output-0
channel-map = left,right
priority = 9
direction = output

[Profile multiple]
description = Analog Stereo Duplex + Digital Stereo (HDMI) Output
output-mappings = analog-stereo hdmi-stereo
input-mappings = analog-stereo</pre>
<p>Now we configure PipeWire's media-session to use the new card-profile for matching devices. Identifying information can be found using <code>$ pw-cli dump device</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/media-session.d/alsa-monitor.conf (or ~/.config/pipewire/media-session.d/alsa-monitor.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">rules = [
    {
        matches = [ { alsa.card_name = "HDA Intel PCH" } ]
        actions = {
            update-props = {
                api.alsa.use-acp = true
                device.profile-set = "multiple.conf"
                device.profile = "multiple"
                api.acp.auto-profile = false
                api.acp.auto-port = false
            }
        }
    }
]</pre>
<h4><span class="mw-headline" id="No_notification_sounds_from_Discord">No notification sounds from Discord</span></h4>
<p>This might cause by having the min.quantum too low, try setting it to more than 700. You can make an override for Discord specifically by appending the following rule to the pulse.rules section of pipewire-pulse.conf.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pipewire/pipewire-pulse.conf (or ~/.config/pipewire/pipewire-pulse.conf)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
pulse.rules = [
  ...
    {
        # Discord notification sounds fix
        matches = [ { application.process.binary = "Discord" } ]
        actions = {
            update-props = {
                pulse.min.quantum      = 1024/48000     # 21ms
            }
        }
    }
...</pre>
<h4><span class="mw-headline" id="FMOD_games_crashing_under_PipeWire">FMOD games crashing under PipeWire</span></h4>
<p>Some games that use an old version of the <a href="https://en.wikipedia.org/wiki/FMOD" class="extiw" title="wikipedia:FMOD">FMOD audio engine</a>, like <a href="https://en.wikipedia.org/wiki/Pillars_of_Eternity" class="extiw" title="wikipedia:Pillars of Eternity">Pillars of Eternity</a>, invoke <code>pulseaudio --check</code> and crash if the PulseAudio binary is not present. A workaround is to symlink <code>/bin/pulseaudio</code> to <code>/bin/true</code>.<a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/issues/1514">[9]</a>
</p>
<pre># ln -s /bin/true /bin/pulseaudio
</pre>
<p>Note that if you wish to reinstall PulseAudio, you need to remove the symlink.
</p>
<h4><span class="mw-headline" id="Auto-switching_is_not_working">Auto-switching is not working</span></h4>
<p>If auto-switching is not working it may be an issue with <a href="../en/WirePlumber.html" title="WirePlumber">WirePlumber</a> state. As suggested by <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/wireplumber/-/issues/191#note_1252549">this comment</a> you can delete <a href="../en/WirePlumber.html" title="WirePlumber">WirePlumber</a>'s local state and restart the daemon to see if that helps:
</p>
<pre>$ rm -r ~/.local/state/wireplumber/
</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>wireplumber.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a>.
</p>
<h4>
<span id="Missing_realtime_priority.2Fcrackling_under_load_after_suspend"></span><span class="mw-headline" id="Missing_realtime_priority/crackling_under_load_after_suspend">Missing realtime priority/crackling under load after suspend</span>
</h4>
<p>Due to a <a rel="nofollow" class="external text" href="https://github.com/heftig/rtkit/issues/13">bug from 2011</a> in rtkit, suspend events cause PipeWire's realtime priority to be revoked and not restored. To disable the protection which causes this, <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> <code>rtkit-daemon.service</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/rtkit-daemon.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/lib/rtkit-daemon --no-canary</pre>
<p>Then restart the <code>rtkit-daemon.service</code> unit and <code>pipewire.service</code> user unit, along with the media session service.
</p>
<h4>
<span id="No_sound_during_streaming_to_RAOP_devices_.28Sonos_etc..29"></span><span class="mw-headline" id="No_sound_during_streaming_to_RAOP_devices_(Sonos_etc.)">No sound during streaming to RAOP devices (Sonos etc.)</span>
</h4>
<p>Set up mDNS hostname resolution using either <a href="../en/Avahi.html" title="Avahi">Avahi</a> or <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>.
</p>
<h4><span class="mw-headline" id="No_sound_devices_show_up_in_KDE_Plasma">No sound devices show up in KDE Plasma</span></h4>
<p>PipeWire clients (including the desktop environment) may rely on the <a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html#variables">XDG_RUNTIME_DIR</a> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> to connect to the PipeWire daemon. <a rel="nofollow" class="external autonumber" href="https://docs.pipewire.org/page_daemon.html">[10]</a> If you experience no sound devices immediately after login, it may be because this variable has manually been set to the wrong path.
</p>
<p>Although this be resolved by manually restarting PipeWire, other issues can still occur such as being unable to screen share in Chromium (with <code>pipewire context failed</code>). <code>XDG_RUNTIME_DIR</code> is automatically set by <span class="plainlinks archwiki-template-man" title="$ man 8 pam_systemd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam_systemd.8">pam_systemd(8)</a></span>, so you should remove any instances of it being set in your initialization files.
</p>
<h3><span class="mw-headline" id="Video_2">Video</span></h3>
<h4>
<span id="OBS_.28etc..29_display_nothing.2C_even_if_they_ask_for_a_window.2Fscreen"></span><span class="mw-headline" id="OBS_(etc.)_display_nothing,_even_if_they_ask_for_a_window/screen">OBS (etc.) display nothing, even if they ask for a window/screen</span>
</h4>
<p>If you are sure that you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal">xdg-desktop-portal</a></span> installed as well as either <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gtk">xdg-desktop-portal-gtk</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-kde">xdg-desktop-portal-kde</a></span>, check the running state of the daemons.
</p>
<p>In OBS, if everything is working, you should see this in <code>stdout</code>:
</p>
<pre>...
info: [pipewire] desktop selected, setting up screencast
info: [pipewire] created stream 0x5632d7456850
info: [pipewire] playing stream…
</pre>
<p>For multi-monitor setups the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=slurp">slurp</a></span> package will allow to capture of all the screens.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/home">Wiki</a> — PipeWire Wiki on Freedesktop GitLab</li>
<li>
<a rel="nofollow" class="external text" href="https://blogs.gnome.org/uraeus/2018/01/26/an-update-on-pipewire-the-multimedia-revolution-an-update/">Pipewire Update Blog Post</a> — Blog post from January 2018 outlining the state of PipeWire at the time</li>
<li>
<a rel="nofollow" class="external text" href="https://blogs.gnome.org/uraeus/2020/09/04/pipewire-late-summer-update-2020/">PipeWire Late Summer Update 2020</a> — Blog post from September 2020</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Multimedia.html" title="Category:Multimedia">Multimedia</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_missing_package_links.html" title="Category:Pages with missing package links">Pages with missing package links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=PipeWire&amp;oldid=813437">https://wiki.archlinux.org/index.php?title=PipeWire&amp;oldid=813437</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 July 2024, at 15:31.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
