<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Git server - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Git_server rootpage-Git_server skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Protocols" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Protocols">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Protocols</span>
			</div>
		</a>
		
			<button aria-controls="toc-Protocols-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Protocols subsection</span>
			</button>
		
		<ul id="toc-Protocols-sublist" class="vector-toc-list">
			<li id="toc-SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SSH">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>SSH</span>
				</div>
			</a>
			
			<ul id="toc-SSH-sublist" class="vector-toc-list">
				<li id="toc-Normal_existing_user_account" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Normal_existing_user_account">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.1</span>
					<span>Normal existing user account</span>
				</div>
			</a>
			
			<ul id="toc-Normal_existing_user_account-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restricted_login_shell_for_Git-only_SSH_access" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Restricted_login_shell_for_Git-only_SSH_access">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.2</span>
					<span>Restricted login shell for Git-only SSH access</span>
				</div>
			</a>
			
			<ul id="toc-Restricted_login_shell_for_Git-only_SSH_access-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restricted_user_account" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Restricted_user_account">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.3</span>
					<span>Restricted user account</span>
				</div>
			</a>
			
			<ul id="toc-Restricted_user_account-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Git_daemon_service_(git://)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Git_daemon_service_(git://)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Git daemon service (git://)</span>
				</div>
			</a>
			
			<ul id="toc-Git_daemon_service_(git://)-sublist" class="vector-toc-list">
				<li id="toc-Modify_git_services_(per-repository)_/_Write_anonymous_push_to_repo" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Modify_git_services_(per-repository)_/_Write_anonymous_push_to_repo">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.1</span>
					<span>Modify git services (per-repository) / Write anonymous push to repo</span>
				</div>
			</a>
			
			<ul id="toc-Modify_git_services_(per-repository)_/_Write_anonymous_push_to_repo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_error_messages_for_clients" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Enable_error_messages_for_clients">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.2</span>
					<span>Enable error messages for clients</span>
				</div>
			</a>
			
			<ul id="toc-Enable_error_messages_for_clients-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error_Messages_server" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Error_Messages_server">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.3</span>
					<span>Error Messages server</span>
				</div>
			</a>
			
			<ul id="toc-Error_Messages_server-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Dumb_HTTP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dumb_HTTP">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Dumb HTTP</span>
				</div>
			</a>
			
			<ul id="toc-Dumb_HTTP-sublist" class="vector-toc-list">
				<li id="toc-nginx" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#nginx">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3.1</span>
					<span>nginx</span>
				</div>
			</a>
			
			<ul id="toc-nginx-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Smart_HTTP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Smart_HTTP">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Smart HTTP</span>
				</div>
			</a>
			
			<ul id="toc-Smart_HTTP-sublist" class="vector-toc-list">
				<li id="toc-Apache" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Apache">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.1</span>
					<span>Apache</span>
				</div>
			</a>
			
			<ul id="toc-Apache-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Access_control" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Access_control">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Access control</span>
			</div>
		</a>
		
		<ul id="toc-Access_control-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Web_interfaces" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Web_interfaces">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Web interfaces</span>
			</div>
		</a>
		
		<ul id="toc-Web_interfaces-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Git server</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p>This article gives an overview on how to host a <a href="../en/Git.html" title="Git">Git</a> server. For more information, refer to the <a rel="nofollow" class="external text" href="https://git-scm.com/book/en/v2/Git-on-the-Server-The-Protocols">Git on the Server chapter</a> of the Pro Git book.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Protocols">Protocols</h2></div>
<p>Refer to <a rel="nofollow" class="external text" href="https://git-scm.com/book/en/v2/Git-on-the-Server-The-Protocols">Git on the Server - The Protocols</a> for a detailed description along with pros and cons.
</p>
<div class="mw-heading mw-heading3"><h3 id="SSH">SSH</h3></div>
<p>You only need to set up an <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH server</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Like on every SSH Installation there are a numerous configurations to help your needs.</div>
<div class="mw-heading mw-heading4"><h4 id="Normal_existing_user_account">Normal existing user account</h4></div>
<p>This is the easiest approach, if your ssh login works:
</p>
<ul><li>Create a bare repository on the Server, wherever you have write permission.</li></ul>
<pre>$ git init --bare <i>~/foo</i>
</pre>
<ul><li>Clone the repo on a different Machine.</li></ul>
<pre>$ git clone ssh://<i>sshserver:foo</i>
</pre>
<div class="mw-heading mw-heading4"><h4 id="Restricted_login_shell_for_Git-only_SSH_access">Restricted login shell for Git-only SSH access</h4></div>
<p>If you want to limit the amount of available commands for a user account then <span class="plainlinks archwiki-template-man" title="$ man 1 git-shell"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git-shell.1">git-shell(1)</a></span> is one way. Multiple user could share one ssh account, just add all keys in <code>authorized_keys</code>.
</p>
<p>To create a interactive login shell with few limited commands, other than git repo management, you need something like this:
</p>
<pre>$ mkdir ~/git-shell-commands
$ cd ~/git-shell-commands
$ ln -s /usr/share/git/git-shell/commands/help
$ ln -s /usr/share/git/git-shell/commands/list
</pre>
<p>Finally change the shell:
</p>
<pre># chsh -s /usr/bin/git-shell <i>username</i>
</pre>
<p>An example shell script to create new bare repos could be:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/git-shell-commands/new_repo</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

new_repo() {
        local repo_name
        repo_name="${1}"
        if [[ -e "${repo_name}" ]];then
                printf 'Please provide a different repo name.\n'
                exit 1 
        fi
        if [[ "x${repo_name}" = "x" ]];then
                printf 'Please providea a repo name.\n'
                exit 2
        fi
        git init --bare "${repo_name}"
}

new_repo "${1}"</pre>
<pre>$ chmod u+rx ~/git-shell-commands/new_repo
</pre>
<p>Also it could be beneficial in some scenarios to restrict things like port forwarding.
</p>
<p>Prepend all keys in <a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh.1.en#FILES">authorized_keys</a> with:
</p>
<pre>no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh......</pre>
<div class="mw-heading mw-heading4"><h4 id="Restricted_user_account">Restricted user account</h4></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> git-daemon is not needed, instead of editing this Service a chsh git-shell could be used. (Discuss in <a href="../en/Talk:Git_server.html#restrict_ssh_user" title="Talk:Git server">Talk:Git server#restrict ssh user</a>)</div>
</div>
<p>You are able to secure the SSH user account even more allowing only push and pull commands on this user account. This is done by replacing the default login shell by git-shell. Described in <a rel="nofollow" class="external text" href="https://git-scm.com/book/en/v2/Git-on-the-Server-Setting-Up-the-Server">Setting Up the Server</a>.
</p>
<p>When securing the git server created with the instructions of this clause (<a href="#SSH">#SSH</a>), the following additional steps are needed on Arch:
</p>
<ol>
<li>Change the home directory: In order for ssh to be able to read <code>/srv/git/.ssh/authorized_keys</code>, the home directory for git in <code>/etc/passwd</code> needs to be changed from <code>/</code> to <code>/srv/git</code>.</li>
<li>Change the base path when home directory is corrected: In order for git to serve the repositories, the <code>--base-path</code> in <code>git-daemon\@.service</code> need to be changed to <code>/srv/git</code> if the repositories are served from git's home directory.</li>
</ol>
<div class="mw-heading mw-heading3"><h3 id="Git_daemon_service_(git://)">
<span id="Git_daemon_service_.28git:.2F.2F.29"></span>Git daemon service (git://)</h3></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> The <code>git://</code> protocol should not be used over the internet, use the <code>ssh://</code> protocol. This Protocol is not for you, if you want User authentication, because this Protocol has NO authentication and NO encryption. Read more here <span class="plainlinks archwiki-template-man" title="$ man 1 git-daemon"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git-daemon.1">git-daemon(1)</a></span>
</div>
<p>The Git daemon (<span class="plainlinks archwiki-template-man" title="$ man 1 git-daemon"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git-daemon.1">git-daemon(1)</a></span>) can be <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">started</a> with <code>git-daemon.socket</code>.
</p>
<p>The service uses the <code>--export-all</code> and <code>--base-path</code> parameters to serve all repositories placed in <code>/srv/git/</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Modify_git_services_(per-repository)_/_Write_anonymous_push_to_repo">
<span id="Modify_git_services_.28per-repository.29_.2F_Write_anonymous_push_to_repo"></span>Modify git services (per-repository) / Write anonymous push to repo</h4></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> if you enable upload, anybody can push anything into the repository, including removal of refs</div>
<p><code>git push</code> uses the <code>receive-pack</code> service and is per default disabled. In the repo/config file enable <code>receivepack</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/srv/git/foo/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[daemon]
	receivepack = true</pre>
<p>All repos can be cloned/pulled by default, because the service <code>upload-pack</code>is enabled with <code>--export-all</code> by default, but you can be disabled it. Read more <span class="plainlinks archwiki-template-man" title="$ man 1 git-daemon"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git-daemon.1#SERVICES">git-daemon(1) § SERVICES</a></span>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Enable_error_messages_for_clients">Enable error messages for clients</h4></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> This may leak information about the existance of unexported repositories.</div>
<p>Instead of getting the default Error Message <code>"access denied or repository not exported:"</code> and get more specific error. Create a <a href="../en/Drop-in_file.html" class="mw-redirect" title="Drop-in file">drop-in file</a> for the <code>git-daemon@.service</code> and append <code>--informative-errors</code> in the ExecStart like:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/git-daemon@.service.d/informative_errors.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=-/usr/lib/git-core/git-daemon --inetd --export-all --base-path=/srv/git --informative-errors</pre>
<div class="mw-heading mw-heading4"><h4 id="Error_Messages_server">Error Messages server</h4></div>
<pre># journalctl -t git-daemon
</pre>
<div class="mw-heading mw-heading3"><h3 id="Dumb_HTTP">Dumb HTTP</h3></div>
<p>"Dumb" in this context means that only <a href="../en/WebDAV.html" title="WebDAV">WebDAV</a> is involved in pulls and pushes.
</p>
<div class="mw-heading mw-heading4"><h4 id="nginx">nginx</h4></div>
<p>Follow the basic WebDAV instructions for nginx. Pushing via WebDAV also requires Locking. Here is an example location block:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">location /repos/ {
        auth_basic "Authorized Personnel Only!";
        auth_basic_user_file /etc/nginx/htpasswd;
        dav_methods PUT DELETE MKCOL COPY MOVE;
        dav_ext_methods PROPFIND OPTIONS LOCK UNLOCK;
        dav_access user:rw group:rw all:r;
        dav_ext_lock zone=general;
        create_full_put_path on;
        client_body_temp_path /tmp;
    }</pre>
<p>Note the <code>dav_ext_lock zone</code>. Add the specified locking zone to the http section of your config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dav_ext_lock_zone zone=general:10m;</pre>
<p>Now do the usual steps when preparing a git repo for the server:
</p>
<ul>
<li><code>git clone --bare /path/to/myrepo myrepo.git</code></li>
<li>copy the bare repo to the server</li>
<li>run <code>git update-server-info</code> in the bare repo</li>
<li>chown the repo to be owned by http:http</li>
</ul>
<p>You might have noticed that I added HTTP Basic Authentication to have at lease some means of access control. Everyone who has an password entry in the htaccess file can push.
</p>
<p>Now you can clone as usual:
</p>
<pre>$ git clone https://www.example.com/repos/myrepo.git
Cloning into 'myrepo'...
$
</pre>
<p>Make some changes, add, commit, and push:
</p>
<pre>$ git push origin main
error: Cannot access URL https://www.example.com/repos/myrepo.git/, return code 22
fatal: git-http-push failed
error: failed to push some refs to 'https://www.example.com/repos/myrepo.git'
</pre>
<p>Oh noes! For some reason PROPFIND reports 401 Unauthorized and that's all. Nothing in the nginx error logs. Appearently the git client has a problem passing the username and password for all subsequent requests. Running a git credential cache does not help. The only solution that works so far is editing the ~/.netrc (obviously git uses curl for http):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.netrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">machine www.example.com
login git
password topsecret</pre>
<pre>$  &gt; git push origin main
Fetching remote heads...
 refs/
 refs/heads/
 refs/tags/
updating 'refs/heads/main'
 from 03f8860418facfbecedd5e0a81b480131b31bcba
 to   ec5536091e31ebf172a34c6d1ebddfc36e3bd3a6
   sending 3 objects
   done
Updating remote server info
To https://www.example.com/repos/myrepo.git
  0318860..ec55560  main -&gt; main
</pre>
<p>Don't even think to specify the clone URL as <code>https://username:password@www.example.com/repos/myrepo.git</code>. This works for the initial clone but for a subsequent push you get an error message in your error log stating that the destination URL is handled by a different repository.
</p>
<div class="mw-heading mw-heading3"><h3 id="Smart_HTTP">Smart HTTP</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> There are many <a href="../en/Web_server.html" class="mw-redirect" title="Web server">web servers</a> with CGI support. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Git_server.html">Talk:Git server</a>)</div>
</div>
<p>The <span class="plainlinks archwiki-template-man" title="$ man 1 git-http-backend"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git-http-backend.1">git-http-backend(1)</a></span> is a CGI program, allowing efficient cloning, pulling and pushing over HTTP(S).
</p>
<div class="mw-heading mw-heading4"><h4 id="Apache">Apache</h4></div>
<p>The setup for this is rather simple as all you need to have installed is the <a href="../en/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a> (with <code>mod_cgi</code>, <code>mod_alias</code>, and <code>mod_env</code> enabled) and of course, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=git">git</a></span>.
</p>
<p>Once you have your basic setup running, add the following to your Apache configuration file, which is usually located at:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/httpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;Directory "/usr/lib/git-core"&gt;
    Require all granted
&lt;/Directory&gt;
 
SetEnv GIT_PROJECT_ROOT /srv/git
SetEnv GIT_HTTP_EXPORT_ALL
ScriptAlias /git/ /usr/lib/git-core/git-http-backend/
</pre>
<p>This assumes your Git repositories are located at <code>/srv/git</code> and that you want to access them via something like: <code>http(s)://your_address.tld/git/your_repo.git</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Make sure that Apache can read and write to your repositories.</div>
<p>For more detailed documentation, visit the following links:
</p>
<ul>
<li><a rel="nofollow" class="external free" href="https://git-scm.com/book/en/v2/Git-on-the-Server-Smart-HTTP">https://git-scm.com/book/en/v2/Git-on-the-Server-Smart-HTTP</a></li>
<li><a rel="nofollow" class="external free" href="https://git-scm.com/docs/git-http-backend">https://git-scm.com/docs/git-http-backend</a></li>
</ul>
<div class="mw-heading mw-heading2"><h2 id="Access_control">Access control</h2></div>
<p>For fine-grained access control, the following solutions are available:
</p>
<ul><li>
<b><a href="../en/Gitolite.html" title="Gitolite">Gitolite</a></b> — An access control layer on top of Git, written in Perl.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/sitaramc/gitolite">https://github.com/sitaramc/gitolite</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gitolite">gitolite</a></span>
</dd></dl>
<ul><li>
<b><a href="../en/Gitosis.html" title="Gitosis">Gitosis</a></b> — Software for hosting Git repositories, written in Python.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/tv42/gitosis">https://github.com/tv42/gitosis</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gitosis-git/">gitosis-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<p>Note that if you are willing to create <a href="../en/User_account.html" class="mw-redirect" title="User account">user accounts</a> for all of the people that should have access to the repositories and do not need access control at the level of git objects (like branches), you can also use standard <a href="../en/File_permissions.html" class="mw-redirect" title="File permissions">file permissions</a> for access control.<a rel="nofollow" class="external autonumber" href="https://github.com/sitaramc/gitolite/blob/d74e58b5de8c78bddd29b009ba2d606f7fcb4f2d/doc/overkill.mkd">[1]</a>
</p>
<div class="mw-heading mw-heading2"><h2 id="Web_interfaces">Web interfaces</h2></div>
<ul>
<li>
<a href="../en/Gitweb.html" title="Gitweb">Gitweb</a> — the default web interface that comes with Git</li>
<li>
<b><a href="../en/Cgit.html" title="Cgit">cgit</a></b> — A web interface for git written in plain C.</li>
</ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://git.zx2c4.com/cgit/">https://git.zx2c4.com/cgit/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cgit">cgit</a></span>
</dd></dl>
<p>Refer to <a href="../en/List_of_applications/Utilities.html#Code_forges" title="List of applications/Utilities">code forges</a> for a list of web interfaces with more advanced capabilities.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Version_control_system.html" title="Category:Version control system">Version control system</a></li>
<li><a href="../en/Category:Servers.html" title="Category:Servers">Servers</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Git_server&amp;oldid=862202">https://wiki.archlinux.org/index.php?title=Git_server&amp;oldid=862202</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 20 January 2026, at 20:10.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Git server</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
