<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>OfflineIMAP - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OfflineIMAP rootpage-OfflineIMAP skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Minimal" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Minimal">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Minimal</span>
				</div>
			</a>
			
			<ul id="toc-Minimal-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Selective_folder_synchronization" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Selective_folder_synchronization">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Selective folder synchronization</span>
				</div>
			</a>
			
			<ul id="toc-Selective_folder_synchronization-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Custom_port" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Custom_port">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Custom port</span>
				</div>
			</a>
			
			<ul id="toc-Custom_port-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Usage</span>
			</div>
		</a>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Running_offlineimap_in_the_background" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Running_offlineimap_in_the_background">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Running offlineimap in the background</span>
				</div>
			</a>
			
			<ul id="toc-Running_offlineimap_in_the_background-sublist" class="vector-toc-list">
				<li id="toc-systemd_timer" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#systemd_timer">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1</span>
					<span>systemd timer</span>
				</div>
			</a>
			
			<ul id="toc-systemd_timer-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Automatic_mailbox_generation_for_mutt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automatic_mailbox_generation_for_mutt">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Automatic mailbox generation for mutt</span>
				</div>
			</a>
			
			<ul id="toc-Automatic_mailbox_generation_for_mutt-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gmail_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Gmail_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Gmail configuration</span>
				</div>
			</a>
			
			<ul id="toc-Gmail_configuration-sublist" class="vector-toc-list">
				<li id="toc-OAuth2_access_tokens_via_oama" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#OAuth2_access_tokens_via_oama">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3.1</span>
					<span>OAuth2 access tokens via oama</span>
				</div>
			</a>
			
			<ul id="toc-OAuth2_access_tokens_via_oama-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Password_management" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Password_management">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Password management</span>
				</div>
			</a>
			
			<ul id="toc-Password_management-sublist" class="vector-toc-list">
				<li id="toc-.netrc" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#.netrc">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.1</span>
					<span>.netrc</span>
				</div>
			</a>
			
			<ul id="toc-.netrc-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_GPG" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_GPG">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.2</span>
					<span>Using GPG</span>
				</div>
			</a>
			
			<ul id="toc-Using_GPG-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_pass" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_pass">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.3</span>
					<span>Using pass</span>
				</div>
			</a>
			
			<ul id="toc-Using_pass-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gnome_keyring" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gnome_keyring">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.4</span>
					<span>Gnome keyring</span>
				</div>
			</a>
			
			<ul id="toc-Gnome_keyring-sublist" class="vector-toc-list">
				<li id="toc-gkgetsecret.py" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#gkgetsecret.py">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.4.1</span>
					<span>gkgetsecret.py</span>
				</div>
			</a>
			
			<ul id="toc-gkgetsecret.py-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-python-keyring" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#python-keyring">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.5</span>
					<span>python-keyring</span>
				</div>
			</a>
			
			<ul id="toc-python-keyring-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Emacs_EasyPG" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Emacs_EasyPG">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.6</span>
					<span>Emacs EasyPG</span>
				</div>
			</a>
			
			<ul id="toc-Emacs_EasyPG-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-KeePassXC_with_Freedesktop.org_secret-service" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#KeePassXC_with_Freedesktop.org_secret-service">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.7</span>
					<span>KeePassXC with Freedesktop.org secret-service</span>
				</div>
			</a>
			
			<ul id="toc-KeePassXC_with_Freedesktop.org_secret-service-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Overriding_UI_and_autorefresh_settings" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Overriding_UI_and_autorefresh_settings">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Overriding UI and autorefresh settings</span>
				</div>
			</a>
			
			<ul id="toc-Overriding_UI_and_autorefresh_settings-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Folder_could_not_be_created" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Folder_could_not_be_created">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Folder could not be created</span>
				</div>
			</a>
			
			<ul id="toc-Folder_could_not_be_created-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SSL_fingerprint_does_not_match" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SSL_fingerprint_does_not_match">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>SSL fingerprint does not match</span>
				</div>
			</a>
			
			<ul id="toc-SSL_fingerprint_does_not_match-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Copying_message,_connection_closed" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Copying_message,_connection_closed">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.4</span>
					<span>Copying message, connection closed</span>
				</div>
			</a>
			
			<ul id="toc-Copying_message,_connection_closed-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">OfflineIMAP</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/OfflineIMAP" title="OfflineIMAP – 日本語" lang="ja" hreflang="ja" data-title="OfflineIMAP" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Isync.html" title="Isync">isync</a></li>
<li><a href="../en/Notmuch.html" title="Notmuch">notmuch</a></li>
<li><a href="../en/Msmtp.html" title="Msmtp">msmtp</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://github.com/OfflineIMAP/offlineimap3">OfflineIMAP</a> is a Python utility to sync mail from IMAP servers. It does not work with the POP3 protocol or mbox, and is usually paired with a MUA such as <a href="../en/Mutt.html" title="Mutt">Mutt</a>.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Installation">Installation</h2></div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=offlineimap">offlineimap</a></span> package.
</p>
<div class="mw-heading mw-heading2"><h2 id="Configuration">Configuration</h2></div>
<p>Offlineimap is distributed with two default configuration files, which are both located in <code>/usr/share/offlineimap/</code>. <code>offlineimap.conf</code> contains every setting and is thoroughly documented. Alternatively, <code>offlineimap.conf.minimal</code> is not commented and only contains a small number of settings; see: <a href="#Minimal">#Minimal</a>.
</p>
<p>Copy one of the default configuration files to <code>~/.offlineimaprc</code> or <code>$XDG_CONFIG_HOME/offlineimap/config</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Writing a comment after an option/value on the same line is invalid syntax, hence take care that comments are placed on their own separate line.</div>
<div class="mw-heading mw-heading3"><h3 id="Minimal">Minimal</h3></div>
<p>The following file is a commented version of <code>offlineimap.conf.minimal</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[general]
# List of accounts to be synced, separated by a comma.
accounts = main

[Account main]
# Identifier for the local repository; e.g. the maildir to be synced via IMAP.
localrepository = main-local
# Identifier for the remote repository; i.e. the actual IMAP, usually non-local.
remoterepository = main-remote

[Repository main-local]
# OfflineIMAP supports Maildir, GmailMaildir, and IMAP for local repositories.
type = Maildir
# Where should the mail be placed?
localfolders = ~/mail

[Repository main-remote]
# Remote repos can be IMAP or Gmail, the latter being a preconfigured IMAP.
# SSL and STARTTLS are enabled by default.
type = IMAP
remotehost = host.domain.tld
remoteuser = username
# Necessary for SSL connections, if using offlineimap version &gt; 6.5.4
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
</pre>
<div class="mw-heading mw-heading3"><h3 id="Selective_folder_synchronization">Selective folder synchronization</h3></div>
<p>For synchronizing only certain folders, you can use a <a rel="nofollow" class="external text" href="https://www.offlineimap.org/doc/nametrans.html#folderfilter">folderfilter</a> in the <b>remote</b> section of the account in <code>~/.offlineimaprc</code>. For example, the following configuration will only synchronize the folders <code>Inbox</code> and <code>Sent</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Repository main-remote]
# Synchronize only the folders Inbox and Sent:
folderfilter = lambda foldername: foldername in ["Inbox", "Sent"]
...</pre>
<p>For more options, see the <a rel="nofollow" class="external text" href="https://www.offlineimap.org/doc/nametrans.html#folderfilter">official documentation</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Custom_port">Custom port</h3></div>
<p>Some IMAP servers might require you to connect on a custom port, instead of the default 993 port. To do so, add a <i>remoteport</i> option to the <b>remote</b> section in <code>~/.offlineimaprc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Repository main-remote]
remoteport=<i>1234</i></pre>
<div class="mw-heading mw-heading2"><h2 id="Usage">Usage</h2></div>
<p>Before running offlineimap, create any parent directories that were allocated to local repositories:
</p>
<pre>$ mkdir ~/mail
</pre>
<p>Now, run the program:
</p>
<pre>$ offlineimap
</pre>
<p>Mail accounts will now be synced. If anything goes wrong, take a closer look at the error messages. OfflineIMAP is usually very verbose about problems; partly because the developers did not bother with taking away tracebacks from the final product.
</p>
<div class="mw-heading mw-heading2"><h2 id="Tips_and_tricks">Tips and tricks</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Running_offlineimap_in_the_background">Running offlineimap in the background</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Maybe do not use a configuration file with comments as documentation, but describe them in the text? (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:OfflineIMAP.html">Talk:OfflineIMAP</a>)</div>
</div>
<p>Most other mail transfer agents assume that the user will be using the tool as a <a href="../en/Systemd.html" class="mw-redirect" title="Daemon">daemon</a> by making the program sync periodically by default. In offlineimap, there are a few settings that control backgrounded tasks.
</p>
<p>Confusingly, they are spread thin all-over the configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># In the general section
[general]
# Controls how many accounts may be synced simultaneously
maxsyncaccounts = 1

# In the account identifier
[Account main]
# Minutes between syncs
autorefresh = 0.5
# Quick-syncs do not update if the only changes were to IMAP flags.
# autorefresh=0.5 together with quick=10 yields
# 10 quick refreshes between each full refresh, with 0.5 minutes between every 
# refresh, regardless of type.
quick = 10

# In the remote repository identifier
[Repository main-remote]
# Instead of closing the connection once a sync is complete, offlineimap will
# send empty data to the server to hold the connection open. A value of 60
# attempts to hold the connection for a minute between syncs (both quick and
# autorefresh).This setting has no effect if autorefresh and holdconnectionopen
# are not both set.
keepalive = 60
# OfflineIMAP normally closes IMAP server connections between refreshes if
# the global option autorefresh is specified.  If you wish it to keep the
# connection open, set this to true. This setting has no effect if autorefresh
# is not set.
holdconnectionopen = yes</pre>
<p>To start the daemon automatically on login, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> the <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a> service <code>offlineimap.service</code> using the <code>--user</code> flag. 
</p>
<p>In case you have more than one account configured, it is advised to use <code>offlineimap@.service</code> instead of increasing maxsyncaccounts parameter<a rel="nofollow" class="external autonumber" href="https://www.offlineimap.org/configuration/2016/01/29/why-i-m-not-using-maxconnctions.html">[1]</a>. Simply <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>offlineimap@youraccountname.service</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="systemd_timer">systemd timer</h4></div>
<p>Alternatively, it is possible to manage OfflineIMAP completely using systemd-user <a href="../en/Systemd/Timers.html" title="Systemd/Timers">timers</a>, start/enable <code>offlineimap-oneshot.timer</code> with the <code>--user</code> flag.
</p>
<p>This timer by default runs OfflineIMAP every 15 minutes. This can be easily changed by creating a <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in snippet">drop-in snippet</a>. For example, the following modifies the timer to check every 5 minutes:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/offlineimap-oneshot.timer.d/timer.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Timer]
OnUnitInactiveSec=5m</pre>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> This can lead to inconsistencies in the OfflineIMAP's local database. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:OfflineIMAP.html">Talk:OfflineIMAP</a>)</div>
</div>
<p>For more robust solution it is possible to set a watchdog which will kill OfflineIMAP in case of freeze:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/offlineimap-oneshot.service.d/service.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
WatchdogSec=300</pre>
<div class="mw-heading mw-heading3"><h3 id="Automatic_mailbox_generation_for_mutt">Automatic mailbox generation for mutt</h3></div>
<p><a href="../en/Mutt.html" title="Mutt">Mutt</a> cannot be simply pointed to an IMAP or maildir directory and be expected to guess which subdirectories happen to be the mailboxes, yet offlineimap can generate a muttrc fragment containing the mailboxes that it syncs.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[mbnames]
enabled = yes
filename = ~/.mutt/mailboxes
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"
</pre>
<p>Then add the following lines to <code>~/.mutt/muttrc</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.mutt/muttrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># IMAP: offlineimap
set folder = "~/mail"
source ~/.mutt/mailboxes
set spoolfile = "+account/INBOX"
set record = "+account/Sent\ Items"
set postponed = "+account/Drafts"
</pre>
<p><code>account</code> is the name you have given to your IMAP account in <code>~/.offlineimaprc</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Gmail_configuration">Gmail configuration</h3></div>
<p>This remote repository is configured specifically for Gmail support, substituting folder names in uppercase for lowercase, among other small additions. Keep in mind that this configuration does not sync the <i>All Mail</i> folder, since it is usually unnecessary and skipping it prevents bandwidth costs:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Repository gmail-remote]
type = Gmail
remoteuser = user@gmail.com
remotepass = password
nametrans = lambda foldername: re.sub ('^\[gmail\]', 'bak',
                               re.sub ('sent_mail', 'sent',
                               re.sub ('starred', 'flagged',
                               re.sub (' ', '_', foldername.lower()))))
folderfilter = lambda foldername: foldername not in ['[Gmail]/All Mail']
# Necessary as of OfflineIMAP 6.5.4
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
# Necessary to work around https://github.com/OfflineIMAP/offlineimap/issues/573 (versions 7.0.12, 7.2.1)
ssl_version = tls1_2
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> 
<ul>
<li>If you have Gmail set to another language, the folder names may appear translated too, e.g. "verzonden_berichten" instead of "sent_mail".</li>
<li>After version 6.3.5, offlineimap also creates remote folders to match your local ones. Thus you may need a nametrans rule for your local repository too that reverses the effects of this nametrans rule. If you do not want to make a reverse nametrans rule, you can disable remote folder creation by putting this in your remote configuration: <code>createfolders = False</code>
</li>
<li>As of 1 October 2012 gmail SSL certificate fingerprint is not always the same. This prevents from using <code>cert_fingerprint</code> and makes the <code>sslcacertfile</code> way a better solution for the SSL verification (see <a href="#SSL_fingerprint_does_not_match">#SSL fingerprint does not match</a>).</li>
</ul>
</div>
<div class="mw-heading mw-heading4"><h4 id="OAuth2_access_tokens_via_oama">OAuth2 access tokens via oama</h4></div>
<p><a rel="nofollow" class="external text" href="https://github.com/pdobsan/oama">oama</a> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/oama-bin/">oama-bin</a></span><sup><small>AUR</small></sup>) is a utility which provides IMAP/SMTP clients with renewal capabilities and authorization of OAuth2 credentials.
</p>
<p>OfflineIMAP can call Python code from its configuration. So in the <code>[general]</code> section at the beginning, add the line:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[general]
pythonfile = ~/.offlineimap.py</pre>
<p>And in the Python file, add this code to retrieve OAuth2 access tokens via <i>oama</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimap.py</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">import subprocess

def get_token(email_address):
    return subprocess.run(["oama", "access", email_address], capture_output=True, text=True).stdout</pre>
<p>And now back to the configuration file, in the repository section of a Gmail account, add the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">auth_mechanisms = XOAUTH2
oauth2_client_id = <i>YOUR_OAUTH2_CLIENT_ID</i>
oauth2_client_secret = <i>YOUR_OAUTH2_CLIENT_SECRET</i>
oauth2_request_url = https://accounts.google.com/o/oauth2/token
oauth2_access_token_eval = get_token("<i>YOUR_EMAIL_ADDRESS_FOR_THIS_ACCOUNT</i>")</pre>
<div class="mw-heading mw-heading3"><h3 id="Password_management">Password management</h3></div>
<div class="mw-heading mw-heading4"><h4 id=".netrc">.netrc</h4></div>
<p>Add the following lines to your <code>~/.netrc</code>:
</p>
<pre>machine hostname.tld
    login [your username]
    password [your password]
</pre>
<p>Do not forget to give the file appropriate rights like 600 or 700:
</p>
<pre>$ chmod 600 ~/.netrc
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> OfflineIMAP <a rel="nofollow" class="external text" href="https://github.com/OfflineIMAP/offlineimap/issues/295">does not know</a> how to retrieve passwords when more than one account is stored in the <code>.netrc</code> file.</div>
<div class="mw-heading mw-heading4"><h4 id="Using_GPG">Using GPG</h4></div>
<p>GNU Privacy Guard can be used for storing a password in an encrypted file. First set up <a href="../en/GnuPG.html" title="GnuPG">GnuPG</a> and then follow the steps in this section. It is assumed that you can use your GPG private key <a href="../en/GnuPG.html#gpg-agent" title="GnuPG">without entering a password</a> all the time.
</p>
<p>First type in the password for the email account in a plain text file. Do this in a secure directory with <code>700</code> permissions located on a <a href="../en/Tmpfs.html" title="Tmpfs">tmpfs</a> to avoid writing the unencrypted password to the disk. Then <a href="../en/GnuPG.html#Encrypt_and_decrypt" class="mw-redirect" title="Encrypt">encrypt</a> the file with GnuPG setting yourself as the recipient.
</p>
<p>Remove the plain text file since it is no longer needed. Move the encrypted file to the final location, e.g. <code>~/.offlineimappass.gpg</code>.
</p>
<p>Now create a python function that will decrypt the password:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimap.py</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#! /usr/bin/env python
from subprocess import check_output

def get_pass():
    return check_output("gpg -dq ~/.offlineimappass.gpg", shell=True).rstrip(b"\n")</pre>
<p>Load this file from <code>~/.offlineimaprc</code> and specify the defined function:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[general]
# Path to file with arbitrary Python code to be loaded
pythonfile = ~/.offlineimap.py
...

[Repository <i>example</i>]
# Decrypt and read the encrypted password
remotepasseval = get_pass()
...</pre>
<div class="mw-heading mw-heading4"><h4 id="Using_pass">Using pass</h4></div>
<p><a href="../en/Pass.html" title="Pass">pass</a> is a simple password manager from the command line based on GPG.
</p>
<p>First create a password for your email account(s):
</p>
<pre>$ pass insert Mail/<i>account</i>
</pre>
<p>Now create a python function that will decrypt the password:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimap.py</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#! /usr/bin/env python
from subprocess import check_output

def get_pass(account):
    return check_output("pass Mail/" + account, shell=True).splitlines()[0]</pre>
<p>This is an example for a multi-account setup. You can customize the argument to <i>pass</i> as defined previously.
</p>
<p>Load this file from <code>~/.offlineimaprc</code> and specify the defined function: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[general]
# Path to file with arbitrary Python code to be loaded
pythonfile = ~/.offlineimap.py
...

[Repository Gmail]
# Decrypt and read the encrypted password
remotepasseval = get_pass("Gmail")
...</pre>
<div class="mw-heading mw-heading4"><h4 id="Gnome_keyring">Gnome keyring</h4></div>
<p>In configuration for remote repositories the remoteusereval/remotepasseval fields can be set to custom python code that evaluates to the username/password. The code can be a call to a function defined in a Python script pointed to by 'pythonfile' config field. Create <code>~/.offlineimap.py</code> according to the subsection below and use it in the configuration:
</p>
<pre>[general]
pythonfile = ~/.offlineimap.py

[Repository examplerepo]
type = IMAP
remotehost = mail.example.com
remoteusereval = get_username("examplerepo")
remotepasseval = get_password("examplerepo")
</pre>
<div class="mw-heading mw-heading5"><h5 id="gkgetsecret.py">gkgetsecret.py</h5></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Since this is now a single subsection, it should be merged with the introduction above. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:OfflineIMAP.html">Talk:OfflineIMAP</a>)</div>
</div>
<p>Ensure that <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python2/">python2</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python2-gobject/">python2-gobject</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsecret">libsecret</a></span> are installed. Then create <code>~/.offlineimap.py</code> with the following contents: <a rel="nofollow" class="external text" href="https://pastebin.com/wzVfSac8">gkgetsecret.py</a> and set <code>pythonfile = ~/.offlineimap.py</code> in <code>~/.offlineimaprc</code> as described above.
</p>
<p>If you created a password using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=seahorse">seahorse</a></span>, you can retrieve it from its description. For instance, the password for a repository <i>Work</i> which is stored in gnome-keyring with the description <i>Password for me@myworkemail.com</i> can be retrieved by adding the following to <code>~/.offlineimaprc</code>:
</p>
<pre>[Repository Work]
...
remotepasseval = get_pw_from_desc("Password for me@myworkemail.com")
</pre>
<p>For configurations where you wish to store the username as well, it is better if the password is created using <i>secret-tool</i> as this can be used to set attributes such as the username and repository name. Consider a password created with the following command:
</p>
<pre>$ secret-tool store --label "Password for Work Email" username me@myworkemail.com repo Work
</pre>
<p>The username and password for this account can be retrieved by adding the following to <code>~/.offlineimaprc</code>:
</p>
<pre>[Repository Work]
...
remoteusereval = get_val_from_attrs("username", "repo", "Work")
remotepasseval = get_pw_from_attrs("repo", "Work")
</pre>
<div class="mw-heading mw-heading4"><h4 id="python-keyring">python-keyring</h4></div>
<p>There is a general solution that should work for any keyring. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-keyring">python-keyring</a></span> and then change  your ~/.offlineimaprc to say something like:
</p>
<pre>[general]
pythonfile = /home/user/offlineimap.py
...
[Repository RemoteEmail]
remoteuser = username@host.net
remotepasseval = keyring.get_password("host","username")
...
</pre>
<p>and somewhere in ~/offlineimap.py add <code>import keyring</code>. 
</p>
<p>Now all you have to do is set your password, either using python script like so:
</p>
<pre>$ python
&gt;&gt;&gt; import keyring
&gt;&gt;&gt; keyring.set_password("host","username", "MYPASSWORD")</pre>
<p>or you can use keyring command provided by python-keyring package
</p>
<pre>$ keyring --help
$ keyring set host username
Password for 'username' in 'host':
$ keyring get host username
password
</pre>
<p>and it will grab the password from your (kwallet/gnome-) keyring instead of having to keep it in plaintext or enter it each time.
</p>
<div class="mw-heading mw-heading4"><h4 id="Emacs_EasyPG">Emacs EasyPG</h4></div>
<p>See <a rel="nofollow" class="external free" href="https://www.emacswiki.org/emacs/OfflineIMAP#toc2">https://www.emacswiki.org/emacs/OfflineIMAP#toc2</a>
</p>
<div class="mw-heading mw-heading4"><h4 id="KeePassXC_with_Freedesktop.org_secret-service">KeePassXC with Freedesktop.org secret-service</h4></div>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsecret">libsecret</a></span>, in KeepassXC settings enable Freedesktop.org secret-service integration, expose entries in <i>Database Settings &gt; Secret Service Integration</i> and add additional attribute <code>Title</code> with <code>account@name.org</code> in <i>Edit Entry &gt; Advanced</i> settings. Now the command <code>secret-tool lookup Title account@name.org</code> should print the password in the console. Next create a python script:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"> ~/.script.py</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#! /usr/bin/env python
import os
from subprocess import check_output

def get_pass(account):
    return check_output("secret-tool lookup Title " + account, shell=True).splitlines()[0].decode("UTF-8")</pre>
<p>An equivalent script which relies on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-secretstorage">python-secretstorage</a></span> is:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"> ~/.script.py</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#! /usr/bin/env python
import secretstorage
from contextlib import closing
def get_pass(title):
    with closing(secretstorage.dbus_init()) as conn:
        assert(secretstorage.check_service_availability(conn))
        collection = secretstorage.get_default_collection(conn)
        if collection.is_locked():
            collection.unlock()
        matches = collection.search_items({"Title": title})
        entry = next(matches)
        if entry.is_locked():
            entry.unlock()
        return(entry.get_secret())</pre>
<p>Load this file from <code>~/.offlineimaprc</code> and specify the defined function: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[general]
# Path to file with arbitrary Python code to be loaded
pythonfile = ~/.script.py
...
[Repository Gmail]
# Decrypt and read the encrypted password
remotepasseval = get_pass("account@name.org")
...</pre>
<div class="mw-heading mw-heading2"><h2 id="Troubleshooting">Troubleshooting</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Overriding_UI_and_autorefresh_settings">Overriding UI and autorefresh settings</h3></div>
<p>For the sake of troubleshooting, it is sometimes convenient to launch offlineimap with a more verbose UI, no background syncs and perhaps even a debug level:
</p>
<pre>$ offlineimap [ -o ] [ -d &lt;debug_type&gt; ] [ -u &lt;ui&gt; ]
</pre>
<dl>
<dt>-o</dt>
<dd>Disable autorefresh, keepalive, etc.</dd>
</dl>
<dl>
<dt>-d &lt;debug_type&gt;</dt>
<dd>Where <i>&lt;debug_type&gt;</i> is one of <code>imap</code>, <code>maildir</code> or <code>thread</code>. Debugging imap and maildir are, by far, the most useful.</dd>
</dl>
<dl>
<dt>-u &lt;ui&gt;</dt>
<dd>Where <i>&lt;ui&gt;</i> is one of <code>CURSES.BLINKENLIGHTS</code>, <code>TTY.TTYUI</code>, <code>NONINTERACTIVE.BASIC</code>, <code>NONINTERACTIVE.QUIET</code> or <code>MACHINE.MACHINEUI</code>. TTY.TTYUI is sufficient for debugging purposes.</dd>
</dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> More recent versions use the following for &lt;ui&gt;: <code>blinkenlights</code>, <code>ttyui</code>, <code>basic</code>, <code>quiet</code> or <code>machineui</code>.</div>
<div class="mw-heading mw-heading3"><h3 id="Folder_could_not_be_created">Folder could not be created</h3></div>
<p>In version 6.5.3, offlineimap gained the ability to create folders in the remote repository, as described <a rel="nofollow" class="external text" href="https://alioth-lists.debian.net/pipermail/offlineimap-project/2011-September/010200.html">here</a>.
</p>
<p>This can lead to errors of the following form when using <code>nametrans</code> on the remote repository:
</p>
<pre>ERROR: Creating folder bar on repository foo-remote
  Folder 'bar'[foo-remote] could not be created. Server responded: ('NO', ['[ALREADYEXISTS] Duplicate folder name bar (Failure)'])
</pre>
<p>The solution is to provide an inverse <code>nametrans</code> lambda for the local repository, e.g.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.offlineimaprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Repository foo-local]
nametrans = lambda foldername: foldername.replace('bar', 'BAR')

[Repository foo-remote]
nametrans = lambda foldername: foldername.replace('BAR', 'bar')
</pre>
<ul>
<li>For working out the correct inverse mapping. the output of <code>offlineimap --info</code> should help.</li>
<li>After updating the mapping, it may be necessary to remove all of the folders under <code>$HOME/.offlineimap/</code> for the affected accounts.</li>
</ul>
<div class="mw-heading mw-heading3"><h3 id="SSL_fingerprint_does_not_match">SSL fingerprint does not match</h3></div>
<pre>ERROR: Server SSL fingerprint 'keykeykey' for hostname 'example.com' does not match configured fingerprint. Please verify and set 'cert_fingerprint' accordingly if not set yet.
</pre>
<p>To solve this, add to <code>~/.offlineimaprc</code> (in the same section as <code>ssl = yes</code>) one of the following:
</p>
<ul>
<li>either add <code>cert_fingerprint</code>, with the certificate fingerprint of the remote server. This checks whether the remote server certificate matches the given fingerprint. <pre>cert_fingerprint = keykeykey</pre>
</li>
<li>or add <code>sslcacertfile</code> with the path to the system CA certificates file. Needs <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ca-certificates">ca-certificates</a></span> installed. This validates the remote ssl certificate chain against the Certification Authorities in that file. <pre>sslcacertfile = /etc/ssl/certs/ca-certificates.crt</pre>
</li>
</ul>
<div class="mw-heading mw-heading3"><h3 id="Copying_message,_connection_closed">
<span id="Copying_message.2C_connection_closed"></span>Copying message, connection closed</h3></div>
<pre>ERROR: Copying message -2 [acc: email] connection closed
Folder sent [acc: email]: ERROR: while syncing sent [account email] connection closed
</pre>
<p>Cause of this can be creation of same message both locally and on server. This happens if your email provider automatically saves sent mails to same folder as your local client. If you encounter this, disable save of sent messages in your local client.
</p>
<div class="mw-heading mw-heading2"><h2 id="See_also">See also</h2></div>
<ul>
<li><a rel="nofollow" class="external text" href="https://lists.alioth.debian.org/mailman/listinfo/offlineimap-project">Official OfflineIMAP mailing list</a></li>
<li>
<a rel="nofollow" class="external text" href="https://pbrisbin.com/posts/mutt_gmail_offlineimap/">Mutt + Gmail + Offlineimap</a> - An outline of brisbin's simple gmail/mutt setup using cron to keep offlineimap syncing.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Mail_retrieval_agents.html" title="Category:Mail retrieval agents">Mail retrieval agents</a></li>
<li><a href="../en/Category:OpenPGP.html" title="Category:OpenPGP">OpenPGP</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=OfflineIMAP&amp;oldid=808309">https://wiki.archlinux.org/index.php?title=OfflineIMAP&amp;oldid=808309</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 14 May 2024, at 19:45.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">OfflineIMAP</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
