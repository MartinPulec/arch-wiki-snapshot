<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Migrate installation to new hardware - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Migrate_installation_to_new_hardware rootpage-Migrate_installation_to_new_hardware skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Adapt_to_new_hardware" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Adapt_to_new_hardware">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Adapt to new hardware</span>
			</div>
		</a>
		
			<button aria-controls="toc-Adapt_to_new_hardware-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Adapt to new hardware subsection</span>
			</button>
		
		<ul id="toc-Adapt_to_new_hardware-sublist" class="vector-toc-list">
			<li id="toc-Hard_drive_vs._SSD" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hard_drive_vs._SSD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Hard drive vs. SSD</span>
				</div>
			</a>
			
			<ul id="toc-Hard_drive_vs._SSD-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-CPU_vendor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#CPU_vendor">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>CPU vendor</span>
				</div>
			</a>
			
			<ul id="toc-CPU_vendor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GPU_vendor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GPU_vendor">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>GPU vendor</span>
				</div>
			</a>
			
			<ul id="toc-GPU_vendor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-UEFI_vs._MBR_boot_code_booting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#UEFI_vs._MBR_boot_code_booting">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>UEFI vs. MBR boot code booting</span>
				</div>
			</a>
			
			<ul id="toc-UEFI_vs._MBR_boot_code_booting-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Bottom_to_top" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Bottom_to_top">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Bottom to top</span>
			</div>
		</a>
		
			<button aria-controls="toc-Bottom_to_top-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Bottom to top subsection</span>
			</button>
		
		<ul id="toc-Bottom_to_top-sublist" class="vector-toc-list">
			<li id="toc-On_the_old_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#On_the_old_system">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>On the old system</span>
				</div>
			</a>
			
			<ul id="toc-On_the_old_system-sublist" class="vector-toc-list">
				<li id="toc-List_of_installed_packages" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#List_of_installed_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>List of installed packages</span>
				</div>
			</a>
			
			<ul id="toc-List_of_installed_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-pacman_cache" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#pacman_cache">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.2</span>
					<span>pacman cache</span>
				</div>
			</a>
			
			<ul id="toc-pacman_cache-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-On_the_new_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#On_the_new_system">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>On the new system</span>
				</div>
			</a>
			
			<ul id="toc-On_the_new_system-sublist" class="vector-toc-list">
				<li id="toc-Installation_guide_first_half" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Installation_guide_first_half">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Installation guide first half</span>
				</div>
			</a>
			
			<ul id="toc-Installation_guide_first_half-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Copy_pacman_cache" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Copy_pacman_cache">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Copy pacman cache</span>
				</div>
			</a>
			
			<ul id="toc-Copy_pacman_cache-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installation_guide_second_half" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Installation_guide_second_half">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.3</span>
					<span>Installation guide second half</span>
				</div>
			</a>
			
			<ul id="toc-Installation_guide_second_half-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Install_previously_installed_software" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Install_previously_installed_software">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.4</span>
					<span>Install previously installed software</span>
				</div>
			</a>
			
			<ul id="toc-Install_previously_installed_software-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Top_to_bottom" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Top_to_bottom">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Top to bottom</span>
			</div>
		</a>
		
			<button aria-controls="toc-Top_to_bottom-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Top to bottom subsection</span>
			</button>
		
		<ul id="toc-Top_to_bottom-sublist" class="vector-toc-list">
			<li id="toc-Clean_up_the_old_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Clean_up_the_old_system">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Clean up the old system</span>
				</div>
			</a>
			
			<ul id="toc-Clean_up_the_old_system-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Copy_the_system_to_a_new_drive" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Copy_the_system_to_a_new_drive">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Copy the system to a new drive</span>
				</div>
			</a>
			
			<ul id="toc-Copy_the_system_to_a_new_drive-sublist" class="vector-toc-list">
				<li id="toc-Disk_cloning" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Disk_cloning">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.1</span>
					<span>Disk cloning</span>
				</div>
			</a>
			
			<ul id="toc-Disk_cloning-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-File_copying" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#File_copying">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.2</span>
					<span>File copying</span>
				</div>
			</a>
			
			<ul id="toc-File_copying-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Transport_options" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Transport_options">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.3</span>
					<span>Transport options</span>
				</div>
			</a>
			
			<ul id="toc-Transport_options-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Update_fstab" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Update_fstab">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Update fstab</span>
				</div>
			</a>
			
			<ul id="toc-Update_fstab-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reinstall_the_boot_loader" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reinstall_the_boot_loader">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Reinstall the boot loader</span>
				</div>
			</a>
			
			<ul id="toc-Reinstall_the_boot_loader-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Regenerate_kernel_image" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Regenerate_kernel_image">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Regenerate kernel image</span>
				</div>
			</a>
			
			<ul id="toc-Regenerate_kernel_image-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reconfigure_audio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reconfigure_audio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>Reconfigure audio</span>
				</div>
			</a>
			
			<ul id="toc-Reconfigure_audio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reconfigure_network" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reconfigure_network">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7</span>
					<span>Reconfigure network</span>
				</div>
			</a>
			
			<ul id="toc-Reconfigure_network-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Migrate installation to new hardware</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Moving_an_existing_install_into_(or_out_of)_a_virtual_machine.html" title="Moving an existing install into (or out of) a virtual machine">Moving an existing install into (or out of) a virtual machine</a></li>
</ul>
</div>
<p>This article discusses the steps required for moving an Arch Linux system to new hardware. The goal is to achieve the same Arch Linux installation, in terms of the installed software and configuration that is independent of the hardware.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> Some of the following instructions can be dangerous: you are advised to backup all of your important data on the old system before continuing.</div>
<p>There are two different approaches to migrating an installation:
</p>
<ol>
<li>
<i>Bottom to top</i>: Install a fresh Arch Linux system on the new hardware, afterwards restore the installed packages and configuration files, e.g. as described in <a href="../en/Dotfiles.html" title="Dotfiles">dotfiles</a>.</li>
<li>
<i>Top to bottom</i>: Clone the old harddrive to the new harddrive, or place the old harddrive into the new system; modify configuration files where necessary.</li>
</ol>
<p>The <i>top to bottom</i> approach gives a more exact reproduction of the original system than the <i>bottom to top</i> approach.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Adapt_to_new_hardware">Adapt to new hardware</h2></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> For both approaches we have to account for differences between the old and hardware and change the installed drivers and configuration accordingly.</div>
<p>Before you begin, research aspects of the new hardware and make a list of differences. Common differences are
</p>
<div class="mw-heading mw-heading3"><h3 id="Hard_drive_vs._SSD">Hard drive vs. SSD</h3></div>
<p>See the article <a href="../en/Solid_state_drive.html" class="mw-redirect" title="SSD">SSD</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="CPU_vendor">CPU vendor</h3></div>
<p>If you switch the CPU, to a CPU from another vendor (e.g. Intel to AMD), change the <a href="../en/Microcode.html" title="Microcode">Microcode</a> configuration.
</p>
<div class="mw-heading mw-heading3"><h3 id="GPU_vendor">GPU vendor</h3></div>
<p>If you changed the GPU to a GPU from another vendor (e.g. from <a href="../en/AMDGPU.html" class="mw-redirect" title="AMD">AMD</a> to <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a>) change the graphics driver.
</p>
<div class="mw-heading mw-heading3"><h3 id="UEFI_vs._MBR_boot_code_booting">UEFI vs. MBR boot code booting</h3></div>
<p>If you switch to a more recent mainboard with UEFI, it might be preferable or required to switch from "MBR boot code" booting to <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> booting. In this case a new <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a> is needed.
</p>
<div class="mw-heading mw-heading2"><h2 id="Bottom_to_top">Bottom to top</h2></div>
<div class="mw-heading mw-heading3"><h3 id="On_the_old_system">On the old system</h3></div>
<p>We define here a minimal configuration that carries over from the old to the new system which differentiates this approach from the Installation guide. Think about the configuration files from <code>/etc</code> and dotfiles in <code>/home</code> that you want to copy to the new system, as well as user data files. If you will not have access to the old system from the new system then backup up all the files that you want to copy over.
</p>
<div class="mw-heading mw-heading4"><h4 id="List_of_installed_packages">List of installed packages</h4></div>
<pre>$ pacman -Qqen &gt; pkglist.txt
$ pacman -Qqem &gt; pkglist_aur.txt
</pre>
<p>gives you a nice list of explicitly installed packages from the repositories and from the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>. Include it in your backup if you make one.
</p>
<p>You may also use the following script to give you a better overview of the binaries and libraries installed unbeknownst to pacman (e. g. installed via Steam, Desura or using their own install methods):
</p>
<pre>find / -regextype posix-extended -regex "/(sys|srv|proc)|.*/\.ccache/.*" -prune -o -type f \
-exec bash -c 'file "{}" | grep -E "(32|64)-bit"' \; | \
awk -F: '{print $1}' | \
while read -r bin; \
do pacman -Qo "$bin" &amp;&gt;/dev/null || echo "$bin"; \
done
</pre>
<div class="mw-heading mw-heading4"><h4 id="pacman_cache">pacman cache</h4></div>
<p>Consider backing up <code>/var/cache/pacman/pkg/</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="On_the_new_system">On the new system</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Installation_guide_first_half">Installation guide first half</h4></div>
<p>For basics about installing a new system, refer to the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a>. Follow the first half of the installation guide up to but excluding the pacstrap command.
</p>
<div class="mw-heading mw-heading4"><h4 id="Copy_pacman_cache">Copy pacman cache</h4></div>
<p>Copy the pacman cache found at <code>/var/cache/pacman/pkg/</code> from the old to the new system, or from the backup to the new system.
</p>
<div class="mw-heading mw-heading4"><h4 id="Installation_guide_second_half">Installation guide second half</h4></div>
<p>Continue with the installation guide from, and including the pacstrap command, up to the end, but do not reboot. Do not skip the pacstrap command as it does additional work besides the installation of packages.
</p>
<div class="mw-heading mw-heading4"><h4 id="Install_previously_installed_software">Install previously installed software</h4></div>
<p>Edit pkglist.txt (and pkglist_aur.txt) and remove drivers that are not needed on the new system. Then install any other previously installed software with
</p>
<pre># pacman -S --needed - &lt; pkglist.txt
</pre>
<div class="mw-heading mw-heading2"><h2 id="Top_to_bottom">Top to bottom</h2></div>
<p>There are two options for the Top to Bottom approach, you can either keep the drive where the system is already installed, and modify its contents, or you can copy the system to a new drive. If you keep the drive, and modify it, then place it back into the old system, the modifications will likely prevent the old system from booting.
</p>
<div class="mw-heading mw-heading3"><h3 id="Clean_up_the_old_system">Clean up the old system</h3></div>
<p>It is also worth to clean up your system before cloning it, as described in <a href="../en/System_maintenance.html#Clean_the_filesystem" title="System maintenance">System maintenance#Clean the filesystem</a>. Make sure that the old system is still working as expected after the cleanup before moving on.
</p>
<div class="mw-heading mw-heading3"><h3 id="Copy_the_system_to_a_new_drive">Copy the system to a new drive</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> If you are planning to keep the hard drive where the system is already installed, you can skip this section.</div>
<p>There are two fundamental methods for copying the system to a new drive, disk cloning and file copying.
</p>
<div class="mw-heading mw-heading4"><h4 id="Disk_cloning">Disk cloning</h4></div>
<p>For <a href="../en/Disk_cloning.html" title="Disk cloning">disk cloning</a>, it is required to use a live linux system rather than the old Arch Linux system. For example, you could use the Arch Linux <a href="../en/USB_flash_installation_media.html" class="mw-redirect" title="USB flash installation media">USB flash installation media</a>. The partition layout and file systems of the old system will be reproduced and therefore, if you migrated to a bigger drive and want to use all available space, e.g. for the root partition, you must resize the partition.
</p>
<div class="mw-heading mw-heading4"><h4 id="File_copying">File copying</h4></div>
<ul>
<li>Create new <a href="../en/Partitioning.html" class="mw-redirect" title="Partitions">partitions</a> and <a href="../en/File_systems.html" title="File systems">file systems</a> on the new drive. You can use the opportunity to choose a different partition layout and/or file systems than before.</li>
<li>For each file system, copy the files from the old to the new drive, using <a href="../en/Rsync.html" title="Rsync">rsync</a> or other tools that preserve permissions, attributes, etc., see <a href="../en/Rsync.html#Full_system_backup" title="Rsync">rsync#Full system backup</a>, <a href="../en/Rsync.html#File_system_cloning" title="Rsync">rsync#File system cloning</a> for further details. This process should be completed before entering arch-chroot.</li>
</ul>
<div class="mw-heading mw-heading4"><h4 id="Transport_options">Transport options</h4></div>
<p>There are many different methods for how to transport the data between the two drives:
</p>
<ul>
<li>Connect origin and destination HDDs to the same computer, either the old or the new one. Data link: old HDD -&gt; computer -&gt; new HDD.</li>
<li>Make use of temporary storage devices like external HDDs, or cloud backups. Data link: old HDD -&gt; old computer -&gt; storage -&gt; new computer -&gt; new HDD. For an overview see the article <a href="../en/System_backup.html" title="System backup">System backup</a>.</li>
<li>Transfer data over network, for example with <a href="../en/Rsync.html" title="Rsync">rsync</a>. Data link: old HDD -&gt; old computer -&gt; network -&gt; new computer -&gt; new HDD.</li>
</ul>
<p>For the first two options, consider that you might need adapters to connect the HDDs (PATA-&gt;SATA, USB-HDD-Cases, etc.), and choose a connection that is sufficiently fast.
</p>
<p>The last two options require you to use a live linux system on the new computer, as it is not possible to boot from the new hard drive at this point.
</p>
<div class="mw-heading mw-heading3"><h3 id="Update_fstab">Update fstab</h3></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> 
<ul>
<li>Before doing this step please make sure that you do not wish to use this drive in the old system, as changing the <a href="../en/Fstab.html" title="Fstab">fstab</a> file will likely prevent the system from booting in the old configuration.</li>
<li>If you used <a href="../en/Disk_cloning.html" title="Disk cloning">disk cloning</a> and are using the recently cloned drive in the same machine as the drive it was cloned from, the partition table UUID, partition UUIDs and file system UUIDs will cause conflict between the drives. Make sure to change all of these on the cloned drive to new random values. For GPT and its partitions, use <a href="../en/GPT_fdisk.html#Backup_and_restore_partition_table" title="GPT fdisk">sgdisk</a>, for the file systems use the <a href="../en/File_systems.html#Types_of_file_systems" title="File systems">appropriate userspace utility</a>.</li>
</ul>
</div>
<p>If you are using an Arch Linux Installation Image, mount the new root partition to <code>/mnt</code>, and any other partitions required like you would in a normal install (see <a href="../en/Installation_guide.html#Mount_the_file_systems" title="Installation guide">Installation guide#Mount the file systems</a>).
</p>
<p>Insert an arbitrary comment such as <code>#end of old fstab</code> at the end of your <code>/mnt/etc/fstab</code>. Generate a new fstab file as indicated on <a href="../en/Installation_guide.html#Fstab" title="Installation guide">Installation guide#Fstab</a>, appending it to the current fstab file. In general, always review the fstab file created by genfstab. In this case, check the older fstab entries before the comment, if they are outdated or duplicates then delete them, and if the old entries remain useful then keep them. For example, mount entries for network drives can be kept. In general it is recommended to use <a href="../en/Persistent_block_device_naming.html" title="Persistent block device naming">Persistent block device naming</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Reinstall_the_boot_loader">Reinstall the boot loader</h3></div>
<p>You might need to reinstall and/or reconfigure the <a href="../en/Boot_loader.html" class="mw-redirect" title="Boot loader">boot loader</a> for the following reasons:
</p>
<ul>
<li>Different disks, partition layout, or file system</li>
<li>Adding <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> boot entries into the new mainboard NVRAM</li>
<li>Migration from "MBR boot code" booting to UEFI booting</li>
<li>Migration from USB to SATA/NVMe</li>
<li>Updating the kernel commandline
<ul>
<li>In case of a different GPU, update the framebuffer mode</li>
<li>Update the <a href="../en/Microcode.html" title="Microcode">Microcode</a> initramfs image</li>
</ul>
</li>
</ul>
<p>If you are using a Arch Linux live environment, then before reinstalling the boot loader, <a href="../en/Change_root.html" class="mw-redirect" title="Change root">change root</a> into the new system:
</p>
<pre># arch-chroot /mnt
</pre>
<p>Refer to the article on your <a href="../en/Boot_loader.html" class="mw-redirect" title="Boot loader">boot loader</a> for instructions on how to (re)install it.
</p>
<div class="mw-heading mw-heading3"><h3 id="Regenerate_kernel_image">Regenerate kernel image</h3></div>
<p>It is recommended to <a href="../en/Regenerate_the_initramfs.html" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a> image, although initially the fallback initramfs image may work.
</p>
<div class="mw-heading mw-heading3"><h3 id="Reconfigure_audio">Reconfigure audio</h3></div>
<ul><li>
<span class="plainlinks archwiki-template-man" title="$ man 1 alsamixer"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/alsamixer.1">alsamixer(1)</a></span> volume
<ul><li>save settings</li></ul>
</li></ul>
<div class="mw-heading mw-heading3"><h3 id="Reconfigure_network">Reconfigure network</h3></div>
<p>If the old installation and the migrated installation shall coexist in the same network, set a new hostname with <a href="../en/Network_configuration.html#Set_the_hostname" title="Network configuration">hostnamectl</a>.
</p>
<p>Also consider configuration changes that are required after a change in hostname:
</p>
<ul>
<li><code>/etc/hosts</code></li>
<li>other applications using hostname: synergy, nut (network ups tools)</li>
<li>
<code>grep -Ri 'hostname' /etc</code> (as the root user) should give some hints on the files to be updated</li>
</ul>
<p>The network interface names may change and if they were hardcoded in your <a href="../en/Network_manager.html" class="mw-redirect" title="Network manager">network manager</a> configuration, its configuration will need updating. Find out the new network interface names with:
</p>
<pre># journalctl -k --grep='renamed from eth'
</pre>
<div class="mw-heading mw-heading2"><h2 id="See_also">See also</h2></div>
<ul>
<li><a rel="nofollow" class="external text" href="http://positon.org/clone-a-linux-system-install-to-another-computer">Howto clone a linux system</a></li>
<li><a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=71038">[1]</a></li>
<li><a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=543214">[2]</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:System_recovery.html" title="Category:System recovery">System recovery</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Migrate_installation_to_new_hardware&amp;oldid=831756">https://wiki.archlinux.org/index.php?title=Migrate_installation_to_new_hardware&amp;oldid=831756</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 12 April 2025, at 13:34.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Migrate installation to new hardware</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
