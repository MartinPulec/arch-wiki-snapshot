<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dd - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dd rootpage-Dd skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Disk_cloning_and_restore" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Disk_cloning_and_restore">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Disk cloning and restore</div>
		</a>
		
			<button aria-controls="toc-Disk_cloning_and_restore-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Disk cloning and restore subsection</span>
			</button>
		
		<ul id="toc-Disk_cloning_and_restore-sublist" class="vector-toc-list">
			<li id="toc-Cloning_a_partition" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cloning_a_partition">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Cloning a partition</div>
			</a>
			
			<ul id="toc-Cloning_a_partition-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cloning_an_entire_hard_disk" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cloning_an_entire_hard_disk">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Cloning an entire hard disk</div>
			</a>
			
			<ul id="toc-Cloning_an_entire_hard_disk-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Backing_up_the_partition_table" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Backing_up_the_partition_table">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Backing up the partition table</div>
			</a>
			
			<ul id="toc-Backing_up_the_partition_table-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Create_disk_image" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Create_disk_image">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Create disk image</div>
			</a>
			
			<ul id="toc-Create_disk_image-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restore_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restore_system">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.5</span>Restore system</div>
			</a>
			
			<ul id="toc-Restore_system-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Backup_and_restore_MBR" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Backup_and_restore_MBR">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Backup and restore MBR</div>
		</a>
		
			<button aria-controls="toc-Backup_and_restore_MBR-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Backup and restore MBR subsection</span>
			</button>
		
		<ul id="toc-Backup_and_restore_MBR-sublist" class="vector-toc-list">
			<li id="toc-Remove_bootloader" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remove_bootloader">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Remove bootloader</div>
			</a>
			
			<ul id="toc-Remove_bootloader-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Extra_scenario_in_addition_to_disk-related_scenes" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Extra_scenario_in_addition_to_disk-related_scenes">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Extra scenario in addition to disk-related scenes</div>
		</a>
		
			<button aria-controls="toc-Extra_scenario_in_addition_to_disk-related_scenes-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Extra scenario in addition to disk-related scenes subsection</span>
			</button>
		
		<ul id="toc-Extra_scenario_in_addition_to_disk-related_scenes-sublist" class="vector-toc-list">
			<li id="toc-Patching_a_binary_file,_block-by-block_in-place" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Patching_a_binary_file,_block-by-block_in-place">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Patching a binary file, block-by-block in-place</div>
			</a>
			
			<ul id="toc-Patching_a_binary_file,_block-by-block_in-place-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Printing_volume_label_of_a_VFAT_filesystem_image" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Printing_volume_label_of_a_VFAT_filesystem_image">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Printing volume label of a VFAT filesystem image</div>
			</a>
			
			<ul id="toc-Printing_volume_label_of_a_VFAT_filesystem_image-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sponge_between_piped_commands" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sponge_between_piped_commands">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Sponge between piped commands</div>
			</a>
			
			<ul id="toc-Sponge_between_piped_commands-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Transfering_data_with_size_limitation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Transfering_data_with_size_limitation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Transfering data with size limitation</div>
			</a>
			
			<ul id="toc-Transfering_data_with_size_limitation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Writing_a_bootable_disk_image_to_block_device,_optionally_display_progress_information" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Writing_a_bootable_disk_image_to_block_device,_optionally_display_progress_information">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Writing a bootable disk image to block device, optionally display progress information</div>
			</a>
			
			<ul id="toc-Writing_a_bootable_disk_image_to_block_device,_optionally_display_progress_information-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Partial_read:_copied_data_is_smaller_than_requested" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Partial_read:_copied_data_is_smaller_than_requested">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Partial read: copied data is smaller than requested</div>
			</a>
			
			<ul id="toc-Partial_read:_copied_data_is_smaller_than_requested-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Total_transfered_bytes_count_readout_is_wrong" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Total_transfered_bytes_count_readout_is_wrong">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Total transfered bytes count readout is wrong</div>
			</a>
			
			<ul id="toc-Total_transfered_bytes_count_readout_is_wrong-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">dd</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Dd" title="Dd – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Dd.html" title="Dd – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Dd" title="Dd – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Dd.html" title="Dd – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Dd.html" title="Dd – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Dd" title="Dd – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Disk_cloning.html" title="Disk cloning">Disk cloning</a></li>
<li><a href="../en/USB_flash_installation_medium.html#Using_basic_command_line_utilities" class="mw-redirect" title="USB flash installation media">USB flash installation media#Using basic command line utilities</a></li>
<li><a href="../en/Benchmarking.html#dd" title="Benchmarking">Benchmarking#dd</a></li>
<li><a href="../en/Securely_wipe_disk.html#dd" title="Securely wipe disk">Securely wipe disk#dd</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/dd_(Unix)" class="extiw" title="wikipedia:dd (Unix)">dd</a> is a <a href="../en/Core_utilities.html" class="mw-redirect" title="Core utility">core utility</a> whose primary purpose is to copy a file and optionally convert it during the copy process.
</p>
<p>Similarly to <i>cp</i>, by default <i>dd</i> makes a bit-to-bit copy of the file, but with lower-level I/O flow control features.
</p>
<p>For more information, see <span class="plainlinks archwiki-template-man" title="$ man 1 dd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dd.1">dd(1)</a></span> or the <a rel="nofollow" class="external text" href="https://www.gnu.org/software/coreutils/dd">full documentation</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> By default, <i>dd</i> outputs nothing until the task has finished. To monitor the progress of the operation, add the <code>status=progress</code> option to the command.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> One should be extremely cautious using <i>dd</i>, as with any command of this kind it can destroy data irreversibly.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><i>dd</i> is part of the GNU <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=coreutils">coreutils</a></span>. For other utilities in the package, please refer to <a href="../en/Core_utilities.html" title="Core utilities">Core utilities</a>.
</p>
<h2><span class="mw-headline" id="Disk_cloning_and_restore">Disk cloning and restore</span></h2>
<p>The <i>dd</i> command is a simple, yet versatile and powerful tool. It can be used to copy from source to destination, block-by-block, regardless of their filesystem types or operating systems. A convenient method is to use <i>dd</i> from a live environment, as in a Live CD.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> As with any command of this type, you should be very cautious when using it; it can destroy data. Remember the order of input file (<code>if=</code>) and output file (<code>of=</code>) and do not reverse them! Always ensure that the destination drive or partition (<code>of=</code>) is of equal or greater size than the source (<code>if=</code>).
</div>
<h3><span class="mw-headline" id="Cloning_a_partition">Cloning a partition</span></h3>
<p>From physical disk <code>/dev/sda</code>, partition 1, to physical disk <code>/dev/sdb</code>, partition 1:
</p>
<pre># dd if=/dev/sda1 of=/dev/sdb1 bs=64K conv=noerror,sync status=progress
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Be careful that if the output partition <code>of=</code> (<code>sdb1</code> in the example) does not exist, <i>dd</i> will create a file with this name and will start filling up your root file system.</div>
<h3><span class="mw-headline" id="Cloning_an_entire_hard_disk">Cloning an entire hard disk</span></h3>
<p>From physical disk <code>/dev/sda</code> to physical disk <code>/dev/sdb</code>:
</p>
<pre># dd if=/dev/sda of=/dev/sdb bs=64K conv=noerror,sync status=progress
</pre>
<p>This will clone the entire drive, including the partition table, bootloader, all partitions, UUIDs, and data.
</p>
<ul>
<li>
<code>bs=</code> sets the block size. Defaults to 512 bytes, which is the "classic" block size for hard drives since the early 1980s, but is not the most convenient. Use a bigger value, 64K or 128K. Also, please read the note below, because there is more to this than just "block sizes" — it also influences how read errors propagate. See <a rel="nofollow" class="external autonumber" href="https://www.mail-archive.com/eug-lug@efn.org/msg12073.html">[1]</a> and <a rel="nofollow" class="external autonumber" href="http://blog.tdg5.com/tuning-dd-block-size/">[2]</a> for details and to figure out the best bs value for your use case.</li>
<li>
<code>noerror</code> instructs <i>dd</i> to continue operation, ignoring all read errors. Default behavior for <i>dd</i> is to halt at any error.</li>
<li>
<code>sync</code> fills input blocks with zeroes at the end of the block if there were any read errors somewhere in the block, so data offsets stay in sync (see below for detailed explanation of read error behavior with sync if you are suspecting possible read errors).</li>
<li>
<code>status=progress</code> shows periodic transfer statistics which can be used to estimate when the operation may be complete.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The block size you specify influences how read errors are handled. Read below. For data recovery, use <a href="../en/Disk_cloning.html#Using_ddrescue" class="mw-redirect" title="Ddrescue">ddrescue</a>.</div>
<p>The <i>dd</i> utility technically has an "input block size" (IBS) and an "output block size" (OBS). When you set <code>bs</code>, you effectively set both IBS and OBS. Normally, if your block size is, say, 1 MiB, <i>dd</i> will read 1024×1024 bytes and write as many bytes. But if a read error occurs, things will go wrong. Many people seem to think that <i>dd</i> will "fill up read errors with zeroes" if you use the <code>noerror,sync</code> options, but this is not what happens. <i>dd</i> will, according to documentation, fill up the OBS to IBS size <i>after completing its read</i>, which means adding zeroes at the <i>end</i> of the block. This means, for a disk, that effectively the whole 1 MiB would become messed up because of a single 512 byte read error in the beginning of the read: 12ERROR89 would become 128900000 instead of 120000089.
</p>
<p>If you are positive that your disk does not contain any errors, you could proceed using a larger block size, which will increase the speed of your copying several fold. For example, changing bs from 512 to 64K changed copying speed from 35 MB/s to 120 MB/s on a simple Celeron 2.7 GHz system. But keep in mind that read errors on the source disk will end up as <i>block errors</i> on the destination disk, i.e. a single 512-byte read error will mess up the whole 64 KiB output block.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>To regain unique UUIDs of an <i>ext2/3/4</i> filesystem, use <code>tune2fs /dev/sd<i>XY</i> -U random</code> on every partition. For swap partitions, use <code>mkswap -U random /dev/sd<i>XY</i></code> instead.</li>
<li>If you are cloning a <a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a> disk, you can use <a href="../en/GPT_fdisk.html#Backup_and_restore_partition_table" title="GPT fdisk">sgdisk</a> to randomize the disk and partition GUIDs and regain their uniqueness.</li>
<li>Partition table changes from <i>dd</i> are not registered by the kernel. To notify of changes without rebooting, use a utility like <i>partprobe</i> (part of <a href="../en/Parted.html" class="mw-redirect" title="GNU Parted">GNU Parted</a>).</li>
</ul>
</div>
<h3><span class="mw-headline" id="Backing_up_the_partition_table">Backing up the partition table</span></h3>
<p>See <a href="../en/Fdisk.html#Backup_and_restore_partition_table" title="Fdisk">fdisk#Backup and restore partition table</a> or <a href="../en/GPT_fdisk.html#Backup_and_restore_partition_table" class="mw-redirect" title="Gdisk">gdisk#Backup and restore partition table</a>.
</p>
<h3><span class="mw-headline" id="Create_disk_image">Create disk image</span></h3>
<p>Boot from a live medium and make sure no partitions are mounted from the source hard drive.
</p>
<p>Then mount the external hard drive and backup the drive:
</p>
<pre># dd if=/dev/sda conv=sync,noerror bs=64M status=progress | lz4 -z  &gt; <i>/path/to/backup.img.lz4</i>
</pre>
<p>If necessary (e.g. when the resulting files will be stored on a <a href="../en/FAT.html" class="mw-redirect" title="FAT32">FAT32</a> file system), split the disk image into multiple parts (see also <span class="plainlinks archwiki-template-man" title="$ man 1 split"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/split.1">split(1)</a></span>):
</p>
<pre># dd if=/dev/sda conv=sync,noerror bs=64M status=progress | lz4 -z | split -a3 -b2G - <i>/path/to/backup.img.lz4</i>
</pre>
<p>If there is not enough disk space locally, you may send the image through <i>ssh</i>:
</p>
<pre># dd if=/dev/sda conv=sync,noerror bs=64M status=progress | lz4 -z | ssh user@local dd of=backup.img.lz4
</pre>
<p>Finally, save extra information about the drive geometry necessary in order to interpret the partition table stored within the image. The most important of which is the sector size.
</p>
<pre># fdisk -l /dev/sda &gt; <i>/path/to/list_fdisk.info</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>You may wish to use a block size (<code>bs=</code>) that is equal to the amount of cache on the HDD you are backing up. For example, <code>bs=512M</code> works for an 512 MiB cache. The 64 MiB mentioned in this article is better than the default <code>bs=512</code> bytes, but it may run faster with a larger <code>bs=</code>.</li>
<li>The above examples use <span class="plainlinks archwiki-template-man" title="$ man 1 lz4"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lz4.1">lz4(1)</a></span> which uses multiple cores for compression, but you can exchange it for <a href="../en/Archiving_and_compression.html#Compression_only" title="Archiving and compression">any other compression program</a>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Restore_system">Restore system</span></h3>
<p>To restore your system:
</p>
<pre># lz4 -dc <i>/path/to/backup.img.lz4</i> | dd of=/dev/sda status=progress
</pre>
<p>When the image has been split, use the following instead:
</p>
<pre># cat <i>/path/to/backup.img.lz4*</i> | lz4 -dc | dd of=/dev/sda status=progress
</pre>
<h2><span class="mw-headline" id="Backup_and_restore_MBR">Backup and restore MBR</span></h2>
<p>Before making changes to a disk, you may want to backup the partition table and partition scheme of the drive. You can also use a backup to copy the same partition layout to numerous drives.
</p>
<p>The MBR is stored in the first 512 bytes of the disk. It consists of 4 parts:
</p>
<ol>
<li>The first 440 bytes contain the bootstrap code (boot loader).</li>
<li>The next 6 bytes contain the disk signature.</li>
<li>The next 64 bytes contain the partition table (4 entries of 16 bytes each, one entry for each primary partition).</li>
<li>The last 2 bytes contain a boot signature.</li>
</ol>
<p>To save the MBR as <code>mbr_file.img</code>:
</p>
<pre># dd if=/dev/sd<i>X</i> of=<i>/path/to/mbr_file.img</i> bs=512 count=1
</pre>
<p>You can also extract the MBR from a full dd disk image:
</p>
<pre># dd if=<i>/path/to/disk.img</i> of=<i>/path/to/mbr_file.img</i> bs=512 count=1
</pre>
<p>To restore (be careful, this destroys the existing partition table and with it access to all data on the disk):
</p>
<pre># dd if=/<i>path/to/mbr_file.img</i> of=/dev/sd<i>X</i> bs=512 count=1
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Restoring the MBR with a mismatching partition table will make your data unreadable and nearly impossible to recover. If you simply need to reinstall the bootloader, see their respective pages as they also employ the <a rel="nofollow" class="external text" href="https://www.pixelbeat.org/docs/disk/">DOS compatibility region</a>: <a href="../en/GRUB.html" title="GRUB">GRUB</a> or <a href="../en/Syslinux.html" title="Syslinux">Syslinux</a>.</div>
<p>If you only want to restore the boot loader, but not the primary partition table entries, just restore the first 440 bytes of the MBR:
</p>
<pre># dd if=<i>/path/to/mbr_file.img</i> of=/dev/sd<i>X</i> bs=440 count=1
</pre>
<p>To restore only the partition table, one must use:
</p>
<pre># dd if=<i>/path/to/mbr_file.img</i> of=/dev/sd<i>X</i> bs=1 skip=446 count=64
</pre>
<h3><span class="mw-headline" id="Remove_bootloader">Remove bootloader</span></h3>
<p>To erase the MBR bootstrap code (may be useful if you have to do a full reinstall of another operating system), only the first 440 bytes need to be zeroed:
</p>
<pre># dd if=/dev/zero of=/dev/sd<i>X</i> bs=440 count=1
</pre>
<h2><span class="mw-headline" id="Extra_scenario_in_addition_to_disk-related_scenes">Extra scenario in addition to disk-related scenes</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Some paragraphs in this section are difficult to read; they need to be proofread. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Dd.html">Talk:Dd</a>)</div>
</div>
<p>As some readers might have already realised, the <span class="plainlinks archwiki-template-man" title="$ man 1 dd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dd.1">dd(1)</a></span> core utility has a different command-line syntax compared to other utilities. Moreover, while supporting <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/a/12538#12538">some unique features not found in other commodity utilities</a>, several default behaviours it has are either less-ideal or <a href="#Partial_read:_copied_data_is_smaller_than_requested">potentially error-prone</a> if applied to specific scenarios.  For that reason, users may want to use some alternatives that are better in some aspects in lieu of the <i>dd</i> core utility.
</p>
<p>That said, it is still worth to note that since <i>dd</i> is a <a href="../en/Core_utilities.html" class="mw-redirect" title="Core utility">core utility</a>, which is installed by default on Arch and many other systems, it is preferable to some alternatives or more specialised utilities if it is inconvenient to install a new package on your system.
</p>
<p>To cover the two aspects that are addressed above, this section is dedicated to summarising the features of the <span class="plainlinks archwiki-template-man" title="$ man 1 dd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dd.1">dd(1)</a></span> core utility that are rarely found in other commodity utilities — in a form that resembles the <a href="../en/Pacman/Rosetta.html" title="Pacman/Rosetta">pacman/Rosetta</a> article but with the quantity of examples being cut down to examine the features of <i>dd</i> (as denoted by <i>i.e.</i> or <i>To</i>-clause in "Tip:" box under subsection), either in practice or <i>pseudocode</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> To keep this section concise, the comparison of alternative utilities only includes those found in the official repositories. We check the cases where <i>dd</i> has an obvious advantage over them. If necessary, we explain the advantage in detail.<br>For more alternatives, see <a href="../en/Core_utilities.html#dd_alternatives" class="mw-redirect" title="Coreutils">coreutils#dd alternatives</a>.</div>
<h3>
<span id="Patching_a_binary_file.2C_block-by-block_in-place"></span><span class="mw-headline" id="Patching_a_binary_file,_block-by-block_in-place">Patching a binary file, block-by-block in-place</span>
</h3>
<p>It is not an uncommon practice to use <i>dd</i> as a feature-limited binary file patcher in an automated shell script as it supports:
</p>
<ul>
<li>
<code>seek</code>ing the output file by a given offset before writing.</li>
<li>writing to an output file (without truncating the size of the output file by adding the <code>conv=notrunc</code> option).</li>
</ul>
<p>Here is an example to modify the timestamp part of the first member in a <span class="plainlinks archwiki-template-man" title="$ man 5 cpio"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/cpio.5#Portable_ASCII_Format">cpio(5) § Portable ASCII Format</a></span> archive, which starts at the 49th byte of the file (or with an offset of <code>0x30</code> if you prefer hex notation):
</p>
<pre>$ touch a-randomly-chosen-file
$ bsdtar -cf example-modify-ts.cpio --format odc -- a-randomly-chosen-file
</pre>
<pre>$ printf '%011o' "$(date -d "2019-12-21 00:00:00" +%s)" | dd conv=notrunc of=example-modify-ts.cpio seek=<b>48</b> oflag=seek_bytes
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The currently undocumented <a rel="nofollow" class="external text" href="https://github.com/coreutils/coreutils/commit/140eca15c4a3d3213629a048cc307fde0d094738"><code>seek_bytes</code> output flag</a> is added above for seeking the output in offset of bytes instead of blocks before starting to <span class="plainlinks archwiki-template-man" title="$ man 2 write"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/write.2">write(2)</a></span> to output.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To print byte stream from command-line input hex notation, use <span class="plainlinks archwiki-template-man" title="$ man 1 basenc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/basenc.1#base16">basenc(1) § base16</a></span> and/or <span class="plainlinks archwiki-template-man" title="$ man 1 printf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/printf.1">printf(1)</a></span>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> In this feature grid (<i>i.e.</i> <span class="plainlinks archwiki-template-man" title="$ man 2 write"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/write.2">write(2)</a></span> <i>with offset, with</i> no truncation), instead of using <i>dd</i>, one may consider using a shell that supports to call <span class="plainlinks archwiki-template-man" title="$ man 2 lseek"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lseek.2">lseek(2)</a></span> on shell-opened file descriptor if in case of:
<ul>
<li>the input file of <i>dd</i> is a pipe connected with a program that utilize <span class="plainlinks archwiki-template-man" title="$ man 2 splice"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/splice.2">splice(2)</a></span> system call, and the user want to avoid unnecessary userspace I/O of <i>dd</i> for a better performance</li>
<li>or, to avoid frequently <span class="plainlinks archwiki-template-man" title="$ man 2 fork"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fork.2">fork(2)</a></span> in a shell script loop to reduce the performance penalty</li>
</ul>
Then it would be necessary to let that shell open the file descriptor at first, and perform some seeking operation on the file descriptor to assign this file descriptor as output end of corresponding utility that use <span class="plainlinks archwiki-template-man" title="$ man 2 splice"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/splice.2">splice(2)</a></span> system call (or a shell builtin command does not forking, as in following example of <span class="plainlinks archwiki-template-man" title="$ man 1 zshmodules"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmodules.1#sysseek">zshmodules(1) § sysseek</a></span>):<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ zsh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$ local +xr openToWriteFD
$ zmodload zsh/system
$ sysopen -wu openToWriteFD example-modify-ts.cpio
$ sysseek -u $openToWriteFD 48
$ printf '%011o' "$(date -d "2019-12-21 00:00:00" +%s)" &gt;&amp;${openToWriteFD}
...
$ : finally close the fd {openToWriteFD}&gt;&amp;-</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Avoiding using this approach if you cannot be certain about the program which you need it to write with offset really utilize <span class="plainlinks archwiki-template-man" title="$ man 2 splice"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/splice.2">splice(2)</a></span>, which implies the program should not perform any kind of seeking or truncating on its output.
Some programs may seek/truncate on input/output file descriptor by themselves even if this behaviour is unspecified on command line flags, that will invalidate your shell's <span class="plainlinks archwiki-template-man" title="$ man 3 lseek"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lseek.3">lseek(3)</a></span> call, or unexpectedly truncate on your opened file descriptor.</div>
</div>
<h3><span class="mw-headline" id="Printing_volume_label_of_a_VFAT_filesystem_image">Printing volume label of a VFAT filesystem image</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For this specific scenario, a more practical choice is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=file">file</a></span>.</div>
<p>To read the filesystem <a rel="nofollow" class="external text" href="https://wiki.osdev.org/FAT#FAT_32_2">volume label of an VFAT</a> image file, which should be in total length of 11 bytes that padded by ASCII spaces, with an offset of <code>0x047</code>:
</p>
<pre>$ truncate -s 36M empty-hole.img
$ mkfs.fat -F 32 -n LabelMe empty-hole.img
</pre>
<pre>$ dd iflag=skip_bytes,count_bytes count=11 skip=$((0x047)) if=empty-hole.img | sed -e 's% *$%%'
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a rel="nofollow" class="external text" href="https://github.com/coreutils/coreutils/commit/140eca15c4a3d3213629a048cc307fde0d094738">Both input flags are currently undocumented</a>:
<ul>
<li>The former <code>skip_bytes</code> instruct <i>dd</i> to seek (or <i>skip</i> if input is not seekable) on input file by offset in quatity of byte instead of number of blocks before starting to <span class="plainlinks archwiki-template-man" title="$ man 2 read"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/read.2">read(2)</a></span> from it.</li>
<li>The later <code>count_bytes</code> allow user to specifiy the total quantity of blocks to copy from input file <i>in byte</i>, instead of a number of blocks. It could be confusing since specifying this option could still subject to partial <span class="plainlinks archwiki-template-man" title="$ man 2 read"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/read.2">read(2)</a></span>, think it like a fractional value of <a href="#Partial_read:_copied_data_is_smaller_than_requested">input block <code>count</code></a> to better understand this behaviour.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <i>To transfer data from input (with an offset) to output within given length</i>, in shell scripting, one may also consider <span class="plainlinks archwiki-template-man" title="$ man 1 curl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/curl.1#r,">curl(1) § r,</a></span> as a commodity alternative that use range notation instead.<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <i>curl</i> does not support seeking/skipping when input file is a device/pipe, another alternative <span class="plainlinks archwiki-template-man" title="$ man 1 socat"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/socat.1">socat(1)</a></span> does support these operation on input file (incl. block device, <i>excl. pipe and character device</i>) but is less commodifying than <i>curl</i>:<pre>$ socat -u -,seek=$((0x047)),readbytes=11 - &lt; empty-hole.img | sed -e 's% *$%%'</pre>
</div>
</div>
<h3><span class="mw-headline" id="Sponge_between_piped_commands">Sponge between piped commands</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> As already noted in the title, a practical choice for this specific scenario is <span class="plainlinks archwiki-template-man" title="$ man 1 sponge"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sponge.1">sponge(1)</a></span>, which supports atomic write by writing to <code>$TMPDIR</code> (or <code>/tmp</code> if it is unset) at first.</div>
<p>In the following example, to avoid unnecessary long-lasting TCP connection on input end if the output end blocks longer than expected, one may put a <i>dd</i> between two commands with an output block size certainly larger than input while still reasonably smaller than available memory:
</p>
<pre>$ curl -qgsfL http://example.org/mirrors/ftp.archlinux.org/mirrored.md5deep | dd ibs=128k obs=200M | <i>poor-mirroring-script-that-perform-mirroring-on-input-paths-line-by-line-wo-buffer-entire-list-first</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> It should never be considered as a generic alternative to <span class="plainlinks archwiki-template-man" title="$ man 1 sponge"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sponge.1">sponge(1)</a></span> as <i>dd</i> truncates the output file before starting the entire copy operation.</div>
<h3><span class="mw-headline" id="Transfering_data_with_size_limitation">Transfering data with size limitation</span></h3>
<p>It is a general practice to use <i>dd</i> in a data streaming shell script for limiting total length of data that a piped command may consume.  For example, to inspect an ustar header block (<span class="plainlinks archwiki-template-man" title="$ man 5 tar"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/tar.5#POSIX_ustar_Archives">tar(5) § POSIX ustar Archives</a></span>) using a shell script function in a streaming manner:
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The <code>B</code> suffix in argument to <code>count</code> option is a <a rel="nofollow" class="external text" href="https://github.com/coreutils/coreutils/commit/97e9778296ead515e77a64942b84f88dcf36a176">newly introduced</a> feature as of GNU coreutils v9.1 that has same effect of <a href="#Printing_volume_label_of_a_VFAT_filesystem_image">count_bytes input flag</a>, is potentially confused with option in forms like <code>count=256k</code> which indicate <i>dd</i> to copy 262144 input blocks instead of bytes.</div>
<pre>hexdump-field() {
  set -o pipefail
  printf '%s[%d]:\n' $1 $2
  dd count=${2}B status=none | hexdump -e $2'/1 "%3.2x"' -e '" | " '$2'/1 "%_p" "\n"'
}

inspect-tar-header-block() {
  local -a hdrstack=(
    name 100
    mode 8
    uid 8
    gid 8
    size 12
    mtime 12
    checksum 8
    typeflag 1
    linkname 100
    magic 6
    version 2
    uname 32
    gname 32
    devmajor 8
    devminor 8
    prefix 155
    pad 12
  )
  set - ${hdrstack[@]}
  while test $# -gt 0; do
    hexdump-field $1 $2 || return
    shift 2
  done
}</pre>
<pre>$ bsdtar -cf - /dev/tty /dev/null 2&gt;&amp;- | dd count=1 skip=1 status=none | inspect-tar-header-block
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <i>To streaming data from input to output within given length</i>, an alternative is <span class="plainlinks archwiki-template-man" title="$ man 1 pv"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pv.1#S,">pv(1) § S,</a></span> which supports <span class="plainlinks archwiki-template-man" title="$ man 2 splice"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/splice.2">splice(2)</a></span> system call.
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Another candidate alternative is <span class="plainlinks archwiki-template-man" title="$ man 1 head"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/head.1#c">head(1) § c</a></span>, though <a href="../en/Core_utilities.html#Alternatives" class="mw-redirect" title="Coreutils">implementation other than GNU coreutils</a> and glibc <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/a/12538#12538">may consume more data than requested</a>, causing data misalignment issue in a streamingly shell script.</div>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> In addition to above feature grid, if input file shall be <span class="plainlinks archwiki-template-man" title="$ man 2 lseek"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lseek.2">lseek(2)</a></span>'d by specific offset before streaming, and the output end of <i>dd</i> is a pipe connected with a program utilize <span class="plainlinks archwiki-template-man" title="$ man 2 splice"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/splice.2">splice(2)</a></span>, then, as an alternative, one may consider use:
<ul>
<li>a shell with builtin seeking capability (<i>as already mentioned <a href="#Patching_a_binary_file,_block-by-block_in-place">as alternative in a previous subsection</a>.</i>)</li>
<li>or, a Bourne-like shell (e.g. <a href="../en/Bash.html" title="Bash">bash</a>), with help of <span class="plainlinks archwiki-template-man" title="$ man 1 xxd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xxd.1#s">xxd(1) § s</a></span> for one-off <span class="plainlinks archwiki-template-man" title="$ man 2 lseek"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lseek.2">lseek(2)</a></span> on shell-opened file descriptor,</li>
</ul>
and <span class="plainlinks archwiki-template-man" title="$ man 1 pv"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pv.1#S,">pv(1) § S,</a></span> (<i>mentioned above</i>) as in following <a href="../en/Bash.html" title="Bash">bash</a> example (assuming that file descriptor has not allocated in shell by <code>ls -l /proc/self/fd</code> in bash at first):<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ bash</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$ exec 9&lt;dummy-but-rather-large.img
$ xxd -g 0 -l 0 -s $((0x47ffff)) &lt;&amp;9
$ pv -qSs 104857601200 &lt;&amp;9 | <i>program-that-process-load-of-data-but-does-not-limit-read-length-as-desired-nor-support-offset-read</i>
$ exec 9&lt;&amp;-</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Though incompatible with POSIX and some non-GNU implementation, it is feasible to replace the usage of <span class="plainlinks archwiki-template-man" title="$ man 1 xxd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xxd.1#s">xxd(1) § s</a></span> in above example with <i>dd</i> in conjunction of <code>count=0</code> and <code>skip</code> options as <a rel="nofollow" class="external text" href="https://github.com/coreutils/coreutils/blob/4fd708810ce0e0d967c4c14e1ff2ff7b43440b58/tests/dd/skip-seek-past-file.sh#L74">an example in coreutils test suite</a>.</div>
</div>
<h3>
<span id="Writing_a_bootable_disk_image_to_block_device.2C_optionally_display_progress_information"></span><span class="mw-headline" id="Writing_a_bootable_disk_image_to_block_device,_optionally_display_progress_information">Writing a bootable disk image to block device, optionally display progress information</span>
</h3>
<p>See <a href="../en/USB_flash_installation_medium.html#Using_basic_command_line_utilities" title="USB flash installation medium">USB flash installation medium#Using basic command line utilities</a> for examples of commodity utilities include the potential least adapted <i>dd</i> for that case.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <i>To write the content of a file to block device (with progress indicator)</i>, a suggested alternative is <span class="plainlinks archwiki-template-man" title="$ man 1 dd_rescue"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dd_rescue.1#W">dd_rescue(1) § W</a></span>. It is capable to avoid unnecessary writing in case of overwriting the old version of image on device with a newer version.</div>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Partial_read:_copied_data_is_smaller_than_requested">Partial read: copied data is smaller than requested</span></h3>
<p>Files created with <i>dd</i> can end up with a smaller size than requested if a full input block is not available for the moment, as <a rel="nofollow" class="external text" href="https://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html#dd-invocation">per documentation</a>:
</p>
<dl><dd>In addition, if no data-transforming <code>conv</code> operand <i>[i.e. option as in this wiki article]</i> is specified, input is copied to the output as soon as it is read, even if it is smaller than the block size.</dd></dl>
<p>On Linux, the underlying <span class="plainlinks archwiki-template-man" title="$ man 2 read"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/read.2">read(2)</a></span> system call may returns early (i.e. <i>partial read</i>) when reading from a <span class="plainlinks archwiki-template-man" title="$ man 7 pipe"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pipe.7">pipe(7)</a></span>, or when reading a device file like <code>/dev/urandom</code> and <code>/dev/random</code> (e.g. due to <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/a/178957#178957">hardcoded limitation of underlying kernel device driver</a>) Which make the total size of copied data smaller than expected when <code>bs</code> in conjunction of <code>count=<i>n</i></code> option is used, where <code><i>n</i></code> limited the maximum number of (<i>potential partial</i>) input block(s) to copy to output.
</p>
<p>It is possible, but not guaranteed, that <i>dd</i> will warn you about such kind of issue:
</p>
<pre>dd: warning: partial read (<i>X</i> bytes); suggest iflag=fullblock
</pre>
<p>The solution is to do as the warning says, add <code>iflag=fullblock</code> option in addition to the input file option to the <i>dd</i> command. For example, to create a new file filled up with random data in total length of 40 mebibytes:
</p>
<pre>$ dd if=/dev/urandom of=new-file-filled-by-urandom.bin bs=40M count=1 iflag=fullblock
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When reading from a pipe or a special device file like we just mentioned below to copy a portion of file in a fixed length with <code>count=<i>n</i></code> option being specified, it is suggested to, or always strongly recommended to add the <code>iflag=fullblock</code> option to the <i>dd</i> command if in case of <a href="../en/Securely_wipe_disk.html" title="Securely wipe disk">wiping</a> a <a href="#Remove_bootloader">portion of device</a> or <a href="../en/Securely_wipe_disk/Tips_and_tricks.html#Wipe_a_single_file" title="Securely wipe disk/Tips and tricks">file</a>.</div>
<p>When reading from a pipe, <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/556016/cat-dd-pipe-causes-partial-reads-without-iflag-fullblock-why-truncated-to-128">an alternative</a> to <code>iflag=fullblock</code> is to limit <code>bs</code> to the <code>PIPE_BUF</code> constant value as defined in <a rel="nofollow" class="external text" href="https://elixir.bootlin.com/linux/latest/A/ident/PIPE_BUF">linux/limits.h</a> to make the <span class="plainlinks archwiki-template-man" title="$ man 7 pipe"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pipe.7">pipe(7)</a></span> I/O atomic.  For example, to prepare a text file filled up will random alphanumeric string in total length of 5 mebibytes:
</p>
<pre>$ LC_ALL=C tr -dc '[:alnum:]' &lt;/dev/urandom | dd of=passtext-5m.txt bs=<b>4k</b> count=1280
</pre>
<p>Since the output file is not a pipe, one may prefer to use <code>ibs</code> and <code>obs</code> options to set block size separately for the (<i>input</i>) pipe and the (<i>output</i>) on-disk file. For example, to set a more efficient block size for output file:
</p>
<pre>$ LC_ALL=C tr -dc '[:alnum:]' &lt;/dev/urandom | dd of=passtext-5m.txt ibs=4k obs=<i>64k</i> count=1280
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> In some circumstances, merely keeping the output block size the same the value as the input block size with a value defined by the <code>PIPE_BUF</code> constant may already be optimal.</div>
<h3><span class="mw-headline" id="Total_transfered_bytes_count_readout_is_wrong">Total transfered bytes count readout is wrong</span></h3>
<p>The total transferred bytes count readout may be greater than actual if an error is encountered on writing to output (i.e. <i>partial write</i>, caused by e.g. SIGPIPE, faulty medium, or accidentally disconnected the target network block device), like in following proof of concept where the second <i>dd</i> obviously will not read more than 512200 bytes, but the first <i>dd</i> instance still report an inaccurate bytes count 512400 bytes:
</p>
<pre>$ yes 'x' | dd bs=4096 count=512400B | dd ibs=1 count=512200 status=none &gt;/dev/null
125+1 records in
125+1 records out
512400 bytes (512 kB, 500 KiB) copied, 10.7137 s, 47.8 kB/s
</pre>
<p>When resuming an interrupted transfer like the above PoC, it is recommended to only rely on the readout of number of whole output blocks already copied, as denoted by the number before "+" sign.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If partial I/O blocks count is greater than 1 even after adding <code>iflag=fullblock</code> option, which means partial I/O occurred more than once.  In that case, for reliable resuming your transfer progress, it is suggested to:
<ul>
<li>use <a href="../en/Disk_cloning.html#Using_ddrescue" class="mw-redirect" title="Ddrescue">ddrescue</a> to rerun the transfer instead, to deal with partial reads on a potential faulty medium more flexibly.</li>
<li>use <span class="plainlinks archwiki-template-man" title="$ man 1 dd_rescue"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dd_rescue.1">dd_rescue(1)</a></span> to rerun the transfer with direct I/O, in case of writing to nbd with a poor network connectivity.</li>
<li>avoid writing to faulty medium.</li>
</ul>
</div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li>
<span class="plainlinks archwiki-template-man" title="$ man 1p dd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dd.1p">dd(1p)</a></span>: POSIX specification of dd core utility in <a href="../en/Man_page.html" class="mw-redirect" title="Manpage">manpage</a> form</li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Commands.html" title="Category:Commands">Commands</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dd&amp;oldid=820441">https://wiki.archlinux.org/index.php?title=Dd&amp;oldid=820441</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 9 November 2024, at 19:02.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
