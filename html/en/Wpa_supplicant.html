<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>wpa_supplicant - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Wpa_supplicant rootpage-Wpa_supplicant skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Overview" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Overview">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Overview</div>
		</a>
		
		<ul id="toc-Overview-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Connecting_with_wpa_cli" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Connecting_with_wpa_cli">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Connecting with wpa_cli</div>
		</a>
		
		<ul id="toc-Connecting_with_wpa_cli-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Connecting_with_wpa_passphrase" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Connecting_with_wpa_passphrase">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Connecting with wpa_passphrase</div>
		</a>
		
		<ul id="toc-Connecting_with_wpa_passphrase-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Advanced_usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Advanced_usage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Advanced usage</div>
		</a>
		
			<button aria-controls="toc-Advanced_usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Advanced usage subsection</span>
			</button>
		
		<ul id="toc-Advanced_usage-sublist" class="vector-toc-list">
			<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Configuration</div>
			</a>
			
			<ul id="toc-Configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Connection" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connection">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Connection</div>
			</a>
			
			<ul id="toc-Connection-sublist" class="vector-toc-list">
				<li id="toc-Manual" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Manual">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.1</span>Manual</div>
			</a>
			
			<ul id="toc-Manual-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-At_boot_(systemd)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#At_boot_(systemd)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.2</span>At boot (systemd)</div>
			</a>
			
			<ul id="toc-At_boot_(systemd)-sublist" class="vector-toc-list">
				<li id="toc-802.1x/radius" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#802.1x/radius">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.2.1</span>802.1x/radius</div>
			</a>
			
			<ul id="toc-802.1x/radius-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-wpa_cli_action_script" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#wpa_cli_action_script">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>wpa_cli action script</div>
			</a>
			
			<ul id="toc-wpa_cli_action_script-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Roaming" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Roaming">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Roaming</div>
			</a>
			
			<ul id="toc-Roaming-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Debugging_connection_failures" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Debugging_connection_failures">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Debugging connection failures</div>
			</a>
			
			<ul id="toc-Debugging_connection_failures-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-nl80211_driver_not_supported_on_some_hardware" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#nl80211_driver_not_supported_on_some_hardware">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>nl80211 driver not supported on some hardware</div>
			</a>
			
			<ul id="toc-nl80211_driver_not_supported_on_some_hardware-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problem_with_mounted_network_shares_(cifs)_and_shutdown" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problem_with_mounted_network_shares_(cifs)_and_shutdown">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Problem with mounted network shares (cifs) and shutdown</div>
			</a>
			
			<ul id="toc-Problem_with_mounted_network_shares_(cifs)_and_shutdown-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Password-related_problems" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Password-related_problems">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Password-related problems</div>
			</a>
			
			<ul id="toc-Password-related_problems-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problems_with_eduroam_and_other_MSCHAPv2_connections" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problems_with_eduroam_and_other_MSCHAPv2_connections">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Problems with eduroam and other MSCHAPv2 connections</div>
			</a>
			
			<ul id="toc-Problems_with_eduroam_and_other_MSCHAPv2_connections-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Connections_to_pure_WPA3-SAE_access_points" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connections_to_pure_WPA3-SAE_access_points">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>Connections to pure WPA3-SAE access points</div>
			</a>
			
			<ul id="toc-Connections_to_pure_WPA3-SAE_access_points-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Connections_to_mixed_WPA2-PSK/WPA3-SAE_access_points" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connections_to_mixed_WPA2-PSK/WPA3-SAE_access_points">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>Connections to mixed WPA2-PSK/WPA3-SAE access points</div>
			</a>
			
			<ul id="toc-Connections_to_mixed_WPA2-PSK/WPA3-SAE_access_points-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hardware_802.11w_support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hardware_802.11w_support">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.8</span>Hardware 802.11w support</div>
			</a>
			
			<ul id="toc-Hardware_802.11w_support-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">wpa_supplicant</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Wpa_supplicant" title="Wpa supplicant – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Wpa_supplicant" title="Wpa supplicant – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Network_configuration.html" title="Network configuration">Network configuration</a></li>
<li><a href="../en/Network_configuration/Wireless.html" class="mw-redirect" title="Wireless network configuration">Wireless network configuration</a></li>
<li><a href="../en/Iwd.html" title="Iwd">iwd</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://w1.fi/wpa_supplicant/">wpa_supplicant</a> is a cross-platform <a href="https://en.wikipedia.org/wiki/Supplicant_(computer)" class="extiw" title="wikipedia:Supplicant (computer)">supplicant</a> with support for WPA, WPA2 and WPA3 (<a href="https://en.wikipedia.org/wiki/IEEE_802.11i-2004" class="extiw" title="wikipedia:IEEE 802.11i-2004">IEEE 802.11i</a>). It is suitable for desktops, laptops and embedded systems. It is the <a href="https://en.wikipedia.org/wiki/IEEE_802.1X" class="extiw" title="wikipedia:IEEE 802.1X">IEEE 802.1X</a>/WPA component that is used in the client stations. It implements key negotiation with a WPA authenticator and it controls the roaming and <a href="https://en.wikipedia.org/wiki/IEEE_802.11" class="extiw" title="wikipedia:IEEE 802.11">IEEE 802.11</a> authentication/association of the wireless driver.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wpa_supplicant">wpa_supplicant</a></span> package, which includes the main program <i>wpa_supplicant</i>, the passphrase tool <i>wpa_passphrase</i>, and the text front-end <i>wpa_cli</i>.
</p>
<p>Optionally, also install the official <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/wpa_supplicant_gui/">wpa_supplicant_gui</a></span><sup><small>AUR</small></sup> which provides <i>wpa_gui</i>, a graphical front-end for <i>wpa_supplicant</i>, or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/wpa-cute/">wpa-cute</a></span><sup><small>AUR</small></sup> which is a fork from an earlier version of <i>wpa_gui</i> with a couple of fixes and improvements.
</p>
<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>The first step to connect to an encrypted wireless network is having <i>wpa_supplicant</i> obtain authentication from a WPA authenticator. In order to do this, <i>wpa_supplicant</i> must be configured so that it will be able to submit the correct credentials to the authenticator.
</p>
<p>Once you are authenticated you need to assign an IP address, see <a href="../en/Network_configuration.html#IP_addresses" title="Network configuration">Network configuration#IP addresses</a>.
</p>
<h2><span class="mw-headline" id="Connecting_with_wpa_cli">Connecting with wpa_cli</span></h2>
<p>This connection method allows scanning for available networks, making use of <i>wpa_cli</i>, a command line tool which can be used to  configure <i>wpa_supplicant</i>. See <span class="plainlinks archwiki-template-man" title="$ man 8 wpa_cli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/wpa_cli.8">wpa_cli(8)</a></span> for details.
</p>
<p>In order to use <i>wpa_cli</i>, a control interface must be specified for <i>wpa_supplicant</i>, and it must be given the rights to update the configuration. Do this by creating a minimal configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wpa_supplicant/wpa_supplicant.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ctrl_interface=/run/wpa_supplicant
update_config=1</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Setting <code>update_config</code> to 1 allows <i>wpa_supplicant</i> to overwrite the configuration file. When overwriting, <i>wpa_supplicant</i> will reset file permissions according to your default <a href="../en/File_permissions_and_attributes.html" title="File permissions and attributes">umask</a>. It might accidentally make the file readable to everyone thus exposing your passwords, if your system is multiuser.</div>
<p>Now start <i>wpa_supplicant</i> with:
</p>
<pre># wpa_supplicant -B -i <i>interface</i> -c /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To discover your wireless network interface name, see <a href="../en/Network_configuration.html#Network_interfaces" title="Network configuration">Network configuration#Network interfaces</a>.</div>
<p>At this point run:
</p>
<pre># wpa_cli
</pre>
<p>This will present an interactive prompt (<code>&gt;</code>), which has tab completion and descriptions of completed commands.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>The default location of the control socket is <code>/var/run/wpa_supplicant/</code>. A custom path can be set manually with the <code>-p</code> option to match the <i>wpa_supplicant</i> configuration.</li>
<li>It is possible to specify the interface to be configured with the <code>-i</code> option; otherwise, the first found wireless interface managed by <i>wpa_supplicant</i> will be used.</li>
</ul>
</div>
<p>Use the <code>scan</code> and <code>scan_results</code> commands to see the available networks:
</p>
<pre>&gt; scan
OK
&lt;3&gt;CTRL-EVENT-SCAN-RESULTS
&gt; scan_results
bssid / frequency / signal level / flags / ssid
00:00:00:00:00:00 2462 -49 [WPA2-PSK-CCMP][ESS] <i>MYSSID</i>
11:11:11:11:11:11 2437 -64 [WPA2-PSK-CCMP][ESS] <i>ANOTHERSSID</i>
</pre>
<p>To associate with <code><i>MYSSID</i></code>, add the network, set the credentials and enable it:
</p>
<pre>&gt; add_network
0
&gt; set_network 0 ssid "<i>MYSSID</i>"
&gt; set_network 0 psk "<i>passphrase</i>"
&gt; enable_network 0
&lt;2&gt;CTRL-EVENT-CONNECTED - Connection to 00:00:00:00:00:00 completed (reauth) [id=0 id_str=]
</pre>
<p>If the SSID does not have password authentication, you must explicitly configure the network as keyless by replacing the command <code>set_network 0 psk "<i>passphrase</i>"</code> with <code>set_network 0 key_mgmt NONE</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Each network is indexed numerically, so the first network will have index 0.</li>
<li>If a passphrase is given to <code>set_network</code>, the <a href="https://en.wikipedia.org/wiki/Pre-shared_key" class="extiw" title="wikipedia:Pre-shared key">PSK</a> will be computed from the <i>quoted</i> "passphrase" string. Alternatively, you can use the <a href="#Connecting_with_wpa_passphrase">wpa_passphrase</a> command and enter the PSK directly by passing it to <code>psk</code> <i>without</i> quotes.</li>
</ul>
</div>
<p>Finally save this network in the configuration file and quit <i>wpa_cli</i>:
</p>
<pre>&gt; save_config
OK
&gt; quit
</pre>
<p>Once association is complete, you must obtain an IP address, for example, using <a href="../en/Dhcpcd.html#Running" title="Dhcpcd">dhcpcd</a>.
</p>
<h2><span class="mw-headline" id="Connecting_with_wpa_passphrase">Connecting with wpa_passphrase</span></h2>
<p>This connection method allows quickly connecting to a network whose SSID is already known, making use of <i>wpa_passphrase</i>, a command line tool which generates the minimal configuration needed by <i>wpa_supplicant</i>. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ wpa_passphrase <i>MYSSID</i> <i>passphrase</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">network={
    ssid="<i>MYSSID</i>"
    #psk="<i>passphrase</i>"
    psk=59e0d07fa4c7741797a4e394f38a5c321e3bed51d54ad5fcbd3f84bc7415d73d
}</pre>
<p>This means that <i>wpa_supplicant</i> can be associated with <i>wpa_passphrase</i> and started with:
</p>
<pre># wpa_supplicant -B -i <i>interface</i> -c &lt;(wpa_passphrase <i>MYSSID</i> <i>passphrase</i>)
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>The previous command requires a <a href="../en/Sudo.html#Login_shell" title="Sudo">root shell</a>.</li>
<li>Use quotes, if the input contains spaces. For example: <code>"secret passphrase"</code>.</li>
<li>To discover your wireless network interface name, see <a href="../en/Network_configuration.html#Listing_network_interfaces" title="Network configuration">Network configuration#Listing network interfaces</a>.</li>
<li>Some unusually complex passphrases may require input from a file, e.g. <code>wpa_passphrase <i>MYSSID</i> &lt; passphrase.txt</code>, or here strings, e.g. <code>wpa_passphrase <i>MYSSID</i> &lt;&lt;&lt; "<i>passphrase</i>"</code>.</li>
<li>Alternatively, when using special characters in the passphrase, rather than escaping them, simply invoke <code>wpa_passphrase</code> without specifying the passphrase. It will then prompt for it to be entered in the standard input where users can paste it even if it contains special characters.</li>
</ul>
</div>
<p>Finally, you should obtain an IP address, see <a href="../en/Network_configuration.html#IP_addresses" title="Network configuration">Network configuration#IP addresses</a>.
</p>
<h2><span class="mw-headline" id="Advanced_usage">Advanced usage</span></h2>
<p>For networks of varying complexity, possibly employing extensive use of <a href="https://en.wikipedia.org/wiki/Extensible_Authentication_Protocol" class="extiw" title="wikipedia:Extensible Authentication Protocol">EAP</a>, it will be useful to maintain a customised configuration file. For an overview of the configuration with examples, refer to <span class="plainlinks archwiki-template-man" title="$ man 5 wpa_supplicant.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/wpa_supplicant.conf.5">wpa_supplicant.conf(5)</a></span>; for details on all the supported configuration parameters, refer to the example file <code>/usr/share/doc/wpa_supplicant/wpa_supplicant.conf</code>.<a rel="nofollow" class="external autonumber" href="https://w1.fi/cgit/hostap/plain/wpa_supplicant/wpa_supplicant.conf">[1]</a>
</p>
<h3><span class="mw-headline" id="Configuration">Configuration</span></h3>
<p>As explained in <a href="#Connecting_with_wpa_passphrase">#Connecting with wpa_passphrase</a>, a basic configuration file can be generated with:
</p>
<pre># wpa_passphrase <i>MYSSID</i> <i>passphrase</i> &gt; /etc/wpa_supplicant/example.conf
</pre>
<p>This will only create a <code>network</code> section. A configuration file with also the ability of <a href="#Connecting_with_wpa_cli">#Connecting with wpa_cli</a> and some other common options may look like:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wpa_supplicant/example.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Giving configuration update rights to wpa_cli
ctrl_interface=/run/wpa_supplicant
ctrl_interface_group=wheel
update_config=1

# AP scanning
ap_scan=1

# ISO/IEC alpha2 country code in which the device is operating
country=US

# network section generated by wpa_passphrase
network={
    ssid="MYSSID"
    psk=59e0d07fa4c7741797a4e394f38a5c321e3bed51d54ad5fcbd3f84bc7415d73d
}</pre>
<p>If security is not a concern, the passphrase can also be defined in clear text in the <code>network</code> section by enclosing it in quotes:
</p>
<pre>psk="passphrase"
</pre>
<p>If the network does not have a passphrase, e.g. a public Wi-Fi:
</p>
<pre>network={
   ssid="MYSSID"
   key_mgmt=NONE
}
</pre>
<p>To connect to a WPA-Enterprise network, see <a href="#802.1x/radius">#802.1x/radius</a>.
</p>
<p>Further <code>network</code> blocks may be added manually, or using <i>wpa_cli</i> as illustrated in <a href="#Connecting_with_wpa_cli">#Connecting with wpa_cli</a>. In order to use <i>wpa_cli</i>, a control interface must be set with the <code>ctrl_interface</code> option. Setting <code>ctrl_interface_group=wheel</code> allows users belonging to such group to execute <i>wpa_cli</i>. This setting can be used to enable users without root access (or equivalent via sudo etc) to connect to wireless networks. Also add <code>update_config=1</code> so that changes made with <i>wpa_cli</i> to <code>example.conf</code> can be saved. Note that any user that is a member of the <code>ctrl_interface_group</code> group will be able to make changes to the file if this is turned on.
</p>
<p><code>fast_reauth=1</code> and <code>ap_scan=1</code> are the <i>wpa_supplicant</i> options active globally at the time of writing. Whether you need them, or other global options too for that matter, depends on the type of network to connect to. If you need other global options, simply copy them over to the file from <code>/usr/share/doc/wpa_supplicant/wpa_supplicant.conf</code>.
</p>
<p>Alternatively, <code>wpa_cli set</code> can be used to see options' status or set new ones. Multiple network blocks may be appended to this configuration: the supplicant will handle association to and roaming between all of them. The strongest signal defined with a network block usually is connected to by default, one may define <code>priority=</code> to influence behaviour. For example to auto-connect to any unsecured network as a fallback with the lowest priority:
</p>
<pre>network={
   key_mgmt=NONE
   priority=-999
}
</pre>
<p>Once you have finished the configuration file, you can optionally use it as a system-wide or per-interface default configuration by naming it according to the paths listed in <a href="#At_boot_(systemd)">#At boot (systemd)</a>. This also applies if you use additional network manager tools, which may rely on the paths (for example <a href="../en/Dhcpcd.html#10-wpa_supplicant" title="Dhcpcd">Dhcpcd#10-wpa_supplicant</a>).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To configure a network block to a hidden wireless <i>SSID</i>, which by definition will not turn up in a regular scan, the option <code>scan_ssid=1</code> has to be defined in the network block.</div>
<h3><span class="mw-headline" id="Connection">Connection</span></h3>
<h4><span class="mw-headline" id="Manual">Manual</span></h4>
<p>First start <i>wpa_supplicant</i> command, whose most commonly used arguments are:
</p>
<ul>
<li>
<code>-B</code> - Fork into background.</li>
<li>
<code>-c <i>filename</i></code> - Path to configuration file.</li>
<li>
<code>-i <i>interface</i></code> - Interface to listen on.</li>
<li>
<code>-D <i>driver</i></code> - Optionally specify the driver to be used. For a list of supported drivers see the output of <code>wpa_supplicant -h</code>.
<ul>
<li>
<code>nl80211</code> is the current standard, but not all wireless chip's modules support it.</li>
<li>
<code>wext</code> is currently deprecated, but still widely supported.</li>
</ul>
</li>
</ul>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 8 wpa_supplicant"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/wpa_supplicant.8">wpa_supplicant(8)</a></span> for the full argument list. For example:
</p>
<pre># wpa_supplicant -B -i <i>interface</i> -c /etc/wpa_supplicant/example.conf
</pre>
<p>followed by a method to obtain an ip address manually as indicated in the <a href="#Overview">#Overview</a>, for example:
</p>
<pre># dhcpcd <i>interface</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>
<i>dhcpcd</i> has a hook that can launch <i>wpa_supplicant</i> implicitly, see <a href="../en/Dhcpcd.html#10-wpa_supplicant" title="Dhcpcd">dhcpcd#10-wpa_supplicant</a>.</li>
<li>While testing arguments/configuration it may be helpful to launch <i>wpa_supplicant</i> in the foreground (i.e. <i>without</i> the <code>-B</code> option) for better debugging messages.</li>
</ul>
</div>
<h4>
<span id="At_boot_.28systemd.29"></span><span class="mw-headline" id="At_boot_(systemd)">At boot (systemd)</span>
</h4>
<p>The <i>wpa_supplicant</i> package provides multiple <a href="../en/Systemd.html" title="Systemd">systemd</a> service files:
</p>
<ul>
<li>
<code>wpa_supplicant.service</code> - uses <a href="../en/D-Bus.html" title="D-Bus">D-Bus</a>, recommended for <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> users.</li>
<li>
<code>wpa_supplicant@<i>interface</i>.service</code> - accepts the interface name as an argument and starts the <i>wpa_supplicant</i> daemon for this interface. It reads a <code>/etc/wpa_supplicant/wpa_supplicant-<i>interface</i>.conf</code> configuration file. Useful when using <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a>.</li>
<li>
<code>wpa_supplicant-nl80211@<i>interface</i>.service</code> - also interface specific, but explicitly forces the <code>nl80211</code> driver (see below). The configuration file path is <code>/etc/wpa_supplicant/wpa_supplicant-nl80211-<i>interface</i>.conf</code>.</li>
<li>
<code>wpa_supplicant-wired@<i>interface</i>.service</code> - also interface specific, uses the <code>wired</code> driver. The configuration file path is <code>/etc/wpa_supplicant/wpa_supplicant-wired-<i>interface</i>.conf</code>.</li>
</ul>
<p>To enable wireless at boot, enable an instance of one of the above services on a particular wireless interface. For example, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the <code>wpa_supplicant@<i>interface</i></code> systemd unit.
</p>
<p>Now choose and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> an instance of a service to obtain an ip address for the particular <i>interface</i> as indicated in the <a href="#Overview">#Overview</a>. For example, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the <code>dhcpcd@<i>interface</i></code> systemd unit.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <i>dhcpcd</i> has a hook that can launch <i>wpa_supplicant</i> implicitly, see <a href="../en/Dhcpcd.html#10-wpa_supplicant" title="Dhcpcd">dhcpcd#10-wpa_supplicant</a>.</div>
<h5>
<span id="802.1x.2Fradius"></span><span class="mw-headline" id="802.1x/radius">802.1x/radius</span>
</h5>
<p>To connect a wired adapter using 802.1x/radius you will need to specify some configurations and enable the necessary service for the adapter. This is useful for headless servers using <i>networkd</i>.
</p>
<p>You may need to specify the <code><i>wired</i></code> driver with the <code><i>-D wired</i></code> command line option (see <a href="#Manual">#Manual</a>) if the default driver does not support your adapter.
</p>
<p>Replace <code><i>adapter</i></code> with the wired adapter you wish to connect, and adapt the settings to match your 802.1x/radius requirements.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wpa_supplicant/wpa_supplicant-wired-<i>adapter</i>.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ctrl_interface=/run/wpa_supplicant
ap_scan=0
network={
  key_mgmt=IEEE8021X
  eap=PEAP
  identity="<i>user_name</i>"
  password="<i>user_password</i>"
  phase2="autheap=MSCHAPV2"
}</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The same configuration, but for a wireless adapter, would require changing <code>IEEE8021X</code> to <code>WPA-EAP</code> and removing the <code>ap_scan=0</code> line</div>
<p>Since this file is storing a plaintext password, <a href="../en/File_permissions_and_attributes.html#Changing_ownership" class="mw-redirect" title="Chown">chown</a> it to <code>root:root</code> and <a href="../en/File_permissions_and_attributes.html#Changing_permissions" class="mw-redirect" title="Chmod">chmod</a> it to <code>600</code>.
</p>
<p>To use the hash instead of the plaintext password, you can use the <code>hash</code> keyword:
</p>
<pre>password=hash:<i>hash_of_plaintext_password</i>
</pre>
<p>To hash your password:
</p>
<pre>$ iconv -t utf16le | openssl dgst -md4 -provider legacy
</pre>
<p>After invoking the command above, provide your plain password and then press <code>Ctrl+d</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Hashing the password does not improve the security nor avoid the risk of exposing secrets.</div>
<p>Before running the <code>wpa_supplicant-wired@<i>adapter</i>.service</code> service, make sure to set the device down:
</p>
<pre># ip link set <i>adapter</i> down
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> This setup can be used during system installation as well, though you may want to run using <code>dhcpcd@<i>adapter</i>.service</code> to solicit an address.</div>
<h3><span class="mw-headline" id="wpa_cli_action_script">wpa_cli action script</span></h3>
<p><i>wpa_cli</i> can run in daemon mode and execute a specified script based on events from <i>wpa_supplicant</i>. Two events are supported: <code>CONNECTED</code> and <code>DISCONNECTED</code>. Some <a href="../en/Environment_variables.html" title="Environment variables">environment variables</a> are available to the script, see <span class="plainlinks archwiki-template-man" title="$ man 8 wpa_cli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/wpa_cli.8">wpa_cli(8)</a></span> for details.
</p>
<p>The following example will use <a href="../en/Desktop_notifications.html" title="Desktop notifications">desktop notifications</a> to notify the user about the events:
</p>
<pre>#!/bin/sh

case "$2" in
    CONNECTED)
        notify-send "WPA supplicant: connection established";
        ;;
    DISCONNECTED)
        notify-send "WPA supplicant: connection lost";
        ;;
esac
</pre>
<p>Remember to make the script <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>, then use the <code>-a</code> flag to pass the script path to <i>wpa_cli</i>:
</p>
<pre>$ wpa_cli -a <i>/path/to/script</i>
</pre>
<h3><span class="mw-headline" id="Roaming">Roaming</span></h3>
<p>When connected to a wireless network with multiple access points, <i>wpa_supplicant</i> is typically responsible for roaming between access points.  Choosing a new access point requires <i>wpa_supplicant</i> to perform a scan of available networks, which causes a brief interruption in connectivity to the current access point while the wireless radio scans other frequencies.  After a scan, if <i>wpa_supplicant</i> detects a closer access point (BSSID) in the current network (SSID), in terms of signal strength (RSSI), it will re-associate to the closer access point.
</p>
<p>The default configuration of <i>wpa_supplicant</i> has relatively timid roaming: it will rescan only when the association to the current access point is lost.  This means that, if a client moves far away from its current access point, but not far enough to completely lose signal, the client will keep using the weak signal instead of roaming to a closer access point.
</p>
<p>To make <i>wpa_supplicant</i> more aggressive about roaming, set the <code>bgscan</code> parameter in the configuration file, such as:
</p>
<pre>bgscan="simple:30:-70:3600"
</pre>
<p>The above example will cause <i>wpa_supplicant</i> to scan every 30 seconds when the signal is weak (below -70), and every 3600 seconds otherwise.  <code>bgscan</code> can be specified either in specific <code>network</code> blocks or globally for all networks.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Make sure that you do not have remnant configuration files based on the full documentation example <code>/usr/share/doc/wpa_supplicant/wpa_supplicant.conf</code>. It is filled with uncommented network examples that may lead to random errors in practice (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/40661">FS#40661</a>).</div>
<h3><span class="mw-headline" id="Debugging_connection_failures">Debugging connection failures</span></h3>
<p>In order to determine why you are unable to connect to an access point you can run <i>wpa_supplicant</i> with the <code>-d</code> flag for debug messages, wait a couple seconds then look for lines that list SSIDs and the reason they were not connected to. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># wpa_supplicant -i wlan0 -c /etc/wpa_supplicant/example.conf -d</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">wlan0: Selecting BSS from priority group 0
wlan0: 0: d2:93:5b:b7:5d:d2 ssid=<i> wpa_ie_len=26 rsn_ie_len=24 caps=0x511 level=-54 freq=5180</i>
wlan0:    skip - SSID not known
wlan0: 1: f2:93:5b:b7:5d:d2 ssid=<i> wpa_ie_len=26 rsn_ie_len=24 caps=0x511 level=-54 freq=5180</i>
wlan0:    skip - SSID not known
wlan0: 2: b2:93:5b:b7:5d:d2 ssid=<i> wpa_ie_len=26 rsn_ie_len=24 caps=0x511 level=-54 freq=5180</i>
wlan0:    skip - SSID not known
wlan0: 3: b0:93:5b:b7:5d:d2 ssid='Access Point 1' wpa_ie_len=0 rsn_ie_len=20 caps=0x511 level=-55 freq=5180  wps
wlan0:    skip - SSID mismatch
wlan0: 4: c4:13:e2:33:42:20 ssid='\x00\x00\x00\x00' wpa_ie_len=22 rsn_ie_len=0 caps=0x111 level=-69 freq=5260
wlan0:    skip - SSID mismatch
wlan0: 5: c4:13:e2:33:42:24 ssid='Home' wpa_ie_len=0 rsn_ie_len=26 caps=0x1111 level=-69 freq=5260
wlan0:    skip RSN IE - no mgmt frame protection enabled but AP requires it
wlan0:    reject due to mismatch with WPA/WPA2
...</pre>
<p>In this case we are trying to connect to an access point with the SSID <i>home</i>. The reason the connection fails is <code>skip RSN IE - no mgmt frame protection enabled but AP requires it</code>, so we need to add <code>ieee80211w=2</code> to our configuration file.
</p>
<h3><span class="mw-headline" id="nl80211_driver_not_supported_on_some_hardware">nl80211 driver not supported on some hardware</span></h3>
<p>On some (especially old) hardware, <i>wpa_supplicant</i> may fail with the following error:
</p>
<pre>Successfully initialized wpa_supplicant
nl80211: Driver does not support authentication/association or connect commands
wlan0: Failed to initialize driver interface
</pre>
<p>This indicates that the standard <code>nl80211</code> driver does not support the given hardware. The deprecated <code>wext</code> driver might still support the device:
</p>
<pre># wpa_supplicant -B -i wlan0 <b>-D wext</b> -c /etc/wpa_supplicant/example.conf
</pre>
<p>If the command works to connect, and the user wishes to use <a href="../en/Systemd.html" title="Systemd">systemd</a> to manage the wireless connection, it is necessary to <a href="../en/Systemd.html#Drop-in_files" title="Systemd">edit</a> the <code>wpa_supplicant@.service</code> unit provided by the package and modify the <code>ExecStart</code> line accordingly:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/wpa_supplicant@.service.d/wext.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/bin/wpa_supplicant -c/etc/wpa_supplicant/wpa_supplicant-%I.conf -i%I <b>-Dnl80211,wext</b></pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Multiple comma separated driver wrappers in option <code>-Dnl80211,wext</code> makes <i>wpa_supplicant</i> use the first driver wrapper that is able to initialize the interface (see <span class="plainlinks archwiki-template-man" title="$ man 8 wpa_supplicant"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/wpa_supplicant.8">wpa_supplicant(8)</a></span>). This is useful when using mutiple or removable (e.g. USB) wireless devices which use different drivers.</div>
<h3>
<span id="Problem_with_mounted_network_shares_.28cifs.29_and_shutdown"></span><span class="mw-headline" id="Problem_with_mounted_network_shares_(cifs)_and_shutdown">Problem with mounted network shares (cifs) and shutdown</span>
</h3>
<p>When you use wireless to connect to network shares you might have the problem that the shutdown takes a very long time. That is because systemd runs against a 3 minute timeout. The reason is that WPA supplicant is shut down too early, i.e. before systemd tries to unmount the share(s). A <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/1435">bug report</a> suggests a work-around by <a href="../en/Systemd.html#Drop-in_files" title="Systemd">editing</a> the <code>wpa_supplicant@.service</code> as follows:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/wpa_supplicant.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
After=dbus.service</pre>
<h3><span class="mw-headline" id="Password-related_problems">Password-related problems</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wpa_supplicant">wpa_supplicant</a></span> may not work properly if directly passed via stdin particularly long or complex passphrases which include special characters. This may lead to errors such as <code>failed 4-way WPA handshake, PSK may be wrong</code> when launching <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wpa_supplicant">wpa_supplicant</a></span>.
</p>
<p>In order to solve this try using here strings <code>wpa_passphrase &lt;MYSSID&gt; &lt;&lt;&lt; "&lt;passphrase&gt;"</code> or passing a file to the <code>-c</code>  flag instead:
</p>
<pre># wpa_supplicant -i &lt;interface&gt; -c /etc/wpa_supplicant/example.conf
</pre>
<p>In some instances it was found that storing the passphrase cleartext in the <code>psk</code> key of the <code>wpa_supplicant.conf</code> <code>network</code> block gave positive results (see <a rel="nofollow" class="external autonumber" href="https://www.linuxquestions.org/questions/linux-wireless-networking-41/wpa-4-way-handshake-failed-843394/">[2]</a>). However, this approach is rather insecure. Using <code>wpa_cli</code> to create this file instead of manually writing it gives the best results most of the time and therefore is the recommended way to proceed.
</p>
<h3><span class="mw-headline" id="Problems_with_eduroam_and_other_MSCHAPv2_connections">Problems with eduroam and other MSCHAPv2 connections</span></h3>
<p>Ensure that your configuration uses
</p>
<pre>phase2="auth=MSCHAPV2"
</pre>
<p>with a capital "v" (see <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/51358">FS#51358</a>). You could even omit this setting entirely, since MSCHAPV2 is the default.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> While related to eduroam, the following paragraph seems like an different issue entirely that should have a separate section. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Wpa_supplicant.html">Talk:Wpa supplicant</a>)</div>
</div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> According to <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=286417">BBS#286417</a> the latest issue with eduroam is related to the recent upgrade to OpenSSL 3.1.1, downgrading to a <i>wpa_supplicant</i> version from 2021 seems excessive. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Wpa_supplicant.html">Talk:Wpa supplicant</a>)</div>
</div> 
<p>In addition, from version v2.10, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wpa_supplicant">wpa_supplicant</a></span> relies on <a href="../en/OpenSSL.html" title="OpenSSL">OpenSSL</a> 3 which causes some compatibility issues to connect to eduroam. A workaround consists in <a href="../en/Downgrading_packages.html" class="mw-redirect" title="Downgrading">downgrading</a>  <i>wpa_supplicant</i> to version v2.9 and installing <a href="../en/OpenSSL.html" title="OpenSSL">OpenSSL</a> 1.1 (see <a rel="nofollow" class="external autonumber" href="https://archtemis.readthedocs.io/en/latest/network.html#eduroam">[3]</a>).
</p>
<h3><span class="mw-headline" id="Connections_to_pure_WPA3-SAE_access_points">Connections to pure WPA3-SAE access points</span></h3>
<p>Make sure to define the following within the network block of the configuration to enable connections to pure WPA3 access points:
</p>
<pre>ssid="network SSID"
key_mgmt=SAE
sae_password="the.literal.wifi.password"
ieee80211w=2
</pre>
<p>Additionally, Intel WiFi 6 cards may need <code>sae_pwe=1</code> in the main (non network) section of the config file.
</p>
<h3>
<span id="Connections_to_mixed_WPA2-PSK.2FWPA3-SAE_access_points"></span><span class="mw-headline" id="Connections_to_mixed_WPA2-PSK/WPA3-SAE_access_points">Connections to mixed WPA2-PSK/WPA3-SAE access points</span>
</h3>
<p>Mixed WPA2-PSK/WPA3-SAE access points will require an alternative setting for key_mgmt as shown below:
</p>
<pre>ssid="network SSID"
key_mgmt=WPA-PSK-SHA256
psk=xxx
ieee80211w=2
</pre>
<h3><span class="mw-headline" id="Hardware_802.11w_support">Hardware 802.11w support</span></h3>
<p>You can check for hardware support of MFP/PMF (<i>M</i>anagement <i>F</i>rame <i>P</i>rotection / <i>P</i>rotected <i>M</i>anagement <i>F</i>rames) on the interface client by running:
</p>
<pre>$ iw phy phy0 info | grep 00-0f-ac:6
</pre>
<p>Most WiFi devices support this standard introduced in 2009, except some limited (aka non x86_64 related) or old hardware.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://w1.fi/wpa_supplicant/">wpa_supplicant home</a></li>
<li>
<a rel="nofollow" class="external text" href="https://w1.fi/cgit/hostap/plain/wpa_supplicant/README">wpa_supplicant README</a> - contains full documentation of project, including <i>wpa_cli</i> commands not listed in manpage.</li>
<li><a rel="nofollow" class="external text" href="https://gist.github.com/buhman/7162560">wpa_cli usage examples</a></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 wpa_supplicant"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/wpa_supplicant.8">wpa_supplicant(8)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 5 wpa_supplicant.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/wpa_supplicant.conf.5">wpa_supplicant.conf(5)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 wpa_cli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/wpa_cli.8">wpa_cli(8)</a></span></li>
<li><a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/documentation/wpa_supplicant">Kernel.org wpa_supplicant documentation</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Wireless_networking.html" title="Category:Wireless networking">Wireless networking</a></li>
<li><a href="../en/Category:Network_configuration.html" title="Category:Network configuration">Network configuration</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Wpa_supplicant&amp;oldid=812739">https://wiki.archlinux.org/index.php?title=Wpa_supplicant&amp;oldid=812739</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 July 2024, at 17:38.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
