<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Ext3 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Ext3 rootpage-Ext3 skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Using_tune2fs_and_e2fsck" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_tune2fs_and_e2fsck">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Using tune2fs and e2fsck</div>
		</a>
		
		<ul id="toc-Using_tune2fs_and_e2fsck-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Using_directory_indexing" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_directory_indexing">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Using directory indexing</div>
		</a>
		
		<ul id="toc-Using_directory_indexing-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Enable_full_journaling" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Enable_full_journaling">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Enable full journaling</div>
		</a>
		
		<ul id="toc-Enable_full_journaling-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Disable_lengthy_boot_time_checks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Disable_lengthy_boot_time_checks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Disable lengthy boot time checks</div>
		</a>
		
		<ul id="toc-Disable_lengthy_boot_time_checks-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Reclaim_reserved_filesystem_space" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Reclaim_reserved_filesystem_space">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Reclaim reserved filesystem space</div>
		</a>
		
		<ul id="toc-Reclaim_reserved_filesystem_space-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Assigning_a_label" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Assigning_a_label">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Assigning a label</div>
		</a>
		
		<ul id="toc-Assigning_a_label-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Ext3</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Ext3" title="Ext3 – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Ext3.html" title="Ext3 – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Ext3" title="Ext3 – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/File_systems.html" title="File systems">File systems</a></li>
<li><a href="../en/Ext4.html" title="Ext4">Ext4</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> ext3 has been succeeded by <a href="../en/Ext4.html" title="Ext4">ext4</a> and should only be used for legacy systems depending on it. If in doubt, always use ext4.</div>
<p>The ext3 filesystem used to be a great choice back when it was added in 2001 due to its introduction of journaling. However, <a href="../en/Ext4.html" title="Ext4">ext4</a> should be used instead unless it is required by e.g legacy software. See <a href="https://en.wikipedia.org/wiki/Ext3#ext4" class="extiw" title="wikipedia:Ext3">Wikipedia:Ext3#ext4</a> for improvements of ext4 over ext3.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Using_tune2fs_and_e2fsck">Using tune2fs and e2fsck</span></h2>
<p>Before we begin, we need to make sure you are comfortable with using the tune2fs utility to alter the filesystem options of an ext2 or ext3 partition (or <a href="../en/Ext4.html#Migrating_from_ext2/ext3_to_ext4" class="mw-redirect" title="Convert ext2 to ext3">convert ext2 to ext3</a>). Please read <span class="plainlinks archwiki-template-man" title="$ man 8 tune2fs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/tune2fs.8">tune2fs(8)</a></span>.
</p>
<p>It is generally a good idea to run a filesystem check using the <b>e2fsck</b> utility after you have completed the alterations you wish to make on your filesystem. This will verify that your filesystem is clean and fix it if needed. You should also read the manual page for the <b>e2fsck</b> utility if you have not yet done so.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> <b>Only run unmounted!</b> Make sure any filesystems are cleanly unmounted before altering them with the <b>tune2fs</b> or <b>e2fsck</b> utilities! Altering or tuning a filesystem while it is mounted can cause severe corruption! Consider booting from a LiveCD such as <a rel="nofollow" class="external text" href="https://partedmagic.com">Parted Magic</a> or the Arch Linux one.
</div>
<h2><span class="mw-headline" id="Using_directory_indexing">Using directory indexing</span></h2>
<p>This feature improves file access in large directories or directories containing many files by using hashed binary trees to store the directory information. It is perfectly safe to use, and it provides a fairly substantial improvement in most cases; so it is a good idea to enable it:
</p>
<pre># tune2fs -O dir_index /dev/sd<i>XY</i>
</pre>
<p>This will only take effect with directories created on that filesystem after <b>tune2fs</b> is run. In order to apply this to currently existing directories, we must run the <b>e2fsck</b> utility to optimize and reindex the directories on the filesystem:
</p>
<pre># e2fsck -D -f /dev/sd<i>XY</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>This should work with ext2, ext3 and ext4 filesystems. Depending on the size of your filesystem, this could take a long time.</li>
<li>Directory indexing is activated by default in Arch Linux via <code>/etc/mke2fs.conf</code>.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Enable_full_journaling">Enable full journaling</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> <a href="../en/Ext4.html" title="Ext4">ext4</a> partitions will not mount if both delayed allocation and full journaling (e.g. <code>journal=data</code>) are enabled.</div>
<p>By default, ext3 partitions mount with the 'ordered' data mode. In this mode, all data is written to the main filesystem and its metadata is committed to the journal, whose blocks are logically grouped into transactions to decrease disk I/O. This tends to be a good default for most people. However, I have found a method that increases both reliability and performance (in some situations): journaling everything, including the file data itself (known as 'journal' data mode). Normally, one would think that journaling all data would decrease performance, because the data is written to disk twice: once to the journal then later committed to the main filesystem, but this does not seem to be the case. I have enabled it on all nine of my partitions and have only seen a minor performance loss in deleting large files. In fact, doing this can actually improve performance on a filesystem where much reading and writing is to be done simultaneously. See <a rel="nofollow" class="external text" href="https://www.ibm.com/developerworks/linux/library/l-fs8/index.html#4">this article</a> written by Daniel Robbins on IBM's website for more information.
</p>
<p>There are two different ways to activate journal data mode. The first is by adding data=journal as a mount option in /etc/fstab. If you do it this way and want your root filesystem to also use it, you should also pass rootflags=data=journal as a kernel parameter in your bootloader's configuration. In the second method, you will use tune2fs to modify the default mount options in the filesystem's superblock:
</p>
<pre># tune2fs -O has_journal -o journal_data /dev/sd<i>XY</i>
</pre>
<p>Please note that the second method may not work for older kernels. Especially Linux 2.4.20 and below will likely disregard the default mount options on the superblock. If you are feeling adventurous you may also want to tweak the journal size. (I have left the journal size at the default.) A larger journal may give you better performance (at the cost of more disk space and longer recovery times). Please be sure to read the relevant section of the tune2fs manual before doing so:
</p>
<pre># tune2fs -J size=$SIZE /dev/sd<i>XY</i>
</pre>
<h2><span class="mw-headline" id="Disable_lengthy_boot_time_checks">Disable lengthy boot time checks</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Only do this on a journaling filesystem such as ext3/4. This may or may not work on other journaling filesystems such as ReiserFS or XFS, but has not been tested. Doing so may damage or otherwise corrupt other filesystems. You do this <b>at your own risk</b>.</div>
<p>It seems that our ext3 filesystems are still being checked every 30 mounts or so. This is a good default for many because it helps prevent filesystem corruption when you have hardware issues, such as bad IDE/SATA/SCSI cabling, power supply failures, etc. One of the driving forces for creating journaling filesystems was that the filesystem could easily be returned to a consistent state by recovering and replaying the needed journaled transactions. Therefore, we can safely disable these mount-count and time-dependent checks if we are certain the filesystem will be quickly checked to recover the journal if needed to restore filesystem and data consistency. Before you do this please make sure your filesystem entry in <code>/etc/fstab</code> has a positive integer in its 6th field (pass) so that it is checked at boot time automatically. You may do so using the following command:
</p>
<pre># tune2fs -c 0 -i 0 /dev/sd<i>XY</i>
</pre>
<p>If you just want to limit the checks to happen less often without totally disabling them (for peace of mind).  A great method is to change from a number of count's check to a time frame check. See <span class="plainlinks archwiki-template-man" title="$ man 8 tune2fs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/tune2fs.8">tune2fs(8)</a></span>. Here is once every month:
</p>
<pre># tune2fs -c 0 -i 1m /dev/sd<i>XY</i>
</pre>
<h2><span class="mw-headline" id="Reclaim_reserved_filesystem_space">Reclaim reserved filesystem space</span></h2>
<p>Ext3 partition contain a used space of 5% for special reasons by default.  The main reason is to help with less fragmentation on the filesystem.  The other reason for such space is so root can log in even when the filesystem becomes 100% used.  Without this option, the root user might not be able to log in to "clean up" because the system could become unstable, trying to write logs to a 100% full system for example.  
</p>
<p>The issue with this is that hard drives are getting so big the 5% can add up to be quite a large amount of wasted space. (eg. 100 GB = 5 GB reserved).  Now if you separate your filesystems to like /home for example it might be a good idea to adjust these and reclaim that wasted space on long-term archive partitions (see <a rel="nofollow" class="external text" href="https://www.redhat.com/archives/ext3-users/2009-January/msg00026.html">this email</a> for more info).  It is a safe bet to leave your / filesystem at 5% reserved just in case.  Leave reserved space for filesystems containing /var and /tmp also or else you will end up with problems.
</p>
<p>Now to change your reserved space to 1% of the drive, which is fair for non-root filesystems.
</p>
<pre># tune2fs -m 1 /dev/sdXY
</pre>
<h2><span class="mw-headline" id="Assigning_a_label">Assigning a label</span></h2>
<p>Once you have created and formated a partition, you can assign it a label using the e2label command. This allows you to add the partition to <code>/etc/fstab</code> using a label instead of using a device path (useful for an USB drive). To add a label to a partition, type the following command as root: 
</p>
<pre># e2label /dev/sdXY <i>new-label</i>
</pre>
<p>If the optional argument <i>new-label</i> is not present, e2label will simply display the current filesystem label. If the optional argument <i>new-label</i> is present, then e2label will set the filesystem label to be <i>new-label</i>q. Ext2 and ext3 filesystem labels can be at most 16 characters long; if new-label  is longer than 16 characters, e2label will truncate it and print a warning message.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:File_systems.html" title="Category:File systems">File systems</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ext3&amp;oldid=795959">https://wiki.archlinux.org/index.php?title=Ext3&amp;oldid=795959</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 3 January 2024, at 19:12.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
