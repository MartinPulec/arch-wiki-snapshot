<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Network configuration/Ethernet - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Network_configuration_Ethernet rootpage-Network_configuration skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Device_driver" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Device_driver">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Device driver</div>
		</a>
		
			<button aria-controls="toc-Device_driver-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Device driver subsection</span>
			</button>
		
		<ul id="toc-Device_driver-sublist" class="vector-toc-list">
			<li id="toc-Check_the_status" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Check_the_status">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Check the status</div>
			</a>
			
			<ul id="toc-Check_the_status-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Load_the_module" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Load_the_module">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Load the module</div>
			</a>
			
			<ul id="toc-Load_the_module-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-ifplugd_for_laptops" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ifplugd_for_laptops">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>ifplugd for laptops</div>
			</a>
			
			<ul id="toc-ifplugd_for_laptops-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reduce_link_speed" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reduce_link_speed">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Reduce link speed</div>
			</a>
			
			<ul id="toc-Reduce_link_speed-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Swapping_computers_on_the_cable_modem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Swapping_computers_on_the_cable_modem">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Swapping computers on the cable modem</div>
			</a>
			
			<ul id="toc-Swapping_computers_on_the_cable_modem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Explicit_Congestion_Notification" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Explicit_Congestion_Notification">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Explicit Congestion Notification</div>
			</a>
			
			<ul id="toc-Explicit_Congestion_Notification-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Broadcom_BCM57780" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Broadcom_BCM57780">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Broadcom BCM57780</div>
			</a>
			
			<ul id="toc-Broadcom_BCM57780-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realtek_no_link_/_WOL_problem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realtek_no_link_/_WOL_problem">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Realtek no link / WOL problem</div>
			</a>
			
			<ul id="toc-Realtek_no_link_/_WOL_problem-sublist" class="vector-toc-list">
				<li id="toc-Enable_the_NIC_directly_in_Linux" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Enable_the_NIC_directly_in_Linux">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.1</span>Enable the NIC directly in Linux</div>
			</a>
			
			<ul id="toc-Enable_the_NIC_directly_in_Linux-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Rollback/change_Windows_driver" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Rollback/change_Windows_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.2</span>Rollback/change Windows driver</div>
			</a>
			
			<ul id="toc-Rollback/change_Windows_driver-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_WOL_in_Windows_driver" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Enable_WOL_in_Windows_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.3</span>Enable WOL in Windows driver</div>
			</a>
			
			<ul id="toc-Enable_WOL_in_Windows_driver-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_LAN_Boot_ROM_in_BIOS/CMOS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Enable_LAN_Boot_ROM_in_BIOS/CMOS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.4</span>Enable LAN Boot ROM in BIOS/CMOS</div>
			</a>
			
			<ul id="toc-Enable_LAN_Boot_ROM_in_BIOS/CMOS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_USB_AutoSuspend" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Disable_USB_AutoSuspend">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.5</span>Disable USB AutoSuspend</div>
			</a>
			
			<ul id="toc-Disable_USB_AutoSuspend-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Realtek_RTL8111/8168B" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realtek_RTL8111/8168B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Realtek RTL8111/8168B</div>
			</a>
			
			<ul id="toc-Realtek_RTL8111/8168B-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gigabyte_Motherboard_with_Realtek_8111/8168/8411" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Gigabyte_Motherboard_with_Realtek_8111/8168/8411">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Gigabyte Motherboard with Realtek 8111/8168/8411</div>
			</a>
			
			<ul id="toc-Gigabyte_Motherboard_with_Realtek_8111/8168/8411-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-MicroStar_Motherboard_with_Realtek_8111/8168/8411" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#MicroStar_Motherboard_with_Realtek_8111/8168/8411">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>MicroStar Motherboard with Realtek 8111/8168/8411</div>
			</a>
			
			<ul id="toc-MicroStar_Motherboard_with_Realtek_8111/8168/8411-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realtek_RTL8153_Tx_timeout" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realtek_RTL8153_Tx_timeout">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>Realtek RTL8153 Tx timeout</div>
			</a>
			
			<ul id="toc-Realtek_RTL8153_Tx_timeout-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Network configuration/Ethernet</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%A8%AD%E5%AE%9A/%E3%82%A4%E3%83%BC%E3%82%B5%E3%83%8D%E3%83%83%E3%83%88" title="ネットワーク設定/イーサネット – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../../pt/Network_configuration/Ethernet.html" title="Network configuration (Português)/Ethernet – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../../ru/Network_configuration/Ethernet.html" title="Network configuration (Русский)/Ethernet – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Network_configuration/Ethernet" title="Network configuration/Ethernet – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../en/Network_configuration.html" title="Network configuration">Network configuration</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p>This article describes <a href="https://en.wikipedia.org/wiki/Ethernet" class="extiw" title="wikipedia:Ethernet">Ethernet</a> specifics, general network configuration is covered in <a href="../../en/Network_configuration.html" title="Network configuration">Network configuration</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Device_driver">Device driver</span></h2>
<h3><span class="mw-headline" id="Check_the_status">Check the status</span></h3>
<p><a href="../../en/Udev.html" title="Udev">udev</a> should detect your <a href="https://en.wikipedia.org/wiki/Network_interface_controller" class="extiw" title="wikipedia:Network interface controller">network interface controller</a> (NIC) and automatically load the necessary <a href="../../en/Kernel_module.html" title="Kernel module">kernel module</a> at startup. Check the "Ethernet controller" entry (or similar) from the <code>lspci -v</code> output. It should tell you which kernel module contains the driver for your network device. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci -v</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">02:00.0 Ethernet controller: Attansic Technology Corp. L1 Gigabit Ethernet Adapter (rev b0)
 	...
 	Kernel driver in use: atl1
 	Kernel modules: atl1
</pre>
<p>Next, check that the driver was loaded by running <code>dmesg | grep <i>module_name</i></code> as root. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg | grep atl1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
atl1 0000:02:00.0: eth0 link is up 1000 Mbps full duplex
</pre>
<p>Skip the next section if the driver was loaded successfully. Otherwise, you will need to know which module is needed for your particular model.
</p>
<h3><span class="mw-headline" id="Load_the_module">Load the module</span></h3>
<p>Search the internet for the right module/driver for your chipset. Some common modules are <code>8139too</code> for cards with a Realtek chipset, or <code>sis900</code> for cards with a SiS chipset. Once you know which module to use, try to <a href="../../en/Kernel_module.html#Manual_module_handling" class="mw-redirect" title="Kernel modules">load it manually</a>. If you get an error saying that the module was not found, verify first if you recently upgraded the kernel (see <a href="../../en/General_troubleshooting.html#Cannot_use_some_peripherals_after_kernel_upgrade" title="General troubleshooting">General troubleshooting#Cannot use some peripherals after kernel upgrade</a>). Alternatively, it is possible that the driver is not included in the Arch kernel. You may search the <a href="../../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> for the module name.
</p>
<p>If udev is not detecting and loading the proper module automatically during bootup, you can explicitly <a href="../../en/Kernel_module.html#Automatic_module_loading" class="mw-redirect" title="Load the module at boot">load the module at boot</a>.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="ifplugd_for_laptops">ifplugd for laptops</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <a href="../../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> provides the same feature out of the box.</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ifplugd">ifplugd</a></span> is a daemon which will automatically configure your Ethernet device when a cable is plugged in and automatically unconfigure it if the cable is pulled. This is useful on laptops with onboard network adapters, since it will only configure the interface when a cable is really connected. Another use is when you just need to restart the network but do not want to restart the computer or do it from the shell.
</p>
<p>By default it is configured to work for the <code>eth0</code> device. This and other settings like delays can be configured in <code>/etc/ifplugd/ifplugd.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="../../en/Netctl.html" title="Netctl">netctl</a> includes <code>netctl-ifplugd@.service</code>, otherwise you can use <code>ifplugd@.service</code> from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ifplugd">ifplugd</a></span> package. For example, <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>ifplugd@eth0.service</code>.</div>
<h3><span class="mw-headline" id="Reduce_link_speed">Reduce link speed</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> It is not clear on what hardware and workload the ~1W power difference was measured. There are other <a href="../../en/Power_management.html" class="mw-redirect" title="Power saving">power saving</a> methods that affect Ethernet NICs. (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:Network_configuration/Ethernet.html">Talk:Network configuration/Ethernet</a>)</div>
</div>
<p>Forcing 100Mbps or 10Mbps full-duplex speed on a gigabit ethernet NIC can save a lot of power (~1W) on most network workloads. This also reduces components temperature.
</p>
<p>Using <code>ethtool -s eth0 autoneg off speed 100</code> on every boot is inconvenient.
</p>
<p>Boot time initialization of lower ethernet NIC speed is possible through <a href="../../en/Network_configuration.html#Network_interfaces" title="Network configuration">systemd.link files</a>. The actual setup is performed by the <code>net_setup_link</code> udev builtin. Add the <code>AutoNegotiation</code> option to the network link file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/50-wired.link</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
MACAddress=<i>aa:bb:cc:dd:ee:ff</i>

[Link]
NamePolicy=kernel database onboard slot path
AutoNegotiation=no
Duplex=full
BitsPerSecond=100M</pre>
<p>Also see <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.link"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.link.5">systemd.link(5)</a></span> for more information.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<code>AutoNegotiation</code> must be set, to <code>no</code>, otherwise there will be a Speed/Duplex setting not supported error and the link will not initialize.</li>
<li>Only the first matching file is applied. The content of the default link file <code>/usr/lib/systemd/network/99-default.link</code> shipped with systemd has to be included, otherwise the interface might be misconfigured.</li>
<li>To be considered, the file name should alphabetically come before the default <code>99-default.link</code>. For example <code>50-wired.link</code> works.</li>
<li>This configuration applies only to the link-level, and is independent of network-level daemons such as <a href="../../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> or <a href="../../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a>.</li>
<li>In the <code>Match</code> section, <code>OriginalName=</code> can also be used to identify the interface.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Swapping_computers_on_the_cable_modem">Swapping computers on the cable modem</span></h3>
<p>Some cable ISPs (Vidéotron for example) have the cable modem configured to recognize only one client PC, by the MAC address of its network interface. Once the cable modem has learned the MAC address of the first PC or equipment that talks to it, it will not respond to another MAC address in any way. Thus if you swap one PC for another (or for a router), the new PC (or router) will not work with the cable modem, because the new PC (or router) has a MAC address different from the old one. To reset the cable modem so that it will recognise the new PC, you must power the cable modem off and on again. Once the cable modem has rebooted and gone fully online again (indicator lights settled down), reboot the newly connected PC so that it makes a DHCP request, or manually make it request a new DHCP lease.
</p>
<p>If this method does not work, you will need to clone the MAC address of the original machine. See also <a href="../../en/MAC_address_spoofing.html" title="MAC address spoofing">MAC address spoofing</a>.
</p>
<h3><span class="mw-headline" id="Explicit_Congestion_Notification">Explicit Congestion Notification</span></h3>
<p><a href="https://en.wikipedia.org/wiki/Explicit_Congestion_Notification" class="extiw" title="wikipedia:Explicit Congestion Notification">Explicit Congestion Notification</a> (ECN) may cause traffic problems with old/bad routers <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=239892">[1]</a>. As of <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/pull/20535">systemd 240</a>, it is enabled for incoming connections that request it (kernel default).
</p>
<p>To enable ECN for both incoming and outgoing connections:
</p>
<pre># sysctl net.ipv4.tcp_ecn=1
</pre>
<p>To enable ECN only when requested by incoming connections (the reasonably safe, kernel default):
</p>
<pre># sysctl net.ipv4.tcp_ecn=2
</pre>
<p>To disable ECN completely (to e.g. test whether ECN was causing problems):
</p>
<pre># sysctl net.ipv4.tcp_ecn=0
</pre>
<p>See also the <a rel="nofollow" class="external text" href="https://docs.kernel.org/networking/ip-sysctl.html">kernel documentation</a>.
</p>
<h3><span class="mw-headline" id="Broadcom_BCM57780">Broadcom BCM57780</span></h3>
<p>This Broadcom chipset sometimes does not behave well unless you specify the order of the modules to be loaded. The modules are <code>broadcom</code> and <code>tg3</code>, the former needing to be loaded first.
</p>
<p>These steps should help if your computer has this chipset:
</p>
<ul><li>Find your NIC in <i>lspci</i> output:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci | grep Ethernet</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">02:00.0 Ethernet controller: Broadcom Corporation NetLink BCM57780 Gigabit Ethernet PCIe (rev 01)
</pre>
<ul><li>If your wired networking is not functioning in some way or another, unplug your cable then do the following:</li></ul>
<pre># modprobe -r tg3
# modprobe broadcom
# modprobe tg3
</pre>
<ul><li>Plug your network cable back in and check whether the module succeeded with:</li></ul>
<pre># dmesg | grep tg3
</pre>
<ul><li>If this procedure solved the issue you can make it permanent by adding <code>broadcom</code> and <code>tg3</code> (in this order) to the <code>MODULES</code> array:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES=(.. broadcom tg3 ..)</pre>
<ul>
<li><a href="../../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">Regenerate the initramfs</a></li>
<li>Alternatively, you can create an <code>/etc/modprobe.d/broadcom.conf</code>:</li>
</ul>
<pre>softdep tg3 pre: broadcom
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> These methods may work for other chipsets, such as BCM57760.</div>
<h3>
<span id="Realtek_no_link_.2F_WOL_problem"></span><span class="mw-headline" id="Realtek_no_link_/_WOL_problem">Realtek no link / WOL problem</span>
</h3>
<p>Users with Realtek 8168 8169 8101 8111(C) 8156B based NICs (cards / and on-board) may notice a problem where the NIC seems to be disabled on boot and has no Link light. This can usually be found on a dual boot system where Windows is also installed. It seems that using the official Realtek drivers (dated anything after May 2007) under Windows is the cause. These newer drivers disable the Wake-On-LAN feature by disabling the NIC at Windows shutdown time, where it will remain disabled until the next time Windows boots. You will be able to notice if this problem is affecting you if the Link light remains off until Windows boots up; during Windows shutdown the Link light will switch off. Normal operation should be that the link light is always on as long as the system is on, even during POST. This problem will also affect other operating systems without newer drivers (eg. Live CDs). Here are a few fixes for this problem.
</p>
<h4><span class="mw-headline" id="Enable_the_NIC_directly_in_Linux">Enable the NIC directly in Linux</span></h4>
<p>Follow <a href="../../en/Network_configuration.html#Enabling_and_disabling_network_interfaces" title="Network configuration">Network configuration#Enabling and disabling network interfaces</a> to enable the interface.
</p>
<h4>
<span id="Rollback.2Fchange_Windows_driver"></span><span class="mw-headline" id="Rollback/change_Windows_driver">Rollback/change Windows driver</span>
</h4>
<p>You can roll back your Windows NIC driver to the Microsoft provided one (if available), or roll back/install an official Realtek driver pre-dating May 2007 (may be on the CD that came with your hardware).
</p>
<h4><span class="mw-headline" id="Enable_WOL_in_Windows_driver">Enable WOL in Windows driver</span></h4>
<p>Probably the best and the fastest fix is to change this setting in the Windows driver. This way it should be fixed system-wide and not only under Arch (eg. live CDs, other operating systems). In Windows, under Device Manager, find your Realtek network adapter and double-click it. Under the "Advanced" tab, change "Wake-on-LAN after shutdown" to "Enable".
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Newer Realtek Windows drivers (tested with <i>Realtek 8111/8169 LAN Driver v5.708.1030.2008</i>, dated 2009/01/22, available from GIGABYTE) may refer to this option slightly differently, like <i>Shutdown Wake-On-LAN &gt; Enable</i>. It seems that switching it to <code>Disable</code> has no effect (you will notice the Link light still turns off upon Windows shutdown). One rather dirty workaround is to boot to Windows and just reset the system (perform an ungraceful restart/shutdown) thus not giving the Windows driver a chance to disable LAN. The Link light will remain on and the LAN adapter will remain accessible after POST - that is until you boot back to Windows and shut it down properly again.</div>
<h4>
<span id="Enable_LAN_Boot_ROM_in_BIOS.2FCMOS"></span><span class="mw-headline" id="Enable_LAN_Boot_ROM_in_BIOS/CMOS">Enable LAN Boot ROM in BIOS/CMOS</span>
</h4>
<p>It appears that setting <i>Integrated Peripherals &gt; Onboard LAN Boot ROM &gt; Enabled</i> in BIOS/CMOS reactivates the Realtek LAN chip on system boot-up, despite the Windows driver disabling it on OS shutdown.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This was tested several times on a GIGABYTE GA-G31M-ES2L motherboard, BIOS version F8 released on 2009/02/05.</div>
<h4><span class="mw-headline" id="Disable_USB_AutoSuspend">Disable USB AutoSuspend</span></h4>
<p>When using power saving features, specifically USB autosuspend, the device can fail to load correctly, resulting in a <i>NO-CARRIER</i> state (tested with RT8156B), and no established link.
</p>
<p>To resolve, see <a href="../../en/Power_management.html#USB_autosuspend" title="Power management">Power management#USB autosuspend</a> for details on blacklisting a device for USB autosuspend manually, or <a rel="nofollow" class="external text" href="https://linrunner.de/tlp/settings/usb.html">TLP documentation on USB devices</a> if using <a href="../../en/TLP.html" title="TLP">TLP</a>; then reconnect the device.
</p>
<h3>
<span id="Realtek_RTL8111.2F8168B"></span><span class="mw-headline" id="Realtek_RTL8111/8168B">Realtek RTL8111/8168B</span>
</h3>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lspci | grep Ethernet</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168B PCI Express Gigabit Ethernet controller (rev 02)
</pre>
<p>The adapter should be recognized by the <code>r8169</code> module. However, with some chip revisions the connection may go off and on all the time. The alternative <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/r8168/">r8168</a></span><sup><small>AUR</small></sup> should be used for a reliable connection in this case. <a href="../../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Blacklist">Blacklist</a> <code>r8169</code>, if <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/r8168/">r8168</a></span><sup><small>AUR</small></sup> is not automatically loaded by <a href="../../en/Udev.html" title="Udev">udev</a>, you can explicitly <a href="../../en/Kernel_module.html#Automatic_module_loading" class="mw-redirect" title="Load the module at boot">load the module at boot</a>.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> "some revisions", no proof the driver is the cause, and not e.g poorly configured DNS servers (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:Network_configuration/Ethernet.html">Talk:Network configuration/Ethernet</a>)</div>
</div>
<p>Another fault in the drivers for some revisions of this adapter is poor IPv6 support. <a href="../../en/IPv6.html#Disable_functionality" title="IPv6">IPv6#Disable functionality</a> can be helpful if you encounter issues such as hanging webpages and slow speeds.
</p>
<h3>
<span id="Gigabyte_Motherboard_with_Realtek_8111.2F8168.2F8411"></span><span class="mw-headline" id="Gigabyte_Motherboard_with_Realtek_8111/8168/8411">Gigabyte Motherboard with Realtek 8111/8168/8411</span>
</h3>
<p>With motherboards such as the <i>Gigabyte GA-990FXA-UD3</i>, booting with <a href="../../en/PCI_passthrough_via_OVMF.html#Setting_up_IOMMU" class="mw-redirect" title="IOMMU">IOMMU</a> off (which can be the default) will cause the network interface to be unreliable, often failing to connect or connecting but allowing no throughput. This will apply to the onboard NIC and to any other pci-NIC in the box because the IOMMU setting affects the entire network interface on the board. Enabling IOMMU and booting with the install media will throw AMD I-10/xhci page faults for a second, but then boots normally, resulting in a fully functional onboard NIC (even with the r8169 module).
</p>
<p>When configuring the boot process for your installation, add <code>iommu=soft</code> as a <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> to eliminate the error messages on boot and restore USB3.0 functionality.
</p>
<h3>
<span id="MicroStar_Motherboard_with_Realtek_8111.2F8168.2F8411"></span><span class="mw-headline" id="MicroStar_Motherboard_with_Realtek_8111/8168/8411">MicroStar Motherboard with Realtek 8111/8168/8411</span>
</h3>
<p>With motherboards such as the "MicroStar B450M MORTAR TITANIUM", unpluging/pluging Ethernet cables or restarting router's DHCP server would cause <code>r8169</code> to enter a downshifted status, and downgrade the 1000 Mbit/s Ethernet speed to 100 Mbit/s. The kernel log will show:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg | grep r8169</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Generic FE-GE Realtek PHY r8169-2200:00: Downshift occurred from negotiated speed 1Gbps to actual speed 100Mbps, check cabling!
r8169 0000:22:00.0 enp34s0: Link is Up - 100Mbps/Full (downshifted) - flow control rx/tx
</pre>
<p>In this case, restart the adapter (set it down and up). For example:
</p>
<pre># ip link set dev enp34s0 down
# ip link set dev enp34s0 up
</pre>
<h3><span class="mw-headline" id="Realtek_RTL8153_Tx_timeout">Realtek RTL8153 Tx timeout</span></h3>
<p>USB Network Adapters with the following controller will often hang and stop transmit until its link is reset. This is accompanied with <code>Tx status -2</code> or <code>Tx status -71</code> errors in the kernel log. This can be fixed by setting <code>USB_QUIRK_NO_LPM</code>.
</p>
<p>
The quirk can be set at boot by adding the <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> <code>usbcore.quirks=2357:0601:k</code>. It can also be set immediately via the sysfs by </p>
<pre># echo 2357:0601:k &gt; /sys/module/usbcore/parameters/quirks
</pre>
<p>Note that <code>2357:0601</code> should be replaced with your own device's USB ID which can be found using <i>lsusb</i>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../en/Category:Network_configuration.html" title="Category:Network configuration">Network configuration</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Network_configuration/Ethernet&amp;oldid=808588">https://wiki.archlinux.org/index.php?title=Network_configuration/Ethernet&amp;oldid=808588</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 18 May 2024, at 06:31.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
