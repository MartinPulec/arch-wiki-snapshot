<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Bluetooth - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Bluetooth rootpage-Bluetooth skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Front-ends" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Front-ends">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Front-ends</div>
			</a>
			
			<ul id="toc-Front-ends-sublist" class="vector-toc-list">
				<li id="toc-Console" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Console">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>Console</div>
			</a>
			
			<ul id="toc-Console-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Graphical" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Graphical">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>Graphical</div>
			</a>
			
			<ul id="toc-Graphical-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Pairing" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Pairing">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Pairing</div>
		</a>
		
			<button aria-controls="toc-Pairing-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Pairing subsection</span>
			</button>
		
		<ul id="toc-Pairing-sublist" class="vector-toc-list">
			<li id="toc-Dual_boot_pairing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dual_boot_pairing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Dual boot pairing</div>
			</a>
			
			<ul id="toc-Dual_boot_pairing-sublist" class="vector-toc-list">
				<li id="toc-Setup" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>Setup</div>
			</a>
			
			<ul id="toc-Setup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-For_Windows" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#For_Windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>For Windows</div>
			</a>
			
			<ul id="toc-For_Windows-sublist" class="vector-toc-list">
				<li id="toc-Extracting_on_Windows" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Extracting_on_Windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2.1</span>Extracting on Windows</div>
			</a>
			
			<ul id="toc-Extracting_on_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Extracting_on_Linux" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Extracting_on_Linux">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2.2</span>Extracting on Linux</div>
			</a>
			
			<ul id="toc-Extracting_on_Linux-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-For_macOS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#For_macOS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.3</span>For macOS</div>
			</a>
			
			<ul id="toc-For_macOS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Preparing_Bluetooth_5.1_Keys" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Preparing_Bluetooth_5.1_Keys">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.4</span>Preparing Bluetooth 5.1 Keys</div>
			</a>
			
			<ul id="toc-Preparing_Bluetooth_5.1_Keys-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Saving_the_configuration" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Saving_the_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.5</span>Saving the configuration</div>
			</a>
			
			<ul id="toc-Saving_the_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Default_adapter_power_state" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Default_adapter_power_state">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Default adapter power state</div>
			</a>
			
			<ul id="toc-Default_adapter_power_state-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Discoverable_on_startup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Discoverable_on_startup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Discoverable on startup</div>
			</a>
			
			<ul id="toc-Discoverable_on_startup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Wake_from_suspend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Wake_from_suspend">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Wake from suspend</div>
			</a>
			
			<ul id="toc-Wake_from_suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enabling_experimental_features" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enabling_experimental_features">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Enabling experimental features</div>
			</a>
			
			<ul id="toc-Enabling_experimental_features-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Audio" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Audio">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Audio</div>
		</a>
		
			<button aria-controls="toc-Audio-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Audio subsection</span>
			</button>
		
		<ul id="toc-Audio-sublist" class="vector-toc-list">
			<li id="toc-PulseAudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>PulseAudio</div>
			</a>
			
			<ul id="toc-PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PipeWire" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PipeWire">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>PipeWire</div>
			</a>
			
			<ul id="toc-PipeWire-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-ALSA" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ALSA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>ALSA</div>
			</a>
			
			<ul id="toc-ALSA-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Bluetooth_serial" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Bluetooth_serial">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Bluetooth serial</div>
		</a>
		
		<ul id="toc-Bluetooth_serial-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-General_Troubleshooting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#General_Troubleshooting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>General Troubleshooting</div>
			</a>
			
			<ul id="toc-General_Troubleshooting-sublist" class="vector-toc-list">
				<li id="toc-Debugging" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Debugging">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1.1</span>Debugging</div>
			</a>
			
			<ul id="toc-Debugging-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Deprecated_BlueZ_tools" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Deprecated_BlueZ_tools">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1.2</span>Deprecated BlueZ tools</div>
			</a>
			
			<ul id="toc-Deprecated_BlueZ_tools-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Service_issues" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Service_issues">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Service issues</div>
			</a>
			
			<ul id="toc-Service_issues-sublist" class="vector-toc-list">
				<li id="toc-systemd:_Condition_check_resulted_in_Bluetooth_service_being_skipped" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#systemd:_Condition_check_resulted_in_Bluetooth_service_being_skipped">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2.1</span>systemd: Condition check resulted in Bluetooth service being skipped</div>
			</a>
			
			<ul id="toc-systemd:_Condition_check_resulted_in_Bluetooth_service_being_skipped-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth_immediately_waking_up_suspend-to-idle_devices" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth_immediately_waking_up_suspend-to-idle_devices">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2.2</span>Bluetooth immediately waking up suspend-to-idle devices</div>
			</a>
			
			<ul id="toc-Bluetooth_immediately_waking_up_suspend-to-idle_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth_turns_off_after_logout_on_a_headless/server_system" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth_turns_off_after_logout_on_a_headless/server_system">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2.3</span>Bluetooth turns off after logout on a headless/server system</div>
			</a>
			
			<ul id="toc-Bluetooth_turns_off_after_logout_on_a_headless/server_system-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Adapter_issues" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Adapter_issues">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Adapter issues</div>
			</a>
			
			<ul id="toc-Adapter_issues-sublist" class="vector-toc-list">
				<li id="toc-hcitool_scan:_Device_not_found" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#hcitool_scan:_Device_not_found">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.1</span>hcitool scan: Device not found</div>
			</a>
			
			<ul id="toc-hcitool_scan:_Device_not_found-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-bluetoothctl:_No_default_controller_available" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#bluetoothctl:_No_default_controller_available">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.2</span>bluetoothctl: No default controller available</div>
			</a>
			
			<ul id="toc-bluetoothctl:_No_default_controller_available-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-rfkill_unblock:_Do_not_unblock" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#rfkill_unblock:_Do_not_unblock">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.3</span>rfkill unblock: Do not unblock</div>
			</a>
			
			<ul id="toc-rfkill_unblock:_Do_not_unblock-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth_USB_dongle" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth_USB_dongle">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.4</span>Bluetooth USB dongle</div>
			</a>
			
			<ul id="toc-Bluetooth_USB_dongle-sublist" class="vector-toc-list">
				<li id="toc-Audio_devices_start_to_skip_at_short_distance_from_dongle" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Audio_devices_start_to_skip_at_short_distance_from_dongle">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.4.1</span>Audio devices start to skip at short distance from dongle</div>
			</a>
			
			<ul id="toc-Audio_devices_start_to_skip_at_short_distance_from_dongle-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-CSR_dongle_0a12:0001" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#CSR_dongle_0a12:0001">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.4.2</span>CSR dongle 0a12:0001</div>
			</a>
			
			<ul id="toc-CSR_dongle_0a12:0001-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Logitech_Bluetooth_USB_dongle" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Logitech_Bluetooth_USB_dongle">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.5</span>Logitech Bluetooth USB dongle</div>
			</a>
			
			<ul id="toc-Logitech_Bluetooth_USB_dongle-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Foxconn_/_Hon_Hai_/_Lite-On_Broadcom_device" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Foxconn_/_Hon_Hai_/_Lite-On_Broadcom_device">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.6</span>Foxconn / Hon Hai / Lite-On Broadcom device</div>
			</a>
			
			<ul id="toc-Foxconn_/_Hon_Hai_/_Lite-On_Broadcom_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Intel_combined_WiFi_and_Bluetooth_cards" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Intel_combined_WiFi_and_Bluetooth_cards">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.7</span>Intel combined WiFi and Bluetooth cards</div>
			</a>
			
			<ul id="toc-Intel_combined_WiFi_and_Bluetooth_cards-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mediatek_MT7921_or_MT7961_on_dual_boot_with_windows" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Mediatek_MT7921_or_MT7961_on_dual_boot_with_windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.8</span>Mediatek MT7921 or MT7961 on dual boot with windows</div>
			</a>
			
			<ul id="toc-Mediatek_MT7921_or_MT7961_on_dual_boot_with_windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Adapter_disappears_after_suspend/resume" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Adapter_disappears_after_suspend/resume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.9</span>Adapter disappears after suspend/resume</div>
			</a>
			
			<ul id="toc-Adapter_disappears_after_suspend/resume-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Pairing_and_connectivity_issues" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pairing_and_connectivity_issues">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Pairing and connectivity issues</div>
			</a>
			
			<ul id="toc-Pairing_and_connectivity_issues-sublist" class="vector-toc-list">
				<li id="toc-Computer_is_not_visible" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Computer_is_not_visible">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.1</span>Computer is not visible</div>
			</a>
			
			<ul id="toc-Computer_is_not_visible-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Device_connects,_then_disconnects_after_a_few_moments" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Device_connects,_then_disconnects_after_a_few_moments">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.2</span>Device connects, then disconnects after a few moments</div>
			</a>
			
			<ul id="toc-Device_connects,_then_disconnects_after_a_few_moments-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Device_does_not_show_up_in_scan" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Device_does_not_show_up_in_scan">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.3</span>Device does not show up in scan</div>
			</a>
			
			<ul id="toc-Device_does_not_show_up_in_scan-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_BLE_device_can_be_discovered_with_Intel_Corp._AX200_Bluetooth" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_BLE_device_can_be_discovered_with_Intel_Corp._AX200_Bluetooth">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.4</span>No BLE device can be discovered with Intel Corp. AX200 Bluetooth</div>
			</a>
			
			<ul id="toc-No_BLE_device_can_be_discovered_with_Intel_Corp._AX200_Bluetooth-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cannot_reconnect_after_sleep" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Cannot_reconnect_after_sleep">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.5</span>Cannot reconnect after sleep</div>
			</a>
			
			<ul id="toc-Cannot_reconnect_after_sleep-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Device-speific_issues" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Device-speific_issues">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Device-speific issues</div>
			</a>
			
			<ul id="toc-Device-speific_issues-sublist" class="vector-toc-list">
				<li id="toc-Bluetooth_mouse_lags_/_disconnect_/_does_not_respond" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth_mouse_lags_/_disconnect_/_does_not_respond">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5.1</span>Bluetooth mouse lags / disconnect / does not respond</div>
			</a>
			
			<ul id="toc-Bluetooth_mouse_lags_/_disconnect_/_does_not_respond-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Audio_device_fails_to_connect_with_br-connection-profile-unavailable" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Audio_device_fails_to_connect_with_br-connection-profile-unavailable">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5.2</span>Audio device fails to connect with br-connection-profile-unavailable</div>
			</a>
			
			<ul id="toc-Audio_device_fails_to_connect_with_br-connection-profile-unavailable-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Interference_between_headphones_and_mouse" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Interference_between_headphones_and_mouse">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5.3</span>Interference between headphones and mouse</div>
			</a>
			
			<ul id="toc-Interference_between_headphones_and_mouse-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Continually_connect/disconnect_with_TP-LINK_UB400_and_Xbox_controller" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Continually_connect/disconnect_with_TP-LINK_UB400_and_Xbox_controller">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5.4</span>Continually connect/disconnect with TP-LINK UB400 and Xbox controller</div>
			</a>
			
			<ul id="toc-Continually_connect/disconnect_with_TP-LINK_UB400_and_Xbox_controller-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-File_transfer_issues" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#File_transfer_issues">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>File transfer issues</div>
			</a>
			
			<ul id="toc-File_transfer_issues-sublist" class="vector-toc-list">
				<li id="toc-gnome-bluetooth" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#gnome-bluetooth">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6.1</span>gnome-bluetooth</div>
			</a>
			
			<ul id="toc-gnome-bluetooth-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cannot_receive_transferred_files_due_to_symlink" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Cannot_receive_transferred_files_due_to_symlink">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6.2</span>Cannot receive transferred files due to symlink</div>
			</a>
			
			<ul id="toc-Cannot_receive_transferred_files_due_to_symlink-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Bluetooth</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Bluetooth" title="Bluetooth – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Bluetooth.html" title="Bluetooth – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Bluetooth" title="Bluetooth – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Bluetooth.html" title="Bluetooth – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Bluetooth" title="Bluetooth – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Bluetooth_mouse.html" title="Bluetooth mouse">Bluetooth mouse</a></li>
<li><a href="../en/Bluetooth_keyboard.html" title="Bluetooth keyboard">Bluetooth keyboard</a></li>
<li><a href="../en/Bluetooth_headset.html" title="Bluetooth headset">Bluetooth headset</a></li>
<li><a href="../en/Blueman.html" title="Blueman">Blueman</a></li>
<li><a href="../en/ObexFTP.html" title="ObexFTP">ObexFTP</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/Bluetooth" class="extiw" title="wikipedia:Bluetooth">Bluetooth</a> is a standard for the short-range wireless interconnection of cellular phones, computers, and other electronic devices. In Linux, the canonical implementation of the Bluetooth protocol stack is <a rel="nofollow" class="external text" href="https://www.bluez.org/">BlueZ</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<ol>
<li>
<a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span> package, providing the Bluetooth protocol stack.</li>
<li>
<a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> package, providing the <code>bluetoothctl</code> utility. Alternatively install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span> to additionally have the <a href="#Deprecated_BlueZ_tools">deprecated BlueZ tools</a>.</li>
<li>The generic Bluetooth driver is the <code>btusb</code> kernel module. <a href="../en/Kernel_module.html#Obtaining_information" title="Kernel module">Check</a> whether that module is loaded. If it is not, then <a href="../en/Kernel_module.html#Manual_module_handling" title="Kernel module">load the module</a>.</li>
<li>
<a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> <code>bluetooth.service</code>.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>By default the Bluetooth daemon will only give out bnep0 devices to users that are a member of the <code>lp</code> <a href="../en/Users_and_groups.html#System_groups" title="Users and groups">group</a>. Make sure to add your user to that group if you intend to connect to a Bluetooth tether. You can change the group that is required in the file <code>/usr/share/dbus-1/system.d/bluetooth.conf</code>.</li>
<li>Some Bluetooth adapters are bundled with a Wi-Fi card (e.g. older Intel Centrino cards). These require that the Wi-Fi card is firstly enabled (typically a keyboard shortcut on a laptop) in order to make the Bluetooth adapter visible to the kernel.</li>
<li>Some Bluetooth cards (e.g. Broadcom) conflict with the network adapter. Thus, you need to make sure that your Bluetooth device gets connected before the network service boot.</li>
<li>Some tools such as hcitool and hciconfig have been deprecated upstream, and are no longer included in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>. Since these tools will no longer be updated, it is recommended that scripts be updated to avoid using them. If you still desire to use them, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/53110">FS#53110</a> and <a rel="nofollow" class="external text" href="https://lore.kernel.org/linux-bluetooth/20170104133401.3636-1-luiz.dentz@gmail.com/">the Bluez mailing list</a> for more information.</li>
<li>Since <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/bluez/-/commit/3dc43f553660cf4409532b8b0b3c2dc9c6e4f1a9">this</a> commit, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-obex">bluez-obex</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-mesh">bluez-mesh</a></span> have been separated from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span>. Therefore, if you plan to transfer files over Bluetooth, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-obex">bluez-obex</a></span> needs to be installed.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Front-ends">Front-ends</span></h3>
<h4><span class="mw-headline" id="Console">Console</span></h4>
<ul><li>
<b>bluetoothctl</b> — Pairing a device from the shell is one of the simplest and most reliable options.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.bluez.org/">https://www.bluez.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>
</dd></dl>
<ul><li>
<b>bluetuith</b> — Provides a bluetooth manager via a Terminal User Interface for easier pairing and device/adapter management, with OBEX File Transfer and mouse support.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.github.com/darkhz/bluetuith">https://www.github.com/darkhz/bluetuith</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bluetuith/">bluetuith</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>bluetui</b> —  TUI for managing bluetooth devices.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/pythops/bluetui">https://github.com/pythops/bluetui</a>  ||  <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bluetui/">bluetui</a></span><sup><small>AUR</small></sup>
</dd></dl>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To automate bluetoothctl commands, use <code>echo -e "<i>command1</i>\n<i>command2</i>\n" | bluetoothctl</code> or <code>bluetoothctl -- <i>command</i></code>.</div>
<h4><span class="mw-headline" id="Graphical">Graphical</span></h4>
<p>The following packages allow for a graphical interface to customize Bluetooth.
</p>
<ul><li>
<b>GNOME Bluetooth</b> — <a href="../en/GNOME.html" title="GNOME">GNOME</a>'s Bluetooth tool.
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-bluetooth-3.0">gnome-bluetooth-3.0</a></span> provides the back-end (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-bluetooth">gnome-bluetooth</a></span> is now legacy)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-shell">gnome-shell</a></span> provides the status monitor applet</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-control-center">gnome-control-center</a></span> provides the configuration front-end GUI that can be accessed by typing Bluetooth on the Activities overview, or with the <code>gnome-control-center bluetooth</code> command.</li>
<li>You can also launch the <code>bluetooth-sendto</code> command directly to send files to a remote device.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nautilus-bluetooth/">nautilus-bluetooth</a></span><sup><small>AUR</small></sup> adds a "Send via Bluetooth" entry to Nautilus' right-click menu</li>
<li>To receive files, open the Bluetooth settings panel; you can only receive whilst the Bluetooth panel is open.</li>
<li>To add a Bluetooth entry to the <i>Send To</i> menu in Thunar's file properties menu, see instructions <a rel="nofollow" class="external text" href="https://docs.xfce.org/xfce/thunar/send-to">here</a>. (The command that needs to be configured is <code>bluetooth-sendto %F</code>).</li>
</ul>
</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.gnome.org/Projects/GnomeBluetooth">https://wiki.gnome.org/Projects/GnomeBluetooth</a> ||</dd></dl>
<ul><li>
<b>Bluedevil</b> — <a href="../en/KDE.html" title="KDE">KDE</a>'s Bluetooth tool. If there is no Bluetooth icon visible in Dolphin and in the system tray, enable it in the system tray options or add a widget. You can configure Bluedevil and detect Bluetooth devices by clicking the icon. An interface is also available from the KDE System Settings.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://invent.kde.org/plasma/bluedevil">https://invent.kde.org/plasma/bluedevil</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluedevil">bluedevil</a></span>
</dd></dl>
<ul><li>
<b>Blueberry</b> — Linux Mint's spin-off of GNOME Bluetooth, which works in all desktop environments. <i>Blueberry</i> does not support receiving files through Obex Object Push.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/linuxmint/blueberry">https://github.com/linuxmint/blueberry</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=blueberry">blueberry</a></span>
</dd></dl>
<ul><li>
<b><a href="../en/Blueman.html" title="Blueman">Blueman</a></b> — A full featured Bluetooth manager.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/blueman-project/blueman">https://github.com/blueman-project/blueman</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=blueman">blueman</a></span>
</dd></dl>
<ul><li>
<b><a href="../en/ObexFTP.html" title="ObexFTP">ObexFTP</a></b> — A tool for transferring files to/from any OBEX enabled device.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://dev.zuckschwerdt.org/openobex/wiki/ObexFtp">http://dev.zuckschwerdt.org/openobex/wiki/ObexFtp</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/obexftp/">obexftp</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Overskride</b> — A simple yet powerful bluetooth client.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/kaii-lb/overskride#overskride">https://github.com/kaii-lb/overskride#overskride</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/overskride/">overskride</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2><span class="mw-headline" id="Pairing">Pairing</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Before using the Bluetooth device, make sure that it is not blocked by <a href="../en/Network_configuration/Wireless.html#Rfkill_caveat" class="mw-redirect" title="Rfkill">rfkill</a>.</div>
<p>This section describes directly configuring <i>bluez5</i> via the <i>bluetoothctl</i> CLI, which might not be necessary if you are using  an alternative front-end tool (such as GNOME Bluetooth).
</p>
<p>The exact procedure depends on the devices involved and their input functionality.  What follows is a general outline of pairing a device using <code>bluetoothctl</code>.
</p>
<p>Start the <code>bluetoothctl</code> interactive command. Input <code>help</code> to get a list of available commands.
</p>
<ol>
<li>(optional) Select a default controller with <code>select <i>MAC_address</i></code>.</li>
<li>(optional) Enter <code>power on</code> to turn the power to the controller on if the device is set to off. It is on by default; see <a href="#Default_adapter_power_state">#Default adapter power state</a>.</li>
<li>Enter <code>devices</code> to get the MAC address of the device with which to pair.</li>
<li>Enter device discovery mode with <code>scan on</code> command if device is not yet on the list.</li>
<li>Turn the agent on with <code>agent on</code> or choose a specific agent: if you press tab twice after <code>agent</code> you should see a list of available agents. A bluetooth agent is what manages the Bluetooth 'pairing code'. It can either respond to a 'pairing code' coming in, or can send one out. The <code>default-agent</code> should be appropriate in most cases.<a rel="nofollow" class="external autonumber" href="https://askubuntu.com/questions/763939/bluetoothctl-what-is-a-bluetooth-agent">[1]</a>
</li>
<li>Enter <code>pair <i>MAC_address</i></code> to do the pairing (tab completion works).</li>
<li>If using a device without a PIN, one may need to manually trust the device before it can reconnect successfully. Enter <code>trust <i>MAC_address</i></code> to do so.</li>
<li>Enter <code>connect <i>MAC_address</i></code> to establish a connection.</li>
</ol>
<p>An example session may look this way:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ bluetoothctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[NEW] Controller 00:10:20:30:40:50 <i>hostname</i> [default]
[bluetooth]# agent KeyboardOnly
Agent registered

[bluetooth]# default-agent
Default agent request successful

[bluetooth]# power on
Changing power on succeeded
[CHG] Controller 00:10:20:30:40:50 Powered: yes

[bluetooth]# scan on
Discovery started
[CHG] Controller 00:10:20:30:40:50 Discovering: yes
[NEW] Device 00:12:34:56:78:90 <i>device name</i>
[CHG] Device 00:12:34:56:78:90 LegacyPairing: yes

[bluetooth]# pair 00:12:34:56:78:90
Attempting to pair with 00:12:34:56:78:90
[CHG] Device 00:12:34:56:78:90 Connected: yes
[CHG] Device 00:12:34:56:78:90 Connected: no
[CHG] Device 00:12:34:56:78:90 Connected: yes
Request PIN code
[agent] Enter PIN code: 1234
[CHG] Device 00:12:34:56:78:90 Paired: yes
Pairing successful
[CHG] Device 00:12:34:56:78:90 Connected: no

[bluetooth]# connect 00:12:34:56:78:90
Attempting to connect to 00:12:34:56:78:90
[CHG] Device 00:12:34:56:78:90 Connected: yes
Connection successful
</pre>
<h3><span class="mw-headline" id="Dual_boot_pairing">Dual boot pairing</span></h3>
<p>To pair devices on dual boot setups you need to change the pairing keys on your Linux install so that they are consistent with what Windows or macOS is using.
</p>
<p>This page only describes the manual method of doing so. To automate the process, see the <a rel="nofollow" class="external text" href="https://github.com/x2es/bt-dualboot">bt-dualboot project</a> and the related repositories.
</p>
<h4><span class="mw-headline" id="Setup">Setup</span></h4>
<p>To do this, first pair your device on your Arch Linux install. Then reboot into the other OS and pair the device. Now you need to extract the pairing keys, but first switch off the Bluetooth devices to prevent any connection attempts.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some Logitech devices, such as the <a href="../en/Logitech_MX_Master.html" title="Logitech MX Master">Logitech MX Master</a> and Logitech 604 Lightspeed, increment the MAC address by one every time that the device is paired with a new system. You should determine whether this is the case, so that it can be accounted for at the end of the process.</div>
<h4><span class="mw-headline" id="For_Windows">For Windows</span></h4>
<h5><span class="mw-headline" id="Extracting_on_Windows">Extracting on Windows</span></h5>
<p>First, boot into Windows.
</p>
<p>The registry key containing the link keys may only be accessed by the <a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/windows/security/identity-protection/access-control/local-accounts#system">SYSTEM account</a>, which cannot be logged into. Therefore, you will need Microsoft's <a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/sysinternals/downloads/psexec">PsExec</a> tool from the official Windows Sysinternals site in order to run <code>regedit.exe</code> as <code>SYSTEM</code>.
</p>
<p>Download <a rel="nofollow" class="external text" href="https://download.sysinternals.com/files/PSTools.zip">PsTools</a>, and extract <code>PsExec64.exe</code>.
</p>
<p>In an administrator instance of a <a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/windows-commands#command-shell-overview">command shell</a>, from the location of the extracted EXE, launch the registry editor:
</p>
<pre>.\PsExec64.exe -s -i regedit.exe
</pre>
<p>In the registry editor, navigate to the following registry key:
</p>
<pre>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\BTHPORT\Parameters\Keys
</pre>
<p>Within this registry key is one subkey per Bluetooth adapter, named by MAC address. If there are multiple subkeys, and you are unsure of which to use, follow <a rel="nofollow" class="external text" href="https://www.addictivetips.com/windows-tips/find-bluetooth-mac-address-windows-10/">this guide</a> to find the MAC address for the desired Bluetooth adapter.
</p>
<p>In the desired adapter's registry key, there is a name-value pair for each paired device, with the name being its MAC address. Additionally, you might see some subkeys named by MAC addresses, each containing name-value pairs with names like <code>LTK</code> or <code>IRK</code>. These subkeys (if any) are for Bluetooth 5.1 devices. If the device you're trying to share has a subkey, it is a Bluetooth 5.1 device. If it does not have a subkey, only a name-value pair, it is not a Bluetooth 5.1 device.
</p>
<p>Right click on the adapter's registry key and export it as a <i>.reg</i> file. This is a text file that you can copy keys from. As mentioned, it contains pairing keys in name-value pairs for non-Bluetooth 5.1 devices, and pairing keys (and some other information) in per-device subkeys for Bluetooth 5.1 devices. Make this file available to your Linux installation and reboot into it.
</p>
<p>If the device you want to share is <i>not</i> a Bluetooth 5.1 device, jump to <a href="#Saving_the_configuration">#Saving the configuration</a>. If it is a Bluetooth 5.1 device, you need to make some modifications to the pairing keys and the associated information before finishing up. Refer to <a href="#Preparing_Bluetooth_5.1_Keys">#Preparing Bluetooth 5.1 Keys</a> to see how.
</p>
<h5><span class="mw-headline" id="Extracting_on_Linux">Extracting on Linux</span></h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If your Windows partition is encrypted with Bitlocker, you will not be able to access it from Linux using chntpw.</div>
<p>Reboot into Arch. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=chntpw">chntpw</a></span>. Mount your windows system drive.
</p>
<pre>$ cd <i>/path/to/windows/system</i>/Windows/System32/config
$ chntpw -e SYSTEM
</pre>
<p>Inside the <code>chntpw</code> environment, run
</p>
<pre>&gt; cd CurrentControlSet\Services\BTHPORT\Parameters\Keys
</pre>
<p>Instead of <code>CurrentControlSet</code>, you may see <code>ControlSet00<i>X</i></code> (check using <i>ls</i>):
</p>
<pre>&gt; cd ControlSet00<i>X</i>\Services\BTHPORT\Parameters\Keys
</pre>
<p>Then get your Bluetooth adapter's MAC address and enter its folder
</p>
<pre>&gt; ls
&gt; cd <i>your-device's-mac-address</i>
</pre>
<p>Do the same for your paired devices. If this is <i>not</i> a Bluetooth 5.1 device, you will only see the pairing key:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">&gt; ls</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Node has 0 subkeys and 1 values
size  type        value name    [value if type DWORD]
16    REG_BINARY &lt;123456789876&gt;
</pre>
<p>If so, get your device's key through <code>hex</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">&gt; hex 123456789876</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">:00000 XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX (some other chars)
</pre>
<p>The "XX"s are the pairing key. Make note of which keys map to which MAC addresses.
</p>
<p>If this <i>is</i> a Bluetooth 5.1 device, then you will see several keys corresponding to the one device.
</p>
<pre>Node has 0 subkeys and 8 values
  size     type              value name             [value if type DWORD]
    16  3 REG_BINARY         &lt;LTK&gt;
     4  4 REG_DWORD          &lt;KeyLength&gt;               16 [0x10]
     8  b REG_QWORD          &lt;ERand&gt;
     4  4 REG_DWORD          &lt;EDIV&gt;                 37520 [0x9290]
    16  3 REG_BINARY         &lt;IRK&gt;
     8  b REG_QWORD          &lt;Address&gt;
     4  4 REG_DWORD          &lt;AddressType&gt;              1 [0x1]
     4  4 REG_DWORD          &lt;AuthReq&gt;                 45 [0x2d]
</pre>
<p>Refer to <a href="#Preparing_Bluetooth_5.1_Keys">#Preparing Bluetooth 5.1 Keys</a> to see how to use these, using <code>hex <i>value_name</i></code> to obtain the requested values.
</p>
<p>Finally, to import the key(s) into your Linux installation, proceed to <a href="#Saving_the_configuration">#Saving the configuration</a>.
</p>
<h4><span class="mw-headline" id="For_macOS">For macOS</span></h4>
<p>Boot into macOS:
</p>
<ul>
<li>For macOS Monterey or newer:
<ol>
<li>Open Keychain Access and search for Bluetooth.</li>
<li>Sort by date.</li>
<li>If you've recently removed and reconnected the device then you can simply sort the keys by date modified and pick the latest. It is probably called MobileBluetooth (for older Bluetooth devices) or is just an UUID (for Bluetooth 5.1+).</li>
<li>Double click on the entry. Check that the MAC address in the Account field matches the MAC address of your device.</li>
<li>Click the "Show password" checkbox. You will now need to enter your password, twice.</li>
<li>Copy the text in the password field, it's actually an XML file (<code>⌘+a</code> <code>⌘+c</code>)</li>
<li>Paste the text in <code>bt_keys.txt</code> in your home directory.</li>
</ol>
</li>
<li>For High Sierra or newer, run the following in a terminal: <pre># defaults read /private/var/root/Library/Preferences/com.apple.bluetoothd.plist LinkKeys &gt; ~/bt_keys.txt</pre>
</li>
<li>For Sierra or older, run the following in a terminal: <pre># defaults read /private/var/root/Library/Preferences/blued.plist LinkKeys &gt; ~/bt_keys.txt</pre>
</li>
</ul>
<p>The <code>~/.bt_keys.txt</code> file now contains the established Bluetooth keys. For older versions of macOS (High Sierra and older) you will have to reverse the keys before proceeding. For example, <code>98 54 2f aa bb cc dd ee ff gg hh ii jj kk ll mm</code> becomes <code>MM LL KK JJ GG FF EE DD CC BB AA 2F 54 98</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The reversal can be done with the following <a href="../en/Python.html" title="Python">Python</a> code:
<pre>&gt;&gt;&gt; key = "98 54 2f aa bb cc dd ee ff gg hh ii jj kk ll mm"
&gt;&gt;&gt; " ".join(reversed(key.strip().split()))</pre>
</div>
<p>If this is a Bluetooth 5.1 device, then there will be more than one key corresponding to one device. Refer to <a href="#Preparing_Bluetooth_5.1_Keys">#Preparing Bluetooth 5.1 Keys</a> to see how to use these.
</p>
<p>Finally, to import the key(s) into your Linux installation, reboot into Linux and proceed to <a href="#Saving_the_configuration">#Saving the configuration</a>.
</p>
<h4><span class="mw-headline" id="Preparing_Bluetooth_5.1_Keys">Preparing Bluetooth 5.1 Keys</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> We are still working on getting a comprehensive idea of how these work across vendors. For now, documenting specific devices' compatibility with these methods is helpful - especially non-Logitech data points. (Discuss in <a href="../en/Talk:Bluetooth.html#Bluetooth_5.1_Devices" title="Talk:Bluetooth">Talk:Bluetooth#Bluetooth 5.1 Devices</a>)</div>
</div>
<p>If you observed the presence of Bluetooth 5.1 keys while following <a href="#For_Windows">#For Windows</a> or <a href="#For_macOS">#For macOS</a>, you must apply certain transformations to their values before importing them into Linux. Create the requested files with their appropriate contents, for installation in <a href="#Saving_the_configuration">#Saving the configuration</a>. This process will depend on the device, and some of the values have to be manipulated; code utilities for doing so are provided below.
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Device</th>
<th>Source Key and Transformations (Windows)</th>
<th>Source Key and Transformations (macOS)</th>
<th>Destination Key File
</th>
</tr>
<tr>
<td rowspan="3">
<ul>
<li>Logitech MX Master 3</li>
<li>Logitech MX Master 3S</li>
<li>Logitech MX Keys</li>
<li>Logitech MX Mechanical</li>
<li>Xbox One S Wireless Controller</li>
</ul>
</td>
<td>
<ul>
<li>Copy <code>IRK</code>.</li>
<li>Remove the spaces between the hex octets.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>IdentityResolvingKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>LTK</code>.</li>
<li>Remove the spaces between the hex octets.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>SlaveLongTermKey.Key</code> and <code>PeripheralLongTermKey.Key</code>
</td>
</tr>
<tr>
<td>
<code>ERand</code> and <code>EDIV</code> should be <code>0</code>
</td>
<td>
<i>Random Number</i> and <i>Encrypted Diversifier</i> should be <code>0</code>.
</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td rowspan="6">
<ul><li>Logitech MX Anywhere 2S</li></ul>
</td>
<td>
<ul>
<li>Copy <code>IRK</code>.</li>
<li>Remove the spaces between the hex octets.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>IdentityResolvingKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>CSRK</code>.</li>
<li>Remove the spaces between the hex octets.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LocalSignatureKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>LTK</code>.</li>
<li>Remove the spaces between the hex octets.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LongTermKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>KeyLength</code>.</li>
<li>Convert the whole number to decimal.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LongTermKey.EncSize</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>EDIV</code>.</li>
<li>Convert the whole number to decimal.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LongTermKey.EDiv</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>ERand</code>.</li>
<li>Reverse the order of the octets.</li>
<li>Convert the whole number to decimal.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LongTermKey.Rand</code>
</td>
</tr>
<tr>
<td rowspan="4">
<ul>
<li>ThinkPad TrackPoint Keyboard II</li>
<li>Pebble M350 mouse</li>
<li>Logitech G604 Lightspeed mouse</li>
</ul>
</td>
<td>
<ul>
<li>Copy <code>IRK</code>.</li>
<li>Reverse the order of the octets.</li>
</ul>
</td>
<td>
<ul>
<li>Copy <i>Remote IRK</i>.</li>
<li>Convert from base64 to hex.</li>
</ul>
</td>
<td>
<code>IdentityResolvingKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>LTK</code>.</li>
<li>Remove the spaces between the hexadecimal octets.</li>
</ul>
</td>
<td>
<ul>
<li>Copy <i>Remote Encryption</i> &gt; <i>Long-term Key</i>.</li>
<li>Convert from base64 to hex.</li>
</ul>
</td>
<td>
<code>LongTermKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>ERand</code>.</li>
<li>Reverse the order of the octets.</li>
<li>Convert the whole number to decimal.</li>
</ul>
</td>
<td>
<ul>
<li>Copy <i>Remote Encryption</i> &gt; <i>Random Number</i>.</li>
<li>Convert from base64 to a little-endian decimal number (see Python code below).</li>
</ul>
</td>
<td>
<code>LongTermKey.Rand</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>EDIV</code>.</li>
<li>Reverse the order of the octets.</li>
<li>Convert the whole number to decimal.</li>
</ul>
</td>
<td>
<ul>
<li>Copy <i>Remote Encryption</i> &gt; <i>Encrypted Diversifier</i>.</li>
<li>Convert from base64 to a little-endian decimal number (see Python code below).</li>
</ul>
</td>
<td>
<code>LongTermKey.EDiv</code>
</td>
</tr>
<tr>
<td rowspan="3">Other devices
</td>
<td>
<ul>
<li>Copy <code>LTK</code>.</li>
<li>Remove the spaces between the hex octets.</li>
</ul>
</td>
<td>
<ul>
<li>Copy <i>Remote IRK</i>.</li>
<li>Convert from base64 to hex.</li>
</ul>
</td>
<td>
<code>LongTermKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>ERand</code>.</li>
<li>Reverse the order of the octets.</li>
<li>Convert the whole number to decimal.</li>
</ul>
</td>
<td>
<ul>
<li>Copy <i>Remote Encryption</i> &gt; <i>Long-term Key</i>.</li>
<li>Convert from base64 to hex.</li>
</ul>
</td>
<td>
<code>LongTermKey.Rand</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Copy <code>EDIV</code>.</li>
<li>Remove the spaces between the hex octets.</li>
</ul>
</td>
<td>
<ul>
<li>Copy <i>Remote Encryption</i> &gt; <i>Encrypted Diversifier</i>.</li>
<li>Convert from base64 to hex.</li>
<li>Reverse the order of the octets.</li>
</ul>
</td>
<td>
<code>LongTermKey.EDiv</code>
</td>
</tr>
<tr>
<td rowspan="1">Xbox wireless controller
</td>
<td>
<ul>
<li>Copy <code>LTK</code>.</li>
<li>Remove the spaces between the hex octets.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>SlaveLongTermKey.Key</code>
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul><li>To just remove the spaces from a value, you can use <a rel="nofollow" class="external text" href="https://www.browserling.com/tools/remove-all-whitespace">this online tool</a> or this <a href="../en/Python.html" title="Python">Python</a> code:</li></ul>
<pre>&gt;&gt;&gt; "<i>key_value</i>".replace(" ", "")
</pre>
<ul><li>This Python code does only the octet reversal:</li></ul>
<pre>&gt;&gt;&gt; ERand=" 63 02 84 B8 5D 40 44 DF   "
&gt;&gt;&gt; ERand=list(reversed(ERand.strip().split()))</pre>
<ul><li>This Python code does the additional decimal conversion required for some:</li></ul>
<pre>&gt;&gt;&gt; int("".join(ERand), 16)
16088054540146049635</pre>
<ul><li>This Python code does the base64 to hex conversion:</li></ul>
<pre>binascii.hexlify(base64.decodebytes(b'...')).upper()
</pre>
<ul><li>This Python code does the full macOS Encrypted Diversifier conversion:</li></ul>
<pre>struct.unpack('&lt;H', base64.decodebytes(b'...'))
</pre>
<ul><li>This Python code does the full macOS Random Number conversion:</li></ul>
<pre>struct.unpack('&lt;Q', base64.decodebytes(b'...'))
</pre>
</div>
<p>For an example of the general case:
</p>
<ul>
<li>An <code>LTK</code> of <code>48 4D AF CD 0F 92 22 88 0A 52 9A F4 76 DA 8B 94</code> makes for a <code>LongTermKey.Key</code> of <code>484DAFCD0F9222880A529AF476DA8B94</code>.</li>
<li>An <code>ERand</code> of <code>63 02 84 B8 5D 40 44 DF</code> makes for a <code>Rand</code> of <code>16088054540146049635</code>.</li>
<li>An <code>EDIV</code> of <code>37520</code> makes for an <code>EDiv</code> of <code>37520</code>.</li>
</ul>
<h4><span class="mw-headline" id="Saving_the_configuration">Saving the configuration</span></h4>
<p>Now that you have the keys change user to root, then continue with:
</p>
<pre># cd /var/lib/bluetooth/<i>BT-Adapter-MAC-address</i>
</pre>
<p>Here you will find folders for each paired Bluetooth device. For each device you want to pair with Arch and your dual boot, do the following:
</p>
<pre># cd <i>device-MAC-address</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> At this point, if you are using a device which increments its MAC address on pairing, you must move the MAC address directory to the incremented path. Either copy the MAC address from Windows, or increment it yourself while minding the fact that each octet is a two-digit <a href="https://en.wikipedia.org/wiki/Hexadecimal" class="extiw" title="wikipedia:Hexadecimal">hexadecimal</a> number.</div>
<p>If you have a pairing key (i.e. this is not a Bluetooth 5.1 device), then edit the <code>info</code> file and change the key under <code>[LinkKey]</code>. E.g.:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[LinkKey]
Key=XXXXXXXXXXXXXXX</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You will have to make sure that all the letters are in capital case. Remove any spaces.</div>
<p>If you have several keys, as in Bluetooth 5.1, edit the <code>info</code> file and substitute all applicable keys with their recorded values. E.g. for an Xbox One S Wireless Controller:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[IdentityResolvingKey]
Key=&lt;IdentityResolvingKey.Key&gt;

[PeripheralLongTermKey]
Key=&lt;PeripheralLongTermKey.Key&gt;

[SlaveLongTermKey]
Key=&lt;SlaveLongTermKey.Key&gt;</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>bluetooth.service</code> and <code>pulseaudio</code> (with <code>pulseaudio -k &amp;&amp; pulseaudio --start</code>).
</p>
<p>You should be able to connect to your device now.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Depending on your Bluetooth manager, you may need to perform a full reboot in order to reconnect to the device.</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Default_adapter_power_state">Default adapter power state</span></h3>
<p>As of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span> 5.65, BlueZ' default behavior is to power on all Bluetooth adapters when starting the service or resuming from suspend. <a rel="nofollow" class="external autonumber" href="https://github.com/bluez/bluez/commit/180cf09933b2d8eb03972c8638063429fe5fece5">[2]</a>
</p>
<p>If you would like the adapter to not be automatically enabled (e.g. on a portable device where you wish to save battery), set <code>AutoEnable=false</code> in <code>/etc/bluetooth/main.conf</code> in the <code>[Policy]</code> section:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Policy]
AutoEnable=false</pre>
<p>The adapter can still be turned on manually by running <code>power on</code> as described in <a href="#Pairing">#Pairing</a>.
</p>
<h3><span class="mw-headline" id="Discoverable_on_startup">Discoverable on startup</span></h3>
<p>If the device should always be visible and directly connectable:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
DiscoverableTimeout = 0</pre>
<h3><span class="mw-headline" id="Wake_from_suspend">Wake from suspend</span></h3>
<p>To allow Bluetooth keyboards, mice, etc. to wake the system from suspend. First, check the bios settings and make sure that wake from USB is not disabled. In many cases, Bluetooth from the motherboard is a USB device.
</p>
<p>Find the vendor code and device ID for the Bluetooth adapter.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb | grep bluetooth -i</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Bus 001 Device 002: ID 8087:0039 Intel Corp. AX200 Bluetooth
</pre>
<p>Add a new udev rule for the vendor code and device ID to enable wake from suspend.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/91-keyboard-mouse-wakeup.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="usb", ATTRS{idVendor}=="8087", ATTRS{idProduct}=="0039" RUN+="/bin/sh -c 'echo enabled &gt; /sys$env{DEVPATH}/../power/wakeup;'"</pre>
<p>To automatically re-configure your Bluetooth keyboard after wakeups to e.g. have a different keymap or key press repeat rate (for details, see <a href="../en/Xorg/Keyboard_configuration.html#Adjusting_typematic_delay_and_rate" title="Xorg/Keyboard configuration">Xorg/Keyboard configuration#Adjusting typematic delay and rate</a> and <a href="../en/Xmodmap.html" title="Xmodmap">xmodmap</a>), create an <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a> script.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">configure_keyboard.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
export DISPLAY=:0
xset r rate 220 30
xmodmap /<i>your</i>/<i>path</i>/<i>to</i>/.Xmodmap</pre>
<p>Then create an additional udev rule like above.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/92-keyboard-reconfiguration-wakeup.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="usb", ATTRS{idVendor}=="8087", ATTRS{idProduct}=="0039" RUN+="/<i>your</i>/<i>path</i>/<i>to</i>/configure_keyboard.sh"</pre>
<h3><span class="mw-headline" id="Enabling_experimental_features">Enabling experimental features</span></h3>
<p>The Bluez stack keeps new, potentially buggy features behind the D-Bus experimental and kernel experimental options. The functionality included under these varies over time, as experimental features are determined to be stable and no longer require the option (as an example: enabling D-Bus experimental interfaces currently allows to report battery level for old headsets). To enable these, uncomment the corresponding line in the configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

# Enables D-Bus experimental interfaces
# Possible values: true or false
<b>#Experimental = true</b>

# Enables kernel experimental features, alternatively a list of UUIDs
# can be given.
# Possible values: true,false,&lt;UUID List&gt;
# Possible UUIDS:
...
# Defaults to false.
<b>#KernelExperimental = true</b></pre>
<p>Alternatively, you can <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> the <code>bluetooth.service</code> to add the <code>--experimental</code> or <code>--kernel</code> flag, like this <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/bluetooth.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/lib/bluetooth/bluetoothd --experimental</pre>
<p>Either way, you must then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>bluetooth.service</code>.
</p>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p>You will typically need to take an additional step to integrate the audio server with Bluetooth. This is detailed in the below sections.
</p>
<p>See the <a href="../en/Bluetooth_headset.html" title="Bluetooth headset">Bluetooth headset</a> page for more information about Bluetooth audio and Bluetooth headsets.
</p>
<h3><span class="mw-headline" id="PulseAudio">PulseAudio</span></h3>
<p>In order to be able to use audio equipment like Bluetooth headphones or speakers, you need to install the additional <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span> package. Make sure to restart pulseaudio to make the installation take effect: <code>pulseaudio -k</code>. With a default PulseAudio installation (specifically, using a user instance with the packaged <code>default.pa</code>) you should immediately be able to stream audio from a Bluetooth device to your speakers. <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pulseaudio/pulseaudio/-/blob/stable-16.x/src/daemon/default.pa.in#L84-93">[3]</a>
</p>
<p>If you have a system-wide PulseAudio setup make sure the user running the daemon (usually <code>pulse</code>) is in the <code>lp</code> group and you load the Bluetooth modules in your PulseAudio config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/system.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
load-module module-bluetooth-policy
load-module module-bluetooth-discover
...</pre>
<p>Optionally, add <code>load-module module-switch-on-connect</code> if you want to auto-switch all audio to the Bluetooth device.
</p>
<h3><span class="mw-headline" id="PipeWire">PipeWire</span></h3>
<p>PipeWire as of v0.3.19 enables its Bluetooth support by default.
</p>
<h3><span class="mw-headline" id="ALSA">ALSA</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Bluez5 has dropped direct integration for <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> and supports <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> only. Follow the instructions below if you cannot or do not want to use PulseAudio.</div>
<p>First, ensure that your Bluetooth audio device is correctly paired and connected to the system.
</p>
<p>Then, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bluez-alsa-git/">bluez-alsa-git</a></span><sup><small>AUR</small></sup>, start (and enable) the <code>bluealsa</code> service, and add your user to the <code>audio</code> group.
</p>
<p>Run the following command to check if everything is working as intended (replace <code><i>XX:XX:XX:XX:XX:XX</i></code> and <code><i>FILE.wav</i></code> below):
</p>
<pre>$ aplay -D bluealsa:SRV=org.bluealsa,DEV=<i>XX:XX:XX:XX:XX:XX</i>,PROFILE=a2dp <i>FILE.wav</i>
</pre>
<p>Finally, add the following lines to your <code>~/.asoundrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.asoundrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">defaults.bluealsa {
    service "org.bluealsa"
    device "XX:XX:XX:XX:XX:XX"
    profile "a2dp"
}
</pre>
<p>You can now use the <code>bluealsa</code> device to reach your Bluetooth audio device. Volume management is conducted normally via <code>alsamixer</code> with the option <code>-D bluealsa</code>.
</p>
<h2><span class="mw-headline" id="Bluetooth_serial">Bluetooth serial</span></h2>
<p>To get Bluetooth serial communication working on Bluetooth-to-Serial modules (HC-05, HC-06) do the following steps:
</p>
<p><b>Pair</b> your Bluetooth device using <code>bluetoothctl</code> as described <a href="#Pairing">above</a>.
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>, as it provides certain functionality which is missing from newer tools.
</p>
<p>Bind paired device MAC address to tty terminal:
</p>
<pre># rfcomm bind rfcomm0 <i>MAC_address_of_Bluetooth_device</i>
</pre>
<p>Now you can open <code>/dev/rfcomm0</code> for serial communication:
</p>
<pre>$ picocom /dev/rfcomm0 -b 115200
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> Replace hciconfig with newer commands. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Bluetooth.html">Talk:Bluetooth</a>)</div>
</div>
<h3><span class="mw-headline" id="General_Troubleshooting">General Troubleshooting</span></h3>
<h4><span class="mw-headline" id="Debugging">Debugging</span></h4>
<p>In order to debug, first <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">stop</a> <code>bluetooth.service</code>.
</p>
<p>And then start it with the <code>-d</code> parameter:
</p>
<pre># /usr/lib/bluetooth/bluetoothd -n -d
</pre>
<p>Another option is via the <code>btmon</code> tool.
</p>
<h4><span class="mw-headline" id="Deprecated_BlueZ_tools">Deprecated BlueZ tools</span></h4>
<p>Eight BlueZ tools <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/commit/?id=b1eb2c4cd057624312e0412f6c4be000f7fc3617">were deprecated</a> and removed from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>, although not all of them were superseded by newer tools. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span> package provides an alternative version of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> with the deprecated tools.
</p>
<table class="wikitable">

<tbody>
<tr>
<th>Deprecated tool
</th>
<th>Most likely replacement
</th>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/gatttool.1.en.html">gatttool</a></td>
<td>btgatt-client, <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/gatt-api.txt">D-Bus Gatt API</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-10-29 ⓘ]</sup>
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/hciattach.1.en.html">hciattach</a></td>
<td>btattach
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/hciconfig.1.en.html">hciconfig</a></td>
<td>btmgmt (and bluetoothctl?)
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez-hcidump/hcidump.1.en.html">hcidump</a></td>
<td>btmon (and btsnoop)
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/hcitool.1.en.html">hcitool</a></td>
<td>missing, <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/device-api.txt">D-Bus Device API</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-10-29 ⓘ]</sup> available
</td>
</tr>
<tr>
<td>
<a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/rfcomm.1.en.html">rfcomm</a>
</td>
<td rowspan="2">missing, implement with <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/profile-api.txt">D-Bus Profile1 API</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-10-29 ⓘ]</sup>?
</td>
</tr>
<tr>
<td>
<a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/ciptool.1.en.html">ciptool</a>
</td>
</tr>
<tr>
<td>
<a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/sdptool.1.en.html">sdptool</a>
</td>
<td>missing, functionality seems to be scattered over different D-Bus objects: <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/profile-api.txt">Profile</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-10-29 ⓘ]</sup>, <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/advertising-api.txt">Advertising</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-10-29 ⓘ]</sup>, and the UUIDs arrays in <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/device-api.txt">device</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-10-29 ⓘ]</sup> and <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/adapter-api.txt">adapter</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-10-29 ⓘ]</sup>.
</td>
</tr>
</tbody>
</table>
<h3><span class="mw-headline" id="Service_issues">Service issues</span></h3>
<h4><span class="mw-headline" id="systemd:_Condition_check_resulted_in_Bluetooth_service_being_skipped">systemd: Condition check resulted in Bluetooth service being skipped</span></h4>
<p><code>bluetooth.service</code> only requires the directory <code>/sys/class/bluetooth</code> to exist, which should be created by kernel module <code>bluetooth</code>, which is only autoloaded by <code>systemd-udev</code> if it actually finds a working Bluetooth hardware device.
</p>
<p>If your <code>/sys/class/bluetooth</code> does not exist, check if your kernel Bluetooth module is loaded by <code>lsmod</code>. If not, and you believe you have a Bluetooth device, you can try manually starting them by <a href="../en/Kernel_module.html#Manual_module_handling" title="Kernel module">loading the Bluetooth module</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restarting</a> <code>bluetooth.service</code>.
</p>
<p>You should also load your corresponding kernel Bluetooth driver when loading the <code>bluetooth</code> module, most likely <code>btusb</code>, but can also be <code>btrtl,btintel,btbcm,bnep,btusb</code> etc.
</p>
<p>Check <code>bluetooth.service</code>'s <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Unit status">unit status</a> to see whether it started.
</p>
<p>See also <a rel="nofollow" class="external text" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=853207">Debian Bug report logs - #853207</a>.
</p>
<p>If <code>bluetooth.service</code> started successfully, there is a chance that you still cannot use Bluetooth normally (e.g. <code>bluetoothctl</code> says something like <code>org.Bluez.Error.NotReady</code> when you <code>scan on</code>). If this happens, try rebooting your computer, and double-check: whether directory <code>/sys/class/bluetooth</code> exists; whether <code>lsmod</code> includes correct Bluetooth modules; log messages in the <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journal">journal</a>; etc. <code>systemd-udev</code> should pickup your Bluetooth hardware automatically without manual changes again.
</p>
<h4><span class="mw-headline" id="Bluetooth_immediately_waking_up_suspend-to-idle_devices">Bluetooth immediately waking up suspend-to-idle devices</span></h4>
<p>On systems capable of <a href="../en/Power_management/Suspend_and_hibernate.html" title="Power management/Suspend and hibernate">suspend-to-idle/S2idle/S0ix/Modern Standby</a>, Bluetooth controllers will stay enabled during sleep. This will usually cause the system to <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=200039">wake up immediately after going to sleep</a> if any Bluetooth device is connected.
</p>
<p>To prevent this, you can disable Bluetooth completely before going to sleep - install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> and create this file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/bluetooth-disable-before-sleep.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Disable Bluetooth before going to sleep
Before=sleep.target
Before=suspend.target
Before=hybrid-sleep.target
Before=suspend-then-hibernate.target
StopWhenUnneeded=yes

[Service]
Type=oneshot
RemainAfterExit=yes

ExecStart=/usr/bin/bluetoothctl power off
ExecStop=/usr/bin/bluetoothctl power on

[Install]
WantedBy=sleep.target
WantedBy=suspend.target
WantedBy=hybrid-sleep.target
WantedBy=suspend-then-hibernate.target</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> this service and check if Bluetooth devices disconnect when going to sleep, and whenever Bluetooth goes back up after waking up the system.
</p>
<p>If this workaround is in use, <a href="#Wake_from_suspend">waking up the system with a Bluetooth mouse/keyboard</a> will not work.
</p>
<h4>
<span id="Bluetooth_turns_off_after_logout_on_a_headless.2Fserver_system"></span><span class="mw-headline" id="Bluetooth_turns_off_after_logout_on_a_headless/server_system">Bluetooth turns off after logout on a headless/server system</span>
</h4>
<p>This can have various causes:
</p>
<ul>
<li>Both <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> and <a href="../en/PipeWire.html" title="PipeWire">PipeWire</a> run as user services by default, which are terminated once the last session ends. Enable <a href="../en/Systemd/User.html#Automatic_start-up_of_systemd_user_instances" title="Systemd/User">lingering</a> for the user to fix this.</li>
<li>Additionally, when running <a href="../en/WirePlumber.html" title="WirePlumber">WirePlumber</a> with <a href="../en/PipeWire.html" title="PipeWire">PipeWire</a> (which is usually the case), WirePlumber runs a "logind-monitor" which enables Bluetooth on login and disables it on logout. See <a href="../en/WirePlumber.html#Keep_Bluetooth_running_after_logout_/_Headless_Bluetooth" title="WirePlumber">WirePlumber#Keep Bluetooth running after logout / Headless Bluetooth</a> for a fix.</li>
</ul>
<h3><span class="mw-headline" id="Adapter_issues">Adapter issues</span></h3>
<h4><span class="mw-headline" id="hcitool_scan:_Device_not_found">hcitool scan: Device not found</span></h4>
<ul><li>On some laptops (e.g. Dell Studio 15, Lenovo Thinkpad X1) you have to switch the Bluetooth mode from HID to HCI. Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-hid2hci">bluez-hid2hci</a></span> package, then <a href="../en/Udev.html" title="Udev">udev</a> should do this automatically. Alternatively, you can run this command to switch to HCI manually:</li></ul>
<pre># /usr/lib/udev/hid2hci
</pre>
<ul><li>If the device will not show up and you have a Windows operating system on your machine, try booting it and enable the Bluetooth adapter from windows.</li></ul>
<ul><li>Sometimes also this simple command helps:</li></ul>
<pre># bluetoothctl power on
</pre>
<h4><span class="mw-headline" id="bluetoothctl:_No_default_controller_available">bluetoothctl: No default controller available</span></h4>
<p>There is a bug with some motherboard bluetooth controllers. To see if this might be the issue, run <code>journalctl | grep hci</code>. If there are entries like "command tx timeout" or "Reading Intel version command failed", then power off your pc and physically unplug the power cable for a few seconds. This forces the controller to reload the firmware (while a standard reboot will not). See bug report <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1859592">here</a>.
</p>
<p>Make sure the device is not being blocked by <a href="../en/Network_configuration/Wireless.html#Rfkill_caveat" class="mw-redirect" title="Rfkill">rfkill</a>.
</p>
<p>If using <a href="../en/USBGuard.html" title="USBGuard">USBGuard</a>, make sure it does not block the device. See <a href="../en/USBGuard.html#Allow_Bluetooth_controllers" title="USBGuard">USBGuard#Allow Bluetooth controllers</a>.
</p>
<p>It might also happen with some intel cards (such as the 8260) to not be picked up correctly by the Bluetooth service. In some cases, using the deprecated <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span> in lieu of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> have reportedly fixed the issue.
</p>
<p>This might also be caused by power saving measures, in which case adding the <a href="../en/Kernel_parameters.html#Configuration" title="Kernel parameters">kernel parameter</a> <code>btusb.enable_autosuspend=n</code> is a potential solution. See also <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=1573562">Red Hat Bugzilla – Bug 1573562</a>.
</p>
<p>Sometimes unloading and loading <code>btusb</code> without options helps to get the controller back:
</p>
<pre># modprobe -r btusb
# modprobe btusb
</pre>
<p>It may also occur when the dongle is a <a href="#CSR_dongle_0a12:0001">CSR clone</a>.
</p>
<h4><span class="mw-headline" id="rfkill_unblock:_Do_not_unblock">rfkill unblock: Do not unblock</span></h4>
<p>If your device still soft blocked and you run <a href="../en/ConnMan.html" title="ConnMan">ConnMan</a>, try this:
</p>
<pre>$ connmanctl enable bluetooth
</pre>
<h4><span class="mw-headline" id="Bluetooth_USB_dongle">Bluetooth USB dongle</span></h4>
<p>If you are using a USB dongle, you should check that your Bluetooth dongle is recognized. You can do that by running <code>journalctl -f</code> as root when you have plugged in the USB dongle (or inspecting <code>/var/log/messages.log</code>). It should look something like the following (look out for hci):
</p>
<pre>Feb 20 15:00:24 hostname kernel: [ 2661.349823] usb 4-1: new full-speed USB device number 3 using uhci_hcd
Feb 20 15:00:24 hostname bluetoothd[4568]: HCI dev 0 registered
Feb 20 15:00:24 hostname bluetoothd[4568]: Listening for HCI events on hci0
Feb 20 15:00:25 hostname bluetoothd[4568]: HCI dev 0 up
Feb 20 15:00:25 hostname bluetoothd[4568]: Adapter /org/bluez/4568/hci0 has been enabled
</pre>
<p>If you only get the first two lines, you may see that it found the device but you need to bring it up.
Example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># btmgmt</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[mgmt]# info
Index list with 1 item
hci0:	Primary controller
	addr 00:1A:7D:DA:71:10 version 6 manufacturer 10 class 0x000000
	supported settings: powered connectable fast-connectable discoverable bondable link-security ssp br/edr hs le advertising secure-conn debug-keys privacy static-addr
	<b>current settings:</b> connectable discoverable bondable ssp br/edr le secure-conn
	name Mozart
	short name

[mgmt]# select hci0
Selected index 0

[hci0]# power up
hci0 Set Powered complete, settings: <b>powered</b> connectable discoverable bondable ssp br/edr le secure-conn

[hci0]# info
hci0:	Primary controller
	addr 00:1A:7D:DA:71:10 version 6 manufacturer 10 class 0x1c0104
	supported settings: powered connectable fast-connectable discoverable bondable link-security ssp br/edr hs le advertising secure-conn debug-keys privacy static-addr
	<b>current settings: powered</b> connectable discoverable bondable ssp br/edr le secure-conn
</pre>
<p>Or
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># bluetoothctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[bluetooth]# show
Controller 00:1A:7D:DA:71:10 (public)
	Name: Mozart
	Alias: Mozart
	Class: 0x0000095c
	<b>Powered: no</b>
	Discoverable: yes
	Pairable: yes

[bluetooth]# power on
[CHG] Controller 00:1A:7D:DA:71:10 Class: 0x001c0104
Changing power on succeeded
[CHG] Controller 00:1A:7D:DA:71:10 <b>Powered: yes</b>

[bluetooth]# show
Controller 00:1A:7D:DA:71:10 (public)
	Name: Mozart
	Alias: Mozart
	Class: 0x001c0104
	<b>Powered: yes</b>
	Discoverable: yes
	Pairable: yes
</pre>
<p>To verify that the device was detected you can use <code>btmgmt</code> which is part of the <code>bluez-utils</code>. You can get a list of available devices and their identifiers and their MAC address by issuing:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ btmgmt info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Index list with 1 item
hci0:	Primary controller
	addr 00:1A:7D:DA:71:10 <b>version 6</b> manufacturer 10 class 0x1c0104
	supported settings: powered connectable fast-connectable discoverable bondable link-security ssp br/edr hs le advertising secure-conn debug-keys privacy static-addr
	current settings: powered connectable discoverable bondable ssp br/edr le secure-conn
</pre>
<p>It is possible to check the Bluetooth version as mapped to the HCI version according to the table in the <a rel="nofollow" class="external text" href="https://www.bluetooth.com/specifications/assigned-numbers/host-controller-interface/">official specification</a>. For example, in the previous output, HCI <b>version 6</b> is Bluetooth version 4.0.
</p>
<p>More detailed information about the device can be retrieved by using the deprecated <code>hciconfig</code>. (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>)
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ hciconfig -a hci0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">hci0:   Type: USB
        BD Address: 00:1B:DC:0F:DB:40 ACL MTU: 310:10 SCO MTU: 64:8
        UP RUNNING PSCAN ISCAN
        RX bytes:1226 acl:0 sco:0 events:27 errors:0
        TX bytes:351 acl:0 sco:0 commands:26 errors:0
        Features: 0xff 0xff 0x8f 0xfe 0x9b 0xf9 0x00 0x80
        Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3
        Link policy: RSWITCH HOLD SNIFF PARK
        Link mode: SLAVE ACCEPT
        Name: 'BlueZ (0)'
        Class: 0x000100
        Service Classes: Unspecified
        Device Class: Computer, Uncategorized
        HCI Ver: 2.0 (0x3) HCI Rev: 0xc5c LMP Ver: 2.0 (0x3) LMP Subver: 0xc5c
        Manufacturer: Cambridge Silicon Radio (10)
</pre>
<h5><span class="mw-headline" id="Audio_devices_start_to_skip_at_short_distance_from_dongle">Audio devices start to skip at short distance from dongle</span></h5>
<p>If other devices share the same USB host, they can <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1440161#p1440161">interrupt communication with audio devices</a>. Make sure it is the only device attached to its bus. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Bus 002 Device 002: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 004: ID 048d:1345 Integrated Technology Express, Inc. Multi Cardreader
Bus 001 Device 003: ID 0424:a700 Standard Microsystems Corp. 2 Port Hub
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<h5><span class="mw-headline" id="CSR_dongle_0a12:0001">CSR dongle 0a12:0001</span></h5>
<p>The device <code>ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)</code> has a regression bug, and currently only works in the kernel version 5.17 and &lt; 6.0. For more information, see <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=60824">Kernel Bug 60824</a>.
</p>
<h4><span class="mw-headline" id="Logitech_Bluetooth_USB_dongle">Logitech Bluetooth USB dongle</span></h4>
<p>There are Logitech dongles (ex. Logitech MX5000) that can work in two modes: Embedded and HCI. In embedded mode dongle emulates a USB device so it seems to your PC that you are using a normal USB mouse/keyoard.
</p>
<p>If you hold the little red Button on the USB BT mini-receiver it will enable the other mode. Hold the red button on the BT dongle and plug it into the computer, and after 3-5 seconds of holding the button, the Bluetooth icon will appear in the system tray. <a rel="nofollow" class="external text" href="https://ubuntuforums.org/showthread.php?t=1332197">Discussion</a>
</p>
<p>Alternatively, you can install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-hid2hci">bluez-hid2hci</a></span> package. When you connect your Logitech dongle it will automatically switch.
</p>
<h4>
<span id="Foxconn_.2F_Hon_Hai_.2F_Lite-On_Broadcom_device"></span><span class="mw-headline" id="Foxconn_/_Hon_Hai_/_Lite-On_Broadcom_device">Foxconn / Hon Hai / Lite-On Broadcom device</span>
</h4>
<p>Some of these devices require the firmware to be flashed into the device at boot.
</p>
<p>Some firmware is available when searching for <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages?K=broadcom">broadcom</a> on the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>, a notable package being <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/broadcom-bt-firmware/">broadcom-bt-firmware</a></span><sup><small>AUR</small></sup>, which provides the files for <a rel="nofollow" class="external text" href="https://github.com/winterheart/broadcom-bt-firmware/blob/master/DEVICES.md">multiple cards</a>.
</p>
<p>Alternatively, the firmware can be converted from a Microsoft Windows <i>.hex</i> file into a <i>.hcd</i> using <a rel="nofollow" class="external text" href="https://github.com/jessesung/hex2hcd">hex2hcd</a> (which is installed with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>).
</p>
<p>In order to get the right <i>.hex</i> file, try searching the device vendor:product code obtained with <i>lsusb</i>, for example:
</p>
<pre>Bus 002 Device 004: ID <b>04ca:2006</b> Lite-On Technology Corp. Broadcom BCM43142A0 Bluetooth Device
</pre>
<p>or
</p>
<pre>Bus 004 Device 004: Id <b>0489:e031</b> Foxconn / Hon Hai
</pre>
<p>Alternatively, boot into Windows (a virtual machine installation will suffice) and get the firmware name from the Device Manager utility. If you want to know the model of your device but cannot see it in <i>lsusb</i>, you might see it in <i>lsusb -v</i> as <code>iProduct</code>.
</p>
<p>The <i>.hex</i> file can be extracted from the downloaded Windows driver without having to run Windows for it. Download the right driver, for example <a rel="nofollow" class="external text" href="http://www.fujitsupc.com/downloads/mobile/BLUETOOTH_WIDCOMM_V6.5.0.3100_WIN7-32_FPC46-1771-01.EXE">Bluetooth Widcomm</a><sup title="Last check status: domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-09-16 ⓘ]</sup>. Depending on the format, extracting the files might need <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=unrar">unrar</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cabextract">cabextract</a></span>. To find out which of the many <i>.hex</i> files is the right one for you, look in the file <code>Win32/bcbtums-win7x86-brcm.inf</code> and search for <code>[RAMUSB<b>E031</b>.CopyList]</code>, where <code>E031</code> should be replaced with the product code (the second hex number in <i>lsusb</i>) of your device in upper-case. Underneath you should see the file name of the right <i>.hex</i> file.
</p>
<p>Once you have the <i>.hcd</i> file, copy it into <code>/lib/firmware/brcm/BCM.hcd</code> - this filename is suggested by <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Dmesg">dmesg</a> and it may change in your case so check your <i>dmesg</i> output in order to verify. Then reload the <i>btusb</i> module:
</p>
<pre># rmmod btusb
# modprobe btusb
</pre>
<p>The device should now be available. See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=162688">BBS#162688</a> for information on making these changes persistent.
</p>
<h4><span class="mw-headline" id="Intel_combined_WiFi_and_Bluetooth_cards">Intel combined WiFi and Bluetooth cards</span></h4>
<p>See <a href="../en/Network_configuration/Wireless.html#Bluetooth_coexistence" class="mw-redirect" title="Wireless network configuration">Wireless network configuration#Bluetooth coexistence</a>.
</p>
<h4><span class="mw-headline" id="Mediatek_MT7921_or_MT7961_on_dual_boot_with_windows">Mediatek MT7921 or MT7961 on dual boot with windows</span></h4>
<p>On dual boot systems, if Bluetooth firmware versions are different for Windows and Linux, the Bluetooth adapter is not working after rebooting to Windows.
</p>
<p>The best way to prevent this is updating the Bluetooth drivers (especially firmware) with latest version for each OS.
</p>
<p>If you cannot find the latest version driver (or firmware) for Windows, you can copy the latest firmware file <code>/usr/lib/firmware/mediatek/BT_RAM_CODE_MT7961_1_2_hdr.bin.xz</code> from Arch Linux and extract to Windows (e.g. <code>C:\WINDOWS\system32\DRIVERS\</code>, you can find the firmware file path in the device manager on Windows).
</p>
<h4>
<span id="Adapter_disappears_after_suspend.2Fresume"></span><span class="mw-headline" id="Adapter_disappears_after_suspend/resume">Adapter disappears after suspend/resume</span>
</h4>
<p>First, find vendor and product ID of the adapter. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb -tv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/12p, 480M
    ID 1d6b:0002 Linux Foundation 2.0 root hub
    ...
    |__ Port 3: Dev 3, If 0, Class=Wireless, Driver=btusb, 12M
        ID 8087:0025 Intel Corp.
    |__ Port 3: Dev 3, If 1, Class=Wireless, Driver=btusb, 12M
        ID 8087:0025 Intel Corp.
    ...
</pre>
<p>In this case, the vendor ID is 8087 and the product ID is 0025.
</p>
<p>Then, use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usb_modeswitch">usb_modeswitch</a></span> to reset the adapter:
</p>
<pre># usb_modeswitch -R -v <i>vendor_ID</i> -p <i>product_ID</i>
</pre>
<h3><span class="mw-headline" id="Pairing_and_connectivity_issues">Pairing and connectivity issues</span></h3>
<h4><span class="mw-headline" id="Computer_is_not_visible">Computer is not visible</span></h4>
<p>Enable discoverable mode if your computer cannot be discovered from your phone:
</p>
<pre># bluetoothctl discoverable on
</pre>
<p>Verify that discoverable mode is on:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># bluetoothctl show</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">	Powered: yes
	Discoverable: yes
	Pairable: yes
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Check <code>DiscoverableTimeout</code> and <code>PairableTimeout</code> in <code>/etc/bluetooth/main.conf</code>.</div>
<p>If the computer still does not show up, try changing the device class in <code>/etc/bluetooth/main.conf</code> as follows:
</p>
<pre># Default device class. Only the major and minor device class bits are
# considered.
#Class = 0x000100 # Computer Type (from default config)
Class = 0x100100 # (Object-Transfer Service &amp; Computer Type)
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> In some cases, <code>Class</code> in <code>main.conf</code> gets overridden after device initialization, so set the class directly with <code>hciconfig hci0 class 100100</code>.</div>
<p>A user reported that this was the only solution to make their computer visible for their phone. LG TVs (and some others) are discoverable from their audio devices, so using <code>000414</code> (the soundbar class) will make such devices appear.
</p>
<p>See <a rel="nofollow" class="external free" href="https://bluetooth-pentest.narod.ru/software/bluetooth_class_of_device-service_generator.html">https://bluetooth-pentest.narod.ru/software/bluetooth_class_of_device-service_generator.html</a> to generate Bluetooth device/service classes.
</p>
<h4>
<span id="Device_connects.2C_then_disconnects_after_a_few_moments"></span><span class="mw-headline" id="Device_connects,_then_disconnects_after_a_few_moments">Device connects, then disconnects after a few moments</span>
</h4>
<p>If you see messages like the following in the journal, and your device fails to connect or disconnects shortly after connecting:
</p>
<pre>bluetoothd: Unable to get connect data for Headset Voice gateway: getpeername: Transport endpoint is not connected (107)
bluetoothd: connect error: Connection refused (111)
</pre>
<p>This may be because you have already paired the device with another operating system using the same Bluetooth adapter (e.g., dual-booting).  Some devices cannot handle multiple pairings associated with the same MAC address (i.e., Bluetooth adapters). Follow instructions on <a href="#Dual_boot_pairing">#Dual boot pairing</a> for solving this issue.
</p>
<h4><span class="mw-headline" id="Device_does_not_show_up_in_scan">Device does not show up in scan</span></h4>
<p>Some devices using Bluetooth low energy do not appear when scanning with bluetoothctl, for example the <a href="../en/Logitech_MX_Master.html" title="Logitech MX Master">Logitech MX Master</a>. You can use <code>transport le</code> to scan it.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># bluetoothctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[bluetooth]# menu scan
[bluetooth]# transport le
[bluetooth]# back
[bluetooth]# scan on
[bluetooth]# devices
...
Device XX:XX:XX:XX:XX:XX DA V2 X &lt;---- low energy device here
</pre>
<p>Another way to connect them is by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>, then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> <code>bluetooth.service</code> and do:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># bluetoothctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[NEW] Controller (MAC) myhostname [default]

[bluetooth]# power on
[CHG] Controller (MAC) Class: 0x0c010c
Changing power on succeeded
[CHG] Controller (MAC) Powered: yes

[bluetooth]# scan on
Discovery started
[CHG] Controller (MAC) Discovering: yes
</pre>
<p>In another terminal:
</p>
<pre># hcitool lescan
</pre>
<p>Wait until your device shows up, then <code>Ctrl+c</code> hcitool. bluetoothctl should now see your device and pair normally.
</p>
<h4><span class="mw-headline" id="No_BLE_device_can_be_discovered_with_Intel_Corp._AX200_Bluetooth">No BLE device can be discovered with Intel Corp. AX200 Bluetooth</span></h4>
<p>It seems that BLE passive scan is broken on this device. See <a rel="nofollow" class="external text" href="https://community.intel.com/t5/Wireless/AX200-Passive-BLE-scan-linux/m-p/1227456">upstream bug report</a> for more details.
</p>
<h4><span class="mw-headline" id="Cannot_reconnect_after_sleep">Cannot reconnect after sleep</span></h4>
<p>You may notice that you cannot automatically reconnect to a device after it goes to sleep, or after the computer wakes from suspend.
</p>
<p>You would for example notice the following errors in your logs:
</p>
<pre>bluetoothd[487]: Authentication attempt without agent
bluetoothd[487]: Access denied: org.bluez.Error.Rejected
</pre>
<p>This could be because the device is not marked as <i>trusted</i>. See <a href="#Pairing">#Pairing</a>.
</p>
<h3><span class="mw-headline" id="Device-speific_issues">Device-speific issues</span></h3>
<h4>
<span id="Bluetooth_mouse_lags_.2F_disconnect_.2F_does_not_respond"></span><span class="mw-headline" id="Bluetooth_mouse_lags_/_disconnect_/_does_not_respond">Bluetooth mouse lags / disconnect / does not respond</span>
</h4>
<p>See <a href="../en/Bluetooth_mouse.html#Troubleshooting" title="Bluetooth mouse">Bluetooth mouse#Troubleshooting</a>.
</p>
<h4><span class="mw-headline" id="Audio_device_fails_to_connect_with_br-connection-profile-unavailable">Audio device fails to connect with br-connection-profile-unavailable</span></h4>
<p>A bluetooth audio device will fail to connect if pipewire (rather than pulseaudio-bluetooth) is being used, but an instance of pipewire is not running. <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> the <code>pipewire.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a> or play some audio to start the pipewire daemon, then try to connect the audio device again.
</p>
<h4><span class="mw-headline" id="Interference_between_headphones_and_mouse">Interference between headphones and mouse</span></h4>
<p>If you experience audio stuttering while using a Bluetooth mouse and keyboard simultaneously, you can try the following as referenced in #23 <a rel="nofollow" class="external free" href="https://bugs.launchpad.net/ubuntu/+source/bluez/+bug/424215">https://bugs.launchpad.net/ubuntu/+source/bluez/+bug/424215</a>
</p>
<pre># hciconfig hci0 lm ACCEPT,MASTER
# hciconfig hci0 lp HOLD,SNIFF,PARK
</pre>
<h4>
<span id="Continually_connect.2Fdisconnect_with_TP-LINK_UB400_and_Xbox_controller"></span><span class="mw-headline" id="Continually_connect/disconnect_with_TP-LINK_UB400_and_Xbox_controller">Continually connect/disconnect with TP-LINK UB400 and Xbox controller</span>
</h4>
<p>Use the settings below:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[General]
JustWorksRepairing = always
FastConnectable = true
Class = 0x000100
...
[GATT]
ReconnectIntervals=1,1,2,3,5,8,13,21,34,55
AutoEnable=true
...</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>bluetooth.service</code>.
</p>
<p>You can see relevant <a rel="nofollow" class="external text" href="https://github.com/atar-axis/xpadneo/issues/166">discussion on xpadneo</a> but the xpadneo driver is not needed.
</p>
<h3><span class="mw-headline" id="File_transfer_issues">File transfer issues</span></h3>
<h4><span class="mw-headline" id="gnome-bluetooth">gnome-bluetooth</span></h4>
<p>If you see this when trying to enable receiving files in bluetooth-properties:
</p>
<pre>Bluetooth OBEX start failed: Invalid path
Bluetooth FTP start failed: Invalid path
</pre>
<p>Then make sure that the <a href="../en/XDG_user_directories.html" title="XDG user directories">XDG user directories</a> exist.
</p>
<h4><span class="mw-headline" id="Cannot_receive_transferred_files_due_to_symlink">Cannot receive transferred files due to symlink</span></h4>
<p>If incoming file transfers fail on an an otherwise functional Bluetooth connection, the problem may be due to symlinks in your file transfer path.  Logs like this would appear in the journal:
</p>
<pre>Jun 18 11:18:13 ember obexd[3338969]: open(/home/me/.cache/obexd/MOC740): Operation not permitted (1)
</pre>
<p>If the path shown in the error message contains a symlink, then obexd by default <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/obexd/plugins/filesystem.c#n90">will not accept it</a>. The behavior can be overridden on initialization using a <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a> for the <code>obex.service</code> <a href="../en/Systemd/User.html" title="Systemd/User">user service</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/obex.service.d/10-symlink.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/lib/bluetooth/obexd --symlinks</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reload">reload</a> the <i>systemd</i> manager configuration of the calling user and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>obex.service</code> user unit.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://averylarsen.com/2019/12/20/keeping-bluetooth-devices-paired-between-linux-and-windows/">Keeping Bluetooth devices paired between Linux and Windows</a></li>
<li><a rel="nofollow" class="external text" href="https://nullroute.eu.org/~grawity/bluetooth-key-sharing.html">Bluetooth link keys on dual-boot systems</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Bluetooth.html" title="Category:Bluetooth">Bluetooth</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Bluetooth&amp;oldid=810223">https://wiki.archlinux.org/index.php?title=Bluetooth&amp;oldid=810223</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 9 June 2024, at 20:46.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
