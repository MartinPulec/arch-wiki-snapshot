<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Advanced Linux Sound Architecture/Troubleshooting - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Advanced_Linux_Sound_Architecture_Troubleshooting rootpage-Advanced_Linux_Sound_Architecture skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Volume" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Volume">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Volume</span>
			</div>
		</a>
		
			<button aria-controls="toc-Volume-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Volume subsection</span>
			</button>
		
		<ul id="toc-Volume-sublist" class="vector-toc-list">
			<li id="toc-Output_is_muted_after_reboot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Output_is_muted_after_reboot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Output is muted after reboot</span>
				</div>
			</a>
			
			<ul id="toc-Output_is_muted_after_reboot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Volume_is_too_low" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Volume_is_too_low">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Volume is too low</span>
				</div>
			</a>
			
			<ul id="toc-Volume_is_too_low-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Volume_is_still_too_low" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Volume_is_still_too_low">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Volume is still too low</span>
				</div>
			</a>
			
			<ul id="toc-Volume_is_still_too_low-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Random_lack_of_sound_on_startup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Random_lack_of_sound_on_startup">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Random lack of sound on startup</span>
				</div>
			</a>
			
			<ul id="toc-Random_lack_of_sound_on_startup-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Microphone" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Microphone">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Microphone</span>
			</div>
		</a>
		
			<button aria-controls="toc-Microphone-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Microphone subsection</span>
			</button>
		
		<ul id="toc-Microphone-sublist" class="vector-toc-list">
			<li id="toc-No_microphone_input" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_microphone_input">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>No microphone input</span>
				</div>
			</a>
			
			<ul id="toc-No_microphone_input-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Setting_the_default_microphone/capture_device" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_the_default_microphone/capture_device">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Setting the default microphone/capture device</span>
				</div>
			</a>
			
			<ul id="toc-Setting_the_default_microphone/capture_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Internal_microphone_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Internal_microphone_not_working">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Internal microphone not working</span>
				</div>
			</a>
			
			<ul id="toc-Internal_microphone_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Audio_quality" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Audio_quality">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Audio quality</span>
			</div>
		</a>
		
			<button aria-controls="toc-Audio_quality-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Audio quality subsection</span>
			</button>
		
		<ul id="toc-Audio_quality-sublist" class="vector-toc-list">
			<li id="toc-Crackling_sound_through_mini-jack_(headphones_connector)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Crackling_sound_through_mini-jack_(headphones_connector)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Crackling sound through mini-jack (headphones connector)</span>
				</div>
			</a>
			
			<ul id="toc-Crackling_sound_through_mini-jack_(headphones_connector)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Popping_sound_after_resuming_from_suspension" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Popping_sound_after_resuming_from_suspension">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Popping sound after resuming from suspension</span>
				</div>
			</a>
			
			<ul id="toc-Popping_sound_after_resuming_from_suspension-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sound_skipping_during_playback" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sound_skipping_during_playback">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Sound skipping during playback</span>
				</div>
			</a>
			
			<ul id="toc-Sound_skipping_during_playback-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Poor_sound_quality_or_clipping" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Poor_sound_quality_or_clipping">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Poor sound quality or clipping</span>
				</div>
			</a>
			
			<ul id="toc-Poor_sound_quality_or_clipping-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Pops_when_starting_and_stopping_playback" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pops_when_starting_and_stopping_playback">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Pops when starting and stopping playback</span>
				</div>
			</a>
			
			<ul id="toc-Pops_when_starting_and_stopping_playback-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Hardware_and_cards" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Hardware_and_cards">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Hardware and cards</span>
			</div>
		</a>
		
			<button aria-controls="toc-Hardware_and_cards-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Hardware and cards subsection</span>
			</button>
		
		<ul id="toc-Hardware_and_cards-sublist" class="vector-toc-list">
			<li id="toc-HD_Audio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#HD_Audio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>HD Audio</span>
				</div>
			</a>
			
			<ul id="toc-HD_Audio-sublist" class="vector-toc-list">
				<li id="toc-Power_saving" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Power_saving">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1</span>
					<span>Power saving</span>
				</div>
			</a>
			
			<ul id="toc-Power_saving-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Codec_probing" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Codec_probing">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.2</span>
					<span>Codec probing</span>
				</div>
			</a>
			
			<ul id="toc-Codec_probing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Wrong_model_autodetection" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Wrong_model_autodetection">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.3</span>
					<span>Wrong model autodetection</span>
				</div>
			</a>
			
			<ul id="toc-Wrong_model_autodetection-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Message_Signaled_Interrupts" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Message_Signaled_Interrupts">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.4</span>
					<span>Message Signaled Interrupts</span>
				</div>
			</a>
			
			<ul id="toc-Message_Signaled_Interrupts-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DMA_pointer" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#DMA_pointer">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.5</span>
					<span>DMA pointer</span>
				</div>
			</a>
			
			<ul id="toc-DMA_pointer-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fix_wrong_audio_pin_mapping" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Fix_wrong_audio_pin_mapping">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.6</span>
					<span>Fix wrong audio pin mapping</span>
				</div>
			</a>
			
			<ul id="toc-Fix_wrong_audio_pin_mapping-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Verifying_output_parameters" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Verifying_output_parameters">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Verifying output parameters</span>
				</div>
			</a>
			
			<ul id="toc-Verifying_output_parameters-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-S/PDIF_output_does_not_work" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#S/PDIF_output_does_not_work">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>S/PDIF output does not work</span>
				</div>
			</a>
			
			<ul id="toc-S/PDIF_output_does_not_work-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-HDMI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#HDMI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>HDMI</span>
				</div>
			</a>
			
			<ul id="toc-HDMI-sublist" class="vector-toc-list">
				<li id="toc-HDMI_output_does_not_work" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#HDMI_output_does_not_work">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.1</span>
					<span>HDMI output does not work</span>
				</div>
			</a>
			
			<ul id="toc-HDMI_output_does_not_work-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-HDMI_5.1_sound_goes_to_wrong_speakers" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#HDMI_5.1_sound_goes_to_wrong_speakers">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.2</span>
					<span>HDMI 5.1 sound goes to wrong speakers</span>
				</div>
			</a>
			
			<ul id="toc-HDMI_5.1_sound_goes_to_wrong_speakers-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Applications" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Applications">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Applications</span>
			</div>
		</a>
		
			<button aria-controls="toc-Applications-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Applications subsection</span>
			</button>
		
		<ul id="toc-Applications-sublist" class="vector-toc-list">
			<li id="toc-SDL:_No_sound_with_SDL_applications" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SDL:_No_sound_with_SDL_applications">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>SDL: No sound with SDL applications</span>
				</div>
			</a>
			
			<ul id="toc-SDL:_No_sound_with_SDL_applications-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OpenAL:_No_sound_in_applications_that_use_OpenAL" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OpenAL:_No_sound_in_applications_that_use_OpenAL">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>OpenAL: No sound in applications that use OpenAL</span>
				</div>
			</a>
			
			<ul id="toc-OpenAL:_No_sound_in_applications_that_use_OpenAL-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Others:_Generic_application_problems" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Others:_Generic_application_problems">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Others: Generic application problems</span>
				</div>
			</a>
			
			<ul id="toc-Others:_Generic_application_problems-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Other_issues" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Other_issues">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Other issues</span>
			</div>
		</a>
		
			<button aria-controls="toc-Other_issues-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Other issues subsection</span>
			</button>
		
		<ul id="toc-Other_issues-sublist" class="vector-toc-list">
			<li id="toc-Simultaneous_playback_problems" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Simultaneous_playback_problems">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>Simultaneous playback problems</span>
				</div>
			</a>
			
			<ul id="toc-Simultaneous_playback_problems-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Removing_old_ALSA_state_file_(asound.state)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Removing_old_ALSA_state_file_(asound.state)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>Removing old ALSA state file (asound.state)</span>
				</div>
			</a>
			
			<ul id="toc-Removing_old_ALSA_state_file_(asound.state)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problems_with_availability_to_only_one_user_at_a_time" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problems_with_availability_to_only_one_user_at_a_time">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3</span>
					<span>Problems with availability to only one user at a time</span>
				</div>
			</a>
			
			<ul id="toc-Problems_with_availability_to_only_one_user_at_a_time-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Crackling/popping_on_Dell_laptops" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Crackling/popping_on_Dell_laptops">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4</span>
					<span>Crackling/popping on Dell laptops</span>
				</div>
			</a>
			
			<ul id="toc-Crackling/popping_on_Dell_laptops-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Advanced Linux Sound Architecture/Troubleshooting</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Advanced_Linux_Sound_Architecture/%E3%83%88%E3%83%A9%E3%83%96%E3%83%AB%E3%82%B7%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0" title="Advanced Linux Sound Architecture/トラブルシューティング – 日本語" lang="ja" hreflang="ja" data-title="Advanced Linux Sound Architecture/トラブルシューティング" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Advanced_Linux_Sound_Architecture/Troubleshooting" title="Advanced Linux Sound Architecture/Troubleshooting – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Advanced Linux Sound Architecture/Troubleshooting" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <bdi dir="ltr"><a href="../../en/Advanced_Linux_Sound_Architecture.html" title="Advanced Linux Sound Architecture">Advanced Linux Sound Architecture</a></bdi>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> package contains the <a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/notes.html#alsa-info">alsa-info.sh</a> script, which can be used to gather detailed data on the ALSA state.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Run <code>alsa-info.sh</code> with <a href="../../en/Users_and_groups.html#Overview" class="mw-redirect" title="Root user">root user</a> privileges and share its output if you ask for help.</div>
<p>See also <a rel="nofollow" class="external text" href="https://www.alsa-project.org/main/index.php/SoundcardTesting">SoundcardTesting</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Volume">Volume</span></h2>
<h3><span class="mw-headline" id="Output_is_muted_after_reboot">Output is muted after reboot</span></h3>
<p>Run the following command:
</p>
<pre># alsactl restore
</pre>
<p>If the problem persists, verify that the <code>Auto-Mute</code> option in <i>alsamixer</i> is set to <code>Disabled</code>.
</p>
<h3><span class="mw-headline" id="Volume_is_too_low">Volume is too low</span></h3>
<p>Run <i>alsamixer</i> and try to increase the value of the sliders, unmuting channels if necessary. Note that if you have many sliders, you may have to scroll to the right to see any missing sliders.
</p>
<p>If all the sliders are maxed out, and the volume is still too low, you can try running the following script to reset your codec settings:
</p>
<pre>$ wget -O hda-analyzer.py <a rel="nofollow" class="external free" href="https://git.alsa-project.org/?p=alsa.git;a=blob_plain;f=hda-analyzer/run.py">https://git.alsa-project.org/?p=alsa.git;a=blob_plain;f=hda-analyzer/run.py</a>
</pre>
<p>Close the analyzer, and when prompted as to whether you want to reset the codecs, say "yes".
</p>
<p>If the volume is still too low, run <i>alsamixer</i> again: resetting the codecs may have caused new sliders to become enabled and some of them may be set to a low value.
</p>
<h3><span class="mw-headline" id="Volume_is_still_too_low">Volume is still too low</span></h3>
<p>If you are facing low volume even after maxing out your speakers/headphones, you can give the softvol plugin a try. Add the following to <code>/etc/asound.conf</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/asound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcm.!default {
    type plug
    slave.pcm "softvol"
}

pcm.softvol {
    type softvol
    slave {
        pcm "dmix"
    }
    control {
        name "Pre-Amp"
        card 0
    }
    min_dB -5.0
    max_dB 20.0
    resolution 6
}</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You will probably have to restart the computer, as restarting the alsa daemon did not load the new configuration. Also, if the configuration does not work even after restarting, try changing <code>plug</code> with <code>hw</code> in the above configuration.</div>
<p>After the changes are loaded successfully, you will see a <code>Pre-Amp</code> section in alsamixer. You can adjust the levels there.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Setting a high value for <code>Pre-Amp</code> can cause sound distortion, so adjust it according to the level that suits you.</li>
<li>Some audio codecs may need to have settings adjusted in the HDA Analyzer (see <a href="#Volume_is_too_low">#Volume is too low</a>) in order to achieve proper volume without distortion. Checking the HP option under widget control in the Playback Switch (Node[0x14] PIN in the ALC892 codec, for instance) can sometimes improve audio quality and volume significantly.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Random_lack_of_sound_on_startup">Random lack of sound on startup</span></h3>
<p>You can quickly test sound by running <code>speaker-test</code>. If there is no sound, you may see something similar to:
</p>
<pre>ALSA lib pcm_dmix.c:1022:(snd_pcm_dmix_open) unable to open slave
Playback open error: -16
Device or resource busy
</pre>
<p>If you have no sound on startup, this may be because your system has multiple sound cards, and their order may sometimes change on startup.  If this is the case, try <a href="../../en/Advanced_Linux_Sound_Architecture.html#Set_the_default_sound_card" class="mw-redirect" title="ALSA">setting the default sound card</a>.
</p>
<p>If you use <a href="../../en/Music_Player_Daemon.html" class="mw-redirect" title="MPD">MPD</a> and the above configuration tips do not work, try following <a rel="nofollow" class="external free" href="https://mpd.wikia.com/wiki/Configuration#ALSA_MPD_software_volume_control">https://mpd.wikia.com/wiki/Configuration#ALSA_MPD_software_volume_control</a>.
</p>
<h2><span class="mw-headline" id="Microphone">Microphone</span></h2>
<h3><span class="mw-headline" id="No_microphone_input">No microphone input</span></h3>
<p>In alsamixer, make sure that all the volume levels are up under recording, and that CAPTURE is toggled active on the microphone (e.g. Mic, Internal Mic) and/or on Capture (in alsamixer, select these items and press space). Try making positive Mic Boost and raising Capture and Digital levels higher; this may make static or distortion, but then you can adjust them back down once you are hearing <i>something</i> when you record.
</p>
<p>As the pulseaudio wrapper is shown as "default" in alsamixer, you may have to press F6 to select your actual sound card first. You may also need to enable and increase the volume of Line-in in the Playback section.
</p>
<p>To test the microphone, run these commands (see <span class="plainlinks archwiki-template-man" title="$ man 1 arecord"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/arecord.1">arecord(1)</a></span> for further information):
</p>
<pre>$ arecord --duration=5 --format=dat test-mic.wav
$ aplay test-mic.wav
</pre>
<p>Alternatively, you can run this command:
</p>
<pre>$ arecord -vv --format=dat /dev/null
</pre>
<p>alongside alsamixer to easily identify channel which you should select and unmute.
</p>
<p>To test a particular device, use the <code>--device</code> parameter followed by the hardware PCM name in the form <code>hw:<i>C</i>,<i>D</i></code> for card <i>C</i> device <i>D</i>, or <code>plughw:<i>C</i>,<i>D</i></code> for plugged hardware. For instance:
</p>
<pre>$ arecord -vvv --format=dat --device=plughw:0,0 /dev/null
</pre>
<p>If all fails, you may want to eliminate hardware failure by testing the microphone with a different device.
</p>
<p>For at least some computers, muting a microphone (MM) simply means its input does not go immediately to the speakers. It still receives input.
</p>
<p>Some programs use try to use OSS as the main input software. If you have enabled the <code>snd_pcm_oss</code>, <code>snd_mixer_oss</code> or <code>snd_seq_oss</code> <a href="../../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">kernel modules</a> previously (they are not loaded by default), try unloading them.
</p>
<p>See also:
</p>
<ul>
<li><a href="#Wrong_model_autodetection">#Wrong model autodetection</a></li>
<li><a rel="nofollow" class="external text" href="https://alsa.opensrc.org/Record_from_mic">Record from mic</a></li>
</ul>
<h3>
<span id="Setting_the_default_microphone.2Fcapture_device"></span><span class="mw-headline" id="Setting_the_default_microphone/capture_device">Setting the default microphone/capture device</span>
</h3>
<p>Some applications (Pidgin, Adobe Flash) do not provide an option to change the capture device. It becomes a problem if your microphone is on a separate device (e.g. USB webcam or microphone) than your internal sound card. To change only the default capture device, leaving the default playback device as is, you can modify your <code>~/.asoundrc</code> file to include the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.asoundrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcm.usb
{
    type hw
    card <i>U0x46d0x81d</i>
}

pcm.!default
{
    type asym
    playback.pcm
    {
        type plug
        slave.pcm "dmix"
    }
    capture.pcm
    {
        type plug
        slave.pcm "usb"
    }
}
</pre>
<p>Replace <i>U0x46d0x81d</i> with your capture device's card name in ALSA. You can use <code>arecord -L</code> to list all the capture devices detected by ALSA.
</p>
<h3><span class="mw-headline" id="Internal_microphone_not_working">Internal microphone not working</span></h3>
<p>First make sure the volume is enabled under the <code>Capture</code> view in <i>alsamixer</i>. In some cases, the "Internal Microphone" is not displayed in the capture list available when pressing F4. If so, specifying the card number given by <code>aplay -l</code> to start <i>alsamixer</i> (for example <code>alsamixer -c 0</code> ) can make it appear. 
</p>
<h2><span class="mw-headline" id="Audio_quality">Audio quality</span></h2>
<h3>
<span id="Crackling_sound_through_mini-jack_.28headphones_connector.29"></span><span class="mw-headline" id="Crackling_sound_through_mini-jack_(headphones_connector)">Crackling sound through mini-jack (headphones connector)</span>
</h3>
<p>Following <a href="../../en/Advanced_Linux_Sound_Architecture.html#Simultaneous_output" title="Advanced Linux Sound Architecture">Advanced Linux Sound Architecture#Simultaneous output</a> might lead to crackling sound through headphones or external speakers. This can be fixed by muting <b>or</b> setting the volume to 0% on <i>Mic</i>. Use <code>alsamixer</code> or <code>amixer</code>:
</p>
<pre>$ amixer sset "Mic" 0%
$ amixer sset "Mic" mute
</pre>
<h3><span class="mw-headline" id="Popping_sound_after_resuming_from_suspension">Popping sound after resuming from suspension</span></h3>
<p>You might hear a popping sound after resuming the computer from suspension. This can be fixed by editing <code>/etc/pm/sleep.d/90alsa</code> and removing the line that says <code>aplay -d 1 /dev/zero</code>
</p>
<h3><span class="mw-headline" id="Sound_skipping_during_playback">Sound skipping during playback</span></h3>
<p>Run <i>alsamixer</i>, and if channels exist for nonexistent output devices then disable them (e.g. <i>alsamixer</i> showing a center speaker but you not having one).
</p>
<h3><span class="mw-headline" id="Poor_sound_quality_or_clipping">Poor sound quality or clipping</span></h3>
<p>If you experience poor sound quality, try setting the PCM volume (in <i>alsamixer</i>) to a level such that gain is 0.
</p>
<p>If <code>snd_usb_audio</code> driver has been loaded, you could try to enable <code>softvol</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/asound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcm.!default {
    type plug
    slave.pcm "softvol"
}
pcm.dmixer {
    type dmix
    ipc_key 1024
    slave {
        pcm "hw:0"
        period_size 4096
        buffer_size 131072
        rate 50000
    }
    bindings {
        0 0
        1 1
    }
}
pcm.dsnooper {
    type dsnoop
    ipc_key 1024
    slave {
        pcm "hw:0"
        channels 2
        period_size 4096
        buffer_size 131072
        rate 50000
    }
    bindings {
        0 0
        1 1
        }
}
pcm.softvol {
  type softvol
  slave { pcm "dmixer" }
  control {
    name "Master"
    card 0
  }
}
ctl.!default {
  type hw
  card 0
}
ctl.softvol {
  type hw
  card 0
}
ctl.dmixer {
  type hw
  card 0
}</pre>
<h3><span class="mw-headline" id="Pops_when_starting_and_stopping_playback">Pops when starting and stopping playback</span></h3>
<p>Some modules (e.g. <code>snd_hda_intel</code>) can power off your sound card when it is not used. This might cause audible click noises—like a crack/pop/scratch—at each power-down/up depending on the device (sometimes even when moving the volume slider or opening and closing windows on some desktop environments).
</p>
<p>For more information, see <a href="../../en/Power_management.html#Audio" title="Power management">Power management#Audio</a> and <a href="#Power_saving">#Power saving</a>.
</p>
<h2><span class="mw-headline" id="Hardware_and_cards">Hardware and cards</span></h2>
<h3><span class="mw-headline" id="HD_Audio">HD Audio</span></h3>
<p>For more information, see <a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/alsa-configuration.html#module-snd-hda-intel">Module snd-hda-intel</a> and the output of <code>modinfo --field=parm snd_hda_intel | column --separator=':' --table</code>.
</p>
<p>See also <a href="../../en/Advanced_Linux_Sound_Architecture.html#Driver_configuration" title="Advanced Linux Sound Architecture">Advanced Linux Sound Architecture#Driver configuration</a>.
</p>
<h4><span class="mw-headline" id="Power_saving">Power saving</span></h4>
<p><a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/notes.html#power-saving">Power saving</a> is enabled by default and might cause the following issues:
</p>
<ul>
<li><a href="#Pops_when_starting_and_stopping_playback">#Pops when starting and stopping playback</a></li>
<li><a href="../../en/PC_speaker.html#The_HD_Audio_power-saving_mode_mutes_the_PC_speaker" title="PC speaker">PC speaker#The HD Audio power-saving mode mutes the PC speaker</a></li>
<li><a href="../../en/VirtualBox/Install_Arch_Linux_as_a_guest.html#Linux_guests_have_slow/laggy_audio" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest#Linux guests have slow/laggy audio</a></li>
</ul>
<p>To completely disable the power-saving mode for the <code>snd_hda_intel</code> module, use the following <a href="../../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel module parameter">kernel module parameters</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/alsa-base.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd_hda_intel power_save=0 power_save_controller=N</pre>
<h4><span class="mw-headline" id="Codec_probing">Codec probing</span></h4>
<p>A <a href="https://en.wikipedia.org/wiki/Codec" class="extiw" title="wikipedia:Codec">codec</a> is a hardware component of an HD Audio sound card. One card might incorporate more than one codec, one codec might correspond to more than one ALSA device.
</p>
<p>A <i>codec slot</i> is a number (it begins from zero) identifying the codec on a given sound card. You can get the codec slot number from <code>/proc/asound/card<i><b>i</b></i>/codec#<i><b>s</b></i></code> file and <code>/sys/class/sound/hwC<i><b>i</b></i>D<i><b>s</b></i>/</code> directory names—here <code><i>i</i></code> is a card index, and <code><i>s</i></code> is a codec slot.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Do not confuse HD Audio card <i>codec slot</i> with <a href="../../en/Open_Sound_System.html" class="mw-redirect" title="OSS">OSS</a> <i>slot number</i>, which corresponds to the ALSA <a href="../../en/Advanced_Linux_Sound_Architecture.html#Card_index" title="Advanced Linux Sound Architecture">card index</a>.</div>
<p>To disable a codec—and subsequently all of the related ALSA devices—<a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/notes.html#codec-probing-problem">use</a> the <code>probe_mask</code> option of the <code>snd_hda_intel</code> module.
</p>
<h4><span class="mw-headline" id="Wrong_model_autodetection">Wrong model autodetection</span></h4>
<p>Wrong model autodetection might cause the following issues:
</p>
<ul>
<li><a href="#No_microphone_input">#No microphone input</a></li>
<li>Microphone is not detected if it is plugged in a combined headset/microphone 4-pole 3.5 mm <a href="https://en.wikipedia.org/wiki/Phone_connector_(audio)#TRRS" class="extiw" title="wikipedia:Phone connector (audio)">TRRS</a> jack</li>
</ul>
<dl><dd><div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If your chip is <a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/models.html#alc22x-23x-25x-269-27x-28x-29x-and-vendor-specific-alc3xxx-models">ALC22x/23x/25x/269/27x/28x/29x</a> or <a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/models.html#alc66x-67x-892">ALC66x/67x/892</a>, then try <code>dell-headset-multi</code>, even if the hardware is not from Dell.</div></dd></dl>
<ul><li>No headphone output</li></ul>
<p>See <a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/models.html">HD-Audio Codec-Specific Models</a> for possible <code>model</code> strings for a given sound card chip.
</p>
<p>The sound card chip can be found in:
</p>
<ul>
<li>
<i>alsamixer</i>—see <i>Chip:</i> in the upper-left corner,</li>
<li>output of <code>grep 'Codec:' /proc/asound/card*/codec#*</code>,</li>
<li>output of <code>grep . /sys/class/sound/hwC?D?/chip_name</code>,</li>
<li>
<code>/proc/asound/pcm</code> file.</li>
</ul>
<p>To force, use the <code>model</code> option of the <code>snd_hda_intel</code> module.
</p>
<h4><span class="mw-headline" id="Message_Signaled_Interrupts">Message Signaled Interrupts</span></h4>
<p>Whether <a href="https://en.wikipedia.org/wiki/Message_Signaled_Interrupts" class="extiw" title="wikipedia:Message Signaled Interrupts">Message Signaled Interrupts</a> (MSI) should be enabled or not <a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/notes.html#interrupt-handling">hardly depends</a> on the hardware. In the case of wrong autodetection different kinds of bad things could happen:
</p>
<ul>
<li>erroneous disablement might lead to the sound card is not detected;</li>
<li>erroneous enablement might lead to poor audio quality (stuttering), or even kernel lockup.</li>
</ul>
<p>To check the MSI capability status, run <code>lspci -vv -nn -d ::0403</code> with <a href="../../en/Users_and_groups.html#Overview" class="mw-redirect" title="Root user">root user</a> privileges.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <code>::0403</code> here means 
<a rel="nofollow" class="external text" href="https://admin.pci-ids.ucw.cz/read/PD/04/03">Audio device</a> subclass of the <i>Multimedia controller</i> PCI device class.</div>
<p>MSI on HD Audio cards are controlled by the <code>enable_msi</code> option of the <code>snd_hda_intel</code> module.
</p>
<h4><span class="mw-headline" id="DMA_pointer">DMA pointer</span></h4>
<p>Click noises (crackling, popping) on input and/or output of an HD Audio card might be caused by <a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/notes.html#dma-position-problem">DMA position problem</a>. Try to change the <code>position_fix</code> option of the <code>snd_hda_intel</code> module.
</p>
<h4><span class="mw-headline" id="Fix_wrong_audio_pin_mapping">Fix wrong audio pin mapping</span></h4>
<p>If the mappings to your audio pins(plugs) do not correspond but ALSA works fine, you could try HDA Analyzer -- a pyGTK2 GUI for HD-audio control can be found <a rel="nofollow" class="external text" href="https://www.alsa-project.org/main/index.php/HDA_Analyzer">at the ALSA wiki</a>.
Try tweaking the Widget Control section of the PIN nodes, to make microphones IN and headphone jacks OUT. Referring to the Config Defaults heading is a good idea.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The script is incompatible with Python 3, which is the default Python implementation on Arch Linux. In order to use the script, replace all occurrences of <code>python</code> in the <code>run.py</code> file with <code>python2</code> to point the script to the Python 2 version. Then make the script <a href="../../en/File_permissions_and_attributes.html#Changing_permissions" class="mw-redirect" title="Chmod">executable</a> and run it.</div>
<h3><span class="mw-headline" id="Verifying_output_parameters">Verifying output parameters</span></h3>
<p>Check the contents of <code>/proc/asound/cardX/pcmYp/subZ/hw_params</code>, where <code>X</code>, <code>Y</code>, and <code>Z</code> are system dependent.
In order to find this file, execute the following command while outputting anything via ALSA:
</p>
<pre>$ find /proc/asound/ -name hw_params | xargs -I FILE grep -v -l "closed" FILE | grep '/proc/asound/card./pcm.p/sub./hw_params'
</pre>
<p>If nothing is playing there should be no results.
</p>
<p>Here is an example output for audio with a <a href="https://en.wikipedia.org/wiki/Audio_bit_depth" class="extiw" title="wikipedia:Audio bit depth">bit depth</a> of 24 bits and a <a href="https://en.wikipedia.org/wiki/Sampling_frequency" class="extiw" title="wikipedia:Sampling frequency">sampling frequency</a> of 44.1 kilohertz:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /proc/asound/card1/pcm0p/sub0/hw_params</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">access: RW_INTERLEAVED
format: S24_3LE
subformat: STD
channels: 2
rate: 44100 (44100/1)
period_size: 5513
buffer_size: 22050
</pre>
<p>More info is available in the <a rel="nofollow" class="external text" href="https://alsa.opensrc.org/Proc_asound_documentation">ALSA documentation</a>.
</p>
<h3>
<span id="S.2FPDIF_output_does_not_work"></span><span class="mw-headline" id="S/PDIF_output_does_not_work">S/PDIF output does not work</span>
</h3>
<p><a href="https://en.wikipedia.org/wiki/S/PDIF" class="extiw" title="wikipedia:S/PDIF">S/PDIF</a> (IEC958) utilizes two modes:
</p>
<ul><li>
<i>Audio</i> mode is digital PCM signal, so the receiver just converts the data with <a href="https://en.wikipedia.org/wiki/Digital-to-analog_converter" class="extiw" title="wikipedia:Digital-to-analog converter">digital-to-analog converter</a> (DAC).</li></ul>
<ul><li>
<i>Non-audio</i> mode is an encoded bitstream, so the receiver must decode the data first, and put it to DAC then. <a href="https://en.wikipedia.org/wiki/Dolby_Digital" class="extiw" title="wikipedia:Dolby Digital">Dolby Digital</a> and <a href="https://en.wikipedia.org/wiki/DTS_Digital_Surround" class="extiw" title="wikipedia:DTS Digital Surround">DTS Digital Surround</a> are examples of encoded bitstream formats.</li></ul>
<p>ALSA should detect appropriate mode automatically, but if it fails, you can force the mode with <span class="plainlinks archwiki-template-man" title="$ man 1 iecset"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/iecset.1">iecset(1)</a></span> (<code>on</code>—<i>audio</i>, <code>off</code>—<i>non-audio</i>):
</p>
<pre># iecset audio on
# iecset audio off
</pre>
<p>For more information, see <a rel="nofollow" class="external text" href="https://alsa.opensrc.org/DigitalOut">DigitalOut</a>.
</p>
<h3><span class="mw-headline" id="HDMI">HDMI</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a>.</b></p>
<div>
<b>Notes:</b> This section has almost nothing related to HDMI per se: it is sorta TL;DR for the main article (list devices, test sound, set the default device; remap). (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:Advanced_Linux_Sound_Architecture/Troubleshooting.html">Talk:Advanced Linux Sound Architecture/Troubleshooting</a>)</div>
</div>
<h4><span class="mw-headline" id="HDMI_output_does_not_work">HDMI output does not work</span></h4>
<p>The procedure described below can be used to test HDMI audio. Before proceeding, make sure you have enabled and unmuted the output with <code>alsamixer</code>.
</p>
<p>Connect your PC to the Display via HDMI cable and enable the display with <a href="../../en/Xrandr.html" title="Xrandr">xrandr</a>.
</p>
<p>Use <code>aplay -l</code> to discover the card and device number. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ aplay -l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">**** List of PLAYBACK Hardware Devices ****
card 0: SB [HDA ATI SB], device 0: ALC892 Analog [ALC892 Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: SB [HDA ATI SB], device 1: ALC892 Digital [ALC892 Digital]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
<b>card 1</b>: Generic [HD-Audio Generic], <b>device 3</b>: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0</pre>
<p>Send sound to the device. Following the example in the previous step, you would send sound to <code><b>card 1</b></code>, <code><b>device 3</b></code>:
</p>
<pre>$ aplay -D plughw:1,3 /usr/share/sounds/alsa/Front_Center.wav
</pre>
<p>If aplay does not output any errors, but still no sound is heard, "reboot" the receiver, monitor or tv set. Since the HDMI interface executes a handshake on connection, it might have noticed before that there was no audio stream embedded, and disabled audio decoding. If you are using a standalone window manager, you may need to have sound playing while plugging in the HDMI cable.
</p>
<p>mplay and other application could be configured to use special HDMI device as audio output. But flashplugin could only use default device. The following method is used to override default device. But you need to change it back when your TV is disconnected from HDMI port.
</p>
<p>If the test is successful, create or edit your <code>~/.asoundrc</code> file to set HDMI as the default audio device.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.asoundrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcm.!default {
    type hw
    card 1
    device 3
}
</pre>
<p>Or if the above configuration does not work try:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.asoundrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">defaults.pcm.card 1
defaults.pcm.device 3
defaults.ctl.card 1
</pre>
<p>Or if you alternatively succeed with
</p>
<pre>$ speaker-test -Dplug:hdmi
</pre>
<p>for your HDMI or DisplayPort port the following configuration will work (successfully tested on Lenovo ThinkPad T430s):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.asoundrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcm.!default {
    type plug
    slave.pcm "hdmi"
}
</pre>
<h4><span class="mw-headline" id="HDMI_5.1_sound_goes_to_wrong_speakers">HDMI 5.1 sound goes to wrong speakers</span></h4>
<p>Sound can be redirected to the intended speakers using ALSA's <code>remap</code> function.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/asound.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pcm.!hdmi-remap {
    type asym
    playback.pcm {
        type plug
        slave.pcm "remap-surround51"
    }
}

pcm.!remap-surround51 {
    type route
    slave.pcm "hw:0,3"
    ttable {
        0.0= 1
        1.1= 1
        2.4= 1
        3.5= 1
        4.2= 1
        5.3= 1
    }
}</pre>
<h2><span class="mw-headline" id="Applications">Applications</span></h2>
<h3><span class="mw-headline" id="SDL:_No_sound_with_SDL_applications">SDL: No sound with SDL applications</span></h3>
<p>If you get no sound using SDL based applications, try setting the <a href="../../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> <code>SDL_AUDIODRIVER</code> to <code>alsa</code>.
</p>
<h3><span class="mw-headline" id="OpenAL:_No_sound_in_applications_that_use_OpenAL">OpenAL: No sound in applications that use OpenAL</span></h3>
<p>OpenAL defaults to PulseAudio. To instruct it to try ALSA first:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/openal/alsoft.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">drivers=alsa,pulse</pre>
<h3><span class="mw-headline" id="Others:_Generic_application_problems">Others: Generic application problems</span></h3>
<p>For other applications who insist on their own audio setup, e.g., XMMS or MPlayer, you would need to set their specific options.
</p>
<p>For <a href="../../en/MPlayer.html" title="MPlayer">MPlayer</a> or <a href="../../en/Mpv.html" title="Mpv">mpv</a>, add the following line to the respective configuration file:
</p>
<pre>ao=alsa
</pre>
<p>Eg. for XMMS2, go into their options and make sure the sound driver is set to ALSA, not oss.
</p>
<p>To do this in XMMS:
</p>
<ul><li>Open XMMS
<ul>
<li>Options &gt; Preferences.</li>
<li>Choose the ALSA output plugin.</li>
</ul>
</li></ul>
<p>For applications which do not provide a ALSA output, you can use aoss from the alsa-oss package. To use aoss, when you run the program, prefix it with <code>aoss</code>, e.g.:
</p>
<pre>aoss realplay
</pre>
<p>pcm.!default{ ... }  doesnt work for me anymore. but this does:
</p>
<pre>pcm.default pcm.dmixer
</pre>
<h2><span class="mw-headline" id="Other_issues">Other issues</span></h2>
<h3><span class="mw-headline" id="Simultaneous_playback_problems">Simultaneous playback problems</span></h3>
<p>If you are having problems with simultaneous playback, and if <a href="../../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> is installed, its default configuration is set to "hijack" the soundcard. Some users of ALSA may not want to use <a href="../../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> and are quite content with their current ALSA settings. One fix is to edit <code>/etc/asound.conf</code> and comment out the following lines:
</p>
<pre># Use PulseAudio by default
pcm.!default {
    type pulse
    fallback "sysdefault"
    hint {
        show on
        description "Default ALSA Output (currently PulseAudio Sound Server)"
    }
}</pre>
<p>Commenting the following out also may help:
</p>
<pre>ctl.!default {
    type pulse
    fallback "sysdefault"
}</pre>
<p>This may be a much simpler solution than completely uninstalling <a href="../../en/PulseAudio.html" title="PulseAudio">PulseAudio</a>.
</p>
<p>Effectively, here is an example of a working <code>/etc/asound.conf</code>:
</p>
<pre>pcm.dmixer {
    type dmix
    ipc_key 1024
    ipc_key_add_uid 0
    ipc_perm 0660
}
pcm.dsp {
    type plug
    slave.pcm "dmix"
}</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This <code>/etc/asound.conf</code> file was intended for and used successfully with a global <a href="../../en/Music_Player_Daemon.html" class="mw-redirect" title="MPD">MPD</a> configuration. See <a href="#Problems_with_availability_to_only_one_user_at_a_time">#Problems with availability to only one user at a time</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Alternatively, if you do <b>not</b> have PulseAudio installed, and just want to get <code>dmix</code> to work with vanilla ALSA, see the <a rel="nofollow" class="external text" href="https://www.alsa-project.org/main/index.php/Asoundrc#dmix">upstream documentation</a>. In particular, you probably want to replace <code>dsp</code> in the above config with <code>!default</code>. Also, if you notice this causes certain applications to skip while playing (i.e. sound "glitchy"), and complain about underrun occurring, you may want to tweak the <code>slave.buffer_size</code> inside <code>pcm.dmixer</code>.</div>
<h3>
<span id="Removing_old_ALSA_state_file_.28asound.state.29"></span><span class="mw-headline" id="Removing_old_ALSA_state_file_(asound.state)">Removing old ALSA state file (asound.state)</span>
</h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> package provides <code>alsa-store.service</code> which automatically stores the current ALSA state to <code>/var/lib/alsa/asound.state</code> upon system shutdown.  This can be problematic for users who are trying to reset their current ALSA state as the <code>asound.state</code> file will be recreated with the current state upon every shutdown (e.g., attempting to remove user-defined channels from the mixer).  The <code>alsa-store.service</code> service may be temporarily disabled by creating the following empty file:
</p>
<pre># mkdir -p /etc/alsa
# touch /etc/alsa/state-daemon.conf
</pre>
<p>The presence of <code>state-daemon.conf</code> prevents <code>alsa-store.service</code> from saving <code>asound.state</code> during shutdown. After disabling this service, the <code>asound.state</code> file may be removed as such:
</p>
<pre># rm /var/lib/alsa/asound.state
</pre>
<p>After rebooting, the previous ALSA state should be lost and the current state should be reset to defaults.  Re-enable <code>alsa-store.service</code> by deleting the condition file we created:
</p>
<pre># rm /etc/alsa/state-daemon.conf
</pre>
<p>On the next shutdown, the <code>asound.state</code> file should be recreated with ALSA defaults.  The file may also be generated immediately using:
</p>
<pre># alsactl store
</pre>
<p>If you want to clean ALSA state without rebooting, you can use <code>rmmod</code> to remove the sound driver module, then manually delete the unwanted entries in <code>asound.state</code>, and then use <code>modprobe</code> to reinstall the sound driver module.
</p>
<h3><span class="mw-headline" id="Problems_with_availability_to_only_one_user_at_a_time">Problems with availability to only one user at a time</span></h3>
<p>You might find that only one user can use the dmixer at a time.  This is probably ok for most, but for those who run <a href="../../en/Music_Player_Daemon.html" class="mw-redirect" title="Mpd">mpd</a> as a separate user this poses a problem.  When mpd is playing a normal user cannot play sounds though the dmixer.  While it is quite possible to just run mpd under a user's login account, another solution has been found.  Adding the line <code>ipc_key_add_uid 0</code> to the <code>pcm.dmixer</code> block disables this locking.  The following is a snippet from <code>asound.conf</code>, the rest is the same as above.
</p>
<pre>...
pcm.dmixer {
    type dmix
    ipc_key 1024
    ipc_key_add_uid 0
    ipc_perm 0660
slave {
 ...</pre>
<h3>
<span id="Crackling.2Fpopping_on_Dell_laptops"></span><span class="mw-headline" id="Crackling/popping_on_Dell_laptops">Crackling/popping on Dell laptops</span>
</h3>
<p>Check if you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/i8kutils/">i8kutils</a></span><sup><small>AUR</small></sup> installed and if anything (e.g. <code>i8kmon.service</code>) is reading or writing to the interface exposed by the module, as i8kutils BIOS system calls block the kernel for a moment on some systems. See warning in <a href="../../en/Fan_speed_control.html#Dell_laptops" title="Fan speed control">Fan speed control#Dell laptops</a> for more details.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../en/Category:Sound.html" title="Category:Sound">Sound</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Advanced_Linux_Sound_Architecture/Troubleshooting&amp;oldid=823821">https://wiki.archlinux.org/index.php?title=Advanced_Linux_Sound_Architecture/Troubleshooting&amp;oldid=823821</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 December 2024, at 19:39.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
