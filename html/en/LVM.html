<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>LVM - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-LVM rootpage-LVM skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Background" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Background">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Background</div>
		</a>
		
			<button aria-controls="toc-Background-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Background subsection</span>
			</button>
		
		<ul id="toc-Background-sublist" class="vector-toc-list">
			<li id="toc-LVM_building_blocks" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#LVM_building_blocks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>LVM building blocks</div>
			</a>
			
			<ul id="toc-LVM_building_blocks-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Advantages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Advantages">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Advantages</div>
			</a>
			
			<ul id="toc-Advantages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disadvantages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disadvantages">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Disadvantages</div>
			</a>
			
			<ul id="toc-Disadvantages-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Volume_operations" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Volume_operations">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Volume operations</div>
		</a>
		
			<button aria-controls="toc-Volume_operations-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Volume operations subsection</span>
			</button>
		
		<ul id="toc-Volume_operations-sublist" class="vector-toc-list">
			<li id="toc-Physical_volumes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Physical_volumes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Physical volumes</div>
			</a>
			
			<ul id="toc-Physical_volumes-sublist" class="vector-toc-list">
				<li id="toc-Creating" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Creating">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.1</span>Creating</div>
			</a>
			
			<ul id="toc-Creating-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Growing" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Growing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.2</span>Growing</div>
			</a>
			
			<ul id="toc-Growing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Shrinking" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Shrinking">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.3</span>Shrinking</div>
			</a>
			
			<ul id="toc-Shrinking-sublist" class="vector-toc-list">
				<li id="toc-Move_physical_extents" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Move_physical_extents">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.3.1</span>Move physical extents</div>
			</a>
			
			<ul id="toc-Move_physical_extents-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Resize_physical_volume" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Resize_physical_volume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.3.2</span>Resize physical volume</div>
			</a>
			
			<ul id="toc-Resize_physical_volume-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Resize_partition" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Resize_partition">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.3.3</span>Resize partition</div>
			</a>
			
			<ul id="toc-Resize_partition-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Volume_groups" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Volume_groups">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Volume groups</div>
			</a>
			
			<ul id="toc-Volume_groups-sublist" class="vector-toc-list">
				<li id="toc-Creating_a_volume_group" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Creating_a_volume_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.1</span>Creating a volume group</div>
			</a>
			
			<ul id="toc-Creating_a_volume_group-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Activating_a_volume_group" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Activating_a_volume_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.2</span>Activating a volume group</div>
			</a>
			
			<ul id="toc-Activating_a_volume_group-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Repairing_a_volume_group" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Repairing_a_volume_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.3</span>Repairing a volume group</div>
			</a>
			
			<ul id="toc-Repairing_a_volume_group-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Deactivating_a_volume_group" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Deactivating_a_volume_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.4</span>Deactivating a volume group</div>
			</a>
			
			<ul id="toc-Deactivating_a_volume_group-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Renaming_a_volume_group" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Renaming_a_volume_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.5</span>Renaming a volume group</div>
			</a>
			
			<ul id="toc-Renaming_a_volume_group-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Add_physical_volume_to_a_volume_group" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Add_physical_volume_to_a_volume_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.6</span>Add physical volume to a volume group</div>
			</a>
			
			<ul id="toc-Add_physical_volume_to_a_volume_group-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Remove_partition_from_a_volume_group" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Remove_partition_from_a_volume_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.7</span>Remove partition from a volume group</div>
			</a>
			
			<ul id="toc-Remove_partition_from_a_volume_group-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Logical_volumes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Logical_volumes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Logical volumes</div>
			</a>
			
			<ul id="toc-Logical_volumes-sublist" class="vector-toc-list">
				<li id="toc-Creating_a_logical_volume" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Creating_a_logical_volume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.1</span>Creating a logical volume</div>
			</a>
			
			<ul id="toc-Creating_a_logical_volume-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Renaming_a_logical_volume" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Renaming_a_logical_volume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.2</span>Renaming a logical volume</div>
			</a>
			
			<ul id="toc-Renaming_a_logical_volume-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Resizing_the_logical_volume_and_file_system_in_one_go" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Resizing_the_logical_volume_and_file_system_in_one_go">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.3</span>Resizing the logical volume and file system in one go</div>
			</a>
			
			<ul id="toc-Resizing_the_logical_volume_and_file_system_in_one_go-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Resizing_the_logical_volume_and_file_system_separately" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Resizing_the_logical_volume_and_file_system_separately">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.4</span>Resizing the logical volume and file system separately</div>
			</a>
			
			<ul id="toc-Resizing_the_logical_volume_and_file_system_separately-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Removing_a_logical_volume" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Removing_a_logical_volume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.5</span>Removing a logical volume</div>
			</a>
			
			<ul id="toc-Removing_a_logical_volume-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Snapshots" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Snapshots">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Snapshots</div>
		</a>
		
			<button aria-controls="toc-Snapshots-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Snapshots subsection</span>
			</button>
		
		<ul id="toc-Snapshots-sublist" class="vector-toc-list">
			<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Configuration</div>
			</a>
			
			<ul id="toc-Configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Backups" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Backups">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Backups</div>
			</a>
			
			<ul id="toc-Backups-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Encryption" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Encryption">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Encryption</div>
		</a>
		
		<ul id="toc-Encryption-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Cache" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Cache">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Cache</div>
		</a>
		
			<button aria-controls="toc-Cache-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Cache subsection</span>
			</button>
		
		<ul id="toc-Cache-sublist" class="vector-toc-list">
			<li id="toc-Create_cache" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Create_cache">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Create cache</div>
			</a>
			
			<ul id="toc-Create_cache-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Remove_cache" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remove_cache">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Remove cache</div>
			</a>
			
			<ul id="toc-Remove_cache-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-RAID" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#RAID">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>RAID</div>
		</a>
		
			<button aria-controls="toc-RAID-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle RAID subsection</span>
			</button>
		
		<ul id="toc-RAID-sublist" class="vector-toc-list">
			<li id="toc-Setup_RAID" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setup_RAID">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>Setup RAID</div>
			</a>
			
			<ul id="toc-Setup_RAID-sublist" class="vector-toc-list">
				<li id="toc-New_volumes" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#New_volumes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1.1</span>New volumes</div>
			</a>
			
			<ul id="toc-New_volumes-sublist" class="vector-toc-list">
				<li id="toc-RAID_0" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#RAID_0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1.1.1</span>RAID 0</div>
			</a>
			
			<ul id="toc-RAID_0-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-RAID_1" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#RAID_1">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1.1.2</span>RAID 1</div>
			</a>
			
			<ul id="toc-RAID_1-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-RAID_10" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#RAID_10">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1.1.3</span>RAID 10</div>
			</a>
			
			<ul id="toc-RAID_10-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Existing_volumes" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Existing_volumes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1.2</span>Existing volumes</div>
			</a>
			
			<ul id="toc-Existing_volumes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Thin_provisioning" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Thin_provisioning">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Thin provisioning</div>
		</a>
		
			<button aria-controls="toc-Thin_provisioning-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Thin provisioning subsection</span>
			</button>
		
		<ul id="toc-Thin_provisioning-sublist" class="vector-toc-list">
			<li id="toc-Example:_implementing_virtual_private_servers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Example:_implementing_virtual_private_servers">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>Example: implementing virtual private servers</div>
			</a>
			
			<ul id="toc-Example:_implementing_virtual_private_servers-sublist" class="vector-toc-list">
				<li id="toc-Use_thin_snapshots_to_save_more_space" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Use_thin_snapshots_to_save_more_space">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1.1</span>Use thin snapshots to save more space</div>
			</a>
			
			<ul id="toc-Use_thin_snapshots_to_save_more_space-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Example:_zero-downtime_storage_upgrade" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Example:_zero-downtime_storage_upgrade">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.2</span>Example: zero-downtime storage upgrade</div>
			</a>
			
			<ul id="toc-Example:_zero-downtime_storage_upgrade-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Customizing" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Customizing">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Customizing</div>
		</a>
		
		<ul id="toc-Customizing-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-LVM_commands_do_not_work" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#LVM_commands_do_not_work">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.1</span>LVM commands do not work</div>
			</a>
			
			<ul id="toc-LVM_commands_do_not_work-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Logical_volumes_do_not_show_up" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Logical_volumes_do_not_show_up">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.2</span>Logical volumes do not show up</div>
			</a>
			
			<ul id="toc-Logical_volumes_do_not_show_up-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-LVM_on_removable_media" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#LVM_on_removable_media">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.3</span>LVM on removable media</div>
			</a>
			
			<ul id="toc-LVM_on_removable_media-sublist" class="vector-toc-list">
				<li id="toc-Suspend/resume_with_LVM_and_removable_media" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Suspend/resume_with_LVM_and_removable_media">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.3.1</span>Suspend/resume with LVM and removable media</div>
			</a>
			
			<ul id="toc-Suspend/resume_with_LVM_and_removable_media-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Resizing_a_contiguous_logical_volume_fails" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Resizing_a_contiguous_logical_volume_fails">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.4</span>Resizing a contiguous logical volume fails</div>
			</a>
			
			<ul id="toc-Resizing_a_contiguous_logical_volume_fails-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Command_"grub-mkconfig"_reports_"unknown_filesystem"_errors' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Command_"grub-mkconfig"_reports_"unknown_filesystem"_errors'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.5</span>Command "grub-mkconfig" reports "unknown filesystem" errors</div>
			</a>
			
			<ul id='toc-Command_"grub-mkconfig"_reports_"unknown_filesystem"_errors-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Thinly-provisioned_root_volume_device_times_out" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Thinly-provisioned_root_volume_device_times_out">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.6</span>Thinly-provisioned root volume device times out</div>
			</a>
			
			<ul id="toc-Thinly-provisioned_root_volume_device_times_out-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Delay_on_shutdown" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Delay_on_shutdown">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.7</span>Delay on shutdown</div>
			</a>
			
			<ul id="toc-Delay_on_shutdown-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hibernating_into_a_thinly-provisioned_swap_volume" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hibernating_into_a_thinly-provisioned_swap_volume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">10.8</span>Hibernating into a thinly-provisioned swap volume</div>
			</a>
			
			<ul id="toc-Hibernating_into_a_thinly-provisioned_swap_volume-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">11</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">LVM</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/LVM" title="LVM – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/LVM.html" title="LVM – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/LVM" title="LVM – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/LVM.html" title="LVM – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/LVM" title="LVM – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Install_Arch_Linux_on_LVM.html" title="Install Arch Linux on LVM">Install Arch Linux on LVM</a></li>
<li><a href="../en/LVM_on_software_RAID.html" title="LVM on software RAID">LVM on software RAID</a></li>
<li><a href="../en/Dm-crypt/Encrypting_an_entire_system.html#LVM_on_LUKS" title="Dm-crypt/Encrypting an entire system">dm-crypt/Encrypting an entire system#LVM on LUKS</a></li>
<li><a href="../en/Dm-crypt/Encrypting_an_entire_system.html#LUKS_on_LVM" title="Dm-crypt/Encrypting an entire system">dm-crypt/Encrypting an entire system#LUKS on LVM</a></li>
<li><a href="../en/Resizing_LVM-on-LUKS.html" title="Resizing LVM-on-LUKS">Resizing LVM-on-LUKS</a></li>
<li><a href="../en/Create_root_filesystem_snapshots_with_LVM.html" title="Create root filesystem snapshots with LVM">Create root filesystem snapshots with LVM</a></li>
</ul>
</div>
<p>From <a href="https://en.wikipedia.org/wiki/Logical_Volume_Manager_(Linux)" class="extiw" title="wikipedia:Logical Volume Manager (Linux)">Wikipedia:Logical Volume Manager (Linux)</a>:
</p>
<dl><dd>Logical Volume Manager (LVM) is a <a href="https://en.wikipedia.org/wiki/device_mapper" class="extiw" title="wikipedia:device mapper">device mapper</a> framework that provides <a href="https://en.wikipedia.org/wiki/logical_volume_management" class="extiw" title="wikipedia:logical volume management">logical volume management</a> for the <a href="https://en.wikipedia.org/wiki/Linux_kernel" class="extiw" title="wikipedia:Linux kernel">Linux kernel</a>.</dd></dl>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Background">Background</span></h2>
<h3><span class="mw-headline" id="LVM_building_blocks">LVM building blocks</span></h3>
<p>Logical Volume Management utilizes the kernel's <a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/logical_volume_manager_administration/device_mapper">device-mapper</a> feature to provide a system of <a href="../en/Partitioning.html" class="mw-redirect" title="Partition">partitions</a> independent of underlying disk layout. With LVM you abstract your storage and have "virtual partitions", making <a href="#Resizing_the_logical_volume_and_file_system_separately">extending/shrinking</a> easier (subject to potential filesystem limitations).
</p>
<p>Virtual partitions allow addition and removal without worry of whether you have enough contiguous space on a particular disk, getting caught up fdisking a disk in use (and wondering whether the kernel is using the old or new partition table), or, having to move other partitions out of the way.
</p>
<p>Basic building blocks of LVM:
</p>
<dl>
<dt>Physical volume (PV)</dt>
<dd>Unix block device node, usable for storage by LVM. Examples: a hard disk, an <a href="../en/Partitioning.html#Master_Boot_Record" class="mw-redirect" title="MBR">MBR</a> or <a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a> partition, a loopback file, a device mapper device (e.g. <a href="../en/Dm-crypt.html" title="Dm-crypt">dm-crypt</a>). It hosts an LVM header.</dd>
<dt>Volume group (VG)</dt>
<dd>Group of PVs that serves as a container for LVs. PEs are allocated from a VG for a LV.</dd>
<dt>Logical volume (LV)</dt>
<dd>"Virtual/logical partition" that resides in a VG and is composed of PEs. LVs are Unix block devices analogous to physical partitions, e.g. they can be directly formatted with a <a href="../en/File_systems.html" class="mw-redirect" title="File system">file system</a>.</dd>
<dt>Physical extent (PE)</dt>
<dd>The smallest contiguous extent (default 4 MiB) in the PV that can be assigned to a LV. Think of PEs as parts of PVs that can be allocated to any LV.</dd>
</dl>
<p>Example:
</p>
<pre style="white-space: pre !important; font-family:'DejaVu Sans Mono',monospace,monospace; font-variant-ligatures: no-common-ligatures;">Physical disks

  Disk1 (/dev/sda):
    ┌──────────────────────────────────────┬─────────────────────────────────────┐
    │ Partition1  50 GiB (Physical volume) │ Partition2 80 GiB (Physical volume) │
    │ /dev/sda1                            │ /dev/sda2                           │
    └──────────────────────────────────────┴─────────────────────────────────────┘

  Disk2 (/dev/sdb):
    ┌──────────────────────────────────────┐
    │ Partition1 120 GiB (Physical volume) │
    │ /dev/sdb1                            │
    └──────────────────────────────────────┘
</pre>
<pre style="white-space: pre !important; font-family:'DejaVu Sans Mono',monospace,monospace; font-variant-ligatures: no-common-ligatures;">LVM logical volumes

  Volume Group1 (/dev/MyVolGroup/ = /dev/sda1 + /dev/sda2 + /dev/sdb1):
    ┌─────────────────────────┬─────────────────────────┬──────────────────────────┐
    │ Logical volume1 15 GiB  │ Logical volume2 35 GiB  │ Logical volume3 200 GiB  │
    │ /dev/MyVolGroup/rootvol │ /dev/MyVolGroup/homevol │ /dev/MyVolGroup/mediavol │
    └─────────────────────────┴─────────────────────────┴──────────────────────────┘
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Logical volumes are accessible at both <code>/dev/<i>VolumeGroupName</i>/<i>LogicalVolumeName</i></code> and <code>/dev/mapper/<i>VolumeGroupName-LogicalVolumeName</i></code>. However, <span class="plainlinks archwiki-template-man" title="$ man 8 lvm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvm.8#VALID_NAMES">lvm(8) § VALID NAMES</a></span> recommends the former format for "software and scripts" (e.g. <a href="../en/Fstab.html" title="Fstab">fstab</a>) since the latter is intended for "internal use" and subject to possible "change between releases and distributions".</div>
<h3><span class="mw-headline" id="Advantages">Advantages</span></h3>
<p>LVM gives you more flexibility than just using normal hard drive partitions:
</p>
<ul>
<li>Use any number of disks as one big disk.</li>
<li>Have logical volumes stretched over several disks (<a href="../en/RAID.html" title="RAID">RAID</a>, mirroring, striping which offer advantages such as additional resilience and performance <a rel="nofollow" class="external autonumber" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/logical_volume_manager_administration/raid_volumes">[1]</a>).</li>
<li>Create small logical volumes and resize them "dynamically" as they get filled up.</li>
<li>Resize logical volumes regardless of their order on disk. It does not depend on the position of the LV within VG, there is no need to ensure surrounding available space.</li>
<li>Resize/create/delete logical and physical volumes online. File systems on them still need to be resized, but some (such as <a href="../en/Ext4.html" title="Ext4">Ext4</a> and <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a>) support online resizing.</li>
<li>Online/live migration of LV (or segments) being used by services to different disks without having to restart services.</li>
<li>Snapshots allow you to backup a frozen copy of the file system, while keeping service downtime to a minimum and easily merge the snapshot into the original volume later.</li>
<li>Support for unlocking separate volumes without having to enter a key multiple times on boot (<a href="../en/Dm-crypt/Encrypting_an_entire_system.html#LVM_on_LUKS" title="Dm-crypt/Encrypting an entire system">make LVM on top of LUKS</a>).</li>
<li>Built-in support for caching of frequently used data (<span class="plainlinks archwiki-template-man" title="$ man 7 lvmcache"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmcache.7">lvmcache(7)</a></span>).</li>
</ul>
<h3><span class="mw-headline" id="Disadvantages">Disadvantages</span></h3>
<ul>
<li>Additional steps in setting up the system (may require changes to <a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> configuration), more complicated. Requires (multiple) daemons to constantly run.</li>
<li>If dual-booting, note that Windows does not support LVM; you will be unable to access any LVM partitions from Windows. 3rd Party software may allow to mount certain kinds of LVM setups. <a rel="nofollow" class="external autonumber" href="https://www.paragon-software.com/home/linuxfs-windows/">[2]</a>
</li>
<li>If your physical volumes are not on a RAID-1, RAID-5 or RAID-6 losing one disk <i>can</i> lose one or more logical volumes if you span (or extend) your logical volumes across multiple non-redundant disks.</li>
<li>It is not always easy to shrink the space used by the logical volume manager, meaning the physical volumes used for the logical volumes. If the physical extents are scattered across the physical volume until the end you might need to inspect the segments and move them (potentially to another physical device) or the same device with custom allocation settings (e.g. <code>--alloc anywhere</code>). If you want to dual-boot with other operating systems (e.g. with Microsoft Windows), the only space left on the device for Microsoft Windows is the space not used by LVM / not used as physical volume.</li>
<li>Potentially worse performance than using plain partitions. <a rel="nofollow" class="external autonumber" href="https://serverfault.com/questions/209461/lvm-performance-overhead/1130851#1130851">[3]</a>
</li>
<li>May not work well with all file systems, especially those that are designed to be (multi-)device aware. For example, <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a> offers some of the same functionality (<a rel="nofollow" class="external text" href="https://btrfs.readthedocs.io/en/latest/btrfs-device.html">multi device support</a>, <a rel="nofollow" class="external text" href="https://btrfs.readthedocs.io/en/latest/Subvolumes.html">(sub)volumes</a>, snapshots and <a rel="nofollow" class="external text" href="https://btrfs.readthedocs.io/en/latest/Volume-management.html">RAID</a>) which could clash (read further about issues with LVM snapshots with <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a>).</li>
</ul>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Make sure the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span> package is <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">installed</a>.
</p>
<p>If you have LVM volumes not activated via the <a href="../en/Arch_boot_process.html#initramfs" class="mw-redirect" title="Initramfs">initramfs</a>, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>lvm2-monitor.service</code>, which is provided by the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span> package.
</p>
<h2><span class="mw-headline" id="Volume_operations">Volume operations</span></h2>
<h3><span class="mw-headline" id="Physical_volumes">Physical volumes</span></h3>
<h4><span class="mw-headline" id="Creating">Creating</span></h4>
<p>To create a PV on <code>/dev/sda1</code>, run:
</p>
<pre># pvcreate /dev/sda1
</pre>
<p>You can check the PV is created using the following command:
</p>
<pre># pvs
</pre>
<h4><span class="mw-headline" id="Growing">Growing</span></h4>
<p>After extending or prior to reducing the size of a device that has a physical volume on it, you need to grow or shrink the PV using <span class="plainlinks archwiki-template-man" title="$ man 8 pvresize"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pvresize.8">pvresize(8)</a></span>.
</p>
<p>To expand the PV on <code>/dev/sda1</code> after enlarging the <a href="../en/Partitioning.html" class="mw-redirect" title="Partition">partition</a>, run:
</p>
<pre># pvresize /dev/sda1
</pre>
<p>This will automatically detect the new size of the device and extend the PV to its maximum.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This command can be done while the volume is online.</div>
<h4><span class="mw-headline" id="Shrinking">Shrinking</span></h4>
<p>To shrink a physical volume prior to reducing its underlying device, add the <code>--setphysicalvolumesize <i>size</i></code> parameters to the command, <i>e.g.</i>:
</p>
<pre># pvresize --setphysicalvolumesize 40G /dev/sda1
</pre>
<p>The above command may leave you with this error:
</p>
<pre>/dev/sda1: cannot resize to 25599 extents as later ones are allocated.
0 physical volume(s) resized / 1 physical volume(s) not resized
</pre>
<p>Indeed <i>pvresize</i> will refuse to shrink a PV if it has allocated extents after where its new end would be. One needs to run <a href="#Move_physical_extents">pvmove</a> beforehand to relocate these elsewhere in the volume group if there is sufficient free space.
</p>
<h5><span class="mw-headline" id="Move_physical_extents">Move physical extents</span></h5>
<p>Before freeing up physical extents at the end of the volume, one must run <code>pvdisplay -v -m</code> to see them. An alternative way to view segments in a tabular form is <code>pvs --segments -v</code>.
</p>
<p>In the below example, there is one physical volume on <code>/dev/sdd1</code>, one volume group <code>vg1</code> and one logical volume <code>backup</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pvdisplay -v -m</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">    Finding all volume groups.
    Using physical volume(s) on command line.
  --- Physical volume ---
  PV Name               /dev/sdd1
  VG Name               vg1
  PV Size               1.52 TiB / not usable 1.97 MiB
  Allocatable           yes 
  PE Size               4.00 MiB
  Total PE              399669
  Free PE               153600
  Allocated PE          246069
  PV UUID               MR9J0X-zQB4-wi3k-EnaV-5ksf-hN1P-Jkm5mW
   
  --- Physical Segments ---
  Physical extent 0 to 153600:
    FREE
  Physical extent 153601 to 307199:
    Logical volume	/dev/vg1/backup
    Logical extents	1 to 153599
  Physical extent 307200 to 307200:
    FREE
  Physical extent 307201 to 399668:
    Logical volume	/dev/vg1/backup
    Logical extents	153601 to 246068
</pre>
<p>One can observe <code>FREE</code> space are split across the volume. To shrink the physical volume, we must first move all used segments to the beginning.
</p>
<p>Here, the first free segment is from 0 to 153600 and leaves us with 153601 free extents. We can now move this segment number from the last physical extent to the first extent. The command will thus be:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pvmove --alloc anywhere /dev/sdd1:307201-399668 /dev/sdd1:0-92467</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sdd1: Moved: 0.1 %
/dev/sdd1: Moved: 0.2 %
...
/dev/sdd1: Moved: 99.9 %
/dev/sdd1: Moved: 100.0 %
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>This command moves 399668 - 307201 + 1 = 92468 PEs <b>from</b> the last segment <b>to</b> the first segment. This is possible as the first segment encloses 153600 free PEs, which can contain the 92467 - 0 + 1 = 92468 moved PEs.</li>
<li>The <code>--alloc anywhere</code> option is used as we move PEs inside the same partition. In case of different partitions, the command would look something like this: <pre># pvmove /dev/sdb1:1000-1999 /dev/sdc1:0-999</pre>
</li>
<li>This command may take a long time (one to two hours) in case of large volumes. It might be a good idea to run this command in a <a href="../en/Tmux.html" title="Tmux">tmux</a> or <a href="../en/GNU_Screen.html" title="GNU Screen">GNU Screen</a> session. Any unwanted stop of the process could be fatal.</li>
<li>Once the operation is complete, run <a href="../en/Fsck.html" title="Fsck">fsck</a> to make sure your file system is valid.</li>
</ul>
</div>
<h5><span class="mw-headline" id="Resize_physical_volume">Resize physical volume</span></h5>
<p>Once all your free physical segments are on the last physical extents, run <code>vgdisplay</code> with root privileges and see your free PE.
</p>
<p>Then you can now run again the command:
</p>
<pre># pvresize --setphysicalvolumesize <i>size</i> <i>PhysicalVolume</i>
</pre>
<p>See the result:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pvs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  PV         VG   Fmt  Attr PSize    PFree 
  /dev/sdd1  vg1  lvm2 a--     1t     500g
</pre>
<h5><span class="mw-headline" id="Resize_partition">Resize partition</span></h5>
<p>Last, you need to shrink the partition with your favorite <a href="../en/Partitioning.html#Partitioning_tools" title="Partitioning">partitioning tool</a>.
</p>
<h3><span class="mw-headline" id="Volume_groups">Volume groups</span></h3>
<h4><span class="mw-headline" id="Creating_a_volume_group">Creating a volume group</span></h4>
<p>To create a VG <code>MyVolGroup</code> with an associated PV <code>/dev/sdb1</code>, run:
</p>
<pre># vgcreate MyVolGroup /dev/sdb1
</pre>
<p>You can check the VG <code>MyVolGroup</code> is created using the following command:
</p>
<pre># vgs
</pre>
<p>You can bind multiple PVs when creating a VG like this:
</p>
<pre># vgcreate MyVolGroup /dev/sdb1 /dev/sdb2
</pre>
<h4><span class="mw-headline" id="Activating_a_volume_group">Activating a volume group</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You can restrict the volumes that are activated automatically by setting the <code>auto_activation_volume_list</code> in <code>/etc/lvm/lvm.conf</code>. If in doubt, leave this option commented out.</div>
<pre># vgchange -a y MyVolGroup
</pre>
<p>By default, this will reactivate the volume group when applicable. For example, if you had a drive failure in a mirror and you swapped the drive; and ran (1) <code>pvcreate</code>, (2) <code>vgextend</code> and (3) <code>vgreduce --removemissing --force</code>.
</p>
<h4><span class="mw-headline" id="Repairing_a_volume_group">Repairing a volume group</span></h4>
<p>To start the rebuilding process of the degraded mirror array in this example, you would run:
</p>
<pre># lvconvert --repair /dev/MyVolGroup/mirror
</pre>
<p>You can monitor the rebuilding process (Cpy%Sync Column output) with:
</p>
<pre># lvs -a -o +devices
</pre>
<h4><span class="mw-headline" id="Deactivating_a_volume_group">Deactivating a volume group</span></h4>
<p>Just invoke 
</p>
<pre># vgchange -a n MyVolGroup
</pre>
<p>This will deactivate the volume group and allow you to unmount the container it is stored in.
</p>
<h4><span class="mw-headline" id="Renaming_a_volume_group">Renaming a volume group</span></h4>
<p>Use the <span class="plainlinks archwiki-template-man" title="$ man 8 vgrename"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vgrename.8">vgrename(8)</a></span> command to rename an existing volume group.
</p>
<p>Either of the following commands renames the existing volume group <code>MyVolGroup</code> to <code>my_volume_group</code>
</p>
<pre># vgrename /dev/MyVolGroup /dev/my_volume_group
</pre>
<pre># vgrename MyVolGroup my_volume_group
</pre>
<p>Make sure to update all configuration files (e.g. <code>/etc/fstab</code> or <code>/etc/crypttab</code>) that reference the renamed volume group.
</p>
<h4><span class="mw-headline" id="Add_physical_volume_to_a_volume_group">Add physical volume to a volume group</span></h4>
<p>You first create a new physical volume on the block device you wish to use, then extend your volume group
</p>
<pre># pvcreate /dev/sdb1
# vgextend MyVolGroup /dev/sdb1
</pre>
<p>This of course will increase the total number of physical extents on your volume group, which can be allocated by logical volumes as you see fit.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It is considered good form to have a <a href="../en/Partitioning.html#Partition_table" class="mw-redirect" title="Partition table">partition table</a> on your storage medium below LVM. Use the appropriate partition type: <code>8e</code> for MBR, and <code>E6D6D379-F507-44C2-A23C-238F2A3DF928</code> for GPT partitions.</div>
<h4><span class="mw-headline" id="Remove_partition_from_a_volume_group">Remove partition from a volume group</span></h4>
<p>If you created a logical volume on the partition, <a href="#Removing_a_logical_volume">remove</a> it first.
</p>
<p>All of the data on that partition needs to be moved to another partition. Fortunately, LVM makes this easy:
</p>
<pre># pvmove /dev/sdb1
</pre>
<p>If you want to have the data on a specific physical volume, specify that as the second argument to <code>pvmove</code>:
</p>
<pre># pvmove /dev/sdb1 /dev/sdf1
</pre>
<p>Then the physical volume needs to be removed from the volume group:
</p>
<pre># vgreduce MyVolGroup /dev/sdb1
</pre>
<p>Or remove all empty physical volumes:
</p>
<pre># vgreduce --all MyVolGroup
</pre>
<p>For example: if you have a bad disk in a group that cannot be found because it has been removed or failed:
</p>
<pre># vgreduce --removemissing --force MyVolGroup
</pre>
<p>And lastly, if you want to use the partition for something else, and want to avoid LVM thinking that the partition is a physical volume:
</p>
<pre># pvremove /dev/sdb1
</pre>
<h3><span class="mw-headline" id="Logical_volumes">Logical volumes</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <span class="plainlinks archwiki-template-man" title="$ man 8 lvresize"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvresize.8">lvresize(8)</a></span> provides more or less the same options as the specialized <span class="plainlinks archwiki-template-man" title="$ man 8 lvextend"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvextend.8">lvextend(8)</a></span> and <span class="plainlinks archwiki-template-man" title="$ man 8 lvreduce"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvreduce.8">lvreduce(8)</a></span> commands, while allowing to do both types of operation. Notwithstanding this, all those utilities offer a <code>-r</code>/<code>--resizefs</code> option which allows to resize the file system together with the LV using <span class="plainlinks archwiki-template-man" title="$ man 8 fsadm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fsadm.8">fsadm(8)</a></span> (<i>ext2</i>, <a href="../en/Ext3.html" title="Ext3">ext3</a>, <a href="../en/Ext4.html" title="Ext4">ext4</a>, <i>ReiserFS</i> and <a href="../en/XFS.html" title="XFS">XFS</a> supported). Therefore it may be easier to simply use <code>lvresize</code> for both operations and use <code>--resizefs</code> to simplify things a bit, except if you have specific needs or want full control over the process.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> While enlarging a file system can often be done on-line (<i>i.e.</i> while it is mounted), even for the root partition, shrinking will nearly always require to first unmount the file system so as to prevent data loss. Make sure your file system supports what you are trying to do.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If a logical volume will be formatted with <a href="../en/Ext4.html" title="Ext4">ext4</a>, leave at least 256 MiB free space in the volume group to allow using <span class="plainlinks archwiki-template-man" title="$ man 8 e2scrub"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/e2scrub.8">e2scrub(8)</a></span>. After creating the last volume with <code>-l 100%FREE</code>, this can be accomplished by reducing its size with <code>lvreduce -L -256M <i>volume_group</i>/<i>logical_volume</i></code>.</div>
<h4><span class="mw-headline" id="Creating_a_logical_volume">Creating a logical volume</span></h4>
<p>To create a LV <code>homevol</code> in a VG <code>MyVolGroup</code> with 300 GiB of capacity, run:
</p>
<pre># lvcreate -L 300G MyVolGroup -n homevol
</pre>
<p>or, to create a LV <code>homevol</code> in a VG <code>MyVolGroup</code> with the rest of capacity, run:
</p>
<pre># lvcreate -l 100%FREE MyVolGroup -n homevol
</pre>
<p>To create the LV while restricting it to specific PVs within the VG, append them to the command:
</p>
<pre># lvcreate -L 300G MyVolGroup -n homevol /dev/sda1
</pre>
<p>The new LV will appear as <code>/dev/MyVolGroup/homevol</code>. Now you can <a href="../en/File_systems.html#Create_a_file_system" class="mw-redirect" title="Format">format</a> the LV with an appropriate file system.
</p>
<p>You can check the LV is created using the following command:
</p>
<pre># lvs
</pre>
<h4><span class="mw-headline" id="Renaming_a_logical_volume">Renaming a logical volume</span></h4>
<p>To rename an existing logical volume, use the <span class="plainlinks archwiki-template-man" title="$ man 8 lvrename"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvrename.8">lvrename(8)</a></span> command.
</p>
<p>Either of the following commands renames logical volume <code>old_vol</code> in volume group <code>MyVolGroup</code> to <code>new_vol</code>.
</p>
<pre># lvrename /dev/MyVolGroup/old_vol /dev/MyVolGroup/new_vol
</pre>
<pre># lvrename MyVolGroup old_vol new_vol
</pre>
<p>Make sure to update all configuration files (e.g. <code>/etc/fstab</code> or <code>/etc/crypttab</code>) that reference the renamed logical volume.
</p>
<h4><span class="mw-headline" id="Resizing_the_logical_volume_and_file_system_in_one_go">Resizing the logical volume and file system in one go</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Only <i>ext2</i>, <a href="../en/Ext3.html" title="Ext3">ext3</a>, <a href="../en/Ext4.html" title="Ext4">ext4</a>, <i>ReiserFS</i> and <a href="../en/XFS.html" title="XFS">XFS</a> <a href="../en/File_systems.html" title="File systems">file systems</a> are supported. For a different type of file system see <a href="#Resizing_the_logical_volume_and_file_system_separately">#Resizing the logical volume and file system separately</a>.</div>
<p>Extend the logical volume <code>mediavol</code> in <code>MyVolGroup</code> by 10 GiB  and resize its file system <i>all at once</i>:
</p>
<pre># lvresize -L +10G --resizefs MyVolGroup/mediavol
</pre>
<p>Set the size of logical volume <code>mediavol</code> in <code>MyVolGroup</code> to 15 GiB and resize its file system <i>all at once</i>:
</p>
<pre># lvresize -L 15G --resizefs MyVolGroup/mediavol
</pre>
<p>If you want to fill all the free space on a volume group, use the following command:
</p>
<pre># lvresize -l +100%FREE --resizefs MyVolGroup/mediavol
</pre>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 8 lvresize"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvresize.8">lvresize(8)</a></span> for more detailed options.
</p>
<h4><span class="mw-headline" id="Resizing_the_logical_volume_and_file_system_separately">Resizing the logical volume and file system separately</span></h4>
<p>For file systems not supported by <span class="plainlinks archwiki-template-man" title="$ man 8 fsadm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fsadm.8">fsadm(8)</a></span> will need to use the <a href="../en/File_systems.html#Types_of_file_systems" title="File systems">appropriate utility</a> to resize the file system before shrinking the logical volume or after expanding it.
</p>
<p>To extend logical volume <code>mediavol</code> within volume group <code>MyVolGroup</code> by 2 GiB <i>without</i> touching its file system:
</p>
<pre># lvresize -L +2G MyVolGroup/mediavol
</pre>
<p>Now expand the file system (<a href="../en/Ext4.html" title="Ext4">ext4</a> in this example) to the maximum size of the underlying logical volume:
</p>
<pre># resize2fs /dev/MyVolGroup/mediavol
</pre>
<p>For <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a>, <span class="plainlinks archwiki-template-man" title="$ man 8 btrfs-filesystem"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/btrfs-filesystem.8">btrfs-filesystem(8)</a></span> expects the mountpoint instead of the device, the equivalent is:
</p>
<pre># btrfs filesystem resize max <i>/mnt/my-mountpoint</i>
</pre>
<p>To reduce the size of logical volume <code>mediavol</code> in <code>MyVolGroup</code> by 500 MiB, first calculate the resulting file system size and shrink the file system (<a href="../en/Ext4.html" title="Ext4">Ext4</a> in this example) to the new size:
</p>
<pre># resize2fs /dev/MyVolGroup/mediavol <i>NewSize</i>
</pre>
<p>Unlike Ext4, <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a> supports online shrinking (again, a mountpoint should be specified) e.g.:
</p>
<pre># btrfs filesystem resize -500M <i>/mnt/my-mountpoint</i>
</pre>
<p>When the file system is shrunk, reduce the size of logical volume:
</p>
<pre># lvresize -L -500M MyVolGroup/mediavol
</pre>
<p>To calculate the exact logical volume size for <i>ext2</i>, <a href="../en/Ext3.html" title="Ext3">ext3</a>, <a href="../en/Ext4.html" title="Ext4">ext4</a> file systems, use a simple formula: <code>LVM_EXTENTS = FS_BLOCKS × FS_BLOCKSIZE ÷ LVM_EXTENTSIZE</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># tune2fs -l /dev/MyVolGroup/mediavol | grep Block</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Block count:              102400000
Block size:               4096
Blocks per group:         32768
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># vgdisplay MyVolGroup | grep "PE Size"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PE Size               4.00 MiB
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The file system block size is in bytes. Make sure to use the same units for both block and extent size.</div>
<pre>102400000 blocks × 4096 bytes/block ÷ 4 MiB/extent = 100000 extents
</pre>
<p>Passing <code>--resizefs</code> will confirm that the correctness.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lvreduce -l 100000 --resizefs /dev/MyVolGroup/mediavol</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
The filesystem is already 102400000 (4k) blocks long.  Nothing to do!
...
Logical volume sysvg/root successfully resized.
</pre>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 8 lvresize"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvresize.8">lvresize(8)</a></span> for more detailed options.
</p>
<h4><span class="mw-headline" id="Removing_a_logical_volume">Removing a logical volume</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Before you remove a logical volume, make sure to move all data that you want to keep somewhere else; otherwise, it will be lost!</div>
<p>First, find out the name of the logical volume you want to remove. You can get a list of all logical volumes with:
</p>
<pre># lvs
</pre>
<p>Next, look up the mountpoint of the chosen logical volume:
</p>
<pre>$ lsblk
</pre>
<p>Then unmount the filesystem on the logical volume:
</p>
<pre># umount /<i>mountpoint</i>
</pre>
<p>Finally, remove the logical volume:
</p>
<pre># lvremove <i>volume_group</i>/<i>logical_volume</i>
</pre>
<p>For example:
</p>
<pre># lvremove MyVolGroup/homevol
</pre>
<p>Confirm by typing in <code>y</code>.
</p>
<p>Make sure to update all configuration files (e.g. <code>/etc/fstab</code> or <code>/etc/crypttab</code>) that reference the removed logical volume.
</p>
<p>You can verify the removal of the logical volume by typing <code>lvs</code> as root again (see first step of this section).
</p>
<h2><span class="mw-headline" id="Snapshots">Snapshots</span></h2>
<p>LVM supports CoW (Copy-on-Write) snapshots. A CoW snapshot initially points to the original data. When data blocks are overwritten, the original copy is left intact and the new blocks are written elsewhere on-disk. This has several desirable properties:
</p>
<ul>
<li>Creating snapshots is fast, because it does not copy data (just the much shorter list of pointers to the on-disk locations).</li>
<li>Snapshots require just enough free space to hold the new data blocks (plus a negligible amount for the pointers to the new blocks). For example, a snapshot of 35 GiB of data, where you write only 2 GiB (on both the original and snapshot), only requires 2 GiB of free space.</li>
</ul>
<p>LVM snapshots are at the block level. They make a new block device, with no apparent relationship to the original except when dealing with the LVM tools. Therefore, deleting files in the original copy does not free space in the snapshots. If you need filesystem-level snapshots, you rather need <a href="../en/Btrfs.html" title="Btrfs">btrfs</a>, <a href="../en/ZFS.html" title="ZFS">ZFS</a> or <a href="../en/Bcachefs.html" title="Bcachefs">bcachefs</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>A CoW snapshot <b>is not a backup</b>, because it does not make a second copy of the original data. For example, a damaged disk sector that affects original data also affects the snapshots. That said, a snapshot can be helpful while using other tools to make backups, as outlined <a href="#Backups">below</a>.</li>
<li>Btrfs expects different filesystems to have different UUIDs. If you snapshot a LVM volume that contains a btrfs filesystem, make sure to change the UUID of the original or the copy, before both are mounted (or made visible to the kernel, for example if an unrelated daemon triggers a <i>btrfs device scan</i>). For details see <a rel="nofollow" class="external text" href="https://btrfs.wiki.kernel.org/index.php/Gotchas#Block-level_copies_of_devices">btrfs wiki Gotcha's</a>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Configuration">Configuration</span></h3>
<p>You create snapshot logical volumes just like normal ones.
</p>
<pre># lvcreate --size 100M --snapshot --name snap01vol /dev/MyVolGroup/lvol
</pre>
<p>With that volume, you may modify less than 100 MiB of data, before the snapshot volume fills up.
</p>
<p>Reverting the modified <code>lvol</code> logical volume to the state when the <code>snap01vol</code> snapshot was taken can be done with
</p>
<pre># lvconvert --merge /dev/MyVolGroup/snap01vol
</pre>
<p>In case the origin logical volume is active, merging will occur on the next reboot (merging can be done even from a LiveCD). 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The snapshot will no longer exist after merging.</div>
<p>Also multiple snapshots can be taken and each one can be merged with the origin logical volume at will.
</p>
<h3><span class="mw-headline" id="Backups">Backups</span></h3>
<p>A snapshot provides a frozen copy of a file system to make backups. For example, a backup taking two hours provides a more consistent image of the file system than directly backing up the partition.
</p>
<p>The snapshot can be mounted and backed up with <a href="../en/Dd.html" title="Dd">dd</a> or <a href="../en/Archiving_and_compression.html" class="mw-redirect" title="Tar">tar</a>. The size of the backup file done with <i>dd</i> will be the size of the files residing on the snapshot volume. 
To restore just create a snapshot, mount it, and write or extract the backup to it. And then merge it with the origin.
</p>
<p>See <a href="../en/Create_root_filesystem_snapshots_with_LVM.html" title="Create root filesystem snapshots with LVM">Create root filesystem snapshots with LVM</a> for automating the creation of clean root file system snapshots during system startup for backup and rollback.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Show scripts to automate snapshots of root before updates, to rollback... updating <code>menu.lst</code> to boot snapshots (maybe in a separate article?) (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:LVM.html">Talk:LVM</a>)</div>
</div>
<h2><span class="mw-headline" id="Encryption">Encryption</span></h2>
<p>See <a href="../en/Dm-crypt/Encrypting_an_entire_system.html#LUKS_on_LVM" title="Dm-crypt/Encrypting an entire system">dm-crypt/Encrypting an entire system#LUKS on LVM</a> and <a href="../en/Dm-crypt/Encrypting_an_entire_system.html#LVM_on_LUKS" title="Dm-crypt/Encrypting an entire system">dm-crypt/Encrypting an entire system#LVM on LUKS</a> for the possible schemes of combining LUKS with LVM.
</p>
<h2><span class="mw-headline" id="Cache">Cache</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> LVM also supports <code>--type writecache</code> which uses dm-writecache. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:LVM.html">Talk:LVM</a>)</div>
</div>
<p>From <span class="plainlinks archwiki-template-man" title="$ man 7 lvmcache"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmcache.7">lvmcache(7)</a></span>:
</p>
<dl><dd>The cache logical volume type uses a small and fast LV to improve the performance of a large and slow LV. It does this by storing the frequently used blocks on the faster LV. LVM refers to the small fast LV as a cache pool LV. The large slow LV is called the origin LV. Due to requirements from dm-cache (the kernel driver), LVM further splits the cache pool LV into two devices - the cache data LV and cache metadata LV. The cache data LV is where copies of data blocks are kept from the origin LV to increase speed. The cache metadata LV holds the accounting information that specifies where data blocks are stored (e.g. on the origin LV or on the cache data LV).  Users should be familiar with these LVs if they wish to create the best and most robust cached logical volumes. All of these associated LVs must be in the same VG.</dd></dl>
<h3><span class="mw-headline" id="Create_cache">Create cache</span></h3>
<p>Convert your fast disk (<code>/dev/<i>fastdisk</i></code>) to PV and add to your existing VG (<code>MyVolGroup</code>):
</p>
<pre># vgextend MyVolGroup /dev/<i>fastdisk</i>
</pre>
<p>Create a cache pool with automatic meta data on <code>/dev/<i>fastdisk</i></code> and convert the existing LV <code>MyVolGroup/rootvol</code> to a cached volume, all in one step:
</p>
<pre># lvcreate --type cache --cachemode writethrough -l 100%FREE -n root_cachepool MyVolGroup/rootvol /dev/<i>fastdisk</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Instead of using <code>-l 100%FREE</code> to allocate 100% of available space from PV <code>/dev/<i>fastdisk</i></code>, you can use <code>-L 20G</code> instead to allocate only 20 GiB for cachepool.</div>
<p>Cachemode has two possible options:
</p>
<ul>
<li>
<code>writethrough</code> ensures that any data written will be stored both in the cache pool LV and on the origin LV.  The loss of a device associated with the cache pool LV in this case would not mean the loss of any data;</li>
<li>
<code>writeback</code> ensures better performance, but at the cost of a higher risk of data loss in case the drive used for cache fails.</li>
</ul>
<p>If a specific <code>--cachemode</code> is not indicated, the system will assume <code>writethrough</code> as default.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Cache hit and miss counts can be viewed with <i>lvdisplay</i> or alternatively with <i>lvm-cache-stats</i> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libblockdev-lvm">libblockdev-lvm</a></span> which also shows them in percentages.</div>
<h3><span class="mw-headline" id="Remove_cache">Remove cache</span></h3>
<p>If you ever need to undo the one step creation operation above:
</p>
<pre># lvconvert --uncache MyVolGroup/rootvol
</pre>
<p>This commits any pending writes still in the cache back to the origin LV, then deletes the cache. Other options are available and described in <span class="plainlinks archwiki-template-man" title="$ man 7 lvmcache"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmcache.7">lvmcache(7)</a></span>.
</p>
<h2><span class="mw-headline" id="RAID">RAID</span></h2>
<p>LVM may be used to create a <a href="../en/RAID.html#Implementation" title="RAID">software RAID</a>. It is a good choice if the user does not have hardware RAID and was planning on using LVM anyway. From <span class="plainlinks archwiki-template-man" title="$ man 7 lvmraid"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmraid.7">lvmraid(7)</a></span>:
</p>
<dl><dd>
<span class="plainlinks archwiki-template-man" title="$ man 8 lvm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvm.8">lvm(8)</a></span> RAID is a way to create a Logical Volume (LV) that uses multiple physical devices to improve performance or tolerate device failures.  In LVM, the physical devices are Physical Volumes (PVs) in a single Volume Group (VG).</dd></dl>
<p>LVM RAID supports RAID 0, RAID 1, RAID 4, RAID 5, RAID 6 and RAID 10. See <a href="https://en.wikipedia.org/wiki/Standard_RAID_levels" class="extiw" title="wikipedia:Standard RAID levels">Wikipedia:Standard RAID levels</a> for details on each level.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <a href="../en/RAID.html" class="mw-redirect" title="Mdadm">mdadm</a> may also be used to create a software RAID. It is arguably simpler, more popular, and easier to setup.</div>
<h3><span class="mw-headline" id="Setup_RAID">Setup RAID</span></h3>
<p>Create physical volumes:
</p>
<pre># pvcreate /dev/sda2 /dev/sdb2
</pre>
<p>Create volume group on the physical volumes:
</p>
<pre># vgcreate MyVolGroup /dev/sda2 /dev/sdb2
</pre>
<h4><span class="mw-headline" id="New_volumes">New volumes</span></h4>
<p>Create logical volumes using <code>lvcreate --type <i>raidlevel</i></code>, see <span class="plainlinks archwiki-template-man" title="$ man 7 lvmraid"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmraid.7">lvmraid(7)</a></span> and <span class="plainlinks archwiki-template-man" title="$ man 8 lvcreate"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvcreate.8">lvcreate(8)</a></span> for more options.
</p>
<pre># lvcreate --type RaidLevel [OPTIONS] -n Name -L Size VG [PVs]
</pre>
<h5><span class="mw-headline" id="RAID_0">RAID 0</span></h5>
<p>For example:
</p>
<pre># lvcreate -n myraid1vol -i 2 -I 64 -L 70G VolGroup00 /dev/nvme1n1p1 /dev/nvme0n1p1
</pre>
<p>will create a 70 GiB striped (raid0) logical volume named "myraid1vol" in VolGroup00. Stripes will be spread over <code>/dev/nvme1n1p1</code> and <code>/dev/nvme0n1p1</code>. Stripesize is set to be 64K.
</p>
<h5><span class="mw-headline" id="RAID_1">RAID 1</span></h5>
<p>For example:
</p>
<pre># lvcreate --type raid1 --mirrors 1 -L 20G -n myraid1vol MyVolGroup /dev/sda2 /dev/sdb2
</pre>
<p>will create a 20 GiB mirrored logical volume named "myraid1vol" in VolGroup00 on <code>/dev/sda2</code> and <code>/dev/sdb2</code>.
</p>
<h5><span class="mw-headline" id="RAID_10">RAID 10</span></h5>
<p>For example:
</p>
<pre># lvcreate -n myraid1vol -L 100G --type raid10 -m 1 -i 2 MyVolGroup /dev/sdd1 /dev/sdc1 /dev/sdb1 /dev/sda5
</pre>
<p>will create a 100 GiB RAID10 logical volume named "myraid1vol" in VolGroup00 on <code>/dev/sdd1</code>, <code>/dev/sdc1</code>, <code>/dev/sdb1</code>, and <code>/dev/sda5</code>.
</p>
<h4><span class="mw-headline" id="Existing_volumes">Existing volumes</span></h4>
<p>You can convert easily a non-RAID (e.g. linear) volume to pretty much any other raid configuration provided that you have enough physical devices to meet the RAID requirements. Some of them will require you to go through intermediate steps which <code>lvconvert</code> will inform you about and prompt you to agree. <code>raid10</code> below can be replaced with <code>raid0</code>, <code>raid1</code>, <code>raid5</code> etc.
</p>
<pre># lvconvert --type raid10 /dev/vg01/lv01
</pre>
<p>Use specific PVs:
</p>
<pre># lvconvert --type raid10 /dev/vg01/lv01 /dev/sda1 /dev/sdb2 /dev/nvme0n1p1 ...
</pre>
<p>You can keep track of the progress of conversion with:
</p>
<pre># watch lvs -o name,vg_name,copy_percent
</pre>
<h2><span class="mw-headline" id="Thin_provisioning">Thin provisioning</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When mounting a thin LV file system, always remember to use the <code>discard</code> option or to use <a href="../en/Solid_state_drive.html#Periodic_TRIM" class="mw-redirect" title="Fstrim">fstrim</a> regularly, to allow the thin LV to shrink as files are deleted.</div>
<p>From <span class="plainlinks archwiki-template-man" title="$ man 7 lvmthin"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvmthin.7">lvmthin(7)</a></span>:
</p>
<dl><dd>Blocks in a standard <span class="plainlinks archwiki-template-man" title="$ man 8 lvm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lvm.8">lvm(8)</a></span> Logical Volume (LV) are allocated when the LV is created, but blocks in a thin provisioned LV are allocated as they are written. Because of this, a thin provisioned LV is given a virtual size, and can then be much larger than physically available storage. The amount of physical storage provided for thin provisioned LVs can be increased later as the need arises.</dd></dl>
<h3><span class="mw-headline" id="Example:_implementing_virtual_private_servers">Example: implementing virtual private servers</span></h3>
<p>Here is the classic use case. Suppose you want to start your own VPS service, initially hosting about 100 VPSes on a single PC with a 930 GiB hard drive. Hardly any of the VPSes will actually use all of the storage they are allotted, so rather than allocate 9 GiB to each VPS, you could allow each VPS a maximum of 30 GiB and use thin provisioning to only allocate as much hard drive space to each VPS as they are actually using. Suppose the 930 GiB hard drive is <code>/dev/sdb</code>. Here is the setup.
</p>
<p>Prepare the volume group, <code>MyVolGroup</code>.
</p>
<pre># vgcreate MyVolGroup /dev/sdb
</pre>
<p>Create the thin pool LV, <code>MyThinPool</code>. This LV provides the blocks for storage.
</p>
<pre># lvcreate --type thin-pool -n MyThinPool -l 95%FREE MyVolGroup
</pre>
<p>The thin pool is composed of two sub-volumes, the data LV and the metadata LV. This command creates both automatically. But the thin pool stops working if either fills completely, and LVM currently does not support the shrinking of either of these volumes. This is why the above command allows for 5% of extra space, in case you ever need to expand the data or metadata sub-volumes of the thin pool.
</p>
<p>For each VPS, create a thin LV. This is the block device exposed to the user for their root partition.
</p>
<pre># lvcreate -n SomeClientsRoot -V 30G --thinpool MyThinPool MyVolGroup
</pre>
<p>The block device <code>/dev/MyVolGroup/SomeClientsRoot</code> may then be used by a <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a> instance as the root partition.
</p>
<h4><span class="mw-headline" id="Use_thin_snapshots_to_save_more_space">Use thin snapshots to save more space</span></h4>
<p>Thin snapshots are much more powerful than regular snapshots, because they are themselves thin LVs. See Red Hat's guide <a rel="nofollow" class="external autonumber" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_managing_logical_volumes/index#creating-and-managing-thinly-provisioned-volumes_configuring-and-managing-logical-volumes">[4]</a> for a complete list of advantages thin snapshots have.
</p>
<p>Instead of installing Linux from scratch every time a VPS is created, it is more space-efficient to start with just one thin LV containing a basic installation of Linux:
</p>
<pre># lvcreate -n GenericRoot -V 30G --thinpool MyThinPool MyVolGroup
*** install Linux at /dev/MyVolGroup/GenericRoot ***
</pre>
<p>Then create snapshots of it for each VPS:
</p>
<pre># lvcreate -s MyVolGroup/GenericRoot -n SomeClientsRoot
</pre>
<p>This way, in the thin pool there is only one copy the data common to all VPSes, at least initially. As an added bonus, the creation of a new VPS is instantaneous.
</p>
<p>Since these are thin snapshots, a write operation to <code>GenericRoot</code> only causes one COW operation in total, instead of one COW operation per snapshot. This allows you to update <code>GenericRoot</code> more efficiently than if each VPS were a regular snapshot.
</p>
<h3><span class="mw-headline" id="Example:_zero-downtime_storage_upgrade">Example: zero-downtime storage upgrade</span></h3>
<p>There are applications of thin provisioning outside of VPS hosting. Here is how you may use it to grow the effective capacity of an already-mounted file system without having to unmount it. Suppose, again, that the server has a single 930 GiB hard drive. The setup is the same as for VPS hosting, only there is only one thin LV and the LV's size is far larger than the thin pool's size.
</p>
<pre># lvcreate -n MyThinLV -V 16T --thinpool MyThinPool MyVolGroup
</pre>
<p>This extra virtual space can be filled in with actual storage at a later time by extending the thin pool.
</p>
<p>Suppose some time later, a storage upgrade is needed, and a new hard drive, <code>/dev/sdc</code>, is plugged into the server. To upgrade the thin pool's capacity, add the new hard drive to the VG:
</p>
<pre># vgextend MyVolGroup /dev/sdc
</pre>
<p>Now, extend the thin pool:
</p>
<pre># lvextend -l +95%FREE MyVolGroup/MyThinPool
</pre>
<p>Since this thin LV's size is 16 TiB, you could add another 15.09 TiB of hard drive space before finally having to unmount and resize the file system.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You will probably want to use <a href="../en/Ext4.html#Reserved_blocks" title="Ext4">reserved blocks</a> or a <a href="../en/Disk_quota.html" title="Disk quota">disk quota</a> to prevent applications from attempting to use more physical storage than there actually is.</div>
<h2><span class="mw-headline" id="Customizing">Customizing</span></h2>
<p>Some customisation is available by editing <code>/etc/lvm/lvm.conf</code>. You may find it useful to customize the output of <code>lvs</code> and <code>pvs</code> which by default does not include the % sync (useful to see progress of conversion between e.g. linear and raid type) and type of logical volume:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/lvm/lvm.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">report {
 	lvs_cols = "lv_name,lv_attr,lv_active,vg_name,lv_size,lv_layout,lv_allocation_policy,copy_percent,chunk_size"
	pvs_cols = "pv_name,vg_name,pv_size,pv_free,pv_used,dev_size"
}
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="LVM_commands_do_not_work">LVM commands do not work</span></h3>
<ul><li>Load proper module:</li></ul>
<pre># modprobe dm_mod
</pre>
<p>The <code>dm_mod</code> module should be automatically loaded. In case it does not, explicitly <a href="../en/Kernel_module.html#Automatic_module_loading" class="mw-redirect" title="Load the module at boot">load the module at boot</a>. 
</p>
<ul><li>Try preceding commands with <i>lvm</i> like this:</li></ul>
<pre># lvm pvdisplay
</pre>
<h3><span class="mw-headline" id="Logical_volumes_do_not_show_up">Logical volumes do not show up</span></h3>
<p>If you are trying to mount existing logical volumes, but they do not show up in <code>lvscan</code>, you can use the following commands to activate them:
</p>
<pre># vgscan
# vgchange -ay
</pre>
<h3><span class="mw-headline" id="LVM_on_removable_media">LVM on removable media</span></h3>
<p>Symptoms:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># vgscan</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  Reading all physical volumes.  This may take a while...
  /dev/backupdrive1/backup: read failed after 0 of 4096 at 319836585984: Input/output error
  /dev/backupdrive1/backup: read failed after 0 of 4096 at 319836643328: Input/output error
  /dev/backupdrive1/backup: read failed after 0 of 4096 at 0: Input/output error
  /dev/backupdrive1/backup: read failed after 0 of 4096 at 4096: Input/output error
  Found volume group "backupdrive1" using metadata type lvm2
  Found volume group "networkdrive" using metadata type lvm2
</pre>
<p>Cause: removing an external LVM drive without deactivating the volume group(s) first. Before you disconnect, make sure to:
</p>
<pre># vgchange -an <i>volume_group_name</i>
</pre>
<p>Fix: assuming you already tried to activate the volume group with <code>vgchange -ay <i>vg</i></code>, and are receiving the Input/output errors:
</p>
<pre># vgchange -an <i>volume_group_name</i>
</pre>
<p>Unplug the external drive and wait a few minutes:
</p>
<pre># vgscan
# vgchange -ay <i>volume_group_name</i>
</pre>
<h4>
<span id="Suspend.2Fresume_with_LVM_and_removable_media"></span><span class="mw-headline" id="Suspend/resume_with_LVM_and_removable_media">Suspend/resume with LVM and removable media</span>
</h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Provided solution will not work in more complex setups like LUKS on LVM. (Discuss in <a href="../en/Talk:LVM.html#LVM_on_removable_media" title="Talk:LVM">Talk:LVM#LVM on removable media</a>)</div>
</div>
<p>In order for LVM to work properly with removable media – like an external USB drive – the volume group of the external drive needs to be deactivated before suspend. If this is not done, you may get buffer I/O errors on the dm device (after resume). For this reason, it is not recommended to mix external and internal drives in the same volume group.
</p>
<p>To automatically deactivate the volume groups with external USB drives, tag each volume group with the <code>sleep_umount</code> tag in this way:
</p>
<pre># vgchange --addtag sleep_umount <i>vg_external</i>
</pre>
<p>Once the tag is set, use the following unit file for systemd to properly deactivate the volumes before suspend. On resume, they will be automatically activated by LVM.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/ext_usb_vg_deactivate.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Deactivate external USB volume groups on suspend
Before=sleep.target

[Service]
Type=oneshot
ExecStart=-/etc/systemd/system/deactivate_sleep_vgs.sh

[Install]
WantedBy=sleep.target</pre>
<p>and this script:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/deactivate_sleep_vgs.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

TAG=@sleep_umount
vgs=$(vgs --noheadings -o vg_name $TAG)

echo "Deactivating volume groups with $TAG tag: $vgs"

# Unmount logical volumes belonging to all the volume groups with tag $TAG
for vg in $vgs; do
    for lv_dev_path in $(lvs --noheadings  -o lv_path -S lv_active=active,vg_name=$vg); do
        echo "Unmounting logical volume $lv_dev_path"
        umount $lv_dev_path
    done
done

# Deactivate volume groups tagged with sleep_umount
for vg in $vgs; do
    echo "Deactivating volume group $vg"
    vgchange -an $vg
done</pre>
<p>Finally, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the unit.
</p>
<h3><span class="mw-headline" id="Resizing_a_contiguous_logical_volume_fails">Resizing a contiguous logical volume fails</span></h3>
<p>If trying to extend a logical volume errors with:
</p>
<pre>" Insufficient suitable contiguous allocatable extents for logical volume "
</pre>
<p>The reason is that the logical volume was created with an explicit contiguous allocation policy (options <code>-C y</code> or <code>--alloc contiguous</code>) and no further adjacent contiguous extents are available.<a rel="nofollow" class="external autonumber" href="https://hostatic.ro/lvm-inherit-and-contiguous-policies/">[5]</a>
</p>
<p>To fix this, prior to extending the logical volume, change its allocation policy with <code>lvchange --alloc inherit <i>logical_volume</i></code>. If you need to keep the contiguous allocation policy, an alternative approach is to move the volume to a disk area with sufficient free extents. See <a rel="nofollow" class="external autonumber" href="https://superuser.com/questions/435075/how-to-align-logical-volumes-on-contiguous-physical-extents">[6]</a>.
</p>
<h3>
<span id="Command_.22grub-mkconfig.22_reports_.22unknown_filesystem.22_errors"></span><span class="mw-headline" id='Command_"grub-mkconfig"_reports_"unknown_filesystem"_errors'>Command "grub-mkconfig" reports "unknown filesystem" errors</span>
</h3>
<p>Make sure to remove snapshot volumes before <a href="../en/GRUB.html#Generate_the_main_configuration_file" title="GRUB">generating grub.cfg</a>.
</p>
<h3><span class="mw-headline" id="Thinly-provisioned_root_volume_device_times_out">Thinly-provisioned root volume device times out</span></h3>
<p>With a large number of snapshots, <code>thin_check</code> runs for a long enough time so that waiting for the root device times out. To compensate, add the <code>rootdelay=60</code> kernel boot parameter to your boot loader configuration.  Or, make <code>thin_check</code> skip checking block mappings (see <a rel="nofollow" class="external autonumber" href="https://www.redhat.com/archives/linux-lvm/2016-January/msg00010.html">[7]</a>) and <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/lvm/lvm.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">thin_check_options = [ "-q", "--clear-needs-check-flag", "--skip-mappings" ]</pre>
<h3><span class="mw-headline" id="Delay_on_shutdown">Delay on shutdown</span></h3>
<p>If you use RAID, snapshots or thin provisioning and experience a delay on shutdown, make sure <code>lvm2-monitor.service</code> is <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Started">started</a>. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/50420">FS#50420</a>.
</p>
<h3><span class="mw-headline" id="Hibernating_into_a_thinly-provisioned_swap_volume">Hibernating into a thinly-provisioned swap volume</span></h3>
<p>See <a href="../en/Power_management/Suspend_and_hibernate.html#Hibernation_into_a_thinly-provisioned_LVM_volume" title="Power management/Suspend and hibernate">Power management/Suspend and hibernate#Hibernation into a thinly-provisioned LVM volume</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://sourceware.org/lvm2/">LVM2 Resource Page</a> on SourceWare.org</li>
<li><a href="https://wiki.gentoo.org/wiki/LVM" class="extiw" title="gentoo:LVM">Gentoo:LVM</a></li>
<li><a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_managing_logical_volumes/index">Red Hat Enterprise 9: Configuring and managing logical volumes</a></li>
<li>
<a rel="nofollow" class="external text" href="https://www.tutonics.com/2012/11/ubuntu-lvm-guide-part-1.html">Ubuntu LVM Guide Part 1</a><a rel="nofollow" class="external text" href="https://www.tutonics.com/2012/12/lvm-guide-part-2-snapshots.html">Part 2 details snapshots</a>
</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Storage_virtualization.html" title="Category:Storage virtualization">Storage virtualization</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=LVM&amp;oldid=817708">https://wiki.archlinux.org/index.php?title=LVM&amp;oldid=817708</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 2 October 2024, at 19:37.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
