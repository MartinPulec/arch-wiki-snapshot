<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>BIND - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-BIND rootpage-BIND skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Restrict_access_to_localhost" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restrict_access_to_localhost">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Restrict access to localhost</div>
			</a>
			
			<ul id="toc-Restrict_access_to_localhost-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Set_up_DNS_forwarding" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Set_up_DNS_forwarding">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Set up DNS forwarding</div>
			</a>
			
			<ul id="toc-Set_up_DNS_forwarding-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Serve_DNS_over_TLS_or_HTTPS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Serve_DNS_over_TLS_or_HTTPS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Serve DNS over TLS or HTTPS</div>
			</a>
			
			<ul id="toc-Serve_DNS_over_TLS_or_HTTPS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-A_configuration_template_for_running_a_domain" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#A_configuration_template_for_running_a_domain">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>A configuration template for running a domain</div>
		</a>
		
			<button aria-controls="toc-A_configuration_template_for_running_a_domain-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle A configuration template for running a domain subsection</span>
			</button>
		
		<ul id="toc-A_configuration_template_for_running_a_domain-sublist" class="vector-toc-list">
			<li id="toc-Creating_a_zonefile" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Creating_a_zonefile">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Creating a zonefile</div>
			</a>
			
			<ul id="toc-Creating_a_zonefile-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuring_master_server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuring_master_server">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Configuring master server</div>
			</a>
			
			<ul id="toc-Configuring_master_server-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Allow_recursion" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Allow_recursion">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Allow recursion</div>
		</a>
		
		<ul id="toc-Allow_recursion-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuring_BIND_to_serve_DNSSEC_signed_zones" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuring_BIND_to_serve_DNSSEC_signed_zones">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Configuring BIND to serve DNSSEC signed zones</div>
		</a>
		
		<ul id="toc-Configuring_BIND_to_serve_DNSSEC_signed_zones-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Automatically_listen_on_new_interfaces" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Automatically_listen_on_new_interfaces">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Automatically listen on new interfaces</div>
		</a>
		
		<ul id="toc-Automatically_listen_on_new_interfaces-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Running_BIND_in_a_chrooted_environment" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Running_BIND_in_a_chrooted_environment">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Running BIND in a chrooted environment</div>
		</a>
		
			<button aria-controls="toc-Running_BIND_in_a_chrooted_environment-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Running BIND in a chrooted environment subsection</span>
			</button>
		
		<ul id="toc-Running_BIND_in_a_chrooted_environment-sublist" class="vector-toc-list">
			<li id="toc-Creating_the_jail_house" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Creating_the_jail_house">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>Creating the jail house</div>
			</a>
			
			<ul id="toc-Creating_the_jail_house-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Service_unit" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Service_unit">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.2</span>Service unit</div>
			</a>
			
			<ul id="toc-Service_unit-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Serve_the_root_zone_locally" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Serve_the_root_zone_locally">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Serve the root zone locally</div>
		</a>
		
		<ul id="toc-Serve_the_root_zone_locally-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">BIND</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/BIND" title="BIND – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/BIND.html" title="BIND – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/BIND" title="BIND – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/BIND" title="BIND – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Domain_name_resolution.html" title="Domain name resolution">Domain name resolution</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.isc.org/downloads/bind/">BIND</a> (or named) is the most widely used Domain Name System (DNS) server.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The organization developing BIND is serving security notices to paying customers up to four days before Linux distributions or the general public.<a rel="nofollow" class="external autonumber" href="https://kb.isc.org//docs/aa-00861">[1]</a>
</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bind">bind</a></span> package.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> the <code>named.service</code> systemd unit.
</p>
<p>To use the DNS server locally, use the <code>127.0.0.1</code> nameserver (meaning clients like Firefox resolve via 127.0.0.1), see <a href="../en/Domain_name_resolution.html" title="Domain name resolution">Domain name resolution</a>. This will however require you to <a href="#Allow_recursion">#Allow recursion</a> while a firewall might block outside queries to your local named.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>BIND is configured in <code>/etc/named.conf</code>. The available options are documented in <span class="plainlinks archwiki-template-man" title="$ man 5 named.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/named.conf.5">named.conf(5)</a></span>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reload">Reload</a> the <code>named.service</code> unit to apply configuration changes.
</p>
<h3><span class="mw-headline" id="Restrict_access_to_localhost">Restrict access to localhost</span></h3>
<p>BIND by default listens on port 53 of all interfaces and IP addresses. To only allow connections from localhost add the following line to the <code>options</code> section in <code>/etc/named.conf</code>:
</p>
<pre>listen-on { 127.0.0.1; };
listen-on-v6 { ::1; };
</pre>
<h3><span class="mw-headline" id="Set_up_DNS_forwarding">Set up DNS forwarding</span></h3>
<p>To make BIND forward DNS queries to another DNS server add the <code>forwarders</code> clause to the <code>options</code> section.
</p>
<p>Example to make BIND forward to the Google Public DNS servers:
</p>
<pre>forwarders {
    8.8.8.8; 2001:4860:4860::8888;
    8.8.4.4; 2001:4860:4860::8844;
};
</pre>
<p>(As of 9.18, only plaintext DNS servers are supported as forwarders.)
</p>
<h3><span class="mw-headline" id="Serve_DNS_over_TLS_or_HTTPS">Serve DNS over TLS or HTTPS</span></h3>
<p>To enable serving DNS over TLS or HTTPS in BIND 9.18, define a <a rel="nofollow" class="external text" href="https://downloads.isc.org/isc/bind9/9.18.0/doc/arm/html/reference.html#tls">tls</a> block specifying your certificate, then add <a rel="nofollow" class="external text" href="https://downloads.isc.org/isc/bind9/9.18.0/doc/arm/html/reference.html#interfaces">listen-on</a> clauses enabling DNS over TLS and HTTPS listeners (as well as a standard DNS listener).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/named.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">tls mycert {
    cert-file "&lt;path&gt;.crt";
    key-file "&lt;path&gt;.key";
};

options {
    // Standard port 53 listeners need to be re-added explicitly
    listen-on    { any; };
    listen-on-v6 { any; };
    
    // Add a DNS over TLS listener on standard port 853
    listen-on    tls mycert { any; };
    listen-on-v6 tls mycert { any; };
    
    // Add a DNS over HTTPS listener on custom port
    listen-on    port 9443 tls mycert http default { any; };
    listen-on-v6 port 9443 tls mycert http default { any; };
    
    // If needed, add a cleartext HTTP listener for a reverse proxy
    //listen-on    port 8443 tls none http default { 127.0.0.1; };
    //listen-on-v6 port 8443 tls none http default { ::1; };
};
...
</pre>
<p>Note that <code>tls{}</code> is defined at the top level, <i>not</i> inside the <code>options{}</code> block.
</p>
<h2><span class="mw-headline" id="A_configuration_template_for_running_a_domain">A configuration template for running a domain</span></h2>
<p>Following is a simple home nameserver being set up, using <i>domain.tld</i> as the domain being served world-wide like this wiki's <i>archlinux.org</i> domain is.
</p>
<p>A more elaborate example is <a rel="nofollow" class="external text" href="https://www.howtoforge.com/two_in_one_dns_bind9_views">DNS server with BIND9</a>, while <a rel="nofollow" class="external text" href="https://www.brennan.id.au/08-Domain_Name_System_BIND.html#yourdomain">this shows</a> how to set up internal network name resolution.
</p>
<h3><span class="mw-headline" id="Creating_a_zonefile">Creating a zonefile</span></h3>
<p>Create <code>/var/named/domain.tld.zone</code>.
</p>
<pre>$ORIGIN domain.tld.
$TTL 2h

@               SOA     ns1 hostmaster (
                                2018111111 ; Serial
                                8h         ; Refresh
                                30m        ; Retry
                                1w         ; Expire
                                1h )       ; Negative Cache TTL
                NS      ns1
                NS      ns2
                
@               A       203.0.113.1
                AAAA    2001:db8:113::1
                MX      10 mail
                TXT     "v=spf1 mx"

www             A       203.0.113.1
                AAAA    2001:db8:113::1

ns1             A       203.0.113.4
                AAAA    2001:db8:113::4

ns2             A       198.51.100.5
                AAAA    2001:db8:5100::5

mail            A       198.51.100.6
                AAAA    2001:db8:5100::6
imap            CNAME   mail
smtp            CNAME   mail</pre>
<p><code>$ORIGIN</code> defines the default suffix for all names which do not already end with a <code>.</code> (dot), e.g. <code>mail</code> will be expanded to <code>mail.$ORIGIN</code> ⇒ <code>mail.domain.tld.</code> everywhere.
</p>
<p><code>$TTL</code> defines the default time-to-live (i.e. cache expiry time) for all records which do not have their own TTL specified. Here it is 2 hours.
</p>
<p>Serial must be <b>incremented</b> manually before reloading named every time you change a resource record for the zone. Otherwise secondary servers (replicas or slaves) will not re-transfer the zone: they only do it if the serial is <b>greater</b> than that of the last time they transferred the zone. This example uses the somewhat common <code>YYYYMMDDXX</code> format, but this is not required; the serial number can also just start at 1.
</p>
<h3><span class="mw-headline" id="Configuring_master_server">Configuring master server</span></h3>
<p>Add your zone to <code>/etc/named.conf</code>:
</p>
<pre> zone "domain.tld" IN {
         type master;
         file "domain.tld.zone";
         allow-update { none; };
 };
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reload">Reload</a> the <code>named.service</code> unit to apply the configuration change.
</p>
<h2><span class="mw-headline" id="Allow_recursion">Allow recursion</span></h2>
<p>If you are running your own DNS server, you might as well use it for all DNS lookups, or even <a href="#Serve_the_root_zone_locally">#Serve the root zone locally</a> by yourself. The former will require the ability to do <i>recursive</i> lookups. In order to prevent <a rel="nofollow" class="external text" href="https://www.us-cert.gov/ncas/alerts/TA13-088A">DNS Amplification Attacks</a>, recursion is turned off by default for most resolvers. The default Arch <code>/etc/named.conf</code> file allows for recursion only on the loopback interface:
</p>
<pre>allow-recursion { 127.0.0.1; ::1; };
</pre>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> LAN networking is not recursive. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:BIND.html">Talk:BIND</a>)</div>
</div>
<p>If you want to provide name service for your local network; e.g. 192.168.0.0/24, you must add the appropriate range of IP addresses to <code>/etc/named.conf</code>:
</p>
<pre>allow-recursion {
    192.168.0.0/24;
    fd01:2345:6789::/64;
    127.0.0.1;
    ::1;
};
</pre>
<h2><span class="mw-headline" id="Configuring_BIND_to_serve_DNSSEC_signed_zones">Configuring BIND to serve DNSSEC signed zones</span></h2>
<p><a href="../en/DNSSEC.html" title="DNSSEC">DNSSEC</a> validation is enabled by default. Do not forget to check that "edns" is not disabled.
</p>
<p>On master DNS server:
</p>
<ul><li>generate KSK and ZSK keys:</li></ul>
<pre> $ dnssec-keygen -a NSEC3RSASHA1 -b 2048 -n ZONE example.com
 $ dnssec-keygen -f KSK -a NSEC3RSASHA1 -b 4096 -n ZONE example.com
</pre>
<ul><li>change zone configuration:</li></ul>
<pre> zone "example.com" {
       type master;
       allow-transfer { ... };
       auto-dnssec maintain;
       inline-signing yes;
       key-directory "master/";
       file "master/example.com.zone";
 };
</pre>
<p>Now bind will sign zone automatically. (This example assumes that all required files are in <code>/var/named/master/</code>)
</p>
<p>Then you should pass DS records (from <code>dsset-example.com.</code> file) to parent zone owner probably using your registrar website. It glues parent zone with your KSK.
</p>
<p>KSK (and corresponding DS records) should be changed rarely because it needs manual intervention, ZSK can be changed more often because this key is usually shorter to be faster in signature checking.
</p>
<p>You can schedule old ZSK key expiration and generate new one using:
</p>
<pre> $ dnssec-settime -I +172800 -D +345600 Kexample.com.+000+111111.key
 $ dnssec-keygen -S Kexample.com.+000+111111.key -i 152800
</pre>
<p>Bind should automatically use new ZSK key at appropriate time.
</p>
<p>There are external mechanisms such as OpenDNSSEC with fully-automatic key rollover available.
</p>
<h2><span class="mw-headline" id="Automatically_listen_on_new_interfaces">Automatically listen on new interfaces</span></h2>
<p>By default bind scan for new interfaces and stop listening on interfaces which no longer exist every hour. You can tune this value by adding :
</p>
<pre>interface-interval <i>rescan-timeout-in-minutes</i>;
</pre>
<p>parameter into <code>named.conf</code> options section, the max value is 28 days (40320 min). You can disable this feature by setting its value to 0. 
</p>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the service.
</p>
<h2><span class="mw-headline" id="Running_BIND_in_a_chrooted_environment">Running BIND in a chrooted environment</span></h2>
<p>Running in a <a href="../en/Chroot.html" title="Chroot">chroot</a> environment is not required but improves security.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> <code>/srv/</code> is an odd place for chroots, <code>/var/lib/</code> would be a more common place. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:BIND.html">Talk:BIND</a>)</div>
</div>
<h3><span class="mw-headline" id="Creating_the_jail_house">Creating the jail house</span></h3>
<p>In order to do this, we first need to create a place to keep the jail, we shall use <code>/srv/named</code>, and then put the required files into the jail.
</p>
<pre># mkdir -p /srv/named/{dev,etc,usr/lib/engines,var/{run,log,named}}
</pre>
<p>Copy over required system files:
</p>
<pre># cp -av /etc/{localtime,named.conf} /srv/named/etc/
# cp -av /usr/lib/engines-1.1/* /srv/named/usr/lib/engines/
# cp -av /var/named/* /srv/named/var/named/.
</pre>
<p>Set up required nodes in <code>/dev/</code>:
</p>
<pre># mknod /srv/named/dev/null c 1 3
# mknod /srv/named/dev/random c 1 8
</pre>
<p>Set <a href="../en/File_permissions_and_attributes.html#Changing_ownership" class="mw-redirect" title="Ownership">ownership</a> of the files:
</p>
<pre># chown -R named:named /srv/named
</pre>
<p>This should create the required file system for the jail.
</p>
<h3><span class="mw-headline" id="Service_unit">Service unit</span></h3>
<p>Next we need a <a href="../en/Systemd.html#Replacement_unit_files" class="mw-redirect" title="Replacement unit file">replacement unit file</a> so that the service calls bind which will allow force bind into the chroot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/named-chroot.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ExecStart=/usr/bin/named -4 -f -u named -t "/srv/named"</pre>
<p>Now, reload systemd with <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Daemon-reload">daemon-reload</a>, and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the <code>named-chroot.service</code>.
</p>
<h2><span class="mw-headline" id="Serve_the_root_zone_locally">Serve the root zone locally</span></h2>
<p>If you do not want to rely on <a href="../en/Domain_name_resolution.html#Third-party_DNS_services" title="Domain name resolution">third-party DNS services</a>, you can serve the root zone locally following <a href="https://tools.ietf.org/html/rfc7706" class="extiw" title="rfc:7706">RFC:7706</a>. This can be achieved by using BIND as a DNS recursive resolver.
</p>
<p>To manage a recursive resolver, you typically need to configure a <i>root hints file</i>. This file contains the names and IP addresses of the authoritative name servers for the root zone.
</p>
<p>Grab the file from <a rel="nofollow" class="external text" href="https://www.iana.org/domains/root/files">IANA website</a> and place it into <code>/var/named</code>.
</p>
<p>Edit your server config, adding the respective file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/named.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zone "." IN {
    type hint;
    file "named.root";
};
</pre>
<p>Recursion also should be allowed in the config. See <a href="#Allow_recursion">#Allow recursion</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.isc.org/downloads/bind/doc/">BIND 9 Administrator Reference Manual (ARM)</a></li>
<li><a rel="nofollow" class="external text" href="https://bind9.readthedocs.io/en/latest/manpages.html">BIND ARM on readthedocs</a></li>
<li><a rel="nofollow" class="external text" href="https://kb.isc.org/docs/aa-01310">BIND knowledgebase</a></li>
<li><a rel="nofollow" class="external text" href="https://www.isc.org/">Internet Systems Consortium, Inc. (ISC)</a></li>
<li>
<a rel="nofollow" class="external text" href="http://www.netwidget.net/books/apress/dns/intro.html">Pro DNS and BIND</a> with <a rel="nofollow" class="external text" href="https://www.zytrax.com/books/dns/">abbreviated version online</a>
</li>
<li><a rel="nofollow" class="external text" href="https://cira.ca/domain-name-system-dns-glossary">DNS Glossary</a></li>
<li><a rel="nofollow" class="external text" href="https://lists.archlinux.org/archives/list/arch-dev-public@lists.archlinux.org/thread/RR3TKD5ZWTYKQHQBFPHTHDLN3JKUOOWV/">Archived mailing list discussion on BIND's future</a></li>
<li>
<a rel="nofollow" class="external text" href="https://www.heise.de/netze/rfc/rfcs/rfc7706.shtml#page-9">root zone transfer made simple - serve root@home</a> copy the <code>/etc/named.conf</code>, restart BIND &amp; enjoy!</li>
<li><a rel="nofollow" class="external text" href="https://www.dnssec.net/practical-documents">DNSSEC</a></li>
<li><a rel="nofollow" class="external text" href="https://www.cymru.com/Documents/secure-bind-template.html">a BIND configuration template</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Domain_Name_System.html" title="Category:Domain Name System">Domain Name System</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=BIND&amp;oldid=811996">https://wiki.archlinux.org/index.php?title=BIND&amp;oldid=811996</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 6 July 2024, at 07:57.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
