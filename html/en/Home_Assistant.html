<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Home Assistant - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Home_Assistant rootpage-Home_Assistant skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Install" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Install">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Install</div>
		</a>
		
			<button aria-controls="toc-Install-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Install subsection</span>
			</button>
		
		<ul id="toc-Install-sublist" class="vector-toc-list">
			<li id="toc-Home_Assistant_Supervised" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Home_Assistant_Supervised">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Home Assistant Supervised</div>
			</a>
			
			<ul id="toc-Home_Assistant_Supervised-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Usage</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Using_MariaDB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_MariaDB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Using MariaDB</div>
			</a>
			
			<ul id="toc-Using_MariaDB-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_Postgresql" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_Postgresql">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Using Postgresql</div>
			</a>
			
			<ul id="toc-Using_Postgresql-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-No_access_to_USB_devices" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_access_to_USB_devices">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>No access to USB devices</div>
			</a>
			
			<ul id="toc-No_access_to_USB_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth_integration_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Bluetooth_integration_not_working">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Bluetooth integration not working</div>
			</a>
			
			<ul id="toc-Bluetooth_integration_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-ModuleNotFoundErrors_in_logs" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ModuleNotFoundErrors_in_logs">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>ModuleNotFoundErrors in logs</div>
			</a>
			
			<ul id="toc-ModuleNotFoundErrors_in_logs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Permission_denied_error_loop" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Permission_denied_error_loop">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Permission denied error loop</div>
			</a>
			
			<ul id="toc-Permission_denied_error_loop-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Home Assistant</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Home_Assistant" title="Home Assistant – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Home_Assistant.html" title="Home Assistant – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Home_Assistant" title="Home Assistant – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Home_Assistant_Supervised.html" title="Home Assistant Supervised">Home Assistant Supervised</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.home-assistant.io/">Home Assistant</a> is an open source home automation software that puts local control and privacy first. Powered by a worldwide community of tinkerers and DIY enthusiasts.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Install">Install</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=home-assistant">home-assistant</a></span> package. This is installing the core flavor of Home Assistant.
</p>
<h3><span class="mw-headline" id="Home_Assistant_Supervised">Home Assistant Supervised</span></h3>
<p>Refer to <a href="../en/Home_Assistant_Supervised.html" title="Home Assistant Supervised">Home Assistant Supervised</a>.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Configuration files are stored at <code>/var/lib/hass/</code>. If no configuration exists, a default configuration will be written at startup.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>To start Home Assistant, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>home-assistant.service</code>.
</p>
<p>The first start may take up to 20 minutes because the required packages will be downloaded and installed.<a rel="nofollow" class="external autonumber" href="https://www.home-assistant.io/docs/installation/">[1]</a> You can see the progress in the logs.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Follow the first-time update process using <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journalctl">journalctl</a>:</div>
<pre># journalctl -fu home-assistant
</pre>
<p>By default, the web interface is available at <a rel="nofollow" class="external free" href="http://localhost:8123">http://localhost:8123</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The web interface requires the <a rel="nofollow" class="external text" href="https://pypi.org/project/home-assistant-frontend/">home-assistant-frontend</a> Python package.</div>
<p>The Backup restore function is not available in the UI. The backup can be restored by extraction of the tar.gz file in the Backup as user hass:
</p>
<pre># tar --strip-components=1 -xzf homeassistant.tar.gz -C /var/lib/hass
</pre>
<h3><span class="mw-headline" id="Using_MariaDB">Using MariaDB</span></h3>
<p>By default, SQLite is used for the recorder/history integration within Home Assistant. A noticeable performance boost is achievable by using MariaDB (especially for larger setups). Home assistant uses SQLAlchemy which means that any backend is supported, like MySQL, MariaDB, PostgreSQL, or MS SQL Server. Here we only discuss MariaDb, for others please refer to the <a rel="nofollow" class="external text" href="https://www.home-assistant.io/integrations/recorder/">recorder integration documentation</a>.
</p>
<p>If not already installed, please refer to <a href="../en/MariaDB.html" title="MariaDB">MariaDB</a> for installation details.
</p>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-mysqlclient">python-mysqlclient</a></span> package dependency.
</p>
<p>Create a new database, the example below shows a single username per service, with wildcard access to all databases having the username as a prefix e.g.:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ mysql -u root -p</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CREATE USER '<b>username'</b>@'localhost' IDENTIFIED BY '<b>some_pass'</b> ;
CREATE DATABASE <b>username</b>;
GRANT ALL PRIVILEGES ON <b>username</b>.* TO '<b>username'</b>@'localhost';
FLUSH PRIVILEGES;
quit;</pre>
<p>Add to your configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/hass/configuration.yaml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">recorder:
  db_url: !secret recorder_mariadb_url
</pre>
<p>Add to your secrets file (if not using a Unix socket, see the <a rel="nofollow" class="external text" href="https://www.home-assistant.io/integrations/recorder/">recorder integration documentation</a> for alternative URLs):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/hass/secrets.yaml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">recorder_mariadb_url: "mysql://USER:PASSWORD@localhost/DATABASE?unix_socket=/var/run/mysqld/mysqld.sock&amp;charset=utf8mb4"</pre>
<p>Finally, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>home-assistant.service</code>. The database should now start to populate. For more information refer to the <a rel="nofollow" class="external text" href="https://www.home-assistant.io/integrations/recorder/">recorder integration documentation</a>.
</p>
<h3><span class="mw-headline" id="Using_Postgresql">Using Postgresql</span></h3>
<p>You need to install the python module called <i>psycopg2</i> into the venv of hass.
</p>
<p>You will need to add a systemd <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/NetworkManager.service.d/postgresql.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStartPre=/var/lib/hass/.venv/bin/python -m pip install psycopg2</pre>
<p>This will make sure psycopg2 is a module that is always installed.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="No_access_to_USB_devices">No access to USB devices</span></h3>
<p>In the default installation, the Home Assistant may not have the necessary access to work with some devices, such as a Zigbee USB dongle. This is because such devices are controlled by the <code>uucp</code> system group. 
</p>
<p><a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">Edit</a> the <code>home-assistant.service</code> and add <code>SupplementaryGroups=uucp</code> to the <code>[Service]</code> section so that the default <code>hass</code> user belongs to the right group. 
</p>
<p>Then, after a <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Daemon-reload">daemon-reload</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> of <code>home-assistant.service</code> it should be up and running.<a rel="nofollow" class="external autonumber" href="https://community.home-assistant.io/t/solved-zha-connection-failed-with-sonoff-zigbee-3-0-dongle/349855/12">[2]</a>
</p>
<h3><span class="mw-headline" id="Bluetooth_integration_not_working">Bluetooth integration not working</span></h3>
<p>If you are experiencing issues with Bluetooth integration and the below error message appears in your log it is because that the Bluetooth integration connects over dbus and there is an <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/9503">old systemd bug</a>.
</p>
<pre>Config entry 'Bluetooth' for bluetooth integration not ready yet: DBus connection broken: [Errno 32] Broken pipe; try restarting `bluetooth` and `dbus`; Retrying in background
</pre>
<p>A <a rel="nofollow" class="external text" href="https://github.com/home-assistant/core/issues/77483#issuecomment-1233350249">solution</a> is to switch to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dbus-broker">dbus-broker</a></span>.
</p>
<p>Alternatively, add a system user and group <code>hass</code>: 
</p>
<pre># useradd -U -r -s /usr/bin/nologin hass
</pre>
<p>and use a <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a> for <code>home-assistant.service</code>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/home-assistant.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
DynamicUser=false</pre>
<p>Note that in some cases, this prevents the service from starting due to a permission issue.
</p>
<p>Separately, the Passive BLE Monitor integration requires additional permissions for python to read raw data from the Bluetooth adapter. The integration's documented method of <code>sudo setcap 'cap_net_raw,cap_net_admin+eip' `readlink -f \`which python3\``</code> is insufficient because the Arch home-assistant package runs python in a virtual environment as a dynamic user. To get around this, add to the service override file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/home-assistant.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
AmbientCapabilities=CAP_NET_RAW
CapabilityBoundingSet=CAP_NET_RAW</pre>
<p>See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=279268">this user forum discussion</a> for more information.
</p>
<h3><span class="mw-headline" id="ModuleNotFoundErrors_in_logs">ModuleNotFoundErrors in logs</span></h3>
<p>If Home Assistant is broken after a system package upgrade, it could be caused by a bad interaction between the system packages and Home Assistant's managed Python libraries. To reset Home Assistant's Python libraries and reinstall them from scratch, delete the modules directory: 
</p>
<pre># rm -r /var/lib/hass/deps/lib
</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>home-assistant.service</code>.
</p>
<p>If the first restart produces more ModuleNotFoundErrors, it might be necessary to a second restart. Home Assistant will detect that its modules are missing and automatically reinstall them.
</p>
<h3><span class="mw-headline" id="Permission_denied_error_loop">Permission denied error loop</span></h3>
<p>If Home Assistant does not start up, and the journal logs contain:
</p>
<pre>home-assistant.service: Unable to locate executable '/var/lib/hass/.venv/bin/hass': Permission denied
home-assistant.service: Failed at step EXEC spawning /var/lib/hass/.venv/bin/hass: Permission denied
</pre>
<p>This issue seems to be caused by the missing hass user/group, causing python modules to be installed with root permissions and the <code>/var/lib/hass/</code> folder is symlinked to <code>/var/lib/private/hass</code>.
</p>
<p>To solve this, add a system user and group <code>hass</code>:
</p>
<pre># useradd -U -r -s /usr/bin/nologin hass
</pre>
<p>Reset Home Assistant's Python libraries and reinstall them from scratch, by deleting the modules directories:
</p>
<pre># rm -r /var/lib/hass/ /var/lib/private/hass
</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>home-assistant.service</code>.
</p>
<p>Now the <code>/var/lib/hass/</code> should be a folder (not a symlink) with user <code>hass</code> being the owner.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.home-assistant.io/">Home Assistant homepage</a></li>
<li><a rel="nofollow" class="external text" href="https://www.home-assistant.io/docs/">Home Assistant documentation</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Servers.html" title="Category:Servers">Servers</a></li>
<li><a href="../en/Category:Web_applications.html" title="Category:Web applications">Web applications</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Home_Assistant&amp;oldid=824572">https://wiki.archlinux.org/index.php?title=Home_Assistant&amp;oldid=824572</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 5 January 2025, at 15:46.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
