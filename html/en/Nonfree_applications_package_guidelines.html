<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Nonfree applications package guidelines - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Nonfree_applications_package_guidelines rootpage-Nonfree_applications_package_guidelines skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Rationale" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Rationale">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Rationale</div>
		</a>
		
		<ul id="toc-Rationale-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Common_rules" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Common_rules">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Common rules</div>
		</a>
		
			<button aria-controls="toc-Common_rules-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Common rules subsection</span>
			</button>
		
		<ul id="toc-Common_rules-sublist" class="vector-toc-list">
			<li id="toc-Avoid_nonfree_software_when_possible" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Avoid_nonfree_software_when_possible">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Avoid nonfree software when possible</div>
			</a>
			
			<ul id="toc-Avoid_nonfree_software_when_possible-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_open_source_variants_where_possible" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Use_open_source_variants_where_possible">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Use open source variants where possible</div>
			</a>
			
			<ul id="toc-Use_open_source_variants_where_possible-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Keep_it_simple" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Keep_it_simple">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Keep it simple</div>
			</a>
			
			<ul id="toc-Keep_it_simple-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Package_naming" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Package_naming">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Package naming</div>
		</a>
		
		<ul id="toc-Package_naming-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-File_placement" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#File_placement">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>File placement</div>
		</a>
		
		<ul id="toc-File_placement-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Missing_files" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Missing_files">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Missing files</div>
		</a>
		
			<button aria-controls="toc-Missing_files-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Missing files subsection</span>
			</button>
		
		<ul id="toc-Missing_files-sublist" class="vector-toc-list">
			<li id="toc-Files_can_only_be_obtained_in_a_distributed_archive/installer" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Files_can_only_be_obtained_in_a_distributed_archive/installer">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Files can only be obtained in a distributed archive/installer</div>
			</a>
			
			<ul id="toc-Files_can_only_be_obtained_in_a_distributed_archive/installer-sublist" class="vector-toc-list">
				<li id="toc-Scheme_to_choose" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Scheme_to_choose">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.1</span>Scheme to choose</div>
			</a>
			
			<ul id="toc-Scheme_to_choose-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Files_can_only_be_obtained_in_an_distributed_compact-disk_or_other_type_of_optical_disk_media" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Files_can_only_be_obtained_in_an_distributed_compact-disk_or_other_type_of_optical_disk_media">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Files can only be obtained in an distributed compact-disk or other type of optical disk media</div>
			</a>
			
			<ul id="toc-Files_can_only_be_obtained_in_an_distributed_compact-disk_or_other_type_of_optical_disk_media-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Files_can_be_obtained_from_several_ways" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Files_can_be_obtained_from_several_ways">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Files can be obtained from several ways</div>
			</a>
			
			<ul id="toc-Files_can_be_obtained_from_several_ways-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Advanced_topics" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Advanced_topics">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Advanced topics</div>
		</a>
		
			<button aria-controls="toc-Advanced_topics-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Advanced topics subsection</span>
			</button>
		
		<ul id="toc-Advanced_topics-sublist" class="vector-toc-list">
			<li id="toc-Custom_DLAGENTS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Custom_DLAGENTS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Custom DLAGENTS</div>
			</a>
			
			<ul id="toc-Custom_DLAGENTS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unpacking" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unpacking">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Unpacking</div>
			</a>
			
			<ul id="toc-Unpacking-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Getting_icons_for_.desktop_files" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Getting_icons_for_.desktop_files">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Getting icons for .desktop files</div>
			</a>
			
			<ul id="toc-Getting_icons_for_.desktop_files-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Auto-bumping_your_pkgver" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Auto-bumping_your_pkgver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Auto-bumping your pkgver</div>
			</a>
			
			<ul id="toc-Auto-bumping_your_pkgver-sublist" class="vector-toc-list">
				<li id="toc-From_the_installer_package" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#From_the_installer_package">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.1</span>From the installer package</div>
			</a>
			
			<ul id="toc-From_the_installer_package-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-From_the_main_executable" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#From_the_main_executable">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.2</span>From the main executable</div>
			</a>
			
			<ul id="toc-From_the_main_executable-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-From_a_Debian_(.deb)_file" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#From_a_Debian_(.deb)_file">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.3</span>From a Debian (.deb) file</div>
			</a>
			
			<ul id="toc-From_a_Debian_(.deb)_file-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Nonfree applications package guidelines</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%83%8E%E3%83%B3%E3%83%95%E3%83%AA%E3%83%BC%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3" title="ノンフリーアプリケーションパッケージガイドライン – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Nonfree_applications_package_guidelines.html" title="Nonfree applications package guidelines – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="toc" style="display:block; text-align: center; margin-bottom: 1em;">
<b><a href="../en/Arch_package_guidelines.html" title="Arch package guidelines">Arch package guidelines</a></b>
<hr>
<p><a href="../en/32-bit_package_guidelines.html" title="32-bit package guidelines">32-bit</a> – <a href="../en/CLR_package_guidelines.html" title="CLR package guidelines">CLR</a> – <a href="../en/CMake_package_guidelines.html" title="CMake package guidelines">CMake</a> – <a href="../en/Cross-compiling_tools_package_guidelines.html" title="Cross-compiling tools package guidelines">Cross</a> – <a href="../en/DKMS_package_guidelines.html" title="DKMS package guidelines">DKMS</a> – <a href="../en/Eclipse_plugin_package_guidelines.html" title="Eclipse plugin package guidelines">Eclipse</a> – <a href="../en/Electron_package_guidelines.html" title="Electron package guidelines">Electron</a> – <a href="../en/Font_package_guidelines.html" title="Font package guidelines">Font</a> – <a href="../en/Free_Pascal_package_guidelines.html" title="Free Pascal package guidelines">Free Pascal</a> – <a href="../en/GNOME_package_guidelines.html" title="GNOME package guidelines">GNOME</a> – <a href="../en/Go_package_guidelines.html" title="Go package guidelines">Go</a> – <a href="../en/Haskell_package_guidelines.html" title="Haskell package guidelines">Haskell</a> – <a href="../en/Java_package_guidelines.html" title="Java package guidelines">Java</a> – <a href="../en/KDE_package_guidelines.html" title="KDE package guidelines">KDE</a> – <a href="../en/Kernel_module_package_guidelines.html" title="Kernel module package guidelines">Kernel modules</a> – <a href="../en/Lisp_package_guidelines.html" title="Lisp package guidelines">Lisp</a> – <a href="../en/Meson_package_guidelines.html" title="Meson package guidelines">Meson</a> – <a href="../en/MinGW_package_guidelines.html" title="MinGW package guidelines">MinGW</a> – <a href="../en/Node.js_package_guidelines.html" title="Node.js package guidelines">Node.js</a> – <a class="mw-selflink selflink">Nonfree</a> – <a href="../en/OCaml_package_guidelines.html" title="OCaml package guidelines">OCaml</a> – <a href="../en/Perl_package_guidelines.html" title="Perl package guidelines">Perl</a> – <a href="../en/PHP_package_guidelines.html" title="PHP package guidelines">PHP</a> – <a href="../en/Python_package_guidelines.html" title="Python package guidelines">Python</a> – <a href="../en/R_package_guidelines.html" title="R package guidelines">R</a> – <a href="../en/Ruby_package_guidelines.html" title="Ruby package guidelines">Ruby</a> – <a href="../en/Rust_package_guidelines.html" title="Rust package guidelines">Rust</a> – <a href="../en/Shell_package_guidelines.html" title="Shell package guidelines">Shell</a> – <a href="../en/VCS_package_guidelines.html" title="VCS package guidelines">VCS</a> – <a href="../en/Web_application_package_guidelines.html" title="Web application package guidelines">Web</a> – <a href="../en/Wine_package_guidelines.html" title="Wine package guidelines">Wine</a>
</p>
</div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> cover about encrypting archives, symlinking etc. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Nonfree_applications_package_guidelines.html">Talk:Nonfree applications package guidelines</a>)</div>
</div>
<p>For many applications (most of which are Windows ones) there are neither sources nor tarballs available. Many of such applications can not be freely distributed because of license restrictions and/or lack of legal ways to obtain installer for no fee.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> All information here is package-agnostic, for information specific to the most typical nonfree software see <a href="../en/Wine_package_guidelines.html" class="mw-redirect" title="Wine PKGBUILD guidelines">Wine PKGBUILD guidelines</a>.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Rationale">Rationale</span></h2>
<p>There are multiple reasons for packaging even non-packageable software:
</p>
<ul><li>Simplification of installation/removal process</li></ul>
<dl>
<dd>This is applicable even to the simplest of applications, which consist of a single script to be installed into <code>/usr/bin</code>. Instead of issuing:</dd>
<dd><pre>$ chmod +x <i>filename</i><br>$ chown root:root <i>filename</i><br># cp <i>filename</i> /usr/bin/</pre></dd>
<dd>you can just issue <pre>$ makepkg -i</pre>
</dd>
<dd>Most non-free applications are obviously much more complicated, but the burden of downloading an archive/installer from a homepage (often full of advertising), unpacking/decrypting it, hand-writing stereotypical launcher scripts and doing other similar tasks can be effectively lightened by a well-written packaging script.</dd>
</dl>
<ul><li>Utilizing pacman capabilities</li></ul>
<dl><dd>The ability to track state, perform automatic updates of any installed piece of software, determine ownership of every single file, and store compressed packages in a well-organized cache is what makes GNU/Linux distributions so powerful.</dd></dl>
<ul><li>Sharing code and knowledge</li></ul>
<dl><dd>It is simpler to apply tweaks, fix bugs and seek/provide help in a single public place like the AUR versus submitting patches to proprietary developers who may have ceased support or asking vague questions on general purpose forums.</dd></dl>
<h2><span class="mw-headline" id="Common_rules">Common rules</span></h2>
<h3><span class="mw-headline" id="Avoid_nonfree_software_when_possible">Avoid nonfree software when possible</span></h3>
<p>Yes, it is better to leave this guide and spend some time searching (or maybe even creating) alternatives to an application you wanted to package because:
</p>
<ul>
<li>It is better to support software that is owned by us all than software that is owned by a company</li>
<li>It is better to support software that is actively maintained</li>
<li>It is better to support software that can be fixed if just one person out of millions cares enough</li>
</ul>
<h3><span class="mw-headline" id="Use_open_source_variants_where_possible">Use open source variants where possible</span></h3>
<p>Many commercial games (<a href="../en/List_of_games.html" class="mw-redirect" title="List of Applications/Games">some are listed in this Wiki</a>) have open source engines and many old games can be played with emulators such as <a href="https://en.wikipedia.org/wiki/ScummVM" class="extiw" title="wikipedia:ScummVM">ScummVM</a>. Using open source engines together with the original game assets gives users access to bug fixes and eliminates several issues caused by binary packages.
</p>
<h3><span class="mw-headline" id="Keep_it_simple">Keep it simple</span></h3>
<p>If the packaging of some program requires more effort and hacks than buying and using the original version, do the simplest thing—it is Arch!
</p>
<h2><span class="mw-headline" id="Package_naming">Package naming</span></h2>
<p>Before naming a package, search the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> for existing packages of software that you are packaging. Try to use established naming conventions, e.g. do not name your package <i>gish-hb</i> if there are existing packages called <i>aquaria-hib</i>, <i>crayonphysicsdeluxe-hib</i> and <i>uplink-hib</i>. Use the suffix <code>-bin</code> <b>always</b> unless you are certain there will never be a source-based package—a user submitting a source-based package of the software would have to ask the maintainer of your package (or, in the worst case, a <a href="../en/Package_Maintainers.html" class="mw-redirect" title="Package maintainer">Package maintainer</a>) to orphan the existing package so that their source-based package could be submitted, and both the original binary package and the new source-based package would end up having their respective <a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILDs</a> cluttered with additional <code>replaces</code> and <code>conflicts</code> entries.
</p>
<h2><span class="mw-headline" id="File_placement">File placement</span></h2>
<p>Again, analyze existing packages (if present) and decide whether or not you want to conflict with them. Do not place things under <code>/opt</code> unless you want to use some ugly hacks like giving ownership <code>root:games</code> to the package directory (so users in group <code>games</code> running the game can write files in the game's own folder).
</p>
<h2><span class="mw-headline" id="Missing_files">Missing files</span></h2>
<p>For most commercial games there is no way to (legally) download game files, which is the preferable way to get them for normal packages. Even when it is possible to download files after providing a password (like with all <a href="https://en.wikipedia.org/wiki/Humble_Indie_Bundle" class="extiw" title="wikipedia:Humble Indie Bundle">Humble Indie Bundle</a> games) asking user for this password and downloading somewhere in <code>build</code> function is not recommended for a variety of reasons (for example, the user may have no Internet access but have all files downloaded and stored locally).
</p>
<p>The subsections below provide recommendations for a few situations you may encounter.
</p>
<h3>
<span id="Files_can_only_be_obtained_in_a_distributed_archive.2Finstaller"></span><span class="mw-headline" id="Files_can_only_be_obtained_in_a_distributed_archive/installer">Files can only be obtained in a distributed archive/installer</span>
</h3>
<p>The software is only available via that archive/installer file, which must be obtained in order to get the missing files.
</p>
<p>Add the required archive/installer to the <code>source</code> array, renaming the source filename so the source's link in the AUR web interface looks different from names of files included in the source tarball:
</p>
<pre>sources=(... "<i>originalname</i>::<b>local:</b>//<i>originalname</i>")</pre>
<p>Also add a pinned comment like the one below to the package page in the AUR, and explain the details in the PKGBUILD:
</p>
<pre>Need archive/installer to work.</pre>
<h4><span class="mw-headline" id="Scheme_to_choose">Scheme to choose</span></h4>
<p>In case you use the <b>local://</b> scheme in a source array, makepkg behaves as though no scheme were specified, and the file must be manually placed in the same directory as the PKGBUILD.
</p>
<p>In case you use the <b>file://</b> scheme, you can additionally specify DLAGENTS for the file protocol, so it may be obtained in a special way. See examples <a href="#Custom_DLAGENTS">below</a>.
</p>
<p>However, there are still no clear rules which of these schemes you should use.
</p>
<h3><span class="mw-headline" id="Files_can_only_be_obtained_in_an_distributed_compact-disk_or_other_type_of_optical_disk_media">Files can only be obtained in an distributed compact-disk or other type of optical disk media</span></h3>
<p>The software is only available via an optical disk media (e.g. CD, DVD, Bluray etc.), which must be inserted into the optical disk drive in order get the missing files.
</p>
<p>Add an installer script and an <code>.install</code> file to the package contents.
</p>
<h3><span class="mw-headline" id="Files_can_be_obtained_from_several_ways">Files can be obtained from several ways</span></h3>
<p>Copying files from disk, downloading from Net or getting from archive during the <code>build</code> phase may look like a good idea but it is not recommended because it limits the user's possibilities and makes package installation interactive (which is generally discouraged and just annoying). Again, a good installer script and <code>.install</code> file can work instead.
</p>
<p>Few examples of various strategies for obtaining files required for package:
</p>
<ul><li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/worldofgoo/">worldofgoo</a></span><sup><small>AUR</small></sup> – dependency on user-provided file</li></ul>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> This page used to link to umineko-en and ut2004-anthology as examples, but they have been removed since they are no longer on the AUR, different examples should be provided. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Nonfree_applications_package_guidelines.html">Talk:Nonfree applications package guidelines</a>)</div>
</div>
<h2><span class="mw-headline" id="Advanced_topics">Advanced topics</span></h2>
<h3><span class="mw-headline" id="Custom_DLAGENTS">Custom DLAGENTS</span></h3>
<p>Some software authors aggressively protect their software from automatic downloading: ban certain "User-Agent" strings, create temporary links to files etc. You can still conveniently download these files by using <code>DLAGENTS</code> variable in the PKGBUILD (see <span class="plainlinks archwiki-template-man" title="$ man 5 makepkg.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/makepkg.conf.5">makepkg.conf(5)</a></span>). This is used by some packages in <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>, for example in <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/ttf-baekmuk/-/blob/9dc90babd7224f8dac3da8604a741bb2247c50e7/PKGBUILD#L16">previous version</a> of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ttf-baekmuk">ttf-baekmuk</a></span>.
</p>
<p>Please pay attention, if you want to have a customized user-agent string, if the latter contains spaces, parentheses, or slashes in it (or actually anything that can break parsing), this will not work. There is no workaround, this is the nature of arrays in bash and the way DLAGENTS was designed to be consumed in makepkg. The following example will thus <b>not work</b>:
</p>
<pre>DLAGENTS=("http::/usr/bin/curl -A 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)' -fLC - --retry 3 --retry-delay 3 -o %o %u")
</pre>
<p>Shorten it to the following which is working:
</p>
<pre>DLAGENTS=("http::/usr/bin/curl -A 'Mozilla' -fLC - --retry 3 --retry-delay 3 -o %o %u")
</pre>
<p>And the following allows to extract temporary link to file from download page:
</p>
<pre>DLAGENTS=("http::/usr/bin/wget -r -np -nd -H %u")
</pre>
<p>In order to download temporary links to files or get past an interactive download, it is possible to analyze the HTTP request used to create the final download link, and then create a DLAGENTS that emulates this using curl. See for example <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/decklink-sdk/">decklink-sdk</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jlink-software-and-documentation/">jlink-software-and-documentation</a></span><sup><small>AUR</small></sup>.
</p>
<p>Alternatively, the DLAGENTS can be used to provide a more informative error message to the user when a file is missing. See for example <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ttf-ms-win10/">ttf-ms-win10</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Unpacking">Unpacking</span></h3>
<p>Many proprietary programs are shipped in nasty installers which sometimes do not even run in Wine. The following tools may be of some help:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libarchive">libarchive</a></span> contains <i>bsdtar</i>, which can extract <code>.iso</code> images and <code>.AppImage</code> files (which are actually hybrid self-executable iso9660). It also provides <i>bsdunzip</i> which can be used in place of <i>unzip</i>.
<ul><li>libarchive is required by pacman and so it is part of a base install.</li></ul>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=unzip">unzip</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=unrar">unrar</a></span> unpack executable SFX archives, based on this formats</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cabextract">cabextract</a></span> can unpack most <code>.cab</code> files (including ones with <code>.exe</code> extension)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=unshield">unshield</a></span> can extract CAB files from InstallShield installers</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=p7zip">p7zip</a></span> unpacks not only many archive formats but also <a href="https://en.wikipedia.org/wiki/NSIS" class="extiw" title="wikipedia:NSIS">NSIS</a>-based <code>.exe</code> installers
<ul><li>it even can extract single sections from common PE (<code>.exe</code> &amp; <code>.dll</code>) files!</li></ul>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=upx">upx</a></span> is sometimes used to compress above-listed executables and can be used for decompressing them as well</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=innoextract">innoextract</a></span> can unpack <code>.exe</code> installers created with <a href="https://en.wikipedia.org/wiki/Inno_Setup" class="extiw" title="wikipedia:Inno Setup">Inno Setup</a> (used for example by GOG.com games)</li>
</ul>
<p>In order to determine exact type of file run <code>file <i>file_of_unknown_type</i></code>.
</p>
<h3><span class="mw-headline" id="Getting_icons_for_.desktop_files">Getting icons for .desktop files</span></h3>
<p>Proprietary software often have no separate icon files, so there is nothing to use in <a href="../en/Desktop_entries.html" class="mw-redirect" title=".desktop">.desktop</a> file creation. Fortunately, <code>.ico</code> files can be easily extracted from executables using programs from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=icoutils">icoutils</a></span> package. You can even do it on the fly during the <code>build</code> phase, for example:
</p>
<pre>$ wrestool -x --output=<i>icon.ico</i> -t14 <i>executable.exe</i>
</pre>
<h3><span class="mw-headline" id="Auto-bumping_your_pkgver">Auto-bumping your pkgver</span></h3>
<p>Non-free software vendors often don’t include a version number in their download source URL:
</p>
<pre>source=('https://downloads.example.com/NonFreePackageWithPoorFileName.exe')
</pre>
<p>That will likely cause the release upstream package to change without notice, which is an issue for packaging. Just like in <a href="../en/VCS_package_guidelines.html" title="VCS package guidelines">VCS packages</a>, you may want to <a href="../en/VCS_package_guidelines.html#The_pkgver()_function" title="VCS package guidelines">auto-bump</a> your <code>pkgver</code> to handle that.
</p>
<h4><span class="mw-headline" id="From_the_installer_package">From the installer package</span></h4>
<p>For example, some <i>.exe</i> installers have the <i>Product Version</i> field set in their <a href="https://en.wikipedia.org/wiki/Portable_Executable" class="extiw" title="wikipedia:Portable Executable">PE</a>. The <code>peres</code> command from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pev/">pev</a></span><sup><small>AUR</small></sup> package may help you extract and use that value to auto-bump your <code>pkgver</code>:
</p>
<pre>pkgver=VERSION
makedepends=('pev')

pkgver() {
  peres -v -f csv "${srcdir}/NonFreePackageWithPoorFileName.exe" \
    | awk -F , '/^Product Version,/ { print $2 }'
}
</pre>
<h4><span class="mw-headline" id="From_the_main_executable">From the main executable</span></h4>
<p>Sometimes the <i>.exe</i> installer doesn’t carry a meaningful value for <i>Product Version</i> but the main executable does. In that case, you can use the <code>prepare</code> step to extract the nested main executable (see <a href="#Unpacking">Unpacking</a> for details) and then auto-bump the <code>pkgver</code>:
</p>
<p>For example:
</p>
<pre>pkgver=VERSION
makedepends=('p7zip' 'pev')

prepare() {
  mkdir -p "${srcdir}/${pkgname}-unpacked"
  7z x -o"${srcdir}/${pkgname}-unpacked" "${srcdir}/NonFreePackageWithPoorFileName.exe"
}

pkgver() {
  peres -v -f csv "${srcdir}/${pkgname}-unpacked/NonFreeApp.exe" \
    | awk -F , '/^Product Version,/ { print $2 }'
}
</pre>
<h4>
<span id="From_a_Debian_.28.deb.29_file"></span><span class="mw-headline" id="From_a_Debian_(.deb)_file">From a Debian (.deb) file</span>
</h4>
<p>Sometimes a <i>.deb</i> file doesn’t have a version number in its name but in its control file.
</p>
<p>You can use <code>dpkg-deb</code> to extract the version directly from the control file inside the <i>.deb</i> package:
</p>
<pre>pkgver=VERSION
makedepends=('dpkg')
source=('https://example.com/vendor/nonfree-app-latest.deb')

pkgver() {
  # shellcheck disable=SC2016
  dpkg-deb --show --showformat='${Version}' nonfree-app-latest.deb | tr - .
}
</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Arch_package_guidelines.html" title="Category:Arch package guidelines">Arch package guidelines</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Nonfree_applications_package_guidelines&amp;oldid=808221">https://wiki.archlinux.org/index.php?title=Nonfree_applications_package_guidelines&amp;oldid=808221</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 13 May 2024, at 05:59.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
