<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>pacman/Tips and tricks - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pacman_Tips_and_tricks rootpage-Pacman skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Maintenance" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Maintenance">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Maintenance</span>
			</div>
		</a>
		
			<button aria-controls="toc-Maintenance-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Maintenance subsection</span>
			</button>
		
		<ul id="toc-Maintenance-sublist" class="vector-toc-list">
			<li id="toc-Listing_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Listing_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Listing packages</span>
				</div>
			</a>
			
			<ul id="toc-Listing_packages-sublist" class="vector-toc-list">
				<li id="toc-In_unused_repositories" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#In_unused_repositories">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.1</span>
					<span>In unused repositories</span>
				</div>
			</a>
			
			<ul id="toc-In_unused_repositories-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_version" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_version">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.2</span>
					<span>With version</span>
				</div>
			</a>
			
			<ul id="toc-With_version-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_size" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_size">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.3</span>
					<span>With size</span>
				</div>
			</a>
			
			<ul id="toc-With_size-sublist" class="vector-toc-list">
				<li id="toc-Individual_packages" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Individual_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.3.1</span>
					<span>Individual packages</span>
				</div>
			</a>
			
			<ul id="toc-Individual_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Packages_and_dependencies" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Packages_and_dependencies">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.3.2</span>
					<span>Packages and dependencies</span>
				</div>
			</a>
			
			<ul id="toc-Packages_and_dependencies-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-By_date" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#By_date">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.4</span>
					<span>By date</span>
				</div>
			</a>
			
			<ul id="toc-By_date-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Not_in_a_specified_group,_repository_or_meta_package" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Not_in_a_specified_group,_repository_or_meta_package">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.5</span>
					<span>Not in a specified group, repository or meta package</span>
				</div>
			</a>
			
			<ul id="toc-Not_in_a_specified_group,_repository_or_meta_package-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Development_packages" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Development_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.6</span>
					<span>Development packages</span>
				</div>
			</a>
			
			<ul id="toc-Development_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Dependencies_of_a_package" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Dependencies_of_a_package">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.7</span>
					<span>Dependencies of a package</span>
				</div>
			</a>
			
			<ul id="toc-Dependencies_of_a_package-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_optional_dependencies" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_optional_dependencies">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.8</span>
					<span>With optional dependencies</span>
				</div>
			</a>
			
			<ul id="toc-With_optional_dependencies-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Browsing_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Browsing_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Browsing packages</span>
				</div>
			</a>
			
			<ul id="toc-Browsing_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Listing_files_owned_by_a_package_with_size" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Listing_files_owned_by_a_package_with_size">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Listing files owned by a package with size</span>
				</div>
			</a>
			
			<ul id="toc-Listing_files_owned_by_a_package_with_size-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Identify_files_not_owned_by_any_package" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Identify_files_not_owned_by_any_package">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Identify files not owned by any package</span>
				</div>
			</a>
			
			<ul id="toc-Identify_files_not_owned_by_any_package-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tracking_unowned_files_created_by_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tracking_unowned_files_created_by_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.5</span>
					<span>Tracking unowned files created by packages</span>
				</div>
			</a>
			
			<ul id="toc-Tracking_unowned_files_created_by_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Removing_unused_packages_(orphans)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Removing_unused_packages_(orphans)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.6</span>
					<span>Removing unused packages (orphans)</span>
				</div>
			</a>
			
			<ul id="toc-Removing_unused_packages_(orphans)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Detecting_more_unneeded_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Detecting_more_unneeded_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.7</span>
					<span>Detecting more unneeded packages</span>
				</div>
			</a>
			
			<ul id="toc-Detecting_more_unneeded_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Removing_everything_but_essential_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Removing_everything_but_essential_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.8</span>
					<span>Removing everything but essential packages</span>
				</div>
			</a>
			
			<ul id="toc-Removing_everything_but_essential_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Getting_the_dependencies_list_of_several_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Getting_the_dependencies_list_of_several_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.9</span>
					<span>Getting the dependencies list of several packages</span>
				</div>
			</a>
			
			<ul id="toc-Getting_the_dependencies_list_of_several_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Listing_changed_backup_files" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Listing_changed_backup_files">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.10</span>
					<span>Listing changed backup files</span>
				</div>
			</a>
			
			<ul id="toc-Listing_changed_backup_files-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Back_up_the_pacman_database" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Back_up_the_pacman_database">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.11</span>
					<span>Back up the pacman database</span>
				</div>
			</a>
			
			<ul id="toc-Back_up_the_pacman_database-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Check_changelogs_easily" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Check_changelogs_easily">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.12</span>
					<span>Check changelogs easily</span>
				</div>
			</a>
			
			<ul id="toc-Check_changelogs_easily-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installation_and_recovery" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation_and_recovery">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Installation and recovery</span>
			</div>
		</a>
		
			<button aria-controls="toc-Installation_and_recovery-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation and recovery subsection</span>
			</button>
		
		<ul id="toc-Installation_and_recovery-sublist" class="vector-toc-list">
			<li id="toc-Installing_packages_from_a_CD/DVD_or_USB_stick" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_packages_from_a_CD/DVD_or_USB_stick">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Installing packages from a CD/DVD or USB stick</span>
				</div>
			</a>
			
			<ul id="toc-Installing_packages_from_a_CD/DVD_or_USB_stick-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Custom_local_repository" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Custom_local_repository">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Custom local repository</span>
				</div>
			</a>
			
			<ul id="toc-Custom_local_repository-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Network_shared_pacman_cache" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Network_shared_pacman_cache">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Network shared pacman cache</span>
				</div>
			</a>
			
			<ul id="toc-Network_shared_pacman_cache-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Recreate_a_package_from_the_file_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Recreate_a_package_from_the_file_system">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Recreate a package from the file system</span>
				</div>
			</a>
			
			<ul id="toc-Recreate_a_package_from_the_file_system-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-List_of_installed_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#List_of_installed_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>List of installed packages</span>
				</div>
			</a>
			
			<ul id="toc-List_of_installed_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Install_packages_from_a_list" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Install_packages_from_a_list">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.6</span>
					<span>Install packages from a list</span>
				</div>
			</a>
			
			<ul id="toc-Install_packages_from_a_list-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Listing_all_changed_files_from_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Listing_all_changed_files_from_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.7</span>
					<span>Listing all changed files from packages</span>
				</div>
			</a>
			
			<ul id="toc-Listing_all_changed_files_from_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reinstalling_all_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reinstalling_all_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.8</span>
					<span>Reinstalling all packages</span>
				</div>
			</a>
			
			<ul id="toc-Reinstalling_all_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restore_pacman's_local_database" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restore_pacman's_local_database">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.9</span>
					<span>Restore pacman's local database</span>
				</div>
			</a>
			
			<ul id="toc-Restore_pacman's_local_database-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Recovering_a_USB_key_from_existing_install" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Recovering_a_USB_key_from_existing_install">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.10</span>
					<span>Recovering a USB key from existing install</span>
				</div>
			</a>
			
			<ul id="toc-Recovering_a_USB_key_from_existing_install-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Viewing_a_single_file_inside_a_.pkg_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Viewing_a_single_file_inside_a_.pkg_file">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.11</span>
					<span>Viewing a single file inside a .pkg file</span>
				</div>
			</a>
			
			<ul id="toc-Viewing_a_single_file_inside_a_.pkg_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Find_applications_that_use_libraries_from_older_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Find_applications_that_use_libraries_from_older_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.12</span>
					<span>Find applications that use libraries from older packages</span>
				</div>
			</a>
			
			<ul id="toc-Find_applications_that_use_libraries_from_older_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installing_only_content_in_required_languages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_only_content_in_required_languages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.13</span>
					<span>Installing only content in required languages</span>
				</div>
			</a>
			
			<ul id="toc-Installing_only_content_in_required_languages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installing_packages_on_bad_connection" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_packages_on_bad_connection">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.14</span>
					<span>Installing packages on bad connection</span>
				</div>
			</a>
			
			<ul id="toc-Installing_packages_on_bad_connection-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Performance" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Performance">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Performance</span>
			</div>
		</a>
		
			<button aria-controls="toc-Performance-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Performance subsection</span>
			</button>
		
		<ul id="toc-Performance-sublist" class="vector-toc-list">
			<li id="toc-Download_speeds" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Download_speeds">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Download speeds</span>
				</div>
			</a>
			
			<ul id="toc-Download_speeds-sublist" class="vector-toc-list">
				<li id="toc-Powerpill" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Powerpill">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1</span>
					<span>Powerpill</span>
				</div>
			</a>
			
			<ul id="toc-Powerpill-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-wget" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#wget">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.2</span>
					<span>wget</span>
				</div>
			</a>
			
			<ul id="toc-wget-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-aria2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#aria2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.3</span>
					<span>aria2</span>
				</div>
			</a>
			
			<ul id="toc-aria2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Other_applications" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Other_applications">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.4</span>
					<span>Other applications</span>
				</div>
			</a>
			
			<ul id="toc-Other_applications-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Utilities" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Utilities">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Utilities</span>
			</div>
		</a>
		
			<button aria-controls="toc-Utilities-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Utilities subsection</span>
			</button>
		
		<ul id="toc-Utilities-sublist" class="vector-toc-list">
			<li id="toc-Graphical" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Graphical">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Graphical</span>
				</div>
			</a>
			
			<ul id="toc-Graphical-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">pacman/Tips and tricks</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 7 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-7" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">7 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Pacman-Tipps" title="Pacman-Tipps – Deutsch" lang="de" hreflang="de" data-title="Pacman-Tipps" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../../es/Pacman/Tips_and_tricks.html" title="Pacman (Español)/Tips and tricks – español" lang="es" hreflang="es" data-title="Pacman (Español)/Tips and tricks" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../../fr/Pacman/Tips_and_tricks.html" title="Pacman (Français)/Tips and tricks – français" lang="fr" hreflang="fr" data-title="Pacman (Français)/Tips and tricks" data-language-autonym="Français" data-language-local-name="français" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Pacman_%E3%83%92%E3%83%B3%E3%83%88" title="Pacman ヒント – 日本語" lang="ja" hreflang="ja" data-title="Pacman ヒント" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../../pt/Pacman/Tips_and_tricks.html" title="Pacman (Português)/Tips and tricks – português" lang="pt" hreflang="pt" data-title="Pacman (Português)/Tips and tricks" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../../ru/Pacman/Tips_and_tricks.html" title="Pacman (Русский)/Tips and tricks – русский" lang="ru" hreflang="ru" data-title="Pacman (Русский)/Tips and tricks" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Pacman/Tips_and_tricks" title="Pacman/Tips and tricks – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Pacman/Tips and tricks" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <bdi dir="ltr"><a href="../../en/Pacman.html" title="Pacman">Pacman</a></bdi>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../../en/Mirrors.html" title="Mirrors">Mirrors</a></li>
<li><a href="../../en/Creating_packages.html" title="Creating packages">Creating packages</a></li>
</ul>
</div>
<p>For general methods to improve the flexibility of the provided tips or <i>pacman</i> itself, see <a href="../../en/Core_utilities.html" title="Core utilities">Core utilities</a> and <a href="../../en/Bash.html" title="Bash">Bash</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Maintenance">Maintenance</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Instead of using <i>comm</i> (which requires sorted input with <i>sort</i>) in the sections below, you may also use <code>grep -Fxf</code> or <code>grep -Fxvf</code>.</div>
<p>See also <a href="../../en/System_maintenance.html" title="System maintenance">System maintenance</a>.
</p>
<h3><span class="mw-headline" id="Listing_packages">Listing packages</span></h3>
<h4><span class="mw-headline" id="In_unused_repositories">In unused repositories</span></h4>
<p>By default, repositories listed in <code>pacman.conf</code> are used for syncing, searching, installing and upgrading from them. This can be changed for more versatility, for example by using some repositories only for searching in them<a rel="nofollow" class="external autonumber" href="http://allanmcrae.com/2014/12/pacman-4-2-released/">[1]</a>: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[multilib]
Usage = Sync Search
...</pre>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5#REPOSITORY_SECTIONS">pacman.conf(5) § REPOSITORY SECTIONS</a></span>.
</p>
<h4><span class="mw-headline" id="With_version">With version</span></h4>
<p>You may want to get the list of installed packages with their version, which is useful when reporting bugs or discussing installed packages.
</p>
<ul>
<li>List all explicitly installed packages: <code>pacman -Qe</code>.</li>
<li>List all packages in the <a href="../../en/Meta_package_and_package_group.html" class="mw-redirect" title="Package group">package group</a> named <code><i>group</i></code>: <code>pacman -Sg <i>group</i></code>
</li>
<li>List all foreign packages (typically manually downloaded and installed or packages removed from the repositories): <code>pacman -Qm</code>.</li>
<li>List all native packages (installed from the sync database): <code>pacman -Qn</code>.</li>
<li>List all explicitly installed native packages (i.e. present in the sync database) that are not direct or optional dependencies: <code>pacman -Qent</code>.</li>
<li>List packages by regex: <code>pacman -Qs <i>regex</i></code>.</li>
<li>List packages by regex with custom output format (needs <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=expac">expac</a></span>): <code>expac -s "%-30n %v" <i>regex</i></code>.</li>
</ul>
<h4><span class="mw-headline" id="With_size">With size</span></h4>
<p>Figuring out which packages are largest can be useful when trying to free space on your hard drive. There are two options here: get the size of individual packages, or get the size of packages and their dependencies.
</p>
<h5><span class="mw-headline" id="Individual_packages">Individual packages</span></h5>
<p>The following command will list all installed packages and their individual sizes:
</p>
<pre>$ LC_ALL=C.UTF-8 pacman -Qi | awk '/^Name/{name=$3} /^Installed Size/{print $4$5, name}' | LC_ALL=C.UTF-8 sort -h
</pre>
<h5><span class="mw-headline" id="Packages_and_dependencies">Packages and dependencies</span></h5>
<p>To list package sizes with their dependencies,
</p>
<ul>
<li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=expac">expac</a></span> and run <code>expac -H M '%m\t%n' | sort -h</code>.</li>
<li>Run <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacgraph/">pacgraph</a></span><sup><small>AUR</small></sup> with the <code>-c</code> option.</li>
</ul>
<p>To list the download size of several packages (leave <code><i>packages</i></code> blank to list all packages):
</p>
<pre>$ expac -S -H M '%k\t%n' <i>packages</i>
</pre>
<p>To list explicitly installed packages not in the <a href="../../en/Meta_package_and_package_group.html#Difference_between_meta_package_and_package_group" class="mw-redirect" title="Meta package">meta package</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> nor <a href="../../en/Meta_package_and_package_group.html" class="mw-redirect" title="Package group">package group</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/xorg/">xorg</a></span> with size and description:
</p>
<pre>$ expac -H M "%011m\t%-20n\t%10d" $(comm -23 &lt;(pacman -Qqen | sort) &lt;({ pacman -Qqg xorg; expac -l '\n' '%E' base; } | sort -u)) | sort -n
</pre>
<p>To list the packages marked for upgrade with their download size:
</p>
<pre>$ expac -S -H M '%k\t%n' $(pacman -Qqu) | sort -sh
</pre>
<p>To list optional dependencies only:
</p>
<pre>$ expac -S "%o" <i>package</i>
</pre>
<h4><span class="mw-headline" id="By_date">By date</span></h4>
<p>To list the 20 last installed packages with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=expac">expac</a></span>, run:
</p>
<pre>$ expac --timefmt='%Y-%m-%d %T' '%l\t%n' | sort | tail -n 20
</pre>
<p>or, with seconds since the epoch (1970-01-01 UTC):
</p>
<pre>$ expac --timefmt=%s '%l\t%n' | sort -n | tail -n 20
</pre>
<h4>
<span id="Not_in_a_specified_group.2C_repository_or_meta_package"></span><span class="mw-headline" id="Not_in_a_specified_group,_repository_or_meta_package">Not in a specified group, repository or meta package</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> To get a list of packages installed as dependencies but no longer required by any installed package, see <a href="#Removing_unused_packages_(orphans)">#Removing unused packages (orphans)</a>.
</div>
<p>List explicitly installed packages not in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> <a href="../../en/Meta_package_and_package_group.html#Difference_between_meta_package_and_package_group" class="mw-redirect" title="Meta package">meta package</a>:
</p>
<pre>$ comm -23 &lt;(pacman -Qqe | sort) &lt;(expac -l '\n' '%E' base | sort)
</pre>
<p>List explicitly installed packages not in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> meta package or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/xorg/">xorg</a></span> <a href="../../en/Meta_package_and_package_group.html" class="mw-redirect" title="Package group">package group</a>:
</p>
<pre>$ comm -23 &lt;(pacman -Qqe | sort) &lt;({ pacman -Qqg xorg; expac -l '\n' '%E' base; } | sort -u)
</pre>
<p>List all installed packages unrequired by other packages, and which are not in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> meta package or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/xorg/">xorg</a></span> package group:
</p>
<pre>$ comm -23 &lt;(pacman -Qqt | sort) &lt;({ pacman -Qqg xorg; echo base; } | sort -u)
</pre>
<p>As above, but with descriptions:
</p>
<pre>$ expac -H M '%-20n\t%10d' $(comm -23 &lt;(pacman -Qqt | sort) &lt;({ pacman -Qqg xorg; echo base; } | sort -u))
</pre>
<p>List all installed packages that are <i>not</i> in the specified repository <i>repo_name</i> (multiple repositories can be checked at once):
</p>
<pre>$ comm -23 &lt;(pacman -Qq | sort) &lt;(pacman -Sql <i>repo_name</i> | sort)
</pre>
<p>List all installed packages that are in the <i>repo_name</i> repository (multiple repositories can be checked at once):
</p>
<pre>$ comm -12 &lt;(pacman -Qq | sort) &lt;(pacman -Sql <i>repo_name</i> | sort)
</pre>
<p>List all packages on the Arch Linux ISO that are not in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span> meta package:
</p>
<pre>$ comm -23 &lt;(curl https://gitlab.archlinux.org/archlinux/archiso/-/raw/master/configs/releng/packages.x86_64) &lt;(expac -l '\n' '%E' base | sort)
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Alternatively, use <code>combine</code> (instead of <code>comm</code>) from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=moreutils">moreutils</a></span> package which has a syntax that is easier to remember. See <span class="plainlinks archwiki-template-man" title="$ man 1 combine"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/combine.1">combine(1)</a></span>.</div>
<h4><span class="mw-headline" id="Development_packages">Development packages</span></h4>
<p>To list all development/unstable packages, run:
</p>
<pre>$ pacman -Qq | grep -Ee '-(bzr|cvs|darcs|git|hg|svn)$'
</pre>
<h4><span class="mw-headline" id="Dependencies_of_a_package">Dependencies of a package</span></h4>
<p>To obtain the list of the dependencies of a package, the simplest solution is reading the output of: 
</p>
<pre>$ pacman -Qi <i>package</i>
</pre>
<p>For automation, instead of the error-prone method of parsing pacman output, use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=expac">expac</a></span>: 
</p>
<pre>$ expac -S '%D' <i>package</i>
</pre>
<h4><span class="mw-headline" id="With_optional_dependencies">With optional dependencies</span></h4>
<p>To list explicitly-installed packages with their optional dependencies, run:
</p>
<pre>$ LC_ALL=C.UTF-8 pacman -Qei | sed '/^[^NO ]/d;/None$/d' | awk 'BEGIN{RS=ORS="\n\n";FS=OFS="\n\\S"} /Optional Deps/ {print $1"\nO"$2}'
</pre>
<p>Alternatively, with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=expac">expac</a></span>:
</p>
<pre>$ expac -d '\n\n' -l '\n\t' -Q '%n\n\t%O' $(pacman -Qeq)
</pre>
<p>To list them while omitting optional dependencies you have already installed, run:
</p>
<pre>$ LC_ALL=C.UTF-8 pacman -Qei | sed '/^[^NO ]/d;/None$/d' | awk 'BEGIN{RS=ORS="\n\n";FS=OFS="\n\\S"} /Optional Deps/ {print $1"\nO"$2}' | sed 's/^Optional Deps   ://;/\[installed\]$/d;s/\s\+/ /'
</pre>
<h3><span class="mw-headline" id="Browsing_packages">Browsing packages</span></h3>
<p>To browse all installed packages with an instant preview of each package:
</p>
<pre>$ pacman -Qq | fzf --preview 'pacman -Qil {}' --layout=reverse --bind 'enter:execute(pacman -Qil {} | less)'
</pre>
<p>This uses <a href="../../en/Fzf.html" title="Fzf">fzf</a> to present a two-pane view listing all packages with package info shown on the right.
</p>
<p>Enter letters to filter the list of packages; use arrow keys (or <code>Ctrl-j</code>/<code>Ctrl-k</code>) to navigate; press <code>Enter</code> to see package info under <i>less</i>.
</p>
<p>To browse all packages currently known to <i>pacman</i> (both installed and not yet installed) in a similar way, using fzf, use:
</p>
<pre>$ pacman -Slq | fzf --preview 'pacman -Si {}' --layout=reverse
</pre>
<p>The navigational keybindings are the same, although <code>Enter</code> will not work in the same way.
</p>
<h3><span class="mw-headline" id="Listing_files_owned_by_a_package_with_size">Listing files owned by a package with size</span></h3>
<p>This one might come in handy if you have found that a specific package uses a huge amount of space and you want to find out which files make up the most of that.
</p>
<pre>$ pacman -Qlq <i>package</i> | grep -v '/$' | xargs -r du -h | sort -h
</pre>
<h3><span class="mw-headline" id="Identify_files_not_owned_by_any_package">Identify files not owned by any package</span></h3>
<p>If your system has stray files not owned by any package (a common case if you do not <a href="../../en/System_maintenance.html#Use_the_package_manager_to_install_software" class="mw-redirect" title="Enhance system stability">use the package manager to install software</a>), you may want to find such files in order to clean them up.
</p>
<p>One method is to list all files of interest and check them against <i>pacman</i>:
</p>
<pre># (export LC_ALL=C.UTF-8; comm -13 &lt;(pacman -Qlq | sed 's,/$,,' | sort) &lt;(find /etc /usr /opt -path /usr/lib/modules -prune -o -print | sort))
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lostfiles">lostfiles</a></span> script performs similar steps, but also includes an extensive blacklist to remove common false positives from the output.</div>
<h3><span class="mw-headline" id="Tracking_unowned_files_created_by_packages">Tracking unowned files created by packages</span></h3>
<p>Most systems will slowly collect several <a rel="nofollow" class="external text" href="http://ftp.rpm.org/max-rpm/s1-rpm-inside-files-list-directives.html#S3-RPM-INSIDE-FLIST-GHOST-DIRECTIVE">ghost</a> files such as state files, logs, indexes, etc. through the course of usual operation.
</p>
<p><code>pacreport</code> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacutils">pacutils</a></span> can be used to track these files and their associations via <code>/etc/pacreport.conf</code> (see <span class="plainlinks archwiki-template-man" title="$ man 1 pacreport"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacreport.1#FILES">pacreport(1) § FILES</a></span>).
</p>
<p>An example may look something like this (abridged):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacreport.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Options]
IgnoreUnowned = usr/share/applications/mimeinfo.cache

[PkgIgnoreUnowned]
alsa-utils = var/lib/alsa/asound.state
bluez = var/lib/bluetooth
ca-certificates = etc/ca-certificates/trust-source/*
dbus = var/lib/dbus/machine-id
glibc = etc/ld.so.cache
grub = boot/grub/*
linux = boot/initramfs-linux.img
pacman = var/lib/pacman/local
update-mime-database = usr/share/mime/magic</pre>
<p>Then, when using <code>pacreport --unowned-files</code> as the root user, any unowned files will be listed if the associated package is no longer installed (or if any new files have been created).
</p>
<p>Additionally, <a rel="nofollow" class="external text" href="https://github.com/CyberShadow/aconfmgr">aconfmgr</a> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/aconfmgr-git/">aconfmgr-git</a></span><sup><small>AUR</small></sup>) allows tracking modified and orphaned files using a configuration script.
</p>
<h3>
<span id="Removing_unused_packages_.28orphans.29"></span><span class="mw-headline" id="Removing_unused_packages_(orphans)">Removing unused packages (orphans)</span>
</h3>
<p>Orphans are packages that were installed as a dependency and are no longer required by any package.
</p>
<p>They can accumulate on your system over time either due to uninstalling packages using <code>pacman -R <i>package</i></code> instead of <code>pacman -Rs <i>package</i></code>, installing packages as <a href="../../en/PKGBUILD.html#makedepends" class="mw-redirect" title="Makedepends">makedepends</a>, or packages removing dependencies in newer versions.
</p>
<p>For recursively removing orphans and their configuration files:
</p>
<pre># pacman -Qdtq | pacman -Rns -
</pre>
<p>If no orphans were found, the output is <code>error: argument '-' specified with empty stdin</code>. This is expected as no arguments were passed to <code>pacman -Rns</code>. The error can be avoided by prefixing the second command with <span class="plainlinks archwiki-template-man" title="$ man 1 ifne"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ifne.1">ifne(1)</a></span> from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=moreutils">moreutils</a></span> package.
</p>
<p>If there is a package listed that you do not want to remove, it can be excluded from the list of orphans by marking it as explicitly installed:
</p>
<pre># pacman -D --asexplicit <i>package</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The arguments <code>-Qdt</code> list only true orphans. To include packages which are <i>optionally</i> required by another package, pass the <code>-t</code> flag twice (<i>i.e.</i>, <code>-Qdtt</code>).</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Add the <code>pacman -Qdt</code> command to a <i>pacman</i> post-transaction <a href="../../en/Pacman.html#Hooks" title="Pacman">hook</a> to be notified if a transaction orphaned a package. This can be useful for being notified when a package has been dropped from a repository, since any dropped package will also be orphaned on a local installation (unless it was explicitly installed). To avoid any "failed to execute command" errors when no orphans are found, use the following command for <code>Exec</code> in your hook: <code>/usr/bin/bash -c "/usr/bin/pacman -Qdt || /usr/bin/echo '=&gt; None found.'"</code> The package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacman-log-orphans-hook/">pacman-log-orphans-hook</a></span><sup><small>AUR</small></sup> provides such hook with a more verbose instructions.</div>
<h3><span class="mw-headline" id="Detecting_more_unneeded_packages">Detecting more unneeded packages</span></h3>
<p>In some cases the method above will not detect all possible unneeded packages. E.g. dependency cycles (also known as "circular dependencies"), excessive dependencies (fulfilled more than once), some non-explicit optionals etc.
</p>
<p>To detect such packages:
</p>
<pre>$ pacman -Qqd | pacman -Rsu --print -
</pre>
<p>If you want to remove all packages in the list at once, run the command without <code>--print</code> argument.
</p>
<h3><span class="mw-headline" id="Removing_everything_but_essential_packages">Removing everything but essential packages</span></h3>
<p>If it is ever necessary to remove all packages except the essentials packages, one method is to set the installation reason of the non-essential ones as dependency and then remove all unnecessary dependencies.
</p>
<p>First, for all the packages "explicitly installed", change their installation reason to "installed as a dependency":
</p>
<pre># pacman -D --asdeps $(pacman -Qqe)
</pre>
<p>Then, change the installation reason to "explicitly installed" of only the essential packages, those you <b>do not</b> want to remove, in order to avoid targeting them:
</p>
<pre># pacman -D --asexplicit base linux linux-firmware
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Additional packages can be added to the above command in order to avoid being removed. See <a href="../../en/Installation_guide.html#Install_essential_packages" title="Installation guide">Installation guide#Install essential packages</a> for more info on other packages that may be necessary for a fully functional base system.</li>
<li>This will also select the bootloader's package for removal. The system should still be bootable, but the boot parameters might not be changeable without it.</li>
</ul>
</div>
<p>Finally, follow the instructions in <a href="#Removing_unused_packages_(orphans)">#Removing unused packages (orphans)</a> to remove all packages that are "installed as a dependency".
</p>
<h3><span class="mw-headline" id="Getting_the_dependencies_list_of_several_packages">Getting the dependencies list of several packages</span></h3>
<p>Dependencies are alphabetically sorted and doubles are removed.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> To only show the tree of local installed packages, use <code>pacman -Qi</code>.</div>
<pre>$ LC_ALL=C.UTF-8 pacman -Si <i>packages</i> | awk -F'[:&lt;=&gt;]' '/^Depends/ {print $2}' | xargs -n1 | sort -u
</pre>
<p>Alternatively, with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=expac">expac</a></span>: 
</p>
<pre>$ expac -l '\n' %E -S <i>packages</i> | sort -u
</pre>
<h3><span class="mw-headline" id="Listing_changed_backup_files">Listing changed backup files</span></h3>
<p>To list configuration files tracked by <i>pacman</i> as <a href="../../en/Pacman/Pacnew_and_Pacsave.html#Package_backup_files" class="mw-redirect" title="Pacnew and Pacsave files">susceptible of containing user changes</a> (i.e. files listed in the <a href="../../en/PKGBUILD.html#backup" title="PKGBUILD">PKGBUILD backup array</a>) and having received user modifications, use the following command:
</p>
<pre># pacman -Qii | awk '/\[modified\]/ {print $(NF - 1)}'
</pre>
<p>Running this command with root permissions will ensure that files readable only by root (such as <code>/etc/sudoers</code>) are included in the output.
</p>
<p>This can be used when doing a selective system backup or when trying to replicate a system configuration from one machine to another.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>See <a href="#Listing_all_changed_files_from_packages">#Listing all changed files from packages</a> to list all changed files <i>pacman</i> knows about, not only backup files.</li>
<li>See <a href="#Identify_files_not_owned_by_any_package">#Identify files not owned by any package</a> to list all files in the system that are not tracked by <i>pacman</i>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Back_up_the_pacman_database">Back up the pacman database</span></h3>
<p>The following command can be used to back up the local <i>pacman</i> database:
</p>
<pre>$ tar -cjf pacman_database.tar.bz2 /var/lib/pacman/local
</pre>
<p>Store the backup <i>pacman</i> database file on one or more offline media, such as a USB stick, external hard drive, or CD-R.
</p>
<p>The database can be restored by moving the <code>pacman_database.tar.bz2</code> file into the <code>/</code> directory and executing the following command:
</p>
<pre># tar -xjvf pacman_database.tar.bz2
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the <i>pacman</i> database files are corrupted, and there is no backup file available, there exists some hope of rebuilding the <i>pacman</i> database. Consult <a href="#Restore_pacman's_local_database">#Restore pacman's local database</a>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pakbak-git/">pakbak-git</a></span><sup><small>AUR</small></sup> package provides a script and a <a href="../../en/Systemd.html" title="Systemd">systemd</a> service to automate the task. Configuration is possible in <code>/etc/pakbak.conf</code>.</div>
<h3><span class="mw-headline" id="Check_changelogs_easily">Check changelogs easily</span></h3>
<p>When maintainers update packages, commits are often commented in a useful fashion. Users can quickly check these from the command line by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacolog/">pacolog</a></span><sup><small>AUR</small></sup>. This utility lists recent commit messages for packages from the official repositories or the AUR, by using <code>pacolog <i>package</i></code>.
</p>
<h2><span class="mw-headline" id="Installation_and_recovery">Installation and recovery</span></h2>
<p>Alternative ways of getting and restoring packages.
</p>
<h3>
<span id="Installing_packages_from_a_CD.2FDVD_or_USB_stick"></span><span class="mw-headline" id="Installing_packages_from_a_CD/DVD_or_USB_stick">Installing packages from a CD/DVD or USB stick</span>
</h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="#Custom_local_repository">#Custom local repository</a>.</b></p>
<div>
<b>Notes:</b> Use as an example and avoid duplication (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:Pacman/Tips_and_tricks.html">Talk:Pacman/Tips and tricks</a>)</div>
</div>
<p>To download packages, or groups of packages:
</p>
<pre># cd ~/Packages
# pacman -Syw --cachedir . base base-devel grub-bios xorg gimp
# repo-add ./custom.db.tar.zst ./*.pkg.tar.zst
</pre>
<p>Pacman, which will reference the host installation by default, will not properly resolve and download existing dependencies. In cases where all packages and dependencies are wanted, it is recommended to create a temporary blank DB and reference it with <code>--dbpath</code>:
</p>
<pre># mkdir /tmp/blankdb
# pacman -Syw --cachedir . --dbpath /tmp/blankdb base base-devel grub-bios xorg gimp
# repo-add ./custom.db.tar.zst ./*.pkg.tar.zst
</pre>
<p>Then you can burn the "Packages" directory to an optical disc (e.g. CD, DVD) or transfer it to a USB flash drive, external HDD, etc.
</p>
<p>To install:
</p>
<p><b>1.</b> Mount the media:
</p>
<p>For an optical disc drive:
</p>
<pre># mount --mkdir /dev/sr0 /mnt/repo
</pre>
<p>For a USB flash drive, hard disk drive, etc.:
</p>
<pre># mount --mkdir /dev/sd<i>xY</i> /mnt/repo
</pre>
<p><b>2.</b> Edit <code>pacman.conf</code> and add this repository <i>before</i> the other ones (e.g. extra, core, etc.). This is important. Do not just uncomment the one on the bottom. This way it ensures that the files from the CD/DVD/USB take precedence over those in the standard repositories:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[custom]
SigLevel = PackageRequired
Server = file:///mnt/repo/Packages</pre>
<p><b>3.</b> Finally, synchronize the <i>pacman</i> database to be able to use the new repository:
</p>
<pre># pacman -Syu
</pre>
<h3><span class="mw-headline" id="Custom_local_repository">Custom local repository</span></h3>
<p>Use the <i>repo-add</i> script included with <i>pacman</i> to generate a database for a personal repository. Use <code>repo-add --help</code> for more details on its usage. 
A package database is a tar file, optionally compressed. Valid extensions are <i>.db</i> or <i>.files</i> followed by an archive extension of <i>.tar</i>, <i>.tar.gz</i>, <i>.tar.bz2</i>, <i>.tar.xz</i>, <i>.tar.zst</i>, or <i>.tar.Z</i>. The file does not need to exist, but all parent directories must exist.
</p>
<p>To add a new package to the database, or to replace the old version of an existing package in the database, run:
</p>
<pre>$ repo-add <i>/path/to/repo.db.tar.zst /path/to/package-1.0-1-x86_64.pkg.tar.zst</i>
</pre>
<p>The database and the packages do not need to be in the same directory when using <i>repo-add</i>, but keep in mind that when using <i>pacman</i> with that database, they should be together. Storing all the built packages to be included in the repository in one directory also allows to use shell glob expansion to add or update multiple packages at once:
</p>
<pre>$ repo-add <i>/path/to/repo.db.tar.zst /path/to/*.pkg.tar.zst</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> <i>repo-add</i> adds the entries into the database in the same order as passed on the command line. If multiple versions of the same package are involved, care must be taken to ensure that the correct version is added last. In particular, note that lexical order used by the shell depends on the locale and differs from the <span class="plainlinks archwiki-template-man" title="$ man 8 vercmp"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vercmp.8">vercmp(8)</a></span> ordering used by <i>pacman</i>.</div>
<p>If you are looking to support multiple architectures then precautions should be taken to prevent errors from occurring. Each architecture should have its own directory tree:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ tree ~/customrepo/ | sed "s/$(uname -m)/<i>arch</i>/g"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/home/archie/customrepo/
└── <i>arch</i>
    ├── customrepo.db -&gt; customrepo.db.tar.zst
    ├── customrepo.db.tar.zst
    ├── customrepo.files -&gt; customrepo.files.tar.zst
    ├── customrepo.files.tar.zst
    └── personal-website-git-b99cce0-1-<i>arch</i>.pkg.tar.zst

1 directory, 5 files
</pre>
<p>The <i>repo-add</i> executable checks if the package is appropriate. If this is not the case you will be running into error messages similar to this:
</p>
<pre>==&gt; ERROR: '/home/archie/customrepo/<i>arch</i>/foo-<i>arch</i>.pkg.tar.zst' does not have a valid database archive extension.
</pre>
<p><i>repo-remove</i> is used to remove packages from the package database, except that only package names are specified on the command line.
</p>
<pre>$ repo-remove <i>/path/to/repo.db.tar.zst pkgname</i>
</pre>
<p>Once the local repository database has been created, add the repository to <code>pacman.conf</code> for each system that is to use the repository. An example of a custom repository is in <code>pacman.conf</code>. The repository's name is the database filename with the file extension omitted. In the case of the example above the repository's name would simply be <i>repo</i>. Reference the repository's location using a <code>file://</code> URL, or via HTTP using <code>http://localhost/path/to/directory</code>.
</p>
<p>If willing, add the custom repository to the <a href="../../en/Unofficial_user_repositories.html" title="Unofficial user repositories">list of unofficial user repositories</a>, so that the community can benefit from it.
</p>
<h3><span class="mw-headline" id="Network_shared_pacman_cache">Network shared pacman cache</span></h3>
<p>See <a href="../../en/Package_Proxy_Cache.html" title="Package Proxy Cache">Package Proxy Cache</a>.
</p>
<h3><span class="mw-headline" id="Recreate_a_package_from_the_file_system">Recreate a package from the file system</span></h3>
<p>To recreate a package from the file system, use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fakepkg/">fakepkg</a></span><sup><small>AUR</small></sup>. Files from the system are taken as they are, hence any modifications will be present in the assembled package. Distributing the recreated package is therefore discouraged; see <a href="../../en/Arch_build_system.html" class="mw-redirect" title="ABS">ABS</a> and <a href="../../en/Arch_Linux_Archive.html" title="Arch Linux Archive">Arch Linux Archive</a> for alternatives.
</p>
<h3><span class="mw-headline" id="List_of_installed_packages">List of installed packages</span></h3>
<p>Keeping a list of all explicitly installed packages can be useful to backup a system or quicken the installation of a new one:
</p>
<pre>$ pacman -Qqe &gt; pkglist.txt
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>With option <code>-t</code>, the packages already required by other explicitly installed packages are not mentioned. If reinstalling from this list they will be installed but as dependencies only.</li>
<li>With option <code>-n</code>, foreign packages (e.g. from <a href="../../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>) would be omitted from the list.</li>
<li>Use <code>comm -13 &lt;(pacman -Qqdt | sort) &lt;(pacman -Qqdtt | sort) &gt; optdeplist.txt</code> to also create a list of the installed optional dependencies which can be reinstalled with <code>--asdeps</code>.</li>
<li>Use <code>pacman -Qqem &gt; foreignpkglist.txt</code> to create the list of AUR and other foreign packages that have been explicitly installed.</li>
</ul>
</div>
<p>To keep an up-to-date list of explicitly installed packages (e.g. in combination with a versioned <code>/etc/</code>), you can set up a <a href="../../en/Pacman.html#Hooks" title="Pacman">hook</a>. Example:
</p>
<pre>[Trigger]
Operation = Install
Operation = Remove
Type = Package
Target = *

[Action]
When = PostTransaction
Exec = /bin/sh -c '/usr/bin/pacman -Qqe &gt; /etc/pkglist.txt'
</pre>
<h3><span class="mw-headline" id="Install_packages_from_a_list">Install packages from a list</span></h3>
<p>To install packages from a previously saved list of packages, while not reinstalling previously installed packages that are already up-to-date, run:
</p>
<pre># pacman -S --needed - &lt; pkglist.txt
</pre>
<p>However, it is likely foreign packages such as from the AUR or installed locally are present in the list. To filter out from the list the foreign packages, the previous command line can be enriched as follows:
</p>
<pre># pacman -S --needed $(comm -12 &lt;(pacman -Slq | sort) &lt;(sort pkglist.txt))
</pre>
<p>Eventually, to make sure the installed packages of your system match the list and remove all the packages that are not mentioned in it:
</p>
<pre># pacman -Rsu $(comm -23 &lt;(pacman -Qq | sort) &lt;(sort pkglist.txt))
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> These tasks can be automated. See <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bacpac/">bacpac</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/packup/">packup</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacmanity/">pacmanity</a></span><sup><small>AUR</small></sup>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pug/">pug</a></span><sup><small>AUR</small></sup> for examples.</div>
<h3><span class="mw-headline" id="Listing_all_changed_files_from_packages">Listing all changed files from packages</span></h3>
<p>If you are suspecting file corruption (e.g. by software/hardware failure), but are unsure if files were corrupted, you might want to compare with the hash sums in the packages. This can be done with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacutils">pacutils</a></span>:
</p>
<pre># paccheck --sha256sum --quiet
</pre>
<p>For recovery of the database see <a href="#Restore_pacman's_local_database">#Restore pacman's local database</a>. The <code>mtree</code> files can also be <a href="#Viewing_a_single_file_inside_a_.pkg_file">extracted as <code>.MTREE</code> from the respective package files</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This should <b>not</b> be used as is when suspecting malicious changes! In this case security precautions such as using a live medium and an independent source for the hash sums are advised.</div>
<h3><span class="mw-headline" id="Reinstalling_all_packages">Reinstalling all packages</span></h3>
<p>To reinstall all native packages, use:
</p>
<pre># pacman -Qqn | pacman -S -
</pre>
<p>Foreign (AUR) packages must be reinstalled separately; you can list them with <code>pacman -Qqm</code>.
</p>
<p>Pacman preserves the <a href="../../en/Pacman.html#Installation_reason" class="mw-redirect" title="Installation reason">installation reason</a> by default.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> To force all packages to be overwritten, use <code>--overwrite=*</code>, though this should be an absolute last resort. See <a href="../../en/System_maintenance.html#Avoid_certain_pacman_commands" title="System maintenance">System maintenance#Avoid certain pacman commands</a>.</div>
<h3>
<span id="Restore_pacman.27s_local_database"></span><span class="mw-headline" id="Restore_pacman's_local_database">Restore pacman's local database</span>
</h3>
<p>See <a href="../../en/Pacman/Restore_local_database.html" title="Pacman/Restore local database">pacman/Restore local database</a>.
</p>
<h3><span class="mw-headline" id="Recovering_a_USB_key_from_existing_install">Recovering a USB key from existing install</span></h3>
<p>If you have Arch installed on a USB key and manage to mess it up (e.g. removing it while it is still being written to), then it is possible to re-install all the packages and hopefully get it back up and working again (assuming USB key is mounted in <code>/newarch</code>)
</p>
<pre># pacman -S $(pacman -Qq --dbpath /newarch/var/lib/pacman) --root /newarch --dbpath /newarch/var/lib/pacman
</pre>
<h3><span class="mw-headline" id="Viewing_a_single_file_inside_a_.pkg_file">Viewing a single file inside a .pkg file</span></h3>
<p>For example, if you want to see the contents of <code>/etc/systemd/logind.conf</code> supplied within the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span> package:
</p>
<pre>$ bsdtar -xOf /var/cache/pacman/pkg/systemd-250.4-2-x86_64.pkg.tar.zst etc/systemd/logind.conf
</pre>
<p>Or you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vim">vim</a></span> to browse the archive:
</p>
<pre>$ vim /var/cache/pacman/pkg/systemd-250.4-2-x86_64.pkg.tar.zst
</pre>
<h3><span class="mw-headline" id="Find_applications_that_use_libraries_from_older_packages">Find applications that use libraries from older packages</span></h3>
<p>Already running processes do not automatically notice changes caused by updates. Instead, they continue using old library versions. That may be undesirable, due to potential issues related to security vulnerabilities or other bugs, and version incompatibility.
</p>
<p>Processes depending on updated libraries may be found using either <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=htop">htop</a></span>, which highlights the names of the affected programs, or with a snippet based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lsof">lsof</a></span>, which also prints the names of the libraries:
</p>
<pre># lsof +c 0 | grep -w DEL | awk '1 { print $1 ": " $NF }' | sort -u
</pre>
<p>This solution will only detect files, that are normally kept opened by running processes, which basically limits it to shared libraries (<code>.so</code> files). It may miss some dependencies, like those of Java or Python applications.
</p>
<h3><span class="mw-headline" id="Installing_only_content_in_required_languages">Installing only content in required languages</span></h3>
<p>Many packages install documentation and translations in several languages. Some programs are designed to remove such unnecessary files, such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/localepurge/">localepurge</a></span><sup><small>AUR</small></sup>, which runs after a package is installed to delete the unneeded locale files. A more preemptive approach is provided through the <code>NoExtract</code> directive in <code>/etc/pacman.conf</code>, which prevent these files from ever being installed. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> As explained in <a href="../../en/Pacman.html#Skip_files_from_being_installed_to_system" title="Pacman">Pacman#Skip files from being installed to system</a>, "later rules override previous ones, and you can negate a rule by prepending <code>!</code>".</div>
<p>To prevent the installation of all translations for help files, except for the C locale, add: 
</p>
<pre>NoExtract = usr/share/help/* !usr/share/help/C/*
</pre>
<p>To prevent the installation of all the HTML documentation, add: 
</p>
<pre>NoExtract = usr/share/gtk-doc/html/*
NoExtract = usr/share/doc/HTML/*
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Some users noted that removing <b>all</b> locales has resulted in unintended consequences with <a href="../../Special:PermanentLink/460285.html#Dangerous_NoExtract_example" title="Special:PermanentLink/460285">dmenu</a>, <a href="../../Special:PermanentLink/767628.html#Languages:_NoExtract_usr/share/X11/locale/*" title="Special:PermanentLink/767628">Steam</a>, even under <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=250846">Xorg</a>. The following example is adjusted to avoid such issues, by installing only English (US) files and the required C locales.</div>
<p>To prevent the installation of the various <a href="../../en/Locale.html" title="Locale">locales</a>, except the required ones, add: 
</p>
<pre>NoExtract = usr/share/locale/* usr/share/X11/locale/*/* usr/share/i18n/locales/* opt/google/chrome/locales/* !usr/share/X11/locale/C/* !usr/share/X11/locale/en_US.UTF-8/*
NoExtract = !usr/share/X11/locale/compose.dir !usr/share/X11/locale/iso8859-1/*
NoExtract = !*locale*/en*/* !usr/share/*locale*/locale.*
NoExtract = !usr/share/*locales/en_?? !usr/share/*locales/i18n* !usr/share/*locales/iso*
NoExtract = usr/share/i18n/charmaps/* !usr/share/i18n/charmaps/UTF-8.gz !usr/share/i18n/charmaps/ANSI_X3.4-1968.gz
NoExtract = !usr/share/*locales/trans*
NoExtract = !usr/share/*locales/C !usr/share/*locales/POSIX</pre>
<p>To prevent the installation of the translated <a href="../../en/Man_page.html" title="Man page">man pages</a>, add: 
</p>
<pre>NoExtract = usr/share/man/* !usr/share/man/man*
</pre>
<p>To prevent the installation of the language files in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vim-runtime">vim-runtime</a></span>, add: 
</p>
<pre>NoExtract = usr/share/vim/vim*/lang/*
</pre>
<p>To prevent the installation of all but English content in <a href="../../en/Qt.html" title="Qt">Qt</a> applications, add: 
</p>
<pre>NoExtract = usr/share/*/translations/*.qm usr/share/*/nls/*.qm usr/share/qt/phrasebooks/*.qph usr/share/qt/translations/*.pak !*/en-US.pak
</pre>
<p>To prevent the installation of all but English content in <a href="../../en/Electron.html" title="Electron">Electron</a> applications, add: 
</p>
<pre>NoExtract = usr/share/*/locales/*.pak opt/*/locales/*.pak usr/lib/*/locales/*.pak !*/en-US.pak
</pre>
<p>To prevent the installation of English help files in <a href="../../en/LibreOffice.html" title="LibreOffice">LibreOffice</a>, add: 
</p>
<pre>NoExtract = usr/lib/libreoffice/help/en-US/*
</pre>
<p>To prevent the installation of all but English content from <a href="../../en/List_of_applications/Documents.html#Office_suites" title="List of applications/Documents">OnlyOffice</a>, add: 
</p>
<pre>NoExtract = opt/onlyoffice/desktopeditors/dictionaries/* !opt/onlyoffice/desktopeditors/dictionaries/en_US/*
NoExtract = opt/onlyoffice/desktopeditors/editors/web-apps/apps/*/main/locale/* !*/en.json
NoExtract = opt/onlyoffice/desktopeditors/editors/web-apps/apps/*/main/resources/help/*/* !*/help/en/*
NoExtract = opt/onlyoffice/desktopeditors/editors/web-apps/apps/*/main/resources/symboltable/* !*/en.json
NoExtract = opt/onlyoffice/desktopeditors/editors/web-apps/apps/documenteditor/forms/locale/* !*/en.json
NoExtract = opt/onlyoffice/desktopeditors/editors/web-apps/apps/spreadsheeteditor/main/resources/formula-lang/* !*/en.json !*/en_desc.json
NoExtract = opt/onlyoffice/desktopeditors/converter/empty/*/* !opt/onlyoffice/desktopeditors/converter/empty/en-US/*
NoExtract = opt/onlyoffice/desktopeditors/converter/templates/*/* !opt/onlyoffice/desktopeditors/converter/templates/EN/*</pre>
<p>To prevent the installation of all but the English <a href="../../en/IBus.html" title="IBus">iBus</a> dictionary for emojis, add: 
</p>
<pre>NoExtract = usr/share/ibus/dicts/emoji-*.dict !usr/share/ibus/dicts/emoji-en.dict
</pre>
<h3><span class="mw-headline" id="Installing_packages_on_bad_connection">Installing packages on bad connection</span></h3>
<p>When trying to install a package from a bad connection (e.g. a train using a cell phone), use the <code>--disable-download-timeout</code> option to lessen the chance of receiving errors such as: 
</p>
<pre>error: failed retrieving file […] Operation too slow. Less than 1 bytes/sec transferred the last 10 seconds
</pre>
<p>or
</p>
<pre>error: failed retrieving file […] Operation timed out after 10014 milliseconds with 0 out of 0 bytes received
</pre>
<h2><span class="mw-headline" id="Performance">Performance</span></h2>
<h3><span class="mw-headline" id="Download_speeds">Download speeds</span></h3>
<p>When downloading packages <i>pacman</i> uses the mirrors in the order they are in <code>/etc/pacman.d/mirrorlist</code>. The mirror which is at the top of the list by default however may not be the fastest for you. To select a faster mirror, see <a href="../../en/Mirrors.html" title="Mirrors">Mirrors</a>.
</p>
<p>Pacman's speed in downloading packages can also be improved by <a href="../../en/Pacman.html#Enabling_parallel_downloads" title="Pacman">enabling parallel downloads</a>, a major feature request (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/20056">FS#20056</a>) added with <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/-/blob/master/NEWS#L80">pacman 6.0.0</a>.
</p>
<p>Instead of <i>pacman</i>'s built-in file downloader, a separate application can also be used to download packages.
</p>
<p>In all cases, make sure you have the latest <i>pacman</i> before doing any modifications.
</p>
<pre># pacman -Syu
</pre>
<h4><span class="mw-headline" id="Powerpill">Powerpill</span></h4>
<p><a href="../../en/Powerpill.html" title="Powerpill">Powerpill</a> is a <i>pacman</i> wrapper that uses parallel and segmented downloading to try to speed up downloads for <i>pacman</i>.
</p>
<h4><span class="mw-headline" id="wget">wget</span></h4>
<p>This is also very handy if you need more powerful proxy settings than <i>pacman</i>'s built-in capabilities. 
</p>
<p>To use <code>wget</code>, first <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wget">wget</a></span> package then modify <code>/etc/pacman.conf</code> by uncommenting the following line in the <code>[options]</code> section:
</p>
<pre>XferCommand = /usr/bin/wget --passive-ftp --show-progress -c -q -N %u
</pre>
<p>Instead of uncommenting the <code>wget</code> parameters in <code>/etc/pacman.conf</code>, you can also modify the <code>wget</code> configuration file directly (the system-wide file is <code>/etc/wgetrc</code>, per user files are <code>$HOME/.wgetrc</code>).
</p>
<h4><span class="mw-headline" id="aria2">aria2</span></h4>
<p><a href="../../en/Aria2.html" title="Aria2">aria2</a> is a lightweight download utility with support for resumable and segmented HTTP/HTTPS and FTP downloads. aria2 allows for multiple and simultaneous HTTP/HTTPS and FTP connections to an Arch mirror, which should result in an increase in download speeds for both file and package retrieval.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Using aria2c in <i>pacman</i>'s XferCommand will <b>not</b> result in parallel downloads of multiple packages. Pacman invokes the XferCommand with a single package at a time and waits for it to complete before invoking the next. To download multiple packages in parallel, see <a href="../../en/Powerpill.html" title="Powerpill">Powerpill</a>.</div>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=aria2">aria2</a></span>, then edit <code>/etc/pacman.conf</code> by adding the following line to the <code>[options]</code> section:
</p>
<pre>XferCommand = /usr/bin/aria2c --allow-overwrite=true --continue=true --file-allocation=none --log-level=error --max-tries=2 --max-connection-per-server=2 --max-file-not-found=5 --min-split-size=5M --no-conf --remote-time=true --summary-interval=60 --timeout=5 --dir=/ --out %o %u
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1491879#p1491879">This alternative configuration for using pacman with aria2</a> tries to simplify configuration and adds more configuration options.</div>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 1 aria2c"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/aria2c.1#OPTIONS">aria2c(1) § OPTIONS</a></span> for used aria2c options.
</p>
<ul>
<li>
<code>-d, --dir</code>: The directory to store the downloaded file(s) as specified by <i>pacman</i>.</li>
<li>
<code>-o, --out</code>: The output file name(s) of the downloaded file(s).</li>
<li>
<code>%o</code>: Variable which represents the local filename(s) as specified by <i>pacman</i>.</li>
<li>
<code>%u</code>: Variable which represents the download URL as specified by <i>pacman</i>.</li>
</ul>
<h4><span class="mw-headline" id="Other_applications">Other applications</span></h4>
<p>There are other downloading applications that you can use with <i>pacman</i>. Here they are, and their associated XferCommand settings:
</p>
<ul>
<li>
<code>snarf</code>: <code>XferCommand = /usr/bin/snarf -N %u</code>
</li>
<li>
<code>lftp</code>: <code>XferCommand = /usr/bin/lftp -c pget %u</code>
</li>
<li>
<code>axel</code>: <code>XferCommand = /usr/bin/axel -n 2 -v -a -o %o %u</code>
</li>
<li>
<code>hget</code>: <code>XferCommand = /usr/bin/hget %u -n 2 -skip-tls false</code> (please read the <a rel="nofollow" class="external text" href="https://github.com/huydx/hget">documentation on the Github project page</a> for more info)</li>
<li>
<code>saldl</code>: <code>XferCommand = /usr/bin/saldl -c6 -l4 -s2m -o %o %u</code> (please read the <a rel="nofollow" class="external text" href="https://saldl.github.io">documentation on the project page</a> for more info)</li>
</ul>
<h2><span class="mw-headline" id="Utilities">Utilities</span></h2>
<ul><li>
<b>isfree</b> — A Bash script to list non-free packages. Based on Parabola's blacklist.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/leo-arch/isfree">https://github.com/leo-arch/isfree</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/isfree/">isfree</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Lostfiles</b> — Script that identifies files not owned by any package.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/graysky2/lostfiles">https://github.com/graysky2/lostfiles</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lostfiles">lostfiles</a></span>
</dd></dl>
<ul><li>
<b>pacutils</b> — Helper library for libalpm based programs.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/andrewgregory/pacutils">https://github.com/andrewgregory/pacutils</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacutils">pacutils</a></span>
</dd></dl>
<ul><li>
<b><a href="../../en/Pkgfile.html" title="Pkgfile">pkgfile</a></b> — Tool that finds what package owns a file.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/falconindy/pkgfile">https://github.com/falconindy/pkgfile</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pkgfile">pkgfile</a></span>
</dd></dl>
<ul><li>
<b>pkgtop</b> — Interactive package manager and resource monitor designed for the GNU/Linux.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/orhun/pkgtop">https://github.com/orhun/pkgtop</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pkgtop-git/">pkgtop-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b><a href="../../en/Powerpill.html" title="Powerpill">Powerpill</a></b> — Uses parallel and segmented downloading through <a href="../../en/Aria2.html" title="Aria2">aria2</a> and <a href="../../en/Reflector.html" title="Reflector">Reflector</a> to try to speed up downloads for <i>pacman</i>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://xyne.dev/projects/powerpill/">https://xyne.dev/projects/powerpill/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/powerpill/">powerpill</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>repoctl</b> — Tool to help manage local repositories.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/cassava/repoctl">https://github.com/cassava/repoctl</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/repoctl/">repoctl</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>repose</b> — An Arch Linux repository building tool.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/vodik/repose">https://github.com/vodik/repose</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=repose">repose</a></span>
</dd></dl>
<ul><li>
<b><a href="../../en/Snapper.html#Wrapping_pacman_transactions_in_snapshots" title="Snapper">snap-pac</a></b> — Make <i>pacman</i> automatically use snapper to create pre/post snapshots like openSUSE's YaST.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/wesbarnett/snap-pac">https://github.com/wesbarnett/snap-pac</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=snap-pac">snap-pac</a></span>
</dd></dl>
<ul><li>
<b>vrms-arch</b> — A virtual Richard M. Stallman to tell you which non-free packages are installed.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/orospakr/vrms-arch">https://github.com/orospakr/vrms-arch</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vrms-arch-git/">vrms-arch-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h3><span class="mw-headline" id="Graphical">Graphical</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> PackageKit opens up system permissions by default, and is otherwise <a rel="nofollow" class="external text" href="https://github.com/archlinux/archinstall/issues/1321#issuecomment-1151343223">not recommended</a> for general usage. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/50459">FS#50459</a> and <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/57943">FS#57943</a>.</div>
<ul><li>
<b>Deepin App Store</b> — Third party app store for DDE built with DTK, using PackageKit. Supports <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Distributions/AppStream/">AppStream metadata</a>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/dekzi/dde-store">https://github.com/dekzi/dde-store</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=deepin-store">deepin-store</a></span>
</dd></dl>
<ul><li>
<b>Discover</b> — Qt 5 application manager using PackageKit written in C++/QML. Supports <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Distributions/AppStream/">AppStream metadata</a>, <a href="../../en/Flatpak.html" title="Flatpak">Flatpak</a> and <a href="../../en/Fwupd.html" title="Fwupd">firmware updates</a>. Part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/plasma/">plasma</a></span>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://apps.kde.org/discover/">https://apps.kde.org/discover/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=discover">discover</a></span>
</dd></dl>
<ul><li>
<b>GNOME PackageKit</b> — GTK 3 package manager using PackageKit written in C.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://freedesktop.org/software/PackageKit/">https://freedesktop.org/software/PackageKit/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-packagekit">gnome-packagekit</a></span>
</dd></dl>
<ul><li>
<b>pcurses</b> — Curses TUI <i>pacman</i> wrapper written in C++.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/schuay/pcurses">https://github.com/schuay/pcurses</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pcurses/">pcurses</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>tkPacman</b> — Tk pacman wrapper written in Tcl.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://sourceforge.net/projects/tkpacman">https://sourceforge.net/projects/tkpacman</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tkpacman/">tkpacman</a></span><sup><small>AUR</small></sup>
</dd></dl>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../en/Category:Package_manager.html" title="Category:Package manager">Package manager</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks&amp;oldid=828365">https://wiki.archlinux.org/index.php?title=Pacman/Tips_and_tricks&amp;oldid=828365</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 6 March 2025, at 21:20.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
