<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ThinkPad mobile Internet - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ThinkPad_mobile_Internet rootpage-ThinkPad_mobile_Internet skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-ModemManager-handled_devices" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#ModemManager-handled_devices">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>ModemManager-handled devices</span>
			</div>
		</a>
		
			<button aria-controls="toc-ModemManager-handled_devices-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle ModemManager-handled devices subsection</span>
			</button>
		
		<ul id="toc-ModemManager-handled_devices-sublist" class="vector-toc-list">
			<li id="toc-FCC_unlock_a_Quectel_modem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#FCC_unlock_a_Quectel_modem">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>FCC unlock a Quectel modem</span>
				</div>
			</a>
			
			<ul id="toc-FCC_unlock_a_Quectel_modem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuring_ModemManager-handled_devices" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuring_ModemManager-handled_devices">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Configuring ModemManager-handled devices</span>
				</div>
			</a>
			
			<ul id="toc-Configuring_ModemManager-handled_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-QMI_protocol_modems" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#QMI_protocol_modems">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>QMI protocol modems</span>
			</div>
		</a>
		
			<button aria-controls="toc-QMI_protocol_modems-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle QMI protocol modems subsection</span>
			</button>
		
		<ul id="toc-QMI_protocol_modems-sublist" class="vector-toc-list">
			<li id="toc-Requirements" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Requirements">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Requirements</span>
				</div>
			</a>
			
			<ul id="toc-Requirements-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Procedure" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Procedure">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Procedure</span>
				</div>
			</a>
			
			<ul id="toc-Procedure-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Gobi_modems" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Gobi_modems">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Gobi modems</span>
			</div>
		</a>
		
		<ul id="toc-Gobi_modems-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Getting_around_BIOS-level_whitelist_restrictions" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Getting_around_BIOS-level_whitelist_restrictions">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Getting around BIOS-level whitelist restrictions</span>
			</div>
		</a>
		
			<button aria-controls="toc-Getting_around_BIOS-level_whitelist_restrictions-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Getting around BIOS-level whitelist restrictions subsection</span>
			</button>
		
		<ul id="toc-Getting_around_BIOS-level_whitelist_restrictions-sublist" class="vector-toc-list">
			<li id="toc-Settings_for_Sierra_Wireless_EM7455" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Settings_for_Sierra_Wireless_EM7455">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Settings for Sierra Wireless EM7455</span>
				</div>
			</a>
			
			<ul id="toc-Settings_for_Sierra_Wireless_EM7455-sublist" class="vector-toc-list">
				<li id="toc-General_description" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#General_description">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1</span>
					<span>General description</span>
				</div>
			</a>
			
			<ul id="toc-General_description-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Step-by-step" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Step-by-step">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.2</span>
					<span>Step-by-step</span>
				</div>
			</a>
			
			<ul id="toc-Step-by-step-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Remarks" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Remarks">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.3</span>
					<span>Remarks</span>
				</div>
			</a>
			
			<ul id="toc-Remarks-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-WWAN/LTE_GUI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#WWAN/LTE_GUI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>WWAN/LTE GUI</span>
				</div>
			</a>
			
			<ul id="toc-WWAN/LTE_GUI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Invalid_Transition" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Invalid_Transition">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Invalid Transition</span>
				</div>
			</a>
			
			<ul id="toc-Invalid_Transition-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">ThinkPad mobile Internet</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p>Many Lenovo ThinkPads come with a mobile broadband modem. By inserting a SIM card into the modem, it is possible to use a cellular network to connect to the internet.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="ModemManager-handled_devices">ModemManager-handled devices</h2></div>
<p>Newer Quectel modems (for example, the Quectel EM120R-GL on X13 Gen2, X1C Gen9, T14 Gen 2 AMD) can be set by <a href="../en/Mobile_broadband_modem.html#ModemManager" class="mw-redirect" title="ModemManager">ModemManager</a> and managed with <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a>.
</p>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=modemmanager">modemmanager</a></span>, then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>ModemManager.service</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="FCC_unlock_a_Quectel_modem">FCC unlock a Quectel modem</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Since release 1.18.4, the ModemManager daemon no longer automatically performs the FCC unlock procedure, refer to <a href="../en/Mobile_broadband_modem.html#FCC_locking" title="Mobile broadband modem">Mobile broadband modem#FCC locking</a>
</div>
<p>On some devices the modem will be in an <i>fcc-lock</i> state.
</p>
<p>You need to find the modem device: known devices are <code>/dev/ww*</code> and <code>/dev/cdc*</code>.
Alternatively, search the kernel log for <code>wwan</code> or <code>WDM</code>.
</p>
<p>A locked modem can be confirmed with the following command:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># mbimcli -p -d <i>device</i> -v --quectel-query-radio-state</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
 &gt;&gt;&gt;&gt;&gt;&gt;   RadioState = 'fcc-locked'
...</pre>
<p>You can then unlock the modem:
</p>
<pre># mbimcli -p -d <i>device</i> -v --quectel-set-radio-state=on
</pre>
<p>Then you can enable the modem:
</p>
<pre>$ mmcli --modem 0 --enable
</pre>
<p>Alternatively:
The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lenovo-wwan-unlock/">lenovo-wwan-unlock</a></span><sup><small>AUR</small></sup> package provides a service to automatically perform the FCC unlock for the Fibocom L860R+, Fibocom FM350 5G, Quectel RM520N-GL, Quectel EM160R-GL, Quectel EM061K, Quectel EM05-CN modems based on the <a rel="nofollow" class="external text" href="https://github.com/lenovo/lenovo-wwan-unlock">official Lenovo tool</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Configuring_ModemManager-handled_devices">Configuring ModemManager-handled devices</h3></div>
<p>This can be set via CLI or GUI.
</p>
<p>You can use NetworkManager's <i>nm-connection-editor</i> to add a new <i>Mobile Broadband</i> connection and follow the prompts to configure your connection.
</p>
<p>Or as an example on KDE Plasma:
</p>
<ul>
<li>In <i>System Settings &gt; Connections</i> click the plus sign in the lower right corner to create a new link</li>
<li>Select <i>Mobile Broadband &gt; Create</i>
</li>
<li><i>Set up mobile broadband connection &gt; any GSM device</i></li>
<li><i>Country &gt; country_code</i></li>
<li><i>Provider &gt; provider_name</i></li>
<li><i>Select your plan &gt; My plan is not listed</i></li>
<li><i>APN &gt; apn.number</i></li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> You may be able to find the provider and APN in Windows under <i>Settings &gt; Network and Internet &gt; Cellular Network &gt; Carrier Settings</i>: provider can be found in <i>Active Network</i>, and the APN can be found in <i>Internet APN &gt; Default Access Point &gt; Views</i>
</div>
<div class="mw-heading mw-heading2"><h2 id="QMI_protocol_modems">QMI protocol modems</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Requirements">Requirements</h3></div>
<p>The broadband modems in older ThinkPads use the QMI modem protocol â€” see <a rel="nofollow" class="external text" href="https://sigquit.wordpress.com/2012/08/20/an-introduction-to-libqmi/">"an introduction to libqmi"</a> by a ModemManager developer for more information. These modems will show up as <code>/dev/cdc-wdm</code> on the filesystem.
</p>
<p>It is not possible to initialize a QMI modem for use on Linux. Use Windows to activate the modem using <a rel="nofollow" class="external text" href="https://support.lenovo.com/us/en/downloads/migr-68495">Lenovo's activation app</a> (or web search for "Lenovo mobile broadband" for the correct app for your modem). The modem will not work until it has been correctly initialized using the app.
</p>
<div class="mw-heading mw-heading3"><h3 id="Procedure">Procedure</h3></div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libqmi">libqmi</a></span> package, which provides the <code>qmicli</code> and <code>qmi-network</code> programs. Also install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=net-tools">net-tools</a></span> for the helper script, which uses the <code>ifconfig</code> command.
</p>
<p>Said <a rel="nofollow" class="external text" href="https://github.com/penguin2716/qmi_setup/blob/master/qmi_setup.sh">helper script</a> for <code>qmi-network</code> is available on GitHub. Save the script to somewhere in your <code>$PATH</code>, then review the script and make it <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>. The values of some of the variables might need to be changed, especially <code>WWAN_DEV</code> which can be found via <code>ip a</code> (device name start with <code>ww</code>).
</p>
<p>Load the kernel modules <code>qmi_wwan</code> and <code>qcserial</code>:
</p>
<pre># modprobe qmi_wwan
# modprobe qcserial
</pre>
<p>Also read the README on the <a rel="nofollow" class="external text" href="https://github.com/penguin2716/qmi_setup">GitHub page of the QMI helper</a> for any further prerequisites. In particular, you may need to set the APN provided by your cellular internet provider in <code>/etc/qmi-network.conf</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/qmi-network.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">APN=foo.bar.net</pre>
<p>Finally, running <code>qmi_setup.sh start</code> should start the cellular internet connection.
</p>
<div class="mw-heading mw-heading2"><h2 id="Gobi_modems">Gobi modems</h2></div>
<p>This method is an alternative for some <a href="#QMI_protocol_modems">QMI modems</a>. 
</p>
<p>First of all you need to make sure what model your modem is. Open your ThinkPad's backplate and look for an IC or FCC ID. For this example we are going to use GOBI2000 (IC: 2723A-GOBI2000, FCC ID: J9CGOBI2000-L)
</p>
<p>Enable your modem device from you BIOS I/O settings.
</p>
<p>Download the driver installer executable from <a rel="nofollow" class="external free" href="https://support.lenovo.com/us/en/downloads/ds001302">https://support.lenovo.com/us/en/downloads/ds001302</a> and extract it with Wine. It will unpack the drivers to <code>~/.wine/drive_c/DRIVERS/WWANQL</code>. The unpacker will prompt you to install the drivers automatically after unpacking, but if you need the installer again it is <code>GobiInstaller.msi</code> in previously mentioned folder. The installer will in turn unpack the firmware images to <code>~/.wine/drive_c/Program\ Files\ \(x86\)/QUALCOMM/Images/Lenovo</code>. 
</p>
<p>Now refer to the reference information on what firmware you want/need. Generally you are good to go with the Generic UMTS and Default Firmware (Forlders 6 an UMTS). 
</p>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gobi-loader/">gobi-loader</a></span><sup><small>AUR</small></sup>. Now copy the 3 previous firmware files to <code>/lib/firmware/gobi</code> (if the folder does not exist, create it). Insert your sim card to the port found under your battery pack and restart. Your modem should now show up in your network manager.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> Some firmwares are provided by the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gobi-firmware/">gobi-firmware</a></span><sup><small>AUR</small></sup> package.</div>
<p>See: <a rel="nofollow" class="external free" href="https://www.thinkwiki.org/wiki/Qualcomm_Gobi_2000">https://www.thinkwiki.org/wiki/Qualcomm_Gobi_2000</a>
</p>
<div class="mw-heading mw-heading2"><h2 id="Getting_around_BIOS-level_whitelist_restrictions">Getting around BIOS-level whitelist restrictions</h2></div>
<p>In newer ThinkPad models, it is normally impossible to swap the LTE modem for a supported one due to BIOS-level restrictions ("whitelists" of allowed M.2 expansion cards) implemented in all modern Lenovo laptops. However, a method has been found to configure any Sierra Wireless EM73xx/EM74xx modem to "evade" the whitelist checks, so these modems can be used normally.
</p>
<p>We will assume the model to be <code>Sierra Wireless EM7455</code> here.
</p>
<div class="mw-heading mw-heading3"><h3 id="Settings_for_Sierra_Wireless_EM7455">Settings for Sierra Wireless EM7455</h3></div>
<div class="mw-heading mw-heading4"><h4 id="General_description">General description</h4></div>
<p>Use <code>AT!CUSTOM="FASTENUMEN",0</code> AT command to disable the modem's <i>USB fast enumeration</i> feature. The modem will take a significantly longer time to appear on the USB bus and the firmware will "miss" the modem at boot time.
</p>
<p>Alternatively, use <code>AT!CUSTOM="FASTENUMEN",2</code> to selectively enable <i>USB fast enumeration</i> for warm boots only. The modem will reappear faster on S3 resume but still evade the whitelist checks on regular boots <i>and</i> reboots (the mechanism of this effect is not fully clear to the author).
</p>
<p>This comes with a downside: because the firmware does not "see" the modem, it will not export the <a href="../en/Wireless_network_configuration.html#Rfkill_caveat" class="mw-redirect" title="Wireless network configuration">WWAN rfkill</a> but instead it will unconditionally assert the <code>W_DISABLE</code> pin of the M.2 slot, forcing the modem into "airplane mode".
Use <code>AT!PCOFFEN=2</code> AT command to configure the modem to ignore this pin.
</p>
<div class="mw-heading mw-heading4"><h4 id="Step-by-step">Step-by-step</h4></div>
<p>Boot the laptop with the stock modem in place and WWAN card access enabled in BIOS setup.
</p>
<p>Suspend the laptop (make sure it is configured to use S3).
</p>
<p>Hot-swap the stock Fibocom modem with the Sierra Wireless one, then resume. Whitelists are not consulted at S3 resume.
</p>
<p>Check that the modem is present on the USB bus:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lsusb</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;...&gt;
Bus 001 Device 004: ID 1199:9071 Sierra Wireless, Inc.
&lt;...&gt;
</pre>
<p>Remember the VID (vendor ID) of the modem (<code>1199</code> in this example).
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">Stop</a> <code>ModemManager.service</code> if it is running.
</p>
<p>Optionally, update the modem firmware with the <code>qmi-firmware-update</code> tool:
</p>
<pre># cd /path/to/extracted/firmware
# qmi-firmware-update -d 1199 -u *.cwe *.nvu
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> The device may need to be set to usb composition 6 first. To do this, run the command to set the usb composition and power cycle the modem (see next steps).</div>
<p>Change the modem's USB composition to enable AT command ports:
</p>
<pre># qmicli -d /dev/cdc-wdm1 --dms-swi-set-usb-composition=8
</pre>
<p>Power-cycle the modem as advised by <code>qmicli</code>:
</p>
<pre># qmicli -d /dev/cdc-wdm1 --dms-set-operating-mode=offline
# qmicli -d /dev/cdc-wdm1 --dms-set-operating-mode=reset
</pre>
<p>Wait for the modem to reappear, then verify:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># qmicli -d /dev/cdc-wdm1 --dms-swi-get-usb-composition</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[/dev/cdc-wdm1] Successfully retrieved USB compositions:
            USB composition 6: DM, NMEA, AT, QMI
        [*] USB composition 8: DM, NMEA, AT, MBIM
            USB composition 9: MBIM
</pre>
<p>Verify that the three serial ports <code>/dev/ttyUSB0</code>, <code>/dev/ttyUSB1</code> and <code>/dev/ttyUSB2</code> are now available (assuming you do not have any other USB-serial converters plugged in):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># ls -l /dev/ttyUSB*</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">crw-rw---- 1 root uucp 188, 0 Feb 14 20:11 /dev/ttyUSB0
crw-rw---- 1 root uucp 188, 1 Feb 14 20:11 /dev/ttyUSB1
crw-rw---- 1 root uucp 188, 2 Feb 14 20:11 /dev/ttyUSB2
</pre>
<p>Attach to <code>/dev/ttyUSB2</code> with a serial terminal emulator of your choice (e. g. <code>screen</code>):
</p>
<pre># screen /dev/ttyUSB2 115200
</pre>
<p>Enter the AT commands (note that you do not need to type <code>OK</code>, the replies are included here as part of a session transcript):
</p>
<p>Enable command echo (if echo is initially disabled, you will not see this command as you type it):
</p>
<pre>ATE1
OK
</pre>
<p>Unlock engineering commands:
</p>
<pre>AT!ENTERCND="A710"
OK
</pre>
<p>Check customization options (these are the author's options):
</p>
<pre>AT!CUSTOM?
!CUSTOM: 
             GPSENABLE          0x01
             GPSSEL             0x01
             IPV6ENABLE         0x01
             SIMLPM             0x01
             SINGLEAPNSWITCH    0x01


OK
</pre>
<p>Configure <i>USB fast enumeration</i> (swap <code>2</code> for <code>0</code> if you want to play it safe):
</p>
<pre>AT!CUSTOM="FASTENUMEN",2
OK
</pre>
<p>Verify, it should now show the <code>FASTENUMEN</code> option alongside others:
</p>
<pre>AT!CUSTOM?
!CUSTOM: 
             GPSENABLE          0x01
             GPSSEL             0x01
             IPV6ENABLE         0x01
             SIMLPM             0x01
             FASTENUMEN         0x02
             SINGLEAPNSWITCH    0x01


OK
</pre>
<p>Configure the modem to ignore W_DISABLE:
</p>
<pre>AT!PCOFFEN=2
OK
</pre>
<p>Verify:
</p>
<pre>AT!PCOFFEN?
2
   
OK
</pre>
<p>Reset the modem:
</p>
<pre>AT!RESET
OK
</pre>
<p>the terminal will disconnect after a while.
</p>
<p>Wait for the modem to reappear, then verify configuration by rebooting / powering down / hard resetting the laptop.
</p>
<div class="mw-heading mw-heading4"><h4 id="Remarks">Remarks</h4></div>
<p>For more information (including the original thought process that led to this discovery), see these <a rel="nofollow" class="external text" href="https://forums.lenovo.com/t5/Ubuntu/X1C-gen-6-Fibocom-L850-GL-Ubuntu-18-04/m-p/4078413?page=5#4307332">lenovo</a> <a rel="nofollow" class="external text" href="https://forums.lenovo.com/t5/Linux-Discussion/Getting-Sierra-EM7455-and-similar-to-work-on-X1C6/td-p/4326043">threads</a> and this <a rel="nofollow" class="external text" href="https://www.reddit.com/r/thinkpad/comments/a3yd2j/sierra_wireless_em7455_seems_working_with_my/">reddit</a> thread.
</p>
<p>You may also apply other useful configuration options described <a rel="nofollow" class="external text" href="https://github.com/danielewood/sierra-wireless-modems">here</a>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Troubleshooting">Troubleshooting</h2></div>
<p>Ensure that you have initialized the modem on Windows.
</p>
<div class="mw-heading mw-heading3"><h3 id="WWAN/LTE_GUI">
<span id="WWAN.2FLTE_GUI"></span>WWAN/LTE GUI</h3></div>
<p>Install <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span> to make your life easier finding the correct APN for your SIM card.
</p>
<div class="mw-heading mw-heading3"><h3 id="Invalid_Transition">Invalid Transition</h3></div>
<p>If you get an error <code>Invalid Transition</code> when running <code>mmcli -m 0 -e</code>, it is likely you have not yet removed the <a rel="nofollow" class="external text" href="https://modemmanager.org/docs/modemmanager/fcc-unlock/">fcc-lock</a> on the modem.  See the example commands in <a href="#FCC_unlock_a_Quectel_modem">#FCC unlock a Quectel modem</a>.
</p>
<div class="mw-heading mw-heading2"><h2 id="See_also">See also</h2></div>
<ul><li><a rel="nofollow" class="external text" href="https://www.thinkwiki.org">Thinkwiki</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li>
<li><a href="../en/Category:Modems.html" title="Category:Modems">Modems</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ThinkPad_mobile_Internet&amp;oldid=863117">https://wiki.archlinux.org/index.php?title=ThinkPad_mobile_Internet&amp;oldid=863117</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 January 2026, at 16:18.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">ThinkPad mobile Internet</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
