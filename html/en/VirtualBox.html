<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>VirtualBox - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-VirtualBox rootpage-VirtualBox skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation_steps_for_Arch_Linux_hosts" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation_steps_for_Arch_Linux_hosts">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation steps for Arch Linux hosts</div>
		</a>
		
			<button aria-controls="toc-Installation_steps_for_Arch_Linux_hosts-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation steps for Arch Linux hosts subsection</span>
			</button>
		
		<ul id="toc-Installation_steps_for_Arch_Linux_hosts-sublist" class="vector-toc-list">
			<li id="toc-Install_the_core_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Install_the_core_packages">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Install the core packages</div>
			</a>
			
			<ul id="toc-Install_the_core_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sign_modules" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sign_modules">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Sign modules</div>
			</a>
			
			<ul id="toc-Sign_modules-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Load_the_VirtualBox_kernel_modules" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Load_the_VirtualBox_kernel_modules">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Load the VirtualBox kernel modules</div>
			</a>
			
			<ul id="toc-Load_the_VirtualBox_kernel_modules-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Accessing_host_USB_devices_in_guest" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Accessing_host_USB_devices_in_guest">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4</span>Accessing host USB devices in guest</div>
			</a>
			
			<ul id="toc-Accessing_host_USB_devices_in_guest-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Guest_additions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Guest_additions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.5</span>Guest additions</div>
			</a>
			
			<ul id="toc-Guest_additions-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unattended_templates" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unattended_templates">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.6</span>Unattended templates</div>
			</a>
			
			<ul id="toc-Unattended_templates-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Extension_pack" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Extension_pack">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.7</span>Extension pack</div>
			</a>
			
			<ul id="toc-Extension_pack-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Front-ends" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Front-ends">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.8</span>Front-ends</div>
			</a>
			
			<ul id="toc-Front-ends-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installation_steps_for_Arch_Linux_guests" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation_steps_for_Arch_Linux_guests">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Installation steps for Arch Linux guests</div>
		</a>
		
		<ul id="toc-Installation_steps_for_Arch_Linux_guests-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Virtual_disks_management" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Virtual_disks_management">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Virtual disks management</div>
		</a>
		
			<button aria-controls="toc-Virtual_disks_management-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Virtual disks management subsection</span>
			</button>
		
		<ul id="toc-Virtual_disks_management-sublist" class="vector-toc-list">
			<li id="toc-Formats_supported_by_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Formats_supported_by_VirtualBox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Formats supported by VirtualBox</div>
			</a>
			
			<ul id="toc-Formats_supported_by_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disk_image_format_conversion" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disk_image_format_conversion">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Disk image format conversion</div>
			</a>
			
			<ul id="toc-Disk_image_format_conversion-sublist" class="vector-toc-list">
				<li id="toc-QCOW" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#QCOW">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.1</span>QCOW</div>
			</a>
			
			<ul id="toc-QCOW-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Mount_virtual_disks" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mount_virtual_disks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Mount virtual disks</div>
			</a>
			
			<ul id="toc-Mount_virtual_disks-sublist" class="vector-toc-list">
				<li id="toc-VDI" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#VDI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.1</span>VDI</div>
			</a>
			
			<ul id="toc-VDI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VHD" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#VHD">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.2</span>VHD</div>
			</a>
			
			<ul id="toc-VHD-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Compact_virtual_disks" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Compact_virtual_disks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Compact virtual disks</div>
			</a>
			
			<ul id="toc-Compact_virtual_disks-sublist" class="vector-toc-list">
				<li id="toc-TRIM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#TRIM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.1</span>TRIM</div>
			</a>
			
			<ul id="toc-TRIM-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Increase_virtual_disks" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Increase_virtual_disks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Increase virtual disks</div>
			</a>
			
			<ul id="toc-Increase_virtual_disks-sublist" class="vector-toc-list">
				<li id="toc-General_procedure" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#General_procedure">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.1</span>General procedure</div>
			</a>
			
			<ul id="toc-General_procedure-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Increasing_the_size_of_VDI_disks" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Increasing_the_size_of_VDI_disks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.2</span>Increasing the size of VDI disks</div>
			</a>
			
			<ul id="toc-Increasing_the_size_of_VDI_disks-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Replace_a_virtual_disk_manually_from_the_.vbox_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Replace_a_virtual_disk_manually_from_the_.vbox_file">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Replace a virtual disk manually from the .vbox file</div>
			</a>
			
			<ul id="toc-Replace_a_virtual_disk_manually_from_the_.vbox_file-sublist" class="vector-toc-list">
				<li id="toc-Transfer_between_Linux_host_and_other_operating_system" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Transfer_between_Linux_host_and_other_operating_system">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6.1</span>Transfer between Linux host and other operating system</div>
			</a>
			
			<ul id="toc-Transfer_between_Linux_host_and_other_operating_system-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Clone_a_virtual_disk_and_assigning_a_new_UUID_to_it" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Clone_a_virtual_disk_and_assigning_a_new_UUID_to_it">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Clone a virtual disk and assigning a new UUID to it</div>
			</a>
			
			<ul id="toc-Clone_a_virtual_disk_and_assigning_a_new_UUID_to_it-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Import/export_VirtualBox_virtual_machines_from/to_other_hypervisors" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Import/export_VirtualBox_virtual_machines_from/to_other_hypervisors">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Import/export VirtualBox virtual machines from/to other hypervisors</div>
			</a>
			
			<ul id="toc-Import/export_VirtualBox_virtual_machines_from/to_other_hypervisors-sublist" class="vector-toc-list">
				<li id="toc-Remove_additions" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Remove_additions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.1</span>Remove additions</div>
			</a>
			
			<ul id="toc-Remove_additions-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_the_right_virtual_disk_format" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Use_the_right_virtual_disk_format">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.2</span>Use the right virtual disk format</div>
			</a>
			
			<ul id="toc-Use_the_right_virtual_disk_format-sublist" class="vector-toc-list">
				<li id="toc-Automatic_tools" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Automatic_tools">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.2.1</span>Automatic tools</div>
			</a>
			
			<ul id="toc-Automatic_tools-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Manual_conversion" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Manual_conversion">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.2.2</span>Manual conversion</div>
			</a>
			
			<ul id="toc-Manual_conversion-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Create_the_virtual_machine_configuration_for_your_hypervisor" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_the_virtual_machine_configuration_for_your_hypervisor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.3</span>Create the virtual machine configuration for your hypervisor</div>
			</a>
			
			<ul id="toc-Create_the_virtual_machine_configuration_for_your_hypervisor-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Virtual_machine_launch_management" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Virtual_machine_launch_management">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Virtual machine launch management</div>
			</a>
			
			<ul id="toc-Virtual_machine_launch_management-sublist" class="vector-toc-list">
				<li id="toc-Starting_virtual_machines_with_a_service_(autostart)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Starting_virtual_machines_with_a_service_(autostart)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.1</span>Starting virtual machines with a service (autostart)</div>
			</a>
			
			<ul id="toc-Starting_virtual_machines_with_a_service_(autostart)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Starting_virtual_machines_with_a_keyboard_shortcut" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Starting_virtual_machines_with_a_keyboard_shortcut">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.2</span>Starting virtual machines with a keyboard shortcut</div>
			</a>
			
			<ul id="toc-Starting_virtual_machines_with_a_keyboard_shortcut-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Use_specific_device_in_the_virtual_machine" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Use_specific_device_in_the_virtual_machine">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Use specific device in the virtual machine</div>
			</a>
			
			<ul id="toc-Use_specific_device_in_the_virtual_machine-sublist" class="vector-toc-list">
				<li id="toc-Using_USB_webcam_/_microphone" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_USB_webcam_/_microphone">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.1</span>Using USB webcam / microphone</div>
			</a>
			
			<ul id="toc-Using_USB_webcam_/_microphone-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Detecting_web-cams_and_other_USB_devices" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Detecting_web-cams_and_other_USB_devices">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.2</span>Detecting web-cams and other USB devices</div>
			</a>
			
			<ul id="toc-Detecting_web-cams_and_other_USB_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Access_a_guest_server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Access_a_guest_server">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Access a guest server</div>
			</a>
			
			<ul id="toc-Access_a_guest_server-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-D3D_acceleration_in_Windows_guests" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D3D_acceleration_in_Windows_guests">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>D3D acceleration in Windows guests</div>
			</a>
			
			<ul id="toc-D3D_acceleration_in_Windows_guests-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VirtualBox_on_a_USB_key" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VirtualBox_on_a_USB_key">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>VirtualBox on a USB key</div>
			</a>
			
			<ul id="toc-VirtualBox_on_a_USB_key-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Run_a_native_Arch_Linux_installation_inside_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Run_a_native_Arch_Linux_installation_inside_VirtualBox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7</span>Run a native Arch Linux installation inside VirtualBox</div>
			</a>
			
			<ul id="toc-Run_a_native_Arch_Linux_installation_inside_VirtualBox-sublist" class="vector-toc-list">
				<li id="toc-Make_sure_you_have_a_persistent_naming_scheme" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Make_sure_you_have_a_persistent_naming_scheme">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7.1</span>Make sure you have a persistent naming scheme</div>
			</a>
			
			<ul id="toc-Make_sure_you_have_a_persistent_naming_scheme-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Make_sure_your_mkinitcpio_image_is_correct" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Make_sure_your_mkinitcpio_image_is_correct">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7.2</span>Make sure your mkinitcpio image is correct</div>
			</a>
			
			<ul id="toc-Make_sure_your_mkinitcpio_image_is_correct-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Create_a_virtual_machine_configuration_to_boot_from_the_physical_drive" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_a_virtual_machine_configuration_to_boot_from_the_physical_drive">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7.3</span>Create a virtual machine configuration to boot from the physical drive</div>
			</a>
			
			<ul id="toc-Create_a_virtual_machine_configuration_to_boot_from_the_physical_drive-sublist" class="vector-toc-list">
				<li id="toc-Create_a_raw_disk_VMDK_image" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Create_a_raw_disk_VMDK_image">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7.3.1</span>Create a raw disk VMDK image</div>
			</a>
			
			<ul id="toc-Create_a_raw_disk_VMDK_image-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Create_the_virtual_machine_configuration_file" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Create_the_virtual_machine_configuration_file">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7.3.2</span>Create the virtual machine configuration file</div>
			</a>
			
			<ul id="toc-Create_the_virtual_machine_configuration_file-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Install_a_native_Arch_Linux_system_from_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Install_a_native_Arch_Linux_system_from_VirtualBox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8</span>Install a native Arch Linux system from VirtualBox</div>
			</a>
			
			<ul id="toc-Install_a_native_Arch_Linux_system_from_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Install_MacOS_guest" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Install_MacOS_guest">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9</span>Install MacOS guest</div>
			</a>
			
			<ul id="toc-Install_MacOS_guest-sublist" class="vector-toc-list">
				<li id="toc-No_keyboard/mouse_input_when_attempting_to_install_Mojave" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_keyboard/mouse_input_when_attempting_to_install_Mojave">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9.1</span>No keyboard/mouse input when attempting to install Mojave</div>
			</a>
			
			<ul id="toc-No_keyboard/mouse_input_when_attempting_to_install_Mojave-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-UEFI_interactive_shell_after_restart" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#UEFI_interactive_shell_after_restart">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9.2</span>UEFI interactive shell after restart</div>
			</a>
			
			<ul id="toc-UEFI_interactive_shell_after_restart-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Move_a_native_Windows_installation_to_a_virtual_machine" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Move_a_native_Windows_installation_to_a_virtual_machine">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10</span>Move a native Windows installation to a virtual machine</div>
			</a>
			
			<ul id="toc-Move_a_native_Windows_installation_to_a_virtual_machine-sublist" class="vector-toc-list">
				<li id="toc-Tasks_on_Windows" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Tasks_on_Windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10.1</span>Tasks on Windows</div>
			</a>
			
			<ul id="toc-Tasks_on_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_Disk2vhd_to_clone_Windows_partition" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_Disk2vhd_to_clone_Windows_partition">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10.2</span>Using Disk2vhd to clone Windows partition</div>
			</a>
			
			<ul id="toc-Using_Disk2vhd_to_clone_Windows_partition-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tasks_on_GNU/Linux" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Tasks_on_GNU/Linux">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10.3</span>Tasks on GNU/Linux</div>
			</a>
			
			<ul id="toc-Tasks_on_GNU/Linux-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fix_MBR_and_Microsoft_boot_loader" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Fix_MBR_and_Microsoft_boot_loader">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10.4</span>Fix MBR and Microsoft boot loader</div>
			</a>
			
			<ul id="toc-Fix_MBR_and_Microsoft_boot_loader-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Known_limitations" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Known_limitations">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10.5</span>Known limitations</div>
			</a>
			
			<ul id="toc-Known_limitations-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Run_a_native_Windows_installation_inside_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Run_a_native_Windows_installation_inside_VirtualBox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11</span>Run a native Windows installation inside VirtualBox</div>
			</a>
			
			<ul id="toc-Run_a_native_Windows_installation_inside_VirtualBox-sublist" class="vector-toc-list">
				<li id="toc-Creating_the_virtual_machine" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Creating_the_virtual_machine">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11.1</span>Creating the virtual machine</div>
			</a>
			
			<ul id="toc-Creating_the_virtual_machine-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Creating_virtual_machine_disks" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Creating_virtual_machine_disks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11.2</span>Creating virtual machine disks</div>
			</a>
			
			<ul id="toc-Creating_virtual_machine_disks-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Allowing_VirtualBox_to_read_physical_partitions" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Allowing_VirtualBox_to_read_physical_partitions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11.3</span>Allowing VirtualBox to read physical partitions</div>
			</a>
			
			<ul id="toc-Allowing_VirtualBox_to_read_physical_partitions-sublist" class="vector-toc-list">
				<li id="toc-Higher_security_option:_using_a_dedicated_group_for_the_Windows_partitions" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Higher_security_option:_using_a_dedicated_group_for_the_Windows_partitions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11.3.1</span>Higher security option: using a dedicated group for the Windows partitions</div>
			</a>
			
			<ul id="toc-Higher_security_option:_using_a_dedicated_group_for_the_Windows_partitions-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Lower_security_option:_using_'disk'_group" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Lower_security_option:_using_'disk'_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11.3.2</span>Lower security option: using 'disk' group</div>
			</a>
			
			<ul id="toc-Lower_security_option:_using_'disk'_group-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Setting_up_a_separate_EFI_system_partition" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Setting_up_a_separate_EFI_system_partition">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11.4</span>Setting up a separate EFI system partition</div>
			</a>
			
			<ul id="toc-Setting_up_a_separate_EFI_system_partition-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Adding_virtual_disks_to_the_virtual_machine" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Adding_virtual_disks_to_the_virtual_machine">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11.5</span>Adding virtual disks to the virtual machine</div>
			</a>
			
			<ul id="toc-Adding_virtual_disks_to_the_virtual_machine-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuring_the_virtual_UEFI_firmware_and_creating_Windows_boot_files" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Configuring_the_virtual_UEFI_firmware_and_creating_Windows_boot_files">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11.6</span>Configuring the virtual UEFI firmware and creating Windows boot files</div>
			</a>
			
			<ul id="toc-Configuring_the_virtual_UEFI_firmware_and_creating_Windows_boot_files-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Run_an_entire_physical_disk_in_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Run_an_entire_physical_disk_in_VirtualBox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.12</span>Run an entire physical disk in VirtualBox</div>
			</a>
			
			<ul id="toc-Run_an_entire_physical_disk_in_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Set_guest_starting_resolution" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Set_guest_starting_resolution">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.13</span>Set guest starting resolution</div>
			</a>
			
			<ul id="toc-Set_guest_starting_resolution-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SSH_from_host_to_guest" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SSH_from_host_to_guest">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.14</span>SSH from host to guest</div>
			</a>
			
			<ul id="toc-SSH_from_host_to_guest-sublist" class="vector-toc-list">
				<li id="toc-SSHFS_as_alternative_to_shared_folders" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#SSHFS_as_alternative_to_shared_folders">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.14.1</span>SSHFS as alternative to shared folders</div>
			</a>
			
			<ul id="toc-SSHFS_as_alternative_to_shared_folders-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Keyboard_and_mouse_are_locked_into_virtual_machine" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Keyboard_and_mouse_are_locked_into_virtual_machine">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Keyboard and mouse are locked into virtual machine</div>
			</a>
			
			<ul id="toc-Keyboard_and_mouse_are_locked_into_virtual_machine-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_64-bit_operating_system_client_options" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_64-bit_operating_system_client_options">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>No 64-bit operating system client options</div>
			</a>
			
			<ul id="toc-No_64-bit_operating_system_client_options-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VirtualBox_GUI_does_not_match_host_GTK_theme" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VirtualBox_GUI_does_not_match_host_GTK_theme">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>VirtualBox GUI does not match host GTK theme</div>
			</a>
			
			<ul id="toc-VirtualBox_GUI_does_not_match_host_GTK_theme-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cannot_send_Ctrl+Alt+Fn_to_guest" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cannot_send_Ctrl+Alt+Fn_to_guest">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Cannot send Ctrl+Alt+Fn to guest</div>
			</a>
			
			<ul id="toc-Cannot_send_Ctrl+Alt+Fn_to_guest-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-USB_subsystem_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#USB_subsystem_not_working">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>USB subsystem not working</div>
			</a>
			
			<ul id="toc-USB_subsystem_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-USB_modem_not_working_on_host" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#USB_modem_not_working_on_host">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>USB modem not working on host</div>
			</a>
			
			<ul id="toc-USB_modem_not_working_on_host-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-USB_device_crashes_guest" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#USB_device_crashes_guest">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.7</span>USB device crashes guest</div>
			</a>
			
			<ul id="toc-USB_device_crashes_guest-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Host_freezes_on_virtual_machine_start" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Host_freezes_on_virtual_machine_start">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.8</span>Host freezes on virtual machine start</div>
			</a>
			
			<ul id="toc-Host_freezes_on_virtual_machine_start-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Analog_microphone_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Analog_microphone_not_working">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.9</span>Analog microphone not working</div>
			</a>
			
			<ul id="toc-Analog_microphone_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problems_with_images_converted_to_ISO" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problems_with_images_converted_to_ISO">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.10</span>Problems with images converted to ISO</div>
			</a>
			
			<ul id="toc-Problems_with_images_converted_to_ISO-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_create_the_host-only_network_interface" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_create_the_host-only_network_interface">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.11</span>Failed to create the host-only network interface</div>
			</a>
			
			<ul id="toc-Failed_to_create_the_host-only_network_interface-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_insert_module" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_insert_module">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.12</span>Failed to insert module</div>
			</a>
			
			<ul id="toc-Failed_to_insert_module-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.13</span>VBOX_E_INVALID_OBJECT_STATE (0x80BB0007)</div>
			</a>
			
			<ul id="toc-VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-NS_ERROR_FAILURE_and_missing_menu_items" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#NS_ERROR_FAILURE_and_missing_menu_items">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.14</span>NS_ERROR_FAILURE and missing menu items</div>
			</a>
			
			<ul id="toc-NS_ERROR_FAILURE_and_missing_menu_items-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OpenBSD_unusable_when_virtualisation_instructions_unavailable" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OpenBSD_unusable_when_virtualisation_instructions_unavailable">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.15</span>OpenBSD unusable when virtualisation instructions unavailable</div>
			</a>
			
			<ul id="toc-OpenBSD_unusable_when_virtualisation_instructions_unavailable-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Windows:_"The_specified_path_does_not_exist._Check_the_path_and_then_try_again."' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Windows:_"The_specified_path_does_not_exist._Check_the_path_and_then_try_again."'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.16</span>Windows: "The specified path does not exist. Check the path and then try again."</div>
			</a>
			
			<ul id='toc-Windows:_"The_specified_path_does_not_exist._Check_the_path_and_then_try_again."-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Windows_8.x_error_code_0x000000C4" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Windows_8.x_error_code_0x000000C4">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.17</span>Windows 8.x error code 0x000000C4</div>
			</a>
			
			<ul id="toc-Windows_8.x_error_code_0x000000C4-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Windows_8,_8.1_or_10_fails_to_install,_boot_or_has_error_"ERR_DISK_FULL"' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Windows_8,_8.1_or_10_fails_to_install,_boot_or_has_error_"ERR_DISK_FULL"'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.18</span>Windows 8, 8.1 or 10 fails to install, boot or has error "ERR_DISK_FULL"</div>
			</a>
			
			<ul id='toc-Windows_8,_8.1_or_10_fails_to_install,_boot_or_has_error_"ERR_DISK_FULL"-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-WinXP:_Bit-depth_cannot_be_greater_than_16" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#WinXP:_Bit-depth_cannot_be_greater_than_16">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.19</span>WinXP: Bit-depth cannot be greater than 16</div>
			</a>
			
			<ul id="toc-WinXP:_Bit-depth_cannot_be_greater_than_16-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Windows:_Screen_flicker_if_3D_acceleration_enabled" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Windows:_Screen_flicker_if_3D_acceleration_enabled">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.20</span>Windows: Screen flicker if 3D acceleration enabled</div>
			</a>
			
			<ul id="toc-Windows:_Screen_flicker_if_3D_acceleration_enabled-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cannot_launch_VirtualBox_with_Wayland:_Segmentation_fault" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cannot_launch_VirtualBox_with_Wayland:_Segmentation_fault">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.21</span>Cannot launch VirtualBox with Wayland: Segmentation fault</div>
			</a>
			
			<ul id="toc-Cannot_launch_VirtualBox_with_Wayland:_Segmentation_fault-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Random_freezing_in_guests_with_Intel_GPU" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Random_freezing_in_guests_with_Intel_GPU">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.22</span>Random freezing in guests with Intel GPU</div>
			</a>
			
			<ul id="toc-Random_freezing_in_guests_with_Intel_GPU-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unable_to_view_desktop_in_fullscreen_mode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unable_to_view_desktop_in_fullscreen_mode">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.23</span>Unable to view desktop in fullscreen mode</div>
			</a>
			
			<ul id="toc-Unable_to_view_desktop_in_fullscreen_mode-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Random_crashes_with_Windows_10_guest_operating_system_with_Intel_Tiger_Lake_chipset" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Random_crashes_with_Windows_10_guest_operating_system_with_Intel_Tiger_Lake_chipset">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.24</span>Random crashes with Windows 10 guest operating system with Intel Tiger Lake chipset</div>
			</a>
			
			<ul id="toc-Random_crashes_with_Windows_10_guest_operating_system_with_Intel_Tiger_Lake_chipset-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_save_the_settings_when_enabling_Secure_Boot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_save_the_settings_when_enabling_Secure_Boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.25</span>Failed to save the settings when enabling Secure Boot</div>
			</a>
			
			<ul id="toc-Failed_to_save_the_settings_when_enabling_Secure_Boot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_start_VirtualBox_machine_after_using_Android_Studio_emulator" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_start_VirtualBox_machine_after_using_Android_Studio_emulator">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.26</span>Failed to start VirtualBox machine after using Android Studio emulator</div>
			</a>
			
			<ul id="toc-Failed_to_start_VirtualBox_machine_after_using_Android_Studio_emulator-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-3D_Acceleration_is_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#3D_Acceleration_is_not_working">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.27</span>3D Acceleration is not working</div>
			</a>
			
			<ul id="toc-3D_Acceleration_is_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">VirtualBox</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/VirtualBox" title="VirtualBox – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/VirtualBox.html" title="VirtualBox – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/VirtualBox" title="VirtualBox – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/VirtualBox.html" title="VirtualBox – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/VirtualBox.html" title="VirtualBox – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/VirtualBox" title="VirtualBox – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest</a></li>
<li><a href="../en/Category:Hypervisors.html" title="Category:Hypervisors">Category:Hypervisors</a></li>
<li><a href="../en/PhpVirtualBox.html" title="PhpVirtualBox">PhpVirtualBox</a></li>
<li><a href="../en/RemoteBox.html" title="RemoteBox">RemoteBox</a></li>
<li><a href="../en/Moving_an_existing_install_into_(or_out_of)_a_virtual_machine.html" title="Moving an existing install into (or out of) a virtual machine">Moving an existing install into (or out of) a virtual machine</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.virtualbox.org">VirtualBox</a> is a <a href="https://en.wikipedia.org/wiki/Hypervisor" class="extiw" title="wikipedia:Hypervisor">hypervisor</a> used to run operating systems in a special environment, called a virtual machine, on top of the existing operating system. VirtualBox is in constant development and new features are implemented continuously. It comes with a <a href="../en/Qt.html" title="Qt">Qt</a> GUI interface, as well as <a href="https://en.wikipedia.org/wiki/Headless_software" class="extiw" title="wikipedia:Headless software">headless</a> and <a href="https://en.wikipedia.org/wiki/Simple_DirectMedia_Layer" class="extiw" title="wikipedia:Simple DirectMedia Layer">SDL</a> command-line tools for managing and running virtual machines.
</p>
<p>In order to integrate functions of the host system to the guests, including shared folders and clipboard, video acceleration and a seamless window integration mode, <a href="#Guest_additions">guest additions</a> are provided for some guest operating systems.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation_steps_for_Arch_Linux_hosts">Installation steps for Arch Linux hosts</span></h2>
<p>In order to launch VirtualBox virtual machines on your Arch Linux box, follow these installation steps.
</p>
<h3><span class="mw-headline" id="Install_the_core_packages">Install the core packages</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox">virtualbox</a></span> package. You will also need to choose a package to provide host modules:
</p>
<ul>
<li>for the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernel, choose <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-modules-arch">virtualbox-host-modules-arch</a></span>
</li>
<li>for any other <a href="../en/Kernel.html" title="Kernel">kernel</a> (including <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>), choose <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span>
</li>
</ul>
<p>To compile the VirtualBox modules provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span>, it will also be necessary to install the appropriate headers package(s) for your installed kernel(s) (e.g. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts-headers">linux-lts-headers</a></span> for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>). <a rel="nofollow" class="external autonumber" href="https://lists.archlinux.org/archives/list/arch-dev-public@lists.archlinux.org/message/X6D3UNFV6TXYYNF74ES2AX5ETREAIBCG/">[1]</a> When either VirtualBox or the kernel is updated, the kernel modules will be automatically recompiled thanks to the <a href="../en/Dynamic_Kernel_Module_Support.html" class="mw-redirect" title="DKMS">DKMS</a> <a href="../en/Pacman.html#Hooks" class="mw-redirect" title="Pacman hook">pacman hook</a>.
</p>
<h3><span class="mw-headline" id="Sign_modules">Sign modules</span></h3>
<p>When using a custom kernel with <code>CONFIG_MODULE_SIG_FORCE</code> option enabled, you must sign your modules with a key generated during kernel compilation.
</p>
<p>Navigate to your kernel tree folder and execute the following command:
</p>
<pre># for module in `ls /lib/modules/$(uname -r)/kernel/misc/{vboxdrv.ko,vboxnetadp.ko,vboxnetflt.ko}` ; do ./scripts/sign-file sha1 certs/signing_key.pem certs/signing_key.x509 $module ; done
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Hashing algorithm does not have to match the one configured, but it must be built into the kernel.</div>
<h3><span class="mw-headline" id="Load_the_VirtualBox_kernel_modules">Load the VirtualBox kernel modules</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-modules-arch">virtualbox-host-modules-arch</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span> use <code>systemd-modules-load.service</code> to load VirtualBox modules automatically at boot time. For the modules to be loaded after installation, either reboot or load the modules once manually; the list of modules can be found in <code>/usr/lib/modules-load.d/virtualbox-host-modules-arch.conf</code> or <code>/usr/lib/modules-load.d/virtualbox-host-dkms.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you do not want the VirtualBox modules to be automatically loaded at boot time, you have to mask the default <code>/usr/lib/modules-load.d/virtualbox-host-modules-arch.conf</code> (or <code>/usr/lib/modules-load.d/virtualbox-host-dkms.conf</code>) by creating an empty file (or symlink to <code>/dev/null</code>) with the same name in <code>/etc/modules-load.d/</code>.</div>
<p>Among the <a href="../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">kernel modules</a> VirtualBox uses, there is a mandatory module named <code>vboxdrv</code>, which must be loaded before any virtual machines can run.
</p>
<p>To load the module manually, run:
</p>
<pre># modprobe vboxdrv
</pre>
<p>The following modules are only required in advanced configurations:
</p>
<ul><li>
<code>vboxnetadp</code> and <code>vboxnetflt</code> are both needed when you intend to use the <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch06.html#network_bridged">bridged</a> or <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch06.html#network_hostonly">host-only networking</a> feature. More precisely, <code>vboxnetadp</code> is needed to create the host interface in the VirtualBox global preferences, and <code>vboxnetflt</code> is needed to launch a virtual machine using that network interface.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the VirtualBox kernel modules were loaded in the kernel while you updated the modules, you need to reload them manually to use the new updated version. To do it, run <code>vboxreload</code> as root.</div>
<h3><span class="mw-headline" id="Accessing_host_USB_devices_in_guest">Accessing host USB devices in guest</span></h3>
<p>To use the USB ports of your host machine in your virtual machines, add users that will be authorized to use this feature to the <code>vboxusers</code> <a href="../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">user group</a>.
</p>
<h3><span class="mw-headline" id="Guest_additions">Guest additions</span></h3>
<p>It is also recommended to install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-iso">virtualbox-guest-iso</a></span> package on the host running VirtualBox. This package will act as a disc image that can be used to install the guest additions onto guest systems other than Arch Linux. The <i>.iso</i> file will be located at <code>/usr/lib/virtualbox/additions/VBoxGuestAdditions.iso</code>, and may have to be mounted manually inside the virtual machine. Once mounted, you can run the guest additions installer inside the guest. For Arch Linux guest also see <a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html#Install_the_Guest_Additions" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest#Install the Guest Additions</a>.
</p>
<h3><span class="mw-headline" id="Unattended_templates">Unattended templates</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> Package <a rel="nofollow" class="external text" href="https://lists.archlinux.org/archives/list/aur-requests@lists.archlinux.org/thread/ZTSAYB7OZQUNQAMUZHSNZLFSQFF7QEZQ/#NGJK37YUWOCS6XGGEDXO47PCOYNMJROT">deleted from AUR</a> as it is now included in the official package. (Discuss in <a href="../en/Talk:VirtualBox.html#Unattended_templates_AUR_package_gone" title="Talk:VirtualBox">Talk:VirtualBox#Unattended templates AUR package gone</a>)</div>
</div>
<p>In order to avoid having to install the guest system manually, some operating systems support <i>unattended installation</i>. This allows the user to configure the system to be installed in VirtualBox's interface prior to starting the machine. At the end of the setup process, the operating system is installed without requiring any further user interaction. This feature requires the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/virtualbox-unattended-templates/">virtualbox-unattended-templates</a></span><sup><small>AUR</small></sup> package.
</p>
<h3><span class="mw-headline" id="Extension_pack">Extension pack</span></h3>
<p>The <i>Oracle VM VirtualBox Extension Pack</i> provides <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch01.html#intro-installing">additional features</a> and is released under a non-free license <b>only available for personal use</b>. To install it, the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/virtualbox-ext-oracle/">virtualbox-ext-oracle</a></span><sup><small>AUR</small></sup> package is available, and a prebuilt version can be found in the <a href="../en/Unofficial_user_repositories.html#seblu" title="Unofficial user repositories">seblu</a> repository.
</p>
<p>If you prefer to use the traditional and manual way: download the extension pack manually and install it via the GUI (<i>File &gt; Tools &gt; Extension Pack Manager</i>) or via <code>VBoxManage extpack install <i>&lt;.vbox-extpack&gt;</i></code>, make sure you have a toolkit like <a href="../en/Polkit.html" title="Polkit">Polkit</a> to grant privileged access to VirtualBox. The installation of extension pack <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/8473">requires root access</a>.
</p>
<p>One of the non-free extension pack features is support for the Remote Desktop Protocol (RDP). This part of functionality can also be obtained with the open source <i>VNC Extension Pack</i>, by installing the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-ext-vnc">virtualbox-ext-vnc</a></span> package.
</p>
<h3><span class="mw-headline" id="Front-ends">Front-ends</span></h3>
<p>VirtualBox comes with four front-ends:
</p>
<ul>
<li>If you want to use VirtualBox with the regular GUI, use <code>VirtualBox</code>.</li>
<li>If you want to launch and manage your virtual machines from the command-line, use the <code>VBoxSDL</code> command, which only provides a plain window for the virtual machine without any overlays.</li>
<li>If you want to use VirtualBox without running any GUI (e.g. on a server), use the <code>VBoxHeadless</code> command. With the VRDP extension you can still remotely access the displays of your virtual machines.</li>
<li>If you want to remotely manage virtual machines, the <i>VirtualBox web service</i> (<code>vboxwebsrv</code>) provides the server side backend. It can be used with <a href="../en/RemoteBox.html" title="RemoteBox">RemoteBox</a> (GUI) or <a href="../en/PhpVirtualBox.html" title="PhpVirtualBox">phpVirtualBox</a> (WebUI).</li>
</ul>
<p>Refer to the <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual">VirtualBox manual</a> to learn how to create virtual machines.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If you intend to store virtual disk images on a <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a> file system, before creating any images, you should consider disabling <a href="../en/Btrfs.html#Copy-on-Write_(CoW)" title="Btrfs">copy-on-write</a> for the destination directory of these images.</div>
<p>A security feature in Wayland (i.e. when using GDM) disallows VirtualBox to grab all keyboard input. This is annoying when you want to pass window manager shortcuts to your guest operating system. It can be bypassed by whitelisting VirtualBox:
</p>
<pre>$ gsettings get org.gnome.mutter.wayland xwayland-grab-access-rules
$ gsettings set org.gnome.mutter.wayland xwayland-grab-access-rules "['VirtualBox Machine']"
</pre>
<p>The first command will show if any other applications are already whitelisted. If so, add <i>VirtualBox Machine</i> to that list, rather than having it as the only one.
</p>
<h2><span class="mw-headline" id="Installation_steps_for_Arch_Linux_guests">Installation steps for Arch Linux guests</span></h2>
<p>See <a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest</a>.
</p>
<h2><span class="mw-headline" id="Virtual_disks_management">Virtual disks management</span></h2>
<p>See also <a href="#Import/export_VirtualBox_virtual_machines_from/to_other_hypervisors">#Import/export VirtualBox virtual machines from/to other hypervisors</a>.
</p>
<h3><span class="mw-headline" id="Formats_supported_by_VirtualBox">Formats supported by VirtualBox</span></h3>
<p>VirtualBox supports the following virtual disk formats:
</p>
<ul>
<li>
<b>VDI</b>: The Virtual Disk Image is the VirtualBox own open container used by default when you create a virtual machine with VirtualBox.</li>
<li>
<b>VMDK</b>: The Virtual Machine Disk has been initially developed by VMware for their products. The specification was initially closed source, but has since become an open format which is fully supported by VirtualBox. This format offers the ability to be split into several 2GB files. This feature is especially useful if you want to store the virtual machine on machines which do not support very large files. Other formats, excluding the HDD format from Parallels, do not provide such an equivalent feature.</li>
<li>
<b>VHD</b>: The Virtual Hard Disk is the format used by Microsoft in Windows Virtual PC and Hyper-V. If you intend to use any of these Microsoft products, you will have to choose this format.</li>
</ul>
<dl><dd><div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Since Windows 7, this format can be mounted directly without any additional application.</div></dd></dl>
<ul>
<li>
<b>VHDX</b> (read only): This is the eXtended version of the Virtual Hard Disk format developed by Microsoft, which has been released on 2012-09-04 with Hyper-V 3.0 coming with Windows Server 2012. This new version of the disk format does offer enhanced performance (better block alignment), larger blocks size, and journal support which brings power failure resiliency. VirtualBox <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch15.html#idp63002176">should support this format in read only</a>.</li>
<li>
<b>HDD</b> (version 2): The HDD format is developed by Parallels Inc and used in their hypervisor solutions like Parallels Desktop for Mac. Newer versions of this format (i.e. 3 and 4) are not supported due to the lack of documentation for this proprietary format. <div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> There is currently a controversy regarding the support of the version 2 of the format. While the official VirtualBox manual <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch05.html#vdidetails">only reports the second version of the HDD file format as supported</a>, Wikipedia's contributors are <a href="https://en.wikipedia.org/wiki/Comparison_of_platform_virtual_machines#Image_type_compatibility" class="extiw" title="wikipedia:Comparison of platform virtual machines">reporting the first version may work too</a>. Help is welcome if you can perform some tests with the first version of the HDD format.</div>
</li>
<li>
<b>QED</b>: The QEMU Enhanced Disk format is an old file format for QEMU, another free and open source hypervisor. This format was designed from 2010 in a way to provide a superior alternative to QCOW2 and others. This format features a fully asynchronous I/O path, strong data integrity, backing files, and sparse files. QED format is supported only for compatibility with virtual machines created with old versions of QEMU.</li>
<li>
<b>QCOW</b>: The QEMU Copy On Write format is the current format for QEMU. The QCOW format does support zlib-based transparent compression and encryption (the latter is flawed and is not recommended). QCOW is available in two versions: QCOW and QCOW2. QCOW2 tends to supersede the first one. QCOW is <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch15.html#idp63002176">currently fully supported by VirtualBox</a>. QCOW2 comes in two revisions: QCOW2 0.10 and QCOW2 1.1 (which is the default when you create a virtual disk with QEMU). VirtualBox does not support QCOW2.</li>
<li>
<b>OVF</b>: The Open Virtualization Format is an open format which has been designed for interoperability and distributions of virtual machines between different hypervisors. VirtualBox supports all revisions of this format via the <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp55423424">VBoxManage import/export feature</a> but with <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch14.html#KnownProblems">known limitations</a>.</li>
<li>
<b>RAW</b>: This is the mode when the virtual disk is exposed directly to the disk without being contained in a specific file format container. VirtualBox supports this feature in several ways: converting RAW disk <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp59139136">to a specific format</a>, or by <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi">cloning a disk to RAW</a>, or by using directly a VMDK file <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#idp57804112">which points to a physical disk or a simple file</a>.</li>
</ul>
<h3><span class="mw-headline" id="Disk_image_format_conversion">Disk image format conversion</span></h3>
<p><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi">VBoxManage clonehd</a> can be used to convert between VDI, VMDK, VHD and RAW.
</p>
<pre>$ VBoxManage clonehd <i>inputfile</i> <i>outputfile</i> --format <i>outputformat</i>
</pre>
<p>For example to convert VDI to VMDK:
</p>
<pre>$ VBoxManage clonehd <i>source.vdi</i> <i>destination.vmdk</i> --format VMDK
</pre>
<h4><span class="mw-headline" id="QCOW">QCOW</span></h4>
<p>VirtualBox does not support <a href="../en/QEMU.html" title="QEMU">QEMU</a>'s QCOW2 disk image format. To use a QCOW2 disk image with VirtualBox you therefore need to convert it, which you can do with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu-img">qemu-img</a></span>. <i>qemu-img</i> can convert QCOW to / from VDI, VMDK, VHDX, RAW and various other formats (which you can see by running <code>qemu-img --help</code>).
</p>
<pre>$ qemu-img convert -O <i>output_fmt</i> <i>inputfile</i> <i>outputfile</i>
</pre>
<p>For example to convert QCOW2 to VDI:
</p>
<pre>$ qemu-img convert -O vdi <i>source.qcow2</i> <i>destination.vdi</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The <code>-p</code> parameter is used to get the progression of the conversion task.</div>
<p>There are two revisions of QCOW2: 0.10 and 1.1. You can specify the revision to use with <code>-o compat=<i>revision</i></code>.
</p>
<h3><span class="mw-headline" id="Mount_virtual_disks">Mount virtual disks</span></h3>
<h4><span class="mw-headline" id="VDI">VDI</span></h4>
<p>Mounting VDI images only works with fixed size images (a.k.a. static images); dynamic (dynamically size allocating) images are not easily mountable.
</p>
<p>The offset of the partition (within the VDI) is needed, then add the value of <code>offData</code> to <code>32256</code> (e.g. 69632 + 32256 = 101888):
</p>
<pre>$ VBoxManage internalcommands dumphdinfo <i>storage</i>.vdi | grep "offData"
</pre>
<p>The storage can now be mounted with:
</p>
<pre># mount -t ext4 -o rw,noatime,noexec,loop,offset=101888 <i>storage</i>.vdi /mntpoint/
</pre>
<p>For VDI disks with more partitions you can also use <code>losetup</code>:
</p>
<pre># losetup -o $offData -Pf
</pre>
<p>After this you should find the partitions under <code>/dev/loop*</code> (e.g. <code>/dev/loop0p1</code>). Then you can mount them as usual (e.g. <code>mount mount /dev/loop0p1 /mnt/</code>).
</p>
<p>You can also use <a rel="nofollow" class="external text" href="https://github.com/pld-linux/VirtualBox/blob/master/mount.vdi">mount.vdi</a> script that, which you can use as (install script itself to <code>/usr/bin/</code>):
</p>
<pre># mount -t vdi -o fstype=ext4,rw,noatime,noexec <i>vdi_file_location</i> <i>/mnt/</i>
</pre>
<p>Alternately you can use the nbd kernel module and <i>qemu-nbd</i> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu-img">qemu-img</a></span><a rel="nofollow" class="external autonumber" href="https://bethesignal.org/blog/2011/01/05/how-to-mount-virtualbox-vdi-image/">[2]</a>:
</p>
<pre># modprobe nbd max_part=16
# qemu-nbd -c /dev/nbd0 <i>storage</i>.vdi
# mount /dev/nbd0p1 /mnt/dir/
</pre>
<p>And then to unmount:
</p>
<pre># umount /mnt/dir/
# qemu-nbd -d /dev/nbd0
</pre>
<p>If the partition nodes are not propagated try using <code>partprobe /dev/nbd0</code>; otherwise, a VDI partition can be mapped directly to a node by: <code>qemu-nbd -P 1 -c /dev/nbd0 <i>storage</i>.vdi</code>.
</p>
<p>Another way is to use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vdfuse/">vdfuse</a></span><sup><small>AUR</small></sup>:
</p>
<pre># vdfuse -a -f <i>storage</i>.vdi <i>mountpoint1</i>
</pre>
<p>which mounts the disk in <code><i>mountpoint1</i></code> with the <code>PartitionN</code> naming format. Each partition can then be loop-mounted in <code><i>mountpoint2</i></code>:
</p>
<pre># mount -o loop <i>mountpoint1</i>/PartitionN <i>mountpoint2</i>
</pre>
<h4><span class="mw-headline" id="VHD">VHD</span></h4>
<p>Like VDI, VHD images can be mounted with <a href="../en/QEMU.html" title="QEMU">QEMU</a>'s nbd module:
</p>
<pre># modprobe nbd
# qemu-nbd -c /dev/nbd0 <i>storage</i>.vhd
# mount /dev/nbd0p1 /mnt
</pre>
<p>To unmount:
</p>
<pre># umount /mnt
# qemu-nbd -d /dev/nbd0
</pre>
<h3><span class="mw-headline" id="Compact_virtual_disks">Compact virtual disks</span></h3>
<p>Compacting virtual disks only works with <i>.vdi</i> files and basically consists of the following steps.
</p>
<p>Boot your virtual machine and remove all bloat manually or by using cleaning tools like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bleachbit">bleachbit</a></span> which is <a rel="nofollow" class="external text" href="http://bleachbit.sourceforge.net/download/windows">available for Windows systems too</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-07-30 ⓘ]</sup>.
</p>
<p>Wiping free space with zeroes can be achieved with several tools:
</p>
<ul>
<li>If you were previously using Bleachbit, check the checkbox <i>System &gt; Free disk space</i> in the GUI, or use <code>bleachbit -c system.free_disk_space</code> in CLI;</li>
<li>On UNIX-based systems, by using <code>dd</code> or preferably <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dcfldd/">dcfldd</a></span><sup><small>AUR</small></sup> (see <a rel="nofollow" class="external text" href="https://superuser.com/a/355322">here</a> to learn the differences):</li>
</ul>
<dl>
<dd><pre># dcfldd if=/dev/zero of=<i>/fillfile</i> bs=4M</pre></dd>
<dd>When <code>fillfile</code> reaches the limit of the partition, you will get a message like <code>1280 blocks (5120Mb) written.dcfldd:: No space left on device</code>. This means that all of the user-space and non-reserved blocks of the partition will be filled with zeros. Using this command as root is important to make sure all free blocks have been overwritten. Indeed, by default, when using partitions with ext filesystem, a specified percentage of filesystem blocks is reserved for the super-user (see the <code>-m</code> argument in the <code>mkfs.ext4</code> man pages or use <code>tune2fs -l</code> to see how much space is reserved for root applications).</dd>
<dd>When the aforementioned process has completed, you can remove the file <code><i>fillfile</i></code> you created.</dd>
</dl>
<ul><li>On Windows, there are two tools available:
<ul>
<li>
<code>sdelete</code> from the <a rel="nofollow" class="external text" href="https://technet.microsoft.com/en-us/sysinternals/bb842062.aspx">Sysinternals Suite</a>, type <code>sdelete -s -z <i>c:</i></code>, where you need to reexecute the command for each drive you have in your virtual machine;</li>
<li>or, if you love scripts, there is a <a rel="nofollow" class="external text" href="http://blog.whatsupduck.net/2012/03/powershell-alternative-to-sdelete.html">PowerShell solution</a>, but which still needs to be repeated for all drives.</li>
</ul>
</li></ul>
<dl><dd><dl>
<dd><pre>PS&gt; ./Write-ZeroesToFreeSpace.ps1 -Root <i>c:\</i> -PercentFree 0</pre></dd>
<dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This script must be run in a PowerShell environment with administrator privileges. By default, scripts cannot be run, ensure the execution policy is at least on <code>RemoteSigned</code> and not on <code>Restricted</code>. This can be checked with <code>Get-ExecutionPolicy</code> and the required policy can be set with <code>Set-ExecutionPolicy RemoteSigned</code>.</div></dd>
</dl></dd></dl>
<p>Once the free disk space have been wiped, shut down your virtual machine.
</p>
<p>The next time you boot your virtual machine, it is recommended to do a filesystem check.
</p>
<ul>
<li>On UNIX-based systems, you can use <code>fsck</code> manually;
<ul><li>On GNU/Linux systems, and thus on Arch Linux, you can force a disk check at boot <a href="../en/Fsck.html#Forcing_the_check" title="Fsck">thanks to a kernel boot parameter</a>;</li></ul>
</li>
<li>On Windows systems, you can use:
<ul>
<li>either <code>chkdsk <i>c:</i> /F</code> where <code><i>c:</i></code> needs to be replaced by each disk you need to scan and fix errors;</li>
<li>or <code>FsckDskAll</code> <a rel="nofollow" class="external text" href="https://archive.org/details/ChkDskAll">from here</a> which is basically the same software as <code>chkdsk</code>, but without the need to repeat the command for all drives;</li>
</ul>
</li>
</ul>
<p>Now, remove the zeros from the <i>.vdi</i> file with <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvdi">VBoxManage modifyhd</a>:
</p>
<pre>$ VBoxManage modifyhd <i>your_disk.vdi</i> --compact
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If your virtual machine has snapshots, you need to apply the above command on each <code>.vdi</code> files you have.</div>
<h4><span class="mw-headline" id="TRIM">TRIM</span></h4>
<p>VirtualBox offers simulation of TRIM in VDI files via an experimental "discard" attachment option. This option is undocumented and can be accessed by <a rel="nofollow" class="external text" href="https://superuser.com/a/728469/">commandline or .vbox file editing</a>. When enabled, TRIM commands from the guest operating system causes the corresponding part of the VDI file to be compacted away.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Using this option without Host I/O Cache is known to cause lockups.</div>
<h3><span class="mw-headline" id="Increase_virtual_disks">Increase virtual disks</span></h3>
<h4><span class="mw-headline" id="General_procedure">General procedure</span></h4>
<p>If you are running out of space due to the small hard drive size you selected when you created your virtual machine, the solution adviced by the VirtualBox manual is to use <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvdi">VBoxManage modifyhd</a>. However this command only works for VDI and VHD disks and only for the dynamically allocated variants. If you want to resize a fixed size virtual disk disk too, read on this trick which works either for a Windows or UNIX-like virtual machine.
</p>
<p>First, create a new virtual disk next to the one you want to increase:
</p>
<pre>$ VBoxManage createmedium disk -filename <i>new.vdi</i> --size <i>10000</i>
</pre>
<p>where size is in MiB, in this example 10000MiB ~= 10GiB, and <i>new.vdi</i> is name of new hard drive to be created.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> By default, this command uses the <i>Standard</i> (corresponding to dynamic allocated) file format variant and thus will not use the same file format variant as your source virtual disk. If your <i>old.vdi</i> has a fixed size and you want to keep this variant, add the parameter <code>--variant Fixed</code>.</div>
<p>Next, the old virtual disk needs to be cloned to the new one which this may take some time:
</p>
<pre>$ VBoxManage clonemedium disk <i>old.vdi</i> <i>new.vdi</i> --existing
</pre>
<p>Detach the old hard drive and attach new one, replace all mandatory italic arguments by your own:
</p>
<pre>$ VBoxManage storageattach <i>virtual_machine_name</i> --storagectl <i>SATA</i> --port <i>0</i> --medium none
$ VBoxManage storageattach <i>virtual_machine_name</i> --storagectl <i>SATA</i> --port <i>0</i> --medium <i>new.vdi</i> --type hdd
</pre>
<p>To get the storage controller name and the port number, you can use the command <code>VBoxManage showvminfo <i>virtual_machine_name</i></code>. Among the output you will get such a result (what you are looking for is in italic):
</p>
<pre>[...]
Storage Controller Name (0):            IDE
Storage Controller Type (0):            PIIX4
Storage Controller Instance Number (0): 0
Storage Controller Max Port Count (0):  2
Storage Controller Port Count (0):      2
Storage Controller Bootable (0):        on
Storage Controller Name (1):            SATA
Storage Controller Type (1):            IntelAhci
Storage Controller Instance Number (1): 0
Storage Controller Max Port Count (1):  30
Storage Controller Port Count (1):      1
Storage Controller Bootable (1):        on
IDE (1, 0): Empty
<i>SATA</i> (<i>0</i>, 0): /home/wget/IT/Virtual_machines/GNU_Linux_distributions/ArchLinux_x64_EFI/Snapshots/{6bb17af7-e8a2-4bbf-baac-fbba05ebd704}.vdi (UUID: 6bb17af7-e8a2-4bbf-baac-fbba05ebd704)
[...]
</pre>
<p>Download <a rel="nofollow" class="external text" href="https://gparted.org/download.php">GParted live image</a> and mount it as a virtual CD/DVD disk file, boot your virtual machine, increase/move your partitions, umount GParted live and reboot.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> On GPT disks, increasing the size of the disk will result in the backup GPT header not being at the end of the device. GParted will ask to fix this, click on <i>Fix</i> both times. On MBR disks, you do not have such a problem as this partition table as no trailer at the end of the disk.</div>
<p>Finally, unregister the virtual disk from VirtualBox and remove the file:
</p>
<pre>$ VBoxManage closemedium disk <i>old.vdi</i>
$ rm <i>old.vdi</i>
</pre>
<h4><span class="mw-headline" id="Increasing_the_size_of_VDI_disks">Increasing the size of VDI disks</span></h4>
<p>If your disk is a VDI one, run:
</p>
<pre>$ VBoxManage modifymedium disk <i>your_virtual_disk.vdi</i> --resize <i>the_new_size</i>
</pre>
<p>Then jump back to the Gparted step, to increase the size of the partition on the virtual disk.
</p>
<h3><span class="mw-headline" id="Replace_a_virtual_disk_manually_from_the_.vbox_file">Replace a virtual disk manually from the .vbox file</span></h3>
<p>If you think that editing a simple <i>XML</i> file is more convenient than playing with the GUI or with <code>VBoxManage</code> and you want to replace (or add) a virtual disk to your virtual machine, in the <i>.vbox</i> configuration file corresponding to your virtual machine, simply replace the GUID, the file location and the format to your needs:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vbox</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;HardDisk uuid="<i>{670157e5-8bd4-4f7b-8b96-9ee412a712b5}</i>" location="<i>ArchLinux_vm.vdi</i>" format="<i>VDI</i>" type="Normal"/&gt;</pre>
<p>then in the <code>&lt;AttachedDevice&gt;</code> sub-tag of <code>&lt;StorageController&gt;</code>, replace the GUID by the new one.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vbox</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;AttachedDevice type="HardDisk" port="0" device="0"&gt;
  &lt;Image uuid="<i>{670157e5-8bd4-4f7b-8b96-9ee412a712b5}</i>"/&gt;
&lt;/AttachedDevice&gt;</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you do not know the GUID of the drive you want to add, you can use the <code>VBoxManage showhdinfo <i>file</i></code>. If you previously used <code>VBoxManage clonehd</code> to copy/convert your virtual disk, this command should have outputted the GUID just after the copy/conversion completed. Using a random GUID does not work, as each <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch05.html#cloningvdis">UUID is stored inside each disk image</a>.</div>
<h4><span class="mw-headline" id="Transfer_between_Linux_host_and_other_operating_system">Transfer between Linux host and other operating system</span></h4>
<p>The information about path to harddisks and the snapshots is stored between <code>&lt;HardDisks&gt; .... &lt;/HardDisks&gt;</code> tags in the file with the <i>.vbox</i> extension. You can edit them manually or use this script where you will need change only the path or use defaults, assumed that <i>.vbox</i> is in the same directory with a virtual harddisk and the snapshots folder. It will print out new configuration to stdout.
</p>
<pre>#!/bin/sh
NewPath="${PWD}/"
Snapshots="Snapshots/"
Filename="$1"

 awk -v SetPath="$NewPath" -v SnapPath="$Snapshots" '{if(index($0,"&lt;HardDisk uuid=") != 0){A=$3;split(A,B,"=");
L=B[2];
 gsub(/\"/,"",L);
  sub(/^.*\//,"",L);
  sub(/^.*\\/,"",L);
 if(index($3,"{") != 0){SnapS=SnapPath}else{SnapS=""};
  print $1" "$2" location="\"SetPath SnapS L"\" "$4" "$5}
else print $0}' "$Filename"</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>If you will prepare virtual machine for use in Windows host then in the path name end you should use backslash \ instead of / .</li>
<li>The script detects snapshots by looking for <code>{</code> in the file name.</li>
<li>To make it run on a new host you will need to add it first to the register by clicking on <b>Machine -&gt; Add...</b> or use hotkeys Ctrl+A and then browse to <i>.vbox</i> file that contains configuration or use command line <code>VBoxManage registervm <i>filename</i>.vbox</code>
</li>
</ul>
</div>
<h3><span class="mw-headline" id="Clone_a_virtual_disk_and_assigning_a_new_UUID_to_it">Clone a virtual disk and assigning a new UUID to it</span></h3>
<p>UUIDs are widely used by VirtualBox. Each virtual machines and each virtual disk of a virtual machine must have a different UUID. When you launch a virtual machine in VirtualBox, VirtualBox will keep track of all UUIDs of your virtual machine instance. See the <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-list">VBoxManage list</a> to list the items registered with VirtualBox.
</p>
<p>If you cloned a virtual disk manually by copying the virtual disk file, you will need to assign a new UUID to the cloned virtual drive if you want to use the disk in the same virtual machine or even in another (if that one has already been opened, and thus registered, with VirtualBox).
</p>
<p>You can use this command to assign a new UUID to a virtual disk:
</p>
<pre>$ VBoxManage internalcommands sethduuid <i>/path/to/disk.vdi</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To avoid copying the virtual disk and assigning a new UUID to your file manually you can use <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi">VBoxManage clonehd</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The commands above support all <a href="#Formats_supported_by_VirtualBox">virtual disk formats supported by VirtualBox</a>.</div>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3>
<span id="Import.2Fexport_VirtualBox_virtual_machines_from.2Fto_other_hypervisors"></span><span class="mw-headline" id="Import/export_VirtualBox_virtual_machines_from/to_other_hypervisors">Import/export VirtualBox virtual machines from/to other hypervisors</span>
</h3>
<p>If you plan to use your virtual machine on another hypervisor or want to import in VirtualBox a virtual machine created with another hypervisor, you might be interested in reading the following steps.
</p>
<h4><span class="mw-headline" id="Remove_additions">Remove additions</span></h4>
<p>Guest additions are available in most hypervisor solutions: VirtualBox comes with the <a href="#Guest_additions">Guest Additions</a>, VMware with the VMware Tools, Parallels with the Parallels Tools, etc. These additional components are designed to be installed inside a virtual machine after the guest operating system has been installed. They consist of device drivers and system applications that optimize the guest operating system for better performance and usability <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html">by providing these features</a>.
</p>
<p>If you have installed the additions to your virtual machine, please uninstall them first. Your guest, especially if it is using an operating system from the Windows family, might behave weirdly, crash or even might not boot at all if you are still using the specific drivers in another hypervisor.
</p>
<h4><span class="mw-headline" id="Use_the_right_virtual_disk_format">Use the right virtual disk format</span></h4>
<p>This step will depend on the ability to convert the virtual disk image directly or not.
</p>
<h5><span class="mw-headline" id="Automatic_tools">Automatic tools</span></h5>
<p>Some companies provide tools which offer the ability to create virtual machines from a Windows or GNU/Linux operating system located either in a virtual machine or even in a native installation. With such a product, you do not need to apply this and the following steps and can stop reading here.
</p>
<ul>
<li>
<i><a rel="nofollow" class="external text" href="https://www.parallels.com/products/transporter">Parallels Transporter</a></i> which is non free, is a product from Parallels Inc. This solution basically consists in an piece of software called <i>agent</i> that will be installed in the guest you want to import/convert. Then, Parallels Transporter, <i>which only works on OS X</i>, will create a virtual machine from that <i>agent</i> which is contacted either by USB or Ethernet network.</li>
<li>
<i><a rel="nofollow" class="external text" href="https://www.vmware.com/products/converter/">VMware vCenter Converter</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-07-30 ⓘ]</sup></i> which is free upon registration on the VMware website, works nearly the same way as Parallels Transporter, but the piece of software that will gather the data to create the virtual machine only works on a Windows platform.</li>
</ul>
<h5><span class="mw-headline" id="Manual_conversion">Manual conversion</span></h5>
<p>First, familiarize yourself with the <a href="#Formats_supported_by_VirtualBox">formats supported by VirtualBox</a> and <a href="https://en.wikipedia.org/wiki/Comparison_of_platform_virtual_machines#Image_type_compatibility" class="extiw" title="wikipedia:Comparison of platform virtual machines">those supported by third-party hypervisors</a>.
</p>
<ul>
<li>Importing or exporting a virtual machine from/to a VMware solution is not a problem at all if you use the VMDK or OVF disk format, otherwise converting <a href="#Disk_image_format_conversion">VMDK to VDI and VDI to VMDK</a> is possible and the aforementioned VMware vCenter Converter tool is available.</li>
<li>Importing or exporting from/to QEMU is not a problem neither: some QEMU formats are supported directly by VirtualBox and conversion between <a href="#QCOW">QCOW2 to VDI and VDI to QCOW2</a> is still available if needed.</li>
<li>Importing or exporting from/to Parallels hypervisor is the hardest way: Parallels does only support its own HDD format (even the standard and portable OVF format is not supported!).</li>
</ul>
<dl><dd><ul>
<li>To export your virtual machine to Parallels, you will need to use the Parallels Transporter tool described above.</li>
<li>To import your virtual machine to VirtualBox, you will need to use the VMware vCenter Converter described above to convert the virtual machine to the VMware format first. Then, apply the solution to migrate from VMware.</li>
</ul></dd></dl>
<h4><span class="mw-headline" id="Create_the_virtual_machine_configuration_for_your_hypervisor">Create the virtual machine configuration for your hypervisor</span></h4>
<p>Each hypervisor have their own virtual machine configuration file: <code>.vbox</code> for VirtualBox, <code>.vmx</code> for VMware, a <code>config.pvs</code> file located in the virtual machine bundle (<code>.pvm</code> file), etc. You will have thus to recreate a new virtual machine in your new destination hypervisor and specify its hardware configuration as close as possible as your initial virtual machine.
</p>
<p>Pay a close attention to the firmware interface (BIOS or UEFI) used to install the guest operating system. While an option is available to choose between these 2 interfaces on VirtualBox and on Parallels solutions, on VMware, you will have to add manually the following line to your <i>.vmx</i> file.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vmx</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">firmware = "efi"</pre>
<p>Finally, ask your hypervisor to use the existing virtual disk you have converted and launch the virtual machine.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>On VirtualBox, if you do not want to browse the whole GUI to find the right location to add your new virtual drive device, you can <a href="#Replace_a_virtual_disk_manually_from_the_.vbox_file">Replace a virtual disk manually from the .vbox file</a>, or use the <code>VBoxManage storageattach</code> described in <a href="#Increasing_the_size_of_VDI_disks">#Increasing the size of VDI disks</a> or in the <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-storageattach">VirtualBox manual page</a>.</li>
<li>Similarly, in VMware products, you can replace the location of the current virtual disk location by adapting the <i>.vmdk</i> file location in your <i>.vmx</i> configuration file.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Virtual_machine_launch_management">Virtual machine launch management</span></h3>
<h4>
<span id="Starting_virtual_machines_with_a_service_.28autostart.29"></span><span class="mw-headline" id="Starting_virtual_machines_with_a_service_(autostart)">Starting virtual machines with a service (autostart)</span>
</h4>
<p>Find hereafter the implementation details of a systemd service that will be used to consider a virtual machine as a service.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/vboxvmservice@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=VBox Virtual Machine %i Service
Requires=systemd-modules-load.service
After=systemd-modules-load.service

[Service]
User=<i>username</i>
Group=vboxusers
ExecStart=/usr/bin/VBoxManage startvm %i --type <i>startmode</i>
ExecStop=/usr/bin/VBoxManage controlvm %i <i>stopmode</i>
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Replace <code><i>username</i></code> with a user that is a member of the <code>vboxusers</code> group. Make sure the user chosen is the same user that will create/import virtual machines, otherwise the user will not see the virtual machine appliances.</li>
<li>Replace <code><i>startmode</i></code> with a virtual machine frontend type, usually <code>gui</code>, <code>headless</code> or <code>separate</code>
</li>
<li>Replace <code><i>stopmode</i></code> with desired state switch, usually <code>savestate</code> or <code>acpipowerbutton</code>
</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you have multiple virtual machines managed by Systemd and they are not stopping properly, try to add <code>KillMode=none</code> and <code>TimeoutStopSec=40</code> at the end of <code>[Service]</code> section.</div>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> the <code>vboxvmservice@<i>your_virtual_machine_name</i></code> systemd unit in order to launch the virtual machine at next boot. To launch it directly, simply <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the systemd unit.
</p>
<p>VirtualBox 4.2 introduces <a rel="nofollow" class="external text" href="https://lifeofageekadmin.com/how-to-set-your-virtualbox-vm-to-automatically-startup/">a new way</a> for UNIX-like systems to have virtual machines started automatically, other than using a systemd service.
</p>
<h4><span class="mw-headline" id="Starting_virtual_machines_with_a_keyboard_shortcut">Starting virtual machines with a keyboard shortcut</span></h4>
<p>It can be useful to start virtual machines directly with a keyboard shortcut instead of using the VirtualBox interface (GUI or CLI). For that, you can simply define key bindings in <code>.xbindkeysrc</code>. Please refer to <a href="../en/Xbindkeys.html" title="Xbindkeys">Xbindkeys</a> for more details.
</p>
<p>Example, using the <code>Fn</code> key of a laptop with an unused battery key (<code>F3</code> on the computer used in this example):
</p>
<pre>"VBoxManage startvm 'Windows 7'"
m:0x0 + c:244
XF86Battery
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you have a space in the name of your virtual machine, then enclose it with single apostrophes like made in the example just above.</div>
<h3><span class="mw-headline" id="Use_specific_device_in_the_virtual_machine">Use specific device in the virtual machine</span></h3>
<h4>
<span id="Using_USB_webcam_.2F_microphone"></span><span class="mw-headline" id="Using_USB_webcam_/_microphone">Using USB webcam / microphone</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You will need to have <a href="#Extension_pack">extension pack</a> installed before following the steps below.</div>
<ol>
<li>Make sure the virtual machine is not running and your webcam / microphone is not being used.</li>
<li>Bring up the main VirtualBox window and go to settings for Arch machine. Go to USB section.</li>
<li>Make sure "Enable USB Controller" is selected. Also make sure that "Enable USB 2.0 (EHCI) Controller" is selected too.</li>
<li>Click the "Add filter from device" button (the cable with the '+' icon).</li>
<li>Select your USB webcam/microphone device from the list.</li>
<li>Now click OK and start your virtual machine.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If your Microphone does not show up in the "Add filter from device" menu, try the USB 3.0 and 1.1 options instead (In Step 3).</div>
<h4><span class="mw-headline" id="Detecting_web-cams_and_other_USB_devices">Detecting web-cams and other USB devices</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This will not do much if you are running a Linux/Unix operating system inside of your virtual machine, as most do not have autodetection features.</div>
<p>If the device that you are looking for does not show up on any of the menus in the section above and you have tried all three USB controller options,
boot up your virtual machine three separate times. Once using the USB 1.1 controller, another using the USB 2.0 controller, etc. Leave the virtual machine running for at least 5 minutes after startup. Sometimes Windows will autodetect the device for you. Be sure you filter any devices that are not a keyboard or a mouse so they do not start up at boot. This ensures that Windows will detect the device at start-up.
</p>
<h3><span class="mw-headline" id="Access_a_guest_server">Access a guest server</span></h3>
<p>To access <a href="https://en.wikipedia.org/wiki/Apache_HTTP_Server" class="extiw" title="wikipedia:Apache HTTP Server">Apache server</a> on a Virtual Machine from the host machine <b>only</b>, simply execute the following lines on the host:
</p>
<pre>$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/HostPort" <i>8888</i>
$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/GuestPort" <i>80</i>
$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/Protocol" TCP
</pre>
<p>where <code><i>8888</i></code> is the port the host should listen on and <code><i>80</i></code> is the port the virtual machine will send Apache's signal on.
</p>
<p>To use a port lower than 1024 on the host machine, changes need to be made to the firewall on that host machine. This can also be set up to work with SSH or any other services by changing "Apache" to the corresponding service and ports.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>pcnet</code> refers to the network card of the virtual machine. If you use an Intel card in your virtual machine settings, change <code>pcnet</code> to <code>e1000</code>.</div>
<p>To communicate between the VirtualBox guest and host using ssh, the server port must be forwarded under Settings &gt; Network. When connecting from the client/host, connect to the IP address of the client/host machine, as opposed to the connection of the other machine. This is because the connection will be made over a virtual adapter.
</p>
<h3><span class="mw-headline" id="D3D_acceleration_in_Windows_guests">D3D acceleration in Windows guests</span></h3>
<p>Recent versions of VirtualBox have support for accelerating OpenGL inside guests. This can be enabled with a simple checkbox in the machine's settings, right below where video ram is set, and installing the VirtualBox <a href="#Guest_additions">guest additions</a>. However, most Windows games use Direct3D (part of DirectX), not OpenGL, and are thus not helped by this method. However, it is possible to gain accelerated Direct3D in your Windows guests by borrowing the d3d libraries from Wine, which translate d3d calls into OpenGL, which is then accelerated. These libraries are now part of VirtualBox guest additions.
</p>
<p>After enabling OpenGL acceleration as described above, reboot the guest into safe mode (press F8 before the Windows screen appears but after the VirtualBox screen disappears), and install VirtualBox <a href="#Guest_additions">guest additions</a>, during install enable checkbox <i>Direct3D support</i>. Reboot back to normal mode and you should have accelerated Direct3D.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>This hack may or may not work for some games depending on what hardware checks they make and what parts of D3D they use.</li>
<li>This was tested on Windows XP, 7 and 8.1. If method does not work on your Windows version please add data here.</li>
</ul>
</div>
<h3><span class="mw-headline" id="VirtualBox_on_a_USB_key">VirtualBox on a USB key</span></h3>
<p>When using VirtualBox on a USB key, for example to start an installed machine with an ISO image, you will manually have to create VMKDs from the existing drives. However, once the new VMDKs are saved and you move on to another machine, you may experience problems launching an appropriate machine again. To get rid of this issue, you can use the following script to launch VirtualBox. This script will clean up and unregister old VMDK files and it will create new, proper VMDKs for you:
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> The following script parses the output of ls, which is <a rel="nofollow" class="external text" href="https://github.com/koalaman/shellcheck/wiki/SC2010">very brittle</a> and <a rel="nofollow" class="external text" href="https://github.com/koalaman/shellcheck/wiki/SC2012">known to break</a>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:VirtualBox.html">Talk:VirtualBox</a>)</div>
</div>
<pre>#!/bin/sh
# Erase old VMDK entries
rm ~/.VirtualBox/*.vmdk

# Clean up VBox-Registry
sed -i '/sd/d' ~/.VirtualBox/VirtualBox.xml

# Remove old harddisks from existing machines
find ~/.VirtualBox/Machines -name \*.xml | while read -r file; do
  line=$(grep -e "type\=\"HardDisk\"" -n "$file" | cut -d ':' -f 1)
  if [ -n "$line" ]; then
    sed -i "${line}"d "$file"
    sed -i "${line}"d "$file"
    sed -i "${line}"d "$file"
  fi
  sed -i "/rg/d" "$file"
done

# Delete prev-files created by VirtualBox
find ~/.VirtualBox/Machines -name \*-prev -exec rm '{}' \;

# Recreate VMDKs
ls -l /dev/disk/by-uuid | cut -d ' ' -f 9,11 | while read -r ln; do
  if [ -n "$ln" ]; then
    uuid=$(echo "$ln" | cut -d ' ' -f 1)
    device=$(echo "$ln" | cut -d ' ' -f 2 | cut -d '/' -f 3 | cut -b 1-3)

    # determine whether drive is mounted already
    checkstr1=$(mount | grep "$uuid")
    checkstr2=$(mount | grep "$device")
    checkstr3=$(ls ~/.VirtualBox/*.vmdk | grep "$device")
    if [ -z "$checkstr1" ] &amp;&amp; [ -z "$checkstr2" ] &amp;&amp; [ -z "$checkstr3" ]; then
      VBoxManage internalcommands createrawvmdk -filename ~/.VirtualBox/"$device".vmdk -rawdisk /dev/"$device" -register
    fi
  fi
done

# Start VirtualBox
VirtualBox
</pre>
<p>Note that your user has to be added to the "disk" group to create VMDKs out of existing drives.
</p>
<h3><span class="mw-headline" id="Run_a_native_Arch_Linux_installation_inside_VirtualBox">Run a native Arch Linux installation inside VirtualBox</span></h3>
<p>If you have a dual boot system between Arch Linux and another operating system, it can become tedious to switch back and forth if you need to work in both. You may also experience performance or compatibility issues when using a virtual machine, which can impact your ability to do certain tasks.
</p>
<p>This guide will let you reuse, in a virtual machine, your native Arch Linux installation when you are running your second operating system. This way, you keep the ability to run each operating system natively, but have the option to run your Arch Linux installation inside a virtual machine.
</p>
<h4><span class="mw-headline" id="Make_sure_you_have_a_persistent_naming_scheme">Make sure you have a persistent naming scheme</span></h4>
<p>Depending on your hard drive setup, device files representing your hard drives may appear differently when you will run your Arch Linux installation natively or in virtual machine. This problem occurs when using <a href="../en/RAID.html#Implementation" title="RAID">FakeRAID</a> for example. The fake RAID device will be mapped in <code>/dev/mapper/</code> when you run your GNU/Linux distribution natively, while the devices are still accessible separately. However, in your virtual machine, it can appear without any mapping in <code>/dev/sdaX</code> for example, because the drivers controlling the fake RAID in your host operating system (e.g. Windows) are abstracting the fake RAID device.
</p>
<p>To circumvent this problem, we will need to use an addressing scheme that is persistent to both systems. This can be achieved using <a href="../en/Persistent_block_device_naming.html#by-uuid" class="mw-redirect" title="UUID">UUIDs</a>. Make sure your <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> and <a href="../en/Fstab.html" title="Fstab">fstab</a> file is using UUIDs, otherwise fix this issue. Read <a href="../en/Fstab.html" title="Fstab">fstab</a> and <a href="../en/Persistent_block_device_naming.html" title="Persistent block device naming">Persistent block device naming</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>Make sure your host partition is only accessible in read only from your Arch Linux virtual machine, this will avoid risk of corruptions if you were to corrupt that host partition by writing on it due to lack of attention.</li>
<li>You should NEVER allow VirtualBox to boot from the entry of your second operating system, which, as a reminder, is used as the host for this virtual machine! Take thus a special care especially if your default boot loader/boot manager entry is your other operating system. Give a more important timeout or put it below in the order of preferences.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Make_sure_your_mkinitcpio_image_is_correct">Make sure your mkinitcpio image is correct</span></h4>
<p>Make sure your <a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> configuration uses the <a href="../en/Mkinitcpio.html#HOOKS" title="Mkinitcpio">HOOK</a> <code>block</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
HOOKS=(base udev autodetect microcode modconf kms keyboard keymap consolefont <b>block</b> filesystems fsck)
...</pre>
<p>If it is not present, add it and <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h4><span class="mw-headline" id="Create_a_virtual_machine_configuration_to_boot_from_the_physical_drive">Create a virtual machine configuration to boot from the physical drive</span></h4>
<h5><span class="mw-headline" id="Create_a_raw_disk_VMDK_image">Create a raw disk VMDK image</span></h5>
<p>Now, we need to create a new virtual machine which will use a <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">RAW disk</a> as virtual drive, for that we will use a ~ 1Kio VMDK file which will be mapped to a physical disk. Unfortunately, VirtualBox does not have this option in the GUI, so we will have to use the console and use an internal command of <code>VBoxManage</code>.
</p>
<p>Boot the host which will use the Arch Linux virtual machine. The command will need to be adapted according to the host you have.
</p>
<dl>
<dt>On a GNU/Linux host</dt>
<dd></dd>
</dl>
<p>There are 3 ways to achieve this: login as root, changing the access right of the device with <code>chmod</code>, adding your user to the <code>disk</code> group. The latter way is the more elegant, let us proceed that way:
</p>
<pre># gpasswd -a <i>your_user</i> disk
</pre>
<p>Apply the new group settings with:
</p>
<pre>$ newgrp
</pre>
<p>Now, you can use the command:
</p>
<pre>$ VBoxManage internalcommands createrawvmdk -filename <i>/path/to/file.vmdk</i> -rawdisk <i>/dev/sdb</i> -register
</pre>
<p>Adapt the above command to your need, especially the path and filename of the VMDK location and the raw disk location to map which contain your Arch Linux installation.
</p>
<dl>
<dt>On a Windows host</dt>
<dd></dd>
</dl>
<p>
Open a command prompt must be run as administrator. </p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> On Windows, open your start menu/start screen, type <code>cmd</code>, and type <code>Ctrl+Shift+Enter</code>, this is a shortcut to execute the selected program with admin rights.</div>
<p>
On Windows, as the disk filename convention is different from UNIX, use this command to determine what drives you have in your Windows system and their location:</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># wmic diskdrive get name,size,model</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Model                               Name                Size
WDC WD40EZRX-00SPEB0 ATA Device     \\.\PHYSICALDRIVE1  4000783933440
KINGSTON SVP100S296G ATA Device     \\.\PHYSICALDRIVE0  96024821760
Hitachi HDT721010SLA360 ATA Device  \\.\PHYSICALDRIVE2  1000202273280
Innostor Ext. HDD USB Device        \\.\PHYSICALDRIVE3  1000202273280</pre>
<p>In this example, as the Windows convention is <code>\\.\PhysicalDriveX</code> where X is a number from 0, <code>\\.\PHYSICALDRIVE1</code> could be analogous to <code>/dev/sdb</code> from the Linux disk terminology.
</p>
<p>To use the <code>VBoxManage</code> command on Windows, you can either, change the current directory to your VirtualBox installation folder first with <code>cd C:\Program Files\Oracle\VirtualBox\</code>
</p>
<pre># .\VBoxManage.exe internalcommands createrawvmdk -filename C:\file.vmdk -rawdisk \\.\PHYSICALDRIVE1
</pre>
<p>or use the absolute path name:
</p>
<pre># "C:\Program Files\Oracle\VirtualBox\VBoxManage.exe" internalcommands createrawvmdk -filename C:\file.vmdk -rawdisk \\.\PHYSICALDRIVE1
</pre>
<dl>
<dt>On another operating system host</dt>
<dd></dd>
</dl>
<p>There are other limitations regarding the aforementioned command when used in other operating systems like OS X, please thus <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">read carefully the manual page</a>, if you are concerned.
</p>
<h5><span class="mw-headline" id="Create_the_virtual_machine_configuration_file">Create the virtual machine configuration file</span></h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>To make use of the VBoxManage command on Windows, you need to change the current directory to your VirtualBox installation folder first: cd C:\Program Files\Oracle\VirtualBox\.</li>
<li>Windows makes use of backslashes instead of slashes, please replace all slashes "/" occurrences by backslashes "\" in the commands that follow when you will use them.</li>
</ul>
</div>
<p>After, we need to create a new machine (replace the <i>virtual_machine_name</i> to your convenience) and register it with VirtualBox.
</p>
<pre>$ VBoxManage createvm -name <i>virtual_machine_name</i> -register
</pre>
<p>Then, the newly raw disk needs to be attached to the machine. This will depend if your computer or actually the root of your native Arch Linux installation is on an IDE or a SATA controller.
</p>
<p>If you need an IDE controller:
</p>
<pre>$ VBoxManage storagectl <i>virtual_machine_name</i> --name "IDE Controller" --add ide
$ VBoxManage storageattach <i>virtual_machine_name</i> --storagectl "IDE Controller" --port 0 --device 0 --type hdd --medium /path/to/file.vmdk
</pre>
<p>otherwise:
</p>
<pre>$ VBoxManage storagectl <i>virtual_machine_name</i> --name "SATA Controller" --add sata
$ VBoxManage storageattach <i>virtual_machine_name</i> --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium /path/to/file.vmdk
</pre>
<p>While you continue using the CLI, it is recommended to use the VirtualBox GUI, to personalise the virtual machine configuration. Indeed, you must specify its hardware configuration as close as possible as your native machine: turning on the 3D acceleration, increasing video memory, setting the network interface, etc.
</p>
<p>Finally, you may want to seamlessly integrate your Arch Linux with your host operating system and allow copy pasting between both operating systems. Please refer to <a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html#Install_the_Guest_Additions" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest#Install the Guest Additions</a> for that, since this Arch Linux virtual machine is basically an Arch Linux guest.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> For <a href="../en/Xorg.html" title="Xorg">Xorg</a> to work in natively and in the virtual machine, since obviously it will be using different drivers, it is best if there is no <code>/etc/X11/xorg.conf</code>, so Xorg will pick up everything it needs on the fly. However, if you really do need your own Xorg configuration, maybe is it worth to set your default systemd target to <code>multi-user.target</code> with <code>systemctl isolate graphical.target</code> as root (more details at <a href="../en/Systemd.html#Targets" title="Systemd">Systemd#Targets</a> and <a href="../en/Systemd.html#Change_current_target" title="Systemd">Systemd#Change current target</a>). In that way, the graphical interface is disabled (i.e. Xorg is not launched) and after you logged in, you can <code>startx</code>} manually with a custom <code>xorg.conf</code>.</div>
<h3><span class="mw-headline" id="Install_a_native_Arch_Linux_system_from_VirtualBox">Install a native Arch Linux system from VirtualBox</span></h3>
<p>In some cases it may be useful to install a native Arch Linux system while running another operating system: one way to accomplish this is to perform the installation through VirtualBox on a <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">raw disk</a>. If the existing operating system is Linux based, you may want to consider following <a href="../en/Install_Arch_Linux_from_existing_Linux.html" class="mw-redirect" title="Install from existing Linux">Install from existing Linux</a> instead.
</p>
<p>This scenario is very similar to <a href="#Run_a_native_Arch_Linux_installation_inside_VirtualBox">#Run a native Arch Linux installation inside VirtualBox</a>, but will follow those steps in a different order: start by <a href="#Create_a_raw_disk_VMDK_image">#Create a raw disk VMDK image</a>, then <a href="#Create_the_virtual_machine_configuration_file">#Create the virtual machine configuration file</a>.
</p>
<p>Now, you should have a working virtual machine configuration whose virtual VMDK disk is tied to a real disk. The installation process is exactly the same as the steps described in <a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest</a>, but <a href="#Make_sure_you_have_a_persistent_naming_scheme">#Make sure you have a persistent naming scheme</a> and <a href="#Make_sure_your_mkinitcpio_image_is_correct">#Make sure your mkinitcpio image is correct</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>For BIOS systems and MBR disks, do not install a boot loader inside your virtual machine, this will not work since the MBR is not linked to the MBR of your real machine and your virtual disk is only mapped to a real partition without the MBR.</li>
<li>For UEFI systems without <a href="https://en.wikipedia.org/wiki/Compatibility_Support_Module#CSM" class="extiw" title="wikipedia:Compatibility Support Module">CSM</a> and GPT disks, the installation will not work at all since:</li>
</ul>
<dl><dd><ul>
<li>the <a href="https://en.wikipedia.org/wiki/EFI_System_partition" class="extiw" title="wikipedia:EFI System partition">ESP</a> partition is not mapped to your virtual disk and Arch Linux requires to have the Linux kernel on it to boot as an EFI application (see <a href="../en/EFISTUB.html" title="EFISTUB">EFISTUB</a> for details);</li>
<li>and the efivars, if you are installing Arch Linux using the EFI mode brought by VirtualBox, are not the one of your real system: the bootmanager entries will hence not be registered.</li>
</ul></dd></dl>
<ul><li>This is why, it is recommended to create your partitions in a native installation first, otherwize the partitions will not be taken into consideration in your MBR/GPT partition table.</li></ul>
</div>
<p>After completing the installation, boot your computer natively with an GNU/Linux installation media (whether it be Arch Linux or not), <a href="../en/Installation_guide.html#Chroot" title="Installation guide">chroot</a> into your installed Arch Linux installation and install and configure a <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a>.
</p>
<h3><span class="mw-headline" id="Install_MacOS_guest">Install MacOS guest</span></h3>
<p>Before starting the virtual machine, run the following commands on the host machine <a rel="nofollow" class="external autonumber" href="https://medium.com/@twister.mr/installing-macos-to-virtualbox-1fcc5cf22801">[3]</a>:
</p>
<pre>$ VBoxManage modifyvm "MyMacVM" --cpuid-set 00000001 000106e5 00100800 0098e3fd bfebfbff
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/efi/0/Config/DmiSystemProduct" "iMac11,3"
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/efi/0/Config/DmiSystemVersion" "1.0"
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/efi/0/Config/DmiBoardProduct" "Iloveapple"
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/smc/0/Config/DeviceKey" "ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc"
$ VBoxManage setextradata "MyMacVM" "VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC" 1
$ VBoxManage setextradata "MyMacVM" VBoxInternal2/EfiGopMode 4
</pre>
<p>If you use an AMD processor and the first boot gets stuck, you also have to run
</p>
<pre>$ VBoxManage modifyvm "MyMacVM" --cpu-profile "Intel Core i7-6700K"
</pre>
<h4>
<span id="No_keyboard.2Fmouse_input_when_attempting_to_install_Mojave"></span><span class="mw-headline" id="No_keyboard/mouse_input_when_attempting_to_install_Mojave">No keyboard/mouse input when attempting to install Mojave</span>
</h4>
<p>If you are attempting to install Mojave, after doing the aforementioned steps, the installer will load up but you might not be able to send keyboard or mouse input. The reason seems to be that Mojave no longer supports the USB 1.1 controllers and in order to fix the issue you need to emulating USB 3.0. To do that first install the <a href="#Extension_pack">extension pack</a>.
</p>
<p>Then go to <i>Machine &gt; Settings &gt; USB</i> and select <i>USB 3.0</i>. Input should work from this point onwards.
</p>
<h4><span class="mw-headline" id="UEFI_interactive_shell_after_restart">UEFI interactive shell after restart</span></h4>
<p>If the installer is unable to properly format the bootable drive during installation and you end up in an UEFI shell, enter the following:
</p>
<ol>
<li>Type <code>exit</code> at the UEFI prompt</li>
<li>Select <i>Boot Maintenance Manager</i>
</li>
<li>Select <i>Boot From File</i>
</li>
</ol>
<p>You will now be brought to couple of obscure PCI paths. The first one is the one that you just attempted to boot from and it did not work. The second (or third) one should be the one with the MacOS recovery partition that you need to load to continue the installation. Click the second Entry. If it is empty, press <code>Esc</code> to go back and select the third entry. Once you get one with folders click though the folders. It should be something like <i>macOS Install Data &gt; Locked Files &gt; Boot Files &gt; boot.efi</i>. Once you click enter on the <i>boot.efi</i> you should boot into the MacOS installer and resume installation. Note that some of the subdirectories might be missing. Remember that you need to get to a <code>boot.efi</code>.<a rel="nofollow" class="external autonumber" href="https://superuser.com/questions/1235970/stuck-on-uefi-interactive-shell-with-mac-os-x-high-sierra-vm">[4]</a>
</p>
<h3><span class="mw-headline" id="Move_a_native_Windows_installation_to_a_virtual_machine">Move a native Windows installation to a virtual machine</span></h3>
<p>If you want to migrate an existing native Windows installation to a virtual machine which will be used with VirtualBox on GNU/Linux, this use case is for you. This section only covers native Windows installation using the MSDOS/Intel partition scheme. Your Windows installation must reside on the first MBR partition for this operation to success. Operation for other partitions are available but have been untested (see <a href="#Known_limitations">#Known limitations</a> for details).
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If you are using an OEM version of Windows, this process is unauthorized by the end user license license. Indeed, the OEM license typically states the Windows install is tied with the hardware together. Transferring a Windows install to a virtual machine removes this link. Make thus sure you have a full Windows install or a volume license model before continuing. If you have a full Windows license but the latter is not coming in volume, nor as a special license for several PCs, this means you will have to remove the native installation after the transfer operation has been achieved.</div>
<p>A couple of tasks are required to be done inside your native Windows installation first, then on your GNU/Linux host.
</p>
<h4><span class="mw-headline" id="Tasks_on_Windows">Tasks on Windows</span></h4>
<p>The first three following points comes from <a rel="nofollow" class="external text" href="https://www.virtualbox.org/wiki/Migrate_Windows#HAL">this outdated VirtualBox wiki page</a>, but are updated here.
</p>
<ul>
<li>Remove IDE/ATA controllers checks (Windows XP only): Windows memorize the IDE/ATA drive controllers it has been installed on and will not boot if it detects these have changed. The solution proposed by Microsoft is to reuse the same controller or use one of the same serial, which is impossible to achieve since we are using a Virtual Machine. <a rel="nofollow" class="external text" href="https://www.virtualbox.org/wiki/Migrate_Windows#HardDiskSupport">MergeIDE</a>, a German tool, developped upon another other solution proposed by Microsoft can be used. That solution basically consists in taking all IDE/ATA controller drivers supported by Windows XP from the initial driver archive (the location is hard coded, or specify it as the first argument to the <code>.bat</code> script), installing them and registering them with the regedit database.</li>
<li>Use the right type of Hardware Abstraction Layer (old 32 bits Windows versions): Microsoft ships 3 default versions: <code>Hal.dll</code> (Standard PC), <code>Halacpi.dll</code> (ACPI HAL) and <code>Halaacpi.dll</code> (ACPI HAL with IO APIC). Your Windows install could come installed with the first or the second version. In that way, please <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp56927888">disable the <i>Enable IO/APIC</i> VirtualBox extended feature</a>.</li>
<li>Disable any AGP device driver (only outdated Windows versions): If you have the files <code>agp440.sys</code> or <code>intelppm.sys</code> inside the <code>C:\Windows\SYSTEM32\drivers\</code> directory, remove it. As VirtualBox uses a PCI virtual graphic card, this can cause problems when this AGP driver is used.</li>
<li>Create a Windows recovery disk: In the following steps, if things turn bad, you will need to repair your Windows installation. Make sure you have an install media at hand, or create one with <i>Create a recovery disk</i> from Vista SP1, <i>Create a system repair disc</i> on Windows 7 or <i>Create a recovery drive</i> on Windows 8.x).</li>
</ul>
<h4><span class="mw-headline" id="Using_Disk2vhd_to_clone_Windows_partition">Using Disk2vhd to clone Windows partition</span></h4>
<p>Boot into Windows, clean up the installation (with <a rel="nofollow" class="external text" href="https://www.piriform.com/ccleaner">CCleaner</a> for example), use <a rel="nofollow" class="external text" href="https://technet.microsoft.com/en-us/library/ee656415.aspx">disk2vhd</a> tool to create a VHD image. Include a reserved system partition (if present) and the actual Windows partition (usually disk C:). The size of Disk2vhd-created image will be the sum of the actual files on the partition (used space), not the size of a whole partition. If all goes well, the image should just boot in a virtual machine and you will not have to go through the hassle with MBR and Windows boot loader, as in the case of cloning an entire partition.
</p>
<h4>
<span id="Tasks_on_GNU.2FLinux"></span><span class="mw-headline" id="Tasks_on_GNU/Linux">Tasks on GNU/Linux</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Skip the partition-related parts if you created VHD image with <a href="#Using_Disk2vhd_to_clone_Windows_partition">Disk2vhd</a>.</div>
<ul><li>Reduce the native Windows partition size to the size Windows actually needs with <code>ntfsresize</code> available from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ntfs-3g">ntfs-3g</a></span>. The size you will specify will be the same size of the VDI that will be created in the next step. If this size is too low, you may break your Windows install and the latter might not boot at all.</li></ul>
<dl>
<dd>Use the <code>--no-action</code> option first to run a test:</dd>
<dd><pre># ntfsresize --no-action --size <i>52Gi</i> <i>/dev/sda1</i></pre></dd>
</dl>
<dl><dd>If only the previous test succeeded, execute this command again, but this time without the aforementioned test flag.</dd></dl>
<ul><li>Install VirtualBox on your GNU/Linux host (see <a href="#Installation_steps_for_Arch_Linux_hosts">#Installation steps for Arch Linux hosts</a> if your host is Arch Linux).</li></ul>
<ul><li>Create the Windows disk image from the beginning of the drive to the end of the first partition where is located your Windows installation. Copying from the beginning of the disk is necessary because the MBR space at the beginning of the drive needs to be on the virtual drive along with the Windows partition. In this example two following partitions <code>sda2</code> and <code>sda3</code>will be later removed from the partition table and the MBR boot loader will be updated.</li></ul>
<dl>
<dd><pre># sectnum=$(( $(cat /sys/block/<i>sda/sda1</i>/start) + $(cat /sys/block/<i>sda/sda1</i>/size) ))</pre></dd>
<dd>Using <code>cat /sys/block/<i>sda/sda1</i>/size</code> will output the number of total sectors of the first partition of the disk <code>sda</code>. Adapt where necessary.</dd>
</dl>
<dl>
<dd><pre># dd if=<i>/dev/sda</i> bs=512 count=$sectnum | VBoxManage convertfromraw stdin <i>windows.vdi</i> $(( $sectnum * 512 ))</pre></dd>
<dd>We need to display the size in byte, <code>$(( $sectnum * 512 ))</code> will convert the sector numbers to bytes.</dd>
</dl>
<ul><li>Since you created your disk image as root, set the right ownership to the virtual disk image: <pre># chown <i>your_user</i>:<i>your_group</i> windows.vdi</pre>
</li></ul>
<ul><li>Create your virtual machine configuration file and use the virtual disk created previously as the main virtual hard disk.</li></ul>
<ul><li>Try to boot your Windows virtual machine, it may just work. First though remove and repair disks from the boot process as it may interfere (and likely will) booting into safe-mode.</li></ul>
<ul><li>Attempt to boot your Windows virtual machine in safe mode (press the F8 key before the Windows logo shows up)... if running into boot issues, read <a href="#Fix_MBR_and_Microsoft_boot_loader">#Fix MBR and Microsoft boot loader</a>. In safe-mode, drivers will be installed likely by the Windows plug-and-play detection mechanism <a rel="nofollow" class="external text" href="https://i.imgur.com/hh1RrSp.png">view</a>. Additionally, install the VirtualBox <a href="#Guest_additions">Guest Additions</a> via the menu <i>Devices</i> &gt; <i>Insert Guest Additions CD image...</i>. If a new disk dialog does not appear, navigate to the CD drive and start the installer manually.</li></ul>
<ul><li>You should finally have a working Windows virtual machine. Do not forget to read the <a href="#Known_limitations">#Known limitations</a>.</li></ul>
<ul><li>Performance tip: according to <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch05.html#harddiskcontrollers">VirtualBox manual</a>, SATA controller has a better performance than IDE. If you cannot boot Windows off virtual SATA controller right away, it is probably due to the lack of SATA drivers. Attach virtual disk to IDE controller, create an empty SATA controller and boot the virtual machine - Windows should automatically install SATA drivers for the controller. You can then shutdown the virtual machine, detach virtual disk from IDE controller and attach it to SATA controller instead.</li></ul>
<h4><span class="mw-headline" id="Fix_MBR_and_Microsoft_boot_loader">Fix MBR and Microsoft boot loader</span></h4>
<p>If your Windows virtual machine refuses to boot, you may need to apply the following modifications to your virtual machine.
</p>
<ul><li>Boot a GNU/Live live distribution inside your virtual machine before Windows starts up.</li></ul>
<ul><li>Remove other partitions entries from the virtual disk MBR. Indeed, since we copied the MBR and only the Windows partition, the entries of the other partitions are still present in the MBR, but the partitions are not available anymore. Use <code>fdisk</code> to achieve this for example.</li></ul>
<dl><dd><pre>fdisk ''/dev/sda''
Command (m for help): a
Partition number (''1-3'', default ''3''): ''1''</pre></dd></dl>
<ul><li>Write the updated partition table to the disk (this will recreate the MBR) using the <code>m</code> command inside <code>fdisk</code>.</li></ul>
<ul><li>Use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=testdisk">testdisk</a></span> (see <a rel="nofollow" class="external text" href="https://www.cgsecurity.org/index.html?testdisk.html">here</a> for details) to add a generic MBR:</li></ul>
<dl><dd><pre># testdisk &gt; <i>Disk /dev/sda...</i> &gt; [Proceed] &gt; [Intel] Intel/PC partition &gt; [MBR Code] Write TestDisk MBR to first sector &gt; Write a new copy of MBR code to first sector? (Y/n) &gt; Y &gt; Write a new copy of MBR code, confirm? (Y/N) &gt; A new copy of MBR code has been written. You have to reboot for the change to take effect. &gt; [OK]</pre></dd></dl>
<ul><li>With the new MBR and updated partition table, your Windows virtual machine should be able to boot. If you are still encountering issues, boot your Windows recovery disk from on of the previous step, and inside your Windows RE environment, execute the commands <a rel="nofollow" class="external text" href="https://support.microsoft.com/kb/927392">described here</a>.</li></ul>
<h4><span class="mw-headline" id="Known_limitations">Known limitations</span></h4>
<ul>
<li>Your virtual machine can sometimes hang and overrun your RAM, this can be caused by conflicting drivers still installed inside your Windows virtual machine. Good luck to find them!</li>
<li>Additional software expecting a given driver beneath may either not be disabled/uninstalled or needs to be uninstalled first as the drivers that are no longer available.</li>
<li>Your Windows installation must reside on the first partition for the above process to work. If this requirement is not met, the process might be achieved too, but this had not been tested. This will require either copying the MBR and editing in hexadecimal see <a rel="nofollow" class="external text" href="https://superuser.com/questions/237782/virtualbox-booting-cloned-disk/253417#253417">VirtualBox: booting cloned disk</a> or will require to fix the partition table <a rel="nofollow" class="external text" href="https://gparted.org/h2-fix-msdos-pt.php">manually</a> or by repairing Windows with the recovery disk you created in a previous step. Let us consider our Windows installation on the second partition; we will copy the MBR, then the second partition where to the disk image. <code>VBoxManage convertfromraw</code> needs the total number of bytes that will be written: calculated thanks to the size of the MBR (the start of the first partition) plus the size of the second (Windows) partition. <code>{ dd if=/dev/sda bs=512 count=$(cat /sys/block/sda/sda1/start) ; dd if=/dev/sda2 bs=512 count=$(cat /sys/block/sda/sda2/size) ; } | VBoxManage convertfromraw stdin windows.vdi $(( ($(cat /sys/block/sda/sda1/start) + $(cat /sys/block/sda/sda2/size)) * 512 ))</code>.</li>
</ul>
<h3><span class="mw-headline" id="Run_a_native_Windows_installation_inside_VirtualBox">Run a native Windows installation inside VirtualBox</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The technique outlined in this section only applies to <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> systems.</div>
<p>In some cases, it is useful to be able to <a href="../en/Dual_boot_with_Windows.html" title="Dual boot with Windows">dual boot with Windows</a> <i>and</i> access the partition in a virtual machine. This process is significantly different from <a href="#Move_a_native_Windows_installation_to_a_virtual_machine">#Move a native Windows installation to a virtual machine</a> in several ways:
</p>
<ul>
<li>The Windows partition is not copied to a virtual disk image. Instead, a raw VMDK file is created;</li>
<li>Changes in the virtual machine will be mirrored in the partition, and vice versa;</li>
<li>OEM licenses should still be satisfied, since the Windows partition still boots directly on the hardware.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Some of the commands used here can corrupt either the Windows partition, the Arch Linux partition, or both. Use extreme caution when executing commands, and double check that they are being run in the correct shell. It would be a good idea to have a backup of the entire drive ready before beginning this process.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Before proceeding be sure to have access to a Windows installation media (such as the <a rel="nofollow" class="external text" href="https://www.microsoft.com/en-us/software-download/windows11">Windows 11 ISO</a>).</div>
<h4><span class="mw-headline" id="Creating_the_virtual_machine">Creating the virtual machine</span></h4>
<p>A VirtualBox virtual machine must be manually created. As of now do not add any storage device any disk to the virtual machine, it will be done manually later.
</p>
<p>Configure the virtual machine with the following settings (settings panel can be opened by clicking the "Settings" button in the main toolbar):
</p>
<ul><li>View: System:
<ul>
<li>Tab: Motherboard:
<ul>
<li>mark <i>Enable I/O APIC</i>;</li>
<li>mark <i>Enable EFI</i>;</li>
<li>mark <i>Hardware Clock in UTC Time</i> if is your case.</li>
</ul>
</li>
<li>Tab: Processor:
<ul>
<li>mark <i>Enable PAE/NX</i>;</li>
<li>mark <i>Enable Nested VT-x/AMD-V</i>;</li>
</ul>
</li>
<li>Tab: Acceleration:
<ul>
<li>Choose the paravirtualization interface <i>Hyper-V</i> from the drop down menu;</li>
<li>mark <i>Enable Nested Paging</i>.</li>
</ul>
</li>
</ul>
</li></ul>
<p>Optionally you can enable also the following settings:
</p>
<ul><li>View: Display
<ul><li>Tab: Screen
<ul><li>mark <i>Enable 3D Acceleration</i>. Note that it could cause glitches.</li></ul>
</li></ul>
</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The <i>Hyper-V</i> setting is not required in order for the system to operate correctly, but it may help avoid licensing issues.</div>
<h4><span class="mw-headline" id="Creating_virtual_machine_disks">Creating virtual machine disks</span></h4>
<p>To access the Windows partitions, create a <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk-access-disk-partitions">raw VMDK file</a> pointing to the relevant Windows partitions (root privileges are required to read disk partition table):
</p>
<pre># VBoxManage createmedium disk -filename <i>VM_DIRECTORY</i>/windows.vmdk --format=VMDK --variant RawDisk --property RawDrive=<i>DISK</i> --property Partitions=<i>RESERVED_PARTITION_NUMBER</i>,<i>BASIC_DATA_PARTITION_NUMBER</i>
</pre>
<p>Replace capitalized placeholder strings as follow:
</p>
<ul>
<li>
<code><i>VM_DIRECTORY</i></code> with the path of the virtual machine folder (usually a subdirectory of <code>~/VirtualBox VMs</code>;</li>
<li>
<code><i>DISK</i></code> must be replaced with the block device containing all the Windows partitions (e.g.: <code>/dev/sda</code> or <code>/dev/nvme0n1</code>);</li>
<li>
<code><i>RESERVED_PARTITION_NUMBER</i></code> must be replaced with the number of partition labeled "Microsoft reserved partition" (e.g.: if the partition is the <code>/dev/sda2</code> the number will be <code>2</code>);</li>
<li>
<code><i>BASIC_DATA_PARTITION_NUMBER</i></code> must be replaced with the partition containing the Windows installation (e.g.: if the partition is the <code>/dev/sda3</code> the number will be <code>3</code>);</li>
</ul>
<p>Example:
</p>
<pre>$ sudo VBoxManage createmedium disk -filename "/home/user/VirtualBox VMs/windows.vmdk" --format=VMDK --variant RawDisk --property RawDrive=/dev/nvme0n1 --property Partitions=2,3
</pre>
<p>The command will also create an extra file inside the virtual machine folder, "windows-pt.vmdk", that will be just ignored.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>windows.vmdk</code> must be re-created if the partition table is changed.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<p>Partition numbers can be found also by running this command and looking at the MIN column:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">lsblk --output NAME,PARTLABEL,FSTYPE,MAJ:MIN,SIZE</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NAME        PARTLABEL                    FSTYPE UUID                                 MAJ:MIN   SIZE
nvme0n1                                                                              259:0   931,5G
├─nvme0n1p1 EFI system partition         vfat   90DC-A6B3                            259:1     100M
├─nvme0n1p2 Microsoft reserved partition                                             259:2      16M
├─nvme0n1p3 Basic data partition         ntfs   D2A2A104A2A0EE63                     259:3     200G
...</pre>
</div>
<p>Now change the virtual disk owner to give access the user and group running VirtualBox.
</p>
<pre># chown <i>VIRTUALBOX_RUNNING_USER</i>:<i>VIRTUALBOX_RUNNING_GROUP</i> <i>VM_DIRECTORY</i>/windows.vmdk <i>VM_DIRECTORY</i>/windows-pt.vmdk</pre>
<p>Replace <code><i>VIRTUALBOX_RUNNING_USER</i></code> and <code><i>VIRTUALBOX_RUNNING_GROUP</i></code> with the user and the group that will run VirtualBox, which most likely will be your user.
</p>
<h4><span class="mw-headline" id="Allowing_VirtualBox_to_read_physical_partitions">Allowing VirtualBox to read physical partitions</span></h4>
<p>VirtualBox must have <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">raw disk access</a> in order to run a Windows partition. Normally, this would require VirtualBox to be run with full root privileges, but more elegant options are available.
</p>
<h5><span class="mw-headline" id="Higher_security_option:_using_a_dedicated_group_for_the_Windows_partitions">Higher security option: using a dedicated group for the Windows partitions</span></h5>
<p>Here <a href="../en/Udev.html" title="Udev">udev</a> is configured to restrict the access to partitions Windows partitions to the <i>vboxusers</i> group, and then the user running VirtualBox is added to the group.
</p>
<p>Assigning the disks to the <i>vboxusers</i> group can be done automatically by creating the following file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-vbox.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#
# Rules to give VirtualBox users raw access to Windows partitions
#

# Microsoft Reserved partition
SUBSYSTEM=="block", ENV{ID_PART_ENTRY_TYPE}=="e3c9e316-0b5c-4db8-817d-f92df00215ae", GROUP="vboxusers"

# Windows partition
SUBSYSTEM=="block", ENV{ID_PART_ENTRY_TYPE}=="ebd0a0a2-b9e5-4433-87c0-68b6b72699c7", GROUP="vboxusers"

#
# Rules to give VirtualBox users raw access to Windows disk
#

# sdb
ENV{ID_PART_TABLE_UUID}=="WINDOWS_DISK_ID_PART_TABLE_UUID", GROUP="vboxusers"
</pre>
<p><code>WINDOWS_DISK_ID_PART_TABLE_UUID</code> must be replaced with the value obtained from <code>udevadm info /dev/WINDOWS_DISK </code> (replace <code>WINDOWS_DISK</code> with the disk containing Windows partitions). The UUIDs in these rules correspond to particular <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs" class="extiw" title="wikipedia:GUID Partition Table">GPT partition types</a> while the other capitalized strings are supposed to be written that way, so those does not have to be replaced.
</p>
<p>Then the user running VirtualBox must be added to the <i>vboxusers</i> group. This can be done with the following command:
</p>
<pre># usermod -aG vboxusers VIRTUALBOX_RUNNING_USER
</pre>
<p>Replace <code>VIRTUALBOX_RUNNING_USER</code> and with the user that will run VirtualBox, which most likely will be your user.
</p>
<h5>
<span id="Lower_security_option:_using_.27disk.27_group"></span><span class="mw-headline" id="Lower_security_option:_using_'disk'_group">Lower security option: using 'disk' group</span>
</h5>
<p>To be able to add the VMDK file in VirtualBox Virtual Media Manager without running VirtualBox as root, the user running VirtualBox need to be in <code>vboxusers</code> and <code>disk</code> groups.
</p>
<pre># usermod -aG disk,vboxusers VIRTUALBOX_RUNNING_USER</pre>
<p>Replace <code>VIRTUALBOX_RUNNING_USER</code> and with the user that will run VirtualBox, which most likely will be your user.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Be aware of the potential security implications of this edit, as you are giving your user account full read-write access all storage devices owned by the disk group.</div>
<h4><span class="mw-headline" id="Setting_up_a_separate_EFI_system_partition">Setting up a separate EFI system partition</span></h4>
<p>Virtual machine EFI boot files will refer to different disks than the ones in the physical EFI system partition, so VirtualBox must not make use of the latter but instead of an EFI system partition inside a dedicated virtual disk. This disk can be created with the following command:
</p>
<pre>$ VBoxManage createmedium disk --filename <i>VM_DIRECTORY/esp.vmdk</i> --size 512 --format VMDK
</pre>
<p>Replace <code>VM_DIRECTORY</code> with the folder containing the virtual machine being built.
</p>
<h4><span class="mw-headline" id="Adding_virtual_disks_to_the_virtual_machine">Adding virtual disks to the virtual machine</span></h4>
<p>Configure the virtual machine storage devices (Settings panel - Storage) as following:
</p>
<ul>
<li>add <code>esp.vmdk</code> as a SATA hard disk attached to the "SATA Port 0";</li>
<li>add <code>windows.vmdk</code> as a SATA hard disk attached to the "SATA Port 1";</li>
<li>mount Windows installation iso into the virtual optical drive .</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>for adding a SATA hard disk use the second button on the right of the "Controller: SATA" device;</li>
<li>the virtual optical drive should already be there as "Optical Drive".</li>
</ul>
</div>
<h4><span class="mw-headline" id="Configuring_the_virtual_UEFI_firmware_and_creating_Windows_boot_files">Configuring the virtual UEFI firmware and creating Windows boot files</span></h4>
<p>Now start the virtual machine and it should automatically boot from Windows installation disk. After choosing the installation locales click on the "Repair your computer" link, then choose "Troubleshoot" and then " Command Prompt" in order to launch a command prompt from the install media.
</p>
<p>Enter the following commands to create a new GPT table in the esp.vmdk disk and install the Windows boot loader onto it using configuration from the existing Windows partition:
</p>
<p>Open Diskpart:
</p>
<pre>X:\ diskpart
</pre>
<p>List all disks identified by the system:
</p>
<pre>DISKPART&gt; list disk
</pre>
<p>The <code>esp.vmkd</code> disk should be labeled as <code>disk 0</code> due to the fact that was attached to the SATA port 0, ~512 MiB in size and unpartitioned. The <code>windows.vmdk</code> disk should be labeled as <code>disk 1</code>; note that the column "Size" displays the disk size, not the partition one.
</p>
<p>Select the esp.vmdk disk:
</p>
<pre>DISKPART&gt; select Disk 0
</pre>
<p>Now create a GPT partition table, an EFI system partition, big as the whole disk, and assign to it a label and drive letter:
</p>
<pre>DISKPART&gt; clean
DISKPART&gt; convert gpt
DISKPART&gt; create partition efi size=500
DISKPART&gt; format quick fs=fat32 label="System"
DISKPART&gt; assign letter="S"</pre>
<p>Check that the partition has been correctly created:
</p>
<pre>DISKPART&gt; list volume
</pre>
<p>Our newly created EFI system partition will be labeled as "SYSTEM" with letter as "S".
</p>
<p>Take note of the Windows installation volume letter because it will be used in next steps. Usually its <code>D</code> but it could be different: you can infer it from its label and its size. The size is the same as the Windows installation partition size on your physical hard disk.
</p>
<p>Exit diskpart:
</p>
<pre>DISKPART&gt; exit
</pre>
<p>Install the Windows boot loader into the EFI system partition.
</p>
<pre>D:
cd Windows\System32
bcdboot D:\Windows /s S: /f UEFI
</pre>
<p>Now close the command prompt, power off the virtual machine and detach the Windows installation disk (from "Preferences &gt; Devices" remove the optical disk). The virtual machine should now boot from the newly installed boot partition and load the physical Windows installation. It may show some UEFI related errors on the top of the virtual machine window and the first boot may take a while, but if everything has been done correctly you will be able to access your windows installation.
</p>
<h3><span class="mw-headline" id="Run_an_entire_physical_disk_in_VirtualBox">Run an entire physical disk in VirtualBox</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You may refer to VirtualBox official documentation <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">9.8.1. Using a Raw Host Hard Disk From a Guest</a>.</div>
<p>This works the same way as <a href="#Run_a_native_Windows_installation_inside_VirtualBox">#Run a native Windows installation inside VirtualBox</a> but the vmdk will contain the entire disk rather than one partition, and so you will not need to create a separate ESP or MBR partition as the one in the physical disk will be used.
</p>
<p>Create the raw disk:
</p>
<pre># VBoxManage internalcommands createrawvmdk -filename /path/to/file.vmdk -rawdisk /dev/sdb
</pre>
<p>Then follow the same method as in <a href="#Run_a_native_Windows_installation_inside_VirtualBox">#Run a native Windows installation inside VirtualBox</a> for the configuration and virtual disk attachement.
</p>
<h3><span class="mw-headline" id="Set_guest_starting_resolution">Set guest starting resolution</span></h3>
<p>You can change the BIOS/UEFI booting resolution using <code>VBoxManage</code> tool. For example:
</p>
<pre>$ VBoxManage setextradata "Your Virtual Machine Name" "VBoxInternal2/EfiGraphicsResolution" "2560x1440"
</pre>
<p>Recommended resolutions are 1280x720, 1920x1080, 2048x1080, 2560x1440, 3840x2160, 1280x800, 1280x1024, 1440x900, 1600x900.
</p>
<h3><span class="mw-headline" id="SSH_from_host_to_guest">SSH from host to guest</span></h3>
<p>The network tab of the virtual machine settings contains, in "Advanced", a tool to create port forwarding.
It is possible to use it to forward the Guest ssh port <code>22</code> to a Host port, e.g. <code>3022</code> :
</p>
<pre>user@host$ ssh -p 3022 $USER@localhost
</pre>
<p>will establish a connection from Host to Guest.
</p>
<h4><span class="mw-headline" id="SSHFS_as_alternative_to_shared_folders">SSHFS as alternative to shared folders</span></h4>
<p>Using this port forwarding and <a href="../en/SSHFS.html" title="SSHFS">SSHFS</a> it is straightforward to mount the Guest filesystem onto the Host one:
</p>
<pre>user@host$ sshfs -p 3022 $USER@localhost:$HOME ~/shared_folder
</pre>
<p>and then transfer files between both.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Keyboard_and_mouse_are_locked_into_virtual_machine">Keyboard and mouse are locked into virtual machine</span></h3>
<p>This means your virtual machine has captured the input of your keyboard and your mouse. Simply press the right <code>Ctrl</code> key and your input should control your host again.
</p>
<p>To control transparently your virtual machine with your mouse going back and forth your host, without having to press any key, and thus have a seamless integration, install the <a href="#Guest_additions">guest additions</a> inside the guest. Read from <a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html#Install_the_Guest_Additions" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest#Install the Guest Additions</a> if your guest is Arch Linux, otherwise read the official VirtualBox help.
</p>
<h3><span class="mw-headline" id="No_64-bit_operating_system_client_options">No 64-bit operating system client options</span></h3>
<p>When launching a virtual machine client, and no 64-bit options are available, make sure your CPU virtualization capabilities (usually named <code>VT-x</code>) are enabled in the BIOS.
</p>
<p>If you are using a Windows host, you may need to disable Hyper-V, as it prevents VirtualBox from using VT-x. <a rel="nofollow" class="external autonumber" href="https://www.virtualbox.org/ticket/12350">[5]</a>
</p>
<h3><span class="mw-headline" id="VirtualBox_GUI_does_not_match_host_GTK_theme">VirtualBox GUI does not match host GTK theme</span></h3>
<p>See <a href="../en/Uniform_look_for_Qt_and_GTK_applications.html" title="Uniform look for Qt and GTK applications">Uniform look for Qt and GTK applications</a> for information about theming Qt-based applications like VirtualBox.
</p>
<h3>
<span id="Cannot_send_Ctrl.2BAlt.2BFn_to_guest"></span><span class="mw-headline" id="Cannot_send_Ctrl+Alt+Fn_to_guest">Cannot send Ctrl+Alt+Fn to guest</span>
</h3>
<p>Your guest operating system is a GNU/Linux distribution and you want to open a new TTY shell by hitting <code>Ctrl+Alt+F2</code> or exit your current X session with <code>Ctrl+Alt+Backspace</code>. If you type these keyboard shortcuts without any adaptation, the guest will not receive any input and the host (if it is a GNU/Linux distribution too) will intercept these shortcut keys. To send <code>Ctrl+Alt+F2</code> to the guest for example, simply hit your <i>Host Key</i> (usually the right <code>Ctrl</code> key) and press <code>F2</code> simultaneously.
</p>
<h3><span class="mw-headline" id="USB_subsystem_not_working">USB subsystem not working</span></h3>
<p>Your user must be in the <code>vboxusers</code> group and you need to install the <a href="#Extension_pack">extension pack</a> if you want USB 2 support. Then you will be able to enable USB 2 in the virtual machine settings and add one or several filters for the devices you want to access from the guest operating system.
</p>
<p>If <code>VBoxManage list usbhost</code> does not show any USB devices even if run as root, make sure that there is no old udev rules (from VirtualBox 4.x) in <code>/etc/udev/rules.d/</code>. VirtualBox 5.0 installs udev rules to <code>/usr/lib/udev/rules.d/</code>. You can use command like <code>pacman -Qo /usr/lib/udev/rules.d/60-vboxdrv.rules</code> to determine if the udev rule file is outdated.
</p>
<p>Sometimes, on old Linux hosts, the USB subsystem is not auto-detected resulting in an error <code>Could not load the Host USB Proxy service: VERR_NOT_FOUND</code> or in a not visible USB drive on the host, <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=121377">even when the user is in the <b>vboxusers</b> group</a>. This problem is due to the fact that VirtualBox switched from <i>usbfs</i> to <i>sysfs</i> in version 3.0.8. If the host does not understand this change, you can revert to the old behaviour by defining the following environment variable in any file that is sourced by your shell (e.g. your <code>~/.bashrc</code> if you are using <i>bash</i>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">VBOX_USB=usbfs</pre>
<p>Then make sure, the environment has been made aware of this change (reconnect, source the file manually, launch a new shell instance or reboot).
</p>
<p>Also make sure that your user is a member of the <code>storage</code> group.
</p>
<h3><span class="mw-headline" id="USB_modem_not_working_on_host">USB modem not working on host</span></h3>
<p>If you have a USB modem which is being used by the guest operating system, killing the guest operating system can cause the modem to become unusable by the host system. Killing and restarting <code>VBoxSVC</code> should fix this problem.
</p>
<h3><span class="mw-headline" id="USB_device_crashes_guest">USB device crashes guest</span></h3>
<p>If attaching a USB device to the guest causes a crash or any other erroneous behavior, try switching the USB controller from USB 2 (EHCI) to USB 3 (xHCI) or vice versa.
</p>
<h3><span class="mw-headline" id="Host_freezes_on_virtual_machine_start">Host freezes on virtual machine start</span></h3>
<p>Generally, such issues are observed after upgrading VirtualBox or Linux kernel. Downgrading them to the previous versions of theirs might solve the problem.
</p>
<h3><span class="mw-headline" id="Analog_microphone_not_working">Analog microphone not working</span></h3>
<p>If the audio input from an analog microphone is working correctly on the host, but no sound seems to get through to the guest, despite the microphone device apparently being detected normally, installing a <a href="../en/Sound_system.html#Sound_servers" class="mw-redirect" title="Sound server">sound server</a> such as <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> on the host might fix the problem.
</p>
<p>If after installing <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> the microphone still refuses to work, setting <i>Host Audio Driver</i> (under <i>VirtualBox &gt; Machine &gt; Settings &gt; Audio</i>) to <i>ALSA Audio Driver</i> might help.
</p>
<h3><span class="mw-headline" id="Problems_with_images_converted_to_ISO">Problems with images converted to ISO</span></h3>
<p>Some image formats cannot be reliably converted to ISO. For instance, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ccd2iso">ccd2iso</a></span> ignores .ccd and .sub files, which can result in disk images with broken files.
</p>
<p>In this case, you will either have to use <a href="../en/CDemu.html" title="CDemu">CDemu</a> for Linux inside VirtualBox or any other utility used to mount disk images.
</p>
<h3><span class="mw-headline" id="Failed_to_create_the_host-only_network_interface">Failed to create the host-only network interface</span></h3>
<p>Make sure all required kernel modules are loaded. See <a href="#Load_the_VirtualBox_kernel_modules">#Load the VirtualBox kernel modules</a>.
</p>
<p>If all required kernel modules are loaded and you are still unable to create the host-only adapter, navigate to <i>File &gt; Host Network Manager</i> and click the <i>Create</i> button to add the network interface.
</p>
<h3><span class="mw-headline" id="Failed_to_insert_module">Failed to insert module</span></h3>
<p>When you get the following error when trying to load modules:
</p>
<pre>Failed to insert 'vboxdrv': Required key not available
</pre>
<p><a href="#Sign_modules">Sign</a> your modules or disable <code>CONFIG_MODULE_SIG_FORCE</code> in your kernel config.
</p>
<h3>
<span id="VBOX_E_INVALID_OBJECT_STATE_.280x80BB0007.29"></span><span class="mw-headline" id="VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)">VBOX_E_INVALID_OBJECT_STATE (0x80BB0007)</span>
</h3>
<p>This can occur if a virtual machine is exited ungracefully. Run the following command:
</p>
<pre>$ VBoxManage controlvm <i>virtual_machine_name</i> poweroff
</pre>
<h3><span class="mw-headline" id="NS_ERROR_FAILURE_and_missing_menu_items">NS_ERROR_FAILURE and missing menu items</span></h3>
<p>This error might appear if <a href="#Extension_pack">extension pack</a> has not been updated and becomes incompatible with a newly released VirtualBox version.
</p>
<p>This error also happens sometimes when selecting <i>QCOW</i>/<i>QCOW2</i>/<i>QED</i> disk format when creating a new virtual disk.
</p>
<p>If you encounter this message the first time you start the virtual machine:
</p>
<pre>Failed to open a session for the virtual machine debian.
Could not open the medium '/home/.../VirtualBox VMs/debian/debian.qcow'.
QCow: Reading the L1 table for image '/home/.../VirtualBox VMs/debian/debian.qcow' failed (VERR_EOF).
VD: error VERR_EOF opening image file '/home/.../VirtualBox VMs/debian/debian.qcow' (VERR_EOF).

Result Code:
NS_ERROR_FAILURE (0x80004005)
Component:
Medium
</pre>
<p>Exit VirtualBox, delete all files of the new machine and from VirtualBox configuration file remove the last line in <code>MachineRegistry</code> menu (or the offending machine you are creating):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/VirtualBox/VirtualBox.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
&lt;MachineRegistry&gt;
  &lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/debian/debian.vbox"/&gt;
  &lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/ubuntu/ubuntu.vbox"/&gt;
  <strike>&lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/lastvmcausingproblems/lastvmcausingproblems.qcow"/&gt;</strike>
&lt;/MachineRegistry&gt;
...</pre>
<h3><span class="mw-headline" id="OpenBSD_unusable_when_virtualisation_instructions_unavailable">OpenBSD unusable when virtualisation instructions unavailable</span></h3>
<p>While OpenBSD is reported to work fine on other hypervisors without virtualisation instructions (VT-x AMD-V) enabled, an OpenBSD virtual machine running on VirtualBox without these instructions will be unusable, manifesting with a bunch of segmentation faults. Starting VirtualBox with the <i>-norawr0</i> argument <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/3947">may solve the problem</a>. You can do it like this:
</p>
<pre>$ VBoxSDL -norawr0 -vm <i>name_of_OpenBSD_virtual_machine</i>
</pre>
<h3>
<span id="Windows:_.22The_specified_path_does_not_exist._Check_the_path_and_then_try_again..22"></span><span class="mw-headline" id='Windows:_"The_specified_path_does_not_exist._Check_the_path_and_then_try_again."'>Windows: "The specified path does not exist. Check the path and then try again."</span>
</h3>
<p>This error message may appear when running an <code>.exe</code> file which requires administrator privileges from a shared folder in windows guests. <a rel="nofollow" class="external autonumber" href="https://www.virtualbox.org/ticket/5732#comment:39">[6]</a>
</p>
<p>As a workaround, copy the file to the virtual drive or use <a href="https://en.wikipedia.org/wiki/Uniform_Naming_Convention" class="extiw" title="wikipedia:Uniform Naming Convention">UNC paths</a> (<code>\\vboxsvr</code>). See <a rel="nofollow" class="external autonumber" href="https://support.microsoft.com/de-de/help/2019185/copying-files-from-a-mapped-drive-to-a-local-directory-fails-with-erro">[7]</a> for more information.
</p>
<h3><span class="mw-headline" id="Windows_8.x_error_code_0x000000C4">Windows 8.x error code 0x000000C4</span></h3>
<p>If you get this error code while booting, even if you choose operating system type Win 8, try to enable the <code>CMPXCHG16B</code> CPU instruction:
</p>
<pre>$ vboxmanage setextradata <i>virtual_machine_name</i> VBoxInternal/CPUM/CMPXCHG16B 1
</pre>
<h3>
<span id="Windows_8.2C_8.1_or_10_fails_to_install.2C_boot_or_has_error_.22ERR_DISK_FULL.22"></span><span class="mw-headline" id='Windows_8,_8.1_or_10_fails_to_install,_boot_or_has_error_"ERR_DISK_FULL"'>Windows 8, 8.1 or 10 fails to install, boot or has error "ERR_DISK_FULL"</span>
</h3>
<p>Update the virtual machine's settings by going to <i>Settings &gt; Storage &gt; Controller:SATA</i> and check <i>Use Host I/O Cache</i>.
</p>
<h3><span class="mw-headline" id="WinXP:_Bit-depth_cannot_be_greater_than_16">WinXP: Bit-depth cannot be greater than 16</span></h3>
<p>If you are running at 16-bit color depth, then the icons may appear fuzzy/choppy. However, upon attempting to change the color depth to a higher level, the system may restrict you to a lower resolution or simply not enable you to change the depth at all. To fix this, run <code>regedit</code> in Windows and add the following key to the Windows XP virtual machine's registry:
</p>
<pre>[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services]
"ColorDepth"=dword:00000004
</pre>
<p>Then update the color depth in the "desktop properties" window. If nothing happens, force the screen to redraw through some method (i.e. <code>Host+f</code> to redraw/enter full screen).
</p>
<h3><span class="mw-headline" id="Windows:_Screen_flicker_if_3D_acceleration_enabled">Windows: Screen flicker if 3D acceleration enabled</span></h3>
<p>VirtualBox &gt; 4.3.14 has a regression in which Windows guests with 3D acceleration flicker. Since r120678 a patch has been implemented to recognize an <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> setting, launch VirtualBox like this:
</p>
<pre>$ CR_RENDER_FORCE_PRESENT_MAIN_THREAD=0 VirtualBox
</pre>
<p>Make sure no VirtualBox services are still running. See <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/13653">VirtualBox bug 13653</a>.
</p>
<h3><span class="mw-headline" id="Cannot_launch_VirtualBox_with_Wayland:_Segmentation_fault">Cannot launch VirtualBox with Wayland: Segmentation fault</span></h3>
<p>This problem is caused by Qt detecting Wayland (e.g., if <code>XDG_SESSION_TYPE=wayland</code>), while VirtualBox does not work on Wayland yet. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/58761">FS#58761</a> and the <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/18679">upstream bug</a>.
</p>
<p>The Qt platform detection can be disabled and X11 forced over Wayland by setting the <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> <code>QT_QPA_PLATFORM=xcb</code>.
To not affect the other Qt applications (which usually work well with Wayland), <code>QT_QPA_PLATFORM=xcb</code> should only be set when launching VirtualBox.
</p>
<p>If starting through the <a href="../en/Desktop_entries.html" class="mw-redirect" title="Desktop entry">desktop entry</a>, follow the instructions in <a href="../en/Desktop_entries.html#Modify_environment_variables" title="Desktop entries">Desktop entries#Modify environment variables</a> and change the lines starting with <code>Exec=VirtualBox ...</code> to <code>Exec=env QT_QPA_PLATFORM=xcb VirtualBox ...</code>. If starting from the shell, alias (<a href="../en/Bash.html#Aliases" title="Bash">Bash#Aliases</a>) <code>virtualbox</code> to <code>env QT_QPA_PLATFORM=xcb virtualbox</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you have mouse or keyboard related issue in Wayland, you can try above setting too.</div>
<h3><span class="mw-headline" id="Random_freezing_in_guests_with_Intel_GPU">Random freezing in guests with Intel GPU</span></h3>
<p>With Intel CPU and graphics, allocating more processors for the guest can lower render performance, thus cause random freezing. Allocating less processors can help.
</p>
<h3><span class="mw-headline" id="Unable_to_view_desktop_in_fullscreen_mode">Unable to view desktop in fullscreen mode</span></h3>
<p>Disable the Mini Toolbar by selecting <i>Machine &gt; Settings</i>, select the <i>User Interface</i> tab and uncheck the <i>Mini Toolbar</i> checkbox
</p>
<h3><span class="mw-headline" id="Random_crashes_with_Windows_10_guest_operating_system_with_Intel_Tiger_Lake_chipset">Random crashes with Windows 10 guest operating system with Intel Tiger Lake chipset</span></h3>
<p>Disable split lock detection by adding <code>split_lock_detect=off</code> to the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameters</a>.
</p>
<p>Details are described in VirtualBox's <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/20180#comment:8">Ticket #20180</a>.
</p>
<h3><span class="mw-headline" id="Failed_to_save_the_settings_when_enabling_Secure_Boot">Failed to save the settings when enabling Secure Boot</span></h3>
<p>In VirtualBox 7.0.0, enabling Secure Boot in a virtual machine that was created in a previous VirtualBox version will fail with a nondescript error (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/76234">FS#76234</a>):
</p>
<pre>Failed to save the settings.
</pre>
<p>The solution is to click the <i>Reset Keys to Default</i> button right below the <i>Enable Secure Boot</i> checkbox.
</p>
<h3><span class="mw-headline" id="Failed_to_start_VirtualBox_machine_after_using_Android_Studio_emulator">Failed to start VirtualBox machine after using Android Studio emulator</span></h3>
<p>KVM and VirtualBox kernel modules can be loaded but not used simultaneously. Android Studio emulator is a QEMU emulator, which uses KVM for acceleration. So Android Studio emulator and VirtualBox machine (if hardware acceleration is enabled) cannot run at the same time. We have to use one after the other stopped completely.
</p>
<p>Sometimes, VirtualBox kernel module can still be used unexpectedly by some process, and keep all VirtualBox machines failing to start, the error message on VirtualBox GUI is "A critical error has occurred".
</p>
<p>At this time, we can check and reload VirtualBox kernel modules using <code>vboxreload</code> as root. If it saying some modules is still be in use, you need to manually kill related process and rerun the command.
</p>
<h3><span class="mw-headline" id="3D_Acceleration_is_not_working">3D Acceleration is not working</span></h3>
<ul>
<li>Make sure guest additions are installed on guest, and the host modules are installed on the host</li>
<li>Make sure the guest additions and host kernel modules versions match
<ul>
<li>host: <code>modinfo vboxdrv | grep '^version:'</code>
</li>
<li>guest: open logs of your VM, find "Guest Additions information report"</li>
</ul>
</li>
<li>Make sure vulkan is installed and <a href="../en/Vulkan.html#Verification" title="Vulkan">working</a> on the host</li>
</ul>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/UserManual.html">VirtualBox User Manual</a></li>
<li><a href="https://en.wikipedia.org/wiki/VirtualBox" class="extiw" title="wikipedia:VirtualBox">Wikipedia:VirtualBox</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Hypervisors.html" title="Category:Hypervisors">Hypervisors</a></li>
<li><a href="../en/Category:Oracle.html" title="Category:Oracle">Oracle</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=VirtualBox&amp;oldid=813643">https://wiki.archlinux.org/index.php?title=VirtualBox&amp;oldid=813643</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 August 2024, at 08:43.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
