<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Pi-hole - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pi-hole rootpage-Pi-hole skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-FTL_(Faster_Than_Light)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#FTL_(Faster_Than_Light)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>FTL (Faster Than Light)</span>
				</div>
			</a>
			
			<ul id="toc-FTL_(Faster_Than_Light)-sublist" class="vector-toc-list">
				<li id="toc-FTL_Integrated_Web_interface" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#FTL_Integrated_Web_interface">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>FTL Integrated Web interface</span>
				</div>
			</a>
			
			<ul id="toc-FTL_Integrated_Web_interface-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Update_hosts_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Update_hosts_file">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Update hosts file</span>
				</div>
			</a>
			
			<ul id="toc-Update_hosts_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Making_devices_use_Pi-hole" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Making_devices_use_Pi-hole">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Making devices use Pi-hole</span>
				</div>
			</a>
			
			<ul id="toc-Making_devices_use_Pi-hole-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usage">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Usage</span>
				</div>
			</a>
			
			<ul id="toc-Usage-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage_2" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Usage_2">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Usage</span>
			</div>
		</a>
		
			<button aria-controls="toc-Usage_2-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage_2-sublist" class="vector-toc-list">
			<li id="toc-Using_web_interface" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_web_interface">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Using web interface</span>
				</div>
			</a>
			
			<ul id="toc-Using_web_interface-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_CLI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_CLI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Using CLI</span>
				</div>
			</a>
			
			<ul id="toc-Using_CLI-sublist" class="vector-toc-list">
				<li id="toc-Pi-hole_DNS_management" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Pi-hole_DNS_management">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.1</span>
					<span>Pi-hole DNS management</span>
				</div>
			</a>
			
			<ul id="toc-Pi-hole_DNS_management-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Forced_update_of_ad-serving_domains_list" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Forced_update_of_ad-serving_domains_list">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.2</span>
					<span>Forced update of ad-serving domains list</span>
				</div>
			</a>
			
			<ul id="toc-Forced_update_of_ad-serving_domains_list-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Temporarily_disable_Pi-hole" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Temporarily_disable_Pi-hole">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.3</span>
					<span>Temporarily disable Pi-hole</span>
				</div>
			</a>
			
			<ul id="toc-Temporarily_disable_Pi-hole-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Password-protected_web_interface" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Password-protected_web_interface">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Password-protected web interface</span>
				</div>
			</a>
			
			<ul id="toc-Password-protected_web_interface-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cloudflare_DoH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cloudflare_DoH">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Cloudflare DoH</span>
				</div>
			</a>
			
			<ul id="toc-Cloudflare_DoH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Optimise_for_solid_state_drives" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Optimise_for_solid_state_drives">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Optimise for solid state drives</span>
				</div>
			</a>
			
			<ul id="toc-Optimise_for_solid_state_drives-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_query_logging" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_query_logging">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Disable query logging</span>
				</div>
			</a>
			
			<ul id="toc-Disable_query_logging-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_with_VPN_server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Use_with_VPN_server">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Use with VPN server</span>
				</div>
			</a>
			
			<ul id="toc-Use_with_VPN_server-sublist" class="vector-toc-list">
				<li id="toc-OpenVPN" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#OpenVPN">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5.1</span>
					<span>OpenVPN</span>
				</div>
			</a>
			
			<ul id="toc-OpenVPN-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-WireGuard" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#WireGuard">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5.2</span>
					<span>WireGuard</span>
				</div>
			</a>
			
			<ul id="toc-WireGuard-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Additional_blocklists" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Additional_blocklists">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>Additional blocklists</span>
				</div>
			</a>
			
			<ul id="toc-Additional_blocklists-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Block/Allow_domains_using_regex" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Block/Allow_domains_using_regex">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7</span>
					<span>Block/Allow domains using regex</span>
				</div>
			</a>
			
			<ul id="toc-Block/Allow_domains_using_regex-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_Unbound_as_upstream_DNS_server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Use_Unbound_as_upstream_DNS_server">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8</span>
					<span>Use Unbound as upstream DNS server</span>
				</div>
			</a>
			
			<ul id="toc-Use_Unbound_as_upstream_DNS_server-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Odd_behavior_in_the_web_interface_after_an_upgrade" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Odd_behavior_in_the_web_interface_after_an_upgrade">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Odd behavior in the web interface after an upgrade</span>
				</div>
			</a>
			
			<ul id="toc-Odd_behavior_in_the_web_interface_after_an_upgrade-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Data_loss_on_reboot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Data_loss_on_reboot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Data loss on reboot</span>
				</div>
			</a>
			
			<ul id="toc-Data_loss_on_reboot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_start_Pi-hole_FTLDNS_engine" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_start_Pi-hole_FTLDNS_engine">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Failed to start Pi-hole FTLDNS engine</span>
				</div>
			</a>
			
			<ul id="toc-Failed_to_start_Pi-hole_FTLDNS_engine-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DNSMasq_package_conflict" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#DNSMasq_package_conflict">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.4</span>
					<span>DNSMasq package conflict</span>
				</div>
			</a>
			
			<ul id="toc-DNSMasq_package_conflict-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unknown_status_and_changes_not_being_saved" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unknown_status_and_changes_not_being_saved">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.5</span>
					<span>Unknown status and changes not being saved</span>
				</div>
			</a>
			
			<ul id="toc-Unknown_status_and_changes_not_being_saved-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Slow_loading_times" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Slow_loading_times">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.6</span>
					<span>Slow loading times</span>
				</div>
			</a>
			
			<ul id="toc-Slow_loading_times-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Prevent_DNS_resolution_issues_for_other_virtual_hosts" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Prevent_DNS_resolution_issues_for_other_virtual_hosts">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.7</span>
					<span>Prevent DNS resolution issues for other virtual hosts</span>
				</div>
			</a>
			
			<ul id="toc-Prevent_DNS_resolution_issues_for_other_virtual_hosts-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Interface_not_up_when_pihole_starts" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Interface_not_up_when_pihole_starts">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.8</span>
					<span>Interface not up when pihole starts</span>
				</div>
			</a>
			
			<ul id="toc-Interface_not_up_when_pihole_starts-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DNS_cache_evictions_greater_than_zero" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#DNS_cache_evictions_greater_than_zero">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.9</span>
					<span>DNS cache evictions greater than zero</span>
				</div>
			</a>
			
			<ul id="toc-DNS_cache_evictions_greater_than_zero-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Missing_web_GUI_after_upgrade_to_version_6" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Missing_web_GUI_after_upgrade_to_version_6">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.10</span>
					<span>Missing web GUI after upgrade to version 6</span>
				</div>
			</a>
			
			<ul id="toc-Missing_web_GUI_after_upgrade_to_version_6-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Pi-hole</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a></li>
<li><a href="../en/Domain_name_resolution.html" title="Domain name resolution">Domain name resolution</a></li>
<li><a href="../en/Linux_Containers.html" title="Linux Containers">Linux Containers</a></li>
<li><a href="../en/OpenVPN.html" title="OpenVPN">OpenVPN</a></li>
<li><a href="../en/WireGuard.html" title="WireGuard">WireGuard</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://pi-hole.net/">Pi-hole</a> project is a <a href="https://en.wikipedia.org/wiki/DNS_sinkhole" class="extiw" title="wikipedia:DNS sinkhole">DNS sinkhole</a> that compiles a blocklist of domains from multiple third-party sources. Pi-hole uses <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pi-hole-ftl/">pi-hole-ftl</a></span><sup><small>AUR</small></sup> (a <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a> fork) to seamlessly drop any and all requests for domains in its blocklist. Running it effectively deploys network-wide ad-blocking without the need to configure individual clients. The package comes with an optional web administration interface.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Pi-hole on Arch Linux is not officially supported by the Pi-hole project.</div>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Installation">Installation</h2></div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pi-hole-core/">pi-hole-core</a></span><sup><small>AUR</small></sup> package.
</p>
<div class="mw-heading mw-heading2"><h2 id="Configuration">Configuration</h2></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> Many of the following sections still refer to Pi-hole 5, so are not directly applicable to Pi-hole 6, where many things changed, including an integrated webserver and the move to the .toml config file (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Pi-hole.html">Talk:Pi-hole</a>)</div>
</div>
<p><br>
</p>
<div class="mw-heading mw-heading3"><h3 id="FTL_(Faster_Than_Light)">
<span id="FTL_.28Faster_Than_Light.29"></span>FTL (Faster Than Light)</h3></div>
<p>Pi-hole's FTL is a DNS resolver/forwarder and a database-like wrapper/API that provides long-term storage of requests which users can query through the "long-term data" section of the WebGUI. Data are collected and stored in two places:
</p>
<ol>
<li>Daily data are stored in RAM and are captured in real-time within <code>/run/log/pihole/pihole.log</code>
</li>
<li>Historical data (several days/weeks/months) are stored on the file system <code>/etc/pihole/pihole-FTL.db</code> and written out at a user-specified interval.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> 
<ul>
<li>To disable logging, see <a href="#Disable_query_logging">#Disable query logging</a>.</li>
<li>Starting <code>pihole-FTL.service</code> is likely to fail. See <a href="#Failed_to_start_Pi-hole_FTLDNS_engine">#Failed to start Pi-hole FTLDNS engine</a>.</li>
</ul>
</div>
<p><code>pihole-FTL.service</code> is statically enabled; re/start it. For FTL configuration, see <a rel="nofollow" class="external text" href="https://docs.pi-hole.net/ftldns/configfile/">upstream documentation</a>.
</p>
<div class="mw-heading mw-heading4"><h4 id="FTL_Integrated_Web_interface">FTL Integrated Web interface</h4></div>
<p>Pi-hole has a powerful, user-friendly, but completely optional web interface. As well as changing settings, the user can analyse and visualise DNS queries handled by Pi-hole.
</p>
<div class="mw-heading mw-heading3"><h3 id="Update_hosts_file">Update hosts file</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> At least partially duplicates <a href="../en/Network_configuration.html#localhost_is_resolved_over_the_network" title="Network configuration">Network configuration#localhost is resolved over the network</a>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Pi-hole.html">Talk:Pi-hole</a>)</div>
</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=filesystem">filesystem</a></span> ships with an empty <code>/etc/hosts</code> file which is known to prevent Pi-hole from fetching block lists.  One must append the following to this file to ensure correct operation, noting that <i>ip.address.of.pihole</i> should be the actual IP address of the machine running Pi-hole (e.g. 192.168.1.250) and <i>myhostname</i> should be the actual hostname of the machine running Pi-hole:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/hosts</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">127.0.0.1              localhost
ip.address.of.pihole   pi.hole myhostname
</pre>
<p>For more, see <a rel="nofollow" class="external text" href="https://github.com/pi-hole/pi-hole/issues/1800">Issue#1800</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Making_devices_use_Pi-hole">Making devices use Pi-hole</h3></div>
<p>To use Pi-hole, devices within the network should use Pi-hole's IP address as their sole DNS server. To accomplish this, there are generally two methods:
</p>
<ol>
<li>In the router's LAN DHCP settings, set Pi-hole's IP address as the only DNS server available for connected devices.</li>
<li>Manually configure each device to use Pi-hole's IP address as their only DNS server.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Some routers (or even ISPs) do not allow modifications to LAN DNS settings, so disabling the router's DHCP server and using <a rel="nofollow" class="external text" href="https://discourse.pi-hole.net/t/how-do-i-use-pi-holes-built-in-dhcp-server-and-why-would-i-want-to">Pi-hole's built-in DHCP server</a> might be a solution.</div>
<p>More information about making other devices use Pi-hole can be found at <a rel="nofollow" class="external text" href="https://discourse.pi-hole.net/t/how-do-i-configure-my-devices-to-use-pi-hole-as-their-dns-server/245">upstream documentation</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> The Pi-hole hosting device can also make use of Pi-hole. Just change DNS settings to only IP address <code>127.0.0.1</code>.</div>
<div class="mw-heading mw-heading3"><h3 id="Usage">Usage</h3></div>
<p>Change the computer's network settings so the only DNS server in use is <code>127.0.0.1</code>.
</p>
<p>If using DHCP to lease IP addresses from an external router, append <code>bind-interfaces</code> to <code>/etc/dnsmasq.conf</code> for DNS queries to resolve.
</p>
<p>Test DNS queries independently of network-configured nameserver in <code>/etc/resolv.conf</code> using the <code>drill</code> command of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ldns">ldns</a></span> package with <code>drill @127.0.0.1 archlinux.org</code> .
</p>
<div class="mw-heading mw-heading2"><h2 id="Usage_2">Usage</h2></div>
<p>Both standalone and server versions can be controlled via CLI, but only server version can be controlled via web interface.
</p>
<div class="mw-heading mw-heading3"><h3 id="Using_web_interface">Using web interface</h3></div>
<p>Go to <a rel="nofollow" class="external text" href="http://pi.hole/admin/">pi.hole</a> or <code>&lt;Pi-hole IP address&gt;/admin/</code> to access web interface.
</p>
<div class="mw-heading mw-heading3"><h3 id="Using_CLI">Using CLI</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Pi-hole_DNS_management">Pi-hole DNS management</h4></div>
<p>By default Pi-hole uses the Google DNS server. Change which DNS servers Pi-hole uses with:
</p>
<pre># pihole-FTL --config dns.upstreams '["<i>ipaddress#port</i>"]'
</pre>
<p>Specify multiple DNS servers by separating their addresses with commas.
</p>
<div class="mw-heading mw-heading4"><h4 id="Forced_update_of_ad-serving_domains_list">Forced update of ad-serving domains list</h4></div>
<p>To update the blocked domain list, execute:
</p>
<pre>$ pihole -g
</pre>
<div class="mw-heading mw-heading4"><h4 id="Temporarily_disable_Pi-hole">Temporarily disable Pi-hole</h4></div>
<p>Pi-hole can be paused via CLI by executing:
</p>
<pre>$ pihole disable <i>time</i>
</pre>
<p>Leaving the value for <code><i>time</i></code> blank, the disabling will be permanent until later manual reenabling.
<code><i>time</i></code> can be expressed in seconds or minutes with syntax <code>#s</code> and <code>#m</code>. For example, to disable Pi-hole for 5 minutes:
</p>
<pre>$ pihole disable 5m
</pre>
<p>At any time, reenable Pi-hole by executing:
</p>
<pre>$ pihole enable
</pre>
<div class="mw-heading mw-heading2"><h2 id="Tips_and_tricks">Tips and tricks</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Password-protected_web_interface">Password-protected web interface</h3></div>
<p>To password-protect the Pi-hole web interface, run the following command and enter the password:
</p>
<pre># pihole setpassword
</pre>
<p>To disable the password protection, set a blank password.
</p>
<div class="mw-heading mw-heading3"><h3 id="Cloudflare_DoH">Cloudflare DoH</h3></div>
<p>Pi-hole can be configured to use <a href="../en/Cloudflared.html" title="Cloudflared">Cloudflared</a> to achieve <a href="../en/DNS_over_HTTPS.html" class="mw-redirect" title="DNS over HTTPS">DNS over HTTPS</a> functionality.
</p>
<p>To make <a href="../en/Cloudflared.html" title="Cloudflared">Cloudflared</a> work with Pi-hole, simply start cloudflared and configure Pi-hole to use it as its DNS entry.
</p>
<p>Using the <a href="../en/Cloudflared.html#Usage" title="Cloudflared">suggested service file for cloudflared</a>, that would be:
</p>
<pre># systemctl start cloudflared
# pihole-FTL --config dns.upstreams '["127.0.0.1#54"]'
</pre>
<p>Test that Pi-hole is working with:
</p>
<pre>$ drill archlinux.org @127.0.0.1 -p 53
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> The port is the one bound to Pi-hole, not the one bound to cloudflared.</div>
<div class="mw-heading mw-heading3"><h3 id="Optimise_for_solid_state_drives">Optimise for solid state drives</h3></div>
<p>If Pi-hole is running on a <a href="../en/Solid_state_drive.html" title="Solid state drive">solid state drive</a> (SD card, SSD, etc.), it is recommended to change the <code>DBinterval</code> value to at least one hour to minimize writes to the database:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pihole/pihole.toml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

[database]

  ...

  # How often do we store queries in FTL's database [seconds]?
  DBinterval = 3600
  
  ...
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/log2ram/">log2ram</a></span><sup><small>AUR</small></sup> may also be useful on a <a href="https://en.wikipedia.org/wiki/RaspberryPi" class="extiw" title="wikipedia:RaspberryPi">RaspberryPi</a>.</div>
<div class="mw-heading mw-heading3"><h3 id="Disable_query_logging">Disable query logging</h3></div>
<p>Both daily and historic data collected by default contain query data that might be considered sensitive.
</p>
<p>To disable the query database for historic data, set the privacy level to <i>Anonymous mode</i> in the web administration (<i>Settings &gt; Privacy</i>) or edit the <code>privacylevel</code> value in the configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pihole/pihole.toml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

[misc]
  
  ...
  
  privacylevel = 3
  
  ...</pre>
<p>To also disable the logging for daily data, use the following command:
</p>
<pre># pihole logging off
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> Pi-hole will erase all statistics upon executing this command.</div>
<div class="mw-heading mw-heading3"><h3 id="Use_with_VPN_server">Use with VPN server</h3></div>
<p>Pi-hole can be used by connected VPN clients.
</p>
<div class="mw-heading mw-heading4"><h4 id="OpenVPN">OpenVPN</h4></div>
<p>An <a href="../en/OpenVPN.html" title="OpenVPN">OpenVPN</a> server can be configured to advertise a Pi-hole instance to its clients. Add the following two lines to <code>/etc/openvpn/server/server.conf</code>:
</p>
<pre>push "redirect-gateway def1 bypass-dhcp"
push "dhcp-option DNS <i>Pi-hole-IP</i>"
</pre>
<p>If it still does not work, try creating a file <code>/etc/dnsmasq.d/00-openvpn.conf</code> with the following content:
</p>
<pre>interface=tun0
</pre>
<p>It may be necessary to make <code>dnsmasq</code> listen on <code>tun0</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="WireGuard">WireGuard</h4></div>
<p><a href="../en/WireGuard.html" title="WireGuard">WireGuard</a> clients can be configured to use the Pi-hole DNS server. In the client configuration file, specify the following line:
</p>
<pre>DNS = <i>Pi-hole-IP</i>
</pre>
<p>In order for the DNS to be functional from the VPN, Pi-hole has to listen to all local interfaces:
</p>
<pre># pihole-FTL --config dns.listeningMode LOCAL
</pre>
<p>See more information in <a href="../en/WireGuard.html#Client_configuration" title="WireGuard">WireGuard#Client configuration</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Additional_blocklists">Additional blocklists</h3></div>
<p>Pi-hole was intended to block ads, but it can also be used to block other unwanted content:
</p>
<ol>
<li>Tracking domains</li>
<li>Malware domains</li>
<li>Piracy sites</li>
<li>Fake news sites</li>
<li>Phishing sites</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Pi-hole blocklists must contain <b>domains</b>. Some blocklists might contain IP addresses of <code>127.0.0.1</code> and domain combination — this format is accepted by Pi-hole.</div>
<p>There are many sources providing these blocklists. Some examples: <a rel="nofollow" class="external text" href="https://firebog.net/">firebog.net</a> and <a rel="nofollow" class="external text" href="https://oisd.nl/">oisd.nl</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Block/Allow_domains_using_regex">
<span id="Block.2FAllow_domains_using_regex"></span>Block/Allow domains using regex</h3></div>
<p>To add a wildcard domain to the denylist, use the following <a rel="nofollow" class="external text" href="https://docs.pi-hole.net/main/pihole-command/#allowlisting-denylisting-and-regex">pihole</a> command:
</p>
<pre>$ pihole --wild yourdomain.com
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> It will be added as <code>(\.|^)yourdomain\.com$</code> entry in the domains list.</div>
<p>To block a domain with a custom regex:
</p>
<pre>$ pihole --regex '^example\.com$'
</pre>
<p>To remove the same domain from the denylist, just add <code>-d</code> flag to the <i>pihole</i> command:
</p>
<pre>$ pihole --wild -d yourdomain.com
$ pihole --regex -d '^example\.com$'
</pre>
<p>See also <a rel="nofollow" class="external text" href="https://docs.pi-hole.net/regex/tutorial/">regex tutorial</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Use_Unbound_as_upstream_DNS_server">Use Unbound as upstream DNS server</h3></div>
<p>By default, Pi-hole forwards requests to upstream DNS servers, which might lead to privacy concerns.
See <a rel="nofollow" class="external text" href="https://docs.pi-hole.net/guides/dns/unbound/">upstream documentation</a> for a guide on setting up <a href="../en/Unbound.html" title="Unbound">Unbound</a> locally to resolve DNS requests.
</p>
<div class="mw-heading mw-heading2"><h2 id="Troubleshooting">Troubleshooting</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Odd_behavior_in_the_web_interface_after_an_upgrade">Odd behavior in the web interface after an upgrade</h3></div>
<p>Some strange/unexplained rendering issues in the web GUI can often be fixed by clearing one's browser cache.
</p>
<div class="mw-heading mw-heading3"><h3 id="Data_loss_on_reboot">Data loss on reboot</h3></div>
<p>Systems without a <a href="../en/System_time.html#Hardware_clock" class="mw-redirect" title="RTC">RTC</a> such as some ARM devices will likely experience loss of data in the query log upon rebooting.  When systems lacking a <a href="../en/System_time.html#Hardware_clock" class="mw-redirect" title="RTC">RTC</a> boot, the time is set <i>after</i> the network and resolver come up.  Aspects of Pi-hole can get started before this happens leading to the data loss.  An incorrectly set <a href="../en/System_time.html#Hardware_clock" class="mw-redirect" title="RTC">RTC</a> can also cause problems.  See: <a href="../en/Installation_guide.html#Time" title="Installation guide">Installation guide#Time</a> and <a href="../en/System_time.html" title="System time">System time</a>.
</p>
<p>For devices lacking a <a href="../en/System_time.html#Hardware_clock" class="mw-redirect" title="RTC">RTC</a>:
A hacky work-around for this is to use <a href="../en/Drop-in_file.html" class="mw-redirect" title="Drop-in file">drop-in files</a> against <code>pihole-FTL.service</code> wherein a delay is built in calling <code>/usr/bin/sleep x</code> in a <code>ExecStartPre</code> statement.  Note that the value of "x" in the sleep time depends on how long the specific hardware takes to establish the time sync.
</p>
<p><a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/11008">Issue#11008</a> against systemd-timesyncd is currently preventing the use of the <i>time-sync.target</i> to automate this.
</p>
<div class="mw-heading mw-heading3"><h3 id="Failed_to_start_Pi-hole_FTLDNS_engine">Failed to start Pi-hole FTLDNS engine</h3></div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> Check which process opened port 53 with: <code>lsof -i :53</code> as root.</div>
<p>It is possible that <code>systemd-resolved.service</code> is already using port 53, which is required for <code>pihole-FTL.service</code>.
To resolve this, disable the stub listener by creating a <a href="../en/Drop-in_snippet.html" class="mw-redirect" title="Drop-in snippet">drop-in snippet</a> for <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>'s configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/resolved.conf.d/pi-hole.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Resolve]
DNSStubListener=no</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>systemd-resolved.service</code> and <code>pihole-FTL.service</code>.
</p>
<p>For more information, see <span class="plainlinks archwiki-template-man" title="$ man 5 resolved.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/resolved.conf.5">resolved.conf(5)</a></span>.
</p>
<p>Alternatively, tell dnsmasq to bind to each interface explicitly, instead of the wildcard <code>0.0.0.0:53</code>, by uncommenting the line <code>bind-interfaces</code> in <code>/etc/dnsmasq.conf</code>. This will avoid conflicting with <code>systemd-resolved</code>, which listens on <code>127.0.0.53:53</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="DNSMasq_package_conflict">DNSMasq package conflict</h3></div>
<p>Since Pi-hole-FTL 4.0, a private fork of dnsmasq is integrated in the FTL sub-project. The original <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> package is now conflicting with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pi-hole-ftl/">pi-hole-ftl</a></span><sup><small>AUR</small></sup> and will be uninstalled when upgrading from a previous version. It is still possible to use the previous dnsmasq configuration files, just ensure that <code>conf-dir=/etc/dnsmasq.d/,*.conf</code> in the original <code>/etc/dnsmasq.conf</code> is not commented out.
</p>
<div class="mw-heading mw-heading3"><h3 id="Unknown_status_and_changes_not_being_saved">Unknown status and changes not being saved</h3></div>
<p>The issue, as seen in <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/63704">FS#63704</a>, is with systemd-sysusers created user <code>http</code>, which is created in expired state. To fix it, run:
</p>
<pre># chage --expiredate -1 http
</pre>
<div class="mw-heading mw-heading3"><h3 id="Slow_loading_times">Slow loading times</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> This issue seems to pertain to DNS configuration. It might not be a good idea to instruct direct changes to <code>/etc/resolv.conf</code>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Pi-hole.html">Talk:Pi-hole</a>)</div>
</div>
<p>If browsers report "Resolving host" or it just takes longer to load pages than usual, ensure that <code>/etc/resolv.conf</code> looks <b>exactly</b> like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/resolv.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">nameserver 127.0.0.1
</pre>
<p>If it takes very long to load pages, it can be a problem with <code>lsof</code> call in pihole script <code>(/usr/bin/pihole)</code> called through php.  Verify it while loading page with: <code>ps -ef | grep lsof</code>. Kill it and if the page is displayed, replace <code>lsof</code> call in pihole script (there is only one) with:
</p>
<pre>ss -lnp '( sport = 53 )'</pre>
<div class="mw-heading mw-heading3"><h3 id="Prevent_DNS_resolution_issues_for_other_virtual_hosts">Prevent DNS resolution issues for other virtual hosts</h3></div>
<p>By default, the DNS service (pihole-FTL) will be bind to the <code>0.0.0.0</code> IP address:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># netstat -ltnp | grep 53</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">tcp        0      0 0.0.0.0:53              0.0.0.0:*               LISTEN      2196/pihole-FTL
tcp6       0      0 :::53                   :::*                    LISTEN      2196/pihole-FTL
</pre>
<p>This will prevent any other virtual host onto the same machine hosting the pihole instance (such as docker containers) to get DNS resolution.<a rel="nofollow" class="external autonumber" href="https://discourse.pi-hole.net/t/make-pihole-ftl-bind-only-on-certain-ips-v4-0/11883">[1]</a><a rel="nofollow" class="external autonumber" href="https://discourse.pi-hole.net/t/solve-dns-resolution-in-other-containers-when-using-docker-pihole/31413">[2]</a>
</p>
<p>In order to solve this, you need to create a config file in <code>/etc/dnsmasq.d/</code> with the following content (where <code>X.X.X.X</code> is the IP address of your Pi-hole) :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dnsmasq.d/99-dns-bind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">listen-address=<i>X.X.X.X</i>
bind-interfaces</pre>
<p>Then, you need to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>pihole-FTL.service</code> to apply changes. 
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> To complete this configuration, you may need to activate the online waiting service of your network manager.</div>
<div class="mw-heading mw-heading3"><h3 id="Interface_not_up_when_pihole_starts">Interface not up when pihole starts</h3></div>
<p>If after booting domain name resolution does not work, and the <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journal">journal</a> shows an error message like:
</p>
<pre>pihole-FTL [...] FATAL ERROR in dnsmasq core: unknown interface wlo1
</pre>
<p>Then it might be that the interface name is wrong, or the interface is not up when pihole tries to run.
</p>
<ol>
<li>Check the interface name with <code>ip a</code>. If it is wrong, set <code>PIHOLE_INTERFACE</code> to the correct value in <code>/etc/pihole/setupVars.conf</code>
</li>
<li>If the interface is right, it may not be up when pihole is started (even if the systemd service depends on <code>After=network-online.target</code>). Set <code>DELAY_STARTUP</code> in <code>/etc/pihole/pihole-FTL.conf</code> to a value greater than 0 (expressed in seconds).</li>
</ol>
<p>Reboot to verify the issue is fixed.
</p>
<p><a rel="nofollow" class="external text" href="https://discourse.pi-hole.net/t/strange-error-and-ftl-not-working-on-every-reboot/46391">Reference</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="DNS_cache_evictions_greater_than_zero">DNS cache evictions greater than zero</h3></div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> Setting the cache size to zero disables caching.</div>
<p>The cache size should be increased when this number is larger than zero. You can set the cache limit at <code>/etc/dnsmasq.conf</code> by uncommenting or adding the following setting with your desired number.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dnsmasq.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">cache-size=12345</pre>
<p>After changes have been performed, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>pihole-FTL.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> There is no benefit in increasing this number unless the number of DNS cache evictions is greater than zero.
<p>A larger cache will consume more memory on your node, leaving less memory available for other caches of your Pi-hole. If you push this number to the extremes, it may even be that your Pi-hole gets short on memory and does not operate as expected.
</p>
You can not reduce the cache size below 150 when DNSSEC is enabled because the DNSSEC validation process uses the cache.</div>
<p><a rel="nofollow" class="external text" href="https://docs.pi-hole.net/ftldns/dns-cache/">Reference</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Missing_web_GUI_after_upgrade_to_version_6">Missing web GUI after upgrade to version 6</h3></div>
<p>After upgrading from version 5 to 6, you may encounter error <b>404 Site not found</b> when accessing the web GUI. Nevertheless, the web GUI is likely still reachable at port <code>8080</code>.
</p>
<p>Reason: Pi-hole now includes its own web server.
</p>
<p>The previous lighttpd server was probably running on port <code>80</code> during the upgrade, thus setting <code>8080</code> as the default listening port. Also, if another web server was listening on port <code>8080</code> during the upgrade, the Pi-hole web GUI would be unavailable completely. See <a rel="nofollow" class="external autonumber" href="https://docs.pi-hole.net/main/prerequisites/?h=webserver#ports">[3]</a>.
</p>
<p>After resolving the interfering web server, you can reset the web GUI's listening port to <code>80</code> by editing the <code>port</code> key in <code>[webserver]</code> section of <code>/etc/pihole/pihole.toml</code>, or through the new web GUI at <i>Settings &gt; System &gt; turn on Expert mode in the upper right corner &gt; All settings &gt; Webserver and API &gt; webserver.port</i>.
</p>
<div class="mw-heading mw-heading2"><h2 id="See_also">See also</h2></div>
<ul>
<li><a rel="nofollow" class="external text" href="https://pi-hole.net/">Pi-hole homepage</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/pi-hole/pi-hole">Pi-hole GitHub page</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/pi-hole/FTL">Pi-hole FTL GitHub page</a></li>
<li><a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/304050/how-to-avoid-conflicts-between-dnsmasq-and-systemd-resolved">Stopping systemd-resolved stub server opening port 53</a></li>
<li><a rel="nofollow" class="external text" href="https://www.reddit.com/r/pihole/comments/d9j1z6/unbound_as_recursive_dns_server_slow_performance/f1jnuq1/">Unbound performance issue</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Domain_Name_System.html" title="Category:Domain Name System">Domain Name System</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pi-hole&amp;oldid=844678">https://wiki.archlinux.org/index.php?title=Pi-hole&amp;oldid=844678</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 19 August 2025, at 07:40.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Pi-hole</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
