<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>X11vnc - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-X11vnc rootpage-X11vnc skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Usage</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Setting_a_password" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_a_password">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Setting a password</div>
			</a>
			
			<ul id="toc-Setting_a_password-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Port_setting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Port_setting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Port setting</div>
			</a>
			
			<ul id="toc-Port_setting-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Passing_X_authority_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Passing_X_authority_file">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Passing X authority file</div>
			</a>
			
			<ul id="toc-Passing_X_authority_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Running_from_xinetd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Running_from_xinetd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Running from xinetd</div>
			</a>
			
			<ul id="toc-Running_from_xinetd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-As_a_systemd_service" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#As_a_systemd_service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.5</span>As a systemd service</div>
			</a>
			
			<ul id="toc-As_a_systemd_service-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Starting_with_display_managers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Starting_with_display_managers">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6</span>Starting with display managers</div>
			</a>
			
			<ul id="toc-Starting_with_display_managers-sublist" class="vector-toc-list">
				<li id="toc-Automatic_discovery_of_display_manager's_X_authority_file" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Automatic_discovery_of_display_manager's_X_authority_file">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.1</span>Automatic discovery of display manager's X authority file</div>
			</a>
			
			<ul id="toc-Automatic_discovery_of_display_manager's_X_authority_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GDM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GDM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.2</span>GDM</div>
			</a>
			
			<ul id="toc-GDM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-LightDM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#LightDM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.3</span>LightDM</div>
			</a>
			
			<ul id="toc-LightDM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-LXDM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#LXDM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.4</span>LXDM</div>
			</a>
			
			<ul id="toc-LXDM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SDDM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#SDDM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.5</span>SDDM</div>
			</a>
			
			<ul id="toc-SDDM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SLIM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#SLIM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.6</span>SLIM</div>
			</a>
			
			<ul id="toc-SLIM-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Persistent_x11vnc_server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Persistent_x11vnc_server">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.7</span>Persistent x11vnc server</div>
			</a>
			
			<ul id="toc-Persistent_x11vnc_server-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-View-only_connection" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#View-only_connection">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.8</span>View-only connection</div>
			</a>
			
			<ul id="toc-View-only_connection-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Multicat_DNS_broadcasting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Multicat_DNS_broadcasting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.9</span>Multicat DNS broadcasting</div>
			</a>
			
			<ul id="toc-Multicat_DNS_broadcasting-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sharing_standalone_X_windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sharing_standalone_X_windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.10</span>Sharing standalone X windows</div>
			</a>
			
			<ul id="toc-Sharing_standalone_X_windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Accessing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Accessing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.11</span>Accessing</div>
			</a>
			
			<ul id="toc-Accessing-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-SSH_tunnel" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#SSH_tunnel">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>SSH tunnel</div>
		</a>
		
		<ul id="toc-SSH_tunnel-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Screensaver_problem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screensaver_problem">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Screensaver problem</div>
			</a>
			
			<ul id="toc-Screensaver_problem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-IPv6_port_different_from_IPv4_port" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#IPv6_port_different_from_IPv4_port">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>IPv6 port different from IPv4 port</div>
			</a>
			
			<ul id="toc-IPv6_port_different_from_IPv4_port-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Copying_and_Pasting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Copying_and_Pasting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Copying and Pasting</div>
			</a>
			
			<ul id="toc-Copying_and_Pasting-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Session_closes_unexpectedly" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Session_closes_unexpectedly">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Session closes unexpectedly</div>
			</a>
			
			<ul id="toc-Session_closes_unexpectedly-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id='toc-Run_x11vnc_"system-wide"_in_(GDM_and_GNOME_Shell)' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Run_x11vnc_"system-wide"_in_(GDM_and_GNOME_Shell)'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Run x11vnc "system-wide" in (GDM and GNOME Shell)</div>
			</a>
			
			<ul id='toc-Run_x11vnc_"system-wide"_in_(GDM_and_GNOME_Shell)-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Run_x11vnc_"system-wide"_in_(SDDM_and_Plasma)' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Run_x11vnc_"system-wide"_in_(SDDM_and_Plasma)'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Run x11vnc "system-wide" in (SDDM and Plasma)</div>
			</a>
			
			<ul id='toc-Run_x11vnc_"system-wide"_in_(SDDM_and_Plasma)-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Change_x11vnc_password_in_each_boot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Change_x11vnc_password_in_each_boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Change x11vnc password in each boot</div>
			</a>
			
			<ul id="toc-Change_x11vnc_password_in_each_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">X11vnc</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/X11vnc" title="X11vnc – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/TigerVNC.html" title="TigerVNC">TigerVNC</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/x11vnc" class="extiw" title="wikipedia:x11vnc">x11vnc</a> is a VNC server, it allows remote access, view and control of real X displays (i.e. a display corresponding to a physical monitor, keyboard, and mouse) with any VNC viewer. While it is not developed any longer by its original author Karl Runge, <a rel="nofollow" class="external text" href="https://libvnc.github.io/">LibVNC</a> and x11vnc's <a rel="nofollow" class="external text" href="https://github.com/LibVNC/x11vnc">community</a> on GitHub have taken over the development.
</p>
<p><i>x11vnc</i>, unlike <i>xvnc</i> of <a href="../en/TigerVNC.html" title="TigerVNC">TigerVNC</a>, by default, connects to an existing X display. However, one can use <code>-create</code> option to launch and connect to a new headless (virtual) X server.
</p>
<p>Also note that x11vnc is not shipped with a VNC client (VNC viewer). Any <a href="../en/List_of_applications/Internet.html#Remote_desktop" title="List of applications/Internet">VNC viewer</a> should do the job and be compatible with the x11vnc server while not necessarily using all its functionalities. TigerVNC's <i>vncviewer</i> is a recommended client.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=x11vnc">x11vnc</a></span> package.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>First, start an X display, either by <a href="../en/Xinit.html" class="mw-redirect" title="Startx">startx</a> or through a <a href="../en/Display_manager.html" title="Display manager">display manager</a>. You can also use a <a href="../en/Xorg.html#Monitor_settings" class="mw-redirect" title="Headless With X">headless X display</a> too.
</p>
<p>Then, run the following command, all available options are explained in <span class="plainlinks archwiki-template-man" title="$ man 1 x11vnc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/x11vnc.1">x11vnc(1)</a></span>.
</p>
<pre>$ x11vnc
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This will set up the VNC server with no authentication password. This means that anybody who has access to the computer's network can see and contorl your X session. You can simply set a password, as <a href="#Setting_a_password">described below</a>.</div>
<p>By default, x11vnc tries to connect to the X display provided by <code>-display</code> option, or environment's <code>DISPLAY</code> variable's value otherwise, or to the <i>:0</i> display if neither of the earlier are provided.
</p>
<pre>$ x11vnc -display :1
</pre>
<p>Another option is to place the x11vnc command line in a script which is called at login, for example:
</p>
<pre>x11vnc -wait 50 -noxdamage -passwd PASSWORD -display :0 -forever -o /var/log/x11vnc.log -bg
</pre>
<p><code>-wait</code> option sets the time in milliseconds to pause between each poll from the X server's frame buffer.
</p>
<p><code>-noxdamage</code> option disables X Damage extension. See <a href="#Session_closes_unexpectedly">#Session closes unexpectedly</a>.
</p>
<p><code>-forever</code> option keeps x11vnc server up, listening for further client connection, even after the first client disconnected. See <a href="#Persistent_x11vnc_server">#Persistent x11vnc server</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The password "PASSWORD" above is not secured; anyone who can run <code>ps</code> on the machine will see it. Also note that <code>/var/log/x11vnc.log</code> needs to be created manually and its ownership needs to match that of the user who will run it.</div>
<h3><span class="mw-headline" id="Setting_a_password">Setting a password</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The password will only encrypt the login process itself. The transmission is still unencrypted<a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20091228031116/https://security.web.cern.ch/security/ssh/encrypt_vnc.htm">[1]</a>. You can use x11vnc's internal SSL or use SSH to tunnel your traffic.</div>
<p><i>x11vnc</i> provides many options to set and manage authentication passwords; a few of them are described in this section. Read <span class="plainlinks archwiki-template-man" title="$ man 1 x11vnc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/x11vnc.1">x11vnc(1)</a></span> manpage to find and read about all of them.
</p>
<p><code>-usepw</code> option is used as the general purpose password flag:
</p>
<pre>$ x11vnc -usepw
</pre>
<p>It uses the password found in <code>~/.vnc/passwd</code>, where the password is obscured with a fixed key in a VNC compatible format, otherwise passwords found in <code>~/.vnc/passwdfile</code>. If none of these files can be located, it prompts the user for a password, which is saved in <code>~/.vnc/passwd</code> and is used right away.
</p>
<p>The VNC viewer should then prompt for a password when connecting.
</p>
<p><code>-showrfbauth</code>, <code>-rfbauth</code> and <code>-storepasswd</code> options allow one to see, use or set the RFB's authentication password, respectively.
</p>
<p><code>-passwdfile</code> option can be used to provide a LibVNCServer password file which allows one to set multiple passwords and also passwords for view only connections.
</p>
<h3><span class="mw-headline" id="Port_setting">Port setting</span></h3>
<p>By default, x11vnc searches for the first free port from 5900 and use it for both IPv4 and IPv6 VNC connections, despite what is the X display number it's connected to.
</p>
<p><code>-N</code> argument, sets port 5900 plus the number of display. For example:
</p>
<pre>$ x11vnc -display :3 -N
</pre>
<p>That will result to using port number 5903 for this VNC server.
</p>
<p><code>-autoport <i>n</i></code> argument, sets port to the first free port from number <i>n</i>.
</p>
<p><code>-rfbport <i>n</i></code> argument can be used to set the VNC port explicitly to <i>n</i>.
</p>
<p>In all three cases above, an additional port with the same number will be used for IPv6 connections; aside a 5900 IPv6 port, which also will be used if free. So you will end up with three open ports for that x11vnc server, one for IPv4 and two for IPv6. For example:
</p>
<pre>$ x11vnc -display :2 -rfbport 5905
</pre>
<p>That will connect to X server of display number 2 and listen to IPv4 port 5905 and IPv6 ports 5905 and 5900 for VNC client connections.
</p>
<p>For setting IPv6 port directly, use <code>-rfbportv6 <i>n</i></code> option.
</p>
<h3><span class="mw-headline" id="Passing_X_authority_file">Passing X authority file</span></h3>
<p>For a x11vnc server to connect to an X display server, it needs to access the display’s X authority file, authorising itself.
</p>
<p>To pass on the target display’s X authority file to the x11vnc server, you can set <code>XAUTHORITY</code> environment variable to the appropriate file path before calling <i>x11vnc</i> command or through <code>-env</code> option:
</p>
<pre>$ x11vnc -display :0 -env XAUTHORITY=/home/<i>user</i>/.Xauthority
</pre>
<p>Where user is the username of the user who is running the X server.
</p>
<p>You also can use the <code>-auth</code> argument following with X authority file address:
</p>
<pre>$ x11vnc -display :0 -auth ~/.Xauthority
</pre>
<p>Alternatively, you can use <code>-auth guess</code> option, which will try to guess the XAUTHORITY filename for the target X display and use it:
</p>
<pre>$ x11vnc -display :1 -auth guess
</pre>
<p>Generally, if the desired X display is not launched by your current user, accessing its X authority file requires running <i>x11vnc</i> as root or as the user who has the permission of reading X authority file of the target X display:
</p>
<pre># x11vnc -display :1 -auth /home/<i>user</i>/.Xauthority
</pre>
<h3><span class="mw-headline" id="Running_from_xinetd">Running from xinetd</span></h3>
<p>X11vnc can be run using a xinetd service, which only starts X11vnc once a user connects.
</p>
<p>Create an xinetd service entry for x11vnc, for example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/xinetd/x11vnc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">service x11vncservice
{
       port            = 5900
       type            = UNLISTED
       socket_type     = stream
       protocol        = tcp
       wait            = no
       user            = root
       server          = /usr/bin/x11vnc
       server_args     = -inetd -o /var/log/x11vnc.log -noxdamage -display :0 -auth guess
       disable         = no
}
</pre>
<p>After reloading <code>xinetd.service</code>, X11vnc will start once a client connects to port 5900.
</p>
<h3><span class="mw-headline" id="As_a_systemd_service">As a systemd service</span></h3>
<p>To run x11vnc when system boots, use a <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in unit file">drop-in unit file</a> for <code>x11vnc.service</code>. The content should be like the following
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/x11vnc.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/bin/x11vnc -many -display :0 -no6 -rfbport 5901 -auth /var/run/lightdm/root/:0

[Install]
WantedBy=graphical.target</pre>
<p>Replace the second ExecStart with the command you run interactively. <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> <code>x11vnc.service</code> if needed.
</p>
<h3><span class="mw-headline" id="Starting_with_display_managers">Starting with display managers</span></h3>
<p>A typical use case is to start x11vnc server for the login session itself before any user has logged into an X session.
Display managers usually put their X authorisation files in directories not accessible by regular users, launching x11vnc with root privileges necessary.
</p>
<h4>
<span id="Automatic_discovery_of_display_manager.27s_X_authority_file"></span><span class="mw-headline" id="Automatic_discovery_of_display_manager's_X_authority_file">Automatic discovery of display manager's X authority file</span>
</h4>
<p><i>x11vnc</i> command tries to find the current display manager's X authority file when it's provided with <code>-auth guess</code> option and environment's <code>FD_XDM</code> variable is bound to <code>1</code>:
</p>
<pre>$ x11vnc -find -env FD_XDM=1 -auth guess
</pre>
<h4><span class="mw-headline" id="GDM">GDM</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Newer GDM packages ship with Xwayland as the default display server backend. The following instructions, however, only apply when using Xorg (else <code>.Xauthority</code> is not created, and <i>x11vnc</i> fails to start). You are therefore advised to uncomment <code>#WaylandEnable=false</code> setting in <code>/etc/gdm/custom.conf</code> in order to proceed.</div> 
<pre># x11vnc -display :0 -auth /var/lib/gdm/:0.Xauth
</pre>
<p>Newer versions of GDM uses /run/user. Example for user 120 (gdm), used for login screen.
</p>
<pre># x11vnc -display :0 -auth /run/user/120/gdm/Xauthority
</pre>
<p>or see <a href="#Troubleshooting">Troubleshooting</a> section below
</p>
<h4><span class="mw-headline" id="LightDM">LightDM</span></h4>
<p>Running in bash:
</p>
<pre># x11vnc -display :0 -auth /var/run/lightdm/root/\:0
</pre>
<h4><span class="mw-headline" id="LXDM">LXDM</span></h4>
<pre># x11vnc -display :0 -auth /var/run/lxdm/lxdm-\:0.auth
</pre>
<h4><span class="mw-headline" id="SDDM">SDDM</span></h4>
<p>SDDM uses an unpredictable UUID for the auth file <a rel="nofollow" class="external autonumber" href="https://github.com/sddm/sddm/issues/622">[2]</a> therefore one needs to:
</p>
<pre># x11vnc -display :0 -auth $(find /var/run/sddm/ -type f)
</pre>
<p>Embedding this into a systemd .service file will require a trick to evaluate the find command as shown here <a rel="nofollow" class="external autonumber" href="https://gist.github.com/nickjacob/9909574">[3]</a>.
</p>
<p>If the above method does not work, an alternative is to start x11vnc when SDDM runs the Xsetup script. To do this, add the following line into <code>/usr/share/sddm/scripts/Xsetup</code>:
</p>
<pre>/usr/bin/x11vnc -auth /var/run/sddm/* -display :0 &gt;/dev/null 2&gt;&amp;1 &amp;
</pre>
<h4><span class="mw-headline" id="SLIM">SLIM</span></h4>
<pre># x11vnc -display :0 -auth /var/run/slim.auth
</pre>
<h3><span class="mw-headline" id="Persistent_x11vnc_server">Persistent x11vnc server</span></h3>
<p>By default, x11vnc terminates upon client's (VNC viewer's) disconnection and/or X server's termination. However, There are a few ways to keep up x11vnc server in such situations.
</p>
<p><code>-many</code> or <code>-forever</code> arguments specify that x11vnc do not terminate after viewer's disconnection and wait for further possible connections, with no timeouts. Next connection requests can be from the same or any other client:
</p>
<pre>$ x11vnc -many
</pre>
<p>However, display's termination by any mean still terminates x11vnc.
</p>
<p><code>-loop</code> flag, creates a loop that tries to start x11vnc server up again after it terminated for any reason. By default, this will keep trying every two seconds indefinitely.
</p>
<pre>$ x11vnc -loop
</pre>
<p>Retry times and frequency can be adjusted as follows:
</p>
<pre>$ x11vnc -loop5000,5
</pre>
<p>This will effectively make the server to restart after its termination for 5 times, each 5 seconds, until it's established; reconnecting to a display server and VNC client.
</p>
<p>One can combine both <code>-loop</code> and <code>-forever</code> flags; making x11vnc server to do not stop by client's disconnection at all, and also restart if the X display is terminated until an X server with the same display number and X authority file is up again.
</p>
<pre>$ x11vnc -display :1 -forever -loop5000
</pre>
<h3><span class="mw-headline" id="View-only_connection">View-only connection</span></h3>
<p>By default, VNC clients can both view and also control X desktops they are connected to. <code>-view-only</code> make current server view-only so that VNC viewers only can watch desktop and not interact with it.
</p>
<h3><span class="mw-headline" id="Multicat_DNS_broadcasting">Multicat DNS broadcasting</span></h3>
<p>Many VNC clients have the ability to discover zeroconf VNC servers advertised on their local networks.
</p>
<p>To advertise a VNC server with zeroconf protocol start it with <code>-avahi</code> or <code>-mdns</code> or <code>-zeroconf</code> options. These three options are aliases. For example:
</p>
<pre>$ x11vnc -display :0 -mdns
</pre>
<p>You also need to have your <a href="../en/Avahi.html" title="Avahi">Avahi</a> or <a href="../en/Avahi.html" class="mw-redirect" title="MDNS">mDNS</a> daemon running, and your port 5353 of UDP open which depends on your firewall configuration.
</p>
<h3><span class="mw-headline" id="Sharing_standalone_X_windows">Sharing standalone X windows</span></h3>
<p>Instead of sharing an entire X display with clients, x11vnc can connect to an X server to only poll a window of that X display. This is specially usefull with <code>-view-only</code> option.
</p>
<p>To do so start x11vnc with <code>id <i>id</i></code> or <code>sid <i>id</i></code> options; where <i>id</i> denotes the ID of an X window which can be acquired using <span class="plainlinks archwiki-template-man" title="$ man 1 xwininfo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xwininfo.1">xwininfo(1)</a></span>. <code>pick</code> parameter can be used instead, which will make x11vnc call <code>xwininfo</code> directely and then extract the ID of the chosen X window, interactively. For example:
</p>
<pre>$ x11vnc -id pick
</pre>
<p><code>-id</code> option will poll an X window directly, which will omit new windows open by that windows; popups menus and transient toplevels may not be seen. In contrast, <code>-sid</code> option will shift a root view to that window, which resolves that problem. 
</p>
<p>Note, closing the X window that x11vnc server is connected to terminates x11vnc.
</p>
<h3><span class="mw-headline" id="Accessing">Accessing</span></h3>
<p>Get a VNC client on another computer, and type in the IP address of the computer running x11vnc. Hit connect, and you should be set.
</p>
<p>If you are attempting to access a VNC server / computer (running x11vnc) from outside of its network then you will need to ensure that it has port 5900 forwarded.
</p>
<h2><span class="mw-headline" id="SSH_tunnel">SSH tunnel</span></h2>
<p>You need to have <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a> installed and configured.
</p>
<p>Use the <code>-localhost</code> flag with x11vnc for it to bind to the local interface. Once that is done, you can use SSH to tunnel the port; then, connect to VNC through SSH.
</p>
<p>Simple example (from <a rel="nofollow" class="external free" href="http://www.karlrunge.com/x11vnc/index.html#tunnelling">http://www.karlrunge.com/x11vnc/index.html#tunnelling</a>):
</p>
<pre>$ ssh -t -L 5900:localhost:5900 remote_host 'x11vnc -localhost -display :0'
</pre>
<p>(You will likely have to provide passwords/passphrases to login from your current location into your remote_host Unix account; we assume you have a login account on remote_host and it is running the SSH server)
</p>
<p>And then in another terminal window on your current machine run the command:
</p>
<pre>$ vncviewer -PreferredEncoding=ZRLE localhost:0
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>1. You can check your ip address and make sure port 5900 is forwarded by visiting <a rel="nofollow" class="external text" href="http://www.realvnc.com/cgi-bin/nettest.cgi">this</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-04-03 ⓘ]</sup> website.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> <span style="color:red;">please use the first argument of the template to provide a brief explanation.</span> (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:X11vnc.html">Talk:X11vnc</a>)</div>
</div>
<p>2. Tested only on <a href="../en/GNOME.html" title="GNOME">GNOME</a> + <a href="../en/GDM.html" title="GDM">GDM</a>
</p>
<p>If you cannot start the tunnel, and get error like XOpenDisplay(":0") failed,
Check if you have a <code>~/.Xauthority</code> directory.
If that does not exist, You can create one easily (Actually a symlink to actual one) by running command given below as normal user NOT ROOT OR USING <a href="../en/Sudo.html" title="Sudo">Sudo</a> as below:
</p>
<pre>$ ln -sv $(dirname $(xauth info | awk '/Authority file/{print $3}')) ~/.Xauthority
</pre>
<p>then try above <a href="#SSH_tunnel">tunneling</a> example and it should work fine.
Further if you want this to be automatically done each time <a href="../en/Xorg.html" title="Xorg">Xorg</a> is restarted, create the <a href="../en/Xprofile.html" title="Xprofile">xprofile</a> file &amp; make is executable as below
</p>
<pre>$ ln -sf $(dirname $(xauth info | awk '/Authority file/{print $3}')) ~/.Xauthority
</pre>
<p>3.<b> GNOME 3</b> and <b>x11vnc</b>
</p>
<p>If you are using GNOME 3 and x11vnc and you get the following errors
</p>
<pre>*** XOpenDisplay failed (:0) 

*** x11vnc was unable to open the X DISPLAY: ":0", it cannot continue.
</pre>
<p>Try running x11vnc like
</p>
<pre>$ x11vnc -noxdamage -many -display :0 -auth /var/run/gdm/$(sudo ls /var/run/gdm | grep $(whoami))/database -forever -bg
</pre>
<p>Please update if this works / not works for any other <a href="../en/Display_manager.html" title="Display manager">display manager</a> or <a href="../en/Desktop_environment.html" title="Desktop environment">desktop environment</a>.
</p>
<h3><span class="mw-headline" id="Screensaver_problem">Screensaver problem</span></h3>
<p>If screensaver starts every 1-2 second, start x11vnc with <code>-nodpms</code> key.
</p>
<h3><span class="mw-headline" id="IPv6_port_different_from_IPv4_port">IPv6 port different from IPv4 port</span></h3>
<p>The default behavior for the command:
</p>
<pre>$ x11vnc -display :0 -rfbport 5908
</pre>
<p>is for the server to listen to TCP port 5908 and TCP6 port 59<b>00</b>.
For the server to listen to the same TCP6 port, also use the <code>-rfbportv6</code> option to force the IPv6 listening port.
For example:
</p>
<pre>$ x11vnc -display :0 -rfbport 5908 -rfbportv6 5908
</pre>
<h3><span class="mw-headline" id="Copying_and_Pasting">Copying and Pasting</span></h3>
<p>If copying and pasting does not work as expected, particularly if pasting to the
remote side is not working or clipboard behaviour is not as expected, try adding
<code>-xkb</code>:
</p>
<pre>$ x11vnc -xkb -display :0
</pre>
<p>Although the documentation does not indicate <code>-xkb</code> specifically for
clipboard problems, it resolved an issue where vim complained that there was
nothing in the <code>*</code> register.
</p>
<h3><span class="mw-headline" id="Session_closes_unexpectedly">Session closes unexpectedly</span></h3>
<p><i>x11vnc</i> enables the X Damage extension by default, which significantly reduces the load when the screen is not changing much and detects changed areas more quickly. This extension is known to cause issues<a rel="nofollow" class="external autonumber" href="https://github.com/LibVNC/x11vnc/issues/154">[4]</a><a rel="nofollow" class="external autonumber" href="https://github.com/LibVNC/x11vnc/issues/147">[5]</a><a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/71685">FS#71685</a><a rel="nofollow" class="external autonumber" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=815909">[6]</a>, and it may cause the session to close unexpectedly with <code>caught XIO error</code> messages appearing at the log. This issue can be circumvented by using the <code>-noxdamage</code> option.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3>
<span id="Run_x11vnc_.22system-wide.22_in_.28GDM_and_GNOME_Shell.29"></span><span class="mw-headline" id='Run_x11vnc_"system-wide"_in_(GDM_and_GNOME_Shell)'>Run x11vnc "system-wide" in (GDM and GNOME Shell)</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> These instructions will only work if you are using GDM and GNOME shell in Xorg.</div> 
<p>Perform the following steps to run <i>x11vnc</i> in GDM to log in and then run <i>x11vnc</i> in a GNOME shell user session for a "system-wide" <i>x11vnc</i>:
</p>
<p>First we need to create a <i>systemd</i> service to launch an <i>x11vnc</i> server in GDM:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/x11vnc-gdm.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=x11vnc server for GDM
After=display-manager.service

[Service]
ExecStart=
ExecStart=/usr/bin/x11vnc -many -shared -display :0 -auth /run/user/120/gdm/Xauthority -noxdamage -rfbauth <i>user_home</i>/.vnc/passwd
Restart=on-failure
RestartSec=3

[Install]
WantedBy=graphical.target</pre>
<p>This will start an <i>x11vnc</i> server protected by the password stored at <code><i>user_home</i>/.vnc/passwd</code> that shows GDM to any connected VNC client, however as you may notice, if you click on any of the users, as soon as you log in, all the VNC clients will show a black screen. To fix this, we need to create another <i>systemd</i> service that will start another <i>x11vnc</i> server in the GNOME Shell session as soon as you log in:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/x11vnc-gnome-shell-YOUR_USER.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=x11vnc server for Gnome shell session of <i>your_user</i>

[Service]
User=YOUR_USER
Type=simple
ExecStartPre=/bin/sh -c 'while ! pgrep -U "<i>your_user</i>" Xorg; do sleep 2; done'
ExecStart=/bin/sh -c 'sudo systemctl stop x11vnc-gdm.service &amp;&amp; /usr/bin/x11vnc -many -shared -display :1 -auth <i>user_home</i>/.Xauthority -rfbauth <i>user_home</i>/.vnc/passwd'
Restart=on-failure
RestartSec=3

[Install]
WantedBy=graphical.target</pre>
<p>Now, you need to keep the following in mind:
</p>
<ol>
<li>As you may notice in the <code>ExecStart</code> part of the <i>systemd</i> service, the command that executes can be separated in two tasks: first it stops <code>x11vnc-gdm.service</code> (killing the GDM <i>x11vnc</i> server) and then it starts the <i>x11vnc</i> server for the user in the GNOME shell session. This is done because if you keep running the GDM <i>x11vnc</i> server in the background, the new <i>x11vnc</i> server for the user will use the next available port, and you would need to change your client connection settings to connect either to the GDM <i>x11vnc</i> server or for your user-specific <i>x11vnc</i> server. A setup like this is useful because the GDM <i>x11vnc</i> server stops as soon as you log in into your account.</li>
<li>You need to create a service like this for each user that you want to have this functionality. (Do not forget to replace <code><i>your_user</i></code> and <code><i>user_home</i></code> with your actual username.)</li>
<li>You may need to change the <code>-display :<i>X</i></code> part of the command to match your system settings. You can view your current display by running <code>echo $DISPLAY</code>. Use the resulting output to match the <i>systemd</i> service.</li>
</ol>
<p>Now, as you might notice, <code>x11vnc-gnome-shell.service</code> is executed as your (probably) unprivileged user. This presents a problem if we want to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">stop</a> the <code>x11vnc-gdm.service</code>, so we need to allow the user to stop the GDM service. This can be accomplished using <a href="../en/Sudo.html" title="Sudo">sudo</a>, but we need to allow the execution of only that specific command without a password.
</p>
<p>Edit the <a href="../en/Sudo.html#Configuration" class="mw-redirect" title="Sudoers">sudoers</a> file to add:
</p>
<pre><i>YOUR_USER</i> ALL=(root) NOPASSWD: /usr/bin/systemctl stop x11vnc-gdm.service
</pre>
<p>Now you simply need to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>x11vnc-gdm.service</code> and <code>x11vnc-gnome-shell-<i>your_user</i>.service</code>. When you restart your computer, both of them will start running and you can connect to your GDM and GNOME Shell using VNC.
</p>
<h3>
<span id="Run_x11vnc_.22system-wide.22_in_.28SDDM_and_Plasma.29"></span><span class="mw-headline" id='Run_x11vnc_"system-wide"_in_(SDDM_and_Plasma)'>Run x11vnc "system-wide" in (SDDM and Plasma)</span>
</h3>
<p>To run <i>x11vnc</i> when the system boots into <a href="../en/SDDM.html" title="SDDM">SDDM</a> (if the aforementioned methods do not work for you), just <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> <code>x11vnc.service</code> as follows:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/x11vnc.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/bin/bash -c "/usr/bin/x11vnc -auth /var/run/sddm/* -display :0 -forever -loop -noxdamage -repeat -rfbauth /home/<i>your_user</i>/.vnc/passwd -shared"
ExecStartPre=/usr/bin/sleep 1</pre>
<p>Remember to change <code><i>your_user</i></code> in the path, or use the preferred auth method. <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Disable">Disable</a> the old <code>x11vnc.service</code> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reload">reload</a> the <i>systemd</i> manager configuration. <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reenable">Reenable</a> the <code>x11vnc.service</code> unit afterwards. You may need to put the service to sleep for a while, otherwise it will not start properly.
</p>
<h3><span class="mw-headline" id="Change_x11vnc_password_in_each_boot">Change x11vnc password in each boot</span></h3>
<p>A setup like this could be useful if you need to share your desktop with several people that you do not trust and if you do not want to manually change the password every time. Such a setup would generate boot-unique passwords, so if you share your password with someone, you only need to reboot your computer (or re-run the <i>systemd</i> service) to change the password.
</p>
<p>The new generated password will be stored as <b>plain text</b> in <code>~/.vnc/autovncpass</code>, so it can be accessed with
</p>
<pre>$ cat /home/$USER/.vnc/autovncpass
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Storing the password as plain text can pose a security threat, so <b>use this at your own risk</b>.</div>
<p>To accomplish this, perform the following steps:
</p>
<p>First install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=expect">expect</a></span> package.
</p>
<p>Then, create the following script anywhere in your home directory:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/Automatic-x11vnc-Password-Changer.exp</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/expect -f

set timeout -1

log_user 0

#Change your username here
set USER "<i>your_user</i>"

#First we need to generate the password, if you want to 
#change the password generation, change the "openssl rand -hex 4" line

set NewVNCPassword [exec openssl rand -hex 4]

#Now we invoke x11vnc to change the password

spawn x11vnc --storepasswd

match_max 100000

expect -exact "Enter VNC password: "

send -- "$NewVNCPassword\r"

expect -exact "\r
Verify password:    "

send -- "$NewVNCPassword\r"

expect -exact "\r
Write password to /home/$USER/.vnc/passwd?  \[y\]/n "

send -- "y\r"

expect eof

#Save the Password to the /home/$USER/.vnc/ directory as plaintext, 

exec echo "$NewVNCPassword" &gt; /home/$USER/.vnc/autovncpass
</pre>
<p>Now we need to create a <i>systemd</i> unit file that will execute the script at boot time:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/vnc-automatic-password-changer.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=x11vnc automatic password changer
Before=display-manager.service

[Service]
User=YOUR_USER
Type=oneshot
ExecStart=<i>/path/to/script/</i>Automatic-x11vnc-Password-Changer.exp                 

[Install]
WantedBy=graphical.target</pre>
<p>Finally, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> the service to change the password. You can access the current password with
</p>
<pre>$ cat /home/$USER/.vnc/autovncpass
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://www.karlrunge.com/x11vnc/">original author site</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/LibVNC/x11vnc">https://github.com/LibVNC/x11vnc</a></li>
<li><a href="https://en.wikipedia.org/wiki/x11vnc" class="extiw" title="wikipedia:x11vnc">Wikipedia:x11vnc</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Security.html" title="Category:Security">Security</a></li>
<li><a href="../en/Category:Remote_desktop.html" title="Category:Remote desktop">Remote desktop</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=X11vnc&amp;oldid=819376">https://wiki.archlinux.org/index.php?title=X11vnc&amp;oldid=819376</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 October 2024, at 11:28.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
