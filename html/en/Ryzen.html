<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Ryzen - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Ryzen rootpage-Ryzen skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Enable_microcode_support" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Enable_microcode_support">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Enable microcode support</span>
			</div>
		</a>
		
		<ul id="toc-Enable_microcode_support-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Tweaking_Ryzen" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tweaking_Ryzen">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Tweaking Ryzen</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tweaking_Ryzen-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tweaking Ryzen subsection</span>
			</button>
		
		<ul id="toc-Tweaking_Ryzen-sublist" class="vector-toc-list">
			<li id="toc-Voltage,_power_and_temperature_monitoring" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Voltage,_power_and_temperature_monitoring">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Voltage, power and temperature monitoring</span>
				</div>
			</a>
			
			<ul id="toc-Voltage,_power_and_temperature_monitoring-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Power_management,_undervolting_and_overclocking" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Power_management,_undervolting_and_overclocking">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Power management, undervolting and overclocking</span>
				</div>
			</a>
			
			<ul id="toc-Power_management,_undervolting_and_overclocking-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Compiling_a_kernel" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Compiling_a_kernel">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Compiling a kernel</span>
			</div>
		</a>
		
		<ul id="toc-Compiling_a_kernel-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Random_reboots" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Random_reboots">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Random reboots</span>
				</div>
			</a>
			
			<ul id="toc-Random_reboots-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-System_halts" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#System_halts">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>System halts</span>
				</div>
			</a>
			
			<ul id="toc-System_halts-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen-tearing_(APU)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen-tearing_(APU)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Screen-tearing (APU)</span>
				</div>
			</a>
			
			<ul id="toc-Screen-tearing_(APU)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Soft_lock_freezing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Soft_lock_freezing">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Soft lock freezing</span>
				</div>
			</a>
			
			<ul id="toc-Soft_lock_freezing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Freeze_on_shutdown,_reboot_and_suspend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Freeze_on_shutdown,_reboot_and_suspend">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Freeze on shutdown, reboot and suspend</span>
				</div>
			</a>
			
			<ul id="toc-Freeze_on_shutdown,_reboot_and_suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Ryzen</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><br>
<a href="https://en.wikipedia.org/wiki/Ryzen" class="extiw" title="w:Ryzen">Ryzen</a> is a brand of microprocessors  manufactured by Advanced Micro Devices (AMD). This article covers system configuration and troubleshooting information for different generations of the CPU.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Add something about <code>amd_pstate</code> or at least link to <a href="../en/CPU_frequency_scaling.html#Scaling_drivers" title="CPU frequency scaling">CPU frequency scaling#Scaling drivers</a>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Ryzen.html">Talk:Ryzen</a>)</div>
</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Improving_performance.html" title="Improving performance">Improving performance</a></li>
<li><a href="../en/Improving_performance/Boot_process.html" title="Improving performance/Boot process">Improving performance/Boot process</a></li>
<li><a href="../en/Kernel.html" title="Kernel">Kernel</a></li>
<li><a href="../en/Microcode.html" title="Microcode">Microcode</a></li>
</ul>
</div>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Enable_microcode_support">Enable microcode support</h2></div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=amd-ucode">amd-ucode</a></span> package to enable microcode updates and enable it with the help of the <a href="../en/Microcode.html" title="Microcode">Microcode</a> page. These updates provide bug fixes that can be critical to the stability of your system. It is <b>highly recommended</b> to use it despite it being proprietary.
</p>
<div class="mw-heading mw-heading2"><h2 id="Tweaking_Ryzen">Tweaking Ryzen</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Voltage,_power_and_temperature_monitoring">
<span id="Voltage.2C_power_and_temperature_monitoring"></span>Voltage, power and temperature monitoring</h3></div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lm_sensors">lm_sensors</a></span> should be able to monitor temperatures out of the box. However, for more detailed information such as power consumption and voltage, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zenpower3-dkms/">zenpower3-dkms</a></span><sup><small>AUR</small></sup> is needed. For GUI based monitoring tools, use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zenmonitor/">zenmonitor</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zenmonitor3-git/">zenmonitor3-git</a></span><sup><small>AUR</small></sup> for Zen 3 CPUs.
</p>
<div class="mw-heading mw-heading3"><h3 id="Power_management,_undervolting_and_overclocking">
<span id="Power_management.2C_undervolting_and_overclocking"></span>Power management, undervolting and overclocking</h3></div>
<ul><li>
<b>RyzenAdj</b> — RyzenAdj is a command-line tool that can adjust power management settings for Ryzen mobile processors.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/FlyGoat/RyzenAdj">https://github.com/FlyGoat/RyzenAdj</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ryzenadj-git/">ryzenadj-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>amdctl</b> — amdctl is a command-line tool for under/over clocking/volting AMD CPUs, currently supporting AMD CPU families 10h, 11h, 12h, 15h, 16h, 17h and 19h.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/kevinlekiller/amdctl/">https://github.com/kevinlekiller/amdctl/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdctl/">amdctl</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>ZenStates-Linux</b> — ZenStates is a command-line tool to adjust the clock speed and voltage. A detailed setup example is given in <a rel="nofollow" class="external text" href="https://forum.level1techs.com/t/overclock-your-ryzen-cpu-from-linux/126025">Level1Techs</a> forum.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/r4m0n/ZenStates-Linux">https://github.com/r4m0n/ZenStates-Linux</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zenstates-git/">zenstates-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>ryzen_smu</b> — Ryzen SMU is a Linux kernel driver that exposes access to the SMU (System Management Unit) for certain AMD Ryzen Processors. Can for example be used for undervolting the 5800x3D (see <a rel="nofollow" class="external text" href="https://github.com/svenlange2/Ryzen-5800x3d-linux-undervolting/">this script</a> as an example).</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/amkillam/ryzen_smu">https://github.com/amkillam/ryzen_smu</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ryzen_smu-dkms-git/">ryzen_smu-dkms-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<div class="mw-heading mw-heading2"><h2 id="Compiling_a_kernel">Compiling a kernel</h2></div>
<p>See <a href="https://wiki.gentoo.org/wiki/Ryzen#Kernel" class="extiw" title="gentoo:Ryzen">Gentoo:Ryzen#Kernel</a> on enabling Ryzen support. The <a href="../en/Kernel.html#Officially_supported_kernels" title="Kernel">officially supported kernels</a> have the required configuration by default.
</p>
<div class="mw-heading mw-heading2"><h2 id="Troubleshooting">Troubleshooting</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Random_reboots">Random reboots</h3></div>
<p>See <a href="https://wiki.gentoo.org/wiki/Ryzen#Random_reboots_with_mce_events" class="extiw" title="gentoo:Ryzen">Gentoo:Ryzen#Random_reboots_with_mce_events</a> if you are experiencing random reboots.
</p>
<p>With Ryzen 5000 series, particularly the higher-end models of 5950X and 5900X there seem to be some slight instability issues under Linux, related possibly to the 5.11+ kernel, as shown by <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=212087">this kernel bug</a>. After investigating and reading reports on the Internet, It seems that out of the box, Windows seems to run the CPUs at higher voltage and lower peak frequencies, compared to the stock linux kernel, which depending on your draw from the silicon lottery could cause a host of random application crashes or hardware errors that lead to reboots. You will recognise those by dmesg logs that look like:
</p>
<pre>kernel: mce: [Hardware Error]: Machine check events logged
kernel: mce: [Hardware Error]: CPU 22: Machine Check: 0 Bank 1: bc800800060c0859
kernel: mce: [Hardware Error]: TSC 0 ADDR 7ea8f5b00 MISC d012000000000000 IPID 100b000000000 
kernel: mce: [Hardware Error]: PROCESSOR 2:a20f10 TIME 1636645367 SOCKET 0 APIC d microcode a201016
</pre>
<p>The CPU ID and the Processor number may vary. To solve this problem you need to supply higher voltage to your CPU so that it is stable when running at peak frequencies. The easiest way to achieve this is to use the AMD curve optimiser which is accessible via your motherboard's UEFI. Access it and put a positive offset of 4 points, which will increase the voltage your CPU is getting at higher loads. It will limit overclocking potential due to higher heat dissipation requirements, but it will run stable. For more details check <a rel="nofollow" class="external text" href="https://community.amd.com/t5/processors/ryzen-5900x-system-constantly-crashing-restarting-whea-logger-id/td-p/423321/page/84">this forum post</a>. When I did this for my 5950X, my processor stabilised and the frequency and voltage ranges were more similar to those observed under windows.
</p>
<div class="mw-heading mw-heading3"><h3 id="System_halts">System halts</h3></div>
<p>Within similar context of <a href="#Random_reboots">#Random reboots</a>, systems might halt under heavy or specific low loads, even after applying the fixes. Reset button or forced shutdowns don't work, peripherals powers off, video output might stop, and unplugging is the only way out of this state.
</p>
<p>Reducing frequencies to within non-overclocked standards and increasing voltages of CPU or RAM helps, but might not fix the issue. A potential fix is to update the UEFI (also misnamed "BIOS updates"), and then apply the PBO+4 curve for more stability on higher frequencies. Per silicon lottery, some CPUs might need +6 or higher offsets.
</p>
<div class="mw-heading mw-heading3"><h3 id="Screen-tearing_(APU)">
<span id="Screen-tearing_.28APU.29"></span>Screen-tearing (APU)</h3></div>
<p>If you are using <a href="../en/Xorg.html" title="Xorg">Xorg</a> and are experiencing screen-tearing, see <a href="../en/AMDGPU.html#Tear_free_rendering" title="AMDGPU">AMDGPU#Tear free rendering</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Soft_lock_freezing">Soft lock freezing</h3></div>
<p>This bug is well known and is being discussed on <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=196683">bugzilla</a> and <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1690085">launchpad</a>. While the solution is not the same in all cases, <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/linux/+bug/1690085/comments/69">this</a> one helped some users. Add the output of this command <code>echo rcu_nocbs=0-$(($(nproc)-1))</code> as a kernel parameter where the command <code>nproc</code> just prints your CPU's threads. For this option to be applied, you need a compiled kernel with option <code>CONFIG_RCU_NOCB_CPU</code> (like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>).
</p>
<p>A different cause for the freezes is the power saving management indicated by c-states. The maximum power saving state c6 can cause problems. Adding the kernel parameter <code>processor.max_cstate=5</code> helped in some cases but other users reported that the option is not applied and the c6 state is still entered. For them, <a rel="nofollow" class="external text" href="https://github.com/jfredrickson/disable-c6">disabling C6 states</a> through a helper script relying on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zenstates-git/">zenstates-git</a></span><sup><small>AUR</small></sup> helped. Before using it, <code>modprobe msr</code> needs to be run in order to activate that kernel module.
</p>
<p>Some laptops with Ryzen CPUs such as the HP Envy x360 15-bq100na may experience CPU soft locks which result in a frozen system. These can be avoided with the kernel parameter <code>idle=nomwait</code> added.
</p>
<p>In some cases, kernel parameter <code>pci=nomsi</code> fixes the issue.
</p>
<p>In some other cases, the issue is simply bad hardware, and warranty claiming the CPU for a new one may just solve your issues.
</p>
<div class="mw-heading mw-heading3"><h3 id="Freeze_on_shutdown,_reboot_and_suspend">
<span id="Freeze_on_shutdown.2C_reboot_and_suspend"></span>Freeze on shutdown, reboot and suspend</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> This problem may be resolved with newer AGESA firmware, available through a UEFI update (often referred to as a "BIOS update").</div>
<p>This issue is strongly linked to the C6 CPU idle state, which can cause instability on Linux, particularly when used with power supplies or motherboards that do not handle ultra-low current draw well.
</p>
<p>To mitigate this, enter the UEFI setup:
</p>
<ul>
<li>Locate the setting called <code>Power Supply Idle Control</code> (or similar).</li>
<li>Change it from <code>Low Current Idle</code> to <code>Typical Current Idle</code>.</li>
<li>This disables deeper idle states (such as C6), allowing only C1 and C2. While this slightly increases power consumption, it significantly improves system stability.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> This UEFI change can also resolve the <a href="#Soft_lock_freezing">soft lock freezing</a> issue described above, as both are commonly caused by unsupported or unstable deep C-states.</div>
<p>If your motherboard does not offer this setting, or if issues persist, alternative workarounds include:
</p>
<ul>
<li>Fully disabling C-states in UEFI (if available, though not always recommended).</li>
<li>Adding the following kernel parameter to limit CPU idle state:</li>
</ul>
<pre> <code>processor.max_cstate=1</code>
</pre>
<p>Disabling deep C-states may raise idle power consumption by approximately 5–10 W, but typically resolves issues with suspend, reboot, and shutdown on affected systems.
</p>
<div class="mw-heading mw-heading2"><h2 id="See_also">See also</h2></div>
<ul><li><a href="https://wiki.gentoo.org/wiki/Ryzen" class="extiw" title="gentoo:Ryzen">Gentoo:Ryzen</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:CPU.html" title="Category:CPU">CPU</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ryzen&amp;oldid=849225">https://wiki.archlinux.org/index.php?title=Ryzen&amp;oldid=849225</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 16 October 2025, at 08:06.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Ryzen</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
