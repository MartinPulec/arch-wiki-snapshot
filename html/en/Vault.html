<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Vault - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Vault rootpage-Vault skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Development_mode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Development_mode">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Development mode</span>
				</div>
			</a>
			
			<ul id="toc-Development_mode-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Production_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Production_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Production configuration</span>
				</div>
			</a>
			
			<ul id="toc-Production_configuration-sublist" class="vector-toc-list">
				<li id="toc-Storage_configuration" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Storage_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Storage configuration</span>
				</div>
			</a>
			
			<ul id="toc-Storage_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Listener_configuration" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Listener_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Listener configuration</span>
				</div>
			</a>
			
			<ul id="toc-Listener_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-UI_configuration" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#UI_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.3</span>
					<span>UI configuration</span>
				</div>
			</a>
			
			<ul id="toc-UI_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-API_and_cluster_addresses" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#API_and_cluster_addresses">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.4</span>
					<span>API and cluster addresses</span>
				</div>
			</a>
			
			<ul id="toc-API_and_cluster_addresses-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Security_considerations" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Security_considerations">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.5</span>
					<span>Security considerations</span>
				</div>
			</a>
			
			<ul id="toc-Security_considerations-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Audit_logging_configuration" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Audit_logging_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.6</span>
					<span>Audit logging configuration</span>
				</div>
			</a>
			
			<ul id="toc-Audit_logging_configuration-sublist" class="vector-toc-list">
				<li id="toc-Configuring_a_file-based_audit_log" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Configuring_a_file-based_audit_log">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.6.1</span>
					<span>Configuring a file-based audit log</span>
				</div>
			</a>
			
			<ul id="toc-Configuring_a_file-based_audit_log-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Other_audit_devices" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Other_audit_devices">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.6.2</span>
					<span>Other audit devices</span>
				</div>
			</a>
			
			<ul id="toc-Other_audit_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Logging_configuration" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Logging_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.7</span>
					<span>Logging configuration</span>
				</div>
			</a>
			
			<ul id="toc-Logging_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Example_configuration" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Example_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.8</span>
					<span>Example configuration</span>
				</div>
			</a>
			
			<ul id="toc-Example_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Creating_the_storage_directory" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Creating_the_storage_directory">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Creating the storage directory</span>
				</div>
			</a>
			
			<ul id="toc-Creating_the_storage_directory-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Running_Vault_as_a_systemd_service" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Running_Vault_as_a_systemd_service">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Running Vault as a systemd service</span>
				</div>
			</a>
			
			<ul id="toc-Running_Vault_as_a_systemd_service-sublist" class="vector-toc-list">
				<li id="toc-Creating_the_systemd_service_file" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Creating_the_systemd_service_file">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.1</span>
					<span>Creating the systemd service file</span>
				</div>
			</a>
			
			<ul id="toc-Creating_the_systemd_service_file-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Usage</span>
			</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Setting_environment_variables" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_environment_variables">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Setting environment variables</span>
				</div>
			</a>
			
			<ul id="toc-Setting_environment_variables-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Initializing_vault" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Initializing_vault">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Initializing vault</span>
				</div>
			</a>
			
			<ul id="toc-Initializing_vault-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unseal_the_vault_and_login" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unseal_the_vault_and_login">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Unseal the vault and login</span>
				</div>
			</a>
			
			<ul id="toc-Unseal_the_vault_and_login-sublist" class="vector-toc-list">
				<li id="toc-Automatic_unsealing" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Automatic_unsealing">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3.1</span>
					<span>Automatic unsealing</span>
				</div>
			</a>
			
			<ul id="toc-Automatic_unsealing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Manual_unsealing" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Manual_unsealing">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3.2</span>
					<span>Manual unsealing</span>
				</div>
			</a>
			
			<ul id="toc-Manual_unsealing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Login_to_the_vault" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Login_to_the_vault">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3.3</span>
					<span>Login to the vault</span>
				</div>
			</a>
			
			<ul id="toc-Login_to_the_vault-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Accessing_the_UI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Accessing_the_UI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Accessing the UI</span>
				</div>
			</a>
			
			<ul id="toc-Accessing_the_UI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Vault</span></h1>
				</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><a rel="nofollow" class="external text" href="https://www.vaultproject.io/">Vault</a> is an open-source tool from <a rel="nofollow" class="external text" href="https://www.hashicorp.com/">HashiCorp</a> for securely managing secrets and protecting sensitive data. It provides encryption as a service, access control, and detailed audit logging.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Installation">Installation</h2></div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vault">vault</a></span> package.
</p>
<div class="mw-heading mw-heading2"><h2 id="Configuration">Configuration</h2></div>
<p>Vault can be run in <a rel="nofollow" class="external text" href="https://developer.hashicorp.com/vault/docs/concepts/dev-server">development mode</a> for testing or configured as a production server with enhanced security settings.
The configuration is defined in a file using the <a rel="nofollow" class="external text" href="https://github.com/hashicorp/hcl/blob/main/guide/language_design.rst">"Hashicorp Command Language" (HCL)</a> format.
</p>
<div class="mw-heading mw-heading3"><h3 id="Development_mode">Development mode</h3></div>
<p>For testing, Vault can be run in <a rel="nofollow" class="external text" href="https://developer.hashicorp.com/vault/docs/concepts/dev-server">development mode</a>, which starts with an in-memory storage backend and automatically unseals itself.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> Development mode stores all data in memory and does not persist it to disk. All secrets and configurations will be lost upon restart.</div>
<p>To start Vault in development mode, run the following command:
</p>
<pre>$ vault server -dev
</pre>
<div class="mw-heading mw-heading3"><h3 id="Production_configuration">Production configuration</h3></div>
<p>To set up a production-ready Vault server, create a configuration file:
</p>
<pre># mkdir /etc/vault
# touch /etc/vault/config.hcl
</pre>
<p>Then, add your desired configuration settings to <code>/etc/vault/config.hcl</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Storage_configuration">Storage configuration</h4></div>
<p>Vault supports multiple storage backends. For a simple file-based backend, use:
</p>
<pre>storage "file" {
    path = "/opt/vault/data"
}</pre>
<p>For high-availability or heavy usage environments, consider using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=consul">consul</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dynamodb/">dynamodb</a></span><sup><small>AUR</small></sup>, or other supported storage solutions that offer scalability and reliability.
</p>
<div class="mw-heading mw-heading4"><h4 id="Listener_configuration">Listener configuration</h4></div>
<p>Vault listens on a TCP port for API requests. For basic configurations without TLS, use:
</p>
<pre>listener "tcp" {
    address     = "127.0.0.1:8200"
    tls_disable = "true"
}</pre>
<p>If TLS is required for secure communication, configure it as follows:
</p>
<pre>listener "tcp" {
    address     = "127.0.0.1:8200"
    tls_disable = "false"
    tls_cert_file = "/etc/vault/vault-cert.pem"
    tls_key_file  = "/etc/vault/vault-key.pem"
}</pre>
<div class="mw-heading mw-heading4"><h4 id="UI_configuration">UI configuration</h4></div>
<p>To enable the Vault web interface, add:
</p>
<pre>ui = true
</pre>
<div class="mw-heading mw-heading4"><h4 id="API_and_cluster_addresses">API and cluster addresses</h4></div>
<p>Set the API and cluster addresses for proper networking:
</p>
<pre>api_addr = "http://127.0.0.1:8200"
cluster_addr = "http://127.0.0.1:8201"
</pre>
<p>If using TLS:
</p>
<pre>api_addr = "https://127.0.0.1:8200"
cluster_addr = "https://127.0.0.1:8201"
</pre>
<div class="mw-heading mw-heading4"><h4 id="Security_considerations">Security considerations</h4></div>
<p>By default, Vault locks memory to prevent sensitive data from being swapped to disk. This enhances security by ensuring that secrets do not end up in the swap space, where they could be accessed by unauthorized users or forensic tools.
</p>
<p>However, using <i>mlock</i> requires ensuring that the system has sufficient memory and allows unlimited memory locking. If the system lacks adequate RAM or has restrictive memory limits, enabling mlock could cause Vault to fail unexpectedly. To safely use mlock, ensure:
</p>
<ul>
<li>The system has enough free RAM to accommodate Vaultâ€™s memory usage.</li>
<li>The systemd service is configured with:</li>
</ul>
<pre>AmbientCapabilities=CAP_IPC_LOCK
LimitMEMLOCK=infinity
</pre>
<p>If your system does not meet these requirements, you may need to disable <code>mlock</code>. To do so (not recommended for production environments):
</p>
<pre>disable_mlock = true
</pre>
<div class="mw-heading mw-heading4"><h4 id="Audit_logging_configuration">Audit logging configuration</h4></div>
<p>Vault uses audit devices to log client requests and responses for security and troubleshooting purposes. The audit logs help track access patterns, detect anomalies, and ensure compliance.
</p>
<div class="mw-heading mw-heading5"><h5 id="Configuring_a_file-based_audit_log">Configuring a file-based audit log</h5></div>
<p>To enable a file-based audit log, configure an audit device in Vault:
</p>
<pre>audit_device "file" {
    path   = "/var/log/vault-audit.log"
    format = "json"
}</pre>
<p>This will log audit events to <code>/var/log/vault-audit.log</code> in JSON format, making it easier to parse and analyze.
</p>
<p>To ensure Vault can write to the audit log securely, set the correct permissions:
</p>
<pre># touch /var/log/vault-audit.log
# chown vault:vault /var/log/vault-audit.log
# chmod 640 /var/log/vault-audit.log
</pre>
<div class="mw-heading mw-heading5"><h5 id="Other_audit_devices">Other audit devices</h5></div>
<p>Vault supports multiple audit logging backends besides files, For a full list of supported audit devices and advanced configuration options, refer to the <a rel="nofollow" class="external text" href="https://developer.hashicorp.com/vault/docs/audit">official documentation</a>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Logging_configuration">Logging configuration</h4></div>
<p>Vault provides logging capabilities to help monitor its operations, troubleshoot issues, and analyze system behavior. By default, logs are sent to stdout, but they can also be written to a file.
</p>
<p>To configure Vault to log to a file, specify the log file path and log level in the configuration:
</p>
<pre>log_file = "/var/log/vault.log"
log_level = "info"
</pre>
<p>To ensure Vault can write logs properly, adjust file permissions:
</p>
<pre># touch /var/log/vault.log
# chown vault:vault /var/log/vault.log
# chmod 640 /var/log/vault.log
</pre>
<div class="mw-heading mw-heading4"><h4 id="Example_configuration">Example configuration</h4></div>
<p>Below is a complete example combining the above settings:
</p>
<pre>storage "file" {
    path = "/opt/vault/data"
}

listener "tcp" {
    address     = "127.0.0.1:8200"
    tls_disable = "true"
}

ui = true

api_addr = "http://127.0.0.1:8200"
cluster_addr = "http://127.0.0.1:8201"

disable_mlock = true

audit_device "file" {
    path   = "/var/log/vault-audit.log"
    format = "json"
}

log_file = "/var/log/vault.log"
log_level = "info"</pre>
<p>If using TLS:
</p>
<pre>storage "file" {
    path = "/opt/vault/data"
}

listener "tcp" {
    address     = "127.0.0.1:8200"
    tls_disable = "false"
    tls_cert_file = "/etc/vault/vault-cert.pem"
    tls_key_file  = "/etc/vault/vault-key.pem"
}

ui = true

api_addr = "https://127.0.0.1:8200"
cluster_addr = "https://127.0.0.1:8201"

disable_mlock = true

audit_device "file" {
    path   = "/var/log/vault-audit.log"
    format = "json"
}

log_file = "/var/log/vault.log"
log_level = "info"</pre>
<div class="mw-heading mw-heading3"><h3 id="Creating_the_storage_directory">Creating the storage directory</h3></div>
<pre># mkdir -p /opt/vault/data
# chown -R vault:vault /opt/vault
</pre>
<div class="mw-heading mw-heading3"><h3 id="Running_Vault_as_a_systemd_service">Running Vault as a systemd service</h3></div>
<p>Optionally, Vault can be run as a <a href="../en/Systemd.html" title="Systemd">systemd</a> service to ensure it starts automatically at boot, restarts upon failure, and integrates well with process management on Linux. This approach is particularly useful in production environments where Vault needs to remain available without manual intervention.
</p>
<div class="mw-heading mw-heading4"><h4 id="Creating_the_systemd_service_file">Creating the systemd service file</h4></div>
<p>Create a unit file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/vault.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=HashiCorp Vault - A secrets management solution
After=network.target

[Service]
User=vault
Group=vault
ProtectSystem=full
ProtectHome=true
PrivateTmp=true
PrivateDevices=true
SecureBits=keep-caps
AmbientCapabilities=CAP_IPC_LOCK
LimitMEMLOCK=infinity
NoNewPrivileges=yes
ExecStart=/usr/bin/vault server -config=/etc/vault/config.hcl
ExecReload=/bin/kill -HUP $MAINPID
KillMode=process
KillSignal=SIGINT
Restart=on-failure
RestartSec=5
TimeoutStopSec=30
ProtectKernelModules=yes
ProtectControlGroups=yes
ReadOnlyPaths=/etc/vault
SystemCallFilter=@system-service
SystemCallFilter=~@privileged

[Install]
WantedBy=multi-user.target</pre>
<p>Next, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> the <code>vault.service</code>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Usage">Usage</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Setting_environment_variables">Setting environment variables</h3></div>
<p>Set the environment variable to specify the Vault address. This ensures that Vault commands interact with the correct server instance without requiring the address to be manually specified each time.
</p>
<pre>$ export VAULT_ADDR='http://127.0.0.1:8200'
</pre>
<p>To make this persistent across reboots:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/environment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">VAULT_ADDR='http://127.0.0.1:8200'</pre>
<div class="mw-heading mw-heading3"><h3 id="Initializing_vault">Initializing vault</h3></div>
<p>Vault encrypts and protects secrets, requiring an "unsealing" process to decrypt and access them after a restart. When initialized, Vault generates multiple unseal keys, and a minimum threshold of these keys is needed to unseal the Vault. This ensures that no single person has full access, adding an extra layer of security.
</p>
<p>To initialize Vault, run:
</p>
<pre>$ vault operator init
</pre>
<p>This will output 5 unseal keys and an initial root token. Save these securely!
</p>
<div class="mw-heading mw-heading3"><h3 id="Unseal_the_vault_and_login">Unseal the vault and login</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Automatic_unsealing">Automatic unsealing</h4></div>
<p>Vault can be configured to auto-unseal using cloud-based KMS services (such as AWS KMS, GCP KMS) or hardware security modules (HSMs). This eliminates the need for manual key entry upon startup. For more info refer to the <a rel="nofollow" class="external text" href="https://www.vaultproject.io/docs/concepts/seal#auto-unseal">official Vault auto-unseal documentation</a>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Manual_unsealing">Manual unsealing</h4></div>
<p>For manual unsealing, Vault must be unsealed with at least three different keys:
</p>
<pre>$ vault operator unseal <i>unseal-key-1</i>
$ vault operator unseal <i>unseal-key-2</i>
$ vault operator unseal <i>unseal-key-3</i>
</pre>
<div class="mw-heading mw-heading4"><h4 id="Login_to_the_vault">Login to the vault</h4></div>
<pre>$ vault login <i>root-token</i>
</pre>
<div class="mw-heading mw-heading3"><h3 id="Accessing_the_UI">Accessing the UI</h3></div>
<p>Open http://127.0.0.1:8200 in your browser.
</p>
<p>You will see a login screen where you can use your root token to access the Vault UI.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Encryption.html" title="Category:Encryption">Encryption</a></li>
<li><a href="../en/Category:Networking.html" title="Category:Networking">Networking</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Vault&amp;oldid=851609">https://wiki.archlinux.org/index.php?title=Vault&amp;oldid=851609</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 3 November 2025, at 10:13.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Vault</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
