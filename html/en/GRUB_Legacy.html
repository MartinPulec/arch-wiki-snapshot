<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>GRUB Legacy - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-GRUB_Legacy rootpage-GRUB_Legacy skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Supported_file_systems" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Supported_file_systems">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Supported file systems</div>
		</a>
		
		<ul id="toc-Supported_file_systems-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Upgrading_to_GRUB2" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Upgrading_to_GRUB2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Upgrading to GRUB2</div>
		</a>
		
			<button aria-controls="toc-Upgrading_to_GRUB2-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Upgrading to GRUB2 subsection</span>
			</button>
		
		<ul id="toc-Upgrading_to_GRUB2-sublist" class="vector-toc-list">
			<li id="toc-Is_upgrading_necessary?" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Is_upgrading_necessary?">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Is upgrading necessary?</div>
			</a>
			
			<ul id="toc-Is_upgrading_necessary?-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-How_to_upgrade" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#How_to_upgrade">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>How to upgrade</div>
			</a>
			
			<ul id="toc-How_to_upgrade-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Differences" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Differences">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Differences</div>
			</a>
			
			<ul id="toc-Differences-sublist" class="vector-toc-list">
				<li id="toc-Backup_important_data" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Backup_important_data">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.1</span>Backup important data</div>
			</a>
			
			<ul id="toc-Backup_important_data-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Converting_GRUB_Legacy's_configuration_file_to_the_new_format" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Converting_GRUB_Legacy's_configuration_file_to_the_new_format">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Converting GRUB Legacy's configuration file to the new format</div>
			</a>
			
			<ul id="toc-Converting_GRUB_Legacy's_configuration_file_to_the_new_format-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restore_GRUB_Legacy" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restore_GRUB_Legacy">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Restore GRUB Legacy</div>
			</a>
			
			<ul id="toc-Restore_GRUB_Legacy-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Finding_GRUB's_root" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Finding_GRUB's_root">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Finding GRUB's root</div>
			</a>
			
			<ul id="toc-Finding_GRUB's_root-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Dual_booting_with_Windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dual_booting_with_Windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Dual booting with Windows</div>
			</a>
			
			<ul id="toc-Dual_booting_with_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Dual_booting_with_GNU/Linux" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dual_booting_with_GNU/Linux">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Dual booting with GNU/Linux</div>
			</a>
			
			<ul id="toc-Dual_booting_with_GNU/Linux-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-chainloader_and_configfile" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#chainloader_and_configfile">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>chainloader and configfile</div>
			</a>
			
			<ul id="toc-chainloader_and_configfile-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Dual_booting_with_GNU/Linux_(GRUB2)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dual_booting_with_GNU/Linux_(GRUB2)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Dual booting with GNU/Linux (GRUB2)</div>
			</a>
			
			<ul id="toc-Dual_booting_with_GNU/Linux_(GRUB2)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Bootloader_installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Bootloader_installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Bootloader installation</div>
		</a>
		
			<button aria-controls="toc-Bootloader_installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Bootloader installation subsection</span>
			</button>
		
		<ul id="toc-Bootloader_installation-sublist" class="vector-toc-list">
			<li id="toc-Manual_recovery_of_GRUB_libs" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Manual_recovery_of_GRUB_libs">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Manual recovery of GRUB libs</div>
			</a>
			
			<ul id="toc-Manual_recovery_of_GRUB_libs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-General_notes_about_bootloader_installation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#General_notes_about_bootloader_installation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>General notes about bootloader installation</div>
			</a>
			
			<ul id="toc-General_notes_about_bootloader_installation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installing_to_the_MBR" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_to_the_MBR">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Installing to the MBR</div>
			</a>
			
			<ul id="toc-Installing_to_the_MBR-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installing_to_a_partition" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_to_a_partition">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Installing to a partition</div>
			</a>
			
			<ul id="toc-Installing_to_a_partition-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alternate_method_(grub-install)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Alternate_method_(grub-install)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Alternate method (grub-install)</div>
			</a>
			
			<ul id="toc-Alternate_method_(grub-install)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Framebuffer_resolution" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Framebuffer_resolution">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Framebuffer resolution</div>
			</a>
			
			<ul id="toc-Framebuffer_resolution-sublist" class="vector-toc-list">
				<li id="toc-GRUB_recognized_value" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GRUB_recognized_value">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1.1</span>GRUB recognized value</div>
			</a>
			
			<ul id="toc-GRUB_recognized_value-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-hwinfo" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#hwinfo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1.2</span>hwinfo</div>
			</a>
			
			<ul id="toc-hwinfo-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Naming_partitions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Naming_partitions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Naming partitions</div>
			</a>
			
			<ul id="toc-Naming_partitions-sublist" class="vector-toc-list">
				<li id="toc-By_Label" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#By_Label">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2.1</span>By Label</div>
			</a>
			
			<ul id="toc-By_Label-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-By_UUID" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#By_UUID">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2.2</span>By UUID</div>
			</a>
			
			<ul id="toc-By_UUID-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Boot_as_root_(single-user_mode)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Boot_as_root_(single-user_mode)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Boot as root (single-user mode)</div>
			</a>
			
			<ul id="toc-Boot_as_root_(single-user_mode)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Password_protection" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Password_protection">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Password protection</div>
			</a>
			
			<ul id="toc-Password_protection-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restart_with_named_boot_choice" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restart_with_named_boot_choice">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Restart with named boot choice</div>
			</a>
			
			<ul id="toc-Restart_with_named_boot_choice-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-LILO_and_GRUB_interaction" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#LILO_and_GRUB_interaction">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>LILO and GRUB interaction</div>
			</a>
			
			<ul id="toc-LILO_and_GRUB_interaction-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GRUB_boot_disk" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GRUB_boot_disk">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>GRUB boot disk</div>
			</a>
			
			<ul id="toc-GRUB_boot_disk-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hide_GRUB_menu" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hide_GRUB_menu">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.8</span>Hide GRUB menu</div>
			</a>
			
			<ul id="toc-Hide_GRUB_menu-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Advanced_debugging" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Advanced_debugging">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Advanced debugging</div>
		</a>
		
		<ul id="toc-Advanced_debugging-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-GRUB_Error_17" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GRUB_Error_17">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>GRUB Error 17</div>
			</a>
			
			<ul id="toc-GRUB_Error_17-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-/boot/grub/stage1_not_read_correctly" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#/boot/grub/stage1_not_read_correctly">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.2</span>/boot/grub/stage1 not read correctly</div>
			</a>
			
			<ul id="toc-/boot/grub/stage1_not_read_correctly-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Accidental_install_to_a_Windows_partition" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Accidental_install_to_a_Windows_partition">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3</span>Accidental install to a Windows partition</div>
			</a>
			
			<ul id="toc-Accidental_install_to_a_Windows_partition-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Edit_GRUB_entries_in_the_boot_menu" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Edit_GRUB_entries_in_the_boot_menu">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.4</span>Edit GRUB entries in the boot menu</div>
			</a>
			
			<ul id="toc-Edit_GRUB_entries_in_the_boot_menu-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-device.map_error" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#device.map_error">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.5</span>device.map error</div>
			</a>
			
			<ul id="toc-device.map_error-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-KDE_reboot_pull-down_menu_fails" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#KDE_reboot_pull-down_menu_fails">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.6</span>KDE reboot pull-down menu fails</div>
			</a>
			
			<ul id="toc-KDE_reboot_pull-down_menu_fails-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GRUB_fails_to_find_or_install_to_any_virtio_/dev/vd*_or_other_non-BIOS_devices" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GRUB_fails_to_find_or_install_to_any_virtio_/dev/vd*_or_other_non-BIOS_devices">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.7</span>GRUB fails to find or install to any virtio <i>/dev/vd*</i> or other non-BIOS devices</div>
			</a>
			
			<ul id="toc-GRUB_fails_to_find_or_install_to_any_virtio_/dev/vd*_or_other_non-BIOS_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">GRUB Legacy</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/GRUB_Legacy" title="GRUB Legacy – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/GRUB_Legacy" title="GRUB Legacy – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Arch_boot_process.html" title="Arch boot process">Arch boot process</a></li>
<li><a href="../en/General_troubleshooting.html#Boot_problems" class="mw-redirect" title="Boot debugging">Boot debugging</a></li>
<li><a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/grub-legacy.html">GRUB Legacy</a> is a <a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/manual/multiboot/">multiboot</a> bootloader previously maintained by the <a href="../en/GNU.html" class="mw-redirect" title="GNU Project">GNU Project</a>. It was derived from GRUB, the GRand Unified Bootloader, which was originally designed and implemented by Erich Stefan Boleyn. 
</p>
<p>Briefly, the <i>bootloader</i> is the first software program that runs when a computer starts. It is responsible for loading and transferring control to the Linux kernel. The kernel, in turn, initializes the rest of the operating system.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> GRUB Legacy is no longer maintained upstream and is not officially supported in Arch (see the news <a rel="nofollow" class="external text" href="https://archlinux.org/news/grub-legacy-no-longer-supported/">here</a>). Users are recommended to switch to <a href="../en/GRUB.html" class="mw-redirect" title="GRUB2">GRUB2</a> or <a href="../en/Syslinux.html" title="Syslinux">Syslinux</a> instead. See <a href="#Upgrading_to_GRUB2">Upgrading to GRUB2</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you have grub-legacy installed as the grub-0.97 package in your system, it will be updated to the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=grub">grub</a></span>-2.xx package (GRUB2) during updates. If you want to keep using grub-legacy, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/grub-legacy/">grub-legacy</a></span><sup><small>AUR</small></sup> so that package names do not conflict. During this update only the files in <code>/usr/lib/grub/</code> are updated, and grub-legacy files installed to <code>/boot/grub</code> and the <code>MBR</code> are not removed. You can boot back into grub-legacy by simply renaming <code>/boot/grub/menu.lst.pacsave</code> to <code>/boot/grub/menu.lst</code>.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Supported_file_systems">Supported file systems</span></h2>
<p>GRUB legacy bundles its own support for <a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/manual/legacy/grub.html#Features">multiple file systems</a>, notably <a href="../en/FAT.html" class="mw-redirect" title="FAT32">FAT32</a>, <a href="https://en.wikipedia.org/wiki/ext2" class="extiw" title="wikipedia:ext2">ext2</a>, <a href="https://en.wikipedia.org/wiki/ReiserFS" class="extiw" title="wikipedia:ReiserFS">ReiserFS</a> or <a href="../en/XFS.html" title="XFS">XFS</a> (although v4 only).
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> File systems can have new features not supported by GRUB Legacy, making them unsuitable for <code>/boot</code> unless disabling incompatible features. This can be typically worked around by using a separate <a href="../en/Partitioning.html#/boot" title="Partitioning">/boot partition</a> with a universally supported file system such as <a href="../en/FAT.html" class="mw-redirect" title="FAT32">FAT32</a>.</div>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>GRUB Legacy has been dropped from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a> in favor of <a href="../en/GRUB.html" title="GRUB">GRUB version 2.x</a> but is still available from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/grub-legacy/">grub-legacy</a></span><sup><small>AUR</small></sup> package.
</p>
<p>Additionally, GRUB must be installed to the boot sector of a drive or partition to serve as a bootloader. This is covered in the <a href="#Bootloader_installation">Bootloader installation</a> section.
</p>
<h2><span class="mw-headline" id="Upgrading_to_GRUB2">Upgrading to GRUB2</span></h2>
<h3>
<span id="Is_upgrading_necessary.3F"></span><span class="mw-headline" id="Is_upgrading_necessary?">Is upgrading necessary?</span>
</h3>
<p>The short answer is No. GRUB legacy will not be removed from your system and will stay fully functional.
</p>
<p>However, as any other packages which are not supported anymore, bugs are unlikely to be fixed. So you should consider upgrading to <a href="../en/GRUB.html" title="GRUB">GRUB version 2.x</a>, or one of the other supported <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">Boot loaders</a>.
</p>
<p>GRUB legacy does not support <a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a> disks, <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a> filesystem and <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> firmwares.
</p>
<h3><span class="mw-headline" id="How_to_upgrade">How to upgrade</span></h3>
<p>Upgrade from GRUB Legacy to <a href="../en/GRUB.html" title="GRUB">GRUB version 2.x</a> is much the same as installing GRUB on a running Arch Linux. Detailed instructions is covered <a href="../en/GRUB.html#Installation" title="GRUB">here</a>.
</p>
<h3><span class="mw-headline" id="Differences">Differences</span></h3>
<ul>
<li>There are differences in the commands of GRUB Legacy and GRUB. Familiarize yourself with <a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/manual/grub.html#Commands">GRUB commands</a> before proceeding (e.g. "find" has been replaced with "search").</li>
<li>GRUB is now <i>modular</i> and no longer requires "stage 1.5". As a result, the bootloader itself is limited -- modules are loaded from the hard drive as needed to expand functionality (e.g. for <a href="../en/LVM.html" title="LVM">LVM</a> or RAID support).</li>
<li>Device naming has changed between GRUB Legacy and GRUB. Partitions are numbered from 1 instead of 0 while drives are still numbered from 0, and prefixed with partition-table type. For example, <code>/dev/sda1</code> would be referred to as <code>(hd0,msdos1)</code> (for MBR) or <code>(hd0,gpt1)</code> (for GPT).</li>
<li>GRUB is noticeably bigger than GRUB legacy (occupies ~13 MB in <code>/boot</code>). If you are booting from a separate <code>/boot</code> partition, and this partition is smaller than 32 MB, you will run into disk space issues, and pacman will refuse to install new kernels.</li>
</ul>
<h4><span class="mw-headline" id="Backup_important_data">Backup important data</span></h4>
<p>Although a GRUB installation should run smoothly, it is strongly recommended to keep the GRUB Legacy files before upgrading to GRUB v2.
</p>
<pre># mv /boot/grub /boot/grub-legacy
</pre>
<p>Backup the MBR which contains the boot code and partition table (replace <code>/dev/sd<i>X</i></code> with your actual disk path):
</p>
<pre># dd if=/dev/sd<i>X</i> of=/path/to/backup/mbr_backup bs=512 count=1
</pre>
<p>Only 446 bytes of the MBR contain boot code, the next 64 contain the partition table. If you do not want to overwrite your partition table when restoring, it is strongly advised to backup only the MBR boot code:
</p>
<pre># dd if=/dev/sd<i>X</i> of=/path/to/backup/bootcode_backup bs=446 count=1
</pre>
<p>If unable to install GRUB2 correctly, see <a href="#Restore_GRUB_Legacy">Restore GRUB Legacy</a>.
</p>
<h3>
<span id="Converting_GRUB_Legacy.27s_configuration_file_to_the_new_format"></span><span class="mw-headline" id="Converting_GRUB_Legacy's_configuration_file_to_the_new_format">Converting GRUB Legacy's configuration file to the new format</span>
</h3>
<p>If <code>grub-mkconfig</code> fails, convert your <code>/boot/grub/menu.lst</code> file to <code>/boot/grub/grub.cfg</code> using:
</p>
<pre># grub-menulst2cfg /boot/grub/menu.lst /boot/grub/grub.cfg
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This option works only on BIOS systems, not on UEFI systems.</div>
<p>For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/menu.lst</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default=0
timeout=5

title  Arch Linux Stock Kernel
root   (hd0,0)
kernel /vmlinuz-linux root=/dev/sda2 ro
initrd /initramfs-linux.img

title  Arch Linux Stock Kernel Fallback
root   (hd0,0)
kernel /vmlinuz-linux root=/dev/sda2 ro
initrd /initramfs-linux-fallback.img
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/grub.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">set default='0'; if [ x"$default" = xsaved ]; then load_env; set default="$saved_entry"; fi
set timeout=5

menuentry 'Arch Linux Stock Kernel' {
  set root='(hd0,1)'; set legacy_hdbias='0'
  legacy_kernel   '/vmlinuz-linux' '/vmlinuz-linux' 'root=/dev/sda2' 'ro'
  legacy_initrd '/initramfs-linux.img' '/initramfs-linux.img'
}

menuentry 'Arch Linux Stock Kernel Fallback' {
  set root='(hd0,1)'; set legacy_hdbias='0'
  legacy_kernel   '/vmlinuz-linux' '/vmlinuz-linux' 'root=/dev/sda2' 'ro'
  legacy_initrd '/initramfs-linux-fallback.img' '/initramfs-linux-fallback.img'
}
</pre>
<p>If you forgot to create a GRUB <code>/boot/grub/grub.cfg</code> configuration file and simply rebooted into GRUB Command Shell, type:
</p>
<pre>sh:grub&gt; insmod legacycfg
sh:grub&gt; legacy_configfile ${prefix}/menu.lst
</pre>
<p>Boot into Arch and re-create the proper GRUB <code>/boot/grub/grub.cfg</code> configuration file.
</p>
<h3><span class="mw-headline" id="Restore_GRUB_Legacy">Restore GRUB Legacy</span></h3>
<ul><li>Move GRUB v2 files out of the way:</li></ul>
<pre># mv /boot/grub /boot/grub.nonfunctional
</pre>
<ul><li>Copy GRUB Legacy back to <code>/boot</code>:</li></ul>
<pre># cp -af /boot/grub-legacy /boot/grub
</pre>
<ul><li>Replace MBR and next 62 sectors of sda with backed up copy</li></ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This command also restores the partition table, so be careful of overwriting a modified partition table with the old one. It <b>will</b> mess up your system.</div>
<pre># dd if=/path/to/backup/first-sectors of=/dev/sdX bs=512 count=1
</pre>
<p>A safer way is to restore only the MBR boot code use:
</p>
<pre># dd if=/path/to/backup/mbr-boot-code of=/dev/sdX bs=446 count=1
</pre>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>The configuration file is located at <code>/boot/grub/menu.lst</code>.  Edit this file to suit your needs.
</p>
<ul>
<li>
<code>timeout #</code> -- time to wait (in seconds) before the <code>default</code> operating system is automatically loaded.</li>
<li>
<code>default #</code> -- the default boot entry that is chosen when the <code>timeout</code> has expired.</li>
</ul>
<p>An example configuration (<code>/boot</code> is on a separate partition):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/menu.lst
</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Config file for GRUB - The GNU GRand Unified Bootloader
# /boot/grub/menu.lst

# DEVICE NAME CONVERSIONS
#
#  Linux           GRUB
# -------------------------
#  /dev/fd0        (fd0)
#  /dev/sda        (hd0)
#  /dev/sdb2       (hd1,1)
#  /dev/sda3       (hd0,2)
#

#  FRAMEBUFFER RESOLUTION SETTINGS
#     +-------------------------------------------------+
#          | 640x480    800x600    1024x768   1280x1024
#      ----+--------------------------------------------
#      256 | 0x301=769  0x303=771  0x305=773   0x307=775
#      32K | 0x310=784  0x313=787  0x316=790   0x319=793
#      64K | 0x311=785  0x314=788  0x317=791   0x31A=794
#      16M | 0x312=786  0x315=789  0x318=792   0x31B=795
#     +-------------------------------------------------+
#  for more details and different resolutions see
#  https://wiki.archlinux.org/index.php/GRUB#Framebuffer_Resolution

# general configuration:
timeout   5
default   0
color light-blue/black light-cyan/blue

# boot sections follow
# each is implicitly numbered from 0 in the order of appearance below
#
# TIP: If you want a 1024x768 framebuffer, add "vga=773" to your kernel line.
#
#-*

# (0) Arch Linux
title  Arch Linux
root   (hd0,0)
kernel /vmlinuz-linux root=/dev/sda3 ro
initrd /initramfs-linux.img

# (1) Windows
#title Windows
#rootnoverify (hd0,0)
#makeactive
#chainloader +1
</pre>
<h3>
<span id="Finding_GRUB.27s_root"></span><span class="mw-headline" id="Finding_GRUB's_root">Finding GRUB's root</span>
</h3>
<p>GRUB must be told where its files reside on the system, since multiple instances may exist (i.e., in multi-boot environments). GRUB files always reside under <code>/boot</code>, which may be on a dedicated partition.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> GRUB defines storage devices differently than conventional kernel naming does.
<ul>
<li>Hard disks are defined as <i>(hdX)</i>; this also refers to any USB storage devices.</li>
<li>Device and partitioning numbering begin at zero. For example, the first hard disk recognized in the BIOS will be defined as <i>(hd0)</i>. The second device will be called <i>(hd1)</i>. This also applies to partitions.  So, the second partition on the first hard disk will be defined as <i>(hd0,1)</i>.</li>
</ul>
</div>
<p>If you are unaware of the location of <code>/boot</code>, use the GRUB shell <code>find</code> command to locate the GRUB files.  Enter the GRUB shell as root by:
</p>
<pre># grub
</pre>
<p>The following example is for systems <i>without</i> a separate <code>/boot</code> partition, wherein <code>/boot</code> is merely a directory under <code>/</code>:
</p>
<pre>grub&gt; find /boot/grub/stage1
</pre>
<p>The following example is for systems <i>with</i> a separate <code>/boot</code> partition:
</p>
<pre>grub&gt; find /grub/stage1
</pre>
<p>GRUB will find the file, and output the location of the <code>stage1</code> file. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">grub&gt; find /grub/stage1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> (hd0,0)</pre>
<p>This value should be entered on the <code>root</code> line in your configuration file. Type <code>quit</code> to exit the shell.
</p>
<h3><span class="mw-headline" id="Dual_booting_with_Windows">Dual booting with Windows</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> The comment about removing "makeactive" is probably no longer necessary and the examples should simply remove it, since it was added <a href="../Special:Diff/98693.html" title="Special:Diff/98693">a few months after Windows 7 release</a>. Similarly, the information about Windows 2000 is irrelevant nowadays. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:GRUB_Legacy.html">Talk:GRUB Legacy</a>)</div>
</div>
<p>Add the following to the end of your <code>/boot/grub/menu.lst</code> (assuming that your Windows partition is on the first partition of the first drive):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/menu.lst</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> title Windows
 rootnoverify (hd0,0)
 makeactive
 chainloader +1
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>If you are attempting to dual-boot with Windows 7, you should comment out the line <code>makeactive</code>.</li>
<li>Windows 2000 and later versions do NOT need to be on the first partition to boot (contrary to popular belief). If the Windows partition changes (i.e. if you add a partition before the Windows partition), you will need to edit the Windows <code>boot.ini</code> file to reflect the change (see <a rel="nofollow" class="external text" href="https://vlaurie.com/computers2/Articles/bootini.htm">this article</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-07-30 ⓘ]</sup> for details on how to do that).</li>
</ul>
</div>
<p>If Windows is located on another hard disk, the <code>map</code> command must be used. This will make your Windows install think it is actually on the first drive. Assuming that your Windows partition is on the first partition of the second drive:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/menu.lst</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> title Windows
 map (hd0) (hd1)
 map (hd1) (hd0)
 rootnoverify (hd1,0)
 makeactive
 chainloader +1
</pre>
<h3>
<span id="Dual_booting_with_GNU.2FLinux"></span><span class="mw-headline" id="Dual_booting_with_GNU/Linux">Dual booting with GNU/Linux</span>
</h3>
<p>This can be done the same way that an Arch Linux install is defined. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/menu.lst</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> title Other Linux
 root (hd0,2)
 kernel /path/to/kernel root=/dev/sda3 ro
 initrd /path/to/initrd
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> There may be other options that are required, and an initial RAM disk may not be used. Examine the other distribution's <code>/boot/grub/menu.lst</code> to match boot options, or see <a href="#chainloader_and_configfile">chainloader and configfile</a> (recommended).</div>
<h3><span class="mw-headline" id="chainloader_and_configfile">chainloader and configfile</span></h3>
<p>To facilitate system maintenance, the <code>chainloader</code> or <code>configfile</code> command should be used to boot another Linux distribution that provides an "automagic" GRUB configuration mechanism (e.g. Debian, Ubuntu, openSUSE). This allows the distribution to manage its own <code>menu.lst</code> and boot options.
</p>
<ul><li>The <code>chainloader</code> command will load another bootloader (rather than a kernel image); useful if another bootloader is installed in a partition's boot sector (GRUB, for example). This allows one to install a "main" instance of GRUB to the <a href="../en/Partitioning.html#Master_Boot_Record" class="mw-redirect" title="MBR">MBR</a> and distribution-specific instances of GRUB to each partition boot record (PBR).</li></ul>
<ul><li>The <code>configfile</code> command will instruct the currently running GRUB instance to load the specified configuration file. This can be used to load another distribution's <code>menu.lst</code> without a separate GRUB installation. The caveat of this approach is that other <code>menu.lst</code> may not be compatible with the installed version of GRUB; some distributions heavily patch their versions of GRUB.</li></ul>
<p>For example, GRUB is to be installed to the <a href="../en/Partitioning.html#Master_Boot_Record" class="mw-redirect" title="MBR">MBR</a> and some other bootloader (be it GRUB or <a href="../en/LILO.html" title="LILO">LILO</a>) is already installed to the boot sector of <code>(hd0,2)</code>.
</p>
<pre>---------------------------------------------
|   |           |           |   %           |
| M |           |           | B %           |
| B |  (hd0,0)  |  (hd0,1)  | L %  (hd0,2)  |
| R |           |           |   %           |
|   |           |           |   %           |
---------------------------------------------
  |                           ^
  |       chainloading        |
  -----------------------------
</pre>
<p>One can simply include in <code>menu.lst</code>:
</p>
<pre>title Other Linux
root (hd0,2)
chainloader +1
</pre>
<p>Or, if the bootloader on <code>(hd0,2)</code> is GRUB:
</p>
<pre>title Other Linux
root (hd0,2)
configfile /boot/grub/menu.lst
</pre>
<p>The <code>chainloader</code> command can also be used to load the MBR of a second drive:
</p>
<pre>title Other drive
rootnoverify (hd1)
chainloader +1
</pre>
<h3>
<span id="Dual_booting_with_GNU.2FLinux_.28GRUB2.29"></span><span class="mw-headline" id="Dual_booting_with_GNU/Linux_(GRUB2)">Dual booting with GNU/Linux (GRUB2)</span>
</h3>
<p>If the other Linux distribution uses GRUB2 (e.g. Ubuntu 9.10+), and you installed its boot loader to its root partition, you can add an entry like this one to your <code>/boot/grub/menu.lst</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/menu.lst</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> # other Linux using GRUB2
 title Ubuntu
 root (hd0,2)
 kernel /boot/grub/core.img
</pre>
<p>Selecting this entry at boot will load the other distribution's GRUB2 menu assuming that the distribution is installed on <code>/dev/sda3</code>.
</p>
<h2><span class="mw-headline" id="Bootloader_installation">Bootloader installation</span></h2>
<h3><span class="mw-headline" id="Manual_recovery_of_GRUB_libs">Manual recovery of GRUB libs</span></h3>
<p>The <code>*stage*</code> files are expected to be in <code>/boot/grub</code>, which may not be the case if the bootloader was not installed during system installation or if the partition/filesystem was damaged, accidentally deleted, etc.  
</p>
<p>Manually copy the GRUB libs like so:
</p>
<pre># cp -a /usr/lib/grub/i386-pc/* /boot/grub
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Do not forget to mount the system's boot partition if your setup uses a separate one!  The above assumes that either the boot partition resides on the root filesystem or is mounted to /boot on the root file system!</div>
<h3><span class="mw-headline" id="General_notes_about_bootloader_installation">General notes about bootloader installation</span></h3>
<p>GRUB may be installed from a separate medium (e.g. a LiveCD), or directly from a running Arch install.  The GRUB bootloader is <i>seldom</i> required to be reinstalled and installation is <i>not</i> necessary when:
</p>
<ul>
<li>The configuration file is updated.</li>
<li>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/grub-legacy/">grub-legacy</a></span><sup><small>AUR</small></sup> package is updated.</li>
</ul>
<p>Installation is <i>necessary</i> when:
</p>
<ul>
<li>A bootloader is not already installed.</li>
<li>Another operating system overwrites the Linux bootloader.</li>
<li>The bootloader fails for some unknown reason.</li>
</ul>
<p>Before continuing, a few notes:
</p>
<ul>
<li>Be sure that your GRUB configuration is correct (<code>/boot/grub/menu.lst</code>) before proceeding. Refer to <a href="#Finding_GRUB's_root">Finding GRUB's root</a> to ensure your devices are defined correctly.</li>
<li>GRUB must be installed on the <a href="../en/Partitioning.html#Master_Boot_Record" class="mw-redirect" title="MBR">MBR</a> (first sector of the hard disk), or the first partition of the first storage device to be recognized by most BIOSes.  To allow individual distributions the ability to manage their own GRUB menus, multiple instances of GRUB can be used, see <a href="#chainloader_and_configfile">chainloader and configfile</a>.</li>
<li>Installing the GRUB bootloader may need to be done from within a <code>chroot</code>ed environment (i.e. from installed environment via a separate medium) for cases like RAID configurations or if you forgot/broke your GRUB installation.  You will need to <a href="../en/Chroot.html" class="mw-redirect" title="Change root">Change root</a> from a LiveCD or another Linux installation to do so.</li>
</ul>
<p>First, enter the GRUB shell:
</p>
<pre># grub
</pre>
<p>Use the <code>root</code> command with the output from the <code>find</code> command (see <a href="#Finding_GRUB's_root">Finding GRUB's root</a>) to instruct GRUB which partition contains stage1 (and therefore, <code>/boot</code>):
</p>
<pre>grub&gt; root (hd1,0)
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The GRUB shell also supports tab-completion.  If you type 'root (hd' then press <code>Tab</code> twice you will see the available storage devices, this can also be done for partitions.  Tab-completion also works from the GRUB boot menu.  If there is an error in your configuration file you can edit in the boot menu and use tab-completion to help find devices and partitions.  See <a href="#Edit_GRUB_entries_in_the_boot_menu">#Edit GRUB entries in the boot menu</a>.</div>
<h3><span class="mw-headline" id="Installing_to_the_MBR">Installing to the MBR</span></h3>
<p>The following example installs GRUB to the <a href="../en/Partitioning.html#Master_Boot_Record" class="mw-redirect" title="MBR">MBR</a> of the first drive:
</p>
<pre>grub&gt; setup (hd0)
</pre>
<h3><span class="mw-headline" id="Installing_to_a_partition">Installing to a partition</span></h3>
<p>The following example installs GRUB to the first partition of the first drive:
</p>
<pre>grub&gt; setup (hd0,0)
</pre>
<p>After running <code>setup</code>, enter <code>quit</code> to exit the shell. If you chrooted, <a href="../en/Chroot.html" class="mw-redirect" title="Change root">exit your chroot and unmount partitions</a>. Now reboot to test.
</p>
<h3>
<span id="Alternate_method_.28grub-install.29"></span><span class="mw-headline" id="Alternate_method_(grub-install)">Alternate method (grub-install)</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This procedure is known to be less reliable, the recommended method is to use the GRUB shell.</div>
<p>Use the <code>grub-install</code> command followed by the location to install the bootloader.  For example to install the GRUB bootloader to the MBR of the first drive:
</p>
<pre># grub-install /dev/sda
</pre>
<p>GRUB will indicate whether it successfully installs. If it does not, you will have to use the GRUB shell method.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<p>Additional configuration notes.
</p>
<h3><span class="mw-headline" id="Framebuffer_resolution">Framebuffer resolution</span></h3>
<p>One can use the resolution given in the <code>menu.lst</code>, but you might want to use your LCD wide-screen at its full native resolution. Here is what you can do to achieve this:
</p>
<p>On <a href="https://en.wikipedia.org/wiki/VESA_BIOS_Extensions#Linux_video_mode_numbers" class="extiw" title="wikipedia:VESA BIOS Extensions">Wikipedia</a>, there is a list of extended framebuffer resolutions (i.e. beyond the ones in the VBE standard). 
</p>
<p>If the desired resolution does not work with the codes obtained from the table, it usually is because the graphics card manufacturers are free to choose any number they wish, as this is not part of the VBE 3 standard. These codes may change from one card to the other (possibly even for the same manufacturer).
</p>
<p>Instead of using that table, use one of the tools mentioned below to get the correct code:
</p>
<h4><span class="mw-headline" id="GRUB_recognized_value">GRUB recognized value</span></h4>
<p>This is an easy way to find the resolution code using only GRUB itself.
</p>
<p>On the kernel line, specify that the kernel should ask you which mode to use.
</p>
<pre>kernel /vmlinuz-linux root=/dev/sda1 ro <b>vga=ask</b>
</pre>
<p>Now reboot. GRUB will now present a list of suitable codes to use and the option to scan for even more.
</p>
<p>You can pick the code you would like to use (do not forget it, it is needed for the next step) and boot using it.
</p>
<p>Now replace <code>ask</code> in the kernel line with the correct one you have picked.
</p>
<p>e.g. the kernel line for <code>[369] 1680x1050x32</code> would be:
</p>
<pre>kernel /vmlinuz-linux root=/dev/sda1 ro <b>vga=0x369</b>
</pre>
<h4><span class="mw-headline" id="hwinfo">hwinfo</span></h4>
<ol>
<li>
<a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the  <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hwinfo">hwinfo</a></span> package.</li>
<li>Run <code>hwinfo --framebuffer</code> as root.</li>
<li>Pick up the code corresponding to the desired resolution.</li>
<li>Use the 6 digit code with 0x prefix in <code>vga=</code> kernel option in <code>menu.lst</code>. Or convert it to decimal to avoid the use of 0x prefix.</li>
</ol>
<p>Example output of <b>hwinfo</b>:
</p>
<pre>Mode 0x0364: 1440x900 (+1440), 8 bits
Mode 0x0365: 1440x900 (+5760), 24 bits
</pre>
<p>And the kernel line:
</p>
<pre>kernel /vmlinuz-linux root=/dev/sda1 ro <b>vga=0x0365</b>
</pre>
<h3><span class="mw-headline" id="Naming_partitions">Naming partitions</span></h3>
<h4><span class="mw-headline" id="By_Label">By Label</span></h4>
<p>If you alter (or plan to alter) partition sizes from time to time, you might want to consider defining your drive/partitions by a label.  You can label ext2, ext3, ext4 partitions by:
</p>
<pre>e2label <i>/dev/drive|partition</i> label
</pre>
<p>The label name can be up to 16 characters long but cannot have spaces for GRUB to understand it.  Then define it in your <code>menu.lst</code>:
</p>
<pre>kernel /boot/vmlinuz-linux root=/dev/disk/by-label/Arch_Linux ro
</pre>
<h4><span class="mw-headline" id="By_UUID">By UUID</span></h4>
<p>The <a href="../en/Persistent_block_device_naming.html#by-uuid" class="mw-redirect" title="UUID">UUID</a> (Universally Unique IDentifier) of a partition may be discovered with <code>blkid</code> or <code>ls -l /dev/disk/by-uuid</code>. It is defined in <code>menu.lst</code> with either:
</p>
<pre>kernel /boot/vmlinuz-linux root=/dev/disk/by-uuid/<i>uuid_number</i>
</pre>
<p>or:
</p>
<pre>kernel /boot/vmlinuz-linux root=UUID=<i>uuid_number</i>
</pre>
<h3>
<span id="Boot_as_root_.28single-user_mode.29"></span><span class="mw-headline" id="Boot_as_root_(single-user_mode)">Boot as root (single-user mode)</span>
</h3>
<p>At the boot loader, select an entry and edit it (<code>e</code> key). Append the following parameters to the kernel options:
</p>
<pre>[...] single init=/bin/bash
</pre>
<p>This will start in single-user mode (init 1), i.e. you will end up to a root prompt without being asked for password.
This may be useful for recovery features, like resetting the root password.
However, this is a huge security flaw if you have not set any <a href="#Password_protection">#Password protection</a> for grub.
</p>
<h3><span class="mw-headline" id="Password_protection">Password protection</span></h3>
<p>You can enable password protection in the GRUB configuration file for operating systems you wish to have protected.  Bootloader password protection may be desired if your BIOS lacks such functionality and you need the extra security.
</p>
<p>First, choose a password you can remember and then encrypt it:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># grub-md5-crypt</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> Password:
 Retype password:
 $1$ZOGor$GABXUQ/hnzns/d5JYqqjw
</pre>
<p>Then add your password to the beginning of the GRUB configuration file at <code>/boot/grub/menu.lst</code> (the password must be at the beginning of the configuration file for GRUB to be able to recognize it):
</p>
<pre># general configuration
timeout   5
default   0
color light-blue/black light-cyan/blue

password --md5 $1$ZOGor$GABXUQ/hnzns/d5JYqqjw
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Remember that Grub uses the standard QWERTY layout for input.</div>
<p>Then for each operating system you wish to protect, add the <code>lock</code> command:
</p>
<pre># (0) Arch Linux
title  Arch Linux
lock
root   (hd0,1)
kernel /boot/vmlinuz-linux root=/dev/disk/by-label/Arch_Linux ro
initrd /boot/initramfs-linux.img
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If you disable booting from other boot devices (like a CD drive) in the BIOS's settings and then password protect all your operating system entries, it could be difficult to re-enable booting back into the operating systems if the password is forgotten.</div>
<p>It is always possible to reset your BIOS settings by setting the appropriate jumper on the motherboard (see your motherboard's manual, as it is specific to every model). So in case other have access to the hardware, there is basically no way to prevent boot breakthroughs.
</p>
<h3><span class="mw-headline" id="Restart_with_named_boot_choice">Restart with named boot choice</span></h3>
<p>If you realize that you often need to switch to some other non-default OS (e.g. Windows) having to reboot and wait for the GRUB menu to appear is tedious. GRUB offers a way to record your OS choice when restarting instead of waiting for the menu, by designating a temporary new default which will be reset as soon as it has been used.
</p>
<p>Supposing a simple <code>menu.lst</code> setup like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/menu.lst</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># general configuration:
timeout 10
default 0
color light-blue/black light-cyan/blue

# (0) Arch
title  Arch Linux
root (hd0,1)
kernel /boot/vmlinuz-linux root=/dev/disk/by-label/ARCH ro
initrd /boot/initramfs-linux.img

# (1) Windows
title Windows XP
rootnoverify (hd0,0)
makeactive
chainloader +1</pre>
<p>Arch is the default (0). We want to restart in to Windows. Change <code>default 0</code> to <code>default saved</code> -- this will record the current default in a <code>default</code> file in the GRUB directory whenever the <b>savedefault</b> command is used. Now add the line <code>savedefault 0</code> to the bottom of the Windows entry. Whenever Windows is booted, it will reset the default to Arch, thus making changing the default to Windows temporary. 
</p>
<p>Now all that is needed is a way to easily change the default manually. This can be accomplished using the command <code>grub-set-default</code>. So, to reboot into Windows, enter the following commands:
</p>
<pre># grub-set-default 1
</pre>
<p>Then reboot.
</p>
<p>For ease of use, you might to wish to <a href="../en/Power_management.html#Using_sudo" title="Power management">setup sudo</a> and add <code>/sbin/grub-set-default</code> amongst the commands the user is allowed to issue without supplying a password.
</p>
<h3><span class="mw-headline" id="LILO_and_GRUB_interaction">LILO and GRUB interaction</span></h3>
<p>If the <a href="../en/LILO.html" title="LILO">LILO</a> package is installed on your system, <a href="../en/Pacman.html#Removing_packages" class="mw-redirect" title="Uninstall">uninstall</a> it. As some tasks (e.g. kernel compilation using <code>make all</code>) will make a LILO call, and LILO will then be installed over GRUB. LILO may have been included in your base system, depending on your installer media version and whether you selected/deselected it during the package selection stage.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Removing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lilo/">lilo</a></span><sup><small>AUR</small></sup> will not remove LILO from the MBR if it has been installed there; it will merely remove the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lilo/">lilo</a></span><sup><small>AUR</small></sup> package. The LILO bootloader installed to the MBR will be overwritten when GRUB (or another bootloader) is installed over it.</div>
<h3><span class="mw-headline" id="GRUB_boot_disk">GRUB boot disk</span></h3>
<p>First, format a floppy disk:
</p>
<pre># fdformat /dev/fd0
# mke2fs /dev/fd0
</pre>
<p>Now mount the disk:
</p>
<pre># mount -t ext2 /dev/fd0 /mnt/fl
</pre>
<p>Install GRUB to the disk:
</p>
<pre># grub-install --root-directory=/mnt/fl '(fd0)'
</pre>
<p>Copy your <code>menu.lst</code> file to the disk:
</p>
<pre># cp /boot/grub/menu.lst /mnt/fl/boot/grub/menu.lst
</pre>
<p>Now unmount your floppy:
</p>
<pre># umount /mnt/fl
</pre>
<p>Now you should be able to restart your computer with the disk in the drive and it should boot to GRUB. Make sure that your floppy disk is set to have higher priority than your hard drive when booting in your BIOS first, of course.
</p>
<p>See also: <a rel="nofollow" class="external text" href="https://www.supergrubdisk.org/">Super GRUB Disk</a>.
</p>
<h3><span class="mw-headline" id="Hide_GRUB_menu">Hide GRUB menu</span></h3>
<p>The <code>hiddenmenu</code> option can be used in order to hide the menu by default. That way no menu is displayed and the default option is going to be automatically selected after the timeout passes.
Still, you are able to press <code>Esc</code> and the menu shows up. To use it, just add to your <code>/boot/grub/menu.lst</code>:
</p>
<pre>hiddenmenu
</pre>
<h2><span class="mw-headline" id="Advanced_debugging">Advanced debugging</span></h2>
<p>See dedicated <a href="../en/General_troubleshooting.html#Boot_problems" class="mw-redirect" title="Boot debugging">article</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="GRUB_Error_17">GRUB Error 17</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  the solution below works also for GRUB Error 15</div>
<p><b>The first check to do is to unplug any external drive. Seems obvious, but sometimes we get tired ;)</b>
</p>
<p>If your partition table gets messed up, an unpleasant "GRUB error 17" message might be the only thing that greets you on your next reboot.  There are a number of reasons why the partition table could get messed up.  Commonly, users who manipulate their partitions with <a href="../en/Parted.html" class="mw-redirect" title="GParted">GParted</a> -- particularly logical drives -- can cause the order of the partitions to change.  For example, you delete <code>/dev/sda6</code> and resize <code>/dev/sda7</code>, then finally re-create what used to be <code>/dev/sda6</code> only now it appears at the bottom of the list, <code>/dev/sda9</code> for example.  Although the physical order of the partitions/logical drives has not changed, the order in which they are recognized has changed.
</p>
<p>Fixing the partition table is easy.  Boot from your Arch CD/DVD/USB, login as root and fix the partition table:
</p>
<pre># fdisk /dev/sda
</pre>
<p>Once in disk, enter e[x]tra/expert mode, [f]ix the partition order, then [w]rite the table and exit.
</p>
<p>You can verify that the partition table was indeed fixed by issuing an <code>fdisk -l</code>.  Now you just need to fix GRUB.  See the <a href="#Bootloader_installation">Bootloader installation</a> section.
</p>
<p>Basically you need to tell GRUB the correct location of your <code>/boot</code> then re-write GRUB to the <a href="../en/Partitioning.html#Master_Boot_Record" class="mw-redirect" title="MBR">MBR</a> on the disk.
</p>
<p>For example:
</p>
<pre># grub
</pre>
<pre>grub&gt; root (hd0,6)
grub&gt; setup (hd0)
grub&gt; quit
</pre>
<p>See <a rel="nofollow" class="external autonumber" href="https://stringofthoughts.wordpress.com/2009/05/24/grub-error-17-debianubuntu">[1]</a> for a more in-depth summary of this section.
</p>
<h3>
<span id=".2Fboot.2Fgrub.2Fstage1_not_read_correctly"></span><span class="mw-headline" id="/boot/grub/stage1_not_read_correctly">/boot/grub/stage1 not read correctly</span>
</h3>
<p>If you see this error message while trying to set up GRUB, and you are not using a fresh partition table, it is worth checking it.
</p>
<pre># fdisk -l /dev/sda
</pre>
<p>This will show you the partition table for <code>/dev/sda</code>. So check here, whether the "Id" values of your partitions are correct. 
The "System" column will show you the description of the "Id" values.
</p>
<p>If your boot partition is marked as being "HPFS/NTFS", for example, then you have to change it to "Linux". To do this, go to fdisk,
</p>
<pre># fdisk /dev/sda
</pre>
<p>change a partition's system id with <code>t</code>, select you partition number and type in the new system id (Linux = 83). 
You can also list all available system ids by typing <code>L</code> instead of a system id.
</p>
<p>If you have changed a partitions system id, you should [v]erify your partition table and then [w]rite it.
</p>
<p>Now try to set up GRUB again.
</p>
<p>See also the <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=799930">forum post</a> reporting this problem.
</p>
<h3><span class="mw-headline" id="Accidental_install_to_a_Windows_partition">Accidental install to a Windows partition</span></h3>
<p>If you accidentally install GRUB to a Windows partition, GRUB will write some information to the boot sector of the partition, erasing the reference to the Windows bootloader. (This is true for NTLDR the bootloader for Windows XP and earlier, unsure about later versions).
</p>
<p>To fix this you will need to use the Windows Recovery Console for your Windows release.  Because many computer manufacturers do not include this with their product (many choose to use a recovery partition) Microsoft has made them available for download. If you use XP, look at <a rel="nofollow" class="external text" href="https://web.archive.org/web/20120218152530/http://tips.vlaurie.com/2006/05/recovery-console-for-those-without-an-xp-disk/">this page</a> to be able to turn the floppy disks to a Recovery CD.  Boot the Recovery CD (or enable Windows Recovery mode) and run <code>fixboot</code> to repair the partition boot sector.  After this, you will have to install GRUB again---this time, to the MBR, not to the Windows partition---to boot Linux.
</p>
<p>See <a href="../en/Dual_boot_with_Windows.html#Restoring_a_Windows_boot_record" title="Dual boot with Windows">Dual boot with Windows#Restoring a Windows boot record</a> for more information.
</p>
<h3><span class="mw-headline" id="Edit_GRUB_entries_in_the_boot_menu">Edit GRUB entries in the boot menu</span></h3>
<p>Once you have selected and entry in the boot menu, you can edit it by pressing key <code>e</code>. Use tab-completion if you need to discover devices then <code>Esc</code> to exit. Then you can try to boot by pressing <code>b</code>. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> These settings <b>will not be saved</b>.</div>
<h3><span class="mw-headline" id="device.map_error">device.map error</span></h3>
<p>If an error is raised mentioning <code>/boot/grub/device.map</code> during installation or boot, run:
</p>
<pre># grub-install --recheck /dev/sda
</pre>
<p>to force GRUB to recheck the device map, even if it already exists. This may be necessary after resizing partitions or adding/removing drives.
</p>
<h3><span class="mw-headline" id="KDE_reboot_pull-down_menu_fails">KDE reboot pull-down menu fails</span></h3>
<p>If you have opened a sub-menu with the list of all operating systems configured in GRUB, selected one, and upon restart, you still booted your default OS, then you might want to check if you have the line:
</p>
<pre>default saved
</pre>
<p>in <code>/boot/grub/menu.lst</code>.
</p>
<h3>
<span id="GRUB_fails_to_find_or_install_to_any_virtio_.2Fdev.2Fvd.2A_or_other_non-BIOS_devices"></span><span class="mw-headline" id="GRUB_fails_to_find_or_install_to_any_virtio_/dev/vd*_or_other_non-BIOS_devices">GRUB fails to find or install to any virtio <i>/dev/vd*</i> or other non-BIOS devices</span>
</h3>
<p>I had trouble installing GRUB while installing Arch Linux in an virtual KVM machine using a virtio device for hard drive. To install GRUB, I figured out the following:
Enter a virtual console by typing <code>Ctrl+Alt+F2</code> or any other F-key for a free virtual console.
This assumes that your root file system is mounted in the folder <code>/mnt</code> and the boot file system is either mounted or stored in the folder <code>/mnt/boot</code>.
</p>
<p><b>1.</b> Assure that all needed GRUB files is present in your boot directory (assuming it is mounted in <code>/mnt/boot</code> folder), by issuing the command:
</p>
<pre># ls /mnt/boot/grub
</pre>
<p><b>2.</b> If the <code>/mnt/boot/grub</code> folder already contains all the needed files, jump to step 3. Otherwise, do the following commands (replacing <code>/mnt</code>, <code>your_kernel</code> and <code>your_initrd</code> with the real paths and file names). You should also have the <code>menu.lst</code> file written to this folder:
</p>
<pre># mkdir -p /mnt/boot/grub                # if the folder is not yet present
# cp -r /boot/grub/stage1 /boot/grub/stage2 /mnt/boot/grub
# cp -r your_kernel your_initrd /mnt/boot
</pre>
<p><b>3.</b> Start the GRUB shell with the following command:
</p>
<pre># grub --device-map=/dev/null
</pre>
<p><b>4.</b> Enter the following commands. Replace <code>/dev/vda</code>, and <code>(hd0,0)</code> with the correct device and partition corresponding to your setup.
</p>
<pre>device (hd0) /dev/vda
root (hd0,0)
setup (hd0)
quit
</pre>
<p><b>5.</b> If GRUB reports no error messages, then you probably are done. You also need to add appropriate modules to the ramdisk. For more information, please refer to <a href="../en/QEMU.html#Preparing_an_Arch_Linux_guest" title="QEMU">QEMU#Preparing an Arch Linux guest</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/">GNU GRUB</a></li>
<li><a rel="nofollow" class="external text" href="https://www.troubleshooters.com/linux/grub/index.htm">GRUB Grotto</a></li>
<li>
<a href="../en/General_troubleshooting.html#Boot_problems" class="mw-redirect" title="Boot debugging">Boot debugging</a> - Debugging with GRUB, set module values</li>
<li>
<a rel="nofollow" class="external text" href="https://www.linuxjournal.com/article/4622">Boot with GRUB</a> legacy</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Boot_loaders.html" title="Category:Boot loaders">Boot loaders</a></li>
<li><a href="../en/Category:System_recovery.html" title="Category:System recovery">System recovery</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=GRUB_Legacy&amp;oldid=817971">https://wiki.archlinux.org/index.php?title=GRUB_Legacy&amp;oldid=817971</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 8 October 2024, at 08:09.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
