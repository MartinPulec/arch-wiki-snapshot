<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Lenovo ThinkPad P14s (AMD) Gen 4 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Lenovo_ThinkPad_P14s_AMD_Gen_4 rootpage-Lenovo_ThinkPad_P14s_AMD_Gen_4 skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Firmware" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Firmware">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Firmware</div>
		</a>
		
		<ul id="toc-Firmware-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-CPU" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#CPU">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>CPU</div>
		</a>
		
		<ul id="toc-CPU-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Touchpad" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Touchpad">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Touchpad</div>
		</a>
		
		<ul id="toc-Touchpad-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Touchscreen" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Touchscreen">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Touchscreen</div>
		</a>
		
		<ul id="toc-Touchscreen-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Speakers" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Speakers">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Speakers</div>
		</a>
		
		<ul id="toc-Speakers-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-WiFi" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#WiFi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>WiFi</div>
		</a>
		
		<ul id="toc-WiFi-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Smartcard_reader" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Smartcard_reader">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Smartcard reader</div>
		</a>
		
		<ul id="toc-Smartcard_reader-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Fingerprint_reader" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Fingerprint_reader">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Fingerprint reader</div>
		</a>
		
		<ul id="toc-Fingerprint_reader-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Power_management" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Power_management">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Power management</div>
		</a>
		
			<button aria-controls="toc-Power_management-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Power management subsection</span>
			</button>
		
		<ul id="toc-Power_management-sublist" class="vector-toc-list">
			<li id="toc-S3_sleep_/_s2idle" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#S3_sleep_/_s2idle">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.1</span>S3 sleep / s2idle</div>
			</a>
			
			<ul id="toc-S3_sleep_/_s2idle-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hibernate" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hibernate">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.2</span>Hibernate</div>
			</a>
			
			<ul id="toc-Hibernate-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Battery_thresholds" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Battery_thresholds">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.3</span>Battery thresholds</div>
			</a>
			
			<ul id="toc-Battery_thresholds-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-AMD_P-State_EPP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#AMD_P-State_EPP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.4</span>AMD P-State EPP</div>
			</a>
			
			<ul id="toc-AMD_P-State_EPP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Power_Profiles_Daemon" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Power_Profiles_Daemon">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.5</span>Power Profiles Daemon</div>
			</a>
			
			<ul id="toc-Power_Profiles_Daemon-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Microphone_LED" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Microphone_LED">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>Microphone LED</div>
		</a>
		
		<ul id="toc-Microphone_LED-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Function_keys" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Function_keys">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">11</span>Function keys</div>
		</a>
		
		<ul id="toc-Function_keys-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">12</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Lenovo ThinkPad P14s (AMD) Gen 4</span></h1>
				</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<table class="wikitable" style="float: right;">

<tbody>
<tr>
<th>Hardware</th>
<th>PCI/USB ID</th>
<th>Working?
</th>
</tr>
<tr>
<td>GPU</td>
<td><code>1002:15bf</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Wifi</td>
<td><code>17cb:1103</code></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Wakes up sleep
</td>
</tr>
<tr>
<td>Bluetooth</td>
<td><code>10ab:9309</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Ethernet</td>
<td><code>10ec:8168</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Audio</td>
<td><code>1022:15e3</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td><a href="../en/TrackPoint.html" title="TrackPoint">TrackPoint</a></td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Touchpad</td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td><a href="../en/Touchscreen.html" title="Touchscreen">Touchscreen</a></td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Webcam</td>
<td><code>5986:118c</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td><a href="../en/Trusted_Platform_Module.html" class="mw-redirect" title="TPM">TPM</a></td>
<td></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td>Fingerprint reader</td>
<td><code>27c6:6594</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes
</td>
</tr>
<tr>
<td><a href="../en/Smartcards.html" title="Smartcards">Smartcard reader</a></td>
<td><code>2ce3:9563</code></td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">Untested
</td>
</tr>
</tbody>
</table>
<p>This article covers the installation and configuration of <a href="../en/Arch_Linux.html" title="Arch Linux">Arch Linux</a> on a <a href="../en/Laptop/Lenovo.html" class="mw-redirect" title="Lenovo">Lenovo</a> <a href="../en/Laptop/Lenovo.html" class="mw-redirect" title="ThinkPad">ThinkPad</a> P14s (AMD) Gen 4 laptop. With recent enough kernel the device works almost out of the box.
</p>
<p>For a general overview of laptop-related articles and recommendations, see <a href="../en/Laptop.html" title="Laptop">Laptop</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Firmware">Firmware</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> There is an issue that can leave your system in broken state when changing sleep states in BIOS. See <a href="../en/Lenovo_ThinkPad_T14_(AMD)_Gen_3.html#Firmware" title="Lenovo ThinkPad T14 (AMD) Gen 3">Lenovo ThinkPad T14 (AMD) Gen 3#Firmware</a>.</div>
<p>This model is fully compatible with <a href="../en/Fwupd.html" title="Fwupd">fwupd</a>.
</p>
<p><code>fwupdmgr get-devices</code> detects the System Firmware, UEFI BIOS, webcam, fingerprint sensor, CPU/GPU, TPM and the NVMe controller.
</p>
<h2><span class="mw-headline" id="CPU">CPU</span></h2>
<p>Since kernel 6.5, the AMD P-State EPP driver with "Active" profile is applied by default, no changes should be needed.
</p>
<p>In case you are getting GPU resets (black screen), check <a href="../en/Lenovo_ThinkPad_T14s_(AMD)_Gen_3.html#CPU" title="Lenovo ThinkPad T14s (AMD) Gen 3">Lenovo ThinkPad T14s (AMD) Gen 3#CPU</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can verify your <a href="../en/CPU_frequency_scaling.html" title="CPU frequency scaling">CPU frequency scaling</a> driver with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cpupower">cpupower</a></span> or <code>cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_driver</code>.</div>
<h2><span class="mw-headline" id="Touchpad">Touchpad</span></h2>
<p>To disable sleep wake-up from touchpad see <a href="../en/Lenovo_ThinkPad_T14s_(AMD)_Gen_3.html#Disable_wakeup_from_sleep_on_touchpad_activity" title="Lenovo ThinkPad T14s (AMD) Gen 3">Lenovo ThinkPad T14s (AMD) Gen 3#Disable wakeup from sleep on touchpad activity</a>.
</p>
<h2><span class="mw-headline" id="Touchscreen">Touchscreen</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Not all variations of this model have touchscreen.</div>
<p>The variation of this model with product code/name <code>21K50009CK</code> is equipped with InfoVision display with touchscreen capability and it works out of the box.
</p>
<p>The respective touchscreen input can be found as <a href="../en/I2C.html" title="I2C">I2C</a> device <code>ELAN901C:00 04F3:2EDE</code>.
</p>
<p>See <a href="../en/Touchscreen.html" title="Touchscreen">Touchscreen</a> for other information.
</p>
<h2><span class="mw-headline" id="Speakers">Speakers</span></h2>
<p>Speakers work out of the box. However, they will not have the same sound quality as on Windows due to the missing Dolby Atmos Convolver.
</p>
<h2><span class="mw-headline" id="WiFi">WiFi</span></h2>
<p>A specific ath11k firmware version for the hardware in this laptop <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=217239">causes</a> suspend during lid close to immediately wake from sleep.
</p>
<p>This can be tested physically by closing the lid, and noting if the LED on the lid flickers and remains solid (meaning the device is not sleeping), or flashes periodically (meaning the device is sleeping). If the LED remains solid with the lid closed, suspend is not working properly, and your laptop will drain battery while closed.
</p>
<p>To check if you have the bad firmware version, you can check the kernel logs for this firmware version:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ journalctl -k --grep "ath11k_pci" | grep fw_version</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ath11k_pci 0000:02:00.0: fw_version 0x110b196e fw_build_timestamp 2022-12-22 12:54 fw_build_id <b>WLAN.HSP.1.1-03125-QCAHSPSWPL_V1_V2_SILICONZ_LITE-3.6510.23</b></pre>
<p>Both 3.6510.23 and 3.6510.36 have the issue.
</p>
<p>Various workarounds are possible, including using <a href="../en/Network_configuration/Wireless.html#Rfkill_caveat" class="mw-redirect" title="Rfkill">rfkill</a> or <a href="../en/Kernel_module.html" class="mw-redirect" title="Modprobe">modprobe</a> to disable or remove the WiFi kernel module during suspend to prevent the issue. See <a href="../en/Lenovo_ThinkPad_T14s_(AMD)_Gen_3.html#Network_/_WiFi" title="Lenovo ThinkPad T14s (AMD) Gen 3">Lenovo ThinkPad T14s (AMD) Gen 3#Network / WiFi</a> for one such solution.
</p>
<p>It is also possible to downgrade to 3.6510.16 by replacing the firmware files in-place. See <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=217239#c1">this comment</a> for details. To avoid having to repeat these steps manually after each update of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span>, use the <code>NoExtract</code> array in <code>pacman.conf</code> with a wildcard to block their installation, but keep regularly checking the issue thread to see if the fix has been merged upstream. See <a href="../en/Pacman.html#Skip_files_from_being_installed_to_system" title="Pacman">pacman#Skip files from being installed to system</a>.
</p>
<h2><span class="mw-headline" id="Smartcard_reader">Smartcard reader</span></h2>
<p>Seems to work and read cards. Follow instructions from <a href="../en/Smartcards.html" title="Smartcards">smartcards</a>.
</p>
<h2><span class="mw-headline" id="Fingerprint_reader">Fingerprint reader</span></h2>
<p>Works as expected. Follow <a href="../en/Fprint.html" class="mw-redirect" title="Fprintd">fprintd</a>
</p>
<h2><span class="mw-headline" id="Power_management">Power management</span></h2>
<h3>
<span id="S3_sleep_.2F_s2idle"></span><span class="mw-headline" id="S3_sleep_/_s2idle">S3 sleep / s2idle</span>
</h3>
<p>S3 (<code>deep</code>) sleep is not supported by this CPU anymore. However, s2idle works out of the box and causes no problems with sleep / hibernation.
</p>
<p>The sleep power consumption with s2idle (or  S0/<code>S0ix</code>/<code>Modern Standby</code>) can vary as it depends on the running OS and how well it can put peripherals into sleep mode.
</p>
<h3><span class="mw-headline" id="Hibernate">Hibernate</span></h3>
<p>Works fine. If you face WiFi issues after hibernation see <a href="#WiFi">#WiFi</a>.
</p>
<h3><span class="mw-headline" id="Battery_thresholds">Battery thresholds</span></h3>
<p>Battery charge thresholds can be correctly set with <a href="../en/TLP.html" title="TLP">TLP</a> or within <a href="../en/KDE.html" title="KDE">KDE</a> / <a href="../en/GNOME.html" title="GNOME">GNOME</a> power management.
</p>
<h3><span class="mw-headline" id="AMD_P-State_EPP">AMD P-State EPP</span></h3>
<p>If you are using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=power-profiles-daemon">power-profiles-daemon</a></span>, please note that the current stable release of it do not fully support AMD P-State EPP. You can switch to <a href="../en/TLP.html" title="TLP">TLP</a> version 1.6 or newer that supports AMP P-State features, or fix this using an udev rule + script to apply different AMD P-State EPP states depending on whether the laptop is running on battery or charger.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-battery.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="power_supply", ATTR{online}=="0", RUN+="/usr/local/bin/on_battery.sh"
SUBSYSTEM=="power_supply", ATTR{online}=="1", RUN+="/usr/local/bin/on_ac.sh"</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/on_battery.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/bash

# Change Dirty Writeback Centisecs according to TLP / Powertop
echo '5000' &gt; '/proc/sys/vm/dirty_writeback_centisecs';

# Change AMD Paste EPP energy preference
# Available profiles: performance, balance_performance, balance_power, power
echo 'balance_power' | tee /sys/devices/system/cpu/cpu*/cpufreq/energy_performance_preference;

# If required, change cpu scaling governor
# Possible options are: conservative ondemand userspace powersave performance schedutil
#cpupower frequency-set -g powersave;

# Platform Profiles Daemon will do this automatically, based on your settings in KDE / GNOME
# You can how ever, set this manually as well
# Possible profile options are: performance, powersave, low-power
#echo 'powersave' &gt; '/sys/firmware/acpi/platform_profile';

# Radeon AMDGPU DPM switching does not seem to be supported.
# Possible options should be: battery, balanced, performance, auto
#echo 'battery' &gt; '/sys/class/drm/card0/device/power_dpm_state'; 

# Should always be auto (TLP default = auto)
# Possible options are: auto, high, low
#echo 'auto' &gt; '/sys/class/drm/card0/device/power_dpm_force_performance_level';

# Runtime PM for PCI Device to auto
find /sys/bus/pci/devices/*/power -name control -exec sh -c 'echo "auto" &gt; "$1"' _ {} \;
for i in $(find /sys/devices/pci0000\:00/0* -maxdepth 3 -name control); do
    echo auto &gt; $i;
done</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/on_ac.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/bash

# Change Dirty Writeback Centisecs according to TLP / Powertop
echo '500' &gt; '/proc/sys/vm/dirty_writeback_centisecs';

# Change AMD Paste EPP energy preference
# Available profiles: performance, balance_performance, balance_power, power
echo 'balance_performance' | tee /sys/devices/system/cpu/cpu*/cpufreq/energy_performance_preference;

# If required, change cpu scaling governor
# Possible options are: conservative ondemand userspace powersave performance schedutil
#cpupower frequency-set -g performance;

# Platform Profiles Daemon will do this automatically, based on your settings in KDE / GNOME
# You can how ever, set this manually as well
# Possible profile options are: performance, powersave, low-power
#echo 'performance' &gt; '/sys/firmware/acpi/platform_profile';

# Radeon AMDGPU DPM switching does not seem to be supported.
# Possible options should be: battery, balanced, performance, auto
#echo 'performance' &gt; '/sys/class/drm/card0/device/power_dpm_state';

# Should always be auto (TLP default = auto)
# Possible options are: auto, high, low
#echo 'auto' &gt; '/sys/class/drm/card0/device/power_dpm_force_performance_level';

# Runtime PM for PCI Device to on
find /sys/bus/pci/devices/*/power -name control -exec sh -c 'echo "on" &gt; "$1"' _ {} \;
for i in $(find /sys/devices/pci0000\:00/0* -maxdepth 3 -name control); do
    echo on &gt; $i;
done</pre>
<p>Additionally make <code>/usr/local/bin/on_battery.sh</code> and <code>/usr/local/bin/on_ac.sh</code> <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>.
</p>
<h3><span class="mw-headline" id="Power_Profiles_Daemon">Power Profiles Daemon</span></h3>
<p>The package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=power-profiles-daemon">power-profiles-daemon</a></span> is the standard power management service for <a href="../en/KDE.html#Power_management" title="KDE">KDE#Power management</a> and <a href="../en/GNOME.html#Power_modes" title="GNOME">GNOME#Power modes</a>. 
It conflicts with <a href="../en/TLP.html" title="TLP">TLP</a> and the reasons for that are described here: <a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/upower/power-profiles-daemon#why-not">https://gitlab.freedesktop.org/upower/power-profiles-daemon#why-not</a>
</p>
<ol>
<li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=power-profiles-daemon">power-profiles-daemon</a></span>
</li>
<li>
<a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> the <code>power-profiles-daemon</code> service.</li>
</ol>
<h2><span class="mw-headline" id="Microphone_LED">Microphone LED</span></h2>
<p>If the Mic LED seems to stay always on see: <a href="../en/Lenovo_ThinkPad_T14_(AMD)_Gen_3.html#Mute_Mic_LED_always_on" title="Lenovo ThinkPad T14 (AMD) Gen 3">Lenovo ThinkPad T14 (AMD) Gen 3#Mute Mic LED always on</a>.
</p>
<h2><span class="mw-headline" id="Function_keys">Function keys</span></h2>
<table class="wikitable">

<tbody>
<tr>
<th>Key
</th>
<th>Visible?<sup>1</sup>
</th>
<th>Marked?<sup>2</sup>
</th>
<th>Effect
</th>
<th>Note
</th>
</tr>
<tr>
<td><code>Fn</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="3" style="background: #ffa; color: inherit; vertical-align: middle; text-align: center;">-</td>
<td><code>XF86WakeUp</code></td>
<td>Can be swapped with left Ctrl in BIOS
</td>
</tr>
<tr>
<td><code>Fn+4</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><code>XF86Sleep</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+Esc</code></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td>Toggles Fn lock</td>
<td>Has status led
</td>
</tr>
<tr>
<td><code>Fn+F1</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86AudioMute</code></td>
<td>Has status led
</td>
</tr>
<tr>
<td><code>Fn+F2</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86AudioLowerVolume</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+F3</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86AudioRaiseVolume</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+F4</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86AudioMicMute</code></td>
<td>Has status led
</td>
</tr>
<tr>
<td><code>Fn+F5</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86MonBrightnessDown</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+F6</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86MonBrightnessUp</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+F7</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86Display</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+F8</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86WLAN</code></td>
<td>Marked with airplane mode
</td>
</tr>
<tr>
<td><code>Fn+F9</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86Messenger</code></td>
<td>Marked with message box
</td>
</tr>
<tr>
<td><code>Fn+F10</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86Go</code></td>
<td>Marked with phone answer call
</td>
</tr>
<tr>
<td><code>Fn+F11</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>Cancel</code></td>
<td>Marked with phone end call
</td>
</tr>
<tr>
<td><code>Fn+F12</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86Favorites</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+Tab</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><code>XF86FullScreen</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+Left</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><code>Home</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+Right</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><code>End</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+P</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><code>Pause</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+S</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><code>Sys_Req</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+K</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><code>Scroll_Lock</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+B</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td><code>Break</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+PrtSc</code></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td><code>XF86Launch2</code></td>
<td>
</td>
</tr>
<tr>
<td><code>Fn+Space</code></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td>Change keyboard backlight level</td>
<td>
</td>
</tr>
</tbody>
</table>
<ol>
<li>The key is visible to <a href="../en/Keyboard_input.html#Identifying_keycodes_in_Xorg" class="mw-redirect" title="Xev">xev</a> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wev">wev</a></span> and similar tools.</li>
<li>The physical key has a symbol on it, which describes its function.</li>
</ol>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/Lenovo_ThinkPad_T14s_(AMD)_Gen_3.html" title="Lenovo ThinkPad T14s (AMD) Gen 3">Lenovo ThinkPad T14s (AMD) Gen 3</a></li>
<li><a href="../en/Lenovo_ThinkPad_T14_(AMD)_Gen_3.html" title="Lenovo ThinkPad T14 (AMD) Gen 3">Lenovo ThinkPad T14 (AMD) Gen 3</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Lenovo.html" title="Category:Lenovo">Lenovo</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_P14s_(AMD)_Gen_4&amp;oldid=802830">https://wiki.archlinux.org/index.php?title=Lenovo_ThinkPad_P14s_(AMD)_Gen_4&amp;oldid=802830</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 10 March 2024, at 14:31.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
