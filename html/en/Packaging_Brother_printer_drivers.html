<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Packaging Brother printer drivers - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Packaging_Brother_printer_drivers rootpage-Packaging_Brother_printer_drivers skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Creating_a_PKGBUILD_from_a_.deb" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Creating_a_PKGBUILD_from_a_.deb">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Creating a PKGBUILD from a .deb</div>
		</a>
		
		<ul id="toc-Creating_a_PKGBUILD_from_a_.deb-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Creating_a_PKGBUILD_from_a_.rpm" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Creating_a_PKGBUILD_from_a_.rpm">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Creating a PKGBUILD from a .rpm</div>
		</a>
		
			<button aria-controls="toc-Creating_a_PKGBUILD_from_a_.rpm-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Creating a PKGBUILD from a .rpm subsection</span>
			</button>
		
		<ul id="toc-Creating_a_PKGBUILD_from_a_.rpm-sublist" class="vector-toc-list">
			<li id="toc-Other_changes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Other_changes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Other changes</div>
			</a>
			
			<ul id="toc-Other_changes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-x86_64" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#x86_64">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>x86_64</div>
		</a>
		
		<ul id="toc-x86_64-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Packaging Brother printer drivers</span></h1>
				</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> This page was written before the i686 architecture stopped being supported. As such, it provides examples with i386 packages and packages them without taking <a href="../en/32-bit_package_guidelines.html" title="32-bit package guidelines">32-bit package guidelines</a> into consideration. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Packaging_Brother_printer_drivers.html">Talk:Packaging Brother printer drivers</a>)</div>
</div>
<p>Brother supplies Linux drivers for its printers, but they are provided as <i>.rpm</i> and/or <i>.deb</i> packages only. This article explains what adjustments to the contents of the DEB and RPM packages supplied by Brother will need to be made to create a <a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a> for the printer driver. Additional example PKGBUILDs for Brother printers can be found by searching in the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.
</p>
<p><a href="../en/CUPS.html" title="CUPS">CUPS</a> handles printers using a <i>.ppd</i> file and a filter binary. Once those two files are installed, the printer can be <a href="../en/CUPS.html#Usage" title="CUPS">added</a> in CUPS.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Creating_a_PKGBUILD_from_a_.deb">Creating a PKGBUILD from a .deb</span></h2>
<p>Brother is offering a "Driver Install Tool" as well as two <i>.deb</i> packages. 
</p>
<p>One is the LPR driver and the other one a CUPS wrapper (running on top of LPR driver). Both can be found on Brother's "Support &amp; Downloads" page (e.g. for <a rel="nofollow" class="external text" href="https://support.brother.com/g/b/producttop.aspx?c=ca&amp;lang=en&amp;prod=hll9200cdw_us_as_cn">HL-L9200CDW</a>). 
</p>
<p>It is possible to create a PKGBUILD that will automatically download and install the <i>.deb</i> packages directly from the URL provided by Brother. Therefore you will need to obtain the direct download links for both <i>.deb</i> packages from brothers website (e.g. for HL-L9200CDW you have <a rel="nofollow" class="external text" href="https://download.brother.com/welcome/dlf101047/hll9200cdwlpr-1.1.2-1.i386.deb">the LPR driver</a> and <a rel="nofollow" class="external text" href="https://download.brother.com/welcome/dlf101045/hll9200cdwcupswrapper-1.1.3-1.i386.deb">the CUPS wrapper</a>).
</p>
<p>Once you have obtained the download URLs for both <i>.deb</i> packages, use existing PKGBUILD files from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/brother-hll8360cdw-lpr-bin/">brother-hll8360cdw-lpr-bin</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/brother-hll8360cdw-cups-bin/">brother-hll8360cdw-cups-bin</a></span><sup><small>AUR</small></sup> as templates. You will need to adjust the package name. Change <code>url=</code> to the URL of Brother's support page for your specific printer model, <code>source=</code> needs to be adjusted to the URL of the <i>.deb</i> package. The following PKGBUILD example has been based on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/brother-hll8360cdw-cups-bin/">brother-hll8360cdw-cups-bin</a></span><sup><small>AUR</small></sup> but has been adjusted for HL-L9200CDW LPR printer driver:
</p>
<pre># Maintainer: <i>John Doe &lt;joe@example.com&gt;</i>
pkgname=<i>brother-hll9200cdw-lpr-bin</i>
pkgver=<i>1.1.2</i>
pkgrel=1
pkgdesc="<i>LPR driver for Brother HL-L9200CDW(T) printer</i>"
arch=("i686" "x86_64")
url="<i>https://support.brother.com/g/b/producttop.aspx?c=ca&amp;lang=en&amp;prod=hll9200cdw_us_as_cn</i>"
license=("EULA")
source=("<i>http://www.brother.com/pub/bsc/linux/packages/hll9200cdwlpr-1.1.2-1.i386.deb</i>")
md5sums=("<i>30124df7d49362906a2a118eff3c710e</i>")
package() {
        tar -xf data.tar.gz -C "${pkgdir}"
}</pre>
<p>Do not forget to update the md5sum. The pkgver version should be the same version as Brother's printer drivers (please note versions might differ for LPR and CUPS wrapper). Create the PKGBUILD file for the CUPS wrapper, too:
</p>
<pre># Maintainer: <i>John Doe &lt;joe@example.com&gt;</i>
pkgname=<i>brother-hll9200cdw-cups-bin</i>
pkgver=<i>1.1.3</i>
pkgrel=1
pkgdesc="<i>CUPS wrapper for Brother HL-L9200CDW(T) printer</i>"
arch=("i686" "x86_64")
url="<i>https://support.brother.com/g/b/producttop.aspx?c=ca&amp;lang=en&amp;prod=hll9200cdw_us_as_cn</i>"
license=("EULA")
source=("<i>http://www.brother.com/pub/bsc/linux/packages/hll9200cdwcupswrapper-1.1.3-1.i386.deb</i>")
md5sums=("<i>0a802088aac7236a3c309b2b46b37f11</i>")
package() {
       tar -xf data.tar.gz -C "${pkgdir}"
}</pre>
<p>Finally, use <a href="../en/Makepkg.html" title="Makepkg">makepkg</a> to test/install your newly created PKGBUILD file(s). If everything works, do not forget to publish your new driver to AUR. See <a href="../en/AUR_submission_guidelines.html" title="AUR submission guidelines">AUR submission guidelines</a> for the details.
</p>
<h2><span class="mw-headline" id="Creating_a_PKGBUILD_from_a_.rpm">Creating a PKGBUILD from a .rpm</span></h2>
<p>Unfortunately, Brother's drivers have some issues:
</p>
<ul>
<li>The CUPS driver is built on top of the lpr driver.</li>
<li>The CUPS driver package contains a single installation shell script with an embedded ppd and filter. It is executed by rpm during installation. It extracts the ppd and filter, and performs some installation procedures in a Red Hat-specific way.</li>
<li>The CUPS driver package uses paths that are not compliant with the <a href="../en/Arch_package_guidelines.html" class="mw-redirect" title="Arch packaging standards">Arch packaging standards</a>.</li>
</ul>
<p>These issues can be worked around.
</p>
<ul>
<li>The lpr driver does not need to be installed, so the PKGBUILD can just extract the files in the lpr driver's RPM package.</li>
<li>The CUPS driver's RPM should contain a single shell script. For instance, for the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/brother-hl2030/">brother-hl2030</a></span><sup><small>AUR</small></sup> package, the PKGBUILD changes three things:
<ol>
<li>The paths are changed.</li>
<li>All commands are disabled except "<code>cat &lt;&lt;EOF</code>" or "<code>echo &gt; ...</code>" or whatever there is that emits *.ppd or filter to separate file. It was done by wrapping irrelevant instructions by <code>if false; then ... fi</code>.</li>
<li>The target file names for the ppd and filter are changed so they are installed into the same directory as the PKGBUILD. Note that paths to the embedded filter where also changed.</li>
</ol>
</li>
<li>To fix the paths to conform to the <a href="../en/Arch_package_guidelines.html" class="mw-redirect" title="Arch packaging standards">Arch packaging standards</a>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sed">sed</a></span> or similar can be used on all text files unpacked from both the lpr and CUPS drivers. Look at the patch in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/brother-hl2030/">brother-hl2030</a></span><sup><small>AUR</small></sup> package to check which files are affected.</li>
</ul>
<p>Effectively after the changes described above the script will just output a ppd and a filter to some known location. The PKGBUILD will then copy them to the proper directories in <code>$pkgdir</code>:
</p>
<pre>install -m 644 -D ppd "${pkgdir}/usr/share/cups/model/HL2030.ppd"
install -m 755 -D filter  "${pkgdir}/usr/lib/cups/filter/brlpdwrapperHL2030"
</pre>
<p>The lpr driver files will also need to be copied into <code>$pkgdir</code>!
</p>
<h3><span class="mw-headline" id="Other_changes">Other changes</span></h3>
<p>Edit the installation script:
</p>
<pre>-#PSTOPSFILTER=`which pstops`
+PSTOPSFILTER='/usr/lib/cups/filter/pstops'
</pre>
<p>As pstops is not installed in a standard location, the path will need to be hard-coded.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> The original author "could not remember" why this is needed, or whether it was required at all (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Packaging_Brother_printer_drivers.html">Talk:Packaging Brother printer drivers</a>)</div>
</div>
<p>This may also need to be added.
</p>
<pre>+[psconvert2]
+pstops=/usr/lib/cups/filter/pstops
</pre>
<h2><span class="mw-headline" id="x86_64">x86_64</span></h2>
<p>Because some of the supplied binaries are 32 bit only, on an x86_64 system some additional <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> packages such as a 32 bit version of glibc (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-glibc">lib32-glibc</a></span>) may need to be installed.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Printers.html" title="Category:Printers">Printers</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Packaging_Brother_printer_drivers&amp;oldid=737342">https://wiki.archlinux.org/index.php?title=Packaging_Brother_printer_drivers&amp;oldid=737342</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 12 July 2022, at 16:03.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
