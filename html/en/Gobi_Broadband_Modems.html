<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Gobi Broadband Modems - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Gobi_Broadband_Modems rootpage-Gobi_Broadband_Modems skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Device_identification" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Device_identification">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Device identification</span>
			</div>
		</a>
		
		<ul id="toc-Device_identification-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-gobi_loader" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#gobi_loader">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>gobi_loader</span>
			</div>
		</a>
		
		<ul id="toc-gobi_loader-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Manage_Connection_in_Network_Manager" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Manage_Connection_in_Network_Manager">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Manage Connection in Network Manager</span>
			</div>
		</a>
		
		<ul id="toc-Manage_Connection_in_Network_Manager-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Connection" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Connection">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Connection</span>
			</div>
		</a>
		
			<button aria-controls="toc-Connection-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Connection subsection</span>
			</button>
		
		<ul id="toc-Connection-sublist" class="vector-toc-list">
			<li id="toc-wvdial" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#wvdial">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>wvdial</span>
				</div>
			</a>
			
			<ul id="toc-wvdial-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Gobi Broadband Modems</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Gobi_%E3%83%96%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%B3%E3%83%89%E3%83%A2%E3%83%87%E3%83%A0" title="Gobi ブロードバンドモデム – 日本語" lang="ja" hreflang="ja" data-title="Gobi ブロードバンドモデム" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p>From <a href="https://en.wikipedia.org/wiki/Qualcomm_Gobi" class="extiw" title="wikipedia:Qualcomm Gobi">Wikipedia</a>: 
</p>
<dl><dd>Qualcomm Gobi is a family of embedded mobile broadband modem products by Qualcomm.</dd></dl>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Device_identification">Device identification</span></h2>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usbutils">usbutils</a></span> and then examine the output of
</p>
<pre>$ lsusb
</pre>
<p>which will show the vendor and product IDs of the device.
</p>
<p>For example, on a HP un2430 modem:
</p>
<pre>Bus 001 Device 005: ID 03f0:371d Hewlett-Packard 
</pre>
<p>The device is detected by the qcserial module, if not, you are going to have to recompile the qcserial module with your added product and vendor id.
</p>
<p>Alternatively you can add the Product and Vendor ID by writing them into the <code>new_id</code> file (best both at the same time because most Gobi modules switch the Product ID when the Firmware is loaded).
For example on a Gobi2K with the Vendor ID <code>04da</code> and the Product IDs <code>250e</code> (waiting for Firmware) and <code>250f</code> (firmware loaded)
</p>
<pre># echo "04da 250e" &gt; /sys/bus/usb-serial/drivers/qcserial/new_id
# echo "04da 250f" &gt; /sys/bus/usb-serial/drivers/qcserial/new_id
</pre>
<p>note that this has to be repeated when you reload the qcserial module or reboot/shutdown.
</p>
<h2><span class="mw-headline" id="gobi_loader">gobi_loader</span></h2>
<p>From <a rel="nofollow" class="external text" href="https://github.com/kicer/gobi_loader">the developer GitHub page</a>: 
</p>
<dl><dd>
<i>gobi_loader</i> is a firmware loader for Qualcomm Gobi USB chipsets. These devices appear in an uninitialized state when power is applied and require firmware to be loaded before they can be used as modems. <i>gobi_loader</i> adds a <a href="../en/Udev.html#About_udev_rules" class="mw-redirect" title="Udev rule">udev rule</a> that will trigger loading of the firmware and make the modem usable.</dd></dl>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gobi-loader/">gobi-loader</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gobi-firmware/">gobi-firmware</a></span><sup><small>AUR</small></sup>.
</p>
<p>After installation, you should enter your product and vendor id in the <code>/lib/udev/rules.d/60-gobi.rules</code>
</p>
<p>Then a simple reload of the qcserial module:
</p>
<pre># rmmod qcserial
# modprobe qcserial
</pre>
<h2><span class="mw-headline" id="Manage_Connection_in_Network_Manager">Manage Connection in Network Manager</span></h2>
<p><a href="../en/Mobile_broadband_modem.html#ModemManager" class="mw-redirect" title="ModemManager">ModemManager</a> is required for network manager to detect any mobile broadband devices.
</p>
<p>This needs to be <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Started/enabled">started/enabled</a>. As soon as they are started the Mobile Broadband option will be available from the Network Manager Applet.
</p>
<p>Make sure <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mobile-broadband-provider-info">mobile-broadband-provider-info</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nm-connection-editor">nm-connection-editor</a></span> are installed.
</p>
<p>To use this quite old modem, you need to blacklist qmi_wwan and cdc_wdm modules from loading into [modern] Linux kernel. Else, if these modules are loaded, ModemManager recognizes this modem as something new with QMI interface, and then complains about too small versions of some QMI services. <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/mobile-broadband/ModemManager/issues/69">Source</a>
</p>
<h2><span class="mw-headline" id="Connection">Connection</span></h2>
<h3><span class="mw-headline" id="wvdial">wvdial</span></h3>
<p><i>See main article: <a href="../en/Wvdial.html" title="Wvdial">wvdial</a></i>
</p>
<p>The general procedure is to switch the device into modem mode, make sure the <code>ttyUSB</code> device(s) are recognized by the qcserial kernel module, and then to run <i>wvdial</i> to dial, connect and start <i>pppd</i>.
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wvdial">wvdial</a></span>. The configuration file <code>/etc/wvdial.conf</code> will in general depend on which device you have and which mobile network you are connecting to. A single <code>wvdial.conf</code> can be defined with named sections to be usable with several USB modems and networks, should you need them.
</p>
<p>Run:
</p>
<pre># wvdialconf
</pre>
<p>which will attempt to write <code>/etc/wvdial.conf</code> correctly. You will need to add the user, password and Access Point Name (APN). You can obtain these from your network provider, from other users via published <code>wvdial.confs</code>, or by logging the USB tty traffic under another operating system (e.g. Sysinternals' Portmon).
</p>
<p>An example of <code>/etc/wvdial.conf</code> looks like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wvdial.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Dialer status]
Init1 = AT+CPIN?
Init2 = ATI
Modem = /dev/ttyUSB1

[Dialer pin]
Modem = /dev/ttyUSB1
Init1 = AT+CPIN=1234

[Dialer wwan]
Init1 = ATZ
Init2 = AT+CGDCONT=1,"IP","data.apn.com"
Stupid Mode = yes
Phone = *99***1#
New PPPD = yes
Modem = /dev/ttyUSB1
Username = XXXXXX
Dial Command = ATDT
Password = XXXXXX
Baud = 460800</pre>
<p>To simplify the procedure, one can take the SIM card out and disable the PIN so <code>wvdial pin</code> is not needed before connecting to the internet.
</p>
<p>Often there will be several devices (at <code>/dev/ttyUSB0</code>, <code>/dev/ttyUSB1</code>, <code>/dev/ttyUSB2</code> for example). If in doubt about which to use, try each of them in turn. Once the configuration files are prepared, the internet connection is established by running
</p>
<pre>$ wvdial <i>section</i>
</pre>
<p>The final wvdial command should start pppd and the obtained IP address should be visible in the terminal output. At that point the internet connection should be live, which can be easily checked with a web browser or by pinging an external IP address.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/Mobile_broadband_modem.html" class="mw-redirect" title="USB 3G Modem">USB 3G Modem</a></li>
<li><a href="../en/Wvdial.html" class="mw-redirect" title="Allow users to dial with wvdial">Allow users to dial with wvdial</a></li>
<li><a href="../en/Huawei_EG162G_(Idea_netsetter).html" class="mw-redirect" title="Idea netsetter(Huawei EG162G)">Idea netsetter(Huawei EG162G)</a></li>
<li><a href="../en/ZTE_MF626_/_MF636.html" class="mw-redirect" title="ZTE MF636">ZTE MF636</a></li>
<li><a href="../en/Ppp/Mobile_broadband_modem.html" class="mw-redirect" title="3G and GPRS modems with pppd alone">3G and GPRS modems with pppd alone</a></li>
<li><a href="../en/Huawei_E1550_3G_modem.html" title="Huawei E1550 3G modem">Huawei E1550 3G modem</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Modems.html" title="Category:Modems">Modems</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Gobi_Broadband_Modems&amp;oldid=777908">https://wiki.archlinux.org/index.php?title=Gobi_Broadband_Modems&amp;oldid=777908</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 13 May 2023, at 12:30.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
