<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>cgit - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Cgit rootpage-Cgit skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration_of_web_server" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration_of_web_server">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration of web server</div>
		</a>
		
			<button aria-controls="toc-Configuration_of_web_server-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration of web server subsection</span>
			</button>
		
		<ul id="toc-Configuration_of_web_server-sublist" class="vector-toc-list">
			<li id="toc-Apache" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Apache">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Apache</div>
			</a>
			
			<ul id="toc-Apache-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Lighttpd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Lighttpd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Lighttpd</div>
			</a>
			
			<ul id="toc-Lighttpd-sublist" class="vector-toc-list">
				<li id="toc-Lighttpd_sub-domain" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Lighttpd_sub-domain">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>Lighttpd sub-domain</div>
			</a>
			
			<ul id="toc-Lighttpd_sub-domain-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Nginx" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Nginx">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Nginx</div>
			</a>
			
			<ul id="toc-Nginx-sublist" class="vector-toc-list">
				<li id="toc-Using_fcgiwrap" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_fcgiwrap">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.1</span>Using fcgiwrap</div>
			</a>
			
			<ul id="toc-Using_fcgiwrap-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_uwsgi" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_uwsgi">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.2</span>Using uwsgi</div>
			</a>
			
			<ul id="toc-Using_uwsgi-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Caddy" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Caddy">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Caddy</div>
			</a>
			
			<ul id="toc-Caddy-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-h2o" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#h2o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.5</span>h2o</div>
			</a>
			
			<ul id="toc-h2o-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration_of_cgit" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration_of_cgit">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Configuration of cgit</div>
		</a>
		
			<button aria-controls="toc-Configuration_of_cgit-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration of cgit subsection</span>
			</button>
		
		<ul id="toc-Configuration_of_cgit-sublist" class="vector-toc-list">
			<li id="toc-Basic_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Basic_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Basic configuration</div>
			</a>
			
			<ul id="toc-Basic_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Adding_repositories" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Adding_repositories">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Adding repositories</div>
			</a>
			
			<ul id="toc-Adding_repositories-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Syntax_highlighting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Syntax_highlighting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Syntax highlighting</div>
			</a>
			
			<ul id="toc-Syntax_highlighting-sublist" class="vector-toc-list">
				<li id="toc-Using_python-pygments" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_python-pygments">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.1</span>Using python-pygments</div>
			</a>
			
			<ul id="toc-Using_python-pygments-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_highlight" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_highlight">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.2</span>Using highlight</div>
			</a>
			
			<ul id="toc-Using_highlight-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Formatting_the_about_page" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Formatting_the_about_page">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Formatting the about page</div>
			</a>
			
			<ul id="toc-Formatting_the_about_page-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Integration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Integration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Integration</div>
		</a>
		
			<button aria-controls="toc-Integration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Integration subsection</span>
			</button>
		
		<ul id="toc-Integration-sublist" class="vector-toc-list">
			<li id="toc-Gitosis" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Gitosis">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Gitosis</div>
			</a>
			
			<ul id="toc-Gitosis-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gitolite" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Gitolite">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Gitolite</div>
			</a>
			
			<ul id="toc-Gitolite-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-snapshots_does_not_show_properly" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#snapshots_does_not_show_properly">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span><i>snapshots</i> does not show properly</div>
			</a>
			
			<ul id="toc-snapshots_does_not_show_properly-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-readme_files_are_not_found,_about_tab_not_shown" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#readme_files_are_not_found,_about_tab_not_shown">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span><i>readme</i> files are not found, <i>about</i> tab not shown</div>
			</a>
			
			<ul id="toc-readme_files_are_not_found,_about_tab_not_shown-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-source-filter_does_not_work_properly" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#source-filter_does_not_work_properly">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span><i>source-filter</i> does not work properly</div>
			</a>
			
			<ul id="toc-source-filter_does_not_work_properly-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">cgit</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/cgit" title="cgit – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
<a rel="nofollow" class="external text" href="https://git.zx2c4.com/cgit/">cgit</a> is an attempt to create a fast web interface for the <a href="../en/Git.html" title="Git">git</a> version control system, using a built in cache to decrease pressure on the git server.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cgit">cgit</a></span> package.
</p>
<p>To use cgit a <a href="../en/List_of_applications/Internet.html#Web_servers" class="mw-redirect" title="Web server">web server</a> must be installed and configured on the system.
</p>
<h2><span class="mw-headline" id="Configuration_of_web_server">Configuration of web server</span></h2>
<h3><span class="mw-headline" id="Apache">Apache</span></h3>
<p>Add the following to the end of your <code>/etc/httpd/conf/httpd.conf</code>:
</p>
<pre>ScriptAlias /cgit "/usr/lib/cgit/cgit.cgi/"
Alias /cgit-css "/usr/share/webapps/cgit/"
&lt;Directory "/usr/share/webapps/cgit/"&gt;
   AllowOverride None
   Options None
   Require all granted
&lt;/Directory&gt;
&lt;Directory "/usr/lib/cgit/"&gt;
   AllowOverride None
   Options ExecCGI FollowSymlinks
   Require all granted
&lt;/Directory&gt;
</pre>
<p>or alternatively add it to a separate file like <code>etc/httpd/conf/extra/cgit.conf</code>
and then add the following to the end of <code>httpd.conf</code>:
</p>
<pre># cgit configuration
Include conf/extra/cgit.conf
</pre>
<p>This allows you to access cgit via <i>your.server.com</i>/cgit. Make sure that Apache is configured to permit CGI execution by having the following uncommented in <code>httpd.conf</code>:
</p>
<pre>&lt;IfModule !mpm_prefork_module&gt;
   LoadModule cgid_module modules/mod_cgid.so
&lt;/IfModule&gt;
&lt;IfModule mpm_prefork_module&gt;
   LoadModule cgi_module modules/mod_cgi.so
&lt;/IfModule&gt;
</pre>
<p>then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>httpd.service</code> to apply these changes. For further details about CGI execution with Apache, see <a rel="nofollow" class="external free" href="https://httpd.apache.org/docs/2.4/howto/cgi.html">https://httpd.apache.org/docs/2.4/howto/cgi.html</a>.
</p>
<h3><span class="mw-headline" id="Lighttpd">Lighttpd</span></h3>
<p>The following configuration will let you access cgit through http://<i>your.server.com</i>/git or http://<i>your.server.com</i>/cgit. The cgit url is not perfect (for example you will see "cgit.cgi" in all repos' url) but works.
</p>
<p>Create the file <code>/etc/lighttpd/conf.d/cgit.conf</code>:
</p>
<pre>server.modules += ( "mod_cgi", "mod_alias" )

$HTTP["url"] =~ "^/cgit" {
    server.document-root = "/usr/share/webapps/"
    server.indexfiles = ("cgit.cgi")
    cgi.assign = ("cgit.cgi" =&gt; "")
    mimetype.assign = ( ".css" =&gt; "text/css" )
}

alias.url += (
    "/git" =&gt; "/usr/share/webapps/cgit/cgit.cgi",
)
$HTTP["url"] =~ "^/git" {
    cgi.assign = ( "" =&gt; "" )
}
</pre>
<p>And include this file in <code>/etc/lighttpd/lighttpd.conf</code>:
</p>
<pre>include "conf.d/cgit.conf"
</pre>
<p>and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>lighttpd.service</code>.
</p>
<h4><span class="mw-headline" id="Lighttpd_sub-domain">Lighttpd sub-domain</span></h4>
<p>This alternative Lighttpd configuration will serve cgit on a sub-domain like git.example.com with optional SSL support, and rewrites creating nice permalinks: 
</p>
<pre>server.modules += ( "mod_cgi", "mod_rewrite" )

#$SERVER["socket"] == ":443" {
$SERVER["socket"] == ":80" {
    #ssl.engine                    = "enable"
    #ssl.pemfile                   = "/etc/lighttpd/ssl/git.example.com.pem"

    server.name          = "git.example.com"
    server.document-root = "/usr/share/webapps/cgit/"

    index-file.names     = ( "cgit.cgi" )
    cgi.assign           = ( "cgit.cgi" =&gt; "" )
    mimetype.assign      = ( ".css" =&gt; "text/css" )
    url.rewrite-once     = (
        "^/cgit/cgit.css"   =&gt; "/cgit.css",
        "^/cgit/cgit.png"   =&gt; "/cgit.png",
        "^/([^?/]+/[^?]*)?(?:\?(.*))?$"   =&gt; "/cgit.cgi?url=$1&amp;$2",
    )
}</pre>
<h3><span class="mw-headline" id="Nginx">Nginx</span></h3>
<h4><span class="mw-headline" id="Using_fcgiwrap">Using fcgiwrap</span></h4>
<p>The following configuration uses <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fcgiwrap">fcgiwrap</a></span> and will serve cgit on a subdomain like <code>git.example.com</code>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>fcgiwrap.socket</code>. Then, configure Nginx:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">worker_processes          1;
 
events {
  worker_connections      1024;
}
 
http {
  include                 mime.types;
  default_type            application/octet-stream;
  sendfile                on;
  keepalive_timeout       65;
  gzip                    on;
 
  # Cgit
  server {
    listen                80;
    server_name           <i>git.example.com;</i>
    root                  /usr/share/webapps/cgit;
    try_files             $uri @cgit;

    # Configure HTTP transport
    location ~ /.+/(info/refs|git-upload-pack) {
        include             fastcgi_params;
        fastcgi_param       SCRIPT_FILENAME     /usr/lib/git-core/git-http-backend;
        fastcgi_param       PATH_INFO           $uri;
        fastcgi_param       GIT_HTTP_EXPORT_ALL 1;
        fastcgi_param       GIT_PROJECT_ROOT    /srv/git;
        fastcgi_param       HOME                /srv/git;
        fastcgi_pass        unix:/run/fcgiwrap.sock;
    }

    location @cgit {
      include             fastcgi_params;
      fastcgi_param       SCRIPT_FILENAME /usr/lib/cgit/cgit.cgi;
      fastcgi_param       PATH_INFO       $uri;
      fastcgi_param       QUERY_STRING    $args;
      fastcgi_param       HTTP_HOST       $server_name;
      fastcgi_pass        unix:/run/fcgiwrap.sock;
    }
  }
}</pre>
<h4><span class="mw-headline" id="Using_uwsgi">Using uwsgi</span></h4>
<p>The following example will setup cgit using the native cgi plugin for uwsgi.
</p>
<p>First, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=uwsgi">uwsgi</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=uwsgi-plugin-cgi">uwsgi-plugin-cgi</a></span>.
</p>
<p>Add below server block to your configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">server {
  listen 80;
  server_name git.example.com;
  root /usr/share/webapps/cgit;

  # Serve static files with nginx
  location ~* ^.+(cgit.(css|png)|favicon.ico|robots.txt) {
    root /usr/share/webapps/cgit;
    expires 30d;
  }
  location / {
    try_files $uri @cgit;
  }
  location @cgit {
    gzip off;
    include uwsgi_params;
    uwsgi_modifier1 9;
    uwsgi_pass unix:/run/uwsgi/cgit.sock;
  }
} 
</pre>
<p>Add a uwsgi configuration for cgit.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/uwsgi/cgit.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[uwsgi]
master = true
plugins = cgi
socket = /run/uwsgi/%n.sock
uid = http
gid = http
procname-master = uwsgi cgit
processes = 1
threads = 2
cgi = /usr/lib/cgit/cgit.cgi</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the corresponding socket <code>uwsgi@cgit.socket</code>.
</p>
<h3><span class="mw-headline" id="Caddy">Caddy</span></h3>
<p>The following configuration uses <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fcgiwrap">fcgiwrap</a></span> and will serve cgit on a subdomain like <code>git.example.com</code>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>fcgiwrap.socket</code>. Then, configure <a href="../en/Caddy.html" title="Caddy">Caddy</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/caddy/conf.d/cgit</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">git.example.com

reverse_proxy unix//run/fcgiwrap.sock {
	transport fastcgi {
		env SCRIPT_FILENAME /usr/lib/cgit/cgit.cgi
	}
}

handle_path /assets/* {
	root * /usr/share/webapps/cgit
	file_server
}</pre>
<p>Configure cgit to point assets to the same directory used in <code>handle_path</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cgitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">css=/assets/cgit.css
favicon=/assets/favicon.ico
logo=/assets/cgit.png</pre>
<h3><span class="mw-headline" id="h2o">h2o</span></h3>
<p>Package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/h2o-git/">h2o-git</a></span><sup><small>AUR</small></sup> has its own CGI wrapper fastcgi-cgi, which supports cgit with the following configuration.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/h2o/h2o.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  "git.domain.tld:443":
    listen:
      port: 443
      ssl:
        ...
    paths:
      /cgit.css:
        file.file: /usr/share/webapps/cgit/cgit.css
        file.send-compressed: ON
      /favicon.ico:
        file.file: /usr/share/webapps/cgit/favicon.ico
        file.send-compressed: ON
      /robots.txt:
        file.file: /usr/share/webapps/cgit/robots.txt
      /cgit.png:
        file.file: /usr/share/webapps/cgit/cgit.png
      /:
        fastcgi.spawn: /usr/share/h2o/fastcgi-cgi
        setenv:
          SCRIPT_FILENAME: /usr/lib/cgit/cgit.cgi
        compress: ON
</pre>
<h2><span class="mw-headline" id="Configuration_of_cgit">Configuration of cgit</span></h2>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 5 cgitrc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/cgitrc.5">cgitrc(5)</a></span> for the list of all configuration options.
</p>
<h3><span class="mw-headline" id="Basic_configuration">Basic configuration</span></h3>
<p>Before you can start adding repositories you will first have to create the basic cgit configuration file at <code>/etc/cgitrc</code>.
</p>
<pre>#
# cgit config
#

css=/cgit.css
logo=/cgit.png

# Following lines work with the above Apache config
#css=/cgit-css/cgit.css
#logo=/cgit-css/cgit.png

# Following lines work with the above Lighttpd config
#css=/cgit/cgit.css
#logo=/cgit/cgit.png

# Allow http transport git clone
#enable-http-clone=0


# if you do not want that webcrawler (like google) index your site
robots=noindex, nofollow

# if cgit messes up links, use a virtual-root. For example, cgit.example.org/ has this value:
virtual-root=/
</pre>
<h3><span class="mw-headline" id="Adding_repositories">Adding repositories</span></h3>
<p>Now you can add your repos:
</p>
<pre>#
# List of repositories.
# This list could be kept in a different file (e.g. '/etc/cgitrepos')
# and included like this:
#   include=/etc/cgitrepos
#

repo.url=MyRepo
repo.path=/srv/git/MyRepo.git
repo.desc=This is my git repository

# For a non-bare repository (repository with the working tree)
repo.url=MyOtherRepo
repo.path=/srv/git/MyOtherRepo/.git
repo.desc=That's my other git repository
</pre>
<p>Or else, it is also possible to configure cgit to automatically search for the repo:
</p>
<pre>scan-path=/srv/git/
</pre>
<p>If you use the method above, add the descriptions to <code>.git/description</code> file and add the following lines to show the author:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.git/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[gitweb]
        owner = John Cena &lt;john@riseup.net&gt;</pre>
<p>If you are coming from <a href="../en/Gitweb.html" title="Gitweb">gitweb</a> and want to keep the descriptions and owner information, then use:
</p>
<pre>enable-git-config=1
</pre>
<h3><span class="mw-headline" id="Syntax_highlighting">Syntax highlighting</span></h3>
<p>cgit supports syntax highlighting when viewing blobs. To enable syntax highlighting, you have several options.
</p>
<h4><span class="mw-headline" id="Using_python-pygments">Using python-pygments</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-pygments">python-pygments</a></span> and add the filter in <code>/etc/cgitrc</code>
</p>
<pre>source-filter=/usr/lib/cgit/filters/syntax-highlighting.py
</pre>
<p>To change the coloring style, modify the <code>style</code> argument that is passed to <code>HtmlFormatter</code> in the <code>syntax-highlighting.py</code> file. For instance, to change the coloring style to 'tango':
</p>
<pre> formatter = HtmlFormatter(encoding='utf-8', style='tango')
</pre>
<p>To get a list of all coloring styles that are available, do:
</p>
<pre> $ python
 &gt;&gt;&gt; from pygments.styles import get_all_styles
 &gt;&gt;&gt; list(get_all_styles())
 ['manni', 'igor', 'xcode', 'vim', 'autumn', 'vs', 'rrt', 'native', 'perldoc', 'borland', 'tango', 'emacs', 'friendly', 'monokai', 'paraiso-dark', 'colorful', 'murphy', 'bw', 'pastie', 'paraiso-light', 'trac', 'default', 'fruity']
</pre>
<h4><span class="mw-headline" id="Using_highlight">Using highlight</span></h4>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=highlight">highlight</a></span> package.
</p>
<p>Copy <code>/usr/lib/cgit/filters/syntax-highlighting.sh</code> to <code>/usr/lib/cgit/filters/syntax-highlighting-edited.sh</code>. Then, in the copied file, comment out version 2 and comment in version 3.
You may want to add <code>--inline-css</code> to the options of highlight for a more colorful output without editing cgit's css file.
</p>
<pre> # This is for version 2
 #exec highlight --force -f -I -X -S "$EXTENSION" 2&gt;/dev/null
 
 # This is for version 3
 exec highlight --force --inline-css -f -I -O xhtml -S "$EXTENSION" 2&gt;/dev/null
</pre>
<p>Enable the filter in <code>/etc/cgitrc</code>
</p>
<pre>source-filter=/usr/lib/cgit/filters/syntax-highlighting-edited.sh
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Editing <code>/usr/lib/cgit/filters/syntax-highlighting.sh</code> directly would lose all the modifications as soon as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cgit">cgit</a></span> is updated.</div>
<h3><span class="mw-headline" id="Formatting_the_about_page">Formatting the about page</span></h3>
<p>cgit can display a formatted about page with <a href="../en/List_of_applications/Documents.html#Markdown" class="mw-redirect" title="Markdown">Markdown</a>, <a rel="nofollow" class="external text" href="https://docutils.sourceforge.io/rst.html">reStructuredText</a>, <a href="../en/Man_page.html" title="Man page">man page</a> syntax, text files, and html files.
</p>
<ul>
<li>For Markdown formatting, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-markdown">python-markdown</a></span>.</li>
<li>For reStructeredText formatting, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-docutils">python-docutils</a></span>.</li>
<li>To use the man page syntax install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=groff">groff</a></span>.</li>
</ul>
<p>The script <code>/usr/lib/cgit/filters/about-formatting.sh</code> is used with the about-filter or repo.about-filter in <code>/etc/cgitrc</code>. For example: 
</p>
<pre>about-filter=/usr/lib/cgit/filters/about-formatting.sh
readme=:README.md
</pre>
<p>The way <code>about-formatting.sh</code> works is by running particular scripts in the <code>html-converters</code> subdirectory based on the input file's extension.
The above configuration allows Markdown formatting as long as <code>README.md</code> is located in the root of the repo's default branch and the script is given executable permission.
</p>
<h2><span class="mw-headline" id="Integration">Integration</span></h2>
<h3><span class="mw-headline" id="Gitosis">Gitosis</span></h3>
<p>If you want to integrate with <a href="../en/Gitosis.html" title="Gitosis">gitosis</a> you will have to run two commands to give Apache permission to look through the folder.
</p>
<pre># chgrp http /srv/gitosis
# chmod a+rx /srv/gitosis
</pre>
<h3><span class="mw-headline" id="Gitolite">Gitolite</span></h3>
<p>If you added repositories managed by <a href="../en/Gitolite.html" title="Gitolite">gitolite</a> you have to change the permissions so the web server can access the files.
</p>
<ul>
<li>Add the <i>http</i> user to the <i>gitolite</i> group:
<ul><li>
<code>usermod -aG gitolite http</code> as the root user.</li></ul>
</li>
<li>Change permission for future repositories:
<ul>
<li>Edit <code>/var/lib/gitolite/.gitolite.rc</code>. Change the <code>UMASK</code> to <code>0027</code>
</li>
<li>See also: <a rel="nofollow" class="external free" href="https://gitolite.com/gitolite/rc.html#specific-variables">https://gitolite.com/gitolite/rc.html#specific-variables</a>
</li>
</ul>
</li>
<li>Change permission for the <i>gitolite</i> home directory, and existing repositories. Run the following two commands:
<ul>
<li>
<code>chmod g+rX /var/lib/gitolite</code> as the root user.</li>
<li>
<code>chmod -R g+rX /var/lib/gitolite/repositories</code> as the root user.</li>
</ul>
</li>
</ul>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>The following troubleshooting subsections largely outline issues that are caused by the order of settings in the cgit configuration file. To be safe, try to ensure that all global settings are defined before <i>scan-path</i>.
</p>
<h3><span class="mw-headline" id="snapshots_does_not_show_properly"><i>snapshots</i> does not show properly</span></h3>
<p>If you have enabled <i>scan-path</i> as well as <i>snapshots</i>, the order in cgitrc matters. According to <a rel="nofollow" class="external text" href="https://lists.zx2c4.com/pipermail/cgit/2013-February/000914.html">cgit mailing list</a>, <i>snapshots</i> should be specified before <i>scan-path</i>
</p>
<pre>snapshots=tar.gz tar.bz2 zip
scan-path=/path/to/your/repositories
</pre>
<h3>
<span id="readme_files_are_not_found.2C_about_tab_not_shown"></span><span class="mw-headline" id="readme_files_are_not_found,_about_tab_not_shown"><i>readme</i> files are not found, <i>about</i> tab not shown</span>
</h3>
<p>If you have added one or more <i>readme</i> entries, which define the files that cgit will search for when populating the <i>about</i> tab, and you are sure that they match the README files in your repository but the <i>about</i> tab does not show, ensure that <i>readme</i> entries are specified before <i>scan-path</i>.
</p>
<h3><span class="mw-headline" id="source-filter_does_not_work_properly"><i>source-filter</i> does not work properly</span></h3>
<p>If you have enabled <i>scan-path</i>, again, the order in cgitrc matters. <i>source-filter</i> should be specified before <i>scan-path</i>, otherwise it will have no effect.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external free" href="https://git.zx2c4.com/cgit/">https://git.zx2c4.com/cgit/</a></li>
<li><a rel="nofollow" class="external free" href="https://git.zx2c4.com/cgit/about/">https://git.zx2c4.com/cgit/about/</a></li>
<li><a rel="nofollow" class="external free" href="https://git.zx2c4.com/cgit/tree/README">https://git.zx2c4.com/cgit/tree/README</a></li>
<li><a rel="nofollow" class="external free" href="https://git.zx2c4.com/cgit/tree/cgitrc.5.txt">https://git.zx2c4.com/cgit/tree/cgitrc.5.txt</a></li>
<li>
<a rel="nofollow" class="external free" href="https://text.causal.agency/007-cgit-setup.txt">https://text.causal.agency/007-cgit-setup.txt</a> - A cgit setup using the Nginx server.</li>
<li>
<a rel="nofollow" class="external free" href="https://git.codemadness.org/stagit/">https://git.codemadness.org/stagit/</a> - stagit, a static git page generator.</li>
<li>
<a rel="nofollow" class="external free" href="https://git.causal.agency/cgit-pink/about/">https://git.causal.agency/cgit-pink/about/</a> - cgit-pink, a fork with a lot of enhancements.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Git_web_interfaces.html" title="Category:Git web interfaces">Git web interfaces</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Cgit&amp;oldid=806129">https://wiki.archlinux.org/index.php?title=Cgit&amp;oldid=806129</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 16 April 2024, at 07:01.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
