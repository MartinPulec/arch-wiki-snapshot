<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Mobile broadband modem - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Mobile_broadband_modem rootpage-Mobile_broadband_modem skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Device_identification" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Device_identification">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Device identification</span>
			</div>
		</a>
		
		<ul id="toc-Device_identification-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Mode_switching" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Mode_switching">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Mode switching</span>
			</div>
		</a>
		
			<button aria-controls="toc-Mode_switching-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Mode switching subsection</span>
			</button>
		
		<ul id="toc-Mode_switching-sublist" class="vector-toc-list">
			<li id="toc-From_mass_storage_mode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#From_mass_storage_mode">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>From mass storage mode</span>
				</div>
			</a>
			
			<ul id="toc-From_mass_storage_mode-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-From_router_mode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#From_router_mode">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>From router mode</span>
				</div>
			</a>
			
			<ul id="toc-From_router_mode-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Modem_mode" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Modem_mode">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Modem mode</span>
			</div>
		</a>
		
			<button aria-controls="toc-Modem_mode-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Modem mode subsection</span>
			</button>
		
		<ul id="toc-Modem_mode-sublist" class="vector-toc-list">
			<li id="toc-Remove_the_PIN" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remove_the_PIN">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Remove the PIN</span>
				</div>
			</a>
			
			<ul id="toc-Remove_the_PIN-sublist" class="vector-toc-list">
				<li id="toc-Using_mmcli" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_mmcli">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1</span>
					<span>Using mmcli</span>
				</div>
			</a>
			
			<ul id="toc-Using_mmcli-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_AT_commands" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_AT_commands">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.2</span>
					<span>Using AT commands</span>
				</div>
			</a>
			
			<ul id="toc-Using_AT_commands-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Connection" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connection">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Connection</span>
				</div>
			</a>
			
			<ul id="toc-Connection-sublist" class="vector-toc-list">
				<li id="toc-ModemManager" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#ModemManager">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.1</span>
					<span>ModemManager</span>
				</div>
			</a>
			
			<ul id="toc-ModemManager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-NetworkManager" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#NetworkManager">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.2</span>
					<span>NetworkManager</span>
				</div>
			</a>
			
			<ul id="toc-NetworkManager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-libmbim" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#libmbim">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.3</span>
					<span>libmbim</span>
				</div>
			</a>
			
			<ul id="toc-libmbim-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-pppd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#pppd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.4</span>
					<span>pppd</span>
				</div>
			</a>
			
			<ul id="toc-pppd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-wvdial" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#wvdial">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.5</span>
					<span>wvdial</span>
				</div>
			</a>
			
			<ul id="toc-wvdial-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-netctl" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#netctl">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.6</span>
					<span>netctl</span>
				</div>
			</a>
			
			<ul id="toc-netctl-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Disable_mode_switching" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_mode_switching">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Disable mode switching</span>
				</div>
			</a>
			
			<ul id="toc-Disable_mode_switching-sublist" class="vector-toc-list">
				<li id="toc-By_the_configuration_file" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#By_the_configuration_file">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1</span>
					<span>By the configuration file</span>
				</div>
			</a>
			
			<ul id="toc-By_the_configuration_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_a_udev_rule" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_a_udev_rule">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.2</span>
					<span>With a udev rule</span>
				</div>
			</a>
			
			<ul id="toc-With_a_udev_rule-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-AT_commands" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#AT_commands">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>AT commands</span>
				</div>
			</a>
			
			<ul id="toc-AT_commands-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Monitor_used_bandwidth" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Monitor_used_bandwidth">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Monitor used bandwidth</span>
				</div>
			</a>
			
			<ul id="toc-Monitor_used_bandwidth-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reading_SMS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reading_SMS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Reading SMS</span>
				</div>
			</a>
			
			<ul id="toc-Reading_SMS-sublist" class="vector-toc-list">
				<li id="toc-With_dedicated_software" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_dedicated_software">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.1</span>
					<span>With dedicated software</span>
				</div>
			</a>
			
			<ul id="toc-With_dedicated_software-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_email_like_web_interface" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_email_like_web_interface">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4.2</span>
					<span>With email like web interface</span>
				</div>
			</a>
			
			<ul id="toc-With_email_like_web_interface-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Writing_SMS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Writing_SMS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Writing SMS</span>
				</div>
			</a>
			
			<ul id="toc-Writing_SMS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Commands_to_restart_the_device" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Commands_to_restart_the_device">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>Commands to restart the device</span>
				</div>
			</a>
			
			<ul id="toc-Commands_to_restart_the_device-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Connection_halts_after_few_minutes_running" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connection_halts_after_few_minutes_running">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Connection halts after few minutes running</span>
				</div>
			</a>
			
			<ul id="toc-Connection_halts_after_few_minutes_running-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Low_connection_speed" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Low_connection_speed">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Low connection speed</span>
				</div>
			</a>
			
			<ul id="toc-Low_connection_speed-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fix_image_quality" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fix_image_quality">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Fix image quality</span>
				</div>
			</a>
			
			<ul id="toc-Fix_image_quality-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-ModemManager_does_not_recognize_the_modem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ModemManager_does_not_recognize_the_modem">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.4</span>
					<span>ModemManager does not recognize the modem</span>
				</div>
			</a>
			
			<ul id="toc-ModemManager_does_not_recognize_the_modem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-FCC_locking" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#FCC_locking">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.5</span>
					<span>FCC locking</span>
				</div>
			</a>
			
			<ul id="toc-FCC_locking-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-NetworkManager:_Device_not_available_/_rfkill_block" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#NetworkManager:_Device_not_available_/_rfkill_block">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.6</span>
					<span>NetworkManager: Device not available / rfkill block</span>
				</div>
			</a>
			
			<ul id="toc-NetworkManager:_Device_not_available_/_rfkill_block-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-ModemManager_connects_successfully_but_the_interface_does_not_show_any_IP_address" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ModemManager_connects_successfully_but_the_interface_does_not_show_any_IP_address">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.7</span>
					<span>ModemManager connects successfully but the interface does not show any IP address</span>
				</div>
			</a>
			
			<ul id="toc-ModemManager_connects_successfully_but_the_interface_does_not_show_any_IP_address-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Mobile broadband modem</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/USB_3G_%E3%83%A2%E3%83%87%E3%83%A0" title="USB 3G モデム – 日本語" lang="ja" hreflang="ja" data-title="USB 3G モデム" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> does not conform to <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a>, partially written in first person (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Mobile_broadband_modem.html">Talk:Mobile broadband modem</a>)</div>
</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Category:Modems.html" title="Category:Modems">Category:Modems</a></li>
</ul>
</div>
<p>A number of mobile phone carriers around the world offer internet access via <a href="https://en.wikipedia.org/wiki/Mobile_broadband" class="extiw" title="wikipedia:Mobile broadband">mobile broadband</a> (e.g. LTE, UMTS, EDGE, GSM, etc.).
</p>
<p>This article focuses on <a href="https://en.wikipedia.org/wiki/Mobile_broadband_modem" class="extiw" title="wikipedia:Mobile broadband modem">mobile broadband modems</a> in the format of portable USB devices and mini PCIe cards. For standalone mobile broadband routers, simply <a href="../en/Network_configuration.html" title="Network configuration">connect to them</a> using an interface they provide (e.g. Ethernet or Wi-Fi).
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Device_identification">Device identification</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usbutils">usbutils</a></span>.
</p>
<p>Examine the output of:
</p>
<pre>$ lsusb
</pre>
<p>and
</p>
<pre>$ lspci -nn
</pre>
<p>which will show the vendor and product IDs of the device. Note that some devices will show <i>two</i> different product IDs at different times as explained below.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> PCIe adapters that expose themselves as USB devices will show up in <code>lsusb</code> instead of <code>lspci</code>.</div>
<h2><span class="mw-headline" id="Mode_switching">Mode switching</span></h2>
<h3><span class="mw-headline" id="From_mass_storage_mode">From mass storage mode</span></h3>
<p>Often these devices will have two modes (1) USB flash memory storage (2) USB modem. The first mode, sometimes known as ZeroCD, is often used to deliver an internet communications program for another operating system and is generally of no interest to Linux users. Additionally some have a slot into which the user can insert an additional flash memory card.
</p>
<p>A useful utility for switching these devices into modem mode is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usb_modeswitch">usb_modeswitch</a></span>. It ships with <a href="../en/Udev.html" class="mw-redirect" title="Udev rules">udev rules</a> <code>/usr/lib/udev/rules.d/40-usb_modeswitch.rules</code> that contain entries for many devices, which it will switch to modem mode upon insertion.
</p>
<p>When a device is switched, its product ID may change to a different value. The vendor ID will remain unchanged. This can be seen in the output of <code>lsusb</code>.
</p>
<p>Some devices are supported in the USB serial kernel module called <code>option</code> (named after the "Option" devices, but not limited to just those) and may be used without <i>usb_modeswitch</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> An alternative is to use the eject command as described in <a href="../en/ZTE_MF110/MF190.html#Switch_from_CD_mode_to_modem_mode_on_the_device" title="ZTE MF110/MF190">ZTE MF110/MF190#Switch from CD mode to modem mode on the device</a>.</div>
<h3><span class="mw-headline" id="From_router_mode">From router mode</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Add instructions for switching these devices to "modem mode". (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Mobile_broadband_modem.html">Talk:Mobile broadband modem</a>)</div>
</div>
<p>Depending on the device, it may expose an Ethernet <a href="../en/Network_configuration.html#Network_interfaces" class="mw-redirect" title="Network interface">network interface</a> or provide Wi-Fi. In that case you will need to have the <a href="../en/Network_configuration.html#Enabling_and_disabling_network_interfaces" title="Network configuration">interface up</a>. If the device has a <a href="../en/Network_configuration.html#Network_managers" class="mw-redirect" title="DHCP">DHCP</a> server, you can use a DHCP client to match it. Otherwise, you will have to have some knowledge about the network the device expects. Such information might be obtained from its behavior in another OS. Or by searching the web. Or from the drivers, and other information, stored in the initial USB flash memory storage (ZeroCD). Some Huawei HiLink devices, for example, sometime operate at 192.168.8.0/24, with a gateway at 192.168.8.1. They also might have a web interface at <a rel="nofollow" class="external free" href="http://192.168.8.1">http://192.168.8.1</a>.
</p>
<h2><span class="mw-headline" id="Modem_mode">Modem mode</span></h2>
<p>In general, at this point you should note if <a href="#Mode_switching">mode switching</a> left you with additional <code>/dev/ttyUSB*</code> serial device and a <code>ww*</code> <a href="../en/Network_configuration.html#Network_interfaces" class="mw-redirect" title="Network interface">network interface</a>. You can do that with <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journalctl">journalctl</a> or by shell commands such as:
</p>
<pre>$ ls /dev/ttyUSB*
$ ip link
</pre>
<h3><span class="mw-headline" id="Remove_the_PIN">Remove the PIN</span></h3>
<p>First of all use your SIM card in a normal phone and disable the PIN request if present. If the SIM card asks the PIN wvdial will not work.
</p>
<p>Failing that, you can use <i>mmcli</i> (provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=modemmanager">modemmanager</a></span>) or AT commands, to unlock the SIM card.
</p>
<h4><span class="mw-headline" id="Using_mmcli">Using mmcli</span></h4>
<p>First, list the modems and find the modem's index:
</p>
<pre>$ mmcli -L
</pre>
<p>Look for <code>/org/freedesktop/ModemManager1/Modem/<i><b>MODEM_INDEX</b></i></code>.
</p>
<p>Find the SIM card index:
</p>
<pre>$ mmcli -m <i>MODEM_INDEX</i>
</pre>
<p>Just as with the modem index, look for <code>primary sim path: /org/freedesktop/ModemManager1/SIM/<i><b>SIM_INDEX</b></i></code>.
</p>
<p>Unlock the SIM card:
</p>
<pre>$ mmcli --sim=<i>SIM_INDEX</i> --pin=<i>PIN</i>
</pre>
<p>Remove the requirement for PIN:
</p>
<pre>$ mmcli --sim=<i>SIM_INDEX</i> --pin=<i>PIN</i> --disable-pin
</pre>
<h4><span class="mw-headline" id="Using_AT_commands">Using AT commands</span></h4>
<p>Follow the instructions in <a rel="nofollow" class="external free" href="https://unix.stackexchange.com/a/313878">https://unix.stackexchange.com/a/313878</a>.
</p>
<h3><span class="mw-headline" id="Connection">Connection</span></h3>
<p>To connect to the mobile network, use one of the following methods.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Explain what protocol<a rel="nofollow" class="external autonumber" href="https://gist.github.com/Juul/e42c5b6ec71ce11923526b36d3f1cb2c#some-background-on-protocols">[1]</a><a rel="nofollow" class="external autonumber" href="https://unix.stackexchange.com/questions/523321/difference-between-ppp-qmi-and-at-commands">[2]</a> is used by each software and which should be preferred. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Mobile_broadband_modem.html">Talk:Mobile broadband modem</a>)</div>
</div>
<h4><span class="mw-headline" id="ModemManager">ModemManager</span></h4>
<p><a rel="nofollow" class="external text" href="https://modemmanager.org/">ModemManager</a> is a system daemon which controls WWAN devices and connections.
</p>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=modemmanager">modemmanager</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usb_modeswitch">usb_modeswitch</a></span> packages.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>ModemManager.service</code>.
</p>
<p>Use <span class="plainlinks archwiki-template-man" title="$ man 1 mmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mmcli.1">mmcli(1)</a></span> to communicate with the modem.
</p>
<p>The simplest way to establish a connection is to use <i>mmcli'</i>s <code>--simple-connect</code> option.
</p>
<p>First, list the modems and find the modem's index:
</p>
<pre>$ mmcli -L
</pre>
<p>Look for <code>/org/freedesktop/ModemManager1/Modem/<i><b>MODEM_INDEX</b></i></code>.
</p>
<p>Next connect to the mobile network. For example:
</p>
<pre>$ mmcli -m <i>MODEM_INDEX</i> --simple-connect="apn=internet.myisp.example"
</pre>
<p>Replace <code>internet.myisp.example</code> with your ISP's provided <a href="https://en.wikipedia.org/wiki/Access_Point_Name" class="extiw" title="wikipedia:Access Point Name">APN</a>. If a user name and password is required, set them accordingly:
</p>
<pre>$ mmcli -m <i>MODEM_INDEX</i> --simple-connect="apn=internet.myisp.example,user=<i>user_name</i>,password=<i>password</i>"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>IP connectivity on broadband networks is subtly different from wireless or wired LAN networks. For LTE modems, <a rel="nofollow" class="external text" href="https://modemmanager.org/docs/modemmanager/ip-connectivity-setup-in-lte-modems/">ModemManager documentation</a> provides a good explanation that might be helpful for troubleshooting.</li>
<li>ModemManager only establishes a connection between the modem and the mobile network. Once connected, ModemManager will request to use a specific IP setup method in the connected bearer: either <code>ppp</code> (so the user should launch <code>pppd</code> on the reported serial port), or <code>static</code> (so the user should manually configure IP settings on the reported network interface), or <code>dhcp</code> (so the user should run a <a href="../en/Network_configuration.html#Network_managers" class="mw-redirect" title="DHCP">DHCP</a> client on the reported network interface. Instead of all this manual setup, it's suggested to <a href="#NetworkManager">use NetworkManager</a>.</li>
<li>The <a href="../en/Network_configuration.html#Network_interfaces" class="mw-redirect" title="Network interface">network interface</a> name will start with <code>ww</code>, e.g. <code>wwp0s20u8i2</code>.</li>
<li>ModemManager does not save modem configuration, i.e. it does not have anything like connection profiles. The modem will need to be configured each time it is attached. If persistent configuration is desired, <a href="#NetworkManager">use NetworkManager</a>.</li>
</ul>
</div>
<p>To disconnect from the mobile network run:
</p>
<pre>$ mmcli -m <i>MODEM_INDEX</i> --simple-disconnect
</pre>
<p>See also <span class="plainlinks archwiki-template-man" title="$ man 1 mmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mmcli.1#EXAMPLES">mmcli(1) § EXAMPLES</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=modem-manager-gui">modem-manager-gui</a></span> provides a graphical front-end for ModemManager. It allows sending/ receiving SMS and USSD codes, shows modem and SIM information, and provides traffic limit control.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Whilst running ModemManager, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gammu">gammu</a></span> will not work.</div>
<h4><span class="mw-headline" id="NetworkManager">NetworkManager</span></h4>
<p><a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> uses <a href="#ModemManager">ModemManager</a> to work with mobile broadband modems. See <a href="../en/NetworkManager.html#Mobile_broadband_support" title="NetworkManager">NetworkManager#Mobile broadband support</a>.
</p>
<h4><span class="mw-headline" id="libmbim">libmbim</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libmbim">libmbim</a></span>. To bring up the modem you can use <code>mbim-network</code> which is a wrapper for <code>mbimcli</code> calls. First create a profile for mbim-network.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mbim-network.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">APN=apn=internet.myisp.example</pre>
<p>Now connect to the network with:
</p>
<pre># mbim-network /dev/cdc-wdmX start
</pre>
<p>Then follow <a href="../en/Network_configuration.html" title="Network configuration">Network configuration</a> to bring up the <code>ww*</code> interface and get an IP address using DHCP.
</p>
<h4><span class="mw-headline" id="pppd">pppd</span></h4>
<p><a href="../en/Ppp.html" class="mw-redirect" title="Pppd">pppd</a> can be used to configure 3g connections. Step by step instruction is available on <a href="../en/Ppp/Mobile_broadband_modem.html" class="mw-redirect" title="3G and GPRS modems with pppd">3G and GPRS modems with pppd</a>. Optionally, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pppconfig/">pppconfig</a></span><sup><small>AUR</small></sup> can be used to simplify the pppd configuration using dialog interface.
</p>
<h4><span class="mw-headline" id="wvdial">wvdial</span></h4>
<p>See main article: <a href="../en/Wvdial.html" title="Wvdial">wvdial</a>
</p>
<h4><span class="mw-headline" id="netctl">netctl</span></h4>
<p>Netctl can be used to establish a connection using a USB modem. An example configuration file provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=netctl">netctl</a></span> is located at <code>/etc/netctl/examples/mobile_ppp</code>. Minimally you will probably have to specify
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/netctl/mobile_ppp</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Interface=cdc-wdmX
Connection=mobile_ppp
AccessPointName=apn=internet.myisp.example</pre>
<p>See the <a href="../en/Netctl.html" title="Netctl">netctl</a> article and <span class="plainlinks archwiki-template-man" title="$ man 5 netctl.profile"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/netctl.profile.5">netctl.profile(5)</a></span> for more information.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Disable_mode_switching">Disable mode switching</span></h3>
<p>Some ways to disable <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usb_modeswitch">usb_modeswitch</a></span> from operating on a device before the device was inserted, for example to be able to read the initial flash memory (ZeroCD), are:
</p>
<h4><span class="mw-headline" id="By_the_configuration_file">By the configuration file</span></h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/usb_modeswitch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DisableSwitching=1</pre>
<h4><span class="mw-headline" id="With_a_udev_rule">With a udev rule</span></h4>
<p>Masking the udev rule the package is using can be achieved with 
</p>
<pre># ln -s /dev/null /etc/udev/rules.d/40-usb_modeswitch.rules
</pre>
<h3><span class="mw-headline" id="AT_commands">AT commands</span></h3>
<p>There are some useful commands:
</p>
<ul>
<li>
<code>AT^U2DIAG=0</code> - the device is only Modem</li>
<li>
<code>AT^U2DIAG=1</code> - device is in modem mode + CD ROM</li>
<li>
<code>AT^U2DIAG=255</code> - the device in modem mode + CD ROM + Card Reader</li>
<li>
<code>AT^U2DIAG=256</code> - the device in modem mode + Card Reader</li>
<li>
<code>AT+CPIN=<i>PIN-CODE</i></code> - enter PIN-code</li>
<li>
<code>AT+CUSD=1,<i>PDU-encoded-USSD-code</i>,15</code> - USSD request, result can be found (probably) in <code>/dev/ttyUSB2</code>.</li>
</ul>
<p>Encode <code>*100#</code> to PDU format:
</p>
<pre>$ perl -e '@a=split(//,unpack("b*","*100#")); for ($i=7; $i &lt; $#a; $i+=8) { $a[$i]="" } print uc(unpack("H*", pack("b*", join("", @a))))."\n"'
</pre>
<p>Decode <code>AA180C3602</code> from PDU format:
</p>
<pre>$ perl -e '@a=split(//,unpack("b*", pack("H*","AA180C3602"))); for ($i=6; $i &lt; $#a; $i+=7) {$a[$i].="0" } print pack("b*", join("", @a)).""'
</pre>
<p>Answer decoding (this example is balance response: <code>151.25</code>):
</p>
<pre>$ perl -e 'print pack("H*", "003100350031002C003200350020044004430431002E0020");'
</pre>
<p>Some operators return USSD result in PDU encoding, so you should check proper decoding method.
</p>
<ul>
<li>
<code>AT+CSQ</code> - get signal quality (<code>AT+CSQ=?</code>)</li>
<li>
<code>AT+GMI</code> - get manufacturer</li>
<li>
<code>AT+GMM</code> - get model</li>
<li>
<code>AT+GMR</code> - get revision</li>
<li>
<code>AT+GMN</code> - get IMEI</li>
<li>
<code>AT+COPS?</code> - get operator info</li>
<li>
<code>AT^CARDLOCK="<i>NCK-code</i>"</code> - unlock modem. NCK-code should be calculated by IMEI. After that modem can work with any GSM-provider.</li>
<li>
<code>AT^SYSCFG=<i>mode</i>, <i>order</i>, <i>band</i>, <i>roaming</i>, <i>domain</i></code> - System Config</li>
</ul>
<p>Mode:
</p>
<ul>
<li>
<code>2</code> Automatic search</li>
<li>
<code>13</code> 2G ONLY</li>
<li>
<code>14</code> 3G ONLY</li>
<li>
<code>16</code> No change</li>
</ul>
<p>Order:
</p>
<ul>
<li>
<code>0</code> Automatic search</li>
<li>
<code>1</code> 2G first, then 3G</li>
<li>
<code>2</code> 3G first, then 2G</li>
<li>
<code>3</code> No change</li>
</ul>
<p>Band:
</p>
<ul>
<li>
<code>80</code> GSM DCS systems</li>
<li>
<code>100</code> Extended GSM 900</li>
<li>
<code>200</code> Primary GSM 900</li>
<li>
<code>200000</code> GSM PCS</li>
<li>
<code>400000</code> WCDMA IMT 2000</li>
<li>
<code>3FFFFFFF</code> Any band</li>
<li>
<code>40000000</code> No change of band</li>
</ul>
<p>Roaming:
</p>
<ul>
<li>
<code>0</code> Not supported</li>
<li>
<code>1</code> Roaming is supported</li>
<li>
<code>2</code> No change</li>
</ul>
<p>Domain:
</p>
<ul>
<li>
<code>0</code> CS_ONLY</li>
<li>
<code>1</code> PS_ONLY</li>
<li>
<code>2</code> CS_PS</li>
<li>
<code>3</code> ANY</li>
<li>
<code>4</code> No change</li>
</ul>
<h3><span class="mw-headline" id="Monitor_used_bandwidth">Monitor used bandwidth</span></h3>
<p>Frequently a 3G connection obtained via a mobile phone operator comes with restricted bandwidth, so that you are only allowed to use a certain bandwidth per time (e.g. 1GB per month). While it is quite straight-forward to know which type of network applications are pretty bandwidth extensive (e.g. video streaming, gaming, torrent, etc.), it may be difficult to keep an overview about overall consumed bandwidth. 
</p>
<p>A number of tools are available to help with that. Two console tools are <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vnstat">vnstat</a></span>, which allows to keep track of bandwith over time, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iftop">iftop</a></span> to monitor bandwidth of individual sessions.
</p>
<p>The internal web server found in some devices, such as some Huawei HiLink, might also show information about bandwidth usage.
</p>
<h3><span class="mw-headline" id="Reading_SMS">Reading SMS</span></h3>
<h4><span class="mw-headline" id="With_dedicated_software">With dedicated software</span></h4>
<p>This was tested on a Huawei EM770W (GTM382E) 3g card integrated into an Acer Aspire AS3810TG laptop. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnokii/">gnokii</a></span><sup><small>AUR</small></sup>, then:
</p>
<pre>$ mkdir -p $XDG_CONFIG_HOME/gnokii
</pre>
<p>Usually the configuration directory is <code>~/.config/gnokii</code>. 
</p>
<pre>$ cp /etc/gnokiirc ~/.config/gnokii/config
</pre>
<p>Edit <code>~/.config/gnokii/config</code> as follows:
</p>
<pre>port = /dev/ttyUSB0
</pre>
<p>You may have to use a different port depending on your configuration, for example <code>/dev/ttyUSB1</code> or something else:
</p>
<pre>model = AT
connection = serial</pre>
<p>You need to be part of the <code>uucp</code> <a href="../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">group</a> to use <code>/dev/ttyUSB0</code>.
</p>
<p>Then launch gnokii:
</p>
<pre>$ xgnokii
</pre>
<p>Click on the "SMS" icon button, a window opens up. Then click: "messages-&gt;activate sms reading". Your messages will show up in the window.
</p>
<p><b>Command line script</b>:
</p>
<p>A small command line script using gnokii to read SMS on your SIM card (not phone memory) without having to start a GUI:
</p>
<pre>$ gnokii --getsms SM 0 end 2&gt;&amp;1|grep Text -A1 -B3|grep -v Text
</pre>
<p>What it does:
</p>
<pre>gnokii # invoke gnokii
--getsms SM 0 end # read SMS from SM-memory location (=SIM card) starting at 0 and reading all occupied memory locations ("end")
2&gt;&amp;1 # connect STDERR to STDOUT to make sure the output from the --getsms command can be piped to grep
|grep Text # pipe output from gnokii to grep, anchoring at output containing "Text"
-A1 -B3 # print one line after the matched pattern and three lines before the matched pattern
|grep -v Text # grep result to another grep to exclude the "Text" line (-v for inverting the pattern)
</pre>
<p>Granted this does not work very well if your SMS contains the word "Text", but you may adapt the script to your liking.
</p>
<p>Another option is to use <code>mmcli</code>, you can use simple bash script like <a rel="nofollow" class="external text" href="https://github.com/kamzone/3msg">this one</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-10-12 ⓘ]</sup> that is also used to write messages or this one below:
</p>
<pre>#!/bin/sh
#get modem number
MODEMNO=$(mmcli -L | grep -o "Modem/[0-9]" | grep -o [0-9]$)
#list all SMS messages, and select this with highest id (usually newest one)
SMSNO=$(mmcli -m ${MODEMNO} --messaging-list-sms | awk '/received/{split($1, ar, /\//); print ar[6]; exit}')
#read message with highest id
mmcli -m ${MODEMNO} -s ${SMSNO}
</pre>
<h4><span class="mw-headline" id="With_email_like_web_interface">With email like web interface</span></h4>
<p>Some Devices, such as some Huawei HiLink, include an email like web interface for SMS. It is included in the device internal web server, which is used for other purposes too.
</p>
<h3><span class="mw-headline" id="Writing_SMS">Writing SMS</span></h3>
<pre>#!/bin/sh
#get modem number
MODEMNO=$(mmcli -L | grep -o "Modem/[0-9]" | grep -o [0-9]$)
#create sms in modem and get number
SMSNO=$(mmcli -m ${MODEMNO} --messaging-create-sms="text='$1',number=+$2" |  grep -o [0-9]*$)
#send message
mmcli -s ${SMSNO} --send
# delete all sent messages
for i in $(mmcli -m ${MODEMNO} --messaging-list-sms | grep " (sent)" | cut -f5 -d' ') ; do
    mmcli -m ${MODEMNO} --messaging-delete-sms=$i
done
</pre>
<p>You may need give permission by creating file with content like
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/polkit-1/rules.d/49-nopasswd_mmcli.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">polkit.addRule(function(action, subject) {
    if (action.id == "org.freedesktop.ModemManager1.Messaging" &amp;&amp;
        subject.isInGroup("uucp"))
    {
        return polkit.Result.YES;
    }
});
</pre>
<h3><span class="mw-headline" id="Commands_to_restart_the_device">Commands to restart the device</span></h3>
<p>Unplugging, and plugging, the device is sometimes used to restart the USB device. The following describes how to do that from the shell. Doing that from the shell might be useful, if, for example, the plug is at the rear side of the PC. The method described is not just for USB modems. It should be good for many other USB devices.
</p>
<p>The important part is that the requirements are for the USB bus, and the port, the device is attached to. There could be one, or more, sub ports too. Suppose I obtained bus 2 and port 4, without sub ports, for my device from the output of <code>lsusb -t</code>. This information is also recorded in the journal. With 
</p>
<pre>$ cat /sys/bus/usb/drivers/usb/2-4/product
</pre>
<p>I can verify it is the intended device.
</p>
<p>The following sequence will restart the device:
</p>
<pre># echo 2-4 &gt; /sys/bus/usb/drivers/usb/unbind
# sleep 10
# echo 2-4 &gt; /sys/bus/usb/drivers/usb/bind
</pre>
<p>Some more comments are at, for example, <a rel="nofollow" class="external free" href="https://askubuntu.com/questions/1036341/unplug-and-plug-in-again-a-usb-device-in-the-terminal">https://askubuntu.com/questions/1036341/unplug-and-plug-in-again-a-usb-device-in-the-terminal</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Connection_halts_after_few_minutes_running">Connection halts after few minutes running</span></h3>
<p>This problem commonly occurs on some modems which locked by a mobile operator. You can successfully connect to the internet but after few minutes connection halts and your modem reboots. That happens because an operator built a some checks into modem firmware so a modem checks if a branded software is running on your pc, but usually that software is Windows-only, and obviously you do not use it. Fix (it works on ZTE-mf190 at least) is simple - send this command through serial port (use minicom or similar soft):
</p>
<pre>AT+ZCDRUN=E\r\n
</pre>
<p>This command will delete a <code>NODOWNLOAD.FLG</code> file in the modem's filesystem - it will disable such checks.
</p>
<p>Another possibility for such disconnections is to help the customer save bandwidth, which might be expensive. With Huawei HiLink devices with a web interface, there might be an option there to set a longer period of inactivity before the connection hangs up.
</p>
<h3><span class="mw-headline" id="Low_connection_speed">Low connection speed</span></h3>
<p>Someone claims that the connection speed under Linux is lower than Windows <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=111513">[3]</a>. This is a short summary for possible solutions which are not fully verified.
</p>
<p>In most of conditions, the low speed is caused by bad receiver signals and too many people in cell. But you still could use the following method to try to improve the connection speed:
</p>
<ul><li>QoS parameter can be set with the <code>AT+CGEQMIN</code> and <code>AT+CGEQREQ</code> commands. It should also be possible to decrease and limit the connection speed. Add the following <code>Init</code> command in <code>/etc/wvdial.conf</code>:</li></ul>
<pre>Init6 = AT+CGEQMIN=1,4,64,640,64,640
Init7 = AT+CGEQREQ=1,4,64,640,64,640
</pre>
<ul><li>Baud parameter in <code>/etc/wvdial.conf</code> could be used to increase the connection speed:</li></ul>
<pre>Baud = 460800
</pre>
<p>It is advisable to see the baud rate set by the official modem application for Windows (possibly <code>9600</code> on Vista).
</p>
<h3><span class="mw-headline" id="Fix_image_quality">Fix image quality</span></h3>
<p>If you are getting low quality images while browsing the web over a mobile broadband connection with the hints <code>shift+r improves the quality of this image</code> and <code>shift+a improves the quality of all images on this page</code>, follow these instructions:
</p>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tinyproxy">tinyproxy</a></span>.
</p>
<p>Edit <code>/etc/tinyproxy/tinyproxy.conf</code> and insert the following two lines:
</p>
<pre>AddHeader "Pragma" "No-Cache"
AddHeader "Cache-Control" "No-Cache"
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> <code>tinyproxy.service</code>
</p>
<p>Configure your browser to use <code>localhost:8888</code> as a <a href="../en/Proxy_server.html" title="Proxy server">proxy server</a> and you are all done. This is especially useful if you are using, for example, Google <a href="../en/Chromium.html" class="mw-redirect" title="Chrome">Chrome</a> which, unlike Firefox, does not allow you to modify the Pragma and Cache-Control headers.
</p>
<h3><span class="mw-headline" id="ModemManager_does_not_recognize_the_modem">ModemManager does not recognize the modem</span></h3>
<p>In case ModemManager does not recognize the modem, check the <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Unit status">unit status</a> of <code>ModemManager.service</code>. If you get error messages such as <code>Couldn't check support for device</code> and <code>not supported by any plugin</code>, you may have to whitelist your device using the <a rel="nofollow" class="external text" href="https://www.freedesktop.org/software/ModemManager/api/latest/ref-overview-modem-filter.html">ModemManager filter rules</a>.
</p>
<h3><span class="mw-headline" id="FCC_locking">FCC locking</span></h3>
<p>The FCC lock is a software lock integrated in WWAN modules shipped by several different laptop manufacturers like Lenovo, Dell, or HP. This lock prevents the WWAN module from being put online until some specific unlock procedure (usually a magic command sent to the module) is performed.
</p>
<p>Since release 1.18.4, the ModemManager daemon no longer automatically performs the FCC unlock procedure <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/mobile-broadband/ModemManager/-/issues/402#note_1153490">[4]</a>.
</p>
<p>ModemManager will keep on providing support for the known FCC unlock procedures, but <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/mobile-broadband/ModemManager/-/merge_requests/685">no longer automatically</a>: the user must install and select the FCC unlock procedure needed in the specific laptop being used. This applies to: EM7355, MC8805, MC7355, EM7455, SDX55, EM120.
</p>
<p>The <i>modemmanager</i> package ships several scripts installed under <code>/usr/share/ModemManager/fcc-unlock.available.d</code> and named as <code><i>vid</i>:<i>pid</i></code> with either the PCI or USB vendor and product IDs. However, they are not used if they are not in the <code>/etc/ModemManager</code> directory.
</p>
<p>For each device the <code><i>vid</i>:<i>pid</i></code> can be found in the brackets at the end of the line:
</p>
<pre># lspci -nn
</pre>
<p>To enable unlock script for the device it must be symlinked like so:
</p>
<pre># ln -sft /etc/ModemManager/fcc-unlock.d /usr/share/ModemManager/fcc-unlock.available.d/<i>vid:pid</i>
</pre>
<p>For a Quectel EM120 modem that would be:
</p>
<pre># ln -sft /etc/ModemManager/fcc-unlock.d /usr/share/ModemManager/fcc-unlock.available.d/1eac:1001
</pre>
<p>See the <a rel="nofollow" class="external text" href="https://modemmanager.org/docs/modemmanager/fcc-unlock/">ModemManager documentation</a> for more information.
</p>
<h3>
<span id="NetworkManager:_Device_not_available_.2F_rfkill_block"></span><span class="mw-headline" id="NetworkManager:_Device_not_available_/_rfkill_block">NetworkManager: Device not available / rfkill block</span>
</h3>
<p>If NetworkManager persists on that the device (e.g. <i>/dev/cdc-wdm0</i>) is not available while ModemManager can use it, it could either be, that the device is blocked using a hardware switch, by <a href="../en/Network_configuration/Wireless.html#Rfkill_caveat" class="mw-redirect" title="Rfkill">rfkill</a> or just NetworkManager believes that.
</p>
<p>Check <i>rfkill</i> with:
</p>
<pre># rfkill
ID TYPE      DEVICE                   SOFT      HARD
 0 bluetooth tpacpi_bluetooth_sw unblocked unblocked
 1 wwan      tpacpi_wwan_sw      unblocked unblocked
 2 wlan      phy0                unblocked unblocked
 8 bluetooth hci0                unblocked unblocked
</pre>
<p>The <i>wwan</i> device should be listed as unblocked for both SOFT &amp; HARD. If it is HARD blocked, a hardware switch blocks the device. If it is SOFT blocked, unblock it using:
</p>
<pre># rfkill unblock wwan
</pre>
<p>If NetworkManager still declares the device not available, it could be that NetworkManager is not synced with <i>rfkill</i>. Check that using:
</p>
<pre>$ nmcli radio
WIFI-HW  WIFI     WWAN-HW  WWAN
enabled  enabled  enabled  enabled
</pre>
<p>If WWAN is listed as disabled, enable it using:
</p>
<pre>$ nmcli radio wwan on
</pre>
<h3><span class="mw-headline" id="ModemManager_connects_successfully_but_the_interface_does_not_show_any_IP_address">ModemManager connects successfully but the interface does not show any IP address</span></h3>
<p>This has been reported to happen on some LTE modems with buggy or incompatible firmware versions. In this scenario, when inspecting the bearer with:
</p>
<pre>$ mmcli -m [your modem index] -b 1
</pre>
<p>It can be seen how the <b>IPv4 configuration</b> section shows no IP address, and may show <code>dhcp</code> as the <code>method</code> despite the associated interface (e.g. <code>wwan0</code>) not being dhcp-capable. In this cases, the modem firmware is not behaving correctly and it should be upgraded.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Mobile_broadband_modem" class="extiw" title="wikipedia:Mobile broadband modem">Wikipedia:Mobile broadband modem</a></li>
<li><a href="https://en.wikipedia.org/wiki/Wireless_WAN" class="extiw" title="wikipedia:Wireless WAN">Wikipedia:Wireless WAN</a></li>
<li><a href="https://en.wikipedia.org/wiki/Mobile_broadband" class="extiw" title="wikipedia:Mobile broadband">Wikipedia:Mobile broadband</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Modems.html" title="Category:Modems">Modems</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Mobile_broadband_modem&amp;oldid=826325">https://wiki.archlinux.org/index.php?title=Mobile_broadband_modem&amp;oldid=826325</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 4 February 2025, at 10:53.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
