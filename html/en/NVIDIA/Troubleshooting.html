<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>NVIDIA/Troubleshooting - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-NVIDIA_Troubleshooting rootpage-NVIDIA skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Failure_to_start" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Failure_to_start">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Failure to start</span>
			</div>
		</a>
		
			<button aria-controls="toc-Failure_to_start-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Failure to start subsection</span>
			</button>
		
		<ul id="toc-Failure_to_start-sublist" class="vector-toc-list">
			<li id="toc-System_will_not_boot_after_driver_was_installed" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#System_will_not_boot_after_driver_was_installed">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>System will not boot after driver was installed</span>
				</div>
			</a>
			
			<ul id="toc-System_will_not_boot_after_driver_was_installed-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Xorg_fails_to_load_or_Red_Screen_of_Death" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Xorg_fails_to_load_or_Red_Screen_of_Death">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Xorg fails to load or Red Screen of Death</span>
				</div>
			</a>
			
			<ul id="toc-Xorg_fails_to_load_or_Red_Screen_of_Death-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Black_screen_at_X_startup_/_Machine_poweroff_at_X_shutdown" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Black_screen_at_X_startup_/_Machine_poweroff_at_X_shutdown">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Black screen at X startup / Machine poweroff at X shutdown</span>
				</div>
			</a>
			
			<ul id="toc-Black_screen_at_X_startup_/_Machine_poweroff_at_X_shutdown-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen(s)_found,_but_none_have_a_usable_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen(s)_found,_but_none_have_a_usable_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Screen(s) found, but none have a usable configuration</span>
				</div>
			</a>
			
			<ul id="toc-Screen(s)_found,_but_none_have_a_usable_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-X_fails_with_&quot;Failing_initialization_of_X_screen&quot;" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#X_fails_with_&quot;Failing_initialization_of_X_screen&quot;">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.5</span>
					<span>X fails with "Failing initialization of X screen"</span>
				</div>
			</a>
			
			<ul id="toc-X_fails_with_&quot;Failing_initialization_of_X_screen&quot;-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Xorg_fails_during_boot,_but_otherwise_starts_fine" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Xorg_fails_during_boot,_but_otherwise_starts_fine">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.6</span>
					<span>Xorg fails during boot, but otherwise starts fine</span>
				</div>
			</a>
			
			<ul id="toc-Xorg_fails_during_boot,_but_otherwise_starts_fine-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Black_screen_on_systems_with_integrated_GPU" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Black_screen_on_systems_with_integrated_GPU">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.7</span>
					<span>Black screen on systems with integrated GPU</span>
				</div>
			</a>
			
			<ul id="toc-Black_screen_on_systems_with_integrated_GPU-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-X_fails_with_&quot;no_screens_found&quot;_when_using_Multiple_GPUs" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#X_fails_with_&quot;no_screens_found&quot;_when_using_Multiple_GPUs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.8</span>
					<span>X fails with "no screens found" when using Multiple GPUs</span>
				</div>
			</a>
			
			<ul id="toc-X_fails_with_&quot;no_screens_found&quot;_when_using_Multiple_GPUs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Modprobe_Error:_&quot;Could_not_insert_'nvidia':_No_such_device&quot;_on_linux_&gt;=4.8" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Modprobe_Error:_&quot;Could_not_insert_'nvidia':_No_such_device&quot;_on_linux_>=4.8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.9</span>
					<span>Modprobe Error: "Could not insert 'nvidia': No such device" on linux &gt;=4.8</span>
				</div>
			</a>
			
			<ul id="toc-Modprobe_Error:_&quot;Could_not_insert_'nvidia':_No_such_device&quot;_on_linux_&gt;=4.8-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-System_does_not_return_from_suspend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#System_does_not_return_from_suspend">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.10</span>
					<span>System does not return from suspend</span>
				</div>
			</a>
			
			<ul id="toc-System_does_not_return_from_suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Black_screen_returning_from_suspend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Black_screen_returning_from_suspend">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.11</span>
					<span>Black screen returning from suspend</span>
				</div>
			</a>
			
			<ul id="toc-Black_screen_returning_from_suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Crashes_and_hangs" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Crashes_and_hangs">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Crashes and hangs</span>
			</div>
		</a>
		
			<button aria-controls="toc-Crashes_and_hangs-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Crashes and hangs subsection</span>
			</button>
		
		<ul id="toc-Crashes_and_hangs-sublist" class="vector-toc-list">
			<li id="toc-Crashing_in_general" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Crashing_in_general">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Crashing in general</span>
				</div>
			</a>
			
			<ul id="toc-Crashing_in_general-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bad_support_of_mesh_shaders" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Bad_support_of_mesh_shaders">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Bad support of mesh shaders</span>
				</div>
			</a>
			
			<ul id="toc-Bad_support_of_mesh_shaders-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Visual_glitches,_hangs_and_errors_in_OpenGL_applications" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Visual_glitches,_hangs_and_errors_in_OpenGL_applications">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Visual glitches, hangs and errors in OpenGL applications</span>
				</div>
			</a>
			
			<ul id="toc-Visual_glitches,_hangs_and_errors_in_OpenGL_applications-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Kernel_panic_when_updating_and/or_rebooting_the_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Kernel_panic_when_updating_and/or_rebooting_the_system">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Kernel panic when updating and/or rebooting the system</span>
				</div>
			</a>
			
			<ul id="toc-Kernel_panic_when_updating_and/or_rebooting_the_system-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GSP_firmware" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GSP_firmware">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>GSP firmware</span>
				</div>
			</a>
			
			<ul id="toc-GSP_firmware-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Visual_issues" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Visual_issues">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Visual issues</span>
			</div>
		</a>
		
			<button aria-controls="toc-Visual_issues-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Visual issues subsection</span>
			</button>
		
		<ul id="toc-Visual_issues-sublist" class="vector-toc-list">
			<li id="toc-Avoid_screen_tearing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Avoid_screen_tearing">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Avoid screen tearing</span>
				</div>
			</a>
			
			<ul id="toc-Avoid_screen_tearing-sublist" class="vector-toc-list">
				<li id="toc-Multi-monitor" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Multi-monitor">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1</span>
					<span>Multi-monitor</span>
				</div>
			</a>
			
			<ul id="toc-Multi-monitor-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Screen_corruption_after_resuming_from_suspend_or_hibernation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_corruption_after_resuming_from_suspend_or_hibernation">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Screen corruption after resuming from suspend or hibernation</span>
				</div>
			</a>
			
			<ul id="toc-Screen_corruption_after_resuming_from_suspend_or_hibernation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Corrupted_screen:_&quot;Six_screens&quot;_Problem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Corrupted_screen:_&quot;Six_screens&quot;_Problem">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Corrupted screen: "Six screens" Problem</span>
				</div>
			</a>
			
			<ul id="toc-Corrupted_screen:_&quot;Six_screens&quot;_Problem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Invisible_text_and_icons_with_nvidia-470" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Invisible_text_and_icons_with_nvidia-470">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Invisible text and icons with nvidia-470</span>
				</div>
			</a>
			
			<ul id="toc-Invisible_text_and_icons_with_nvidia-470-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fix_graphical_corruption_in_GNOME_Shell_when_resuming_from_sleep" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fix_graphical_corruption_in_GNOME_Shell_when_resuming_from_sleep">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Fix graphical corruption in GNOME Shell when resuming from sleep</span>
				</div>
			</a>
			
			<ul id="toc-Fix_graphical_corruption_in_GNOME_Shell_when_resuming_from_sleep-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-System_freeze_when_the_display_powers_off_or_on_resume" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#System_freeze_when_the_display_powers_off_or_on_resume">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>System freeze when the display powers off or on resume</span>
				</div>
			</a>
			
			<ul id="toc-System_freeze_when_the_display_powers_off_or_on_resume-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Performance_issues" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Performance_issues">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Performance issues</span>
			</div>
		</a>
		
			<button aria-controls="toc-Performance_issues-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Performance issues subsection</span>
			</button>
		
		<ul id="toc-Performance_issues-sublist" class="vector-toc-list">
			<li id="toc-Bad_performance_after_installing_a_new_driver_version" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Bad_performance_after_installing_a_new_driver_version">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Bad performance after installing a new driver version</span>
				</div>
			</a>
			
			<ul id="toc-Bad_performance_after_installing_a_new_driver_version-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Extreme_lag_on_Xorg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Extreme_lag_on_Xorg">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Extreme lag on Xorg</span>
				</div>
			</a>
			
			<ul id="toc-Extreme_lag_on_Xorg-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-CPU_spikes_with_400_series_cards" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#CPU_spikes_with_400_series_cards">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>CPU spikes with 400 series cards</span>
				</div>
			</a>
			
			<ul id="toc-CPU_spikes_with_400_series_cards-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Other_issues" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Other_issues">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Other issues</span>
			</div>
		</a>
		
			<button aria-controls="toc-Other_issues-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Other issues subsection</span>
			</button>
		
		<ul id="toc-Other_issues-sublist" class="vector-toc-list">
			<li id="toc-Vulkan_error_on_applications_start" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Vulkan_error_on_applications_start">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Vulkan error on applications start</span>
				</div>
			</a>
			
			<ul id="toc-Vulkan_error_on_applications_start-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_audio_over_HDMI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_audio_over_HDMI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>No audio over HDMI</span>
				</div>
			</a>
			
			<ul id="toc-No_audio_over_HDMI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Backlight_is_not_turning_off_in_some_occasions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Backlight_is_not_turning_off_in_some_occasions">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Backlight is not turning off in some occasions</span>
				</div>
			</a>
			
			<ul id="toc-Backlight_is_not_turning_off_in_some_occasions-sublist" class="vector-toc-list">
				<li id="toc-HardDPMS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#HardDPMS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3.1</span>
					<span>HardDPMS</span>
				</div>
			</a>
			
			<ul id="toc-HardDPMS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-xrandr_BadMatch" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#xrandr_BadMatch">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.4</span>
					<span>xrandr BadMatch</span>
				</div>
			</a>
			
			<ul id="toc-xrandr_BadMatch-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Override_EDID" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Override_EDID">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.5</span>
					<span>Override EDID</span>
				</div>
			</a>
			
			<ul id="toc-Override_EDID-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Overclocking_with_nvidia-settings_GUI_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Overclocking_with_nvidia-settings_GUI_not_working">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.6</span>
					<span>Overclocking with nvidia-settings GUI not working</span>
				</div>
			</a>
			
			<ul id="toc-Overclocking_with_nvidia-settings_GUI_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Overclocking_not_working_with_Unknown_Error" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Overclocking_not_working_with_Unknown_Error">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.7</span>
					<span>Overclocking not working with Unknown Error</span>
				</div>
			</a>
			
			<ul id="toc-Overclocking_not_working_with_Unknown_Error-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Power_draw" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Power_draw">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.8</span>
					<span>Power draw</span>
				</div>
			</a>
			
			<ul id="toc-Power_draw-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Test_software_GL" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Test_software_GL">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.9</span>
					<span>Test software GL</span>
				</div>
			</a>
			
			<ul id="toc-Test_software_GL-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Refresh-rate_limited_to_120Hz" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Refresh-rate_limited_to_120Hz">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.10</span>
					<span>Refresh-rate limited to 120Hz</span>
				</div>
			</a>
			
			<ul id="toc-Refresh-rate_limited_to_120Hz-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Wrong_color_space_on_60hz_on_Wayland_with_HDMI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Wrong_color_space_on_60hz_on_Wayland_with_HDMI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.11</span>
					<span>Wrong color space on 60hz on Wayland with HDMI</span>
				</div>
			</a>
			
			<ul id="toc-Wrong_color_space_on_60hz_on_Wayland_with_HDMI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">NVIDIA/Troubleshooting</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/NVIDIA/%E3%83%88%E3%83%A9%E3%83%96%E3%83%AB%E3%82%B7%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0" title="NVIDIA/トラブルシューティング – 日本語" lang="ja" hreflang="ja" data-title="NVIDIA/トラブルシューティング" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../../ru/NVIDIA/Troubleshooting.html" title="NVIDIA (Русский)/Troubleshooting – русский" lang="ru" hreflang="ru" data-title="NVIDIA (Русский)/Troubleshooting" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/NVIDIA/Troubleshooting" title="NVIDIA/Troubleshooting – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="NVIDIA/Troubleshooting" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <bdi dir="ltr"><a href="../../en/NVIDIA.html" title="NVIDIA">NVIDIA</a></bdi>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Failure_to_start">Failure to start</h2></div>
<div class="mw-heading mw-heading3"><h3 id="System_will_not_boot_after_driver_was_installed">System will not boot after driver was installed</h3></div>
<p>If after installing the <a href="../../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> driver your system becomes stuck before reaching the display manager, try to <a href="../../en/Kernel_mode_setting.html#Disabling_modesetting" title="Kernel mode setting">disable kernel mode setting</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Xorg_fails_to_load_or_Red_Screen_of_Death">Xorg fails to load or Red Screen of Death</h3></div>
<p>If you get a red screen and use GRUB, disable the GRUB framebuffer by editing <code>/etc/default/grub</code> and uncomment <code>GRUB_TERMINAL_OUTPUT=console</code>. For more information see <a href="../../en/GRUB/Tips_and_tricks.html#Disable_framebuffer" title="GRUB/Tips and tricks">GRUB/Tips and tricks#Disable framebuffer</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Black_screen_at_X_startup_/_Machine_poweroff_at_X_shutdown">
<span id="Black_screen_at_X_startup_.2F_Machine_poweroff_at_X_shutdown"></span>Black screen at X startup / Machine poweroff at X shutdown</h3></div>
<p>If you have installed an update of NVIDIA and your screen stays black after launching Xorg, or if shutting down Xorg causes a machine poweroff, try the below workarounds:
</p>
<ul>
<li>Prepend <code>xrandr --auto</code> to your <a href="../../en/Xinit.html#xinitrc" class="mw-redirect" title="Xinitrc">xinitrc</a>
</li>
<li>Use the <code>rcutree.gp_init_delay=1</code> <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>.</li>
<li>You can also try to add the <code>nvidia</code> module directly to your <a href="../../en/Mkinitcpio.html#Configuration" class="mw-redirect" title="Mkinitcpio.conf">mkinitcpio.conf</a>.</li>
<li>If the screen still stays black with <b>both</b> the <code>rcutree.gp_init_delay=1</code> <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> and the <code>nvidia</code> module directly in the <a href="../../en/Mkinitcpio.html#Configuration" class="mw-redirect" title="Mkinitcpio.conf">mkinitcpio.conf</a>, try re-installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-utils">nvidia-utils</a></span> in that order, and finally reload the driver:</li>
</ul>
<pre># modprobe nvidia
</pre>
<div class="mw-heading mw-heading3"><h3 id="Screen(s)_found,_but_none_have_a_usable_configuration">
<span id="Screen.28s.29_found.2C_but_none_have_a_usable_configuration"></span>Screen(s) found, but none have a usable configuration</h3></div>
<p>Sometimes NVIDIA and X have trouble finding the active screen. If your graphics card has multiple outputs try plugging your monitor into the other ones. On a laptop it may be because your graphics card has VGA/TV out. Xorg.0.log will provide more info.
</p>
<p>Another thing to try is adding an invalid <code>Option "ConnectedMonitor"</code> to <code>Section "Device"</code> to force Xorg throw an error and show you how to correct it. See <a rel="nofollow" class="external text" href="https://download.nvidia.com/XFree86/Linux-x86_64/575.64/README/xconfigoptions.html#ConnectedMonitor">the documentation</a> for more information about the ConnectedMonitor setting.
</p>
<p>After re-run X see Xorg.0.log to get valid CRT-x,DFP-x,TV-x values.
</p>
<p><code>nvidia-xconfig --query-gpu-info</code> could be helpful.
</p>
<div class="mw-heading mw-heading3"><h3 id="X_fails_with_&quot;Failing_initialization_of_X_screen&quot;">
<span id="X_fails_with_.22Failing_initialization_of_X_screen.22"></span>X fails with "Failing initialization of X screen"</h3></div>
<p>If <code>/var/log/Xorg.0.log</code> says X server fails to initialize screen
</p>
<pre>(EE) NVIDIA(G0): GPU screens are not yet supported by the NVIDIA driver
(EE) NVIDIA(G0): Failing initialization of X screen
</pre>
<p>and <i>nvidia-smi</i> says <code>No running processes found</code>
</p>
<p>The solution is at first reinstall latest <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-utils">nvidia-utils</a></span>, and then copy <code>/usr/share/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code> to <code>/etc/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code>, and then edit <code>/etc/X11/xorg.conf.d/10-nvidia-drm-outputclass.conf</code> and add the line <code>Option "PrimaryGPU" "yes"</code>. Restart the computer. The problem will be fixed.
</p>
<div class="mw-heading mw-heading3"><h3 id="Xorg_fails_during_boot,_but_otherwise_starts_fine">
<span id="Xorg_fails_during_boot.2C_but_otherwise_starts_fine"></span>Xorg fails during boot, but otherwise starts fine</h3></div>
<p>On very fast booting systems, systemd may attempt to start the display manager before the NVIDIA driver has fully initialized. You will see a message like the following in your logs only when Xorg runs during boot.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/log/Xorg.0.log</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[     1.807] (EE) NVIDIA(0): Failed to initialize the NVIDIA kernel module. Please see the
[     1.807] (EE) NVIDIA(0):     system's kernel log for additional error messages and
[     1.808] (EE) NVIDIA(0):     consult the NVIDIA README for details.
[     1.808] (EE) NVIDIA(0):  *** Aborting ***</pre>
<p>In this case you will need to establish an ordering dependency from the display manager to the DRI device. First create device units for DRI devices by creating a new udev rules file.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-systemd-dri-devices.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", KERNEL=="card*", SUBSYSTEM=="drm", TAG+="systemd"</pre>
<p>Then create dependencies from the display manager to the device(s).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/display-manager.service.d/10-wait-for-dri-devices.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Wants=dev-dri-card0.device
After=dev-dri-card0.device</pre>
<p>If you have additional cards needed for the desktop then list them in Wants and After seperated by spaces.
</p>
<div class="mw-heading mw-heading3"><h3 id="Black_screen_on_systems_with_integrated_GPU">Black screen on systems with integrated GPU</h3></div>
<p>If you have a system with an integrated GPU (e.g. Intel HD 4000, VIA VX820 Chrome 9 or AMD Cezanne) and have installed the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span> package, you may experience a black screen on boot, when changing virtual terminal, or when exiting an X session. This may be caused by a conflict between the graphics modules. This is solved by blacklisting the relevant GPU modules. Create the file <code>/etc/modprobe.d/blacklist.conf</code> and prevent the relevant modules from loading on boot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">install i915 /usr/bin/false
install intel_agp /usr/bin/false
install viafb /usr/bin/false
install radeon /usr/bin/false
install amdgpu /usr/bin/false
</pre>
<div class="mw-heading mw-heading3"><h3 id="X_fails_with_&quot;no_screens_found&quot;_when_using_Multiple_GPUs">
<span id="X_fails_with_.22no_screens_found.22_when_using_Multiple_GPUs"></span>X fails with "no screens found" when using Multiple GPUs</h3></div>
<p>In situations where you might have multiple GPUs on a system and X fails to start with:
</p>
<pre>[ 76.633] (EE) No devices detected.
[ 76.633] Fatal server error:
[ 76.633] no screens found
</pre>
<p>then you need to add your discrete card's BusID to your X configuration. This can happen on systems with an Intel CPU and an integrated GPU or if you have more than one NVIDIA card connected. Find your BusID:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lspci -d ::03xx</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v2/3rd Gen Core processor Graphics Controller (rev 09)
01:00.0 VGA compatible controller: NVIDIA Corporation GK107 [GeForce GTX 650] (rev a1)
08:00.0 3D controller: NVIDIA Corporation GM108GLM [Quadro K620M / Quadro M500M] (rev a2)
</pre>
<p>Then you fix it by adding it to the card's Device section in your X configuration. In my case:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-nvidia.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
    BusID          "PCI:1:0:0"
EndSection
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> BusID formatting is important!</div>
<p>In the example above <code>01:00.0</code> is stripped to be written as <code>1:0:0</code>, however some conversions can be more complicated. <code>lspci</code> output is in hex format, but in configuration files the BusID's are in decimal format! This means that in cases where the BusID is greater than 9 you will need to convert it to decimal!
</p>
<p>ie: <code>5e:00.0</code> from lspci becomes <code>PCI:94:0:0</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Modprobe_Error:_&quot;Could_not_insert_'nvidia':_No_such_device&quot;_on_linux_&gt;=4.8">
<span id="Modprobe_Error:_.22Could_not_insert_.27nvidia.27:_No_such_device.22_on_linux_.3E.3D4.8"></span>Modprobe Error: "Could not insert 'nvidia': No such device" on linux &gt;=4.8</h3></div>
<p>With linux 4.8, one can get the following errors when trying to use the discrete card:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># modprobe nvidia -vv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">modprobe: INFO: custom logging function 0x409c10 registered
modprobe: INFO: Failed to insert module '/lib/modules/4.8.6-1-ARCH/extramodules/nvidia.ko.gz': No such device
modprobe: ERROR: could not insert 'nvidia': No such device
modprobe: INFO: context 0x24481e0 released
insmod /lib/modules/4.8.6-1-ARCH/extramodules/nvidia.ko.gz
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
NVRM: The NVIDIA GPU 0000:01:00.0 (PCI ID: 10de:139b)
NVRM: installed in this system is not supported by the 370.28
NVRM: NVIDIA Linux driver release.  Please see 'Appendix
NVRM: A - Supported NVIDIA GPU Products' in this release's
NVRM: README, available on the Linux driver download page
NVRM: at www.nvidia.com.
...
</pre>
<p>This problem is caused by bad commits pertaining to PCIe power management in the Linux Kernel (as documented in <a rel="nofollow" class="external text" href="https://devtalk.nvidia.com/default/topic/971733/-370-28-with-kernel-4-8-on-gt-2015-machines-driver-claims-card-not-supported-if-nvidia-is-not-primary-card/">this NVIDIA DevTalk thread</a>).
</p>
<p>The workaround is to add <code>pcie_port_pm=off</code> to your <a href="../../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>. Note that this disables PCIe power management for all devices.
</p>
<div class="mw-heading mw-heading3"><h3 id="System_does_not_return_from_suspend">System does not return from suspend</h3></div>
<p>What you see in the log:
</p>
<pre>kernel: nvidia-modeset: ERROR: GPU:0: Failed detecting connected display devices
kernel: nvidia-modeset: ERROR: GPU:0: Failed detecting connected display devices
kernel: nvidia-modeset: WARNING: GPU:0: Failure processing EDID for display device DELL U2412M (DP-0).
kernel: nvidia-modeset: WARNING: GPU:0: Unable to read EDID for display device DELL U2412M (DP-0)
kernel: nvidia-modeset: ERROR: GPU:0: Failure reading maximum pixel clock value for display device DELL U2412M (DP-0).
</pre>
<p>A possible solution based on <a rel="nofollow" class="external autonumber" href="https://forums.developer.nvidia.com/t/solution-for-nvidia-sleep-wake-issue-in-linux/110911">[1]</a>:
</p>
<p>Run this command to get the <code><i>version</i></code> string:
</p>
<pre># strings /sys/firmware/acpi/tables/DSDT | grep -i 'windows ' | sort | tail -1
</pre>
<p>Add the <code>acpi_osi=! "acpi_osi=<i>version</i>"</code> <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> to your <a href="../../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> configuration.
</p>
<p>Another possible cause to the issue could be the use of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-open">nvidia-open</a></span> package, as described here:
</p>
<ul>
<li><a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?pid=2047692">https://bbs.archlinux.org/viewtopic.php?pid=2047692</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/NVIDIA/open-gpu-kernel-modules/issues/450">https://github.com/NVIDIA/open-gpu-kernel-modules/issues/450</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/NVIDIA/open-gpu-kernel-modules/issues/223">https://github.com/NVIDIA/open-gpu-kernel-modules/issues/223</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/NVIDIA/open-gpu-kernel-modules/issues/94">https://github.com/NVIDIA/open-gpu-kernel-modules/issues/94</a></li>
</ul>
<div class="mw-heading mw-heading3"><h3 id="Black_screen_returning_from_suspend">Black screen returning from suspend</h3></div>
<p>If experiencing black screen issues and logs containing:
</p>
<pre>archlinux kernel: NVRM: GPU at PCI:0000:08:00: GPU-926ecdb0-adb1-6ee9-2fad-52e7214c5011
archlinux kernel: NVRM: Xid (PCI:0000:08:00): 13, pid='&lt;unknown&gt;', name=&lt;unknown&gt;, Graphi&gt;
archlinux kernel: NVRM: Xid (PCI:0000:08:00): 13, pid='&lt;unknown&gt;', name=&lt;unknown&gt;, Graphi&gt;
archlinux kernel: NVRM: Xid (PCI:0000:08:00): 13, pid='&lt;unknown&gt;', name=&lt;unknown&gt;, Graphi&gt;
archlinux kernel: NVRM: Xid (PCI:0000:08:00): 13, pid='&lt;unknown&gt;', name=&lt;unknown&gt;, Graphi&gt;
archlinux kernel: NVRM: Xid (PCI:0000:08:00): 13, pid='&lt;unknown&gt;', name=&lt;unknown&gt;, Graphi&gt;
</pre>
<p>You need to enable the NVIDIA suspend, hibernate and sleep services as explained in <a href="../../en/NVIDIA/Tips_and_tricks.html#Preserve_video_memory_after_suspend" title="NVIDIA/Tips and tricks">NVIDIA/Tips and tricks#Preserve video memory after suspend</a>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Crashes_and_hangs">Crashes and hangs</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Crashing_in_general">Crashing in general</h3></div>
<ul>
<li>Try <a href="#GSP_firmware">disabling the GSP firmware</a>.</li>
<li>Try disabling <code>RenderAccel</code> in xorg.conf.</li>
<li>If Xorg outputs an error about <code>"conflicting memory type"</code> or <code>"failed to allocate primary buffer: out of memory"</code>, or crashes with a "Signal 11" while using nvidia-96xx drivers, add <code>nopat</code> to your <a href="../../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.</li>
<li>If the NVIDIA compiler complains about different versions of GCC between the current one and the one used for compiling the kernel, add in <code>/etc/profile</code>:</li>
</ul>
<pre>export IGNORE_CC_MISMATCH=1
</pre>
<ul><li>If fullscreen applications are freezing or crashing, try enabling <code>Display Compositing</code> and <code>Direct fullscreen rendering</code> options in your desktop environment's settings.</li></ul>
<div class="mw-heading mw-heading3"><h3 id="Bad_support_of_mesh_shaders">Bad support of mesh shaders</h3></div>
<p>This bug is present only for new games that depend on them, like Final Fantasy VII Rebirth. This is reflected in the absence of environments when using NVIDIA GPUs even with latest beta drivers. <a rel="nofollow" class="external autonumber" href="https://github.com/ValveSoftware/Proton/issues/8408">[2]</a>
</p>
<p>However, <a rel="nofollow" class="external text" href="https://github.com/ValveSoftware/Proton/issues/8408#issuecomment-2657340142">pyroveil</a>, recently developed, allows you to get around the problem with SPIR-V, while waiting for a fix from NVIDIA.
</p>
<p>You need to compile and install the tool by following <a rel="nofollow" class="external text" href="https://github.com/HansKristian-Work/pyroveil#pyroveil">the tutorial on GitHub</a>, then run the game with the <code>PYROVEIL=1</code> and <code>PYROVEIL_CONFIG=<i>/path/to/pyroveil</i>/hacks/<i>ffvii-rebirth-nvidia</i>/pyroveil.json</code> <a href="../../en/Environment_variables.html" title="Environment variables">environment variables</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Visual_glitches,_hangs_and_errors_in_OpenGL_applications">
<span id="Visual_glitches.2C_hangs_and_errors_in_OpenGL_applications"></span>Visual glitches, hangs and errors in OpenGL applications</h3></div>
<p>If you are using a recent CPU (Intel Sandy Bridge (2011) and later or AMD Zen (2017) and later) it has a micro operations cache. Using a micro op cache can lead to problems with NVIDIA's driver in OpenGL due to Cache Aliasing <a rel="nofollow" class="external autonumber" href="https://download.nvidia.com/XFree86/Linux-x86_64/575.64/README/knownissues.html">[3]</a>. You usually are able to disable the micro op cache in your systems BIOS, but this comes at the cost of performance <a rel="nofollow" class="external autonumber" href="https://chipsandcheese.com/2021/07/03/how-zen-2s-op-cache-affects-performance/">[4]</a>. Disabling the micro op cache also helps with the most severe graphical glitches in Xwayland applications, although it does not solve the problem fully <a rel="nofollow" class="external autonumber" href="https://download.nvidia.com/XFree86/Linux-x86_64/575.64/README/wayland-issues.html">[5]</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Kernel_panic_when_updating_and/or_rebooting_the_system">
<span id="Kernel_panic_when_updating_and.2For_rebooting_the_system"></span>Kernel panic when updating and/or rebooting the system</h3></div>
<p>This is a known bug that is present in the NVIDIA 550 series drivers. <a rel="nofollow" class="external autonumber" href="https://forums.developer.nvidia.com/t/series-550-freezes-laptop/284772">[6]</a> As of yet the cause is unknown however it only appears to affect laptops. See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=293400&amp;p=3">BBS#293400</a> for more details.
</p>
<p>To workaround this issue, switch to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-open-dkms">nvidia-open-dkms</a></span> if supported by the hardware, otherwise use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nvidia-535xx-dkms/">nvidia-535xx-dkms</a></span><sup><small>AUR</small></sup> instead.
</p>
<div class="mw-heading mw-heading3"><h3 id="GSP_firmware">GSP firmware</h3></div>
<p>The use of the <a rel="nofollow" class="external text" href="https://download.nvidia.com/XFree86/Linux-x86_64/575.64/README/gsp.html">GSP firmware</a>, enabled by default since version 555 of the NVIDIA driver released in June 2024, is known to cause <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=2181317">a range of issues</a> including <a href="../../en/Vulkan.html" title="Vulkan">Vulkan</a> failures and system crashes.
</p>
<p>To disable it, use the <code>NVreg_EnableGpuFirmware=0</code> <a href="../../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Module parameter">module parameter</a> for the <code>nvidia</code> kernel module. This only works with the proprietary NVIDIA driver: see <a href="../../en/NVIDIA.html#Installation" title="NVIDIA">NVIDIA#Installation</a> if switching from the open source driver.
</p>
<p>Do not forget to <a href="../../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a> if needed. To have this new kernel module option take effect, reboot.
</p>
<div class="mw-heading mw-heading2"><h2 id="Visual_issues">Visual issues</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Avoid_screen_tearing">Avoid screen tearing</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> 
<ul>
<li>This has been reported to reduce the performance of some OpenGL applications and may produce issues in WebGL. It also drastically increases the time the driver needs to clock down after load (<a rel="nofollow" class="external text" href="https://forums.developer.nvidia.com/t/if-you-have-gpu-clock-boost-problems-please-try-gl-experimentalperfstrategy-1/71762">NVIDIA Support Thread</a>).</li>
<li>
<code>ForceFullCompositionPipeline</code> is known <a rel="nofollow" class="external text" href="https://github.com/ValveSoftware/Proton/issues/6869">to break some games</a> using Vulkan under Proton with NVIDIA driver 535.</li>
</ul>
</div>
<p>Tearing can be avoided by forcing a full composition pipeline, regardless of the compositor you are using. To test whether this option will work, run:
</p>
<pre>$ nvidia-settings --assign CurrentMetaMode="nvidia-auto-select +0+0 { ForceFullCompositionPipeline = On }"
</pre>
<p>Or click on the <i>Advanced</i> button that is available on the <i>X Server Display Configuration</i> menu option. Select either <i>Force Composition Pipeline</i> or <i>Force Full Composition Pipeline</i> and click on <i>Apply</i>.
</p>
<p>In order to make the change permanent, it must be added to the <code>"Screen"</code> section of the <a href="../../en/Xorg.html" title="Xorg">Xorg</a> configuration file. When making this change, <code>TripleBuffering</code> should be enabled and <code>AllowIndirectGLXProtocol</code> should be disabled in the driver configuration as well. See example configuration below:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-nvidia.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
        Identifier "NVIDIA Card"
        Driver     "nvidia"
        VendorName "NVIDIA Corporation"
        BoardName  "GeForce GTX 1050 Ti"
EndSection

Section "Screen"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    Option         "ForceFullCompositionPipeline" "on"
    Option         "AllowIndirectGLXProtocol" "off"
    Option         "TripleBuffer" "on"
EndSection</pre>
<p>If you do not have an Xorg configuration file, you can create one for your present hardware using <code>nvidia-xconfig</code> (see <a href="../../en/NVIDIA.html#Automatic_configuration" title="NVIDIA">NVIDIA#Automatic configuration</a>) and move it from <code>/etc/X11/xorg.conf</code> to the preferred location <code>/etc/X11/xorg.conf.d/20-nvidia.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Many of the configuration options produced in <code>20-nvidia.conf</code> by using <code>nvidia-xconfig</code> are set automatically by the driver and are not needed. To only use this file for enabling composition pipeline, only the section <code>"Screen"</code> containing lines with values for <code>Identifier</code> and <code>Option</code> are necessary. Other sections may be removed from this file.</div>
<div class="mw-heading mw-heading4"><h4 id="Multi-monitor">Multi-monitor</h4></div>
<p>For multi-monitor setup you will need to specify <code>ForceCompositionPipeline=On</code> for each display. For example:
</p>
<pre>$ nvidia-settings --assign CurrentMetaMode="DP-2: nvidia-auto-select +0+0 {ForceCompositionPipeline=On}, DP-4: nvidia-auto-select +3840+0 {ForceCompositionPipeline=On}"
</pre>
<p>Without doing this, the <code>nvidia-settings</code> command will disable your secondary display.
</p>
<p>You can get the current screen names and offsets using <code>--query</code>:
</p>
<pre>$ nvidia-settings --query CurrentMetaMode
</pre>
<p>The above line is for two 3840x2160 monitors connected to DP-2 and DP-4. You will need to read the correct <code>CurrentMetaMode</code> by exporting <code>xorg.conf</code> and append <code>ForceCompositionPipeline</code> to each of your displays. Setting <code>ForceCompositionPipeline</code> only affects the targeted display.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> Multi monitor setups using different model monitors may have slightly different refresh rates. If vsync is enabled by the driver it will sync to only one of these refresh rates which can cause the appearance of screen tearing on incorrectly synced monitors. Select to sync the display device which is the primarily used monitor as others will not sync properly. This is configurable in <code>~/.nvidia-settings-rc</code> as <code>0/XVideoSyncToDisplayID=</code> or by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-settings">nvidia-settings</a></span> and using the graphical configuration options.</div>
<div class="mw-heading mw-heading3"><h3 id="Screen_corruption_after_resuming_from_suspend_or_hibernation">Screen corruption after resuming from suspend or hibernation</h3></div>
<p>This also applies if an external monitor does not wake up after suspend or hibernation.
</p>
<p>See <a href="../../en/NVIDIA/Tips_and_tricks.html#Preserve_video_memory_after_suspend" title="NVIDIA/Tips and tricks">NVIDIA/Tips and tricks#Preserve video memory after suspend</a>
</p>
<p>A corruption after suspend bug when using <a href="../../en/GDM.html" title="GDM">GDM</a> service was solved as of driver version 515.43.04 <a rel="nofollow" class="external autonumber" href="https://forums.developer.nvidia.com/t/corrupted-graphics-upon-resume-gnome-41-x-org-495-44-driver/194565/18">[7]</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Corrupted_screen:_&quot;Six_screens&quot;_Problem">
<span id="Corrupted_screen:_.22Six_screens.22_Problem"></span>Corrupted screen: "Six screens" Problem</h3></div>
<p>For some users, using GeForce GT 100M's, the screen gets corrupted after X starts, divided into 6 sections with a resolution limited to 640x480. The same problem has been reported with Quadro 2000 and hi-res displays.
</p>
<p>To solve this problem, enable the Validation Mode <code>NoTotalSizeCheck</code> in section <code>Device</code>:
</p>
<pre>Section "Device"
 ...
 Option "ModeValidation" "NoTotalSizeCheck"
 ...
EndSection
</pre>
<div class="mw-heading mw-heading3"><h3 id="Invisible_text_and_icons_with_nvidia-470">Invisible text and icons with nvidia-470</h3></div>
<p>An update of GTK4 brought an issue for users relying on the nvidia-470 driver for legacy cards. After the update text and icons randomly disappear and re-appear only after hovering with the mouse over the windows.<a rel="nofollow" class="external autonumber" href="https://forums.developer.nvidia.com/t/multiple-apps-do-not-invalidate-repaint-screen-correctly-with-geforce-gt-730-and-v470-driver-on-ubuntu-24-04/291106/2">[8]</a>
</p>
<p>See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=2159644#p2159644">the forum</a> for work-arounds.
</p>
<div class="mw-heading mw-heading3"><h3 id="Fix_graphical_corruption_in_GNOME_Shell_when_resuming_from_sleep">Fix graphical corruption in GNOME Shell when resuming from sleep</h3></div>
<p>If you are facing strange fonts and/or having weird graphical glitches in <a href="../../en/GNOME.html" class="mw-redirect" title="GNOME Shell">GNOME Shell</a> when resuming from sleep, try setting the following <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> to enable power management:
</p>
<pre>nvidia.NVreg_DynamicPowerManagement=0x02
</pre>
<p>More info: <a rel="nofollow" class="external free" href="https://download.nvidia.com/XFree86/Linux-x86_64/575.64/README/dynamicpowermanagement.html">https://download.nvidia.com/XFree86/Linux-x86_64/575.64/README/dynamicpowermanagement.html</a>
</p>
<div class="mw-heading mw-heading3"><h3 id="System_freeze_when_the_display_powers_off_or_on_resume">System freeze when the display powers off or on resume</h3></div>
<p>If the system freezes or crashes right after the desktop environment turns off the display (DPMS) or when resuming from suspend, and dmesg/journal shows a GSP timeout like:
</p>
<pre>NVRM: _kgspLogXid119: ********************************* GSP Timeout **********************************
NVRM: Xid (PCI:0000:01:00): 119, Timeout after 6s of waiting for RPC response from GPU0 GSP! Expected function 76 (GSP_RM_CONTROL) sequence 1321 
</pre>
<p>the GPU may be dropping to an unstable low clock state during these power transitions. 
</p>
<p>Workaround: lock a higher minimum GPU/memory clock with nvidia-smi. 
</p>
<p>Prerequisites:
</p>
<p><a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a>/<a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the <code>nvidia-persistenced.service</code>.
</p>
<p>Find supported clock values (use these to pick valid min/max pairs):
</p>
<pre>nvidia-smi -q -d SUPPORTED_CLOCKS
nvidia-smi -q -d CLOCK
</pre>
<p>Temporary test 
</p>
<p>Set minimum clocks (example values; adjust to your GPU’s max supported clocks):
</p>
<pre>nvidia-smi -lgc 800,2100
nvidia-smi -lmc 800,10000
Test DPMS and suspend/resume to see if the issue is resolved.
   To revert:
nvidia-smi -rgc
nvidia-smi -rmc
</pre>
<p>Permanent configuration (systemd)
Create a unit such as <code>nvidia-clocks.service</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/nvidia-clocks.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Set NVIDIA GPU minimum clocks to avoid  GSP timeouts
Requires=nvidia-persistenced.service
After=nvidia-persistenced.service 

[Service]
Type=oneshot
ExecStart=/usr/bin/nvidia-smi -lgc 500,2100
ExecStart=/usr/bin/nvidia-smi -lmc 500,10000
RemainAfterExit=yes 

[Install]
WantedBy=multi-user.target</pre>
<p>You can adjust the minimum clock so they are lower than the 800 mentioned earlier to lower idle power consumption; just be aware that setting them to low will cause the issue to occur again.
</p>
<p>Then <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a>/<a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> <code>nvidia-clocks.service</code>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Performance_issues">Performance issues</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Bad_performance_after_installing_a_new_driver_version">Bad performance after installing a new driver version</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> We should be trying to find the root cause (read dmesg, dkms logs etc.), not mindlessly downgrading the driver. (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:NVIDIA/Troubleshooting.html">Talk:NVIDIA/Troubleshooting</a>)</div>
</div>
<p>If FPS have dropped in comparison with older drivers, check if direct rendering is enabled (<code>glxinfo</code> is included in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa-utils">mesa-utils</a></span>):
</p>
<pre>$ glxinfo | grep direct
</pre>
<p>If the command prints:
</p>
<pre>direct rendering: No
</pre>
<p>A possible solution could be to regress to the previously installed driver version and rebooting afterwards.
</p>
<div class="mw-heading mw-heading3"><h3 id="Extreme_lag_on_Xorg">Extreme lag on Xorg</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> According to <a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/mutter/-/issues/2233#note_1538392">an NVIDIA developer</a> this issue is not specific to GNOME and the rest of the comments on the issue do not mention multi-monitor setups. (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:NVIDIA/Troubleshooting.html">Talk:NVIDIA/Troubleshooting</a>)</div>
</div>
<p>A common issue with Mutter is that <a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/mutter/-/issues/2233">animations, video playback and gaming cause extreme desktop lag on Xorg</a>.
</p>
<p>See <a href="../../en/NVIDIA/Tips_and_tricks.html#Preserve_video_memory_after_suspend" title="NVIDIA/Tips and tricks">NVIDIA/Tips and tricks#Preserve video memory after suspend</a>.
</p>
<p>This should resolve this issue, however if it did not, you are most likely out of luck. One way you can remedy this issue is by adding these options:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/environment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CLUTTER_DEFAULT_FPS=<i>YOUR_MAIN_DISPLAY_REFRESHRATE</i>
__GL_SYNC_DISPLAY_DEVICE=<i>YOUR_MAIN_DISPLAY_OUTPUT_NAME</i></pre>
<p>turning <i>Sync to VBlank</i> and <i>Allow flipping</i> off within NVIDIA Settings, and configuring NVIDIA Settings to launch on startup using the flag <code>--load-config-only</code>.
This will still result in a laggy desktop behavior, in particular on an eventual second (or third) monitor, but it should be much better.
</p>
<div class="mw-heading mw-heading3"><h3 id="CPU_spikes_with_400_series_cards">CPU spikes with 400 series cards</h3></div>
<p>If you are experiencing intermittent CPU spikes with a 400 series card, it may be caused by PowerMizer constantly changing the GPU's clock frequency. Switching PowerMizer's setting from Adaptive to Performance, add the following to the <code>Device</code> section of your Xorg configuration:
</p>
<pre> Option "RegistryDwords" "PowerMizerEnable=0x1; PerfLevelSrc=0x3322; PowerMizerDefaultAC=0x1"
</pre>
<div class="mw-heading mw-heading2"><h2 id="Other_issues">Other issues</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Vulkan_error_on_applications_start">Vulkan error on applications start</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Need confirmation by other users (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:NVIDIA/Troubleshooting.html">Talk:NVIDIA/Troubleshooting</a>)</div>
</div>
<p>On executing an application that require Vulkan acceleration, if you get this error
</p>
<pre>Vulkan call failed: -4
</pre>
<p>try to delete the <code>~/.nv</code> or <code>~/.cache/nvidia</code> directory.
</p>
<div class="mw-heading mw-heading3"><h3 id="No_audio_over_HDMI">No audio over HDMI</h3></div>
<p>Sometimes NVIDIA HDMI audio devices are not shown when you do
</p>
<pre>$ aplay -l
</pre>
<p>On some new machines, the audio chip on the NVIDIA GPU is disabled at boot. Read more on <a rel="nofollow" class="external text" href="https://devtalk.nvidia.com/default/topic/1024022/linux/gtx-1060-no-audio-over-hdmi-only-hda-intel-detected-azalia/?offset=4">NVIDIA's website</a> and a <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=230125">forum post</a>.
</p>
<p>You need to reload the NVIDIA device with audio enabled. In order to do that make sure that your GPU is on (in case of laptops/Bumblebee) and that you are not running X on it, because it is going to reset:
</p>
<pre># setpci -s 01:00.0 0x488.l=0x2000000:0x2000000
# rmmod nvidia-drm nvidia-modeset nvidia
# echo 1 &gt; /sys/bus/pci/devices/0000:01:00.0/remove
# echo 1 &gt; /sys/bus/pci/devices/0000:00:01.0/rescan
# modprobe nvidia-drm
# xinit -- -retro
</pre>
<p>If you are running your TTY on NVIDIA, put the lines in a script so you do not end up with no screen.
</p>
<div class="mw-heading mw-heading3"><h3 id="Backlight_is_not_turning_off_in_some_occasions">Backlight is not turning off in some occasions</h3></div>
<p>By default, DPMS should turn off backlight with the timeouts set or by running xset. However, probably due to a bug in the proprietary NVIDIA drivers the result is a blank screen with no powersaving whatsoever. To workaround it, until the bug has been fixed you can use the <code>vbetool</code> as root.
</p>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vbetool">vbetool</a></span> package.
</p>
<p>Turn off your screen on demand and then by pressing a random key backlight turns on again:
</p>
<pre>vbetool dpms off &amp;&amp; read -n1; vbetool dpms on
</pre>
<p>Alternatively, xrandr is able to disable and re-enable monitor outputs without requiring root.
</p>
<pre>xrandr --output DP-1 --off; read -n1; xrandr --output DP-1 --auto
</pre>
<div class="mw-heading mw-heading4"><h4 id="HardDPMS">HardDPMS</h4></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Add references for the "user reports". (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:NVIDIA/Troubleshooting.html">Talk:NVIDIA/Troubleshooting</a>)</div>
</div>
<p>Proprietary driver 415 includes a new feature called <a rel="nofollow" class="external text" href="https://download.nvidia.com/XFree86/Linux-x86_64/575.64/README/xconfigoptions.html#HardDPMS">HardDPMS</a>. This is reported by some users to solve the issues with suspending monitors connected over DisplayPort.
It is enabled by default since 440.26. If you are using an older driver, the <code>HardDPMS</code> option can be set in the <code>Device</code> or <code>Screen</code> sections. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-nvidia.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
    ...
    Option         "HardDPMS" "true"
    ...
EndSection

Section "Screen"
    ...
    Option         "HardDPMS" "true"
    ...
EndSection
</pre>
<p><code>HardDPMS</code> will trigger on screensaver settings like <code>BlankTime</code>. The following <code>ServerFlags</code> will set your monitor(s) to suspend after 10 minutes of inactivity:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-nvidia.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "ServerFlags"
    Option     "BlankTime" "10"
EndSection
</pre>
<div class="mw-heading mw-heading3"><h3 id="xrandr_BadMatch">xrandr BadMatch</h3></div>
<p>If you are trying to configure a WQHD monitor such as DELL U2515H using <a href="../../en/Xrandr.html" title="Xrandr">xrandr</a> and <code>xrandr --addmode</code> gives you the error <code>X Error of failed request: BadMatch</code>, it might be because the proprietary NVIDIA driver clips the pixel clock maximum frequency of HDMI output to 225 MHz or lower. To set the monitor to maximum resolution you have to install <a href="../../en/Nouveau.html" title="Nouveau">nouveau</a> drivers. You can force nouveau to use a specific pixel clock frequency by setting <code>nouveau.hdmimhz=297</code> (or <code>330</code>) in your <a href="../../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a>.
</p>
<p>Alternatively, it may be that your monitor's EDID is incorrect. See <a href="#Override_EDID">#Override EDID</a>.
</p>
<p>Another reason could be that by default current NVIDIA drivers will only allow modes explicitly reported by EDID, but sometimes refresh rates and/or resolutions are desired which are not reported by the monitor (although the EDID information is correct; it is just that current NVIDIA drivers are too restrictive).
</p>
<p>If this happens, you may want to add an option to <code>xorg.conf</code> to allow non-EDID modes:
</p>
<pre>Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
...
    Option         "ModeValidation" "AllowNonEdidModes"
...
EndSection
</pre>
<p>This can be set per-output. See <a rel="nofollow" class="external text" href="https://download.nvidia.com/XFree86/Linux-x86_64/575.64/README/xconfigoptions.html#ModeValidation">README - Appendix B. X Config Options</a> for more information.
</p>
<div class="mw-heading mw-heading3"><h3 id="Override_EDID">Override EDID</h3></div>
<p>See <a href="../../en/Kernel_mode_setting.html#Forcing_modes_and_EDID" title="Kernel mode setting">Kernel mode setting#Forcing modes and EDID</a>, <a href="../../en/Xrandr.html#Troubleshooting" title="Xrandr">Xrandr#Troubleshooting</a> and  <a href="../../en/Qnix_QX2710.html#Fixing_X11_with_Nvidia" title="Qnix QX2710">Qnix QX2710#Fixing X11 with Nvidia</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Overclocking_with_nvidia-settings_GUI_not_working">Overclocking with nvidia-settings GUI not working</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Duplication, vague "not working" (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:NVIDIA/Troubleshooting.html">Talk:NVIDIA/Troubleshooting</a>)</div>
</div>
<p>Workaround is to use nvidia-settings CLI to query and set certain variables after enabling overclocking (as explained in <a href="../../en/NVIDIA/Tips_and_tricks.html#Enabling_overclocking_in_nvidia-settings" title="NVIDIA/Tips and tricks">NVIDIA/Tips and tricks#Enabling overclocking in nvidia-settings</a>, see <span class="plainlinks archwiki-template-man" title="$ man 1 nvidia-settings"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nvidia-settings.1">nvidia-settings(1)</a></span> for more information).
</p>
<p>Example to query all variables:
</p>
<pre> nvidia-settings -q all
</pre>
<p>Example to set PowerMizerMode to prefer performance mode:
</p>
<pre> nvidia-settings -a [gpu:0]/GPUPowerMizerMode=1
</pre>
<p>Example to set fan speed to fixed 21%:
</p>
<pre>nvidia-settings -a [gpu:0]/GPUFanControlState=1 -a [fan:0]/GPUTargetFanSpeed=21
</pre>
<p>Example to set multiple variables at once (overclock GPU by 50MHz, overclock video memory by 50MHz, increase GPU voltage by 100mV):
</p>
<pre> nvidia-settings -a GPUGraphicsClockOffsetAllPerformanceLevels=50 -a GPUMemoryTransferRateOffsetGPUGraphicsClockOffsetAllPerformanceLevels=50 -a GPUOverVoltageOffset=100
</pre>
<div class="mw-heading mw-heading3"><h3 id="Overclocking_not_working_with_Unknown_Error">Overclocking not working with Unknown Error</h3></div>
<p>If you are running Xorg as a non-root user and trying to overclock your NVIDIA GPU, you will get an error similar to this one:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nvidia-settings -a "[gpu:0]/GPUGraphicsClockOffset[3]=10"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ERROR: Error assigning value 10 to attribute 'GPUGraphicsClockOffset' (trinity-zero:1[gpu:0]) as specified in assignment
        '[gpu:0]/GPUGraphicsClockOffset[3]=10' (Unknown Error).</pre>
<p>To avoid this issue, Xorg has to be run as the root user. See <a href="../../en/Xorg.html#Rootless_Xorg" title="Xorg">Xorg#Rootless Xorg</a> for details.
</p>
<div class="mw-heading mw-heading3"><h3 id="Power_draw">Power draw</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> What is the point of this section? (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:NVIDIA/Troubleshooting.html">Talk:NVIDIA/Troubleshooting</a>)</div>
</div>
<p>Check driver usage:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lsof /dev/nvidia*</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kwin_wayl  867      user   17u   CHR   195,0      0t0  418 /dev/nvidia
kwin_wayl  867      user   18u   CHR   195,0      0t0  418 /dev/nvidiactl
</pre>
<p>If power save is configured on the kernel module:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ grep . /sys/bus/pci/devices/0000:01:00.0/power/*</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/sys/bus/pci/devices/0000:01:00.0/power/control:auto
/sys/bus/pci/devices/0000:01:00.0/power/runtime_active_time:445933
/sys/bus/pci/devices/0000:01:00.0/power/runtime_status:active
/sys/bus/pci/devices/0000:01:00.0/power/runtime_suspended_time:1266
/sys/bus/pci/devices/0000:01:00.0/power/wakeup:disabled
</pre>
<pre># rmmod nvidia_drm
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ grep . /sys/bus/pci/devices/0000:01:00.0/power/*</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/sys/bus/pci/devices/0000:01:00.0/power/control:auto
/sys/bus/pci/devices/0000:01:00.0/power/runtime_active_time:461023
/sys/bus/pci/devices/0000:01:00.0/power/runtime_status:suspended
/sys/bus/pci/devices/0000:01:00.0/power/runtime_suspended_time:1064192
/sys/bus/pci/devices/0000:01:00.0/power/wakeup:disabled
</pre>
<div class="mw-heading mw-heading3"><h3 id="Test_software_GL">Test software GL</h3></div>
<p>The binary NVIDIA driver will not adhere to the Mesa environment variable <code>LIBGL_ALWAYS_SOFTWARE=1</code> but you can direct libglvnd and EGL to use Mesa by setting the following <a href="../../en/Environment_variables.html" title="Environment variables">environment variables</a>:
</p>
<pre>__GLX_VENDOR_LIBRARY_NAME=mesa
__EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/50_mesa.json
</pre>
<p>which will result in the Mesa libgl being used for GLX and EGL and result in software GL to see whether a bug is related to the NVIDIA GL library.
</p>
<div class="mw-heading mw-heading3"><h3 id="Refresh-rate_limited_to_120Hz">Refresh-rate limited to 120Hz</h3></div>
<p>Newer versions of the driver (after 550xx) <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=302969">seem to</a> waste bandwidth on 8bpc outputs, likely pushing the signal above specification limits and the result is a failure to apply modes with higher refresh rates that otherwise would be within the specification of the output.
Add <code>nvidia-modeset.hdmi_deepcolor=0</code> to the <a href="../../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> or set the option via <a href="../../en/Kernel_module.html" class="mw-redirect" title="Modprobe">modprobe</a>
Notice that deep color will however be required for HDR monitors.
</p>
<div class="mw-heading mw-heading3"><h3 id="Wrong_color_space_on_60hz_on_Wayland_with_HDMI">Wrong color space on 60hz on Wayland with HDMI</h3></div>
<p>In some cases (like using a HDMI cable with a 1660 Super Graphics Card with 60hz), the driver seems to wrongly assume the color space for the output. This leads to the colors looking darker than normal. Because of there being no easy way to explicitly set the color space on Wayland, as a workaround you can add <code>nvidia-modeset.debug_force_color_space=2</code> to the <a href="../../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> or set the option via <a href="../../en/Kernel_module.html" class="mw-redirect" title="Modprobe">modprobe</a>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=NVIDIA/Troubleshooting&amp;oldid=849801">https://wiki.archlinux.org/index.php?title=NVIDIA/Troubleshooting&amp;oldid=849801</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 19 October 2025, at 15:21.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">NVIDIA/Troubleshooting</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
