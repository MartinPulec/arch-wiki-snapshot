<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Roundcube - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Roundcube rootpage-Roundcube skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-MariaDB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#MariaDB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>MariaDB</div>
			</a>
			
			<ul id="toc-MariaDB-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SQLite" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SQLite">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>SQLite</div>
			</a>
			
			<ul id="toc-SQLite-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Other_Databases" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Other_Databases">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Other Databases</div>
			</a>
			
			<ul id="toc-Other_Databases-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Roundcube" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Roundcube">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Roundcube</div>
			</a>
			
			<ul id="toc-Roundcube-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PHP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PHP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.5</span>PHP</div>
			</a>
			
			<ul id="toc-PHP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Webserver_(Apache)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Webserver_(Apache)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6</span>Webserver (Apache)</div>
			</a>
			
			<ul id="toc-Webserver_(Apache)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Webserver_(Nginx)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Webserver_(Nginx)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.7</span>Webserver (Nginx)</div>
			</a>
			
			<ul id="toc-Webserver_(Nginx)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Install_Roundcube" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Install_Roundcube">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Install Roundcube</div>
		</a>
		
		<ul id="toc-Install_Roundcube-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Setting_Roundcube_up_for_use_with_an_IMAP/SMTP_server_that_only_allows_TLS_authentication" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_Roundcube_up_for_use_with_an_IMAP/SMTP_server_that_only_allows_TLS_authentication">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Setting Roundcube up for use with an IMAP/SMTP server that only allows TLS authentication</div>
			</a>
			
			<ul id="toc-Setting_Roundcube_up_for_use_with_an_IMAP/SMTP_server_that_only_allows_TLS_authentication-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PDF_and_OpenDocument_file_preview" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PDF_and_OpenDocument_file_preview">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>PDF and OpenDocument file preview</div>
			</a>
			
			<ul id="toc-PDF_and_OpenDocument_file_preview-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Calendar_Support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Calendar_Support">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Calendar Support</div>
			</a>
			
			<ul id="toc-Calendar_Support-sublist" class="vector-toc-list">
				<li id="toc-Update_the_roundcube_database" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Update_the_roundcube_database">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.1</span>Update the roundcube database</div>
			</a>
			
			<ul id="toc-Update_the_roundcube_database-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configure_the_calendar_service" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Configure_the_calendar_service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.2</span>Configure the calendar service</div>
			</a>
			
			<ul id="toc-Configure_the_calendar_service-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sabre\VObject\Property\Text_Not_Found" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Sabre\VObject\Property\Text_Not_Found">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.3</span>Sabre\VObject\Property\Text Not Found</div>
			</a>
			
			<ul id="toc-Sabre\VObject\Property\Text_Not_Found-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_the_Plugin" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Enable_the_Plugin">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.4</span>Enable the Plugin</div>
			</a>
			
			<ul id="toc-Enable_the_Plugin-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Synchronize_address_book_with_CardDav_contacts" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Synchronize_address_book_with_CardDav_contacts">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Synchronize address book with CardDav contacts</div>
			</a>
			
			<ul id="toc-Synchronize_address_book_with_CardDav_contacts-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_Mark_as_Junk_plugin_to_train_SpamAssassin" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_Mark_as_Junk_plugin_to_train_SpamAssassin">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Using Mark as Junk plugin to train SpamAssassin</div>
			</a>
			
			<ul id="toc-Using_Mark_as_Junk_plugin_to_train_SpamAssassin-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-SMTP_Error:_Authentication_failure" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SMTP_Error:_Authentication_failure">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>SMTP Error: Authentication failure</div>
			</a>
			
			<ul id="toc-SMTP_Error:_Authentication_failure-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Recipient_address_rejected" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Recipient_address_rejected">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Recipient address rejected</div>
			</a>
			
			<ul id="toc-Recipient_address_rejected-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Running_php8_and_php7_on_the_same_server_with_apache" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Running_php8_and_php7_on_the_same_server_with_apache">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Running php8 and php7 on the same server with apache</div>
			</a>
			
			<ul id="toc-Running_php8_and_php7_on_the_same_server_with_apache-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Roundcube</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Roundcube" title="Roundcube – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><a rel="nofollow" class="external text" href="https://roundcube.net">Roundcube</a> is a full-featured, <a href="../en/PHP.html" title="PHP">PHP</a> web-based mail client.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=roundcubemail">roundcubemail</a></span> package.
Further you will need a database (e.g. <a href="../en/MariaDB.html" title="MariaDB">MariaDB</a>) and a <a href="../en/List_of_applications/Internet.html#Web_servers" class="mw-redirect" title="Web server">web server</a> with <a href="../en/PHP.html" title="PHP">PHP</a>-support.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="MariaDB">MariaDB</span></h3>
<p>Here is an example on how you could setup a database for Roundcube with <a href="../en/MariaDB.html" title="MariaDB">MariaDB</a> called <code>roundcubemail</code> for the user <code>roundcube</code> identified by the password <code>password</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ mysql -u root -p</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CREATE DATABASE `<b>roundcubemail</b>` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`;
CREATE USER `<b>roundcube</b>`@'localhost' IDENTIFIED BY '<b>password'</b>;
GRANT ALL PRIVILEGES ON `<b>roundcubemail</b>`.* TO `<b>roundcube</b>`@`localhost`;
\q
</pre>
<p>For any database you use, you will need to initialize the roundcubemail database tables.  Here is an example of how to do this with <a href="../en/MariaDB.html" title="MariaDB">MariaDB</a>:
</p>
<pre>$ mysql -u root -p roundcubemail &lt; /usr/share/webapps/roundcubemail/SQL/mysql.initial.sql
</pre>
<h3><span class="mw-headline" id="SQLite">SQLite</span></h3>
<p>A <a href="../en/SQLite.html" title="SQLite">SQLite</a> DB will be created automatically by Roundcube. Ensure the file specified in the configuration is located in a basedir location. Consider adding <code>/var/lib/roundcubemail</code> to your basedir definition. This implies creating the directory and <a href="../en/File_permissions_and_attributes.html#Changing_ownership" class="mw-redirect" title="Chown">chowning</a> it to <code>http</code>.
</p>
<h3><span class="mw-headline" id="Other_Databases">Other Databases</span></h3>
<p>Roundcubemail has installation scripts for mssql, Oracle, and <a href="../en/PostgreSQL.html" title="PostgreSQL">PostgreSQL</a>.
</p>
<h3><span class="mw-headline" id="Roundcube">Roundcube</span></h3>
<p>Copy the example configuration file and adjust it to your configuration:
</p>
<pre># cd /etc/webapps/roundcubemail/config
# cp config.inc.php.sample config.inc.php
# chown http:http config.inc.php
</pre>
<p>Set your mail server settings, and set <code>enable_installer</code> to enable the setup wizard:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/roundcubemail/config/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['db_dsnw'] = 'mysql://roundcube:****@localhost/roundcubemail';
$config['imap_host'] = 'ssl://localhost:993';
$config['smtp_host'] = 'ssl://localhost:465';
$config['des_key'] = 'some_awesome_long_semi_random_string';
$config['enable_installer'] = true;
</pre>
<p>For roundcube to be able to detect mime-types from filename extensions you need to point it to a mime.types file. Apache usually comes with one.
</p>
<pre># cp /etc/httpd/conf/mime.types /etc/webapps/roundcubemail/config/mime.types
# chown http:http /etc/webapps/roundcubemail/config/mime.types
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/roundcubemail/config/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['mime_types'] = RCUBE_INSTALL_PATH . 'config/mime.types';
</pre>
<p>If you are not using Apache, check the information available in <code>/etc/webapps/roundcubemail/config/defaults.inc.php</code>.
</p>
<h3><span class="mw-headline" id="PHP">PHP</span></h3>
<p>Make sure to adjust following variables to these minimal values in your PHP configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/php/php.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">date.timezone = "UTC"
</pre>
<p>and uncomment
</p>
<pre>extension=iconv
</pre>
<p><b>If</b> you have configured <code>open_basedir</code> in <code>php.ini</code>, make sure it includes <code>/etc/webapps</code> and <code>/usr/share/webapps</code>, so PHP can open the required Roundcube files. If <code>open_basedir</code> is disabled/commented out (the default setting), you do not have to do anything.
</p>
<h3>
<span id="Webserver_.28Apache.29"></span><span class="mw-headline" id="Webserver_(Apache)">Webserver (Apache)</span>
</h3>
<p>Copy the configuration file for Apache to its configuration directory:
</p>
<pre># cp /etc/webapps/roundcubemail/apache.conf /etc/httpd/conf/extra/roundcube.conf
</pre>
<p>And include it at the bottom of
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/httpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Include conf/extra/roundcube.conf
</pre>
<p>Restart Apache (<code>httpd.service</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If using <a href="../en/Apache_HTTP_Server.html#Using_php-fpm_and_mod_proxy_fcgi" title="Apache HTTP Server">php-fpm</a> remove the <code>php_admin_value open_basedir</code> line, otherwise you will not be able to access the page.</div>
<h3>
<span id="Webserver_.28Nginx.29"></span><span class="mw-headline" id="Webserver_(Nginx)">Webserver (Nginx)</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This is an example configuration of RoundCube running in an subdirectory of the web root and has been compiled based on experiments with information from multiple sources, proceed with caution</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This assumes you already have a working <a href="../en/Nginx.html" title="Nginx">nginx</a> server setup with <a href="../en/Nginx.html#FastCGI" title="Nginx">php-fpm</a>.</div>
<p>Add a location block for RoundCube
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nginx/nginx.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">location /webmail {
        alias /usr/share/webapps/roundcubemail;
        access_log /var/log/nginx/roundcube_access.log;
        error_log /var/log/nginx/roundcube_error.log;
        expires 30d;
        # Favicon
        location ~ ^/webmail/favicon.ico$ {
                root /usr/share/webapps/roundcubemail/skins/classic/images;
                log_not_found off;
                access_log off;
                expires max;
        }
        # Robots file
        location ~ ^/webmail/robots.txt {
                allow all;
                log_not_found off;
                access_log off;
        }
        # Deny Protected directories 
        location ~ ^/webmail/(config|temp|logs)/ {
                 deny all;
        }
        location ~ ^/webmail/(README|INSTALL|LICENSE|CHANGELOG|UPGRADING)$ {
                deny all;
        }
        location ~ ^/webmail/(bin|SQL)/ {
                deny all;
        }
        # Hide .md files
        location ~ ^/webmail/(.+\.md)$ {
                deny all;
        }
        # Hide all dot files
        location ~ ^/webmail/\. {
                deny all;
                access_log off;
                log_not_found off;
        }
        # Roundcube fastcgi config
        location ~ /webmail(/.*\.php)$ {
                include fastcgi.conf;
                fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
                fastcgi_split_path_info ^/webmail/(.+\.php)(/.*)$;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $request_filename;
                fastcgi_param PATH_INFO $fastcgi_path_info;
                fastcgi_param PHP_VALUE open_basedir="/tmp/:/var/cache/roundcubemail:/usr/share/webapps/roundcubemail:/etc/webapps/roundcubemail:/usr/share/pear/:/var/log/roundcubemail";
        }
}
</pre>
<p>In a more recent version of Roundcube, manually setting <code>fastcgi_split_path_info</code> and <code>fastcgi_param PATH_INFO</code> caused Roundcube to malfunction.  <code>$request_filename</code> also did not work.  The solution was this configuration:
</p>
<pre>      location ~ /webmail/?$ {
       include fastcgi.conf;
       fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
       fastcgi_index index.php;
       fastcgi_param SCRIPT_FILENAME /usr/share/webapps/roundcubemail/index.php;
       fastcgi_param PHP_VALUE open_basedir="/tmp/:/var/cache/roundcubemail:/var/lib/roundcubemail:/usr/share/webapps/roundcubemail:/etc/webapps/roundcubemail:/usr/share/pear/:/var/log/roundcubemail:/var/lib/roundcubemail";
      }
</pre>
<p>Using the different configuration will require an additional location block to access the installer:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> You must remove this <code>installer</code> location block after installation, as it should only be used once. It is also safer to delete the <code>/usr/share/webapps/roundcubemail/installer/</code> directory after installation as it will only be used for the installation step. It may be sufficient to remove <code>$config['enable_installer'] = true;</code> from <code>config.inc.php</code> as mentioned in the <a href="#Install_Roundcube">Install Roundcube</a> section.</div>
<pre>      location ~ /webmail/installer/?.*$ {
       include fastcgi.conf;
       fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
       fastcgi_index index.php;
       fastcgi_param SCRIPT_FILENAME /usr/share/webapps/roundcubemail/installer/index.php;
       fastcgi_param PHP_VALUE open_basedir="/tmp/:/var/cache/roundcubemail:/var/lib/roundcubemail:/usr/share/webapps/roundcubemail:/etc/webapps/roundcubemail:/usr/share/pear/:/var/log/roundcubemail:/var/lib/roundcubemail";
      }
</pre>
<p>Finally <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>nginx.service</code> unit.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you use the password plugin, add also <code>/dev/null</code> to the <code>open_basedir</code> list.</div>
<h2><span class="mw-headline" id="Install_Roundcube">Install Roundcube</span></h2>
<p>Finally you can visit the Roundcube installation wizard in your browser: <a rel="nofollow" class="external free" href="http://localhost/roundcube/installer">http://localhost/roundcube/installer</a> or <a rel="nofollow" class="external free" href="http://localhost/webmail/installer/">http://localhost/webmail/installer/</a> if the alternate nginx config was used.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> For security reasons, you should <b>disable the installer when you have completed the wizard</b>: remove <code>$config['enable_installer'] = true;</code> from <code>config.inc.php</code>.</div>
<p>Because the <code>~/roundcube/config</code> directory contains sensitive information about your server, it is also a good idea to disallow access to this directory by adding these lines, too.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/extra/roundcube.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  &lt;Directory /usr/share/webapps/roundcubemail/config&gt;
     Options -FollowSymLinks
     AllowOverride None
     Require all denied
  &lt;/Directory&gt;
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3>
<span id="Setting_Roundcube_up_for_use_with_an_IMAP.2FSMTP_server_that_only_allows_TLS_authentication"></span><span class="mw-headline" id="Setting_Roundcube_up_for_use_with_an_IMAP/SMTP_server_that_only_allows_TLS_authentication">Setting Roundcube up for use with an IMAP/SMTP server that only allows TLS authentication</span>
</h3>
<p>It is quite common for modern IMAP/SMTP servers to only allow secured (encrypted) connection, say using STARTTLS. <b>If you are setting Roundcube up for TLS connection, the web-based installer will not help you.</b> You will need to edit the <code>/etc/webapps/roundcubemail/config/config.inc.php</code> by hand, adding the following lines:
</p>
<pre> $config['imap_host'] = 'tls://mail.my_domain.org';
 // For STARTTLS IMAP
 $config['imap_conn_options'] = [
     'ssl' =&gt; [
       'cafile'  =&gt; '/etc/ssl/certs/Your_CA_certificate.pem',
       // For Letsencrypt use the following line if ISRG_Root_X1 is indeed the corresponding root certificate:
       //'cafile' =&gt; '/etc/ssl/certs/ISRG_Root_X1.pem',
       // Needed for example if you're using `localhost` as imap_host but your imap server presents another host name:
       //'peer_name'         =&gt; 'mail.my_domain.org',
     ],
 ];
 // For STARTTLS SMTP
 $config['smtp_conn_options'] = [
     'ssl' =&gt; [
       'cafile'  =&gt; '/etc/ssl/certs/Your_CA_certificate.pem',
       // For Letsencrypt use the following line if ISRG_Root_X1 is indeed the corresponding root certificate:
       //'cafile' =&gt; '/etc/ssl/certs/ISRG_Root_X1.pem',
       // Needed for example if you're using `localhost` as imap_host but your imap server presents another host name:
       //'peer_name'         =&gt; 'mail.my_domain.org',
     ],
 ];
</pre>
<p>where <code>mail.my_domain.org</code> is the <code>CN</code> host name in your SSL certificate (i.e. the hostname of your IMAP server), and <code>/etc/ssl/certs/Your_CA_certificate.pem</code> is the path to your SSL certificate.
</p>
<p>A complete list of PHP SSL configuration options <a rel="nofollow" class="external text" href="https://php.net/manual/en/context.ssl.php">can be found here</a>. For example you might need to adjust the <code>ciphers</code> element to correspond to the ciphers allowed by your IMAP server.
</p>
<h3><span class="mw-headline" id="PDF_and_OpenDocument_file_preview">PDF and OpenDocument file preview</span></h3>
<p>The following Roundcube extensions enable you to preview PDF or OpenDocument file attachements.
</p>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/roundcubemail-plugins-kolab/">roundcubemail-plugins-kolab</a></span><sup><small>AUR</small></sup> package and adjust following configuration file to enable the extensions.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/roundcubemail/config/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['plugins'] = [
    'pdfviewer',
    'odfviewer'
];
</pre>
<p>If you encounter any file permission issues, than try this command:
</p>
<pre>chown -R http:http /usr/share/webapps/roundcubemail/plugins/odfviewer/files</pre>
<h3><span class="mw-headline" id="Calendar_Support">Calendar Support</span></h3>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/roundcubemail-plugins-kolab/">roundcubemail-plugins-kolab</a></span><sup><small>AUR</small></sup> package.
</p>
<h4><span class="mw-headline" id="Update_the_roundcube_database">Update the roundcube database</span></h4>
<pre># mysql -u root -p roundcubemail &lt; /usr/share/webapps/roundcubemail/plugins/calendar/drivers/database/SQL/mysql.initial.sql
</pre>
<h4><span class="mw-headline" id="Configure_the_calendar_service">Configure the calendar service</span></h4>
<p>The default configuration should suffice for most applications, however we still need to move it into place.
</p>
<pre># cp /usr/share/webapps/roundcubemail/plugins/calendar/config.inc.php.dist /usr/share/webapps/roundcubemail/plugins/calendar/config.inc.php
</pre>
<h4>
<span id="Sabre.5CVObject.5CProperty.5CText_Not_Found"></span><span class="mw-headline" id="Sabre\VObject\Property\Text_Not_Found">Sabre\VObject\Property\Text Not Found</span>
</h4>
<p>If you get this error, it means that either Sabre was not included with the plugin or it is out of date
</p>
<pre># cd /usr/share/webapps/roundcubemail ; composer update ; composer require sabre/dav ~3.1.3
</pre>
<h4><span class="mw-headline" id="Enable_the_Plugin">Enable the Plugin</span></h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/roundcubemail/config/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['plugins'] = [
    'calendar'
];
</pre>
<h3><span class="mw-headline" id="Synchronize_address_book_with_CardDav_contacts">Synchronize address book with CardDav contacts</span></h3>
<p>It is useful to use the Roundcube address book to have auto-completion features for address fields etc. If you have your contacts stored somewhere else and the remote application offers a CardDav server for synchronization, then you can use the  <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/roundcubemail-plugin-carddav/">roundcubemail-plugin-carddav</a></span><sup><small>AUR</small></sup> extension to access your remote address book in Roundcube. To enable it, adjust following lines in your configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/roundcubemail/config/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['plugins'] = [
    'carddav'
];</pre>
<p>Further usage instructions can be found <a rel="nofollow" class="external text" href="https://github.com/blind-coder/rcmcarddav">here</a>.
</p>
<h3><span class="mw-headline" id="Using_Mark_as_Junk_plugin_to_train_SpamAssassin">Using Mark as Junk plugin to train SpamAssassin</span></h3>
<p>The <code>markasjunk</code> plugin adds "mark as spam" or "mark as not spam" button to the message menu. This following setup uses such facility to easily train the <a href="../en/SpamAssassin.html" title="SpamAssassin">SpamAssassin</a> filter with <code>sa-learn</code>
</p>
<p>Create a copy of <code>/usr/share/webapps/roundcubemail/plugins/markasjunk/config.inc.php.dist</code> as <code>config.inc.php</code> in the same directory and modify it to your needs. Now, make sure to have the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/webapps/roundcubemail/plugins/markasjunk/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['markasjunk_learning_driver'] = 'cmd_learn';
$config['markasjunk_spam_cmd'] = '/usr/bin/vendor_perl/sa-learn --spam --username=%u %f';
$config['markasjunk_ham_cmd'] = '/usr/bin/vendor_perl/sa-learn --ham --username=%u %f';</pre>
<p>Enable the plugin:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/webapps/roundcubemail/config/config.inc.php</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">$config['plugins'] = [
    'markasjunk'
];
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="SMTP_Error:_Authentication_failure">SMTP Error: Authentication failure</span></h3>
<p>You may first try to disable(comment) the following settings in <i>config.inc.php</i> as shown:
</p>
<pre>//$config['smtp_user'] = '%u';
//$config['smtp_pass'] = '%p';
</pre>
<h3><span class="mw-headline" id="Recipient_address_rejected">Recipient address rejected</span></h3>
<p>You may get one of these errors, depending if you use TLS or STARTTLS:
</p>
<pre> 530 5.7.0 Must issue a STARTTLS command first
 554 5.7.1 &lt;&gt;: Recipient address rejected: Access denied
</pre>
<p>If that happens try adding the following lines to <i>config.inc.php</i>:
</p>
<pre>$config['smtp_user'] = '%u';
$config['smtp_pass'] = '%p';
</pre>
<h3><span class="mw-headline" id="Running_php8_and_php7_on_the_same_server_with_apache">Running php8 and php7 on the same server with apache</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> The package does not depend on php7, is this still accurate? (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Roundcube.html">Talk:Roundcube</a>)</div>
</div>
<p>If you run php7 and php8 on your server you have to run roundcube with php7-fpm. For this install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php7-fpm">php7-fpm</a></span><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> package.
</p>
<p>After this you have to enable the mysql extensions:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/php7/php.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">extension=mysqli
extension=pdo_mysql</pre>
<p>Now <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>php-fpm7.service</code>
</p>
<p>You have to edit your Roundcube configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/extra/roundcube.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;Directory "/usr/share/webapps/roundcubemail"&gt;
    AllowOverride All
    Options FollowSymlinks
    Require all granted
    php_admin_value open_basedir "/tmp/:/var/cache/roundcubemail:/usr/share/webapps/roundcubemail:/etc/webapps/roundcubemail:/usr/share/pear/:/var/log/roundcubemail"
        &lt;FilesMatch \.php$&gt;
             SetHandler "proxy:unix:/var/run/php-fpm7/php-fpm.sock|fcgi://localhost/"
        &lt;/FilesMatch&gt;
&lt;/Directory&gt;
</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>httpd.service</code>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/roundcube/roundcubemail/wiki/Configuration">Roundcube Wiki: Configuration Howto</a></li>
<li><a rel="nofollow" class="external text" href="https://roundcube.net">Official web page</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/roundcube/roundcubemail/wiki/Installation">Official installation manual</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Mail_server.html" title="Category:Mail server">Mail server</a></li>
<li><a href="../en/Category:Web_applications.html" title="Category:Web applications">Web applications</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Roundcube&amp;oldid=819531">https://wiki.archlinux.org/index.php?title=Roundcube&amp;oldid=819531</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 October 2024, at 06:49.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
