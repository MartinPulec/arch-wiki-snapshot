<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Flatpak - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Flatpak rootpage-Flatpak skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Desktop_integration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desktop_integration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Desktop integration</div>
			</a>
			
			<ul id="toc-Desktop_integration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Application_management" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Application_management">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Application management</div>
			</a>
			
			<ul id="toc-Application_management-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Permission_management" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Permission_management">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Permission management</div>
			</a>
			
			<ul id="toc-Permission_management-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Managing_repositories" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Managing_repositories">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Managing repositories</div>
		</a>
		
			<button aria-controls="toc-Managing_repositories-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Managing repositories subsection</span>
			</button>
		
		<ul id="toc-Managing_repositories-sublist" class="vector-toc-list">
			<li id="toc-Add_a_repository" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Add_a_repository">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Add a repository</div>
			</a>
			
			<ul id="toc-Add_a_repository-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Delete_a_repository" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Delete_a_repository">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Delete a repository</div>
			</a>
			
			<ul id="toc-Delete_a_repository-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-List_repositories" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#List_repositories">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>List repositories</div>
			</a>
			
			<ul id="toc-List_repositories-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Managing_runtimes_and_applications" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Managing_runtimes_and_applications">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Managing runtimes and applications</div>
		</a>
		
			<button aria-controls="toc-Managing_runtimes_and_applications-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Managing runtimes and applications subsection</span>
			</button>
		
		<ul id="toc-Managing_runtimes_and_applications-sublist" class="vector-toc-list">
			<li id="toc-Search_for_a_remote_runtime_or_application" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Search_for_a_remote_runtime_or_application">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Search for a remote runtime or application</div>
			</a>
			
			<ul id="toc-Search_for_a_remote_runtime_or_application-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-List_all_available_runtimes_and_applications" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#List_all_available_runtimes_and_applications">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>List all available runtimes and applications</div>
			</a>
			
			<ul id="toc-List_all_available_runtimes_and_applications-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Install_a_runtime_or_application" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Install_a_runtime_or_application">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Install a runtime or application</div>
			</a>
			
			<ul id="toc-Install_a_runtime_or_application-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-List_installed_runtimes_and_applications" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#List_installed_runtimes_and_applications">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>List installed runtimes and applications</div>
			</a>
			
			<ul id="toc-List_installed_runtimes_and_applications-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Run_applications" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Run_applications">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Run applications</div>
			</a>
			
			<ul id="toc-Run_applications-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Update_a_runtime_or_application" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Update_a_runtime_or_application">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Update a runtime or application</div>
			</a>
			
			<ul id="toc-Update_a_runtime_or_application-sublist" class="vector-toc-list">
				<li id="toc-Automatic_updates_via_systemd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Automatic_updates_via_systemd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6.1</span>Automatic updates via systemd</div>
			</a>
			
			<ul id="toc-Automatic_updates_via_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Uninstall_a_runtime_or_application" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Uninstall_a_runtime_or_application">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Uninstall a runtime or application</div>
			</a>
			
			<ul id="toc-Uninstall_a_runtime_or_application-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Downgrade_a_runtime_or_application" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Downgrade_a_runtime_or_application">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>Downgrade a runtime or application</div>
			</a>
			
			<ul id="toc-Downgrade_a_runtime_or_application-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Prevent_updates_to_a_runtime_or_application" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Prevent_updates_to_a_runtime_or_application">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.9</span>Prevent updates to a runtime or application</div>
			</a>
			
			<ul id="toc-Prevent_updates_to_a_runtime_or_application-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Add_Flatpak_.desktop_files_to_your_menu" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Add_Flatpak_.desktop_files_to_your_menu">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.10</span>Add Flatpak .desktop files to your menu</div>
			</a>
			
			<ul id="toc-Add_Flatpak_.desktop_files_to_your_menu-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-View_sandbox_permissions_of_application" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#View_sandbox_permissions_of_application">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.11</span>View sandbox permissions of application</div>
			</a>
			
			<ul id="toc-View_sandbox_permissions_of_application-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Override_sandbox_permissions_of_applications" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Override_sandbox_permissions_of_applications">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.12</span>Override sandbox permissions of applications</div>
			</a>
			
			<ul id="toc-Override_sandbox_permissions_of_applications-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Creating_a_custom_base_runtime" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Creating_a_custom_base_runtime">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Creating a custom base runtime</div>
		</a>
		
			<button aria-controls="toc-Creating_a_custom_base_runtime-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Creating a custom base runtime subsection</span>
			</button>
		
		<ul id="toc-Creating_a_custom_base_runtime-sublist" class="vector-toc-list">
			<li id="toc-Creating_apps_with_pacman" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Creating_apps_with_pacman">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Creating apps with pacman</div>
			</a>
			
			<ul id="toc-Creating_apps_with_pacman-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Flatpak_does_not_run_on_the_linux-hardened_kernel" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Flatpak_does_not_run_on_the_linux-hardened_kernel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Flatpak does not run on the linux-hardened kernel</div>
			</a>
			
			<ul id="toc-Flatpak_does_not_run_on_the_linux-hardened_kernel-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_connect_to_Wayland_display" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_connect_to_Wayland_display">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Failed to connect to Wayland display</div>
			</a>
			
			<ul id="toc-Failed_to_connect_to_Wayland_display-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-xdg-desktop-portal_is_failing_to_start" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#xdg-desktop-portal_is_failing_to_start">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>xdg-desktop-portal is failing to start</div>
			</a>
			
			<ul id="toc-xdg-desktop-portal_is_failing_to_start-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Flatpak_applications_not_picking_up_the_default_system_theme" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Flatpak_applications_not_picking_up_the_default_system_theme">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Flatpak applications not picking up the default system theme</div>
			</a>
			
			<ul id="toc-Flatpak_applications_not_picking_up_the_default_system_theme-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-"File_not_found"_error_when_Open_local_HTML_pages_in_Firefox' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"File_not_found"_error_when_Open_local_HTML_pages_in_Firefox'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>"File not found" error when Open local HTML pages in Firefox</div>
			</a>
			
			<ul id='toc-"File_not_found"_error_when_Open_local_HTML_pages_in_Firefox-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Links_fail_to_open_on_wlroots-based_compositors" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Links_fail_to_open_on_wlroots-based_compositors">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>Links fail to open on wlroots-based compositors</div>
			</a>
			
			<ul id="toc-Links_fail_to_open_on_wlroots-based_compositors-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Applications_do_not_use_the_correct_cursor_theme" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Applications_do_not_use_the_correct_cursor_theme">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.7</span>Applications do not use the correct cursor theme</div>
			</a>
			
			<ul id="toc-Applications_do_not_use_the_correct_cursor_theme-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Flatpak_Qt_applications_do_not_use_Gnome_Adwaita_dark_theme" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Flatpak_Qt_applications_do_not_use_Gnome_Adwaita_dark_theme">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.8</span>Flatpak Qt applications do not use Gnome Adwaita dark theme</div>
			</a>
			
			<ul id="toc-Flatpak_Qt_applications_do_not_use_Gnome_Adwaita_dark_theme-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Flatpak</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Flatpak" title="Flatpak – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Flatpak.html" title="Flatpak – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Flatpak" title="Flatpak – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Flatpak.html" title="Flatpak – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Flatpak" title="Flatpak – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Snap.html" class="mw-redirect" title="Snapd">Snapd</a></li>
<li><a href="../en/Bubblewrap.html" title="Bubblewrap">bubblewrap</a></li>
</ul>
</div>
<p>From the project <a rel="nofollow" class="external text" href="https://github.com/flatpak/flatpak/blob/master/README.md">README</a>: "<a rel="nofollow" class="external text" href="https://flatpak.org">Flatpak</a> is a system for building, distributing and running sandboxed desktop applications on Linux."
</p>
<p>From <span class="plainlinks archwiki-template-man" title="$ man 1 flatpak"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/flatpak.1">flatpak(1)</a></span>:
</p>
<dl>
<dd>Flatpak is a tool for managing applications and the runtimes they use. In the Flatpak model, applications can be built and distributed independently from the host system they are used on, and they are isolated from the host system ('sandboxed') to some degree, at runtime.</dd>
<dd>Flatpak uses <a rel="nofollow" class="external text" href="https://netmodule-linux.readthedocs.io/en/latest/gettingstarted/3_ostree.html?highlight=ostree">OSTree</a> to distribute and deploy data. The repositories it uses are OSTree repositories and can be manipulated with the ostree utility. Installed runtimes and applications are OSTree checkouts.</dd>
</dl>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>Many Flatpak applications available on <a rel="nofollow" class="external text" href="https://flathub.org/home">flathub</a> are not effectively sandboxed by default <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20230605155749/https://hanako.codeberg.page//">[1]</a>. Do not rely on the provided process isolation without first reviewing the related flatpak permission manifest for common sandbox escape issues.</li>
<li>Running untrusted code is never safe; sandboxing cannot change this.</li>
</ul>
</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=flatpak">flatpak</a></span> package. If you want to build flatpaks, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=flatpak-builder">flatpak-builder</a></span> too.
</p>
<h3><span class="mw-headline" id="Desktop_integration">Desktop integration</span></h3>
<p>For flatpak applications to interact with your desktop (i.e. allow applications to open URLs, share your screen and more), make sure to set up the <a href="../en/XDG_Desktop_Portal.html" class="mw-redirect" title="Xdg-desktop-portal">xdg-desktop-portal</a>. Depending on the implementation for your desktop, there is a confirmation dialog before the application is able to access some portals.
</p>
<h3><span class="mw-headline" id="Application_management">Application management</span></h3>
<ul><li>
<b>Discover</b> — KDE frontend to Flatpak which helps you find and install applications, games, and tools. Part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/plasma/">plasma</a></span>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://apps.kde.org/discover/">https://apps.kde.org/discover/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=discover">discover</a></span>
</dd></dl>
<ul><li>
<b>GNOME Software</b> — GNOME frontend to Flatpak which lets you install and update applications and system extensions. Part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome/">gnome</a></span>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.gnome.org/Apps/Software">https://wiki.gnome.org/Apps/Software</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-software">gnome-software</a></span>
</dd></dl>
<h3><span class="mw-headline" id="Permission_management">Permission management</span></h3>
<ul><li>
<b>Flatpak Permissions Management KCM</b> — KDE Configuration Module that allows changing what permissions have been granted to installed Flatpak applications. Part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/plasma/">plasma</a></span>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://invent.kde.org/plasma/flatpak-kcm">https://invent.kde.org/plasma/flatpak-kcm</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=flatpak-kcm">flatpak-kcm</a></span>
</dd></dl>
<ul><li>
<b>Flatseal</b> — Graphical utility to review and modify permissions from your Flatpak applications.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/tchx84/Flatseal">https://github.com/tchx84/Flatseal</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/flatseal/">flatseal</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>malcontent (Parental Controls)</b> — Implements support for restricting the type of content accessible to non-administrator accounts. Part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome/">gnome</a></span>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/pwithnall/malcontent">https://gitlab.freedesktop.org/pwithnall/malcontent</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=malcontent">malcontent</a></span>
</dd></dl>
<h2><span class="mw-headline" id="Managing_repositories">Managing repositories</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> By default, every flatpak command works system-wide, i.e. packages are installed for all users of the computer; also by default, flatpak requires the user to supply the root password. To install packages and work with repositories for a single user (with no need of superuser rights) you can add the option <code>--user</code> to each command. If you want, for example, to add a repository only visible to you, you should execute <code>flatpak remote-add --user <i>name</i> <i>location</i></code>.</div>
<h3><span class="mw-headline" id="Add_a_repository">Add a repository</span></h3>
<p>To add a remote flatpak repository do:
</p>
<pre>$ flatpak remote-add <i>name</i> <i>location</i>
</pre>
<p>where <i>name</i> is the name for the new remote, and <i>location</i> is the path or URL for the repository.
</p>
<p>The installation of flatpak will, by default, add the official <a rel="nofollow" class="external text" href="https://flathub.org/">Flathub repository</a> as a system-wide installation. To add the official repository with a per-user configuration:
</p>
<pre>$ flatpak remote-add --if-not-exists --user flathub https://dl.flathub.org/repo/flathub.flatpakrepo
</pre>
<h3><span class="mw-headline" id="Delete_a_repository">Delete a repository</span></h3>
<p>To delete a remote flatpak repository do:
</p>
<pre>$ flatpak remote-delete <i>name</i>
</pre>
<p>where <i>name</i> is the name of the remote repository to be deleted.
</p>
<h3><span class="mw-headline" id="List_repositories">List repositories</span></h3>
<p>To list all the added repositories do:
</p>
<pre>$ flatpak remotes
</pre>
<h2><span class="mw-headline" id="Managing_runtimes_and_applications">Managing runtimes and applications</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If remotes have been added with a <a href="#Add_a_repository">per-user</a> configuration, the <code>--user</code> option can be appended to the following flatpak commands. For example, to install a package visible only to you, run <code> flatpak install --user <i>package-name</i></code>.</div>
<h3><span class="mw-headline" id="Search_for_a_remote_runtime_or_application">Search for a remote runtime or application</span></h3>
<p>Before being able to search for a runtime or application in a newly added remote repository, we need to retrieve the appstream data for it:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ flatpak update</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Looking for updates...
Updating appstream data for remote <i>name</i>
</pre>
<p>Then we can proceed to search for a package with <code>flatpak search <i>packagename</i></code>, <i>e.g.</i> to look for the package <code>libreoffice</code> with the <code>flathub</code> remote configured:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ flatpak search libreoffice</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Application ID              Version Branch Remotes Description                       
org.libreoffice.LibreOffice         stable flathub The LibreOffice productivity suite
</pre>
<h3><span class="mw-headline" id="List_all_available_runtimes_and_applications">List all available runtimes and applications</span></h3>
<p>To list all available runtimes and applications in a remote repository named <i>remote</i> do:
</p>
<pre>$ flatpak remote-ls <i>remote</i>
</pre>
<h3><span class="mw-headline" id="Install_a_runtime_or_application">Install a runtime or application</span></h3>
<p>To install a runtime or application do:
</p>
<pre>$ flatpak install <i>remote</i> <i>name</i>
</pre>
<p>where <i>remote</i> is the name of the remote repository, and <i>name</i> is the name of the application or runtime to install.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can use partial identifiers <code>flatpak install <i>partial-name</i></code> (for example <code>flatpak install libreoffice</code>).</div>
<h3><span class="mw-headline" id="List_installed_runtimes_and_applications">List installed runtimes and applications</span></h3>
<p>To list installed runtimes and applications do:
</p>
<pre>$ flatpak list
</pre>
<h3><span class="mw-headline" id="Run_applications">Run applications</span></h3>
<p>Binaries are available in <code>/var/lib/flatpak/exports/bin</code>, which is automatically added to $PATH by <code>/etc/profile.d/flatpak-bindir.sh</code>. You may have to re-login to apply the change.
</p>
<p>Flatpak applications can also be run with the command line:
</p>
<pre>$ flatpak run <i>name</i>
</pre>
<h3><span class="mw-headline" id="Update_a_runtime_or_application">Update a runtime or application</span></h3>
<p>To update a runtime or application named <i>name</i> do:
</p>
<pre>$ flatpak update <i>name</i>
</pre>
<h4><span class="mw-headline" id="Automatic_updates_via_systemd">Automatic updates via systemd</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> It is generally not a good idea to run unattended updates via systemd, as the applications can get new permissions without the user aware of the changes.</div>
<p>To update your system runtimes and applications automatically, create the following files:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/flatpak-update.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Update Flatpak
After=network-online.target
Wants=network-online.target

[Service]
Type=oneshot
ExecStart=/usr/bin/flatpak update --noninteractive --assumeyes

[Install]
WantedBy=multi-user.target</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/flatpak-update.timer</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Update Flatpak

[Timer]
OnBootSec=2m
OnActiveSec=2m
OnUnitInactiveSec=24h
OnUnitActiveSec=24h
AccuracySec=1h
RandomizedDelaySec=10m

[Install]
WantedBy=timers.target</pre>
<p>Afterwards, do a <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Daemon-reload">daemon-reload</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> the <code>flatpak-update.timer</code> <a href="../en/Systemd.html#Using_units" title="Systemd">unit</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul><li>This guide is for system flatpak installations which are the default in flatpak. For user flatpak installations:
<ul>
<li>Create the above files in the <code>/etc/systemd/user/</code> directory.</li>
<li>Add the <code>--user</code> flag in <code>ExecStart</code> line in <code>flatpak-update.service</code>.</li>
<li>Run the <code>systemctl</code> commands with the <code>--user</code> flag.</li>
</ul>
</li></ul>
</div>
<h3><span class="mw-headline" id="Uninstall_a_runtime_or_application">Uninstall a runtime or application</span></h3>
<p>To uninstall a runtime or application named <i>name</i> do:
</p>
<pre>$ flatpak uninstall <i>name</i>
</pre>
<p>To delete app data from <code>~/.var/app</code> and from the permission store while uninstalling, use:
</p>
<pre>$ flatpak uninstall --delete-data <i>name</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can uninstall unused flatpak "refs" (aka orphans with no application/runtime) with <code>flatpak uninstall --unused</code>.</div>
<h3><span class="mw-headline" id="Downgrade_a_runtime_or_application">Downgrade a runtime or application</span></h3>
<p>To downgrade a runtime or application, first look for the associated commit ID:
</p>
<pre>$ flatpak remote-info --log <i>remote</i> <i>name</i>
</pre>
<p>Where <i>remote</i> is the repository (such as flathub), and <i>name</i> is the name of the application or runtime. Then, deploy the commit:
</p>
<pre>$ flatpak update --commit=<i>commit</i> <i>name</i>
</pre>
<p>where <i>commit</i> is the commit for the desired version, and <i>name</i> is as before.
</p>
<p>This procedure can also be used to selectively upgrade a package to a desired version that is not the latest version.
</p>
<p>To exclude <code>flatpak update</code> from updating this package, see <a href="#Prevent_updates_to_a_runtime_or_application">#Prevent updates to a runtime or application</a>.
</p>
<h3><span class="mw-headline" id="Prevent_updates_to_a_runtime_or_application">Prevent updates to a runtime or application</span></h3>
<p>To prevent automatic and manual updates to a runtime or application, use the <code>flatpak mask</code> command:
</p>
<pre>$ flatpak mask <i>name</i>
</pre>
<p>This also prevents selective upgrades and downgrades.
</p>
<p>To reverse the mask and re-enable updates, use <code>flatpak mask --remove</code>:
</p>
<pre>$ flatpak mask --remove <i>name</i>
</pre>
<h3><span class="mw-headline" id="Add_Flatpak_.desktop_files_to_your_menu">Add Flatpak .desktop files to your menu</span></h3>
<p>Flatpak expects window managers to respect the <a href="../en/XDG_Base_Directory.html#System_directories" title="XDG Base Directory">XDG_DATA_DIRS</a> environment <a href="../en/Environment_variables.html" class="mw-redirect" title="Variable">variable</a> to discover applications. This variable is set by the script <code>/etc/profile.d/flatpak.sh</code>. Updating the environment may require restarting the session. If the launcher does not support <code>XDG_DATA_DIRS</code>, you can edit the list of directories scanned and add these to it:
</p>
<pre>~/.local/share/flatpak/exports/share/applications
/var/lib/flatpak/exports/share/applications
</pre>
<p>This is known to be necessary in <a href="../en/Awesome.html" title="Awesome">Awesome</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The script will not work if the default shell is set to <a href="../en/Fish.html" title="Fish">Fish</a>. You can fix this by using the work-around in a <a rel="nofollow" class="external text" href="https://github.com/fish-shell/fish-shell/issues/7485#issuecomment-728984689">comment on fish-shell issue 7485</a>.</div>
<h3><span class="mw-headline" id="View_sandbox_permissions_of_application">View sandbox permissions of application</span></h3>
<p>Flatpak applications come with predefined sandbox rules which define the resources and file system paths the application is allowed to access.
To view the specific application permissions do:
</p>
<pre>$ flatpak info --show-permissions <i>name</i>
</pre>
<p>The reference of the sandbox permission names can be found on <a rel="nofollow" class="external text" href="https://docs.flatpak.org/en/latest/sandbox-permissions.html">official flatpak documentation</a>.
</p>
<h3><span class="mw-headline" id="Override_sandbox_permissions_of_applications">Override sandbox permissions of applications</span></h3>
<p>If you find the predefined permissions of the application too lax or too restrictive you can change to anything you want using <code>flatpak override</code> command.
For example:
</p>
<pre>flatpak override --nofilesystem=home <i>name</i>
</pre>
<p>This will prevent the application access to your home folder.
</p>
<p>Every type of permission, such as device, filesystem or socket, has a command line option that allows that particular permission and a separate option that denies permission. For example, in case of device access <code>--device=<i>device_name</i></code> allows access, <code>--nodevice=<i>device_name</i></code> denies the permission to access device.
</p>
<p>For all permission types commands consult the manual page: <span class="plainlinks archwiki-template-man" title="$ man 1 flatpak-override"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/flatpak-override.1">flatpak-override(1)</a></span>
</p>
<p>Permission overrides can be reset to defaults with command:
</p>
<pre>$ flatpak override --reset <i>name</i>
</pre>
<p><i>Flatseal</i> is a GUI permissions manager which offers simple point-and-click permissions operations. In KDE Plasma, <i>Flatpak Permissions Management KCM</i> provides a similiar GUI for the system settings application: <i>System Settings &gt; Applications &gt; Flatpak Permission Settings</i>.
</p>
<h2><span class="mw-headline" id="Creating_a_custom_base_runtime">Creating a custom base runtime</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> This can certainly be improved. It also has problems with D-Bus for GNOME apps. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Flatpak.html">Talk:Flatpak</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If you want to release your software to the public as a Flatpak, an Arch-based runtime is unsuitable. In this case, you will want to follow <a rel="nofollow" class="external text" href="https://docs.flatpak.org">official documentation</a> to integrate your software into the proper Flatpak ecosystem using the <a rel="nofollow" class="external text" href="https://flatpak.org/runtimes.html">common runtimes</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>You may want to use an untrusted, unprivileged user account for bundling untrusted software because the software is not sandboxed during app and runtime creation.</li>
<li>When distributing bundles to others, you may be legally obliged to provide the source code of some of the bundled software upon request. You may want to use <a href="../en/Arch_build_system.html" class="mw-redirect" title="ABS">ABS</a> to build these packages from source.</li>
</ul>
</div>
<p>You can create a custom Arch-based base runtime and base SDK for Flatpak using pacman. You can then use it for building and packaging applications. This is an alternative for personal use to the default <code>org.freedesktop.BasePlatform</code> and <code>org.freedesktop.BaseSdk</code> runtimes.
</p>
<p>In addition to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=flatpak">flatpak</a></span>, you need to have installed <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fakeroot">fakeroot</a></span> and for pacman hooks support also <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fakechroot">fakechroot</a></span>.
</p>
<p>First, start by creating a directory for building the runtime and possibly applications.
</p>
<pre>$ mkdir <i>myflatpakbuilddir</i>
$ cd <i>myflatpakbuilddir</i>
</pre>
<p>You can then prepare a directory for building the runtime base platform. The files subdirectory will contain what will later be the <code>/usr</code> directory in the sandbox. Therefore you will need to create symbolic links so the default <code>/usr/share</code> etc. from Arch can still be accessed at the usual path.
</p>
<pre>$ mkdir -p <i>myruntime</i>/files/var/lib/pacman
$ touch <i>myruntime</i>/files/.ref
$ ln -s /usr/usr/share <i>myruntime</i>/files/share
$ ln -s /usr/usr/include <i>myruntime</i>/files/include
$ ln -s /usr/usr/local <i>myruntime</i>/files/local
</pre>
<p>Make your host OS fonts available to the Arch runtime:
</p>
<pre>$ mkdir -p <i>myruntime</i>/files/usr/share/fonts
$ ln -s /run/host/fonts <i>myruntime</i>/files/usr/share/fonts/flatpakhostfonts
</pre>
<p>You need and may want to adapt your <code>pacman.conf</code> before installing packages to the runtime. Copy <code>/etc/pacman.conf</code> to your build directory and then make the following changes:
</p>
<ul>
<li>Remove the <code>CheckSpace</code> option so pacman will not complain about errors finding the root filesystem for checking disk space.</li>
<li>Remove any undesired custom repositories and <code>IgnorePkg</code>, <code>IgnoreGroup</code>, <code>NoUpgrade</code> and <code>NoExtract</code> settings that are needed only for the host system.</li>
</ul>
<p>Now install the packages for the runtime.
</p>
<pre>$ fakechroot fakeroot pacman -Syu --root <i>myruntime</i>/files --dbpath <i>myruntime</i>/files/var/lib/pacman --config pacman.conf base
$ mv pacman.conf <i>myruntime</i>/files/etc/pacman.conf
</pre>
<p>Set up the <a href="../en/Locale.html" title="Locale">locales</a> to be used by editing <code><i>myruntime</i>/files/etc/locale.gen</code>. Then regenerate the runtime’s locales.
</p>
<pre>$ fakechroot chroot <i>myruntime</i>/files locale-gen
</pre>
<p>The base SDK can be created from the base runtime with added applications needed for building packages and running pacman.
</p>
<pre>$ cp -r <i>myruntime</i> mysdk
$ fakechroot fakeroot pacman -S --root mysdk/files --dbpath mysdk/files/var/lib/pacman --config mysdk/files/etc/pacman.conf base-devel fakeroot fakechroot --needed
</pre>
<p>Insert metadata about runtime and SDK.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>myruntime</i>/metadata</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Runtime]
name=org.mydomain.BasePlatform
runtime=org.mydomain.BasePlatform/x86_64/2016-06-26
sdk=org.mydomain.BaseSdk/x86_64/2016-06-26</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">mysdk/metadata</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Runtime]
name=org.mydomain.BaseSdk
runtime=org.mydomain.BasePlatform/x86_64/2016-06-26
sdk=org.mydomain.BaseSdk/x86_64/2016-06-26</pre>
<p>Add base runtime and SDK to a local repository in the current directory. You may want to give them appropriate commit messages such as “My Arch base runtime” and “My Arch base SDK”.
</p>
<pre>$ ostree init --mode archive-z2 --repo=.
$ EDITOR="nano -w" ostree commit -b runtime/org.mydomain.BasePlatform/x86_64/2016-06-26 --tree=dir=<i>myruntime</i>
$ EDITOR="nano -w" ostree commit -b runtime/org.mydomain.BaseSdk/x86_64/2016-06-26 --tree=dir=mysdk
$ ostree summary -u
</pre>
<p>Install the runtime and SDK.
</p>
<pre>$ flatpak remote-add --user --no-gpg-verify myarchos file://$(pwd)
$ flatpak install --user myarchos org.mydomain.BasePlatform 2016-06-26
$ flatpak install --user myarchos org.mydomain.BaseSdk 2016-06-26
</pre>
<h3><span class="mw-headline" id="Creating_apps_with_pacman">Creating apps with pacman</span></h3>
<p>As an alternative to building applications <a rel="nofollow" class="external text" href="https://flatpak.org/developer.html">the usual way</a>, we can use pacman to create a containerized version of the regular Arch packages. Note that <code>/usr</code> is read-only when creating apps, so we can not use Arch’s packages when building an app. To create a real app with pacman, we can either
</p>
<ul>
<li>use pacman to create a runtime containing all dependencies</li>
<li>and compile the app ourselves <a rel="nofollow" class="external text" href="https://flatpak.org/developer.html">as usual</a> or perhaps using pacman with a custom <a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a> tailored to Flatpak which uses <code>--prefix=/app</code> for the <code>configure</code> script,</li>
</ul>
<p>or we can
</p>
<ul>
<li>use pacman to create a runtime containing the app installed with pacman</li>
<li>and create a dummy app to launch it.</li>
</ul>
<p>For doing the latter, first create a runtime using pacman such as this one for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gedit">gedit</a></span>. The runtime is first initialized and prepared for use with pacman.
</p>
<pre>$ flatpak build-init -w geditruntime org.mydomain.geditruntime org.mydomain.BaseSdk org.mydomain.BasePlatform 2016-06-26
$ flatpak build geditruntime sed -i "s/^#Server/Server/g" /etc/pacman.d/mirrorlist
$ flatpak build geditruntime ln -s /usr/var/lib /var/lib
$ flatpak build geditruntime fakeroot pacman-key --init
$ flatpak build geditruntime fakeroot pacman-key --populate
</pre>
<p>Then the package is installed. The host’s network connection must be made available to pacman.
</p>
<pre>$ flatpak build --share=network geditruntime fakechroot fakeroot pacman --root /usr -S gedit
</pre>
<p>You can test the installation before finishing the runtime (without proper sandboxing).
</p>
<pre>$ flatpak build --socket=x11 geditruntime gedit
</pre>
<p>Now finish building the runtime and export it to a new local repository. pacman’s GnuPG keys have permissions that may interfere and need to be removed first.
</p>
<pre>$ flatpak build geditruntime rm -r /etc/pacman.d/gnupg
$ flatpak build-finish geditruntime
$ sed -i "s/\[Application\]/\[Runtime\]/;s/runtime=org.mydomain.BasePlatform/runtime=org.mydomain.geditruntime/" geditruntime/metadata
$ flatpak build-export -r geditrepo geditruntime
</pre>
<p>Then create a dummy app.
</p>
<pre>$ flatpak build-init geditapp org.gnome.gedit org.mydomain.BaseSdk org.mydomain.geditruntime
</pre>
<p>Now finish the dummy app. You can fine-tune the app’s access permissions when sandboxed by giving additional options when finishing the build. For possible options see the <a href="#See_also">Flatpak documentation</a> and the <a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/gnome-apps-nightly/tree/master">GNOME manifest files</a>. Alternatively, adapt <code>geditapp/metadata</code> to your needs after finishing the build but before exporting. When the metadata file is complete, export the app to the repository.
</p>
<pre>$ flatpak build-finish geditapp --socket=x11 <i>[possibly other options]</i> --command=gedit
$ flatpak build-export geditrepo geditapp
</pre>
<p>Install it along with the runtime.
</p>
<pre>$ flatpak --user remote-add --no-gpg-verify geditrepo geditrepo
$ flatpak install --user geditrepo org.mydomain.geditruntime
$ flatpak install --user geditrepo org.gnome.gedit
$ flatpak run org.gnome.gedit
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Flatpak_does_not_run_on_the_linux-hardened_kernel">Flatpak does not run on the linux-hardened kernel</span></h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> kernel sets <code>kernel.unprivileged_userns_clone</code> to <code>0</code>, so only privileged users can create new user namespaces.
</p>
<p>One method to fix this is to <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bubblewrap-suid">bubblewrap-suid</a></span>. This package provides a version of <span class="plainlinks archwiki-template-man" title="$ man 1 bwrap"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bwrap.1">bwrap(1)</a></span> with the <code>setuid</code> bit enabled, allowing bubblewrap elevate itself and create new namespaces.
</p>
<p>Alternatively, set <code>kernel.unprivileged_userns_clone</code> to <code>1</code> using <span class="plainlinks archwiki-template-man" title="$ man 8 sysctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sysctl.8">sysctl(8)</a></span>, allowing unprivileged users to create new user namespaces:
</p>
<pre># sysctl kernel.unprivileged_userns_clone=1
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Using this kernel parameter value has negative security implications. See <a href="../en/Security.html#Sandboxing_applications" title="Security">Security#Sandboxing applications</a> for further information.</div>
<p>To make this change persist across reboots, add a configuration file to <span class="plainlinks archwiki-template-man" title="$ man 5 sysctl.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sysctl.d.5">sysctl.d(5)</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/flatpak.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.unprivileged_userns_clone=1</pre>
<p>For more information, see the note in <a href="../en/Bubblewrap.html#Installation" title="Bubblewrap">Bubblewrap#Installation</a>.
</p>
<h3><span class="mw-headline" id="Failed_to_connect_to_Wayland_display">Failed to connect to Wayland display</span></h3>
<p>If you the application doesn't properly open and you get messages such as <code>Failed to connect to Wayland display: No such file or directory</code> on <code>flatpak run</code>: This may be because some other setting such as <code>ELECTRON_OZONE_PLATFORM_HINT="auto"</code> makes the Flatpak application choose Wayland while access to Wayland isn't whitelisted for this application.
</p>
<p>This can be fixed by whitelisting access to <code>socket=wayland</code> with e.g. Flatseal.
</p>
<h3><span class="mw-headline" id="xdg-desktop-portal_is_failing_to_start">xdg-desktop-portal is failing to start</span></h3>
<p>If you are starting X with <a href="../en/Xinit.html#xinitrc" title="Xinit">manually-configured run commands</a>, ensure you are including all essential components of the reference `xinitrc`. One of which sources a script which runs an update of the environment used for D-Bus session services.
</p>
<pre>systemctl --user import-environment DISPLAY XAUTHORITY
if command -v dbus-update-activation-environment &gt;/dev/null 2&gt;&amp;1; then
   dbus-update-activation-environment DISPLAY XAUTHORITY
fi
</pre>
<h3><span class="mw-headline" id="Flatpak_applications_not_picking_up_the_default_system_theme">Flatpak applications not picking up the default system theme</span></h3>
<p>There is no ideal way to apply system themes in flatpak apps as mentioned in the flatpak documentation <a rel="nofollow" class="external autonumber" href="https://docs.flatpak.org/en/latest/desktop-integration.html?highlight=theme#applying-themes">[2]</a> <a rel="nofollow" class="external autonumber" href="https://docs.flatpak.org/en/latest/desktop-integration.html?highlight=theme#theming">[3]</a>. The easiest solution is using themes that are available in Flathub. However <a rel="nofollow" class="external text" href="https://web.archive.org/web/20230106121332/https://itsfoss.com/flatpak-app-apply-theme/">there is a workaround</a> which can be used to apply themes to your flatpak apps. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/stylepak-git/">stylepak-git</a></span><sup><small>AUR</small></sup> automates this workaround.
</p>
<h3>
<span id=".22File_not_found.22_error_when_Open_local_HTML_pages_in_Firefox"></span><span class="mw-headline" id='"File_not_found"_error_when_Open_local_HTML_pages_in_Firefox'>"File not found" error when Open local HTML pages in Firefox</span>
</h3>
<p>By default, the Flatpak version of Firefox will display a "File not found" error page when opening a local HTML. This is because <a href="#Override_sandbox_permissions_of_applications">permission must be granted</a> to the app for accessing the folder containing the file.
</p>
<p>However, note that when granting permission to access the entire Home folder, Firefox will then check for an existing profile in <code>~/.mozilla</code> and load it instead of those previously in use from the sandboxed folder <code>~/.var/app/org.mozilla.firefox/cache/mozilla/</code>. If your previous session's tabs and browsing history is missing after changing a permission (e.g. with Flatseal), either modify the permission to exclude access to <code>~/.mozilla</code>, or consider copying the profile from <code>~/.var/app/org.mozilla.firefox/cache/mozilla/</code> to <code>~/.mozilla</code>.
</p>
<h3><span class="mw-headline" id="Links_fail_to_open_on_wlroots-based_compositors">Links fail to open on wlroots-based compositors</span></h3>
<p>Flatpak applications that attempt to open URIs make use of the <code>org.freedesktop.portal.OpenURI.OpenURI</code> <a href="../en/D-Bus.html" title="D-Bus">D-Bus</a> interface exposed by <a href="../en/XDG_Desktop_Portal.html" class="mw-redirect" title="Xdg-desktop-portal">xdg-desktop-portal</a>. The <a rel="nofollow" class="external text" href="https://github.com/emersion/xdg-desktop-portal-wlr/issues/42">xdg-desktop-portal-wlr backend</a> does not support this call and therefore you will need an additional backend to fill the gap, for example <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gtk">xdg-desktop-portal-gtk</a></span>.
</p>
<h3><span class="mw-headline" id="Applications_do_not_use_the_correct_cursor_theme">Applications do not use the correct cursor theme</span></h3>
<p>There is no single standard to set the cursor properly. Some programs only need read access to the cursors directory, others also rely on other mechanisms. For <a href="../en/GTK.html" title="GTK">GTK</a> applications, ensure that <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gtk">xdg-desktop-portal-gtk</a></span> is installed.
</p>
<p>Otherwise, the following overrides should work for most common desktop applications.
</p>
<pre>$ flatpak -u override --filesystem=/usr/share/icons/:ro
$ flatpak -u override --filesystem=/home/$USER/.icons/:ro 
$ flatpak -u override --filesystem=xdg-config/gtk-3.0:ro
$ flatpak -u override --env=XCURSOR_PATH=~/.icons
</pre>
<p>In some cases you may also need to override the environment variables <code>XCURSOR_THEME</code> and <code>XCURSOR_SIZE</code>:
</p>
<pre>$ flatpak -u override --env=XCURSOR_THEME=Adwaita
$ flatpak -u override --env=XCURSOR_SIZE=24
</pre>
<p>See <a rel="nofollow" class="external text" href="https://github.com/flatpak/flatpak/issues/709">this discussion</a> for additional details.
</p>
<h3><span class="mw-headline" id="Flatpak_Qt_applications_do_not_use_Gnome_Adwaita_dark_theme">Flatpak Qt applications do not use Gnome Adwaita dark theme</span></h3>
<p>If you switched your theme to Adwaita-dark and Flatpak Qt applications still use the light version, install the required KStyle:
</p>
<pre># flatpak install flathub org.kde.KStyle.Adwaita
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://flatpak.org">Official website</a></li>
<li><a rel="nofollow" class="external text" href="https://docs.flatpak.org/en/latest/index.html">Documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/flatpak/flatpak/wiki">Official Github wiki</a></li>
<li><a href="https://en.wikipedia.org/wiki/Flatpak" class="extiw" title="wikipedia:Flatpak">Wikipedia page</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/SandboxedApps">Gnome SandboxedApps</a></li>
<li><a rel="nofollow" class="external text" href="https://community.kde.org/Guidelines_and_HOWTOs/Flatpak">KDE Testing Runtime and Applications</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Development.html" title="Category:Development">Development</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Flatpak&amp;oldid=812177">https://wiki.archlinux.org/index.php?title=Flatpak&amp;oldid=812177</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 9 July 2024, at 17:48.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
