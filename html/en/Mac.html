<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Mac - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Mac rootpage-Mac skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Overview" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Overview">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Overview</span>
			</div>
		</a>
		
		<ul id="toc-Overview-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Pre-installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Pre-installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Pre-installation</span>
			</div>
		</a>
		
		<ul id="toc-Pre-installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Partitions" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Partitions">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Partitions</span>
			</div>
		</a>
		
			<button aria-controls="toc-Partitions-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Partitions subsection</span>
			</button>
		
		<ul id="toc-Partitions-sublist" class="vector-toc-list">
			<li id="toc-Arch_Linux_with_macOS_or_other_operating_systems" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Arch_Linux_with_macOS_or_other_operating_systems">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Arch Linux with macOS or other operating systems</span>
				</div>
			</a>
			
			<ul id="toc-Arch_Linux_with_macOS_or_other_operating_systems-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Setup_boot_loader" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Setup_boot_loader">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Setup boot loader</span>
			</div>
		</a>
		
			<button aria-controls="toc-Setup_boot_loader-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Setup boot loader subsection</span>
			</button>
		
		<ul id="toc-Setup_boot_loader-sublist" class="vector-toc-list">
			<li id="toc-Installing_to_the_EFI_system_partition" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_to_the_EFI_system_partition">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Installing to the EFI system partition</span>
				</div>
			</a>
			
			<ul id="toc-Installing_to_the_EFI_system_partition-sublist" class="vector-toc-list">
				<li id="toc-systemd-boot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#systemd-boot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1.1</span>
					<span>systemd-boot</span>
				</div>
			</a>
			
			<ul id="toc-systemd-boot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-rEFInd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#rEFInd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1.2</span>
					<span>rEFInd</span>
				</div>
			</a>
			
			<ul id="toc-rEFInd-sublist" class="vector-toc-list">
				<li id="toc-Installing_from_macOS" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Installing_from_macOS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1.2.1</span>
					<span>Installing from macOS</span>
				</div>
			</a>
			
			<ul id="toc-Installing_from_macOS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-GRUB" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GRUB">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1.3</span>
					<span>GRUB</span>
				</div>
			</a>
			
			<ul id="toc-GRUB-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Installing_a_boot_loader_to_a_separate_HFS+_partition" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_a_boot_loader_to_a_separate_HFS+_partition">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Installing a boot loader to a separate HFS+ partition</span>
				</div>
			</a>
			
			<ul id="toc-Installing_a_boot_loader_to_a_separate_HFS+_partition-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_blessing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_blessing">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Using blessing</span>
				</div>
			</a>
			
			<ul id="toc-Using_blessing-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Color_Profile" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Color_Profile">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>Color Profile</span>
				</div>
			</a>
			
			<ul id="toc-Color_Profile-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Apple_Remote" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Apple_Remote">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>Apple Remote</span>
				</div>
			</a>
			
			<ul id="toc-Apple_Remote-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-HFS+_Partitions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#HFS+_Partitions">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3</span>
					<span>HFS+ Partitions</span>
				</div>
			</a>
			
			<ul id="toc-HFS+_Partitions-sublist" class="vector-toc-list">
				<li id="toc-HFS_partition_sharing" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#HFS_partition_sharing">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3.1</span>
					<span>HFS partition sharing</span>
				</div>
			</a>
			
			<ul id="toc-HFS_partition_sharing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bad_Superblock_Error" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bad_Superblock_Error">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3.2</span>
					<span>Bad Superblock Error</span>
				</div>
			</a>
			
			<ul id="toc-Bad_Superblock_Error-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_Journaling" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Disable_Journaling">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3.3</span>
					<span>Disable Journaling</span>
				</div>
			</a>
			
			<ul id="toc-Disable_Journaling-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-UID_synchronization_for_home_sharing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#UID_synchronization_for_home_sharing">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4</span>
					<span>UID synchronization for home sharing</span>
				</div>
			</a>
			
			<ul id="toc-UID_synchronization_for_home_sharing-sublist" class="vector-toc-list">
				<li id="toc-In_macOS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#In_macOS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4.1</span>
					<span>In macOS</span>
				</div>
			</a>
			
			<ul id="toc-In_macOS-sublist" class="vector-toc-list">
				<li id="toc-Change_UID_and_GID(s)" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Change_UID_and_GID(s)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4.1.1</span>
					<span>Change UID and GID(s)</span>
				</div>
			</a>
			
			<ul id="toc-Change_UID_and_GID(s)-sublist" class="vector-toc-list">
				<li id="toc-Pre-Leopard" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Pre-Leopard">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4.1.1.1</span>
					<span>Pre-Leopard</span>
				</div>
			</a>
			
			<ul id="toc-Pre-Leopard-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Leopard" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Leopard">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4.1.1.2</span>
					<span>Leopard</span>
				</div>
			</a>
			
			<ul id="toc-Leopard-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id='toc-Change_"Home"_permissions' class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href='#Change_"Home"_permissions'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4.1.2</span>
					<span>Change "Home" permissions</span>
				</div>
			</a>
			
			<ul id='toc-Change_"Home"_permissions-sublist' class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-In_Arch" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#In_Arch">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4.2</span>
					<span>In Arch</span>
				</div>
			</a>
			
			<ul id="toc-In_Arch-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Mute_startup_chime" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mute_startup_chime">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.5</span>
					<span>Mute startup chime</span>
				</div>
			</a>
			
			<ul id="toc-Mute_startup_chime-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Custom_icon_in_the_boot_loader" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Custom_icon_in_the_boot_loader">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.6</span>
					<span>Custom icon in the boot loader</span>
				</div>
			</a>
			
			<ul id="toc-Custom_icon_in_the_boot_loader-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Mac</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/ArchLinux_auf_einem_MacBook" title="ArchLinux auf einem MacBook – Deutsch" lang="de" hreflang="de" data-title="ArchLinux auf einem MacBook" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Mac" title="Mac – 日本語" lang="ja" hreflang="ja" data-title="Mac" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Mac" title="Mac – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Mac" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Mac/Troubleshooting.html" title="Mac/Troubleshooting">Mac/Troubleshooting</a></li>
<li><a href="../en/Laptop/Apple.html" title="Laptop/Apple">Laptop/Apple</a></li>
<li><a href="../en/Apple_Fusion_Drive.html" title="Apple Fusion Drive">Apple Fusion Drive</a></li>
</ul>
</div>
<p>This page complements the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a> with instructions specific to Apple Macs. The Arch installation image supports Apple Macs with Intel processors, but neither PowerPC nor Apple Silicon processors.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>Summed up, the procedure for installing Arch Linux on a Mac is:
</p>
<ol>
<li>
<b><a href="#Pre-installation">Pre-installation</a></b>: Miscellaneous steps before partitioning.</li>
<li>
<b><a href="#Partitions">Partitions</a></b>: Resizing or deleting the macOS partition to create partitions for Arch Linux.</li>
<li>
<b><a href="#Installation">Installation</a></b>: Actual installation.</li>
<li>
<b><a href="#Setup_boot_loader">Setup boot loader</a></b>: Making sure that the new partition is bootable.</li>
<li>
<b><a href="../en/Mac/Troubleshooting.html" title="Mac/Troubleshooting">Post-installation</a></b>: Device-specific configuration.</li>
</ol>
<h2><span class="mw-headline" id="Pre-installation">Pre-installation</span></h2>
<p>Before proceeding with the installation of Arch Linux, follow these steps.
</p>
<ol>
<li>Install macOS and install its updates. macOS is the only known method for installing firmware updates, even though the OS will not be necessary after installing Arch. See Apple's <a rel="nofollow" class="external text" href="https://support.apple.com/en-us/HT204904">instructions</a>.</li>
<li>Open ColorSync Utility, find the current <code>.icc</code> color profile, and save the file elsewhere. The profile can later be used to set the display colors correctly. See <a href="#Color_Profile">color profile</a>.</li>
<li>Set the volume on macOS, which will be the volume of the startup chime. If the volume is muted, the startup chime will also be muted. See <a href="#Mute_startup_chime">mute startup chime</a>.</li>
</ol>
<h2><span class="mw-headline" id="Partitions">Partitions</span></h2>
<p>If only Arch Linux is desired, then format the entire disk according to <a href="../en/Installation_guide.html#Partition_the_disks" title="Installation guide">Installation guide#Partition the disks</a>. To set up dual boot, follow these steps. Once done, go to <a href="#Installation">#Installation</a>.
</p>
<h3><span class="mw-headline" id="Arch_Linux_with_macOS_or_other_operating_systems">Arch Linux with macOS or other operating systems</span></h3>
<p>Macs typically have the following partition table. In Macs that use the <a href="../en/Apple_Fusion_Drive.html" title="Apple Fusion Drive">Apple Fusion Drive</a>, the partition scheme could be different. 
</p>
<ul>
<li>
<b>EFI</b>: the ~200 MB <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a>.</li>
<li>
<b>macOS</b>: the main partition containing your macOS installation, either <a href="../en/File_systems.html" title="File systems">HFS+</a> or APFS.</li>
<li>
<b>Recovery</b>: If not using APFS, a recovery partition is present. If using APFS, this partition is not present.</li>
</ul>
<p>To install Arch with macOS, keep these partitions, and follow these steps.
</p>
<ol>
<li>You may need to turn off FileVault before resizing the macOS partition. See Apple's <a rel="nofollow" class="external text" href="https://support.apple.com/guide/mac-help/turn-off-filevault-encryption-on-mac-mchlp2560/mac">instructions</a>.</li>
<li>Run Disk Utility, select the drive to be partitioned in the left-hand column, and click <b>Partition.</b> Do not create a container.</li>
<li>Add a new partition by pressing the <b>+</b> button and choose how much space you want to leave for macOS, and how much for the new partition. The new partition will be formatted in Arch Linux, so you can choose any partition type you want.</li>
<li>Optionally, make any other partitions you may need for your setup. See <a href="../en/Partitioning.html#Partition_scheme" title="Partitioning">Partitioning#Partition scheme</a> for more information.</li>
</ol>
<p>Here is an example setup with five discrete partitions:
</p>
<pre>partition  mountpoint  size          type  label
/dev/sda1  /efi        200MiB        vfat  EFI
/dev/sda2  -           ?             hfs+  macOS
/dev/sda3  -           ?             hfs+  Recovery
/dev/sda4  -           100MiB        hfs+  Boot Arch Linux from the Apple boot loader (optional)
/dev/sda5  /boot       100MiB        boot  boot
/dev/sda6  -           ?             swap  swap (optional)
/dev/sda7  /           15-20GiB      ext4  root
/dev/sda8  /home       remaining     ext4  home
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>See <a href="#Installing_a_boot_loader_to_a_separate_HFS+_partition">#Installing a boot loader to a separate HFS+ partition</a> for more information on booting Arch Linux from the Apple boot loader.</li>
<li>An existing <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a> can be used by Arch Linux without needing to create an additional one.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>These steps install Arch, assuming <a href="#Pre-installation">#Pre-installation</a> and <a href="#Partitions">#Partitions</a> are done.
</p>
<ol>
<li>
<a href="../en/Installation_guide.html#Boot_the_live_environment" title="Installation guide">Boot the live environment</a> by holding down <code>Alt</code> (<code>Option</code> on an Apple keyboard) during boot.</li>
<li>If the keyboard has long delays or character doubling, reboot with the following <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>: <code>arch noapic irqpoll acpi=force</code>.</li>
<li>If the display extends beyond the bounds of the screen (unreadable lines at the bottom) use the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>:<code>nomodeset</code>
</li>
<li>Proceed through the installation as described in the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a> <b>except</b> in the following areas:
<ol>
<li>Skip the <a href="../en/Installation_guide.html#Partition_the_disks" title="Installation guide">partition the disks</a> stage, do only the <a href="../en/Installation_guide.html#Format_the_partitions" title="Installation guide">partition formatting</a> and <a href="../en/Installation_guide.html#Mount_the_file_systems" title="Installation guide">mounting</a> steps, taking care to assign the correct partitions. Partitions have already been created if you followed <a href="#Partitions">#Partitions</a>
</li>
<li>When at the <a href="../en/Installation_guide.html#Boot_loader" title="Installation guide">install boot loader</a> stage, follow <a href="#Setup_boot_loader">#Setup boot loader</a>
</li>
<li>
<b>(for booting with BIOS-compatibility)</b> Add <code>reboot=pci</code> as a <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>. This will allow your Mac to reboot correctly from Arch.</li>
</ol>
</li>
<li>When the install process is complete, reboot your computer.</li>
<li>During boot, if using optical disk, hold down the eject key to eject the disk.</li>
<li>During boot, if using systemd-boot or GRUB, hold down the <code>Alt</code> key to bring up the Apple boot menu, and select "EFI Boot." If using rEFInd, boot without holding any keys.</li>
</ol>
<h2><span class="mw-headline" id="Setup_boot_loader">Setup boot loader</span></h2>
<p>Macs use <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> for booting, so any UEFI <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> will work. The built-in boot loader (shown when holding <code>Alt</code> during boot) will detect any <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a> that has a <code>/EFI/BOOT/BOOTX64.EFI</code> file, showing it as a "EFI Boot" entry. Most UEFI boot loaders support installing directly to this location, making a dual boot setup easy.
</p>
<p>The boot loader also has an alternate partition discovery method described in <a href="#Installing_a_boot_loader_to_a_separate_HFS+_partition">#Installing a boot loader to a separate HFS+ partition</a> which is the method used for booting macOS, but can also be used for Linux.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>The UEFI firmware on a Mac can also be configured via <a href="../en/Unified_Extensible_Firmware_Interface.html#efibootmgr" class="mw-redirect" title="Efibootmgr">efibootmgr</a>.</li>
<li>To set a volume as the default boot entry using the Apple boot loader, hold down <code>Ctrl</code> while selecting it.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Installing_to_the_EFI_system_partition">Installing to the EFI system partition</span></h3>
<h4><span class="mw-headline" id="systemd-boot">systemd-boot</span></h4>
<p>Follow the instructions at <a href="../en/Systemd-boot.html#Installing_the_UEFI_boot_manager" title="Systemd-boot">systemd-boot#Installing the UEFI boot manager</a>. After installing, a copy of systemd-boot will be present at <code>/EFI/BOOT/BOOTX64.EFI</code>.
</p>
<h4><span class="mw-headline" id="rEFInd">rEFInd</span></h4>
<p>To install <a href="../en/REFInd.html" title="REFInd">rEFInd</a> to the <code>/EFI/BOOT/BOOTX64.EFI</code> location, run:
</p>
<pre># refind-install --usedefault /dev/sd<i>XY</i>
</pre>
<p>Where <code>/dev/sd<i>XY</i></code> is the EFI system partition. After installing, see <a href="../en/REFInd.html#Configuration" title="REFInd">rEFInd#Configuration</a> to finish setup.
</p>
<h5><span class="mw-headline" id="Installing_from_macOS">Installing from macOS</span></h5>
<p>These steps assume macOS is still installed on a partition, and the steps of the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a> were completed up to <a href="../en/Installation_guide.html#Boot_loader" title="Installation guide">Installation guide#Boot loader</a>. Boot into Safe Mode by holding down <code>Command+R</code>, then disable SIP.
</p>
<pre># csrutil disable
</pre>
<p>Boot macOS, and run the rEFInd install script,
</p>
<pre># ./refind-install --alldrivers
</pre>
<p>rEFInd installed itself into Apple's boot partition, and replaced Apple's boot menu with its own. Boot into Safe Mode by holding down <code>Command+R</code>, and enable SIP.
</p>
<pre># csrutil enable
</pre>
<p>Reboot without holding down any keys. Arch should be recognized as <code>vmlinuz-linux</code> by default. If it is not, uncomment the lines <code>scan_all_linux_kernels</code> and <code>also_scan_dirs</code> in <code>refind.conf</code>. For configuration, see <a href="../en/REFInd.html#refind_linux.conf" title="REFInd">rEFInd#refind_linux.conf</a>. Since rEFInd by default mounts root as ro, it is recommended to create refind-linux.conf.
</p>
<h4><span class="mw-headline" id="GRUB">GRUB</span></h4>
<p>To install GRUB to <code>/EFI/BOOT/BOOTX64.EFI</code>, follow the instructions at <a href="../en/GRUB.html#Installation" title="GRUB">GRUB#Installation</a>, adding the <code>--removable</code> option when running <code>grub-install</code>.
</p>
<h3>
<span id="Installing_a_boot_loader_to_a_separate_HFS.2B_partition"></span><span class="mw-headline" id="Installing_a_boot_loader_to_a_separate_HFS+_partition">Installing a boot loader to a separate HFS+ partition</span>
</h3>
<p>Despite using UEFI, the Mac native EFI boot loader <a rel="nofollow" class="external text" href="https://refit.sourceforge.net/myths/">does not use the EFI system partition for booting macOS</a>. Instead, it uses the <a rel="nofollow" class="external text" href="https://mjg59.dreamwidth.org/7468.html">following conditions</a> to find existing macOS installations inside all the partitions in internal and external drives and shows them as possible boot options if they are satisfied:
</p>
<ul>
<li>The partition is formatted as HFS+</li>
<li>The partition type ID is <code>af00</code> ("Apple HFS/HFS+")</li>
<li>In the root of the partition, there is a file called <code>mach_kernel</code>
</li>
<li>Inside that partition, there a <code>boot.efi</code> file inside <code>/System/Library/CoreServices</code>
</li>
</ul>
<p>The advantage of this method to boot Arch over using a <code>BOOTX64.EFI</code> file in the EFI system partition is that it can coexist with macOS nicely, showing the partition as a bootable volume in the macOS Startup Disk settings. However, this method requires manual configuration. The following steps will illustrate how to perform this configuration using GRUB.
</p>
<p>First, create a new HFS+ partition. This can be done through the macOS Disk Utility, or the <code>mkfs.hfsplus</code> tool in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hfsprogs/">hfsprogs</a></span><sup><small>AUR</small></sup> package. The size and mount point of the partition depend on how you plan to use it:
</p>
<ul>
<li>If you plan on using it as the <a href="../en/Partitioning.html#/boot" title="Partitioning">/boot</a> directory, give it at least 300 MB;</li>
<li>If you are going to keep your kernels in another partition and use a boot loader that can load other file systems, like rEFInd or GRUB, the partition can be smaller and be mounted anywhere you want.</li>
</ul>
<p><a href="../en/File_systems.html#Mount_a_file_system" class="mw-redirect" title="Mount">Mount</a> the partition, then create the <code>mach_kernel</code> file:
</p>
<pre># touch /<i>mountpoint</i>/mach_kernel
</pre>
<p>Create the directory structure for the boot loader:
</p>
<pre># mkdir -p /<i>mountpoint</i>/System/Library/CoreServices
</pre>
<p>Now you can install any UEFI boot loader you want. For example, to do a manual install of rEFInd:
</p>
<pre># cp -r /usr/share/refind/* /<i>mountpoint</i>/System/Library/CoreServices/
# mv /<i>mountpoint</i>/System/Library/CoreServices/refind_x64.efi /<i>mountpoint</i>/System/Library/CoreServices/boot.efi
</pre>
<p>Finally, you can <a href="../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Create">create</a> an optional <code>/<i>mountpoint</i>/System/Library/CoreServices/SystemVersion.plist</code> file that will display some information about the volume in the macOS Startup Disk settings:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/<i>mountpoint</i>/System/Library/CoreServices/SystemVersion.plist</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
       &lt;key&gt;ProductBuildVersion&lt;/key&gt;
       &lt;string&gt;rolling&lt;/string&gt;
       &lt;key&gt;ProductName&lt;/key&gt;
       &lt;string&gt;Arch Linux&lt;/string&gt;
       &lt;key&gt;ProductUserVisibleVersion&lt;/key&gt;
       &lt;string&gt;&lt;/string&gt;
       &lt;key&gt;ProductVersion&lt;/key&gt;
       &lt;string&gt;&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;</pre>
<p>After following these instructions, the new volume will appear on the Mac boot loader when holding down <code>Alt</code> during boot, and it will also appear as a bootable volume in the macOS Startup Disk options.
</p>
<h3><span class="mw-headline" id="Using_blessing">Using blessing</span></h3>
<p>It is possible to boot directly from GRUB in EFI mode without using rEFIt through what is known as "blessing" after placing GRUB on a <b>separate partition</b>.  These instructions are known to work on a MacBook7,1. It is advisable to host GRUB on either a FAT32 or HFS+ partition, but ext2 or ext3 may also work.
</p>
<p>After the GRUB install is in the desired location, the firmware needs to be instructed to boot from that location.  This can be done from either an existing macOS install or an macOS install disk.  The following command assumes that the GRUB install is in <code>/efi/grub/</code> on an existing macOS partition:
</p>
<pre># bless --folder /efi/grub --file /efi/grub/grub.efi
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Color_Profile">Color Profile</span></h3>
<p>Macs use <a href="../en/ICC_profiles.html" title="ICC profiles">ICC profiles</a> which can easily be loaded in Arch. The current profile can be shown using ColorSync Utility or System Preferences &gt; Displays &gt; Color. These files correspond to particular models,
</p>
<ul>
<li>
<code>Color LCD-4271800.icc</code> for MacBook Pro with CoreDuo CPU</li>
<li>
<code>Color LCD-4271880.icc</code> for MacBook with Core2Duo</li>
<li>
<code>Color LCD-4271780.icc</code> for MacBook (non-Pro) based on CoreDuo or Core2Duo.</li>
<li>
<code>Color LCD-68FE312B-5EF0-E0A1-BCD8-8890B73C7B3A.icc</code> for <a href="../en/MacBookPro9,x.html" class="mw-redirect" title="MacBookPro9,2 (Mid-2012)">MacBookPro9,2 (Mid-2012)</a>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The previous command sets the color profile only for the current session. <a href="../en/Autostarting.html" class="mw-redirect" title="Autostart">autostart</a> it.</li>
<li>GNOME will revert the profile set by xcalib. It is preferable to set the profile using <b>Color</b> in settings.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Apple_Remote">Apple Remote</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> and configure <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lirc">lirc</a></span>. See <a href="../en/LIRC.html" title="LIRC">LIRC</a>.
</p>
<p>Make LIRC use <code>/dev/usb/hiddev0</code> or <code>/dev/hiddev0</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/conf.d/lircd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#
# Parameters for lirc daemon
#
LIRC_DEVICE="/dev/usb/hiddev0"
LIRC_DRIVER="macmini"
LIRC_EXTRAOPTS=""
LIRC_CONFIGFILE="/etc/lirc/lircd.conf"</pre>
<p>Use <i>irrecord</i> to create a configuration file matching your remote control signals:
</p>
<pre># irrecord -d /dev/usb/hiddev0 -H macmini output_conf_file
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> <code>lircd.service</code> and use <i>irw</i> to check if it works.
</p>
<p>Alternatively, use the following: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/lirc/lircd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">begin remote

  name  lircd.conf.macbook
  bits            8
  eps            30
  aeps          100

  one             0     0
  zero            0     0
  pre_data_bits   24
  pre_data       0x87EEFD
  gap          211994
  toggle_bit_mask 0x87EEFD01

      begin codes
          Repeat                   0x01
          Menu                     0x03
          Play                     0x05
          Prev                     0x09
          Next                     0x06
          Up                       0x0A
          Down                     0x0C
      end codes

end remote</pre>
<h3>
<span id="HFS.2B_Partitions"></span><span class="mw-headline" id="HFS+_Partitions">HFS+ Partitions</span>
</h3>
<h4><span class="mw-headline" id="HFS_partition_sharing">HFS partition sharing</span></h4>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hfsprogs/">hfsprogs</a></span><sup><small>AUR</small></sup> and use <a href="../en/Fdisk.html" title="Fdisk">fdisk</a> to list the partitions:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># fdisk -l /dev/sda</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">   Device  Boot     Start         End      Blocks   Id  Type
/dev/sda1               1          26      204819   ee  GPT
/dev/sda2              26       13602   109051903+  af  Unknown
/dev/sda3   *       13602       14478     7031250   83  Linux
/dev/sda4           14478       14594      932832+  82  Linux swap / Solaris
</pre>
<p>The "Unknown" partition is our macOS partition, which is located in <code>/dev/sda2</code>. We can use this in our <a href="../en/Fstab.html" title="Fstab">fstab</a>: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sda2    <i>/path/to/shared/hfs_partition</i>     hfsplus auto,user,rw,exec   0 0
</pre>
<p>It can then be mounted, and the content accessed.
</p>
<h4><span class="mw-headline" id="Bad_Superblock_Error">Bad Superblock Error</span></h4>
<p>This section addresses error message when mounting hfsplus partition:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># mount -t hfsplus dev/sdX force,ro</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">wrong fs type, bad option, bad superblock on /dev/sdX, missing codepage or helper program, or other error.
</pre>
<p>Since Yosemite, HFS+ partitions are now wrapped a CoreStorage volume. Verify that you have an CoreStorage volume.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># fdisk -l /dev/sdX</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Disk /dev/sdX: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1* 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disklabel type: gpt
Device      Start      End         Sectors    Size     Type
/dev/sdX1   40         409639      409600     200M     EFI System
/dev/sdX2   409640     623872871   623463232  297.3G   Apple Core storage
/dev/sdX3   623872872  625142407   1269536    916.0M   Apple boot</pre>
<p>HFS+ uses two volume headers, one 1024 bytes into the device and one 1024 from the end of the device. With the HFS+ partition wrapped in the CoreStorage volume the end of the partition is not actually 1024 bytes from the end of the <code>/dev/sdX2</code> partition. To fix this you need to specify <code>sizelimit=X</code> when mounting.
</p>
<p>To determine <code>sizelimit</code> do the following:
</p>
<ol>
<li>Run <code>testdisk /dev/sdX</code> and select your drive</li>
<li>Select <code>EFI GPT</code>
</li>
<li>Select <code>Analyse</code> and then <code>Quick Search</code>
</li>
</ol>
<p>Sample output:
</p>
<pre>TestDisk 7.0, Data Recovery Utility, April 2015
Christophe GRENIER &lt;grenier@cgsecurity.org&gt;
<a rel="nofollow" class="external free" href="https://www.cgsecurity.org">https://www.cgsecurity.org</a>

Disk /dev/sdX  - 320 GB / 298 GiB - CHS 38913 255 63
    Partition     Start      End        Size in sectors
P  EFI System     40         409639     409600  [EFI]
P  Mac HFS        409640     623147815  622738176
P  Mac HFS        623872872  625142407  1269536
</pre>
<p>What you see now is the output of the HFS partition itself without the CoreStorage volume. Take the size in sectors (622738176 in this example) and multiply by the number of bytes in your logical sector size (512 in this example).
</p>
<p>622738176 * 512 = 318841946112
</p>
<p>Finally, mount your disk with the <code>sizelimit=X</code> option.
</p>
<pre> mount /dev/sdX -t hfsplus -o ro,sizelimit=318841946112
</pre>
<h4><span class="mw-headline" id="Disable_Journaling">Disable Journaling</span></h4>
<p>HFS+ partitions are not fully supported by Linux and are mounted as read-only by default. In order to write to an HFS+ partition, the safe way is to disable journaling. This can be accomplished using the macOS Disk Utility. Refer to this <a rel="nofollow" class="external text" href="https://support.apple.com/kb/ht2355">Apple support page</a> for more information or try to do it from the command line:
</p>
<p>Find your partition:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># diskutil list</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/disk0
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        *750.2 GB   disk0
   1:                        EFI EFI                     209.7 MB   disk0s1
   2:                  Apple_HFS macOS                   149.5 GB   disk0s2
   3:                  Apple_HFS Macintosh HD            599.2 GB   disk0s3
   4:                 Apple_Boot Recovery HD             650.0 MB   disk0s4
</pre>
<p>In this example we will use <i>disk0s3</i> partition named as <i>Macintosh HD</i>. To know if journaling is activate or not you could execute:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># diskutil info /dev/disk0s3 | grep -i journal</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">    File System Personality:  Journaled HFS+
    Name (User Visible):      Mac OS Extended (Journaled)
    Journal:                  Journal size 49152 KB at offset 0x1176000
</pre>
<p>As you can read the journaling is active. To turn off the journaling you could execute:
</p>
<pre># diskutil disableJournal disk0s3
</pre>
<p>To verify it is done execute the info command again.
</p>
<p>If you get noting as output, then journaling is disabled.
</p>
<p>However, if you fail to disable journaling. You can change "auto,user,rw,exec" in <code>/etc/fstab</code> to "auto,user,force,rw,exec" and mount it.
</p>
<h3><span class="mw-headline" id="UID_synchronization_for_home_sharing">UID synchronization for home sharing</span></h3>
<p>If you want to access your macOS user directories from Linux, write down the UID and GID for the users. macOS begins with the first user's UID at 501 while Arch defaults to 1000.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong>  Never change any file permissions in your macOS partition from Linux.</div>
<h4><span class="mw-headline" id="In_macOS">In macOS</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It is strongly recommended that UID/GID manipulation be done immediately after a new user account is created, in macOS as well as in Arch Linux.  If you installed macOS from scratch, then this operation is guaranteed to work after logging into your account for the first time.</div>
<h5>
<span id="Change_UID_and_GID.28s.29"></span><span class="mw-headline" id="Change_UID_and_GID(s)">Change UID and GID(s)</span>
</h5>
<p>The default UID and GID on Arch Linux for a user is 1000, adjust the following steps according to your setup.
</p>
<h6><span class="mw-headline" id="Pre-Leopard">Pre-Leopard</span></h6>
<ol>
<li>Open <b>NetInfo Manager</b> located in the <code>/Applications/Utilities</code> folder.</li>
<li>If not done for you already, enable access to user account transactions by clicking on the closed lock at the bottom of the window, and entering your account password, or root password if you have created a root account.</li>
<li>Navigate to <code>/users/<i>new_user_name</i></code>
</li>
<li>Change the <b>UID</b> value to 1000</li>
<li>Change the <b>GID</b> value to 1000</li>
<li>Navigate to <code>/groups/<i>new_user_name</i></code>, automatically saving the changes you have made so far.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you get an error message that the transaction is not allowed, log out and log back in.</div>
<h6><span class="mw-headline" id="Leopard">Leopard</span></h6>
<p>In Leopard, the <b>NetInfo Manager</b> application is not present. A different set of steps is required for UID synchronization:
</p>
<ol>
<li>Open <b>System Preferences</b>.</li>
<li>Click on <b>Users &amp; Groups</b>.</li>
<li>Unlock the pane if not already done so.</li>
<li>Right-click on the desired user and select <b>Advanced Options</b>.</li>
<li>Write down the value of the <b>User ID</b> field, you will need it later on. Change both the UID and GID to match the UID and GID of the account to be shared with in Arch.</li>
</ol>
<h5>
<span id="Change_.22Home.22_permissions"></span><span class="mw-headline" id='Change_"Home"_permissions'>Change "Home" permissions</span>
</h5>
<ol><li>Open up <b>Terminal</b> in the <code>/Applications/Utilities</code> folder.</li></ol>
<ol><li>Enter the following command to reclaim the permission settings of your home folder:</li></ol>
<pre># find /User/<i>your_user_name</i> -user <i>your_old_UID</i> -exec chown <i>your_user_name</i>:<i>your_user_group</i> {} \;
</pre>
<h4><span class="mw-headline" id="In_Arch">In Arch</span></h4>
<p>To synchronize your UID in Arch Linux, you are advised to perform this operation <i>while creating a new user account</i>.
It is therefore recommended that you do this as soon as you install Arch Linux.
</p>
<pre># useradd -m -u [uid] -g [gid] -G [additional_groups] -s [login_shell] [username]
</pre>
<p>Now you must substitute Arch's home with macOS's home, by modify entries of <code>/etc/fstab</code>. In order to be able to access a macOS user's directory, only the uid and gid need to match (usernames can differ).
</p>
<h3><span class="mw-headline" id="Mute_startup_chime">Mute startup chime</span></h3>
<p>The startup chime volume is controlled by the EFI variable <i>SystemAudioVolume-7c436110-ab2a-4bbb-a880-fe41995c9f82</i>. So it can be muted with
</p>
<pre># printf "\x07\x00\x00\x00\x00" &gt; /sys/firmware/efi/efivars/SystemAudioVolume-7c436110-ab2a-4bbb-a880-fe41995c9f82
</pre>
<p>Bear in mind that the file may have the immutable bit set by default, which will prevent even root from overwriting the file. See <a href="../en/File_permissions_and_attributes.html#File_attributes" title="File permissions and attributes">File permissions and attributes#File attributes</a>. To remove it, issue the following:
</p>
<pre># chattr -i /sys/firmware/efi/efivars/SystemAudioVolume-7c436110-ab2a-4bbb-a880-fe41995c9f82
</pre>
<p>After that, run the <code>printf</code> command and it should overwrite the file properly. Verify the file's contents and then set the immutable bit again with <code>chattr +i</code> once satisfied.
</p>
<p>Alternatively, you can use a macOS install disk to mute the chime. Boot from it, select language, then click <i>Utilities &gt; Terminal</i>, and enter
</p>
<pre># /usr/sbin/nvram SystemAudioVolume=%<i>percentage</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Required formatting of the value provided for key SystemAudioVolume may differ depending on models and perhaps the version of macOS install media. If the above command fails to work, try enclosing the value in double quotes.</div>
<h3><span class="mw-headline" id="Custom_icon_in_the_boot_loader">Custom icon in the boot loader</span></h3>
<p>The Mac boot loader supports loading custom icons for each volume it detects. The custom icon must be in the <code>.icns</code> format, and be located at the root of the volume containing the boot loader, with the file name <code>.VolumeIcon.icns</code>.
</p>
<p>The following example downloads an Arch logo SVG with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wget">wget</a></span>, converts it to PNG with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=librsvg">librsvg</a></span> and then converts it to an <code>.icns</code> with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libicns">libicns</a></span>:
</p>
<pre>$ wget -O /tmp/archlinux.svg <a rel="nofollow" class="external free" href="https://archlinux.org/logos/archlinux-icon-crystal-64.svg">https://archlinux.org/logos/archlinux-icon-crystal-64.svg</a>
$ rsvg-convert -w 128 -h 128 -o /tmp/archlogo.png /tmp/archlinux.svg
# png2icns /boot/.VolumeIcon.icns /tmp/archlogo.png
</pre>
<p>Obviously, you can replace the Arch logo with any other icon you like.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/Laptop/Apple.html" title="Laptop/Apple">Laptop/Apple</a></li>
<li><a href="../en/MacBookPro10,x.html" title="MacBookPro10,x">MacBookPro10,x</a></li>
<li><a href="../en/MacBookPro11,x.html" title="MacBookPro11,x">MacBookPro11,x</a></li>
<li><a rel="nofollow" class="external free" href="https://wiki.t2linux.org/">https://wiki.t2linux.org/</a></li>
<li>MacBook Air
<ul>
<li><a rel="nofollow" class="external text" href="https://dabase.com/blog/2014/Macbook_Air_Early_2014_Archlinux/">Macbook Air Early 2014 — dabase.com</a></li>
<li><a rel="nofollow" class="external text" href="https://www.nico.schottelius.org/blog/macbook-air-42-archlinux/">Installing Linux on a Macbook Air (4,2) — Nico Schottelius</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/AdhamNasr/Apple_mba-Arch-i3">MacBook Air (7,2) - Adham Nasr</a></li>
</ul>
</li>
<li>MacBook Pro
<ul>
<li><a rel="nofollow" class="external free" href="http://allanmcrae.com/2010/04/installing-arch-on-a-macbook-pro-5-5/">http://allanmcrae.com/2010/04/installing-arch-on-a-macbook-pro-5-5/</a></li>
<li><a rel="nofollow" class="external free" href="http://allanmcrae.com/2012/04/installing-arch-on-a-macbook-pro-8-1/">http://allanmcrae.com/2012/04/installing-arch-on-a-macbook-pro-8-1/</a></li>
</ul>
</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Apple.html" title="Category:Apple">Apple</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Mac&amp;oldid=812810">https://wiki.archlinux.org/index.php?title=Mac&amp;oldid=812810</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 July 2024, at 02:49.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
