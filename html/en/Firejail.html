<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Firejail - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Firejail rootpage-Firejail skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Usage</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Using_Firejail_by_default" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_Firejail_by_default">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Using Firejail by default</div>
			</a>
			
			<ul id="toc-Using_Firejail_by_default-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_with_hardened_malloc" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Use_with_hardened_malloc">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Use with hardened_malloc</div>
			</a>
			
			<ul id="toc-Use_with_hardened_malloc-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_AppArmor_support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_AppArmor_support">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Enable AppArmor support</div>
			</a>
			
			<ul id="toc-Enable_AppArmor_support-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Verifying_Firejail_is_being_used" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Verifying_Firejail_is_being_used">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Verifying Firejail is being used</div>
			</a>
			
			<ul id="toc-Verifying_Firejail_is_being_used-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Creating_custom_profiles" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Creating_custom_profiles">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Creating custom profiles</div>
		</a>
		
			<button aria-controls="toc-Creating_custom_profiles-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Creating custom profiles subsection</span>
			</button>
		
		<ul id="toc-Creating_custom_profiles-sublist" class="vector-toc-list">
			<li id="toc-Whitelists_and_blacklists" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Whitelists_and_blacklists">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Whitelists and blacklists</div>
			</a>
			
			<ul id="toc-Whitelists_and_blacklists-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Profile_writing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Profile_writing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Profile writing</div>
			</a>
			
			<ul id="toc-Profile_writing-sublist" class="vector-toc-list">
				<li id="toc-Persistent_local_customisation" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Persistent_local_customisation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.1</span>Persistent local customisation</div>
			</a>
			
			<ul id="toc-Persistent_local_customisation-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Testing_profiles" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Testing_profiles">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Testing profiles</div>
			</a>
			
			<ul id="toc-Testing_profiles-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Firejail_with_Xorg" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Firejail_with_Xorg">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Firejail with Xorg</div>
		</a>
		
			<button aria-controls="toc-Firejail_with_Xorg-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Firejail with Xorg subsection</span>
			</button>
		
		<ul id="toc-Firejail_with_Xorg-sublist" class="vector-toc-list">
			<li id="toc-Sandboxing_a_browser" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sandboxing_a_browser">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Sandboxing a browser</div>
			</a>
			
			<ul id="toc-Sandboxing_a_browser-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Hardening_Firejail" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hardening_Firejail">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Hardening Firejail</div>
			</a>
			
			<ul id="toc-Hardening_Firejail-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Paths_containing_spaces" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Paths_containing_spaces">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Paths containing spaces</div>
			</a>
			
			<ul id="toc-Paths_containing_spaces-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Private_mode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Private_mode">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Private mode</div>
			</a>
			
			<ul id="toc-Private_mode-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Experimental_improved_tools" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Experimental_improved_tools">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Experimental improved tools</div>
			</a>
			
			<ul id="toc-Experimental_improved_tools-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Remove_Firejail_symbolic_links" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remove_Firejail_symbolic_links">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>Remove Firejail symbolic links</div>
			</a>
			
			<ul id="toc-Remove_Firejail_symbolic_links-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PulseAudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.2</span>PulseAudio</div>
			</a>
			
			<ul id="toc-PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-hidepid" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#hidepid">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.3</span>hidepid</div>
			</a>
			
			<ul id="toc-hidepid-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Proprietary_Nvidia_drivers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Proprietary_Nvidia_drivers">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.4</span>Proprietary Nvidia drivers</div>
			</a>
			
			<ul id="toc-Proprietary_Nvidia_drivers-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc---net_options_and_Linux_kernel_&gt;=4.20.0" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#--net_options_and_Linux_kernel_&gt;=4.20.0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.5</span>--net options and Linux kernel &gt;=4.20.0</div>
			</a>
			
			<ul id="toc---net_options_and_Linux_kernel_&gt;=4.20.0-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Warning:_Cannot_confine_the_application_using_AppArmor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Warning:_Cannot_confine_the_application_using_AppArmor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.6</span>Warning: Cannot confine the application using AppArmor</div>
			</a>
			
			<ul id="toc-Warning:_Cannot_confine_the_application_using_AppArmor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-/usr/bin/patch:_****_Can't_open_patch_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#/usr/bin/patch:_****_Can't_open_patch_file">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.7</span>/usr/bin/patch: **** Can't open patch file</div>
			</a>
			
			<ul id="toc-/usr/bin/patch:_****_Can't_open_patch_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Daemonizing/backgrounded_processes_hang" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Daemonizing/backgrounded_processes_hang">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.8</span>Daemonizing/backgrounded processes hang</div>
			</a>
			
			<ul id="toc-Daemonizing/backgrounded_processes_hang-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Firejail</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Firejail" title="Firejail – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Firejail" title="Firejail – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Firejail.html" title="Firejail – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Security.html" title="Security">Security</a></li>
<li><a href="../en/AppArmor.html" title="AppArmor">AppArmor</a></li>
<li><a href="../en/Bubblewrap.html" title="Bubblewrap">Bubblewrap</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://firejail.wordpress.com/">Firejail</a> is an easy to use <a href="../en/Security.html#SUID_and_SGID_files" class="mw-redirect" title="Setuid">Setuid</a> sandbox program that reduces the risk of security breaches by restricting the running environment of untrusted applications using Linux namespaces, seccomp-bpf and Linux capabilities.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Running untrusted code is never safe, sandboxing cannot change this.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> either <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=firejail">firejail</a></span>, or the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/firejail-git/">firejail-git</a></span><sup><small>AUR</small></sup> package. A GUI application for use with Firejail is also available, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=firetools">firetools</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> For information about <span class="plainlinks archwiki-template-man" title="$ man 7 user_namespaces"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/user_namespaces.7">user_namespaces(7)</a></span> support in Arch Linux kernels, see <a href="../en/Security.html#Sandboxing_applications" title="Security">Security#Sandboxing applications</a>. <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/issues/1842#issuecomment-376642039">Firejail can use it even if it is disabled</a>.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> While upstream is gradually adopting whitelists (cf <code>/etc/firejail/firefox.profile</code>), most of the supplied profiles still rely heavily on blacklists. This means that anything not explicitly forbidden by the profile will be accessible to the application. For example, if you have btrfs snapshots available in <code>/mnt/btrfs</code>, a jailed program may be forbidden from accessing <code>$HOME/.ssh</code>, but would still be able to access <code>/mnt/btrfs/@some-snapshot/$HOME/.ssh</code>. Make sure to audit your profiles; see <a href="#Testing_profiles">#Testing profiles</a>.</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Most users will not require any custom configuration and can proceed to <a href="#Usage">#Usage</a>.
</p>
<p>Firejail uses profiles to set the security protections for each of the applications executed inside of it - you can find the default profiles in <code>/etc/firejail/<i>application</i>.profile</code>. Should you require custom profiles for applications not included, or wish to modify the defaults, you may place new rules or copies of the defaults in the <code>~/.config/firejail</code> directory. You may have multiple custom profile files for a single application, and you may share the same profile file among several applications.
</p>
<p>If firejail does not have a profile for a particular application, it uses its restrictive system-wide default profile. This can result in the application not functioning as desired, without first creating a custom and less restrictive profile.
</p>
<p>Refer to <span class="plainlinks archwiki-template-man" title="$ man 5 firejail-profile"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/firejail-profile.5">firejail-profile(5)</a></span>.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>To execute an application using firejail's default protections for that application (the default profile), execute the following:
</p>
<pre>$ firejail <i>program_name</i>
</pre>
<p>One-time additions to the default profile can be added as command line options (see <span class="plainlinks archwiki-template-man" title="$ man 1 firejail"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/firejail.1">firejail(1)</a></span>). For example, to execute <i>okular</i> with seccomp protection, execute the following:
</p>
<pre>$ firejail --seccomp okular
</pre>
<p>You may define multiple non-default profiles for a single program. Once you create your profile file, you can use it by executing:
</p>
<pre>$ firejail --profile=<i>/absolute/path/to/profile program_name</i>
</pre>
<h3><span class="mw-headline" id="Using_Firejail_by_default">Using Firejail by default</span></h3>
<p>To use Firejail by default for all applications for which it has profiles, <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/wiki/Frequently-Asked-Questions#a-program-isnt-firejailed">run the firecfg tool with sudo</a>:
</p>
<pre>$ sudo firecfg
</pre>
<p>This creates symbolic links in <code>/usr/local/bin/</code> pointing to <code>/usr/bin/firejail</code> for  programs for which Firejail has default or self-created profiles. Note that <span class="plainlinks archwiki-template-man" title="$ man 1 firecfg"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/firecfg.1">firecfg(1)</a></span> only symlinks the programs listed in <code>/etc/firejail/firecfg.config</code>. Certain CLI programs are absent, such as: <i>tar</i>, <i>curl</i>, and <i>git</i>. These need to be symlinked manually. See <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/issues/2507">Profiles not in firecfg #2507</a> for why they are not included. <i>firecfg</i> additionally adds the current user to Firejail user access database and checks the <code>/usr/share/applications/*.desktop</code> files if they contain the full path to the respective executable, removes the full path and copies them to <code>~/.local/share/applications/</code>. This ensures that the symlinks in <code>/usr/local/bin/</code> will be used, which prevents Firejail getting bypassed. If <a href="../en/Sudo.html" title="Sudo">sudo</a> is not installed on your system, you should execute:
</p>
<pre># firecfg
</pre>
<p>as root and 
</p>
<pre>$ firecfg --fix
</pre>
<p>as user in order to fix the <i>.desktop</i> files.
</p>
<p>There may be cases for which you need to manually modify the <code>Exec=</code> line of the <i>.desktop</i> file in <code>~/.local/share/applications/</code> to explicitly call Firejail.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> A <a href="../en/Pacman.html#Hooks" class="mw-redirect" title="Pacman hook">pacman hook</a> can be used to automatically run <i>firecfg</i> on <a href="../en/Pacman.html" title="Pacman">pacman</a> operations:
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/firejail.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Type = Path
Operation = Install
Operation = Upgrade
Operation = Remove
Target = usr/bin/*
Target = usr/share/applications/*.desktop

[Action]
Description = Configure symlinks in /usr/local/bin based on firecfg.config...
When = PostTransaction
Depends = firejail
Exec = /bin/sh -c 'firecfg &gt;/dev/null 2&gt;&amp;1'</pre>
</div>
<p>To manually map individual applications, execute:
</p>
<pre># ln -s /usr/bin/firejail /usr/local/bin/<i>application</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<code>/usr/local/bin</code> must be set before <code>/usr/bin</code> in the <code>PATH</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a>. The default Arch Linux <code>/etc/profile</code> script satisfies this precondition <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/packaging/packages/filesystem/-/blob/main/profile?ref_type=heads#L14-17">[1]</a>.</li>
<li>To run a symbolic program with custom Firejail setting, simple prefix <i>firejail</i> as seen in <a href="#Usage">#Usage</a>.</li>
<li>For a daemon, you will need to overwrite the systemd unit file for that daemon to call firejail, see <a href="../en/Systemd.html#Editing_provided_units" title="Systemd">systemd#Editing provided units</a>.</li>
<li>Symbolic links to <i>gzip</i> and <i>xz</i> interfere with <i>makepkg</i>'s ability to preload <code>libfakeroot.so</code>. See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=230913">BBS#230913</a>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Use_with_hardened_malloc">Use with hardened_malloc</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some programs will not work using <code>libhardened_malloc.so</code>, such as PyCharm, Firefox.</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hardened_malloc/">hardened_malloc</a></span><sup><small>AUR</small></sup> is a hardened implementation of glibc's <code>malloc()</code> allocator, originally written for Android but extended for use on the desktop. While not integrated into glibc yet, it can be used selectively with <code>LD_PRELOAD</code>. The proper way to launch an application within firejail using hardened_malloc is demonstrated below. To make it permanent, you would need to create your own entry in <code>/usr/local/bin/</code> for the desired application.
</p>
<pre>$ firejail --env=LD_PRELOAD='/usr/lib/libhardened_malloc.so' /usr/bin/firefox
</pre>
<p>Alternatively, add the following to a custom profile:
</p>
<pre>env LD_PRELOAD=/usr/lib/libhardened_malloc.so
</pre>
<p>Profiles that have private-lib will need the following in custom profiles:
</p>
<pre>private-lib /lib/libhardened_malloc.so
</pre>
<p>The various environment variables and settings that can be used to tune hardened_malloc can be found on its <a rel="nofollow" class="external text" href="https://github.com/GrapheneOS/hardened_malloc">github page</a>.
</p>
<h3><span class="mw-headline" id="Enable_AppArmor_support">Enable AppArmor support</span></h3>
<p>Since 0.9.60-1, Firejail has supported more direct integration with AppArmor through a generic AppArmor profile. During installation, the profile, <code>firejail-default</code>, is placed in <code>/etc/apparmor.d</code> directory, and needs to be loaded into the kernel by running the following command as root:
</p>
<pre># apparmor_parser -r /etc/apparmor.d/firejail-default
</pre>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 1 firejail"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/firejail.1#APPARMOR">firejail(1) § APPARMOR</a></span>.
</p>
<p>Local customizations of the apparmor profile are supported by editing the file <code>/etc/apparmor.d/local/firejail-local</code>
</p>
<p>AppArmor is already enabled for a <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail#profile-statistics">large number</a> of Firejail profiles. There are several ways to enable <a href="../en/AppArmor.html" title="AppArmor">AppArmor</a> confinement on top of a Firejail security profile:
</p>
<ul>
<li>Pass the <code>--apparmor</code> flag to Firejail in the command line, e.g. <code>$ firejail --apparmor firefox</code>
</li>
<li>Use a custom profile and add the <code>apparmor</code> command.</li>
<li>Enable Apparmor globally in <code>/etc/firejail/globals.local</code> and disable as needed through the use of <code>ignore apparmor</code> in <code>/etc/firejail/<i>ProgramName</i>.local</code>.</li>
</ul>
<p>Note that enabling AppArmor by above methods <b>always</b> means that <code>/etc/apparmor.d/firejail-default</code> is used. If you rather want to use a <i>specific</i> AppArmor profile for an application, you have to use the above mentioned <code>ignore apparmor</code> command. However, that is <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/wiki/Frequently-Asked-Questions#how-does-it-compare-with-apparmor">not recommended</a>, as using both Firejail and AppArmor for the same applications often creates problems.
</p>
<h3><span class="mw-headline" id="Verifying_Firejail_is_being_used">Verifying Firejail is being used</span></h3>
<pre>$ firejail --list
</pre>
<p>A more comprehensive output is produced by
</p>
<pre>$ firejail --tree
</pre>
<h2><span class="mw-headline" id="Creating_custom_profiles">Creating custom profiles</span></h2>
<h3><span class="mw-headline" id="Whitelists_and_blacklists">Whitelists and blacklists</span></h3>
<p><b>Blacklists</b> are heavily used in various <code>/etc/firejail/*.inc</code> files which are included in most profiles. Blacklists are permissive:
</p>
<ul>
<li>Deny access to a directory or file and permit everything else: <code>blacklist &lt;directory/file&gt;</code>
</li>
<li>Disable/undo/ignore blacklisting a directory or file already blacklisted, e.g., in an <i>*.inc</i> file: <code>noblacklist &lt;directory/file&gt;</code>
</li>
</ul>
<p>The order in which they appear in a profile is important: <i>noblacklist</i> directives must be added <b>above</b> <i>blacklist</i> directives.
</p>
<p><b>Whitelists</b> block everything what is not <i>explicitly</i> whitelisted. They should not be used in profiles for applications that need access to random locations (e.g., text editors, image viewers/editors).  
</p>
<ul>
<li>Allow access to a directory or file and forbid everything else: <code>whitelist &lt;directory/file&gt;</code>
</li>
<li>Disable/undo/ignore whitelisting a directory or file already whitelisted, e.g., in an <i>*.inc</i> file: <code>nowhitelist &lt;directory/file&gt;</code>
</li>
</ul>
<p>The order in which they appear in a profile is important: <i>nowhitelist</i> directives must be added <b>above</b> <i>whitelist</i> directives.
</p>
<p>Whitelisting is always done before blacklisting. As mentioned, a <i>whitelist</i> directive blacklists everything else. A <i>blacklist</i> directive is therefore a fallback if there are no <i>whitelist</i> directives or if a <i>whitelist</i> directive is too permissive.
</p>
<p><i>(no)blacklist</i> and <i>(no)whitelist</i> directives are often used in combination. Example: <code>/etc/firejail/disable-programs.inc</code> (which is included in all profiles) contains the directive:
</p>
<pre>blacklist ${HOME}/.mozilla
</pre>
<p>in order to block access to that directory for all applications sandboxed by Firejail. <code>/etc/firejail/firefox.profile</code> must disable this directive <b>and</b> must add a <i>whitelist</i> directive to allow access to that directory (as the Firefox profile is a whitelisted profile):
</p>
<pre>noblacklist ${HOME}/.mozilla
whitelist ${HOME}/.mozilla
</pre>
<h3><span class="mw-headline" id="Profile_writing">Profile writing</span></h3>
<p>The basic process is:
</p>
<ol>
<li>Copy <code>/usr/share/doc/firejail/profile.template</code> to <code>/etc/firejail/</code> or <code>~/.config/firejail/</code> and rename it to <code><i>ProfileName</i>.profile</code> where <i>ProfileName</i> should match the name of the executable to be sandboxed</li>
<li>Change the line <code>include PROFILE.local</code> to <code>include ProfileName.local</code>
</li>
<li>Gradually comment/uncomment the various options while checking at each stage that the application runs inside the new sandbox. Do not change the order of the sections in that template.</li>
<li>Detailed explanations of the possible options for a Firejail profile can be found in the <span class="plainlinks archwiki-template-man" title="$ man 5 firejail-profile"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/firejail-profile.5">firejail-profile(5)</a></span> man page</li>
<li>Test the profile for security holes, see <a href="#Testing_profiles">#Testing profiles</a>
</li>
</ol>
<p>If you want to create a whitelisted profile (i.e. a profile which contains <i>whitelist</i> directives), you can <a rel="nofollow" class="external text" href="https://firejail.wordpress.com/documentation-2/building-custom-profiles/#whitelisted">build a whitelist</a> of permitted locations by executing
</p>
<pre>$ firejail --build <i>application</i>
</pre>
<p>Keep in mind that a whitelisted profile is problematic for applications that need to access random locations (like text editors or file managers). 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The idea is to be as restrictive as possible, while still maintaining usability. This may involve sacrificing potentially dangerous functionality and a change in cavalier work habits.</li>
<li>By default, seccomp filters work on a blacklist (which can be found in <code>/usr/share/doc/firejail/syscalls.txt</code>). It is possible to use <code>seccomp.keep</code> to build a custom whitelist of filters for an application. <a rel="nofollow" class="external autonumber" href="https://firejail.wordpress.com/documentation-2/seccomp-guide/">[2]</a>. A convenient way to automate these steps is to execute <code>/usr/lib/firejail/syscalls.sh</code>. If the application is still broken because of missing syscalls, you should follow the instructions at the bottom of <code>/usr/share/doc/firejail/syscalls.txt</code>.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Persistent_local_customisation">Persistent local customisation</span></h4>
<p>The standard profile layout includes the capability to make persistent local customisations through the inclusion of <code>.local</code> files<a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/wiki/Creating-overrides">[3]</a>. Basically, each officially supported profile contains the lines <code>include ProgramName.local</code> and <code>include globals.local</code>. These <i>*.local</i> files might be located in <code>/etc/firejail/</code> or in <code>~/.config/firejail/</code>. Since the order of precedence is determined by which is read first, this makes for a very powerful way of making local customisations.
For example, with reference <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/issues/1510#issuecomment-326443650">this firejail question</a>, to globally enable Apparmor and disable Internet connectivity, one could simply create/edit <code>/etc/firejail/globals.local</code> to include the lines
</p>
<pre># enable Apparmor and disable Internet globally
net none
apparmor
</pre>
<p>Then, to allow, for example, "curl" to connect to the internet, yet still maintain its apparmor confinement, one would create/edit <code>/etc/firejail/curl.local</code> to include the lines.
</p>
<pre># enable internet for curl
ignore net
</pre>
<p>Since <code>curl.local</code> is read before <code>globals.local</code>, <code>ignore net</code> overrides <code>net none</code>, and, as a bonus, the above changes would be persistent across future updates.
</p>
<h3><span class="mw-headline" id="Testing_profiles">Testing profiles</span></h3>
<p>In order to test and audit a Firejail profile, you may find the following to be useful:
</p>
<ol>
<li>
<code>firejail --debug $Program &gt; $PathToOutputFile</code> Gives a detailed breakdown of the sandbox</li>
<li>
<code>firejail --debug-blacklists $Program</code> and <code>firejail --debug-whitelists $Program</code> show the blacklisted and whitelisted directories and files for the current profile.</li>
<li>
<code>firejail --debug-caps</code> gives a list of caps supported by the current Firejail software build. This is useful when building a <a rel="nofollow" class="external text" href="https://l3net.wordpress.com/2015/03/16/firejail-linux-capabilities-guide/">caps whitelist</a>.</li>
<li>
<code>firejail --help</code> for a full list of <code>--debug</code> options</li>
<li>
<code>firemon PID</code> monitors the running process. See <code>firemon --help</code> for details</li>
<li>Executing <code>sudo jailcheck</code> tests running sandboxes. See the <span class="plainlinks archwiki-template-man" title="$ man 1 jailcheck"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/jailcheck.1">jailcheck(1)</a></span> man page for details.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=checksec">checksec</a></span> may also be useful in testing which standard security features are being used</li>
</ol>
<h2><span class="mw-headline" id="Firejail_with_Xorg">Firejail with Xorg</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Why does sandboxing X11 require DNS? (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Firejail.html">Talk:Firejail</a>)</div>
</div> 
<p>On <a href="../en/Xorg.html" title="Xorg">Xorg</a> any program can listen to all keyboard input and record all screens. The purpose of sandboxing X11 is to restrict this behavior, which is especially problematic for complex programs working with potentially malicious input like browsers.
</p>
<p><a href="../en/Xephyr.html" title="Xephyr">Xephyr</a> and <a href="../en/Xpra.html" title="Xpra">Xpra</a> allow you to sandbox Xorg. Although Xpra provides full clipboard support, it is recommended to use Xephyr due to the very notable and permanent lag with nested X11 sessions.
</p>
<p>For a complete setup with (not ideal) clipboard support (clipboard is still always shared), see <a href="https://wiki.gentoo.org/wiki/User:Sakaki/Sakaki%27s_EFI_Install_Guide/Sandboxing_the_Firefox_Browser_with_Firejail#Graphical_Isolation_via_Xephyr" class="extiw" title="gentoo:User:Sakaki/Sakaki's EFI Install Guide/Sandboxing the Firefox Browser with Firejail">Sakaki's Gentoo guide</a>, especially the <a href="https://wiki.gentoo.org/wiki/User:Sakaki/Sakaki%27s_EFI_Install_Guide/Sandboxing_the_Firefox_Browser_with_Firejail#Setting_Up_Clipboard_Sharing_and_Display_Rescaling_for_Xephyr" class="extiw" title="gentoo:User:Sakaki/Sakaki's EFI Install Guide/Sandboxing the Firefox Browser with Firejail">section about the clipboard and automatic rescaling</a>.
</p>
<p>Alternatively, if clipboard support is not needed but windows need to be managed, install a standalone <a href="../en/Window_manager.html" title="Window manager">window manager</a> such as <a href="../en/Openbox.html" title="Openbox">Openbox</a>.
</p>
<p><code>xephyr-screen <i>Width</i>x<i>Height</i></code> can be set in <code>/etc/firejail/firejail.config</code> where <code><i>Width</i></code> and <code><i>Height</i></code> are in pixels and based on your screen resolution.
</p>
<p>To open the sandbox:
</p>
<pre>$ firejail --x11=xephyr --net=<i>device</i> openbox
</pre>
<p><code><i>device</i></code> is your active <a href="../en/Network_configuration.html#Network_interfaces" class="mw-redirect" title="Network interface">network interface</a>, which is needed to ensure that DNS works. Then right click and select your applications to run.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you use <a href="../en/Unbound.html" title="Unbound">Unbound</a>, <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a>, <a href="../en/Pdnsd.html" title="Pdnsd">Pdnsd</a> or any other local resolver on 127.0.0.1, you would leave <code>--net=<i>device</i></code> out of the command as DNS should work automatically.</div>
<p>See the <a rel="nofollow" class="external text" href="https://firejail.wordpress.com/documentation-2/x11-guide/#configurexephyr">Firejail Wordpress site</a> for a simpler guide.
</p>
<p>According to the guide:
</p>
<dl><dd>The sandbox replaces the regular X11 server with Xpra or Xephyr server. This prevents X11 keyboard loggers and screenshot utilities from accessing the main X11 server.</dd></dl>
<p>Note that the statement:
</p>
<dl><dd>The only way to disable the abstract socket <code>@/tmp/.X11-unix/X0</code> is by using a network namespace. If for any reasons you cannot use a network namespace, the abstract socket will still be visible inside the sandbox. Hackers can attach keylogger and screenshot programs to this socket.</dd></dl>
<p>is incorrect, <a href="../en/Xinit.html#xserverrc" title="Xinit">xserverrc</a> can be edited to <code>-nolisten local</code>, which disables the abstract sockets of X11 and helps isolate it.
</p>
<h3><span class="mw-headline" id="Sandboxing_a_browser">Sandboxing a browser</span></h3>
<p><a href="../en/Openbox.html" title="Openbox">Openbox</a> can be configured to start a certain browser at startup. <code><i>program</i>.profile</code> is the respective profile contained in <code>/etc/firejail</code>, and <code>--startup "<i>command</i>"</code> is the command line used to start the program. For example, to start Chromium in the sandbox:
</p>
<pre>$ firejail --x11=xephyr --profile=/etc/firejail/chromium.profile openbox --startup "chromium"
</pre>
<p>You can control the size of the screen with the parameter:
</p>
<pre>--xephyr-screen=400x250
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Hardening_Firejail">Hardening Firejail</span></h3>
<p>The security risk of Firejail being a SUID executable can be mitigated by adding the line
</p>
<pre>force-nonewprivs yes
</pre>
<p>to <code>/etc/firejail/firejail.config</code>. However, this can break specific applications. On Arch Linux, VirtualBox doesn't start anymore. With the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-hardened">linux-hardened</a></span> kernel Wireshark and Chromium-based browsers are also affected.
</p>
<p>Further hardening measures include creating a special firejail group with adding the user to that group and changing the file mode for the firejail executable. For details see <a rel="nofollow" class="external text" href="https://firejail.wordpress.com/documentation-2/basic-usage/#suid">here</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> you can add a pacman hook to automatically change firejail owner and mode:
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/firejail-permissions.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Install
Operation = Upgrade
Type = Package
Target = firejail
[Action]
Depends = coreutils
Depends = bash
When = PostTransaction
Exec = /usr/bin/sh -c "chown root:firejail /usr/bin/firejail &amp;&amp; chmod 4750 /usr/bin/firejail"
Description = Setting /usr/bin/firejail owner to "root:firejail" and mode "4750"</pre>
<p>Make sure to create the <code>firejail</code> group and add your user to it.
</p>
</div>
<h3><span class="mw-headline" id="Paths_containing_spaces">Paths containing spaces</span></h3>
<p>If you need to reference, whitelist, or blacklist a directory within a custom profile, such as with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/palemoon/">palemoon</a></span><sup><small>AUR</small></sup>, you must do so using the absolute path, without encapsulation or escapes:
</p>
<pre>/home/user/.moonchild productions
</pre>
<h3><span class="mw-headline" id="Private_mode">Private mode</span></h3>
<p>Firejail also includes a one time private mode, in which no mounts are made in the chroots to your home directory. In doing this, you can execute applications without performing any changes to disk. For example, to execute okular in private mode, do the following:
</p>
<pre>$ firejail --seccomp --private okular
</pre>
<h3><span class="mw-headline" id="Experimental_improved_tools">Experimental improved tools</span></h3>
<p>Some of the Firejail developers recognized issues with the tools it ships with and made their own, improved versions of them.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> As stated in some of the projects descriptions, these tools might be experimental.</div>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://github.com/rusty-snake/firecfg.py">firecfg.py</a>, an improved version of <code>firecfg</code>.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/rusty-snake/fjp">fjp</a>, a tool to interact with Firejail profiles.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/rusty-snake/fireurl">fireurl</a>, Fixing the firejail URL open issue.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/glitsj16/firejail-handler-http">firejail-handler-http</a>, which helps with opening HTTP(S) links properly when sandboxing applications.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/glitsj16/firejail-handler-extra">firejail-handler-extra</a>, like above but handles other protocols.</li>
</ul>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>Firejail can be hard to debug. The symptoms of a misconfigured or otherwise unfitting setup range from random segmentation faults and hangs in the applications to simple error messages.
</p>
<p>Some applications are harder to sandbox than others. For example <a href="../en/List_of_applications/Internet.html#Web_browsers" class="mw-redirect" title="Web browsers">web browsers</a> and <a href="../en/Electron.html" title="Electron">Electron</a> applications tend to need more troubleshooting than others since there is much that can go wrong. It is crucial to check the <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/wiki/Frequently-Asked-Questions">FAQ</a> and <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/issues">open issues</a> first, since debugging can take quite some time.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Also see the <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/wiki">upstream wiki</a>, <a rel="nofollow" class="external text" href="https://debugging.works/blog/debugging-firejail/">this blog post</a> and especially its page on <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/wiki/Debugging-Firejail">debugging Firejail</a>.</div>
<h3><span class="mw-headline" id="Remove_Firejail_symbolic_links">Remove Firejail symbolic links</span></h3>
<p>To remove Firejail created symbolic links (e.g. reset to default):
</p>
<pre># firecfg --clean
</pre>
<p>If you do not want to use Firejail for a specific application (e.g., because you prefer to rather confine it with AppArmor), you have to manually remove the related symbolic link:
</p>
<pre># rm /usr/local/bin/<i>application</i>
</pre>
<p>As a subsequent execution of <i>firecfg</i> would re-add the removed symlinks, the respective applications should be commented in <code>/etc/firejail/firecfg.config</code>.
</p>
<p>Verify if any leftovers of <a href="../en/Desktop_entries.html" title="Desktop entries">Desktop entries</a> are still overruled by Firejail.
</p>
<h3><span class="mw-headline" id="PulseAudio">PulseAudio</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Using PulseAudio version 9.0 or later should fix this issue.</div>
<p>If Firejail causes <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> issues with sandboxed applications <a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/wiki/Frequently-Asked-Questions#pulseaudio-7080-issue">[4]</a>, the following command may be used:
</p>
<pre>$ firecfg --fix-sound
</pre>
<p>This commands creates a custom <code>~/.config/pulse/client.conf</code> file for the <i>current</i> user with <code>enable-shm = no</code> and possible other workarounds.
</p>
<h3><span class="mw-headline" id="hidepid">hidepid</span></h3>
<p>If the system uses the <a href="../en/Security.html#hidepid" class="mw-redirect" title="Hidepid">hidepid</a> <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>, Firemon can only be run as root. This, among other things, will cause problems with the Firetools GUI incorrectly reporting "Capabilities", "Protocols" and the status of "Seccomp"<a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/issues/1564">[5]</a>.
</p>
<h3><span class="mw-headline" id="Proprietary_Nvidia_drivers">Proprietary Nvidia drivers</span></h3>
<p>Some users report problems when using Firejail and proprietary graphic drivers from <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> (e.g. <a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/issues/1753">[6]</a>, <a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/issues/879">[7]</a> or <a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/issues/841">[8]</a>). This can often be solved by disabling the <code>noroot</code> Firejail option in the application's profile file.
</p>
<h3>
<span id="--net_options_and_Linux_kernel_.3E.3D4.20.0"></span><span class="mw-headline" id="--net_options_and_Linux_kernel_&gt;=4.20.0">--net options and Linux kernel &gt;=4.20.0</span>
</h3>
<p>There is a bug on firejail 0.5.96 with linux &gt;= 4.20.0, see <a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/issues/2314">[9]</a> and <a rel="nofollow" class="external autonumber" href="https://github.com/netblue30/firejail/pull/2327">[10]</a>
</p>
<p>Example error message:
</p>
<pre>$ firejail --noprofile --net=eth0 ls
Parent pid 8521, child pid 8522
Error send: arp.c:182 arp_check: Invalid argument
Error: proc 8521 cannot sync with peer: unexpected EOF
Peer 8522 unexpectedly exited with status 1
</pre>
<h3><span class="mw-headline" id="Warning:_Cannot_confine_the_application_using_AppArmor">Warning: Cannot confine the application using AppArmor</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="#Enable_AppArmor_support">#Enable AppArmor support</a>.</b></p>
<div>
<b>Notes:</b> The requirement to enable AppArmor should be made explicit in the previous text. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Firejail.html">Talk:Firejail</a>)</div>
</div>
<p>For some applications (e.g. <a href="../en/Firefox.html" title="Firefox">Firefox</a>) starting with Firejail may result in warnings like:
</p>
<pre>Warning: Cannot confine the application using AppArmor.
Maybe firejail-default AppArmor profile is not loaded into the kernel.
As root, run "aa-enforce firejail-default" to load it.
</pre>
<p>When running the suggested command you might see:
</p>
<pre>ERROR: Cache read/write disabled: interface file missing. (Kernel needs AppArmor 2.4 compatibility patch.)
</pre>
<p>This means that <a href="../en/AppArmor.html" title="AppArmor">AppArmor</a> is not enabled as a kernel parameter, so you have to set it according to <a href="../en/AppArmor.html#Installation" title="AppArmor">AppArmor#Installation</a>.
</p>
<h3>
<span id=".2Fusr.2Fbin.2Fpatch:_.2A.2A.2A.2A_Can.27t_open_patch_file"></span><span class="mw-headline" id="/usr/bin/patch:_****_Can't_open_patch_file">/usr/bin/patch: **** Can't open patch file</span>
</h3>
<p>This means the <code>PKGBUILD</code> uses <code>patch</code> with the <code>-i</code> argument so a whitelist for <code>$SRCDEST</code> in <code>/etc/makepkg.conf</code> is needed.
</p>
<p>Create <a href="#Persistent_local_customisation">the override</a> <code>patch.local</code> with the value of your <code>$SRCDEST</code>:
</p>
<pre>whitelist <i>/path/to/makepkg/sources</i>
</pre>
<p>Changing the <code>PKGBUILD</code> to use <code>stdin</code> also works:
</p>
<pre>patch -p1 &lt; ../<i>file.patch</i>
</pre>
<h3>
<span id="Daemonizing.2Fbackgrounded_processes_hang"></span><span class="mw-headline" id="Daemonizing/backgrounded_processes_hang">Daemonizing/backgrounded processes hang</span>
</h3>
<p>There is a <a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail/issues/3491">known issue</a> that prevents processes from daemonizing. There is currently no solution to this except not using Firejail to sandbox the affected application. Because it is a bug within Firejail, no configuration can solve this issue. Fortunately the applications mentioned in the issue usually do not have a large attack surface, so the risks of running them without a sandbox are comparatively low.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/netblue30/firejail">Firejail GitHub project page</a></li>
<li>
<a rel="nofollow" class="external text" href="https://wiki.gentoo.org/wiki/User:Sakaki/Sakaki%27s_EFI_Install_Guide/Sandboxing_the_Firefox_Browser_with_Firejail">Sakaki's EFI Install Guide/Sandboxing the Firefox Browser with Firejail</a> An step by step guide to isolate firefox</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Sandboxing.html" title="Category:Sandboxing">Sandboxing</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Firejail&amp;oldid=792280">https://wiki.archlinux.org/index.php?title=Firejail&amp;oldid=792280</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 11 November 2023, at 09:58.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
