<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>river - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-River rootpage-River skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Starting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Starting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Starting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Starting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Starting subsection</span>
			</button>
		
		<ul id="toc-Starting-sublist" class="vector-toc-list">
			<li id="toc-Manually" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Manually">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Manually</span>
				</div>
			</a>
			
			<ul id="toc-Manually-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-From_TTY" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#From_TTY">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>From TTY</span>
				</div>
			</a>
			
			<ul id="toc-From_TTY-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Display_manager" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Display_manager">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Display manager</span>
				</div>
			</a>
			
			<ul id="toc-Display_manager-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Keyboard_layout" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Keyboard_layout">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Keyboard layout</span>
				</div>
			</a>
			
			<ul id="toc-Keyboard_layout-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Touchpad_examples" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Touchpad_examples">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Touchpad examples</span>
				</div>
			</a>
			
			<ul id="toc-Touchpad_examples-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Window_rules" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Window_rules">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Window rules</span>
				</div>
			</a>
			
			<ul id="toc-Window_rules-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Usage</span>
			</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Autostart" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Autostart">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Autostart</span>
				</div>
			</a>
			
			<ul id="toc-Autostart-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Scratchpads" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Scratchpads">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Scratchpads</span>
				</div>
			</a>
			
			<ul id="toc-Scratchpads-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Modes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Modes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Modes</span>
				</div>
			</a>
			
			<ul id="toc-Modes-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-External_tools" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#External_tools">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>External tools</span>
				</div>
			</a>
			
			<ul id="toc-External_tools-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Screencasting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screencasting">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>Screencasting</span>
				</div>
			</a>
			
			<ul id="toc-Screencasting-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">river</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/River" title="River – 日本語" lang="ja" hreflang="ja" data-title="River" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
<a rel="nofollow" class="external text" href="https://codeberg.org/river">river</a> is a wlroots-based Wayland dynamic tiling compositor, inspired by, but not based on dwm, xmonad and bspwm. Configuration is by an external executable file.
</p>
<p>Its declared design goals are:
</p>
<ul>
<li>Simple and predictable behavior, river should be easy to use and have a low cognitive load.</li>
<li>Window management based on a stack of views and tags.</li>
<li>Dynamic layouts generated by external, user-written executables. A default rivertile layout generator is provided.</li>
<li>Scriptable configuration and control through a custom Wayland protocol and separate riverctl binary implementing it.</li>
</ul>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>River is <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">installed</a> with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=river">river</a></span> package or AUR git package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/river-git/">river-git</a></span><sup><small>AUR</small></sup>.
</p>
<h2><span class="mw-headline" id="Starting">Starting</span></h2>
<p>A single executable file is used as a configuration file. No initialisation file is set up for the user by default, so no keybindings or default applications are available until an init file is created. Note that this includes the exit keybinding, so set up in tty or another desktop environment before running river.
</p>
<p>An example config init file is available in <code>/usr/share/river/example/</code>.
Copy this as <code>~/.config/river/init</code> and ensure it is <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>.
</p>
<h3><span class="mw-headline" id="Manually">Manually</span></h3>
<p>Enter <code>river</code> (exits to tty with user still logged in) or <code>exec river</code> (more securely exits to tty with user logged out)
</p>
<h3><span class="mw-headline" id="From_TTY">From TTY</span></h3>
<p>River can be autostarted in a similar manner to <i>startx</i>, by setting up the environment variable checks in <code>.bash_profile</code> or the equivalent file for other shells. See <a href="../en/Xinit.html#Autostart_X_at_login" title="Xinit">Xinit#Autostart X at login</a>, replacing <code>$DISPLAY</code> with <code>$WAYLAND_DISPLAY</code>, and running <code>exec river</code>.
</p>
<h3><span class="mw-headline" id="Display_manager">Display manager</span></h3>
<p>River does not officially support display managers but many will work with no or minimal effort. A session entry is installed by default in <code>/usr/share/wayland-sessions/</code>.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>The configuration file can be a shell script or executable program, comprising a list of <i>riverctl</i> individual commands which define key bindings, input settings and window rules. It is executed once at start-up but can be re-run like any other shell script (consider the effects of duplicating any autostarted spawned actions). 
Each setting can also be run individually by simply running the relevant riverctl line in a terminal. This allows temporary override of the init settings, dynamic updates and testing new settings.
</p>
<p>For example, to map the shortcut <code>Super+PrtSc</code> to take a screenshot with the application <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=grim">grim</a></span> and display a temporary <a href="../en/Desktop_notifications.html" class="mw-redirect" title="Desktop notification">desktop notification</a>:
</p>
<pre>riverctl map normal Super Print spawn "grim &amp;&amp; notify-send -t 2000 'Screenshot taken'"
</pre>
<p>The <i>spawn</i> command can launch any application or script but expects a single word argument. Quote any longer expressions.
</p>
<h3><span class="mw-headline" id="Keyboard_layout">Keyboard layout</span></h3>
<pre>riverctl keyboard-layout gb
</pre>
<p>Multiple layouts can be entered as a comma-separated list, e.g. <code>gb,fr</code>.
</p>
<p>Variables and other shell constructs can be used: <code>mod='Mod4'</code>, <code>set term foot</code>, etc, as per your shell.
</p>
<h3><span class="mw-headline" id="Touchpad_examples">Touchpad examples</span></h3>
<p>Certain touchpad behaviour and focus preferences are available.
</p>
<pre>riverctl input pointer-2-7-SynPS/2_Synaptics_TouchPad tap enabled
riverctl focus-follows-cursor normal
</pre>
<p>Exact keyboard, mouse and touchpad models for use in these settings can be identified using:
</p>
<pre>riverctl list-inputs
</pre>
<h3><span class="mw-headline" id="Window_rules">Window rules</span></h3>
<p>It is sometimes desirable to set certain windows to be non-tiling by default. Floating windows can be defined by class or title:
</p>
<pre>riverctl float-filter-add app-id 'galculator'
riverctl float-filter-add title 'File Operation Progress'
</pre>
<p>Note that new rule-add settings will be introduced for River 0.3 and this syntax will change to fit these broader definitions:
</p>
<pre>riverctl rule-add -app-id 'galculator' float
</pre>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<h3><span class="mw-headline" id="Autostart">Autostart</span></h3>
<p>Use <code>riverctl spawn</code> without a keybinding to launch any executable at startup, for example: 
</p>
<pre>riverctl spawn "i3-battery-popup -n -m 'Battery Low!'"
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Scratchpads">Scratchpads</span></h3>
<p>River does not define any scratchpads by default, but these can be set up on any tag beyond the default 0-9. First, define the tag number, then the key mapping to move an application to the scratchpad tag and toggle its appearance, and, finally, prevent new windows being assigned to the scratchpad.
</p>
<pre>scratch_tag=$((1 &lt;&lt; 20 ))

riverctl map normal Super P toggle-focused-tags ${scratch_tag}		# toggle the scratchpad
riverctl map normal Super+Shift P set-view-tags ${scratch_tag}		# send windows to the scratchpad

# Set spawn tagmask to ensure new windows do not have the scratchpad tag unless explicitly set.
all_but_scratch_tag=$(( ((1 &lt;&lt; 32) - 1) ^ $scratch_tag ))
riverctl spawn-tagmask ${all_but_scratch_tag}
</pre>
<h3><span class="mw-headline" id="Modes">Modes</span></h3>
<p>River supports modes for key mapping, which allows for reuse of mappings, and combinations of fewer keys. There are two default modes of 'normal' and 'locked' (defining allowed key mappings when the screen is locked).
Custom modes can be added. Eg. if floating windows are rarely used, the key mapping to manipulate those windows can be defined in a 'float' mode. Entry and exit key mappings for the mode are set as the first and last mappings, with other mapping between these.
</p>
<pre>riverctl declare-mode float
riverctl map normal Super R enter-mode float		# Super+R to enter float mode
 
### Floating window mappings but note that these also apply to tiled windows.
#
# Super {Arrows} to move views
  riverctl map float Super Left move left 100
  riverctl map float Super Down move down 100
  riverctl map float Super Up move up 100
  riverctl map float Super Right move right 100
 
# Alt+{arrows} to snap views to screen edges
  riverctl map float Alt Left snap left
  riverctl map float Alt Down snap down
  riverctl map float Alt Up snap up
  riverctl map float Alt Right snap right
 
# Shift+{arrows} to resize views
  riverctl map float Shift Left resize horizontal -100
  riverctl map float Shift Down resize vertical 100
  riverctl map float Shift Up resize vertical -100
  riverctl map float Shift Right resize horizontal 100
 
riverctl map float None Escape enter-mode normal	# Escape to exit float mode and return to normal mode
</pre>
<p>Note that floating window modifiers also work on tiled windows, making them floating and giving potentially unpredictable layouts.
</p>
<h3><span class="mw-headline" id="External_tools">External tools</span></h3>
<p>In common with many other Wayland minimalist tiling clients, other tools are not included. Example external bars, screenshot tools, launchers, etc. are listed in the <a rel="nofollow" class="external text" href="https://codeberg.org/river/wiki">River wiki</a>, including several with River-specific functionality.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Screencasting">Screencasting</span></h3>
<p>If Screencasting is not working with river, check if the needed <a href="../en/Environment_variables.html" title="Environment variables">environment variables</a> are properly set for systemd:
</p>
<pre>$ systemctl --user show-environment
</pre>
<p>You should find something like:
</p>
<pre>WAYLAND_DISPLAY=wayland-1
XDG_CURRENT_DESKTOP=river
</pre>
<p>If any of these variables are not set, you may add this to your <code>.config/river/init</code>:
</p>
<pre>systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=river
systemctl --user restart xdg-desktop-portal
</pre>
<p>If you need further troubleshooting, try to:
</p>
<ul><li>Make sure <a href="../en/XDG_Desktop_Portal.html" title="XDG Desktop Portal">XDG Desktop Portal</a> services are running:</li></ul>
<pre>$ systemctl --user status xdg-desktop-portal.service
$ systemctl --user status xdg-desktop-portal-wlr.service
</pre>
<ul><li>Stop the <code>xdg-desktop-portal.service</code> and run it manually to see if it works:</li></ul>
<pre>$ systemctl --user stop xdg-desktop-portal
$ XDG_CURRENT_DESKTOP=river /usr/lib/xdg-desktop-portal
</pre>
<ul><li>Test it using <a rel="nofollow" class="external text" href="https://mozilla.github.io/webrtc-landing/gum_test.html">Mozilla WebRTC test</a>
</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<p>Contrary to what you may find in older posts in the internet, it is not necessary to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-media-session">pipewire-media-session</a></span>, since <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span> is working just fine now.
</p>
</div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://codeberg.org/river/river/">River Codeberg repository</a></li>
<li><a rel="nofollow" class="external text" href="https://codeberg.org/river/wiki/">River wiki</a></li>
<li><a rel="nofollow" class="external text" href="https://leon_plickat.srht.site/writing/river-setup-guide/article.html">Developer set-up blog post</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Wayland_compositors.html" title="Category:Wayland compositors">Wayland compositors</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=River&amp;oldid=827272">https://wiki.archlinux.org/index.php?title=River&amp;oldid=827272</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 17 February 2025, at 18:01.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
