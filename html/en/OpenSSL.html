<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>OpenSSL - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OpenSSL rootpage-OpenSSL skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-req_section" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#req_section">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>req section</span>
				</div>
			</a>
			
			<ul id="toc-req_section-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Usage</span>
			</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Generate_a_Curve25519_private_key" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Generate_a_Curve25519_private_key">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Generate a Curve25519 private key</span>
				</div>
			</a>
			
			<ul id="toc-Generate_a_Curve25519_private_key-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_an_ECDSA_private_key" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Generate_an_ECDSA_private_key">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Generate an ECDSA private key</span>
				</div>
			</a>
			
			<ul id="toc-Generate_an_ECDSA_private_key-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_an_RSA_private_key" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Generate_an_RSA_private_key">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Generate an RSA private key</span>
				</div>
			</a>
			
			<ul id="toc-Generate_an_RSA_private_key-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_a_certificate_signing_request" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Generate_a_certificate_signing_request">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Generate a certificate signing request</span>
				</div>
			</a>
			
			<ul id="toc-Generate_a_certificate_signing_request-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Show_a_certificate_signing_request" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Show_a_certificate_signing_request">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Show a certificate signing request</span>
				</div>
			</a>
			
			<ul id="toc-Show_a_certificate_signing_request-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_a_self-signed_certificate" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Generate_a_self-signed_certificate">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>Generate a self-signed certificate</span>
				</div>
			</a>
			
			<ul id="toc-Generate_a_self-signed_certificate-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_a_self-signed_certificate_with_private_key_in_a_single_command" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Generate_a_self-signed_certificate_with_private_key_in_a_single_command">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7</span>
					<span>Generate a self-signed certificate with private key in a single command</span>
				</div>
			</a>
			
			<ul id="toc-Generate_a_self-signed_certificate_with_private_key_in_a_single_command-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sign_a_certificate_signing_request_with_a_CA_certificate" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sign_a_certificate_signing_request_with_a_CA_certificate">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.8</span>
					<span>Sign a certificate signing request with a CA certificate</span>
				</div>
			</a>
			
			<ul id="toc-Sign_a_certificate_signing_request_with_a_CA_certificate-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_Diffie–Hellman_parameters" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Generate_Diffie%E2%80%93Hellman_parameters">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.9</span>
					<span>Generate Diffie–Hellman parameters</span>
				</div>
			</a>
			
			<ul id="toc-Generate_Diffie–Hellman_parameters-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Show_certificate_information" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Show_certificate_information">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.10</span>
					<span>Show certificate information</span>
				</div>
			</a>
			
			<ul id="toc-Show_certificate_information-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Show_certificate_fingerprint" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Show_certificate_fingerprint">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.11</span>
					<span>Show certificate fingerprint</span>
				</div>
			</a>
			
			<ul id="toc-Show_certificate_fingerprint-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Convert_certificate_format" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Convert_certificate_format">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.12</span>
					<span>Convert certificate format</span>
				</div>
			</a>
			
			<ul id="toc-Convert_certificate_format-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_third-party_providers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Use_third-party_providers">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.13</span>
					<span>Use third-party providers</span>
				</div>
			</a>
			
			<ul id="toc-Use_third-party_providers-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id='toc-"bad_decrypt"_while_decrypting' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"bad_decrypt"_while_decrypting'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>"bad decrypt" while decrypting</span>
				</div>
			</a>
			
			<ul id='toc-"bad_decrypt"_while_decrypting-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Python_3.10_and_"ca_md_too_weak"_errors' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Python_3.10_and_"ca_md_too_weak"_errors'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Python 3.10 and "ca md too weak" errors</span>
				</div>
			</a>
			
			<ul id='toc-Python_3.10_and_"ca_md_too_weak"_errors-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error_setting_cipher_XXX" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Error_setting_cipher_XXX">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Error setting cipher XXX</span>
				</div>
			</a>
			
			<ul id="toc-Error_setting_cipher_XXX-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">OpenSSL</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/OpenSSL" title="OpenSSL – 日本語" lang="ja" hreflang="ja" data-title="OpenSSL" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/OpenSSL" title="OpenSSL – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="OpenSSL" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Transport_Layer_Security.html" title="Transport Layer Security">Transport Layer Security</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.openssl.org">OpenSSL</a> is an open-source implementation of the SSL and <a href="../en/Transport_Layer_Security.html" class="mw-redirect" title="TLS">TLS</a> protocols, designed to be as flexible as possible. It is supported on a variety of platforms, including BSD, Linux, OpenVMS, Solaris and Windows.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssl">openssl</a></span> is installed by default on Arch Linux (as a dependency of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=coreutils">coreutils</a></span>).
</p>
<p>There are various OpenSSL library bindings available for developers:
</p>
<ul>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-pyopenssl">python-pyopenssl</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perl-net-ssleay">perl-net-ssleay</a></span></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua-sec">lua-sec</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua52-sec">lua52-sec</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua51-sec">lua51-sec</a></span>
</li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=haskell-hsopenssl">haskell-hsopenssl</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=haskell-openssl-streams">haskell-openssl-streams</a></span></li>
</ul>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>On Arch Linux the <code>OPENSSLDIR</code> is <code>/etc/ssl</code>.
</p>
<p>The OpenSSL configuration file, conventionally placed in <code>/etc/ssl/openssl.cnf</code>, may appear complicated at first. Remember that variables may be expanded in assignments, much like how shell scripts work. For a thorough explanation of the configuration file format, see <span class="plainlinks archwiki-template-man" title="$ man 5ssl config"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/config.5ssl">config(5ssl)</a></span>.
</p>
<h3><span class="mw-headline" id="req_section">req section</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="#Generate_a_certificate_signing_request">#Generate a certificate signing request</a>.</b></p>
<div>
<b>Notes:</b> Same topic. (Discuss in <a href="../en/Talk:OpenSSL.html#Plan" title="Talk:OpenSSL">Talk:OpenSSL#Plan</a>)</div>
</div>
<p>Settings related to generating keys, requests and self-signed certificates.
</p>
<p>The req section is responsible for the DN prompts. A general misconception is the <i>Common Name</i> (CN) prompt, which suggests that it should have the user's proper name as a value. End-user certificates need to have the <b>machine hostname</b> as CN, whereas CA should <i>not</i> have a valid TLD, so that there is no chance that, between the possible combinations of certified end-users' CN and the CA certificate's, there is a match that could be misinterpreted by some software as meaning that the end-user certificate is self-signed. Some CA certificates do not even have a CN, such as <a rel="nofollow" class="external text" href="https://www.equifax.com">Equifax</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ openssl x509 -subject -noout &lt; /etc/ssl/certs/Equifax_Secure_CA.pem</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">subject= /C=US/O=Equifax/OU=Equifax Secure Certificate Authority</pre>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>This sections assumes you have read <a href="../en/Transport_Layer_Security.html#Obtaining_a_certificate" title="Transport Layer Security">Transport Layer Security#Obtaining a certificate</a>.
</p>
<h3><span class="mw-headline" id="Generate_a_Curve25519_private_key">Generate a Curve25519 private key</span></h3>
<pre>$ openssl genpkey -algorithm x25519 -out <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Generate_an_ECDSA_private_key">Generate an ECDSA private key</span></h3>
<pre>$ openssl genpkey -algorithm EC -pkeyopt ec_paramgen_curve:P-256 -out <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Generate_an_RSA_private_key">Generate an RSA private key</span></h3>
<p>With <span class="plainlinks archwiki-template-man" title="$ man 1ssl openssl-genpkey"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/openssl-genpkey.1ssl">openssl-genpkey(1ssl)</a></span>, which supersedes <i>genrsa</i> according to <span class="plainlinks archwiki-template-man" title="$ man 1ssl openssl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/openssl.1ssl">openssl(1ssl)</a></span>:
</p>
<pre>$ openssl genpkey -algorithm RSA -pkeyopt rsa_keygen_bits:<i>keysize</i> -out <i>filename</i>
</pre>
<p>If an encrypted key is desired, use the <code>-aes-256-cbc</code> option.
</p>
<h3><span class="mw-headline" id="Generate_a_certificate_signing_request">Generate a certificate signing request</span></h3>
<p>Use <span class="plainlinks archwiki-template-man" title="$ man 1ssl openssl-req"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/openssl-req.1ssl">openssl-req(1ssl)</a></span>:
</p>
<pre>$ openssl req -new -sha256 -key <i>private_key</i> -out <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Show_a_certificate_signing_request">Show a certificate signing request</span></h3>
<p>Certificate signing requests are stored in an encoded format. To view the request in human readable format:
</p>
<pre>$ openssl req -noout -text -in <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Generate_a_self-signed_certificate">Generate a self-signed certificate</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> This produces a certificate for the (root) Certificate Authority, which you are acting as. Most web browsers do not seem to accept CA certificates, deeming it necessary to request another certificate and sign it with the CA cert and CA key. The "Generate a certificate issued by own CA" procedure in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1776753#p1776753">this forum post</a> is what seems to satisfy browsers. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:OpenSSL.html">Talk:OpenSSL</a>)</div>
</div>
<pre>$ openssl req -key <i>private_key</i> -x509 -new -days <i>days</i> -out <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Generate_a_self-signed_certificate_with_private_key_in_a_single_command">Generate a self-signed certificate with private key in a single command</span></h3>
<p>You can combine the above command in OpenSSL into a single command which might be convenient in some cases. 
</p>
<p>ECDSA:
</p>
<pre>$ openssl req -x509 -newkey ec -pkeyopt 'ec_paramgen_curve:P-256' -days <i>days</i> -keyout <i>key_filename</i> -out <i>cert_filename</i>
</pre>
<p>RSA:
</p>
<pre>$ openssl req -x509 -newkey rsa:4096 -days <i>days</i> -keyout <i>key_filename</i> -out <i>cert_filename</i>
</pre>
<h3><span class="mw-headline" id="Sign_a_certificate_signing_request_with_a_CA_certificate">Sign a certificate signing request with a CA certificate</span></h3>
<pre>$ openssl x509 -req -in <i>cert_req_filename</i> -days <i>days</i> -CA <i>CA_cert</i> -CAkey <i>CA_cert_private_key</i> -CAserial <i>CA_cert_serial_file</i> -out <i>cert_out</i>
</pre>
<h3>
<span id="Generate_Diffie.E2.80.93Hellman_parameters"></span><span class="mw-headline" id="Generate_Diffie–Hellman_parameters">Generate Diffie–Hellman parameters</span>
</h3>
<p>See <a href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange" class="extiw" title="wikipedia:Diffie–Hellman key exchange">Diffie–Hellman key exchange</a> for more information.
</p>
<p>Current <a href="https://wiki.mozilla.org/Security/Server_Side_TLS" class="extiw" title="mozillawiki:Security/Server Side TLS">best practice</a> is to use one of the standard DH groups from <a href="https://tools.ietf.org/html/rfc7919" class="extiw" title="rfc:7919">RFC:7919</a>, eg. <a rel="nofollow" class="external text" href="https://ssl-config.mozilla.org/ffdhe2048.txt">ffdhe2048</a>.
</p>
<p>Alternatively you can generate a random group of your own:
</p>
<pre>$ openssl dhparam -out <i>filename</i> <i>2048</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To speed up generating, especially when not on high-end hardware, add the <code>-dsaparam</code> option <a rel="nofollow" class="external autonumber" href="https://security.stackexchange.com/questions/95178/diffie-hellman-parameters-still-calculating-after-24-hours/95184#95184">[1]</a>.</div>
<h3><span class="mw-headline" id="Show_certificate_information">Show certificate information</span></h3>
<pre>$ openssl x509 -text -in <i>cert_filename</i>
</pre>
<h3><span class="mw-headline" id="Show_certificate_fingerprint">Show certificate fingerprint</span></h3>
<pre>$ openssl x509 -noout -in <i>cert_filename</i> -fingerprint <i>-digest</i>
</pre>
<p><code><i>-digest</i></code> is optional and one of <code>-md5</code>, <code>-sha1</code>, <code>-sha256</code>, or <code>-sha512</code>. See "-digest" in <span class="plainlinks archwiki-template-man" title="$ man 1ssl x509"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/x509.1ssl#Input,_Output,_and_General_Purpose_Options">x509(1ssl) § Input, Output, and General Purpose Options</a></span> for when the digest is unspecified.
</p>
<h3><span class="mw-headline" id="Convert_certificate_format">Convert certificate format</span></h3>
<p>Use <code>openssl x509</code> to convert certificates from binary (DER) format to PEM format (the text format with <code>BEGIN CERTIFICATE</code> headers)：
</p>
<pre>$ openssl x509 -inform DER -in <i>myCA</i>.crt -out <i>myCA_pem</i>.crt
</pre>
<h3><span class="mw-headline" id="Use_third-party_providers">Use third-party providers</span></h3>
<p>OpenSSL 3 introduced providers as a new concept for OpenSSL plugability. It is possible to use algorithms not included in OpenSSL without having to recompile it. For example, to test the <a rel="nofollow" class="external text" href="https://csrc.nist.gov/projects/post-quantum-cryptography">NIST Post-Quantum Cryptography</a> algorithms, you can install the <a rel="nofollow" class="external text" href="https://openquantumsafe.org/">Open Quantum Safe</a> provider <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/oqsprovider/">oqsprovider</a></span><sup><small>AUR</small></sup>. As an example, you can generate a quantum-safe self-signed certificate with private key using one of the variants of <a rel="nofollow" class="external text" href="https://csrc.nist.gov/pubs/fips/204/ipd">ML-DSA</a> (formerly <a rel="nofollow" class="external text" href="https://pq-crystals.org/dilithium/index.shtml">CRYSTALS-Dilithium</a>):
</p>
<pre>$ openssl req -provider default -provider oqsprovider -x509 -newkey mldsa65 -days <i>days</i> -keyout <i>key</i> -out <i>cert</i>
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id=".22bad_decrypt.22_while_decrypting"></span><span class="mw-headline" id='"bad_decrypt"_while_decrypting'>"bad decrypt" while decrypting</span>
</h3>
<p>OpenSSL 1.1.0 changed the default digest algorithm for the dgst and enc commands from MD5 to SHA256. <a rel="nofollow" class="external autonumber" href="https://www.openssl.org/news/changelog.html#x6">[2]</a>
</p>
<p>Therefore if a file has been encrypted using OpenSSL 1.0.2 or older, trying to decrypt it with an up to date version may result in an error like:
</p>
<pre>error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:crypto/evp/evp_enc.c:540
</pre>
<p>Supplying the <code>-md md5</code> option should solve the issue:
</p>
<pre>$ openssl enc -d -md md5 -in encrypted -out decrypted
</pre>
<h3>
<span id="Python_3.10_and_.22ca_md_too_weak.22_errors"></span><span class="mw-headline" id='Python_3.10_and_"ca_md_too_weak"_errors'>Python 3.10 and "ca md too weak" errors</span>
</h3>
<p>In Python 3.10 by default there is a hardcoded list of allowed OpenSSL ciphers. Some of the less secure, like MD5, have been disabled at the <code>ssl</code> module level, ignoring the system-wide configuration of OpenSSL. It results sometimes in strange errors on older certificates, sometimes even when establishing <code>https</code> connections, like:
</p>
<pre>requests.exceptions.SSLError: HTTPSConnectionPool(host='a.kind.of.example.com', port=443): Max retries exceeded with url: / (Caused by SSLError(SSLError(398, '[SSL: CA_MD_TOO_WEAK] ca md too weak (_ssl.c:3862)')))
</pre>
<p>To make Python follow the system configuration, you may have to rebuild it, adding <code>--with-ssl-default-suites=openssl</code> parameter to <code>./configure</code>. The issue has been also reported as <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/73549">FS#73549</a>.
</p>
<h3><span class="mw-headline" id="Error_setting_cipher_XXX">Error setting cipher XXX</span></h3>
<p>If you try to use a "retired" cipher, you'll get an error of this type:
</p>
<pre>$ openssl bf -d -in cipher_file -K passphrase
Error setting cipher BF-CBC
4087A97A8A7F0000:error:0308010C:digital envelope routines:inner_evp_generic_fetch:unsupported:crypto/evp/evp_fetch.c:341:Global default library context, Algorithm (BF-CBC : 12)
</pre>
<p>Since OpenSSL 3.0, crypto algorithms are supplied through "providers". Oldest or least used algorithms belong to the legacy provider. <a rel="nofollow" class="external autonumber" href="https://www.openssl.org/docs/man3.0/man7/OSSL_PROVIDER-legacy.html">[3]</a>
</p>
<p>If you need to use retired algorithms like DES, RC4, Blowfish, etc., you must add the option <code>-provider legacy</code> in your command line.
</p>
<p>Here is a complete example for decoding a Blowfish cipher.
</p>
<pre>$ openssl bf -d -in cipher_file -provider legacy -provider default -K passphrase
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a href="https://en.wikipedia.org/wiki/OpenSSL" class="extiw" title="wikipedia:OpenSSL">Wikipedia page</a> on OpenSSL, with background information.</li>
<li>
<a rel="nofollow" class="external text" href="https://www.openssl.org">OpenSSL</a> project page.</li>
<li><a rel="nofollow" class="external text" href="https://www.freebsd.org/doc/en/books/handbook/openssl.html">FreeBSD Handbook</a></li>
<li><a rel="nofollow" class="external text" href="https://www.akadia.com/services/ssh_test_certificate.html">Step-by-step guide to create a signed SSL certificate</a></li>
<li>
<a rel="nofollow" class="external text" href="https://jamielinux.com/docs/openssl-certificate-authority/">OpenSSL Certificate Authority</a>: A guide demonstrating how to act as your own certificate authority.</li>
<li>
<a rel="nofollow" class="external text" href="https://www.feistyduck.com/books/bulletproof-ssl-and-tls/bulletproof-ssl-and-tls-introduction.pdf">Bulletproof SSL and TLS</a> by Ivan Ristić, a more formal introduction to SSL/TLS</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Transport_Layer_Security.html" title="Category:Transport Layer Security">Transport Layer Security</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=OpenSSL&amp;oldid=822288">https://wiki.archlinux.org/index.php?title=OpenSSL&amp;oldid=822288</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 6 December 2024, at 12:49.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
