<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>AMD Radeon Instinct MI25 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-AMD_Radeon_Instinct_MI25 rootpage-AMD_Radeon_Instinct_MI25 skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-BIOS_and_cooling" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#BIOS_and_cooling">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>BIOS and cooling</div>
		</a>
		
			<button aria-controls="toc-BIOS_and_cooling-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle BIOS and cooling subsection</span>
			</button>
		
		<ul id="toc-BIOS_and_cooling-sublist" class="vector-toc-list">
			<li id="toc-Hardware_flashing_with_a_Raspberry_Pi" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hardware_flashing_with_a_Raspberry_Pi">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Hardware flashing with a Raspberry Pi</div>
			</a>
			
			<ul id="toc-Hardware_flashing_with_a_Raspberry_Pi-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cooling" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cooling">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Cooling</div>
			</a>
			
			<ul id="toc-Cooling-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-ROCm" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#ROCm">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>ROCm</div>
		</a>
		
			<button aria-controls="toc-ROCm-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle ROCm subsection</span>
			</button>
		
		<ul id="toc-ROCm-sublist" class="vector-toc-list">
			<li id="toc-OpenCL" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OpenCL">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>OpenCL</div>
			</a>
			
			<ul id="toc-OpenCL-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-GPGPU_accelerated_software" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#GPGPU_accelerated_software">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>GPGPU accelerated software</div>
		</a>
		
			<button aria-controls="toc-GPGPU_accelerated_software-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle GPGPU accelerated software subsection</span>
			</button>
		
		<ul id="toc-GPGPU_accelerated_software-sublist" class="vector-toc-list">
			<li id="toc-AUTOMATIC1111s_Stable_Diffusion_web_UI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#AUTOMATIC1111s_Stable_Diffusion_web_UI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>AUTOMATIC1111s Stable Diffusion web UI</div>
			</a>
			
			<ul id="toc-AUTOMATIC1111s_Stable_Diffusion_web_UI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-BitCrack" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#BitCrack">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>BitCrack</div>
			</a>
			
			<ul id="toc-BitCrack-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ollama" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ollama">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Ollama</div>
			</a>
			
			<ul id="toc-Ollama-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PyTorch" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PyTorch">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>PyTorch</div>
			</a>
			
			<ul id="toc-PyTorch-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tensorflow" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tensorflow">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Tensorflow</div>
			</a>
			
			<ul id="toc-Tensorflow-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">AMD Radeon Instinct MI25</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/AMD_Radeon_Instinct_MI25" title="AMD Radeon Instinct MI25 – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/GPGPU.html" title="GPGPU">GPGPU</a></li>
<li><a href="../en/AMDGPU.html" title="AMDGPU">AMDGPU</a></li>
</ul>
</div>
<p>This page describes the steps necessary to perform <a href="../en/GPGPU.html" title="GPGPU">GPGPU</a> on the AMD Radeon Instinct MI25 (and other gfx900 vega10 GPU's).
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="BIOS_and_cooling">BIOS and cooling</span></h2>
<p>The MI25 is a power hungry, passively cooled accelerator card that often exhibits incompatibility with consumer level hardware and has no video out by default. To remedy this, we can flash a WX9100 BIOS to the MI25, which lowers the power limit from 220W to 170W, enables the Mini DisplayPort hidden behind the PCIe bracket, enables the fan header to be used for active cooling, and allows consumer equipment to boot with the MI25 attached if it would not before.
</p>
<p>Depending on your situation, you may be able to <a rel="nofollow" class="external text" href="https://forum.level1techs.com/t/mi25-stable-diffusions-100-hidden-beast">flash the BIOS from within the operating system</a> using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdvbflash/">amdvbflash</a></span><sup><small>AUR</small></sup> if you can boot successfully and keep it cool. Alternatively, the BIOS can be flashed quite easily in hardware without the risk of overheating.
</p>
<p>The recommended and most widely tested WX9100 BIOS can be <a rel="nofollow" class="external text" href="https://www.techpowerup.com/vgabios/218718/amd-wx9100-16384-171219">downloaded here</a>.
</p>
<h3><span class="mw-headline" id="Hardware_flashing_with_a_Raspberry_Pi">Hardware flashing with a Raspberry Pi</span></h3>
<p>The BIOS chip is located under the backplate and can be flashed with a SOP8 test clip and a Raspberry Pi using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=flashrom">flashrom</a></span>. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Keep in mind that using a test clip provides a less than ideal connection, so it is important to take multiple dumps and compare them before and after flashing, and although in theory we could use a faster spi speed such as 32768, in practice user reports success using 8192. Feel free to adjust this value as needed.</div>
<p>Firstly, we need to connect the MI25 BIOS chip and clip to the Raspberry Pi GPIO pins <a rel="nofollow" class="external text" href="https://libreboot.org/docs/install/spi.html#gpio-pins-on-raspberry-pi-rpi-40-pin">according to this diagram here</a>. Once we have carefully connected everything and have the Raspberry Pi booted, use the following command to see if the flash is detected.
</p>
<pre># flashrom -p linux_spi:dev=/dev/spidev0.0,spispeed=8192
</pre>
<p>Once the flash has been successfully detected, we must backup the original BIOS before we flash the new one. This serves two purposes, it provides us with a backup to restore to, and confirms that we have a good connection to the BIOS flash chip.
</p>
<pre># flashrom -p linux_spi:dev=/dev/spidev0.0,spispeed=8192 -r mi25-dump1.rom
</pre>
<pre># flashrom -p linux_spi:dev=/dev/spidev0.0,spispeed=8192 -r mi25-dump2.rom
</pre>
<pre>$ sha1sum mi25-dump*.rom
</pre>
<p>If the checksums match, then we are good to go. If not, try reseating the clip and try again until you get consistent dumps.
</p>
<p>You may have noticed that the WX9100 BIOS is 256KiB, while the MI25 BIOS is 1MiB. To remedy this, we create a 768KiB file consisting of zero bytes and append it to the end of our WX9100 BIOS, <code>218718.rom</code>.
</p>
<pre>$ truncate -s +768KiB pad.bin
</pre>
<pre>$ cat 218718.rom pad.bin &gt; 218718-padded.rom
</pre>
<p>After that, we can flash the freshly padded BIOS to the MI25.
</p>
<pre># flashrom -p linux_spi:dev=/dev/spidev0.0,spispeed=8192 -w 218718-padded.rom -V
</pre>
<p>Flashrom should verify a successful flash, but feel free to take another BIOS dump and compare checksums to <code>218718-padded.rom</code>.
</p>
<h3><span class="mw-headline" id="Cooling">Cooling</span></h3>
<p>The MI25 has a JST-PH 4-pin fan header that actually works under the WX9100 BIOS. Simply purchase a cheap KK254 4-pin (regular 4 pin computer fan) to JST-PH 4-pin (MI25 fan header) adaptor cable. If you shop around, you can find a cheap adapter that lets you power two 4 pin fans from the MI25 (try searching for "Graphics Card Fan Adapter Cable"). To install the adapter cable, the shroud needs to be taken off, and the cable can be routed out through the gap next to the power connector.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> While the cooling shroud is off, it is recommended to replace the thermal paste while you are there.</div>
<p>Since the MI25 comes passively cooled, some sort of ducting is required to redirect airflow through the heatsink. <a rel="nofollow" class="external text" href="https://www.thingiverse.com/thing:6636428">3D printing one of these cooling shrouds</a>, depending on which fan you decide to use, is quite a nice option, although a homemade solution would also suffice.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Since the MI25 is designed to be in a server rack with high airflow, point a second fan at the components on the back of the MI25 if airflow does not already exist there.</div>
<h2><span class="mw-headline" id="ROCm">ROCm</span></h2>
<p>The MI25 (and other gfx900 GPUs) are deprecated and official support has ended. They were officially supported under ROCm 4, unofficially supported under ROCm 5, and unsupported under ROCm 6. So to install the latest working ROCm stack for gfx900, we first look at the <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/rocm-hip-sdk/-/blob/5.7.1-2/.SRCINFO">dependencies of rocm-hip-sdk version 5.7.1-2</a> and <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/miopen-hip/-/blob/5.7.1-1/.SRCINFO">miopen-hip version 5.7.1-1</a>.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Installing Arch Linux packages from the archive will not work with the rest of the Arch Linux system. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:AMD_Radeon_Instinct_MI25.html">Talk:AMD Radeon Instinct MI25</a>)</div>
</div>
<table class="wikitable">
<tbody>
<tr>
<th>Level</th>
<th>Dependencies
</th>
</tr>
<tr>
<td>Package</td>
<td>rocm-hip-sdk
</td>
</tr>
<tr>
<td>Direct dependencies</td>
<td>rocm-hip-sdk rocm-core rocm-hip-libraries rocm-llvm rocm-hip-runtime hipblas hipcub hipfft hipsparse hipsolver miopen-hip rccl rocalution rocblas rocfft rocprim rocrand rocsolver rocsparse rocthrust
</td>
</tr>
<tr>
<td>Secondary dependencies</td>
<td>composable-kernel hip-runtime-amd rocm-clang-ocl rocm-cmake rocm-language-runtime rocminfo
</td>
</tr>
<tr>
<td>Tertiary dependencies</td>
<td>comgr hsa-rocr rocm-smi-lib hsakmt-roct rocm-device-libs rocm-opencl-runtime
</td>
</tr>
<tr>
<td>Optional dependencies</td>
<td>rocm-ml-libraries rocm-ml-sdk rocm-opencl-sdk
</td>
</tr>
</tbody>
</table>
<p>To install ROCm 5.7.1 from the <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">Arch Linux Archive</a>, we make use of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/downgrade/">downgrade</a></span><sup><small>AUR</small></sup> script to select our desired package versions and obtain a functional ROCm environment.
</p>
<pre># downgrade rocm-hip-sdk rocm-core rocm-hip-libraries rocm-llvm rocm-hip-runtime hipblas hipcub hipfft hipsparse hipsolver miopen-hip rccl rocalution rocblas rocfft rocprim rocrand rocsolver rocsparse rocthrust composable-kernel hip-runtime-amd rocm-clang-ocl rocm-cmake rocm-language-runtime rocminfo comgr hsa-rocr rocm-smi-lib hsakmt-roct rocm-device-libs rocm-opencl-runtime rocm-ml-libraries rocm-ml-sdk rocm-opencl-sdk
</pre>
<p>See the <a rel="nofollow" class="external text" href="https://github.com/rocm-arch/rocm-arch">for Arch Linux repository</a> for more information about the remaining ROCm packages.
</p>
<h3><span class="mw-headline" id="OpenCL">OpenCL</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/opencl-amd/">opencl-amd</a></span><sup><small>AUR</small></sup> is functional, however it is incompatible with the ROCm 5.7.1 stack we have just installed.
</p>
<p>The recommended method to obtain a performant, functional OpenCL sdk and runtime alongside ROCm, is by installing ROCm 5.7.1 and all of its dependencies listed above.
</p>
<h2><span class="mw-headline" id="GPGPU_accelerated_software">GPGPU accelerated software</span></h2>
<p>The purpose of this section is to list GPGPU accelerated software and how to run them on gfx900 GPUs.
</p>
<h3><span class="mw-headline" id="AUTOMATIC1111s_Stable_Diffusion_web_UI">AUTOMATIC1111s Stable Diffusion web UI</span></h3>
<p>A web interface for Stable Diffusion, implemented using Gradio library.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/stable-diffusion-web-ui-git/">stable-diffusion-web-ui-git</a></span><sup><small>AUR</small></sup> can be used with a little manual configuration after installation. See <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/stable-diffusion-web-ui-git#comment-970228">rabcors comment</a> on the AUR to get it working.
</p>
<h3><span class="mw-headline" id="BitCrack">BitCrack</span></h3>
<p>A tool for brute-forcing Bitcoin private keys.
</p>
<ul><li>Clone repository.</li></ul>
<pre>$ git clone <a rel="nofollow" class="external free" href="https://github.com/brichard19/BitCrack.git">https://github.com/brichard19/BitCrack.git</a>
</pre>
<ul><li>Change directory and build for OpenCL.</li></ul>
<pre>$ cd BitCrack &amp;&amp; make BUILD_OPENCL=1
</pre>
<ul><li>Run <code>clBitCrack</code>.</li></ul>
<pre>$ ./bin/clBitCrack 1FshYsUh3mqgsG29XpZ23eLjWV8Ur3VwH 15JhYXn6Mx3oF4Y7PcTAv2wVVAuCFFQNiP 19EEC52krRUK1RkUAEZmQdjTyHT7Gp1TYT
</pre>
<h3><span class="mw-headline" id="Ollama">Ollama</span></h3>
<p>Get up and running with large language models.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Installing Arch Linux packages from the archive will not work with the rest of the Arch Linux system. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:AMD_Radeon_Instinct_MI25.html">Talk:AMD Radeon Instinct MI25</a>)</div>
</div>
<p>The latest version of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ollama">ollama</a></span> to support ROCm 5.7 is 0.1.28. However, ollama 0.1.28 from the <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">Arch Linux Archive</a> is compiled without gfx900 support, so we must:
</p>
<ul><li>Downgrade ollama.</li></ul>
<pre># downgrade ollama==0.1.28
</pre>
<ul><li>Clone repository.</li></ul>
<pre>$ git clone <a rel="nofollow" class="external free" href="https://github.com/ollama/ollama.git">https://github.com/ollama/ollama.git</a>
</pre>
<ul><li>Change directory and checkout <a rel="nofollow" class="external text" href="https://github.com/ollama/ollama/tree/v0.1.28">version 0.1.28</a>
</li></ul>
<pre>$ cd ollama &amp;&amp; git checkout 21347e1
</pre>
<ul><li>Build for gfx900.</li></ul>
<pre>$ AMDGPU_TARGETS=gfx900 go generate ./... &amp;&amp; go build .
</pre>
<ul><li>Replace <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ollama">ollama</a></span>s executable with our freshly compiled binary</li></ul>
<pre># mv ./ollama /usr/bin/ollama
</pre>
<ul>
<li>Start <code>ollama.service</code>.</li>
<li>Perform inference.</li>
</ul>
<pre>$ ollama run tinyllama
</pre>
<h3><span class="mw-headline" id="PyTorch">PyTorch</span></h3>
<p>Pytorch v2.2.2 is the latest release that supports ROCm 5.7, and can be installed via <code>pip</code> within a <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python311/">python311</a></span><sup><small>AUR</small></sup> <code>virtual environment</code>.
</p>
<pre>(venv)$ pip install torch==2.2.2 torchvision==0.17.2 torchaudio==2.2.2 --index-url <a rel="nofollow" class="external free" href="https://download.pytorch.org/whl/rocm5.7">https://download.pytorch.org/whl/rocm5.7</a>
</pre>
<h3><span class="mw-headline" id="Tensorflow">Tensorflow</span></h3>
<p>Tensorflow 2.13.0.570 is the latest ROCm 5.7 compatible release, and can be installed via <code>pip</code> within a <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python311/">python311</a></span><sup><small>AUR</small></sup> <code>virtual environment</code>.
</p>
<pre>(venv)$ pip install tensorflow-rocm==2.13.0.570
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When installing jupyterlab, the latest ipython kernel has a dependency conflict with tensorflow 2.13.0.570. Simply install ipython 8.23.0 alongside tensorflow and jupyterlab to continue using the latest jupyterlab.</div>
<pre>(venv)$ pip install tensorflow-rocm==2.13.0.570 jupyterlab ipython==8.23.0
</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:Hardware.html" title="Category:Hardware">Hardware</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=AMD_Radeon_Instinct_MI25&amp;oldid=811936">https://wiki.archlinux.org/index.php?title=AMD_Radeon_Instinct_MI25&amp;oldid=811936</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 5 July 2024, at 06:02.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
