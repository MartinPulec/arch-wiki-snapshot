<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>acpid - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Acpid rootpage-Acpid skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Determine_the_event" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Determine_the_event">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Determine the event</span>
				</div>
			</a>
			
			<ul id="toc-Determine_the_event-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Define_event_action" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Define_event_action">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Define event action</span>
				</div>
			</a>
			
			<ul id="toc-Define_event_action-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alternative_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Alternative_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Alternative configuration</span>
				</div>
			</a>
			
			<ul id="toc-Alternative_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Example_events" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Example_events">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Example events</span>
				</div>
			</a>
			
			<ul id="toc-Example_events-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enabling_volume_control" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enabling_volume_control">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Enabling volume control</span>
				</div>
			</a>
			
			<ul id="toc-Enabling_volume_control-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enabling_backlight_control" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enabling_backlight_control">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Enabling backlight control</span>
				</div>
			</a>
			
			<ul id="toc-Enabling_backlight_control-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enabling_Wi-Fi_toggle" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enabling_Wi-Fi_toggle">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Enabling Wi-Fi toggle</span>
				</div>
			</a>
			
			<ul id="toc-Enabling_Wi-Fi_toggle-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disabling_ordinary_key_events" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disabling_ordinary_key_events">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Disabling ordinary key events</span>
				</div>
			</a>
			
			<ul id="toc-Disabling_ordinary_key_events-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Getting_user_name_of_the_current_display" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Getting_user_name_of_the_current_display">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>Getting user name of the current display</span>
				</div>
			</a>
			
			<ul id="toc-Getting_user_name_of_the_current_display-sublist" class="vector-toc-list">
				<li id="toc-Connect_to_acpid_socket" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Connect_to_acpid_socket">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6.1</span>
					<span>Connect to acpid socket</span>
				</div>
			</a>
			
			<ul id="toc-Connect_to_acpid_socket-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Disable_keyboard_and_touchpad_while_laptop_lid_is_closed_under_Wayland" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_keyboard_and_touchpad_while_laptop_lid_is_closed_under_Wayland">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7</span>
					<span>Disable keyboard and touchpad while laptop lid is closed under Wayland</span>
				</div>
			</a>
			
			<ul id="toc-Disable_keyboard_and_touchpad_while_laptop_lid_is_closed_under_Wayland-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">acpid</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Acpid.html" title="Acpid – español" lang="es" hreflang="es" data-title="Acpid" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Acpid" title="Acpid – 日本語" lang="ja" hreflang="ja" data-title="Acpid" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Acpid.html" title="Acpid – русский" lang="ru" hreflang="ru" data-title="Acpid" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Acpid" title="Acpid – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Acpid" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/ACPI_modules.html" title="ACPI modules">ACPI modules</a></li>
<li><a href="../en/DSDT.html" title="DSDT">DSDT</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://acpid2.sourceforge.net/">acpid2</a> is a flexible and extensible daemon for delivering <a href="../en/ACPI_modules.html" title="ACPI modules">ACPI events</a>. When an event occurs, it executes programs to handle the event. These events are triggered by certain actions, such as:
</p>
<ul>
<li>Pressing special keys, including the Power/Sleep/Suspend button</li>
<li>Closing a notebook lid</li>
<li>(Un)Plugging an AC power adapter from a notebook</li>
<li>(Un)Plugging phone jack etc.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="../en/Desktop_environment.html" class="mw-redirect" title="Desktop environments">Desktop environments</a>, such as <a href="../en/GNOME.html" title="GNOME">GNOME</a>, <a href="../en/Power_management.html#ACPI_events" title="Power management">systemd</a> login manager, and some <a href="../en/Keyboard_input.html" title="Keyboard input">extra key handling</a> daemons may implement their own event handling schemes, independent of acpid. Running more than one system at the same time may lead to unexpected behaviour, such as suspending two times in a row after one sleep button press. You should be aware of this and only activate desirable handlers.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpid">acpid</a></span> package. Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>acpid.service</code>.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpid">acpid</a></span> comes with a number of predefined actions for triggered events, such as what should happen when you press the Power button on your machine. By default, these actions are defined in <code>/etc/acpi/handler.sh</code>, which is executed after any ACPI events are detected (as determined by <code>/etc/acpi/events/anything</code>).
</p>
<h3><span class="mw-headline" id="Determine_the_event">Determine the event</span></h3>
<p>Unfortunately, not every computer labels ACPI events in the same way.  For example, the Sleep button may be identified on one machine as <i>SLPB</i> and on another as <i>SBTN</i>.
</p>
<p>To determine how your buttons or <code>Fn</code> shortcuts are recognized, run the following command:
</p>
<pre># journalctl -f
</pre>
<p>Now press the Power button and/or Sleep button (e.g. <code>Fn+Esc</code>) on your machine. The result should look something this:
</p>
<pre>logger: ACPI action undefined: PBTN
logger: ACPI action undefined: SBTN
</pre>
<p>If that does not work, run:
</p>
<pre># acpi_listen
</pre>
<p>or with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openbsd-netcat">openbsd-netcat</a></span>:
</p>
<pre>$ netcat -U /var/run/acpid.socket
</pre>
<p>Then press the power button and you will see something like this:
</p>
<pre>button/power PBTN 00000000 00000b31
</pre>
<p>The output of <code>acpi_listen</code> is sent to <code>/etc/acpi/handler.sh</code> as $1, $2 , $3 &amp; $4 parameters.
Example:
</p>
<pre>$1 button/power
$2 PBTN
$3 00000000
$4 00000b31
</pre>
<h3><span class="mw-headline" id="Define_event_action">Define event action</span></h3>
<p>The following is a brief example of one such action. In this case, when the Sleep button is pressed, acpid runs the command <code>echo -n mem &gt;/sys/power/state</code> which <i>should</i> place the computer into a sleep (suspend) state:
</p>
<pre>button/sleep)
    case "$2" in
        SLPB) echo -n mem &gt;/sys/power/state ;;
        *)    logger "ACPI action undefined: $2" ;;
    esac
    ;;
</pre>
<p>The event may be different on different machines. For example if Sleep button is actually recognized as <i>SBTN</i>, rather than the <i>SLPB</i> label specified in the default <code>/etc/acpi/handler.sh</code>. In order for Sleep function to work properly on this machine, we would need to replace <i>SLPB)</i> with <i>SBTN)</i>.
</p>
<p>Using this information as a base, you can easily customize the <code>/etc/acpi/handler.sh</code> file to execute a variety of commands depending on which event is triggered.  See the <a href="#Tips_and_tricks">#Tips and tricks</a> section below for other commonly used commands.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Events such as <code>button/power</code>, <code>button/lid</code>, <code>button/suspend</code> and <code>button/hibernate</code> are handled by <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-logind.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-logind.service.8">systemd-logind.service(8)</a></span> by default, see <a href="../en/Power_management.html#ACPI_events" title="Power management">Power management#ACPI events</a>. If handling these events with <i>acpid</i>, the handling of these events by logind should either be disabled first, or inhibited.</div>
<h3><span class="mw-headline" id="Alternative_configuration">Alternative configuration</span></h3>
<p>By default, all ACPI events are passed through the <code>/etc/acpi/handler.sh</code> script. This is due to the ruleset outlined in <code>/etc/acpi/events/anything</code>:
</p>
<pre># Pass all events to our one handler script
event=.*
action=/etc/acpi/handler.sh %e
</pre>
<p>While this works just fine as it is, some users may prefer to define event rules and actions in their own self-contained scripts. The following is an example of how to use an individual event file and corresponding action script:
</p>
<p>As root, create the following files:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/events/sleep-button</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">event=button/sleep.*
action=/etc/acpi/actions/sleep-button.sh %e</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/actions/sleep-button.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
case "$3" in
    SLPB) echo -n mem &gt;/sys/power/state ;;
    *)    logger "ACPI action undefined: $3" ;;
esac</pre>
<p>Make the script <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>, and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reload">reload</a> the <code>acpid.service</code> to get acpid to recognize the changes to these files.
</p>
<p>Using this method, it is easy to create any number of individual event/action scripts.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some of the actions described here, such as Wi-Fi toggle and backlight control, may already be managed directly by driver. You should consult documentation of corresponding kernel modules, when this is the case.</div>
<h3><span class="mw-headline" id="Example_events">Example events</span></h3>
<p>The following are examples of events that can be used in the <code>/etc/acpi/handler.sh</code> script. These examples should be modified so that they apply your specific environment e.g. changing the event variable names interpreted by <code>acpi_listen</code>.
</p>
<p>To set the laptop screen brightness when plugged in power or not (the numbers might need to be adjusted, see <code>/sys/class/backlight/acpi_video0/max_brightness</code>):
</p>
<pre>ac_adapter)
    case "$2" in
        AC*|AD*)
            case "$4" in
                00000000)
                    echo -n 50 &gt; /sys/class/backlight/acpi_video0/brightness
                    ;;
                00000001)
                    echo -n 100 &gt; /sys/class/backlight/acpi_video0/brightness
                    ;;
            esac
</pre>
<h3><span class="mw-headline" id="Enabling_volume_control">Enabling volume control</span></h3>
<p>Find out the acpi identity of the volume buttons (see above) and substitute it for the acpi events in the files below.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/events/vol-d</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">event=button/volumedown
action=amixer set Master 5-</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/events/vol-m</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">event=button/mute
action=amixer set Master toggle</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/events/vol-u</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">event=button/volumeup
action=amixer set Master 5+</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> These commands may not work as expected with PulseAudio. <a rel="nofollow" class="external autonumber" href="https://lists.freedesktop.org/archives/pulseaudio-discuss/2015-December/025062.html">[1]</a> For full functionality, run commands as the current user while specifying the <code>XDG_RUNTIME_DIR</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a>, for example with:
<pre># sudo -u <i>user</i> XDG_RUNTIME_DIR=/run/user/<i>user_id</i> pactl</pre>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Disable or bind the volume buttons in Xorg to prevent conflicts with other applications. See <a href="../en/Xmodmap.html" title="Xmodmap">Xmodmap</a> for details.</div>
<p>See also <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20150711044207/http://blog.lastlog.de/posts/fixing_volume_change_in_linux">[2]</a>.
</p>
<h3><span class="mw-headline" id="Enabling_backlight_control">Enabling backlight control</span></h3>
<p>Similar to volume control, acpid also enables you to control screen backlight. To achieve this you write some handler, like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/handlers/bl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
bl_dev=/sys/class/backlight/acpi_video0
step=1

case $1 in
  -) echo $(($(&lt; $bl_dev/brightness) - $step)) &gt;$bl_dev/brightness;;
  +) echo $(($(&lt; $bl_dev/brightness) + $step)) &gt;$bl_dev/brightness;;
esac</pre>
<p>The event in acpi_listen should be something like:
</p>
<pre>video/brightnessdown BRTDN 00000087 00000000
video/brightnessup BRTUP 00000086 00000000
</pre>
<p>Connect them to ACPI events:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/events/bl_d</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">event=video/brightnessdown.*
action=/etc/acpi/handlers/bl -</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/events/bl_u</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">event=video/brightnessup.*
action=/etc/acpi/handlers/bl +</pre>
<h3><span class="mw-headline" id="Enabling_Wi-Fi_toggle">Enabling Wi-Fi toggle</span></h3>
<p>You can also create a simple wireless-power switch by pressing the WLAN button. Example of event:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/events/wlan</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">event=button/wlan
action=/etc/acpi/handlers/wlan</pre>
<p>and its handler:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/handlers/wlan</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
rf=/sys/class/rfkill/rfkill0

case $(&lt; $rf/state) in
  0) echo 1 &gt;$rf/state;;
  1) echo 0 &gt;$rf/state;;
esac</pre>
<h3><span class="mw-headline" id="Disabling_ordinary_key_events">Disabling ordinary key events</span></h3>
<p>Since <a rel="nofollow" class="external text" href="https://sourceforge.net/p/acpid2/code/ci/b336c96e32c959ed3df15eaf5669f47ea589d977/">b336c96</a> acpid generates events for some ordinary key presses, such as arrow keys. This results in event/handler spam, visible in system logs or <i>top</i>. Events for these buttons can be dropped in the configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/acpi/events/buttons</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">event=button/(up|down|left|right|kpenter)
action=&lt;drop&gt;</pre>
<h3><span class="mw-headline" id="Getting_user_name_of_the_current_display">Getting user name of the current display</span></h3>
<p>To run commands depending on <a href="../en/Xorg.html" title="Xorg">Xorg</a>, defining the X display as well as the MIT magic cookie file (via XAUTHORITY) is required. Latter is a security credential providing read and write access to the X server, display, and any input devices (see <span class="plainlinks archwiki-template-man" title="$ man 1 xauth"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xauth.1">xauth(1)</a></span>).
</p>
<p>See <a rel="nofollow" class="external autonumber" href="https://gist.githubusercontent.com/AladW/de1c5676d93d05a5a0e1/raw/16e010ecda9f2328e1e22d4e02ac814ed27717b4/gistfile1.txt">[3]</a> for an example function when using <a href="../en/Xinit.html#xinitrc" class="mw-redirect" title="Xinitrc">xinitrc</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>If the LCD backlight is not turned off when the lid is closed, you may do so manually by running <code>getXuser xset dpms force off</code> and <code>getXuser xset dpms force on</code> respectively on lid close and lid open events. Should the display be blanked, but the backlight left on, instead use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vbetool">vbetool</a></span> with <code>vbetool dpms off</code> and <code>vbetool dpms on</code>. See also <a href="../en/XScreenSaver.html#Configuration" title="XScreenSaver">XScreenSaver#Configuration</a>.</li>
<li>When using <i>who</i> or <i>w</i>, make sure <code>/run/utmp</code> is created at boot-time. See <span class="plainlinks archwiki-template-man" title="$ man 5 utmp"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/utmp.5">utmp(5)</a></span> for details.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Connect_to_acpid_socket">Connect to acpid socket</span></h4>
<p>In addition to rule files, acpid accepts connections on a UNIX domain socket, by default <code>/var/run/acpid.socket</code>. User applications may connect to this socket.
</p>
<pre>#!/bin/bash
coproc acpi_listen
trap 'kill $COPROC_PID' EXIT

while read -u "${COPROC[0]}" -a event; do
    <i>handler.sh</i> "${event[@]}"
done
</pre>
<p>Where <code><i>handler.sh</i></code> can be a script similar to <code>/etc/acpi/handler.sh</code>.
</p>
<h3><span class="mw-headline" id="Disable_keyboard_and_touchpad_while_laptop_lid_is_closed_under_Wayland">Disable keyboard and touchpad while laptop lid is closed under Wayland</span></h3>
<p>This example uses <a rel="nofollow" class="external text" href="https://www.phoronix.com/news/Linux-5.11-Inhibited-Input">inhibited</a> property of input device drivers as a replacement for xinput which does not work under Wayland.
</p>
<pre>	button/lid)
		if echo "$3" | grep -iq "open"; then
			echo 'LID opened'
			disabled=0
		fi
		if echo "$3" | grep -iq "close"; then
			echo 'LID closed'
			disabled=1
		fi
		find /sys/devices/platform/i8042/serio* -prune -type d | while IFS= read -r serionumber; do
			find $serionumber/input/* -prune -type d | while IFS= read -r inputdevicepath; do
				if grep -q -i -e "keyboard" -e "touchpad" $inputdevicepath/name; then
					logger "found $(cat $inputdevicepath/name) and set to $disabled"
					echo $disabled &gt; $inputdevicepath/inhibited
				fi
			done
		done
	;;
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://acpid.sourceforge.net/">acpid homepage</a></li>
<li><a href="https://wiki.gentoo.org/wiki/ACPI#Configuration" class="extiw" title="gentoo:ACPI">Gentoo:ACPI#Configuration</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Power_management.html" title="Category:Power management">Power management</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Acpid&amp;oldid=812976">https://wiki.archlinux.org/index.php?title=Acpid&amp;oldid=812976</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 July 2024, at 06:08.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
