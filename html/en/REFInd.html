<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>rEFInd - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-REFInd rootpage-REFInd skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Supported_file_systems" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Supported_file_systems">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Supported file systems</span>
			</div>
		</a>
		
		<ul id="toc-Supported_file_systems-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installing_the_rEFInd_Boot_Manager" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installing_the_rEFInd_Boot_Manager">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Installing the rEFInd Boot Manager</span>
			</div>
		</a>
		
			<button aria-controls="toc-Installing_the_rEFInd_Boot_Manager-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installing the rEFInd Boot Manager subsection</span>
			</button>
		
		<ul id="toc-Installing_the_rEFInd_Boot_Manager-sublist" class="vector-toc-list">
			<li id="toc-Installation_with_refind-install_script" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installation_with_refind-install_script">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Installation with refind-install script</span>
				</div>
			</a>
			
			<ul id="toc-Installation_with_refind-install_script-sublist" class="vector-toc-list">
				<li id="toc-Secure_Boot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Secure_Boot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1</span>
					<span>Secure Boot</span>
				</div>
			</a>
			
			<ul id="toc-Secure_Boot-sublist" class="vector-toc-list">
				<li id="toc-Using_PreLoader" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Using_PreLoader">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1.1</span>
					<span>Using PreLoader</span>
				</div>
			</a>
			
			<ul id="toc-Using_PreLoader-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_shim" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Using_shim">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1.2</span>
					<span>Using shim</span>
				</div>
			</a>
			
			<ul id="toc-Using_shim-sublist" class="vector-toc-list">
				<li id="toc-Using_hashes" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Using_hashes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1.2.1</span>
					<span>Using hashes</span>
				</div>
			</a>
			
			<ul id="toc-Using_hashes-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_Machine_Owner_Key" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Using_Machine_Owner_Key">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1.2.2</span>
					<span>Using Machine Owner Key</span>
				</div>
			</a>
			
			<ul id="toc-Using_Machine_Owner_Key-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Using_your_own_keys" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Using_your_own_keys">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1.3</span>
					<span>Using your own keys</span>
				</div>
			</a>
			
			<ul id="toc-Using_your_own_keys-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Manual_installation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Manual_installation">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Manual installation</span>
				</div>
			</a>
			
			<ul id="toc-Manual_installation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Upgrading" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Upgrading">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Upgrading</span>
				</div>
			</a>
			
			<ul id="toc-Upgrading-sublist" class="vector-toc-list">
				<li id="toc-Pacman_hook" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Pacman_hook">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3.1</span>
					<span>Pacman hook</span>
				</div>
			</a>
			
			<ul id="toc-Pacman_hook-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Passing_kernel_parameters" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Passing_kernel_parameters">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Passing kernel parameters</span>
				</div>
			</a>
			
			<ul id="toc-Passing_kernel_parameters-sublist" class="vector-toc-list">
				<li id="toc-For_kernels_automatically_detected_by_rEFInd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#For_kernels_automatically_detected_by_rEFInd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1</span>
					<span>For kernels automatically detected by rEFInd</span>
				</div>
			</a>
			
			<ul id="toc-For_kernels_automatically_detected_by_rEFInd-sublist" class="vector-toc-list">
				<li id="toc-refind_linux.conf" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#refind_linux.conf">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1.1</span>
					<span>refind_linux.conf</span>
				</div>
			</a>
			
			<ul id="toc-refind_linux.conf-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Without_configuration" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Without_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1.2</span>
					<span>Without configuration</span>
				</div>
			</a>
			
			<ul id="toc-Without_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-For_manual_boot_stanzas" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#For_manual_boot_stanzas">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.2</span>
					<span>For manual boot stanzas</span>
				</div>
			</a>
			
			<ul id="toc-For_manual_boot_stanzas-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installation_alongside_an_existing_UEFI_Windows_installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation_alongside_an_existing_UEFI_Windows_installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Installation alongside an existing UEFI Windows installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation_alongside_an_existing_UEFI_Windows_installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Tools" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tools">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Tools</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tools-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tools subsection</span>
			</button>
		
		<ul id="toc-Tools-sublist" class="vector-toc-list">
			<li id="toc-UEFI_shell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#UEFI_shell">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>UEFI shell</span>
				</div>
			</a>
			
			<ul id="toc-UEFI_shell-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Memtest86+" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Memtest86+">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>Memtest86+</span>
				</div>
			</a>
			
			<ul id="toc-Memtest86+-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Key_management_tools" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Key_management_tools">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3</span>
					<span>Key management tools</span>
				</div>
			</a>
			
			<ul id="toc-Key_management_tools-sublist" class="vector-toc-list">
				<li id="toc-HashTool" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#HashTool">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3.1</span>
					<span>HashTool</span>
				</div>
			</a>
			
			<ul id="toc-HashTool-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-MokManager" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#MokManager">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3.2</span>
					<span>MokManager</span>
				</div>
			</a>
			
			<ul id="toc-MokManager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-KeyTool" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#KeyTool">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3.3</span>
					<span>KeyTool</span>
				</div>
			</a>
			
			<ul id="toc-KeyTool-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-GPT_fdisk_(gdisk)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GPT_fdisk_(gdisk)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4</span>
					<span>GPT fdisk (gdisk)</span>
				</div>
			</a>
			
			<ul id="toc-GPT_fdisk_(gdisk)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-fwupd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#fwupd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.5</span>
					<span>fwupd</span>
				</div>
			</a>
			
			<ul id="toc-fwupd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Poweroff_or_reboot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Poweroff_or_reboot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.6</span>
					<span>Poweroff or reboot</span>
				</div>
			</a>
			
			<ul id="toc-Poweroff_or_reboot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Customization" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Customization">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>Customization</span>
			</div>
		</a>
		
			<button aria-controls="toc-Customization-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Customization subsection</span>
			</button>
		
		<ul id="toc-Customization-sublist" class="vector-toc-list">
			<li id="toc-Manual_customization" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Manual_customization">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.1</span>
					<span>Manual customization</span>
				</div>
			</a>
			
			<ul id="toc-Manual_customization-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installing_external_themes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_external_themes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.2</span>
					<span>Installing external themes</span>
				</div>
			</a>
			
			<ul id="toc-Installing_external_themes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Using_drivers_in_UEFI_shell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_drivers_in_UEFI_shell">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.1</span>
					<span>Using drivers in UEFI shell</span>
				</div>
			</a>
			
			<ul id="toc-Using_drivers_in_UEFI_shell-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Setting_efifb_resolution" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_efifb_resolution">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.2</span>
					<span>Setting efifb resolution</span>
				</div>
			</a>
			
			<ul id="toc-Setting_efifb_resolution-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Btrfs_subvolume_support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Btrfs_subvolume_support">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.3</span>
					<span>Btrfs subvolume support</span>
				</div>
			</a>
			
			<ul id="toc-Btrfs_subvolume_support-sublist" class="vector-toc-list">
				<li id="toc-Auto_detection" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Auto_detection">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.3.1</span>
					<span>Auto detection</span>
				</div>
			</a>
			
			<ul id="toc-Auto_detection-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Manual_boot_stanza" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Manual_boot_stanza">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.3.2</span>
					<span>Manual boot stanza</span>
				</div>
			</a>
			
			<ul id="toc-Manual_boot_stanza-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-LoaderDevicePartUUID" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#LoaderDevicePartUUID">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.4</span>
					<span>LoaderDevicePartUUID</span>
				</div>
			</a>
			
			<ul id="toc-LoaderDevicePartUUID-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-ISO_images" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ISO_images">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.5</span>
					<span>ISO images</span>
				</div>
			</a>
			
			<ul id="toc-ISO_images-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">9</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Apple_Macs" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Apple_Macs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1</span>
					<span>Apple Macs</span>
				</div>
			</a>
			
			<ul id="toc-Apple_Macs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Blank_rEFInd_menu_screen" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Blank_rEFInd_menu_screen">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.2</span>
					<span>Blank rEFInd menu screen</span>
				</div>
			</a>
			
			<ul id="toc-Blank_rEFInd_menu_screen-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Not_using_the_distribution_logo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Not_using_the_distribution_logo">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.3</span>
					<span>Not using the distribution logo</span>
				</div>
			</a>
			
			<ul id="toc-Not_using_the_distribution_logo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error:_Not_Found_while_loading_vmlinuz-linux" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Error:_Not_Found_while_loading_vmlinuz-linux">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.4</span>
					<span>Error: Not Found while loading vmlinuz-linux</span>
				</div>
			</a>
			
			<ul id="toc-Error:_Not_Found_while_loading_vmlinuz-linux-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">10</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">rEFInd</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/rEFInd" title="rEFInd – Deutsch" lang="de" hreflang="de" data-title="rEFInd" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/REFInd" title="REFInd – 日本語" lang="ja" hreflang="ja" data-title="REFInd" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/REFInd.html" title="REFInd – русский" lang="ru" hreflang="ru" data-title="REFInd" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/REFInd" title="REFInd – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="REFInd" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Arch_boot_process.html" title="Arch boot process">Arch boot process</a></li>
<li><a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">Boot loader</a></li>
<li><a href="../en/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface</a></li>
<li><a href="../en/EFI_boot_stub.html" title="EFI boot stub">EFI boot stub</a></li>
<li><a href="../en/Booster.html" title="Booster">booster</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/">rEFInd</a> is a <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="UEFI">UEFI</a> <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot manager">boot manager</a> capable of launching kernels as <a href="../en/EFI_boot_stub.html" title="EFI boot stub">EFI boot stubs</a>. It is a fork of the no-longer-maintained rEFIt and fixes many issues with respect to non-Mac UEFI booting. It is designed to be platform-neutral and to simplify booting multiple operating systems.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> In the entire article <code><i>esp</i></code> denotes the mountpoint of the <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a>.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Supported_file_systems">Supported file systems</span></h2>
<p>rEFInd inherits the support for the file systems <a href="../en/Arch_boot_process.html#UEFI" title="Arch boot process">from the firmware</a> (i.e. at least FAT12, FAT16 and FAT32). Additionally it loads any <a href="../en/Unified_Extensible_Firmware_Interface.html#UEFI_drivers" title="Unified Extensible Firmware Interface">UEFI drivers</a> placed in the <code>drivers</code> and <code>drivers_x64</code> subdirectories of its own installation directory on the ESP. E.g. <code><i>esp</i>/EFI/refind/drivers_x64/</code>.
</p>
<p>rEFInd also ships with a <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/drivers.html#selecting">small collection</a> of read-only EFI file system drivers, notably <a href="../en/Ext4.html" title="Ext4">ext4</a> and <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a>.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=refind">refind</a></span> package.
</p>
<h2><span class="mw-headline" id="Installing_the_rEFInd_Boot_Manager">Installing the rEFInd Boot Manager</span></h2>
<p>rEFInd ships with <a href="../en/Unified_Extensible_Firmware_Interface.html#UEFI_drivers" title="Unified Extensible Firmware Interface">UEFI drivers</a> that implement <b>read-only</b> support for ReiserFS (deprecated), Ext2, Ext4, Btrfs, ISO-9660 and HFS+. Additionally rEFInd can access any file system that UEFI itself can, that includes FAT (as mandated by the UEFI specification), HFS+ on Macs and ISO-9660 on some systems.
</p>
<p>To find additional drivers see <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/drivers.html#finding">The rEFInd Boot Manager: Using EFI Drivers: Finding Additional EFI Drivers</a>.
</p>
<p>To use the rEFInd, you must install it to the EFI system partition either using the <a href="#Installation_with_refind-install_script">refind-install script</a> or <a href="#Manual_installation">by copying the files and setting up the boot entry manually</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Your kernel and initramfs must reside on a file system that rEFInd can read.</div>
<h3><span class="mw-headline" id="Installation_with_refind-install_script">Installation with refind-install script</span></h3>
<p>The rEFInd package includes the <i>refind-install</i> script to simplify the process of setting rEFInd as your default EFI boot entry. The script has several options for handling differing setups and UEFI implementations. See <span class="plainlinks archwiki-template-man" title="$ man 8 refind-install"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/refind-install.8">refind-install(8)</a></span> or read the comments in the install script for explanations of the various installation options.
</p>
<p>For many systems it should be sufficient to simply run:
</p>
<pre># refind-install
</pre>
<p>This will attempt to find and mount your <a href="../en/EFI_system_partition.html" class="mw-redirect" title="ESP">ESP</a>, copy rEFInd files to <code><i>esp</i>/EFI/refind/</code>, and use <a href="../en/Unified_Extensible_Firmware_Interface.html#efibootmgr" class="mw-redirect" title="Efibootmgr">efibootmgr</a> to make rEFInd the default EFI boot application.
</p>
<p>Alternatively you can install rEFInd to the default/fallback boot path <code><i>esp</i>/EFI/BOOT/bootx64.efi</code>. This is helpful for bootable USB flash drives or on systems that have issues with the NVRAM changes made by <i>efibootmgr</i>:
</p>
<pre># refind-install --usedefault <i>/dev/sdXY</i>
</pre>
<p>Where <code><i>/dev/sdXY</i></code> is your EFI system partition (the block device, not its mountpoint).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> By default <code>refind-install</code> installs only the driver for the file system on which kernel resides. Additional file systems need to be installed manually by copying them from <code>/usr/share/refind/drivers_x64/</code> to <code><i>esp</i>/EFI/refind/drivers_x64/</code>, or you can install all drivers with the <code>--alldrivers</code> option. This is useful for bootable USB flash drives.</div>
<p>After installing rEFInd's files to the ESP, verify that rEFInd has created <code>refind_linux.conf</code> containing <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> in the same directory as your kernel. This configuration file will not be created if you used the <code>--usedefault</code> option, run <code>mkrlconf</code> as root to create it.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> When <code>refind-install</code> is run in chroot (e.g. in live system when installing Arch Linux) <code>/boot/refind_linux.conf</code> is populated with kernel options from the live system not the one on which it is installed. Edit <code>/boot/refind_linux.conf</code> and make sure the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> in it are correct for your system, otherwise you could get a kernel panic on your next boot. See <a href="#refind_linux.conf">#refind_linux.conf</a> for an example file.</div>
<p>By default, rEFInd will scan all of your drives (that it has drivers for) and add a boot entry for each EFI bootloader it finds, which should include your kernel (since Arch enables <a href="../en/EFI_boot_stub.html" title="EFI boot stub">EFI boot stubs</a> by default). So you may have a bootable system at this point.
</p>
<h4><span class="mw-headline" id="Secure_Boot">Secure Boot</span></h4>
<p>See <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/secureboot.html">Managing Secure Boot</a> for <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a> support in rEFInd.
</p>
<h5><span class="mw-headline" id="Using_PreLoader">Using PreLoader</span></h5>
<p>See <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#Set_up_PreLoader" class="mw-redirect" title="Secure Boot">Secure Boot#Set up PreLoader</a> to acquire signed <code>PreLoader.efi</code> and <code>HashTool.efi</code> binaries.
</p>
<p>Execute <code>refind-install</code> with the option <code>--preloader <i>/path/to/preloader</i></code>
</p>
<pre># refind-install --preloader /usr/share/preloader-signed/PreLoader.efi
</pre>
<p>Next time you boot with Secure Boot enabled, HashTool will launch and you will need to enroll the hash of rEFInd (<code>loader.efi</code>), rEFInd's drivers (e.g. <code>ext4_x64.efi</code>) and kernel (e.g. <code>vmlinuz-linux</code>).
</p>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 8 refind-install"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/refind-install.8">refind-install(8)</a></span> for more information.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The signed <i>HashTool</i> is only capable of accessing the partition it was launched from. This means if your kernel is not on the ESP, you will not be able to enroll its hash from <i>HashTool</i>. You can workaround this by using <a href="#KeyTool">#KeyTool</a>, since it is capable of enrolling a hash in MokList and is not limited to one partition. Remember to enroll <i>KeyTool'</i>s hash before using it.</div>
<h5><span class="mw-headline" id="Using_shim">Using shim</span></h5>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/shim-signed/">shim-signed</a></span><sup><small>AUR</small></sup>. Read <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#shim" class="mw-redirect" title="Secure Boot">Secure Boot#shim</a>, but skip all file copying.
</p>
<h6><span class="mw-headline" id="Using_hashes">Using hashes</span></h6>
<p>To use only hashes with <i>shim</i>, execute <code>refind-install</code> with the option <code>--shim <i>/path/to/shim</i></code>
</p>
<pre># refind-install --shim /usr/share/shim-signed/shimx64.efi
</pre>
<p>Next time you boot with Secure Boot enabled, MokManager will launch and you will need to enroll the hash of rEFInd (<code>grubx64.efi</code>), rEFInd's drivers (e.g. <code>ext4_x64.efi</code>) and kernel (e.g. <code>vmlinuz-linux</code>).
</p>
<h6><span class="mw-headline" id="Using_Machine_Owner_Key">Using Machine Owner Key</span></h6>
<p>To sign rEFInd with a Machine Owner Key (MOK), install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sbsigntools">sbsigntools</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If you already have <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#shim_with_key" class="mw-redirect" title="Secure Boot">created a MOK</a>, place the files in the directory <code>/etc/refind.d/keys</code> with the names <code>refind_local.key</code> (PEM format private key), <code>refind_local.crt</code> (PEM format certificate) and <code>refind_local.cer</code> (DER format certificate).</div>
<p>Execute <code>refind-install</code> with the options <code>--shim <i>/path/to/shim</i></code> and <code>--localkeys</code>:
</p>
<pre># refind-install --shim /usr/share/shim-signed/shimx64.efi --localkeys
</pre>
<p><i>refind-install</i> will create the keys for you and sign itself and its drivers. You will need to sign the kernel with the same key, e.g.:
</p>
<pre># sbsign --key /etc/refind.d/keys/refind_local.key --cert /etc/refind.d/keys/refind_local.crt --output /boot/vmlinuz-linux /boot/vmlinuz-linux
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The kernel signing can be automated with a <a href="../en/Mkinitcpio.html#Post_hooks" title="Mkinitcpio">mkinitcpio post hook</a>, see <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#Signing_the_kernel_with_a_mkinitcpio_post_hook" class="mw-redirect" title="Secure Boot">Secure Boot#Signing the kernel with a mkinitcpio post hook</a>.</div>
<p>Once in MokManager add <code>refind_local.cer</code> to MoKList. <code>refind_local.cer</code> can be found inside a directory called <code>keys</code> in the rEFInd's installation directory, e.g. <code><i>esp</i>/EFI/refind/keys/refind_local.cer</code>.
</p>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 8 refind-install"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/refind-install.8">refind-install(8)</a></span> for more information.
</p>
<h5><span class="mw-headline" id="Using_your_own_keys">Using your own keys</span></h5>
<p>Follow <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#Using_your_own_keys" class="mw-redirect" title="Secure Boot">Secure Boot#Using your own keys</a> to create keys.
</p>
<p>Create directory <code>/etc/refind.d/keys</code> and place Signature Database (<b>db</b>) key and certificates in it. Name the files: <code>refind_local.key</code> (PEM format private key), <code>refind_local.crt</code> (PEM format certificate) and <code>refind_local.cer</code> (DER format certificate).
</p>
<p>When running install script add option <code>--localkeys</code>, e.g.:
</p>
<pre># refind-install --localkeys
</pre>
<p>rEFInd EFI binaries will be signed with the supplied key and certificate.
</p>
<h3><span class="mw-headline" id="Manual_installation">Manual installation</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> rEFInd can boot Linux in many ways. See <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/linux.html">The rEFInd Boot Manager: Methods of Booting Linux</a> for coverage of the various approaches.</div>
<p>If the <code>refind-install</code> script does not work for you, rEFInd can be set up manually.
</p>
<p>First, copy the executable to the ESP:
</p>
<pre># mkdir -p <i>esp</i>/EFI/refind
# cp /usr/share/refind/refind_x64.efi <i>esp</i>/EFI/refind/
</pre>
<p>If you want to install rEFInd to the default/fallback boot path replace <code><i>esp</i>/EFI/refind/</code> with <code><i>esp</i>/EFI/BOOT/</code> in the following instructions and copy rEFInd EFI executable to <code><i>esp</i>/EFI/BOOT/bootx64.efi</code>:
</p>
<pre># mkdir -p <i>esp</i>/EFI/BOOT
# cp /usr/share/refind/refind_x64.efi <i>esp</i>/EFI/BOOT/bootx64.efi
</pre>
<p>Then use <a href="../en/Unified_Extensible_Firmware_Interface.html#efibootmgr" class="mw-redirect" title="Efibootmgr">efibootmgr</a> to create a boot entry in the UEFI NVRAM, where <code><i>/dev/sdX</i></code> and <code><i>Y</i></code> are the device and partition number of your EFI system partition. If you are installing rEFInd to the default/fallback boot path <code><i>esp</i>/EFI/BOOT/bootx64.efi</code>, you can skip this step.
</p>
<pre># efibootmgr --create --disk <i>/dev/sdX</i> --part <i>Y</i> --loader /EFI/refind/refind_x64.efi --label "rEFInd Boot Manager" --unicode
</pre>
<p>At this point, you should be able to reboot into rEFInd, but it may not be able to boot your kernel. If your kernel does not reside on your ESP, rEFInd may need to mount your partitions to find it. If the relevant file systems are not of the types supported by UEFI, additional driver files may be necessary. rEFInd automatically loads all drivers from the subdirectories <code>drivers</code> and <code>drivers_<i>arch</i></code> (e.g. <code>drivers_x64</code>) in its install directory.
</p>
<pre># mkdir <i>esp</i>/EFI/refind/drivers_x64
# cp /usr/share/refind/drivers_x64/<b>drivername</b>_x64.efi <i>esp</i>/EFI/refind/drivers_x64/
</pre>
<p>Now rEFInd should have a boot entry for your kernel, but it will not pass the correct kernel parameters. Set up <a href="#Passing_kernel_parameters">#Passing kernel parameters</a>. You should now be able to boot your kernel using rEFInd. If you are still unable to boot or if you want to tweak rEFInd's settings, many options can be changed with a configuration file:
</p>
<pre># cp /usr/share/refind/refind.conf-sample <i>esp</i>/EFI/refind/refind.conf
</pre>
<p>The sample configuration file is well commented and self-explanatory.
</p>
<p>Unless you have set <code>textonly</code> in the configuration file, you should copy rEFInd's icons to get rid of the ugly placeholders:
</p>
<pre># cp -r /usr/share/refind/icons <i>esp</i>/EFI/refind/
</pre>
<p>You can try out different fonts by copying them and changing the <code>font</code> setting in <code>refind.conf</code>:
</p>
<pre># cp -r /usr/share/refind/fonts <i>esp</i>/EFI/refind/
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Pressing <code>F10</code> in rEFInd will save a screenshot to the top level directory of the ESP.</div>
<h3><span class="mw-headline" id="Upgrading">Upgrading</span></h3>
<p>Pacman updates the rEFInd files in <code>/usr/share/refind/</code> and will not copy new files to the ESP for you. If <code>refind-install</code> worked for your original installation of rEFInd, you can rerun it to copy the updated files. The new configuration file will be copied as <code>refind.conf-sample</code> so that you can integrate changes into your existing configuration file using a <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Diff">diff</a> tool. If your rEFInd required <a href="#Manual_installation">#Manual installation</a>, you will need to figure out which files to copy yourself.
</p>
<h4><span class="mw-headline" id="Pacman_hook">Pacman hook</span></h4>
<p>You can automate the update process using a <a href="../en/Pacman.html#Hooks" class="mw-redirect" title="Pacman hook">pacman hook</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/refind.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation=Upgrade
Type=Package
Target=refind

[Action]
Description = Updating rEFInd on ESP
When=PostTransaction
Exec=/usr/bin/refind-install</pre>
<p>Where the <code>Exec=</code> may need to be changed to the correct update command for your setup. If you did <a href="#Manual_installation">#Manual installation</a>, you could create your own update script to call with the hook.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>If you <a href="#Secure_Boot">setup rEFInd with Secure Boot</a>, in addition to adding <code>--localkeys</code>, also add the <code>--yes</code> option to the <code>refind-install</code> command. It will prevent the command from failing if shim is not used or if the system was booted with Secure Boot disabled. See <span class="plainlinks archwiki-template-man" title="$ man 8 refind-install"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/refind-install.8">refind-install(8)</a></span> for more information.</li>
<li>If the ESP is not mounted to <code>/boot</code> and you rely on automounting to mount it, make sure to preload the <code>vfat</code> module as instructed in <a href="../en/EFI_system_partition.html#Alternative_mount_points" title="EFI system partition">EFI system partition#Alternative mount points</a>. Otherwise, if <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=refind">refind</a></span> is upgraded together with the kernel, the ESP will become inaccessible.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>The rEFInd configuration <code>refind.conf</code> is located in the same directory as the rEFInd EFI application (usually <code><i>esp</i>/EFI/refind</code> or <code><i>esp</i>/EFI/BOOT</code>). The default configuration file contains extensive comments explaining all its options, see <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/configfile.html">Configuring the Boot Manager</a> for more detailed explanations.
</p>
<p>rEFInd detects bootable EFI binaries (Linux kernels, other operating system boot loaders, UEFI boot entries and etc.) at runtime. This means that in most simple situations, rEFInd works without any configuration. In particular, it is likely possible to boot Windows by default.
</p>
<p>This does not mean there is no need to configure; for Linux, probably a user wants to set kernel parameters and initramfs. This can be done in another configuration file, <code>refind_linux.conf</code>. See below for details.
</p>
<h3><span class="mw-headline" id="Passing_kernel_parameters">Passing kernel parameters</span></h3>
<p>There are two methods for setting the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> that rEFInd will pass to the kernel.
</p>
<h4><span class="mw-headline" id="For_kernels_automatically_detected_by_rEFInd">For kernels automatically detected by rEFInd</span></h4>
<p>rEFInd has two (or more) configuration files. <code>refind.conf</code>, which lies in the <a href="../en/EFI_system_partition.html" class="mw-redirect" title="ESP">ESP</a>, configures rEFInd itself. On the other hand <code>refind_linux.conf</code> lies in <code>/boot</code>, i.e. the directory that kernel images lie, and it configures how the kernels are booted.
</p>
<p>For automatically detected kernels you can either specify the kernel parameters explicitly in <code>/boot/refind_linux.conf</code> or rely on rEFInd's ability to identify the root partition and kernel parameters. See <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/linux.html#easiest">Methods of Booting Linux: For Those With Foresight or Luck: The Easiest Method</a> for more information.
</p>
<p><br>
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>rEFInd will automatically choose the Arch Linux icon (<code>os_arch.png</code>) for the boot entry when <code>/etc/os-release</code> is on the same partition as the kernel. If your <code>/boot</code> is a separate partition see <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/configfile.html#icons">Configuring the Boot Manager: Setting OS Icons</a>.</li>
<li>rEFInd <a rel="nofollow" class="external text" href="https://sourceforge.net/p/refind/discussion/general/thread/c3865a4e3a/">does not support detecting the distribution of unified kernel images</a>. To have a icon for a <a href="../en/Unified_kernel_image.html" title="Unified kernel image">unified kernel image</a>, copy <code>/usr/share/refind/icons/os_arch.png</code> to <code><i>esp</i>/EFI/Linux/</code> and make sure the file names match. E.g., if you have <code><i>esp</i>/EFI/Linux/arch-linux.efi</code>, then name the icon—<code><i>esp</i>/EFI/Linux/arch-linux.png</code>.</li>
</ul>
</div>
<p>For rEFInd to support the naming scheme of Arch Linux <a href="../en/Kernel.html" class="mw-redirect" title="Kernels">kernels</a> and thus allow matching them with their respective initramfs images, you must uncomment and edit <code>extra_kernel_version_strings</code> option in <code>refind.conf</code>. E.g.:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/EFI/refind/refind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
extra_kernel_version_strings "linux-hardened,linux-rt-lts,linux-zen,linux-lts,linux-rt,linux"
...
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Without <code>extra_kernel_version_strings</code> set, rEFInd will incorrectly pass the first initramfs it finds as the <code>initrd=</code> kernel parameter, instead of using the correct initramfs for the kernel. This will result in a failure to boot since the matching loadable kernel modules will not be available.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>rEFInd only supports detecting one initramfs image per kernel, meaning it will not detect fallback initramfs nor <a href="../en/Microcode.html#Microcode_in_a_separate_initramfs_file" title="Microcode">external microcode initramfs images</a>. If used, they must be specified manually.</li>
<li>Without the above <code>extra_kernel_version_strings</code> line, the <code>%v</code> variable in <code>refind_linux.conf</code> will not work for Arch Linux <a href="../en/Kernel.html" class="mw-redirect" title="Kernels">kernels</a>.</li>
</ul>
</div>
<h5><span class="mw-headline" id="refind_linux.conf">refind_linux.conf</span></h5>
<p>If rEFInd automatically detects your kernel, you can place a <code>refind_linux.conf</code> file containing the kernel parameters in the same directory as your kernel. You can use <code>/usr/share/refind/refind_linux.conf-sample</code> as a starting point. The first uncommented line of <code>refind_linux.conf</code> will be the default parameters for the kernel. Subsequent lines will create entries in a submenu accessible using <code>Insert</code>, <code>F2</code>, <code>Tab</code>, or <code>+</code>.
</p>
<p>Alternatively, try running <code>mkrlconf</code> as root. It will attempt to find your kernel in <code>/boot</code> and automatically generate <code>refind_linux.conf</code>. The script will only set up the most basic kernel parameters, so be sure to check the file it created for correctness.
</p>
<p>If you do not specify an <code>initrd=</code> parameter, rEFInd will automatically add it by searching for common RAM disk filenames in the same directory as the kernel. If you need either multiple or non-default <code>initrd=</code> parameters, you must specify them manually in <code>refind_linux.conf</code>. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/refind_linux.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">"Boot using default options"     "root=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</i> rw add_efi_memmap"
"Boot using fallback initramfs"  "root=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</i> rw add_efi_memmap initrd=boot\initramfs-%v-fallback.img"
"Boot to terminal"               "root=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</i> rw add_efi_memmap systemd.unit=multi-user.target"</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>For rEFInd to support Arch Linux kernels, the <code>extra_kernel_version_strings</code> in <code>esp/EFI/refind/refind.conf</code> must be edited as instructed in <a href="#For_kernels_automatically_detected_by_rEFInd">#For kernels automatically detected by rEFInd</a>.</li>
<li>
<code>initrd</code> path is relative to the root of the file system on which the kernel resides. This could be <code>initrd=\boot\initramfs-%v-fallback.img</code> or, if <code>/boot</code> is a separate partition (e.g. the ESP), <code>initrd=initramfs-%v-fallback.img</code>.</li>
<li>Use backslashes (<code>\</code>) as path separators in the <code>initrd</code> parameter, otherwise the kernel may fail to find the initramfs image(s): <code>EFI stub: ERROR: Failed to open file: /boot/initramfs-linux-fallback.img</code>.</li>
<li>If using <a href="../en/Booster.html" title="Booster">Booster</a> generated initramfs images, replace <code>initramfs</code> with <code>booster</code> in the initramfs files name and make sure to specify <a href="../en/Microcode.html#Microcode_in_a_separate_initramfs_file" title="Microcode">external microcode initramfs images</a> before the main initramfs image. E.g. <code>initrd=boot\amd-ucode.img initrd=\boot\booster-%v.img</code>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Quotes are escaped by repetition (i.e. <code>""</code> is the escaped version of <code>"</code>). For example, to pass the option <code>acpi_osi="Windows 2015"</code> to the first boot entry of the above <code>refind_linux.conf</code>: <pre>"Boot using default options"     "... <b>acpi_osi=""Windows 2015""</b> "</pre>
</li>
<li>rEFInd replaces <code>%v</code> in <code>refind_linux.conf</code> with the kernel's version (by extracting it from the file name).</li>
</ul>
</div>
<h5><span class="mw-headline" id="Without_configuration">Without configuration</span></h5>
<p>If you merely install rEFInd onto the ESP and launch it without any further ado (say via UEFI shell or KeyTool, or directly from firmware) you still get a menu to boot from via autodetection, with no configuration required whatsoever.
</p>
<p>This works because rEFInd has a fallback mechanism that can:
</p>
<ul>
<li>Identify the root partition (for <code>root=</code> parameter ) via the <a rel="nofollow" class="external text" href="https://uapi-group.org/specifications/specs/discoverable_partitions_specification/">Discoverable Partitions Specification</a> or <code>/etc/fstab</code>.</li>
<li>Detect kernel options (<code>ro</code> or <code>rw</code>) from <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_entries_.28LBA_2-33.29" class="extiw" title="wikipedia:GUID Partition Table">GPT partition attributes</a> (using attribute <code>60</code> "read-only") or <code>/etc/fstab</code>.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> rEFInd does not support escape codes (e.g. for <a href="../en/Fstab.html#Filepath_spaces" title="Fstab">spaces</a>) in <code>/etc/fstab</code>.</div>
<h4><span class="mw-headline" id="For_manual_boot_stanzas">For manual boot stanzas</span></h4>
<p>If your kernel is not autodetected, or if you simply want more control over the options for a menu entry, you can manually create boot entries using stanzas in <code>refind.conf</code>. Ensure that <code>scanfor</code> includes <code>manual</code> or these entries will not appear in rEFInd's menu. Kernel parameters are set with the <code>options</code> keyword. rEFInd will append the <code>initrd=</code> parameter using the file specified by the <code>initrd</code> keyword in the stanza.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If you need additional initrds, e.g. when using <a href="../en/Microcode.html#Microcode_in_a_separate_initramfs_file" title="Microcode">external microcode initramfs images</a>, you can specify them in <code>options</code> (and the one specified by the <code>initrd</code> keyword will be added to the end).</div>
<p>Manual boot stanzas are explained in <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/configfile.html#stanzas">Creating Manual Boot Stanzas</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/EFI/refind/refind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

menuentry "Arch Linux" {
	icon     /EFI/refind/icons/os_arch.png
	volume   "Arch Linux"
	loader   /boot/vmlinuz-linux
	initrd   /boot/initramfs-linux.img
	options  "root=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</i> rw add_efi_memmap"
	submenuentry "Boot using fallback initramfs" {
		initrd /boot/initramfs-linux-fallback.img
	}
	submenuentry "Boot to terminal" {
		add_options "systemd.unit=multi-user.target"
	}
}</pre>
<p>It is likely that you will need to change <code>volume</code> to match either a filesystem's LABEL, a PARTLABEL, or a PARTUUID of the partition where the kernel image resides. See <a href="../en/Persistent_block_device_naming.html#by-label" title="Persistent block device naming">Persistent block device naming#by-label</a> for examples of assigning a volume label. If <code>volume</code> is not specified it defaults to volume from which rEFInd was launched (typically EFI system partition).
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>
<code>loader</code> and <code>initrd</code> paths are relative to the root of <code>volume</code>. If <code>/boot</code> is a separate partition (e.g. the ESP), the loader and initrd paths would be <code>/vmlinuz-linux</code> and <code>/initramfs-linux.img</code>, respectively.</li>
<li>Use backslashes (<code>\</code>) as path separators in all quoted <code>initrd</code> parameters, otherwise the kernel may fail to find the initramfs image(s): <code>EFI stub: ERROR: Failed to open file: /boot/initramfs-linux.img</code>.</li>
<li>If using <a href="../en/Booster.html" title="Booster">Booster</a> generated initramfs images, replace <code>initramfs</code> with <code>booster</code> in the initramfs files name. E.g. <code>initrd   /boot/booster-linux.img</code>.</li>
<li>rEFInd 0.14.2 incorrectly populates LABEL with PARTLABEL on some devices, which may cause matching failure for <code>volume</code> and result in falling back to the default boot volume. A workaround is to load any driver or press <code>Esc</code> after entering main menu to re-scan the volumes. See <a rel="nofollow" class="external autonumber" href="https://sourceforge.net/p/refind/discussion/general/thread/871724f76e/">[1]</a>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Quotes are escaped by repetition (i.e. <code>""</code> is the escaped version of <code>"</code>). For example, to pass the option <code>acpi_osi="Windows 2015"</code> to the above boot entry <code>"Arch Linux"</code>: <pre>options  "... <b>acpi_osi=""Windows 2015""</b> "</pre>
</div>
<h2><span class="mw-headline" id="Installation_alongside_an_existing_UEFI_Windows_installation">Installation alongside an existing UEFI Windows installation</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The usual caveats of <a href="../en/Dual_boot_with_Windows.html" title="Dual boot with Windows">Dual boot with Windows</a> apply.</div>
<p>rEFInd is compatible with the EFI system partition created by a UEFI Windows installation, so there is no need to create or format another FAT32 partition when installing Arch alongside Windows. Simply mount the existing ESP and install rEFInd as usual. By default, rEFInd's autodetection feature should recognize any existing Windows/recovery bootloaders.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> In some cases, Windows behaves differently (low resolution boot screen, OEM logo replaced by Windows logo, black screen after boot screen, artifacting). If you face such issues, try setting <code>use_graphics_for +,windows</code> in <code><i>esp</i>/EFI/refind/refind.conf</code> or adding <code>graphics on</code> to the Windows boot stanza.</div>
<h2><span class="mw-headline" id="Tools">Tools</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface</a>.</b></p>
<div>
<b>Notes:</b> Although rEFInd has a special interface for these common tools, they are not a feature of rEFInd. (Discuss in <a href="../en/Talk:REFInd.html#template:move_at_refind#tools:_to_uefi" title="Talk:REFInd">Talk:REFInd#template:move at refind#tools: to uefi</a>)</div>
</div>
<p>rEFInd supports running various <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/installing.html#addons">3rd-party tools</a>. Tools need to be installed separately. Edit <code>showtools</code> in <code>refind.conf</code> to choose which ones to show.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/EFI/refind/refind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
showtools <a href="#UEFI_shell">shell</a>, <a href="#Memtest86+">memtest</a>, <a href="#Key_management_tools">mok_tool</a>, <a href="#GPT_fdisk_(gdisk)">gdisk</a>, <a href="#fwupd">fwupdate</a> ...
...
</pre>
<h3><span class="mw-headline" id="UEFI_shell">UEFI shell</span></h3>
<p>See <a href="../en/Unified_Extensible_Firmware_Interface.html#UEFI_Shell" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface#UEFI Shell</a>.
</p>
<p>Copy <code>shellx64.efi</code> to the root of the <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a>.
</p>
<h3>
<span id="Memtest86.2B"></span><span class="mw-headline" id="Memtest86+">Memtest86+</span>
</h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=memtest86%2B-efi">memtest86+-efi</a></span> and copy it to <code><i>esp</i>/EFI/tools/</code>.
</p>
<pre># cp /boot/memtest86+/memtest.efi <i>esp</i>/EFI/tools/memtest86.efi
</pre>
<h3><span class="mw-headline" id="Key_management_tools">Key management tools</span></h3>
<p>rEFInd can detect Secure Boot key management tools if they are placed in rEFInd's directory on ESP, <code><i>esp</i>/</code> or <code><i>esp</i>/EFI/tools/</code>.
</p>
<h4><span class="mw-headline" id="HashTool">HashTool</span></h4>
<p>Follow <a href="#Using_PreLoader">#Using PreLoader</a> and <code>HashTool.efi</code> will be placed in rEFInd's directory.
</p>
<h4><span class="mw-headline" id="MokManager">MokManager</span></h4>
<p>Follow <a href="#Using_shim">#Using shim</a> and MokManager will be placed in rEFInd's directory.
</p>
<h4><span class="mw-headline" id="KeyTool">KeyTool</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efitools">efitools</a></span>.
</p>
<p>Place KeyTool EFI binary in <code><i>esp</i>/</code> or <code><i>esp</i>/EFI/tools/</code> with the name <code>KeyTool.efi</code> or <code>KeyTool-signed.efi</code>.
</p>
<p>See <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#Using_KeyTool" class="mw-redirect" title="Secure Boot">Secure Boot#Using KeyTool</a> for instructions on signing <code>KeyTool.efi</code>.
</p>
<h3>
<span id="GPT_fdisk_.28gdisk.29"></span><span class="mw-headline" id="GPT_fdisk_(gdisk)">GPT fdisk (gdisk)</span>
</h3>
<p>Download the <a href="../en/GPT_fdisk.html#gdisk_EFI_application" class="mw-redirect" title="Gdisk">gdisk EFI application</a> and copy <code>gdisk_x64.efi</code> to <code><i>esp</i>/EFI/tools/</code>.
</p>
<h3><span class="mw-headline" id="fwupd">fwupd</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fwupd-efi">fwupd-efi</a></span> and setup <a href="../en/Fwupd.html" title="Fwupd">fwupd</a>.
</p>
<p>Copy the <code>fwupdx64.efi</code> binary and firmware file to <code><i>esp</i>/EFI/tools/</code>:
</p>
<pre># cp /usr/lib/fwupd/efi/fwupdx64.efi <i>esp</i>/EFI/tools/
</pre>
<h3><span class="mw-headline" id="Poweroff_or_reboot">Poweroff or reboot</span></h3>
<p>rEFInd reportedly have poweroff and reboot menu entries built in. Since this list of tools is the most extensive of its kind in this wiki, users of UEFI shell, or other UEFI boot managers, such as <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a>, might be interested in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/powerofforreboot.efi/">powerofforreboot.efi</a></span><sup><small>AUR</small></sup>.
</p>
<h2><span class="mw-headline" id="Customization">Customization</span></h2>
<p>rEFInd supports extensive customization, allowing you to modify icons, backgrounds, and fonts on the boot screen.
</p>
<h3><span class="mw-headline" id="Manual_customization">Manual customization</span></h3>
<p>To customize rEFInd, you need to edit the <code>refind.conf</code> configuration file. In the following example, all assets will be stored in <code><i>esp</i>/EFI/refind/assets</code>.
</p>
<p>To set a custom background image (banner), use the <code>wallpaper</code> directive in <code>refind.conf</code>:
</p>
<pre>banner assets/banner.png
</pre>
<p>To set a custom set of icons, use the <code>icons_dir</code> directive in <code>refind.conf</code> and point it to the folder containing your icons:
</p>
<pre>icons_dir assets/icons
</pre>
<h3><span class="mw-headline" id="Installing_external_themes">Installing external themes</span></h3>
<p>Installing external themes is straightforward. First, create a <code>themes</code> folder in your rEFInd directory:
</p>
<pre># mkdir <i>esp</i>/EFI/refind/themes
</pre>
<p>Clone the theme (if it is hosted on GitHub, for example):
</p>
<pre># git clone <i>url-to-theme</i> <i>esp</i>/EFI/refind/themes/<i>theme-name</i>
</pre>
<p>Or, copy the theme manually:
</p>
<pre># cp -r <i>path-to-theme</i> <i>esp</i>/EFI/refind/themes/<i>theme-name</i>
</pre>
<p>In <code>refind.conf</code>, include the theme's configuration file:
</p>
<pre>include themes/<i>theme-name</i>/<i>theme-name</i>.conf
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Ensure that your theme is compatible with rEFInd, and check the theme's documentation for any specific setup instructions.</div>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Using_drivers_in_UEFI_shell">Using drivers in UEFI shell</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Unified_Extensible_Firmware_Interface.html#UEFI_drivers" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface#UEFI drivers</a>.</b></p>
<div>
<b>Notes:</b> rEFInd's drivers are not the only ones that can be loaded. Move all generic information about UEFI drivers to one article. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:REFInd.html">Talk:REFInd</a>)</div>
</div>
<p>To use rEFInd's drivers in UEFI shell load them using command <code>load</code> and refresh mapped drives with <code>map -r</code>.
</p>
<pre>Shell&gt; load FS0:\EFI\refind\drivers\ext4_x64.efi
Shell&gt; map -r
</pre>
<p>Now you can access your file system from UEFI shell.
</p>
<h3><span class="mw-headline" id="Setting_efifb_resolution">Setting efifb resolution</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> It should be possible to simply rely on <code>resolution max</code>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:REFInd.html">Talk:REFInd</a>)</div>
</div>
<p>If the resolution in <code>refind.conf</code> is set to an incorrect value, on all systems except Apple <a href="../en/Mac.html" title="Mac">Macs</a> rEFInd will display a list of supported resolutions. For Apple Macs it will silently use the default resolution.
</p>
<p>To determine framebuffer resolutions supported by <a rel="nofollow" class="external text" href="https://docs.kernel.org/fb/efifb.html">efifb</a>, copy <code>/usr/lib/gnuefi/apps/modelist.efi</code> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnu-efi">gnu-efi</a></span> to the root of <a href="../en/EFI_system_partition.html" class="mw-redirect" title="ESP">ESP</a>. Enter the <a href="../en/Unified_Extensible_Firmware_Interface.html#UEFI_Shell" class="mw-redirect" title="UEFI shell">UEFI shell</a> and run <code>modelist.efi</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">Shell&gt; FS0:\modelist.efi</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">GOP reports MaxMode 3
 0: 640x480 BGRR pitch 640
*1: 800x600 BGRR pitch 800
 2: 1024x768 BGRR pitch 1024
</pre>
<p>Set one in <code>refind.conf</code>. Reboot and check if settings has been applied by running <code>dmesg | grep efifb</code> as root.
</p>
<h3><span class="mw-headline" id="Btrfs_subvolume_support">Btrfs subvolume support</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> make sure <code>btrfs_x64.efi</code> driver is installed, it can be installed manually by copying from <code>/usr/share/refind/drivers_x64/btrfs_x64.efi</code> to <code><i>esp</i>/EFI/refind/drivers_x64/btrfs_x64.efi</code>, or you can install all drivers with the <code>refind-install /dev/sdx --alldrivers</code> option.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> <code>btrfs_x64.efi</code> does not support <code>raid1c3/4</code>.</div>
<h4><span class="mw-headline" id="Auto_detection">Auto detection</span></h4>
<p>To allow kernel auto detection on a Btrfs subvolume uncomment and edit <code>also_scan_dirs</code> in <code>refind.conf</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/EFI/refind/refind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
also_scan_dirs +,<i>subvolume</i>/boot
...
</pre>
<p>Next add <code>subvol=<i>subvolume</i></code> to <code>rootflags</code> in <code>refind_linux.conf</code> and then prepend <code><i>subvolume</i></code> to the initrd path.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/refind_linux.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">"Boot using standard options"  "root=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</i> rw <b>rootflags=subvol=<i>subvolume</i></b> initrd=<i><b>subvolume</b></i>\boot\initramfs-%v.img"</pre>
<h4><span class="mw-headline" id="Manual_boot_stanza">Manual boot stanza</span></h4>
<p>If booting a <a href="../en/Btrfs.html" title="Btrfs">btrfs</a> subvolume as root, prepend the path to the subvolume to the loader and initrd paths, and amend the <code>options</code> line with <code>rootflags=subvol=<i>root_subvolume</i></code>. In the example below, root has been mounted as a btrfs subvolume called 'ROOT' (e.g. <code>mount -o subvol=ROOT /dev/sdxY /mnt</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/EFI/refind/refind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
menuentry "Arch Linux" {
        icon     /EFI/refind/icons/os_arch.png
        volume   "[bootdevice]"
        loader   <b>/ROOT</b>/boot/vmlinuz-linux
        initrd   <b>/ROOT</b>/boot/initramfs-linux.img
        options  "root=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</i> rw <b>rootflags=subvol=ROOT</b>"
...
}</pre>
<p>A failure to do so will otherwise result in the following error message: <code>ERROR: Root device mounted successfully, but /sbin/init does not exist.</code>
</p>
<h3><span class="mw-headline" id="LoaderDevicePartUUID">LoaderDevicePartUUID</span></h3>
<p>Since version 0.13.1, rEFInd supports setting the UEFI variable <a rel="nofollow" class="external text" href="https://systemd.io/BOOT_LOADER_INTERFACE/">LoaderDevicePartUUID</a>. Enabling this allows <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-gpt-auto-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-gpt-auto-generator.8">systemd-gpt-auto-generator(8)</a></span> to automount the EFI system partition without needing to specify it in <code>/etc/fstab</code>. See <a href="../en/Systemd.html#GPT_partition_automounting" title="Systemd">systemd#GPT partition automounting</a>.
</p>
<p>For rEFInd to set <code>LoaderDevicePartUUID</code>, edit <code>refind.conf</code> and uncomment <code>write_systemd_vars true</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/EFI/refind/refind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
write_systemd_vars true
...</pre>
<p>You can verify if it is set by checking its value with <code>cat /sys/firmware/efi/efivars/LoaderDevicePartUUID-4a67b082-0a4c-41cf-b6c7-440b29bb8c4f</code> or by looking at the state of "Boot loader sets ESP information" in <code>bootctl</code> output.
</p>
<h3><span class="mw-headline" id="ISO_images">ISO images</span></h3>
<p>rEFInd does not support booting ISO files since it <a rel="nofollow" class="external text" href="https://sourceforge.net/p/refind/discussion/general/thread/60e840f4/">lacks a loopback driver</a>, but it can boot a ISO image that has been directly written to a partition. This requires the <code>iso9660_x64.efi</code> driver.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Apple_Macs">Apple Macs</span></h3>
<p>Use <i>bless</i> from within macOS to set rEFInd as the default boot entry:
</p>
<pre># bless --setBoot --folder <i>esp</i>/EFI/refind --file <i>esp</i>/EFI/refind/refind_x64.efi
</pre>
<h3><span class="mw-headline" id="Blank_rEFInd_menu_screen">Blank rEFInd menu screen</span></h3>
<p>If your <code>drivers_x64</code> folder contains multiple file system drivers (see <a href="#Installing_the_rEFInd_Boot_Manager">#Installing the rEFInd Boot Manager</a> for clarification), this can lead to an improper functioning of rEFInd through a file system driver bug, whereby only a blank screen and with the rEFInd logo is shown (for custom themes, this would be the set background image). To fix this, simply remove all drivers <b>except the one for the file system on which the kernel resides</b>.
</p>
<p>Another potential blank screen cause occurs when dual booting with Windows, where rEFInd is unsuccessful in auto-scanning the EFI system partitions on other disks. To remedy this, use <i>blkid</i> to identify Windows partitions, and add the <a href="../en/Persistent_block_device_naming.html#by-partuuid" class="mw-redirect" title="PARTUUID">PARTUUID</a> of each Windows partition as a comma-separated entry to the variable <code>dont_scan_volumes</code> in <code>refind.conf</code>. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># blkid</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/nvme0n1p1: LABEL="SYSTEM" UUID="4CE7-C215" BLOCK_SIZE="512" TYPE="vfat" PARTLABEL="EFI system partition" PARTUUID="<b>13aa9955-1234-5678-9098-006c334b5088</b>"
/dev/nvme0n1p5: LABEL="Windows RE Tools" BLOCK_SIZE="512" UUID="08C4E6C5C4E6B45A" TYPE="ntfs" PARTLABEL="Basic data partition" PARTUUID="<b>4eced110-0987-6543-2123-b0ab8576869b</b>"</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/EFI/refind/refind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
dont_scan_volumes 13aa9955-1234-5678-9098-006c334b5088,4eced110-0987-6543-2123-b0ab8576869b
...</pre>
<h3><span class="mw-headline" id="Not_using_the_distribution_logo">Not using the distribution logo</span></h3>
<p>If you see <a href="https://en.wikipedia.org/wiki/Tux_(mascot)" class="extiw" title="wikipedia:Tux (mascot)">Tux</a> instead of the Arch Logo, then you might be affected by <a rel="nofollow" class="external text" href="https://sourceforge.net/p/refind/discussion/general/thread/767ddd52/">this issue</a> (your root partition is of type <i>Linux x86-64 root (/)</i> instead of <i>Linux filesystem</i>).
</p>
<p>You can fix this using <a href="../en/Fdisk.html#Change_partition_type" title="Fdisk">fdisk#Change partition type</a>. 
</p>
<p>Additionally, if your root partition's label is simply "Linux" or if it contains the word "linux," Tux may be displayed. To specify the name of your distribution, consider renaming the partition label to reflect your distribution's name. 
</p>
<p>You can fix this using a <a href="../en/Persistent_block_device_naming.html#by-label" title="Persistent block device naming">file system label</a>.
</p>
<p>Another way to get the Arch Logo instead of Tux, is to copy the Arch Logo image file next to your kernel (e.g. <code>vmlinuz-linux</code>) and give the image file the same name as your kernel. 
</p>
<pre># cp /usr/share/refind/icons/os_arch.png /boot/vmlinuz-linux.png
</pre>
<h3><span class="mw-headline" id="Error:_Not_Found_while_loading_vmlinuz-linux">Error: Not Found while loading vmlinuz-linux</span></h3>
<p>If you add a menuentry and set the volume token correctly but still received the "Error: Not Found while loading vmlinuz-linux" message, you may need to check if driver for the file system on which kernel resides is correctly installed. Remember unsupported filesystem will not be detected, even if they are in the configuration file.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://www.rodsbooks.com/refind/">The rEFInd Boot Manager</a> by Roderick W. Smith.</li>
<li><a href="https://en.wikipedia.org/wiki/rEFInd" class="extiw" title="wikipedia:rEFInd">Wikipedia:rEFInd</a></li>
<li><code>/usr/share/refind/docs/README.txt</code></li>
<li><a rel="nofollow" class="external text" href="https://sourceforge.net/p/refind/discussion/">rEFInd discussion forum on Sourceforge</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Boot_loaders.html" title="Category:Boot loaders">Boot loaders</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=REFInd&amp;oldid=830007">https://wiki.archlinux.org/index.php?title=REFInd&amp;oldid=830007</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 28 March 2025, at 07:28.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
