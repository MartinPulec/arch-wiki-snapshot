<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Hybrid graphics - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Hybrid_graphics rootpage-Hybrid_graphics skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Dynamic_switching" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Dynamic_switching">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Dynamic switching</span>
			</div>
		</a>
		
			<button aria-controls="toc-Dynamic_switching-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dynamic switching subsection</span>
			</button>
		
		<ul id="toc-Dynamic_switching-sublist" class="vector-toc-list">
			<li id="toc-Fully_power_down_discrete_GPU" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fully_power_down_discrete_GPU">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Fully power down discrete GPU</span>
				</div>
			</a>
			
			<ul id="toc-Fully_power_down_discrete_GPU-sublist" class="vector-toc-list">
				<li id="toc-Using_BIOS/UEFI" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_BIOS/UEFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.1</span>
					<span>Using BIOS/UEFI</span>
				</div>
			</a>
			
			<ul id="toc-Using_BIOS/UEFI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_udev_rules" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_udev_rules">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.2</span>
					<span>Using udev rules</span>
				</div>
			</a>
			
			<ul id="toc-Using_udev_rules-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_bbswitch" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_bbswitch">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.3</span>
					<span>Using bbswitch</span>
				</div>
			</a>
			
			<ul id="toc-Using_bbswitch-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_acpi_call" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_acpi_call">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.4</span>
					<span>Using acpi_call</span>
				</div>
			</a>
			
			<ul id="toc-Using_acpi_call-sublist" class="vector-toc-list">
				<li id="toc-Turning_off_the_GPU_automatically" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Turning_off_the_GPU_automatically">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.4.1</span>
					<span>Turning off the GPU automatically</span>
				</div>
			</a>
			
			<ul id="toc-Turning_off_the_GPU_automatically-sublist" class="vector-toc-list">
				<li id="toc-At_boot" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#At_boot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.4.1.1</span>
					<span>At boot</span>
				</div>
			</a>
			
			<ul id="toc-At_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-After_X_server_initialization" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#After_X_server_initialization">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.4.1.2</span>
					<span>After X server initialization</span>
				</div>
			</a>
			
			<ul id="toc-After_X_server_initialization-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-System76" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#System76">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>System76</span>
				</div>
			</a>
			
			<ul id="toc-System76-sublist" class="vector-toc-list">
				<li id="toc-Fully_power_down_discrete_GPU_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Fully_power_down_discrete_GPU_2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.1</span>
					<span>Fully power down discrete GPU</span>
				</div>
			</a>
			
			<ul id="toc-Fully_power_down_discrete_GPU_2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-The_startup_time_for_certain_applications_is_delayed_by_30_seconds" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#The_startup_time_for_certain_applications_is_delayed_by_30_seconds">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>The startup time for certain applications is delayed by 30 seconds</span>
				</div>
			</a>
			
			<ul id="toc-The_startup_time_for_certain_applications_is_delayed_by_30_seconds-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-High_power_draw_even_after_disabling_NVIDIA_discrete_GPU" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#High_power_draw_even_after_disabling_NVIDIA_discrete_GPU">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>High power draw even after disabling NVIDIA discrete GPU</span>
				</div>
			</a>
			
			<ul id="toc-High_power_draw_even_after_disabling_NVIDIA_discrete_GPU-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Hybrid graphics</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Hybrid_graphics.html" title="Hybrid graphics – español" lang="es" hreflang="es" data-title="Hybrid graphics" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%83%8F%E3%82%A4%E3%83%96%E3%83%AA%E3%83%83%E3%83%89%E3%82%B0%E3%83%A9%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E3%82%B9" title="ハイブリッドグラフィックス – 日本語" lang="ja" hreflang="ja" data-title="ハイブリッドグラフィックス" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Hybrid_graphics.html" title="Hybrid graphics – русский" lang="ru" hreflang="ru" data-title="Hybrid graphics" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Hybrid_graphics" title="Hybrid graphics – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Hybrid graphics" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/NVIDIA_Optimus.html" title="NVIDIA Optimus">NVIDIA Optimus</a></li>
<li><a href="../en/PRIME.html" title="PRIME">PRIME</a></li>
<li><a href="../en/Xorg.html" title="Xorg">Xorg</a></li>
<li><a href="../en/External_GPU.html" title="External GPU">External GPU</a></li>
</ul>
</div>
<p>Hybrid-graphics is a concept involving two graphics cards on same computer. Laptop manufacturers have developed technologies involving two graphics cards with different abilities and power consumption on a single computer. Hybrid-graphics has been developed to support both high performance and power saving use cases by keeping the Dedicated/Discrete Graphics Processor inactive unless its 3D rendering performance is needed over the Integrated Graphics Processor.
</p>
<p>There are a variety of technologies and each manufacturer developed its own solution to this problem. This technology is well supported on Windows but it is still rough around the edges with Linux distributions. This article will try to explain a little about each approach and describe some community solutions to the lack of GNU/Linux systems support by vendors.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Unless your setup is from before 2010, it likely is using a dynamic switching model. Previous hybrid graphics solutions involved either a reboot for the crudest or a full graphical stack restart which needed a re-log for taking effect.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Dynamic_switching">Dynamic switching</span></h2>
<p>Most of the new Hybrid-graphics technologies involve two graphics cards: the dedicated and integrated cards are plugged to a framebuffer and there is no hardware multiplexer. The integrated card is always on and the dedicated card is switched on/off when there is a need in power-save or performance-rendering. In most cases there is no way to use <i>only</i> the dedicated card and all the switching and rendering is controlled by software.
At startup, the Linux kernel starts using a video mode and setting up low-level graphic drivers which will be used by the applications. Most of the Linux distributions then use X.org to create a graphical environment. Finally, a few other softwares are launched, first a login manager and then a window manager, and so on. This hierarchical system has been designed to be used in most of cases on a single graphics card.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Read <a href="../en/NVIDIA_Optimus.html" title="NVIDIA Optimus">NVIDIA Optimus</a> and <a href="../en/Bumblebee.html" title="Bumblebee">Bumblebee</a> for details about NVIDIA using hybrid graphics with NVIDIA’s proprietary driver. Read <a href="../en/PRIME.html" title="PRIME">PRIME</a> for basically everything else (like AMD or NVIDIA GPUs with the <a href="../en/Nouveau.html" title="Nouveau">nouveau</a> driver).</div>
<h3><span class="mw-headline" id="Fully_power_down_discrete_GPU">Fully power down discrete GPU</span></h3>
<p>You may want to turn off the high-performance graphics processor to save battery power.
</p>
<h4>
<span id="Using_BIOS.2FUEFI"></span><span class="mw-headline" id="Using_BIOS/UEFI">Using BIOS/UEFI</span>
</h4>
<p>Some laptop manufacturers provide a toggle in the BIOS or UEFI to fully deactivate the dedicated card.
</p>
<h4><span class="mw-headline" id="Using_udev_rules">Using udev rules</span></h4>
<p>Ensure any display manager config for NVIDIA is removed.
</p>
<p>Blacklist the nouveau drivers by creating
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist-nouveau.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist nouveau
options nouveau modeset=0</pre>
<p>Then create
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/00-remove-nvidia.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Remove NVIDIA USB xHCI Host Controller devices, if present
ACTION=="add", SUBSYSTEM=="pci", ATTR{vendor}=="0x10de", ATTR{class}=="0x0c0330", ATTR{power/control}="auto", ATTR{remove}="1"

# Remove NVIDIA USB Type-C UCSI devices, if present
ACTION=="add", SUBSYSTEM=="pci", ATTR{vendor}=="0x10de", ATTR{class}=="0x0c8000", ATTR{power/control}="auto", ATTR{remove}="1"

# Remove NVIDIA Audio devices, if present
ACTION=="add", SUBSYSTEM=="pci", ATTR{vendor}=="0x10de", ATTR{class}=="0x040300", ATTR{power/control}="auto", ATTR{remove}="1"

# Remove NVIDIA VGA/3D controller devices
ACTION=="add", SUBSYSTEM=="pci", ATTR{vendor}=="0x10de", ATTR{class}=="0x03[0-9]*", ATTR{power/control}="auto", ATTR{remove}="1"</pre>
<p>Reboot and run <code>lspci</code> to see if your NVIDIA GPU is still listed.
</p>
<p>Check power usage to ensure your GPU is not drawing power, if it does <a href="#Using_acpi_call">#Using acpi_call</a> may be another option to fully power it down.
</p>
<h4><span class="mw-headline" id="Using_bbswitch">Using bbswitch</span></h4>
<p>With an NVIDIA GPU, this can be more safely done using <a href="../en/Bumblebee.html#Power_management" class="mw-redirect" title="Bbswitch">bbswitch</a>, which consists of a kernel package that automatically issues the correct ACPI calls to disable the discrete GPU when not needed, or automatically at boot.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> bbswitch does not work with the PCI-E port power management method since kernel 4.8. See <a href="../en/Bumblebee.html#Broken_power_management_with_kernel_4.8" title="Bumblebee">Bumblebee#Broken power management with kernel 4.8</a> for details.</div>
<h4><span class="mw-headline" id="Using_acpi_call">Using acpi_call</span></h4>
<p>Otherwise, and for GPUs not supported by bbswitch, the same can be done manually installing the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpi_call">acpi_call</a></span> package.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For kernels not in the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a>, the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpi_call-dkms">acpi_call-dkms</a></span> is an alternative. See also <a href="../en/Dynamic_Kernel_Module_Support.html" class="mw-redirect" title="DKMS">DKMS</a>.</div>
<p>Once installed load the kernel module:
</p>
<pre># modprobe acpi_call
</pre>
<p>With the kernel module loaded, execute the script at <code>/usr/share/acpi_call/examples/turn_off_gpu.sh</code>
</p>
<p>The script will go through all the known data buses and attempt to turn them off. You will get an output similar to the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># /usr/share/acpi_call/examples/turn_off_gpu.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Trying \_SB.PCI0.P0P1.VGA._OFF: failed
Trying \_SB.PCI0.P0P2.VGA._OFF: failed
Trying \_SB_.PCI0.OVGA.ATPX: failed
Trying \_SB_.PCI0.OVGA.XTPX: failed
Trying \_SB.PCI0.P0P3.PEGP._OFF: failed
Trying \_SB.PCI0.P0P2.PEGP._OFF: failed
Trying \_SB.PCI0.P0P1.PEGP._OFF: failed
Trying \_SB.PCI0.MXR0.MXM0._OFF: failed
Trying \_SB.PCI0.PEG1.GFX0._OFF: failed
Trying \_SB.PCI0.PEG0.GFX0.DOFF: failed
Trying \_SB.PCI0.PEG1.GFX0.DOFF: failed
<b>Trying \_SB.PCI0.PEG0.PEGP._OFF: works!</b>
Trying \_SB.PCI0.XVR0.Z01I.DGOF: failed
Trying \_SB.PCI0.PEGR.GFX0._OFF: failed
Trying \_SB.PCI0.PEG.VID._OFF: failed
Trying \_SB.PCI0.PEG0.VID._OFF: failed
Trying \_SB.PCI0.P0P2.DGPU._OFF: failed
Trying \_SB.PCI0.P0P4.DGPU.DOFF: failed
Trying \_SB.PCI0.IXVE.IGPU.DGOF: failed
Trying \_SB.PCI0.RP00.VGA._PS3: failed
Trying \_SB.PCI0.RP00.VGA.P3MO: failed
Trying \_SB.PCI0.GFX0.DSM._T_0: failed
Trying \_SB.PCI0.LPC.EC.PUBS._OFF: failed
Trying \_SB.PCI0.P0P2.NVID._OFF: failed
Trying \_SB.PCI0.P0P2.VGA.PX02: failed
Trying \_SB_.PCI0.PEGP.DGFX._OFF: failed
Trying \_SB_.PCI0.VGA.PX02: failed</pre>
<p>See the "works"? This means the script found a bus which your GPU sits on and it has now turned off the chip. To confirm this, your battery time remaining should have increased.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If you are experiencing trouble hibernating or suspending the system after disabling the GPU, try to enable it again by sending the corresponding acpi_call. See also <a href="../en/Power_management/Suspend_and_hibernate.html#Custom_systemd_units" title="Power management/Suspend and hibernate">Power management/Suspend and hibernate#Custom systemd units</a>.</div>
<h5><span class="mw-headline" id="Turning_off_the_GPU_automatically">Turning off the GPU automatically</span></h5>
<p>Currently, the chip will turn back on with the next reboot. To get around this, <a href="../en/Kernel_module.html#Automatic_module_loading" class="mw-redirect" title="Load the module at boot">load the module at boot</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/acpi_call.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#Load 'acpi_call.ko' at boot.
acpi_call
</pre>
<h6><span class="mw-headline" id="At_boot">At boot</span></h6>
<p>To turn off the GPU at boot it is possible to use <a href="../en/Systemd.html#systemd-tmpfiles_-_temporary_files" class="mw-redirect" title="Systemd-tmpfiles">systemd-tmpfiles</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/acpi_call.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

w /proc/acpi/call - - - - <i>\\_SB.PCI0.PEG0.PEGP._OFF</i></pre>
<p>The configuration above will be loaded at boot by systemd. What it does is write the specific OFF signal to the <code>/proc/acpi/call</code> file. Obviously, replace the <code>\_SB.PCI0.PEG0.PEGP._OFF</code> with the one which works on your system (please note that you need to escape the backslash).
</p>
<h6><span class="mw-headline" id="After_X_server_initialization">After X server initialization</span></h6>
<p>On some systems, turning off the discrete GPU before the X server is initialized may hang the system. In such cases, it may be better to disable the GPU after X server initialization, which is possible with some display managers. In <a href="../en/LightDM.html" title="LightDM">LightDM</a>, for instance, the <i>display-setup-script</i> seat configuration parameter could be used to execute a script as root that disables the GPU. If you use <a href="../en/SDDM.html" title="SDDM">SDDM</a> then you can add the line <code>echo "\_SB.PCI0.PEG0.PEGP._OFF" &gt; /proc/acpi/call</code> to either <code>/usr/share/sddm/scripts/wayland-session</code> or <code>/usr/share/sddm/scripts/Xsession</code> depending if you use <a href="../en/Wayland.html" title="Wayland">Wayland</a> or <a href="../en/Xorg.html" title="Xorg">Xorg</a>, replacing <code>\_SB.PCI0.PEG0.PEGP._OFF</code> with the one which works on your system.
</p>
<h3><span class="mw-headline" id="System76">System76</span></h3>
<p>Some System76 laptops (like the <a href="../en/System76_Oryx_Pro.html" title="System76 Oryx Pro">Oryx Pro</a>) have their own unique hybrid graphics option.  To make use of it, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/system76-power/">system76-power</a></span><sup><small>AUR</small></sup>, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>system76-power.service</code>, and run <code>system76-power graphics hybrid</code>.
</p>
<h4><span class="mw-headline" id="Fully_power_down_discrete_GPU_2">Fully power down discrete GPU</span></h4>
<p>First ensure you are using integrated graphics mode by running <code>system76-power graphics integrated</code> and rebooting. Once in integrated mode, to power down the discrete graphics card run <code>system76-power graphics power off</code>. This command is not persistent and will need to be run after each boot.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="The_startup_time_for_certain_applications_is_delayed_by_30_seconds">The startup time for certain applications is delayed by 30 seconds</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a>.</b></p>
<div>
<b>Notes:</b> This seems very similar to <a href="../en/Vulkan.html#AMDGPU_-_Vulkan_applications_launch_slowly" title="Vulkan">Vulkan#AMDGPU - Vulkan applications launch slowly</a>, except it completely unsets the variable instead of passing it the proper value depending on the iGPU used. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Hybrid_graphics.html">Talk:Hybrid graphics</a>)</div>
</div>
<p>When invoked, <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> attempts to initialize the Installable Client Driver (ICD) specified in <code>/usr/share/vulkan/icd.d/nvidia_icd.json</code>. The package  <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-utils">nvidia-utils</a></span> configures this file to reference the <code>libGLX_nvidia</code> driver, providing Vulkan with information about the GPU driver's path. However, if the GPU is disabled, initialization of this driver will fail, causing certain applications (e.g., those based on <a href="../en/Chromium.html" title="Chromium">Chromium</a>/<a href="../en/Electron.html" title="Electron">Electron</a>) to undergo delayed startup until a 30-second timeout is reached. To prevent Vulkan from attempting to load the driver in the first place and thus mitigate this timeout, you can override the location of the ICD JSON file using the <code>VK_DRIVER_FILES</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a>. To unset it, use:
</p>
<pre>$ export VK_DRIVER_FILES=
</pre>
<h3><span class="mw-headline" id="High_power_draw_even_after_disabling_NVIDIA_discrete_GPU">High power draw even after disabling NVIDIA discrete GPU</span></h3>
<p>If after disabling the dedicated GPU bus <a href="#Using_acpi_call">#Using acpi_call</a> the power draw is still high, check if the <a href="../en/Nouveau.html" title="Nouveau">nouveau</a> kernel module is loaded with <code>lsmod</code>. If it is not then make sure its installed, that any entries in .conf files that blacklist Nouveau in <code>/etc/modprobe.d/</code> are removed and that the Nouveau kernel module is <a href="../en/Kernel_module.html#Automatic_module_loading" title="Kernel module">automatically loaded</a> at boot. After rebooting the power draw should be lower. 
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> See also <a href="../en/Kernel_module.html" title="Kernel module">kernel module</a> for more details about kernel module loading and blacklisting.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If after rebooting you have issues with brightness control and have multiple directories in <code>/sys/class/backlight</code>, add line <code>acpi_backlight=native</code> to your <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.</div>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Hybrid_graphics&amp;oldid=824051">https://wiki.archlinux.org/index.php?title=Hybrid_graphics&amp;oldid=824051</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 26 December 2024, at 22:29.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
