<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>fish - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Fish rootpage-Fish skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-System_integration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#System_integration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>System integration</span>
			</div>
		</a>
		
			<button aria-controls="toc-System_integration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle System integration subsection</span>
			</button>
		
		<ul id="toc-System_integration-sublist" class="vector-toc-list">
			<li id="toc-Setting_fish_as_default_shell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_fish_as_default_shell">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Setting fish as default shell</span>
				</div>
			</a>
			
			<ul id="toc-Setting_fish_as_default_shell-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Setting_fish_as_interactive_shell_only" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_fish_as_interactive_shell_only">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Setting fish as interactive shell only</span>
				</div>
			</a>
			
			<ul id="toc-Setting_fish_as_interactive_shell_only-sublist" class="vector-toc-list">
				<li id="toc-Modify_.bashrc_to_drop_into_fish" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Modify_.bashrc_to_drop_into_fish">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Modify .bashrc to drop into fish</span>
				</div>
			</a>
			
			<ul id="toc-Modify_.bashrc_to_drop_into_fish-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_terminal_emulator_options" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Use_terminal_emulator_options">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Use terminal emulator options</span>
				</div>
			</a>
			
			<ul id="toc-Use_terminal_emulator_options-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_terminal_multiplexer_options" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Use_terminal_multiplexer_options">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.3</span>
					<span>Use terminal multiplexer options</span>
				</div>
			</a>
			
			<ul id="toc-Use_terminal_multiplexer_options-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Web_interface" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Web_interface">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Web interface</span>
				</div>
			</a>
			
			<ul id="toc-Web_interface-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Command_completion" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Command_completion">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Command completion</span>
				</div>
			</a>
			
			<ul id="toc-Command_completion-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Command_substitution" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Command_substitution">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Command substitution</span>
				</div>
			</a>
			
			<ul id="toc-Command_substitution-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_greeting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_greeting">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Disable greeting</span>
				</div>
			</a>
			
			<ul id="toc-Disable_greeting-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Make_su_launch_fish" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Make_su_launch_fish">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Make su launch fish</span>
				</div>
			</a>
			
			<ul id="toc-Make_su_launch_fish-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Start_X_at_login" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Start_X_at_login">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Start X at login</span>
				</div>
			</a>
			
			<ul id="toc-Start_X_at_login-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Put_git_status_in_prompt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Put_git_status_in_prompt">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Put git status in prompt</span>
				</div>
			</a>
			
			<ul id="toc-Put_git_status_in_prompt-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Color_the_hostname_in_the_prompt_in_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Color_the_hostname_in_the_prompt_in_SSH">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>Color the hostname in the prompt in SSH</span>
				</div>
			</a>
			
			<ul id="toc-Color_the_hostname_in_the_prompt_in_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Evaluate_ssh-agent" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Evaluate_ssh-agent">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7</span>
					<span>Evaluate ssh-agent</span>
				</div>
			</a>
			
			<ul id="toc-Evaluate_ssh-agent-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Evaluate_keychain" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Evaluate_keychain">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8</span>
					<span>Evaluate keychain</span>
				</div>
			</a>
			
			<ul id="toc-Evaluate_keychain-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-The_&quot;command_not_found&quot;_hook" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#The_&quot;command_not_found&quot;_hook">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9</span>
					<span>The "command not found" hook</span>
				</div>
			</a>
			
			<ul id="toc-The_&quot;command_not_found&quot;_hook-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Remove_a_process_from_the_list_of_jobs" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remove_a_process_from_the_list_of_jobs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.10</span>
					<span>Remove a process from the list of jobs</span>
				</div>
			</a>
			
			<ul id="toc-Remove_a_process_from_the_list_of_jobs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Set_a_persistent_alias" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Set_a_persistent_alias">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.11</span>
					<span>Set a persistent alias</span>
				</div>
			</a>
			
			<ul id="toc-Set_a_persistent_alias-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Source_/etc/profile_on_login" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Source_/etc/profile_on_login">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.12</span>
					<span>Source /etc/profile on login</span>
				</div>
			</a>
			
			<ul id="toc-Source_/etc/profile_on_login-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">fish</h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Command-line_shell.html" title="Command-line shell">Command-line shell</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://fishshell.com">fish</a>, the <i><b>f</b>riendly <b>i</b>nteractive <b>sh</b>ell</i>, is a <a href="../en/Command-line_shell.html" title="Command-line shell">commandline shell</a> intended to be interactive and user-friendly.
</p>
<p><i>fish</i> is intentionally not fully <a href="https://en.wikipedia.org/wiki/POSIX" class="extiw" title="wikipedia:POSIX">POSIX</a> compliant, it aims at addressing POSIX inconsistencies (as perceived by the creators) with a simplified or a different syntax. This means that even simple POSIX compliant scripts may require some significant adaptation or even full rewriting to run with fish.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Installation">Installation</h2></div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fish">fish</a></span> package.
</p>
<p>Once installed, simply type <code>fish</code> to drop into the fish shell.
</p>
<p>Documentation can be found by typing <code>help</code> from fish; it will be opened in a web browser. It is recommended to read at least the "Syntax overview" section, since fish's syntax is different from many other shells.
</p>
<div class="mw-heading mw-heading2"><h2 id="System_integration">System integration</h2></div>
<p>One must decide whether fish is going to be the default user's shell, which means that the user falls directly in fish at login, or whether it is used in interactive terminal mode as a child process of the current default shell, here we will assume the latter is <a href="../en/Bash.html" title="Bash">Bash</a>. To elaborate on these two setups:
</p>
<ul>
<li>fish used as the <b>default shell</b>: this mode requires some basic understanding of the fish functioning and its scripting language. The user's current initialization scripts and environment variables need to be migrated to the new fish environment. To configure the system in this mode, follow <a href="#Setting_fish_as_default_shell">#Setting fish as default shell</a>.</li>
<li>fish used as an <b>interactive shell only</b>: this is the less disruptive mode, all the Bash initialization scripts are run as usual and fish runs on top of Bash in interactive mode connected to a terminal. To setup fish in this mode, follow <a href="#Setting_fish_as_interactive_shell_only">#Setting fish as interactive shell only</a>.</li>
</ul>
<div class="mw-heading mw-heading3"><h3 id="Setting_fish_as_default_shell">Setting fish as default shell</h3></div>
<p>If you decide to set fish as the default user shell, the first step is to set the shell of this particular user to <code>/usr/bin/fish</code>. This can be done by following the instructions in <a href="../en/Command-line_shell.html#Changing_your_default_shell" title="Command-line shell">Command-line shell#Changing your default shell</a>.
</p>
<p>The next step is to port the current needed actions and configuration performed in the various Bash initialization scripts, namely <code>/etc/profile</code>, <code>~/.bash_profile</code>, <code>/etc/bash.bashrc</code> and <code>~/.bashrc</code>, into the fish framework.
</p>
<p>In particular, the content of the <code>$PATH</code> environment variable, once directly logged under fish, should be checked and adjusted to one's need. In fish, <code>$PATH</code> is defined as a <i>global environment variable</i>: it has a <i>global</i> scope across all functions, it is lost upon reboot and it is an <i>environment variable</i> which means it is exported to child processes. The recommended way of adding additional locations to the path is by calling the <a rel="nofollow" class="external text" href="https://fishshell.com/docs/current/cmds/fish_add_path.html">fish_add_path</a> command from <code>config.fish</code>. For example:
</p>
<pre>$ fish_add_path -p <i>/first/path</i> <i>/second/path</i> <i>/third/one</i>
</pre>
<p>These three locations will be prepended to the path.
</p>
<div class="mw-heading mw-heading3"><h3 id="Setting_fish_as_interactive_shell_only">Setting fish as interactive shell only</h3></div>
<p>Not setting fish as system wide or user default allows the current Bash scripts to run on startup. It ensures the current user's environment variables are unchanged and are exported to fish which then runs as a Bash child. Below are several ways of running fish in interactive mode without setting it as the default shell.
</p>
<div class="mw-heading mw-heading4"><h4 id="Modify_.bashrc_to_drop_into_fish">Modify .bashrc to drop into fish</h4></div>
<p>Keep Bash as the default shell and simply add the line <code>exec fish</code> to the appropriate <a href="../en/Bash.html#Configuration_files" title="Bash">Bash#Configuration files</a>, such as <code>.bashrc</code>. This will allow Bash to properly source <code>/etc/profile</code> and all files in <code>/etc/profile.d</code>. Because fish replaces the Bash process, exiting fish will also exit the terminal. Compared to the following options, this is the most universal solution, since it works both on a local machine and on a SSH server.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> 
<ul>
<li>In this setup, use <code>bash --norc</code> to manually enter Bash without executing the commands from <code>~/.bashrc</code> which would run <code>exec fish</code> and drop back into fish.</li>
<li>Alternatively, you can add checks to drop into fish only if the parent process is not fish. This way you can quickly enter into bash by invoking <code>bash</code> command without losing <code>~/.bashrc</code> configuration.</li>
<li>You might also want to check the <code>$SHLVL</code> variable before dropping into fish. It will prevent unwanted "bash-fish alternation" when nesting shells (useful if you use programs like <code>nix-shell</code>). Note that, depending on how you start your GUI session (e.g. from <a href="../en/Display_manager.html" title="Display manager">display manager</a> or <a href="../en/Xinit.html#Autostart_X_at_login" title="Xinit"> from tty</a>, with or without <code>exec</code>), <code>$SHLVL</code> might equal to <code>2</code> rather than <code>1</code>.</li>
<li>In order to let fish know whether it is a login shell, you can detect login shell status in <code>~/.bashrc</code> and pass on the <code>--login</code> option to fish. The fish shell command <code>status</code> can be used to show the status.</li>
</ul>
<p>To add this logic to your <code>~/.bashrc</code>, you can use the following:
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> This script seems to contain unjustified code: does fish really need to know whether it's a login shell? Let's either remove that part (if it's actually unneeded) or add a little explanation.  (Discuss in <a href="../en/Talk:Fish.html#provided_.bashrc_is_questionable" title="Talk:Fish">Talk:Fish#provided_.bashrc_is_questionable</a>)</div>
</div>
<pre>if grep -qv 'fish' /proc/$PPID/comm &amp;&amp; [[ ${SHLVL} == [1,2] ]]
then
	shopt -q login_shell &amp;&amp; LOGIN_OPTION='--login' || LOGIN_OPTION=''
	exec fish $LOGIN_OPTION
fi</pre>
</div>
<div class="mw-heading mw-heading4"><h4 id="Use_terminal_emulator_options">Use terminal emulator options</h4></div>
<p>Another option is to open your terminal emulator with a command line option that executes fish. For most terminals this is the <code>-e</code> switch, so for example, to open gnome-terminal using fish, change your shortcut to use:
</p>
<pre>gnome-terminal -e fish
</pre>
<p>With terminal emulators that do not support setting the shell, for example <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lilyterm-git/">lilyterm-git</a></span><sup><small>AUR</small></sup>, it would look like this:
</p>
<pre>SHELL=/usr/bin/fish lilyterm
</pre>
<p>Also, depending on the terminal, you may be able to set fish as the default shell in either the terminal configuration or the terminal profile.
</p>
<div class="mw-heading mw-heading4"><h4 id="Use_terminal_multiplexer_options">Use terminal multiplexer options</h4></div>
<p>To set fish as the shell started in <a href="../en/Tmux.html" title="Tmux">tmux</a>, put this into your <code>~/.tmux.conf</code>:
</p>
<pre>set-option -g default-shell "/usr/bin/fish"
</pre>
<p>Whenever you run <i>tmux</i>, you will be dropped into fish.
</p>
<div class="mw-heading mw-heading2"><h2 id="Configuration">Configuration</h2></div>
<p>The configuration file runs at every login and is located at <code>~/.config/fish/config.fish</code>. Adding commands or functions to the file will execute/define them when opening a terminal, similar to <code>.bashrc</code>. Note that whenever a variable needs to be preserved, it should be set as <i>universal</i> rather than defined in the aforementioned configuration file.
</p>
<p>The user's functions are located in the directory <code>~/.config/fish/functions</code> under the filenames <code><i>function_name</i>.fish</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Web_interface">Web interface</h3></div>
<p>The fish terminal colors, prompt, functions, variables, history, bindings and abbreviations can be set with the interactive web interface:
</p>
<pre>fish_config
</pre>
<p>It may fail to start if IPv6 has been disabled. See <a rel="nofollow" class="external autonumber" href="https://github.com/fish-shell/fish-shell/issues/3857#issuecomment-281631629">[1]</a> and <a href="../en/IPv6.html#Disable_IPv6" title="IPv6">IPv6#Disable IPv6</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Command_completion">Command completion</h3></div>
<p>fish can generate autocompletions from man pages. Completions are written to <code>~/.cache/fish/generated_completions</code> (controlled by <a href="../en/XDG_Base_Directory.html#User_directories" title="XDG Base Directory">XDG_CACHE_HOME</a> environment variable) and can be generated by calling:
</p>
<pre>fish_update_completions
</pre>
<p>You can also define your own completions in <code>~/.config/fish/completions/</code>. See <code>/usr/share/fish/completions/</code> for a few examples.
</p>
<p>Context-aware completions for Arch Linux-specific commands like <i>pacman</i>, <i>pacman-key</i>, <i>makepkg</i>, <i>pbget</i>, <i>pacmatic</i> are built into fish, since the policy of the fish development is to include all the existent completions in the upstream tarball. The memory management is clever enough to avoid any negative impact on resources.
</p>
<div class="mw-heading mw-heading2"><h2 id="Tips_and_tricks">Tips and tricks</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Command_substitution">Command substitution</h3></div>
<p><i>fish</i> does not implement Bash style history substitution (e.g. <code>sudo !!</code>), and the developers recommend in the <a rel="nofollow" class="external text" href="https://fishshell.com/docs/current/faq.html#why-doesn-t-history-substitution-etc-work">fish faq</a> to use the interactive history recall interface instead: the <code>Up</code> arrow recalls whole past lines and <code>Alt+Up</code> (or <code>Alt+.</code>) recalls individual arguments, while <code>Alt+s</code> prepends <code>sudo</code> to the existing line.
</p>
<p>However some workarounds are described in the <a rel="nofollow" class="external text" href="https://github.com/fish-shell/fish-shell/wiki/Bash-Style-Command-Substitution-and-Chaining-(!!-!$)">fish wiki</a>: while not providing complete history substitution, some functions replace <code>!!</code> with the previous command or <code>!$</code> with the previous last argument.
</p>
<div class="mw-heading mw-heading3"><h3 id="Disable_greeting">Disable greeting</h3></div>
<p>By default, fish prints a greeting message at startup. To disable it, run once:
</p>
<pre>$ set -U fish_greeting
</pre>
<p>This clears the universal <code>fish_greeting</code> variable, shared with all fish instances and which is preserved upon restart of the shell.
</p>
<div class="mw-heading mw-heading3"><h3 id="Make_su_launch_fish">Make su launch fish</h3></div>
<p>If <i>su</i> starts with Bash because Bash is the target user's (<i>root</i> if no username is provided) default shell, one can define a function to redirect it to fish whatever the user's shell:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/fish/functions/su.fish</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">function su
   command su --shell=/usr/bin/fish $argv
end</pre>
<div class="mw-heading mw-heading3"><h3 id="Start_X_at_login">Start X at login</h3></div>
<p>Add the following to the bottom of your <code>~/.config/fish/config.fish</code>.
</p>
<pre># Start X at login
if status is-login
    if test -z "$DISPLAY" -a "$XDG_VTNR" = 1
        exec startx -- -keeptty
    end
end</pre>
<p>For those running fish in interactive mode, replace <code>status is-login</code> with <code>status is-interactive</code> in the above code.
</p>
<div class="mw-heading mw-heading3"><h3 id="Put_git_status_in_prompt">Put git status in prompt</h3></div>
<p>If you would like fish to display the branch and dirty status when you are in a git directory, you can define the following <code>fish_prompt</code> function:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/fish/functions/fish_prompt.fish</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">function fish_prompt
  set -l last_status $status

  if not set -q __fish_git_prompt_show_informative_status
    set -g __fish_git_prompt_show_informative_status 1
  end
  if not set -q __fish_git_prompt_color_branch
    set -g __fish_git_prompt_color_branch brmagenta
  end
  if not set -q __fish_git_prompt_showupstream
    set -g __fish_git_prompt_showupstream "informative"
  end
  if not set -q __fish_git_prompt_showdirtystate
    set -g __fish_git_prompt_showdirtystate "yes"
  end
  if not set -q __fish_git_prompt_color_stagedstate
    set -g __fish_git_prompt_color_stagedstate yellow
  end
  if not set -q __fish_git_prompt_color_invalidstate
    set -g __fish_git_prompt_color_invalidstate red
  end
  if not set -q __fish_git_prompt_color_cleanstate
    set -g __fish_git_prompt_color_cleanstate brgreen
  end

  printf '%s%s %s%s%s%s ' (set_color $fish_color_host) (prompt_hostname) (set_color $fish_color_cwd) (prompt_pwd) (set_color normal) (fish_git_prompt)

  if not test $last_status -eq 0
    set_color $fish_color_error
  end
  echo -n '$ '
  set_color normal
end
</pre>
<div class="mw-heading mw-heading3"><h3 id="Color_the_hostname_in_the_prompt_in_SSH">Color the hostname in the prompt in SSH</h3></div>
<p>To color the hostname in the prompt dynamically whenever connected through SSH, add the following lines in either the <code>fish_prompt</code> function or the fish configuration file, here using the red color:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/fish/functions/fish_prompt.fish</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
if set -q SSH_TTY
  set -g fish_color_host brred
end
...
</pre>
<p>Note that the default fish prompt colors the hostname yellow when connected through SSH; additional modification to the prompt is not required for this functionality.
</p>
<div class="mw-heading mw-heading3"><h3 id="Evaluate_ssh-agent">Evaluate ssh-agent</h3></div>
<p>In fish, <code>eval (ssh-agent)</code> generate errors due to how variables are set. To work around this, use the csh-style option <code>-c</code>:
</p>
<pre>$ eval (ssh-agent -c)
</pre>
<div class="mw-heading mw-heading3"><h3 id="Evaluate_keychain">Evaluate keychain</h3></div>
<p>Because <code>keychain --eval</code> uses the <code>SHELL</code> environment variable to format output, it should work with fish as the default shell. However, if using fish as an interactive shell only, this variable must be set:
</p>
<pre>$   SHELL=/bin/fish keychain --eval --quiet -Q id_ed25519 | source
</pre>
<div class="mw-heading mw-heading3"><h3 id="The_&quot;command_not_found&quot;_hook">
<span id="The_.22command_not_found.22_hook"></span>The "command not found" hook</h3></div>
<p>Fish includes a "command not found" hook that will automatically search the official repositories, when entering an unrecognized command. This hook will be run using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pkgfile">pkgfile</a></span>, falling back to <code>pacman -F</code> if it is not installed.
</p>
<p>Since 3.2.2, "command not found" will not fallback to <code>pacman -F</code> by default due to its <a rel="nofollow" class="external text" href="https://github.com/fish-shell/fish-shell/issues/7841">bad performance</a>.
</p>
<p>If the delay this behavior introduces is undesirable, this hook can be overridden by redefining <code>fish_command_not_found</code> so that it only prints an error message:
</p>
<pre>$ function fish_command_not_found
      __fish_default_command_not_found_handler $argv[1]
  end
</pre>
<p>To make this change permanent, the <code>funcsave</code> built-in can be used:
</p>
<pre>$ funcsave fish_command_not_found
</pre>
<div class="mw-heading mw-heading3"><h3 id="Remove_a_process_from_the_list_of_jobs">Remove a process from the list of jobs</h3></div>
<p><i>fish</i> terminates any jobs put into the background when fish terminates. To keep a job running after fish terminates, first use the <code>disown</code> builtin. For example, the following starts <code>firefox</code> in the background and then disowns it:
</p>
<pre>$ firefox &amp;
$ disown
</pre>
<p>This means firefox will not be closed when the fish process is closed. See <span class="plainlinks archwiki-template-man" title="$ man 1 disown">disown(1)</span> in <i>fish</i> for more details.
</p>
<div class="mw-heading mw-heading3"><h3 id="Set_a_persistent_alias">Set a persistent alias</h3></div>
<p>To quickly make a persistent alias, one can simply use the method showed in this example:
</p>
<pre>$ alias lsl "ls -l"
$ funcsave lsl
</pre>
<p><i>alias</i> supports the <code>-s</code>/<code>--save</code> option since fish version 3.0:
</p>
<pre>$ alias -s lsl "ls -l"
</pre>
<p>This will create the function:
</p>
<pre>function lsl
    ls -l $argv
end
</pre>
<p>and will set the alias as a persistent shell function. To see all functions and/or edit them, one can simply use <code>fish_config</code> and look into the <i>Function</i> tab in the web configuration page.
</p>
<p>For more detailed information, see <a rel="nofollow" class="external text" href="https://fishshell.com/docs/current/cmds/alias.html">alias - create a function — fish-shell</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Source_/etc/profile_on_login">
<span id="Source_.2Fetc.2Fprofile_on_login"></span>Source /etc/profile on login</h3></div>
<p>Unlike <code>bash</code>, <code>fish</code> does not source <code>/etc/profile</code> on a tty login. If you need to source this file for
the environment variables appended and declared in the <code>/etc/profile.d</code> directory, you can add the following to your config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/fish/config.fish</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># source /etc/profile with bash
if status is-login
    if not set -q __sourced_profile
        set -x __sourced_profile 1
        exec bash -c "\
            test -e /etc/profile &amp;&amp; source /etc/profile
            test -e $HOME/.bash_profile &amp;&amp; source $HOME/.bash_profile
            exec fish --login
        "
    end
    
    # put your other configs below
    
    #
    
    set -e __sourced_profile
end
</pre>
<p>This allows you to run <code>fish</code> as your login shell, while still having all the environment variables you would typically
have in a <code>bash</code> login session.
</p>
<div class="mw-heading mw-heading2"><h2 id="See_also">See also</h2></div>
<ul>
<li>
<a rel="nofollow" class="external free" href="https://fishshell.com/">https://fishshell.com/</a> - Home page</li>
<li>
<a rel="nofollow" class="external free" href="https://fishshell.com/docs/current/">https://fishshell.com/docs/current/</a> - Documentation</li>
<li>
<a rel="nofollow" class="external free" href="https://hyperpolyglot.org/unix-shells">https://hyperpolyglot.org/unix-shells</a> - Shell grammar correspondence table ("shell rosetta")</li>
<li>
<a rel="nofollow" class="external free" href="https://github.com/fish-shell/fish-shell">https://github.com/fish-shell/fish-shell</a> - fish on GitHub</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Command-line_shells.html" title="Category:Command-line shells">Command-line shells</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Fish&amp;oldid=862672">https://wiki.archlinux.org/index.php?title=Fish&amp;oldid=862672</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 January 2026, at 22:48.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true">fish</div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
