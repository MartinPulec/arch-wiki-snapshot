<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Apple Keyboard - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Apple_Keyboard rootpage-Apple_Keyboard skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Numlock_is_on" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Numlock_is_on">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Numlock is on</div>
		</a>
		
		<ul id="toc-Numlock_is_on-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Repeating_keys_on_a_wireless_keyboard" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Repeating_keys_on_a_wireless_keyboard">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Repeating keys on a wireless keyboard</div>
		</a>
		
		<ul id="toc-Repeating_keys_on_a_wireless_keyboard-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-hid_apple_module_options" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#hid_apple_module_options">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>hid_apple module options</div>
		</a>
		
		<ul id="toc-hid_apple_module_options-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Function_keys_do_not_work" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Function_keys_do_not_work">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Function keys do not work</div>
		</a>
		
		<ul id="toc-Function_keys_do_not_work-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Switching_Cmd_and_Alt/AltGr" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Switching_Cmd_and_Alt/AltGr">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Switching Cmd and Alt/AltGr</div>
		</a>
		
		<ul id="toc-Switching_Cmd_and_Alt/AltGr-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Swap_the_Fn_and_left_Control_keys" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Swap_the_Fn_and_left_Control_keys">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Swap the Fn and left Control keys</div>
		</a>
		
		<ul id="toc-Swap_the_Fn_and_left_Control_keys-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-&lt;_and_&gt;_have_changed_place_with_^_and_°_(or_@_and_#,_or_`_and_~)" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#&lt;_and_&gt;_have_changed_place_with_^_and_%C2%B0_(or_@_and_#,_or_`_and_~)">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>&lt; and &gt; have changed place with ^ and ° (or @ and #, or ` and ~)</div>
		</a>
		
		<ul id="toc-&lt;_and_&gt;_have_changed_place_with_^_and_°_(or_@_and_#,_or_`_and_~)-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-PrintScreen_and_SysRq" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#PrintScreen_and_SysRq">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>PrintScreen and SysRq</div>
		</a>
		
		<ul id="toc-PrintScreen_and_SysRq-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Treating_Apple_keyboards_like_regular_keyboards" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Treating_Apple_keyboards_like_regular_keyboards">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Treating Apple keyboards like regular keyboards</div>
		</a>
		
			<button aria-controls="toc-Treating_Apple_keyboards_like_regular_keyboards-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Treating Apple keyboards like regular keyboards subsection</span>
			</button>
		
		<ul id="toc-Treating_Apple_keyboards_like_regular_keyboards-sublist" class="vector-toc-list">
			<li id="toc-Use_a_patch_to_hid-apple" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Use_a_patch_to_hid-apple">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.1</span>Use a patch to hid-apple</div>
			</a>
			
			<ul id="toc-Use_a_patch_to_hid-apple-sublist" class="vector-toc-list">
				<li id="toc-Troubleshooting_configuration_not_picked_up_by_the_module" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Troubleshooting_configuration_not_picked_up_by_the_module">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.1.1</span>Troubleshooting configuration not picked up by the module</div>
			</a>
			
			<ul id="toc-Troubleshooting_configuration_not_picked_up_by_the_module-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Use_un-apple-keyboard" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Use_un-apple-keyboard">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.2</span>Use un-apple-keyboard</div>
			</a>
			
			<ul id="toc-Use_un-apple-keyboard-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Change_the_Behavior_Without_Reboot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Change_the_Behavior_Without_Reboot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.3</span>Change the Behavior Without Reboot</div>
			</a>
			
			<ul id="toc-Change_the_Behavior_Without_Reboot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Magic_Keyboard_does_not_connect" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Magic_Keyboard_does_not_connect">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>Magic Keyboard does not connect</div>
		</a>
		
		<ul id="toc-Magic_Keyboard_does_not_connect-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Enable_dvorak/dvp" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Enable_dvorak/dvp">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">11</span>Enable dvorak/dvp</div>
		</a>
		
		<ul id="toc-Enable_dvorak/dvp-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-No_input_during_root_disk_decryption" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#No_input_during_root_disk_decryption">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">12</span>No input during root disk decryption</div>
		</a>
		
		<ul id="toc-No_input_during_root_disk_decryption-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">13</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Apple Keyboard</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Apple_Keyboard" title="Apple Keyboard – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Extra_keyboard_keys.html" title="Extra keyboard keys">Extra keyboard keys</a></li>
</ul>
</div>
<p>Some keyboard models that use the Apple keyboard driver may have swapped keys or missing functionality. This article describes how to change the settings for the keyboard so that it behaves as expected.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Numlock_is_on">Numlock is on</span></h2>
<p>You may find that the numlock is on. The symptoms are that only the physical keys <code>7</code>,<code>8</code>,<code>9</code>,<code>u</code>,<code>i</code>,<code>o</code>,<code>j</code>,<code>k</code>,<code>l</code> and surrounding keys work and output numbers. To fix this hit <code>Fn+F6</code> twice or thrice. You might need to use a utility like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=numlockx">numlockx</a></span>.
</p>
<p>Alternatively, set the keycodes manually using <a href="../en/Xmodmap.html" title="Xmodmap">xmodmap</a> to avoid use Numlock:
</p>
<pre>keycode  90 = KP_0 KP_0 KP_0 KP_0 KP_0 KP_0
keycode  87 = KP_1 KP_1 KP_1 KP_1 KP_1 KP_1
keycode  88 = KP_2 KP_2 KP_2 KP_2 KP_2 KP_2
keycode  89 = KP_3 KP_3 KP_3 KP_3 KP_3 KP_3
keycode  83 = KP_4 KP_4 KP_4 KP_4 KP_4 KP_4
keycode  84 = KP_5 KP_5 KP_5 KP_5 KP_5 KP_5
keycode  85 = KP_6 KP_6 KP_6 KP_6 KP_6 KP_6
keycode  79 = KP_7 KP_7 KP_7 KP_7 KP_7 KP_7
keycode  80 = KP_8 KP_8 KP_8 KP_8 KP_8 KP_8
keycode  81 = KP_9 KP_9 KP_9 KP_9 KP_9 KP_9
</pre>
<h2><span class="mw-headline" id="Repeating_keys_on_a_wireless_keyboard">Repeating keys on a wireless keyboard</span></h2>
<p>Unpair the keyboard and then re-pair it. The trick is to hold down the power button throughout the entire pairing process.
</p>
<h2><span class="mw-headline" id="hid_apple_module_options">hid_apple module options</span></h2>
<ul>
<li>
<code>fnmode</code> - Mode of top-row keys
<ul>
<li>0 - disabled</li>
<li>1 - normally media keys, switchable to function keys by holding Fn key (=auto on Apple keyboards)</li>
<li>2 - normally function keys, switchable to media keys by holding Fn key (=auto on non-Apple keyboards)</li>
<li>3 - auto (Default)</li>
</ul>
</li>
<li>
<code>iso_layout</code> - Enable/disable hardcoded ISO layout of the keyboard. Possibly relevant for international keyboard layouts
<ul>
<li>0 - not ISO (=auto on ANSI keyboards)</li>
<li>1 - ISO (=auto on ISO keyboards)</li>
<li>-1 - auto (Default)</li>
</ul>
</li>
<li>
<code>swap_opt_cmd</code> - Swap the <code>Option</code> (<code>Alt</code>) and <code>Command</code> (<code>Flag</code>) keys
<ul>
<li>0 - as silkscreened, Mac layout (Default)</li>
<li>1 - swapped, PC layout</li>
</ul>
</li>
<li>
<code>swap_fn_leftctrl</code> - Swap the <code>Fn</code> and <code>L_Control</code> keys
<ul>
<li>0 - as silkscreened, Mac layout (Default)</li>
<li>1 - swapped, PC layout</li>
</ul>
</li>
</ul>
<h2><span class="mw-headline" id="Function_keys_do_not_work">Function keys do not work</span></h2>
<p>If your <code>F&lt;num&gt;</code> keys do not work, this is probably because the kernel driver for the keyboard has defaulted to using the media keys and requiring you to use the <code>Fn</code> key to get to the <code>F&lt;num&gt;</code> keys. To change the behavior temporarily, <a href="../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Append">append</a> <code>2</code> to <code>/sys/module/hid_apple/parameters/fnmode</code>.
</p>
<pre># echo 2 &gt;&gt; /sys/module/hid_apple/parameters/fnmode
</pre>
<p>To make the change permanent, <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">set</a> the <code>hid_apple</code> <code>fnmode</code> option to 2:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/hid_apple.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options hid_apple fnmode=2</pre>
<p>To apply the change to your initial ramdisk, in your <a href="../en/Mkinitcpio.html#Configuration" title="Mkinitcpio">mkinitcpio configuration</a> (usually <code>/etc/mkinitcpio.conf</code>), make sure you either have <code>modconf</code> included in the <code>HOOKS</code> variable or <code>/etc/modprobe.d/hid_apple.conf</code> in the <code>FILES</code> variable. You would then need to <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h2>
<span id="Switching_Cmd_and_Alt.2FAltGr"></span><span class="mw-headline" id="Switching_Cmd_and_Alt/AltGr">Switching Cmd and Alt/AltGr</span>
</h2>
<p>This will switch the left <code>Alt</code> and <code>Cmd</code> key as well as the right <code>Alt</code>/<code>AltGr</code> and <code>Cmd</code> key.
</p>
<p>Temporary and immediate solution:
</p>
<pre># echo "1" &gt; /sys/module/hid_apple/parameters/swap_opt_cmd
</pre>
<p>Permanent change, taking place at next reboot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/hid_apple.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options hid_apple swap_opt_cmd=1</pre>
<p>You then need to <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h2><span class="mw-headline" id="Swap_the_Fn_and_left_Control_keys">Swap the Fn and left Control keys</span></h2>
<p>This will switch the <code>Fn</code> and left <code>Control</code> keys.
</p>
<p>Temporary and immediate solution:
</p>
<pre># echo "1" &gt; /sys/module/hid_apple/parameters/swap_fn_leftctrl
</pre>
<p>Permanent change, taking place at next reboot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/hid_apple.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options hid_apple swap_fn_leftctrl=1</pre>
<p>You then need to <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h2>
<span id=".3C_and_.3E_have_changed_place_with_.5E_and_.C2.B0_.28or_.40_and_.23.2C_or_.60_and_.7E.29"></span><span class="mw-headline" id="&lt;_and_&gt;_have_changed_place_with_^_and_°_(or_@_and_#,_or_`_and_~)">&lt; and &gt; have changed place with ^ and ° (or @ and #, or ` and ~)</span>
</h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-cut.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is being considered for removal.</b></p>
<div>
<b>Reason:</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> is more recent than the last affected kernel. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Apple_Keyboard.html">Talk:Apple Keyboard</a>)</div>
</div>
<p>In kernel versions before 6.1.2 <a rel="nofollow" class="external autonumber" href="https://cdn.kernel.org/pub/linux/kernel/v6.x/ChangeLog-6.1.2">[1]</a>, keyboards with German layout have <code>^</code>/<code>°</code> symbol and <code>&lt;</code>/<code>&gt;</code> exchanged. With French layout, <code>@</code>/<code>#</code> and <code>&lt;</code>/<code>&gt;</code> are exchanged. With the US layout, <code>`</code>/<code>~</code> and <code>&lt;</code>/<code>&gt;</code> are exchanged.
</p>
<p>To change the behavior temporarily:
</p>
<pre># echo "1" &gt; /sys/module/hid_apple/parameters/iso_layout
</pre>
<p>To make the change permanent, <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">set</a> the <code>hid_apple</code> <code>iso_layout</code> option to 1:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/hid_apple.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options hid_apple iso_layout=1</pre>
<p>You then need to <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h2><span class="mw-headline" id="PrintScreen_and_SysRq">PrintScreen and SysRq</span></h2>
<p>Apple Keyboards have an <code>F13</code> key instead of a <code>PrintScreen</code>/<code>SysRq</code> key. This means that <a href="../en/Keyboard_shortcuts.html#Kernel_(SysRq)" title="Keyboard shortcuts">Alt+SysRq sequences</a> do not work, and application actions associated with <code>PrintScreen</code> (such as taking screenshots in many games that work under <a href="../en/Wine.html" title="Wine">Wine</a>) do not work. To fix this, you can add <code>setxkbmap -option "apple:alupckeys"</code> to your <code>.xinitrc</code>. This will map <code>PrintScreen</code>/<code>SysRq</code> to <code>F13</code>, as well as <code>Scroll lock</code> to <code>F14</code> and <code>Pause</code> to <code>F15</code>.
</p>
<p>Alternatively, follow the <a href="../en/Map_scancodes_to_keycodes.html" title="Map scancodes to keycodes">Map scancodes to keycodes</a> article to map the <code>F13</code> scancode to the <code>PrintScreen</code>/<code>SysRq</code> keycode, where 458856 (0x0<b>70068</b>) is the scancode of <code>F13</code>, and <code>sysrq</code> is the keycode of <code>PrintScreen</code>/<code>SysRq</code>.
</p>
<h2><span class="mw-headline" id="Treating_Apple_keyboards_like_regular_keyboards">Treating Apple keyboards like regular keyboards</span></h2>
<p>Depending on the customisations you want to accomplish, there are two solutions available and some options that are in the kernel. You need to choose one of the other.
</p>
<h3><span class="mw-headline" id="Use_a_patch_to_hid-apple">Use a patch to hid-apple</span></h3>
<p>While the original <code>hid-apple</code> module does not have options to further customize the keyboard, like swapping <code>Fn</code> and left <code>Ctrl</code> keys or having <code>Alt</code> on the left side of <code>Super</code>, there is a <a rel="nofollow" class="external text" href="https://github.com/free5lot/hid-apple-patched">patched version</a> adding this functionality to the module. To use it, <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hid-apple-patched-dkms-git/">hid-apple-patched-dkms-git</a></span><sup><small>AUR</small></sup> package. This will install the patched <code>hid-apple</code> and mask out the original one.
</p>
<p>The package uses <a href="../en/Dynamic_Kernel_Module_Support.html" class="mw-redirect" title="DKMS">DKMS</a> to automatically recompile the module during kernel upgrades. While the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dkms">dkms</a></span> will be pulled in by dependency. You still need to install an appropriate kernel header package manually. See the DKMS page for more info.
</p>
<p>In addition to the patched kernel module, a configuration file is also provided by the package at <code>/usr/lib/modprobe.d/hid_apple.conf</code>, which enables PC-like layout by default:
</p>
<ul>
<li>Top-row keys are normally function keys, switchable to media keys by holding Fn key, as in <a href="#Function_keys_do_not_work">#Function keys do not work</a>.</li>
<li>Four keys at the lower left corner act as <code>Ctrl</code>, <code>Fn</code>, <code>Super</code>, <code>Alt</code>, in this order.</li>
<li>Two keys at the lower right corner act as <code>Alt</code>, <code>Ctrl</code>, in this order.</li>
<li>If you have an <code>Ejectcd</code> key, it will act as <code>Delete</code> key.</li>
</ul>
<p>If you wish to change the default options, copy the configuration file to <code>/etc/modprobe.d</code> and make desired changes:
</p>
<pre># cp {/usr/lib,/etc}/modprobe.d/hid_apple.conf
</pre>
<p>The file under <code>/etc/modprobe.d</code> will completely override the one with the same name under <code>/usr/lib/modprobe.d</code>, and the content is <b>NOT</b> merged.
</p>
<p>Alternatively, put additional options in a file with a different name if you want to keep default ones, 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Do not forget to update <i>initramfs</i> after manual changes to configuration files.</div>
<p>Please refer to the project <a rel="nofollow" class="external text" href="https://github.com/free5lot/hid-apple-patched#configuration">README</a> for the exact meaning of each configuration option and tweaking the configuration file to suit your needs. Learn more about <code>modprobe.d</code> at <a href="../en/Kernel_module.html#Using_files_in_/etc/modprobe.d/" title="Kernel module">Kernel module#Using files in /etc/modprobe.d/</a>.
</p>
<p>After installation, reboot for the change to take effect, or <a href="#Change_the_Behavior_Without_Reboot">#Change the Behavior Without Reboot</a>.
</p>
<h4><span class="mw-headline" id="Troubleshooting_configuration_not_picked_up_by_the_module">Troubleshooting configuration not picked up by the module</span></h4>
<p>First, make sure the patched version is loaded, see what parameters are provided by the module:
</p>
<pre>$ ls /sys/module/hid_apple/parameters/
</pre>
<p>If you do not see new options like <code>swap_fn_leftctrl</code>, <code>ejectcd_as_delete</code>, etc., check your DKMS installation.
</p>
<p>Then, check if configuration files are correctly included in the initramfs:
</p>
<pre>$ mkdir /tmp/initramfs
$ cd /tmp/initramfs
# lsinitcpio -x /boot/initramfs-linux.img
</pre>
<p>Check the presence and content of <code>usr/lib/modprobe.d/hid_apple.conf</code> and any other relevant configuration files in <code>etc/modprobe.d/</code>. If they are not there, you should check your <code>/etc/mkinitcpio.conf</code> to include those. By default, there should be a <code>modconf</code> hook that automatically include those files, if not, add it to the <a href="../en/Mkinitcpio.html#HOOKS" title="Mkinitcpio">HOOKS array</a> after <code>autodetect</code>.
</p>
<p>Alternatively, specify those files in <a href="../en/Mkinitcpio.html#BINARIES_and_FILES" title="Mkinitcpio">FILES array</a> explicitly:
</p>
<pre>FILES=(/usr/lib/modprobe.d/hid_apple.conf)
</pre>
<p>Finally, <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a> and reboot.
</p>
<h3><span class="mw-headline" id="Use_un-apple-keyboard">Use un-apple-keyboard</span></h3>
<p>If you do not need all of these customizations and you do not want to compile a new module manually or using dkms, there is an AUR package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/un-apple-keyboard/">un-apple-keyboard</a></span><sup><small>AUR</small></sup> which does not rely on a new kernel module, but rather just to mappings. It enables the following features:
</p>
<ul>
<li>The keyboard is considered as an ISO keyboard (e.g. <code>&lt;</code> and <code>&gt;</code> located at the right of the <code>Left Shift</code> key are working like expected).</li>
<li>The function keys are disabled by default. You need to press the <code>Fn</code> key in combination to trigger them. By default, the behavior are thus keys <code>F1</code> to <code>F12</code>
</li>
<li>The <code>Alt</code> and <code>Cmd</code> keys are swapped.</li>
<li>
<code>F13</code> is mapped to <code>SYSRQ</code>, <code>F14</code> to <code>Scroll Lock</code> and <code>F15</code> to <code>Pause</code>.</li>
</ul>
<p>The first 3 aforementioned features are brought to you using the default linux kernel module <code>hid-apple</code>.
</p>
<p>The last one is provided by providing a mapping to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/keyfuzz/">keyfuzz</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Change_the_Behavior_Without_Reboot">Change the Behavior Without Reboot</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If the builtin keyboard and touch pad are the only input device, beware that doing so might leave your computer in an inoperable state unless hard reboot when the second command failes.</div>
<p>
To reload the kernel module without reboot, run </p>
<pre># rmmod hid_apple &amp;&amp; modprobe hid_apple</pre>
<h2><span class="mw-headline" id="Magic_Keyboard_does_not_connect">Magic Keyboard does not connect</span></h2>
<p>If you have a magic keyboard that will not connect to the system through the built in tools, such as the Gnome 3 bluetooth menu in settings, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=blueman">blueman</a></span> and its dependencies and attempt to connect with it.  If it still fails to connect, make sure you have bluetoothctl and hcitool installed.
</p>
<h2>
<span id="Enable_dvorak.2Fdvp"></span><span class="mw-headline" id="Enable_dvorak/dvp">Enable dvorak/dvp</span>
</h2>
<p>By default xkb loads translation table (actually called <code>xkb_symbols</code>) <code>macintosh_vndr/us</code> for macintosh keyboard:
</p>
<pre>$ setxkbmap -print -verbose 10 | grep symbols
</pre>
<p>This translation table located in <code>/usr/share/X11/xkb/symbols/macintosh_vndr/us</code> and do not contains dvorak/dvp layout. You can use default translation table from <code>/usr/share/X11/xkb/symbols/us</code> and add command <code>setxkbmap</code> in your <code>.profile</code> for forced loading layout:
</p>
<pre># mv /usr/share/X11/xkb/symbols/macintosh_vndr/us /usr/share/X11/xkb/symbols/macintosh_vndr/us.back
# cp /usr/share/X11/xkb/symbols/us /usr/share/X11/xkb/symbols/macintosh_vndr/us
$ echo "setxkbmap -v 10 -layout us -variant dvp" &gt;&gt; .xprofile
</pre>
<h2><span class="mw-headline" id="No_input_during_root_disk_decryption">No input during root disk decryption</span></h2>
<p>You may have to manually add the <code>hid_apple</code> module to the <a href="../en/Mkinitcpio.html#Configuration" title="Mkinitcpio">mkinitcpio configuration</a>:
</p>
<pre>MODULES=(hid_apple)
</pre>
<p>Or place the keyboard hook before autodetect so that all keyboard drivers are included:
</p>
<pre>HOOKS=(... keyboard autodetect ...)
</pre>
<p><a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">Regenerate the initramfs</a> after doing either of these.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external free" href="https://help.ubuntu.com/community/AppleKeyboard">https://help.ubuntu.com/community/AppleKeyboard</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/hlechner/xmodmap-aluminium-pt-br">https://github.com/hlechner/xmodmap-aluminium-pt-br</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/free5lot/hid-apple-patched">https://github.com/free5lot/hid-apple-patched</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Keyboards.html" title="Category:Keyboards">Keyboards</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Sections_flagged_with_Template:Remove.html" title="Category:Sections flagged with Template:Remove">Sections flagged with Template:Remove</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Apple_Keyboard&amp;oldid=812625">https://wiki.archlinux.org/index.php?title=Apple_Keyboard&amp;oldid=812625</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 19 July 2024, at 06:05.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
