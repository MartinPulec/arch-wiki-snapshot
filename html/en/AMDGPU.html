<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>AMDGPU - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-AMDGPU rootpage-AMDGPU skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Selecting_the_right_driver" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Selecting_the_right_driver">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Selecting the right driver</div>
		</a>
		
		<ul id="toc-Selecting_the_right_driver-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Experimental" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Experimental">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Experimental</div>
			</a>
			
			<ul id="toc-Experimental-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Enable Southern Islands (SI) and Sea Islands (CIK) support</div>
			</a>
			
			<ul id="toc-Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support-sublist" class="vector-toc-list">
				<li id="toc-Load_amdgpu_driver" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Load_amdgpu_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>Load amdgpu driver</div>
			</a>
			
			<ul id="toc-Load_amdgpu_driver-sublist" class="vector-toc-list">
				<li id="toc-Set_module_parameters_in_kernel_command_line" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Set_module_parameters_in_kernel_command_line">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1.1</span>Set module parameters in kernel command line</div>
			</a>
			
			<ul id="toc-Set_module_parameters_in_kernel_command_line-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Specify_the_correct_module_order" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Specify_the_correct_module_order">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2</span>Specify the correct module order</div>
			</a>
			
			<ul id="toc-Specify_the_correct_module_order-sublist" class="vector-toc-list">
				<li id="toc-Set_kernel_module_parameters" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Set_kernel_module_parameters">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2.1</span>Set kernel module parameters</div>
			</a>
			
			<ul id="toc-Set_kernel_module_parameters-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Compile_kernel_which_supports_amdgpu_driver" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Compile_kernel_which_supports_amdgpu_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2.2</span>Compile kernel which supports amdgpu driver</div>
			</a>
			
			<ul id="toc-Compile_kernel_which_supports_amdgpu_driver-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Disable_loading_radeon_completely_at_boot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Disable_loading_radeon_completely_at_boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.3</span>Disable loading radeon completely at boot</div>
			</a>
			
			<ul id="toc-Disable_loading_radeon_completely_at_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-ACO_compiler" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ACO_compiler">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>ACO compiler</div>
			</a>
			
			<ul id="toc-ACO_compiler-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Loading" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Loading">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Loading</div>
		</a>
		
		<ul id="toc-Loading-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Xorg_configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Xorg_configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Xorg configuration</div>
		</a>
		
			<button aria-controls="toc-Xorg_configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Xorg configuration subsection</span>
			</button>
		
		<ul id="toc-Xorg_configuration-sublist" class="vector-toc-list">
			<li id="toc-Tear_free_rendering" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tear_free_rendering">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Tear free rendering</div>
			</a>
			
			<ul id="toc-Tear_free_rendering-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DRI_level" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#DRI_level">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>DRI level</div>
			</a>
			
			<ul id="toc-DRI_level-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Variable_refresh_rate" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Variable_refresh_rate">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Variable refresh rate</div>
			</a>
			
			<ul id="toc-Variable_refresh_rate-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-10-bit_color" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#10-bit_color">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>10-bit color</div>
			</a>
			
			<ul id="toc-10-bit_color-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reduce_output_latency" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reduce_output_latency">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Reduce output latency</div>
			</a>
			
			<ul id="toc-Reduce_output_latency-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Features" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Features">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Features</div>
		</a>
		
			<button aria-controls="toc-Features-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Features subsection</span>
			</button>
		
		<ul id="toc-Features-sublist" class="vector-toc-list">
			<li id="toc-Video_acceleration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Video_acceleration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Video acceleration</div>
			</a>
			
			<ul id="toc-Video_acceleration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Monitoring" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Monitoring">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Monitoring</div>
			</a>
			
			<ul id="toc-Monitoring-sublist" class="vector-toc-list">
				<li id="toc-CLI" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#CLI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.1</span>CLI</div>
			</a>
			
			<ul id="toc-CLI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GUI" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GUI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.2</span>GUI</div>
			</a>
			
			<ul id="toc-GUI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Manually" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Manually">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.3</span>Manually</div>
			</a>
			
			<ul id="toc-Manually-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Overclocking" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Overclocking">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Overclocking</div>
			</a>
			
			<ul id="toc-Overclocking-sublist" class="vector-toc-list">
				<li id="toc-Boot_parameter" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Boot_parameter">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.1</span>Boot parameter</div>
			</a>
			
			<ul id="toc-Boot_parameter-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Manual_(default)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Manual_(default)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.2</span>Manual (default)</div>
			</a>
			
			<ul id="toc-Manual_(default)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Assisted" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Assisted">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.3</span>Assisted</div>
			</a>
			
			<ul id="toc-Assisted-sublist" class="vector-toc-list">
				<li id="toc-CLI_tools" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#CLI_tools">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.3.1</span>CLI tools</div>
			</a>
			
			<ul id="toc-CLI_tools-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GUI_tools" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#GUI_tools">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.3.2</span>GUI tools</div>
			</a>
			
			<ul id="toc-GUI_tools-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Startup_on_boot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Startup_on_boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.4</span>Startup on boot</div>
			</a>
			
			<ul id="toc-Startup_on_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Performance_levels" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Performance_levels">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Performance levels</div>
			</a>
			
			<ul id="toc-Performance_levels-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Power_profiles" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Power_profiles">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Power profiles</div>
			</a>
			
			<ul id="toc-Power_profiles-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_GPU_display_scaling" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_GPU_display_scaling">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>Enable GPU display scaling</div>
			</a>
			
			<ul id="toc-Enable_GPU_display_scaling-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Module_parameters" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Module_parameters">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Module parameters</div>
			</a>
			
			<ul id="toc-Module_parameters-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Xorg_or_applications_will_not_start" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Xorg_or_applications_will_not_start">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Xorg or applications will not start</div>
			</a>
			
			<ul id="toc-Xorg_or_applications_will_not_start-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_artifacts_and_frequency_problem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_artifacts_and_frequency_problem">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Screen artifacts and frequency problem</div>
			</a>
			
			<ul id="toc-Screen_artifacts_and_frequency_problem-sublist" class="vector-toc-list">
				<li id="toc-Artifacts_in_Chromium" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Artifacts_in_Chromium">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.1</span>Artifacts in Chromium</div>
			</a>
			
			<ul id="toc-Artifacts_in_Chromium-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-R9_390_series_poor_performance_and/or_instability" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#R9_390_series_poor_performance_and/or_instability">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>R9 390 series poor performance and/or instability</div>
			</a>
			
			<ul id="toc-R9_390_series_poor_performance_and/or_instability-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Freezes_with_"[drm]_IP_block:gmc_v8_0_is_hung!"_kernel_error' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Freezes_with_"[drm]_IP_block:gmc_v8_0_is_hung!"_kernel_error'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Freezes with "[drm] IP block:gmc_v8_0 is hung!" kernel error</div>
			</a>
			
			<ul id='toc-Freezes_with_"[drm]_IP_block:gmc_v8_0_is_hung!"_kernel_error-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_flickering_white/gray" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_flickering_white/gray">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>Screen flickering white/gray</div>
			</a>
			
			<ul id="toc-Screen_flickering_white/gray-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-System_freeze_or_crash_when_gaming_on_Vega_cards" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#System_freeze_or_crash_when_gaming_on_Vega_cards">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>System freeze or crash when gaming on Vega cards</div>
			</a>
			
			<ul id="toc-System_freeze_or_crash_when_gaming_on_Vega_cards-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-WebRenderer_(Firefox)_corruption" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#WebRenderer_(Firefox)_corruption">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.8</span>WebRenderer (Firefox) corruption</div>
			</a>
			
			<ul id="toc-WebRenderer_(Firefox)_corruption-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Double-speed_or_"chipmunk"_audio,_or_no_audio_when_a_4K@60Hz_device_is_connected' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Double-speed_or_"chipmunk"_audio,_or_no_audio_when_a_4K@60Hz_device_is_connected'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.9</span>Double-speed or "chipmunk" audio, or no audio when a 4K@60Hz device is connected</div>
			</a>
			
			<ul id='toc-Double-speed_or_"chipmunk"_audio,_or_no_audio_when_a_4K@60Hz_device_is_connected-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Issues_with_power_management_/_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Issues_with_power_management_/_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.10</span>Issues with power management / dynamic re-activation of a discrete amdgpu graphics card</div>
			</a>
			
			<ul id="toc-Issues_with_power_management_/_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-kfd:_amdgpu:_TOPAZ_not_supported_in_kfd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#kfd:_amdgpu:_TOPAZ_not_supported_in_kfd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.11</span>kfd: amdgpu: TOPAZ not supported in kfd</div>
			</a>
			
			<ul id="toc-kfd:_amdgpu:_TOPAZ_not_supported_in_kfd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-High_idle_power_draw_due_to_MCLK_locked_at_MAX_(1000MHz),_or_MIN_(96MHz)_causing_low_game_performance_(on_6.4_kernel)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#High_idle_power_draw_due_to_MCLK_locked_at_MAX_(1000MHz),_or_MIN_(96MHz)_causing_low_game_performance_(on_6.4_kernel)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.12</span>High idle power draw due to MCLK locked at MAX (1000MHz), or MIN (96MHz) causing low game performance (on 6.4 kernel)</div>
			</a>
			
			<ul id="toc-High_idle_power_draw_due_to_MCLK_locked_at_MAX_(1000MHz),_or_MIN_(96MHz)_causing_low_game_performance_(on_6.4_kernel)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failure_to_suspend_to_RAM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failure_to_suspend_to_RAM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.13</span>Failure to suspend to RAM</div>
			</a>
			
			<ul id="toc-Failure_to_suspend_to_RAM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failure_to_shut_down_and_to_suspend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failure_to_shut_down_and_to_suspend">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.14</span>Failure to shut down and to suspend</div>
			</a>
			
			<ul id="toc-Failure_to_shut_down_and_to_suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">AMDGPU</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/AMDGPU" title="AMDGPU – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/AMDGPU" title="AMDGPU – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/AMDGPU" title="AMDGPU – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/ATI.html" title="ATI">ATI</a></li>
<li><a href="../en/Xorg.html" title="Xorg">Xorg</a></li>
<li><a href="../en/Vulkan.html" title="Vulkan">Vulkan</a></li>
<li><a href="../en/AMDGPU_PRO.html" title="AMDGPU PRO">AMDGPU PRO</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/AMDGPU" class="extiw" title="wikipedia:AMDGPU">AMDGPU</a> is the open source graphics driver for AMD Radeon graphics cards since the <a href="https://en.wikipedia.org/wiki/Graphics_Core_Next" class="extiw" title="wikipedia:Graphics Core Next">Graphics Core Next</a> family.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Selecting_the_right_driver">Selecting the right driver</span></h2>
<p>Depending on the card you have, find the right driver in <a href="../en/Xorg.html#AMD" title="Xorg">Xorg#AMD</a>.
This driver supports <a rel="nofollow" class="external text" href="https://www.x.org/wiki/RadeonFeature/">Southern Islands (SI)</a> cards and later. AMD has no plans to support pre-GCN GPUs.
Owners of unsupported GPUs may use the open source <a href="../en/ATI.html" title="ATI">ATI</a> driver.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span> package, which provides the DRI driver for 3D acceleration.
</p>
<ul>
<li>For 32-bit application support, also install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-mesa">lib32-mesa</a></span> package from the <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> repository.</li>
<li>For the DDX driver (which provides 2D acceleration in <a href="../en/Xorg.html" title="Xorg">Xorg</a>), install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-amdgpu">xf86-video-amdgpu</a></span> package.</li>
<li>For <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> support:
<ul>
<li>Test with <b>only <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vulkan-radeon">vulkan-radeon</a></span> first</b>: although not appearing as the first provider of <i>vulkan-driver</i> (due to its <a href="../en/Pacman.html#Virtual_packages" title="Pacman">alphabetical order</a>), it avoids some issues that have repeatedly been <a href="../en/Vulkan.html#AMDGPU_-_Crashes_with_DirectX_Vulkan_games" title="Vulkan">reported</a> about <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=amdvlk">amdvlk</a></span>.</li>
<li>When the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=amdvlk">amdvlk</a></span> package is installed, it sets itself as the default Vulkan driver: see <a href="../en/Vulkan.html#Selecting_via_environment_variable" title="Vulkan">Vulkan#Selecting via environment variable</a> <i>if</i> you <i>need</i> to have both drivers installed (e.g. when having <a href="../en/Vulkan.html#AMDGPU_-_Hangs_when_playing_DirectX_Vulkan_games" title="Vulkan">issues</a> with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vulkan-radeon">vulkan-radeon</a></span>).</li>
<li>Optionally, for 32-bit application support, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-vulkan-radeon">lib32-vulkan-radeon</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-amdvlk">lib32-amdvlk</a></span> package to match the native package installed.</li>
</ul>
</li>
</ul>
<p>Support for <a href="#Video_acceleration">accelerated video decoding</a> is provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libva-mesa-driver">libva-mesa-driver</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-libva-mesa-driver">lib32-libva-mesa-driver</a></span> for VA-API and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa-vdpau">mesa-vdpau</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-mesa-vdpau">lib32-mesa-vdpau</a></span> packages for VDPAU.
</p>
<h3><span class="mw-headline" id="Experimental">Experimental</span></h3>
<p>It may be worthwhile for some users to use the upstream experimental build of mesa.
</p>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mesa-git/">mesa-git</a></span><sup><small>AUR</small></sup> package, which provides the DRI driver for 3D acceleration.
</p>
<ul>
<li>For 32-bit application support, also install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lib32-mesa-git/">lib32-mesa-git</a></span><sup><small>AUR</small></sup> package from the <i>mesa-git</i> repository or the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.</li>
<li>For the DDX driver (which provides 2D acceleration in <a href="../en/Xorg.html" title="Xorg">Xorg</a>), install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-video-amdgpu-git/">xf86-video-amdgpu-git</a></span><sup><small>AUR</small></sup> package.</li>
<li>For <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> support using the <i>mesa-git</i> repository, install the <i>vulkan-radeon-git</i> package. Optionally install the <i>lib32-vulkan-radeon-git</i> package for 32-bit application support. This should not be required if building <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mesa-git/">mesa-git</a></span><sup><small>AUR</small></sup> from the AUR.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Users who do not wish to go through the process of compiling the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mesa-git/">mesa-git</a></span><sup><small>AUR</small></sup> package can use the <a href="../en/Unofficial_user_repositories.html#mesa-git" title="Unofficial user repositories">mesa-git</a> unofficial repository.</div>
<h3>
<span id="Enable_Southern_Islands_.28SI.29_and_Sea_Islands_.28CIK.29_support"></span><span class="mw-headline" id="Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support">Enable Southern Islands (SI) and Sea Islands (CIK) support</span>
</h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> package enables AMDGPU support for cards of the Southern Islands (HD 7000 Series, SI, ie. GCN 1) and Sea Islands (HD 8000 Series, CIK, ie. GCN 2). The <code>amdgpu</code> kernel driver needs to be loaded before the <a href="../en/ATI.html" title="ATI">radeon</a> one. You can check which kernel driver is loaded by running <code>lspci -k</code>. It should be like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci -k | grep -A 3 -E "(VGA|3D)"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Curacao PRO [Radeon R7 370 / R9 270/370 OEM]
	Subsystem: Gigabyte Technology Co., Ltd Device 226c
	Kernel driver in use: amdgpu
	Kernel modules: radeon, amdgpu
</pre>
<p>If the <code>amdgpu</code> driver is not in use, follow instructions in the next section.
</p>
<h4><span class="mw-headline" id="Load_amdgpu_driver">Load amdgpu driver</span></h4>
<p>The <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Module parameter">module parameters</a> of both <code>amdgpu</code> and <code>radeon</code> modules are <code>cik_support=</code> and <code>si_support=</code>. 
</p>
<p>They need to be set as kernel parameters or in a <i>modprobe</i> configuration file, and depend on the cards GCN version.
</p>
<p>You can use both parameters if you are unsure which kernel card you have.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Dmesg">dmesg</a> may indicate the correct kernel parameter to use: <code>[..] amdgpu 0000:01:00.0: Use radeon.cik_support=0 amdgpu.cik_support=1 to override</code>.</div>
<h5><span class="mw-headline" id="Set_module_parameters_in_kernel_command_line">Set module parameters in kernel command line</span></h5>
<p>Set one of the following <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>:
</p>
<ul>
<li>Southern Islands (SI): <code>radeon.si_support=0 amdgpu.si_support=1</code>
</li>
<li>Sea Islands (CIK): <code>radeon.cik_support=0 amdgpu.cik_support=1</code>
</li>
</ul>
<h4><span class="mw-headline" id="Specify_the_correct_module_order">Specify the correct module order</span></h4>
<p>Make sure <code>amdgpu</code> has been set as first module in the <a href="../en/Mkinitcpio.html#MODULES" title="Mkinitcpio">Mkinitcpio#MODULES</a> array, e.g. <code>MODULES=(amdgpu radeon)</code>.
</p>
<h5><span class="mw-headline" id="Set_kernel_module_parameters">Set kernel module parameters</span></h5>
<p>For Southern Islands (SI) use the <code>si_support=1</code> <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel module parameter">kernel module parameter</a>, for Sea Islands (CIK) use <code>cik_support=1</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/amdgpu.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options amdgpu si_support=1
options amdgpu cik_support=1</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/radeon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options radeon si_support=0
options radeon cik_support=0</pre>
<p>Make sure <code>modconf</code> is in the <code>HOOKS</code> array in <code>/etc/mkinitcpio.conf</code> and <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h5><span class="mw-headline" id="Compile_kernel_which_supports_amdgpu_driver">Compile kernel which supports amdgpu driver</span></h5>
<p>When building or compiling a <a href="../en/Kernel.html" title="Kernel">kernel</a>, <code>CONFIG_DRM_AMDGPU_SI=Y</code> and/or <code>CONFIG_DRM_AMDGPU_CIK=Y</code> should be set in the config.
</p>
<h4><span class="mw-headline" id="Disable_loading_radeon_completely_at_boot">Disable loading radeon completely at boot</span></h4>
<p>The kernel may still probe and load the <code>radeon</code> module depending on the specific graphics chip involved, but the module is unnecessary to have loaded after confirming <code>amdgpu</code> works as expected. Reboot between each step to confirm it works before moving to the next step:
</p>
<ol>
<li>Use the module parameters on the kernel commandline method to ensure <code>amdgpu</code> works as expected</li>
<li>Use the <code>MODULES=(amdgpu)</code> mkinitcpio method but do <b>not</b> add <code>radeon</code> to the configuration</li>
<li>Test that <code>modprobe -r radeon</code> will remove the kernel module cleanly after logged into the desktop</li>
<li>Blacklist the <code>radeon</code> module from being probed by the kernel during second stage boot:</li>
</ol>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/radeon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist radeon</pre>
<p>The output of <code>lsmod</code> and <code>dmesg</code> should now only show the amdgpu driver loading, radeon should not be present. The directory <code>/sys/module/radeon</code> should not exist.
</p>
<h3><span class="mw-headline" id="ACO_compiler">ACO compiler</span></h3>
<p>The <a rel="nofollow" class="external text" href="https://steamcommunity.com/games/221410/announcements/detail/1602634609636894200">ACO compiler</a> is an open source shader compiler created and developed by <a href="https://en.wikipedia.org/wiki/Valve_Corporation" class="extiw" title="wikipedia:Valve Corporation">Valve Corporation</a> to directly compete with the <a rel="nofollow" class="external text" href="https://llvm.org/">LLVM compiler</a>, the <a rel="nofollow" class="external text" href="https://github.com/GPUOpen-Drivers/AMDVLK">AMDVLK drivers</a>, as well as <a href="https://en.wikipedia.org/wiki/Windows_10" class="extiw" title="wikipedia:Windows 10">Windows 10</a>. It offers lesser compilation time and also performs better while gaming than LLVM and AMDVLK.
</p>
<p>Some benchmarks can be seen on <a rel="nofollow" class="external text" href="https://gist.github.com/pendingchaos/aba1e4c238cf039d17089f29a8c6aa63">GitHub</a> and Phoronix <a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=article&amp;item=radv-aco-llvm&amp;num=1">(1)</a> <a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=article&amp;item=radv-aco-gcn10&amp;num=1">(2)</a> <a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=article&amp;item=mesa20radv-aco-amdvlk&amp;num=1">(3)</a>.
</p>
<p>Since <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span> version <a rel="nofollow" class="external text" href="https://docs.mesa3d.org/relnotes/20.2.0.html#new-features">20.2</a> ACO is the default shader compiler.
</p>
<h2><span class="mw-headline" id="Loading">Loading</span></h2>
<p>The <code>amdgpu</code> kernel module is supposed to load automatically on system boot.
</p>
<p>If it does not:
</p>
<ul>
<li>Make sure to <a href="#Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support">#Enable Southern Islands (SI) and Sea Islands (CIK) support</a> when needed.</li>
<li>Make sure you have the latest <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span> package installed. This driver requires the latest firmware for each model to successfully boot.</li>
<li>Make sure you do <b>not</b> have <code>nomodeset</code> or <code>vga=</code> as a <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>, since <code>amdgpu</code> requires <a href="../en/Kernel_mode_setting.html" class="mw-redirect" title="KMS">KMS</a>.</li>
<li>Check that you have not disabled <code>amdgpu</code> by using any <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Kernel modules">kernel module blacklisting</a>.</li>
</ul>
<p>It is possible it loads, but late, after the X server requires it. In this case see <a href="../en/Kernel_mode_setting.html#Early_KMS_start" title="Kernel mode setting">Kernel mode setting#Early KMS start</a>.
</p>
<h2><span class="mw-headline" id="Xorg_configuration">Xorg configuration</span></h2>
<p><a href="../en/Xorg.html" title="Xorg">Xorg</a> will automatically load the driver and it will use your monitor's EDID to set the native resolution. Configuration is only required for tuning the driver.
</p>
<p>If you want manual configuration, create <code>/etc/X11/xorg.conf.d/20-amdgpu.conf</code>, and add the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-amdgpu.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "OutputClass"
     Identifier "AMD"
     MatchDriver "amdgpu"
     Driver "amdgpu"
EndSection</pre>
<p>Using this section, you can enable features and tweak the driver settings, see <span class="plainlinks archwiki-template-man" title="$ man 4 amdgpu"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/amdgpu.4">amdgpu(4)</a></span> first before setting driver options.
</p>
<h3><span class="mw-headline" id="Tear_free_rendering">Tear free rendering</span></h3>
<p><i>TearFree</i> controls tearing prevention using the hardware page flipping mechanism. By default, TearFree will be on for rotated outputs, outputs with RandR transforms applied, and for RandR 1.4 slave outputs, and off for everything else. Or you can configure it to be always on or always off with <code>true</code> or <code>false</code> respectively.
</p>
<pre>Option "TearFree" "true"
</pre>
<p>You can also enable TearFree temporarily with <a href="../en/Xrandr.html" title="Xrandr">xrandr</a>: 
</p>
<pre>$ xrandr --output <i>output</i> --set TearFree on
</pre>
<p>Where <code><i>output</i></code> should look like <code>DisplayPort-0</code> or <code>HDMI-A-0</code> and can be acquired by running <code>xrandr -q</code>.
</p>
<h3><span class="mw-headline" id="DRI_level">DRI level</span></h3>
<p><i>DRI</i> sets  the maximum level of DRI to enable. Valid values are <i>2</i> for DRI2 or <i>3</i> for DRI3. The default is <i>3</i> for DRI3 if the <a href="../en/Xorg.html" title="Xorg">Xorg</a> version is &gt;=  1.18.3, otherwise DRI2 is used:
</p>
<pre>Option "DRI" "3"
</pre>
<h3><span class="mw-headline" id="Variable_refresh_rate">Variable refresh rate</span></h3>
<p>See <a href="../en/Variable_refresh_rate.html" title="Variable refresh rate">Variable refresh rate</a>.
</p>
<h3><span class="mw-headline" id="10-bit_color">10-bit color</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Many applications may have graphical artifacts or crash when 10-bit color is enabled. This notably includes <a href="../en/Steam/Troubleshooting.html#Steam:_An_X_Error_occurred" title="Steam/Troubleshooting">Steam</a>, which crashes with an X Error.</div>
<p>Newer AMD cards support 10bpc color, but the default is 24-bit color and 30-bit color must be explicitly enabled. Enabling it can reduce visible banding/artifacts in gradients, if the applications support this too. To check if your monitor supports it search for "EDID" in your <a href="../en/Xorg.html#General" title="Xorg">Xorg log file</a> (e.g. <code>/var/log/Xorg.0.log</code> or <code>~/.local/share/xorg/Xorg.0.log</code>):
</p>
<pre>[   336.695] (II) AMDGPU(0): EDID for output DisplayPort-0
[   336.695] (II) AMDGPU(0): EDID for output DisplayPort-1
[   336.695] (II) AMDGPU(0): Manufacturer: DEL  Model: a0ec  Serial#: 123456789
[   336.695] (II) AMDGPU(0): Year: 2018  Week: 23
[   336.695] (II) AMDGPU(0): EDID Version: 1.4
[   336.695] (II) AMDGPU(0): Digital Display Input
<b>[   336.695] (II) AMDGPU(0): 10 bits per channel</b>
</pre>
<p>To check whether it is currently enabled search for "Depth"):
</p>
<pre>[   336.618] (**) AMDGPU(0): Depth 30, (--) framebuffer bpp 32
[   336.618] (II) AMDGPU(0): Pixel depth = 30 bits stored in 4 bytes (32 bpp pixmaps)
</pre>
<p>With the default configuration it will instead say the depth is 24, with 24 bits stored in 4 bytes.
</p>
<p>To check whether 10-bit works, exit Xorg if you have it running and run <code>Xorg -retro</code> which will display a black and white grid, then press <code>Ctrl-Alt-F1</code> and <code>Ctrl-C</code> to exit X, and run <code>Xorg -depth 30 -retro</code>. If this works fine, then 10-bit is working.
</p>
<p>To launch in 10-bit via <code>startx</code>, use <code>startx -- -depth 30</code>. To permanently enable it, create or add to:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-amdgpu.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Screen"
	Identifier "asdf"
	DefaultDepth 30
EndSection</pre>
<h3><span class="mw-headline" id="Reduce_output_latency">Reduce output latency</span></h3>
<p>If you want to minimize latency you can disable page flipping and tear free:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-amdgpu.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "OutputClass"
     Identifier "AMD"
     MatchDriver "amdgpu"
     Driver "amdgpu"
     Option "EnablePageFlip" "off"
     Option "TearFree" "false"
EndSection</pre>
<p>See <a href="../en/Gaming.html#Reducing_DRI_latency" title="Gaming">Gaming#Reducing DRI latency</a> to further reduce latency.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Setting these options may cause tearing and short-lived artifacts to appear.</div>
<h2><span class="mw-headline" id="Features">Features</span></h2>
<h3><span class="mw-headline" id="Video_acceleration">Video acceleration</span></h3>
<p>See <a href="../en/Hardware_video_acceleration.html" title="Hardware video acceleration">Hardware video acceleration</a>.
</p>
<h3><span class="mw-headline" id="Monitoring">Monitoring</span></h3>
<p>Monitoring your GPU is often used to check the temperature and also the P-states of your GPU.
</p>
<h4><span class="mw-headline" id="CLI">CLI</span></h4>
<ul><li>
<b>amdgpu_top</b> — Tool to display AMDGPU usage</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Umio-Yasuno/amdgpu_top">https://github.com/Umio-Yasuno/amdgpu_top</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu_top/">amdgpu_top</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>nvtop</b> — GPUs process monitoring for AMD, Intel and NVIDIA</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Syllo/nvtop">https://github.com/Syllo/nvtop</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvtop">nvtop</a></span>
</dd></dl>
<ul><li>
<b>radeontop</b> — A GPU utilization viewer, both for the total activity percent and individual blocks</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/clbr/radeontop">https://github.com/clbr/radeontop</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=radeontop">radeontop</a></span>
</dd></dl>
<h4><span class="mw-headline" id="GUI">GUI</span></h4>
<ul><li>
<b>amdgpu_top</b> — Tool to display AMDGPU usage</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Umio-Yasuno/amdgpu_top">https://github.com/Umio-Yasuno/amdgpu_top</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu_top/">amdgpu_top</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>AmdGuid</b> — A basic fan control GUI fully written in Rust.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Eraden/amdgpud">https://github.com/Eraden/amdgpud</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdguid-wayland-bin/">amdguid-wayland-bin</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdguid-glow-bin/">amdguid-glow-bin</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>TuxClocker</b> — A Qt5 monitoring and overclocking tool.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Lurkki14/tuxclocker">https://github.com/Lurkki14/tuxclocker</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tuxclocker/">tuxclocker</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h4><span class="mw-headline" id="Manually">Manually</span></h4>
<p>To check your GPU's P-states, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<p>To monitor your GPU, execute:
</p>
<pre># watch -n 0.5 cat /sys/kernel/debug/dri/0/amdgpu_pm_info
</pre>
<p>To check your GPU utilization, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/gpu_busy_percent
</pre>
<p>To check your GPU frequency, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/pp_dpm_sclk
</pre>
<p>To check your GPU temperature, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/hwmon/hwmon*/temp1_input
</pre>
<p>To check your VRAM frequency, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/pp_dpm_mclk
</pre>
<p>To check your VRAM usage, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/mem_info_vram_used
</pre>
<p>To check your VRAM size, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/mem_info_vram_total
</pre>
<h3><span class="mw-headline" id="Overclocking">Overclocking</span></h3>
<p>Since Linux 4.17, once you have enabled the features at boot below, it is possible to adjust clocks and voltages of the graphics card via <code>/sys/class/drm/card0/device/pp_od_clk_voltage</code>.
</p>
<h4><span class="mw-headline" id="Boot_parameter">Boot parameter</span></h4>
<p>It is required to unlock access to adjust clocks and voltages in sysfs by appending the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">Kernel parameter</a> <code>amdgpu.ppfeaturemask=0xffffffff</code>.
</p>
<p>Not all bits are defined, and new features may be added over time. Setting all 32 bits may enable unstable features that cause problems such as screen flicker or broken resume from suspend. It should be sufficient to set the PP_OVERDRIVE_MASK bit, 0x4000, in combination with the default ppfeaturemask. To compute a reasonable parameter for your system, execute:
</p>
<pre>$ printf 'amdgpu.ppfeaturemask=0x%x\n' "$(($(cat /sys/module/amdgpu/parameters/ppfeaturemask) | 0x4000))"
</pre>
<h4>
<span id="Manual_.28default.29"></span><span class="mw-headline" id="Manual_(default)">Manual (default)</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> In sysfs, paths like <code>/sys/class/drm/...</code> are just symlinks and may change between reboots. Persistent locations can be found in <code>/sys/devices/</code>, e.g. <code>/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/</code>. Adjust the commands accordingly for a reliable result.</div>
<p>For in-depth information on all possible options, read the kernel documentation for <a rel="nofollow" class="external text" href="https://docs.kernel.org/gpu/amdgpu/thermal.html#pp-od-clk-voltage">amdgpu thermal control</a>.
</p>
<p>To set the GPU clock for the maximum P-state 7 on e.g. a Polaris GPU to 1209MHz and 900mV voltage, run:
</p>
<pre># echo "s 7 1209 900" &gt; /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<p>The same procedure can be applied to the VRAM, e.g. maximum P-state 2 on Polaris 5xx series cards:
</p>
<pre># echo "m 2 1850 850" &gt; /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Double check the entered values, as mistakes might instantly cause fatal hardware damage!</div>
<p>To apply, run: 
</p>
<pre># echo "c" &gt; /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<p>To check if it worked out, read out clocks and voltage under 3D load:
</p>
<pre># watch -n 0.5  cat /sys/kernel/debug/dri/0/amdgpu_pm_info
</pre>
<p>You can reset to the default values using:
</p>
<pre># echo "r" &gt; /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<p>It is also possible to forbid the driver from switching to certain P-states, e.g. to workaround problems with deep powersaving P-states, such as flickering artifacts or stutter. To force the highest VRAM P-state on a card, while still allowing the GPU itself to run with lower clocks, first find the highest possible P-state, then set it:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># cat /sys/class/drm/card0/device/pp_dpm_mclk</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">0: 96Mhz *
1: 456Mhz 
2: 675Mhz 
3: 1000Mhz 
</pre>
<pre># echo "manual" &gt; /sys/class/drm/card0/device/power_dpm_force_performance_level
# echo "3" &gt;  /sys/class/drm/card0/device/pp_dpm_mclk
</pre>
<p>Allow only the three highest GPU P-states:
</p>
<pre># echo "5 6 7" &gt;  /sys/class/drm/card0/device/pp_dpm_sclk
</pre>
<p>To set the allowed maximum power consumption of the GPU to e.g. 50 Watts, run: 
</p>
<pre># echo <b>50</b>000000 &gt; /sys/class/drm/card0/device/hwmon/hwmon0/power1_cap
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The above procedure was tested with a Polaris RX 560 card. There may be different behavior or bugs with different GPUs.</div>
<h4><span class="mw-headline" id="Assisted">Assisted</span></h4>
<p>If you are not inclined to fully manually overclock your GPU, there are some overclocking tools that are offered by the community to assist you to overclock and monitor your AMD GPU.
</p>
<h5><span class="mw-headline" id="CLI_tools">CLI tools</span></h5>
<ul><li>
<b>amdgpu-clocks</b> — A script that can be used to monitor and set custom power states for AMD GPUs. It also offers a Systemd service to apply the settings automatically upon boot.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/sibradzic/amdgpu-clocks">https://github.com/sibradzic/amdgpu-clocks</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu-clocks-git/">amdgpu-clocks-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h5><span class="mw-headline" id="GUI_tools">GUI tools</span></h5>
<ul><li>
<b>TuxClocker</b> — A Qt5 monitoring and overclocking tool.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Lurkki14/tuxclocker">https://github.com/Lurkki14/tuxclocker</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tuxclocker/">tuxclocker</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>CoreCtrl</b> — A GUI overclocking tool with a WattMan-like UI that supports per-application profiles.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.com/corectrl/corectrl">https://gitlab.com/corectrl/corectrl</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=corectrl">corectrl</a></span>
</dd></dl>
<ul><li>
<b>LACT</b> — A GTK tool to view information and control your AMD GPU.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/ilya-zlobintsev/LACT">https://github.com/ilya-zlobintsev/LACT</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lact/">lact</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h4><span class="mw-headline" id="Startup_on_boot">Startup on boot</span></h4>
<p>One way is to use systemd units, if you want your settings to apply automatically upon boot, consider looking at this <a rel="nofollow" class="external text" href="https://www.reddit.com/r/Amd/comments/agwroj/how_to_overclock_your_amd_gpu_on_linux/">Reddit thread</a> to configure and apply your settings on boot.
</p>
<p>Another way is to use udev rules for some of the values, for example, to set a low performance level to save energy:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/30-amdgpu-low-power.rules </pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="pci", DRIVER=="amdgpu", ATTR{power_dpm_force_performance_level}="low"
</pre>
<h3><span class="mw-headline" id="Performance_levels">Performance levels</span></h3>
<p>AMDGPU offers several performance levels,  the file power_dpm_force_performance_level is used for this, it is possible to select between these levels:
</p>
<ul>
<li>
<b>auto</b>: dynamically select the optimal power profile for current conditions in the driver.</li>
<li>
<b>low</b>: clocks are forced to the lowest power state.</li>
<li>
<b>high</b>: clocks are forced to the highest power state.</li>
<li>
<b>manual</b>: user can manually adjust which power states are enabled for each clock domain (used for setting <a href="#Power_profiles">#Power profiles</a>)</li>
<li>
<b>profile_standard</b>, <b>profile_min_sclk</b>, <b>profile_min_mclk</b>, <b>profile_peak</b>: clock and power gating are disabled and the clocks are set for different profiling cases. This mode is recommended for profiling specific work loads</li>
</ul>
<p>To set the AMDGPU device to use a low performance level, the following command can be executed:
</p>
<pre># echo "low" &gt; /sys/class/drm/card0/device/power_dpm_force_performance_level
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Performance levels changes should be reapplied at every boot, see <a href="#Startup_on_boot">#Startup on boot</a> to automate this.</div>
<h3><span class="mw-headline" id="Power_profiles">Power profiles</span></h3>
<p>AMDGPU offers several optimizations via power profiles, one of the most commonly used is the compute mode for OpenCL intensive applications. Available power profiles can be listed with:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">cat /sys/class/drm/card0/device/pp_power_profile_mode</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NUM        MODE_NAME     SCLK_UP_HYST   SCLK_DOWN_HYST SCLK_ACTIVE_LEVEL     MCLK_UP_HYST   MCLK_DOWN_HYST MCLK_ACTIVE_LEVEL
  0   BOOTUP_DEFAULT:        -                -                -                -                -                -
  1   3D_FULL_SCREEN:        0              100               30                0              100               10
  2     POWER_SAVING:       10                0               30                -                -                -
  3            VIDEO:        -                -                -               10               16               31
  4               VR:        0               11               50                0              100               10
  5        COMPUTE *:        0                5               30               10               60               25
  6           CUSTOM:        -                -                -                -                -                -
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>card0</code> identifies a specific GPU in your machine, in case of multiple GPUs be sure to address the right one.</div>
<p>To use a specific power profile you should first enable manual control over them with:
</p>
<pre># echo "manual" &gt; /sys/class/drm/card0/device/power_dpm_force_performance_level
</pre>
<p>Then to select a power profile by writing the NUM field associated with it, e.g. to enable COMPUTE run:
</p>
<pre># echo "5" &gt; /sys/class/drm/card0/device/pp_power_profile_mode
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Power profile changes should be reapplied at every boot, see <a href="#Startup_on_boot">#Startup on boot</a> to automate this.</div>
<h3><span class="mw-headline" id="Enable_GPU_display_scaling">Enable GPU display scaling</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Xrandr.html" title="Xrandr">xrandr</a>.</b></p>
<div>
<b>Notes:</b> Not specific to AMDGPU. (Discuss in <a href='../en/Talk:AMDGPU.html#Moving_"Enable_GPU_display_scaling"_to_xrandr' title="Talk:AMDGPU">Talk:AMDGPU#Moving "Enable GPU display scaling" to xrandr</a>)</div>
</div>
<p>To avoid the usage of the scaler which is built in the display, and use the GPU own scaler instead, when not using the native resolution of the monitor, execute:
</p>
<pre>$ xrandr --output <i>output</i> --set "scaling mode" <i>scaling_mode</i>
</pre>
<p>Possible values for <code>"scaling mode"</code> are: <code>None</code>, <code>Full</code>, <code>Center</code>, <code>Full aspect</code>.
</p>
<ul><li>To show the available outputs and settings, execute:</li></ul>
<pre>$ xrandr --prop
</pre>
<ul><li>To set <code>scaling mode = Full aspect</code> for just every available output, execute:</li></ul>
<pre>$ for output in $(xrandr --prop | grep -E -o -i "^[A-Z\-]+-[0-9]+"); do xrandr --output "$output" --set "scaling mode" "Full aspect"; done
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Module_parameters">Module parameters</span></h3>
<p>The amdgpu module stashes several config parameters (<code>modinfo amdgpu | grep mask</code>) in masks that are only documented in the <a rel="nofollow" class="external text" href="https://raw.githubusercontent.com/torvalds/linux/master/drivers/gpu/drm/amd/include/amd_shared.h">kernel sources</a>.
</p>
<h3><span class="mw-headline" id="Xorg_or_applications_will_not_start">Xorg or applications will not start</span></h3>
<ul>
<li>"(EE) AMDGPU(0): [DRI2] DRI2SwapBuffers: drawable has no back or front?" error after opening <i>glxgears</i>, can open Xorg server but OpenGL applications crash.</li>
<li>"(EE) AMDGPU(0): Given depth (32) is not supported by amdgpu driver" error, Xorg will not start.</li>
</ul>
<p>Setting the screen's depth under Xorg to 16 or 32 will cause problems/crash. To avoid that, you should use a standard screen depth of 24 by adding this to your "screen" section:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-screen.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Screen"
       Identifier     "Screen"
       DefaultDepth    24
       SubSection      "Display"
               Depth   24
       EndSubSection
EndSection
</pre>
<h3><span class="mw-headline" id="Screen_artifacts_and_frequency_problem">Screen artifacts and frequency problem</span></h3>
<p><a href="../en/ATI.html#Dynamic_power_management" title="ATI">Dynamic power management</a> may cause screen artifacts to appear when displaying to monitors at higher frequencies (anything above 60Hz) due to issues in the way GPU clock speeds are managed<a rel="nofollow" class="external autonumber" href="https://bugs.freedesktop.org/show_bug.cgi?id=96868">[1]</a><sup title="Last check status: SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-10-12 ⓘ]</sup><a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/234">[2]</a>.
</p>
<p>A workaround <a rel="nofollow" class="external autonumber" href="https://bugs.freedesktop.org/show_bug.cgi?id=96868#c13">[3]</a><sup title="Last check status: SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-10-12 ⓘ]</sup> is saving <code>high</code> or <code>low</code> in <code>/sys/class/drm/card0/device/power_dpm_force_performance_level</code>.
</p>
<p>To make it persistent, you may create a <a href="../en/Udev.html" title="Udev">udev</a> rule:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/30-amdgpu-pm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">KERNEL=="card0", SUBSYSTEM=="drm", DRIVERS=="amdgpu", ATTR{device/power_dpm_force_performance_level}="high"
</pre>
<p>To determine the <code>KERNEL</code> name execute: 
</p>
<pre>$ find /sys/class/drm/ -regextype awk -regex '.+/card[0-9]+' -printf '%f\n'
</pre>
<p>There is also a GUI solution <a rel="nofollow" class="external autonumber" href="https://github.com/marazmista/radeon-profile">[4]</a> where you can manage the "power_dpm" with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/radeon-profile-git/">radeon-profile-git</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/radeon-profile-daemon-git/">radeon-profile-daemon-git</a></span><sup><small>AUR</small></sup>.
</p>
<h4><span class="mw-headline" id="Artifacts_in_Chromium">Artifacts in Chromium</span></h4>
<p>If you see artifacts in <a href="../en/Chromium.html" title="Chromium">Chromium</a>, forcing the vulkan-based backend might help. Go to <code>chrome://flags</code> and <i>enable</i> <code>#ignore-gpu-blocklist</code> and <code>#enable-vulkan</code>.
</p>
<h3>
<span id="R9_390_series_poor_performance_and.2For_instability"></span><span class="mw-headline" id="R9_390_series_poor_performance_and/or_instability">R9 390 series poor performance and/or instability</span>
</h3>
<p>If you experience issues <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/mesa/mesa/-/issues/1222">[5]</a> with a AMD R9 390 series graphics card, set <code>radeon.cik_support=0 radeon.si_support=0 amdgpu.cik_support=1 amdgpu.si_support=1 amdgpu.dc=1</code> as <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> to force the use of amdgpu driver instead of radeon.
</p>
<p>If it still does not work, disabling DPM might help, add <code>radeon.cik_support=0 radeon.si_support=0 amdgpu.cik_support=1 amdgpu.si_support=1</code> to the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<h3>
<span id="Freezes_with_.22.5Bdrm.5D_IP_block:gmc_v8_0_is_hung.21.22_kernel_error"></span><span class="mw-headline" id='Freezes_with_"[drm]_IP_block:gmc_v8_0_is_hung!"_kernel_error'>Freezes with "[drm] IP block:gmc_v8_0 is hung!" kernel error</span>
</h3>
<p>If you experience freezes and kernel crashes during a GPU intensive task with the kernel error " [drm] IP block:gmc_v8_0 is hung!" <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/issues/226">[6]</a>, a workaround is to set <code>amdgpu.vm_update_mode=3</code> as <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> to force the GPUVM page tables update to be done using the CPU. Downsides are listed here <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/226#note_308665">[7]</a>.
</p>
<h3>
<span id="Screen_flickering_white.2Fgray"></span><span class="mw-headline" id="Screen_flickering_white/gray">Screen flickering white/gray</span>
</h3>
<p>When you change resolution or connect to an external monitor, if the screen flickers or stays white, add <code>amdgpu.sg_display=0</code> as a <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>.
</p>
<h3><span class="mw-headline" id="System_freeze_or_crash_when_gaming_on_Vega_cards">System freeze or crash when gaming on Vega cards</span></h3>
<p><a href="../en/ATI.html#Dynamic_power_management" title="ATI">Dynamic power management</a> may cause a complete system freeze whilst gaming due to issues in the way GPU clock speeds are managed. <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/716">[8]</a> A workaround is to disable dynamic power management, see <a href="../en/ATI.html#Dynamic_power_management" title="ATI">ATI#Dynamic power management</a> for details.
</p>
<h3>
<span id="WebRenderer_.28Firefox.29_corruption"></span><span class="mw-headline" id="WebRenderer_(Firefox)_corruption">WebRenderer (Firefox) corruption</span>
</h3>
<p>Artifacts and other anomalies may present themselves (e.g. inability to select extension options) when <a href="../en/Firefox/Tweaks.html#WebRender" title="Firefox/Tweaks">WebRenderer</a> is force enabled by the user. Workaround is to fall back to OpenGL compositing.
</p>
<h3>
<span id="Double-speed_or_.22chipmunk.22_audio.2C_or_no_audio_when_a_4K.4060Hz_device_is_connected"></span><span class="mw-headline" id='Double-speed_or_"chipmunk"_audio,_or_no_audio_when_a_4K@60Hz_device_is_connected'>Double-speed or "chipmunk" audio, or no audio when a 4K@60Hz device is connected</span>
</h3>
<p>This is sometimes caused by a communication issue between an AMDGPU device and a 4K display connected over HDMI. A possible workaround is to enable HDR or "Ultra HD Deep Color" via the display's built-in settings. On many Android based TVs, this means setting this to "Standard" instead of "Optimal".
</p>
<h3>
<span id="Issues_with_power_management_.2F_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card"></span><span class="mw-headline" id="Issues_with_power_management_/_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card">Issues with power management / dynamic re-activation of a discrete amdgpu graphics card</span>
</h3>
<p>If you encounter issues where the kernel driver is loaded, but the discrete graphics card still is not available for games or becomes disabled during use (similar to <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/1820">[9]</a>), you can workaround the issue by setting the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> <code>amdgpu.runpm=0</code>, which prevents the dGPU from being powered down dynamically at runtime.
</p>
<h3><span class="mw-headline" id="kfd:_amdgpu:_TOPAZ_not_supported_in_kfd">kfd: amdgpu: TOPAZ not supported in kfd</span></h3>
<p>In the system journal or the kernel message keyring a critical level error message 
</p>
<pre>kfd: amdgpu: TOPAZ not supported in kfd
</pre>
<p>may appear. If you are not planning to use <a href="../en/GPGPU.html#ROCm" title="GPGPU">Radeon Open Compute</a>, this can be safely ignored. It is not supported in TOPAZ, as they are old GPUs. <a rel="nofollow" class="external autonumber" href="https://github.com/RadeonOpenCompute/ROCm/issues/1148#issuecomment-747849592">[10]</a> <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/linuxquestions/comments/yhbbiz/kfd_kfd_amdgpu_topaz_not_supported_in_kfd/">[11]</a>
</p>
<h3>
<span id="High_idle_power_draw_due_to_MCLK_locked_at_MAX_.281000MHz.29.2C_or_MIN_.2896MHz.29_causing_low_game_performance_.28on_6.4_kernel.29"></span><span class="mw-headline" id="High_idle_power_draw_due_to_MCLK_locked_at_MAX_(1000MHz),_or_MIN_(96MHz)_causing_low_game_performance_(on_6.4_kernel)">High idle power draw due to MCLK locked at MAX (1000MHz), or MIN (96MHz) causing low game performance (on 6.4 kernel)</span>
</h3>
<p>On high resolutions and refresh rates, the MCLK (vram / memory clock) may be locked at the highest clock rate (1000MHz) <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/1403">[12]</a> <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/2646">[13]</a> causing higher GPU idle power draw. On Linux kernel 6.4.x, MCLK clocks at the lowest (96MHz), causing low performance in games <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/2657">[14]</a> <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/2611">[15]</a>. 
</p>
<p>This is likely due to a monitor not using Coordinated Video Timings (CVT) with a low V-Blank value for the affected resolutions and refresh rates, see <a rel="nofollow" class="external text" href="https://gist.github.com/Rend0e/3bddac4285dc1f4fbe303f326f36f6cc">this gist</a> for a workaround.
</p>
<h3><span class="mw-headline" id="Failure_to_suspend_to_RAM">Failure to suspend to RAM</span></h3>
<p>The <code>amdgpu</code> kernel module tries to buffer VRAM in RAM when the system enters S3 to prevent memory loss through VRAM decay which is not sufficiently refreshed.
</p>
<p>If you are using a lot of VRAM and are short on free RAM <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/drm/amd/-/issues/2125">this can fail</a> despite sufficient SWAP memory would be available, because the IO subsystem might have been suspended before.
</p>
<p>You will see something like:
</p>
<pre>kernel: systemd-sleep: page allocation failure: order:0, mode:0x100c02(GFP_NOIO|__GFP_HIGHMEM|__GFP_HARDWALL), nodemask=(null),cpuset=/,mems_allowed=0
kernel: Call Trace:
kernel:  &lt;TASK&gt;
kernel:  dump_stack_lvl+0x47/0x60
kernel:  warn_alloc+0x165/0x1e0
kernel:  __alloc_pages_slowpath.constprop.0+0xd7d/0xde0
kernel:  __alloc_pages+0x32d/0x350
kernel:  ttm_pool_alloc+0x19f/0x600 [ttm 0bd92a9d9dccc3a4f19554535860aaeda76eb4f4]
</pre>
<p>As a workaround, a <a rel="nofollow" class="external text" href="https://git.dolansoft.org/lorenz/memreserver">userspace service</a> can ensure to allocate enough RAM for the VRAM to be buffered by swapping out enough RAM before the system is suspended.
</p>
<h3><span class="mw-headline" id="Failure_to_shut_down_and_to_suspend">Failure to shut down and to suspend</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Missing kernel info and bug reports. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:AMDGPU.html">Talk:AMDGPU</a>)</div>
</div>
<p><i> hid_sensor_*_3d</i> group of kernel modules can cause system lockups on bootup, shutdown, and suspend. Process list will show multiple instances of <code>udev-worker</code> which then fail to freeze upon system sleep.
</p>
<p>You will see something like:
</p>
<pre>kernel: PM: suspend entry (deep)
kernel: Filesystems sync: 0.002 seconds
kernel: Freezing user space processes
kernel: Freezing user space processes failed after 20.004 seconds (1 tasks refusing to freeze, wq_busy=0):
kernel: task:(udev-worker)   state:D stack:0     pid:479   tgid:479   ppid:422    flags:0x00004006
kernel: Call Trace:
kernel:  &lt;TASK&gt;
kernel:  __schedule+0x3db/0x1520
kernel:  ? srso_alias_return_thunk+0x5/0xfbef5
kernel:  ? __wake_up_common+0x78/0xa0
kernel:  ? srso_alias_return_thunk+0x5/0xfbef5
</pre>
<p>To work around this problem, blacklist the problematic modules by creating e.g. <code>/etc/modprobe.d/blacklist-hid_sensors.conf</code>
</p>
<pre>blacklist hid_sensor_accel_3d
blacklist hid_sensor_gyro_3d
blacklist hid_sensor_magn_3d
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a href="https://wiki.gentoo.org/wiki/AMDGPU" class="extiw" title="gentoo:AMDGPU">Gentoo:AMDGPU</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=AMDGPU&amp;oldid=819543">https://wiki.archlinux.org/index.php?title=AMDGPU&amp;oldid=819543</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 October 2024, at 14:21.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
