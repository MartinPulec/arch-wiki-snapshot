<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>PulseAudio/Examples - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PulseAudio_Examples rootpage-PulseAudio skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Creating_user_configuration_files" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Creating_user_configuration_files">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Creating user configuration files</div>
		</a>
		
			<button aria-controls="toc-Creating_user_configuration_files-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Creating user configuration files subsection</span>
			</button>
		
		<ul id="toc-Creating_user_configuration_files-sublist" class="vector-toc-list">
			<li id="toc-User_client_configuration_file_example" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#User_client_configuration_file_example">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>User client configuration file example</div>
			</a>
			
			<ul id="toc-User_client_configuration_file_example-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Set_default_input_source" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Set_default_input_source">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Set default input source</div>
		</a>
		
		<ul id="toc-Set_default_input_source-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Set_the_default_output_sink" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Set_the_default_output_sink">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Set the default output sink</div>
		</a>
		
		<ul id="toc-Set_the_default_output_sink-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Set_the_default_output_sink_profile" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Set_the_default_output_sink_profile">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Set the default output sink profile</div>
		</a>
		
		<ul id="toc-Set_the_default_output_sink_profile-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Independent_analog_and_digital_outputs_on_the_same_card" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Independent_analog_and_digital_outputs_on_the_same_card">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Independent analog and digital outputs on the same card</div>
		</a>
		
		<ul id="toc-Independent_analog_and_digital_outputs_on_the_same_card-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Simultaneous_HDMI_and_analog_output" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Simultaneous_HDMI_and_analog_output">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Simultaneous HDMI and analog output</div>
		</a>
		
			<button aria-controls="toc-Simultaneous_HDMI_and_analog_output-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Simultaneous HDMI and analog output subsection</span>
			</button>
		
		<ul id="toc-Simultaneous_HDMI_and_analog_output-sublist" class="vector-toc-list">
			<li id="toc-Alternative_solution_using_module-loopback_with_delay_compensation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Alternative_solution_using_module-loopback_with_delay_compensation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Alternative solution using module-loopback with delay compensation</div>
			</a>
			
			<ul id="toc-Alternative_solution_using_module-loopback_with_delay_compensation-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-HDMI_output_configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#HDMI_output_configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>HDMI output configuration</div>
		</a>
		
			<button aria-controls="toc-HDMI_output_configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle HDMI output configuration subsection</span>
			</button>
		
		<ul id="toc-HDMI_output_configuration-sublist" class="vector-toc-list">
			<li id="toc-Finding_HDMI_output" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Finding_HDMI_output">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>Finding HDMI output</div>
			</a>
			
			<ul id="toc-Finding_HDMI_output-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Testing_for_the_correct_card" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Testing_for_the_correct_card">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.2</span>Testing for the correct card</div>
			</a>
			
			<ul id="toc-Testing_for_the_correct_card-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Manually_configuring_PulseAudio_to_detect_the_Nvidia_HDMI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Manually_configuring_PulseAudio_to_detect_the_Nvidia_HDMI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.3</span>Manually configuring PulseAudio to detect the Nvidia HDMI</div>
			</a>
			
			<ul id="toc-Manually_configuring_PulseAudio_to_detect_the_Nvidia_HDMI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Automatically_switch_audio_to_HDMI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automatically_switch_audio_to_HDMI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.4</span>Automatically switch audio to HDMI</div>
			</a>
			
			<ul id="toc-Automatically_switch_audio_to_HDMI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Surround_sound_systems" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Surround_sound_systems">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Surround sound systems</div>
		</a>
		
			<button aria-controls="toc-Surround_sound_systems-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Surround sound systems subsection</span>
			</button>
		
		<ul id="toc-Surround_sound_systems-sublist" class="vector-toc-list">
			<li id='toc-Disabling_UCM/"HiFi"' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Disabling_UCM/"HiFi"'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>Disabling UCM/"HiFi"</div>
			</a>
			
			<ul id='toc-Disabling_UCM/"HiFi"-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Splitting_front/rear" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Splitting_front/rear">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.2</span>Splitting front/rear</div>
			</a>
			
			<ul id="toc-Splitting_front/rear-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Splitting_7.1_into_5.1+2.0" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Splitting_7.1_into_5.1+2.0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3</span>Splitting 7.1 into 5.1+2.0</div>
			</a>
			
			<ul id="toc-Splitting_7.1_into_5.1+2.0-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disabling_LFE_remixing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disabling_LFE_remixing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.4</span>Disabling LFE remixing</div>
			</a>
			
			<ul id="toc-Disabling_LFE_remixing-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Binaural_Headphones" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Binaural_Headphones">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.5</span>Binaural Headphones</div>
			</a>
			
			<ul id="toc-Binaural_Headphones-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-PulseAudio_over_network" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_over_network">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>PulseAudio over network</div>
		</a>
		
			<button aria-controls="toc-PulseAudio_over_network-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle PulseAudio over network subsection</span>
			</button>
		
		<ul id="toc-PulseAudio_over_network-sublist" class="vector-toc-list">
			<li id="toc-Selecting_the_server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Selecting_the_server">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.1</span>Selecting the server</div>
			</a>
			
			<ul id="toc-Selecting_the_server-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Selecting_the_server_with_Zeroconf" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Selecting_the_server_with_Zeroconf">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.2</span>Selecting the server with Zeroconf</div>
			</a>
			
			<ul id="toc-Selecting_the_server_with_Zeroconf-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Switching_the_PulseAudio_server_used_by_local_X_clients" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Switching_the_PulseAudio_server_used_by_local_X_clients">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.3</span>Switching the PulseAudio server used by local X clients</div>
			</a>
			
			<ul id="toc-Switching_the_PulseAudio_server_used_by_local_X_clients-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_RTP/UDP_instead_of_native-protocol-tcp" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_RTP/UDP_instead_of_native-protocol-tcp">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.4</span>Using RTP/UDP instead of native-protocol-tcp</div>
			</a>
			
			<ul id="toc-Using_RTP/UDP_instead_of_native-protocol-tcp-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_autodiscover_AirPlay_(raop)_server_support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_autodiscover_AirPlay_(raop)_server_support">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.5</span>Enable autodiscover AirPlay (raop) server support</div>
			</a>
			
			<ul id="toc-Enable_autodiscover_AirPlay_(raop)_server_support-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-ALSA_monitor_source" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#ALSA_monitor_source">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>ALSA monitor source</div>
		</a>
		
		<ul id="toc-ALSA_monitor_source-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Monitor_specific_output" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Monitor_specific_output">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">11</span>Monitor specific output</div>
		</a>
		
		<ul id="toc-Monitor_specific_output-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-PulseAudio_through_JACK" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_through_JACK">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">12</span>PulseAudio through JACK</div>
		</a>
		
			<button aria-controls="toc-PulseAudio_through_JACK-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle PulseAudio through JACK subsection</span>
			</button>
		
		<ul id="toc-PulseAudio_through_JACK-sublist" class="vector-toc-list">
			<li id="toc-The_KXStudio_method" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#The_KXStudio_method">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">12.1</span>The KXStudio method</div>
			</a>
			
			<ul id="toc-The_KXStudio_method-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-The_manual_sink_configuration_method" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#The_manual_sink_configuration_method">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">12.2</span>The manual sink configuration method</div>
			</a>
			
			<ul id="toc-The_manual_sink_configuration_method-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-The_shell_script_method" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#The_shell_script_method">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">12.3</span>The shell script method</div>
			</a>
			
			<ul id="toc-The_shell_script_method-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-The_PulseAudio_kill_method" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#The_PulseAudio_kill_method">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">12.4</span>The PulseAudio kill method</div>
			</a>
			
			<ul id="toc-The_PulseAudio_kill_method-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Troubleshooting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">12.5</span>Troubleshooting</div>
			</a>
			
			<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
				<li id="toc-When_JACK_is_started,_Firefox,_Chrome_and_other_applications_stop_playing_video_and_audio" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#When_JACK_is_started,_Firefox,_Chrome_and_other_applications_stop_playing_video_and_audio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">12.5.1</span>When JACK is started, Firefox, Chrome and other applications stop playing video and audio</div>
			</a>
			
			<ul id="toc-When_JACK_is_started,_Firefox,_Chrome_and_other_applications_stop_playing_video_and_audio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-After_starting_JACK,_the_sound_from_PulseAudio_becomes_distorted" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#After_starting_JACK,_the_sound_from_PulseAudio_becomes_distorted">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">12.5.2</span>After starting JACK, the sound from PulseAudio becomes distorted</div>
			</a>
			
			<ul id="toc-After_starting_JACK,_the_sound_from_PulseAudio_becomes_distorted-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-PulseAudio_through_OSS" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_through_OSS">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">13</span>PulseAudio through OSS</div>
		</a>
		
		<ul id="toc-PulseAudio_through_OSS-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-PulseAudio_from_within_a_chroot" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_from_within_a_chroot">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">14</span>PulseAudio from within a chroot</div>
		</a>
		
		<ul id="toc-PulseAudio_from_within_a_chroot-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Remapping_sinks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Remapping_sinks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">15</span>Remapping sinks</div>
		</a>
		
			<button aria-controls="toc-Remapping_sinks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Remapping sinks subsection</span>
			</button>
		
		<ul id="toc-Remapping_sinks-sublist" class="vector-toc-list">
			<li id="toc-Remapping_select_audio_sources" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remapping_select_audio_sources">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">15.1</span>Remapping select audio sources</div>
			</a>
			
			<ul id="toc-Remapping_select_audio_sources-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Remap_stereo_to_mono" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remap_stereo_to_mono">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">15.2</span>Remap stereo to mono</div>
			</a>
			
			<ul id="toc-Remap_stereo_to_mono-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Remap_left_or_right_to_mono" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remap_left_or_right_to_mono">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">15.3</span>Remap left or right to mono</div>
			</a>
			
			<ul id="toc-Remap_left_or_right_to_mono-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Remap_for_broadcasting_software" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remap_for_broadcasting_software">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">15.4</span>Remap for broadcasting software</div>
			</a>
			
			<ul id="toc-Remap_for_broadcasting_software-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Remap_left_(or_right)_input_to_mono_for_stereo_use" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remap_left_(or_right)_input_to_mono_for_stereo_use">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">15.5</span>Remap left (or right) input to mono for stereo use</div>
			</a>
			
			<ul id="toc-Remap_left_(or_right)_input_to_mono_for_stereo_use-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Swap_left/right_channels" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Swap_left/right_channels">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">16</span>Swap left/right channels</div>
		</a>
		
			<button aria-controls="toc-Swap_left/right_channels-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Swap left/right channels subsection</span>
			</button>
		
		<ul id="toc-Swap_left/right_channels-sublist" class="vector-toc-list">
			<li id="toc-Using_default.pa" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_default.pa">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">16.1</span>Using default.pa</div>
			</a>
			
			<ul id="toc-Using_default.pa-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Pipe_a_source_directly_into_a_sink" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Pipe_a_source_directly_into_a_sink">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">17</span>Pipe a source directly into a sink</div>
		</a>
		
		<ul id="toc-Pipe_a_source_directly_into_a_sink-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Capture_digital_input_from_S/PDIF_and_play_on_analog_output_in_(nearly)_real_time" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Capture_digital_input_from_S/PDIF_and_play_on_analog_output_in_(nearly)_real_time">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">18</span>Capture digital input from S/PDIF and play on analog output in (nearly) real time</div>
		</a>
		
		<ul id="toc-Capture_digital_input_from_S/PDIF_and_play_on_analog_output_in_(nearly)_real_time-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-PulseAudio_as_a_minimal_unintrusive_dumb_pipe_to_ALSA" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_as_a_minimal_unintrusive_dumb_pipe_to_ALSA">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">19</span>PulseAudio as a minimal unintrusive dumb pipe to ALSA</div>
		</a>
		
		<ul id="toc-PulseAudio_as_a_minimal_unintrusive_dumb_pipe_to_ALSA-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Having_both_speakers_and_headphones_plugged_in_and_switching_in_software_on-the-fly" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Having_both_speakers_and_headphones_plugged_in_and_switching_in_software_on-the-fly">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">20</span>Having both speakers and headphones plugged in and switching in software on-the-fly</div>
		</a>
		
		<ul id="toc-Having_both_speakers_and_headphones_plugged_in_and_switching_in_software_on-the-fly-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Allowing_multiple_users_to_share_a_PulseAudio_daemon" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Allowing_multiple_users_to_share_a_PulseAudio_daemon">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">21</span>Allowing multiple users to share a PulseAudio daemon</div>
		</a>
		
			<button aria-controls="toc-Allowing_multiple_users_to_share_a_PulseAudio_daemon-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Allowing multiple users to share a PulseAudio daemon subsection</span>
			</button>
		
		<ul id="toc-Allowing_multiple_users_to_share_a_PulseAudio_daemon-sublist" class="vector-toc-list">
			<li id="toc-Primary_user_setup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Primary_user_setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">21.1</span>Primary user setup</div>
			</a>
			
			<ul id="toc-Primary_user_setup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Secondary_user_setup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Secondary_user_setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">21.2</span>Secondary user setup</div>
			</a>
			
			<ul id="toc-Secondary_user_setup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alternative_setup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Alternative_setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">21.3</span>Alternative setup</div>
			</a>
			
			<ul id="toc-Alternative_setup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Troubleshooting_2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Troubleshooting_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">21.4</span>Troubleshooting</div>
			</a>
			
			<ul id="toc-Troubleshooting_2-sublist" class="vector-toc-list">
				<li id="toc-No_sound_when_switching_TTY" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#No_sound_when_switching_TTY">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">21.4.1</span>No sound when switching TTY</div>
			</a>
			
			<ul id="toc-No_sound_when_switching_TTY-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Mixing_additional_audio_into_the_microphone's_audio" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Mixing_additional_audio_into_the_microphone's_audio">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">22</span>Mixing additional audio into the microphone's audio</div>
		</a>
		
			<button aria-controls="toc-Mixing_additional_audio_into_the_microphone's_audio-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Mixing additional audio into the microphone's audio subsection</span>
			</button>
		
		<ul id="toc-Mixing_additional_audio_into_the_microphone's_audio-sublist" class="vector-toc-list">
			<li id="toc-PulseAudio_management_with_pulse-autoconf" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PulseAudio_management_with_pulse-autoconf">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">22.1</span>PulseAudio management with pulse-autoconf</div>
			</a>
			
			<ul id="toc-PulseAudio_management_with_pulse-autoconf-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PulseAudio_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PulseAudio_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">22.2</span>PulseAudio configuration</div>
			</a>
			
			<ul id="toc-PulseAudio_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Applications_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Applications_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">22.3</span>Applications configuration</div>
			</a>
			
			<ul id="toc-Applications_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Setup_steps" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setup_steps">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">22.4</span>Setup steps</div>
			</a>
			
			<ul id="toc-Setup_steps-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Teardown" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Teardown">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">22.5</span>Teardown</div>
			</a>
			
			<ul id="toc-Teardown-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Template_script" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Template_script">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">22.6</span>Template script</div>
			</a>
			
			<ul id="toc-Template_script-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Invert_phase_of_one_audio_channel" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Invert_phase_of_one_audio_channel">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">23</span>Invert phase of one audio channel</div>
		</a>
		
		<ul id="toc-Invert_phase_of_one_audio_channel-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Renaming_devices" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Renaming_devices">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">24</span>Renaming devices</div>
		</a>
		
		<ul id="toc-Renaming_devices-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Use_dynamic_default_sink_with_modules" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Use_dynamic_default_sink_with_modules">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">25</span>Use dynamic default sink with modules</div>
		</a>
		
		<ul id="toc-Use_dynamic_default_sink_with_modules-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">PulseAudio/Examples</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/PulseAudio/%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB" title="PulseAudio/サンプル – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../../ru/PulseAudio/Examples.html" title="PulseAudio (Русский)/Examples – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../en/PulseAudio.html" title="PulseAudio">PulseAudio</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../../en/PulseAudio.html" title="PulseAudio">PulseAudio</a></li>
<li><a href="../../en/PulseAudio/Troubleshooting.html" title="PulseAudio/Troubleshooting">PulseAudio/Troubleshooting</a></li>
</ul>
</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Creating_user_configuration_files">Creating user configuration files</span></h2>
<p>System-wide configuration files are located under <code>/etc/pulse</code> while user configuration files are located under <code><b>$XDG_CONFIG_HOME</b>/pulse</code>, which defaults to <code>~/.config/pulse</code>. For the examples below which modify the user's configuration file it may be necessary to first create the file. This can be done either by copying the system file under <code>/etc/pulse</code> to the user's configuration directory, or by creating a new file that includes it with the syntax <code>.include /etc/pulse/<i>name</i></code>. For simple changes the latter is preferred because the user will not be required to update the file when system-wide defaults change.
</p>
<h3><span class="mw-headline" id="User_client_configuration_file_example">User client configuration file example</span></h3>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.include /etc/pulse/client.conf
# User's directives go here.</pre>
<p>This syntax works for <code>default.pa</code>, <code>daemon.conf</code> and <code>system.pa</code>, even if the latter makes no sense as a user configuration file.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  Be sure to remove trailing whitespace from strings such as card names that you may have copied from the clipboard. 
<p>Errors in such as <code>Sink alsa_output.pci-0000_03_00.0.analog-stereo         does not exist.</code> may indirectly indicate such whitespace.
</p>
</div>
<h2><span class="mw-headline" id="Set_default_input_source">Set default input source</span></h2>
<p>List available input sources
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd list-sources | grep -e 'index:' -e device.string -e 'name:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"><i>  </i>index: 0
    name: &lt;input&gt;
      device.string = "hw:2"
* index: 1
    name: &lt;oss_input.dsp&gt;
      device.string = "/dev/dsp"
  index: 2
    name: &lt;alsa_output.pci-0000_04_01.0.analog-stereo.monitor&gt;</pre>
<p>The <code>*</code> in front of the index indicates the current default input.
</p>
<p>To set a system wide default, add the source name in the <code>default.pa</code> file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
set-default-source <i>alsa_output.pci-0000_04_01.0.analog-stereo.monitor</i>
...</pre>
<p>For temporary use
</p>
<pre>$ pacmd "set-default-source alsa_output.pci-0000_04_01.0.analog-stereo.monitor"
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The default source can be referred as <code>@DEFAULT_SOURCE@</code> in commands, for example: <code>$ pactl set-source-mute @DEFAULT_SOURCE@ toggle</code>.</div>
<h2><span class="mw-headline" id="Set_the_default_output_sink">Set the default output sink</span></h2>
<p>To list the output sinks available, type the following command:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd list-sinks | grep -e 'name:' -e 'index:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  * index: 0
	name: &lt;alsa_output.pci-0000_04_01.0.analog-stereo&gt;
    index: 1
	name: &lt;combined&gt;</pre>
<p>The <code>*</code> in front of the index indicates the current default output.
</p>
<p>To set a system wide default, add the source name in the <code>default.pa</code> file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
set-default-sink <i>alsa_output.pci-0000_04_01.0.analog-stereo</i>
...</pre>
<p>or per-user configuration <code>default.pa</code> file (which loads the default configuration from <code>/etc/pulse/default.pa</code> and overwrites the lines specified in this file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.include /etc/pulse/default.pa
...
set-default-sink <i>alsa_output.pci-0000_04_01.0.analog-stereo</i>
...</pre>
<p>When done then you can logout/login or restart PulseAudio manually for these changes to take effect.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The numbering of sinks is not guaranteed to be persistent, so all sinks in the <code>default.pa</code> file should be identified by the name.</li>
<li>For quick identification at runtime (e.g. to manage sound volume), you can use the sink index instead of the sink name: <pre>$ pactl set-sink-volume 0 +3%
$ pactl set-sink-volume 0 -3%
$ pactl set-sink-mute 0 toggle
</pre>
</li>
<li>To avoid unnecessary overriding of 100% normal volume it is better to use alternative utilities for managing of sound. See the <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=124513">forum thread</a> for more information.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The default sink can be referred as <code>@DEFAULT_SINK@</code> in commands, for example: <code>$ pactl set-sink-volume @DEFAULT_SINK@ +5%</code>.</div>
<h2><span class="mw-headline" id="Set_the_default_output_sink_profile">Set the default output sink profile</span></h2>
<p>Sometimes PulseAudio neglects to load the desired profile on start (e.g. a profile for having <a href="#Independent_analog_and_digital_outputs_on_the_same_card">#Independent analog and digital outputs on the same card</a>). To change the default profile, append the following to <code>default.pa</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
set-card-profile &lt;symbolic-name&gt; &lt;profilename&gt;</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<p>You could also use <code>&lt;cardindex&gt;</code> instead of <code>&lt;symbolic-name&gt;</code>, but using <code>&lt;symbolic-name&gt;</code> ensures referencing the correct device. <code>&lt;cardindex&gt;</code> is dynamic, and changes when a new device is plugged in.
</p>
</div>
<p>Find <code>&lt;symbolic-name&gt;</code> by running <code>pacmd list-cards</code>:
</p>
<pre>$ pacmd list-cards
3 card(s) available.
    index: 0
	name: &lt;alsa_card.pci-0000_01_00.1&gt;
	driver: &lt;module-alsa-card.c&gt;
	owner module: 6
        (...)

    index: 1
	name: &lt;alsa_card.usb-Sony_Interactive_Entertainment_Wireless_Controller-00&gt;
	driver: &lt;module-alsa-card.c&gt;
	owner module: 7
        (...)
				
    index: 2
	name: &lt;alsa_card.pci-0000_00_14.2&gt;
	driver: &lt;module-alsa-card.c&gt;
	owner module: 8
	(...)</pre>
<p>In this case, I want to use the device with index number 2, so <code>&lt;symbolic-name&gt;</code> should be <code>alsa_card.pci-0000_00_14.2</code>.
</p>
<p>To find <code>&lt;profilename&gt;</code>, set the desired profile manually, then run <code>pacmd list-cards </code>:
</p>
<pre>$ pacmd list-cards | grep 'active profile'
        active profile: &lt;off&gt;
	active profile: &lt;off&gt;
	active profile: &lt;output:analog-stereo+output:iec958-stereo+input:analog-stereo&gt;</pre>
<p>In this case, <code>default.pa</code> should now be changed to this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
set-card-profile alsa_card.pci-0000_00_14.2 output:analog-stereo+output:iec958-stereo+input:analog-stereo</pre>
<p>You can test your configuration by running <code>pactl set-card-profile &lt;symbolic-name&gt; &lt;profilename&gt;</code>.
</p>
<h2><span class="mw-headline" id="Independent_analog_and_digital_outputs_on_the_same_card">Independent analog and digital outputs on the same card</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> <code>/usr/share/pulseaudio/alsa-mixer/paths</code> has been replaced by <code>/usr/share/alsa-card-profile/mixer/paths</code> (Discuss in <a href="../../en/Talk:PulseAudio/Examples.html#Having_both_speakers_and_headphones_plugged_in_and_switching_in_software_on-the-fly" title="Talk:PulseAudio/Examples">Talk:PulseAudio/Examples#Having both speakers and headphones plugged in and switching in software on-the-fly</a>)</div>
</div>
<p>Sound cards may have both analog and digital (iec958) outputs.  Pulseaudio does not generate combined profiles by default, you can choose either digital or analog profiles.
</p>
<p>The easiest way to make both outputs available is to add a combined profile to the end of default profile configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/pulseaudio/alsa-mixer/profile-sets/default.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

# Profile must be a '+' separated list of relevant mappings configured above
[Profile output:analog-stereo+output:iec958-stereo+input:analog-stereo]
# Human readable description
description = Analog and digital stereo output and analog stereo intput
output-mappings = analog-stereo iec958-stereo
input-mappings = analog-stereo
</pre>
<p>This way a defined profile is added to the end of the list of available profiles.
</p>
<p>Although this works, pulseaudio has a nasty habit of falling back to auto-generated profiles, so you may eventually need to set your card back to the combined profile.  The best way to overcome this is by writing a custom configuration with disabled <code>auto-profiles</code>. Copy <code>default.conf</code> to <code>custom-profile.conf</code>, and edit it to suit your needs (this example is for stereo output/input):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/pulseaudio/alsa-mixer/profile-sets/custom-profile.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

[General]
auto-profiles = no # disable  profile auto-generation
# Leave only relevant mappings:
[Mapping analog-stereo]
device-strings = front:%f
channel-map = left,right
paths-output = analog-output analog-output-lineout analog-output-speaker analog-output-headphones analog-output-headphones-2
paths-input = analog-input-front-mic analog-input-rear-mic analog-input-internal-mic analog-input-dock-mic analog-input analog-input-mic analog-input-linein analog-input-aux analog-input-video analog-input-tvtuner analog-input-fm analog-input-mic-line analog-input-headphone-mic analog-input-headset-mic
priority = 15

[Mapping iec958-stereo]
device-strings = iec958:%f
channel-map = left,right
paths-input = iec958-stereo-input
paths-output = iec958-stereo-output
priority = 5

[Profile output:analog-stereo+output:iec958-stereo+input:analog-stereo]
description = Analog and digital stereo output and analog stereo intput
output-mappings = analog-stereo iec958-stereo
input-mappings = analog-stereo
skip-probe=yes # since you know what your sound card has, there is no need for checking which sinks are available
</pre>
<p>Now that you have your custom profile you need to tell pulseaudio to use it.  This can be done by defining an <a href="../../en/Udev.html#About_udev_rules" class="mw-redirect" title="Udev rule">udev rule</a>:
</p>
<p>First get relevant information about your sound card:
</p>
<pre>$ pactl list cards

Card #0
        Name: alsa_card.pci-0000_00_1b.0
--- snip ----
        Properties:
--- snip ---
                device.vendor.id = "8086" # This is a 'vendor' attribute for udev rule
                device.product.id = "1c20" # This is a 'device' attribute for udev rule</pre>
<p>Now create a configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/udev/rules.d/91-pulseaudio-custom.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

SUBSYSTEM!="sound", GOTO="pulseaudio_end"
ACTION!="change", GOTO="pulseaudio_end"
KERNEL!="card*", GOTO="pulseaudio_end"

SUBSYSTEMS=="pci", ATTRS{vendor}=="0x8086", ATTRS{device}=="0x1c20", ENV{PULSE_PROFILE_SET}="custom-profile.conf"

LABEL="pulseaudio_end"
</pre>
<p>Now tell udev to reload sound subsystem <code>udevadm trigger -ssound</code> (as the root user) and restart pulseaudio.  Your sound card should now use only the defined profile and have both analog and digital outputs available.
</p>
<h2><span class="mw-headline" id="Simultaneous_HDMI_and_analog_output">Simultaneous HDMI and analog output</span></h2>
<p>PulseAudio allows for simultaneous output to multiple sources.  In this example, some applications are configured to use HDMI while others are configured to use analog.  Multiple applications are able to receive audio at the same time. (<i>aplay</i> is from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span> package.)
</p>
<pre>$ aplay -l
**** List of PLAYBACK Hardware Devices ****
card 0: Intel [HDA Intel], device 0: ALC889A Analog [ALC889A Analog]
  Subdevices: 0/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 1: ALC889A Digital [ALC889A Digital]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 3: HDMI 0 [HDMI 0]
  Subdevices: 0/1
  Subdevice #0: subdevice #0</pre>
<p>Or by using the <i>pacmd</i> command: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd list-sinks  | grep -e 'name:'  -e 'alsa.device ' -e 'alsa.subdevice '</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">	name: &lt;alsa_output.pci-0000_00_1b.0.analog-stereo&gt;
		alsa.subdevice = "0"
		alsa.device = "0"</pre>
<p>The key to a configuration like this is to understand that whatever is selected in pavucontrol under <i>Configuration &gt; Internal Audio</i> is the default device. Load <i>pavucontrol &gt; Configuration</i> and select HDMI as the profile. 
</p>
<p>To setup the analog device as a secondary source, add the following to the <code>/etc/pulse/default.pa</code> configuration at the beginning, before any other modules are loaded: 
</p>
<pre>### Load analog device
load-module module-alsa-sink device=hw:0,0
load-module module-combine-sink sink_name=combined
set-default-sink combined
</pre>
<p>Restart PulseAudio, run <i>pavucontrol</i> and select the "Output Devices" tab.  Three settings should be displayed:
</p>
<ol>
<li>Internal Audio Digital Stereo (HDMI)</li>
<li>Internal Audio</li>
<li>Simultaneous output to Internal Audio Digital Stereo (HDMI), Internal Audio</li>
</ol>
<p>Now start a program that will use PulseAudio such as MPlayer, VLC, mpd, etc. and switch to the "Playback" tab. A drop-down list should be available for the running program to select one of the three sources.
</p>
<p>Also see <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=118026">this thread</a> for a variation on this theme and <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/FAQ#Can_I_use_PulseAudio_to_playback_music_on_two_sound_cards_simultaneously.3F">PulseAudio FAQ</a>.
</p>
<h3><span class="mw-headline" id="Alternative_solution_using_module-loopback_with_delay_compensation">Alternative solution using module-loopback with delay compensation</span></h3>
<p>If the example above does not work for you, for instance because of echos / delays, you can try the following configuration.
</p>
<p>In this case, the HDMI-Audio was 65ms behind analog when using module-combine-sink.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
load-module module-alsa-sink device=hw:0,0 sink_name=analog sink_properties=device.description=analog
load-module module-alsa-sink device=hw:0,1 sink_name=digital sink_properties=device.description=digital
load-module module-alsa-sink device=hw:0,3 sink_name=hdmi sink_properties=device.description=hdmi
load-module module-loopback sink=analog latency_msec=65
[...]
set-default-sink hdmi</pre>
<h2><span class="mw-headline" id="HDMI_output_configuration">HDMI output configuration</span></h2>
<p>As outlined in <a rel="nofollow" class="external free" href="https://download.nvidia.com/XFree86/gpu-hdmi-audio-document/index.html#_issues_in_pulseaudio">https://download.nvidia.com/XFree86/gpu-hdmi-audio-document/index.html#_issues_in_pulseaudio</a> unless the HDMI port is the first
output, PulseAudio will not be able to have any audio when using certain graphics cards with HDMI audio support. This is because of a bug in PulseAudio where it will only select the first HDMI output on a device. A work around posted further down is to first find which HDMI output is working by using the <code>aplay</code> utility from ALSA (in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-utils">alsa-utils</a></span>).
</p>
<p>The original title for this section indicated the problem is specific to nVidia cards. As seen in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=133222">this forum thread</a> other cards are affected as well. The rest of the section will use an nVidia card as a case-study but the solution should carry over for people using other affected cards.
</p>
<h3><span class="mw-headline" id="Finding_HDMI_output">Finding HDMI output</span></h3>
<p>Then find the working output by listing the available cards
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># aplay -l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">**** List of PLAYBACK Hardware Devices ****
 card 0: NVidia [HDA NVidia], device 0: ALC1200 Analog [ALC1200 Analog]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 0: NVidia [HDA NVidia], device 3: ALC1200 Digital [ALC1200 Digital]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 3: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 7: HDMI 0 [HDMI 0]
   Subdevices: 0/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 8: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 9: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
</pre>
<p>In case your HDMI port is wired to the NVIDIA card, but <code>aplay</code> does not detect an NVIDIA audio card, follow <a href="../../en/NVIDIA/Troubleshooting.html#No_audio_over_HDMI" title="NVIDIA/Troubleshooting">NVIDIA/Troubleshooting#No audio over HDMI</a>.
</p>
<h3><span class="mw-headline" id="Testing_for_the_correct_card">Testing for the correct card</span></h3>
<p>Now that we have a list of detected cards and devices, users will need to test for which one is outputting to the TV/monitor; for example, to test card <b>1</b>, device <b>3</b> from the list above:
</p>
<pre># aplay -D plughw:1,3 /usr/share/sounds/alsa/Front_Right.wav
</pre>
<p>If there is no audio, then try substituting a different card and/or device number (on my card I had to use card 1 device 7)
</p>
<h3><span class="mw-headline" id="Manually_configuring_PulseAudio_to_detect_the_Nvidia_HDMI">Manually configuring PulseAudio to detect the Nvidia HDMI</span></h3>
<p>Having identified which HDMI device is working, PulseAudio can be forced to use it via an edit to <code>/etc/pulse/default.pa</code>:
</p>
<pre># load-module module-alsa-sink device=hw:1,7
</pre>
<p>where the 1 is the card and the 7 is the device found to work in the previous section.  Place this towards the bottom of the file, so that other sinks may still be auto-detected.
</p>
<p>Restart PulseAudio:
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<p>Open the sound settings manager, make sure that under the hardware tab the graphics cards HDMI audio is set to "Digital Stereo (HDMI) Output" (My graphics card audio is called "GF100 High Definition Audio Controller").
</p>
<p>Then, open the output tab. There should now be two HDMI outputs for the graphics card. Test which one works by selecting one of them, and then using a program to play audio. For example, use VLC to play a movie, and if it does not work, then select the other.
</p>
<h3><span class="mw-headline" id="Automatically_switch_audio_to_HDMI">Automatically switch audio to HDMI</span></h3>
<p>Create a script to switch to the desired audio profile if an HDMI cable is plugged in:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/hdmi_sound_toggle.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

export PATH=/usr/bin

USER_NAME=$(who | awk -v vt=tty$(fgconsole) '$0 ~ vt {print $1}')
USER_ID=$(id -u "$USER_NAME")
CARD_PATH="/sys/class/drm/card0/"
AUDIO_OUTPUT="analog-surround-40"
PULSE_SERVER="unix:/run/user/"$USER_ID"/pulse/native"

for OUTPUT in $(cd "$CARD_PATH" &amp;&amp; echo card*); do
  OUT_STATUS=$(&lt;"$CARD_PATH"/"$OUTPUT"/status)
  if [[ $OUT_STATUS == connected ]]
  then
    echo $OUTPUT connected
    case "$OUTPUT" in
      "card0-HDMI-A-1")
        AUDIO_OUTPUT="hdmi-stereo" # Digital Stereo (HDMI 1)
     ;;
      "card0-HDMI-A-2")
        AUDIO_OUTPUT="hdmi-stereo-extra1" # Digital Stereo (HDMI 2)
     ;;
    esac
  fi
done
echo selecting output $AUDIO_OUTPUT
sudo -u "$USER_NAME" pactl --server "$PULSE_SERVER" set-card-profile 0 output:$AUDIO_OUTPUT+input:analog-stereo
</pre>
<p>Make the script <a href="../../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>.
</p>
<p>Create a <a href="../../en/Udev.html" title="Udev">udev</a> rule to run this script when the status of the HDMI change:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-hdmi_sound.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">KERNEL=="card0", SUBSYSTEM=="drm", ACTION=="change", RUN+="/usr/local/bin/hdmi_sound_toggle.sh"</pre>
<p>To make the change effective do not forget to reload the udev rules:
</p>
<pre>udevadm control --reload-rules
</pre>
<p>A reboot might be required.
</p>
<h2><span class="mw-headline" id="Surround_sound_systems">Surround sound systems</span></h2>
<p>Many people have a surround sound card, but have speakers for just two channels, so PulseAudio cannot really default to a surround sound setup. To enable all of the channels, edit <code>/etc/pulse/daemon.conf</code>: uncomment the default-sample-channels line (i.e. remove the semicolon from the beginning of the line) and set the value to <b>6</b>. For a <i>5.1</i> setup, or <b>8</b> for a <i>7.1</i> setup etc.
</p>
<pre># Default
default-sample-channels=2
# For 5.1
default-sample-channels=6
# For 7.1
default-sample-channels=8
</pre>
<p>If your channels are not correctly mapped or the volume controls for the individual channels do not work as expected in pavucontrol, and you have a HDMI and an analog soundcard, then try to add the following line to <code>/etc/pulse/default.pa</code>
</p>
<pre>load-module module-combine channels=6 channel_map=front-left,front-right,rear-left,rear-right,front-center,lfe
</pre>
<p>Note that this example is for a 5.1 setup.
</p>
<p>After doing the edit, restart PulseAudio.
</p>
<h3>
<span id="Disabling_UCM.2F.22HiFi.22"></span><span class="mw-headline" id='Disabling_UCM/"HiFi"'>Disabling UCM/"HiFi"</span>
</h3>
<p>Most guides to making surround sound work with PulseAudio will tell you that you need to select the correct surround sound profile for your card/HDMI output, which you can do using the "Configuration" tab in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>.  However, you may find that the only profile for your card is "HiFi: Play HiFi quality Music", which is not a surround sound profile.  You may then waste far too much time trying to create a profile for your card, or set up udev rules correctly, neither of which will do anything.
</p>
<p>What's actually happening here is that you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-ucm-conf">alsa-ucm-conf</a></span> installed, and so PulseAudio is ignoring its own profiles and trying to use <a rel="nofollow" class="external text" href="https://www.alsa-project.org/alsa-doc/alsa-lib/group__ucm__conf.html">ALSA Use Case Manager</a> profiles instead.  Unfortunately, if ALSA UCM doesn't have a useful profile for your card, you're stuck with the default 2-channel "HiFi" instead.  Fortunately, you can fix this by switching back to PulseAudio profiles, which default to a surround sound configuration for surround sound capable sound cards/HDMI outputs.
</p>
<p>The easiest way to do this is to <a href="../../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> <code>/etc/pulse/default.pa</code> as follows: 
</p>
<pre>load-module module-udev-detect use_ucm=0
</pre>
<p>and then <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reload">reload</a> the <code>pulseaudio.service</code> <a href="../../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a>.
</p>
<p>Your PulseAudio installation will then ignore UCM and use PulseAudio profiles, which, if you've changed your default-sample-channels as per the above instructions, will include a surround sound profile that you can use to output surround sound.  You can verify by checking the configuration tab in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>, where you should no longer see "HiFi".
</p>
<h3>
<span id="Splitting_front.2Frear"></span><span class="mw-headline" id="Splitting_front/rear">Splitting front/rear</span>
</h3>
<p>Connect speakers to front analog output and headphones to rear output. It would be useful to split front/rear to separate sinks. Add to <code>/etc/pulse/default.pa</code>:
</p>
<pre> load-module module-remap-sink sink_name=speakers sink_properties="device.description='Speakers'" remix=no master=alsa_output.pci-0000_05_00.0.analog-surround-40 channels=2 master_channel_map=front-left,front-right channel_map=front-left,front-right
 load-module module-remap-sink sink_name=headphones sink_properties="device.description='Headphones'" remix=no master=alsa_output.pci-0000_05_00.0.analog-surround-40 channels=2 master_channel_map=rear-left,rear-right channel_map=front-left,front-right
</pre>
<p>Make sure to replace alsa_output.pci-0000_05_00.0.analog-surround-40 with the sound card name shown in 'pacmd list-sinks'.
Now you have 2 additional sinks which can be used separately. You can choose 'sink_name' freely, as long as there is no sink with that name already. The 'remix' parameter controls whether the audio should be down-/upmixed to match the channels in the sink.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If pulseaudio fails with <code>master sink not found</code>, comment out the remapping lines, start PulseAudio and verify your card output is set to the one you specified (e.g. analog surround 4.0). Alternatively, try using a <a href="#Set_the_default_output_sink">sink index</a> instead of a sink name.</div>
<h3>
<span id="Splitting_7.1_into_5.1.2B2.0"></span><span class="mw-headline" id="Splitting_7.1_into_5.1+2.0">Splitting 7.1 into 5.1+2.0</span>
</h3>
<p>Similar to the example above, you can also split a 7.1 configuration into 5.1 surround and stereo output devices.
Set your card to 7.1 mode, then add the following lines to <code>/etc/pulse/default.pa</code>:
</p>
<pre> load-module module-remap-sink sink_name=Surround sink_properties="device.description='Surround'" remix=no master=alsa_output.pci-0000_00_14.2.analog-surround-71 channels=6 master_channel_map=front-left,front-right,rear-left,rear-right,front-center,lfe channel_map=front-left,front-right,rear-left,rear-right,front-center,lfe
 load-module module-remap-sink sink_name=Stereo sink_properties="device.description='Stereo'" remix=no master=alsa_output.pci-0000_00_14.2.analog-surround-71 channels=2 master_channel_map=side-left,side-right channel_map=front-left,front-right
</pre>
<p>Make sure to replace alsa_output.pci-0000_00_14.2 with your sound card name, get it by running 'pacmd list-sinks'.
This configuration will use the front/rear/center+lfe (green/black/orange) jacks for the 5.1 sink and the side (grey) jack for the stereo sink.
It will also downmix any audio to stereo for the stereo sink, but will not touch the 5.1 output.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If pulseaudio fails with <code>master sink not found</code>, comment out the remapping lines, start PulseAudio and verify your card output is set to analog surround 7.1. Alternatively, try using a <a href="#Set_the_default_output_sink">sink index</a> instead of a sink name.</div>
<h3><span class="mw-headline" id="Disabling_LFE_remixing">Disabling LFE remixing</span></h3>
<p>By default, PulseAudio remixes the number of channels to the default-sample-channels and since version 7 it also remixes the LFE channel. If you wish to disable LFE remixing, uncomment the line:
</p>
<pre>; enable-lfe-remixing = yes
</pre>
<p>and replace yes with no:
</p>
<pre>enable-lfe-remixing = no
</pre>
<p>then restart Pulseaudio.
</p>
<h3><span class="mw-headline" id="Binaural_Headphones">Binaural Headphones</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ladspa-bs2b/">ladspa-bs2b</a></span><sup><small>AUR</small></sup> provides a plugin to simulate surround sound on stereo headphones. To use it, find your headphones with:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd list-sinks | grep -e 'name:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">	name: &lt;alsa_output.pci-0000_00_1b.0.iec958-ac3-surround-51&gt;
	name: &lt;alsa_output.pci-0000_00_1b.0.iec958-ac3-surround-51.equalizer&gt;
	name: &lt;bluez_sink.00_1F_82_28_93_51&gt;
</pre>
<p>Load the plugin (<i>new</i> sink_name is up to you, master=<i>headphone's sink name</i>):
</p>
<pre>pacmd load-module module-ladspa-sink sink_name=binaural master=bluez_sink.00_1F_82_28_93_51 plugin=bs2b label=bs2b control=700,4.5
</pre>
<p>Use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> to transfer streams to the new sink, or:
</p>
<pre>pactl move-sink-input $INPUTID $BINAURALSINKNAME
</pre>
<h2><span class="mw-headline" id="PulseAudio_over_network">PulseAudio over network</span></h2>
<p>One of PulseAudio's unique features is its ability to stream audio from clients over TCP to a server running the PulseAudio daemon reliably within a LAN. Ensure that client and server systems agree on the time (i.e., use NTP), or audio streams may be choppy or may not work at all. For a more detailed guide visit the <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Network/">Official PulseAudio Documentation</a>
</p>
<p>Enable the TCP module on the server(the computer that actually outputs sound), edit <code>/etc/pulse/default.pa</code> to add or uncomment:
</p>
<pre>load-module module-native-protocol-tcp
</pre>
<p>Or you can use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=paprefs">paprefs</a></span> GUI application (root is not required): go to <i>Network Server -&gt; Enable network access to local sound devices</i>.
</p>
<p>To make sure <code>module-native-protocol-tcp</code> is loaded on the server, you can use:
</p>
<pre>$ pacmd list-modules | grep module-native-protocol-tcp
</pre>
<p>It is a requirement that both the client and server share the same cookie. Ensure that the clients and server share the same cookie file found under <code>~/.config/pulse/cookie</code>. It does not matter whose cookie file you use (the server or a client's), just that the server and client(s) share the same one.
</p>
<p>If it is undesirable to copy the cookie file from clients, anonymous clients can access the server by passing <code>auth-anonymous</code> to <code>module-native-protocol-tcp</code> on the server (again in <code>/etc/pulse/default.pa</code>):
</p>
<pre>load-module module-native-protocol-tcp auth-anonymous=1
</pre>
<p>It is also possible to authenticate based on client IP address:
</p>
<pre>load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1;192.168.0.0/24
</pre>
<p>Change the LAN IP subnet to match that of those clients you wish to have access to the server.
</p>
<h3><span class="mw-headline" id="Selecting_the_server">Selecting the server</span></h3>
<p>For a single shell or command you can set the <code>PULSE_SERVER</code> <a href="../../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> to the host name or IP address of the desired PulseAudio server:
</p>
<pre>$ env PULSE_SERVER=<i>server_hostname_or_ip</i> mplayer test.mp3
</pre>
<p>Alternatively, you can create or modify <code>~/.config/pulse/client.conf</code> or <code>/etc/pulse/client.conf</code> to set a default-server persistently:
</p>
<pre>default-server = <i>server_hostname_or_ip</i>
</pre>
<h3><span class="mw-headline" id="Selecting_the_server_with_Zeroconf">Selecting the server with Zeroconf</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> There is no reference for the following note. (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:PulseAudio/Examples.html">Talk:PulseAudio/Examples</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This section is known to be unreliable for some people.</div>
<p>For the remote PulseAudio server to appear in the PulseAudio Device Chooser (<code>pasystray</code>), load the appropriate zeroconf modules, and enable the <a href="../../en/Avahi.html" title="Avahi">Avahi</a> <a href="../../en/Systemd.html" class="mw-redirect" title="Daemon">daemon</a>. On both machines, the client and server, <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-zeroconf">pulseaudio-zeroconf</a></span> package. <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> <code>avahi-daemon.service</code> afterwards.
</p>
<p>On the server, add <code>load-module module-zeroconf-publish</code> to <code>/etc/pulse/default.pa</code>. On the client, add <code>load-module module-zeroconf-discover</code> to <code>/etc/pulse/default.pa</code>. Now redirect any stream or complete audio output to the remote PulseAudio server by selecting the appropriate sink.
</p>
<p>If you have issues with the remote syncs appearing on the client, try restarting the Avahi daemon on the server to rebroadcast the available interfaces.
</p>
<p>Run the graphical PulseAudio Volume Control <code>pavucontrol</code>. Under the <i>Output Devices</i> tab, you should see the local and remote output devices. Under the <i>Playback</i> tab, to the left of the "X" Mute Audio button, you should see a box containing the name of an output device. That box is <i>actually a button</i>, which will display a drop-down radio-button list of the available output devices, with one output device selected. Selecting an output device from the list will allow the audio stream to be switched to the PulseAudio server associated with that output device. This control is not at all obvious until you have used it, and is especially useful with a remote Headless sound server.
</p>
<p>Similarly, under the <i>Input Devices</i> tab, local and remote input devices will be seen. And under the <i>Recording</i> tab, there will be a box, to the left of the "X" Mute Audio button, with the name of an input device which is actually a button which will display a drop-down radio-button list of available input devices.
</p>
<p>Run <code>pavucontrol</code> on the local or remote host associated with the audio stream to be directed. For instance, run <code>pavucontrol</code> on the remote host to direct the remote audio output to the local host. Run <code>pavucontrol</code> on the local host to direct the local audio output to some remote host.
</p>
<p>Setting up simultaneous inputs or outputs is a different thing. Search about "monitor" and "module-combine-sink" for that.
</p>
<h3><span class="mw-headline" id="Switching_the_PulseAudio_server_used_by_local_X_clients">Switching the PulseAudio server used by local X clients</span></h3>
<p>To switch between servers on the client from within X, the <code>pax11publish</code> command can be used.  For example, to switch from the default server to the server at hostname foo:
</p>
<pre>$ pax11publish -e -S foo
</pre>
<p>Or to switch back to the default:
</p>
<pre>$ pax11publish -e -r
</pre>
<p>Instead of telling the PulseAudio server to stream audio (as described above), this will edit PulseAudio variables on the X11 root window, which will instruct the PulseAudio client libraries to connect to a PulseAudio server other than <code>localhost</code>. As such, the programs will no longer interact with the local <code>pulseaudio</code> process, which can then be <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">stopped</a>. Programs such as <code>pactl</code>, <code>pacmd</code> or <code>pavucontrol</code> will need to also run with the appropriate <code>PULSE_SERVER</code> environment/X variable to control the remote PulseAudio server.
</p>
<p>Note that for the switch to become apparent, the programs using Pulse must be restarted, or their PulseAudio client library otherwise reinitialized (completely stopping and restarting playback may be enough). To make this setting permanent, edit <code>default-server</code> in <code>~/.config/pulse/client.conf</code> or <code>/etc/pulse/client.conf</code>.
</p>
<h3>
<span id="Using_RTP.2FUDP_instead_of_native-protocol-tcp"></span><span class="mw-headline" id="Using_RTP/UDP_instead_of_native-protocol-tcp">Using RTP/UDP instead of native-protocol-tcp</span>
</h3>
<p>There are serious issues with trying to send data in real time over TCP, especially over lossy connections like wifi. This is why <a href="https://en.wikipedia.org/wiki/Real-time_Transport_Protocol" class="extiw" title="wikipedia:Real-time Transport Protocol">RTP over UDP</a> was invented. It can be used to increase reliability and reduce latency.
</p>
<p>When RTP is working properly, late or dropped packets will just create a few milliseconds of silence instead of a long pause while TCP is orchestrating the packet resend logistics. As an added bonus, if the remote server is ever restarted, the connection will be re-established automatically.  However there will no longer be a way to remotely control the server's master volume, with each client machine having its own independent master volume instead.
</p>
<p>To use RTP instead of <code>native-protocol-tcp</code>, pulseaudio clients must connect to a local pulseaudio server first. This local server then connects to the remote pulseaudio server through RTP.
</p>
<p>To use RTP in pulseaudio, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-rtp">pulseaudio-rtp</a></span> on the remote and local servers.
</p>
<p>To configure the remote pulseaudio server, add the following to <code>/etc/pulse/default.pa</code> (or to <code>/etc/pulse/system.pa</code> if running pulseaudio in <code>--system</code> mode):
</p>
<pre>load-module module-rtp-recv latency_msec=10 sap_address=0.0.0.0
</pre>
<p><code>sap_address=0.0.0.0</code> is important to prevent pulseaudio from trying to use multicast, which <a rel="nofollow" class="external text" href="https://datatracker.ietf.org/doc/html/draft-mcbride-mboned-wifi-mcast-problem-statement-01.html#section-1">doesn't work at all over wifi</a>. Use <code>latency_msec</code> to tune the receiving buffer size on the remote end. If you find the audio is spotty, try increasing this number. If you care more about latency, try decreasing it. Restart the remote server to cause the changes to take effect.
</p>
<p>To configure the local pulseaudio server, add the following to <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-null-sink sink_name=rtp sink_properties="device.description='RTP'"
load-module module-rtp-send source=rtp.monitor destination_ip=&lt;remote host&gt;
</pre>
<p><code>&lt;remote host&gt;</code> is the host name of the remote pulseaudio server.
</p>
<p>After restarting the local server, a new sink labelled "RTP" will appear in pavucontrol. To route a particular client's output to it, find the client under the "Playback" tab, then change the client from its current sink (e.g. "Built-in Audio Analog Stereo") to "RTP". To use the RTP sink by default for all clients, add this to <code>/etc/pulse/default.pa</code>, then restart the local pulseaudio server:
</p>
<pre>set-default-sink rtp
</pre>
<h3>
<span id="Enable_autodiscover_AirPlay_.28raop.29_server_support"></span><span class="mw-headline" id="Enable_autodiscover_AirPlay_(raop)_server_support">Enable autodiscover AirPlay (raop) server support</span>
</h3>
<p>To autodiscover and use a AirPlay server, ensure the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-zeroconf">pulseaudio-zeroconf</a></span> is installed and <a href="../../en/Avahi.html" title="Avahi">Avahi</a> is running (this is for autodetection itself).  Also install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-rtp">pulseaudio-rtp</a></span> (for the raop protocol).  Then, add the following to <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-raop-discover
</pre>
<p>Restart <code>pulseaudio.service</code> and devices should automatically appear in the list of sinks.
</p>
<p>This example is taken from <a rel="nofollow" class="external text" href="https://gist.github.com/julianxhokaxhiu/e0891db7193f2df6ee57f20cbaaa2a8b">julianxhokaxhiu's gist</a>.
</p>
<h2><span class="mw-headline" id="ALSA_monitor_source">ALSA monitor source</span></h2>
<p>To be able to record from a monitor source (a.k.a. "What-U-Hear", "Stereo Mix"), use <code>pactl list</code> to find out the name of the source in PulseAudio (e.g. <code>alsa_output.pci-0000_00_1b.0.analog-stereo.monitor</code>). Then add lines like the following to <code>/etc/asound.conf</code> or <code>~/.asoundrc</code>:
</p>
<pre>pcm.pulse_monitor {
  type pulse
  device alsa_output.pci-0000_00_1b.0.analog-stereo.monitor
}

ctl.pulse_monitor {
  type pulse
  device alsa_output.pci-0000_00_1b.0.analog-stereo.monitor
}
</pre>
<p>Now you can select <code>pulse_monitor</code> as a recording source.
</p>
<p>Alternatively, you can use pavucontrol to do this: make sure you have set up the display to "All input devices", then select "Monitor of [your sound card]" as the recording source.
</p>
<h2><span class="mw-headline" id="Monitor_specific_output">Monitor specific output</span></h2>
<p>It is possible to monitor a specific output, for example to stream audio from a music player into a VOIP application.
Simply create a null output device:
</p>
<pre>pactl load-module module-null-sink sink_name=&lt;name&gt; sink_properties=device.description=&lt;description&gt;
</pre>
<p>In Pulseaudio Volume Control (pavucontrol), under the "Playback" tab, change the output of an application to &lt;name&gt;, and in the recording tab change the input of an application to "Monitor of &lt;name&gt;". Audio will now be outputted from one application into the other.
</p>
<h2><span class="mw-headline" id="PulseAudio_through_JACK">PulseAudio through JACK</span></h2>
<p>The <a href="../../en/JACK_Audio_Connection_Kit.html" title="JACK Audio Connection Kit">JACK Audio Connection Kit</a> is popular for audio work, and is widely supported by Linux audio applications. It fills a similar niche as PulseAudio, but with more of an emphasis on professional audio work. It can offer lower latency audio monitoring along with greater control of input and output of multi-i/o sound devices.
</p>
<h3><span class="mw-headline" id="The_KXStudio_method">The KXStudio method</span></h3>
<p>This configuration requires the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jack2">jack2</a></span> package.
</p>
<p>JACK now has native features for bridging between ALSA, PulseAudio, and JACK. This will allow you to simultaneously have JACK and PulseAudio running with both outputting at the same time, with no configuration editing or terminal commands required.
</p>
<p>If you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qjackctl">qjackctl</a></span> installed, make sure that it is not running (it might be running minified in the system tray). Also ensure that no <code>jackd</code> process is running (use <code>ps xw </code> in a terminal to check).
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cadence/">cadence</a></span><sup><small>AUR</small></sup>, as well as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-jack">pulseaudio-jack</a></span>.  Once installed and started, JACK bridge configuration is found in the bottom right of the window.  The ALSA audio bridge should be set to ALSA -&gt; PulseAudio -&gt; JACK, and the PulseAudio bridge should be enabled.  Make sure in <code>pavucontrol</code> that all output devices besides Jack sink are muted, and all input devices besides Jack input are muted.  Start JACK using the Force Restart button, and if it starts successfully PulseAudio programs should begin outputting to JACK.
</p>
<h3><span class="mw-headline" id="The_manual_sink_configuration_method">The manual sink configuration method</span></h3>
<p>This configuration provides a method of allowing JACK and PulseAudio to run at the same time and output to each other.  It uses manual configuration of the systems that bridge between JACK and PulseAudio.  This configuration has no reliance on scripts or commands and is entirely based in configuration.
</p>
<p>This configuration only works with jack2. To use this configuration, just install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-jack">pulseaudio-jack</a></span> package. <code>/etc/pulse/default.pa</code> is already configured to load the modules in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-jack">pulseaudio-jack</a></span> if they are present. If you want to be sure, open the file and look for the line:
</p>
<pre>load-module module-jackdbus-detect <i>options</i>
</pre>
<p>Where <code><i>options</i></code> can be any options supported by this module, usually <code>channels=2</code>.
</p>
<p>As described on the <a rel="nofollow" class="external text" href="https://github.com/jackaudio/jackaudio.github.com/wiki/JackDbusPackaging">Jack-DBUS Packaging</a> page:
</p>
<p><i>Server auto-launching is implemented as D-Bus call that auto-activates JACK D-Bus service, in case it is not already started, and starts the JACK server. Correct interaction with PulseAudio is done using a D-Bus based audio card "acquire/release" mechanism. When JACK server starts, it asks this D-Bus service to acquire the audio card and PulseAudio will unconditionally release it. When JACK server stops, it releases the audio card that can be grabbed again by PulseAudio.</i>
</p>
<p><code>module-jackdbus-detect.so</code> dynamically loads and unloads module-jack-sink and module-jack-source when jackdbus is started and stopped.
</p>
<p>If PulseAudio sound does not work, check with <code>pavucontrol</code> to see if the relevant programs appear in the playback tab. If not, add the following to <code>~/.asoundrc</code> or <code>/etc/asound.conf</code> to redirect ALSA to PulseAudio:
</p>
<pre>pcm.pulse {
    type pulse
}

ctl.pulse {
    type pulse
}

pcm.!default {
    type pulse
}
ctl.!default {
    type pulse
}
</pre>
<p>If it still does not work, check with <code>pavucontrol</code> in the playback tab and make sure the relevant programs are outputting to PulseAudio JACK Sink instead of your audio card (which JACK has control of, so it will not work). Also ensure that in the JACK graph the PulseAudio JACK Source is connected to the system audio output.
</p>
<h3><span class="mw-headline" id="The_shell_script_method">The shell script method</span></h3>
<p>This method allows JACK and PulseAudio to output at the same time.  It mostly relies on shell scripts that are automatically run by QJackCTL to manage aspects of how the JACK sinks and PulseAudio behave.
</p>
<p>The basic idea is that killing PulseAudio is a bad idea because it may crash any applications using PulseAudio and disrupt any audio playing.
</p>
<p>The flow of how this setup works:
</p>
<ol>
<li>PulseAudio releases the sound card</li>
<li>JACK grabs sound card and starts up</li>
<li>script redirects PulseAudio to JACK</li>
<li>manually send PulseAudio applications to JACK output (pavucontrol may come in helpful for this)</li>
<li>use JACK programs etc</li>
<li>via script, stop redirecting PulseAudio to JACK</li>
<li>stop JACK and release sound card</li>
<li>PulseAudio grabs sound card and reroutes audio to it directly</li>
</ol>
<p>With QJackCTL, set up these scripts:
</p>
<p><code>pulse-jack-pre-start.sh</code> set it up as the execute script on startup script
</p>
<pre>#!/bin/bash
pacmd suspend true
</pre>
<p><code>pulse-jack-post-start.sh</code> set this one up as execute script after startup
</p>
<pre>#!/bin/bash
pactl load-module module-jack-sink channels=2
pactl load-module module-jack-source channels=2
pacmd set-default-sink jack_out
pacmd set-default-source jack_in
</pre>
<p><code>pulse-jack-pre-stop.sh</code> "execute script on shutdown"
</p>
<pre>#!/bin/bash
SINKID=$(LANG=C.UTF-8 pactl list | grep -B 1 "Name: module-jack-sink" | grep Module | sed 's/[^0-9]//g')
SOURCEID=$(LANG=C.UTF-8 pactl list | grep -B 1 "Name: module-jack-source" | grep Module | sed 's/[^0-9]//g')
pactl unload-module $SINKID
pactl unload-module $SOURCEID
sleep 5
</pre>
<p><code>pulse-jack-post-stop.sh</code> "execute script after shutdown"
</p>
<pre>#!/bin/bash
pacmd suspend false
</pre>
<h3><span class="mw-headline" id="The_PulseAudio_kill_method">The PulseAudio kill method</span></h3>
<p>This method relies on shell scripts to automatically kill PulseAudio when JACK is started, and automatically restart it when JACK is stopped.  This will result in lower CPU usage than having both running, but can cause errors in already running PulseAudio application and does not allow simultaneous output of both.
</p>
<p>Using the settings listed above, use QjackCtl to execute a script upon startup and shutdown to load/unload PulseAudio. Part of the reason users may wish to do this is that the above changes disable PulseAudio's automatic hardware detection modules. This particular setup is for using PulseAudio in an exclusive fashion with JACK, though the scripts could be modified to unload and load an alternate non-JACK setup, but killing and starting PulseAudio while programs might be using it would become problematic.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> padevchooser in the following example is deprecated. It is replaced by pasystray</div>
<p>The following example could be used and modified as necessary as a startup script that daemonizes PulseAudio and loads the <i>padevchooser</i> program (optional, needs to be built from AUR) called <code>jack_startup</code>:	
</p>
<pre>#!/bin/bash	
#Load PulseAudio and PulseAudio Device Chooser
pulseaudio -D
padevchooser&amp;

</pre>
<p>as well as a shutdown script to kill PulseAudio and the Pulse Audio Device Chooser, as another example called <code>jack_shutdown</code> also in the home directory:	
</p>
<pre>#!/bin/bash	
#Kill PulseAudio and PulseAudio Device Chooser		
pulseaudio --kill	
killall padevchooser	
</pre>
<p>Both scripts need to be made <a href="../../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>.
</p>
<p>then with QjackCtl loaded, click on the <i>Setup</i> button and then the <i>Options</i> tab and tick both "Execute Script after Startup:" And "Execute Script on Shutdown:" and put either use the ... button or type the path to the scripts (assuming the scripts are in the home directory) <code>~/jack_startup</code> and <code>~/jack_shutdown</code> making sure to save the changes.
</p>
<h3><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h3>
<h4>
<span id="When_JACK_is_started.2C_Firefox.2C_Chrome_and_other_applications_stop_playing_video_and_audio"></span><span class="mw-headline" id="When_JACK_is_started,_Firefox,_Chrome_and_other_applications_stop_playing_video_and_audio">When JACK is started, Firefox, Chrome and other applications stop playing video and audio</span>
</h4>
<p>Firefox/Chrome/etc. is using PulseAudio soundcard sink instead of the JACK sink. Open <code>pavucontrol</code> and on the <i>Playback</i> tab switch all audiostreams from something like "Built-in Audio Analog Stereo" to something like "Jack sink (PulseAudio JACK Sink)".
</p>
<h4>
<span id="After_starting_JACK.2C_the_sound_from_PulseAudio_becomes_distorted"></span><span class="mw-headline" id="After_starting_JACK,_the_sound_from_PulseAudio_becomes_distorted">After starting JACK, the sound from PulseAudio becomes distorted</span>
</h4>
<p>In QjackCtl click <i>Setup</i> and on the <i>Settings</i> tab, <i>Parameters</i> subtab untick "Realtime". In addition, tweaking Sample Rate, Frames/Period and Period/Buffer may help. Look for latency in the bottom right corner, as you still want minimal latency for audio production. Also, I think Sample Rate should match one of the rates supported by your audio interface (<code>cat /proc/asound/cardN/codec\#M</code> and look for <code>rates</code>, there could be multiple occurrences).
</p>
<h2><span class="mw-headline" id="PulseAudio_through_OSS">PulseAudio through OSS</span></h2>
<p>Add the following to <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-oss
</pre>
<p>Then start PulseAudio as usual, making sure that sinks and sources are defined for OSS devices.
</p>
<h2><span class="mw-headline" id="PulseAudio_from_within_a_chroot">PulseAudio from within a chroot</span></h2>
<p>Since a chroot sets up an alternative root for the running/jailing of applications, PulseAudio must be <a href="../../en/PulseAudio.html#Installation" title="PulseAudio">installed</a> within the chroot environment itself.
</p>
<p>PulseAudio clients, if not set up to connect to any specific server as described in <a href="#PulseAudio_over_network">#PulseAudio over network</a>, will attempt to connect to the local PulseAudio server, failing which it will spawn a new server. Each server has a unique ID based on the machine-id value in <code>/var/lib/dbus</code>. To allow for chrooted applications to access the pulse server, the following directories must be mounted within the chroot:
</p>
<pre>/run
/var/lib/dbus
/tmp
~/.config/pulse
</pre>
<p><code>/dev/shm</code> should also be mounted for efficiency and good performance. Note that mounting <code>/home</code> would normally also allow sharing of the <code>~/.pulse</code> directory.
</p>
<p>PulseAudio selects the path to the socket via <code>XDG_RUNTIME_DIR</code>, so be sure to drag it along when you chroot as a normal user using <a href="../../en/Sudo.html" title="Sudo">sudo</a> (see <a href="../../en/Sudo.html#Environment_variables" title="Sudo">Sudo#Environment variables</a>).
</p>
<h2><span class="mw-headline" id="Remapping_sinks">Remapping sinks</span></h2>
<p>The <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#module-remap-sink">module-remap-sink</a> module creates a virtual sink, which is identified as a unique sink, but is connected to the master sink by a virtual stream. In doing so, it has the ability to remap how the master sink's channels are used for playback.
</p>
<h3><span class="mw-headline" id="Remapping_select_audio_sources">Remapping select audio sources</span></h3>
<p>Naturally, the virtual sink has its own monitor, which can be used as a source only capturing applications using the virtual sink. <i>sink_name</i> can be determined by looking at the <i>name</i> field in <code>pacmd list-sinks</code>. As with other modules, it can be invoked from <code>/etc/pulse/default.pa</code>, or using <code>pacmd</code>:
</p>
<pre>$ pacmd load-module module-remap-sink sink_name=secondary master=<i>sink_name</i>
</pre>
<p>For instance, to record a program's output without including any other system sounds, you could:
</p>
<ul>
<li>Load the module by running the command.</li>
<li>Using pavucontrol, in the <i>Playback</i> tab, change the desired program's output device to the remapping. Repeat for any other programs whose audio should be included.</li>
<li>Activate the recording program.</li>
<li>In pavucontrol, in the <i>Recording</i> tab, change the recording program's input to the <i>Monitor of</i> option for the remapping.</li>
</ul>
<h3><span class="mw-headline" id="Remap_stereo_to_mono">Remap stereo to mono</span></h3>
<p>Remap a stereo input-sink to a mono sink by creating a virtual sink. It would be useful if you only have one speaker. Add to <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-remap-sink master=alsa_output.pci-0000_00_1f.5.analog-stereo sink_name=mono sink_properties="device.description='Mono'" channels=2 channel_map=mono,mono
# Optional: Select new remap as default
set-default-sink mono
</pre>
<p>(replace alsa_output.pci-0000_00_1f.5.analog-stereo in the sound card name shown from <code>pacmd list-sinks</code>)
</p>
<p>Switch player between virtual mono sink and real stereo sink.
</p>
<h3><span class="mw-headline" id="Remap_left_or_right_to_mono">Remap left or right to mono</span></h3>
<p>Particularly useful in the case an audio stream has different content in the left and right channels, such as Japanese television broadcasts with bilingual audio.
</p>
<pre># For Japanese bilingual TV
load-module module-remap-sink sink_name=Left-to-Mono sink_properties="device.description='Left to Mono (5.1 AC3 on ALC892 Digital)'" master=alsa_output.pci-0000_00_1b.0.iec958-ac3-surround-51 channels=2 master_channel_map=mono,mono channel_map=front-left,rear-left
load-module module-remap-sink sink_name=Right-to-Mono sink_properties="device.description='Right to Mono (5.1 AC3 on ALC892 Digital)'" master=alsa_output.pci-0000_00_1b.0.iec958-ac3-surround-51 channels=2 master_channel_map=mono,mono channel_map=front-right,rear-right
</pre>
<p>Replace <code>alsa_output.pci-0000_00_1b.0.iec958-ac3-surround-51</code> (5.1 AC3 on ALC892 Digital) with your own card (<code>pacmd list-sinks</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<i>master_channel_map</i> is a list of outputs to be remapped to.</li>
<li>
<i>channel_map</i> is a list of inputs to be remapped from.</li>
<li>A stereo card will not have to specify as many channels, eg. <code>channels=1 master_channel_map=mono channel_map=right</code>
</li>
</ul>
</div>
<h3><span class="mw-headline" id="Remap_for_broadcasting_software">Remap for broadcasting software</span></h3>
<p>If you do not want to capture sound from the application you need to create Remap sink:
</p>
<pre>### Create Remap sink
load-module module-remap-sink sink_name=Remap_sink master=SINK_NAME channels=2 remix=no
set-default-sink Remap_sink 
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Replace <code>SINK_NAME</code> with the real name of the master sink <code>pacmd list-sinks</code>.</div>
<p>Then restart PulseAudio daemon:
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<p>Now you need set the <code>Remap_sink</code> as the default sound source in broadcast software
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Use environment variable <code>PULSE_SINK=SINK_NAME</code> for applications, sound that does not need to be captured.</div>
<h3>
<span id="Remap_left_.28or_right.29_input_to_mono_for_stereo_use"></span><span class="mw-headline" id="Remap_left_(or_right)_input_to_mono_for_stereo_use">Remap left (or right) input to mono for stereo use</span>
</h3>
<p>Sometimes the incoming audio is only present on one channel (e.g. when using a mono XLR microphone on a two channel audio interface that is configured as stereo input by default). Using <code>module-remap-source</code>, the left channel can be remapped to be a mono source for further use:
</p>
<pre>load-module module-remap-source master=alsa_input.usb-BEHRINGER_UMC204HD_192k-00.analog-stereo channels=1 master_channel_map=front-left channel_map=mono
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Replace <code>alsa_input.usb-BEHRINGER_UMC204HD_192k-00.analog-stereo</code> with the real name of the source <code>pacmd list-sources</code>.</li>
<li>Replace <code>master_channel_map</code> variable <code>front-left</code> with the channel to take as a mono source.</li>
</ul>
</div>
<h2>
<span id="Swap_left.2Fright_channels"></span><span class="mw-headline" id="Swap_left/right_channels">Swap left/right channels</span>
</h2>
<p>This is the same as "reverse stereo", where the left and right channels are to be swapped.
</p>
<p>First, identify the card you want its channels swapped:
</p>
<pre>$ cat /proc/asound/cards
</pre>
<p>and use the name string for the device you wish to use (the one in square brackets, e.g. [Intel]).
</p>
<p>Edit <code>/etc/pulse/default.pa</code> and comment out module-hal-detect and module-detect lines.
</p>
<p>Search for the following commented-out line, uncomment it and change: 
</p>
<pre>load-module module-alsa-sink <b>device=hw:<i>device_name</i> channel_map=right,left</b>
</pre>
<p>Restart the pulseaudio daemon: 
</p>
<pre>$ pulseaudio -k; pulseaudio -D
</pre>
<p><a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/FAQ/#index34h3">Pulseaudio FAQ: How can I reverse my left and right speaker channels?</a>
</p>
<h3><span class="mw-headline" id="Using_default.pa">Using default.pa</span></h3>
<p>Another approach to swapping channels is suggested in <a rel="nofollow" class="external autonumber" href="https://superuser.com/a/144252">[1]</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/pulseaudio -nF

.include /etc/pulse/default.pa

load-module module-remap-sink sink_name=reverse-stereo master=0 channels=2 master_channel_map=front-right,front-left channel_map=front-left,front-right
set-default-sink reverse-stereo</pre>
<h2><span class="mw-headline" id="Pipe_a_source_directly_into_a_sink">Pipe a source directly into a sink</span></h2>
<p>Sometimes you want an input to be replicated to an output, e.g. if you want to play back your mic on your speakers for troubleshooting, or want to hear your capture card's captured audio. Here is how to set that up dynamically using <i>pactl</i>:
</p>
<pre>$ pactl load-module module-loopback source=<i>input_source</i> sink=<i>output_source</i>
</pre>
<p>This command will print the module's ID so that you can stop the piping later like this:
</p>
<pre>$ pactl unload-module <i>id</i>
</pre>
<p>If you lose the ID, you can obtain it from <code>pactl list modules short</code>.
</p>
<h2>
<span id="Capture_digital_input_from_S.2FPDIF_and_play_on_analog_output_in_.28nearly.29_real_time"></span><span class="mw-headline" id="Capture_digital_input_from_S/PDIF_and_play_on_analog_output_in_(nearly)_real_time">Capture digital input from S/PDIF and play on analog output in (nearly) real time</span>
</h2>
<p>Sometimes you have a digital sound source that outputs S/PDIF signal encoded in PCM or AC3 (for example a smart TV) and you would like to use your Linux box as a converter for this signal to analog audible signal that you can play on your speakers. The challenge is to have no audible delay between your digital source and analog output (which can result in audio/video out of sync in our smart TV example).
</p>
<p>You can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/audio_async_loopback-git/">audio_async_loopback-git</a></span><sup><small>AUR</small></sup> tool for that purpose.
</p>
<p>The usage is fairly simple. Just connect S/PDIF cable to your sound card digital <b>input</b> and issue:
</p>
<pre>$ audio_async_loopback $my-digital-input-device $latency-in-microseconds
</pre>
<p>For example:
</p>
<pre>$ audio_async_loopback alsa_input.pci-0000_04_00.0.iec958-stereo 12500
</pre>
<p>To find out your digital device name, use command:
</p>
<pre>$ pacmd list-sources |grep 'name:'
</pre>
<p>Usually the digital input contains iec958 substring. If still unsure, remove grep part from command and check field:
</p>
<pre>properties:
   device.description
</pre>
<p><i>latency-in-microseconds</i> is a matter of trial and error to determine, depending highly of your hardware speed. You can try to omit this parameter, letting audio_async_loopback to determine the latency automatically. If you hear clicks and cracks, increase the value. If sound is clear but audio is out of sync or delayed, decrease the value. You can also do a fine-tuning of different buffers in <code>config.h</code> before building the package but this should not be necessary.
</p>
<p>Author also recommends setting input volume to 100% (you can do it in your favorite pulseaudio mixer) and setting pulseaudio to work with 48kHz sampling rate for this tool to function correctly.
</p>
<p>To set the sampling rate, edit <code>/etc/pulse/daemon.conf</code> and change line:
</p>
<pre>default-sample-rate = 44100
</pre>
<p>to:
</p>
<pre>default-sample-rate = 48000
</pre>
<p>To apply changes, <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>pulseaudio.service</code>.
</p>
<h2><span class="mw-headline" id="PulseAudio_as_a_minimal_unintrusive_dumb_pipe_to_ALSA">PulseAudio as a minimal unintrusive dumb pipe to ALSA</span></h2>
<p>Some people do not want to run PulseAudio all the time for various reasons. This example will turn the full fledged audio server into an unobstrusive dumb pipe to ALSA devices that automatically starts <b>and</b> stops itself when done, allowing applications that requires PulseAudio to fully function while not touching any ALSA setting nor setting itself as the default ALSA device.
</p>
<p>This configuration tells native PA clients to autospawn the daemon when they need it, then the daemon is configured to autoexit as soon as all clients have disconnected. The daemon itself uses a plain simple static configuration that uses your configured <code>pcm.!default</code> ALSA devices and nothing more. No replacement of ALSA's default, no playing with mixer levels, nothing but record/playback. Also make sure <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span> is <b>not</b> installed so standard ALSA clients do not default to pulse. Since <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span> contains only a configuration file <code>/etc/asound.conf</code>, if it is installed as dependency, one could simply comment all contents in <code>/etc/asound.conf</code>. <code>alsamixer</code> functions properly as well as any other ALSA clients. Also make sure common frameworks like Xine, Gstreamer and Phonon are configured to use ALSA: by default if they detect PulseAudio is installed they will try to use it before ALSA.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Replace these with the proper values
exit-idle-time = 0 # Exit as soon as unneeded
flat-volumes = yes # Prevent messing with the master volume
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Replace these with the proper values

# Applications that uses PulseAudio *directly* will spawn it,
# use it, and pulse will exit itself when done because of the
# exit-idle-time setting in daemon.conf
autospawn = yes
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Replace the *entire* content of this file with these few lines and
# read the comments

.fail
    # Set tsched=0 here if you experience glitchy playback. This will
    # revert back to interrupt-based scheduling and should fix it.
    #
    # Replace the device= part if you want pulse to use a specific device
    # such as "dmix" and "dsnoop" so it doesn't lock an hw: device.
    
    # INPUT/RECORD
    load-module module-alsa-source device="default" tsched=1
    
    # OUTPUT/PLAYBACK
    load-module module-alsa-sink device="default" tsched=1 
    
    # Accept clients -- very important
    load-module module-native-protocol-unix

.nofail
.ifexists module-x11-publish.so
    # Publish to X11 so the clients know how to connect to Pulse. Will
    # clear itself on unload.
    load-module module-x11-publish
.endif
</pre>
<h2><span class="mw-headline" id="Having_both_speakers_and_headphones_plugged_in_and_switching_in_software_on-the-fly">Having both speakers and headphones plugged in and switching in software on-the-fly</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> <code>/usr/share/pulseaudio/alsa-mixer/paths</code> has been replaced by <code>/usr/share/alsa-card-profile/mixer/paths</code> (Discuss in <a href="../../en/Talk:PulseAudio/Examples.html#Having_both_speakers_and_headphones_plugged_in_and_switching_in_software_on-the-fly" title="Talk:PulseAudio/Examples">Talk:PulseAudio/Examples#Having both speakers and headphones plugged in and switching in software on-the-fly</a>)</div>
</div>
<p>By design, Pulseaudio automatically turns off Line Out when headphones are plugged in and uses Headphone slider instead. You can observe this behavior in <code>alsamixer</code>. What we want is to have Headphone and Line Out sliders working separately and at the same time. This is extremely useful if you want to remap Realtek's jacks to have, say, Rear Green for headphones and Blue for speakers (with the help of <code>hdajackretask</code> from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-tools">alsa-tools</a></span>).
</p>
<p>To achieve this, you should directly edit Pulseaudio mixer's configuration.
</p>
<p>1. We tell pulseaudio that headphones are always plugged in. Edit:
</p>
<p><code>/usr/share/pulseaudio/alsa-mixer/paths/analog-output-lineout.conf</code>
</p>
<p>Find:
</p>
<pre>[Jack Headphone]
state.plugged = no
state.unplugged = unknown
</pre>
<p>Change <code>no</code> to <code>yes</code>
</p>
<p>2. By default, Line Out's volume controlled only by Master, and not by Line Out slider itself. We want to merge Line Out with Master.
</p>
<p>Add this snippet to the end of the file:
</p>
<pre>[Element Line Out]
switch = mute
volume = merge
</pre>
<p>3. We need to completely cut off Line Out when we use headphones. Edit:
</p>
<p><code>/usr/share/pulseaudio/alsa-mixer/paths/analog-output-headphones.conf</code>
</p>
<p>Add this snippet to the end of the file:
</p>
<pre>[Element Line Out]
switch = off
volume = off
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> On some systems you might need to use <code>[Element Front]</code> instead of <code>[Element Line Out]</code>.</div>
<p>4. Like Pulseaudio, Alsa itself cuts off speakers when headphones are plugged in. Open <code>alsamixer</code> (in case of Realtek HDA <code>alsamixer -c0</code>) and change <code>Auto-Mute mode</code> to <code>disabled</code>. 
</p>
<p>5. Restart Pulseaudio
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<p>Now you have two separate ports on the same sink in pulseaudio. They mute each other, so you can switch to headphones and this will mute Line Out, and vice versa.
To switch between ports you can use Gnome or Plasma sound mixer, or install appropriate desktop extension.
</p>
<h2><span class="mw-headline" id="Allowing_multiple_users_to_share_a_PulseAudio_daemon">Allowing multiple users to share a PulseAudio daemon</span></h2>
<p>Normally each system user runs their own instance of PulseAudio and the instance is only accessible by the user running it. This is a security measure which prevents other users from accessing potentially sensitive audio channels such as voice calls. However, there are situations in which it is desirable to isolate an application by running it as a separate user. For example, one may wish to run a web browser as a different user while still being able to listen to audio from the browser while using the primary user account. Another use is to share a Bluetooth headset among multiple system users. 
</p>
<p>This can be achieved by creating a UNIX socket to allow other users to access the primary user's PulseAudio daemon. With this setup, the primary user account runs the PulseAudio daemon and the other user accounts connect to it and share it. Note that the following assumes that the environment variable `XDG_CONFIG_HOME` points to the default location `~/.config`. If this is not the case, replace `~/.config/` with the correct path in the examples below.
</p>
<h3><span class="mw-headline" id="Primary_user_setup">Primary user setup</span></h3>
<p>The primary user should add the following directive to <code>/home/&lt;primary user&gt;/.config/pulse/default.pa</code> to create a UNIX socket and accept connections from other users:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-native-protocol-unix auth-anonymous=1 socket=/tmp/pulse-socket</pre>
<p>Note that this will allow <b>all</b> users on the system to access the primary user's PulseAudio server and thus all audio data. A more secure solution is to create a custom user group for shared audio and limit the socket to it. For example, to allow only users in the group "sharepulse" to access the socket, change the line to
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-native-protocol-unix auth-group=sharepulse socket=/tmp/pulse-socket</pre>
<p>After adding the line, start the PulseAudio daemon on the primary user's account.
</p>
<h3><span class="mw-headline" id="Secondary_user_setup">Secondary user setup</span></h3>
<p>The secondary user should add the following line to <code>/home/&lt;secondary user&gt;/.config/pulse/client.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default-server = unix:/tmp/pulse-socket</pre>
<p>where <i>/tmp/pulse-socket</i> is the path to the UNIX socket set in the primary user's <i>default.pa</i> file above. If the primary user has restricted the socket to a specific system group, the secondary user must be added to it. Note that if a logged-in user is added to the group, it will not take effect until the user logs out and logs in again.
</p>
<p>The secondary user will also need to copy the primary user's PulseAudio daemon cookie (<code>/home/&lt;primary user&gt;/.config/pulse/cookie</code>) to <code>/home/&lt;secondary user&gt;/.config/pulse/cookie</code> in their configuration directory. Alternatively, the primary user can copy the cookie to a location accessible by the intended system users (e.g. <i>/tmp/sharepulse/pa_cookie</i>) and the secondary user can access it by adding the following line to the client configuration file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">cookie-file = /tmp/sharepulse/pa_cookie</pre>
<p>The secondary user should now have full access to the primary user's PulseAudio daemon and all audio should be accessible to bother users. To grant access to more users, simply repeat the setup for the secondary user on each user account.
</p>
<h3><span class="mw-headline" id="Alternative_setup">Alternative setup</span></h3>
<p>If there is no primary user to reliably run the shared PulseAudio daemon, the following script can be used by all users in a group (<i>sharepulse</i> in this example) to check if a shared server is already running and launch one if not.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pulseaudio-shared</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/bash
set -eu

# The group with access to the shared PulseAudio daemon.
PA_GROUP=sharepulse

# The shared directory.
PA_DIR=/tmp/sharepulse

# Restrict access to users outside of the group.
umask 007

# Create a group-restricted common directory for the socket and cookie if missing.
if [[ ! -e $PA_DIR ]]
then
  /usr/bin/mkdir -p -- "$PA_DIR"
  /usr/bin/chgrp -- "$PA_GROUP" "$PA_DIR"
  /usr/bin/chmod -- g+s "$PA_DIR"
fi

function start_daemon()
{

  # Only start the daemon if one is not already running.
  if [[ ! -e $PA_DIR/socket ]]
  then
    echo "Attempting to (re)start the PulseAudio daemon."

    # Create a new random common cookie.
    /usr/bin/dd if=/dev/urandom of="$PA_DIR/cookie" bs=256 count=1

    # Copy it to the configuration directory of the user running the daemon.
    /usr/bin/cp -- "$PA_DIR/cookie" "${XDG_CONFIG_HOME:-$HOME/.config}/pulse/cookie"

    # Start the daemon.
    /usr/bin/pulseaudio "$@" || true

    # Kill the daemon if it is not the owner of the socket.
    if [[ ! -O $PA_DIR/socket ]]
    then
      /usr/bin/pulseaudio --check &amp;&amp; /usr/bin/pulseaudio -k
    fi
  fi
}

# Restart the daemon when necessary.
while true
do
  # Wait for the socket to be deleted when a running daemon is killed. If the
  # socket does not exist then this will be skipped.
  inotifywait -e delete_self "$PA_DIR/socket" || true
  start_daemon
done
</pre>
<p>Each user will need to add the following lines to their PulseAudio configuration files to configure the daemon and clients to use the shared socket and cookie:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-native-protocol-unix auth-group=sharepulse socket=/tmp/sharepulse/socket</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default-server = unix:/tmp/sharepulse/socket
cookie-file = /tmp/sharepulse/cookie</pre>
<p><i>pulseaudio-shared</i> should be run by each user when logging in (e.g. via their Bash profile or their desktop environment's autostart file) to start the daemon when needed. Any arguments passed to the script will be passed through to the PulseAudio daemon. When any shared daemon is stopped,  <i>pulseaudio-shared</i> will automatically restart as the current user and all other users should reconnect to the new daemon automatically.
</p>
<h3><span class="mw-headline" id="Troubleshooting_2">Troubleshooting</span></h3>
<h4><span class="mw-headline" id="No_sound_when_switching_TTY">No sound when switching TTY</span></h4>
<p>If the sound stops when switching between users on different TTYs or desktop environments (<b>&lt;ctrl&gt;+&lt;alt&gt;+Fx</b>) then the users likely do not have access to the sound hardware when their TTY session is not selected. This can be fixed by adding the users to the <i>audio</i> group: <a href="../../en/Users_and_groups.html#Pre-systemd_groups" title="Users and groups">Users and groups#Pre-systemd groups</a>
</p>
<h2>
<span id="Mixing_additional_audio_into_the_microphone.27s_audio"></span><span class="mw-headline" id="Mixing_additional_audio_into_the_microphone's_audio">Mixing additional audio into the microphone's audio</span>
</h2>
<p>Using a setup of null sinks and loopbacks you can mix arbitrary applications' audio output into your microphone's audio, for example to play sound effects or music on voice chat applications.
</p>
<p>The setup suggested here will also play your sound effects back to you and use <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#module-echo-cancel">PulseAudio echo cancellation</a> to prevent the effects from feeding back into your microphone.
</p>
<h3><span class="mw-headline" id="PulseAudio_management_with_pulse-autoconf">PulseAudio management with pulse-autoconf</span></h3>
<p>As of August 2020 there is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pulse-autoconf/">pulse-autoconf</a></span><sup><small>AUR</small></sup>, a PulseAudio server dynamic configuration daemon that supports this setup with its 'EchoCancellationWithSourcesMix' preset and that comes with further benefits, such as dynamically reacting to changes in the PulseAudio server, for example when a headset or a webcam is plugged in or unplugged.
</p>
<p>If <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pulse-autoconf/">pulse-autoconf</a></span><sup><small>AUR</small></sup> does not work out for your use case, read on for the manual way.
</p>
<h3><span class="mw-headline" id="PulseAudio_configuration">PulseAudio configuration</span></h3>
<p>Symbology: <code>(Application)</code>, <code>{Audio source}</code>, <code>[Audio sink]</code>, <code>{m} = Monitor of audio sink</code>, <code>{}* = Fallback (default) source</code>, <code>[]* = Fallback (default) sink</code>
</p>
<pre>{Microphone}
    ||
{src_ec} -----------------&gt; [sink_mix]{m}=={src_main}* -----&gt; (Voice chat)
              Loopback            ^                                |
                                  | Loopback                       |
                                  |                                v
(Soundboard) ---------&gt; [sink_fx]{m} -----------------------&gt; [sink_main]*
                                             Loopback             ||
                                                              [Speakers]
</pre>
<dl>
<dt>{src_ec}, [sink_main]</dt>
<dd>Echo cancellation "clones" of the microphone and speakers</dd>
<dt>[sink_fx]</dt>
<dd>Virtual sink into which the sound effects are played</dd>
<dt>[sink_mix]</dt>
<dd>Virtual sink where the microphone and the sound effects are mixed together</dd>
<dt>{src_main}</dt>
<dd>Remap of "Monitor of sink_mix", to work around applications that do not allow recording from monitor sources</dd>
</dl>
<h3><span class="mw-headline" id="Applications_configuration">Applications configuration</span></h3>
<p>The applications providing the sound effects must
</p>
<ul><li>Output to "sink_fx"</li></ul>
<p>All other applications, including the voice chat, must
</p>
<ul>
<li>Record audio from "src_main"</li>
<li>Output to "sink_main"</li>
</ul>
<p>Accordingly, these devices will be set as defaults. Controlling which application uses which audio source/sink can usually be done in the <code>pavucontrol</code> graphical PulseAudio control panel.
</p>
<p>For some applications changing their sources or sinks in <code>pavucontrol</code> has no effect. In this case you can typically select the source or sink in the applications' audio settings.
</p>
<p><b>No application whatsoever</b> must record from, or output to, the "real" microphone or speakers, as this would bypass the echo cancellation.
</p>
<p>Any echo cancellation or other audio processing provided by the voice chat application should be disabled – PulseAudio is doing this already, and as the application is not aware of the sound effects being played on the speakers, it will likely be ineffective in filtering them from the microphone anyway.
</p>
<h3><span class="mw-headline" id="Setup_steps">Setup steps</span></h3>
<ol>
<li>Connect your microphone and headphones and make sure PulseAudio is configured correctly for their use, for example in the "Configuration" tab in <code>pavucontrol</code>
</li>
<li>
<i>First time only:</i>
<ol>
<li>Save the template script below to an executable file of your choice</li>
<li>Find the names of your microphone and headphones with <code>pactl list short sources | grep -v ".monitor"</code> and <code>pactl list short sinks</code>, respectively</li>
<li>In the script, replace the values of "microphone" and "speakers" with the names of your microphone/headphones</li>
</ol>
</li>
<li>Run the script</li>
<li>Run your voice chat application and make it record audio from "src_main" and output audio to "sink_main"</li>
<li>Run your sound effects application(s) and make them play to "sink_fx"</li>
</ol>
<p>As for applications that can play sound effects, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/castersoundboard-git/">castersoundboard-git</a></span><sup><small>AUR</small></sup> has been found to work quite well.
It however needs to be closed and re-opened when PulseAudio is restarted.
</p>
<h3><span class="mw-headline" id="Teardown">Teardown</span></h3>
<p>The changes that the script makes to the running PulseAudio server are not permanent and will be lost when PulseAudio terminates.
</p>
<p>To ditch the custom configuration, just restart PulseAudio, e.g. with <code>pactl exit</code>. (PulseAudio is socket-activated and will automatically start on demand.)
</p>
<h3><span class="mw-headline" id="Template_script">Template script</span></h3>
<pre>#!/bin/bash

microphone="alsa_input.pci-0000_00_1b.0.analog-stereo"
speakers="alsa_output.pci-0000_00_1b.0.analog-stereo"

echo "Setting up echo cancellation"
pactl load-module module-echo-cancel use_master_format=1 aec_method=webrtc \
      aec_args="analog_gain_control=0\\ digital_gain_control=1\\ experimental_agc=1\\ noise_suppression=1\\ voice_detection=1\\ extended_filter=1" \
      source_master="$microphone" source_name=src_ec  source_properties=device.description=src_ec \
      sink_master="$speakers"     sink_name=sink_main sink_properties=device.description=sink_main

echo "Creating virtual output devices"
pactl load-module module-null-sink sink_name=sink_fx  sink_properties=device.description=sink_fx
pactl load-module module-null-sink sink_name=sink_mix sink_properties=device.description=sink_mix

echo "Creating remaps"
pactl load-module module-remap-source master=sink_mix.monitor \
      source_name=src_main source_properties="device.description=src_main"

echo "Setting default devices"
pactl set-default-source src_main
pactl set-default-sink   sink_main

echo "Creating loopbacks"
pactl load-module module-loopback latency_msec=60 adjust_time=6 source=src_ec          sink=sink_mix
pactl load-module module-loopback latency_msec=60 adjust_time=6 source=sink_fx.monitor sink=sink_mix
pactl load-module module-loopback latency_msec=60 adjust_time=6 source=sink_fx.monitor sink=sink_main
</pre>
<p>This script has been inspired by <a rel="nofollow" class="external free" href="https://askubuntu.com/a/915064">https://askubuntu.com/a/915064</a> , for more in-depth information also see that post's author's <a rel="nofollow" class="external text" href="https://github.com/toadjaune/pulseaudio-config">pulseaudio-config GitHub repository</a>.
</p>
<p>Using <code>module-remap-source</code> to work around applications that do not accept a monitor as source is taken from <a rel="nofollow" class="external free" href="https://unix.stackexchange.com/a/608482">https://unix.stackexchange.com/a/608482</a> .
</p>
<h2><span class="mw-headline" id="Invert_phase_of_one_audio_channel">Invert phase of one audio channel</span></h2>
<p>This is useful for compensating when one of your speakers is wired with the wrong polarity. To test if this is needed, see <a rel="nofollow" class="external autonumber" href="https://www.audiocheck.net/audiotests_polaritycheck.php">[2]</a>.
</p>
<p>Adapted from a more general example of <a rel="nofollow" class="external text" href="https://askubuntu.com/a/194345">Assigning a LADSPA filter to a single audio channel</a>.
Requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=swh-plugins">swh-plugins</a></span>.
</p>
<pre>#!/bin/bash
master=alsa_output.pci-0000_07_00.0.analog-stereo
pacmd load-module module-ladspa-sink sink_name=ladspa_out sink_master=$master plugin=inv_1429 label=inv
pacmd load-module module-remap-sink sink_name=remapR master=ladspa_out channels=1 master_channel_map=front-right channel_map=front-right
pacmd load-module module-remap-sink sink_name=remapL master=$master channels=1 master_channel_map=front-left channel_map=front-left
pacmd load-module module-combine-sink sink_name=invert sink_properties=device.description='"Invert\ phase"' slaves=remapL,remapR channels=2
</pre>
<h2><span class="mw-headline" id="Renaming_devices">Renaming devices</span></h2>
<p>Sound devices will sometimes have confusing names assigned to them by default. Names like "CM106 Like Sound Device" are not very descriptive. This can be easily fixed and it works for both PulseAudio sources and sinks.
</p>
<p>The easiest method is to add the following lines to the end of the <code>/etc/pulse/default.pa</code> file.
</p>
<p>To update a source name:
</p>
<pre>update-source-proplist <i>device_name</i> device.description="<i>new_name</i>"
</pre>
<p>And to update a sink name:
</p>
<pre>update-sink-proplist <i>device_name</i> device.description="<i>new_name</i>"
</pre>
<p>The device name can be queried using the command <code>pacmd list-sources | grep name:</code> for sources, or <code>pacmd list-sinks | grep name:</code> for sinks.
</p>
<p>This configuration can also be persisted on a per-user basis:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/pulseaudio -nF

## Include defaults
.include /etc/pulse/default.pa

## Rename devices
update-source-proplist <i>device_name</i> device.description="<i>new_name</i>"</pre>
<p>The default PulseAudio configuration needs to be included, otherwise the daemon will not start.
</p>
<h2><span class="mw-headline" id="Use_dynamic_default_sink_with_modules">Use dynamic default sink with modules</span></h2>
<p>If you load a module that uses for example <code>master</code>, you can set a "dynamic" default sink with <code>master="@DEFAULT_SINK@"</code>.
</p>
<p>This way the active chosen default sink will be used.
If you change the default sink, the new default sink will be used on command reload/re-run or pulseaudio restart.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../en/Category:Sound.html" title="Category:Sound">Sound</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=PulseAudio/Examples&amp;oldid=812618">https://wiki.archlinux.org/index.php?title=PulseAudio/Examples&amp;oldid=812618</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 18 July 2024, at 18:24.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
