<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Multiboot USB drive - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Multiboot_USB_drive rootpage-Multiboot_USB_drive skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Using_GRUB_and_loopback_devices" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_GRUB_and_loopback_devices">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Using GRUB and loopback devices</div>
		</a>
		
			<button aria-controls="toc-Using_GRUB_and_loopback_devices-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Using GRUB and loopback devices subsection</span>
			</button>
		
		<ul id="toc-Using_GRUB_and_loopback_devices-sublist" class="vector-toc-list">
			<li id="toc-Preparation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Preparation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Preparation</div>
			</a>
			
			<ul id="toc-Preparation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installing_GRUB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_GRUB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Installing GRUB</div>
			</a>
			
			<ul id="toc-Installing_GRUB-sublist" class="vector-toc-list">
				<li id="toc-Simple_installation" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Simple_installation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.1</span>Simple installation</div>
			</a>
			
			<ul id="toc-Simple_installation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hybrid_UEFI_GPT_+_BIOS_GPT/MBR_boot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Hybrid_UEFI_GPT_+_BIOS_GPT/MBR_boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.2</span>Hybrid UEFI GPT + BIOS GPT/MBR boot</div>
			</a>
			
			<ul id="toc-Hybrid_UEFI_GPT_+_BIOS_GPT/MBR_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Configuring_GRUB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuring_GRUB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Configuring GRUB</div>
			</a>
			
			<ul id="toc-Configuring_GRUB-sublist" class="vector-toc-list">
				<li id="toc-Using_a_template" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_a_template">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.1</span>Using a template</div>
			</a>
			
			<ul id="toc-Using_a_template-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Manual_configuration" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Manual_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.2</span>Manual configuration</div>
			</a>
			
			<ul id="toc-Manual_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Boot_entries" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Boot_entries">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4</span>Boot entries</div>
			</a>
			
			<ul id="toc-Boot_entries-sublist" class="vector-toc-list">
				<li id="toc-Arch_Linux_monthly_release" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Arch_Linux_monthly_release">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.1</span>Arch Linux monthly release</div>
			</a>
			
			<ul id="toc-Arch_Linux_monthly_release-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-MemTest86+" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#MemTest86+">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.2</span>MemTest86+</div>
			</a>
			
			<ul id="toc-MemTest86+-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Archboot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Archboot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.3</span>Archboot</div>
			</a>
			
			<ul id="toc-Archboot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Using_Syslinux_and_memdisk" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_Syslinux_and_memdisk">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Using Syslinux and memdisk</div>
		</a>
		
			<button aria-controls="toc-Using_Syslinux_and_memdisk-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Using Syslinux and memdisk subsection</span>
			</button>
		
		<ul id="toc-Using_Syslinux_and_memdisk-sublist" class="vector-toc-list">
			<li id="toc-Preparation_2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Preparation_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Preparation</div>
			</a>
			
			<ul id="toc-Preparation_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Install_the_memdisk_module" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Install_the_memdisk_module">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Install the memdisk module</div>
			</a>
			
			<ul id="toc-Install_the_memdisk_module-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Configuration</div>
			</a>
			
			<ul id="toc-Configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Automated_tools" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Automated_tools">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Automated tools</div>
		</a>
		
		<ul id="toc-Automated_tools-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Multiboot USB drive</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Multiboot_USB_Stick" title="Multiboot USB Stick – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Multiboot_USB_drive.html" title="Multiboot USB drive – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%83%9E%E3%83%AB%E3%83%81%E3%83%96%E3%83%BC%E3%83%88_USB_%E3%83%89%E3%83%A9%E3%82%A4%E3%83%96" title="マルチブート USB ドライブ – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Multiboot_USB_drive.html" title="Multiboot USB drive – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Multiboot_USB_drive" title="Multiboot USB drive – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/GRUB.html" title="GRUB">GRUB</a></li>
<li><a href="../en/Syslinux.html" title="Syslinux">Syslinux</a></li>
<li><a href="../en/Archiso.html" title="Archiso">Archiso</a></li>
</ul>
</div>
<p>A multiboot USB flash drive allows booting multiple ISO files from a single device. The ISO files can be copied to the device and booted directly without unpacking them first. There are multiple methods available, but they may not work for all ISO images.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Using_GRUB_and_loopback_devices">Using GRUB and loopback devices</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> multiple <a href="../en/Help:Style.html" title="Help:Style">style</a> issues (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Multiboot_USB_drive.html">Talk:Multiboot USB drive</a>)</div>
</div>
<p>Advantages:
</p>
<ul>
<li>only a single partition required</li>
<li>all ISO files are found in one directory</li>
<li>adding and removing ISO files is simple</li>
</ul>
<p>Disadvantages:
</p>
<ul>
<li>not all ISO images are compatible</li>
<li>the original boot menu for the ISO file is not shown</li>
<li>it can be difficult to find a working boot entry</li>
</ul>
<h3><span class="mw-headline" id="Preparation">Preparation</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> How much extra space is needed for the bootloader? (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Multiboot_USB_drive.html">Talk:Multiboot USB drive</a>)</div>
</div>
<p>Create at least one partition and a filesystem supported by <a href="../en/GRUB.html" title="GRUB">GRUB</a> on the USB drive. See <a href="../en/Partitioning.html" title="Partitioning">Partitioning</a> and <a href="../en/File_systems.html#Create_a_file_system" title="File systems">File systems#Create a file system</a>. Choose the size based on the total size of the ISO files that you want to store on the drive, and plan for extra space for the bootloader.
</p>
<h3><span class="mw-headline" id="Installing_GRUB">Installing GRUB</span></h3>
<h4><span class="mw-headline" id="Simple_installation">Simple installation</span></h4>
<p>Mount the filesystem located on the USB drive:
</p>
<pre># mount /dev/sdXY /mnt
</pre>
<p>Create the directory /boot:
</p>
<pre># mkdir /mnt/boot
</pre>
<p>Install GRUB on the USB drive:
</p>
<pre># grub-install --target=i386-pc --recheck --boot-directory=/mnt/boot /dev/sdX
</pre>
<p>In case you want to boot ISOs in UEFI mode, you have to install grub for the UEFI target:
</p>
<pre># grub-install --target=x86_64-efi --removable --boot-directory=/mnt/boot --efi-directory=/mnt
</pre>
<p>For UEFI, the partition has to be the first one in an MBR partition table and formatted with FAT32.
</p>
<h4>
<span id="Hybrid_UEFI_GPT_.2B_BIOS_GPT.2FMBR_boot"></span><span class="mw-headline" id="Hybrid_UEFI_GPT_+_BIOS_GPT/MBR_boot">Hybrid UEFI GPT + BIOS GPT/MBR boot</span>
</h4>
<p>This configuration is useful for creating a universal USB key, bootable everywhere.
First of all you must create a <a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a> partition table on your device. You need at least 3 partitions:
</p>
<ol>
<li>A BIOS boot partition (gdisk type code <code>EF02</code>). This partition must be 1 MiB in size</li>
<li>An EFI System partition (gdisk type code <code>EF00</code> with a <a href="../en/EFI_system_partition.html#Format_the_partition" title="EFI system partition">FAT32 filesystem</a>). This partition can be as small as 50 MiB.</li>
<li>Your data partition (use a filesystem supported by <a href="../en/GRUB.html" title="GRUB">GRUB</a>). This partition can take up the rest of the space of your drive.</li>
</ol>
<p>Next you must create a <a rel="nofollow" class="external text" href="https://www.rodsbooks.com/gdisk/hybrid.html">hybrid MBR</a> partition table. Without it, a BIOS MBR based system will not boot. It will not find the partitions it expects to find.
</p>
<p>Hybrid MBR partition table creation example using <a href="../en/GPT_fdisk.html" class="mw-redirect" title="Gdisk">gdisk</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># gdisk /dev/sd<i>X</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Command (? for help): r
Recovery/transformation command (? for help): h

WARNING! Hybrid MBRs are flaky and dangerous! If you decide not to use one,
just hit the Enter key at the below prompt and your MBR partition table will
be untouched.

Type from one to three GPT partition numbers, separated by spaces, to be added to the hybrid MBR, in sequence: 1 2 3
Place EFI GPT (0xEE) partition first in MBR (good for GRUB)? (Y/N): N

Creating entry for GPT partition #1 (MBR partition #1)
Enter an MBR hex code (default EF):
Set the bootable flag? (Y/N): N

Creating entry for GPT partition #2 (MBR partition #2)
Enter an MBR hex code (default EF):
Set the bootable flag? (Y/N): N

Creating entry for GPT partition #3 (MBR partition #3)
Enter an MBR hex code (default 83):
Set the bootable flag? (Y/N): Y

Recovery/transformation command (? for help): x
Expert command (? for help): h
Expert command (? for help): w

Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
PARTITIONS!!

Do you want to proceed? (Y/N): Y
</pre>
<p>Do not forget to format the partitions:
</p>
<pre># mkfs.fat -F32 /dev/sd<i>X</i>2
# mkfs.ext4 /dev/sd<i>X</i>3
</pre>
<p>You can now install GRUB to support both EFI + GPT and BIOS + GPT/MBR. The GRUB configuration (--boot-directory) can be kept in the same place.
</p>
<p>First, you need to mount the EFI system partition and the data partition of your USB drive.
</p>
<p>An example of this would be as follows:
</p>
<pre># mount /dev/sd<i>X</i>3 /mnt
# mkdir /mnt/boot /mnt/efi
# mount /dev/sd<i>X</i>2 /mnt/efi
</pre>
<p>Then, you can install GRUB for UEFI with:
</p>
<p>In most cases <code>EFI_MOUNTPOINT</code> will correspond to the <code>/mnt/efi</code> directory on your mounted USB disk.
<code>DATA_MOUNTPOINT</code> is where your data partition is mounted. In this example it would be the mount point of sd<i>X</i>3, <code>/mnt</code>.
</p>
<pre># grub-install --target=x86_64-efi --recheck --removable --efi-directory=/<i>EFI_MOUNTPOINT</i> --boot-directory=/<i>DATA_MOUNTPOINT</i>/boot
</pre>
<p>And for BIOS with:
</p>
<pre># grub-install --target=i386-pc --recheck --boot-directory=/<i>DATA_MOUNTPOINT</i>/boot /dev/sd<i>X</i>
</pre>
<p>As an additional fallback, you can also install GRUB on your MBR-bootable data partition:
</p>
<pre># grub-install --target=i386-pc --recheck --boot-directory=/<i>DATA_MOUNTPOINT</i>/boot /dev/sd<i>X</i>3
</pre>
<h3><span class="mw-headline" id="Configuring_GRUB">Configuring GRUB</span></h3>
<h4><span class="mw-headline" id="Using_a_template">Using a template</span></h4>
<p>There are some git projects which provide some pre-existing GRUB configuration files, and a nice generic <code>grub.cfg</code> which can be used to load the other boot entries on demand, showing them only if the specified ISO files - or folders containing them - are present on the drive.
</p>
<p>Multiboot USB: <a rel="nofollow" class="external free" href="https://github.com/hackerncoder/multibootusb">https://github.com/hackerncoder/multibootusb</a>
</p>
<p>GLIM (GRUB2 Live ISO Multiboot): <a rel="nofollow" class="external free" href="https://github.com/thias/glim">https://github.com/thias/glim</a>
</p>
<h4><span class="mw-headline" id="Manual_configuration">Manual configuration</span></h4>
<p>For the purpose of multiboot USB drive it is easier to edit <code>grub.cfg</code> by hand instead of generating it. Alternatively, make the following changes in <code>/etc/grub.d/40_custom</code> or <code>/mnt/boot/grub/custom.cfg</code> and generate <code>/mnt/boot/grub/grub.cfg</code> using <a href="../en/GRUB.html#Generate_the_main_configuration_file" title="GRUB">grub-mkconfig</a>.
</p>
<p>As it is recommend to use a <a href="../en/Persistent_block_device_naming.html" title="Persistent block device naming">persistent name</a> instead of <code>/dev/sd<i>xY</i></code> to identify the partition on the USB drive where the image files are located, define a variable for convenience to hold the value. If the ISO images are on the same partition as GRUB, use the following to read the UUID at boot time:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/mnt/boot/grub/grub.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># path to the partition holding ISO images (using UUID)
probe -u $root --set=rootuuid
set imgdevpath="/dev/disk/by-uuid/$rootuuid"</pre>
<p>Or specify the UUID explicitly:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/mnt/boot/grub/grub.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># path to the partition holding ISO images (using UUID)
set imgdevpath="/dev/disk/by-uuid/<i>UUID_value</i>"</pre>
<p>Alternatively, use the device label instead of UUID:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/mnt/boot/grub/grub.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># path to the partition holding ISO images (using labels)
set imgdevpath="/dev/disk/by-label/<i>label_value</i>"</pre>
<p>The necessary UUID or label can be found using <code>lsblk -f</code>. Do not use the same label as the Arch ISO for the USB device, otherwise the boot process will fail.
</p>
<p>To complete the configuration, a boot entry for each ISO image has to be added below this header, see the next section for examples.
</p>
<h3><span class="mw-headline" id="Boot_entries">Boot entries</span></h3>
<p>It is assumed that the ISO images are stored in the <code>/boot-isos</code> directory on the same filesystem where GRUB is installed. Otherwise it would be necessary to prefix the path to ISO file with device identification when using the <code>loopback</code> command, for example <code>loopback loop <b>(hd1,2)</b>$iso_path</code>. As this identification of devices is not <a href="../en/Persistent_block_device_naming.html" title="Persistent block device naming">persistent</a>, it is not used in the examples in this section.
</p>
<p>One can use persistent block device naming like so. Replace the UUID according to your ISO filesystem UUID.
</p>
<pre># define globally (i.e outside any menuentry)
insmod search_fs_uuid
search --no-floppy --set=<b>isopart</b> --fs-uuid <i>123-456</i>
# later use inside each menuentry instead
loopback loop <b>($isopart)</b>$iso_path</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  For a list of kernel parameters, see <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/kernel-parameters.html">the kernel's command-line parameter documentation</a>. For more examples of boot entries, see the <a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/manual/grub.html#Multi_002dboot-manual-config">GRUB upstream documentation</a> or the documentation for the distribution you wish to boot.</div>
<h4><span class="mw-headline" id="Arch_Linux_monthly_release">Arch Linux monthly release</span></h4>
<p>The ISO provides <a rel="nofollow" class="external text" href="https://www.supergrubdisk.org/wiki/Loopback.cfg">loopback.cfg</a>.
</p>
<pre>menuentry '[loopback]archlinux-2023.10.14-x86_64.iso' {
	set iso_path='/boot-isos/archlinux-2023.10.14-x86_64.iso'
	export iso_path
	search --set=root --file "$iso_path"
	loopback loop "$iso_path"
	root=(loop)
	configfile /boot/grub/loopback.cfg
	loopback --delete loop
}</pre>
<p>Also see <a href="../en/Archiso.html" title="Archiso">archiso</a>.
</p>
<h4>
<span id="MemTest86.2B"></span><span class="mw-headline" id="MemTest86+">MemTest86+</span>
</h4>
<p><a href="../en/Stress_testing.html#MemTest86+" title="Stress testing">MemTest86+</a> is included in the monthly ISO.
</p>
<pre>menuentry '[loopback]archlinux-2023.03.01-x86_64.iso MemTest86+' {
	set iso_path='/boot-isos/archlinux-2023.03.01-x86_64.iso'
	loopback loop $iso_path
	linux (loop)/boot/memtest86+/memtest.efi
}</pre>
<h4><span class="mw-headline" id="Archboot">Archboot</span></h4>
<p>See <a rel="nofollow" class="external text" href="https://archboot.com">Archboot Homepage</a>.
</p>
<pre>menuentry '[loopback]archlinux-2014.11-1-archboot' {
	set iso_path='/boot-isos/archlinux-2014.11-1-archboot.iso'
	loopback loop $iso_path
	linux (loop)/boot/vmlinuz_<b>x86_64</b> iso_loop_dev=$imgdevpath iso_loop_path=$iso_path
	initrd (loop)/boot/initramfs_<b>x86_64</b>.img
}</pre>
<h2><span class="mw-headline" id="Using_Syslinux_and_memdisk">Using Syslinux and memdisk</span></h2>
<p>Using the <a rel="nofollow" class="external text" href="https://wiki.syslinux.org/wiki/index.php/MEMDISK">memdisk</a> module, the ISO image is loaded into memory, and its bootloader is loaded. Make sure that the system that will boot this USB drive has sufficient amount of memory for the image file and running operating system.
</p>
<h3><span class="mw-headline" id="Preparation_2">Preparation</span></h3>
<p>Make sure that the USB drive is properly <a href="../en/Partitioning.html" title="Partitioning">partitioned</a> and that there is a partition with <a href="../en/File_systems.html" class="mw-redirect" title="File system">file system</a> supported by Syslinux, for example fat32 or ext4. Then install Syslinux to this partition, see <a href="../en/Syslinux.html#BIOS_systems" title="Syslinux">Syslinux#BIOS systems</a>.
</p>
<h3><span class="mw-headline" id="Install_the_memdisk_module">Install the memdisk module</span></h3>
<p>The memdisk module was not installed during Syslinux installation, it has to be installed manually. Mount the partition where Syslinux is installed to <code>/mnt/</code> and copy the memdisk module to the same directory where Syslinux is installed:
</p>
<pre># cp /usr/lib/syslinux/bios/memdisk /mnt/boot/syslinux/
</pre>
<h3><span class="mw-headline" id="Configuration">Configuration</span></h3>
<p>After copying the ISO files on the USB drive, edit the <a href="../en/Syslinux.html#Configuration" title="Syslinux">Syslinux configuration file</a> and create menu entries for the ISO images. The basic entry looks like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">boot/syslinux/syslinux.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">LABEL <i>some_label</i>
    LINUX memdisk
    INITRD <i>/path/to/image.iso</i>
    APPEND iso
</pre>
<p>See <a rel="nofollow" class="external text" href="https://wiki.syslinux.org/wiki/index.php/MEMDISK">memdisk on Syslinux wiki</a> for more configuration options.
</p>
<h2><span class="mw-headline" id="Automated_tools">Automated tools</span></h2>
<ul><li>
<b>GRUB2 Live ISO Multiboot (GLIM)</b> — A set of GRUB configuration files to turn a VFAT formatted USB memory stick with GNU/Linux distribution ISO images into a multiboot USB drive.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/thias/glim">https://github.com/thias/glim</a> || <small>not packaged? <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/">search in AUR</a></small>
</dd></dl>
<ul><li>
<b>liveusb-builder</b> — A script suite to create multiboot USB stick for GNU/Linux distributions</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/mytbk/liveusb-builder">https://github.com/mytbk/liveusb-builder</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/liveusb-builder-git/">liveusb-builder-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>MultiBootUSB</b> — A cross platform Python software with CLI and GUI interfaces which allows you to install and remove multiple live Linux images on a USB stick.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/mbusb/multibootusb">https://github.com/mbusb/multibootusb</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/multibootusb/">multibootusb</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b><a href="../en/Ventoy.html" title="Ventoy">Ventoy</a></b> — An open source tool to create bootable USB drive for ISO/WIM/IMG/VHD(x)/EFI files. You do not need to format the disk over and over, you just need to copy the files to the USB drive and boot them directly.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.ventoy.net/">https://www.ventoy.net/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ventoy-bin/">ventoy-bin</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>GRUB:
<ul>
<li><a rel="nofollow" class="external free" href="https://help.ubuntu.com/community/Grub2/ISOBoot/Examples">https://help.ubuntu.com/community/Grub2/ISOBoot/Examples</a></li>
<li><a rel="nofollow" class="external free" href="https://help.ubuntu.com/community/Grub2/ISOBoot">https://help.ubuntu.com/community/Grub2/ISOBoot</a></li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/thias/glim">GRUB Live ISO Multiboot</a> - GRUB configurations for booting ISO images</li>
</ul>
</li>
<li>Syslinux:
<ul><li><a rel="nofollow" class="external text" href="https://wiki.syslinux.org/wiki/index.php?title=Boot_an_Iso_image">Boot an ISO image</a></li></ul>
</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Installation_process.html" title="Category:Installation process">Installation process</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_with_missing_package_links.html" title="Category:Pages with missing package links">Pages with missing package links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Multiboot_USB_drive&amp;oldid=792522">https://wiki.archlinux.org/index.php?title=Multiboot_USB_drive&amp;oldid=792522</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 14 November 2023, at 20:41.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
