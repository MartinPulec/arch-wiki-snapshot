<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>libvirt - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Libvirt rootpage-Libvirt skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Server">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Server</div>
			</a>
			
			<ul id="toc-Server-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Client" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Client">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Client</div>
			</a>
			
			<ul id="toc-Client-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Set_up_authentication" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Set_up_authentication">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Set up authentication</div>
			</a>
			
			<ul id="toc-Set_up_authentication-sublist" class="vector-toc-list">
				<li id="toc-Using_libvirt_group" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_libvirt_group">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>Using libvirt group</div>
			</a>
			
			<ul id="toc-Using_libvirt_group-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_polkit" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_polkit">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>Using polkit</div>
			</a>
			
			<ul id="toc-Using_polkit-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Authenticate_with_file-based_permissions" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Authenticate_with_file-based_permissions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.3</span>Authenticate with file-based permissions</div>
			</a>
			
			<ul id="toc-Authenticate_with_file-based_permissions-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Daemon" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Daemon">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Daemon</div>
			</a>
			
			<ul id="toc-Daemon-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unencrypt_TCP/IP_sockets" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unencrypt_TCP/IP_sockets">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Unencrypt TCP/IP sockets</div>
			</a>
			
			<ul id="toc-Unencrypt_TCP/IP_sockets-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Access_virtual_machines_using_their_hostnames" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Access_virtual_machines_using_their_hostnames">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Access virtual machines using their hostnames</div>
			</a>
			
			<ul id="toc-Access_virtual_machines_using_their_hostnames-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Test" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Test">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Test</div>
		</a>
		
		<ul id="toc-Test-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Management" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Management">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Management</div>
		</a>
		
			<button aria-controls="toc-Management-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Management subsection</span>
			</button>
		
		<ul id="toc-Management-sublist" class="vector-toc-list">
			<li id="toc-virsh" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#virsh">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>virsh</div>
			</a>
			
			<ul id="toc-virsh-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Storage_pools" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Storage_pools">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Storage pools</div>
			</a>
			
			<ul id="toc-Storage_pools-sublist" class="vector-toc-list">
				<li id="toc-Create_a_new_pool_using_virsh" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_a_new_pool_using_virsh">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.1</span>Create a new pool using virsh</div>
			</a>
			
			<ul id="toc-Create_a_new_pool_using_virsh-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Create_a_new_pool_using_virt-manager" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_a_new_pool_using_virt-manager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.2</span>Create a new pool using virt-manager</div>
			</a>
			
			<ul id="toc-Create_a_new_pool_using_virt-manager-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Storage_volumes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Storage_volumes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Storage volumes</div>
			</a>
			
			<ul id="toc-Storage_volumes-sublist" class="vector-toc-list">
				<li id="toc-Create_a_new_volume_with_virsh" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_a_new_volume_with_virsh">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.1</span>Create a new volume with virsh</div>
			</a>
			
			<ul id="toc-Create_a_new_volume_with_virsh-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Domains" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Domains">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Domains</div>
			</a>
			
			<ul id="toc-Domains-sublist" class="vector-toc-list">
				<li id="toc-Create_a_new_domain_using_virt-install" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_a_new_domain_using_virt-install">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4.1</span>Create a new domain using virt-install</div>
			</a>
			
			<ul id="toc-Create_a_new_domain_using_virt-install-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Create_a_new_domain_using_virt-manager" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_a_new_domain_using_virt-manager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4.2</span>Create a new domain using virt-manager</div>
			</a>
			
			<ul id="toc-Create_a_new_domain_using_virt-manager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Manage_a_domain" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Manage_a_domain">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4.3</span>Manage a domain</div>
			</a>
			
			<ul id="toc-Manage_a_domain-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Networking" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Networking">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Networking</div>
			</a>
			
			<ul id="toc-Networking-sublist" class="vector-toc-list">
				<li id="toc-Managing_and_modifying_your_networks" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Managing_and_modifying_your_networks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5.1</span>Managing and modifying your networks</div>
			</a>
			
			<ul id="toc-Managing_and_modifying_your_networks-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-IPv6" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#IPv6">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5.2</span>IPv6</div>
			</a>
			
			<ul id="toc-IPv6-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Macvtap" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Macvtap">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5.3</span>Macvtap</div>
			</a>
			
			<ul id="toc-Macvtap-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Snapshots" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Snapshots">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>Snapshots</div>
			</a>
			
			<ul id="toc-Snapshots-sublist" class="vector-toc-list">
				<li id="toc-Create_a_snapshot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Create_a_snapshot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6.1</span>Create a snapshot</div>
			</a>
			
			<ul id="toc-Create_a_snapshot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Other_management" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Other_management">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7</span>Other management</div>
			</a>
			
			<ul id="toc-Other_management-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Hooks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Hooks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Hooks</div>
		</a>
		
			<button aria-controls="toc-Hooks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Hooks subsection</span>
			</button>
		
		<ul id="toc-Hooks-sublist" class="vector-toc-list">
			<li id="toc-Create_a_hook" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Create_a_hook">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Create a hook</div>
			</a>
			
			<ul id="toc-Create_a_hook-sublist" class="vector-toc-list">
				<li id="toc-Example" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Example">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.1</span>Example</div>
			</a>
			
			<ul id="toc-Example-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Sharing_data_between_host_and_guest" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Sharing_data_between_host_and_guest">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Sharing data between host and guest</div>
		</a>
		
			<button aria-controls="toc-Sharing_data_between_host_and_guest-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Sharing data between host and guest subsection</span>
			</button>
		
		<ul id="toc-Sharing_data_between_host_and_guest-sublist" class="vector-toc-list">
			<li id="toc-Virtio-FS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Virtio-FS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Virtio-FS</div>
			</a>
			
			<ul id="toc-Virtio-FS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-9p" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#9p">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>9p</div>
			</a>
			
			<ul id="toc-9p-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Samba_/_SMB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Samba_/_SMB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Samba / SMB</div>
			</a>
			
			<ul id="toc-Samba_/_SMB-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-UEFI_support" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#UEFI_support">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>UEFI support</div>
		</a>
		
		<ul id="toc-UEFI_support-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Python_connectivity_code" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Python_connectivity_code">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>Python connectivity code</div>
			</a>
			
			<ul id="toc-Python_connectivity_code-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Advanced_Format_4K_native_disk" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Advanced_Format_4K_native_disk">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.2</span>Advanced Format 4K native disk</div>
			</a>
			
			<ul id="toc-Advanced_Format_4K_native_disk-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-commanding_QEMU" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#commanding_QEMU">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3</span>commanding QEMU</div>
			</a>
			
			<ul id="toc-commanding_QEMU-sublist" class="vector-toc-list">
				<li id="toc-modify_VM_XML_schema_for_QEMU" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#modify_VM_XML_schema_for_QEMU">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3.1</span>modify VM XML schema for QEMU</div>
			</a>
			
			<ul id="toc-modify_VM_XML_schema_for_QEMU-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-QEMU_command_line_arguments" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#QEMU_command_line_arguments">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3.2</span>QEMU command line arguments</div>
			</a>
			
			<ul id="toc-QEMU_command_line_arguments-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-PulseAudio_on_system_instance" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PulseAudio_on_system_instance">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.1</span>PulseAudio on system instance</div>
			</a>
			
			<ul id="toc-PulseAudio_on_system_instance-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hypervisor_CPU_use" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hypervisor_CPU_use">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.2</span>Hypervisor CPU use</div>
			</a>
			
			<ul id="toc-Hypervisor_CPU_use-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Virtual_machine_cannot_be_un-paused_on_virt-manager" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Virtual_machine_cannot_be_un-paused_on_virt-manager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.3</span>Virtual machine cannot be un-paused on virt-manager</div>
			</a>
			
			<ul id="toc-Virtual_machine_cannot_be_un-paused_on_virt-manager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Redirect_USB_Device_is_greyed_out_in_virt-manager" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Redirect_USB_Device_is_greyed_out_in_virt-manager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.4</span>Redirect USB Device is greyed out in virt-manager</div>
			</a>
			
			<ul id="toc-Redirect_USB_Device_is_greyed_out_in_virt-manager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error_starting_domain:_Requested_operation_is_not_valid" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Error_starting_domain:_Requested_operation_is_not_valid">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.5</span>Error starting domain: Requested operation is not valid</div>
			</a>
			
			<ul id="toc-Error_starting_domain:_Requested_operation_is_not_valid-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Virt_Manager_Error_'Virt_Manager_doesn't_have_search_permissions'" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Virt_Manager_Error_'Virt_Manager_doesn't_have_search_permissions'">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.6</span>Virt Manager Error 'Virt Manager doesn't have search permissions'</div>
			</a>
			
			<ul id="toc-Virt_Manager_Error_'Virt_Manager_doesn't_have_search_permissions'-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">libvirt</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/libvirt" title="libvirt – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Libvirt" title="Libvirt – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Category:Hypervisors.html" title="Category:Hypervisors">Category:Hypervisors</a></li>
<li><a href="../en/PCI_passthrough_via_OVMF.html" title="PCI passthrough via OVMF">PCI passthrough via OVMF</a></li>
</ul>
</div>
<p>Libvirt is a collection of software that provides a convenient way to manage virtual machines and other virtualization functionality, such as storage and network interface management. These software pieces include a long term stable C API, a daemon (libvirtd), and a command line utility (virsh). A primary goal of libvirt is to provide a single way to manage multiple different virtualization providers/hypervisors, such as the <a href="../en/QEMU.html" title="QEMU">KVM/QEMU</a>, <a href="../en/Xen.html" title="Xen">Xen</a>, <a href="../en/Linux_Containers.html" class="mw-redirect" title="LXC">LXC</a>, <a rel="nofollow" class="external text" href="https://openvz.org">OpenVZ</a> or <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a> <a href="../en/Category:Hypervisors.html" title="Category:Hypervisors">hypervisors</a> (<a rel="nofollow" class="external text" href="https://libvirt.org/drivers.html">among others</a>).
</p>
<p>Some of the major libvirt features are:
</p>
<ul>
<li>
<b>VM management</b>: Various domain lifecycle operations such as start, stop, pause, save, restore, and migrate. Hotplug operations for many device types including disk and network interfaces, memory, and CPUs.</li>
<li>
<b>Remote machine support</b>: All libvirt functionality is accessible on any machine running the libvirt daemon, including remote machines. A variety of network transports are supported for connecting remotely, with the simplest being SSH, which requires no extra explicit configuration.</li>
<li>
<b>Storage management</b>: Any host running the libvirt daemon can be used to manage various types of storage: create file images of various formats (qcow2, vmdk, raw, ...), mount NFS shares, enumerate existing LVM volume groups, create new LVM volume groups and logical volumes, partition raw disk devices, mount iSCSI shares, and much more.</li>
<li>
<b>Network interface management</b>: Any host running the libvirt daemon can be used to manage physical and logical network interfaces. Enumerate existing interfaces, as well as configure (and create) interfaces, bridges, vlans, and bond devices.</li>
<li>
<b>Virtual NAT and Route based networking</b>: Any host running the libvirt daemon can manage and create virtual networks. Libvirt virtual networks use firewall rules to act as a router, providing VMs transparent access to the host machines network.</li>
</ul>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Because of its daemon/client architecture, libvirt needs only be installed on the machine which will host the virtualized system. Note that the server and client can be the same physical machine.
</p>
<h3><span class="mw-headline" id="Server">Server</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libvirt">libvirt</a></span> package, as well as at least one hypervisor:
</p>
<ul><li>The <a rel="nofollow" class="external text" href="https://libvirt.org/drvqemu.html">libvirt KVM/QEMU driver</a> is the primary <i>libvirt</i> driver and if <a href="../en/QEMU.html#Enabling_KVM" title="QEMU">KVM is enabled</a>, fully virtualized, hardware accelerated guests will be available. See the <a href="../en/QEMU.html" title="QEMU">QEMU</a> article for more information.</li></ul>
<ul><li>Other <a rel="nofollow" class="external text" href="https://libvirt.org/drivers.html">supported hypervisors</a> include <a href="../en/Linux_Containers.html" class="mw-redirect" title="LXC">LXC</a>, <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a> and <a href="../en/Xen.html" title="Xen">Xen</a>. See the respective articles for installation instructions. With respect to  <code>libvirtd</code> installation note:
<ul>
<li>The <a rel="nofollow" class="external text" href="https://libvirt.org/drvlxc.html">libvirt LXC driver</a> has no dependency on the <a href="../en/Linux_Containers.html" class="mw-redirect" title="LXC">LXC</a> userspace tools provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lxc">lxc</a></span>, therefore there is no need to install the package if planning on using the driver.  <code>libvirtd</code> needs to be running to use <code>libvirt-lxc</code> connection.</li>
<li>
<a href="../en/Xen.html" title="Xen">Xen</a> support is available, but not by default (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/27356">FS#27356</a>). You need to use the <a href="../en/Arch_build_system.html" class="mw-redirect" title="ABS">ABS</a> to modify <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libvirt">libvirt</a></span>'s <a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a> and build it without the <code>-Ddriver_libxl=disabled</code> option.</li>
</ul>
</li></ul>
<p>For network connectivity, install:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iptables-nft">iptables-nft</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> for the <a rel="nofollow" class="external text" href="https://wiki.libvirt.org/VirtualNetworking.html#the-default-configuration">default</a> NAT/DHCP networking. Then set <code>firewall_backend="iptables"</code> option in <code>/etc/libvirt/network.conf</code>.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openbsd-netcat">openbsd-netcat</a></span> for remote management over <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a>.</li>
</ul>
<p>Other optional dependencies may provide desired or extended features, such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dmidecode">dmidecode</a></span> for DMI system info support. Install the ones you may need <a href="../en/Pacman.html#Installation_reason" title="Pacman">as dependencies</a> after reading pacman's output for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libvirt">libvirt</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you are using <a href="../en/Firewalld.html" title="Firewalld">firewalld</a>, as of <code>libvirt</code> 5.1.0 and <a href="../en/Firewalld.html" title="Firewalld">firewalld</a> 0.7.0 you no longer need to change the firewall backend to <a href="../en/Iptables.html" title="Iptables">iptables</a>. <code>libvirt</code> now installs a zone called 'libvirt' in <a href="../en/Firewalld.html" title="Firewalld">firewalld</a> and manages its required network rules there. See <a rel="nofollow" class="external text" href="https://libvirt.org/firewall.html">Firewall and network filtering in libvirt</a>.</div>
<h3><span class="mw-headline" id="Client">Client</span></h3>
<p>The client is the user interface that will be used to manage and access the virtual machines.
</p>
<ul><li>
<b>virsh</b> — Command line program for managing and configuring domains.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://libvirt.org/">https://libvirt.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libvirt">libvirt</a></span>
</dd></dl>
<ul><li>
<b><a href="https://en.wikipedia.org/wiki/GNOME_Boxes" class="extiw" title="wikipedia:GNOME Boxes">GNOME Boxes</a></b> — Simple GNOME application to access virtual systems. Part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome-extra/">gnome-extra</a></span>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.gnome.org/Apps/Boxes">https://wiki.gnome.org/Apps/Boxes</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-boxes">gnome-boxes</a></span>
</dd></dl>
<ul><li>
<b>Libvirt Sandbox</b> — Application sandbox toolkit.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://sandbox.libvirt.org/">https://sandbox.libvirt.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libvirt-sandbox/">libvirt-sandbox</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Virt Viewer</b> — Simple remote display client.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.com/virt-viewer/virt-viewer">https://gitlab.com/virt-viewer/virt-viewer</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virt-viewer">virt-viewer</a></span>
</dd></dl>
<ul><li>
<b>Qt VirtManager</b> — Qt application for managing virtual machines.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/F1ash/qt-virt-manager">https://github.com/F1ash/qt-virt-manager</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/qt-virt-manager/">qt-virt-manager</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b><a href="../en/Virt-manager.html" title="Virt-manager">Virt-manager</a></b> — Graphically manage KVM, Xen, or LXC via libvirt.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://virt-manager.org/">https://virt-manager.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virt-manager">virt-manager</a></span>
</dd></dl>
<ul><li>
<b><a href="../en/Cockpit.html" title="Cockpit">Cockpit</a></b> — Web-based system administration tool with plugin to manage virtual machines.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://cockpit-project.org/">https://cockpit-project.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cockpit-machines">cockpit-machines</a></span>
</dd></dl>
<p>A list of libvirt-compatible software can be found <a rel="nofollow" class="external text" href="https://libvirt.org/apps.html">here</a>.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>For <i><b>system</b></i>-level administration (i.e. global settings and image-<i>volume</i> location), libvirt minimally requires <a href="#Set_up_authentication">setting up authorization</a>, and <a href="#Daemon">starting the daemon</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> For user-<i><b>session</b></i> administration, daemon setup and configuration is <i>not</i> required; however, authorization is limited to local abilities; the front-end will launch a local instance of the <b>libvirtd</b> daemon.</div>
<h3><span class="mw-headline" id="Set_up_authentication">Set up authentication</span></h3>
<p>From <a rel="nofollow" class="external text" href="https://libvirt.org/auth.html#ACL_server_config">libvirt: Connection authentication</a>:
</p>
<dl><dd>The libvirt daemon allows the administrator to choose the authentication mechanisms used for client connections on each network socket independently. This is primarily controlled via the libvirt daemon master config file in <code>/etc/libvirt/libvirtd.conf</code>. Each of the libvirt sockets can have its authentication mechanism configured independently. There is currently a choice of <code>none</code>, <code>polkit</code> and <code>sasl</code>.</dd></dl>
<h4><span class="mw-headline" id="Using_libvirt_group">Using libvirt group</span></h4>
<p>The easiest way to ensure your user has access to libvirt daemon is to add member to <code>libvirt</code> <a href="../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">user group</a>.
</p>
<p>Members of the <code>libvirt</code> group have passwordless access to the RW daemon socket by default.
</p>
<h4><span class="mw-headline" id="Using_polkit">Using polkit</span></h4>
<p>Because <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libvirt">libvirt</a></span> pulls <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=polkit">polkit</a></span> as a dependency during installation, <a href="../en/Polkit.html" title="Polkit">polkit</a> is used as the default value for the <code>unix_sock_auth</code> parameter (<a rel="nofollow" class="external text" href="https://libvirt.org/auth.html#ACL_server_polkit">source</a>). <a href="#Authenticate_with_file-based_permissions">File-based permissions</a> remain nevertheless available.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> A system reboot may be required before authenticating with <code>polkit</code> works correctly.</div>
<p>The <i>libvirt</i> daemon provides two <a href="../en/Polkit.html#Actions" title="Polkit">polkit actions</a> in <code>/usr/share/polkit-1/actions/org.libvirt.unix.policy</code>:
</p>
<ul>
<li>
<code>org.libvirt.unix.manage</code> for full management access (RW daemon socket), and</li>
<li>
<code>org.libvirt.unix.monitor</code> for monitoring only access (read-only socket).</li>
</ul>
<p>The default policy for the RW daemon socket will require to authenticate as an admin. This is akin to <a href="../en/Sudo.html" title="Sudo">sudo</a> auth, but does not require that the client application ultimately run as root. Default policy will still allow any application to connect to the RO socket.
</p>
<p>Arch defaults to consider anybody in the <code>wheel</code> group as an administrator: this is defined in <code>/usr/share/polkit-1/rules.d/50-default.rules</code> (see <a href="../en/Polkit.html#Administrator_identities" title="Polkit">Polkit#Administrator identities</a>). Therefore there is no need to create a new group and rule file <b>if your user is a member of the <code>wheel</code> group</b>: upon connection to the RW socket (e.g. via <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virt-manager">virt-manager</a></span>) you will be prompted for your user's password.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Prompting for a password relies on the presence of an <a href="../en/Polkit.html#Authentication_agents" title="Polkit">authentication agent</a> on the system. Console users may face an issue with the default <code>pkttyagent</code> agent which may or may not work properly.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If you want to configure passwordless authentication, see <a href="../en/Polkit.html#Bypass_password_prompt" title="Polkit">Polkit#Bypass password prompt</a>.</div>
<p>You may change the group authorized to access the RW daemon socket. As an example, to authorize the <code>mykvm</code> group, create the following file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/polkit-1/rules.d/50-libvirt.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/* Allow users in mykvm group to manage the libvirt
daemon without authentication */
polkit.addRule(function(action, subject) {
    if (action.id == "org.libvirt.unix.manage" &amp;&amp;
        subject.isInGroup("mykvm")) {
            return polkit.Result.YES;
    }
});
</pre>
<p>Then <a href="../en/Users_and_groups.html#Other_examples_of_user_management" title="Users and groups">add yourself</a> to the <code>mykvm</code> group and relogin. Replace <i>mykvm</i> with any group of your preference just make sure it exists and that your user is a member of it (see <a href="../en/Users_and_groups.html" title="Users and groups">Users and groups</a> for more information).
</p>
<p>Do not forget to relogin for group changes to take effect.
</p>
<h4><span class="mw-headline" id="Authenticate_with_file-based_permissions">Authenticate with file-based permissions</span></h4>
<p>To define file-based permissions for users in the <i>libvirt</i> group to manage virtual machines, uncomment and define:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/libvirt/libvirtd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#unix_sock_group = "libvirt"
#unix_sock_ro_perms = "0777"  # set to 0770 to deny non-group libvirt users
#unix_sock_rw_perms = "0770"
#auth_unix_ro = "none"
#auth_unix_rw = "none"
</pre>
<p>While some guides mention changed permissions of certain libvirt directories to ease management, keep in mind permissions are lost on package update. To edit these system directories, root user is expected.
</p>
<h3><span class="mw-headline" id="Daemon">Daemon</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Libvirt is moving from a single monolithic daemon to separate modular daemons, with the intention to remove the monolithic daemon in the future. See <a rel="nofollow" class="external text" href="https://libvirt.org/daemons.html#modular-driver-daemons">Libvirt daemons</a> for more infomation.</div>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> both <code>libvirtd.service</code> and <code>virtlogd.service</code>. Optionally <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>libvirtd.service</code> (which will also enable <code>virtlogd.socket</code> and <code>virtlockd.socket</code> <a href="../en/Systemd.html#Using_units" title="Systemd">units</a>, so there is NO need to also enable <code>virtlogd.service</code>).
</p>
<h3>
<span id="Unencrypt_TCP.2FIP_sockets"></span><span class="mw-headline" id="Unencrypt_TCP/IP_sockets">Unencrypt TCP/IP sockets</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This method is used to help remote domain, connection speed for trusted networks.  This is the least secure connection method.  This should <i>only</i> be used for testing or use over a secure, private, and trusted network. SASL is not enabled here, so all TCP traffic is <i>cleartext</i>. For real world use <i>always</i> enable SASL.</div>
<p>Edit <code>/etc/libvirt/libvirtd.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/libvirt/libvirtd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">listen_tls = 0
listen_tcp = 1
auth_tcp="none"
</pre>
<p>It is also necessary to start the server in listening mode by editing <code>/etc/conf.d/libvirtd</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/conf.d/libvirtd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">LIBVIRTD_ARGS="--listen"</pre>
<h3><span class="mw-headline" id="Access_virtual_machines_using_their_hostnames">Access virtual machines using their hostnames</span></h3>
<p>For host access to guests on non-isolated, bridged networks, enable the <code>libvirt</code> and/or <code>libvirt_guest</code> NSS modules provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libvirt">libvirt</a></span>. For the comparison of the two modules and technical details, see <a rel="nofollow" class="external text" href="https://libvirt.org/nss.html">libvirt documentation</a>.
</p>
<p>Add desired modules in <span class="plainlinks archwiki-template-man" title="$ man 5 nsswitch.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nsswitch.conf.5">nsswitch.conf(5)</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nsswitch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">hosts: files <b>libvirt libvirt_guest</b> dns myhostname
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> While commands such as <code>ping</code> and <code>ssh</code> should work with virtual machine hostnames, commands such as <code>host</code> and <code>nslookup</code> may fail or produce unexpected results because they rely on DNS. Use <code>getent hosts &lt;vm-hostname&gt;</code> instead.</div>
<h2><span class="mw-headline" id="Test">Test</span></h2>
<p>To test if libvirt is working properly on a <i>system</i> level:
</p>
<pre>$ virsh -c qemu:///system
</pre>
<p>To test if libvirt is working properly for a user-<i>session</i>:
</p>
<pre>$ virsh -c qemu:///session
</pre>
<h2><span class="mw-headline" id="Management">Management</span></h2>
<p>Libvirt management is done mostly with three tools: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virt-manager">virt-manager</a></span> (GUI), <code>virsh</code>, and <code>guestfish</code> (which is part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libguestfs">libguestfs</a></span>).
</p>
<h3><span class="mw-headline" id="virsh">virsh</span></h3>
<p>The virsh program is for managing guest <i>domains</i> (virtual machines) and works well for scripting, virtualization administration.  Though most virsh commands require root privileges to run due to the communication channels used to talk to the hypervisor, typical management, creation, and running of domains (like that done with VirtualBox) can be done as a regular user.
</p>
<p>Virsh includes an interactive terminal that can be entered if no commands are passed (options are allowed though): <code>virsh</code>.  The interactive terminal has support for tab completion.
</p>
<p>From the command line:
</p>
<pre>$ virsh [option] &lt;command&gt; [argument]...
</pre>
<p>From the interactive terminal:
</p>
<pre>virsh # &lt;command&gt; [argument]...
</pre>
<p>Help is available:
</p>
<pre>$ virsh help [option*] or [group-keyword*]
</pre>
<h3><span class="mw-headline" id="Storage_pools">Storage pools</span></h3>
<p>A pool is a location where storage <i>volumes</i> can be kept.  What libvirt defines as <i>volumes</i> others may define as "virtual disks" or "virtual machine images".  Pool locations may be a directory, a network filesystem, or partition (this includes a <a href="../en/LVM.html" title="LVM">LVM</a>).  Pools can be toggled active or inactive and allocated for space.
</p>
<p>On the <i>system</i>-level, <code>/var/lib/libvirt/images/</code> will be activated by default; on a user-<i>session</i>, <code>virt-manager</code> creates <code>$XDG_DATA_HOME/images</code>.
</p>
<p>Print active and inactive storage pools:
</p>
<pre>$ virsh pool-list --all
</pre>
<h4><span class="mw-headline" id="Create_a_new_pool_using_virsh">Create a new pool using virsh</span></h4>
<p>If one wanted to <i>add</i> a storage pool, here are examples of the command form, adding a directory, and adding a LVM volume:
</p>
<pre>$ virsh pool-define-as name type [source-host] [source-path] [source-dev] [source-name] [&lt;target&gt;] [--source-format format]
$ virsh pool-define-as <i>poolname</i> dir - - - - /home/<i>username</i>/.local/libvirt/images
$ virsh pool-define-as <i>poolname</i> fs - -  <i>/dev/vg0/images</i> - <i>mntpoint</i>
</pre>
<p>The above command defines the information for the pool, to build it:
</p>
<pre>$ virsh pool-build     <i>poolname</i>
$ virsh pool-start     <i>poolname</i>
$ virsh pool-autostart <i>poolname</i>
</pre>
<p>To remove it:
</p>
<pre>$ virsh pool-undefine  <i>poolname</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For LVM storage pools:
<ul>
<li>It is a good practice to dedicate a volume group to the storage pool only.</li>
<li>Choose a LVM volume group that differs from the pool name, otherwise when the storage pool is deleted the LVM group will be too.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Create_a_new_pool_using_virt-manager">Create a new pool using virt-manager</span></h4>
<p>First, connect to a hypervisor (e.g. QEMU/KVM <i>system</i>, or user-<i>session</i>).  Then, right-click on a connection and select <i>Details</i>; select the <i>Storage</i> tab, push the <i>+</i> button on the lower-left, and follow the wizard.
</p>
<h3><span class="mw-headline" id="Storage_volumes">Storage volumes</span></h3>
<p>Once the pool has been created, volumes can be created inside the pool.  <i>If building a new domain (virtual machine), this step can be skipped as a volume can be created in the domain creation process.</i>
</p>
<h4><span class="mw-headline" id="Create_a_new_volume_with_virsh">Create a new volume with virsh</span></h4>
<p>Create volume, list volumes, resize, and delete:
</p>
<pre>$ virsh vol-create-as      <i>poolname</i> <i>volumename</i> 10GiB --format aw|bochs|raw|qcow|qcow2|vmdk
$ virsh vol-upload  --pool <i>poolname</i> <i>volumename</i> <i>volumepath</i>
$ virsh vol-list           <i>poolname</i>
$ virsh vol-resize  --pool <i>poolname</i> <i>volumename</i> 12GiB
$ virsh vol-delete  --pool <i>poolname</i> <i>volumename</i>
$ virsh vol-dumpxml --pool <i>poolname</i> <i>volumename</i>  # for details.
</pre>
<h3><span class="mw-headline" id="Domains">Domains</span></h3>
<p>Virtual machines are called <i>domains</i>.  If working from the command line, use <code>virsh</code> to list, create, pause, shutdown domains, etc.  <code>virt-viewer</code> can be used to view domains started with <code>virsh</code>.  Creation of domains is typically done either graphically with <code>virt-manager</code> or with <code>virt-install</code> (a command line program installed as part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virt-install">virt-install</a></span> package).
</p>
<p>Creating a new domain typically involves using some installation media, such as an <code>.iso</code> from the storage pool or an optical drive.
</p>
<p>Print active and inactive domains:
</p>
<pre># virsh list --all
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="../en/SELinux.html" title="SELinux">SELinux</a> has a built-in exemption for libvirt that allows volumes in <code>/var/lib/libvirt/images/</code> to be accessed.  If using SELinux and there are issues with the volumes, ensure that volumes are in that directory, or ensure that other storage pools are correctly labeled.</div>
<h4><span class="mw-headline" id="Create_a_new_domain_using_virt-install">Create a new domain using virt-install</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> <code>/usr/share/libosinfo</code> is not provided by any official packages, including <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libosinfo">libosinfo</a></span>. (Discuss in <a href="../en/Talk:Libvirt.html#Where_is_'/usr/share/libosinfo/db/oses/os.xml'%EF%BC%9F" title="Talk:Libvirt">Talk:Libvirt#Where_is_'/usr/share/libosinfo/db/oses/os.xml'？</a>)</div>
</div>
<p>For an extremely detailed domain (virtual machine) setup, it is easier to <a href="#Create_a_new_domain_using_virt-manager">#Create a new domain using virt-manager</a>.  However, basics can easily be done with <code>virt-install</code> and still run quite well.  Minimum specifications are <code>--name</code>, <code>--memory</code>, guest storage (<code>--disk</code>, <code>--filesystem</code>, or <code>--nodisks</code>), and an install method (generally an <code>.iso</code> or CD). See <span class="plainlinks archwiki-template-man" title="$ man 1 virt-install"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/virt-install.1">virt-install(1)</a></span> for more details and information about unlisted options.
</p>
<p>Arch Linux install (two GiB, qcow2 format volume create; user-networking):
</p>
<pre>$ virt-install  \
  --name arch-linux_testing \
  --memory 1024             \
  --vcpus=2,maxvcpus=4      \
  --cpu host                \
  --cdrom $HOME/Downloads/arch-linux_install.iso \
  --disk size=2,format=qcow2  \
  --network user            \
  --virt-type kvm
</pre>
<p>Fedora testing (Xen hypervisor, non-default pool, do not originally view):
</p>
<pre>$ virt-install  \
  --connect xen:///     \
  --name fedora-testing \
  --memory 2048         \
  --vcpus=2             \
  --cpu=host            \
  --cdrom /tmp/fedora20_x84-64.iso      \
  --os-type=linux --os-variant=fedora20 \
  --disk pool=testing,size=4            \
  --network bridge=br0                  \
  --graphics=vnc                        \
  --noautoconsole
$ virt-viewer --connect xen:/// fedora-testing
</pre>
<p>Windows:
</p>
<pre>$ virt-install \
  --name=windows7           \
  --memory 2048             \
  --cdrom /dev/sr0          \
  --os-variant=win7         \
  --disk /mnt/storage/domains/windows7.qcow2,size=20GiB \
  --network network=vm-net  \
  --graphics spice
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Run <code>osinfo-query --fields=name,short-id,version os</code> to get argument for <code>--os-variant</code>; this will help define some specifications for the domain.  However, <code>--memory</code> and <code>--disk</code> will need to be entered; one can look within the appropriate <code>/usr/share/libosinfo/db/oses/<i>os</i>.xml</code> if needing these specifications.  After installing, it will likely be preferable to install the <a rel="nofollow" class="external text" href="https://www.spice-space.org/download.html">Spice Guest Tools</a> that include the <a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Virtualization_Host_Configuration_and_Guest_Installation_Guide/form-Virtualization_Host_Configuration_and_Guest_Installation_Guide-Para_virtualized_drivers-Mounting_the_image_with_virt_manager.html">VirtIO drivers</a>. For a Windows VirtIO network driver there is also <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/virtio-win/">virtio-win</a></span><sup><small>AUR</small></sup>. These drivers are referenced by a <code>&lt;model type='virtio' /&gt;</code> in the guest's <code>.xml</code> configuration section for the device. A bit more information can also be found on the <a href="../en/QEMU.html#Preparing_a_Windows_guest" title="QEMU">QEMU article</a>.</div>
<p>Import existing volume:
</p>
<pre>$ virt-install  \
  --name demo  \
  --memory 512 \
  --disk /home/user/VMs/mydisk.img \
  --import
</pre>
<h4><span class="mw-headline" id="Create_a_new_domain_using_virt-manager">Create a new domain using virt-manager</span></h4>
<p>First, connect to the hypervisor (e.g. QEMU/KVM <i>system</i> or user <i>session</i>), right click on a connection and select <i>New</i>, and follow the wizard.
</p>
<ul>
<li>On the <i>fourth step</i>, de-selecting <i>Allocate entire disk now</i> will make setup quicker and can save disk space in the interum; <i>however</i>, it may cause volume fragmentation over time.</li>
<li>On the <i>fifth step</i>, open <i>Advanced options</i> and make sure that <i>Virt Type</i> is set to <i>kvm</i> (this is usually the preferred method).  If additional hardware setup is required, select the <i>Customize configuration before install</i> option.</li>
</ul>
<h4><span class="mw-headline" id="Manage_a_domain">Manage a domain</span></h4>
<p>Start a domain:
</p>
<pre>$ virsh start <i>domain</i>
$ virt-viewer --connect qemu:///session <i>domain</i>
</pre>
<p>Gracefully attempt to shutdown a domain; force off a domain:
</p>
<pre>$ virsh shutdown <i>domain</i>
$ virsh destroy  <i>domain</i>
</pre>
<p>Autostart domain on libvirtd start:
</p>
<pre>$ virsh autostart <i>domain</i>
$ virsh autostart <i>domain</i> --disable
</pre>
<p>Shutdown domain on host shutdown:
</p>
<dl><dd>Running domains can be automatically suspended/shutdown at host shutdown using the <code>libvirt-guests.service</code> systemd service. This same service will resume/startup the suspended/shutdown domain automatically at host startup. See <span class="plainlinks archwiki-template-man" title="$ man 8 libvirt-guests"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libvirt-guests.8">libvirt-guests(8)</a></span> for details and service options.</dd></dl>
<p>Edit a domain's XML configuration:
</p>
<pre>$ virsh edit <i>domain</i>
</pre>
<p>To know more about XML configurations read the <a rel="nofollow" class="external text" href="https://libvirt.org/format.html">XML format</a> section of the libvirt wiki.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Virtual Machines started directly by QEMU are not manageable by libvirt tools.</div>
<h3><span class="mw-headline" id="Networking">Networking</span></h3>
<p>A <a rel="nofollow" class="external text" href="https://jamielinux.com/docs/libvirt-networking-handbook/">decent overview of libvirt networking</a>.
</p>
<p>Four network types exist that can be created to connect a domain to:
</p>
<ul>
<li>bridge — a virtual device; shares data directly with a physical interface.  Use this if the host has <i>static</i> networking, it does not need to connect other domains, the domain requires full inbound and outbound traffic, and the domain is running on a <i>system</i>-level. The bridge must be configured outside of libvirt. See <a href="../en/Network_bridge.html" title="Network bridge">Network bridge</a> on how to add a bridge. After creation, it needs to be specified in the respective guest's <code>.xml</code> configuration file.</li>
<li>network — a virtual network; has ability to share with other domains. Libvirt offers many virtual network modes, such as NAT mode (Network address translation), routed mode and isolated mode.  Using a virtual network is particularly indicated if the host has <i>dynamic</i> networking (e.g. NetworkManager), or using wireless.</li>
<li>macvtap — connect directly to a host physical interface. This is much simpler to set up than <i>bridge</i> networking, with the one disadvantage that is the host cannot communicate with the domains through this interface. Libvirt can set up this type of networking easily.</li>
<li>user — local ability networking.  Use this only for a user <i>session</i>.</li>
</ul>
<p><code>virsh</code> has the ability to create networking with numerous options for most users, however, it is easier to create network connectivity with a graphic user interface (like <code>virt-manager</code>), or to do so on <a href="#Create_a_new_domain_using_virt-install">creation with virt-install</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>libvirt handles DHCP and DNS with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span>, launching a separate instance for every virtual network. It also adds iptables rules for proper routing, and enables the <code>ip_forward</code> kernel parameter. This also means that having dnsmasq running on the host system is not necessary to support libvirt requirements (and could interfere with libvirt dnsmasq instances).</li>
<li>If the default network cannot be started, make sure <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iptables-nft">iptables-nft</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> are installed.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<p>If <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iptables">iptables</a></span> is to be used and <b>not</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nftables">nftables</a></span>, it is necessary to specify this accordingly in the configuration file: <code>/etc/libvirt/network.conf</code>.
</p>
<p><b>Example</b>:
</p>
<pre># default: #firewall_backend = "nftables"
firewall_backend = "iptables"
</pre>
</div>
<p>You could get VM ip address via (in case it connected to <code><i>default</i></code> network and receives IP address via dhcp):
</p>
<pre>$ virsh net-dhcp-leases default
</pre>
<p>command (replacing <code><i>default</i></code> with network name VM connected to), or if VM has <code><i>qemu-guest-agent</i></code> running via:
</p>
<pre>$ virsh domifaddr --source agent $vm
</pre>
<p>replacing <code><i>$vm</i></code> with actual virtual machine name (or domain id).
</p>
<h4><span class="mw-headline" id="Managing_and_modifying_your_networks">Managing and modifying your networks</span></h4>
<p>To modify your virtual networks, it is highly recommended to read the <a rel="nofollow" class="external text" href="https://wiki.libvirt.org/VirtualNetworking.html#basic-command-line-usage-for-virtual-networks">basic command line usage for virtual networks</a> guide from the libvirt wiki. It is also recommended to read the <a rel="nofollow" class="external text" href="https://wiki.libvirt.org/page/VirtualNetworking">libvirt networking wiki</a> to know more about its usage.
</p>
<h4><span class="mw-headline" id="IPv6">IPv6</span></h4>
<p>When adding an IPv6 address through any of the configuration tools, you will likely receive the following error:
</p>
<pre>Check the host setup: enabling IPv6 forwarding with RA routes without accept_ra set to 2 is likely to cause routes loss. Interfaces to look at: <i>eth0</i>
</pre>
<p>Fix this by running the following command (replace <code><i>eth0</i></code> with the name of your physical interface):
</p>
<pre># sysctl net.ipv6.conf.eth0.accept_ra=2
</pre>
<h4><span class="mw-headline" id="Macvtap">Macvtap</span></h4>
<p>To set up macvtap networking, first create this file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">macvtap.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;network&gt;
  &lt;name&gt;macvtap-net&lt;/name&gt;
  &lt;forward mode='bridge'&gt;
    &lt;interface dev='eth0'/&gt;
  &lt;/forward&gt;
&lt;/network&gt;</pre>
<p>Then, define and enable the network:
</p>
<pre>$ virsh net-define macvtap.xml
$ virsh net-autostart macvtap-net
$ virsh net-start macvtap-net
</pre>
<p>Now the network <code>macvtap-net</code> is available, and persistent across reboots. It is bridged to the external network via <code>eth0</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The host cannot communicate with the domains via this network. The host's networking will not be affected, and the domains can communicate with other machines on the network, but not with the host itself. See the <a rel="nofollow" class="external text" href="https://wiki.libvirt.org/TroubleshootMacvtapHostFail.html">libvirt wiki</a> for a workaround.</div>
<h3><span class="mw-headline" id="Snapshots">Snapshots</span></h3>
<p>Snapshots take the disk, memory, and device state of a domain at a point-of-time, and save it for future use.  They have many uses, from saving a "clean" copy of an OS image to saving a domain's state before a potentially destructive operation.  Snapshots are identified with a unique name.
</p>
<p>Snapshots are saved within the volume itself and the volume must be the format: qcow2 or raw.  Snapshots use deltas in order not to take as much space as a full copy would.
</p>
<h4><span class="mw-headline" id="Create_a_snapshot">Create a snapshot</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> Some of this data appears to be dated. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Libvirt.html">Talk:Libvirt</a>)</div>
</div>
<p>Once a snapshot is taken it is saved as a new block device and the original snapshot is taken offline.  Snapshots can be chosen from and also merged into another (even without shutting down the domain).
</p>
<p>Print a running domain's volumes (running domains can be printed with <code>virsh list</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># virsh domblklist <i>domain</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> Target     Source
 ------------------------------------------------
 vda        /vms/domain.img
</pre>
<p>To see a volume's physical properties:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># qemu-img info /vms/domain.img</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> image: /vms/domain.img
 file format: qcow2
 virtual size: 50G (53687091200 bytes)
 disk size: 2.1G
 cluster_size: 65536
</pre>
<p>Create a disk-only snapshot (the option <code>--atomic</code> will prevent the volume from being modified if snapshot creation fails):
</p>
<pre># virsh snapshot-create-as <i>domain</i> snapshot1 --disk-only --atomic
</pre>
<p>List snapshots:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># virsh snapshot-list <i>domain</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> Name                 Creation Time             State
 ------------------------------------------------------------
 snapshot1           2012-10-21 17:12:57 -0700 disk-snapshot
</pre>
<p>One can then copy the original image with <code>cp --sparse=true</code> or <code>rsync -S</code> and then merge the original back into snapshot:
</p>
<pre># virsh blockpull --domain <i>domain</i> --path /vms/<i>domain</i>.snapshot1
</pre>
<p><code>domain.snapshot1</code> becomes a new volume.  After this is done the original volume (<code>domain.img</code> and snapshot metadata can be deleted.   The <code>virsh blockcommit</code> would work opposite to <code>blockpull</code> but it seems to be currently under development (including <code>snapshot-revert feature</code>, scheduled to be released sometime next year.
</p>
<h3><span class="mw-headline" id="Other_management">Other management</span></h3>
<p>Connect to non-default hypervisor:
</p>
<pre>$ virsh --connect xen:///
virsh # uri
xen:///
</pre>
<p>Connect to the QEMU hypervisor over SSH; and the same with logging:
</p>
<pre>$ virsh --connect qemu+ssh://<i>username</i>@<i>host</i>/system
$ LIBVIRT_DEBUG=1 virsh --connect qemu+ssh://<i>username</i>@<i>host</i>/system
</pre>
<p>Connect a graphic console over SSH:
</p>
<pre>$ virt-viewer  --connect qemu+ssh://<i>username</i>@<i>host</i>/system <i>domain</i>
$ virt-manager --connect qemu+ssh://<i>username</i>@<i>host</i>/system <i>domain</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you are having problems connecting to a remote RHEL server (or anything other than Arch, really), try the two workarounds mentioned in <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/30748">FS#30748</a> and <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/22068">FS#22068</a>.</div>
<p>Connect to the VirtualBox hypervisor (<i>VirtualBox support in libvirt is not stable yet and may cause libvirtd to crash</i>):
</p>
<pre>$ virsh --connect vbox:///system
</pre>
<p>Network configurations:
</p>
<pre>$ virsh -c qemu:///system net-list --all
$ virsh -c qemu:///system net-dumpxml default
</pre>
<h2><span class="mw-headline" id="Hooks">Hooks</span></h2>
<p>Hooks are scripts that are triggered by different events happening while starting and running the libvirt daemon.
They can be used to execute commands needed in preparation to launch a guest like setup networks or reserve memory.
</p>
<p>The following hooks exists:
</p>
<ul>
<li>daemon - occasions to trigger: start, shutdown, reload</li>
<li>qemu - occasions to trigger: prepare, prepare, start, started, stopped, release, migrate, restore, reconnect, attach</li>
<li>lxc - occasions to trigger: prepare, start, started, stopped, release, reconnect</li>
<li>libxl - occasions to trigger: prepare, start, started, stopped, release migrate, reconnect</li>
<li>network - occasions to trigger: start, started, stopped, port-created, updated, port-deleted</li>
</ul>
<p>See <a rel="nofollow" class="external text" href="https://www.libvirt.org/hooks.html">the libvirt Documentation</a> for details about each hook and trigger.
</p>
<h3><span class="mw-headline" id="Create_a_hook">Create a hook</span></h3>
<p>Hooks are represented by scripts located at <code>/etc/libvirt/hooks</code>. If the folder does not exist, you have to create it.
Each hook is represented by a script in this folder with the same name (e.g. <code>/etc/libvirt/hooks/qemu</code>) or a sub-folder (e.g. <code>/etc/libvirt/hooks/qemu.d/</code>). The later can contain different scripts, which are all run at the trigger points. The scripts are run like any other scripts, so they need to start with the declaration of the command interpreter to use (e.g. <code>#!/bin/bash</code>) and be <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>.
</p>
<p>Every time a trigger point is met, the script is run. For example, the daemon script would run at least two times in a start/stop cycle of the system, at start and at shutdown. To run an command only at a given point, you have to implement conditions in the script. To do this, libvirt passes parameters which can be used to identify the current trigger condition.
</p>
<p>According to the libvirt documentation these parameters are defined as follows:
</p>
<ul>
<li>Parameter 1: The name of the object involved in the operation</li>
<li>Parameter 2: The name of the operation being performed</li>
<li>Parameter 3: Used if a sub-operation is to be named</li>
<li>Parameter 4: An extra argument if needed</li>
</ul>
<p>If one of the arguments is not applicable, a dash is passed.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the hooks are not working after creating your script, try restarting the libvirt daemon.</div>
<h4><span class="mw-headline" id="Example">Example</span></h4>
<p>To run an command every time you start an qemu guest, before any resources are allocated, you can use the qemu hook. At this point, libvirt runs the hooks like this: <code>/etc/libvirt/hooks/qemu &lt;guest_name&gt; prepare begin -</code>
The script for this could like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/libvirt/hooks/qemu</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
guest_name="$1"
libvirt_task="$2"
if [ "$libvirt_task" = "prepare" ]; then
	&lt;run some important code here&gt;
fi</pre>
<p>If the guest is stopped, the same script would be run, but this time the daemon would start the command like this: <code>/etc/libvirt/hooks/qemu &lt;guest_name&gt; stopped end -</code>
</p>
<h2><span class="mw-headline" id="Sharing_data_between_host_and_guest">Sharing data between host and guest</span></h2>
<h3><span class="mw-headline" id="Virtio-FS">Virtio-FS</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Virtio-FS is not supported in QEMU/KVM user sessions.</div>
<p>The description here will use hugepages to enable the usage of shared folders. <a rel="nofollow" class="external text" href="https://libvirt.org/kbase/virtiofs.html">Sharing files with Virtio-FS</a> lists an overview of the supported options to enable filesharing with the guest.
</p>
<p>First you need to <a href="../en/KVM.html#Enabling_huge_pages" title="KVM">enable hugepages</a> which are used by the virtual machine:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/40-hugepage.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.nr_hugepages = <i>nr_hugepages</i></pre>
<p>To determine the number of hugepages needed check the size of the hugepages:
</p>
<pre>$ grep Hugepagesize /proc/meminfo
</pre>
<p>The number of hugepages is <i>memory size of virtual machine / Hugepagesize</i>. Add to this value some additional pages. You have to reboot after this step, so that the hugepages are allocated.
</p>
<p>Now you have to prepare the configuration of the virtual machine:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># virsh edit <i>name_of_virtual_machine</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;domain&gt;
...
  &lt;memoryBacking&gt;
    &lt;hugepages/&gt;
  &lt;/memoryBacking&gt;
...
  &lt;cpu ...&gt;
    &lt;numa&gt;
      &lt;cell memory='memory size of virtual machine' unit='KiB' memAccess='shared'/&gt;
    &lt;/numa&gt;
  &lt;/cpu&gt;
...
  &lt;devices&gt;
    ...
    &lt;filesystem type='mount' accessmode='passthrough'&gt;
      &lt;driver type='virtiofs'/&gt;
      &lt;source dir='path to source folder on host'/&gt;
      &lt;target dir='mount_tag'/&gt;
    &lt;/filesystem&gt;
    ...
  &lt;/devices&gt;
&lt;/domain&gt;
</pre>
<p>It is necessary to add the NUMA definition so that the memory access can be declared as shared. id and cpus values for NUMA will be inserted by virsh.
</p>
<p>It should now be possible to mount the folder in the shared machine:
</p>
<pre># mount -t virtiofs <i>mount_tag</i> /mnt/mount/path
</pre>
<p>Add the following <a href="../en/Fstab.html" title="Fstab">fstab</a> entry to mount the folder automatically at boot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
<i>mount_tag</i> /mnt/mount/path virtiofs rw,noatime,_netdev 0 0</pre>
<h3><span class="mw-headline" id="9p">9p</span></h3>
<p>File system directories can be shared using the <a href="https://en.wikipedia.org/wiki/9P_(protocol)" class="extiw" title="wikipedia:9P (protocol)">9P protocol</a>. Details are available in <a rel="nofollow" class="external text" href="https://wiki.qemu.org/Documentation/9psetup">QEMU's documentation of 9psetup</a>.
</p>
<p>Configure the virtual machine as follows:
</p>
<pre>&lt;domain&gt;
...
  &lt;devices&gt;
    ...
    &lt;filesystem type="mount" accessmode="mapped"&gt;
      &lt;source dir="<i>/path/on/host</i>"/&gt;
      &lt;target dir="<i>mount_tag</i>"/&gt;
    &lt;/filesystem&gt;
  &lt;/devices&gt;
&lt;/domain&gt;</pre>
<p>Boot the guest and <a href="../en/File_systems.html#Mount_a_file_system" class="mw-redirect" title="Mount">mount</a> the shared directory from it using:
</p>
<pre># mount -t 9p -o trans=virtio,version=9p2000.L <i>mount_tag</i> <i>/path/to/mount_point/on/guest</i>
</pre>
<p>See <a rel="nofollow" class="external free" href="https://docs.kernel.org/filesystems/9p.html">https://docs.kernel.org/filesystems/9p.html</a> for more mount options.
</p>
<p>To mount it at boot, add it to the guest's <a href="../en/Fstab.html" title="Fstab">fstab</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
<i>mount_tag</i>	<i>/path/to/mount_point/on/guest</i>	9p	trans=virtio,version=9p2000.L	0 0</pre>
<p>The module for the 9p transport (i.e. <code>9pnet_virtio</code> for <code>trans=virtio</code>) will not be automatically loaded, so mounting the file system from <code>/etc/fstab</code> will fail and you will encounter an error like <code>9pnet: Could not find request transport: virtio</code>. The solution is to <a href="../en/Kernel_module.html#Automatic_module_loading" title="Kernel module">preload the module during boot</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/9pnet_virtio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">9pnet_virtio
</pre>
<h3>
<span id="Samba_.2F_SMB"></span><span class="mw-headline" id="Samba_/_SMB">Samba / SMB</span>
</h3>
<p>An other easy way to share data between guest and host is to use the smb protocol. While performance and latency may not be as good as in the other described ways, its sufficient for simple tasks like transfering simple files like images or documents from and to the guest.
</p>
<p>The smb server can be set up directly on either the host, or the guest, for example using <a href="../en/Samba.html#Server" title="Samba">Samba</a>, eliminating the need for a dedicated file server. Windows guests have the ability to create smb shares included right after installation (<a rel="nofollow" class="external text" href="https://support.microsoft.com/en-us/windows/file-sharing-over-a-network-in-windows-10-b58704b2-f53a-4b82-7bc1-80f9994725bf">Microsoft Supportpage</a>).
</p>
<p>One possible way to access the share under linux (either from the host, or from the guest, depending, where you have installed your server) is to create an entry in your fstab. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span> package is required.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#Accessing a samba share on my vm from the host
//my_vm/my_share /home/archuser/my_vm cifs _netdev,noauto,nofail,user,credentials=/home/archuser/.config/my_vm.key,gid=1000,uid=984 0 0</pre>
<p><code>_netdev,noauto,nofail</code> ensures that the share is only mounted when needed without causing issues if the vm is not booted. <code>user,credentials=/home/user/.config/my_vm.key,gid=1000,uid=984</code> gives you the ability to mount the share on the fly while first accessing it, <a href="../en/Samba.html#Storing_share_passwords" title="Samba">without needing a password</a>.
</p>
<h2><span class="mw-headline" id="UEFI_support">UEFI support</span></h2>
<p>Libvirt can support UEFI virtual machines through QEMU and <a rel="nofollow" class="external text" href="https://github.com/tianocore/edk2">OVMF</a>.
</p>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=edk2-ovmf">edk2-ovmf</a></span> package.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">Restart</a> <code>libvirtd</code>.
</p>
<p>Now you are ready to create a UEFI virtual machine. Create a new virtual machine through <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virt-manager">virt-manager</a></span>. When you get to the final page of the <i>New VM</i> wizard, do the following:
</p>
<ol>
<li>Click <i>Customize configuration before install</i>, then select <i>Finish</i>.</li>
<li>In the <i>Overview</i> screen, change the <i>Firmware</i> field to:
<ul>
<li>
<i>UEFI x86_64: /usr/share/edk2/x64/OVMF_CODE.4m.fd</i> for x64 UEFI without Secure Boot support,</li>
<li>
<i>UEFI x86_64: /usr/share/edk2/x64/OVMF_CODE.secboot.4m.fd</i> for x64 UEFI with Secure Boot support (without any pre-enrolled certificates).</li>
</ul>
</li>
<li>Click <i>Apply</i>.</li>
<li>Click <i>Begin Installation</i>.</li>
</ol>
<p>See <a href="https://fedoraproject.org/wiki/Using_UEFI_with_QEMU" class="extiw" title="fedora:Using UEFI with QEMU">Fedora:Using UEFI with QEMU</a> for more information.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Python_connectivity_code">Python connectivity code</span></h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libvirt-python">libvirt-python</a></span> package provides a Python API in <code>/usr/lib/python3.x/site-packages/libvirt.py</code>.
</p>
<p>General examples are given in <code>/usr/share/doc/libvirt-python-<i>your_libvirt_version</i>/examples/</code>
</p>
<p>Unofficial example using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu-desktop">qemu-desktop</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssh">openssh</a></span>:
</p>
<pre>#! /usr/bin/env python3
import socket
import sys
import libvirt

conn = libvirt.open("qemu+ssh://xxx/system")
print("Trying to find node on xxx")
domains = conn.listDomainsID()
for domainID in domains:
    domConnect = conn.lookupByID(domainID)
    if domConnect.name() == 'xxx-node':
        print("Found shared node on xxx with ID {}".format(domainID))
        domServ = domConnect
        break
</pre>
<h3><span class="mw-headline" id="Advanced_Format_4K_native_disk">Advanced Format 4K native disk</span></h3>
<p>To turn a disk into an <a href="../en/Advanced_Format.html" title="Advanced Format">Advanced Format</a> 4Kn disk, both its physical and logical sector size needs to be set to 4 KiB. For virtio-blk and virtio-scsi this can be done by setting the <code>logical_block_size</code> and <code>physical_block_size</code> options with the <a rel="nofollow" class="external text" href="https://libvirt.org/formatdomain.html#hard-drives-floppy-disks-cdroms">&lt;blockio&gt; element</a>. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># virsh edit <i>name_of_virtual_machine</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;domain&gt;
  ...
  &lt;devices&gt;
    ...
    &lt;disk type='file' device='disk'&gt;
      ..
      <b>&lt;blockio logical_block_size='4096' physical_block_size='4096'/&gt;</b>
    &lt;/disk&gt;
    ...
  &lt;/devices&gt;
&lt;/domain&gt;</pre>
<h3><span class="mw-headline" id="commanding_QEMU">commanding QEMU</span></h3>
<p>Libvirt is capable of passing on QEMU command line arguments to the underlying QEMU instance running the VM.
This functionality is highly useful when libvirt does not provide <a href="../en/QEMU.html" title="QEMU">QEMU features</a> (yet). For examples, see the entire <a href="../en/Intel_GVT-g.html" title="Intel GVT-g">Intel GVT-g</a> article.
</p>
<h4><span class="mw-headline" id="modify_VM_XML_schema_for_QEMU">modify VM XML schema for QEMU</span></h4>
<p>This serves to enable QEMU-specific elements. Change
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ virsh edit <i>vmname</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;domain type='kvm'&gt;
</pre>
<p>to
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ virsh edit <i>vmname</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;domain xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0' type='kvm'&gt;
</pre>
<h4><span class="mw-headline" id="QEMU_command_line_arguments">QEMU command line arguments</span></h4>
<p>In libvirt, QEMU command line arguments separated by whitespaces need to be provided separately.
</p>
<p>The correct location to insert them is at the end of the <code>&lt;domain&gt;</code> element, i. e. right above the closing <code>&lt;/domain&gt;</code> tag.
</p>
<pre>-display gtk,gl=es,zoom-to-fit=off
</pre>
<p>Becomes
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ virsh edit <i>vmname</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
  &lt;/devices&gt;
  &lt;qemu:commandline&gt;
    &lt;qemu:arg value="-display"/&gt;
    &lt;qemu:arg value="gtk,gl=es,zoom-to-fit=off"/&gt;
  &lt;/qemu:commandline&gt;
&lt;/domain&gt;
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="PulseAudio_on_system_instance">PulseAudio on system instance</span></h3>
<p>The PulseAudio daemon normally runs under your regular user account, and will only accept connections from the same user. This can be a problem if QEMU is being run as root through libvirt. To run QEMU as a regular user, edit <code>/etc/libvirt/qemu.conf</code> and set the <code>user</code> option to your username.
</p>
<pre>user = "dave"
</pre>
<p>You will also need to tell QEMU to use the PulseAudio backend and identify the server to connect to. Add the following section to your domain configuration using <code>virsh edit</code>.
</p>
<pre>  &lt;audio id="1" type="pulseaudio" serverName="/run/user/1000/pulse/native"&gt;
    &lt;input latency="20000"/&gt;
    &lt;output latency="20000"/&gt;
  &lt;/audio&gt;
</pre>
<p><code>1000</code> is your user id. Change it if necessary.
</p>
<p>You can omit the latency settings (in microseconds) but using the defaults might result in crackling.
</p>
<h3><span class="mw-headline" id="Hypervisor_CPU_use">Hypervisor CPU use</span></h3>
<p>Default VM configuration generated by virt-manager may cause rather high (10-20%) CPU use caused by the QEMU process.
If you plan to run the VM in headless mode, consider removing some of the unnecessary devices.
</p>
<h3><span class="mw-headline" id="Virtual_machine_cannot_be_un-paused_on_virt-manager">Virtual machine cannot be un-paused on virt-manager</span></h3>
<p>If you are using a disk image format such as <a href="../en/QEMU.html#Creating_a_hard_disk_image" title="QEMU">qcow2</a> which has a specified virtual capacity, but only stores what is needed, then you need to have space on the host partition for the image to grow. If you see I/O related errors when attempting to start the VM, it's possible that the host partition holding the virtual disk image is full. You can run <code>df -h</code> on the host to verify how much free space is available.
</p>
<p>If this is the case, see <a href="../en/System_maintenance.html#Clean_the_filesystem" title="System maintenance">System maintenance#Clean the filesystem</a> for ways to free up space.
</p>
<h3><span class="mw-headline" id="Redirect_USB_Device_is_greyed_out_in_virt-manager">Redirect USB Device is greyed out in virt-manager</span></h3>
<p>If the <i>Redirect USB Device</i> menu item is greyed out, check that the following hardware is configured for the VM:
</p>
<ul>
<li>A USB Controller.</li>
<li>One or more USB Redirectors.</li>
</ul>
<h3><span class="mw-headline" id="Error_starting_domain:_Requested_operation_is_not_valid">Error starting domain: Requested operation is not valid</span></h3>
<p>When you try to open a virtual machine this error may pop up. This is because when you try to open a existing virtual machine libvirt tries to search for the default network which is not available. To make it available you have to autostart your network interface so that whenever your restart your computer your network interface is always active. See <a rel="nofollow" class="external text" href="https://wiki.libvirt.org/page/Networking">libvirt networking page</a>.
</p>
<p>Look at the name of your network interface with the following command:
</p>
<pre># virsh net-list --all
</pre>
<p>To autostart your network interface:
</p>
<pre># virsh net-autostart <i>name_of_the_network</i>
</pre>
<p>To start your network interface:
</p>
<pre># virsh net-start <i>name_of_the_network</i>
</pre>
<h3>
<span id="Virt_Manager_Error_.27Virt_Manager_doesn.27t_have_search_permissions.27"></span><span class="mw-headline" id="Virt_Manager_Error_'Virt_Manager_doesn't_have_search_permissions'">Virt Manager Error 'Virt Manager doesn't have search permissions'</span>
</h3>
<p>Ensure the folder containing your virtual machine files and installation ISO are owned by the <code>libvirt-qemu</code> group
</p>
<pre>$ sudo chown -R $USER:libvirt-qemu /path/to/virtual/machine
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://libvirt.org/drvqemu.html">Official libvirt web site</a></li>
<li><a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Virtualization_Deployment_and_Administration_Guide/index.html">Red Hat  Virtualization Deployment and Administration Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Virtualization_Tuning_and_Optimization_Guide/index.html">Red Hat Virtualization Tuning and Optimization Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://docs.slackware.com/howtos:general_admin:kvm_libvirt">Slackware KVM and libvirt</a></li>
<li><a rel="nofollow" class="external text" href="https://www-01.ibm.com/support/knowledgecenter/linuxonibm/liaat/liaatkvm.htm">IBM KVM</a></li>
<li><a rel="nofollow" class="external text" href="https://jamielinux.com/docs/libvirt-networking-handbook/">libvirt Networking Handbook</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Libvirt&amp;oldid=810960">https://wiki.archlinux.org/index.php?title=Libvirt&amp;oldid=810960</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 June 2024, at 13:04.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
