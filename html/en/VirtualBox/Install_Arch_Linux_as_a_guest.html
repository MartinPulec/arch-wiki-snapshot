<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>VirtualBox/Install Arch Linux as a guest - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-VirtualBox_Install_Arch_Linux_as_a_guest rootpage-VirtualBox skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Installation_in_EFI_mode_(optional)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installation_in_EFI_mode_(optional)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Installation in EFI mode (optional)</div>
			</a>
			
			<ul id="toc-Installation_in_EFI_mode_(optional)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Install_the_Guest_Additions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Install_the_Guest_Additions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Install the Guest Additions</div>
			</a>
			
			<ul id="toc-Install_the_Guest_Additions-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Load_the_VirtualBox_kernel_modules" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Load_the_VirtualBox_kernel_modules">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Load the VirtualBox kernel modules</div>
			</a>
			
			<ul id="toc-Load_the_VirtualBox_kernel_modules-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Set_optimal_framebuffer_resolution" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Set_optimal_framebuffer_resolution">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Set optimal framebuffer resolution</div>
			</a>
			
			<ul id="toc-Set_optimal_framebuffer_resolution-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Launch_the_VirtualBox_guest_services" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Launch_the_VirtualBox_guest_services">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Launch the VirtualBox guest services</div>
			</a>
			
			<ul id="toc-Launch_the_VirtualBox_guest_services-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Auto-resize_Guest_Display" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Auto-resize_Guest_Display">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Auto-resize Guest Display</div>
			</a>
			
			<ul id="toc-Auto-resize_Guest_Display-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hardware_acceleration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hardware_acceleration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.5</span>Hardware acceleration</div>
			</a>
			
			<ul id="toc-Hardware_acceleration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_shared_folders" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_shared_folders">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6</span>Enable shared folders</div>
			</a>
			
			<ul id="toc-Enable_shared_folders-sublist" class="vector-toc-list">
				<li id="toc-Manual_mounting" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Manual_mounting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.1</span>Manual mounting</div>
			</a>
			
			<ul id="toc-Manual_mounting-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Automounting" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Automounting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.2</span>Automounting</div>
			</a>
			
			<ul id="toc-Automounting-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mount_at_boot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Mount_at_boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6.3</span>Mount at boot</div>
			</a>
			
			<ul id="toc-Mount_at_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Access_serial_port_from_guest" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Access_serial_port_from_guest">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Access serial port from guest</div>
			</a>
			
			<ul id="toc-Access_serial_port_from_guest-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-TTY_text_too_small_during_installation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#TTY_text_too_small_during_installation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>TTY text too small during installation</div>
			</a>
			
			<ul id="toc-TTY_text_too_small_during_installation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Guest_freezes_after_starting_Xorg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Guest_freezes_after_starting_Xorg">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Guest freezes after starting Xorg</div>
			</a>
			
			<ul id="toc-Guest_freezes_after_starting_Xorg-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fullscreen_mode_shows_blank_screen" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fullscreen_mode_shows_blank_screen">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Fullscreen mode shows blank screen</div>
			</a>
			
			<ul id="toc-Fullscreen_mode_shows_blank_screen-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Linux_guests_have_slow/distorted_audio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Linux_guests_have_slow/distorted_audio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Linux guests have slow/distorted audio</div>
			</a>
			
			<ul id="toc-Linux_guests_have_slow/distorted_audio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Linux_guests_have_slow/laggy_audio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Linux_guests_have_slow/laggy_audio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Linux guests have slow/laggy audio</div>
			</a>
			
			<ul id="toc-Linux_guests_have_slow/laggy_audio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Arch:_pacstrap_script_fails" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Arch:_pacstrap_script_fails">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Arch: pacstrap script fails</div>
			</a>
			
			<ul id="toc-Arch:_pacstrap_script_fails-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Windows_host:_VERR_ACCESS_DENIED" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Windows_host:_VERR_ACCESS_DENIED">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>Windows host: VERR_ACCESS_DENIED</div>
			</a>
			
			<ul id="toc-Windows_host:_VERR_ACCESS_DENIED-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_hardware_3D_acceleration_in_Arch_Linux_guest" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_hardware_3D_acceleration_in_Arch_Linux_guest">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.9</span>No hardware 3D acceleration in Arch Linux guest</div>
			</a>
			
			<ul id="toc-No_hardware_3D_acceleration_in_Arch_Linux_guest-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Plasma_resets_guest's_resolution_to_800×600" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Plasma_resets_guest's_resolution_to_800%C3%97600">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.10</span>Plasma resets guest's resolution to 800×600</div>
			</a>
			
			<ul id="toc-Plasma_resets_guest's_resolution_to_800×600-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Black_screen_with_Plasma-X11_minimal_install" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Black_screen_with_Plasma-X11_minimal_install">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.11</span>Black screen with Plasma-X11 minimal install</div>
			</a>
			
			<ul id="toc-Black_screen_with_Plasma-X11_minimal_install-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">VirtualBox/Install Arch Linux as a guest</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/VirtualBox/Arch_Linux_%E3%82%92%E3%82%B2%E3%82%B9%E3%83%88%E3%81%AB%E3%81%99%E3%82%8B" title="VirtualBox/Arch Linux をゲストにする – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../../pt/VirtualBox/Install_Arch_Linux_as_a_guest.html" title="VirtualBox (Português)/Install Arch Linux as a guest – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/VirtualBox/Install_Arch_Linux_as_a_guest" title="VirtualBox/Install Arch Linux as a guest – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../en/VirtualBox.html" title="VirtualBox">VirtualBox</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../../en/VirtualBox.html" title="VirtualBox">VirtualBox</a></li>
</ul>
</div>
<p>This article is about installing Arch Linux in <a href="../../en/VirtualBox.html" title="VirtualBox">VirtualBox</a>.
</p>
<p>Boot the Arch installation media through one of the virtual machine's virtual drives. Then, complete the installation of a basic Arch system as explained in the <a href="../../en/Installation_guide.html" title="Installation guide">Installation guide</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<h3>
<span id="Installation_in_EFI_mode_.28optional.29"></span><span class="mw-headline" id="Installation_in_EFI_mode_(optional)">Installation in EFI mode (optional)</span>
</h3>
<p>Enabling EFI for Arch as guest is optional. If you want to install Arch Linux in EFI mode inside VirtualBox, you must change the firmware mode for the virtual machine. This must be done before installing Arch as guest, changing the option afterwards will result in an unbootable machine unless the setting is reverted.
</p>
<p>To enable EFI for a virtual machine using the graphical interface, open the settings of the virtual machine, choose <i>System</i> item from the panel on the left and <i>Motherboard</i> tab from the right panel, and check the checkbox <i>Enable EFI (special OSes only)</i>.
</p>
<p>Alternatively the same can be accomplished from the command line using <i>VBoxManage</i>:
</p>
<pre>$ VBoxManage modifyvm "<i>Virtual machine name</i>" --firmware efi
</pre>
<p><code>efi</code> will set the firmware for the virtual machine to EFI with the <a href="../../en/Unified_Extensible_Firmware_Interface.html#UEFI_firmware_bitness" title="Unified Extensible Firmware Interface">bitness</a> matching the virtual machine's CPU. To get a specific EFI bitness, set the firmware to <code>efi64</code> for x86_64 EFI or <code>efi32</code> for IA32 EFI.
</p>
<p>After selecting the kernel from the Arch Linux installation media's menu, the media will hang for a minute or two and will continue to boot the kernel normally afterwards. Be patient.
</p>
<h3><span class="mw-headline" id="Install_the_Guest_Additions">Install the Guest Additions</span></h3>
<p>VirtualBox <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html">Guest Additions</a> provides drivers and applications that optimize the guest operating system including improved image resolution and better control of the mouse. Within the installed guest system, <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a>:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-utils">virtualbox-guest-utils</a></span> for VirtualBox Guest utilities with X support</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-utils-nox">virtualbox-guest-utils-nox</a></span> for VirtualBox Guest utilities without X support</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>You can alternatively install the Guest Additions with the ISO from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-iso">virtualbox-guest-iso</a></span> package, provided you installed this on the host system. To do this, go to the device menu click Insert Guest Additions CD Image.</li>
<li>To recompile the vbox kernel modules, run <code>rcvboxadd setup</code> as root.</li>
</ul>
</div>
<p>The guest additions running on your guest, and the VirtualBox application running on your host must have matching versions, otherwise the guest additions (like shared clipboard) may stop working. If you upgrade your guest (e.g. <code>pacman -Syu</code>), make sure your VirtualBox application on this host is also the latest version. "Check for updates" in the VirtualBox GUI is sometimes not sufficient; check the <a rel="nofollow" class="external text" href="https://www.virtualbox.org/">VirtualBox.org</a> website.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Load_the_VirtualBox_kernel_modules">Load the VirtualBox kernel modules</span></h3>
<p>To load the modules automatically, <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>vboxservice.service</code> which loads the modules and synchronizes the guest's system time with the host.
</p>
<p>To load the modules manually, type:
</p>
<pre># modprobe -a vboxguest vboxsf vboxvideo
</pre>
<h3><span class="mw-headline" id="Set_optimal_framebuffer_resolution">Set optimal framebuffer resolution</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../../en/VirtualBox.html#Set_guest_starting_resolution" class="mw-redirect" title="VirtualBox/Tips and tricks">VirtualBox/Tips and tricks#Set guest starting resolution</a>.</b></p>
<div>
<b>Notes:</b> Keep guest resolution information in one place. (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:VirtualBox/Install_Arch_Linux_as_a_guest.html">Talk:VirtualBox/Install Arch Linux as a guest</a>)</div>
</div>
<p>Typically after installing Guest Additions, a fullscreen Arch guest running X will be set to the optimal resolution for your display; however, the virtual console's framebuffer will be set to a standard, often smaller, resolution detected from VirtualBox's custom VESA driver.
</p>
<p>To use the virtual consoles at optimal resolution, Arch needs to recognize that resolution as valid, which in turn requires VirtualBox to pass this information along to the guest OS.
</p>
<p>First, check if your desired resolution is not already recognized by running the command (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hwinfo">hwinfo</a></span> need to be installed):
</p>
<pre>hwinfo --framebuffer
</pre>
<p>If the optimal resolution does not show up, then you will need to run the <code>VBoxManage</code> tool on the host machine and add "extra resolutions" to your virtual machine (on a Windows host, go to the VirtualBox installation directory to find <code>VBoxManage.exe</code>). For example:
</p>
<pre>$ VBoxManage setextradata "Arch Linux" "CustomVideoMode1" "1360x768x24"
</pre>
<p>The parameters "Arch Linux" and "1360x768x24" in the example above should be replaced with your VM name and the desired framebuffer resolution. Incidentally, this command allows for defining up to 16 extra resolutions ("CustomVideoMode1" through "CustomVideoMode16").
</p>
<p>Afterwards, restart the virtual machine and run <code>hwinfo --framebuffer</code> once more to verify that the new resolutions have been recognized by your guest system (which does not guarantee they will all work, depending on your hardware limitations).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> As of VirtualBox 5.2, <code>hwinfo --framebuffer</code> might not show any output, but you should still be able to set a custom resolution following this procedure.</div>
<p>Finally, add a <code>video=<i>resolution</i></code> <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> to set the framebuffer to the new resolution, for example:
</p>
<pre>video=1360x768
</pre>
<p>Additionally you may want to configure your <a href="../../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> to use the same resolution. If you use GRUB, see <a href="../../en/GRUB/Tips_and_tricks.html#Setting_the_framebuffer_resolution" title="GRUB/Tips and tricks">GRUB/Tips and tricks#Setting the framebuffer resolution</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Neither the kernel parameter <code>vga</code> nor the boot loader's resolution settings (e.g. GRUB's <code>GRUB_GFXPAYLOAD_LINUX</code>) will fix the framebuffer, since they are overriden by virtue of Kernel Mode Setting. The framebuffer resolution must be set by the kernel parameter <code>video</code> as described above.</div>
<h3><span class="mw-headline" id="Launch_the_VirtualBox_guest_services">Launch the VirtualBox guest services</span></h3>
<p>After the rather big installation step dealing with VirtualBox kernel modules, now you need to start the guest services. The guest services are actually just a binary executable called <code>VBoxClient</code> which will interact with your X Window System. <code>VBoxClient</code> manages the following features:
</p>
<ul>
<li>shared clipboard and drag and drop between the host and the guest;</li>
<li>seamless window mode;</li>
<li>the guest display is automatically resized according to the size of the guest window;</li>
<li>checking the VirtualBox host version</li>
</ul>
<p>All of these features can be enabled independently with their dedicated flags:
</p>
<pre>$ VBoxClient --clipboard
$ VBoxClient --draganddrop
$ VBoxClient --seamless
$ VBoxClient --checkhostversion
$ VBoxClient --vmsvga
</pre>
<p>Notice that <code>VBoxClient</code> can only be called with one flag at a time, each call spawning a dedicated service process. As a shortcut, the <code>VBoxClient-all</code> bash script enables all of these features.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-utils">virtualbox-guest-utils</a></span> installs <code>/etc/xdg/autostart/vboxclient.desktop</code> that launches <code>VBoxClient-all</code> on logon. If your <a href="../../en/Desktop_environment.html" title="Desktop environment">desktop environment</a> or <a href="../../en/Window_manager.html" title="Window manager">window manager</a> does not support <a href="../../en/XDG_Autostart.html" title="XDG Autostart">XDG Autostart</a>, you will need to set up autostarting yourself, see <a href="../../en/Autostarting.html#On_desktop_environment_startup" title="Autostarting">Autostarting#On desktop environment startup</a> and <a href="../../en/Autostarting.html#On_window_manager_startup" title="Autostarting">Autostarting#On window manager startup</a> for more details.
</p>
<p>VirtualBox can also synchronize the time between the host and the guest, to do this, <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> the <code>vboxservice.service</code>.
</p>
<p>Now, you should have a working Arch Linux guest. Note that features like clipboard sharing are disabled by default in VirtualBox, and you will need to turn them on in the per-VM settings if you actually want to use them (e.g. <i>Settings &gt; General &gt; Advanced &gt; Shared Clipboard</i>).
</p>
<h3><span class="mw-headline" id="Auto-resize_Guest_Display">Auto-resize Guest Display</span></h3>
<p>This option will automatically change the resolution of the Arch guest, whenever the window of the virtual machine is resized. This option is enabled by default, and in graphical interface is located at <i>View &gt; Auto-resize Guest Display</i>. When using KDE Plasma, on GUI login screen (Session) select <i>Plasma (X11)</i> instead of the default session <i>Plasma (Wayland)</i>, which does not work with auto-resize.
</p>
<h3><span class="mw-headline" id="Hardware_acceleration">Hardware acceleration</span></h3>
<p>Hardware acceleration can be activated in the VirtualBox options. The <a href="../../en/GDM.html" title="GDM">GDM</a> display manager 3.16+ is known to break hardware acceleration support. <a rel="nofollow" class="external autonumber" href="https://bugzilla.gnome.org/show_bug.cgi?id=749390">[1]</a> So if you get issues with hardware acceleration, try out another display manager (lightdm seems to work fine). <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=200025">[2]</a> <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1607593#p1607593">[3]</a>
</p>
<p>If the hardware acceleration does not work as expected, try changing the <i>Graphics Controller</i> option found under the <i>Screen</i> tab in the <i>Display</i> options of the settings GUI. It seems that depending on the host GPU type, not all emulated controllers work equally well.
</p>
<h3><span class="mw-headline" id="Enable_shared_folders">Enable shared folders</span></h3>
<p>Shared folders are managed on the host, in the settings of the Virtual Machine accessible via the GUI of VirtualBox, in the <i>Shared Folders</i> tab. There, <i>Folder Path</i>, the name of the mount point identified by <i>Folder name</i>, and options like <i>Read-only</i>, <i>Auto-mount</i> and <i>Make permanent</i> can be specified. These parameters can be defined with the <code>VBoxManage</code> command line utility. See <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html#sharedfolders">there for more details</a>.
</p>
<p>No matter which method you will use to mount your folder, all methods require some steps first.
</p>
<p>To avoid this issue <code>/sbin/mount.vboxsf: mounting failed with the error: No such device</code>, make sure the <code>vboxsf</code> kernel module is properly loaded. It should be, since we enabled all guest kernel modules previously.
</p>
<p>Two additional steps are needed in order for the mount point to be accessible from users other than root:
</p>
<ul>
<li>the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-utils">virtualbox-guest-utils</a></span> package created a group <code>vboxsf</code> (done in a previous step);</li>
<li>your user must be in <code>vboxsf</code> <a href="../../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">user group</a>.</li>
</ul>
<h4><span class="mw-headline" id="Manual_mounting">Manual mounting</span></h4>
<p>Use the following command to mount your folder in your Arch Linux guest:
</p>
<pre># mount -t vboxsf -o gid=vboxsf <i>shared_folder_name</i> <i>mount_point_on_guest_system</i>
</pre>
<p>where <code><i>shared_folder_name</i></code> is the <i>Folder name</i> assigned by the hypervisor when the share was created.
</p>
<p>If the user is not in the <i>vboxsf</i> group, to give them access to our mountpoint we can specify the <span class="plainlinks archwiki-template-man" title="$ man 8 mount"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mount.8">mount(8)</a></span> options <code>uid=</code> and <code>gid=</code> with the corresponding values of the user. These values can obtained from the <code>id</code> command run against this user. For example:
</p>
<pre># mount -t vboxsf -o uid=1000,gid=1000 home /mnt
</pre>
<h4><span class="mw-headline" id="Automounting">Automounting</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Automounting requires the <code>vboxservice.service</code> to be <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enabled">enabled</a>/<a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Started">started</a>.</div>
<p>In order for the automounting feature to work you must have checked the auto-mount checkbox in the GUI or used the optional <code>--automount</code> argument with the command <code>VBoxManage sharedfolder</code>.
</p>
<p>The shared folder should now appear as <code>/media/sf_<i>shared_folder_name</i></code>. If users cannot access the shared folders, check that <code>/media</code> has <a href="../../en/File_permissions_and_attributes.html" class="mw-redirect" title="Permissions">permissions</a> <code>755</code> or is owned by the <code>vboxsf</code> group if using permissions <code>750</code>. This is currently not the default if the <code>/media</code> directory is created by <code>vboxservice.service</code>.
</p>
<p>You can use symlinks if you want to have a more convenient access and avoid to browse in that directory, e.g.:
</p>
<pre>$ ln -s /media/sf_<i>shared_folder_name</i> ~/<i>my_documents</i>
</pre>
<h4><span class="mw-headline" id="Mount_at_boot">Mount at boot</span></h4>
<p>You can mount your directory with <a href="../../en/Fstab.html" title="Fstab">fstab</a>. However, to prevent startup problems with systemd, <code>noauto,x-systemd.automount</code> should be added to <code>/etc/fstab</code>. This way, the shared folders are mounted only when those mount points are accessed and not during startup. This can avoid some problems, especially if the guest additions are not loaded yet when systemd reads fstab and mounts the partitions.
</p>
<pre><i>sharedFolderName</i>  <i>/path/to/mntPtOnGuestMachine</i>  vboxsf  uid=<i>user</i>,gid=<i>group</i>,rw,dmode=700,fmode=600,noauto,x-systemd.automount 
</pre>
<ul>
<li>
<code><i>sharedFolderName</i></code>: the value from the VirtualMachine's <i>Settings &gt; SharedFolders &gt; Edit &gt; FolderName</i> menu. This value can be different from the name of the real folder name on the host machine. To see the VirtualMachine's <i>Settings</i> go to the host OS VirtualBox application, select the corresponding virtual machine and click on <i>Settings</i>.</li>
<li>
<code><i>/path/to/mntPtOnGuestMachine</i></code>: if not existing, this directory should be created manually (for example by using <a href="../../en/Core_utilities.html#Essentials" title="Core utilities">mkdir</a>).</li>
<li>
<code>dmode</code>/<code>fmode</code> are directory/file permissions for directories/files inside <code><i>/path/to/mntPtOnGuestMachine</i></code>.</li>
</ul>
<p>As of 2012-08-02, mount.vboxsf does not support the <code>nofail</code> option:
</p>
<pre><i>desktop</i>  <i>/media/desktop</i>  vboxsf  uid=<i>user</i>,gid=<i>group</i>,rw,dmode=700,fmode=600,nofail  0  0
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Access_serial_port_from_guest">Access serial port from guest</span></h3>
<p>See <a href="../../en/Working_with_the_serial_console.html#Connect_using_a_terminal_emulator_program" title="Working with the serial console">Working with the serial console#Connect using a terminal emulator program</a>.
</p>
<h3><span class="mw-headline" id="TTY_text_too_small_during_installation">TTY text too small during installation</span></h3>
<p>From the host, VirtualBox Manager, set the Display Scale-factor to 2.00 or 3.00.
</p>
<h3><span class="mw-headline" id="Guest_freezes_after_starting_Xorg">Guest freezes after starting Xorg</span></h3>
<p>Faulty or missing drivers may cause the guest to freeze after starting Xorg, see for example <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1167838">[4]</a> and <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=156079">[5]</a>. Try disabling 3D acceleration in <i>Settings &gt; Display</i>, and check if all <a href="../../en/Xorg.html" title="Xorg">Xorg</a> drivers are installed.
</p>
<h3><span class="mw-headline" id="Fullscreen_mode_shows_blank_screen">Fullscreen mode shows blank screen</span></h3>
<p>On some window managers (<a href="../../en/I3.html" title="I3">i3</a>, <a href="../../en/Awesome.html" title="Awesome">awesome</a>), VirtualBox has issues with fullscreen mode properly due to the overlay bar. To work around this issue, disable <i>Show in Full-screen/Seamless</i> option in <i>Guest Settings &gt; User Interface &gt; Mini ToolBar</i>.  See the <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/14323">upstream bug report</a> for more information.
</p>
<p>If the guest's screen goes black above a certain size (e.g. above 2048 pixels wide), increasing the <i>Settings &gt; Display &gt; Screen &gt; Video Memory</i> can help.
</p>
<h3>
<span id="Linux_guests_have_slow.2Fdistorted_audio"></span><span class="mw-headline" id="Linux_guests_have_slow/distorted_audio">Linux guests have slow/distorted audio</span>
</h3>
<p>The AC97 audio driver within the Linux kernel occasionally guesses the wrong clock settings when running inside VirtualBox, leading to audio that is either too slow or too fast. To fix this, create a file in <code>/etc/modprobe.d/</code> with the following line:
</p>
<pre>options snd-intel8x0 ac97_clock=48000
</pre>
<h3>
<span id="Linux_guests_have_slow.2Flaggy_audio"></span><span class="mw-headline" id="Linux_guests_have_slow/laggy_audio">Linux guests have slow/laggy audio</span>
</h3>
<p>In some cases, audio can have laggy performance (for example lag behind video when streaming video online). A possible workaround can be to use the Intel HD Audio controller in VirtualBox and disable its power saving by adding the following line in a file in <code>/etc/modprobe.d/</code> in the guest OS:
</p>
<pre>options snd_hda_intel power_save=0 power_save_controller=N
</pre>
<h3><span class="mw-headline" id="Arch:_pacstrap_script_fails">Arch: pacstrap script fails</span></h3>
<p>If you used <i>pacstrap</i> to also <a href="#Install_the_Guest_Additions">#Install the Guest Additions</a> <b>before</b> performing a first boot into the new guest, you will need to <code>umount -l /mnt/dev</code> as root before using <i>pacstrap</i> again; a failure to do this will render it unusable.
</p>
<h3><span class="mw-headline" id="Windows_host:_VERR_ACCESS_DENIED">Windows host: VERR_ACCESS_DENIED</span></h3>
<p>To access the raw VMDK image on a Windows host, run the VirtualBox GUI as administrator.
</p>
<h3><span class="mw-headline" id="No_hardware_3D_acceleration_in_Arch_Linux_guest">No hardware 3D acceleration in Arch Linux guest</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-utils">virtualbox-guest-utils</a></span> package as of version 5.2.16-2 does not contain the file <code>VBoxEGL.so</code>. This causes the Arch Linux guest to not have proper 3D acceleration. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/49752">FS#49752</a>.
</p>
<p>To deal with this problem, apply the patch set at <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/49752#comment152254">FS#49752#comment152254</a>. Some fix to the patch set is required to make it work for version 5.2.16-2.
</p>
<h3>
<span id="Plasma_resets_guest.27s_resolution_to_800.C3.97600"></span><span class="mw-headline" id="Plasma_resets_guest's_resolution_to_800×600">Plasma resets guest's resolution to 800×600</span>
</h3>
<p>See <a href="../../en/KDE.html#Cannot_change_screen_resolution_when_running_in_a_virtual_machine" title="KDE">KDE#Cannot change screen resolution when running in a virtual machine</a>.
</p>
<h3><span class="mw-headline" id="Black_screen_with_Plasma-X11_minimal_install">Black screen with Plasma-X11 minimal install</span></h3>
<p>If you used <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-desktop">plasma-desktop</a></span> minimal install instead of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/plasma/">plasma</a></span> (which includes Wayland support), then probably you will have black screen with cursor after starting Plasma-X11 session. 
</p>
<p>To fix this, resize the VirtualBox window several times, then set resolution manually in VirtualBox window itself by: <i>View &gt; Virtual Screen 1 &gt; Resize to 1024x768</i> (or other resolution you like).
</p>
<p>Then <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kscreen">kscreen</a></span>. 
</p>
<p>Open in KDE launcher <i>System Settings &gt; Startup and Shutdown &gt; Background Services</i>, stop and unselect <i>KScreen2</i> and save settings. Issue should go away forever.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../../en/Category:Installation_process.html" title="Category:Installation process">Installation process</a></li>
<li><a href="../../en/Category:Hypervisors.html" title="Category:Hypervisors">Hypervisors</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=VirtualBox/Install_Arch_Linux_as_a_guest&amp;oldid=795838">https://wiki.archlinux.org/index.php?title=VirtualBox/Install_Arch_Linux_as_a_guest&amp;oldid=795838</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 2 January 2024, at 09:43.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
