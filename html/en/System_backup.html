<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>System backup - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-System_backup rootpage-System_backup skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Using_Btrfs_snapshots" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_Btrfs_snapshots">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Using Btrfs snapshots</span>
			</div>
		</a>
		
		<ul id="toc-Using_Btrfs_snapshots-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Using_LVM_snapshots" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_LVM_snapshots">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Using LVM snapshots</span>
			</div>
		</a>
		
		<ul id="toc-Using_LVM_snapshots-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Using_rsync" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_rsync">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Using rsync</span>
			</div>
		</a>
		
		<ul id="toc-Using_rsync-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Using_tar" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_tar">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Using tar</span>
			</div>
		</a>
		
		<ul id="toc-Using_tar-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Using_SquashFS" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_SquashFS">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Using SquashFS</span>
			</div>
		</a>
		
		<ul id="toc-Using_SquashFS-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Bootable_backup" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Bootable_backup">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Bootable backup</span>
			</div>
		</a>
		
			<button aria-controls="toc-Bootable_backup-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Bootable backup subsection</span>
			</button>
		
		<ul id="toc-Bootable_backup-sublist" class="vector-toc-list">
			<li id="toc-Update_the_fstab" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Update_the_fstab">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>Update the fstab</span>
				</div>
			</a>
			
			<ul id="toc-Update_the_fstab-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Update_the_boot_loader's_configuration_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Update_the_boot_loader's_configuration_file">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>Update the boot loader's configuration file</span>
				</div>
			</a>
			
			<ul id="toc-Update_the_boot_loader's_configuration_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-First_boot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#First_boot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3</span>
					<span>First boot</span>
				</div>
			</a>
			
			<ul id="toc-First_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Snapshots_and_/boot_partition" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Snapshots_and_/boot_partition">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>Snapshots and /boot partition</span>
			</div>
		</a>
		
		<ul id="toc-Snapshots_and_/boot_partition-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Automation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Automation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Automation</span>
			</div>
		</a>
		
		<ul id="toc-Automation-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">System backup</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/System_backup.html" title="System backup – español" lang="es" hreflang="es" data-title="System backup" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97" title="システムバックアップ – 日本語" lang="ja" hreflang="ja" data-title="システムバックアップ" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/System_backup.html" title="System backup – português" lang="pt" hreflang="pt" data-title="System backup" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/System_backup" title="System backup – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="System backup" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Synchronization_and_backup_programs.html" title="Synchronization and backup programs">Synchronization and backup programs</a></li>
<li><a href="../en/System_maintenance.html#Backup" title="System maintenance">System maintenance#Backup</a></li>
<li><a href="../en/Data-at-rest_encryption.html#Backup_for_disk_encryption_scenarios" title="Data-at-rest encryption">Data-at-rest encryption#Backup for disk encryption scenarios</a></li>
<li><a href="../en/Disk_cloning.html" title="Disk cloning">Disk cloning</a></li>
<li><a href="../en/Migrate_installation_to_new_hardware.html" title="Migrate installation to new hardware">Migrate installation to new hardware</a></li>
<li><a href="../en/File_recovery.html" title="File recovery">File recovery</a></li>
</ul>
</div>
<p>A system backup is <q>the process of backing up the operating system, files and system-specific useful/essential data. [It] primarily ensures that not only the user data in a system is saved, but also the system's state or operational condition. This helps in restoring the system to the last-saved state along with all the selected backup data.</q><a rel="nofollow" class="external autonumber" href="https://www.techopedia.com/definition/29387/system-backup">[1]</a>
</p>
<p>One common and generally effective method is to follow the 3-2-1 strategy:
</p>
<ul>
<li>Maintain three copies of your data,</li>
<li>Use two different types of storage media,</li>
<li>Store one copy offsite.</li>
</ul>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Using_Btrfs_snapshots">Using Btrfs snapshots</span></h2>
<p>See <a href="../en/Btrfs.html#Snapshots" title="Btrfs">Btrfs#Snapshots</a>, <a href="#Snapshots_and_/boot_partition">#Snapshots and /boot partition</a>, and <a href="../en/Snapper.html" title="Snapper">Snapper</a>.
</p>
<h2><span class="mw-headline" id="Using_LVM_snapshots">Using LVM snapshots</span></h2>
<p>See <a href="../en/LVM.html#Snapshots" title="LVM">LVM#Snapshots</a>, <a href="../en/Create_root_filesystem_snapshots_with_LVM.html" title="Create root filesystem snapshots with LVM">Create root filesystem snapshots with LVM</a>, and <a href="#Snapshots_and_/boot_partition">#Snapshots and /boot partition</a>.
</p>
<h2><span class="mw-headline" id="Using_rsync">Using rsync</span></h2>
<p>See <a href="../en/Rsync.html#As_a_backup_utility" title="Rsync">rsync#As a backup utility</a>.
</p>
<h2><span class="mw-headline" id="Using_tar">Using tar</span></h2>
<p>See <a href="../en/Full_system_backup_with_tar.html" title="Full system backup with tar">Full system backup with tar</a>.
</p>
<h2><span class="mw-headline" id="Using_SquashFS">Using SquashFS</span></h2>
<p>See <a href="../en/Full_system_backup_with_SquashFS.html" title="Full system backup with SquashFS">Full system backup with SquashFS</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> SquashFS does not support <a href="../en/Access_Control_Lists.html" class="mw-redirect" title="ACL">ACLs</a>.</div>
<h2><span class="mw-headline" id="Bootable_backup">Bootable backup</span></h2>
<p>Having a bootable backup can be useful in case the filesystem becomes corrupt or if an update breaks the system. The backup can also be used as a test bed for updates, with the <i>testing</i> repo enabled, etc. If you transferred the system to a different partition or drive and you want to boot it, the process is as simple as updating the backup's <code>/etc/fstab</code> and your boot loader's configuration file.
</p>
<p>This section assumes that you backed up the system to another drive or partition, that your current boot loader is working fine, and that you want to boot from the backup as well.
</p>
<h3><span class="mw-headline" id="Update_the_fstab">Update the fstab</span></h3>
<p>Without rebooting, edit the backup's <a href="../en/Fstab.html" title="Fstab">fstab</a> by commenting out or removing any existing entries. Add one entry for the partition containing the backup like the example here:
</p>
<pre>/dev/sda<i>X</i>    /             <i>ext4</i>      defaults                 0   1
</pre>
<p>Remember to use the proper device name and filesystem type.
</p>
<h3>
<span id="Update_the_boot_loader.27s_configuration_file"></span><span class="mw-headline" id="Update_the_boot_loader's_configuration_file">Update the boot loader's configuration file</span>
</h3>
<p>For <a href="../en/Syslinux.html" title="Syslinux">Syslinux</a>, all you need to do is duplicate the current entry, except pointing to a different drive or partition.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Instead of editing <code>syslinux.cfg</code>, you can also temporarily edit the menu during boot. When the menu shows up, press the <code>Tab</code> key and change the relevant entries. Partitions are counted from one, drives are counted from zero.</div>
<p>For <a href="../en/GRUB.html" title="GRUB">GRUB</a>, it is recommended that you automatically <a href="../en/GRUB.html#Generate_the_main_configuration_file" title="GRUB">re-generate the main configuration file</a>.  If you want to freshly install all GRUB files to somewhere other than <code>/boot</code>, such as <code>/mnt/newroot/boot</code>, use the <code>--boot-directory</code> flag.
</p>
<p>Also verify the new menu entry in <code>/boot/grub/grub.cfg</code>. Make sure the UUID is matching the new partition, otherwise it could still boot the old system. Find the UUID of a partition with <a href="../en/Device_file.html#lsblk" class="mw-redirect" title="Lsblk">lsblk</a>:
</p>
<pre>$ lsblk -no NAME,UUID /dev/sd<i>XY</i>
</pre>
<p>where <code>/dev/sd<i>XY</i></code> is the desired partition (e.g. <code>/dev/sdb3</code>). To list the UUIDs of partitions GRUB thinks it can boot, use <i>grep</i>:
</p>
<pre># grep UUID= /boot/grub/grub.cfg
</pre>
<h3><span class="mw-headline" id="First_boot">First boot</span></h3>
<p>Reboot the computer and select the right entry in the boot loader. This will load the system for the first time. All peripherals should be detected and the empty folders in <code>/</code> will be populated.
</p>
<p>Now you can re-edit <code>/etc/fstab</code> to add the previously removed partitions and mount points.
</p>
<h2>
<span id="Snapshots_and_.2Fboot_partition"></span><span class="mw-headline" id="Snapshots_and_/boot_partition">Snapshots and /boot partition</span>
</h2>
<p>If your <a href="../en/File_systems.html" class="mw-redirect" title="File system">file system</a> supports snapshots (e.g., <a href="../en/LVM.html#Snapshots" title="LVM">LVM</a> or <a href="../en/Btrfs.html#Snapshots" title="Btrfs">Btrfs</a>), these will most likely exclude the <code>/boot</code> partition or <a href="../en/EFI_system_partition.html" class="mw-redirect" title="ESP">ESP</a>.
</p>
<p>You can copy the boot partition automatically on a kernel update to your <code>root</code> partition with a <a href="../en/Pacman.html#Hooks" class="mw-redirect" title="Pacman hook">pacman hook</a> (make sure the hook file is owned by root):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/55-bootbackup_pre.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Upgrade
Operation = Install
Operation = Remove
Type = Path
Target = usr/lib/modules/*/vmlinuz

[Action]
Depends = rsync
Description = Backing up pre /boot...
When = PreTransaction
Exec = /usr/bin/bash -c 'rsync -a --mkpath --delete /boot/ "/.bootbackup/$(date +%Y_%m_%d_%H.%M.%S)_pre"/'</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/95-bootbackup_post.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Upgrade
Operation = Install
Operation = Remove
Type = Path
Target = usr/lib/modules/*/vmlinuz

[Action]
Depends = rsync
Description = Backing up post /boot...
When = PostTransaction
Exec = /usr/bin/bash -c 'rsync -a --mkpath --delete /boot/ "/.bootbackup/$(date +%Y_%m_%d_%H.%M.%S)_post"/'</pre>
<p><br>
</p>
<h2><span class="mw-headline" id="Automation">Automation</span></h2>
<p>Backups that are only manually created are rarely up to date when they are needed. Therefore it is recommended to setup an automated process to ensure backup processes are executed regularly. The most common solutions are provided by <a href="../en/Systemd/Timers.html" title="Systemd/Timers">systemd/Timers</a> and <a href="../en/Cron.html" title="Cron">Cron</a>.
</p>
<p>For a local system wide backup that requires read access to all files the following systemd timer and service may be useful as a template for automated backup processes.
</p>
<p>To use a <i>timer</i> unit <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> it like any other unit.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/backup.timer</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Timer for backups

[Timer]
OnCalendar=weekly
Persistent=true
Unit=backup.service

[Install]
WantedBy=timers.target</pre>
<p>The following example is configured to run with minimal required permissions while preventing modifications from normal users for increased security.
</p>
<p>Note that this example will block the shutdown process when it is initiated while the backup is running. This ensures that the backup is not interrupted, but can lead to a delay during shutdown/reboot if many new files need to be saved.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/backup.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Backup system

[Service]
Type=simple
User=<i>backupuser</i>

AmbientCapabilities=CAP_DAC_READ_SEARCH
CapabilityBoundingSet=CAP_DAC_READ_SEARCH
DevicePolicy=closed
LockPersonality=yes
MemoryDenyWriteExecute=yes
NoNewPrivileges=yes
PrivateDevices=yes
PrivateTmp=yes
ProtectClock=yes
ProtectControlGroups=yes
ProtectHome=read-only
ProtectHostname=yes
ProtectKernelLogs=yes
ProtectKernelModules=yes
ProtectKernelTunables=yes
ProtectProc=invisible
ProtectSystem=full
RemoveIPC=yes
RestrictAddressFamilies=AF_UNIX
RestrictNamespaces=yes
RestrictRealtime=yes
RestrictSUIDSGID=yes
SystemCallFilter=@system-service
UMask=7007

ExecStart=/usr/local/bin/backup.sh
ExecStop=bash -c 'if [ -n "$MAINPID" ]; then tail --pid="$MAINPID" -f /dev/null; fi'</pre>
<p><code>CAP_DAC_READ_SEARCH</code> sets the capability that allows bypassing file read permission checks in the file system; thus all files in the file system will be accessible without requiring root permissions.
</p>
<p>For remote backups allow the use of network protocols:
</p>
<pre>RestrictAddressFamilies=AF_UNIX AF_INET AF_INET6
</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Backup.html" title="Category:Backup">Backup</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=System_backup&amp;oldid=832726">https://wiki.archlinux.org/index.php?title=System_backup&amp;oldid=832726</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 26 April 2025, at 08:06.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
