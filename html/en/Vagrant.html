<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Vagrant - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Vagrant rootpage-Vagrant skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Plugins" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Plugins">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Plugins</div>
		</a>
		
			<button aria-controls="toc-Plugins-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Plugins subsection</span>
			</button>
		
		<ul id="toc-Plugins-sublist" class="vector-toc-list">
			<li id="toc-vagrant-libvirt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#vagrant-libvirt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>vagrant-libvirt</div>
			</a>
			
			<ul id="toc-vagrant-libvirt-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-vagrant-lxc" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#vagrant-lxc">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>vagrant-lxc</div>
			</a>
			
			<ul id="toc-vagrant-lxc-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Provisioning" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Provisioning">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Provisioning</div>
		</a>
		
		<ul id="toc-Provisioning-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Base_Boxes_for_Vagrant" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Base_Boxes_for_Vagrant">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Base Boxes for Vagrant</div>
		</a>
		
		<ul id="toc-Base_Boxes_for_Vagrant-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-No_ping_between_host_and_vagrant_box_(host-only_networking)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_ping_between_host_and_vagrant_box_(host-only_networking)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>No ping between host and vagrant box (host-only networking)</div>
			</a>
			
			<ul id="toc-No_ping_between_host_and_vagrant_box_(host-only_networking)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Virtual_machine_is_not_network_accessible_from_the_Arch_host_OS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Virtual_machine_is_not_network_accessible_from_the_Arch_host_OS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Virtual machine is not network accessible from the Arch host OS</div>
			</a>
			
			<ul id="toc-Virtual_machine_is_not_network_accessible_from_the_Arch_host_OS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-'vagrant_up'_hangs_on_NFS_mounting_(Mounting_NFS_shared_folders...)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#'vagrant_up'_hangs_on_NFS_mounting_(Mounting_NFS_shared_folders...)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>'vagrant up' hangs on NFS mounting (Mounting NFS shared folders...)</div>
			</a>
			
			<ul id="toc-'vagrant_up'_hangs_on_NFS_mounting_(Mounting_NFS_shared_folders...)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mounting_NFS_shared_folders:_mount.nfs:_requested_NFS_version_or_transport_protocol_is_not_supported" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mounting_NFS_shared_folders:_mount.nfs:_requested_NFS_version_or_transport_protocol_is_not_supported">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Mounting NFS shared folders: mount.nfs: requested NFS version or transport protocol is not supported</div>
			</a>
			
			<ul id="toc-Mounting_NFS_shared_folders:_mount.nfs:_requested_NFS_version_or_transport_protocol_is_not_supported-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error_starting_network_'default':_internal_error:_Failed_to_initialize_a_valid_firewall_backend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Error_starting_network_'default':_internal_error:_Failed_to_initialize_a_valid_firewall_backend">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Error starting network 'default': internal error: Failed to initialize a valid firewall backend</div>
			</a>
			
			<ul id="toc-Error_starting_network_'default':_internal_error:_Failed_to_initialize_a_valid_firewall_backend-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unable_to_ssh_to_vagrant_guest" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unable_to_ssh_to_vagrant_guest">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>Unable to ssh to vagrant guest</div>
			</a>
			
			<ul id="toc-Unable_to_ssh_to_vagrant_guest-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Could_not_get_preferred_machine_for_domain" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Could_not_get_preferred_machine_for_domain">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>Could not get preferred machine for domain</div>
			</a>
			
			<ul id="toc-Could_not_get_preferred_machine_for_domain-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Vagrant</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Vagrant" title="Vagrant – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Docker.html" title="Docker">Docker</a></li>
<li><a href="../en/KVM.html" title="KVM">KVM</a></li>
<li><a href="../en/Libvirt.html" title="Libvirt">Libvirt</a></li>
<li><a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.vagrantup.com">Vagrant</a> is a tool for managing and configuring virtualised development environments.
</p>
<p>Vagrant has a concept of 'providers', which map to the virtualisation engine and its API. The most popular and well-supported provider is Virtualbox; <a href="#Plugins">plugins</a> exist for <code>libvirt</code>, <code>lxc</code>, <code>vmware</code> and more.
</p>
<p>Vagrant uses a mostly declarative <code>Vagrantfile</code> to define virtualised machines. A single Vagrantfile can define multiple machines.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vagrant">vagrant</a></span> package.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Vagrant is configured with <a href="../en/Environment_variables.html" title="Environment variables">environment variables</a>. See the full list of options in <a rel="nofollow" class="external text" href="https://developer.hashicorp.com/vagrant/docs/other/environmental-variables">the official documentation</a>.
</p>
<p>For example, to change the location where vagrant stores it's "potentially large" files, set <code>VAGRANT_HOME</code> to a suitable directory. (The default is <code>~/.vagrant.d</code>).
</p>
<h2><span class="mw-headline" id="Plugins">Plugins</span></h2>
<p>Vagrant has a middleware architecture providing support for powerful <a rel="nofollow" class="external text" href="https://www.vagrantup.com/docs/plugins/">plugins</a>.
</p>
<p>Plugins can be installed with Vagrant's built-in plugin manager. You can specify multiple plugins to install:
</p>
<pre>$ vagrant plugin install vagrant-vbguest vagrant-share
</pre>
<h3><span class="mw-headline" id="vagrant-libvirt">vagrant-libvirt</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The <a href="../en/Libvirt.html" title="Libvirt">libvirt</a> plugin is not compatible with the <a href="../en/Ruby.html" title="Ruby">ruby</a> gems as currently shipped with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vagrant">vagrant</a></span> package in the Arch repos (which are up-to-date). This might cause an error such as <code>Vagrant failed to properly resolve required dependencies</code>.
<p>An alternative in order to use this plugin without such issues, is to use the container image via either Podman or Docker, as shown in the official documentation <a rel="nofollow" class="external autonumber" href="https://vagrant-libvirt.github.io/vagrant-libvirt/installation.html#docker--podman">[1]</a>. 
</p>
</div>
<p>This plugin adds a <a href="../en/Libvirt.html" title="Libvirt">libvirt</a> provider to Vagrant. <a href="../en/Libvirt.html" title="Libvirt">libvirt</a> and related packages (e.g. <a href="../en/QEMU.html" title="QEMU">QEMU</a>) must be installed and configured before using the provider.
</p>
<p>To install the plugin, make sure <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base-devel">base-devel</a></span> is installed and <code>libvirtd.service</code> has been <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Started">started</a>.
Then run
</p>
<pre>$ vagrant plugin install vagrant-libvirt
</pre>
<p>Once the plugin is installed, the <code>libvirt</code> provider will be available:
</p>
<pre>$ vagrant up --provider=libvirt
</pre>
<p>If you have issues with dependency mismatch, the following environment variable can be set to ignore gem versions.
</p>
<pre>export VAGRANT_DISABLE_STRICT_DEPENDENCY_ENFORCEMENT=1
</pre>
<p>If you have issues building ruby-libvirt, try the following (replace lib with lib64 as needed):
</p>
<pre>$ CONFIGURE_ARGS='with-ldflags=-L/opt/vagrant/embedded/lib with-libvirt-include=/usr/include/libvirt with-libvirt-lib=/usr/lib' \
   GEM_HOME=~/.vagrant.d/gems \
   GEM_PATH=$GEM_HOME:/opt/vagrant/embedded/gems \
   PATH=/opt/vagrant/embedded/bin:$PATH \
       vagrant plugin install vagrant-libvirt
</pre>
<p>See <a rel="nofollow" class="external autonumber" href="https://vagrant-libvirt.github.io/vagrant-libvirt/installation.html#arch">[2]</a> for more troubleshooting.
</p>
<h3><span class="mw-headline" id="vagrant-lxc">vagrant-lxc</span></h3>
<p>First install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lxc">lxc</a></span> from the official repositories, then:
</p>
<pre>$ vagrant plugin install vagrant-lxc
</pre>
<p>Next, configure lxc as directed in the <a rel="nofollow" class="external text" href="https://github.com/fgrehm/vagrant-lxc/wiki/Usage-on-Arch-Linux-hosts">official repository</a>. The plugin can now be used with a <code>Vagrantfile</code> like so:
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> This uses some arbitrary image. Link to a transparent repository or instructions how to build a custom image should be added. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Vagrant.html">Talk:Vagrant</a>)</div>
</div>
<pre>VAGRANTFILE_API_VERSION = "2"

Vagrant.configure("2") do |config|

    config.vm.define "main" do |config|
        config.vm.box = 'http://bit.ly/vagrant-lxc-wheezy64-2013-10-23'

        config.vm.provider :lxc do |lxc|
            lxc.customize 'cgroup.memory.limit_in_bytes', '512M'
        end

        config.vm.provision :shell do |shell|
            shell.path = 'provision.sh'
        end
    end
end
</pre>
<p>The <code>provision.sh</code> file should be a shell script beside the <code>Vagrantfile</code>. Do whatever setup is appropriate; for example, to remove puppet, which is packaged in the above box:
</p>
<pre>rm /etc/apt/sources.list.d/puppetlabs.list
apt-get purge -y puppet facter hiera puppet-common puppetlabs-release ruby-rgen
</pre>
<h2><span class="mw-headline" id="Provisioning">Provisioning</span></h2>
<p><i>Provisioners</i> allow you to automatically install software, alter and automate configurations as part of the vagrant up process. The most common provisioner is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=puppet">puppet</a></span>.
</p>
<h2><span class="mw-headline" id="Base_Boxes_for_Vagrant">Base Boxes for Vagrant</span></h2>
<p>Here is a list of places to get all sorts of vagrant base boxes for different purposes: development, testing, or even production.
</p>
<ul><li>The <a rel="nofollow" class="external text" href="https://app.vagrantup.com/archlinux/boxes/archlinux">official Arch Linux vagrant boxes</a>. The corresponding <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/arch-boxes">Arch-boxes project</a> contains the packerfile and provisioning scripts used for building.</li></ul>
<ul><li>A well maintained up-to-date <a rel="nofollow" class="external text" href="https://github.com/terrywang/vagrantboxes/blob/master/archlinux-x86_64.md">Arch Linux x86_64</a> base box for Vagrant.</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="https://vagrantcloud.com/">Vagrant Cloud</a> is HashiCorp's official site for Vagrant boxes. You can browse user-submitted boxes or upload your own. A single Vagrant Cloud box can support multiple providers with versioning.</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="http://vagrantbox.es/">vagrantbox.es</a>—A List of vagrant base boxes. Initiated by Gareth Rushgrove <a rel="nofollow" class="external text" href="https://twitter.com/garethr">@garethr</a> hosted on Heroku using Nginx. See the story here: <a rel="nofollow" class="external text" href="https://www.morethanseven.net/2012/07/01/The-vagrantbox.es-story/">The Vagrantbox.es Story</a>.</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="https://github.com/opscode/bento">Bento</a> is a project that encapsulates Packer templates for building Vagrant base boxes. A subset of templates are built and published to the <a rel="nofollow" class="external text" href="https://app.vagrantup.com/bento">bento org</a> on Vagrant Cloud.</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="http://puppet-vagrant-boxes.puppetlabs.com/">Puppet Labs Vagrant Boxes</a>—Pre-rolled vagrant boxes, ready for use. Made by the folks at Puppet Labs.</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="https://cloud-images.ubuntu.com/vagrant/">Vagrant Ubuntu Cloud Images</a>—It has been there since Jan, 2013. For some reason Canonical has NOT officially promoted it yet, may be still in beta. Remember these are vanilla images, NOT very useful without Chef or Puppet.</li></ul>
<ul><li>
<a rel="nofollow" class="external text" href="https://github.com/elasticdog/packer-arch">packer-arch project on Github</a> provides configuration files to build light Arch Linux Vagrant images from the official iso image, using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=packer">packer</a></span>.</li></ul>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id="No_ping_between_host_and_vagrant_box_.28host-only_networking.29"></span><span class="mw-headline" id="No_ping_between_host_and_vagrant_box_(host-only_networking)">No ping between host and vagrant box (host-only networking)</span>
</h3>
<p>Sometimes there are troubles with host-only networking not functioning. Host have no ip on vboxnet interface, host cannot ping vagrant boxes and cannot be pinged from them. This is solved by installing good old <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=net-tools">net-tools</a></span> as mentioned in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1178607#p1178607">this thread</a> by kevin1024
</p>
<h3><span class="mw-headline" id="Virtual_machine_is_not_network_accessible_from_the_Arch_host_OS">Virtual machine is not network accessible from the Arch host OS</span></h3>
<p>As of version 1.8.4, Vagrant appears to use the deprecated <code>route</code> command to configure routing to the virtual network interface which bridges to the virtual machine(s).  If <code>route</code> is not installed, you will not be able to access the virtual machine from the host OS due to the lack of suitable route.  The solution, as mentioned above, is to install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=net-tools">net-tools</a></span> package, which includes the route command.
</p>
<h3>
<span id=".27vagrant_up.27_hangs_on_NFS_mounting_.28Mounting_NFS_shared_folders....29"></span><span class="mw-headline" id="'vagrant_up'_hangs_on_NFS_mounting_(Mounting_NFS_shared_folders...)">'vagrant up' hangs on NFS mounting (Mounting NFS shared folders...)</span>
</h3>
<p>Installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nfs-utils">nfs-utils</a></span> package may solve this problem.
</p>
<p>Make sure the connection is not blocked by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iptables">iptables</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nftables">nftables</a></span>. If you are using <a href="../en/Libvirt.html" title="Libvirt">libvirt</a> along with <a href="../en/Firewalld.html" title="Firewalld">firewalld</a>, enable <code>nfs</code> (<code>nfs3</code>), <code>rpc-bind</code> and <code>mountd</code> for the libvirt zone.
</p>
<h3><span class="mw-headline" id="Mounting_NFS_shared_folders:_mount.nfs:_requested_NFS_version_or_transport_protocol_is_not_supported">Mounting NFS shared folders: mount.nfs: requested NFS version or transport protocol is not supported</span></h3>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nfs-utils">nfs-utils</a></span> package. Enable (v3 and) UDP support by editing <code>/etc/nfs.conf</code> and uncommenting the following lines:
</p>
<pre>[nfsd]
vers3=y
udp=y
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">Restart</a> <code>nfs-server.service</code> to apply the changes immediately.
</p>
<h3>
<span id="Error_starting_network_.27default.27:_internal_error:_Failed_to_initialize_a_valid_firewall_backend"></span><span class="mw-headline" id="Error_starting_network_'default':_internal_error:_Failed_to_initialize_a_valid_firewall_backend">Error starting network 'default': internal error: Failed to initialize a valid firewall backend</span>
</h3>
<p>Most likely the firewall dependencies were not installed. <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iptables-nft">iptables-nft</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> packages and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>libvirtd.service</code> unit.
</p>
<h3><span class="mw-headline" id="Unable_to_ssh_to_vagrant_guest">Unable to ssh to vagrant guest</span></h3>
<p>Check that virtualization is enabled in your BIOS. Because vagrant reports that the vm guest is booted, you would think that all was well with virtualization, but some vagrant boxes (e.g. tantegerda1/archlinux) allow you to get all the way to the ssh stage before the lack of cpu virtualization capabilities bites you.
</p>
<h3><span class="mw-headline" id="Could_not_get_preferred_machine_for_domain">Could not get preferred machine for domain</span></h3>
<pre>Error while creating domain: Error saving the server: Call to virDomainDefineXML failed: could not get preferred machine for domain
</pre>
<p>Check that virtualization is enabled in your BIOS.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.vagrantup.com/docs">official Vagrant documentation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Vagrant_(software)" class="extiw" title="wikipedia:Vagrant (software)">Wikipedia:Vagrant (software)</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Vagrant&amp;oldid=812731">https://wiki.archlinux.org/index.php?title=Vagrant&amp;oldid=812731</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 July 2024, at 10:34.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
