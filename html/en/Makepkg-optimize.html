<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>makepkg-optimize - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Makepkg-optimize rootpage-Makepkg-optimize skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Build_an_optimized_package" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Build_an_optimized_package">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Build an optimized package</span>
			</div>
		</a>
		
		<ul id="toc-Build_an_optimized_package-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Build_an_optimized_package_in_a_clean_chroot" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Build_an_optimized_package_in_a_clean_chroot">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Build an optimized package in a clean chroot</span>
			</div>
		</a>
		
			<button aria-controls="toc-Build_an_optimized_package_in_a_clean_chroot-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Build an optimized package in a clean chroot subsection</span>
			</button>
		
		<ul id="toc-Build_an_optimized_package_in_a_clean_chroot-sublist" class="vector-toc-list">
			<li id="toc-Chroot_setup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Chroot_setup">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Chroot setup</span>
				</div>
			</a>
			
			<ul id="toc-Chroot_setup-sublist" class="vector-toc-list">
				<li id="toc-Install_makepkg-optimize_and_backends" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Install_makepkg-optimize_and_backends">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1</span>
					<span>Install makepkg-optimize and backends</span>
				</div>
			</a>
			
			<ul id="toc-Install_makepkg-optimize_and_backends-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Using_the_chroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_the_chroot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Using the chroot</span>
				</div>
			</a>
			
			<ul id="toc-Using_the_chroot-sublist" class="vector-toc-list">
				<li id="toc-Build_a_package" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Build_a_package">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2.1</span>
					<span>Build a package</span>
				</div>
			</a>
			
			<ul id="toc-Build_a_package-sublist" class="vector-toc-list">
				<li id="toc-Building_with_PGO" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Building_with_PGO">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2.1.1</span>
					<span>Building with PGO</span>
				</div>
			</a>
			
			<ul id="toc-Building_with_PGO-sublist" class="vector-toc-list">
				<li id="toc-Create_a_PGO_cache" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Create_a_PGO_cache">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2.1.1.1</span>
					<span>Create a PGO cache</span>
				</div>
			</a>
			
			<ul id="toc-Create_a_PGO_cache-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Profile_a_program" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Profile_a_program">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2.1.1.2</span>
					<span>Profile a program</span>
				</div>
			</a>
			
			<ul id="toc-Profile_a_program-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">makepkg-optimize</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Makepkg-optimize" title="Makepkg-optimize – 日本語" lang="ja" hreflang="ja" data-title="Makepkg-optimize" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Makepkg-optimize.html" title="Makepkg-optimize – русский" lang="ru" hreflang="ru" data-title="Makepkg-optimize" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../DeveloperWiki:Building_in_a_clean_chroot.html" title="DeveloperWiki:Building in a clean chroot">DeveloperWiki:Building in a clean chroot</a></li>
<li><a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a></li>
</ul>
</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/makepkg-optimize/">makepkg-optimize</a></span><sup><small>AUR</small></sup> is a collection of supplemental <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/commit/295a3491adc4af5c8634ac82777212ed9c664457">tidy</a>, <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/commit/508b4e3ec0cb3e365942f4dc0626edda4789932b">buildenv</a>, and <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/commit/0bb04fa16a82db133dd010478c1256bc8500c5e7">executable</a> scripts for <a href="../en/Pacman.html" title="Pacman">pacman</a> which provide macros for several kinds of optimization in the <code>build()</code> and <code>package()</code> stages.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> As with any package in the <a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/makepkg-optimize/">makepkg-optimize</a></span><sup><small>AUR</small></sup> has no official support. You should read, and you may post <a href="../en/Arch_User_Repository.html#Commenting_on_packages" title="Arch User Repository">comments</a> on its AUR page.</div>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Installation">Installation</h2></div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/makepkg-optimize/">makepkg-optimize</a></span><sup><small>AUR</small></sup> and, to make available optimizations requiring them, install backends: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openmp">openmp</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=upx">upx</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=optipng">optipng</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=svgo">svgo</a></span>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=polly">polly</a></span>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Configuration">Configuration</h2></div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/makepkg-optimize/">makepkg-optimize</a></span><sup><small>AUR</small></sup> generates a redundant configuration file, <code>/etc/makepkg-optimize.conf</code>, from your current <span class="plainlinks archwiki-template-man" title="$ man 5 makepkg.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/makepkg.conf.5">makepkg.conf(5)</a></span> configuration.
</p>
<p>This file lists supplementary <a href="../en/Makepkg.html#Building_optimized_binaries" title="Makepkg">COMPILE FLAGS</a>, <a rel="nofollow" class="external text" href="https://aur.archlinux.org/cgit/aur.git/tree/buildenv_ext.conf?h=makepkg-optimize">BUILD ENVIRONMENT</a> options, <a rel="nofollow" class="external text" href="https://aur.archlinux.org/cgit/aur.git/tree/pkgopts_ext.conf?h=makepkg-optimize">GLOBAL PACKAGE OPTIONS</a>, <a rel="nofollow" class="external text" href="https://aur.archlinux.org/cgit/aur.git/tree/destdirs_ext.conf?h=makepkg-optimize">PACKAGE OUTPUT</a> options, and <a rel="nofollow" class="external text" href="https://aur.archlinux.org/cgit/aur.git/tree/compress-param_max.conf?h=makepkg-optimize">COMPRESSION DEFAULTS</a>, all of which are disabled by default.
</p>
<div class="mw-heading mw-heading2"><h2 id="Build_an_optimized_package">Build an optimized package</h2></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> Some packages may fail to build with certain optimizations and over-optimization may cause problems for some programs--such as decreased performance and segmentation faults.</div>
<p>After <a href="#Configuration">selecting your preferred optimizations</a>, pass the configuration file when <a href="../en/Makepkg.html#Usage" title="Makepkg">building</a>:
</p>
<pre>$ makepkg -c --config /etc/makepkg-optimize.conf
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> Use <code>-c</code> with <code>makepkg</code> to prevent packages reusing stale optimization flags. See <a href="../en/Makepkg.html#Usage" title="Makepkg">Makepkg#Usage</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> <a href="https://en.wikipedia.org/wiki/Profile-guided_optimization" class="extiw" title="wikipedia:Profile-guided optimization">Profile-guided optimization</a> requires that a package be built and installed <i>twice</i>. The first phase initiates profile generation in <code>$PROFDEST/<i>pkgbase</i>.gen</code>; the second moves them to <code>$PROFDEST/<i>pkgbase</i>.used</code> and applies them.</div>
<div class="mw-heading mw-heading2"><h2 id="Build_an_optimized_package_in_a_clean_chroot">Build an optimized package in a clean chroot</h2></div>
<p>Alternatively, <code>makepkg-optimize</code> can be used to build optimized packages within a <a href="../DeveloperWiki:Building_in_a_clean_chroot.html#Classic_way" title="DeveloperWiki:Building in a clean chroot">chroot</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Chroot_setup">Chroot setup</h3></div>
<p>After <a href="../DeveloperWiki:Building_in_a_clean_chroot.html#Setting_up_a_chroot" title="DeveloperWiki:Building in a clean chroot">setting up a chroot</a>, a few additional steps are needed.
</p>
<div class="mw-heading mw-heading4"><h4 id="Install_makepkg-optimize_and_backends">Install makepkg-optimize and backends</h4></div>
<p>First, install some of the backends for the optimization macros to the base chroot:
</p>
<pre>$ arch-nspawn "$CHROOT"/root pacman -S openmp upx optipng polly
</pre>
<p>Then <a href="../en/Arch_User_Repository.html#Acquire_build_files" title="Arch User Repository">download</a> and <a href="../DeveloperWiki:Building_in_a_clean_chroot.html#Building_in_the_chroot" title="DeveloperWiki:Building in a clean chroot">build</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/makepkg-optimize/">makepkg-optimize</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=svgo">svgo</a></span>.
</p>
<p>To install them in the base chroot, copy their package files into it and install them, e.g.:
</p>
<pre># cp svgo-1.2.2-2-any.pkg.tar.xz "$CHROOT"/root/root/
$ arch-nspawn "$CHROOT"/root pacman -U /root/svgo-1.2.2-2-any.pkg.tar.xz
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> This voids the warranty on your "clean" chroot!</div>
<div class="mw-heading mw-heading3"><h3 id="Using_the_chroot">Using the chroot</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Build_a_package">Build a package</h4></div>
<p>First, edit <code>$CHROOT/root/etc/makepkg-optimize.conf</code> and <a href="#Configuration">select your preferred optimizations</a>.
</p>
<p>When <a href="../DeveloperWiki:Building_in_a_clean_chroot.html#Building_in_the_chroot" title="DeveloperWiki:Building in a clean chroot">building</a>, pass the configuration file to <code>makepkg</code>:
</p>
<pre>$ makechrootpkg -c -r "$CHROOT" -- -c --config /etc/makepkg-optimize.conf
</pre>
<div class="mw-heading mw-heading5"><h5 id="Building_with_PGO">Building with PGO</h5></div>
<p>The <code>pgo</code> option for <code>BUILDENV</code> enables either <i>generation</i> or <i>application</i> of profiles, depending on if this is the first or second build of the package with this flag enabled. Clean chroot building complicates this because the software is run outside of the chroot to generate profiles, but the profiles need to be applied from inside the chroot when recompiling later. The solution is to bridge the three filesystems with a bind mounted folder.
</p>
<div class="mw-heading mw-heading6"><h6 id="Create_a_PGO_cache">Create a PGO cache</h6></div>
<p>Create and bind a folder to store <a rel="nofollow" class="external text" href="https://gcc.gnu.org/onlinedocs/gcc/Gcov-Data-Files.html">profiles</a>:
</p>
<pre># mkdir -m 777 {"$CHROOT"/{root,"$USER"},}/mnt/pgo
# mount -o bind {,"$CHROOT"/root}/mnt/pgo
# mount -o bind "$CHROOT"/{root,"$USER"}/mnt/pgo
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> Use <a href="../en/Fstab.html" title="Fstab">fstab</a> to <a rel="nofollow" class="external text" href="https://serverfault.com/a/613184">bind</a> these folders at boot.
<pre>#PGODEST
/full/path/to/$CHROOT/$USER/mnt/pgo/ /mnt/pgo/ none bind,x-gvfs-hide 0 0
/mnt/pgo/ /full/path/to/$CHROOT/root/mnt/pgo/ none bind,x-gvfs-hide 0 0 

</pre>
 <div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Type out the full path to the chroot pgo directories, without using any $VARIABLES</div>
</div>
<p>Edit <code>$CHROOT/root/etc/makepkg-optimize.conf</code> and set <code>PROFDEST=/mnt/pgo</code>.
</p>
<div class="mw-heading mw-heading6"><h6 id="Profile_a_program">Profile a program</h6></div>
<p>Build, then <a href="../en/Pacman.html#Additional_commands" title="Pacman">install</a> the package and test-run its executables.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Profiles are generated on program <code>exit()</code>. Persistent daemons, such as <a href="../en/Systemd.html" title="Systemd">systemd</a>, may require a reboot to produce profiles.</div>
<p>After thoroughly utilizing the software, close it, then rebuild and reinstall its package.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Package_management.html" title="Category:Package management">Package management</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Makepkg-optimize&amp;oldid=818152">https://wiki.archlinux.org/index.php?title=Makepkg-optimize&amp;oldid=818152</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 12 October 2024, at 06:21.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true">makepkg-optimize</div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
