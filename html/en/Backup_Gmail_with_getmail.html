<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Backup Gmail with getmail - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Backup_Gmail_with_getmail rootpage-Backup_Gmail_with_getmail skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installing_getmail" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installing_getmail">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installing getmail</span>
			</div>
		</a>
		
		<ul id="toc-Installing_getmail-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Creating_required_files_and_folders" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Creating_required_files_and_folders">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Creating required files and folders</span>
			</div>
		</a>
		
		<ul id="toc-Creating_required_files_and_folders-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuring_getmail" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuring_getmail">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Configuring getmail</span>
			</div>
		</a>
		
		<ul id="toc-Configuring_getmail-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Running_getmail_and_adding_a_cron_job" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Running_getmail_and_adding_a_cron_job">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Running getmail and adding a cron job</span>
			</div>
		</a>
		
		<ul id="toc-Running_getmail_and_adding_a_cron_job-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Migrating_emails,_importing_old_emails" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Migrating_emails,_importing_old_emails">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Migrating emails, importing old emails</span>
			</div>
		</a>
		
		<ul id="toc-Migrating_emails,_importing_old_emails-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Backup Gmail with getmail</span></h1>
				</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Getmail.html" title="Getmail">getmail</a>.</b></p>
<div>
<b>Notes:</b> Only <a href="#Troubleshooting">#Troubleshooting</a> is specific to Gmail. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Backup_Gmail_with_getmail.html">Talk:Backup Gmail with getmail</a>)</div>
</div>
<p>We can use getmail to fully backup email messages from a Gmail account.
</p>
<p>Emails will be backed-up in Maildir format, meaning that each email will be a separate text file, readable with any email client, or even with a text editor.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installing_getmail">Installing getmail</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/getmail/">getmail</a></span><sup><small>AUR</small></sup> package.
</p>
<h2><span class="mw-headline" id="Creating_required_files_and_folders">Creating required files and folders</span></h2>
<p>Getmail reads its configuration from ~/.getmail/getmailrc by default. Unfortunately this directory and file do not exist by default, so we need to create them.
</p>
<pre>$ mkdir ~/.getmail
$ touch ~/.getmail/getmailrc
$ chmod 700 ~/.getmail
</pre>
<p>We also need to create the folder where the emails will be backed-up:
</p>
<pre>$ mkdir -p ~/bak/mail
$ cd ~/bak/mail
$ mkdir cur new tmp
</pre>
<p>For this example ~/bak/mail was chosen , but it could just as well be ~/mail. The cur, new and tmp folders are required by the Maildir format and by getmail.
</p>
<h2><span class="mw-headline" id="Configuring_getmail">Configuring getmail</span></h2>
<p>Edit the configuration file and add the entries below.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.getmail/getmailrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># More configuration options here:
# <a rel="nofollow" class="external free" href="http://pyropus.ca/software/getmail/configuration.html">http://pyropus.ca/software/getmail/configuration.html</a>
[retriever]
type = SimpleIMAPSSLRetriever
server = imap.gmail.com
mailboxes = ("Inbox", "[Gmail]/Sent Mail") # optional - leave this line out to just grab the inbox
username = USER
password = PASS</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If the mailbox <code>[Gmail]/Sent Mail</code> does not exist, try setting your Gmail's language setting to English. This setting can be different from the language setting of the Google account.</div>
<p>The retriever section tells getmail where to connect. It uses IMAP to connect to the server. For POP3 we can use the type  SimplePOP3SSLRetriever, but we will also have to modify the server field. The mailbox which we backup will be All Mail.
</p>
<p>Note that Gmail was called Google Mail in some countries like Germany. Even if all GMail accounts are migrated to the new name, the IMAP-Server still assumes Google Mail as the mail box directory. The mailboxes variable must be set to [Google Mail] in those cases. Also, you might need to replace box labels by whatever GMail calls that directory in the language of your Google account. 
</p>
<p>The username and password fields need to be changed to your own.
</p>
<pre>[destination]
type = Maildir
path = ~/bak/mail/
</pre>
<p>The path field is the destination folder (which we created earlier) where the emails will be backed-up. All emails will be placed in 'new', and the cur and tmp folders will be left empty. This is normal, do not delete cur and tmp.
</p>
<p>The options section is a bit longer:
</p>
<pre>[options]
verbose = 2
message_log = ~/.getmail/log
</pre>
<p>This tells getmail to be very verbose and tell us the status of each message (whether it was backed-up successfully, total number of messages, etc). Also, everything will be logged to ~/.getmail/log.
</p>
<pre># retrieve only new messages
# if set to true it will re-download ALL messages every time!
read_all = false
</pre>
<pre># do not alter messages
delivered_to = false
received = false
</pre>
<p>Setting delivered_to and received fields to false will prevent emails from being altered by getmail.
</p>
<h2><span class="mw-headline" id="Running_getmail_and_adding_a_cron_job">Running getmail and adding a cron job</span></h2>
<p>Now if we run getmail it will backup all Gmail emails to ~/bak/mail, outputting its status along the way.
</p>
<p>We want to periodically run getmail to backup our Gmail account, so we will add a cron job:
</p>
<pre>* * * * *   ID=getmail FREQ=1d getmail -q
</pre>
<p>The -q parameter will run getmail in quiet mode and only report errors.
</p>
<h2>
<span id="Migrating_emails.2C_importing_old_emails"></span><span class="mw-headline" id="Migrating_emails,_importing_old_emails">Migrating emails, importing old emails</span>
</h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> The appendmail repo is gone. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Backup_Gmail_with_getmail.html">Talk:Backup Gmail with getmail</a>)</div>
</div>
<p>Backing-up emails will suffice for most people, but if we want to migrate our emails to another account it gets a bit tricky. The appendmail script from <a rel="nofollow" class="external free" href="http://bitbucket.org/wooptoo/appendmail">http://bitbucket.org/wooptoo/appendmail</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-12-20 ⓘ]</sup> can help us import emails to another account, be it Gmail or not. It can also be used to import old emails in our existing Gmail account.
</p>
<p>Basically it reads every email file from its 'import' folder and puts it on Gmail or another account.
</p>
<p>A direct link to download is <a rel="nofollow" class="external free" href="http://bitbucket.org/wooptoo/appendmail/get/tip.zip">http://bitbucket.org/wooptoo/appendmail/get/tip.zip</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-12-20 ⓘ]</sup> It needs PHP to run, and you need to modify the username and password to yours.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>Depending on your Gmail security, you may be left with this error when running getmail:
</p>
<pre>getmailrc: credential/login error ([ALERT] Please log in via your web browser: <a rel="nofollow" class="external free" href="https://support.google.com/mail/accounts/bin/answer.py?answer=78754">https://support.google.com/mail/accounts/bin/answer.py?answer=78754</a> (Failure))
  0 messages (0 bytes) retrieved, 0 skipped</pre>
<p>Since Gmail does not allow "lesssecureapps" anymore <a rel="nofollow" class="external text" href="https://www.google.com/settings/security/lesssecureapps">enable access for less secure apps</a> you may want to turn on <a rel="nofollow" class="external text" href="https://myaccount.google.com/signinoptions/two-step-verification">two-step-verification</a> and then create a <a rel="nofollow" class="external text" href="https://myaccount.google.com/apppasswords">App password</a> and put it as password into getmailrc (for POP3):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.getmail/getmailrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">type = SimplePOP3SSLRetriever
server = pop.gmail.com
username = USER@gmail.com
password = APPPASSWORD
port = 995</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Mail_retrieval_agents.html" title="Category:Mail retrieval agents">Mail retrieval agents</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Backup_Gmail_with_getmail&amp;oldid=777403">https://wiki.archlinux.org/index.php?title=Backup_Gmail_with_getmail&amp;oldid=777403</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 7 May 2023, at 11:23.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
