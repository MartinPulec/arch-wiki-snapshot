<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Xrdp - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Xrdp rootpage-Xrdp skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Xorg_backend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Xorg_backend">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Xorg backend</span>
				</div>
			</a>
			
			<ul id="toc-Xorg_backend-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Usage</span>
			</div>
		</a>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Autostart_at_boot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Autostart_at_boot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Autostart at boot</span>
				</div>
			</a>
			
			<ul id="toc-Autostart_at_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Graphical_acceleration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Graphical_acceleration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Graphical acceleration</span>
				</div>
			</a>
			
			<ul id="toc-Graphical_acceleration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sound" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sound">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Sound</span>
				</div>
			</a>
			
			<ul id="toc-Sound-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Non-root_user" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Non-root_user">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Non-root user</span>
				</div>
			</a>
			
			<ul id="toc-Non-root_user-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Black_box_around_cursor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Black_box_around_cursor">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Black box around cursor</span>
				</div>
			</a>
			
			<ul id="toc-Black_box_around_cursor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Black_screen" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Black_screen">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Black screen</span>
				</div>
			</a>
			
			<ul id="toc-Black_screen-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exit_upon_disconnect" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Exit_upon_disconnect">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Exit upon disconnect</span>
				</div>
			</a>
			
			<ul id="toc-Exit_upon_disconnect-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Black_screen_with_a_desktop_environment" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Black_screen_with_a_desktop_environment">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Black screen with a desktop environment</span>
				</div>
			</a>
			
			<ul id="toc-Black_screen_with_a_desktop_environment-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Green_screen" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Green_screen">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Green screen</span>
				</div>
			</a>
			
			<ul id="toc-Green_screen-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-loginctl_or_systemctl_--user_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#loginctl_or_systemctl_--user_not_working">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>loginctl or systemctl --user not working</span>
				</div>
			</a>
			
			<ul id="toc-loginctl_or_systemctl_--user_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Prompts_for_gnome-keyring_or_KDE_Wallet" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Prompts_for_gnome-keyring_or_KDE_Wallet">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7</span>
					<span>Prompts for gnome-keyring or KDE Wallet</span>
				</div>
			</a>
			
			<ul id="toc-Prompts_for_gnome-keyring_or_KDE_Wallet-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Prevent_autostart_items_from_starting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Prevent_autostart_items_from_starting">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8</span>
					<span>Prevent autostart items from starting</span>
				</div>
			</a>
			
			<ul id="toc-Prevent_autostart_items_from_starting-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_sound" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_sound">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9</span>
					<span>No sound</span>
				</div>
			</a>
			
			<ul id="toc-No_sound-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Two-finger_scrolling_is_too_fast" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Two-finger_scrolling_is_too_fast">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.10</span>
					<span>Two-finger scrolling is too fast</span>
				</div>
			</a>
			
			<ul id="toc-Two-finger_scrolling_is_too_fast-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restricted_functionality_within_remote_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restricted_functionality_within_remote_system">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.11</span>
					<span>Restricted functionality within remote system</span>
				</div>
			</a>
			
			<ul id="toc-Restricted_functionality_within_remote_system-sublist" class="vector-toc-list">
				<li id="toc-Mounted_drives" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Mounted_drives">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.11.1</span>
					<span>Mounted drives</span>
				</div>
			</a>
			
			<ul id="toc-Mounted_drives-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-NetworkManager" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#NetworkManager">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.11.2</span>
					<span>NetworkManager</span>
				</div>
			</a>
			
			<ul id="toc-NetworkManager-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Xrdp</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Xrdp" title="Xrdp – 日本語" lang="ja" hreflang="ja" data-title="Xrdp" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Xrdp" title="Xrdp – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Xrdp" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><b>xrdp</b> is a daemon that supports Microsoft's <a href="https://en.wikipedia.org/wiki/Remote_Desktop_Protocol" class="extiw" title="wikipedia:Remote Desktop Protocol">Remote Desktop Protocol</a> (RDP).
It uses Xvnc or xorgxrdp as a backend.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xrdp/">xrdp</a></span><sup><small>AUR</small></sup> package (or alternatively <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xrdp-git/">xrdp-git</a></span><sup><small>AUR</small></sup> for the development version). This only supports Xvnc as the backend.
</p>
<h3><span class="mw-headline" id="Xorg_backend">Xorg backend</span></h3>
<p>To use xorgxrdp instead for the backend, <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xorgxrdp/">xorgxrdp</a></span><sup><small>AUR</small></sup> package.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>First, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the <code>xrdp</code> service. You should be able to connect an RDP client to the host on the default RDP port (3389). If successful, you will be greeted with the <i>xrdp</i> session manager window which allows you to choose between <i>Xorg</i> or <i>Xvnc</i> sessions and provides inputs for user authentication. The session manager UI can be highly customized by modifying <code>/etc/xrdp/xrdp.ini</code>.
</p>
<p>The parameters used to start <i>Xorg</i> and <i>Xvnc</i> display servers can be configured in <code>/etc/xrdp/sesman.ini</code>.
</p>
<p>After successfully starting a display server, <i>xrdp</i> will execute <code>/etc/xrdp/startwm.sh</code> by default. This script is meant to start a window manager (similar to <a href="../en/Xinit.html#xinitrc" class="mw-redirect" title=".xinitrc">.xinitrc</a>) and will read from <code>~/.xinitrc</code> or <code>/etc/X11/xinit/xinitrc</code> if they exist. It is recommended to edit <code>~/.xinitrc</code> to start your desktop environment or window manager, but you can also edit <code>/etc/xrdp/startwm.sh</code>.
</p>
<p>If you just close the session window and RDP connection, you can access the same session again next time you connect with RDP. When you exit the window manager or desktop environment from the session window, the session will close and a new session will be opened the next time.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Autostart_at_boot">Autostart at boot</span></h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xrdp/">xrdp</a></span><sup><small>AUR</small></sup> package contains service files for systemd. <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> <code>xrdp.service</code>.
</p>
<h3><span class="mw-headline" id="Graphical_acceleration">Graphical acceleration</span></h3>
<p>For Xorg sessions, you can enable <a href="../en/OpenGL.html" title="OpenGL">OpenGL</a> and <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> graphical acceleration by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xorgxrdp-glamor/">xorgxrdp-glamor</a></span><sup><small>AUR</small></sup> for Intel and AMD GPUs and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xorgxrdp-nvidia/">xorgxrdp-nvidia</a></span><sup><small>AUR</small></sup> for NVIDIA GPUs.
</p>
<h3><span class="mw-headline" id="Sound">Sound</span></h3>
<p>Install the necessary <a href="../en/PulseAudio.html" title="PulseAudio">PulseAudio</a> modules with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pulseaudio-module-xrdp/">pulseaudio-module-xrdp</a></span><sup><small>AUR</small></sup>.
</p>
<p>for <a href="../en/PipeWire.html" title="PipeWire">PipeWire</a> user, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pipewire-module-xrdp/">pipewire-module-xrdp</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Non-root_user">Non-root user</span></h3>
<p>Include the following lines in <code>Xwrapper.config</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/Xwrapper.config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">allowed_users=anybody
needs_root_rights=no</pre>
<p>If the above lines are not present, the remote desktop connection from applications like <a href="../en/Remmina.html" title="Remmina">Remmina</a> will start with an empty screen.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Black_box_around_cursor">Black box around cursor</span></h3>
<p>If you encounter black box around mouse pointer create <code>~/.Xresources-xrdp</code> with line <code>Xcursor.core:1</code> and load it in <code>~/.xinitrc</code> like
</p>
<pre>xrdb ~/.Xresources-xrdp
exec startlxde
</pre>
<p>You may need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xrdb">xorg-xrdb</a></span>.
</p>
<h3><span class="mw-headline" id="Black_screen">Black screen</span></h3>
<p>You may get a black screen after logging into the session manager.
</p>
<p>The last line in <code>~/.xinitrc</code> may look like <code>exec $(get_session "$1")</code>. It needs a default parameter, if not supplied in <code>/etc/xrdp/startwm.sh</code>. 
</p>
<p>One can edit the last line of <code>~/.xinitrc</code> to be <code>exec $(get_session "${1:-"$SESSION"}")</code> or <code>exec $(get_session "${1:-xfce}")</code>, depending on your preference. 
</p>
<p>Alternatively, you can also edit your call to <code>~/.xinitrc</code> in <code>/etc/xrdp/startwm.sh</code>; eg. <code>. ~/.initrc xfce</code>. This will affect all users.
</p>
<h3><span class="mw-headline" id="Exit_upon_disconnect">Exit upon disconnect</span></h3>
<p>You may get your windows exit after disconnect, if your <code>~/.xinitrc</code> has <code>--exit-with-session</code> set in the <code>dbus_args</code>.  
</p>
<p>Try copying <code>~/.xinitrc</code> to <code>~/.xrdpinitrc</code>, removing <code>--exit-with-session</code>, and updating <code>/etc/xrdp/startwm.sh</code> to call <code>~/.xrdpinitrc</code> instead of <code>~/.xinitrc</code>. 
</p>
<p>Directly editing <code>~/.xinitrc</code> to remove <code>--exit-with-session</code> may cause unexpected bahavior using non-xrdp sessions.
</p>
<p>Per <span class="plainlinks archwiki-template-man" title="$ man 1 dbus-launch"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dbus-launch.1">dbus-launch(1)</a></span>:
</p>
<dl><dd>Distributions running dbus-launch as part of a standard X session should run <code>dbus-launch --exit-with-session</code> after the X server has started and become available, as a wrapper around the "main" X client (typically a session manager or window manager)</dd></dl>
<h3><span class="mw-headline" id="Black_screen_with_a_desktop_environment">Black screen with a desktop environment</span></h3>
<p>If you get a black screen and you use a desktop environment, it may be a result of <a href="../en/D-Bus.html" title="D-Bus">D-Bus</a> not being properly initialized. Some DEs (like KDE Plasma) might also be able to restore fully working applications/windows from a previous session, which makes it seem that "only plasmashell" is missing.
</p>
<p>Try running the desktop environment with <code>dbus-launch --exit-with-session</code> in your <code>~/.xinitrc</code> file. For KDE Plasma, you can use the command <code>/usr/lib/plasma-dbus-run-session-if-needed startplasma-x11</code> or <code>dbus-launch --exit-with-session startplasma-x11</code>.
</p>
<h3><span class="mw-headline" id="Green_screen">Green screen</span></h3>
<p>If the login dialog appears, but no desktop environment starts when you click OK, change <code>param=Xorg</code> to <code>param=/usr/lib/Xorg</code> in <code>/etc/xrdp/sesman.ini</code>.
</p>
<h3><span class="mw-headline" id="loginctl_or_systemctl_--user_not_working">loginctl or systemctl --user not working</span></h3>
<p>Try commenting out all the references to <code>systemd-home</code> in <code>/etc/pam.d/system-auth</code>. See <a rel="nofollow" class="external text" href="https://github.com/neutrinolabs/xrdp/issues/1684">this issue</a>.
</p>
<h3><span class="mw-headline" id="Prompts_for_gnome-keyring_or_KDE_Wallet">Prompts for gnome-keyring or KDE Wallet</span></h3>
<p>If you are prompted to login to gnome-keyring or [KDE Wallet] when your session starts, modify the file <code>/etc/pam.d/xrdp-sesman</code> as follows:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/xrdp-sesman</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#%PAM-1.0
auth        include     system-remote-login
<b>-auth       optional    pam_gnome_keyring.so</b>
<b>-auth       optional    pam_kwallet5.so</b>
account     include     system-remote-login
password    include     system-remote-login
<b>-password   optional    pam_gnome_keyring.so    use_authtok</b>
session     include     system-remote-login
<b>-session    optional    pam_gnome_keyring.so    auto_start</b>
<b>-session    optional    pam_kwallet5.so         auto_start</b></pre>
<p>Then, add <code>etc/pam.d/xrdp-sesman</code> (no leading slash) to <code>NoUpgrade</code> in <code>/etc/pacman.conf</code>. If you only use gnome-keyring it is not necessary to include the kwallet5 lines, and vice versa.
</p>
<h3><span class="mw-headline" id="Prevent_autostart_items_from_starting">Prevent autostart items from starting</span></h3>
<p>To prevent user defined <code>~/.config/autostart</code> items from starting you can set the autostart directory param on the session in the <code>~/.xinitrc</code> to use only the global <code>/etc/xdg/autostart</code> directory.  
</p>
<pre>get_session(){
    local dbus_args=(--sh-syntax)
    case "$SESSION" in
        awesome) dbus_args+=(awesome) ;;
        bspwm) dbus_args+=(bspwm-session) ;;
        budgie) dbus_args+=(budgie-desktop) ;;
        cinnamon) dbus_args+=(cinnamon-session -a /etc/xdg/autostart) ;;
</pre>
<h3><span class="mw-headline" id="No_sound">No sound</span></h3>
<p>This could be a symptom of an issue with <i>loginctl</i>, so try that fix <a href="#loginctl_or_systemctl_--user_not_working">above</a>. The following error may be encountered in the system <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journal">journal</a>:
</p>
<pre>Failed to load module "module-x11-publish" (argument: "display=:10.0 xauthority="): initialization failed.
</pre>
<p>This is the result of <i>systemd</i> improperly starting PulseAudio. One workaround is to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Disable">disable</a> the <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a> files <code>pulseaudio.service</code> and <code>pulseaudio.socket</code> either for your own user or for all users, and make PulseAudio start when needed by setting <code>autospawn</code> to <code>yes</code> in <code>/etc/pulse/client.conf</code>.
</p>
<p>If sound still does not work, try manually starting PulseAudio with <code>pulseaudio &amp;</code> in your <code>~/.xinitrc</code>.
</p>
<h3><span class="mw-headline" id="Two-finger_scrolling_is_too_fast">Two-finger scrolling is too fast</span></h3>
<p>Use the xorg backend, make sure xorgxrdp is 0.9.19 or newer. Then add <code>XRDP_XORG_TOUCHPAD_SCROLL_HACK=yes</code> to the <code>[SessionVariables]</code> section of <code>/etc/xrdp/sesman.ini</code>.
</p>
<p>See <a rel="nofollow" class="external text" href="https://github.com/neutrinolabs/xorgxrdp/issues/150">upstream issue #150</a> for details.
</p>
<h3><span class="mw-headline" id="Restricted_functionality_within_remote_system">Restricted functionality within remote system</span></h3>
<p>A user may not have the same access permissions when logged into a system remotely as the same user does when logged in locally. Additional configuration may be required of the <a href="../en/Polkit.html" title="Polkit">polkit</a> permissions policies to grant access, including to mounted drives or to control network connections.
</p>
<h4><span class="mw-headline" id="Mounted_drives">Mounted drives</span></h4>
<p>For remote access permissions to mounted drives see <a href="../en/Udisks.html#Permissions" title="Udisks">udisks#Permissions</a>.
</p>
<h4><span class="mw-headline" id="NetworkManager">NetworkManager</span></h4>
<p>For remote access permissions to NetworkManager see <a href="../en/NetworkManager.html#Set_up_PolicyKit_permissions" title="NetworkManager">NetworkManager#Set up PolicyKit permissions</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a href="../en/TigerVNC.html" title="TigerVNC">TigerVNC</a> - VNC, an alternative to RDP, also used as backend here.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=freerdp">freerdp</a></span> a rdesktop fork that supports RDP 7.1 features including network level authentication (NLA). It primarily consists of the <code>xfreerdp</code> client. In addition, the <code>freerdp-shadow-cli</code> command provides a quick and easy way to start an RDP server.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Remote_desktop.html" title="Category:Remote desktop">Remote desktop</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Xrdp&amp;oldid=827859">https://wiki.archlinux.org/index.php?title=Xrdp&amp;oldid=827859</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 26 February 2025, at 18:54.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
