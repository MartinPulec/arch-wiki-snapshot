<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Working with the serial console - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Working_with_the_serial_console rootpage-Working_with_the_serial_console skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Configure_console_access_on_the_target_machine" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configure_console_access_on_the_target_machine">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Configure console access on the target machine</div>
		</a>
		
			<button aria-controls="toc-Configure_console_access_on_the_target_machine-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configure console access on the target machine subsection</span>
			</button>
		
		<ul id="toc-Configure_console_access_on_the_target_machine-sublist" class="vector-toc-list">
			<li id="toc-Boot_loader" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Boot_loader">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Boot loader</div>
			</a>
			
			<ul id="toc-Boot_loader-sublist" class="vector-toc-list">
				<li id="toc-GRUB" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GRUB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>GRUB</div>
			</a>
			
			<ul id="toc-GRUB-sublist" class="vector-toc-list">
				<li id="toc-GRUB_first_stage_serial_console" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#GRUB_first_stage_serial_console">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1.1</span>GRUB first stage serial console</div>
			</a>
			
			<ul id="toc-GRUB_first_stage_serial_console-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-GRUB_Legacy" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GRUB_Legacy">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>GRUB Legacy</div>
			</a>
			
			<ul id="toc-GRUB_Legacy-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-rEFInd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#rEFInd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.3</span>rEFInd</div>
			</a>
			
			<ul id="toc-rEFInd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Syslinux" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Syslinux">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.4</span>Syslinux</div>
			</a>
			
			<ul id="toc-Syslinux-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Kernel" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Kernel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Kernel</div>
			</a>
			
			<ul id="toc-Kernel-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-getty" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#getty">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>getty</div>
			</a>
			
			<ul id="toc-getty-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Making_Connections" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Making_Connections">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Making Connections</div>
		</a>
		
			<button aria-controls="toc-Making_Connections-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Making Connections subsection</span>
			</button>
		
		<ul id="toc-Making_Connections-sublist" class="vector-toc-list">
			<li id="toc-Connect_using_a_terminal_emulator_program" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connect_using_a_terminal_emulator_program">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Connect using a terminal emulator program</div>
			</a>
			
			<ul id="toc-Connect_using_a_terminal_emulator_program-sublist" class="vector-toc-list">
				<li id="toc-dterm" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#dterm">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>dterm</div>
			</a>
			
			<ul id="toc-dterm-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Minicom" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Minicom">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>Minicom</div>
			</a>
			
			<ul id="toc-Minicom-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-picocom" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#picocom">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.3</span>picocom</div>
			</a>
			
			<ul id="toc-picocom-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Screen">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.4</span>Screen</div>
			</a>
			
			<ul id="toc-Screen-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Serialclient" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Serialclient">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.5</span>Serialclient</div>
			</a>
			
			<ul id="toc-Serialclient-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-tinyserial" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#tinyserial">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.6</span>tinyserial</div>
			</a>
			
			<ul id="toc-tinyserial-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-tio" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#tio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.7</span>tio</div>
			</a>
			
			<ul id="toc-tio-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Graphical_front-ends" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Graphical_front-ends">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Graphical front-ends</div>
			</a>
			
			<ul id="toc-Graphical_front-ends-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Windows_clients" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Windows_clients">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Windows clients</div>
			</a>
			
			<ul id="toc-Windows_clients-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installing_Arch_Linux_using_the_serial_console" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installing_Arch_Linux_using_the_serial_console">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Installing Arch Linux using the serial console</div>
		</a>
		
		<ul id="toc-Installing_Arch_Linux_using_the_serial_console-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Debugging_an_unresponsive_machine_using_a_serial_console" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Debugging_an_unresponsive_machine_using_a_serial_console">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Debugging an unresponsive machine using a serial console</div>
		</a>
		
		<ul id="toc-Debugging_an_unresponsive_machine_using_a_serial_console-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Ctrl+c_and_Minicom" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ctrl+c_and_Minicom">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Ctrl+c and Minicom</div>
			</a>
			
			<ul id="toc-Ctrl+c_and_Minicom-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Resizing_a_terminal" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Resizing_a_terminal">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Resizing a terminal</div>
			</a>
			
			<ul id="toc-Resizing_a_terminal-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Extra_hardware_serial_ports" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Extra_hardware_serial_ports">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Extra hardware serial ports</div>
			</a>
			
			<ul id="toc-Extra_hardware_serial_ports-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Working with the serial console</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Working_with_the_serial_console.html" title="Working with the serial console – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB" title="シリアルコンソール – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p>An Arch Linux machine can be configured for connections via the serial console port, which enables administration of a machine even if it has no keyboard, mouse, monitor, or network attached to it.
</p>
<p>Installation of Arch Linux is possible via the serial console as well.
</p>
<p>A basic environment for this scenario is two machines connected using a serial cable (9-pin connector cable).
The administering machine can be any Unix/Linux or Windows machine with a terminal emulator program (PuTTY or Minicom, for example).
</p>
<p>The configuration instructions below will enable boot loader menu selection, boot messages, and terminal forwarding to the serial console.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Configure_console_access_on_the_target_machine">Configure console access on the target machine</span></h2>
<h3><span class="mw-headline" id="Boot_loader">Boot loader</span></h3>
<h4><span class="mw-headline" id="GRUB">GRUB</span></h4>
<p>When using <a href="../en/GRUB.html" title="GRUB">GRUB</a> with a generated <code>grub.cfg</code>, edit <code>/etc/default/grub</code> and enable serial input and output support:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/default/grub</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
GRUB_TERMINAL_INPUT="console serial"
...
GRUB_TERMINAL_OUTPUT="gfxterm serial"
...</pre>
<p>Next add the <code>GRUB_SERIAL_COMMAND</code> variable and set the options for the serial connection. For COM1 (<code>/dev/ttyS0</code>) with baud rate of 115200 bit/s:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/default/grub</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
GRUB_SERIAL_COMMAND="serial --unit=0 --speed=115200"</pre>
<p>Read GRUB's manual on <a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/manual/grub/grub.html#Serial-terminal">Using GRUB via a serial line</a> and the <a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/manual/grub/grub.html#serial">serial command</a> for detailed explanation of the available options.
</p>
<h5><span class="mw-headline" id="GRUB_first_stage_serial_console">GRUB first stage serial console</span></h5>
<p>When GRUB is installed to an encrypted /boot/ partition - GRUB first stage (core.img) will show <code>Enter passphrase for hdX,gptY:</code> password prompt only on platform console and will not show anything in serial console even if all serial console configuration steps were done properly.
</p>
<p>This happens because the <code>grub-install</code> has special behavior for <code>GRUB_ENABLE_CRYPTODISK=y</code> and will create early config placed in <code>/boot/grub/PLATFORM/load.cfg</code> but <code>grub-install</code> ignores serial console configuration from <code>/etc/default/grub</code> for GRUB first stage.
</p>
<p>The <code>/boot/grub/PLATFORM/load.cfg</code> file gets overwritten each time <code>grub-install</code> is launched.
</p>
<p>To get the GRUB cryptodisk password prompt on the serial console a few extra configuration steps are required:
</p>
<p>1. Run the following command to generate <code>/boot/grub/PLATFORM/load.cfg</code> and see the correct <code>grub-mkimage</code> parameters for your system:
</p>
<p>EFI platforms:
</p>
<pre># grub-install --verbose 2&gt;&amp;1 | grep grub-mkimage
</pre>
<p>BIOS platorms:
</p>
<pre># grub-install --verbose /dev/YOUR_BOOT_DISK 2&gt;&amp;1 | grep grub-mkimage
</pre>
<p>You can reboot the system to check if it boots properly, but you should save the output of the commahd above - it will be hecessary at step 4.
</p>
<p>2. Copy <code>/boot/grub/PLATFORM/load.cfg</code> to <code>/boot/grub/PLATFORM/early-grub.cfg</code>
</p>
<p>3. Add the following lines at the beginning of <code>/boot/grub/PLATFORM/early-grub.cfg</code> (change those lines according to desired configuration as described above):
</p>
<pre>serial --unit=0 --speed=115200
terminal_input serial console
terminal_output serial console
</pre>
<p>4. Edit <code>grub-mkimage</code> parameters from step 1 (the <code>grub-install</code> output): 
</p>
<p>Replace <code>--config '/boot/grub/PLATFORM/load.cfg'</code> to <code>--config '/boot/grub/PLATFORM/early-grub.cfg'</code>
Remove paramters with empty arguments (like <code>--dtb <i></i></code><i> and <code>--sbat </code></i>) and add <code>serial</code> and <code>terminal</code> modules to the end of the <code>grub-mkimage</code> parameters list.
</p>
<p>5. Run <code>grub-mkimage</code> with these parameters.
</p>
<p>6. On BIOS platforms like <code>i386-pc</code> (for EFI platforms just skip this step) run the following command to install new <code>core.img</code> to your system:
</p>
<pre># grub-bios-setup -d /boot/grub/i386-pc/ /dev/YOUR_BOOT_DISK
</pre>
<p>In order to revert those changes - just reinstall GRUB using <code>grub-install</code> command.
</p>
<h4><span class="mw-headline" id="GRUB_Legacy">GRUB Legacy</span></h4>
<p>Edit the <a href="../en/GRUB_Legacy.html" title="GRUB Legacy">GRUB Legacy</a> configuration file <code>/boot/grub/menu.lst</code> and add these lines to the general area of the configuration:
</p>
<pre>serial --unit=0 --speed=9600
terminal --timeout=5 serial console
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When the <code>terminal --timeout=5 serial console</code> line is added to your <code>menu.lst</code>, your boot sequence will now show a series of <code>Press any key to continue</code> messages. If no key is pressed, the boot menu will appear on whichever (serial or console) appears first in the <code>terminal</code> configuration line.</div>
<h4><span class="mw-headline" id="rEFInd">rEFInd</span></h4>
<p><a href="../en/REFInd.html" title="REFInd">rEFInd</a> supports serial console only in text mode. Edit <code>refind.conf</code> and uncomment <code>textonly</code>.
</p>
<h4><span class="mw-headline" id="Syslinux">Syslinux</span></h4>
<p>To enable serial console in <a href="../en/Syslinux.html" title="Syslinux">Syslinux</a>, edit <code>syslinux.cfg</code> and add <code>SERIAL</code> as the first directive in the configuration file.
</p>
<p>For COM1 (<code>/dev/ttyS0</code>) with baud rate of 115200 bit/s:
</p>
<pre>SERIAL 0 115200
</pre>
<p>The serial parameters are hardcoded to 8 bits, no parity and 1 stop bit.<a rel="nofollow" class="external autonumber" href="https://wiki.syslinux.org/wiki/index.php/SYSLINUX#SERIAL_port_.5Bbaudrate_.5Bflowcontrol.5D.5D">[1]</a>. Read <a rel="nofollow" class="external text" href="https://wiki.syslinux.org/wiki/index.php?title=Config#SERIAL">Syslinux Wiki:Config#SERIAL</a> for the directive's options.
</p>
<h3><span class="mw-headline" id="Kernel">Kernel</span></h3>
<p>Kernel's output can be sent to serial console by setting the <code>console=</code> <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>. The last specified <code>console=</code> will be set as <code>/dev/console</code>.
</p>
<pre>console=tty0 console=ttyS0,115200
</pre>
<p>See <a rel="nofollow" class="external free" href="https://docs.kernel.org/admin-guide/serial-console.html">https://docs.kernel.org/admin-guide/serial-console.html</a>.
</p>
<h3><span class="mw-headline" id="getty">getty</span></h3>
<p>At boot, <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-getty-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-getty-generator.8">systemd-getty-generator(8)</a></span> will start a <a href="../en/Getty.html" title="Getty">getty</a> instance for each console specified in the kernel command line.
</p>
<p>If you have not configured <code>console=</code> in kernel command line <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> <code>serial-getty@<i>device</i>.service</code>. For <code>/dev/ttyS0</code> (COM1) that would be <code>serial-getty@ttyS0.service</code>. <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> the service to start it at boot. 
</p>
<p>Unless specified otherwise in the kernel command line, getty will be expecting 38400 bit/s baud rate, 8 data bits, no parity and one stop bit-times.
</p>
<h2><span class="mw-headline" id="Making_Connections">Making Connections</span></h2>
<h3><span class="mw-headline" id="Connect_using_a_terminal_emulator_program">Connect using a terminal emulator program</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Before making a connection, it is recommended to add yourself to the <code>uucp</code> <a href="../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">user group</a>. Otherwise you will need root's permission to make a connection.</div>
<p>Perform these steps on the machine used to connect the remote console.
</p>
<h4><span class="mw-headline" id="dterm">dterm</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dterm-git/">dterm-git</a></span><sup><small>AUR</small></sup> is a tiny serial communication program. If you invoke it without parameters, it will connect to <code>/dev/ttyS0</code> at 9600 baud by default. The following example connect to <code>/dev/ttyS0</code> at 115200 baud, with 8 data bits, no parity bit and 1 stop bit-times:
</p>
<pre>$ dterm 115200 8 n 1
</pre>
<p>See its <a rel="nofollow" class="external text" href="https://github.com/hefloryd/dterm/blob/master/README.txt">README</a> for more examples.
</p>
<h4><span class="mw-headline" id="Minicom">Minicom</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=minicom">minicom</a></span> can be obtained from the official repositories. Start Minicom in setup mode:
</p>
<pre>$ minicom -s
</pre>
<p>Using the textual navigation menu, change the serial port settings to the following:
</p>
<pre>Serial Device: /dev/ttyS0
Bps/Par/Bits: 9600 8N1
</pre>
<p>Press Enter to exit the menus (pressing Esc will not save changes).
Remove the modem Init and Reset strings, as we are not connecting to a modem. To do this, under the <i>Modem and Dialing</i> menu, delete the Init and Reset strings. Optionally save the configuration by choosing <i>save setup as dfl</i> from the main menu.
Restart minicom with the serial cable connected to the target machine.
To end the session, press <code>Ctrl+A</code> followed by <code>Ctrl+X</code>.
</p>
<h4><span class="mw-headline" id="picocom">picocom</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=picocom">picocom</a></span> is a tiny dumb-terminal emulation program that is very like minicom, but instead of <i>mini</i>, it is <i>pico</i>. The following example connect to <code>ttyS0</code> at 9600 bps:
</p>
<pre>$ picocom -b 9600 /dev/ttyS0
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> if the backspace key will not work properly try out this option: <code>--omap delbs</code>
</div>
<p>See its manual for detailed usage.
</p>
<h4><span class="mw-headline" id="Screen">Screen</span></h4>
<p><a href="../en/GNU_Screen.html" title="GNU Screen">GNU Screen</a> is able to connect to a serial port. It will connect at 9600 baud by default:
</p>
<pre>$ screen /dev/ttyS0
</pre>
<p>A different baud rate (e.g. 115200) may be specified on the command line.
</p>
<pre>$ screen /dev/ttyS0 115200
</pre>
<p>To end the session, press <code>Ctrl+a</code> followed by <code>K</code>. Alternatively, press <code>Ctrl+a</code>, type <code>:quit</code> and confirm it by pressing <code>Enter</code>.
</p>
<h4><span class="mw-headline" id="Serialclient">Serialclient</span></h4>
<p>Serialclient<a rel="nofollow" class="external autonumber" href="https://github.com/flagos/serialclient">[2]</a> is a CLI client for serial connection written in ruby. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ruby">ruby</a></span> package, then install it with the following:
</p>
<pre># gem install serialclient
</pre>
<p>Then, you can use like this:
</p>
<pre>$ serialclient -p /dev/ttyS0
</pre>
<h4><span class="mw-headline" id="tinyserial">tinyserial</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tinyserial/">tinyserial</a></span><sup><small>AUR</small></sup> is a <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=minicom">minicom</a></span> replacement for accessing serial ports on Linux inspired by FreeBSD 'tip'.
</p>
<pre>$ com /dev/ttyS0 9600
</pre>
<h4><span class="mw-headline" id="tio">tio</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tio/">tio</a></span><sup><small>AUR</small></sup> is a simple serial device tool which features a straightforward command-line and configuration file interface to easily connect to serial TTY devices for basic I/O operations. It has less focus on classic terminal/modem features and more focus on the needs of embedded developers and hackers. tio was originally created to replace screen for connecting to serial devices when used in combination with tmux.
</p>
<pre>$ tio /dev/ttyUSB0
</pre>
<h3><span class="mw-headline" id="Graphical_front-ends">Graphical front-ends</span></h3>
<ul><li>
<b>cutecom</b> — A GUI enabled serial monitor.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.com/cutecom/cutecom">https://gitlab.com/cutecom/cutecom</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cutecom/">cutecom</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>PuTTY</b> — A terminal integrated SSH/Telnet client.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.chiark.greenend.org.uk/~sgtatham/putty/">https://www.chiark.greenend.org.uk/~sgtatham/putty/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=putty">putty</a></span>
</dd></dl>
<ul><li>
<b>moserial</b> — A GTK-based serial terminal, primarily intended for technical users and hardware hackers who need to communicate with embedded systems, test equipment, and serial consoles.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.gnome.org/moserial">https://wiki.gnome.org/moserial</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=moserial">moserial</a></span>
</dd></dl>
<ul><li>
<b>gtkterm</b> — GTKTerm is a simple, graphical serial port terminal emulator for Linux and possibly other POSIX-compliant operating systems. It can be used to communicate with all kinds of devices with a serial interface, such as embedded computers, microcontrollers, modems, GPS receivers, CNC machines and more.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Jeija/gtkterm">https://github.com/Jeija/gtkterm</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gtkterm/">gtkterm</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h3><span class="mw-headline" id="Windows_clients">Windows clients</span></h3>
<p>On Windows machines, connect to the serial port using programs like <a rel="nofollow" class="external text" href="https://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PuTTY</a> or <a rel="nofollow" class="external text" href="https://sites.google.com/site/terminalbpp/">Terminalbpp</a>.
</p>
<h2><span class="mw-headline" id="Installing_Arch_Linux_using_the_serial_console">Installing Arch Linux using the serial console</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The Arch Linux monthly release(i.e. the installation medium)'s boot loader has been configured<a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/configs/releng/syslinux/archiso_head.cfg#L1">[3]</a> to listen on 0 port(<code>ttyS0</code>/COM1) at 115200 bps, with 8 data bits, no parity bit and 1 stop bit-times.</div>
<ol>
<li>Connect to the target machine using the method described above.</li>
<li>Boot the target machine using the Arch Linux installation medium.</li>
<li>When the bootloader appears, select <i>Boot Arch Linux (&lt;arch&gt;)</i> and press <code>Tab</code> to edit</li>
<li>Append <code>console=ttyS0,115200</code> and press <code>Enter</code>.</li>
<li>Now systemd should detect ttyS0 and spawn a serial getty on it. Login as <code>root</code> and start the installation as usual.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>After setup is complete, the console settings will not be saved on the target machine; in order to avoid having to connect a keyboard and monitor, configure console access on the target machine before rebooting.</li>
<li>While a port speed of 9600 is used in most of the examples in this document, working with higher values is recommended (List of available speeds is displayed in Minicom by pressing <code>Ctrl+a</code> and then <code>p</code>)</li>
</ul>
</div>
<h2><span class="mw-headline" id="Debugging_an_unresponsive_machine_using_a_serial_console">Debugging an unresponsive machine using a serial console</span></h2>
<p>Even though <a rel="nofollow" class="external autonumber" href="https://lists.archlinux.org/archives/list/arch-general@lists.archlinux.org/message/R3B32YF5EBKZCYF3TGKG6WTDONQ6RFS4/">[4]</a> has only raw and terse instructions, it presents the full scene. It is important to note that here, the machine under test got unresponsive in a  reproducible manner. And that it happened during normal operation. So it could be accessed normally before it needed debugging. However, in general, the serial console is also useful for debugging boot issues. Perhaps by configuring the boot loader by hand at machine startup time. Also note the mentioned <a href="../en/General_troubleshooting.html#netconsole" class="mw-redirect" title="Netconsole">netconsole</a> within the P.S paragraph of the external link from this section.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id="Ctrl.2Bc_and_Minicom"></span><span class="mw-headline" id="Ctrl+c_and_Minicom">Ctrl+c and Minicom</span>
</h3>
<p>If you are having trouble sending a <code>Ctrl+c</code> command through minicom you need to switch off hardware flow control in the device settings (<code>minicom -s</code>), which then enables the break.
</p>
<h3><span class="mw-headline" id="Resizing_a_terminal">Resizing a terminal</span></h3>
<p>Unlike ssh, serial connections do not have a mechanism to transfer something like <code>SIGWINCH</code> when a terminal is resized. This can cause weird problems with some full-screen programs (e.g. <code>less</code>) when you resize your terminal emulator's window.
</p>
<p>Resizing the terminal via <code>stty</code> is a workaround:
</p>
<pre>$ stty rows <i>lines</i> cols <i>columns</i>
</pre>
<p>However, this requires you to manually input the proper geometry. The following methods should be simpler.
</p>
<p>1. There is a lesser-known utility called <code>resize</code>, shipped with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xterm">xterm</a></span>, that can solve this problem. Invoke it without parameters after you resize the terminal emulator's window:
</p>
<pre>$ resize
</pre>
<p>2. If you do not want to install xterm, it is possible to do the same work via a shell function. Put the following function into your bash/zshrc and invoke it without parameters after resizing the terminal emulator's window:
</p>
<pre>rsz() {
	if [[ -t 0 &amp;&amp; $# -eq 0 ]];then
		local IFS='[;' escape geometry x y
		echo -ne '\e7\e[r\e[999;999H\e[6n\e8'
		read -t 5 -sd R escape geometry || {
			echo unsupported terminal emulator. &gt;&amp;2
			return 1
		}
		x="${geometry##*;}" y="${geometry%%;*}"
		if [[ ${COLUMNS} -eq "${x}" &amp;&amp; ${LINES} -eq "${y}" ]];then
			echo "${TERM} ${x}x${y}"
		elif [[ "$x" -gt 0 &amp;&amp; "$y" -gt 0 ]];then
			echo "${COLUMNS}x${LINES} -&gt; ${x}x${y}"
			stty cols ${x} rows ${y}
		else
			echo unsupported terminal emulator. &gt;&amp;2
			return 1
		fi
	else
		echo 'Usage: rsz'
	fi
}</pre>
<h3><span class="mw-headline" id="Extra_hardware_serial_ports">Extra hardware serial ports</span></h3>
<p>The generic 8250 serial driver exposes 32 hardware serial ports, as set in the Arch kernel configuration. This means by default serial ports are created numbered from <code>/dev/ttyS0</code> to <code>/dev/ttyS31</code>. On most systems many of these ports will be non-functional.
</p>
<p>The number can be reduced by setting the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> <code>8250.nr_uarts</code>. E.g.:
</p>
<pre>8250.nr_uarts=5
</pre>
<p>This value must be set as a kernel boot parameter not a module option, as the <code>serial8250</code> driver is compiled into the kernel image.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Hardware.html" title="Category:Hardware">Hardware</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Working_with_the_serial_console&amp;oldid=806996">https://wiki.archlinux.org/index.php?title=Working_with_the_serial_console&amp;oldid=806996</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 April 2024, at 01:17.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
