<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Mac/Troubleshooting - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Mac_Troubleshooting rootpage-Mac skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Video" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Video">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Video</div>
		</a>
		
			<button aria-controls="toc-Video-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Video subsection</span>
			</button>
		
		<ul id="toc-Video-sublist" class="vector-toc-list">
			<li id="toc-NVIDIA" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#NVIDIA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>NVIDIA</div>
			</a>
			
			<ul id="toc-NVIDIA-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Touchpad" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Touchpad">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Touchpad</div>
		</a>
		
			<button aria-controls="toc-Touchpad-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Touchpad subsection</span>
			</button>
		
		<ul id="toc-Touchpad-sublist" class="vector-toc-list">
			<li id="toc-Natural_scrolling" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Natural_scrolling">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Natural scrolling</div>
			</a>
			
			<ul id="toc-Natural_scrolling-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Older_MacBook_models" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Older_MacBook_models">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Older MacBook models</div>
			</a>
			
			<ul id="toc-Older_MacBook_models-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Keyboard" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Keyboard">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Keyboard</div>
		</a>
		
			<button aria-controls="toc-Keyboard-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Keyboard subsection</span>
			</button>
		
		<ul id="toc-Keyboard-sublist" class="vector-toc-list">
			<li id="toc-Keyboard_backlight" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Keyboard_backlight">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Keyboard backlight</div>
			</a>
			
			<ul id="toc-Keyboard_backlight-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Wi-Fi" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Wi-Fi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Wi-Fi</div>
		</a>
		
		<ul id="toc-Wi-Fi-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Fan_Control" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Fan_Control">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Fan Control</div>
		</a>
		
		<ul id="toc-Fan_Control-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Power_management" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Power_management">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Power management</div>
		</a>
		
			<button aria-controls="toc-Power_management-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Power management subsection</span>
			</button>
		
		<ul id="toc-Power_management-sublist" class="vector-toc-list">
			<li id="toc-Disabling_Thunderbolt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disabling_Thunderbolt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Disabling Thunderbolt</div>
			</a>
			
			<ul id="toc-Disabling_Thunderbolt-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Suspend_and_hibernate" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Suspend_and_hibernate">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Suspend and hibernate</div>
			</a>
			
			<ul id="toc-Suspend_and_hibernate-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Wake_up_after_suspend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Wake_up_after_suspend">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Wake up after suspend</div>
			</a>
			
			<ul id="toc-Wake_up_after_suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Light_sensor" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Light_sensor">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Light sensor</div>
		</a>
		
		<ul id="toc-Light_sensor-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Sound" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Sound">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Sound</div>
		</a>
		
			<button aria-controls="toc-Sound-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Sound subsection</span>
			</button>
		
		<ul id="toc-Sound-sublist" class="vector-toc-list">
			<li id="toc-Kernel_options" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Kernel_options">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>Kernel options</div>
			</a>
			
			<ul id="toc-Kernel_options-sublist" class="vector-toc-list">
				<li id="toc-Model-specifics" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Model-specifics">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1.1</span>Model-specifics</div>
			</a>
			
			<ul id="toc-Model-specifics-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Disabling_S/PDIF" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disabling_S/PDIF">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.2</span>Disabling S/PDIF</div>
			</a>
			
			<ul id="toc-Disabling_S/PDIF-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Auto-Mute_Mode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Auto-Mute_Mode">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3</span>Auto-Mute Mode</div>
			</a>
			
			<ul id="toc-Auto-Mute_Mode-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-USB_audio_interface" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#USB_audio_interface">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.4</span>USB audio interface</div>
			</a>
			
			<ul id="toc-USB_audio_interface-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Bluetooth" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Bluetooth">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Bluetooth</div>
		</a>
		
		<ul id="toc-Bluetooth-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Magic_Mouse" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Magic_Mouse">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>Magic Mouse</div>
		</a>
		
		<ul id="toc-Magic_Mouse-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Webcam" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Webcam">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">11</span>Webcam</div>
		</a>
		
			<button aria-controls="toc-Webcam-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Webcam subsection</span>
			</button>
		
		<ul id="toc-Webcam-sublist" class="vector-toc-list">
			<li id="toc-iSight" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#iSight">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">11.1</span>iSight</div>
			</a>
			
			<ul id="toc-iSight-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-FaceTime_HD_Camera" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#FaceTime_HD_Camera">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">11.2</span>FaceTime HD Camera</div>
			</a>
			
			<ul id="toc-FaceTime_HD_Camera-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Temperature_sensors" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Temperature_sensors">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">12</span>Temperature sensors</div>
		</a>
		
		<ul id="toc-Temperature_sensors-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Avoid_long_EFI_wait_before_booting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Avoid_long_EFI_wait_before_booting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">13</span>Avoid long EFI wait before booting</div>
		</a>
		
		<ul id="toc-Avoid_long_EFI_wait_before_booting-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-kworker_using_high_CPU" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#kworker_using_high_CPU">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">14</span>kworker using high CPU</div>
		</a>
		
		<ul id="toc-kworker_using_high_CPU-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Mavericks_upgrade_breaks_Arch_boot_option" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Mavericks_upgrade_breaks_Arch_boot_option">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">15</span>Mavericks upgrade breaks Arch boot option</div>
		</a>
		
		<ul id="toc-Mavericks_upgrade_breaks_Arch_boot_option-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Mac/Troubleshooting</span></h1>
				</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../en/Mac.html" title="Mac">Mac</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../../en/Mac.html" title="Mac">Mac</a></li>
<li><a href="../../en/General_troubleshooting.html" title="General troubleshooting">General troubleshooting</a></li>
<li><a href="../../en/Laptop/Apple.html" title="Laptop/Apple">Laptop/Apple</a></li>
</ul>
</div>
<p>This page contains troubleshooting solutions for Apple Macs. Most models have their own section in <a href="../../en/Laptop/Apple.html" title="Laptop/Apple">Laptop/Apple</a> for even more specific issues.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Video">Video</span></h2>
<p>Different Mac models have different graphic cards.
To see which graphics card you have type:
</p>
<pre>$ lspci -d ::03xx
</pre>
<ul>
<li>If it returns a string containing <code>Intel</code>, read <a href="../../en/Intel_graphics.html" title="Intel graphics">Intel graphics</a>.</li>
<li>If it returns <code>NVIDIA</code>, read <a href="../../en/NVIDIA.html" title="NVIDIA">NVIDIA</a>.</li>
<li>If it returns two lines, with both <code>NVIDIA</code> and <code>Intel</code>, your Mac has dual graphics. See <a href="../../en/MacBookPro10,x.html#Graphics" title="MacBookPro10,x">MacBookPro10,x#Graphics</a> for an example of one such setup that might apply in other cases.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Despite lots of confusion in online forums, the dual graphics on Mac are <a rel="nofollow" class="external text" href="https://arstechnica.com/gadgets/2010/04/inside-apples-automatic-gpu-switching/">not</a> <a href="../../en/NVIDIA_Optimus.html" class="mw-redirect" title="Optimus">Optimus</a>-based, and treating them as such will break your graphics. See instead <a href="../../en/MacBookPro10,x.html#Switching_to/from_GPUs_with_gpu-switch" title="MacBookPro10,x">MacBookPro10,x#Switching to/from GPUs with gpu-switch</a> or your laptop's specific article for instructions on setting up graphics switching.</div>
<ul><li>Otherwise if it returns <code>ATI</code> or <code>AMD</code>, read <a href="../../en/ATI.html" title="ATI">ATI</a> or <a href="../../en/AMDGPU.html" title="AMDGPU">AMDGPU</a>.</li></ul>
<h3><span class="mw-headline" id="NVIDIA">NVIDIA</span></h3>
<p>If you boot in EFI mode and NVIDIA binary drivers are working only in BIOS mode (e.g. you get black screen on EFI boot), try the approach described on <a rel="nofollow" class="external text" href="https://askubuntu.com/a/613573">Ask Ubuntu</a>.
</p>
<p>For the backlight to work properly you may need the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nvidia-bl-dkms/">nvidia-bl-dkms</a></span><sup><small>AUR</small></sup> package. If backlight control does not work afterwards, you should <a href="../../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Blacklist">blacklist</a> the <code>apple_bl</code> kernel module. If backlight control does not work even this way, try setting <code>options nvidia_bl max_level=0x1ffff shift=11</code> in <code>/etc/modprobe.d/nvidia_bl.conf</code>.
</p>
<p>Alternatively, you can choose to use the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pommed-light/">pommed-light</a></span><sup><small>AUR</small></sup> package. If you do so, you may wish to change the step settings in <code>/etc/pommed.conf.mactel</code> to something around 5000-10000 depending on how many levels of brightness you desire (the max brightness is around 80000).
</p>
<p>If the brightness does not function correctly through pommed, make sure you have installed the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nvidia-bl-dkms/">nvidia-bl-dkms</a></span><sup><small>AUR</small></sup> package and insert
</p>
<pre>$ find . -name "*" -exec sed -i 's/mbp_backlight/nvidia_backlight/' '{}' \;
</pre>
<p>into the second line of the pommed PKGBUILD build() function and rebuild the package. See the following <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=105091">forum post</a> for details.
</p>
<p>Another possible solution is:
</p>
<pre>$ find . -name "*" -exec sed -i 's/nvidia_backlight/apple_backlight/' '{}' \;
</pre>
<p>Alternatively, run <i>nvidia-settings</i>, edit <code>/etc/X11/xorg.conf</code> and add this line into the <code>Device</code> section:
</p>
<pre>Option "RegistryDwords" "EnableBrightnessControl=1"
</pre>
<p>Save, reboot and check if the backlight control works. See Ubuntu's <a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/MacBookPro5-5/Precise#LCD">Wiki page for the MacBookPro5,5</a> for details.
</p>
<h2><span class="mw-headline" id="Touchpad">Touchpad</span></h2>
<p>The touchpad should have basic functionality by default. A true multitouch driver which behaves very similarly to native macOS is included in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-input-mtrack-git/">xf86-input-mtrack-git</a></span><sup><small>AUR</small></sup> package.  Configuration options are documented in the <a rel="nofollow" class="external text" href="https://github.com/p2rkw/xf86-input-mtrack/blob/master/README.md">readme</a>.
</p>
<p>The following mtrack options work well on a MacBook7,1:
</p>
<pre>Option "Thumbsize" "50"
Option "ScrollDistance" "100"
</pre>
<p>Probably, you also need to add:
</p>
<pre>MatchDevicePath "/dev/input/event10"
</pre>
<p>To disable tap-to-click (that is, to press down to click) by default, add the following to your mtrack configuration section
</p>
<pre>Option "TapButton1" "0"  
Option "TapButton2" "0"
Option "TapButton3" "0"
</pre>
<h3><span class="mw-headline" id="Natural_scrolling">Natural scrolling</span></h3>
<p>To configure natural two finger scrolling similar to <a rel="nofollow" class="external text" href="https://support.apple.com/en-us/HT204895">macOS</a>, refer to <a href="../../en/Touchpad_Synaptics.html#Natural_scrolling" title="Touchpad Synaptics">Touchpad Synaptics#Natural scrolling</a>.
</p>
<p>If you are using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-input-mtrack-git/">xf86-input-mtrack-git</a></span><sup><small>AUR</small></sup>, you can simply swap the scroll up and scroll down buttons (along with the scroll left and scroll right):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-mtrack.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Option "ScrollUpButton" "5"
Option "ScrollDownButton" "4"
Option "ScrollLeftButton" "7"
Option "ScrollRightButton" "6"
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For users looking to add more of macOS's multitouch gestures to Arch, <a rel="nofollow" class="external text" href="https://github.com/iberianpig/xSwipe">xSwipe</a> for <a href="../../en/Touchpad_Synaptics.html" class="mw-redirect" title="Synaptics">Synaptics</a> or <a rel="nofollow" class="external text" href="https://github.com/iberianpig/fusuma">fusuma</a> for <a href="../../en/Libinput.html" title="Libinput">libinput</a> provide these functions.</div>
<h3><span class="mw-headline" id="Older_MacBook_models">Older MacBook models</span></h3>
<p>On older MacBook models (pre-multitouch, e.g. MacBook2,1), the touchpad will not function properly until you <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span>. See <a href="../../en/Touchpad_Synaptics.html" title="Touchpad Synaptics">Touchpad Synaptics</a> for details.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gpointing-device-settings/">gpointing-device-settings</a></span><sup><small>AUR</small></sup> provides a simple GUI for configuring Synaptics.</div>
<h2><span class="mw-headline" id="Keyboard">Keyboard</span></h2>
<p>Mac keyboards work by default. For swapping <code>Fn</code> keys with <code>F<i>x</i></code> keys see <a href="../../en/Apple_Keyboard.html" title="Apple Keyboard">Apple Keyboard</a>.
</p>
<p>Map them with <a href="../../en/Xbindkeys.html" title="Xbindkeys">xbindkeys</a> or through <a href="../../en/Desktop_environment.html" title="Desktop environment">desktop environment</a> preferences. Alternatively, <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pommed-light/">pommed-light</a></span><sup><small>AUR</small></sup> package.
</p>
<p>Edit the <code>/etc/pommed.conf</code> according to your hardware, building it from <code>/etc/pommed.conf.mac</code> or <code>/etc/pommed.conf.ppc</code> example files.
</p>
<p>Note that you can also run it without a configuration file, the defaults may work for you. Then <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> <code>pommed.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> See the <a href="../../en/Xorg.html" class="mw-redirect" title="Xorg input hotplugging">Xorg input hotplugging</a> page for other configuration information.</div>
<h3><span class="mw-headline" id="Keyboard_backlight">Keyboard backlight</span></h3>
<p>The keyboard backlight is controlled by <code>/sys/class/leds/smc::kbd_backlight</code>.  Write the desired value to <code>brightness</code> in that directory. See <a href="../../en/Keyboard_backlight.html" title="Keyboard backlight">Keyboard backlight</a> for detailed information. Common choices for backlight control are <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=brightnessctl">brightnessctl</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/light/">light</a></span><sup><small>AUR</small></sup>.
</p>
<p><b>Ensuring the keyboard backlight is on when entering the LUKS decryption password</b>
</p>
<p>This can be done via <a href="../../en/Mkinitcpio.html#HOOKS" title="Mkinitcpio">initcpio hooks</a>. First, <a href="../../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Create">create</a> an <a href="../../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a> install script: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/initcpio/install/mac_kb_backlight</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/env bash

build() {
  add_module applesmc
  add_runscript
}
</pre>
<p>Next, create an executable hook: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/initcpio/hooks/mac_kb_backlight</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/env bash

run_hook() {
  if [ -f "/sys/class/leds/smc::kbd_backlight/brightness" ]; then
    echo 100 &gt; "/sys/class/leds/smc::kbd_backlight/brightness"
  fi
}
</pre>
<p>Finally, add this custom hook to the <code>HOOKS</code> array in <code>/etc/mkinitcpio.conf</code>, and ensure it is placed before the <code>encrypt</code> hook:
</p>
<pre>HOOKS=(... mac_kb_backlight encrypt ...)
</pre>
<p>Remember to <a href="../../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a> images after these steps to include the custom script.
</p>
<h2><span class="mw-headline" id="Wi-Fi">Wi-Fi</span></h2>
<p>Different Mac models have different wireless cards.
</p>
<p>Check what card you have:
</p>
<pre># lspci -d ::0280
</pre>
<ul>
<li>If you have an Atheros card, all should work out-of-the-box.</li>
<li>If you have a Broadcom card, follow <a href="../../en/Broadcom_wireless.html#Installation" title="Broadcom wireless">Broadcom wireless#Installation</a>.</li>
<li>5.0 and 6.0 generation Macs may have a BCM43xx, follow <a href="../../en/Broadcom_wireless.html#broadcom-wl" title="Broadcom wireless">Broadcom wireless#broadcom-wl</a>.
<ul><li>If you have the correct Broadcom DKMS driver (i.e. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=broadcom-wl-dkms">broadcom-wl-dkms</a></span>) installed and your Wi-Fi card is still not being recognized, try rebuilding the driver (See <a href="../../en/Dynamic_Kernel_Module_Support.html" title="Dynamic Kernel Module Support">Dynamic Kernel Module Support</a>).</li></ul>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>If your connection frequently drops, you may have to turn off Wi-Fi power management.</li>
<li>Eduroam or similar may crash your network manager. Simply delaying the connection after login should do the trick.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Fan_Control">Fan Control</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/macfand-git/">macfand-git</a></span><sup><small>AUR</small></sup> is a fan control daemon that supports most Intel Macs, its configuration file is located at <code>/etc/macfand.conf</code>.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mbpfan-git/">mbpfan-git</a></span><sup><small>AUR</small></sup> is available for MacBook Pro users.
</p>
<h2><span class="mw-headline" id="Power_management">Power management</span></h2>
<p><a href="../../en/TLP.html" title="TLP">TLP</a> is a very simple set of scripts that will maximize your battery duration. A MacBook Air 2013 with TLP provides about 11 hours of light usage with just TLP installed.
All the usual <a href="../../en/Power_management.html" title="Power management">power management</a> recommendations apply as well.
</p>
<h3><span class="mw-headline" id="Disabling_Thunderbolt">Disabling Thunderbolt</span></h3>
<p>Linux still has poor power management for Thunderbolt adapters on Macs. This can cause the TB adapter(s) to be always-on and prevent the CPU from going into the deepest power-saving states <a rel="nofollow" class="external autonumber" href="https://bugzilla.kernel.org/show_bug.cgi?id=92111">[1]</a>, drawing ca. 2W additional power even when not in use <a rel="nofollow" class="external autonumber" href="https://github.com/Dunedan/mbp-2016-linux/issues/24#issuecomment-310952415">[2]</a>. An easy way to see the CPU states is using powertop. The problem arises when the CPU does not go below C3 as a package (Pkg%pc3).
</p>
<p>One workaround is to add <code>acpi_osi=!Darwin</code> to the <a href="../../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>, thereby telling the firmware that the system is not compatible with macOS <a rel="nofollow" class="external autonumber" href="https://docs.kernel.org/firmware-guide/acpi/osi.html">[3]</a>. This should disable the TB adapter (at least on older Macs), and thus reduce power consumption greatly, but will probably come with side-effects (e.g. no Thunderbolt, maybe others?).
</p>
<p>It is also possible to <a href="../../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Blacklist">blacklist</a> the thunderbolt module and then putting the controllers to sleep with
</p>
<pre># echo auto &gt; /sys/bus/pci/devices/0000:07:00.0/power/control
</pre>
<p>Check the correct device number with lspci. This can also be <a href="../../en/Systemd.html#systemd-tmpfiles_-_temporary_files" title="Systemd">automated</a>. This method reduces power consumption slightly, but still consumes 0.9 W more than the previous method on a MacBook Air 2013.
</p>
<h3><span class="mw-headline" id="Suspend_and_hibernate">Suspend and hibernate</span></h3>
<p>Issues were reported where the machine would "suspend immediately after resume" in certain conditions when suspending by closing the lid. This was solved by setting the option "sleep-inactive-ac-type" to "nothing" using dconf-editor, option path: org → gnome → settings-daemon → plugins → power).
</p>
<p>See <a href="../../en/Power_management/Suspend_and_hibernate.html" class="mw-redirect" title="Suspend and hibernate">Suspend and hibernate</a> for details on how to configure hibernation. Noticeably, you will need a swap partition or file (see the mentioned article for further instructions).
</p>
<p>Slow wake ups from a suspend state can be resolved by disabling Thunderbolt. See <a href="#Disabling_Thunderbolt">#Disabling Thunderbolt</a>.
</p>
<h3><span class="mw-headline" id="Wake_up_after_suspend">Wake up after suspend</span></h3>
<p>Occasionally a Mac laptop may wake up immediately after suspending. This may not be immediately evident as the screen may stay off despite the system being awake, and can be checked by seeing whether the keyboard backlight stays on.
</p>
<p>In <code>/proc/acpi/wakeup</code>, check to see that XHC1 and LID0 are enabled. If they are, one can temporarily disable just LID0 with the following to see if the issue resolves
</p>
<pre># echo LID0 &gt; /proc/acpi/wakeup
</pre>
<p>To make the change persistent, <a href="../../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Create">create</a>: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/suspend-fix.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Fix for the suspend issue
[Service]
Type=oneshot
ExecStart=/bin/sh -c "echo LID0 &gt; /proc/acpi/wakeup"
[Install]
WantedBy=multi-user.target</pre>
<p>And then <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> <code>suspend-fix.service</code>. To wake the system from this point, use the keyboard.
</p>
<p>If this does not resolve the issue, XHC1 may be the issue and one can disable both it and LID0 temporarily with the following to see if it goes away. 
</p>
<pre># echo XHC1 &gt; /proc/acpi/wakeup &amp;&amp; echo LID0 &gt; /proc/acpi/wakeup
</pre>
<p>Disabling only XHC1 is not recommended if you have this bug, since it may result in glitchy behavior. Disable both on every boot as follows:  
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/suspend-fix.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Fix for the suspend issue
[Service]
Type=oneshot
ExecStart=/bin/sh -c "echo XHC1 &gt; /proc/acpi/wakeup &amp;&amp; echo LID0 &gt; /proc/acpi/wakeup"
[Install]
WantedBy=multi-user.target</pre>
<p>To wake the system from this point, only the power button can be used.
</p>
<h2><span class="mw-headline" id="Light_sensor">Light sensor</span></h2>
<p>The values can be read from <code>/sys/devices/platform/applesmc.768/light</code>: it returns two-tuples like (4,0). 
</p>
<p>If you want to use the built in light sensor to automatically adjust screen and keyboard backlight brightness: 
</p>
<ul><li>
<b>mackbook-lighter</b> — Macbook screen/keyboard backlight CLI and auto-adjust on ambient light.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/harttle/macbook-lighter">https://github.com/harttle/macbook-lighter</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/macbook-lighter/">macbook-lighter</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Lightum</b> — Requires Gnome or KDE but is older and more complete than Lighter</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/poliva/lightum">https://github.com/poliva/lightum</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lightum-git/">lightum-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2><span class="mw-headline" id="Sound">Sound</span></h2>
<p>First of all follow <a href="../../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> wiki page, then if something does not work correctly, continue reading this part.
</p>
<h3><span class="mw-headline" id="Kernel_options">Kernel options</span></h3>
<p>Edit your <code>/etc/modprobe.d/50-sound.conf</code> or <code>/etc/modprobe.d/modprobe.conf</code> appending this line:
</p>
<pre>options snd_hda_intel model=intel-mac-auto
</pre>
<p>This should automatically specify the codec in your Mac.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Every time you change <code>/etc/modprobe.d</code>, test it by rebooting.</div>
<p>Specific models may need more help. You can try specifying other options according to your hardware. All possible settings are listed in Kernel Documentation, available online:
</p>
<ul>
<li><a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/alsa-configuration.html">Advanced Linux Sound Architecture - Driver Configuration guide</a></li>
<li><a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/index.html">HD-Audio</a></li>
<li><a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/models.html">HD-Audio Codec-Specific Models</a></li>
</ul>
<h4><span class="mw-headline" id="Model-specifics">Model-specifics</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../../en/Laptop/Apple.html" title="Laptop/Apple">Laptop/Apple</a>.</b></p>
<div>
<b>Notes:</b> This should be moved to the model-specific page. (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:Mac/Troubleshooting.html">Talk:Mac/Troubleshooting</a>)</div>
</div>
<p>For example, if you have a MacBookPro12,1, you might need
</p>
<pre>options snd-hda-intel index=1,0
</pre>
<p>instead. Alternatively, for MacBookPro5,X, you can use:
</p>
<pre>options snd_hda_intel model=mb5
</pre>
<p>(note that the jack output is controlled with "HP").
</p>
<p>If you have an iMac8,1, you should instead use
</p>
<pre>options snd-hda-intel model=mbp3 position_fix=2
</pre>
<p>For Aluminium iMacs, see <a href="../../en/IMac_Aluminum.html#Getting_sound_to_work_right" class="mw-redirect" title="IMac Aluminium">iMac Aluminium#Getting sound to work right</a>
</p>
<p>For MacBook2,1 (late 2008/early 2009)s with a <a rel="nofollow" class="external text" href="https://docs.kernel.org/sound/hd-audio/models.html#stac9220-9221">SigmaTel STAC9221 A1</a> chip, use
</p>
<pre>options snd_hda_intel model=macbook
</pre>
<h3>
<span id="Disabling_S.2FPDIF"></span><span class="mw-headline" id="Disabling_S/PDIF">Disabling S/PDIF</span>
</h3>
<p>Some (most?) Mac models have an optical S/PDIF audio jack in the same jack as the headphone jack. You can see it when it is active as a red light glowing out of the headphone jack. It can trick PulseAudio into preferring it and routing all your audio out it.
</p>
<p>If you are not getting any sound in or out, confirm that <code>pavucontrol</code> &gt; Configuration &gt; Profile says "Analog Stereo Duplex" instead of "Digital"
</p>
<p>or just run
</p>
<pre>$ pacmd set-card-profile 0 output:analog-stereo+input:analog-stereo
</pre>
<p>Also check if you need to edit <code>/usr/share/alsa-card-profile/mixer/paths/</code> to workaround faulty plug detection causing PulseAudio to failover to "Digital".
</p>
<p>See <a href="../../en/Laptop/Apple.html#Microphone" title="Laptop/Apple">Laptop/Apple#Microphone</a> for how to edit this to get the MacBook2,1's microphone to work.
</p>
<h3><span class="mw-headline" id="Auto-Mute_Mode">Auto-Mute Mode</span></h3>
<p>The internal speaker might not be disabled when using the headphone jack. To solve this, enable "Auto-Mute Mode".
</p>
<p>You can either do this using <code>alsamixer</code>:
</p>
<ol>
<li>Run <code>alsamixer</code>
</li>
<li>Press <code>F6</code> and pick <code>default:0  HDA Intel</code> to get more detailed controls</li>
<li>Use the arrow keys to select "Auto-Mute Mode"</li>
<li>Press <code>Space</code> to enable it</li>
</ol>
<p>or with <code>amixer</code>:
</p>
<pre>$ amixer -c 0 cset name='Auto-Mute Mode' 1
</pre>
<p>Optionally, run <code>alsactl store</code> as root to make the change permanent.
</p>
<h3><span class="mw-headline" id="USB_audio_interface">USB audio interface</span></h3>
<p>In some cases, it can actually be easier to set up sound using a USB audio interface rather than the jack directly.
</p>
<p>With <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>, go to <code>Configuration</code>, choose <code>Off</code> for all devices and choose <code>Analog Stereo Duplex</code> for your USB device. You can then use the headphone jack on the USB device for speakers or headphones. This should work immediately and on startup.
</p>
<h2><span class="mw-headline" id="Bluetooth">Bluetooth</span></h2>
<p>Bluetooth should work out-of-the box. See the article on <a href="../../en/Bluetooth.html" title="Bluetooth">Bluetooth</a> to install and configure all software needed.
</p>
<h2><span class="mw-headline" id="Magic_Mouse">Magic Mouse</span></h2>
<p>If you use a magic mouse you will find it works nicely out of the box. You might want to tweak some settings such as <i>scroll-speed</i> or <i>acceleration</i>. There is no GUI for this at this time. The only way to set these settings is to instruct the kernel driver (<code>hid_magicmouse</code>) with parameters. Create a modprobe config file for your mouse.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/magicmouse.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options hid_magicmouse scroll-speed=55 scroll-acceleration=1 emulate_3button=0</pre>
<p>This will instruct the driver to have a fast scroll-speed, do exponential acceleration and do not emulate a 3 button mouse. You can find an overview of all parameters and their current settings in <code>/sys/module/hid_magicmouse/parameters</code>.
</p>
<p>To try different settings without rebooting you can also set them through the command line: 
</p>
<pre># echo 55 &gt; /sys/module/hid_magicmouse/parameters/scroll_speed
</pre>
<h2><span class="mw-headline" id="Webcam">Webcam</span></h2>
<h3><span class="mw-headline" id="iSight">iSight</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Linux kernel from 2.6.26 includes the Linux UVC driver natively. <b>MBP 6,2+ (Kernel ~2.6.37+) iSight works out of the box</b> without the need to use firmware from macOS. Only use <code>isight-firmware-tools</code> if it does not work normally.</div>
<p>iSight webcams on MacBooks or pre 6,2 MacBook Pros (6,2 came out around 2010) require the Apple's proprietary firmware that cannot be redistributed. It must be extracted from macOS and loaded onto Arch.
</p>
<p>There is a pre-extracted copy available in the form of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/isight-firmware/">isight-firmware</a></span><sup><small>AUR</small></sup> package.
</p>
<p>If you want to do it yourself you will need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/isight-firmware-tools/">isight-firmware-tools</a></span><sup><small>AUR</small></sup> to extract the firmware. This package also includes a udev rule and ELF binary that are necessary, even once you have extracted the firmware file into <code>/lib/firmware/isight.fw</code>, for the file to be loaded every time you boot your computer (namely <code>/etc/udev/rules.d/isight.rules</code> which uses <code>/usr/lib/udev/ift-load</code>).
</p>
<p>Instructions:
</p>
<p>First you need to get the firmware out of a particular file located on your macOS install. It is located in <code>/System/Library/Extensions/IOUSBFamily.kext/Contents/PlugIns/AppleUSBVideoSupport.kext/Contents/MacOS/AppleUSBVideoSupport</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The <code>AppleUSBVideoSupport</code> file from a OS X 10.6 (Snow Leopard) installation may not work properly. If possible, use the file from OS X 10.5 or earlier.</div>
<p>To mount the macOS drive if multi-booting:
</p>
<pre># mkdir /media/macOS
# mount -t hfsplus /dev/sda2 /media/macOS
</pre>
<p>You can also download a copy of the file from <a rel="nofollow" class="external free" href="https://archive.org/details/AppleUSBVideoSupport">https://archive.org/details/AppleUSBVideoSupport</a>.
</p>
<p>Then, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/isight-firmware-tools/">isight-firmware-tools</a></span><sup><small>AUR</small></sup> package.
</p>
<p>Locate the <code>AppleUSBVideoSupport</code> file in the macOS directory listed above. Either copy it over to your Arch system (Any macOS installation should do, such as an iMac, not just one specific to your system) or, if multi-booting, mount the macOS drive and navigate to the directory. (On 10.6 (Snow Leopard) and 10.7 (Lion) the directory is <code>/System/Library/Extensions/IOUSBFamily.kext/Contents/PlugIns/AppleUSBVideoSupport.kext/Contents/MacOS</code>.) In that directory you can go ahead and extract the driver:
</p>
<pre># ift-extract --apple-driver AppleUSBVideoSupport
</pre>
<p>When it is done, check that the firmware has been found:
</p>
<pre># ls /usr/lib/firmware/isight.fw
</pre>
<p>Once successful, completely <b>shutdown</b> your Mac and start it back up again (to clear the hardware state of the webcam). Do <i>not</i> reboot.
</p>
<p>It should be automatically loaded at boot; if it is not you can load the <code>uvcvideo</code> module <a href="../../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">manually or load it at boot</a>.
</p>
<h3><span class="mw-headline" id="FaceTime_HD_Camera">FaceTime HD Camera</span></h3>
<p>Recent Macs include the FaceTime HD Camera, which may be connected by PCIe. You can confirm this by looking for "FaceTime HD Camera" in the output of <code>lspci</code>. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/facetimehd-dkms/">facetimehd-dkms</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/facetimehd-data/">facetimehd-data</a></span><sup><small>AUR</small></sup> packages installs a <code>facetimehd</code> module (and firmware) to support these devices. The module should be loaded automatically after installation.
</p>
<p>If the webcam shows incorrect colors, this may be due to missing sensor calibration files. Instructions for extracting the calibration files from Apple BootCamp drivers are given in this page: <a rel="nofollow" class="external free" href="https://github.com/patjak/facetimehd/wiki/Extracting-the-sensor-calibration-files">https://github.com/patjak/facetimehd/wiki/Extracting-the-sensor-calibration-files</a>
</p>
<p>See <a href="../../en/List_of_applications/Multimedia.html#Webcam" class="mw-redirect" title="Multimedia">Multimedia#Webcam</a> for applications with which to test.
</p>
<h2><span class="mw-headline" id="Temperature_sensors">Temperature sensors</span></h2>
<p>For reading temperature just install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lm_sensors">lm_sensors</a></span>. See <a href="../../en/Lm_sensors.html" title="Lm sensors">lm_sensors</a> for more information.
</p>
<h2><span class="mw-headline" id="Avoid_long_EFI_wait_before_booting">Avoid long EFI wait before booting</span></h2>
<p>If your Mac spends 30 seconds with "white screen" before booting you need to tell the firmware where the booting partition is.
</p>
<p>Boot macOS, if you do not have it installed, you can use the install DVD (select language, then click Utilities-&gt;Terminal) or another Mac with macOS (connect the two computers via firewire or thunderbolt, start the other Mac while holding the T button, boot your Mac while holding the Options button (alt)).
</p>
<p>Either way, once you have got a macOS terminal running on your Mac you need to execute the following command if the booting partition is EFI:
</p>
<pre># bless --device /dev/disk<i>X</i>s<i>Y</i> --setBoot
</pre>
<p>or if the booting partition is not EFI: 
</p>
<pre># bless --device /dev/disk<i>X</i>s<i>Y</i> --setBoot --legacy
</pre>
<p>See also <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?pid=833215">https://bbs.archlinux.org/viewtopic.php?pid=833215</a>.
</p>
<h2><span class="mw-headline" id="kworker_using_high_CPU">kworker using high CPU</span></h2>
<p>Sometime with the addition of Yosemite, some users found that kworker CPU usage will spike, as discussed <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=171883&amp;p=11">here</a>. This is sometimes the result of runaway ACPI interrupts.
</p>
<p>To check and see, you can count the number of recent ACPI interrupts and see if any of them are out of control.
</p>
<pre>$ grep . -r /sys/firmware/acpi/interrupts/
</pre>
<p>If you see that one particular interrupt is out of control (possibly GPE66), i.e., registering hundreds of thousands of lines, you can try disabling it (replace XX with the runaway interrupt):
</p>
<pre># echo "disable" &gt; /sys/firmware/acpi/interrupts/gpeXX
</pre>
<p>Disabling random ACPI interrupts could cause all kinds of problems, so do this at your own risk. If this fixes the problem, there is discussion about how to make a systemd service that automatically disables an interrupt at every boot <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1488371">here</a>.
</p>
<h2><span class="mw-headline" id="Mavericks_upgrade_breaks_Arch_boot_option">Mavericks upgrade breaks Arch boot option</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Partially duplicates <a href="../../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> and <a href="../../en/GRUB.html" title="GRUB">GRUB</a>. (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:Mac/Troubleshooting.html">Talk:Mac/Troubleshooting</a>)</div>
</div>
<p>For some multi-boot users who utilize a separate Linux boot partition, the OS X Mavericks upgrade may overwrite the boot partition with Apple's own recovery boot filesystem. This breaks the Arch Linux boot option in rEFIt/rEFInd. The best way to proceed in this situation is to abandon a separate boot partition and use the EFI system partition (ESP) to install the boot loader of your choice. It is also recommended that you use rEFInd instead of rEFIt as development on the latter has halted.
</p>
<p>Assuming grub2 as the boot loader:
</p>
<p>Use the Arch LiveCD to boot to a shell and <a href="../../en/Chroot.html" title="Chroot">chroot</a> to your broken Arch Linux environment.
</p>
<p>Mount the ESP on <code>/boot</code>.
</p>
<p>Edit the fstab and remove the old boot partition and make ESP the new boot partition. Now mount the ESP as the new <code>/boot</code> partition.
</p>
<pre># mount -a
</pre>
<p><a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Reinstall</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> package.
</p>
<p>Create a new initramfs and vmlinuz in /boot.
</p>
<pre># mkinitcpio -p linux
</pre>
<p>Install grub.
</p>
<pre># grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub --recheck --debug
</pre>
<p>Create a new grub.cfg file.
</p>
<pre># grub-mkconfig -o /boot/EFI/grub/grub.cfg
</pre>
<p>Make sure that grub.cfg is in the same directory as grubx64.efi.
</p>
<p>Generate a new refind_linux.conf file in /boot simply by running mkrlconf.sh which comes with rEFInd.
</p>
<p>Exit the chroot environment.
</p>
<p>Reboot. You should see a new entry for Arch Linux in rEFInd and it should boot to your Arch Linux installation.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Mac/Troubleshooting&amp;oldid=824749">https://wiki.archlinux.org/index.php?title=Mac/Troubleshooting&amp;oldid=824749</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 9 January 2025, at 11:12.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
