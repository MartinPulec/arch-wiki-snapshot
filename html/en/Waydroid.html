<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Waydroid - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Waydroid rootpage-Waydroid skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Prerequisites" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Prerequisites">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Prerequisites</div>
		</a>
		
			<button aria-controls="toc-Prerequisites-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Prerequisites subsection</span>
			</button>
		
		<ul id="toc-Prerequisites-sublist" class="vector-toc-list">
			<li id="toc-CPU_Requirements" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#CPU_Requirements">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>CPU Requirements</div>
			</a>
			
			<ul id="toc-CPU_Requirements-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GPU_Requirements" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GPU_Requirements">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>GPU Requirements</div>
			</a>
			
			<ul id="toc-GPU_Requirements-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Wayland_session_manager" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Wayland_session_manager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Wayland session manager</div>
			</a>
			
			<ul id="toc-Wayland_session_manager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Kernel_Modules" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Kernel_Modules">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4</span>Kernel Modules</div>
			</a>
			
			<ul id="toc-Kernel_Modules-sublist" class="vector-toc-list">
				<li id="toc-Using_Linux-Zen" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_Linux-Zen">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.1</span>Using Linux-Zen</div>
			</a>
			
			<ul id="toc-Using_Linux-Zen-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DKMS_modules" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#DKMS_modules">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.2</span>DKMS modules</div>
			</a>
			
			<ul id="toc-DKMS_modules-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Building_a_kernel" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Building_a_kernel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.3</span>Building a kernel</div>
			</a>
			
			<ul id="toc-Building_a_kernel-sublist" class="vector-toc-list">
				<li id="toc-Using_binder" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Using_binder">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.3.1</span>Using binder</div>
			</a>
			
			<ul id="toc-Using_binder-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_binderfs" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Using_binderfs">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.3.2</span>Using binderfs</div>
			</a>
			
			<ul id="toc-Using_binderfs-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Setup_binder_devices" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Setup_binder_devices">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.4</span>Setup binder devices</div>
			</a>
			
			<ul id="toc-Setup_binder_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Usage</div>
		</a>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Network" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Network">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Network</div>
		</a>
		
		<ul id="toc-Network-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Software_rendering" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Software_rendering">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Software rendering</div>
			</a>
			
			<ul id="toc-Software_rendering-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Setting_viewport_dimensions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_viewport_dimensions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Setting viewport dimensions</div>
			</a>
			
			<ul id="toc-Setting_viewport_dimensions-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-General_tips" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#General_tips">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>General tips</div>
			</a>
			
			<ul id="toc-General_tips-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-ARM_Apps_Incompatible" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ARM_Apps_Incompatible">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>ARM Apps Incompatible</div>
			</a>
			
			<ul id="toc-ARM_Apps_Incompatible-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Rotated_apps_are_unusable" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Rotated_apps_are_unusable">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Rotated apps are unusable</div>
			</a>
			
			<ul id="toc-Rotated_apps_are_unusable-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_start_Clipboard_manager_service" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_start_Clipboard_manager_service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Failed to start Clipboard manager service</div>
			</a>
			
			<ul id="toc-Failed_to_start_Clipboard_manager_service-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sometimes_the_physical_keyboard_does_not_work" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sometimes_the_physical_keyboard_does_not_work">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Sometimes the physical keyboard does not work</div>
			</a>
			
			<ul id="toc-Sometimes_the_physical_keyboard_does_not_work-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-dnsmasq:_failed_to_open_pidfile_/run/waydroid-lxc/dnsmasq.pid:_Permission_denied" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#dnsmasq:_failed_to_open_pidfile_/run/waydroid-lxc/dnsmasq.pid:_Permission_denied">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>dnsmasq: failed to open pidfile /run/waydroid-lxc/dnsmasq.pid: Permission denied</div>
			</a>
			
			<ul id="toc-dnsmasq:_failed_to_open_pidfile_/run/waydroid-lxc/dnsmasq.pid:_Permission_denied-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Commands_inside_Waydroid_shell_outputs_inaccessible_or_not_found" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Commands_inside_Waydroid_shell_outputs_inaccessible_or_not_found">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>Commands inside Waydroid shell outputs inaccessible or not found</div>
			</a>
			
			<ul id="toc-Commands_inside_Waydroid_shell_outputs_inaccessible_or_not_found-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-WARNING:_Service_manager_/dev/binder_has_died" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#WARNING:_Service_manager_/dev/binder_has_died">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.8</span>WARNING: Service manager /dev/binder has died</div>
			</a>
			
			<ul id="toc-WARNING:_Service_manager_/dev/binder_has_died-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Graphical_Corruption_on_multi-gpu_systems" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Graphical_Corruption_on_multi-gpu_systems">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.9</span>Graphical Corruption on multi-gpu systems</div>
			</a>
			
			<ul id="toc-Graphical_Corruption_on_multi-gpu_systems-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Waydroid</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Waydroid" title="Waydroid – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Linux_Containers.html" title="Linux Containers">Linux Containers</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Need to improve style. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Waydroid.html">Talk:Waydroid</a>)</div>
</div>
<p><a rel="nofollow" class="external text" href="https://waydro.id">Waydroid</a> is a container-based approach to boot a full Android system on a regular GNU/Linux system.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Prerequisites">Prerequisites</span></h2>
<h3><span class="mw-headline" id="CPU_Requirements">CPU Requirements</span></h3>
<p>The requirements depend on the CPU architecture. You can check this <a rel="nofollow" class="external text" href="https://developer.android.com/ndk/guides/abis#sa">table</a> for more information.
</p>
<p>You can check if you have the required CPU instructions with <code>cat /proc/cpuinfo</code>.
</p>
<h3><span class="mw-headline" id="GPU_Requirements">GPU Requirements</span></h3>
<p>Waydroid currently works best with Intel GPUs. They should work out of the box.
</p>
<p>All AMD GPUs have been supported; if Waydroid does not work you might also want to try to build a new Waydroid image (which works for Radeon 680M), or try the NVIDIA instructions below.
</p>
<p>NVIDIA GPUs do not work currently, but there are 2 workarounds.
</p>
<ol>
<li>Switch to integrated graphic card if possible</li>
<li>Use software rendering (see <a href="#Software_rendering">#Software rendering</a>)</li>
</ol>
<h3><span class="mw-headline" id="Wayland_session_manager">Wayland session manager</span></h3>
<p>Waydroid only works in a <a href="../en/Wayland.html" title="Wayland">Wayland</a> session manager, so make sure you are in a Wayland session.
</p>
<p>Note that even if you are in X11, many Wayland session managers support nested session (so you can run it inside your X11 session), the simplest example is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cage">cage</a></span>.
</p>
<h3><span class="mw-headline" id="Kernel_Modules">Kernel Modules</span></h3>
<p>You need to run a kernel which comes with the binder modules. They are not part of Arch Linux's default kernel (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>), thus you need to install a kernel which ships these modules.
</p>
<p>You might also need to configure your bootloader to use a different kernel. Please refer to the wiki page of your bootloader how to boot with the new kernel. Booting into another kernel (version) is one of the few occasions when you have to reboot a Linux system. You should boot into the kernel with these modules before starting Waydroid.
</p>
<p>To get a compatible kernel, you have multiple options:
</p>
<h4><span class="mw-headline" id="Using_Linux-Zen">Using Linux-Zen</span></h4>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen">linux-zen</a></span> kernel includes the necessary modules, the headers <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen-headers">linux-zen-headers</a></span> are required for <code>binder_linux</code>. This might be the most comfortable way, as you do not have to compile the kernel (which takes a long time) and will receive updated versions regularly.
</p>
<h4><span class="mw-headline" id="DKMS_modules">DKMS modules</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/binder_linux-dkms/">binder_linux-dkms</a></span><sup><small>AUR</small></sup> and load the <a href="../en/Kernel_module.html" title="Kernel module">kernel module</a> <code>binder_linux</code> with module options <code>devices=binder,hwbinder,vndbinder</code> (see <a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid/issues/904#issuecomment-1869579022">bug report</a>).
</p>
<pre>$ sudo modprobe binder-linux device=binder,hwbinder,vndbinder
</pre>
<h4><span class="mw-headline" id="Building_a_kernel">Building a kernel</span></h4>
<p>Alternatively, you can recompile the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernel — or other kernel packages (&gt;=5.7) — with the necessary options. Also see <a href="../en/Kernel.html#Compilation" title="Kernel">Kernel#Compilation</a>.
</p>
<p>When setting compilation options, you have 2 options available; <i>binder</i> and <i>binderfs</i>. Instructions for both are provided below.
</p>
<h5><span class="mw-headline" id="Using_binder">Using binder</span></h5>
<p>The modules can either be compiled into the kernel (<code>y</code>), into modules (<code>m</code>), or not at all (<code>n</code>). Also, not all combinations in the configuration are possible, and some options will require other options.
</p>
<p>The configuration options below will compile binder as a module, while the last option specifies that there will be three devices created in the <code>/dev/</code> directory, when the binder module is loaded.
</p>
<pre>CONFIG_ANDROID=y
CONFIG_ANDROID_BINDER_IPC=m
CONFIG_ANDROID_BINDERFS=n
CONFIG_ANDROID_BINDER_DEVICES="binder,hwbinder,vndbinder"</pre>
<p>When building a kernel from the AUR, one can update the configuration with the following steps:
</p>
<ol>
<li>run <code>makepkg --nobuild</code>, which will download the sources, verify and extract them and run the <code>prepare()</code> function.</li>
<li>edit the <code>.config</code> file (with the dot in the filename), which is located at the base of the kernel directory.</li>
<li>at the end of the <code>prepare()</code> function was probably a command which regenerates the makefiles with information from the configuration, possibly <code>make olddefconfig</code>. Move that to the <code>build()</code> function, or execute it yourself.</li>
<li>run <code>makepkg --noextract</code>, which will continue from the place where <code>makepkg --nobuild</code> stopped.</li>
</ol>
<h5><span class="mw-headline" id="Using_binderfs">Using binderfs</span></h5>
<p>The binder kernel module has been known to cause issues for several users. To address these issues, binderfs was created. One has to choose between the old and the new way when compiling the kernel. With the options below, one will use binderfs instead.
</p>
<p>With the kernel sources comes also a simple script to set configuration options. It will not do dependency checks, just like when editing the configuration by hand. When being in the same directory where the <code>.config</code> file lies, one can execute the following commands:
</p>
<pre>$ scripts/config --enable  CONFIG_ANDROID
$ scripts/config --enable  CONFIG_ANDROID_BINDER_IPC
$ scripts/config --enable  CONFIG_ANDROID_BINDERFS
$ scripts/config --set-str CONFIG_ANDROID_BINDER_DEVICES ""
</pre>
<p>When building a kernel from the AUR, it is enough to insert these lines at the right place in the <a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a>, usually in <code>prepare()</code>.
</p>
<h4><span class="mw-headline" id="Setup_binder_devices">Setup binder devices</span></h4>
<p>Make sure you have the latest version of Waydroid package, and Waydroid will automatically take care of this.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/waydroid/">waydroid</a></span><sup><small>AUR</small></sup> package.
</p>
<p>Optionally, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/waydroid-image/">waydroid-image</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/waydroid-image-gapps/">waydroid-image-gapps</a></span><sup><small>AUR</small></sup> to provide the needed Android image through AUR. It is however recommended to let Waydroid itself handle downloading the images.
</p>
<p>Afterwards init Waydroid, this will automatically download the latest Android image if it is not yet available.
</p>
<pre># waydroid init
</pre>
<p>To init with GApps support:
</p>
<pre># waydroid init -s GAPPS
</pre>
<p>Next <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> the <code>waydroid-container.service</code>.
</p>
<p>Waydroid should now work.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Make sure that <code>waydroid-container.service</code> is <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">started</a> then run:
</p>
<pre>$ waydroid session start
</pre>
<p>The Waydroid session is now active, the following are command examples to interact with it:
</p>
<p>Launch a GUI:
</p>
<pre>$ waydroid show-full-ui
</pre>
<p>Launch a shell:
</p>
<pre># waydroid shell
</pre>
<p>Install an application:
</p>
<pre>$ waydroid app install $path_to_apk
</pre>
<p>Get the application list:
</p>
<pre>$ waydroid app list
</pre>
<p>Run an application:
</p>
<pre>$ waydroid app launch $package_name
</pre>
<h2><span class="mw-headline" id="Network">Network</span></h2>
<p>The network should work out of the box, if it's not you might need to make sure <a href="../en/Internet_sharing.html#Enable_packet_forwarding" title="Internet sharing">packet forwarding</a> is enabled in the kernel and allow the following rules through your firewall <i>before</i> running <i>Waydroid session start</i>.
</p>
<p>Taking <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ufw">ufw</a></span> as an example:
</p>
<ul>
<li>DNS traffic needs to be allowed:
<ul>
<li><pre># ufw allow 67</pre></li>
<li><pre># ufw allow 53</pre></li>
</ul>
</li>
<li>Packet forwarding needs to be allowed:
<ul><li><pre># ufw default allow FORWARD</pre></li></ul>
</li>
</ul>
<p>For <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=firewalld">firewalld</a></span>, you can use those commands:
</p>
<ul>
<li>DNS:
<ul>
<li><pre># firewall-cmd --zone=trusted --add-port=67/udp</pre></li>
<li><pre># firewall-cmd --zone=trusted --add-port=53/udp</pre></li>
</ul>
</li>
<li>Packet forwarding:
<ul><li><pre># firewall-cmd --zone=trusted --add-forward</pre></li></ul>
</li>
<li>Add the waydroid interface to a trusted:
<ul><li><pre># firewall-cmd --zone=trusted --add-interface=waydroid0</pre></li></ul>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> We assume that interface <code>waydroid0</code> created by waydroid should be in the firewalld zone <code>trusted</code> automatically. If not so, please adjust those commands above or move interface <code>waydroid0</code> to <code>trusted</code>. You may also need <pre># firewall-cmd --runtime-to-permanent</pre> to make your changes persist after a restart.</div>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Software_rendering">Software rendering</span></h3>
<p>Make sure that you have already run:
</p>
<pre># waydroid init
</pre>
<p>(see <a href="#Installation">#Installation</a> section for more information)
</p>
<p>Then, add the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/waydroid/waydroid_base.prop</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ro.hardware.gralloc=default
ro.hardware.egl=swiftshader
</pre>
<p>Finally, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>waydroid-container.service</code>.
</p>
<h3><span class="mw-headline" id="Setting_viewport_dimensions">Setting viewport dimensions</span></h3>
<p>To set the dimensions of the waydroid window use the following commands with the dimensions adjusted to your liking:
</p>
<pre>$ waydroid prop set persist.waydroid.width 576
$ waydroid prop set persist.waydroid.height 1024
</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the <code>waydroid-container.service</code>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>If you run into issues, take a look at the official Issue Tracker: <a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid/issues">Waydroid issue tracker</a>.
</p>
<h3><span class="mw-headline" id="General_tips">General tips</span></h3>
<p>Waydroid is in rapid development so if you face issues, here is a good list of steps to do first:
</p>
<ol>
<li>Make sure your Waydroid package is up to date.</li>
<li>Make sure you have the latest Waydroid image by running <pre># waydroid upgrade</pre>
</li>
<li>Reset Waydroid: <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">stop</a> the <code>waydroid-container.service</code>, run <pre># waydroid init -f</pre> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the service again.</li>
<li>You may also want to do little cleanup, run <pre># rm -rf /var/lib/waydroid /home/.waydroid</pre> <pre>$ rm -rf ~/waydroid ~/.share/waydroid ~/.local/share/applications/*aydroid* ~/.local/share/waydroid</pre>
</li>
</ol>
<dl><dd><dl><dd><div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Removing <code>/home/.waydroid/</code> is unnecessary if you installed it after <a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid/commit/eef036b3f814a9fc4869ebfe6c9d2bd51fa19f26">2021-09</a>.</div></dd></dl></dd></dl>
<h3><span class="mw-headline" id="ARM_Apps_Incompatible">ARM Apps Incompatible</span></h3>
<p>Use casualsnek's <a rel="nofollow" class="external text" href="https://github.com/casualsnek/waydroid_script">script</a> to install a translation layer.
</p>
<p>Due to optimizations in the translation layers, It is recommended to use libndk on AMD CPUs and libhoudini on Intel CPUs. However some apps will work on one translation layer and not another. so you may need to try both if a game does not work or gets bad performance.
</p>
<p><i>Install libndk arm translation</i>
</p>
<pre># python3 main.py install libndk 
</pre>
<p><i>Install libhoudini arm translation</i>
</p>
<pre># python3 main.py install libhoudini
</pre>
<h3><span class="mw-headline" id="Rotated_apps_are_unusable">Rotated apps are unusable</span></h3>
<p>See <a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid/issues/70">Issue 70</a>.
</p>
<p>Click <i>F11</i> to switch the current app to windowed mode.
</p>
<h3><span class="mw-headline" id="Failed_to_start_Clipboard_manager_service">Failed to start Clipboard manager service</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-pyclip/">python-pyclip</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Sometimes_the_physical_keyboard_does_not_work">Sometimes the physical keyboard does not work</span></h3>
<p>Press the left <code>Alt</code> key.
</p>
<h3>
<span id="dnsmasq:_failed_to_open_pidfile_.2Frun.2Fwaydroid-lxc.2Fdnsmasq.pid:_Permission_denied"></span><span class="mw-headline" id="dnsmasq:_failed_to_open_pidfile_/run/waydroid-lxc/dnsmasq.pid:_Permission_denied">dnsmasq: failed to open pidfile /run/waydroid-lxc/dnsmasq.pid: Permission denied</span>
</h3>
<p>An AppArmor rule is likely not set. Add the following rule:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/apparmor.d/usr.sbin.dnsmasq</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">@{run}/waydroid-lxc/ r,
@{run}/waydroid-lxc/* rw,
</pre>
<h3><span class="mw-headline" id="Commands_inside_Waydroid_shell_outputs_inaccessible_or_not_found">Commands inside Waydroid shell outputs inaccessible or not found</span></h3>
<p>On Arch based distributions there's a <a href="../en/Linux_Containers.html#Basic_usage" title="Linux Containers">"bug" that may appear while working with lxc-attach</a> that may cause this issue with commands inside <code>waydroid shell</code> like <code>adbd</code> or <code>settings</code>.
</p>
<p>A possible workaround for this would be replace the <code>waydroid shell</code> command with 
</p>
<pre># lxc-attach -P /var/lib/waydroid/lxc/ -n waydroid --clear-env
</pre>
<h3>
<span id="WARNING:_Service_manager_.2Fdev.2Fbinder_has_died"></span><span class="mw-headline" id="WARNING:_Service_manager_/dev/binder_has_died">WARNING: Service manager /dev/binder has died</span>
</h3>
<p>See <a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid/issues/136">Issue 136</a>.
</p>
<p>You should enable <a rel="nofollow" class="external text" href="https://docs.kernel.org/accounting/psi.html">PSI</a>.
</p>
<p>Add <code>psi=1</code> to the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel command line">kernel command line</a>.
</p>
<p>Note that the Liquorix kernel <a rel="nofollow" class="external text" href="https://github.com/damentz/liquorix-package/commit/2dd0b878dbd27bdc5e796a7bd7384676df9e6764">will never work with Waydroid</a>, as it uses certain schedulers that are incompatible with PSI.
</p>
<h3><span class="mw-headline" id="Graphical_Corruption_on_multi-gpu_systems">Graphical Corruption on multi-gpu systems</span></h3>
<p>Currently Waydroid needs to run on the same GPU the host compositor is running on. The two ways of fixing this is to either edit <code>/var/lib/waydroid/lxc/waydroid/config_nodes</code> to be the correct GPU or to change the GPU the compositor runs on.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid">Waydroid GitHub repo</a></li>
<li><a rel="nofollow" class="external text" href="https://docs.waydro.id/">Waydroid documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://matrix.to/#/#waydroid:matrix.org">Waydroid Matrix group</a></li>
<li><a rel="nofollow" class="external text" href="https://t.me/WayDroid">Waydroid Telegram group</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Sandboxing.html" title="Category:Sandboxing">Sandboxing</a></li>
<li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li>
<li><a href="../en/Category:Android.html" title="Category:Android">Android</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Waydroid&amp;oldid=811879">https://wiki.archlinux.org/index.php?title=Waydroid&amp;oldid=811879</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 4 July 2024, at 04:29.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
