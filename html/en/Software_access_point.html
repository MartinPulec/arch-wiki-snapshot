<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Software access point - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Software_access_point rootpage-Software_access_point skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Requirements" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Requirements">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Requirements</div>
		</a>
		
			<button aria-controls="toc-Requirements-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Requirements subsection</span>
			</button>
		
		<ul id="toc-Requirements-sublist" class="vector-toc-list">
			<li id="toc-Wi-Fi_device_must_support_AP_mode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Wi-Fi_device_must_support_AP_mode">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Wi-Fi device must support AP mode</div>
			</a>
			
			<ul id="toc-Wi-Fi_device_must_support_AP_mode-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Wireless_client_and_software_AP_with_a_single_Wi-Fi_device" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Wireless_client_and_software_AP_with_a_single_Wi-Fi_device">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Wireless client and software AP with a single Wi-Fi device</div>
			</a>
			
			<ul id="toc-Wireless_client_and_software_AP_with_a_single_Wi-Fi_device-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Wi-Fi_link_layer" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Wi-Fi_link_layer">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Wi-Fi link layer</div>
			</a>
			
			<ul id="toc-Wi-Fi_link_layer-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Network_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Network_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Network configuration</div>
			</a>
			
			<ul id="toc-Network_configuration-sublist" class="vector-toc-list">
				<li id="toc-Bridge_setup" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bridge_setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>Bridge setup</div>
			</a>
			
			<ul id="toc-Bridge_setup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-NAT_setup" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#NAT_setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2</span>NAT setup</div>
			</a>
			
			<ul id="toc-NAT_setup-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tools" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tools">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Tools</div>
		</a>
		
			<button aria-controls="toc-Tools-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tools subsection</span>
			</button>
		
		<ul id="toc-Tools-sublist" class="vector-toc-list">
			<li id="toc-linux-wifi-hotspot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#linux-wifi-hotspot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>linux-wifi-hotspot</div>
			</a>
			
			<ul id="toc-linux-wifi-hotspot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-RADIUS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#RADIUS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>RADIUS</div>
			</a>
			
			<ul id="toc-RADIUS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-WLAN_is_very_slow" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#WLAN_is_very_slow">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>WLAN is very slow</div>
			</a>
			
			<ul id="toc-WLAN_is_very_slow-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-NetworkManager_is_interfering" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#NetworkManager_is_interfering">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>NetworkManager is interfering</div>
			</a>
			
			<ul id="toc-NetworkManager_is_interfering-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cannot_start_AP_mode_in_5_GHz_band" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cannot_start_AP_mode_in_5_GHz_band">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Cannot start AP mode in 5 GHz band</div>
			</a>
			
			<ul id="toc-Cannot_start_AP_mode_in_5_GHz_band-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Windows_10+_refuses_to_connect_with_hostapd_using_WPA3" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Windows_10+_refuses_to_connect_with_hostapd_using_WPA3">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Windows 10+ refuses to connect with hostapd using WPA3</div>
			</a>
			
			<ul id="toc-Windows_10+_refuses_to_connect_with_hostapd_using_WPA3-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Access_point_does_not_accept_running_in_40Mhz_mode_(HT)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Access_point_does_not_accept_running_in_40Mhz_mode_(HT)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Access point does not accept running in 40Mhz mode (HT)</div>
			</a>
			
			<ul id="toc-Access_point_does_not_accept_running_in_40Mhz_mode_(HT)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Software access point</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88" title="ソフトウェアアクセスポイント – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Software_access_point.html" title="Software access point – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Software_access_point" title="Software access point – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Network_configuration.html" title="Network configuration">Network configuration</a></li>
<li><a href="../en/Network_configuration/Wireless.html" class="mw-redirect" title="Wireless network configuration">Wireless network configuration</a></li>
<li><a href="../en/Ad-hoc_networking.html" title="Ad-hoc networking">Ad-hoc networking</a></li>
<li><a href="../en/Internet_sharing.html" title="Internet sharing">Internet sharing</a></li>
<li><a href="../en/Router.html" title="Router">Router</a></li>
</ul>
</div>
<p>A software access point, also called virtual router or virtual Wi-Fi, enables a computer to turn its wireless interface into a Wi-Fi access point. It saves the trouble of getting a separate wireless router.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Requirements">Requirements</span></h2>
<h3><span class="mw-headline" id="Wi-Fi_device_must_support_AP_mode">Wi-Fi device must support AP mode</span></h3>
<p>You need a <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/developers/Documentation/nl80211">nl80211</a> compatible wireless device, which supports the AP <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/Documentation/modes">operating mode</a>. This can be verified by running the <code>iw list</code> command, under the <code>Supported interface modes</code> block there should be <code>AP</code> listed:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ iw list</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Wiphy phy1
...
	Supported interface modes:
		 * IBSS
		 * managed
		 * <b>AP</b>
		 * AP/VLAN
		 * WDS
		 * monitor
		 * mesh point
...
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Since 2019 most Intel devices will no longer provide AP services on the 5 GHz band, due to the firmware mistakenly leaving the Location-Aware Regulatory (LAR) feature enabled even in AP mode. See <a href="#Cannot_start_AP_mode_in_5_GHz_band">#Cannot start AP mode in 5 GHz band</a>.</div>
<h3><span class="mw-headline" id="Wireless_client_and_software_AP_with_a_single_Wi-Fi_device">Wireless client and software AP with a single Wi-Fi device</span></h3>
<p>Creating a software AP is independent from your own network connection (Ethernet, wireless, ...). Many wireless devices even support <i>simultaneous</i> operation both as AP and as wireless "client" at the same time. Using that capability you can create a software AP acting as a "wireless repeater" for an existing network, using a single wireless device. The capability is listed in the following section in the output of <code>iw list</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ iw list</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Wiphy phy1
...
        valid interface combinations:
                 * #{ managed } &lt;= 2048, #{ AP, mesh point } &lt;= 8, #{ P2P-client, P2P-GO } &lt;= 1,
                   total &lt;= 2048, #channels &lt;= 1, STA/AP BI must match
...</pre>
<p>The constraint <code>#channels &lt;= 1</code> means that your software AP must operate on the same channel as your Wi-Fi client connection; see the <code>channel</code> setting in <code>hostapd.conf</code> below.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Only one additional virtual interface (for the AP) should be necessary; also, the <code>__ap</code> interface type may be preferred as some cards do not support two managed interfaces. (Discuss in <a href="../en/Talk:Software_access_point.html#Two_interfaces_on_same_card" title="Talk:Software access point">Talk:Software access point#Two interfaces on same card</a>)</div>
</div>
<p>If you want to use the capability/feature, perhaps because an Ethernet connection is not available, you need to create two separate <i>virtual interfaces</i> for using it. 
Virtual interfaces for a physical device <code>wlan0</code> can be created as follows: 
The <i>virtual interfaces</i> with unique MAC address are created for the network connection (<code>wlan0_sta</code>) itself and for the software AP/hostapd "wireless repeater":
</p>
<pre># iw dev wlan0 interface add wlan0_sta type managed addr 12:34:56:78:ab:cd  
# iw dev wlan0 interface add wlan0_ap  type managed addr 12:34:56:78:ab:ce
</pre>
<p>These can be made persistent using <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.netdev"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.netdev.5">systemd.netdev(5)</a></span> as described in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=2126424#p2126424">BBS#236923</a>. Alternatively if <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> is not in use, a systemd <a href="../en/Systemd.html#Writing_unit_files" title="Systemd">unit file</a> can be created:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/create-virtual-interface.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Create virtual wireless interface
Requires=sys-subsystem-net-devices-wlan0.device
After=network.target
After=sys-subsystem-net-devices-wlan0.device
[Service]
Type=oneshot
ExecStart=/usr/bin/iw dev wlan0 interface add wlan0_ap type managed addr "12:34:56:78:ab:ce"
[Install]
WantedBy=multi-user.target</pre>
<p>Random MAC address can be generated using <a href="../en/MAC_address_spoofing.html#macchanger" class="mw-redirect" title="Macchanger">macchanger</a>.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Setting up an access point consists of two main parts:
</p>
<ol>
<li>Setting up the <b>Wi-Fi link layer</b>, so that wireless clients can associate to your computer's <i>software access point</i> and exchange IP packets with it.</li>
<li>Setting up the <b>network configuration</b> on your computer, so that it properly relays IP packets between its own internet connection and the wireless clients.</li>
</ol>
<h3><span class="mw-headline" id="Wi-Fi_link_layer">Wi-Fi link layer</span></h3>
<p>The actual Wi-Fi link is established via the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hostapd">hostapd</a></span> package, which has WPA2 support.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Although <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iwd">iwd</a></span> is able to set up access points too, <i>hostapd</i> has much more options available than <i>iwd</i>, including capability options. Using <i>iwd</i> may cause performance limitation, e.g. operation might be limited to 802.11n and band width limited to 20MHz.</div>
<p><i>hostapd</i> comes with a default configuration file which includes numerous options listed and corresponding descriptions, you might want to take a look to gather some basic knowledge. 
</p>
<p>Adjust the options in <i>hostapd</i> configuration file if necessary. Especially, change the <code>ssid</code> and the <code>wpa_passphrase</code>. <code>ieee80211ac</code> and <code>ieee80211ax</code> can be enabled for latest WiFi5 and WiFi6 adapters. The option <code>ht_capab</code> affects your AP's capabilities including channel width which is important to transfer speed.
</p>
<p>See <a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/users/documentation/hostapd">hostapd Linux documentation page</a> for more information.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/hostapd/hostapd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">interface=wlan0_ap
bridge=br0

# SSID to be used in IEEE 802.11 management frames
ssid=YourWiFiName
# Driver interface type (hostap/wired/none/nl80211/bsd)
driver=nl80211
# Country code (ISO/IEC 3166-1)
country_code=US

# Operation mode (a = IEEE 802.11a (5 GHz), b = IEEE 802.11b (2.4 GHz)
hw_mode=g
# Channel number
channel=7
# Maximum number of stations allowed
max_num_sta=5

# Bit field: bit0 = WPA, bit1 = WPA2
wpa=2
# Bit field: 1=wpa, 2=wep, 3=both
auth_algs=1

# Set of accepted cipher suites; disabling insecure TKIP
wpa_pairwise=CCMP
# Set of accepted key management algorithms
wpa_key_mgmt=WPA-PSK
wpa_passphrase=Somepassphrase

# hostapd event logger configuration
logger_stdout=-1
logger_stdout_level=2

## Enable 802.11n support
#ieee80211n=1
## Enable 802.11ac support
#ieee80211ac=1
## Enable 802.11ax support
#ieee80211ax=1
## QoS support
#wmm_enabled=1
## Use "iw list" to show device capabilities and modify ht_capab and vht_capab accordingly
#ht_capab=[HT40+][SHORT-GI-40][TX-STBC][RX-STBC1][DSSS_CCK-40]
#vht_capab=[RXLDPC][SHORT-GI-80][TX-STBC-2BY1][RX-STBC-1]</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can set up the SSID with UTF-8 characters, so international characters will show properly. The option to enable it is <code>utf8_ssid=1</code>. Some clients may have problems with recognizing the correct encoding (e.g. <a href="../en/Wpa_supplicant.html" title="Wpa supplicant">wpa_supplicant</a> or Windows 7).</div>
<p>For automatically starting <i>hostapd</i> on boot, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the <code>hostapd.service</code>.
</p>
<p>If you are starting <i>hostapd</i> on boot, make sure the wireless <a href="../en/Network_configuration.html#Network_interfaces" class="mw-redirect" title="Network interface">network interface</a> is brought up first, otherwise it will fail. To ensure your wireless interface is ready, <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> the unit configuration file and state that it is bound to and should start after your network interface:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/hostapd.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
BindsTo=sys-subsystem-net-devices-wlan0.device
After=sys-subsystem-net-devices-wlan0.device</pre>
<p>Also make sure that the interface is not managed by other network managers. If you are using NetworkManager, see <a href="../en/NetworkManager.html#Ignore_specific_devices" title="NetworkManager">NetworkManager#Ignore specific devices</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The wireless channels allowed for access point operation differ according to geography. Depending on the wireless firmware, you may have to set the region correctly to use legal channels. <b>Do not</b> choose another region, as you may be illegally disturbing network traffic, affecting wireless functionality of your own device and others within its reach! To set the region see <a href="../en/Network_configuration/Wireless.html#Respecting_the_regulatory_domain" class="mw-redirect" title="Wireless network configuration">Wireless network configuration#Respecting the regulatory domain</a>.</div> 
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you have a card based on RTL8192CU chipset, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hostapd-rtl871xdrv/">hostapd-rtl871xdrv</a></span><sup><small>AUR</small></sup> and replace <code>driver=nl80211</code> with <code>driver=rtl871xdrv</code> in the <code>hostapd.conf</code> file.</div>
<h3><span class="mw-headline" id="Network_configuration">Network configuration</span></h3>
<p>There are two basic ways for implementing this:
</p>
<ol>
<li>
<b>bridge</b>: creates a network <i>bridge</i> on your computer, wireless clients will appear to access the same network interface and the same subnet that is used by your computer.</li>
<li>
<b>NAT</b>: with IP forwarding/masquerading and DHCP service, wireless clients will use a dedicated subnet, data from/to that subnet is NAT-ted. This is similar to a normal Wi-Fi router which is connected to the internet.</li>
</ol>
<p>The bridge approach is simpler, but it requires that any service that is needed by the wireless clients, in particular DHCP, is available on the computer's external interface. This means it will not work if the external modem which assigns IP addresses, supplies the same one to different clients.
</p>
<p>The NAT approach is more versatile, as it clearly separates Wi-Fi clients from your computer and it is completely transparent to the outside world. It will work with any kind of network connection, and (if needed) traffic policies can be introduced using the usual iptables approach.
</p>
<p>It is possible to combine these two approaches: for example having a bridge that contains both an ethernet device and the wireless device with a static ip, offering DHCP and setting NAT configured to relay the traffic to an additional network device connected to the WAN.
</p>
<h4><span class="mw-headline" id="Bridge_setup">Bridge setup</span></h4>
<p>You need to create a network <i>bridge</i> and add your network interface (e.g. <code>eth0</code>) to it. You <b>should not</b> add the wireless device (e.g. <code>wlan0</code>) to the bridge; hostapd will add it on its own.
</p>
<p>See <a href="../en/Network_bridge.html" title="Network bridge">Network bridge</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You may wish to reuse an existing bridge, if you have one (e.g. used by a virtual machine).</div>
<h4><span class="mw-headline" id="NAT_setup">NAT setup</span></h4>
<p>See <a href="../en/Internet_sharing.html#Configuration" title="Internet sharing">Internet sharing#Configuration</a> for configuration details.
</p>
<p>In that article, the device connected to the LAN is <code>net0</code>. That device would be in this case your wireless device (e.g. <code>wlan0</code>).
</p>
<h2><span class="mw-headline" id="Tools">Tools</span></h2>
<h3><span class="mw-headline" id="linux-wifi-hotspot">linux-wifi-hotspot</span></h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-wifi-hotspot/">linux-wifi-hotspot</a></span><sup><small>AUR</small></sup> package provides a script that can create either a bridged or a NATed access point for internet sharing. It combines <i>hostapd</i>, <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a> and <a href="../en/Iptables.html" title="Iptables">iptables</a> for the good functioning of the access point. Includes both command line and gui. The basic syntax to create a NATed virtual network is the following:
</p>
<pre># create_ap <i>wlan0</i> <i>eth0</i> <i>MyAccessPoint</i> <i>MyPassPhrase</i>
</pre>
<p>Alternatively, the template configuration provided in <code>/etc/create_ap.conf</code> can be adapted to ones need and the script run with:
</p>
<pre># create_ap --config /etc/create_ap.conf
</pre>
<p>To use the GUI, run in terminal:
</p>
<pre># wihotspot
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a>/<a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the <code>create_ap.service</code> to run the script at boot time with the configuration specified in <code>/etc/create_ap.conf</code>.
</p>
<p>For more information see <a rel="nofollow" class="external text" href="https://github.com/lakinduakash/linux-wifi-hotspot">linux-wifi-hotspot on GitHub</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> In bridge mode, <i>create_ap</i> may conflict at boot time with the current network configuration. In this case, do not configure the IP address of the ethernet interface, neither DHCP nor a statip IP address, in order to facilitate the binding to the bridge.</div>
<h3><span class="mw-headline" id="RADIUS">RADIUS</span></h3>
<p>See <a rel="nofollow" class="external autonumber" href="https://me.m01.eu/blog/2012/05/wpa-2-enterprise-from-scratch-on-a-raspberry-pi/">[1]</a><sup title="Last check status: domain name not resolved">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-03-03 ⓘ]</sup> for instructions to run a <a rel="nofollow" class="external text" href="https://freeradius.org/">FreeRADIUS</a> server for <a href="../en/Network_configuration/Wireless.html#WPA2_Enterprise" class="mw-redirect" title="WPA2 Enterprise">WPA2 Enterprise</a>.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Seems it is possible to easily create access point with just Network Manager. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Software_access_point.html">Talk:Software access point</a>)</div>
</div>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="WLAN_is_very_slow">WLAN is very slow</span></h3>
<p>Frequent causes for a lower than expected throughput include
</p>
<ul>
<li>An improper choice of operation mode with a <code>hw_mode</code> <i>lower</i> than the one supported can limit the router artificially. Check that a modern operating mode is selected.</li>
<li>A crowded or otherwise noise afflicted <code>channel</code> can severely degrade performance especially in densely populated areas. Try changing to a different channel or even switch frequencies.</li>
</ul>
<h3><span class="mw-headline" id="NetworkManager_is_interfering">NetworkManager is interfering</span></h3>
<p>hostapd may not work, if the device is managed by NetworkManager. You can mask the device using MAC:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/unmanaged.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[keyfile]
unmanaged-devices=mac:<i>hwaddr</i></pre>
<p>Or interface name:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/unmanaged.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[keyfile]
unmanaged-devices=interface-name:<i>ifname</i></pre>
<h3><span class="mw-headline" id="Cannot_start_AP_mode_in_5_GHz_band">Cannot start AP mode in 5 GHz band</span></h3>
<p>Apparently with the special country code <code>00</code> (global), all usable frequencies in the 5Ghz band will have the <code>no-ir</code> (<a rel="nofollow" class="external text" href="https://wireless.wiki.kernel.org/en/developers/regulatory/processing_rules#post_processing_mechanisms">no-initiating-radiation</a>) flag set, which will prevent hostapd from using them. You will need to have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless-regdb">wireless-regdb</a></span> installed and have your country code set to make frequencies allowed in your country available for hostapd.
</p>
<p>Note that recent Intel devices have a Location-Aware Regulatory (LAR) feature, which ignores the userspace regulatory database and instead deduces the regulatory region by listening to other nearby access points.  This means the devices will not transmit on any 5 GHz frequencies until they have first seen other access points on the 5 GHz frequency bands, <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=206469">preventing any 5 GHz transmission at all in many cases</a>. Older kernels had an option to disable this which was removed in 2019 <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=205695#c6">due to it causing the firmware to crash</a>.  Since this removal, Intel cards supporting LAR can no longer be used as access points in the 5 GHz band.
</p>
<h3>
<span id="Windows_10.2B_refuses_to_connect_with_hostapd_using_WPA3"></span><span class="mw-headline" id="Windows_10+_refuses_to_connect_with_hostapd_using_WPA3">Windows 10+ refuses to connect with hostapd using WPA3</span>
</h3>
<p>Windows seems to refuse connecting to WPA3 access points with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hostapd">hostapd</a></span>. Using <code>wpa=2</code> instead of <code>wpa=3</code> <a rel="nofollow" class="external text" href="https://serverfault.com/a/832260">may solve the issue</a>.
</p>
<h3>
<span id="Access_point_does_not_accept_running_in_40Mhz_mode_.28HT.29"></span><span class="mw-headline" id="Access_point_does_not_accept_running_in_40Mhz_mode_(HT)">Access point does not accept running in 40Mhz mode (HT)</span>
</h3>
<p>You may receive the following message: 
</p>
<pre>20/40 MHz operation not permitted on channel pri=13 sec=9 based on overlapping BSSes
</pre>
<p>That means that too many nearby access points are detected by your WIFI device. <a rel="nofollow" class="external text" href="https://www.brunsware.de/blog/hostapd-40mhz-disable-neighbor-check">It then refuses to use more than 20Mhz channel width in order to share more fairly the wireless spectrum</a>.
You may be able to disable that with <code>noscan=1</code>, but that may <a rel="nofollow" class="external text" href="https://github.com/NixOS/nixpkgs/blob/54ba3732f13a553a58f15c86220b93c618b2ba0f/nixos/modules/services/networking/hostapd.nix#L202">likely violate local regulatory requirements</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://nims11.wordpress.com/2012/04/27/hostapd-the-linux-way-to-create-virtual-wifi-access-point/">Hostapd : The Linux Way to create Virtual Wi-Fi Access Point</a></li>
<li><a rel="nofollow" class="external text" href="https://xyne.dev/notes/network/dhcp_with_dns.html">tutorial and script for configuring a subnet with DHCP and DNS</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Wireless_networking.html" title="Category:Wireless networking">Wireless networking</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Software_access_point&amp;oldid=813161">https://wiki.archlinux.org/index.php?title=Software_access_point&amp;oldid=813161</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 July 2024, at 07:00.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
