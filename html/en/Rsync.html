<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>rsync - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Rsync rootpage-Rsync skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Front-ends" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Front-ends">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Front-ends</div>
			</a>
			
			<ul id="toc-Front-ends-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-As_cp/mv_alternative" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#As_cp/mv_alternative">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>As cp/mv alternative</div>
		</a>
		
			<button aria-controls="toc-As_cp/mv_alternative-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle As cp/mv alternative subsection</span>
			</button>
		
		<ul id="toc-As_cp/mv_alternative-sublist" class="vector-toc-list">
			<li id="toc-Trailing_slash_caveat" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Trailing_slash_caveat">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Trailing slash caveat</div>
			</a>
			
			<ul id="toc-Trailing_slash_caveat-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-As_a_backup_utility" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#As_a_backup_utility">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>As a backup utility</div>
		</a>
		
			<button aria-controls="toc-As_a_backup_utility-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle As a backup utility subsection</span>
			</button>
		
		<ul id="toc-As_a_backup_utility-sublist" class="vector-toc-list">
			<li id="toc-Automated_backup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automated_backup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Automated backup</div>
			</a>
			
			<ul id="toc-Automated_backup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Automated_backup_with_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automated_backup_with_SSH">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Automated backup with SSH</div>
			</a>
			
			<ul id="toc-Automated_backup_with_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Automated_backup_with_NetworkManager" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automated_backup_with_NetworkManager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Automated backup with NetworkManager</div>
			</a>
			
			<ul id="toc-Automated_backup_with_NetworkManager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Automated_backup_with_systemd_and_inotify" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automated_backup_with_systemd_and_inotify">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Automated backup with systemd and inotify</div>
			</a>
			
			<ul id="toc-Automated_backup_with_systemd_and_inotify-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Differential_backup_on_a_week" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Differential_backup_on_a_week">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Differential backup on a week</div>
			</a>
			
			<ul id="toc-Differential_backup_on_a_week-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Snapshot_backup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Snapshot_backup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Snapshot backup</div>
			</a>
			
			<ul id="toc-Snapshot_backup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Full_system_backup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Full_system_backup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Full system backup</div>
			</a>
			
			<ul id="toc-Full_system_backup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restore_a_backup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restore_a_backup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>Restore a backup</div>
			</a>
			
			<ul id="toc-Restore_a_backup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Advanced_usage_of_filter_rules" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Advanced_usage_of_filter_rules">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.9</span>Advanced usage of filter rules</div>
			</a>
			
			<ul id="toc-Advanced_usage_of_filter_rules-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Copy_from_list_of_paths" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Copy_from_list_of_paths">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.10</span>Copy from list of paths</div>
			</a>
			
			<ul id="toc-Copy_from_list_of_paths-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-File_system_cloning" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#File_system_cloning">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>File system cloning</div>
		</a>
		
		<ul id="toc-File_system_cloning-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-As_a_daemon" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#As_a_daemon">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>As a daemon</div>
		</a>
		
			<button aria-controls="toc-As_a_daemon-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle As a daemon subsection</span>
			</button>
		
		<ul id="toc-As_a_daemon-sublist" class="vector-toc-list">
			<li id="toc-Example_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Example_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Example configuration</div>
			</a>
			
			<ul id="toc-Example_configuration-sublist" class="vector-toc-list">
				<li id="toc-Sharing_from_a_list_of_files" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Sharing_from_a_list_of_files">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.1</span>Sharing from a list of files</div>
			</a>
			
			<ul id="toc-Sharing_from_a_list_of_files-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">rsync</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Rsync" title="Rsync – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Rsync.html" title="Rsync – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Rsync.html" title="Rsync – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Rsync" title="Rsync – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Rsync.html" title="Rsync – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Rsync" title="Rsync – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/System_backup.html" title="System backup">System backup</a></li>
<li><a href="../en/Synchronization_and_backup_programs.html" title="Synchronization and backup programs">Synchronization and backup programs</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://rsync.samba.org/">rsync</a> is an open source utility that provides fast incremental file transfer.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=rsync">rsync</a></span> package.
</p>
<p><i>rsync</i> must be installed on both the source and the destination machine.
</p>
<h3><span class="mw-headline" id="Front-ends">Front-ends</span></h3>
<ul><li>
<b>Grsync</b> — GTK front-end.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.opbyte.it/grsync/">https://www.opbyte.it/grsync/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=grsync">grsync</a></span>
</dd></dl>
<ul><li>
<b>JotaSync</b> — Java Swing GUI for rsync with integrated scheduler.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://trixon.se/projects/jotasync/">https://trixon.se/projects/jotasync/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jotasync/">jotasync</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>luckyBackup</b> — Qt front-end written in C++.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://luckybackup.sourceforge.net/index.html">https://luckybackup.sourceforge.net/index.html</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/luckybackup/">luckybackup</a></span><sup><small>AUR</small></sup>
</dd></dl>
<p>Other tools using rsync are <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/rdiff-backup/">rdiff-backup</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/osync/">osync</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yarsync/">yarsync</a></span><sup><small>AUR</small></sup>.
</p>
<h2>
<span id="As_cp.2Fmv_alternative"></span><span class="mw-headline" id="As_cp/mv_alternative">As cp/mv alternative</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Using rsync instead of cp/mv is efficient across different filesystems, but not for copying or moving files on the same filesystem. See <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=271953">[1]</a>
</div>
<p><code>rsync</code> can be used as an advanced alternative for the <code>cp</code> or <code>mv</code> command, especially for copying larger files:
</p>
<pre>$ rsync -P source destination
</pre>
<p>The <code>-P</code> option is the same as <code>--partial --progress</code>, which keeps partially transferred files and shows a progress bar.
</p>
<p>You may want to use the <code>-r</code>/<code>--recursive</code> option to recurse into directories.
</p>
<p>Files can be copied locally as with cp, but the motivating purpose of rsync is to copy files remotely, i.e. between two different hosts. Remote locations can be specified with a host-colon syntax:
</p>
<pre>$ rsync source host:destination
</pre>
<p>or
</p>
<pre>$ rsync host:source destination
</pre>
<p>Network file transfers use the <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a> protocol by default and <code>host</code> can be a real hostname or a predefined profile/alias from <code>.ssh/config</code>.
</p>
<p>Whether transferring files locally or remotely, rsync first creates a file-list containing information (by default, it is the file size and last modification timestamp) which will then be used to determine if a file needs to be constructed. For each file to be constructed, a weak and strong checksum is found for all blocks such that each block is of length <b>S</b> bytes, non-overlapping, and has an offset which is divisible by <b>S</b>. Using this information a large file can be constructed using rsync without having to transfer the entire file. For a more detailed practical and mathematical explanation refer to <a rel="nofollow" class="external text" href="https://rsync.samba.org/how-rsync-works.html">how rsync works</a> and <a rel="nofollow" class="external text" href="https://rsync.samba.org/tech_report/tech_report.html">the rsync algorithm</a>, respectively.
</p>
<p>To use sane defaults quickly, you could use some aliases:
</p>
<pre>cpr() {
  rsync --archive -hh --partial --info=stats1,progress2 --modify-window=1 "$@"
} 
mvr() {
  rsync --archive -hh --partial --info=stats1,progress2 --modify-window=1 --remove-source-files "$@"
}</pre>
<ul>
<li>
<code>-hh</code>: output numbers in a human-readable format</li>
<li>
<code>--info=stats1,progress2</code>: <code>stats1</code> displays rsync transfer statistics with verbosity level 1. <code>progress2</code> prints total transfer progress as opposed to per-file transfer progress (<code>progress1</code>)</li>
<li>
<code>--modify-window=1</code>: when comparing the timestamps of two files, treat their timestamps as being equivalent if their timestamps have a difference of less than 1 second</li>
<li>
<code>--remove-source-files</code>: remove files from the source directory after they have been successfully synced</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The use of the term <i>checksum</i> is <b>not</b> interchangeable with the behavior of the <code>--checksum</code> option. The <code>--checksum</code> option affects the file skip heuristic used prior to any file being transferred. Independent of <code>--checksum</code>, a <i>checksum</i> is always used for the block-based file construction which is how rsync transfers a file.</div>
<h3><span class="mw-headline" id="Trailing_slash_caveat">Trailing slash caveat</span></h3>
<p>Arch by default uses GNU cp (part of GNU <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=coreutils">coreutils</a></span>). However, rsync follows the convention of BSD cp, which gives special treatment to source directories with a trailing slash "/". Whereas
</p>
<pre>$ rsync -r source destination
</pre>
<p>creates a directory "destination/source" with the contents of "source", the command
</p>
<pre>$ rsync -r source/ destination
</pre>
<p>copies all of the files in "source/" directly into "destination", with no intervening subdirectory - just as if you had invoked it as
</p>
<pre>$ rsync -r source/. destination
</pre>
<p>This behavior is different from that of GNU cp, which treats "source" and "source/" identically (but not "source/."). Also, some shells automatically append the trailing slash when tab-completing directory names. Because of these factors, there can be a tendency among new or occasional rsync users to forget about rsync's different behavior, and inadvertently create a mess or even overwrite important files by leaving the trailing slash on the command line.
</p>
<p>Thus it can be prudent to use a wrapper script to automatically remove trailing slashes before invoking rsync:
</p>
<pre>#!/bin/bash
new_args=()
for i in "${@}"; do
    case "${i}" in
        /)
            i="/"
        ;;
        */)
            i="${i%/}"
        ;;
        esac
    new_args+=("${i}")
done
exec rsync "${new_args[@]}"
</pre>
<p>This script can be put somewhere in the path, and aliased to rsync in the shell init file.
</p>
<h2><span class="mw-headline" id="As_a_backup_utility">As a backup utility</span></h2>
<p>The rsync protocol can easily be used for backups, only transferring files that have changed since the last backup. This section describes a very simple scheduled backup script using rsync, typically used for copying to removable media.
</p>
<h3><span class="mw-headline" id="Automated_backup">Automated backup</span></h3>
<p>For the sake of this example, the script is created in the <code>/etc/cron.daily</code> directory, and will be run on a daily basis if a cron <a href="../en/Systemd.html" class="mw-redirect" title="Daemon">daemon</a> is installed and properly configured. Configuring and using <a href="../en/Cron.html" title="Cron">cron</a> is outside the scope of this article.
</p>
<p>First, create a script containing the appropriate command options:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cron.daily/backup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
rsync -a --delete --quiet /path/to/backup /location/of/backup</pre>
<ul>
<li>
<code>-a</code>: indicates that files should be archived, meaning that most of their characteristics are preserved (but <b>not</b> ACLs, hard links or extended attributes such as capabilities)</li>
<li>
<code>--delete</code>: means files deleted on the source are to be deleted on the backup as well</li>
</ul>
<p>Here, <code>/path/to/backup</code> should be changed to what needs to be backed-up (e.g. <code>/home</code>) and <code>/location/of/backup</code> is where the backup should be saved (e.g. <code>/media/disk</code>).
</p>
<p>Finally, the script must be <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>.
</p>
<h3><span class="mw-headline" id="Automated_backup_with_SSH">Automated backup with SSH</span></h3>
<p>If backing-up to a remote host using <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a>, use this script instead:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cron.daily/backup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
rsync -a --delete --quiet -e ssh /path/to/backup remoteuser@remotehost:/location/of/backup
</pre>
<ul>
<li>
<code>-e ssh</code>: tells rsync to use SSH</li>
<li>
<code>remoteuser</code>: is the user on the host <code>remotehost</code>
</li>
<li>
<code>-a</code>: groups all these options <code>-rlptgoD</code> (recursive, links, perms, times, group, owner, devices)</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
Rsync will try to modify any previously backed up files on the target machine to match their current state at the source machine, with each incremental backup. This means that when backing up files that are owned by root over SSH (and when preserving permissions and ownerships such as with the <code>-a</code> option), root access to the target machine is needed. The preferred way to achieve this for automation is to set up the SSH daemon to allow root to login using a <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/a/92397">public key without password</a> and run the rsync command as root.</div>
<h3><span class="mw-headline" id="Automated_backup_with_NetworkManager">Automated backup with NetworkManager</span></h3>
<p>This script starts a backup when network connection is established.
</p>
<p>First, create a script containing the appropriate command options:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/backup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

if [ x"$2" = "xup" ] ; then
        rsync --force --ignore-errors -a --delete --bwlimit=2000 --files-from=files.rsync /path/to/backup /location/of/backup
fi</pre>
<ul>
<li>
<code>-a</code>: group all this options <code>-rlptgoD</code> recursive, links, perms, times, group, owner, devices</li>
<li>
<code>--files-from</code>: read the relative path of <code>/path/to/backup</code> from this file</li>
<li>
<code>--bwlimit</code>: limit I/O bandwidth; Kilo-bytes per second</li>
</ul>
<p>The script must be owned by root (see <a href="../en/NetworkManager.html#Network_services_with_NetworkManager_dispatcher" title="NetworkManager">NetworkManager#Network services with NetworkManager dispatcher</a> for details).
</p>
<h3><span class="mw-headline" id="Automated_backup_with_systemd_and_inotify">Automated backup with systemd and inotify</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Due to the limitations of inotify and systemd (see <a rel="nofollow" class="external text" href="https://www.quora.com/Linux-Kernel/Inotify-monitoring-of-directories-is-not-recursive-Is-there-any-specific-reason-for-this-design-in-Linux-kernel">this question and answer</a>), recursive filesystem monitoring is not possible. Although you can watch a directory and its contents, it will not recurse into subdirectories and watch the contents of them; you must explicitly specify every directory to watch, even if that directory is a child of an already watched directory.</li>
<li>This setup is based on a <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a> instance.</li>
</ul>
</div>
<p>Instead of running time interval backups with time based schedules, such as those implemented in <a href="../en/Cron.html" title="Cron">cron</a>, it is possible to run a backup every time one of the files you are backing up changes. <code>systemd.path</code> units use <code>inotify</code> to monitor the filesystem, and can be used in conjunction with <code>systemd.service</code> files to start any process (in this case your rsync backup) based on a filesystem event.
</p>
<p>First, create the <code>systemd.path</code> unit that will monitor the files you are backing up:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/backup.path</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Checks if paths that are currently being backed up have changed

[Path]
PathChanged=%h/documents
PathChanged=%h/music

[Install]
WantedBy=default.target
</pre>
<p>Then create a <code>systemd.service</code> file that will be activated when it detects a change. By default a service file of the same name as the path unit (in this case <code>backup.path</code>) will be activated, except with the <code>.service</code> extension instead of <code>.path</code> (in this case <code>backup.service</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you need to run multiple rsync commands, use <code>Type=oneshot</code>. This allows you to specify multiple <code>ExecStart=</code> parameters, one for each rsync command, that will be executed. Alternatively, you can simply write a script to perform all of your backups, just like <a href="../en/Cron.html" title="Cron">cron</a> scripts.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/backup.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Backs up files

[Service]
ExecStart=/usr/bin/rsync %h/./documents %h/./music -CERrltm --delete ubuntu:
</pre>
<p>Now all you have to do is <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> <code>backup.path</code> like a normal systemd service and it will start monitoring file changes and automatically start <code>backup.service</code>.
</p>
<h3><span class="mw-headline" id="Differential_backup_on_a_week">Differential backup on a week</span></h3>
<p>This is a useful option of rsync, resulting in a full backup (on each run) and keeping a differential backup copy of changed files only in a separate directory for each day of a week.
</p>
<p>First, create a script containing the appropriate command options:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cron.daily/backup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

DAY=$(date +%A)

if [ -e /location/to/backup/incr/$DAY ] ; then
  rm -fr /location/to/backup/incr/$DAY
fi

rsync -a --delete --quiet --inplace --backup --backup-dir=/location/to/backup/incr/$DAY /path/to/backup/ /location/to/backup/full/</pre>
<p>The <code>--inplace</code> option implies <code>--partial</code> and updates destination files in-place.
</p>
<h3><span class="mw-headline" id="Snapshot_backup">Snapshot backup</span></h3>
<p>The same idea can be used to maintain a tree of snapshots of your files. In other words, a directory with date-ordered copies of the files. The copies are made using hardlinks, which means that only files that did change will occupy space. Generally speaking, this is the idea behind Apple's TimeMachine.
</p>
<p>This basic script is easy to implement and creates quick incremental snapshots using the <code>--link-dest</code> option to hardlink unchanged files: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/snapbackup.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

# Basic snapshot-style rsync backup script 

# Config
OPT="-aPh"
LINK="--link-dest=/snapshots/username/last/" 
SRC="/home/username/files/"
SNAP="/snapshots/username/"
LAST="/snapshots/username/last"
date=`date "+%Y-%b-%d:_%T"`

# Run rsync to create snapshot
rsync $OPT $LINK $SRC ${SNAP}$date

# Remove symlink to previous snapshot
rm -f $LAST

# Create new symlink to latest snapshot for the next backup to hardlink
ln -s ${SNAP}$date $LAST
</pre>
<p>There must be a symlink to a full backup already in existence as a target for <code>--link-dest</code>. If the most recent snapshot is deleted, the symlink will need to be recreated to point to the most recent snapshot. If <code>--link-dest</code> does not find a working symlink, rsync will proceed to copy all source files instead of only the changes. 
</p>
<p>A more sophisticated version keeps an up-to-date full backup <code>$SNAP/latest</code> and in case a certain number of files has changed since the last full backup, it creates a snapshot <code>$SNAP/$DATETAG</code> of the current full-backup utilizing <code>cp -al</code> to hardlink unchanged files:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/rsnapshot.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

## my own rsync-based snapshot-style backup procedure
## (cc) marcio rps AT gmail.com

# config vars

SRC="/home/username/files/" #dont forget trailing slash!
SNAP="/snapshots/username"
OPTS="-rltgoi --delay-updates --delete --chmod=a-w"
MINCHANGES=20

# run this process with real low priority

ionice -c 3 -p $$
renice +12  -p $$

# sync

rsync $OPTS $SRC $SNAP/latest &gt;&gt; $SNAP/rsync.log

# check if enough has changed and if so
# make a hardlinked copy named as the date

COUNT=$( wc -l $SNAP/rsync.log|cut -d" " -f1 )
if [ $COUNT -gt $MINCHANGES ] ; then
        DATETAG=$(date +%Y-%m-%d)
        if [ ! -e $SNAP/$DATETAG ] ; then
                cp -al $SNAP/latest $SNAP/$DATETAG
                chmod u+w $SNAP/$DATETAG
                mv $SNAP/rsync.log $SNAP/$DATETAG
               chmod u-w $SNAP/$DATETAG
         fi
fi
</pre>
<p>To make things really, really simple this script can be run from a <a href="../en/Systemd/Timers.html" title="Systemd/Timers">systemd/Timers</a> unit.
</p>
<h3><span class="mw-headline" id="Full_system_backup">Full system backup</span></h3>
<p>This section is about using <i>rsync</i> to transfer a copy of the entire <code>/</code> tree, excluding a few selected directories. This approach is considered to be better than <a href="../en/Disk_cloning.html" title="Disk cloning">disk cloning</a> with <code>dd</code> since it allows for a different size, partition table and filesystem to be used, and better than copying with <code>cp -a</code> as well, because it allows greater control over file permissions, attributes, <a href="../en/Access_Control_Lists.html" title="Access Control Lists">Access Control Lists</a> and <a href="../en/Extended_attributes.html" title="Extended attributes">extended attributes</a>.
</p>
<p><i>rsync</i> will work even while the system is running, but files changed during the transfer may or may not be transferred, which can cause undefined behavior of some programs using the transferred files. For mitigation log out all users and shut down all programs and databases.
</p>
<p>This approach works well for migrating an existing installation to a new hard drive or <a href="../en/Solid_state_drive.html" class="mw-redirect" title="SSD">SSD</a>.
</p>
<p>Run the following command as root to make sure that rsync can access all system files and preserve the ownership:
</p>
<pre># rsync -aAXHv --exclude='/dev/*' --exclude='/proc/*' --exclude='/sys/*' --exclude='/tmp/*' --exclude='/run/*' --exclude='/mnt/*' --exclude='/media/*' --exclude='/lost+found/' / <i>/path/to/backup</i>
</pre>
<p>By using the <code>-aAX</code> set of options, the files are transferred in archive mode which ensures that symbolic links, devices, permissions, ownerships, modification times, <a href="../en/Access_Control_Lists.html" class="mw-redirect" title="ACL">ACLs</a>, and extended attributes are preserved, assuming that the target <a href="../en/File_systems.html" class="mw-redirect" title="File system">file system</a> supports the feature. The option <code>-H</code> preserves hard links, but uses more memory.
</p>
<p>The <code>--exclude</code> option causes files/directories that match the given patterns to be excluded. Instead or in conjunction, the <code>--exclude-from=<i>file</i></code> option excludes files/directories that match patterns (one per line) in <code><i>file</i></code>, similar to the example described in <a href="#Advanced_usage_of_filter_rules">#Advanced usage of filter rules</a> but without the <code>+</code>/<code>-</code> syntax.
</p>
<p>The directories <code>/dev</code>, <code>/proc</code>, <code>/sys</code>, <code>/tmp</code>, and <code>/run</code> are included in the above command, but the <i>contents</i> of those directories are excluded. This is because they are populated on boot, but the directories themselves are not created. <code>/lost+found</code> is filesystem-specific. Quoting the exclude patterns will avoid expansion by the <a href="../en/Command-line_shell.html" class="mw-redirect" title="Shell">shell</a>, which is necessary, for example, when backing up over <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a>. Ending the excluded paths with <code>*</code> ensures that the directories themselves are created if they do not already exist.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>If you plan on backing up your system somewhere other than <code>/mnt</code> or <code>/media</code>, do not forget to add it to the list of exclude patterns to avoid an infinite loop.</li>
<li>If there are any bind mounts in the system, they should be excluded as well so that the bind mounted contents is copied only once.</li>
<li>If you use a <a href="../en/Swap.html#Swap_file" class="mw-redirect" title="Swap file">swap file</a>, make sure to exclude it as well.</li>
<li>Consider if you want to backup the <code>/home/</code> directory. If it contains your data it might be considerably larger than the system. Otherwise consider excluding unimportant sub-directories such as  <code>/home/*/.thumbnails/*</code>, <code>/home/*/.cache/mozilla/*</code>, <code>/home/*/.cache/chromium/*</code>, and <code>/home/*/.local/share/Trash/*</code>, depending on software installed on the system.</li>
<li>If <a href="../en/File_manager_functionality.html#Mounting" class="mw-redirect" title="GVFS">GVFS</a> is installed, <code>/home/*/.gvfs</code> must be excluded to prevent rsync errors.</li>
<li>If <a href="../en/Dhcpcd.html" title="Dhcpcd">Dhcpcd</a> ≥ 9.0.0 is installed, exclude the <code>/var/lib/dhcpcd/*</code> directory as it mounts several system directories as sub-directories there.</li>
</ul>
</div>
<p>You may want to include additional rsync options, or remove some, such as the following. See <span class="plainlinks archwiki-template-man" title="$ man 1 rsync"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/rsync.1">rsync(1)</a></span> for the full list.
</p>
<ul>
<li>If you run on a system with very low memory, consider removing <code>-H</code> option; however, it should be no problem on most modern machines. There can be many hard links on the file system depending on the software used (e.g. if you are using <a href="../en/Flatpak.html" title="Flatpak">Flatpak</a>). Many hard links reside under the <code>/usr/</code> directory.</li>
<li>You may want to add rsync's <code>--delete</code> option if you are running this multiple times to the same backup directory. In this case make sure that the source path does not end with <code>/*</code>, or this option will only have effect on the files inside the subdirectories of the source directory, but it will have no effect on the files residing directly inside the source directory.</li>
<li>If you use any sparse files, such as virtual disks, <a href="../en/Docker.html" title="Docker">Docker</a> images and similar, you should add the <code>-S</code> option.</li>
<li>The <code>--numeric-ids</code> option will disable mapping of user and group names; instead, numeric group and user IDs will be transfered. This is useful when backing up over <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a> or when using a live system to backup different system disk.</li>
<li>Choosing <code>--info=progress2</code> option instead of <code>-v</code> will show the overall progress info and transfer speed instead of the list of files being transferred.</li>
<li>To avoid crossing a filesystem boundary when recursing, add the option <code>-x</code>/<code>--one-file-system</code>. This will prevent backing up any mount point in the hierarchy.</li>
</ul>
<h3><span class="mw-headline" id="Restore_a_backup">Restore a backup</span></h3>
<p>If you wish to restore a backup, use the same rsync command that was executed but with the source and destination reversed.
</p>
<h3><span class="mw-headline" id="Advanced_usage_of_filter_rules">Advanced usage of filter rules</span></h3>
<p>Instead of specifying include and exclude rules separately rsync can read all of these from a single filter file. rsync then processes the rules in a top-down order; the first matching rule wins.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">backup.filter</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Exclude patterns

- .thumbnails/***
- node_modules/***
- venv/***

# Include patterns

+ /Documents/***
+ /Books/***
+ /Music/***

# Exclude everything else
- /**
</pre>
<p><code>***</code> is a special rsync pattern which matches a folder and all of its contents recursively.
</p>
<p>Check <span class="plainlinks archwiki-template-man" title="$ man 1 rsync"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/rsync.1#PATTERN_MATCHING_RULES">rsync(1) § PATTERN MATCHING RULES</a></span> and <span class="plainlinks archwiki-template-man" title="$ man 1 rsync"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/rsync.1#FILTER_RULES_IN_DEPTH">rsync(1) § FILTER RULES IN DEPTH</a></span> for more details.
</p>
<p>Then run rsync with:
</p>
<pre>$ rsync -aAXHv --filter="merge backup.filter" $SRC $DEST
</pre>
<p>The key word is the <code>--filter "merge ..."</code> parameter which will take the filter file and parse the rules in order for each sync-ed file.
</p>
<h3><span class="mw-headline" id="Copy_from_list_of_paths">Copy from list of paths</span></h3>
<p>An alternative to the <a href="#Advanced_usage_of_filter_rules">#Advanced usage of filter rules</a> method is to use the <code>--files-from</code> option. This can take an input from a text file containing a list of directory or file paths, with each entry being separated by new lines. It should be noted that the <code>-r</code> flag must manually be specified for this option if the user wants recursive directory copying, even when <code>-a</code> is already included.
</p>
<p>For example, a list of directories and all recursive directories can be archived with the following:
</p>
<pre>$ rsync -aAXHvr --files-from="dir_list.txt" $SRC $DEST
</pre>
<h2><span class="mw-headline" id="File_system_cloning">File system cloning</span></h2>
<p>rsync provides a way to do a copy of all data in a file system while preserving as much information as possible, including the file system metadata. It is a procedure of data cloning on a file system level where source and destination file systems do not need to be of the same type. It can be used for backing up, file system migration or data recovery.
</p>
<p>rsync's <i>archive</i> mode comes close to being fit for the job, but it does not back up the special file system metadata such as access control lists, extended attributes or sparse file properties. For successful cloning at the file system level, some additional options need to be provided:
</p>
<pre>rsync -qaHAXS SOURCE_DIR DESTINATION_DIR
</pre>
<p>And their meaning is (from the manpage):
</p>
<pre>--hard-links, -H         preserve hard links
--acls, -A               preserve ACLs (implies --perms)
--xattrs, -X             preserve extended attributes
--sparse, -S             turn sequences of nulls into sparse blocks
</pre>
<p>Additionally, use <code>-x</code> if you have other filesystems mounted under the tree that you want to exclude from the copy.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you are using rsync to migrate your Arch installation to a new drive, remember to include a trailing slash at the end of <code>SOURCE_DIR</code>, for the reason mentioned in <a href="#Trailing_slash_caveat">#Trailing slash caveat</a>.</div>
<p>The produced copy can be simply reread and checked (for example after a data recovery attempt) at the file system level with <code>diff</code>'s recursive option:
</p>
<pre>diff -r SOURCE_DIR DESTINATION_DIR
</pre>
<p>It is possible to do a successful file system migration by using rsync as described in this article and updating the <a href="../en/Fstab.html" title="Fstab">fstab</a> and <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> as described in <a href="../en/Migrate_installation_to_new_hardware.html" title="Migrate installation to new hardware">Migrate installation to new hardware</a>. This essentially provides a way to convert any root file system to another one.
</p>
<h2><span class="mw-headline" id="As_a_daemon">As a daemon</span></h2>
<p><i>rsync</i> can be run as <a href="../en/Systemd.html" class="mw-redirect" title="Daemon">daemon</a> on a server listening on TCP port <code>873</code>.
</p>
<p>Edit the template <code>/etc/rsyncd.conf</code>, configure a share and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the <code>rsyncd.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> As of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=rsync">rsync</a></span> 3.2.0-1 the package adopted the upstream systemd unit files <code>rsyncd.service</code> and <code>rsyncd@.service</code>. The change for <code>ProtectHome</code> has been commented, the security feature <code>ProtectSystem=full</code> under the <code>[Service]</code> section is still active. This makes the <code>/boot/</code>, <code>/etc/</code> and <code>/usr/</code> directories read-only. If you need rsyncd write system directories you can <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> the unit and set <code>ProtectSystem=off</code> in the <code>[Service]</code> section of the overriding snippet.</div>
<p>Usage from client, e.g. list server content:
</p>
<pre>$ rsync rsync://<i>server/share</i>
</pre>
<p>transfer file from client to server: 
</p>
<pre>$ rsync <i>local-file</i> rsync://<i>server/share/</i>
</pre>
<p>Consider opening TCP port <code>873</code> in the <a href="../en/Category:Firewalls.html" class="mw-redirect" title="Firewall">firewall</a>, and using user authentication.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> All transferred data including user authentication are not encrypted.</div>
<h3><span class="mw-headline" id="Example_configuration">Example configuration</span></h3>
<h4><span class="mw-headline" id="Sharing_from_a_list_of_files">Sharing from a list of files</span></h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/rsyncd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

# Needed when crossing filesystem boundaries.
#use chroot  = no
read only = yes

...

[sync]
    path         = /
# List of files to copy.
    include from = /backup.list
# Exclude the rest.
    exclude      = *</pre>
<p>Inside the file list, all the <i>intermediary paths</i> are necessary, except when the <code>***</code> wildcard is used:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/backup.list</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/etc/
/etc/conf.d/
/etc/conf.d/hwclock
/etc/fonts/***
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>More usage examples can be searched in the <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewforum.php?id=27">Community Contributions</a> and <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewforum.php?id=33">General Programming</a> forums</li>
<li>
<a rel="nofollow" class="external text" href="https://www.pointsoftware.ch/2012/09/12/howto-local-and-remote-snapshot-backup-using-rsync-with-hard-links/">Howto – local and remote snapshot backup using rsync with hard links</a> Includes file deduplication with hard-links, MD5 integrity signature, 'chattr' protection, filter rules, disk quota, retention policy with exponential distribution (backups rotation while saving more recent backups than older)</li>
<li><a rel="nofollow" class="external text" href="https://stackoverflow.com/questions/5527068/how-do-you-use-an-identity-file-with-rsync">Using SSH keys/identity files with rsync</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Synchronization.html" title="Category:Synchronization">Synchronization</a></li>
<li><a href="../en/Category:Backup.html" title="Category:Backup">Backup</a></li>
<li><a href="../en/Category:Commands.html" title="Category:Commands">Commands</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Rsync&amp;oldid=804175">https://wiki.archlinux.org/index.php?title=Rsync&amp;oldid=804175</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 23 March 2024, at 02:14.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
