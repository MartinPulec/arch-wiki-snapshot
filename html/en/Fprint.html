<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>fprint - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Fprint rootpage-Fprint skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Prerequisites" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Prerequisites">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Prerequisites</span>
			</div>
		</a>
		
		<ul id="toc-Prerequisites-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Login_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Login_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Login configuration</span>
				</div>
			</a>
			
			<ul id="toc-Login_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Create_fingerprint_signature" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Create_fingerprint_signature">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Create fingerprint signature</span>
				</div>
			</a>
			
			<ul id="toc-Create_fingerprint_signature-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restrict_enrolling" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restrict_enrolling">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Restrict enrolling</span>
				</div>
			</a>
			
			<ul id="toc-Restrict_enrolling-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-No_devices_available" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_devices_available">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>No devices available</span>
				</div>
			</a>
			
			<ul id="toc-No_devices_available-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-gdm_hangs_when_revealing_login_prompt_after_suspend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#gdm_hangs_when_revealing_login_prompt_after_suspend">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>gdm hangs when revealing login prompt after suspend</span>
				</div>
			</a>
			
			<ul id="toc-gdm_hangs_when_revealing_login_prompt_after_suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unexpected_error_while_suspending_device" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unexpected_error_while_suspending_device">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Unexpected error while suspending device</span>
				</div>
			</a>
			
			<ul id="toc-Unexpected_error_while_suspending_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fingerprint_authentication_is_not_taking_effect_in_the_Polkit_agent." class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fingerprint_authentication_is_not_taking_effect_in_the_Polkit_agent.">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Fingerprint authentication is not taking effect in the Polkit agent.</span>
				</div>
			</a>
			
			<ul id="toc-Fingerprint_authentication_is_not_taking_effect_in_the_Polkit_agent.-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Debug" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Debug">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Debug</span>
				</div>
			</a>
			
			<ul id="toc-Debug-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-fprintd_starts_before_fingerprint_reader_device_is_initialized_after_resuming_from_sleep" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#fprintd_starts_before_fingerprint_reader_device_is_initialized_after_resuming_from_sleep">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>fprintd starts before fingerprint reader device is initialized after resuming from sleep</span>
				</div>
			</a>
			
			<ul id="toc-fprintd_starts_before_fingerprint_reader_device_is_initialized_after_resuming_from_sleep-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sleeping_while_fprintd_is_still_running_breaks_fprintd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sleeping_while_fprintd_is_still_running_breaks_fprintd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7</span>
					<span>Sleeping while fprintd is still running breaks fprintd</span>
				</div>
			</a>
			
			<ul id="toc-Sleeping_while_fprintd_is_still_running_breaks_fprintd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enrolling_works_but_verifying_does_not" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enrolling_works_but_verifying_does_not">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8</span>
					<span>Enrolling works but verifying does not</span>
				</div>
			</a>
			
			<ul id="toc-Enrolling_works_but_verifying_does_not-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unable_to_enroll_as_user" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unable_to_enroll_as_user">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9</span>
					<span>Unable to enroll as user</span>
				</div>
			</a>
			
			<ul id="toc-Unable_to_enroll_as_user-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">fprint</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Fprint.html" title="Fprint – español" lang="es" hreflang="es" data-title="Fprint" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Fprint" title="Fprint – 日本語" lang="ja" hreflang="ja" data-title="Fprint" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Fprint.html" title="Fprint – português" lang="pt" hreflang="pt" data-title="Fprint" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Fprint" title="Fprint – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Fprint" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Fingerprint_GUI.html" title="Fingerprint GUI">Fingerprint GUI</a></li>
<li><a href="../en/ThinkFinger.html" title="ThinkFinger">ThinkFinger</a></li>
</ul>
</div>
<p>From <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/fprint/">the fprint homepage</a>:
</p>
<dl><dd>The fprint project aims to plug a gap in the Linux desktop: support for consumer fingerprint reader devices.</dd></dl>
<p>The idea is to use the built-in fingerprint reader in some notebooks for login using <a href="../en/PAM.html" title="PAM">PAM</a>. This article will also explain how to use regular password for backup login method (solely fingerprint scanner is not recommended due to numerous reasons).
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Prerequisites">Prerequisites</h2></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> The list of supported devices is not updated regularly and is not complete. It is worth testing your device using the instructions on this page even if it does not appear on that list, prior to resorting to <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> packages.</div>
<p>You can check if your device is supported by checking the <a rel="nofollow" class="external text" href="https://fprint.freedesktop.org/supported-devices.html">list of supported devices</a> or the <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libfprint/wiki/-/wikis/Unsupported-Devices">list of unsupported devices</a>. To check which one you have, type:
</p>
<pre>$ lsusb
</pre>
<p>The <i>lsusb</i> tool is available inside the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usbutils">usbutils</a></span> package.
</p>
<div class="mw-heading mw-heading2"><h2 id="Installation">Installation</h2></div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fprintd">fprintd</a></span> package. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=imagemagick">imagemagick</a></span> might also be needed.
</p>
<p>Some devices require a different fork of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libfprint">libfprint</a></span>, not (yet?) merged with the main <i>libfprint</i>: 
</p>
<ul><li>
<b>libfprint-tod</b> — For touch-based sensors.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/3v1n0/libfprint/-/tree/tod">https://gitlab.freedesktop.org/3v1n0/libfprint/-/tree/tod</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libfprint-tod-git/">libfprint-tod-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>libfprint-elanmoc2</b> — For ELAN <code>04f3:0c4c</code> waiting <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libfprint/libfprint/-/merge_requests/330">merge</a>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/Depau/libfprint/-/tree/elanmoc2">https://gitlab.freedesktop.org/Depau/libfprint/-/tree/elanmoc2</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libfprint-elanmoc2-git/">libfprint-elanmoc2-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<p>This list is not exhaustive. See many more forks for other devices in the AUR.
</p>
<div class="mw-heading mw-heading2"><h2 id="Configuration">Configuration</h2></div>
<p>Upstream recommends <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libfprint/libfprint/-/issues/538">using S2Idle sleep instead of S3</a> but depending on your device, S3 might work as well.
</p>
<div class="mw-heading mw-heading3"><h3 id="Login_configuration">Login configuration</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> 
<ul>
<li>If you use <a href="../en/GDM.html" title="GDM">GDM</a>, the fingerprint-option is already available in the login menu (if not add yourself to the <code>input</code> <a href="../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">user group</a>). You can skip this section!</li>
<li>If you use <a href="../en/SDDM.html" title="SDDM">SDDM</a>, see <a href="../en/SDDM.html#Using_a_fingerprint_reader" title="SDDM">SDDM#Using a fingerprint reader</a>.</li>
</ul>
</div>
<p>Add <code>pam_fprintd.so</code> as <i>sufficient</i> to the top of the auth section of <code>/etc/pam.d/system-local-login</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/system-local-login</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"><b>auth      sufficient pam_fprintd.so</b>
auth      include   system-login
...
</pre>
<p>This tries to use fingerprint login first, and if it fails or if it finds no fingerprint signatures in the given user's home directory, it proceeds to password login.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> This setting is a security breach for su and sudo as it allows background processes to obtain permissions without prompting the user. See: <a rel="nofollow" class="external text" href="https://nvd.nist.gov/vuln/detail/cve-2024-37408">CVE-2024-37408</a>
<p>Put this right before <code>auth sufficient pam_fprintd.so</code> to disallow fingerprint with sudo/su when it can't show a prompt. 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># Disallow fingerprint in sudo/su without tty</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">auth       [success=1 default=ignore]  pam_succeed_if.so    service in sudo:su:su-l tty in :unknown
</pre>
</div>
<p>You can also modify other files in <code>/etc/pam.d/{login,su,sudo,gdm,lightdm}</code> in the same way. For example <code>/etc/pam.d/polkit-1</code> for <a href="../en/Polkit.html" title="Polkit">polkit</a> based authentication (GNOME &amp; many other desktop environments). If <code>/etc/pam.d/polkit-1</code> does not exist, copy it from <code>/usr/lib/pam.d/polkit-1</code>.
</p>
<p>KDE already has fingerprint authentication configured in <code>/etc/pam.d/kde-fingerprint</code> so you do not need to edit that file. For a minimal working setup, which asks for your fingerprint first and requires password authentification if it fails on KDE Plasma, it suffices to change the following lines to <code>/etc/pam.d/system-auth</code>:
</p>
<pre>-auth      [success=<b>3</b> default=ignore]   pam_systemd_home.so
<b>auth       [success=2 default=ignore]   pam_fprintd.so</b>
auth       [success=1 default=bad]     pam_unix.so          try_first_pass nullok
</pre>
<p>Adding <code>pam_fprintd.so</code> as <i>sufficient</i> to any configuration file in <code>/etc/pam.d/</code> when a fingerprint signature is present will only prompt for fingerprint authentication. This prevents the use of a password if you cannot <code>Ctrl+c</code> fingerprint authentication (due to the lack of a shell). In order to use either a password or a fingerprint in a graphical interface, add the following line to the top of any files required:
</p>
<pre><b>auth		sufficient  	pam_unix.so try_first_pass likeauth nullok</b>
auth		sufficient  	pam_fprintd.so
...
</pre>
<p>This will prompt for a password; pressing <code>Enter</code> on a blank field will proceed to fingerprint authentication. 
</p>
<p>If you want to prompt for fingerprint and password input at the same time, you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pam-fprint-grosshack/">pam-fprint-grosshack</a></span><sup><small>AUR</small></sup>. This may be needed for some graphical programs which do not allow blank password input, such as Gnome's built-in polkit agent. To use this package, add the following lines to the top of any files required:
</p>
<pre><b>auth		sufficient  	pam_fprintd_grosshack.so</b>
<b>auth		sufficient  	pam_unix.so try_first_pass nullok</b>
...
</pre>
<div class="mw-heading mw-heading3"><h3 id="Create_fingerprint_signature">Create fingerprint signature</h3></div>
<p>You will need to have an <a href="../en/Polkit.html#Authentication_agents" title="Polkit">authentication agent</a> running before being able to enroll.
</p>
<p>To add a signature for a finger, run:
</p>
<pre>$ fprintd-enroll
</pre>
<p>or create a new signature for all fingers:
</p>
<pre>$ fprintd-delete "$USER"
$ for finger in {left,right}-{thumb,{index,middle,ring,little}-finger}; do fprintd-enroll -f "$finger" "$USER"; done
</pre>
<p>You will be asked to scan the given finger. Swipe your right index finger <b>five times</b>. After that, the signature is created in <code>/var/lib/fprint/</code>.
</p>
<p>You can also enroll without an authentication agent:
</p>
<pre># fprintd-enroll <i>user</i>
</pre>
<p>To verify the newly created fingerprint, use: 
</p>
<pre>$ fprintd-verify
</pre>
<p>For more information, see <span class="plainlinks archwiki-template-man" title="$ man 1 fprintd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fprintd.1">fprintd(1)</a></span>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Restrict_enrolling">Restrict enrolling</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Polkit.html" title="Polkit">polkit</a>.</b></p>
<div>
<b>Notes:</b> Partially duplicates article (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Fprint.html">Talk:Fprint</a>)</div>
</div>
<p>By default every user is allowed to enroll new fingerprints without prompting for the password or the fingerprint. You can change this behavior using <a href="../en/Polkit.html" title="Polkit">polkit</a> rules.
</p>
<p>There are two locations that contains the polkit configuration files:
</p>
<ul>
<li><code>/etc/polkit-1/rules.d/</code></li>
<li><code>/usr/share/polkit-1/rules.d/</code></li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> You should <b>not</b> modify the files under <code>/usr/share/polkit-1/rules.d/</code> because they will be overwritten on update. Copy them to <code>/etc/polkit-1/rules.d/</code> first.</div>
<p>In the following example only root can enroll fingerprints:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/polkit-1/rules.d/50-net.reactivated.fprint.device.enroll.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">polkit.addRule(function (action, subject) {
  if (action.id == "net.reactivated.fprint.device.enroll") {
    return subject.user == "root" ? polkit.Result.YES : polkit.Result.NO
  }
})</pre>
<div class="mw-heading mw-heading2"><h2 id="Troubleshooting">Troubleshooting</h2></div>
<div class="mw-heading mw-heading3"><h3 id="No_devices_available">No devices available</h3></div>
<p>If your <a rel="nofollow" class="external text" href="https://fprint.freedesktop.org/supported-devices.html">supported device</a> cannot be found or is claimed to be already open (in use), check the <code>fprintd.service</code> logs in the <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journal">journal</a>.
</p>
<p>You may find log entries like:
</p>
<pre>fprintd[2936592]: Corrupted message received
fprintd[2936592]: Ignoring device due to initialization error: unsupported firmware version
</pre>
<p>Ensure your device's firmware is up to date with <a href="../en/Fwupd.html" title="Fwupd">Fwupd</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="gdm_hangs_when_revealing_login_prompt_after_suspend">gdm hangs when revealing login prompt after suspend</h3></div>
<p>This issue is described <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libfprint/libfprint/-/issues/426">in libfprint repository</a>. The developers answer is:
</p>
<dl><dd>My guess right now is that we are disconnecting the BT USB dongle while it is being initialised. Then everything gets stuck while btusb is trying to load the firmware (this has a 10s timeout, explaining the just under 10s hang that we are seeing). Disconnecting the bluetooth dongle like this is expected to happen when the rfkill switch is toggled, so that is normal. It just seems that the case where the device suddenly disconnects is not handled properly and times out.</dd></dl>
<p>The proposed fix is to <a href="../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Create">create</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/bluetooth-blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist btusb</pre>
<p>Or execute straight away: 
</p>
<pre># rmmod btusb
</pre>
<p>Then it should not try to initialize the device.
</p>
<div class="mw-heading mw-heading3"><h3 id="Unexpected_error_while_suspending_device">Unexpected error while suspending device</h3></div>
<p>This issue is described <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libfprint/libfprint/-/issues/538">in libfprint repository</a>:
</p>
<dl><dd>You need to set your laptop to not suspend to RAM but to do s2idle. You might need to switch the BIOS into "Windows mode".</dd></dl>
<div class="mw-heading mw-heading3"><h3 id="Fingerprint_authentication_is_not_taking_effect_in_the_Polkit_agent.">Fingerprint authentication is not taking effect in the Polkit agent.</h3></div>
<p>After adding fingerprint rules to Linux PAM, fingerprint recognition only works for <a href="../en/SDDM.html" title="SDDM">SDDM</a> and <a href="../en/Sudo.html" title="Sudo">sudo</a>, but not for <a href="../en/Polkit.html" title="Polkit">polkit</a>. 
</p>
<p>Copy the <code>50-default.rules</code> file to <code>/etc/polkit-1/rules.d/</code> and change group name <code>wheel</code> to your user group.
</p>
<pre># cp /usr/share/polkit-1/rules.d/50-default.rules /etc/polkit-1/rules.d/
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/polkit-1/rules.d/50-default.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">polkit.addAdminRule(function(action, subject) {
    return ["unix-group:wheel"];
});
</pre>
<div class="mw-heading mw-heading3"><h3 id="Debug">Debug</h3></div>
<p>Use the following environment variable and command line flag: 
</p>
<pre># G_MESSAGES_DEBUG=all /usr/lib/fprintd -t
</pre>
<div class="mw-heading mw-heading3"><h3 id="fprintd_starts_before_fingerprint_reader_device_is_initialized_after_resuming_from_sleep">fprintd starts before fingerprint reader device is initialized after resuming from sleep</h3></div>
<p>Create the following udev rule which enables <a rel="nofollow" class="external text" href="https://docs.kernel.org/driver-api/usb/persist.html">USB device persistence</a>, replacing the ID with the one for your fingerprint reader which you can find using <code>lsusb</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/01-fingerprint.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="usb", DRIVERS=="usb", ATTRS{idVendor}=="06cb", ATTRS{idProduct}=="00fc", ATTR{power/persist}="1", RUN="/usr/bin/chmod 444 %S%p/../power/persist"
</pre>
<div class="mw-heading mw-heading3"><h3 id="Sleeping_while_fprintd_is_still_running_breaks_fprintd">Sleeping while fprintd is still running breaks fprintd</h3></div>
<p>Fprintd waits 30 seconds after a successful login before quitting, so sleeping during that time period may cause fprintd to break. If that happens, create and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the following systemd service:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/kill-fprintd.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Kill fprintd before sleep
Before=sleep.target

[Service]
ExecStart=killall fprintd

[Install]
WantedBy=sleep.target
</pre>
<div class="mw-heading mw-heading3"><h3 id="Enrolling_works_but_verifying_does_not">Enrolling works but verifying does not</h3></div>
<p>Some touch-based fingerprint readers generate images too small for fprint's algorithm to work properly. A common workaround for those is swiping instead of touching the sensor, but the speed at which a good image is generated may vary. Some sensors require a slower swipe and some a faster one. Here are some tips regarding <a rel="nofollow" class="external text" href="https://github.com/iafilatov/libfprint#common-problems">what a good image should look like</a>. 
</p>
<p>If you want to practice with different speeds to see which generates a better image, try dumping the images with the script <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/libfprint/libfprint/-/blob/master/examples/img-capture.c">examples/img-capture</a> and comparing it with the examples from above (you will need to compile libfprint from source). 
</p>
<p>See also <a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/libfprint/libfprint/-/issues/174">https://gitlab.freedesktop.org/libfprint/libfprint/-/issues/174</a>
</p>
<div class="mw-heading mw-heading3"><h3 id="Unable_to_enroll_as_user">Unable to enroll as user</h3></div>
<p>If you get an error like <code>EnrollStart failed: GDBus.Error:net.reactivated.Fprint.Error.PermissionDenied: Not Authorized: net.reactivated.fprint.device.enroll</code>, ensure <a rel="nofollow" class="external text" href="../en/Polkit.html#Authentication_agents|your">authentication agent</a>, which prompts the password of the user being enrolled, is properly functioning. However, this can be bypassed by running the command as root:
</p>
<p><code>sudo fprintd-enroll "$(whoami)"</code>
</p>
<p>It is important to pass the name of a regular user, otherwise the fingerprint will be associated with the root user, which is counterproductive to most usecases.
</p>
<p>If you get an "enroll-duplicate" error, that finger has already been enrolled as root.  You can either enroll a different finger or remove that finger from the root user with <code>fprintd-delete</code>.
</p>
<p>After this you should be able to run <code>fprintd-verify</code> as a regular user with no permission errors.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Input_devices.html" title="Category:Input devices">Input devices</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Fprint&amp;oldid=853113">https://wiki.archlinux.org/index.php?title=Fprint&amp;oldid=853113</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 17 November 2025, at 04:32.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true">fprint</div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
