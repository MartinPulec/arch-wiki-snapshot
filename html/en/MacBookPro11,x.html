<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>MacBookPro11,x - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MacBookPro11_x rootpage-MacBookPro11_x skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Firmware" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Firmware">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Firmware</div>
		</a>
		
		<ul id="toc-Firmware-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Partitioning" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Partitioning">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Partitioning</div>
		</a>
		
		<ul id="toc-Partitioning-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Internet" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Internet">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Internet</div>
			</a>
			
			<ul id="toc-Internet-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Setup_bootloader" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Setup_bootloader">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Setup bootloader</div>
		</a>
		
		<ul id="toc-Setup_bootloader-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Post_installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Post_installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Post installation</div>
		</a>
		
			<button aria-controls="toc-Post_installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Post installation subsection</span>
			</button>
		
		<ul id="toc-Post_installation-sublist" class="vector-toc-list">
			<li id="toc-Kernel_parameters" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Kernel_parameters">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Kernel parameters</div>
			</a>
			
			<ul id="toc-Kernel_parameters-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fan_control" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fan_control">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Fan control</div>
			</a>
			
			<ul id="toc-Fan_control-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Console" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Console">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Console</div>
			</a>
			
			<ul id="toc-Console-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Graphics" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Graphics">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Graphics</div>
			</a>
			
			<ul id="toc-Graphics-sublist" class="vector-toc-list">
				<li id="toc-Getting_the_integrated_intel_card_to_work_on_11,3" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Getting_the_integrated_intel_card_to_work_on_11,3">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4.1</span>Getting the integrated intel card to work on 11,3</div>
			</a>
			
			<ul id="toc-Getting_the_integrated_intel_card_to_work_on_11,3-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alternative_method_to_disable_NVIDIA_card" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Alternative_method_to_disable_NVIDIA_card">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4.2</span>Alternative method to disable NVIDIA card</div>
			</a>
			
			<ul id="toc-Alternative_method_to_disable_NVIDIA_card-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Microcode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Microcode">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Microcode</div>
			</a>
			
			<ul id="toc-Microcode-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-HiDPI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#HiDPI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>HiDPI</div>
			</a>
			
			<ul id="toc-HiDPI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sound" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sound">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.7</span>Sound</div>
			</a>
			
			<ul id="toc-Sound-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Touchpad" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Touchpad">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.8</span>Touchpad</div>
			</a>
			
			<ul id="toc-Touchpad-sublist" class="vector-toc-list">
				<li id="toc-Ctrl-Click_as_Right-Click" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ctrl-Click_as_Right-Click">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.8.1</span>Ctrl-Click as Right-Click</div>
			</a>
			
			<ul id="toc-Ctrl-Click_as_Right-Click-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-input-mtrack" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#input-mtrack">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.8.2</span>input-mtrack</div>
			</a>
			
			<ul id="toc-input-mtrack-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Swap_Opt_and_Command_Key" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Swap_Opt_and_Command_Key">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.9</span>Swap Opt and Command Key</div>
			</a>
			
			<ul id="toc-Swap_Opt_and_Command_Key-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Keyboard_backlight" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Keyboard_backlight">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.10</span>Keyboard backlight</div>
			</a>
			
			<ul id="toc-Keyboard_backlight-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_backlight" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_backlight">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.11</span>Screen backlight</div>
			</a>
			
			<ul id="toc-Screen_backlight-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Suspend" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Suspend">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.12</span>Suspend</div>
			</a>
			
			<ul id="toc-Suspend-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Powersave" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Powersave">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.13</span>Powersave</div>
			</a>
			
			<ul id="toc-Powersave-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SD_Card_Reader" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SD_Card_Reader">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.14</span>SD Card Reader</div>
			</a>
			
			<ul id="toc-SD_Card_Reader-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Repurpose_the_power_key" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Repurpose_the_power_key">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.15</span>Repurpose the power key</div>
			</a>
			
			<ul id="toc-Repurpose_the_power_key-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Web_cam" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Web_cam">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.16</span>Web cam</div>
			</a>
			
			<ul id="toc-Web_cam-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-What_does_not_work" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#What_does_not_work">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>What does not work</div>
		</a>
		
			<button aria-controls="toc-What_does_not_work-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle What does not work subsection</span>
			</button>
		
		<ul id="toc-What_does_not_work-sublist" class="vector-toc-list">
			<li id="toc-General" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#General">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>General</div>
			</a>
			
			<ul id="toc-General-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Wi-Fi" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Wi-Fi">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Wi-Fi</div>
			</a>
			
			<ul id="toc-Wi-Fi-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Backlight_keys_/_Suspend_support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Backlight_keys_/_Suspend_support">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Backlight keys / Suspend support</div>
			</a>
			
			<ul id="toc-Backlight_keys_/_Suspend_support-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Discussions" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Discussions">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Discussions</div>
		</a>
		
		<ul id="toc-Discussions-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Example" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Example">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Example</div>
		</a>
		
		<ul id="toc-Example-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">MacBookPro11,x</span></h1>
				</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section does not follow the <a href="../en/Help:Laptop_page_guidelines.html" title="Help:Laptop page guidelines">Laptop page guidelines</a>.</b></p>
<div>
<b>Reason:</b> This page flat-out ignores every possible <a href="../en/Help:Style.html" title="Help:Style">style</a> rule (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:MacBookPro11,x.html">Talk:MacBookPro11,x</a>)</div>
</div>
<p>The MacBook Pro 11,x consists of models with Retina display shipped by Apple In Late 2013 and Mid 2014. Like its predecessors, it is based on Intel chipset, although some manual configuration might be required in specific cases in order to deal with Apple-related features.
</p>
<p>Like previous MacBook models, the MacBook Pro 11,x supports UEFI. This page will cover the current status of hardware support on Arch Linux, as well as post-installation recommendations.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Firmware">Firmware</span></h2>
<p>Before proceeding with the installation of Arch Linux, it is important to ensure that the latest firmware updates for you MacBook are installed. This procedure requires OS X.
In OS X, open the App Store and check for updates. If your Mac finds and installs any updates, make sure to <b>reboot</b> your computer, and then check again for updates to make sure that you installed everything.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you uninstalled OS X or want to reinstall it, <a rel="nofollow" class="external text" href="https://support.apple.com/en-us/HT204904">Apple</a> has great instructions.</div>
<p>It is advisable to keep OS X installed, because MacBook firmware updates can only be installed using OS X. However, if you plan to remove OS X completely, make backups of these files, which you will need in Linux for adjusting the color profile:
</p>
<pre>/Library/ColorSync/Profiles/Displays/*
</pre>
<h2><span class="mw-headline" id="Partitioning">Partitioning</span></h2>
<p>MacBooks are partitioned using the <a href="../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a> scheme by default. For MacBooks running OS X versions up to and including 10.12, the partition layout will typically look like this:
</p>
<ul>
<li>
<b>EFI</b>: the ~200 MB <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a>
</li>
<li>
<b>Macintosh HD</b>: the main partition containing your OS X installation, formatted using <a href="../en/File_systems.html" title="File systems">HFS+</a>
</li>
<li>
<b>Recovery HD</b>: a secondary HFS+ partition containing utilities for restoring backups, formatting and re-installing OS X, typically booted by holding <code>Cmd+r</code> while your MacBook is starting up</li>
</ul>
<p>For 2013/2014 MacBooks running macOS 10.13 or later, the partition layout is simpler:
</p>
<ul>
<li>
<b>EFI</b>: the ~200 MB <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a>
</li>
<li>
<b>Macintosh HD</b>: an <a href="../en/File_systems.html" title="File systems">APFS</a> container partition containing volumes for Apple's EFI loaders, the macOS system/user files, the recovery image and for <a href="../en/Swap.html" title="Swap">swap</a> in macOS.</li>
</ul>
<p>As a general rule, partitioning is no different from any other hardware that Arch Linux can be installed on. If you plan on keeping OS X for the purpose of dual booting, you need to manually shrink the main OS X HFS+/APFS partition from within OS X's Disk Utility program.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The OS X <b>Recovery</b> partition is not visible inside Disk Utility. However, the partition will be automatically moved after the OS X partition if you resize it. On MacBooks using APFS, the Recovery image is stored in the main APFS partition, resizing the APFS partition will move all macOS data.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can see the true partition structure of your system from within OS X by opening a terminal and running <code>diskutil list</code>. Alternatively, if you have already launched the Arch installation media, you can retrieve similar information by running <code>fdisk -l</code>.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong>  If your OS X partition is encrypted with FileVault 2, you <b>must</b> disable the disk encryption before proceeding. After the OS X partition has been resized, FileVault 2 can be re-enabled.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you plan to remove OS X, it is advisable to <b>disable</b> the MacBook startup sound before proceeding with partitioning. Just boot in OS X, mute your system sound and reboot again to the Arch Linux Installation media. Please keep in mind that the volume of the startup sound can only be modified reliably in OS X.</div>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Installation is similar to any other standard laptop. Please refer to the official <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a> for more detailed instructions, as the following content mainly describes deviations from those instructions that are specific to this MacBook model.
</p>
<p>As this Mac model does not include a <a href="../en/Optical_disc_drive.html" title="Optical disc drive">CD or DVD drive</a>, you may wish to copy the Arch installation media onto a <a href="../en/USB_flash_installation_medium.html" class="mw-redirect" title="USB flash installation media">USB flash drive</a>. With the Arch installation media on a flash drive, you can boot it by holding down the <code>Alt</code> (or <code>Option</code>) key while your Mac starts up, and then selecting the applicable EFI Boot option when the Apple boot manager appears.
</p>
<p>As this model of notebook has a high DPI display, the console font displayed will be extremely small and depending on your preferences is likely to be uncomfortable to use. You may wish to change this for a more legible font, an example of which is;
</p>
<pre>$ setfont sun12x22
</pre>
<h3><span class="mw-headline" id="Internet">Internet</span></h3>
<p>Thunderbolt Ethernet adapters and USB-to-Ethernet adapters are usually picked up automatically. In case you use a Thunderbolt ethernet adapter, you may have to power on the machine with the adapter plugged in for it to be picked up by the system.
</p>
<p>Another easy option is to use USB tethering with an Android device. For more information, see <a href="../en/Android_tethering.html" title="Android tethering">Android tethering</a>.
</p>
<p>If you have neither, the only option is to use the onboard wireless adapter. Depending on your model, you may have the Broadcom BCM43602, which is supported by the open source <a href="../en/Broadcom_wireless.html#brcm80211" title="Broadcom wireless">brcmfac</a> module that is built-in to the Linux kernel and typically enabled by default. If this is the case, you should have wireless available from the installer with no further configuration necessary.
</p>
<p>Other BCM43XX chipsets may only be supported by a proprietary driver such as <a href="../en/Broadcom_wireless.html#b43" class="mw-redirect" title="B43">b43</a> or <a href="../en/Broadcom_wireless.html#broadcom-wl" title="Broadcom wireless">wl</a>. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=broadcom-wl">broadcom-wl</a></span> package is included in the Arch installer media, but may need to be manually enabled before the chipset will function correctly. The <code>b43</code> driver is also built-in to the kernel and included in the installation media, but it requires external proprietary firmware from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/b43-firmware/">b43-firmware</a></span><sup><small>AUR</small></sup> package which will need to be downloaded from another machine connected to the internet.
</p>
<p>You can list the network interfaces available from the installer environment by running <code>ip link show</code>. If you can see your wireless interface in the list, you should now be able to use <code>wifi-menu</code> to select and connect to your wireless network.
</p>
<p>If the <a href="https://en.wikipedia.org/wiki/Loopback#Virtual_loopback_interface" class="extiw" title="wikipedia:Loopback">Linux loopback device</a> is the only listed interface, you may need to load an alternative Broadcom driver. To do this, begin by ensuring that all Broadcom drivers have been unloaded.
</p>
<pre># rmmod ssb
# rmmod bcma
# rmmod b43
# rmmod wl
</pre>
<p>Then try loading <code>brcmfmac</code> again.
</p>
<pre># modprobe bcma
</pre>
<p>Wait a few seconds and then list your network interfaces again. If you still cannot see your wireless interface, unload <code>brcmfmac</code> again and try reloading <code>wl</code>.
</p>
<pre># rmmod bcma
# modprobe wl
</pre>
<p>If the wireless interface is still not listed, you will need to compile the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/b43-firmware/">b43-firmware</a></span><sup><small>AUR</small></sup> package on another computer with <a href="../en/Pacman.html" title="Pacman">pacman</a> installed, put the generated package file on a second USB storage device, install the package within the Arch live environment and then load the <code>b43</code> module, much like above. See <a href="../en/Broadcom_wireless.html" title="Broadcom wireless">Broadcom wireless</a> and <a href="../en/Makepkg.html" title="Makepkg">makepkg</a> for more information.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you used the <code>wl</code> or <code>b43</code> drivers, they will need to be manually installed to your new Arch system, this can be done by synchronising the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=broadcom-wl">broadcom-wl</a></span>/<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=broadcom-wl-dkms">broadcom-wl-dkms</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/b43-firmware/">b43-firmware</a></span><sup><small>AUR</small></sup> packages as necessary, either during setup or after booting into your new Arch system.</div>
<h2><span class="mw-headline" id="Setup_bootloader">Setup bootloader</span></h2>
<p>MacBooks can be easily configured to use <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> or <a href="../en/GRUB.html" title="GRUB">GRUB</a> directly from the Apple bootloader, without the need for third-party tools such as <a href="../en/REFInd.html" title="REFInd">rEFInd</a>. Systemd-boot is the recommended way for systems that support UEFI.
</p>
<ul>
<li>First, make sure you mounted the EFI System Partition at <code>/boot</code> (that is within the chroot, so mount it as <code>/mnt/boot</code> with <code>mount /dev/sd<i>XY</i> /mnt/boot</code>)</li>
<li>Proceed with <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a> normally</li>
<li>Once inside the chrooted environment, type the following command to install <i>systemd-boot</i>: <pre># bootctl --path=/boot install</pre> The above command will copy the <i>systemd-boot</i> binary to <code>/boot/EFI/Boot/BOOTX64.EFI</code> and add <i>systemd-boot</i> itself as the default EFI application (default boot entry) loaded by the EFI Boot Manager.</li>
<li>Proceed to <a href="../en/Systemd-boot.html#Configuration" title="Systemd-boot">systemd-boot#Configuration</a> in order to correctly set up the bootloader.</li>
</ul>
<p>At the next reboot, the Apple Boot Manager, shown when holding down the option key when booting the MacBook, should display Arch Linux (it will be displayed as <code>EFI Boot</code> as a possible boot option).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you wish to use GRUB, have a look at <a href="../en/Mac.html#GRUB" title="Mac">Mac#GRUB</a>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong>  After the installation, it is optionally possible to set a custom icon that will be displayed in the MacBook boot loader. In order to do that, you need to install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wget">wget</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=librsvg">librsvg</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libicns">libicns</a></span> packages. After that, just follow the following commands:
<pre>$ wget -O /tmp/archlinux.svg <a rel="nofollow" class="external free" href="https://archlinux.org/logos/archlinux-icon-crystal-64.svg">https://archlinux.org/logos/archlinux-icon-crystal-64.svg</a>
$ rsvg-convert -w 128 -h 128 -o /tmp/archlogo.png /tmp/archlinux.svg
# png2icns /boot/.VolumeIcon.icns /tmp/archlogo.png
$ rm /tmp/archlogo.png
$ rm /tmp/archlinux.svg
</pre>
<p>Obviously, you can replace the Arch logo with any other icon you like.
</p>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If you installed Arch Linux alongside OS X, you will be able to change the default boot location from system Settings inside OS X. If Arch Linux does not show up as a possible boot option, you will have to mount the EFI System Partition inside OS X before selecting your boot option:
<pre>$ diskutil mount disk0s1</pre>
<p>Keep in mind, however, it is also possible to load OS X from <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a>.
</p>
</div>
<h2><span class="mw-headline" id="Post_installation">Post installation</span></h2>
<p>See <a href="../en/General_recommendations.html" title="General recommendations">General recommendations</a> for system management directions and post-installation tutorials.
</p>
<p>Additionally, you might want to have a look at the <a href="../en/Power_management.html" title="Power management">Power management</a> page for useful tips in power management and battery-saving software.
</p>
<h3><span class="mw-headline" id="Kernel_parameters">Kernel parameters</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Since Kernel version 4.17.2-1 adding <code>acpi_osi</code> parameter with an empty value causes battery to be undetectable. See this <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=238194">forum thread</a> for more information.
It is required to specify <code>acpi_osi=Darwin</code> as a <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel boot parameter</a> in order to let suspension/hibernation work properly.</div>
<p>Due to <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=177151">this bug</a>, it might be required to add <code>acpi_osi=</code> as a kernel boot parameter in order to improve battery life.
</p>
<p>Due to <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=117481">this bug</a>, it may be necessary to disable GPE06 by adding <code>acpi_mask_gpe=0x06</code> as a kernel boot parameter. To verify that this is required, check <code>cat /sys/firmware/acpi/interrupts/gpe06</code>. There should be a rapidly increasing number of interrupts registered, and one of your cores should be pegged at 100%.
</p>
<h3><span class="mw-headline" id="Fan_control">Fan control</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mbpfan-git/">mbpfan-git</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/macfand-git/">macfand-git</a></span><sup><small>AUR</small></sup> (or the no longer maintained <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/macfanctld/">macfanctld</a></span><sup><small>AUR</small></sup>) and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the mbpfan.service, macfanctld.service, or macfand.service in order to prevent laptop overheating.
</p>
<h3><span class="mw-headline" id="Console">Console</span></h3>
<p>Largest console font can be achieved by using:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/vconsole.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
FONT=sun12x22</pre>
<h3><span class="mw-headline" id="Graphics">Graphics</span></h3>
<p>MacBook Pro with only integrated Intel graphics and no discrete GPU are supported out of the box. See <a href="../en/Intel_graphics.html" title="Intel graphics">Intel graphics</a> for additional details and configuration options.
</p>
<ul><li>MacbookPro11,5 (MacBook Pro Retina, 15-inch, Mid 2015 with AMD Radeon R9 M370X)
<ul>
<li>This uses amdgpu through the mesa driver. This should work and be installed by default. The amdgpu-pro drivers do not support this GPU.</li>
<li>To get GPU switching enabled: Set up a boot to terminal in GRUB and refind in case of issues. <a rel="nofollow" class="external free" href="https://github.com/0xbb/gpu-switch">https://github.com/0xbb/gpu-switch</a> can be used to enable/disable discrete graphics, but this should not be necessary. Make sure drivers for either X11 (xf86-video-amdgpu and xf86-video-intel) or Wayland for both <a href="../en/Intel_graphics.html" title="Intel graphics">Intel graphics</a> and <a href="../en/AMDGPU.html" title="AMDGPU">AMDGPU</a> are installed. use <a href="../en/REFInd.html" title="REFInd">REFInd</a> with spoof_osx_version enabled in refind.conf (setting to 10.11 confirmed to work for this model) to have firmware enable graphics muxing hardware. This is a muxed graphics device and more information about apple-gmux can be found here: <a rel="nofollow" class="external free" href="https://docs.kernel.org/gpu/vga-switcheroo.html">https://docs.kernel.org/gpu/vga-switcheroo.html</a>. Test with <pre>$ glxinfo | grep "OpenGL renderer" &amp;&amp; DRI_PRIME=1 glxinfo | grep "OpenGL renderer"</pre>
</li>
</ul>
</li></ul>
<p>Versions which include a discrete Nvidia GPU should need additional configuration:
</p>
<ul><li>MacBook Pro 11,3:
<ul>
<li>nvidia drivers work, see <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> or <a href="../en/Nouveau.html" title="Nouveau">Nouveau</a>. In case you use the proprietary driver, see the following link <a rel="nofollow" class="external autonumber" href="https://cberner.com/2013/03/01/installing-ubuntu-13-04-on-macbook-pro-retina/">[1]</a> for additional details.</li>
<li>It is possible to configure the integrated intel GPU, provided you are using <a href="../en/GRUB.html" title="GRUB">GRUB</a> as your bootloader of choice. See below for details.</li>
<li>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-nouveau">xf86-video-nouveau</a></span> package seems to be stable. Switching to VTs and back works fine from MATE and GNOME. Sometimes Chromium causes a "kernele rejected pixbuf" error which freezes the desktop.</li>
<li>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-dkms">nvidia-dkms</a></span> driver has been crashing a lot.</li>
<li>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span> driver seems to be super stable, but GNOME desktop will not like to start, showing you a "Oh no! Something has gone wrong" message. Cinnamon Desktop is buttery smooth with the NVIDIA driver, and if you want your GNOME desktop, you can run <code>gnome-shell --replace &amp;</code> while in Cinnamon desktop to switch to GNOME Shell as a workaround.</li>
</ul>
</li></ul>
<p>Note that the video output ports (HDMI and DisplayPort) are hardwired to the Nvidia GPU, so they will not work if you use the Intel GPU and power off the Nvidia GPU. Switching GPUs requires a reboot, so if you primarily keep the laptop docked at a desk, configuring switchable graphics may not be worth the hassle of setting it up and then rebooting every time you need to switch. However, the Nvidia GPU does use significantly more power than the Intel one, so you will take a significant hit to battery life.
</p>
<h4>
<span id="Getting_the_integrated_intel_card_to_work_on_11.2C3"></span><span class="mw-headline" id="Getting_the_integrated_intel_card_to_work_on_11,3">Getting the integrated intel card to work on 11,3</span>
</h4>
<p>By default the integrated card is powered off. To fix this we need a GRUB function called <code>apple_set_os</code>. This function has not officially been merged yet, so we need to build GRUB ourselves.
</p>
<ul>
<li>Download the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/grub-git/">grub-git</a></span><sup><small>AUR</small></sup> package from the AUR.</li>
<li>Get the patch from <a rel="nofollow" class="external autonumber" href="https://lists.gnu.org/archive/html/grub-devel/2013-12/msg00442.html">[2]</a>.</li>
<li>Put the patch contents into a file labeled something like <code>apple.patch</code>
</li>
<li>Add this patch to your PKGBUILD and run <code>makepkg -si</code>.</li>
<li>Reboot into OS X and download gfxCardStatus v2.2.1 (newer versions do not work properly) run the app and specify the integrated card.</li>
<li>Reboot and at the GRUB prompt type <code>c</code> to get into console, followed by <code>apple_set_os</code> at the prompt.</li>
</ul>
<p>You should now be able to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> and get your card running.
</p>
<p>Note that the HDMI port and MiniDP are soldered to the NVIDIA card meaning that to run external displays you need to use the dedicated card.
</p>
<h4><span class="mw-headline" id="Alternative_method_to_disable_NVIDIA_card">Alternative method to disable NVIDIA card</span></h4>
<p>While the above method for switching graphics works, there is a more effective method that does not require the use of gfxCardStatus or a patched GRUB installation (but it can be used if desired).
</p>
<p>First, the Intel GPU will not function without a patch called apple_set_os. You can either use a patched GRUB or use rEFInd with <code>spoof_osx_version</code> set in <code>refind.conf</code>. This will need to be loaded before each boot of Arch or else the Intel GPU will not function. It can be chainloaded via GRUB.
</p>
<p>Then you will need to download an application called gpu-switch for switching the GPU on dual MacBook Pros, it is fairly easy to use as well. It can be downloaded from here, <a rel="nofollow" class="external free" href="https://github.com/0xbb/gpu-switch">https://github.com/0xbb/gpu-switch</a>.
</p>
<p>Secondly, once you have downloaded gpu-switch, extract the application to your home directory and open up a terminal emulator and cd to that directory. To switch to the Intel graphics, run <code>gpu-switch -i</code> as sudo, and the card will be active on reboot. Conversely, to enable the dedicated card instead, run <code>gpu-switch -d</code> as sudo. You must have booted with the aforementioned patch for this to work.
</p>
<p>Next, gpu-switch will not completely power down the dedicated card. To do that, you will have to create a custom grub menuentry and compile a program that will power off the dedicated card.
</p>
<p>To do that, please refer to the following article, <a href="../en/MacBookPro10,x.html#Graphics" title="MacBookPro10,x">MacBookPro10,x#Graphics</a>.
</p>
<p>You should now have working integrated graphics and the dedicated GPU should now power down. If you get a blank screen after doing this, wait and see what happens, if it stays blank for a prolonged period of time, try resetting the SMC, and then booting back into Arch.
</p>
<p>I noticed that afterwards VGA switcheroo disabled the nouveau driver, if this workaround still does not work, try installing a cronjob package, and adding the following:
</p>
<p><code>@reboot echo OFF &gt; /sys/kernel/debug/vgaswitcheroo/switch</code>
<code>@reboot echo IGD &gt; /sys/kernel/debug/vgaswitcheroo/switch</code>
</p>
<p>I'm not sure if the vgaswitcheroo commands actually do anything, I need somebody to test this workaround and let me know how it works for them.
</p>
<p>To see if you dedicated GPU is actually disabled, run:
</p>
<pre># cat /sys/kernel/debug/vgaswitcheroo/switch
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> gpu-switch has been tested only on a select few models, those being MacBookPro9,1, MacBookPro10,1, and MacBookPro11,3. Use at your own risk.</div>
<h3><span class="mw-headline" id="Microcode">Microcode</span></h3>
<p>You may need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-ucode">intel-ucode</a></span>, especially if you have Nvidia drivers. Read the wiki page to learn more about <a href="../en/Microcode.html" title="Microcode">Microcode</a>.
</p>
<h3><span class="mw-headline" id="HiDPI">HiDPI</span></h3>
<p>See <a href="../en/HiDPI.html" title="HiDPI">HiDPI</a> for information on how to tweak the system for a Retina screen.
</p>
<h3><span class="mw-headline" id="Sound">Sound</span></h3>
<p>If you do not want to hear the annoying sound at system start-up, one way to get rid of it is to turn sound off while under Mac OS.
</p>
<p>Also, if you are using PulseAudio, sometimes it thinks HDMI is the default sound card; to solve this problem, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> and set Analog Stereo as the fallback device.
</p>
<h3><span class="mw-headline" id="Touchpad">Touchpad</span></h3>
<p>One method is to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-input-synaptics">xf86-input-synaptics</a></span> and configure to your liking:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/50-synaptics.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
    MatchIsTouchpad "on"
    Identifier      "touchpad catchall"
    Driver          "synaptics"
    # 1 = left, 2 = right, 3 = middle
    Option          "TapButton1" "1"
    Option          "TapButton2" "3"
    Option          "TapButton3" "2"
    # Palm detection
    Option          "PalmDetect" "1"
    # Horizontal scrolling
    Option "HorizTwoFingerScroll" "1"
    # Natural Scrolling (and speed)
    Option "VertScrollDelta" "-100"
    Option "HorizScrollDelta" "-100"
EndSection</pre>
<h4><span class="mw-headline" id="Ctrl-Click_as_Right-Click">Ctrl-Click as Right-Click</span></h4>
<p>Using this SuperUser receipt <a rel="nofollow" class="external autonumber" href="https://superuser.com/questions/217615/how-to-right-click-using-the-keyboard-from-ubuntu-on-a-mac">[3]</a> I got Ctrl-click working as right-click. I had to increase the sleep time to 0.1 though.
</p>
<h4><span class="mw-headline" id="input-mtrack">input-mtrack</span></h4>
<p>Another method is to use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-input-mtrack-git/">xf86-input-mtrack-git</a></span><sup><small>AUR</small></sup>. If you like to have a thumb resting on the touchpad, this driver is the right choice, because it has an option for IgnoreThumb.
</p>
<p>With this config the touchpad behavior becomes more osx-like.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/00-touchpad.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "InputClass"
    MatchIsTouchpad "on"
    Identifier      "Touchpads"
    Driver          "mtrack"
    Option          "Sensitivity" "0.64"
    Option          "FingerHigh" "5"
    Option          "FingerLow" "1"
    Option          "IgnoreThumb" "true"
    Option          "IgnorePalm" "true"
    Option          "DisableOnPalm" "true"
    Option          "TapButton1" "1"
    Option          "TapButton2" "3"
    Option          "TapButton3" "2"
    Option          "TapButton4" "0"
    Option          "ClickFinger1" "1"
    Option          "ClickFinger2" "2"
    Option          "ClickFinger3" "3"
    Option          "ButtonMoveEmulate" "false"
    Option          "ButtonIntegrated" "true"
    Option          "ClickTime" "25"
    Option          "BottomEdge" "30"
    Option          "SwipeLeftButton" "8"
    Option          "SwipeRightButton" "9"
    Option          "SwipeUpButton" "0"
    Option          "SwipeDownButton" "0"
    Option          "ScrollDistance" "75"
    Option          "VertScrollDelta" "-111"
    Option          "HorizScrollDelta" "-111"
EndSection
</pre>
<h3><span class="mw-headline" id="Swap_Opt_and_Command_Key">Swap Opt and Command Key</span></h3>
<p>Swapping opt and cmd is supported by the <code>hid_apple</code> module:
</p>
<pre># echo 1 &gt; /sys/module/hid_apple/parameters/swap_opt_cmd
</pre>
<p>To make the change permanent add the option to <code>/etc/modprobe.d/hid_apple.conf</code> and <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<pre>options hid_apple swap_opt_cmd=1
</pre>
<h3><span class="mw-headline" id="Keyboard_backlight">Keyboard backlight</span></h3>
<p>See <a href="../en/Mac/Troubleshooting.html#Keyboard_backlight" title="Mac/Troubleshooting">Mac/Troubleshooting#Keyboard backlight</a>.
</p>
<h3><span class="mw-headline" id="Screen_backlight">Screen backlight</span></h3>
<ul>
<li>Intel, works on Linux 3.13</li>
<li>Framebuffer, works for MacBook Pro 11,1 and 11,3 via <code>/sys/class/backlight/gmux_backlight/brightness</code>.</li>
<li>Brightness in <code>/sys/class/backlight/gmux_backlight/brightness</code> can be modified comfortably via the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gmux_backlight/">gmux_backlight</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> utility without root privileges. Requires the <code>setpci</code> setting below.</li>
<li>Nvidia, does not work using default settings. Try executing as root <code>setpci -v -H1 -s 00:01.00 BRIDGE_CONTROL=0</code>. It may be worthwhile to create a systemd unit to execute this on boot.</li>
<li>AMD models may require a patched kernel for the backlight to be adjusted. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-macbook/">linux-macbook</a></span><sup><small>AUR</small></sup> kernel fixes this.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the screen does not show the prompt or the login manager (i.e. a black screen), append <code>i915.invert_brightness=1</code> to the kernel. </div>
<h3><span class="mw-headline" id="Suspend">Suspend</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> references kernel versions from 2013 (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:MacBookPro11,x.html">Talk:MacBookPro11,x</a>)</div>
</div>
<p>Works from Linux 3.13.
</p>
<p>It may be necessary to disable USB's wakeup ability by by echoing <code>XHC1</code> to <code>/proc/acpi/wakeup</code> in order to prevent immediate wakeup on suspend. This also holds for MacBook Air 2013. To make this permanent, create a systemd unit:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/fix-spurious-wakeups.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Type=oneshot
ExecStart=sh -c "echo XHC1 &gt; /proc/acpi/wakeup"
RemainAfterExit=true
[Install]
WantedBy=multi-user.target</pre>
<p>And then do a <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Daemon-reload">daemon-reload</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>fix-spurious-wakeups.service</code>.
</p>
<p>No backlight after suspend with Linux 3.12. Use hibernate instead.
</p>
<h3><span class="mw-headline" id="Powersave">Powersave</span></h3>
<p>Disabling the internal cardreader and bluetooth controller may save battery life. When not using them, create the following <a href="../en/Udev.html" title="Udev">udev</a> rules:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-apple_cardreader.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEMS=="usb", ATTRS{idVendor}=="05ac", ATTRS{idProduct}=="8406", RUN+="/usr/local/sbin/remove_ignore_usb-device.sh 05ac 8406"</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-apple_broadcom_bcm2046_bluetooth.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEMS=="usb", ATTRS{idVendor}=="05ac", ATTRS{idProduct}=="8289", RUN+="/usr/local/sbin/remove_ignore_usb-device.sh 05ac 8289"
SUBSYSTEMS=="usb", ATTRS{idVendor}=="0a5c", ATTRS{idProduct}=="4500", RUN+="/usr/local/sbin/remove_ignore_usb-device.sh 0a5c 4500"</pre>
<p>As udev's <code>OPTIONS=="ignore_device"</code> may not work reliably, the above rules use <a rel="nofollow" class="external text" href="https://gist.github.com/anonymous/9c9d45c4818e3086ceca">a script</a> to manually remove the usb device from <code>/sys/bus/usb/devices/</code>.
</p>
<p>If battery life is not satisfactory, it may help to use power saving utilities, such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tlp">tlp</a></span>, and/or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=powertop">powertop</a></span> from the official repositories. To better optimize battery life, TLP also has a configuration file located at <code>/etc/default/tlp</code> that you can edit to suit your machine. For more information, visit the wiki pages for these tools, <a href="../en/TLP.html" title="TLP">TLP</a> and <a href="../en/Powertop.html" title="Powertop">Powertop</a>, respectively.
</p>
<h3><span class="mw-headline" id="SD_Card_Reader">SD Card Reader</span></h3>
<p>Disappears sporadically after suspend as of Linux 3.18. Workaround:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/xhci-reset-on-suspend.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Reset XHCI USB devices on suspend/resume, fixes SD Card reader vanishing after suspend
options xhci_hcd quirks=0x80</pre>
<p>Note: As of Linux 3.18.6-1 (and possibly earlier versions post-3.18), this fix <b>may</b> not be needed and might cause issues ranging from failed suspend to the SD card not being recognized at all. Test with and without the fix to determine which works best for you.
</p>
<h3><span class="mw-headline" id="Repurpose_the_power_key">Repurpose the power key</span></h3>
<p>By default systemd handles the power key as defined in <code>/etc/systemd/logind.conf</code>. By setting <code>HandlePowerKey=ignore</code> systemd ignores power key events.
</p>
<p>Now the power key can be repurposed as keycode 124. For example in i3 conf:
</p>
<pre>bindcode 124 ...
</pre>
<h3><span class="mw-headline" id="Web_cam">Web cam</span></h3>
<p>A reverse engineered driver is being developed here: <a rel="nofollow" class="external free" href="https://github.com/patjak/bcwc_pcie/">https://github.com/patjak/bcwc_pcie/</a> . It is marked experimental, but basic functionality seems to be working. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bcwc-pcie-git/">bcwc-pcie-git</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>.
</p>
<h2><span class="mw-headline" id="What_does_not_work">What does not work</span></h2>
<h3><span class="mw-headline" id="General">General</span></h3>
<h3><span class="mw-headline" id="Wi-Fi">Wi-Fi</span></h3>
<ul><li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=broadcom-wl">broadcom-wl</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=broadcom-wl-dkms">broadcom-wl-dkms</a></span> works
<ul>
<li>Stability is an issue for some, look at <a href="../en/Broadcom_wireless.html" title="Broadcom wireless">Broadcom wireless</a> for possible fixes (e.g. downgrading kernel works if your card is BCM4360)</li>
<li>If stability is still an issue after the above, a possible alternative is to connect on a 802.11g network. More recent standards can cause the BCM4360 to disconnect randomly.</li>
</ul>
</li></ul>
<h3>
<span id="Backlight_keys_.2F_Suspend_support"></span><span class="mw-headline" id="Backlight_keys_/_Suspend_support">Backlight keys / Suspend support</span>
</h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linux-macbook/">linux-macbook</a></span><sup><small>AUR</small></sup> is an AUR package created specifically for MacBook laptops that includes patches for these issues, as well fixing powering off correctly and CPU frequency scaling with the intel_pstate driver.
</p>
<h2><span class="mw-headline" id="Discussions">Discussions</span></h2>
<ul><li><a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=171883">https://bbs.archlinux.org/viewtopic.php?id=171883</a></li></ul>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/MacBookPro10,x.html" title="MacBookPro10,x">MacBookPro10,x</a></li>
<li><a href="../en/Mac.html" title="Mac">Mac</a></li>
</ul>
<h2><span class="mw-headline" id="Example">Example</span></h2>
<ul><li><a rel="nofollow" class="external free" href="https://github.com/GoGoGadgetRepo/ArchInstallMBP">https://github.com/GoGoGadgetRepo/ArchInstallMBP</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Apple.html" title="Category:Apple">Apple</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Laptop_style.html" title="Category:Pages or sections flagged with Template:Laptop style">Pages or sections flagged with Template:Laptop style</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=MacBookPro11,x&amp;oldid=812665">https://wiki.archlinux.org/index.php?title=MacBookPro11,x&amp;oldid=812665</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 20 July 2024, at 09:58.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
