<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Intel graphics - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Intel_graphics rootpage-Intel_graphics skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Loading" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Loading">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Loading</div>
		</a>
		
			<button aria-controls="toc-Loading-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Loading subsection</span>
			</button>
		
		<ul id="toc-Loading-sublist" class="vector-toc-list">
			<li id="toc-Early_KMS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Early_KMS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Early KMS</div>
			</a>
			
			<ul id="toc-Early_KMS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_GuC_/_HuC_firmware_loading" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_GuC_/_HuC_firmware_loading">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Enable GuC / HuC firmware loading</div>
			</a>
			
			<ul id="toc-Enable_GuC_/_HuC_firmware_loading-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Xorg_configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Xorg_configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Xorg configuration</div>
		</a>
		
			<button aria-controls="toc-Xorg_configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Xorg configuration subsection</span>
			</button>
		
		<ul id="toc-Xorg_configuration-sublist" class="vector-toc-list">
			<li id="toc-With_the_modesetting_driver" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#With_the_modesetting_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>With the modesetting driver</div>
			</a>
			
			<ul id="toc-With_the_modesetting_driver-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_the_Intel_driver" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#With_the_Intel_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>With the Intel driver</div>
			</a>
			
			<ul id="toc-With_the_Intel_driver-sublist" class="vector-toc-list">
				<li id="toc-AccelMethod" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#AccelMethod">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.1</span>AccelMethod</div>
			</a>
			
			<ul id="toc-AccelMethod-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_Intel_DDX_driver_with_recent_GPUs" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_Intel_DDX_driver_with_recent_GPUs">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.2</span>Using Intel DDX driver with recent GPUs</div>
			</a>
			
			<ul id="toc-Using_Intel_DDX_driver_with_recent_GPUs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disabling_TearFree,_TripleBuffer,_SwapbuffersWait" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Disabling_TearFree,_TripleBuffer,_SwapbuffersWait">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.3</span>Disabling TearFree, TripleBuffer, SwapbuffersWait</div>
			</a>
			
			<ul id="toc-Disabling_TearFree,_TripleBuffer,_SwapbuffersWait-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Module-based_options" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Module-based_options">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Module-based options</div>
		</a>
		
			<button aria-controls="toc-Module-based_options-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Module-based options subsection</span>
			</button>
		
		<ul id="toc-Module-based_options-sublist" class="vector-toc-list">
			<li id="toc-Framebuffer_compression_(enable_fbc)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Framebuffer_compression_(enable_fbc)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Framebuffer compression (enable_fbc)</div>
			</a>
			
			<ul id="toc-Framebuffer_compression_(enable_fbc)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fastboot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fastboot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Fastboot</div>
			</a>
			
			<ul id="toc-Fastboot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Intel_GVT-g_graphics_virtualization_support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Intel_GVT-g_graphics_virtualization_support">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Intel GVT-g graphics virtualization support</div>
			</a>
			
			<ul id="toc-Intel_GVT-g_graphics_virtualization_support-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_performance_support" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_performance_support">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Enable performance support</div>
			</a>
			
			<ul id="toc-Enable_performance_support-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Setting_scaling_mode" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_scaling_mode">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Setting scaling mode</div>
			</a>
			
			<ul id="toc-Setting_scaling_mode-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hardware_accelerated_H.264_decoding_on_GMA_4500" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hardware_accelerated_H.264_decoding_on_GMA_4500">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Hardware accelerated H.264 decoding on GMA 4500</div>
			</a>
			
			<ul id="toc-Hardware_accelerated_H.264_decoding_on_GMA_4500-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Overriding_reported_OpenGL_version" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Overriding_reported_OpenGL_version">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Overriding reported OpenGL version</div>
			</a>
			
			<ul id="toc-Overriding_reported_OpenGL_version-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Monitoring" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Monitoring">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Monitoring</div>
			</a>
			
			<ul id="toc-Monitoring-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Setting_brightness_and_gamma" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setting_brightness_and_gamma">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Setting brightness and gamma</div>
			</a>
			
			<ul id="toc-Setting_brightness_and_gamma-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Testing_the_new_experimental_Xe_driver" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Testing_the_new_experimental_Xe_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>Testing the new experimental Xe driver</div>
			</a>
			
			<ul id="toc-Testing_the_new_experimental_Xe_driver-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Tearing" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tearing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Tearing</div>
			</a>
			
			<ul id="toc-Tearing-sublist" class="vector-toc-list">
				<li id="toc-With_the_Intel_driver_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_the_Intel_driver_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1.1</span>With the Intel driver</div>
			</a>
			
			<ul id="toc-With_the_Intel_driver_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_the_modesetting_driver_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_the_modesetting_driver_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1.2</span>With the modesetting driver</div>
			</a>
			
			<ul id="toc-With_the_modesetting_driver_2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Disable_Vertical_Synchronization_(VSYNC)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_Vertical_Synchronization_(VSYNC)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Disable Vertical Synchronization (VSYNC)</div>
			</a>
			
			<ul id="toc-Disable_Vertical_Synchronization_(VSYNC)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DRI3_issues" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#DRI3_issues">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>DRI3 issues</div>
			</a>
			
			<ul id="toc-DRI3_issues-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Font_and_screen_corruption_in_GTK_applications_(missing_glyphs_after_suspend/resume)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Font_and_screen_corruption_in_GTK_applications_(missing_glyphs_after_suspend/resume)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Font and screen corruption in GTK applications (missing glyphs after suspend/resume)</div>
			</a>
			
			<ul id="toc-Font_and_screen_corruption_in_GTK_applications_(missing_glyphs_after_suspend/resume)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Blank_screen_during_boot,_when_"Loading_modules"' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Blank_screen_during_boot,_when_"Loading_modules"'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Blank screen during boot, when "Loading modules"</div>
			</a>
			
			<ul id='toc-Blank_screen_during_boot,_when_"Loading_modules"-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-X_freeze/crash_with_intel_driver" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#X_freeze/crash_with_intel_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>X freeze/crash with intel driver</div>
			</a>
			
			<ul id="toc-X_freeze/crash_with_intel_driver-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Adding_undetected_resolutions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Adding_undetected_resolutions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>Adding undetected resolutions</div>
			</a>
			
			<ul id="toc-Adding_undetected_resolutions-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Backlight_is_not_adjustable" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Backlight_is_not_adjustable">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.8</span>Backlight is not adjustable</div>
			</a>
			
			<ul id="toc-Backlight_is_not_adjustable-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Corruption_or_unresponsiveness_in_Chromium_and_Firefox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Corruption_or_unresponsiveness_in_Chromium_and_Firefox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.9</span>Corruption or unresponsiveness in Chromium and Firefox</div>
			</a>
			
			<ul id="toc-Corruption_or_unresponsiveness_in_Chromium_and_Firefox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Kernel_crashing_w/kernels_4.0+_on_Broadwell/Core-M_chips" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Kernel_crashing_w/kernels_4.0+_on_Broadwell/Core-M_chips">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.10</span>Kernel crashing w/kernels 4.0+ on Broadwell/Core-M chips</div>
			</a>
			
			<ul id="toc-Kernel_crashing_w/kernels_4.0+_on_Broadwell/Core-M_chips-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Lag_in_Windows_guests" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Lag_in_Windows_guests">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.11</span>Lag in Windows guests</div>
			</a>
			
			<ul id="toc-Lag_in_Windows_guests-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_flickering" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_flickering">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.12</span>Screen flickering</div>
			</a>
			
			<ul id="toc-Screen_flickering-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OpenGL_2.1_with_i915_driver" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OpenGL_2.1_with_i915_driver">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.13</span>OpenGL 2.1 with i915 driver</div>
			</a>
			
			<ul id="toc-OpenGL_2.1_with_i915_driver-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-KMS_Issue:_console_is_limited_to_small_area" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#KMS_Issue:_console_is_limited_to_small_area">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.14</span>KMS Issue: console is limited to small area</div>
			</a>
			
			<ul id="toc-KMS_Issue:_console_is_limited_to_small_area-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_sound_through_HDMI_on_a_Haswell_CPU" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_sound_through_HDMI_on_a_Haswell_CPU">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.15</span>No sound through HDMI on a Haswell CPU</div>
			</a>
			
			<ul id="toc-No_sound_through_HDMI_on_a_Haswell_CPU-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Crash/freeze_on_low_power_Intel_CPUs" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Crash/freeze_on_low_power_Intel_CPUs">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.16</span>Crash/freeze on low power Intel CPUs</div>
			</a>
			
			<ul id="toc-Crash/freeze_on_low_power_Intel_CPUs-sublist" class="vector-toc-list">
				<li id="toc-Higher_C-states_prevent_wakeup_from_S3" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Higher_C-states_prevent_wakeup_from_S3">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.16.1</span>Higher C-states prevent wakeup from S3</div>
			</a>
			
			<ul id="toc-Higher_C-states_prevent_wakeup_from_S3-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Add_support_for_165Hz_monitor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Add_support_for_165Hz_monitor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.17</span>Add support for 165Hz monitor</div>
			</a>
			
			<ul id="toc-Add_support_for_165Hz_monitor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Freeze_after_wake_from_sleep/suspend_with_Raptor_Lake_and_Alder_Lake-P" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Freeze_after_wake_from_sleep/suspend_with_Raptor_Lake_and_Alder_Lake-P">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.18</span>Freeze after wake from sleep/suspend with Raptor Lake and Alder Lake-P</div>
			</a>
			
			<ul id="toc-Freeze_after_wake_from_sleep/suspend_with_Raptor_Lake_and_Alder_Lake-P-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Intel graphics</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Intel" title="Intel – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Intel_graphics.html" title="Intel graphics – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Intel_graphics" title="Intel graphics – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Intel_graphics.html" title="Intel graphics – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Intel_graphics" title="Intel graphics – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Intel_GMA_3600.html" title="Intel GMA 3600">Intel GMA 3600</a></li>
<li><a href="../en/Xorg.html" title="Xorg">Xorg</a></li>
<li><a href="../en/Kernel_mode_setting.html" title="Kernel mode setting">Kernel mode setting</a></li>
<li><a href="../en/Xrandr.html" title="Xrandr">Xrandr</a></li>
<li><a href="../en/Hybrid_graphics.html" title="Hybrid graphics">Hybrid graphics</a></li>
<li><a href="../en/Vulkan.html" title="Vulkan">Vulkan</a></li>
<li><a href="../en/GPGPU.html" title="GPGPU">GPGPU</a></li>
</ul>
</div>
<p>Since Intel provides and supports open source drivers, Intel graphics are essentially plug-and-play.
</p>
<p>For a comprehensive list of Intel GPU models and corresponding chipsets and CPUs, see <a href="https://en.wikipedia.org/wiki/Intel_Graphics_Technology" class="extiw" title="wikipedia:Intel Graphics Technology">Wikipedia:Intel Graphics Technology</a> and <a href="https://wiki.gentoo.org/wiki/Intel#Feature_support" class="extiw" title="gentoo:Intel">Gentoo:Intel#Feature support</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>PowerVR-based graphics (<a href="../en/Intel_GMA_3600.html" title="Intel GMA 3600">GMA 3600</a> series) are not supported by open source drivers.</li>
<li>Intel's Gen<i>N</i> hardware does not refer to the generation of the CPU, it refers to the <a href="https://en.wikipedia.org/wiki/List_of_Intel_graphics_processing_units" class="extiw" title="wikipedia:List of Intel graphics processing units">generation of the GPU</a>, which is different from the generation of the CPU.</li>
<li>See <a href="../en/Xorg.html#Driver_installation" title="Xorg">Xorg#Driver installation</a> to identify your card.</li>
</ul>
</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<ul>
<li>
<a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> one of the following packages, which provide the <a href="https://en.wikipedia.org/wiki/Direct_Rendering_Infrastructure" class="extiw" title="wikipedia:Direct Rendering Infrastructure">DRI</a> driver for 3D acceleration.
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span> is the up-to-date <a href="../en/OpenGL.html" class="mw-redirect" title="Mesa">Mesa</a> package which includes the modern Gallium3D drivers for Gen 3 hardware and later. This is the recommended choice.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa-amber">mesa-amber</a></span> is the legacy Mesa package which includes the classic (non-Gallium3D) drivers from Gen 2 to Gen 11 hardware. This driver might have better performance or stability for Gen 7 and older hardware, but is unmaintained.</li>
</ul>
</li>
<li>For 32-bit application support, also install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-mesa">lib32-mesa</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-mesa-amber">lib32-mesa-amber</a></span> package from the <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> repository.</li>
<li>For the <a href="https://en.wikipedia.org/wiki/X.Org_Server#DDX" class="extiw" title="wikipedia:X.Org Server">DDX</a> driver which provides 2D acceleration in <a href="../en/Xorg.html" title="Xorg">Xorg</a> use one of the following drivers:
<ul>
<li>The <i>modesetting</i> driver included in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-server">xorg-server</a></span> package is the recommended choice for Gen 4 hardware and later. It uses the DRI driver for acceleration via <i>glamor</i>.</li>
<li>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> package provides the legacy intel DDX driver from Gen 2 to Gen 9 hardware. This package is generally not recommended, see note below.</li>
</ul>
</li>
<li>For <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> support (Haswell and newer; support for earlier chips is <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/mesa/mesa/-/issues/8249#note_1758622">incomplete or missing</a>), install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vulkan-intel">vulkan-intel</a></span> package. For 32-bit <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> support, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-vulkan-intel">lib32-vulkan-intel</a></span> package.</li>
</ul>
<p>Also see <a href="../en/Hardware_video_acceleration.html" title="Hardware video acceleration">Hardware video acceleration</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Some (<a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Ubuntu-Debian-Abandon-Intel-DDX">Debian &amp; Ubuntu</a>, <a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Fedora-Xorg-Intel-DDX-Switch">Fedora</a>, <a rel="nofollow" class="external text" href="https://community.kde.org/Plasma/5.9_Errata#Intel_GPUs">KDE</a>, <a rel="nofollow" class="external text" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1710400">Mozilla</a>) recommend not installing the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> driver, and instead falling back on the modesetting driver. See <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20160714232204/https://www.reddit.com/r/archlinux/comments/4cojj9/it_is_probably_time_to_ditch_xf86videointel/">[1]</a>, <a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/scan.php?page=article&amp;item=intel-modesetting-2017&amp;num=1">[2]</a>, <a href="../en/Xorg.html#Installation" title="Xorg">Xorg#Installation</a>, and <span class="plainlinks archwiki-template-man" title="$ man 4 modesetting"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/modesetting.4">modesetting(4)</a></span>. However, the modesetting driver can cause problems such as <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/xorg/xserver/-/issues/1364">screen tearing and mouse jittering on XFCE</a>, <a rel="nofollow" class="external text" href="https://bugs.chromium.org/p/chromium/issues/detail?id=370022">artifacts when switching virtual desktops in Chromium</a>, and <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/xorg/xserver/-/issues/928">vsync jitter/video stutter in mpv</a>.</li>
<li>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> driver does not have proper support for Gen 11 and newer hardware, causing lack of acceleration and rendering issues that make Plasma Desktop almost unusable. See <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/xorg/driver/xf86-video-intel/-/commit/7181c5a41c3f00eaf996caa156523c708a18081e">[3]</a>.</li>
<li>There have been couple reports <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=263323">[4]</a> <a rel="nofollow" class="external autonumber" href="https://github.com/qutebrowser/qutebrowser/issues/4641">[5]</a> where the whole graphics stack hard freezes when <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> is installed, not even switching to a different virtual console works (by pressing <code>Ctrl+Alt+F<i>n</i></code>), only killing the user processes with <a href="../en/Keyboard_shortcuts.html#Kernel_(SysRq)" class="mw-redirect" title="SysRq">SysRq</a> works.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Loading">Loading</span></h2>
<p>The Intel kernel module should load fine automatically on system boot.
</p>
<p>If it does not happen, then:
</p>
<ul>
<li>Make sure you do <b>not</b> have <code>nomodeset</code> as a <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>, since Intel requires kernel mode-setting.</li>
<li>Also, check that you have not disabled Intel by using any modprobe blacklisting within <code>/etc/modprobe.d/</code> or <code>/usr/lib/modprobe.d/</code>.</li>
</ul>
<h3><span class="mw-headline" id="Early_KMS">Early KMS</span></h3>
<p><a href="../en/Kernel_mode_setting.html" title="Kernel mode setting">Kernel mode setting</a> (KMS) is supported by the <code>i915</code> driver and is enabled early since <a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> v32, as the <code>kms</code> hook is included by default. For other setups, see <a href="../en/Kernel_mode_setting.html#Early_KMS_start" title="Kernel mode setting">Kernel mode setting#Early KMS start</a> for instructions on how to enable KMS as soon as possible at the boot process.
</p>
<h3>
<span id="Enable_GuC_.2F_HuC_firmware_loading"></span><span class="mw-headline" id="Enable_GuC_/_HuC_firmware_loading">Enable GuC / HuC firmware loading</span>
</h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Despite Intel's documentation, Tiger Lake and Rocket Lake GPUs may actually support <code>enable_guc=3</code>, and have a default of <code>enable_guc=1</code>. (Discuss in <a href="../en/Talk:Intel_graphics.html#TGL/RKL_GuC_Submission" title="Talk:Intel graphics">Talk:Intel graphics#TGL/RKL GuC Submission</a>)</div>
</div>
<p>Starting with Gen9 (Skylake and onwards), Intel GPUs include a <i>Graphics micro (μ) Controller</i> (GuC) which provides the following functionality <a rel="nofollow" class="external autonumber" href="https://01.org/linuxgraphics/downloads/firmware">[6]</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-09-16 ⓘ]</sup>:
</p>
<ul>
<li>Offloading some media decoding functionality from the CPU to the <i>HEVC/H.265 micro (µ) Controller</i> (HuC). Only applicable if using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-media-driver">intel-media-driver</a></span> for <a href="../en/Hardware_video_acceleration.html" title="Hardware video acceleration">hardware video acceleration</a>. Introduced with Gen9.</li>
<li>Using the GuC for scheduling, context submission, and power management. Introduced with Alder Lake-P (Mobile), within Gen12.</li>
</ul>
<p>To use this functionality, the GuC firmware must be loaded. With regards to HuC support, some video features (e.g. CBR rate control on SKL low-power encoding mode) require loading the HuC firmware as well <a rel="nofollow" class="external autonumber" href="https://github.com/intel/media-driver#known-issues-and-limitations">[7]</a>. The GuC and HuC firmware files are both provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span>.
</p>
<p>GuC functionality is controlled by the <code>i915.enable_guc</code> <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>. Its usage is as follows:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>enable_guc value</th>
<th>GuC Submission</th>
<th>HuC Firmware Loading</th>
<th>Default for platforms</th>
<th>Supported on platforms
</th>
</tr>
<tr>
<td>0</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td>Tiger Lake, Rocket Lake, and Pre-Gen12 <a rel="nofollow" class="external autonumber" href="https://github.com/torvalds/linux/blob/b3454ce0b2c8a56e760e6baa88ed10278585072b/drivers/gpu/drm/i915/gt/uc/intel_uc.c#L26-L36">[8]</a>
</td>
<td>All
</td>
</tr>
<tr>
<td>1</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–</td>
<td>Alder Lake-P (Mobile) and newer
</td>
</tr>
<tr>
<td>2</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td>Alder Lake-S (Desktop) <a rel="nofollow" class="external autonumber" href="https://github.com/torvalds/linux/blob/b3454ce0b2c8a56e760e6baa88ed10278585072b/drivers/gpu/drm/i915/gt/uc/intel_uc.c#L38-L42">[9]</a> <a rel="nofollow" class="external autonumber" href="https://lore.kernel.org/all/87ee6wit2r.fsf@intel.com/T/">[10]</a>
</td>
<td>Gen9 and newer
</td>
</tr>
<tr>
<td>3</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td>Alder Lake-P (Mobile) and newer</td>
<td>Gen 9.5 and newer (better for some)
</td>
</tr>
</tbody>
</table>
<p>If GuC submission or HuC firmware loading is not enabled by default for your GPU, you can manually enable it.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Manually enabling GuC / HuC firmware loading taints the kernel <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=111918">even when the feature is not supported</a>. Moreover, enabling GuC/HuC firmware loading can cause issues on some systems; disable it if you experience freezing (for example, after resuming from hibernation).</div>
<p>First, ensure that <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span> is <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">installed</a>.
</p>
<p>Set the <code>i915.enable_guc</code> <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>, for example with:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/i915.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options i915 enable_guc=2</pre>
<p><a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">Regenerate the initramfs</a>, on next boot you can verify both GuC and HuC are enabled by using <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Dmesg">dmesg</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[30130.586970] i915 0000:00:02.0: [drm] GuC firmware i915/icl_guc_33.0.0.bin version 33.0 submission:disabled
[30130.586973] i915 0000:00:02.0: [drm] HuC firmware i915/icl_huc_9.0.0.bin version 9.0 authenticated:yes</pre>
<p>If they are not supported by your graphics adapter you will see:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[    0.571339] i915 0000:00:02.0: [drm] Incompatible option enable_guc=2 - GuC is not supported!
[    0.571340] i915 0000:00:02.0: [drm] Incompatible option enable_guc=2 - HuC is not supported!</pre>
<p>Alternatively, check using:
</p>
<pre># cat /sys/kernel/debug/dri/0/gt/uc/guc_info
# cat /sys/kernel/debug/dri/0/gt/uc/huc_info
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Using <a href="../en/Intel_GVT-g.html" title="Intel GVT-g">GVT-g graphics virtualization</a> by setting <code>enable_gvt=1</code> is not supported as of linux 4.20.11 when GuC/HuC is also enabled. The i915 module would fail to initialize as shown in system journal.
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># journalctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">... kernel: [drm:intel_gvt_init [i915]] *ERROR* i915 GVT-g loading failed due to Graphics virtualization is not yet supported with GuC submission
... kernel: i915 0000:00:02.0: [drm:i915_driver_load [i915]] Device initialization failed (-5)
... kernel: i915: probe of 0000:00:02.0 failed with error -5
... kernel: snd_hda_intel 0000:00:1f.3: failed to add i915 component master (-19)
</pre>
<p>Note that the related warning  is not fatal, as explained in <a rel="nofollow" class="external autonumber" href="https://github.com/intel/gvt-linux/issues/77#issuecomment-707541069">[11]</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># journalctl -b </pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">... kernel: i915 0000:00:02.0: Direct firmware load for i915/gvt/vid_0x8086_did_0x5916_rid_0x02.golden_hw_state failed with error -2
</pre>
</div>
<h2><span class="mw-headline" id="Xorg_configuration">Xorg configuration</span></h2>
<p>There is generally no need for any configuration to run <a href="../en/Xorg.html" title="Xorg">Xorg</a>.
</p>
<p>However, to take advantage of some driver options or if <a href="../en/Xorg.html" title="Xorg">Xorg</a> does not start, you can create an Xorg configuration file.
</p>
<h3><span class="mw-headline" id="With_the_modesetting_driver">With the modesetting driver</span></h3>
<p>If you have installed <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> but want to load the modesetting driver explicitly instead of letting the DDX driver take priority, for example when trying to compare them:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
  Identifier "Intel Graphics"
  Driver "modesetting"
EndSection
</pre>
<h3><span class="mw-headline" id="With_the_Intel_driver">With the Intel driver</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The following requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span>.</div>
<p>Create an Xorg configuration file similar to the one below:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
  Identifier "Intel Graphics"
  Driver "intel"
EndSection
</pre>
<p>Additional options are added by the user on new lines below <code>Driver</code>.
For the full list of options, see the <span class="plainlinks archwiki-template-man" title="$ man 4 intel"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/intel.4">intel(4)</a></span> man page.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You might need to add more device sections than the one listed above. This will be indicated where necessary.</div>
<h4><span class="mw-headline" id="AccelMethod">AccelMethod</span></h4>
<p>You may need to indicate <code>Option "AccelMethod"</code> when creating a configuration file, the classical options are <code>UXA</code>, <code>SNA</code> (default) and <code>BLT</code>.
</p>
<p>If you experience issues with default <code>SNA</code> (e.g. pixelated graphics, corrupt text, etc.), try using <code>UXA</code> instead, which can be done by adding the following line to your <a href="#Xorg_configuration">configuration file</a>:
</p>
<pre>Option      "AccelMethod"  "uxa"
</pre>
<p>See the "AccelMethod" option under <span class="plainlinks archwiki-template-man" title="$ man 4 intel"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/intel.4#CONFIGURATION_DETAILS">intel(4) § CONFIGURATION DETAILS</a></span>.
</p>
<h4><span class="mw-headline" id="Using_Intel_DDX_driver_with_recent_GPUs">Using Intel DDX driver with recent GPUs</span></h4>
<p>For Intel GPUs starting from Gen8 (Broadwell), the Iris Mesa driver is needed:
</p>
<pre>Option      "DRI"  "iris"
</pre>
<h4>
<span id="Disabling_TearFree.2C_TripleBuffer.2C_SwapbuffersWait"></span><span class="mw-headline" id="Disabling_TearFree,_TripleBuffer,_SwapbuffersWait">Disabling TearFree, TripleBuffer, SwapbuffersWait</span>
</h4>
<p>If you use a compositor (the default in modern desktop environment like GNOME, KDE Plasma, Xfce, etc.), then TearFree, TripleBuffer and SwapbuffersWait can usually be disabled to improve performance and decrease power consumption.
</p>
<pre>Option      "TearFree"        "false"
Option      "TripleBuffer"    "false"
Option      "SwapbuffersWait" "false"
</pre>
<h2><span class="mw-headline" id="Module-based_options">Module-based options</span></h2>
<p>The <code>i915</code> kernel module allows for configuration via <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">module options</a>. Some of the module options impact power saving.
</p>
<p>A list of all options along with short descriptions and default values can be generated with the following command:
</p>
<pre>$ modinfo -p i915
</pre>
<p>To check which options are currently enabled, run
</p>
<pre># systool -m i915 -av
</pre>
<p>You will note that many options default to -1, resulting in per-chip powersaving defaults. It is however possible to configure more aggressive powersaving by using <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel modules">module options</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Diverting from the defaults will mark the kernel as <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=fc9740cebc3ab7c65f3c5f6ce0caf3e4969013ca">tainted</a> from Linux 3.18 onwards. This basically implies using other options than the per-chip defaults is considered experimental and not supported by the developers.</div>
<h3>
<span id="Framebuffer_compression_.28enable_fbc.29"></span><span class="mw-headline" id="Framebuffer_compression_(enable_fbc)">Framebuffer compression (enable_fbc)</span>
</h3>
<p>Framebuffer compression (FBC) is a feature that can reduce power consumption and memory bandwidth during screen refreshes.
</p>
<p>The feature will be automatically enabled if supported by the hardware. You can use the command below to verify whether it is is enabled:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ modinfo i915 | grep enable_fbc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">parm:           enable_fbc:Enable frame buffer compression for power savings (default: -1 (use per-chip default)) (int)
</pre>
<p>If the parm is set to <code>-1</code>, you do not need to do anything. Otherwise, to force-enable FBC, use <code>i915.enable_fbc=1</code> as <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> or set in <code>/etc/modprobe.d/i915.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/i915.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options i915 enable_fbc=1</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Framebuffer compression may be unreliable or unavailable on Intel GPU generations before Sandy Bridge (generation 6). This results in messages logged to the system journal similar to this one:
<pre>kernel: drm: not enough stolen space for compressed buffer, disabling.
</pre>
<p>Enabling frame buffer compression on pre-Sandy Bridge CPUs results in endless error messages:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[ 2360.475430] [drm] not enough stolen space for compressed buffer (need 4325376 bytes), disabling
[ 2360.475437] [drm] hint: you may be able to increase stolen memory size in the BIOS to avoid this
</pre>
The solution is to disable frame buffer compression which will imperceptibly increase power consumption (around 0.06 W). In order to disable it add <code>i915.enable_fbc=0</code> to the kernel line parameters. More information on the results of disabled compression can be found <a rel="nofollow" class="external text" href="https://web.archive.org/web/20200228230053/https://kernel.ubuntu.com/~cking/power-benchmarking/background-colour-and-framebuffer-compression/">here</a>.</div>
<h3><span class="mw-headline" id="Fastboot">Fastboot</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This parameter is enabled by default for Skylake and newer<a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=3d6535cbed4a4b029602ff83efb2adec7cb8d28b">[12]</a> as well as Bay- and Cherry-Trail (VLV/CHV)<a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=7360c9f6b857e22a48e545f4e99c79630994e932">[13]</a> since Linux 5.1<a rel="nofollow" class="external autonumber" href="https://kernelnewbies.org/Linux_5.1#Graphics">[14]</a>,
has subsequently been removed completely since Linux 6.7<a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=58883680a8416661b48a800e5530e2efcea64a4a">[15]</a>, and fastboot has finally been enabled for all GPU generations (including those older than Skylake) since Linux 6.9.<a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=1b923307a1b0067a302b394e73311aeaebc06f65">[16]</a>
</div>
<p>The goal of Intel Fastboot is to preserve the frame-buffer as setup by the BIOS or <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> to avoid any flickering until <a href="../en/Xorg.html" title="Xorg">Xorg</a> has started.<a rel="nofollow" class="external autonumber" href="https://lists.freedesktop.org/archives/intel-gfx/2012-May/017653.html">[17]</a><a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/scan.php?page=news_item&amp;px=MTEwNzc">[18]</a>
</p>
<p>To force enable fastboot on platforms where it is not the default already, set <code>i915.fastboot=1</code> as <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> or set in <code>/etc/modprobe.d/i915.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/i915.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options i915 fastboot=1</pre>
<h3><span class="mw-headline" id="Intel_GVT-g_graphics_virtualization_support">Intel GVT-g graphics virtualization support</span></h3>
<p>See <a href="../en/Intel_GVT-g.html" title="Intel GVT-g">Intel GVT-g</a> for details.
</p>
<h3><span class="mw-headline" id="Enable_performance_support">Enable performance support</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> What does Mesa actually do using the performance counters? What's the effect of this? Some report drastic performance increases on Intel Tiger Lake, attributing it to a support for Dynamic Tuning <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/linux/comments/u7zxa0/psa_for_intel_tiger_lake_dynamic_tuning_laptops/">[19]</a>. (Discuss in <a href="../en/Talk:Intel_graphics.html#Potential_performance_gains_via_Observation_Architecture" title="Talk:Intel graphics">Talk:Intel graphics#Potential performance gains via Observation Architecture</a>)</div>
</div>
<p>Starting with Gen6 (Sandy Bridge and onwards), Intel GPUs provide performance counters used for exposing internal performance data to drivers. The drivers and hardware registers refer to this infrastructure as the <i>Observation Architecture</i> (internally "OA") <a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Intel-HSW-Observation-Arch">[20]</a>, but Intel's documentation also more generally refers to this functionality as providing <i>Observability Performance Counters</i> <a rel="nofollow" class="external autonumber" href="https://01.org/sites/default/files/documentation/observability_performance_counters_haswell.pdf">[21]</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-09-16 ⓘ]</sup> <a rel="nofollow" class="external autonumber" href="https://01.org/sites/default/files/documentation/intel-gfx-prm-osrc-skl-vol14-observability.pdf">[22]</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-09-16 ⓘ]</sup>.
</p>
<p>By default, only programs running with the <a rel="nofollow" class="external text" href="https://lwn.net/Articles/486306/">CAP_SYS_ADMIN</a> (equivalent to root) or <a rel="nofollow" class="external text" href="https://lwn.net/Articles/812719/">CAP_PERFMON</a> <a href="../en/Capabilities.html" title="Capabilities">capabilities</a> can utilize the observation architecture <a rel="nofollow" class="external autonumber" href="https://github.com/torvalds/linux/blob/b14ffae378aa1db993e62b01392e70d1e585fb23/drivers/gpu/drm/i915/i915_perf.c#L267">[23]</a> <a rel="nofollow" class="external autonumber" href="https://github.com/torvalds/linux/blob/b14ffae378aa1db993e62b01392e70d1e585fb23/drivers/gpu/drm/i915/i915_perf.c#L3481-L3484">[24]</a>. Most applications will be running without either of these, resulting in the following warning:
</p>
<pre>MESA-INTEL: warning: Performance support disabled, consider sysctl dev.i915.perf_stream_paranoid=0
</pre>
<p>To enable performance support without using the capabilities (or root), set the kernel parameter as described in <a href="../en/Sysctl.html" title="Sysctl">sysctl</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The restrictive defaults of the <code>perf_event_paranoid</code> family of options exists because there is risk associated with allowing applications to access performance data <a rel="nofollow" class="external autonumber" href="https://docs.kernel.org/admin-guide/perf-security.html">[25]</a>. With this being said, <code>dev.i915.perf_stream_paranoid</code> only influences access to GPU performance counters, which carry less risk than e.g. CPU architectural execution context registers.</div>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Setting_scaling_mode">Setting scaling mode</span></h3>
<p>This can be useful for some full screen applications:
</p>
<pre>$ xrandr --output LVDS1 --set PANEL_FITTING <i>param</i>
</pre>
<p>where <code><i>param</i></code> can be:
</p>
<ul>
<li>
<code>center</code>: resolution will be kept exactly as defined, no scaling will be made,</li>
<li>
<code>full</code>: scale the resolution so it uses the entire screen or</li>
<li>
<code>full_aspect</code>: scale the resolution to the maximum possible but keep the aspect ratio.</li>
</ul>
<p>If it does not work, try:
</p>
<pre>$ xrandr --output LVDS1 --set "scaling mode" <i>param</i>
</pre>
<p>where <code><i>param</i></code> is one of <code>"Full"</code>, <code>"Center"</code> or <code>"Full aspect"</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This option currently does not work for external displays (e.g. VGA, DVI, HDMI, DP). <a rel="nofollow" class="external autonumber" href="https://bugs.freedesktop.org/show_bug.cgi?id=90989">[26]</a>
</div>
<h3><span class="mw-headline" id="Hardware_accelerated_H.264_decoding_on_GMA_4500">Hardware accelerated H.264 decoding on GMA 4500</span></h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libva-intel-driver">libva-intel-driver</a></span> package only provides hardware accelerated MPEG-2 decoding – and not H.264 decoding – for some GMA 4500 series GPUs. To check whether that affects your particular GPU, install both that driver and the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libva-utils">libva-utils</a></span> package, then check the output of the <code>vainfo</code> tool for the presence of entries that start with <code>VAProfileH264</code>.
</p>
<p>The H.264 decoding support is maintained in a separated g45-h264 branch, which can be used by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libva-intel-driver-g45-h264/">libva-intel-driver-g45-h264</a></span><sup><small>AUR</small></sup> package. Note, however, that this support is experimental and its development has been abandoned. Using the VA-API with this driver on a GMA 4500 series GPU will offload the CPU but may not result in as smooth a playback as non-accelerated playback. Tests using mplayer showed that using vaapi to play back an H.264 encoded 1080p video halved the CPU load (compared to the XV overlay) but resulted in very choppy playback, while 720p worked reasonably well <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=150550">[27]</a>. This is echoed by other experiences <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20160325142959/http://www.emmolution.org/?p=192&amp;cpage=1#comment-12292">[28]</a>. Setting the preallocated video ram size higher in BIOS results in much better hardware decoded playback. Even 1080p h264 works well if this is done<a rel="nofollow" class="external autonumber" href="https://lists.libreplanet.org/archive/html/guix-patches/2019-11/msg00652.html">[29]</a>. Smooth playback (1080p/720p) works also with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mpv-git/">mpv-git</a></span><sup><small>AUR</small></sup> in combination with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ffmpeg-git/">ffmpeg-git</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/libva-intel-driver-g45-h264/">libva-intel-driver-g45-h264</a></span><sup><small>AUR</small></sup>. With MPV and the Firefox plugin "Send to MPV player"<a rel="nofollow" class="external autonumber" href="https://addons.mozilla.org/firefox/addon/send-to-mpv-player/">[30]</a> it is possible to watch hardware accelerated YouTube videos.
</p>
<h3><span class="mw-headline" id="Overriding_reported_OpenGL_version">Overriding reported OpenGL version</span></h3>
<p>The <code>MESA_GL_VERSION_OVERRIDE</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> can be used to override the reported OpenGL version to any application. For example, setting <code>MESA_GL_VERSION_OVERRIDE=4.5</code> will report OpenGL 4.5.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You can use this variable to report any known OpenGL version, even if it is not supported by the GPU. Some applications might no longer crash, some may start crashing - you probably do not want to set this variable globally.</div>
<h3><span class="mw-headline" id="Monitoring">Monitoring</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Hardware_video_acceleration.html#Verification" title="Hardware video acceleration">Hardware video acceleration#Verification</a>.</b></p>
<div>
<b>Notes:</b> This overlaps the content at the previously linked page and would probably be a better fit in a generic page instead of this one dedicated to Intel GPUs. Otherwise, <a href="../en/Hardware_video_acceleration.html#Verification" title="Hardware video acceleration">Hardware video acceleration#Verification</a> should be modified to link to each dedicated page instead of duplicating content. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Intel_graphics.html">Talk:Intel graphics</a>)</div>
</div>
<ul><li>
<b>intel_gpu_top</b> — A top-like task monitor for Intel GPUs (requires root permissions).</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/drm/igt-gpu-tools">https://gitlab.freedesktop.org/drm/igt-gpu-tools</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-gpu-tools">intel-gpu-tools</a></span>
</dd></dl>
<ul><li>
<b>nvtop</b> — GPUs process monitoring for AMD, Intel and NVIDIA (currently has very basic support for Intel GPUs).</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Syllo/nvtop">https://github.com/Syllo/nvtop</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvtop">nvtop</a></span>
</dd></dl>
<h3><span class="mw-headline" id="Setting_brightness_and_gamma">Setting brightness and gamma</span></h3>
<p>See <a href="../en/Backlight.html" title="Backlight">Backlight</a>.
</p>
<h3><span class="mw-headline" id="Testing_the_new_experimental_Xe_driver">Testing the new experimental Xe driver</span></h3>
<p>To try the (experimental) <a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html//next/gpu/rfc/xe.html">new Xe driver</a>, you need:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> 6.8 or above</li>
<li>
<a href="https://en.wikipedia.org/wiki/Tiger_Lake" class="extiw" title="wikipedia:Tiger Lake">Tiger Lake</a> integrated graphics and newer, or a discrete graphic card.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span> from the official repository. Alternatively, make sure mesa is built with <code>-D intel-xe-kmd=enabled</code>.</li>
</ul>
<p>Note your PCI ID with:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci -nn | grep VGA</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">00:02.0 VGA compatible controller [0300]: Intel Corporation TigerLake-LP GT2 [Iris Xe Graphics] [8086:<b>9a49</b>] (rev 01)
</pre>
<p>Then add the following to your <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">Kernel parameters</a> with the appropriate PCI ID:
</p>
<pre>... i915.force_probe=!<b>9a49</b> xe.force_probe=<b>9a49</b>
</pre>
<p>Make sure you have an alternate solution to boot in order to revert if necessary.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Tearing">Tearing</span></h3>
<h4><span class="mw-headline" id="With_the_Intel_driver_2">With the Intel driver</span></h4>
<p>The SNA acceleration method causes tearing on some machines. To fix this, enable the <code>TearFree</code> option in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span> driver by adding the following line to your <a href="#Xorg_configuration">configuration file</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
  Identifier "Intel Graphics"
  Driver "intel"
  Option "TearFree" "true"
EndSection</pre>
<p>See the <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=37686">original bug report</a> for more info.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>This option may not work when <code>SwapbuffersWait</code> is <code>false</code>.</li>
<li>This option may increase memory allocation considerably and reduce performance. <a rel="nofollow" class="external autonumber" href="https://bugs.freedesktop.org/show_bug.cgi?id=37686#c123">[31]</a>
</li>
<li>This option is problematic for applications that are very picky about vsync timing, like <a href="https://en.wikipedia.org/wiki/Super_Meat_Boy" class="extiw" title="wikipedia:Super Meat Boy">Super Meat Boy</a>.</li>
<li>This option does not work with UXA acceleration method, only with SNA.</li>
<li>For Intel UHD 620 or 630 you will need to add <code>Option "TripleBuffer" "true"</code> in order for <code>TearFree</code> to work.</li>
<li>It might be necessary to disable DRI3 by adding <code>Option "DRI" "2"</code>, otherwise any full screen app (such as video playback) can break TearFree. <a rel="nofollow" class="external autonumber" href="https://bugs.freedesktop.org/show_bug.cgi?id=96847#c7">[32]</a>
</li>
</ul>
</div>
<h4><span class="mw-headline" id="With_the_modesetting_driver_2">With the modesetting driver</span></h4>
<p>TearFree support <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/xorg/xserver/-/merge_requests/1006">was recently added</a> to the modesetting driver <a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/news/xf86-video-modesetting-TearFree">[33]</a><a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/news/Modesetting-TearFree-Merged">[34]</a>. As of November 2023, this patch has yet to reach a stable release, so you will need <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xorg-server-git/">xorg-server-git</a></span><sup><small>AUR</small></sup> until then.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Device"
  Identifier "Intel Graphics"
  Driver "modesetting"
  Option "TearFree" "true"
EndSection</pre>
<h3>
<span id="Disable_Vertical_Synchronization_.28VSYNC.29"></span><span class="mw-headline" id="Disable_Vertical_Synchronization_(VSYNC)">Disable Vertical Synchronization (VSYNC)</span>
</h3>
<p>Useful when:
</p>
<ul>
<li>Chromium/Chrome has lags and slow performance due to GPU and runs smoothly with --disable-gpu switch</li>
<li>glxgears test does not show desired performance</li>
</ul>
<p>The intel-driver uses <a rel="nofollow" class="external text" href="https://www.intel.com/content/www/us/en/support/articles/000006930/graphics.html">Triple Buffering</a> for vertical synchronization; this allows for full performance and avoids tearing. To turn vertical synchronization off (e.g. for benchmarking) use this <code>.drirc</code> in your home directory:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.drirc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;device screen="0" driver="dri2"&gt;
	&lt;application name="Default"&gt;
		&lt;option name="vblank_mode" value="0"/&gt;
	&lt;/application&gt;
&lt;/device&gt;</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Do not use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/driconf/">driconf</a></span><sup><small>AUR</small></sup> to create this file. It is buggy and will set the wrong driver.</div>
<h3><span class="mw-headline" id="DRI3_issues">DRI3 issues</span></h3>
<p><i>DRI3</i> is the default DRI version in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-intel">xf86-video-intel</a></span>. On some systems this can cause issues such as <a rel="nofollow" class="external text" href="https://bugs.chromium.org/p/chromium/issues/detail?id=370022">this</a>. To switch back to <i>DRI2</i> add the following line to your <a href="#Xorg_configuration">configuration file</a>:
</p>
<pre>Option "DRI" "2"
</pre>
<p>For the <code>modesetting</code> driver, this method of disabling DRI3 does not work.  Instead, one can set the environment variable <code>LIBGL_DRI3_DISABLE=1</code>.
</p>
<h3>
<span id="Font_and_screen_corruption_in_GTK_applications_.28missing_glyphs_after_suspend.2Fresume.29"></span><span class="mw-headline" id="Font_and_screen_corruption_in_GTK_applications_(missing_glyphs_after_suspend/resume)">Font and screen corruption in GTK applications (missing glyphs after suspend/resume)</span>
</h3>
<p>Should you experience missing font glyphs in GTK applications, the following workaround might help. <a href="../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Textedit">Edit</a> <code>/etc/environment</code> to add the following line:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/environment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">COGL_ATLAS_DEFAULT_BLIT_MODE=framebuffer</pre>
<p>See also <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=88584">FreeDesktop bug 88584</a>.
</p>
<h3>
<span id="Blank_screen_during_boot.2C_when_.22Loading_modules.22"></span><span class="mw-headline" id='Blank_screen_during_boot,_when_"Loading_modules"'>Blank screen during boot, when "Loading modules"</span>
</h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-cut.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is being considered for removal.</b></p>
<div>
<b>Reason:</b> Since <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/mkinitcpio/mkinitcpio/-/releases/v32">mkinitcpio v32</a>, the <code>kms</code> hook is included by default, therefore most setups will have early loading enabled by default. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Intel_graphics.html">Talk:Intel graphics</a>)</div>
</div>
<p>If using "late start" KMS and the screen goes blank when "Loading modules", it may help to add <code>i915</code> and <code>intel_agp</code> to the initramfs. See <a href="../en/Kernel_mode_setting.html#Early_KMS_start" title="Kernel mode setting">Kernel mode setting#Early KMS start</a> section.
</p>
<p>Alternatively, appending the following <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> seems to work as well:
</p>
<pre>video=SVIDEO-1:d
</pre>
<p>If you need to output to VGA then try this:
</p>
<pre>video=VGA-1:1280x800
</pre>
<h3>
<span id="X_freeze.2Fcrash_with_intel_driver"></span><span class="mw-headline" id="X_freeze/crash_with_intel_driver">X freeze/crash with intel driver</span>
</h3>
<p>Some issues with X crashing, GPU hanging, or problems with X freezing, can be fixed by disabling the GPU usage with the <code>NoAccel</code> option - add the following lines to your <a href="#Xorg_configuration">configuration file</a>:
</p>
<pre>  Option "NoAccel" "True"
</pre>
<p>Alternatively, try to disable the 3D acceleration only with the <code>DRI</code> option:
</p>
<pre>  Option "DRI" "False"
</pre>
<h3><span class="mw-headline" id="Adding_undetected_resolutions">Adding undetected resolutions</span></h3>
<p>This issue is covered on the <a href="../en/Xrandr.html#Adding_undetected_resolutions" title="Xrandr">Xrandr page</a>.
</p>
<h3><span class="mw-headline" id="Backlight_is_not_adjustable">Backlight is not adjustable</span></h3>
<p>If after resuming from suspend, the hotkeys for changing the screen brightness do not take effect, check your configuration against the <a href="../en/Backlight.html" title="Backlight">Backlight</a> article.
</p>
<p>If the problem persists, try one of the following <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>:
</p>
<pre>acpi_osi=Linux
acpi_osi="!Windows 2012"
acpi_osi=
</pre>
<p>Also make sure you are not using fastboot mode (<code>i915.fastboot</code> kernel parameter), it is <a rel="nofollow" class="external text" href="https://www.phoronix.com/forums/forum/software/mobile-linux/1066447-arch-linux-users-with-intel-graphics-can-begin-enjoying-a-flicker-free-boot">known</a> for breaking backlight controls.
</p>
<h3><span class="mw-headline" id="Corruption_or_unresponsiveness_in_Chromium_and_Firefox">Corruption or unresponsiveness in Chromium and Firefox</span></h3>
<p>If you experience corruption, unresponsiveness, lags or slow performance in Chromium and/or Firefox some possible solutions are:
</p>
<ul>
<li><a href="#AccelMethod">Set the AccelMethod to "uxa"</a></li>
<li><a href="#Disable_Vertical_Synchronization_(VSYNC)">Disable VSYNC</a></li>
<li><a href="#Tearing">Enable the TearFree option</a></li>
<li>Disable "DRI" and acceleration method (tested on Intel Iris 10th generation): <pre>Option "NoAccel" "True"
Option "DRI" "False"
</pre>
</li>
</ul>
<h3>
<span id="Kernel_crashing_w.2Fkernels_4.0.2B_on_Broadwell.2FCore-M_chips"></span><span class="mw-headline" id="Kernel_crashing_w/kernels_4.0+_on_Broadwell/Core-M_chips">Kernel crashing w/kernels 4.0+ on Broadwell/Core-M chips</span>
</h3>
<p>A few seconds after X/Wayland loads the machine will freeze and <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journalctl">journalctl</a> will log a kernel crash referencing the Intel graphics as below:
</p>
<pre>Jun 16 17:54:03 hostname kernel: BUG: unable to handle kernel NULL pointer dereference at           (null)
Jun 16 17:54:03 hostname kernel: IP: [&lt;          (null)&gt;]           (null)
...
Jun 16 17:54:03 hostname kernel: CPU: 0 PID: 733 Comm: gnome-shell Tainted: G     U     O    4.0.5-1-ARCH #1
...
Jun 16 17:54:03 hostname kernel: Call Trace:
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa055cc27&gt;] ? i915_gem_object_sync+0xe7/0x190 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa0579634&gt;] intel_execlists_submission+0x294/0x4c0 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa05539fc&gt;] i915_gem_do_execbuffer.isra.12+0xabc/0x1230 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa055d349&gt;] ? i915_gem_object_set_to_cpu_domain+0xa9/0x1f0 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff811ba2ae&gt;] ? __kmalloc+0x2e/0x2a0
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa0555471&gt;] i915_gem_execbuffer2+0x141/0x2b0 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa042fcab&gt;] drm_ioctl+0x1db/0x640 [drm]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffffa0555330&gt;] ? i915_gem_execbuffer+0x450/0x450 [i915]
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff8122339b&gt;] ? eventfd_ctx_read+0x16b/0x200
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff811ebc36&gt;] do_vfs_ioctl+0x2c6/0x4d0
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff811f6452&gt;] ? __fget+0x72/0xb0
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff811ebec1&gt;] SyS_ioctl+0x81/0xa0
Jun 16 17:54:03 hostname kernel:  [&lt;ffffffff8157a589&gt;] system_call_fastpath+0x12/0x17
Jun 16 17:54:03 hostname kernel: Code:  Bad RIP value.
Jun 16 17:54:03 hostname kernel: RIP  [&lt;          (null)&gt;]           (null)
</pre>
<p>This can be fixed by disabling execlist support which was changed to default on with kernel 4.0. Add the following <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>:
</p>
<pre>i915.enable_execlists=0
</pre>
<p>This is known to be broken to at least kernel 4.0.5.
</p>
<h3><span class="mw-headline" id="Lag_in_Windows_guests">Lag in Windows guests</span></h3>
<p>The video output of a Windows guest in VirtualBox sometimes hangs until the host forces a screen update (e.g. by moving the mouse cursor). Removing the <code>enable_fbc=1</code> option fixes this issue.
</p>
<h3><span class="mw-headline" id="Screen_flickering">Screen flickering</span></h3>
<p>Panel Self Refresh (PSR), a power saving feature used by Intel iGPUs is known to cause flickering in some instances <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/49628">FS#49628</a> <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/49371">FS#49371</a> <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/50605">FS#50605</a>. A temporary solution is to disable this feature using the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> <code>i915.enable_psr=0</code>.
</p>
<h3><span class="mw-headline" id="OpenGL_2.1_with_i915_driver">OpenGL 2.1 with i915 driver</span></h3>
<p>The classic mesa driver for Gen 3 GPUs included in the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa-amber">mesa-amber</a></span> package reports OpenGL 2.0 by default, because the hardware is not fully compatible with OpenGL 2.1.<a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Mesa-i915-OpenGL-2-Drop">[35]</a> OpenGL 2.1 support can be enabled manually by setting <code>/etc/drirc</code> or <code>~/.drirc</code> options like:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/drirc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;driconf&gt;
...
    &lt;device driver="i915"&gt;
        &lt;application name="Default"&gt;
            &lt;option name="<b>stub_occlusion_query</b>" value="<b>true</b>" /&gt;
            &lt;option name="<b>fragment_shader</b>" value="<b>true</b>" /&gt;
        &lt;/application&gt;
    &lt;/device&gt;
...
&lt;/driconf&gt;</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The reason of this step back was Chromium and other applications' bad experience. If needed, you might edit the drirc file in a "app-specific" style, see <a rel="nofollow" class="external text" href="https://dri.freedesktop.org/wiki/ConfigurationInfrastructure/">here</a>, to disable OpenGL 2.1 on executable <code>chromium</code> for instance.</li>
<li>The new Gallium based i915 driver included in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span> package always reports OpenGL 2.1, so this setting is not needed for that driver.</li>
</ul>
</div>
<h3><span class="mw-headline" id="KMS_Issue:_console_is_limited_to_small_area">KMS Issue: console is limited to small area</span></h3>
<p>One of the low-resolution video ports may be enabled on boot which is causing the terminal to utilize a small area of the screen. To fix, explicitly disable the port with an i915 module setting with <code>video=SVIDEO-1:d</code> in the kernel command line parameter in the boot loader. See <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a> for more info.
</p>
<p>If that does not work, try disabling TV1 or VGA1 instead of SVIDEO-1. Video port names can be listed with <a href="../en/Xrandr.html" title="Xrandr">xrandr</a>.
</p>
<h3><span class="mw-headline" id="No_sound_through_HDMI_on_a_Haswell_CPU">No sound through HDMI on a Haswell CPU</span></h3>
<p>According to a <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=60769">Linux kernel issue</a>, sound will not be output through HDMI if <code>intel_iommu=on</code>. To fix this problem, use the following <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>:
</p>
<pre>intel_iommu=on,igfx_off
</pre>
<p>Or alternatively, disable IOMMU:
</p>
<pre>intel_iommu=off
</pre>
<h3>
<span id="Crash.2Ffreeze_on_low_power_Intel_CPUs"></span><span class="mw-headline" id="Crash/freeze_on_low_power_Intel_CPUs">Crash/freeze on low power Intel CPUs</span>
</h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> <code>enable_dc=0</code> may not impede on power management to the extent claimed here. (Discuss in <a href="../en/Talk:Intel_graphics.html#Incorrect_statements_regarding_power_usage_penalty_of_enable_dc=0" title="Talk:Intel graphics">Talk:Intel graphics#Incorrect statements regarding power usage penalty of enable_dc=0</a>)</div>
</div>
<p>Low-powered Intel processors and/or laptop processors have a tendency to randomly hang or crash due to the problems with the power management features found in low-power Intel chips. If such a crash happens, you will not see any logs reporting this problem. Adding the following <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a> may help to resolve the problem.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It is not advised to use all three of the below kernel parameters together.</div>
<pre>intel_idle.max_cstate=1 i915.enable_dc=0 ahci.mobile_lpm_policy=1
</pre>
<p><code>ahci.mobile_lpm_policy=1</code> fixes a hang on several Lenovo laptops and some Acer notebooks due to problematic SATA controller power management. That workaround is strictly not related to Intel graphics but it does solve related issues. Adding this kernel parameter sets the <i>l</i>ink <i>p</i>ower <i>m</i>anagement from firmware default to maximum performance and will also solve hangs when you change display brightness on certain Lenovo machines but increases idle power consumption by 1-1.5 W on modern ultrabooks. For further information, especially about the other states, see the <a rel="nofollow" class="external text" href="https://lore.kernel.org/lkml/20171211165216.5604-1-hdegoede@redhat.com/">Linux kernel mailing list</a> and <a rel="nofollow" class="external text" href="https://access.redhat.com/documentation/en-en/red_hat_enterprise_linux/6/html/power_management_guide/alpm">Red Hat documentation</a>.
</p>
<p><code>i915.enable_dc=0</code> disables GPU power management. This does solve random hangs on certain Intel systems, notably Goldmount and Kaby Lake Refresh chips. Using this parameter does result in higher power use and shorter battery life on laptops/notebooks.
</p>
<p><code>intel_idle.max_cstate=1</code> limits the processors sleep states, it prevents the processor from going into deep sleep states. That is absolutely not ideal and does result in higher power use and lower battery life. However, it does solve random hangs on many Intel systems. Use this if you have a Intel Baytrail or a Kaby Lake Refresh chip. Intel "Baytrail" chips were known to randomly hang without this kernel parameter due to a <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=109051#c752">hardware flaw</a>, theoretically fixed <a rel="nofollow" class="external text" href="https://cgit.freedesktop.org/drm-intel/commit/?id=a75d035fedbdecf83f86767aa2e4d05c8c4ffd95">2019-04-26</a>.
More information about the max_cstate parameter can be found in the <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/pm/intel_idle.html#kernel-command-line-options-and-module-parameters">kernel documentation</a> and about the cstates in general on a <a rel="nofollow" class="external text" href="https://gist.github.com/wmealing/2dd2b543c4d3cff6cab7">writeup on GitHub</a>.
</p>
<p>If you try adding <code>intel_idle.max_cstate=1 i915.enable_dc=0 ahci.mobile_lpm_policy=1</code> in the hope of fixing frequent hangs and that solves the issue you should later remove one by one to see which of them actually helped you solve the issue. Running with cstates and display power management disabled is not advisable if the actual problem is related to SATA power management and <code>ahci.mobile_lpm_policy=1</code> is the one that actually solves it.
</p>
<p>Check <a rel="nofollow" class="external text" href="https://linuxreviews.org/Intel_graphics#Kernel_Parameters">Linux Reviews</a> for more details.
</p>
<h4><span class="mw-headline" id="Higher_C-states_prevent_wakeup_from_S3">Higher C-states prevent wakeup from S3</span></h4>
<p>In case you infrequently wake up to a black screen, but the system otherwise properly resumes with <code>CPU pipe A FIFO underrun</code> messages in the journal and limiting <code>intel_idle.max_cstate=1</code> reliably prevents that, <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=2175597#p2175597">you can</a> use <a href="../en/Power_management/Suspend_and_hibernate.html#Sleep_hooks" class="mw-redirect" title="Suspend and hibernate">Suspend_and_hibernate#Sleep_hooks</a> and <span class="plainlinks archwiki-template-man" title="$ man 1 cpupower-idle-set"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/cpupower-idle-set.1">cpupower-idle-set(1)</a></span> to effectively control the C-state around the suspend cycle with <code>-D0</code> and <code>-E</code> to not permanently run the CPU in the lowest C-state.
</p>
<h3><span class="mw-headline" id="Add_support_for_165Hz_monitor">Add support for 165Hz monitor</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Kernel_mode_setting.html#Forcing_modes_and_EDID" title="Kernel mode setting">Kernel mode setting#Forcing modes and EDID</a>.</b></p>
<div>
<b>Notes:</b> This technique does not appear to be specific to i915. Before merging, one should verify that the install script is necessary, and that there is not an easier way to add the EDID BIN to the initramfs. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Intel_graphics.html">Talk:Intel graphics</a>)</div>
</div>
<p>For some 165Hz monitors, <i>xrandr</i> might not display the 165Hz option, and the fix in <a href="#Adding_undetected_resolutions">#Adding undetected resolutions</a> does not solve this. In this case, see <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/680356/i915-driver-stuck-at-40hz-on-165hz-screen">i915-driver-stuck-at-40hz-on-165hz-screen</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Other than creating <code>/etc/initramfs-tools/hooks/edid</code>, a <a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> hook should be made:
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/initcpio/install/edid</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

build() {
    add_file /lib/firmware/edid/edid.bin
}

help() {
    cat &lt;&lt;HELPEOF
This hook add support for 165Hz
HELPEOF
}
</pre>
<p>Then append <i>edid</i> in HOOKS of <code>/etc/mkinitcpio.conf</code>, Just like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HOOKS=(... fsck edid)</pre>
<p>Then <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>. 
</p>
</div>
<h3>
<span id="Freeze_after_wake_from_sleep.2Fsuspend_with_Raptor_Lake_and_Alder_Lake-P"></span><span class="mw-headline" id="Freeze_after_wake_from_sleep/suspend_with_Raptor_Lake_and_Alder_Lake-P">Freeze after wake from sleep/suspend with Raptor Lake and Alder Lake-P</span>
</h3>
<p>Users with Raptor Lake and Alder Lake-P 12th gen mobile processor laptops from various vendors experienced freeze and black-screen after waking up from suspending. It is because many laptop vendors ship an incorrect VBT (Video BIOS Table), as described in freedesktop issues <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/drm/intel/-/issues/5531">5531</a> <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/drm/intel/-/issues/6401">6401</a>, that wrongly describe the actual ports connected to the iGPU. In this case, all of the documented cases concern duplicate eDP entries. 
</p>
<p>Considering most vendors <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/drm/i915/kernel/-/issues/7402">will not</a> publish a BIOS update for a laptop with a properly working Windows OS, Linux users could only address the issue on the kernel side. There are two methods for a user to prevent the duplicate eDP entries from affecting the kernel: <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=284176">patching the kernel</a> or  <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/drm/i915/kernel/-/issues/7709">loading a modified VBT</a>.
</p>
<p>For patching the kernel, the duplicate eDP entry needs to be identified by analyzing the output of:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># intel_vbt_decode /sys/kernel/debug/dri/1/i915_vbt</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> Child device info:
        Device handle: 0x0008 (LFP 1 (eDP))
        Device type: 0x1806 (unknown)
 ...
 Child device info:
        Device handle: 0x0080 (LFP 2 (eDP))
        Device type: 0x1806 (unknown)
</pre>
<p>This shows that there is in fact a duplicate eDP, and the kernel should ignore the second entry, but the user is still encouraged to check this. This can then be patched with the following kernel patch in which the index of the duplicate screen can be substituted for <code>ignoreEntry = 1</code> if it needs be.
</p>
<pre>--- a/drivers/gpu/drm/i915/display/intel_bios.c
+++ b/drivers/gpu/drm/i915/display/intel_bios.c
@@ -3688,6 +3688,14 @@
{
       struct intel_bios_encoder_data *devdata;

+       int ignoreEntry = 0;
+
       list_for_each_entry(devdata, &amp;i915-&gt;display.vbt.display_devices, node)
-               func(i915, devdata);
+       {
+               if (ignoreEntry != 1)
+               {
+                       func(i915, devdata);
+                       ignoreEntry++;
+               }
+       }
}
</pre>
<p><br>
A second way to solve this is to edit the VBT by directly <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/drm/i915/kernel/-/issues/7709">erasing the duplicate entry from the VBT</a>. 
</p>
<p>This works by copying the VBT and editing it with a hex editor and changing the device type corresponding with the duplicate device handle to <code>00 00</code>: 
</p>
<pre>$ cat /sys/kernel/debug/dri/0/i915_vbt &gt; vbt
</pre>
<pre>--- vbt
+++ modified_vbt
@@ -22,10 +22,10 @@
 00000150  00 08 00 20 00 08 00 10  00 08 00 02 00 08 00 01  |... ............|
 00000160  00 08 00 00 01 08 00 00  00 04 00 00 00 40 00 00  |.............@..|
 00000170  00 20 00 00 00 10 00 00  00 02 00 00 00 01 00 00  |. ..............|
-00000180  00 00 01 00 00 02 8b 01  02 04 00 00 27 08 00 06  |............'...|
-00000190  18 00 00 00 00 00 00 00  00 00 00 00 00 0a 00 00  |................|
+00000180  00 00 01 00 00 02 8b 01  02 04 00 00 27 08 00 00  |............'...|
+00000190  00 00 00 00 00 00 00 00  00 00 00 00 00 0a 00 00  |................|
 000001a0  03 00 00 00 c0 00 40 00  20 00 00 00 00 00 00 00  |......@. .......|
-000001b0  00 00 20 00 80 00 06 18  00 00 00 00 00 00 00 00  |.. .............|
+000001b0  00 00 20 00 80 00 00 00  00 00 00 00 00 00 00 00  |.. .............|
 000001c0  00 00 00 00 07 00 00 00  00 00 00 c0 00 10 00 20  |............... |
 000001d0  00 00 00 00 00 00 00 00  00 20 00 04 00 d2 60 00  |......... ....`.|
 000001e0  10 10 00 23 21 10 00 00  00 00 00 07 00 00 02 00  |...#!...........|
</pre>
<p>The modified VBT can then be loaded by copying it to <code>/lib/firmware/modified_vbt</code>
passing <code>i915.vbt_firmware=modified_vbt</code> as a kernel parameter and, if required, <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://www.intel.com/content/www/us/en/support/articles/000005520/graphics.html?wapkw=linux%20graphics">linux graphics</a> (includes a list of 106 related products)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.intel.com/content/www/us/en/developer/articles/guide/intel-graphics-developers-guides.html?wapkw=linux%20graphics">Intel® Processor Graphics</a> (includes a table of processor series, former code name, launch date and graphics technology)</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Sections_flagged_with_Template:Remove.html" title="Category:Sections flagged with Template:Remove">Sections flagged with Template:Remove</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Intel_graphics&amp;oldid=812734">https://wiki.archlinux.org/index.php?title=Intel_graphics&amp;oldid=812734</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 July 2024, at 13:13.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
