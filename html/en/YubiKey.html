<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>YubiKey - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-YubiKey rootpage-YubiKey skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Management_tools" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Management_tools">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Management tools</span>
				</div>
			</a>
			
			<ul id="toc-Management_tools-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Authentication_tools" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Authentication_tools">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Authentication tools</span>
				</div>
			</a>
			
			<ul id="toc-Authentication_tools-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Inputs" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Inputs">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Inputs</span>
			</div>
		</a>
		
		<ul id="toc-Inputs-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Outputs" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Outputs">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Outputs</span>
			</div>
		</a>
		
		<ul id="toc-Outputs-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-USB_connection_modes" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#USB_connection_modes">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>USB connection modes</span>
			</div>
		</a>
		
			<button aria-controls="toc-USB_connection_modes-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle USB connection modes subsection</span>
			</button>
		
		<ul id="toc-USB_connection_modes-sublist" class="vector-toc-list">
			<li id="toc-Get_enabled_modes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Get_enabled_modes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Get enabled modes</span>
				</div>
			</a>
			
			<ul id="toc-Get_enabled_modes-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Set_modes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Set_modes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Set modes</span>
				</div>
			</a>
			
			<ul id="toc-Set_modes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-One-time_password" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#One-time_password">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>One-time password</span>
			</div>
		</a>
		
			<button aria-controls="toc-One-time_password-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle One-time password subsection</span>
			</button>
		
		<ul id="toc-One-time_password-sublist" class="vector-toc-list">
			<li id="toc-Factory_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Factory_configuration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Factory configuration</span>
				</div>
			</a>
			
			<ul id="toc-Factory_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Yubico_OTP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Yubico_OTP">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Yubico OTP</span>
				</div>
			</a>
			
			<ul id="toc-Yubico_OTP-sublist" class="vector-toc-list">
				<li id="toc-YubiCloud_and_validation_servers" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#YubiCloud_and_validation_servers">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.1</span>
					<span>YubiCloud and validation servers</span>
				</div>
			</a>
			
			<ul id="toc-YubiCloud_and_validation_servers-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration_and_usage" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Configuration_and_usage">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.2</span>
					<span>Configuration and usage</span>
				</div>
			</a>
			
			<ul id="toc-Configuration_and_usage-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Security_risks" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Security_risks">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.3</span>
					<span>Security risks</span>
				</div>
			</a>
			
			<ul id="toc-Security_risks-sublist" class="vector-toc-list">
				<li id="toc-AES_key_compromise" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#AES_key_compromise">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.3.1</span>
					<span>AES key compromise</span>
				</div>
			</a>
			
			<ul id="toc-AES_key_compromise-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Validation_requests/responses_tampering" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Validation_requests/responses_tampering">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.3.2</span>
					<span>Validation requests/responses tampering</span>
				</div>
			</a>
			
			<ul id="toc-Validation_requests/responses_tampering-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Challenge-response" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Challenge-response">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Challenge-response</span>
				</div>
			</a>
			
			<ul id="toc-Challenge-response-sublist" class="vector-toc-list">
				<li id="toc-HMAC-SHA1_algorithm" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#HMAC-SHA1_algorithm">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3.1</span>
					<span>HMAC-SHA1 algorithm</span>
				</div>
			</a>
			
			<ul id="toc-HMAC-SHA1_algorithm-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Yubico_OTP_algorithm" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Yubico_OTP_algorithm">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3.2</span>
					<span>Yubico OTP algorithm</span>
				</div>
			</a>
			
			<ul id="toc-Yubico_OTP_algorithm-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sending_a_challenge" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Sending_a_challenge">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3.3</span>
					<span>Sending a challenge</span>
				</div>
			</a>
			
			<ul id="toc-Sending_a_challenge-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Static_password" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Static_password">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.4</span>
					<span>Static password</span>
				</div>
			</a>
			
			<ul id="toc-Static_password-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Emulated_USB_keyboard_limitations,_or_&quot;Why_does_my_password_look_so_weak?&quot;" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Emulated_USB_keyboard_limitations,_or_&quot;Why_does_my_password_look_so_weak?&quot;">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.5</span>
					<span>Emulated USB keyboard limitations, or "Why does my password look so weak?"</span>
				</div>
			</a>
			
			<ul id="toc-Emulated_USB_keyboard_limitations,_or_&quot;Why_does_my_password_look_so_weak?&quot;-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-OATH" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#OATH">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>OATH</span>
			</div>
		</a>
		
			<button aria-controls="toc-OATH-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle OATH subsection</span>
			</button>
		
		<ul id="toc-OATH-sublist" class="vector-toc-list">
			<li id="toc-OATH_API" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OATH_API">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>OATH API</span>
				</div>
			</a>
			
			<ul id="toc-OATH_API-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OTP_slot_implementation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OTP_slot_implementation">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>OTP slot implementation</span>
				</div>
			</a>
			
			<ul id="toc-OTP_slot_implementation-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-U2F" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#U2F">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>U2F</span>
			</div>
		</a>
		
		<ul id="toc-U2F-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-CCID_smartcard" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#CCID_smartcard">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>CCID smartcard</span>
			</div>
		</a>
		
			<button aria-controls="toc-CCID_smartcard-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle CCID smartcard subsection</span>
			</button>
		
		<ul id="toc-CCID_smartcard-sublist" class="vector-toc-list">
			<li id="toc-PIV" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PIV">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.1</span>
					<span>PIV</span>
				</div>
			</a>
			
			<ul id="toc-PIV-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OpenPGP_smartcards" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OpenPGP_smartcards">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.2</span>
					<span>OpenPGP smartcards</span>
				</div>
			</a>
			
			<ul id="toc-OpenPGP_smartcards-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Use_cases" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Use_cases">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">9</span>
				<span>Use cases</span>
			</div>
		</a>
		
			<button aria-controls="toc-Use_cases-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Use cases subsection</span>
			</button>
		
		<ul id="toc-Use_cases-sublist" class="vector-toc-list">
			<li id="toc-Full_disk_encryption_with_LUKS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Full_disk_encryption_with_LUKS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1</span>
					<span>Full disk encryption with LUKS</span>
				</div>
			</a>
			
			<ul id="toc-Full_disk_encryption_with_LUKS-sublist" class="vector-toc-list">
				<li id="toc-Common_prerequisites" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Common_prerequisites">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1.1</span>
					<span>Common prerequisites</span>
				</div>
			</a>
			
			<ul id="toc-Common_prerequisites-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Challenge-response_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Challenge-response_2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1.2</span>
					<span>Challenge-response</span>
				</div>
			</a>
			
			<ul id="toc-Challenge-response_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-systemd-based_initramfs" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#systemd-based_initramfs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1.3</span>
					<span>systemd-based initramfs</span>
				</div>
			</a>
			
			<ul id="toc-systemd-based_initramfs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GnuPG_encrypted_keyfile" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GnuPG_encrypted_keyfile">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1.4</span>
					<span>GnuPG encrypted keyfile</span>
				</div>
			</a>
			
			<ul id="toc-GnuPG_encrypted_keyfile-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-HMAC_secret_extension_of_FIDO2_protocol" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#HMAC_secret_extension_of_FIDO2_protocol">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1.5</span>
					<span>HMAC secret extension of FIDO2 protocol</span>
				</div>
			</a>
			
			<ul id="toc-HMAC_secret_extension_of_FIDO2_protocol-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-KeePass" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#KeePass">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.2</span>
					<span>KeePass</span>
				</div>
			</a>
			
			<ul id="toc-KeePass-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SSH_keys" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SSH_keys">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.3</span>
					<span>SSH keys</span>
				</div>
			</a>
			
			<ul id="toc-SSH_keys-sublist" class="vector-toc-list">
				<li id="toc-CCID" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#CCID">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.3.1</span>
					<span>CCID</span>
				</div>
			</a>
			
			<ul id="toc-CCID-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-U2F_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#U2F_2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.3.2</span>
					<span>U2F</span>
				</div>
			</a>
			
			<ul id="toc-U2F_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PIV_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#PIV_2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.3.3</span>
					<span>PIV</span>
				</div>
			</a>
			
			<ul id="toc-PIV_2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Linux_user_authentication_with_PAM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Linux_user_authentication_with_PAM">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.4</span>
					<span>Linux user authentication with PAM</span>
				</div>
			</a>
			
			<ul id="toc-Linux_user_authentication_with_PAM-sublist" class="vector-toc-list">
				<li id="toc-SSH_notes" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#SSH_notes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.4.1</span>
					<span>SSH notes</span>
				</div>
			</a>
			
			<ul id="toc-SSH_notes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Browser/web_integration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Browser/web_integration">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.5</span>
					<span>Browser/web integration</span>
				</div>
			</a>
			
			<ul id="toc-Browser/web_integration-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">10</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Executing_actions_on_insertion/removal_of_YubiKey_device" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Executing_actions_on_insertion/removal_of_YubiKey_device">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">10.1</span>
					<span>Executing actions on insertion/removal of YubiKey device</span>
				</div>
			</a>
			
			<ul id="toc-Executing_actions_on_insertion/removal_of_YubiKey_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Start_Yubico_Authenticator_on_insertion" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Start_Yubico_Authenticator_on_insertion">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">10.2</span>
					<span>Start Yubico Authenticator on insertion</span>
				</div>
			</a>
			
			<ul id="toc-Start_Yubico_Authenticator_on_insertion-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Maintenance_/_upgrades" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Maintenance_/_upgrades">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">11</span>
				<span>Maintenance / upgrades</span>
			</div>
		</a>
		
			<button aria-controls="toc-Maintenance_/_upgrades-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Maintenance / upgrades subsection</span>
			</button>
		
		<ul id="toc-Maintenance_/_upgrades-sublist" class="vector-toc-list">
			<li id="toc-Installing_the_OATH_Applet_for_a_YubiKey_NEO" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_the_OATH_Applet_for_a_YubiKey_NEO">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">11.1</span>
					<span>Installing the OATH Applet for a YubiKey NEO</span>
				</div>
			</a>
			
			<ul id="toc-Installing_the_OATH_Applet_for_a_YubiKey_NEO-sublist" class="vector-toc-list">
				<li id="toc-Configure_the_NEO_as_a_CCID_device" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Configure_the_NEO_as_a_CCID_device">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">11.1.1</span>
					<span>Configure the NEO as a CCID device</span>
				</div>
			</a>
			
			<ul id="toc-Configure_the_NEO_as_a_CCID_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Install_the_applet" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Install_the_applet">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">11.1.2</span>
					<span>Install the applet</span>
				</div>
			</a>
			
			<ul id="toc-Install_the_applet-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-(Optional)_Install_the_Yubico_Authenticator_desktop_client" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#(Optional)_Install_the_Yubico_Authenticator_desktop_client">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">11.1.3</span>
					<span>(Optional) Install the Yubico Authenticator desktop client</span>
				</div>
			</a>
			
			<ul id="toc-(Optional)_Install_the_Yubico_Authenticator_desktop_client-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">12</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-YubiKey_not_acting_as_HID_device" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#YubiKey_not_acting_as_HID_device">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">12.1</span>
					<span>YubiKey not acting as HID device</span>
				</div>
			</a>
			
			<ul id="toc-YubiKey_not_acting_as_HID_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-ykman_fails_to_connect_to_the_YubiKey" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ykman_fails_to_connect_to_the_YubiKey">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">12.2</span>
					<span>ykman fails to connect to the YubiKey</span>
				</div>
			</a>
			
			<ul id="toc-ykman_fails_to_connect_to_the_YubiKey-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error:_Failed_connecting_to_YubiKey_5_[OTP+FIDO+CCID]._Make_sure_the_application_have_the_required_permissions." class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Error:_Failed_connecting_to_YubiKey_5_[OTP+FIDO+CCID]._Make_sure_the_application_have_the_required_permissions.">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">12.3</span>
					<span>Error: Failed connecting to YubiKey 5 [OTP+FIDO+CCID]. Make sure the application have the required permissions.</span>
				</div>
			</a>
			
			<ul id="toc-Error:_Failed_connecting_to_YubiKey_5_[OTP+FIDO+CCID]._Make_sure_the_application_have_the_required_permissions.-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-YubiKey_fails_to_bind_within_a_guest_VM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#YubiKey_fails_to_bind_within_a_guest_VM">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">12.4</span>
					<span>YubiKey fails to bind within a guest VM</span>
				</div>
			</a>
			
			<ul id="toc-YubiKey_fails_to_bind_within_a_guest_VM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error:_[key]_could_not_be_locally_signed_or_gpg:_No_default_secret_key:_No_public_key" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Error:_[key]_could_not_be_locally_signed_or_gpg:_No_default_secret_key:_No_public_key">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">12.5</span>
					<span>Error: [key] could not be locally signed or gpg: No default secret key: No public key</span>
				</div>
			</a>
			
			<ul id="toc-Error:_[key]_could_not_be_locally_signed_or_gpg:_No_default_secret_key:_No_public_key-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-YubiKey_disappears_and_reappears_in_Yubico_Authenticator" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#YubiKey_disappears_and_reappears_in_Yubico_Authenticator">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">12.6</span>
					<span>YubiKey disappears and reappears in Yubico Authenticator</span>
				</div>
			</a>
			
			<ul id="toc-YubiKey_disappears_and_reappears_in_Yubico_Authenticator-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-YubiKey_core_error:_timeout" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#YubiKey_core_error:_timeout">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">12.7</span>
					<span>YubiKey core error: timeout</span>
				</div>
			</a>
			
			<ul id="toc-YubiKey_core_error:_timeout-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-gpg:_no_such_device" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#gpg:_no_such_device">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">12.8</span>
					<span>gpg: no such device</span>
				</div>
			</a>
			
			<ul id="toc-gpg:_no_such_device-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">YubiKey</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Universal_2nd_Factor.html" title="Universal 2nd Factor">Universal 2nd Factor</a></li>
<li><a href="../en/Initiative_for_Open_Authentication.html" class="mw-redirect" title="OATH">OATH</a></li>
<li><a href="../en/Dm-crypt/Encrypting_an_entire_system.html" title="Dm-crypt/Encrypting an entire system">dm-crypt/Encrypting an entire system</a></li>
<li><a href="../en/PAM.html" title="PAM">PAM</a></li>
<li><a href="../en/GnuPG.html" title="GnuPG">GnuPG</a></li>
<li><a href="../en/KeePass.html" title="KeePass">KeePass</a></li>
<li><a href="../en/OpenPGP-card-tools.html" title="OpenPGP-card-tools">OpenPGP-card-tools</a></li>
<li><a href="../en/Smartcards.html" title="Smartcards">Smartcards</a></li>
</ul>
</div>
<p>The <a rel="nofollow" class="external text" href="https://www.yubico.com/">YubiKey</a> is a small <a href="https://en.wikipedia.org/wiki/Security_token" class="extiw" title="wikipedia:Security token">USB security token</a>. Depending on the model, it can:
</p>
<ul>
<li>Act as a smartcard using the <a href="https://en.wikipedia.org/wiki/CCID_(protocol)" class="extiw" title="wikipedia:CCID (protocol)">CCID protocol</a>, allowing storage of both <a rel="nofollow" class="external text" href="https://developers.yubico.com/PGP/">PGP</a> and <a rel="nofollow" class="external text" href="https://developers.yubico.com/PIV/">PIV</a> secret keys.</li>
<li>Handle <a href="../en/Universal_2nd_Factor.html" title="Universal 2nd Factor">Universal 2nd Factor</a> (U2F) requests.</li>
<li>Store and query approximately 30 <a href="../en/Initiative_for_Open_Authentication.html" title="Initiative for Open Authentication">Initiative for Open Authentication</a> (OATH) credentials.</li>
<li>Handle <a href="https://en.wikipedia.org/wiki/Challenge%E2%80%93response_authentication" class="extiw" title="wikipedia:Challenge–response authentication">challenge-response requests</a>, in either the Yubico OTP mode or the HMAC-SHA1 mode.</li>
<li>Generate <a href="https://en.wikipedia.org/wiki/One-time_password" class="extiw" title="wikipedia:One-time password">one-time passwords</a> (OTPs) with <a rel="nofollow" class="external text" href="https://developers.yubico.com/OTP/">Yubico's AES-based standard</a>.</li>
<li>"Type" a static password up to 63 characters.</li>
</ul>
<p>While offering many features, newer versions of the YubiKey are <a rel="nofollow" class="external text" href="https://www.yubico.com/blog/secure-hardware-vs-open-source/">not released as open source</a>. Alternatives are the <a href="../en/Solo.html" title="Solo">Solo</a>, <a href="../en/Tillitis_TKey.html" title="Tillitis TKey">TKey</a> or <a href="../en/Nitrokey.html" title="Nitrokey">Nitrokey</a>.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Installation">Installation</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Management_tools">Management tools</h3></div>
<ul><li>
<b>YubiKey Manager</b> — Python library and command-line tool (<code>ykman</code>) for configuring and querying a YubiKey over USB.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://developers.yubico.com/yubikey-manager/">https://developers.yubico.com/yubikey-manager/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-manager">yubikey-manager</a></span>
<dl>
<dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> After installation, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>pcscd.service</code>; alternatively, it might be useful to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>pcscd.socket</code>.</div></dd>
<dd><div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yubikey-manager-qt/">yubikey-manager-qt</a></span><sup><small>AUR</small></sup> was available as a GUI but is now <a rel="nofollow" class="external text" href="https://github.com/Yubico/yubikey-manager-qt/commit/28dc02d11b081683b59d16d12043aaa3c0a6c75f">deprecated by Yubico</a>. The package is also <a rel="nofollow" class="external text" href="https://github.com/Yubico/yubikey-manager-qt/issues/361">completely broken</a> due to incompatibility with recent versions of Python and <code>ykman</code>.</div></dd>
</dl>
</dd></dl>
<ul><li>
<b>Yubico Authenticator</b> — GUI tool to access and reset information, configure <a rel="nofollow" class="external text" href="https://docs.yubico.com/software/yubikey/tools/authenticator/auth-guide/yubico-otp.html">slot-based credentials</a>, and read OATH codes from your YubiKey.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://developers.yubico.com/yubioath-flutter/">https://developers.yubico.com/yubioath-flutter/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yubico-authenticator/">yubico-authenticator</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>YubiKey Personalization</b> — Library and tool for configuring and querying a YubiKey over the OTP USB connection. More powerful than <code>ykman</code>, but harder to use. Has an optional GUI.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://developers.yubico.com/yubikey-personalization/">https://developers.yubico.com/yubikey-personalization/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-personalization">yubikey-personalization</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-personalization-gui">yubikey-personalization-gui</a></span>
<dl><dd><div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> Yubico announced the End of Life of YubiKey Personalization on February 19, 2025. It will not be updated after February 19, 2026.</div></dd></dl>
</dd></dl>
<div class="mw-heading mw-heading3"><h3 id="Authentication_tools">Authentication tools</h3></div>
<ul><li>
<b>pam-u2f</b> — <a href="../en/PAM.html" title="PAM">PAM</a> user authentication with <a href="../en/Universal_2nd_Factor.html" class="mw-redirect" title="U2F">U2F</a> by Yubico. Supplement or replace password authentication with your YubiKey.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://developers.yubico.com/pam-u2f/">https://developers.yubico.com/pam-u2f/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pam-u2f">pam-u2f</a></span>
</dd></dl>
<ul><li>
<b>libfido2</b> — Client-side U2F support. Enables web browsers to use the U2F protocol for authentication with your YubiKey.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://developers.yubico.com/libfido2/">https://developers.yubico.com/libfido2/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libfido2">libfido2</a></span>
</dd></dl>
<ul><li>
<b>YubiKey Full Disk Encryption</b> — Use challenge-response mode to create strong LUKS passphrases. Supports full disk encryption.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/agherzan/yubikey-full-disk-encryption">https://github.com/agherzan/yubikey-full-disk-encryption</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-full-disk-encryption">yubikey-full-disk-encryption</a></span>
</dd></dl>
<div class="mw-heading mw-heading2"><h2 id="Inputs">Inputs</h2></div>
<p>The YubiKey takes inputs in the form of API calls over USB and button presses.
</p>
<p>The button is very sensitive. Depending on the context, touching it does one of these things:
</p>
<ul>
<li>Trigger a static password or one-time password (OTP) (Short press for slot 1, long press for slot 2). This is the default behavior, and easy to trigger inadvertently.</li>
<li>Confirm / allow a function or access. The LED will illuminate to prompt the user.</li>
<li>Insert / eject the smartcard</li>
</ul>
<div class="mw-heading mw-heading2"><h2 id="Outputs">Outputs</h2></div>
<p>The YubiKey transforms these inputs into outputs:
</p>
<ul>
<li>Keystrokes (emulating a USB keyboard), used to type static passwords and OTPs. (Note that static passwords are vulnerable to keyloggers.)</li>
<li>The built-in LED:
<ul>
<li>Blinks once when plugged in, useful for troubleshooting.</li>
<li>Blinks steadily when a button press is required to permit an API response.</li>
</ul>
</li>
<li>API responses over USB. This is used for:
<ul>
<li>Challenge-Response requests (calculated using either Yubico OTP mode or HMAC-SHA1 mode)</li>
<li>U2F Challenge-Response requests</li>
<li>CCID Smartcard related requests</li>
</ul>
</li>
</ul>
<div class="mw-heading mw-heading2"><h2 id="USB_connection_modes">USB connection modes</h2></div>
<p>Depending on the YubiKey model, the device provides up to three different USB interfaces. Two of the interfaces implement the USB HID (Human Interface Device) device class; the third is a smart card interface (CCID). All three can be enabled or disabled independently, allowing control of their associated protocols.
</p>
<p>The following table shows which protocols use which interfaces:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Protocol</th>
<th>Interface
</th>
</tr>
<tr>
<td>OTP</td>
<td>Keyboard HID
</td>
</tr>
<tr>
<td>FIDO</td>
<td>Other HID
</td>
</tr>
<tr>
<td>PIV</td>
<td>CCID
</td>
</tr>
<tr>
<td>OpenPGP</td>
<td>CCID
</td>
</tr>
<tr>
<td>OATH</td>
<td>CCID
</td>
</tr>
</tbody>
</table>
<p><code>ykman</code> uses the term "modes", named OTP, FIDO, and CCID.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> ykman renamed "U2F" to "FIDO" in release 0.6.1 (2018-04-16). <a rel="nofollow" class="external free" href="https://developers.yubico.com/yubikey-manager/Release_Notes.html">https://developers.yubico.com/yubikey-manager/Release_Notes.html</a>
</div>
<div class="mw-heading mw-heading3"><h3 id="Get_enabled_modes">Get enabled modes</h3></div>
<p>For YubiKey prior to version 5:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ykman config mode</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Current connection mode is: OTP+FIDO+CCID
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> The command <code>ykman mode</code> has been deprecated and may be removed later.</div>
<p>For YubiKey version 5:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ykman info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Device type: YubiKey 5 NFC
Serial number: XXXXXXXXX
Firmware version: 5.4.3
Form factor: Keychain (USB-A)
Enabled USB interfaces: OTP, FIDO, CCID
NFC transport is enabled.

Applications    USB     NFC
FIDO2           Enabled Enabled
OTP             Enabled Enabled
FIDO U2F        Enabled Enabled
OATH            Enabled Enabled
YubiHSM Auth    Enabled Enabled
OpenPGP         Enabled Enabled
PIV             Enabled Enabled
</pre>
<div class="mw-heading mw-heading3"><h3 id="Set_modes">Set modes</h3></div>
<p>All modes are enabled from the factory. To change them:
</p>
<pre>$ ykman mode <i>[OPTIONS]</i> <i>MODE</i>
</pre>
<ul>
<li>
<code><i>MODE</i></code> can be a string, such as <code>OTP+FIDO+CCID</code>, or a shortened form <code>o+f+c</code>.</li>
<li>
<code><i>MODE</i></code> can be a mode-number, which encodes several enabled modes.</li>
</ul>
<p>Here is a table of mode-numbers, if you care to use them:
</p>
<table class="wikitable">
<tbody>
<tr>
<td>0</td>
<td>OTP device only.
</td>
</tr>
<tr>
<td>1</td>
<td>CCID device only.
</td>
</tr>
<tr>
<td>2</td>
<td>OTP/CCID composite device.
</td>
</tr>
<tr>
<td>3</td>
<td>U2F device only.
</td>
</tr>
<tr>
<td>4</td>
<td>OTP/U2F composite device.
</td>
</tr>
<tr>
<td>5</td>
<td>U2F/CCID composite device.
</td>
</tr>
<tr>
<td>6</td>
<td>OTP/U2F/CCID composite device.
</td>
</tr>
<tr>
<td>81</td>
<td>CCID device only, with touch-eject.
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Some examples use mode number 86, which is <a rel="nofollow" class="external text" href="https://github.com/Yubico/yubikey-manager/issues/20#issuecomment-326496204">invalid</a>. The 80 will be ignored, and it will behave like 6.</div>
<p>Options:
</p>
<ul>
<li>
<code>--touch-eject</code> - The button will insert and eject the smart card. This only works if the mode is CCID only; FIDO and OTP must be disabled.</li>
<li>
<code>--autoeject-timeout <i>SECONDS</i></code> - Automatically eject the smart card after some time. Same restrictions as <code>--touch-eject</code>.</li>
<li>
<code>--chalresp-timeout <i>SECONDS</i></code> - Set the challenge-response timeout.</li>
</ul>
<p>For more information, see <code>ykman mode --help</code>.
</p>
<div class="mw-heading mw-heading2"><h2 id="One-time_password">One-time password</h2></div>
<p>This feature has a somewhat misleading name, because it also encompasses the static password and challenge-response functions.
</p>
<p>2 slots are provided for this feature, accessible by short and long button presses respectively. Each can be configured with <b>one</b> of the following:
</p>
<ul>
<li>Yubico OTP</li>
<li>OATH-HOTP</li>
<li>OATH-TOTP</li>
<li>Challenge-response</li>
<li>Static Password</li>
</ul>
<p>Each function has several configuration options provided at the time of creation, but once set they cannot be read back. It is possible to swap slots 1 and 2, with <code>ykman otp swap</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Factory_configuration">Factory configuration</h3></div>
<p>On a new YubiKey, Yubico OTP is preconfigured on slot 1. This initial AES symmetric key is stored in the YubiKey and on the Yubico Authentication server. This allows validating against YubiCloud, allowing the use of Yubico OTP in combination with the Yubico Forum website for instance or on <a rel="nofollow" class="external free" href="https://demo.yubico.com">https://demo.yubico.com</a>).
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> If you ever overwrite the factory key in slot 1, you cannot create a new key of the same trust level. Factory generated Yubico OTP credentials begin with a <code>CC</code> prefix, while user generated credentials begin with <code>VV</code>. There is no fundamental difference in security or functionality, though some services only trust <code>CC</code> credentials. More information can be found in this <a rel="nofollow" class="external text" href="https://forum.yubico.com/viewtopic12ca.html?f%3D16&amp;t%3D1960">forum thread</a>.</div>
<div class="mw-heading mw-heading3"><h3 id="Yubico_OTP">Yubico OTP</h3></div>
<p>The <a rel="nofollow" class="external text" href="https://developers.yubico.com/OTP/">Yubico OTP</a> is based on <a href="https://en.wikipedia.org/wiki/Symmetric_cryptography" class="extiw" title="wikipedia:Symmetric cryptography">symmetric cryptography</a>. More specifically, each YubiKey contains a 128-bit <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" class="extiw" title="wikipedia:Advanced Encryption Standard">AES</a> key unique to that device, which is also stored on a validation server. When asked for a password, the YubiKey will create a token by concatenating different fields such as the ID of the key, a counter, and a random number, and encrypting the result.
</p>
<p>This OTP is sent to the target system, which passes it to a validation server. The validation server (also in posession of the secret key) decrypts it and verifies the information inside. The result is returned to the target system, which can then decide whether to grant access.
</p>
<div class="mw-heading mw-heading4"><h4 id="YubiCloud_and_validation_servers">YubiCloud and validation servers</h4></div>
<p>Yubico provides a validation server with free unlimited access, called YubiCloud. YubiCloud knows the factory configuration of all YubiKeys, and is the "default" validation service used by (for example) <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubico-pam">yubico-pam</a></span>. Yubico also offers <a rel="nofollow" class="external text" href="https://developers.yubico.com/Software_Projects/Yubico_OTP/YubiCloud_Validation_Servers/">open-source implementations</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2025-08-16—HTTP 404]</sup> of the server.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> To authenticate the Yubico validation server, you can use:
<ul>
<li>
<b>HMAC</b>: use <a rel="nofollow" class="external free" href="https://upgrade.yubico.com/getapikey/">https://upgrade.yubico.com/getapikey/</a> to get an HMAC key and ID</li>
<li>
<b>HTTPS</b>: the validation server's certificate is signed by GoDaddy, and is thus trusted by default in Arch installs (at least if you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ca-certificates">ca-certificates</a></span> installed)</li>
</ul>
</div>
<div class="mw-heading mw-heading4"><h4 id="Configuration_and_usage">Configuration and usage</h4></div>
<p>Generate a new key in slot 2, and upload it to YubiCloud (opens in a browser):
</p>
<pre>$ ykman otp yubiotp --generate-key --upload 2
</pre>
<p>For more information, see <code>ykman otp yubiotp --help</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Security_risks">Security risks</h4></div>
<div class="mw-heading mw-heading5"><h5 id="AES_key_compromise">AES key compromise</h5></div>
<p>As you can imagine, the AES key should be kept secret. It cannot be retrieved from the YubiKey itself (or it should not, at least not with software). It is also present in the validation server, so the security of this server is very important.
</p>
<div class="mw-heading mw-heading5"><h5 id="Validation_requests/responses_tampering">
<span id="Validation_requests.2Fresponses_tampering"></span>Validation requests/responses tampering</h5></div>
<p>Since the target system relies on a validation server, a possible attack would be to impersonate it. To prevent this, the target system needs to authenticate the validation server, either using HMAC or HTTPS.
</p>
<div class="mw-heading mw-heading3"><h3 id="Challenge-response">Challenge-response</h3></div>
<p>A challenge is sent to the YubiKey, which calculates a response based on some secret. The same challenge always results in the same response. Without the secret this calculation is not feasible, even with many challenge-response pairs.
</p>
<p>This can be used for
</p>
<ul>
<li>True 2-factor authentication: The user is provided a challenge, they must provide the correct response in addition to a password. Both parties must have the secret key.</li>
<li>"Semi" 2-factor authentication: the challenge acts as a password, and the server stores the correct response. This is not an OTP, and if anyone can obtain the response they will gain access, but it is simpler as the server does not need the secret key.</li>
</ul>
<p>There are two Challenge-Response algorithms:
</p>
<ul>
<li>HMAC-SHA1</li>
<li>Yubico OTP</li>
</ul>
<p>You can set them up with a GUI using the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-personalization-gui">yubikey-personalization-gui</a></span>, or with the following instructions:
</p>
<div class="mw-heading mw-heading4"><h4 id="HMAC-SHA1_algorithm">HMAC-SHA1 algorithm</h4></div>
<p>Set up slot 2 in challenge response mode with a generated key:
</p>
<pre>$ ykman otp chalresp --generate 2
</pre>
<p>You can omit the <code>--generate</code> flag in order to provide a key, see <code>ykman otp chalresp --help</code>. A main advantage of providing a key is that it can be used to setup a second device as a backup. The command <code>openssl rand -hex 20</code> generates a suitable key, for example.
</p>
<div class="mw-heading mw-heading4"><h4 id="Yubico_OTP_algorithm">Yubico OTP algorithm</h4></div>
<p><code>ykman</code> Does not appear to support setting the chal-yubico algorithm, but you can use <code>ykpersonalize</code>. Generate a random key in slot 2:
</p>
<pre>$ ykpersonalize -2 -ochal-resp -ochal-yubico
</pre>
<p>For more information, see <span class="plainlinks archwiki-template-man" title="$ man 1 ykpersonalize"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ykpersonalize.1">ykpersonalize(1)</a></span>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Sending_a_challenge">Sending a challenge</h4></div>
<p>To send a challenge and get a response, the <code>ykchalresp -<i>slot</i> <i>challenge</i></code> command can be used. For example,
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ykchalresp -2 <i>archie</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">12a19763be77d75af46fb76f0b737c117fa47205
</pre>
<p>returns a 40-byte SHA1-hash unique to the programmed slot 2. A different challenge produces another unique response.
</p>
<div class="mw-heading mw-heading3"><h3 id="Static_password">Static password</h3></div>
<p>You can either generate a static password:
</p>
<pre>$ ykman otp static --generate <i>slot</i>
</pre>
<p>or provide one:
</p>
<pre>$ ykman otp static <i>slot</i> <i>password</i>
</pre>
<p>You have several options; you can set the length and character set of the generated password, and whether or not to send an Enter keystroke. See <code>ykman otp static --help</code> for more.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> Most YubiKeys provide only limited (2) slots to save static passwords. A setup challenge-response slot provides static hash responses for unlimited challenges. While these are numeric and lower alphabet only, the response length provides considerable entropy.</div>
<div class="mw-heading mw-heading3"><h3 id="Emulated_USB_keyboard_limitations,_or_&quot;Why_does_my_password_look_so_weak?&quot;">
<span id="Emulated_USB_keyboard_limitations.2C_or_.22Why_does_my_password_look_so_weak.3F.22"></span>Emulated USB keyboard limitations, or "Why does my password look so weak?"</h3></div>
<p>In order for the YubiKey to work with most keyboard layouts, passwords are by default limited to the ModHex alphabet (<code>cbdefghijklnrtuv</code>), digits <code>0-9</code>, and <code>!</code>. These characters use the same scan codes across a very large number of keyboard layouts, ensuring compatibility with most computers.
</p>
<p>Yubico has provided a <a rel="nofollow" class="external text" href="https://resources.yubico.com/53ZDUYE6/as/9hccqgx9bwwqq96mhkk8jb4h/Static_Password_Function.pdf">whitepaper</a> on the subject.
</p>
<div class="mw-heading mw-heading2"><h2 id="OATH">OATH</h2></div>
<p>The YubiKey offers 2 <a href="../en/Initiative_for_Open_Authentication.html" class="mw-redirect" title="OATH">OATH</a> implementations:
</p>
<dl>
<dt>OATH API</dt>
<dd>Newer method, can store approximately 30 credentials depending on the model. (YubiKey 4, NEO, and newer)</dd>
<dt>OTP slot</dt>
<dd>Older method, both OTP slots can store a single credential. (All models which support challenge-response)</dd>
</dl>
<div class="mw-heading mw-heading3"><h3 id="OATH_API">OATH API</h3></div>
<p>If you prefer a GUI, you can use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yubico-authenticator/">yubico-authenticator</a></span><sup><small>AUR</small></sup>.
</p>
<p><code>ykman</code> can add codes in the URI format with <code>ykman oath uri</code>. Here is a one-liner that will add a credential from an image of a QR code:
</p>
<pre>$ zbarimg qr_code.png --quiet --raw | xargs ykman oath accounts uri
</pre>
<p>You can also do things manually. Program a TOTP key, requiring a button touch to generate a code:
</p>
<pre>$ ykman oath accounts add --touch <i>name</i> <i>secret</i>
</pre>
<p>Program an HOTP key:
</p>
<pre>$ ykman oath accounts add --oath-type HOTP <i>name</i> <i>secret</i>
</pre>
<p>List credentials:
</p>
<pre>$ ykman oath accounts list
</pre>
<p>Generate codes:
</p>
<pre>$ ykman oath accounts code <i>query</i>
</pre>
<p>To see all available subcommands see <code>ykman oath --help</code>. To see information about each, use <code>ykman oath <i>subcommand</i> --help</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="OTP_slot_implementation">OTP slot implementation</h3></div>
<p>Program an HOTP in slot 2:
</p>
<pre>$ ykman otp hotp 2 <i>key</i>
</pre>
<p>Program a TOTP:
</p>
<pre>$ ykman otp chalresp --totp <i>slot</i> <i>key</i>
</pre>
<p>Generate an HOTP:
</p>
<pre>$ ykman otp calculate <i>slot</i>
</pre>
<p>Generate a TOTP:
</p>
<pre>$ ykman otp calculate --totp <i>slot</i>
</pre>
<p>See also: <code>ykman otp --help</code> and <a rel="nofollow" class="external free" href="https://developers.yubico.com/OATH/">https://developers.yubico.com/OATH/</a>
</p>
<div class="mw-heading mw-heading2"><h2 id="U2F">U2F</h2></div>
<p><a href="../en/Universal_2nd_Factor.html" title="Universal 2nd Factor">Universal 2nd Factor</a> (U2F) with a YubiKey is very simple, requiring no configuration for the key itself. Note that this mode is also referred to as 'FIDO' in some documentation and utilities. You have a few limited management options through the <code>ykman</code> utility:
</p>
<ul>
<li>Set a PIN: <code>ykman fido access change-pin</code>
</li>
<li>delete individual credentials: <code>ykman fido credentials delete <i>QUERY</i></code>
</li>
<li>Reset all credentials and PIN: <code>ykman fido reset</code>
</li>
</ul>
<p>To use U2F for authentication, see the instructions in <a href="../en/Universal_2nd_Factor.html" class="mw-redirect" title="U2F">U2F</a>.
</p>
<p>Also see <a href="../en/WebAuthn.html" title="WebAuthn">WebAuthn</a>.
</p>
<div class="mw-heading mw-heading2"><h2 id="CCID_smartcard">CCID smartcard</h2></div>
<p>CCID (Chip Card Interface Device) is a USB standard device class for use by USB devices that act as smart card readers or with security tokens that connect directly via USB, like the YubiKey. HID (Human Interface Device) and CCID are both USB device classes, i.e. they are in the same category of USB specifications. HID is a specification for computer peripherals, like keyboards. The YubiKey works like a USB (HID) keyboard when used in the OTP and FIDO modes, but switches to the CCID protocol when using the PIV application, or as an OpenPGP device.
</p>
<p>CCID mode should be enabled by default on all YubiKeys shipped since November 2015 <a rel="nofollow" class="external autonumber" href="https://www.yubico.com/support/knowledge-base/categories/articles/use-yubikey-yubikey-windows-hello-app/">[1]</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2025-04-06—HTTP 404]</sup>. Enable at least the CCID mode. Please see <a href="#Get_enabled_modes">#Get enabled modes</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="PIV">PIV</h3></div>
<p>Starting with the YubiKey NEO, the YubiKeys contain a PIV (Personal Identity Verification) application on the chip. PIV is a US government standard (FIPS 201) that specifies how a token using RSA or ECC (Elliptic Curve Cryptography) is used for personal electronic identification. The YubiKey NEO only supports RSA encryption, later models (YubiKey 4 and 5) support both RSA and ECC. The exact algorithms supported depends on the firmware. For example, only YubiKeys with firmware 5.7 and up support RSA 3072, RSA 4096, Ed25519, and X25519 keys <a rel="nofollow" class="external autonumber" href="https://developers.yubico.com/PIV/Introduction/YubiKey_and_PIV.html">[2]</a>. The distinguishing characteristic of a PIV token is that it is built to protect private keys and operate on-chip. A private key never leaves the token after it has been installed on it. Optionally, the private key can even be generated on-chip with the aid of an on-chip random number generator. If generated on-chip, the private key is never handled outside of the chip, and there is no way to recover it from the token. When using the PIV mechanism, the YubiKey functions as a CCID device.
</p>
<div class="mw-heading mw-heading3"><h3 id="OpenPGP_smartcards">OpenPGP smartcards</h3></div>
<p>The YubiKey can act as a standard OpenPGP smartcard; see <a href="../en/GnuPG.html#Smartcards" title="GnuPG">GnuPG#Smartcards</a> for instructions on how to set up and use it with <a href="../en/GnuPG.html" title="GnuPG">GnuPG</a>. Yubico also provides some documentation in <a rel="nofollow" class="external free" href="https://developers.yubico.com/PGP/">https://developers.yubico.com/PGP/</a>.
</p>
<p>If you do not want to use the other features (U2F and OTP), the button can be configured to insert and eject it, and an auto-eject timeout can be set as well. See <a href="#USB_connection_modes">#USB connection modes</a> for more.
</p>
<p>The default user pin is <code>123456</code> and the default admin pin is <code>12345678</code>. The default PUK is also <code>12345678</code>. Remember to change all 3.
</p>
<div class="mw-heading mw-heading2"><h2 id="Use_cases">Use cases</h2></div>
<p>This section details how to use your YubiKey for various authentication purposes. It is by no means an exhaustive list.
</p>
<div class="mw-heading mw-heading3"><h3 id="Full_disk_encryption_with_LUKS">Full disk encryption with LUKS</h3></div>
<p>You have several options:
</p>
<ul>
<li>
<b>Challenge-Response:</b> the <a href="#Challenge-response">response</a> to some challenge is used as a LUKS key. The challenge can act as a password for true 2-factor authentication, or stored in plain-text for one-factor authentication.</li>
<li>
<b>GnuPG:</b> Uses the yubikey's <a href="#CCID_smartcard">PGP smartcard</a> functionality. Offers strong 2-factor authentication without needing a huge passphrase.</li>
<li>
<b>FIDO HMAC Secret:</b> If your YubiKey supports <a href="../en/Universal_2nd_Factor.html" class="mw-redirect" title="U2F">U2F</a>, it can be configured to return a symmetric secret.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> A disk's encryption is only as strong as its weakest key. Once you configure one of these tools, consider removing the initial passphrase, or replacing it with a very long one.</div>
<div class="mw-heading mw-heading4"><h4 id="Common_prerequisites">Common prerequisites</h4></div>
<ul>
<li>A bootable <a href="../en/Dm-crypt/Encrypting_an_entire_system.html" title="Dm-crypt/Encrypting an entire system">LUKS encrypted</a> system, using the <code>encrypt</code> <a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> hook, with at least one free keyslot.
<ul><li>With the exception of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mkinitcpio-ykfde/">mkinitcpio-ykfde</a></span><sup><small>AUR</small></sup>, the <code>sd-encrypt</code> hook is not supported by any of these tools.</li></ul>
</li>
<li>Backed up LUKS header (Optional, though advisable)</li>
</ul>
<div class="mw-heading mw-heading4"><h4 id="Challenge-response_2">Challenge-response</h4></div>
<p>See <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-full-disk-encryption">yubikey-full-disk-encryption</a></span>'s <a rel="nofollow" class="external text" href="https://github.com/agherzan/yubikey-full-disk-encryption#usage">official documentation</a> for complete instructions. Broadly:
</p>
<ol>
<li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-full-disk-encryption">yubikey-full-disk-encryption</a></span>.</li>
<li>Configure <code>/etc/ykfde.conf</code>.</li>
<li>Enroll the disk: <code># ykfde-enroll -d /dev/<i>DISK</i> -s <i>LUKS_SLOT</i></code>
</li>
<li>Add the <code>ykfde</code> <a href="../en/Mkinitcpio.html#HOOKS" title="Mkinitcpio">mkinitcpio hook</a> before the <code>encrypt</code> hook.</li>
<li>
<a href="../en/Regenerate_the_initramfs.html" class="mw-redirect" title="Regenerate the initramfs">Regenerate the initramfs</a>.</li>
</ol>
<dl><dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Plymouth users: replace the <code>plymouth-encrypt</code> hook with the <code>ykfde</code> hook.</div></dd></dl>
<p>There are a few variations available:
</p>
<ul>
<li>2FA: default behavior. You must provide the challenge as a password when enrolling the device, and upon boot.</li>
<li>1FA: Set <code>YKFDE_CHALLENGE</code> in <code>ykfde.conf</code>. Note that this is stored in plaintext. Consider disabling non-root read permissions to this file.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/agherzan/yubikey-full-disk-encryption#enable-nfc-support-in-ykfde-initramfs-hook-experimental">NFC support</a> (Experimental)</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/agherzan/yubikey-full-disk-encryption#enable-ykfde-suspend-service-experimental">Suspend &amp; Resume support</a> (Experimental) Automatically lock encrypted volumes on suspend, unlock them on resume.</li>
</ul>
<p>You must regenerate the initramfs for any configuration changes to take effect.
</p>
<div class="mw-heading mw-heading4"><h4 id="systemd-based_initramfs">systemd-based initramfs</h4></div>
<p>Users of the <code>sd-encrypt</code> hook may install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mkinitcpio-ykfde/">mkinitcpio-ykfde</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mkinitcpio-ykfde-git/">mkinitcpio-ykfde-git</a></span><sup><small>AUR</small></sup> and follow the instruction in the <a rel="nofollow" class="external text" href="https://github.com/eworm-de/mkinitcpio-ykfde/blob/master/README-mkinitcpio.md">project documentation</a>. The procedure is broadly similar to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-full-disk-encryption">yubikey-full-disk-encryption</a></span>.
</p>
<div class="mw-heading mw-heading4"><h4 id="GnuPG_encrypted_keyfile">GnuPG encrypted keyfile</h4></div>
<p>One tool to accomplish this is <a rel="nofollow" class="external text" href="https://github.com/fuhry/initramfs-scencrypt">initramfs-scencrypt</a>; see its docs for complete instructions. Note that as of October 2022 this package is not in the AUR and is not thoroughly tested, though the GitHub repository offers a PKGBUILD.
</p>
<p>The <a href="../en/Dm-crypt/Specialties.html#Using_GPG,_LUKS,_or_OpenSSL_encrypted_keyfiles" title="Dm-crypt/Specialties">dm-crypt pages</a> offer a few alternatives, though they are mostly links to old forum posts.
</p>
<div class="mw-heading mw-heading4"><h4 id="HMAC_secret_extension_of_FIDO2_protocol">HMAC secret extension of FIDO2 protocol</h4></div>
<p>Yet another way of using YubiKey for full disk encryption is to utilize <a rel="nofollow" class="external text" href="https://fidoalliance.org/specs/fido-v2.0-id-20180227/fido-client-to-authenticator-protocol-v2.0-id-20180227.html#sctn-hmac-secret-extension">HMAC Secret Extension</a> to retrieve the LUKS password from YubiKey. This can be protected by a passphrase. This functionality requires at least <a rel="nofollow" class="external text" href="https://support.yubico.com/hc/en-us/articles/360016649319-YubiKey-5-2-3-Enhancements-to-FIDO-2-Support">YubiKey 5 with firmware 5.2.3+</a>.
For a passphrase protected solution, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/khefin/">khefin</a></span><sup><small>AUR</small></sup> and follow instructions available in <a rel="nofollow" class="external text" href="https://github.com/mjec/khefin/wiki/Arch-Linux-LUKS-configuration">project documentation</a>.
For single factor (optionally PIN-protected) solution and starting with systemd 248, it is possible to use your FIDO2 key as LUKS2 keyslot. Instructions available in the <a rel="nofollow" class="external text" href="https://0pointer.net/blog/unlocking-luks2-volumes-with-tpm2-fido2-pkcs11-security-hardware-on-systemd-248.html">author's blog post</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="KeePass">KeePass</h3></div>
<p><a href="../en/KeePass.html" title="KeePass">KeePass</a> can be configured for YubiKey support; see the <a href="../en/KeePass.html#Yubikey" title="KeePass">YubiKey section</a> for instructions.
</p>
<div class="mw-heading mw-heading3"><h3 id="SSH_keys">SSH keys</h3></div>
<div class="mw-heading mw-heading4"><h4 id="CCID">CCID</h4></div>
<p>If your YubiKey supports CCID smartcards, you can use it as a hardware-backed <a href="../en/SSH_key.html" class="mw-redirect" title="SSH key">SSH key</a>, either based on GPG or PIV keys. Yubico offers good documentation:
</p>
<ul>
<li>An <a rel="nofollow" class="external text" href="https://developers.yubico.com/PIV/Guides/Securing_SSH_with_OpenPGP_or_PIV.html">overview of both</a> possibilities, giving their advantages and disadvantages</li>
<li>Instructions for <a rel="nofollow" class="external text" href="https://developers.yubico.com/PGP/SSH_authentication/index.html">PGP authentication</a>
</li>
<li>Instructions for <a rel="nofollow" class="external text" href="https://developers.yubico.com/PIV/Guides/SSH_user_certificates.html">PIV authentication through user certificates</a>
</li>
<li>Instructions for <a rel="nofollow" class="external text" href="https://developers.yubico.com/PIV/Guides/SSH_with_PIV_and_PKCS11.html">PIV authentication through #PKCS11</a>
</li>
</ul>
<dl><dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> The default PIN code of the PIV application on the YubiKey is <code>123456</code>; you may want to change it, as well as the default management key. See the <a rel="nofollow" class="external text" href="https://developers.yubico.com/PIV/Guides/Device_setup.html">device setup instructions</a> for more.</div></dd></dl>
<div class="mw-heading mw-heading4"><h4 id="U2F_2">U2F</h4></div>
<p>You may also use the U2F feature of the YubiKey to create hardware-backed SSH keys. See <a href="../en/SSH_keys.html#FIDO/U2F" title="SSH keys">SSH keys#FIDO/U2F</a> for instructions.
</p>
<div class="mw-heading mw-heading4"><h4 id="PIV_2">PIV</h4></div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yubikey-agent/">yubikey-agent</a></span><sup><small>AUR</small></sup> stores the SSH key as PIV token. See <a rel="nofollow" class="external free" href="https://github.com/FiloSottile/yubikey-agent#readme">https://github.com/FiloSottile/yubikey-agent#readme</a> for a setup guide.
</p>
<div class="mw-heading mw-heading3"><h3 id="Linux_user_authentication_with_PAM">Linux user authentication with PAM</h3></div>
<p><a href="../en/PAM.html" title="PAM">PAM</a>, and therefore anything which uses PAM for user authentication, can be configured to use a YubiKey as a factor of its user authentication process. This includes sudo, su, ssh, screen lockers, display managers, and nearly every other instance where a Linux system needs to authenticate a user. Its flexible configuration allows you to set whichever authentication requirements fit your needs, for the entire system, a specific application, or for groups of applications. For example, you could accept the YubiKey as an alternative to a password for local sessions, while requiring both for remote sessions. In addition to the Arch Wiki, You are encouraged to read <span class="plainlinks archwiki-template-man" title="$ man 8 pam"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam.8">pam(8)</a></span> and <span class="plainlinks archwiki-template-man" title="$ man 5 pam.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam.conf.5">pam.conf(5)</a></span> to understand how it works and how to configure it.
</p>
<p>There are several modules available which integrate YubiKey-supported protocols into PAM:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pam-u2f">pam-u2f</a></span> - Supports <a href="#U2F">#U2F</a> via the FIDO2 standard. If you are not sure which method to use, this one is a good choice.
<ul>
<li><a href="../en/Universal_2nd_Factor.html#Authentication_for_user_sessions" title="Universal 2nd Factor">Universal 2nd Factor#Authentication for user sessions</a></li>
<li>
<a rel="nofollow" class="external text" href="https://developers.yubico.com/pam-u2f/">Yubico's official docs</a>, including a list of supported module parameters.</li>
<li>Man Pages: <span class="plainlinks archwiki-template-man" title="$ man 8 pam_u2f"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam_u2f.8">pam_u2f(8)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 1 pamu2fcfg"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pamu2fcfg.1">pamu2fcfg(1)</a></span>
</li>
</ul>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=oath-toolkit">oath-toolkit</a></span> - Supports <a href="#OATH">#OATH</a> one-time passwords (either HOTP or TOTP)
<ul><li><a href="../en/Pam_oath.html" title="Pam oath">pam_oath</a></li></ul>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubico-pam">yubico-pam</a></span> - Supports <a href="#Yubico_OTP">#Yubico OTP</a> and challenge-response OTPs. Note that Yubico OTP mode requires a network connection to a validation server, while challenge-response mode does not.
<ul>
<li>
<a rel="nofollow" class="external text" href="https://developers.yubico.com/yubico-pam/">Yubico's official docs</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2025-03-15—HTTP 404]</sup>
</li>
<li>
<span class="plainlinks archwiki-template-man" title="$ man 8 pam_yubico"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pam_yubico.8">pam_yubico(8)</a></span> - Take note of the <code>mode</code> parameter, used to set challenge-response mode.</li>
</ul>
</li>
</ul>
<dl><dd><dl><dd><div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> yubico-pam <a rel="nofollow" class="external text" href="https://github.com/Yubico/yubico-pam">repository</a> on GitHub was archived on February 20, 2025.</div></dd></dl></dd></dl>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> Exercise caution when modifying PAM configuration files. Mistakes can render a system completely insecure, or so secure that no authentication is possible.</div>
<p>PAM configuration is beyond the scope of this article, but for a brief overview:
</p>
<ul>
<li>Create file(s) containing authorized keys, either in users' home directories or centrally.</li>
<li>Add a line in the appropriate place in the appropriate PAM configuration file which follows this format:</li>
</ul>
<pre>   auth [required|sufficient] [module_name].so [module arguments]
</pre>
<ul>
<li>
<code>auth required</code> for multifactor, <code>auth sufficient</code> for single factor.</li>
<li>
<code>module_name</code> - Example: <code>pam_u2f.so</code>. See a list of installed modules: <code>ls /usr/lib/security</code>
</li>
<li>Module configuration arguments are for things like the location of the keyfile, or which method the module should use for authentication.</li>
</ul>
<div class="mw-heading mw-heading4"><h4 id="SSH_notes">SSH notes</h4></div>
<ul>
<li>Yubico has provided <a rel="nofollow" class="external text" href="https://developers.yubico.com/yubico-pam/Yubikey_and_SSH_via_PAM.html">additional guidance</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2025-03-15—HTTP 404]</sup>. It is written for an old version of Ubuntu, but much of it still applies to an updated Arch system.</li>
<li>If you are configuring a distant server to use YubiKey, you should open at least one additional, rescue SSH session, so that you are not locked out if the configuration fails.</li>
<li>Check that <code>/etc/ssh/sshd_config</code> contains the following settings. The <code>sshd_config</code> shipped with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssh">openssh</a></span> has these set correctly by default.</li>
</ul>
<pre>   ChallengeResponseAuthentication no
   UsePAM yes
</pre>
<div class="mw-heading mw-heading3"><h3 id="Browser/web_integration">
<span id="Browser.2Fweb_integration"></span>Browser/web integration</h3></div>
<p>Many web services are beginning to support FIDO hardware tokens. See the <a href="../en/Universal_2nd_Factor.html" class="mw-redirect" title="U2F">U2F</a> and <a href="../en/WebAuthn.html" title="WebAuthn">WebAuthn</a> pages for more information, but usually the only thing you need to do is to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libfido2">libfido2</a></span> and <a rel="nofollow" class="external text" href="https://demo.yubico.com/webauthn-technical/registration">try it</a>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Tips_and_tricks">Tips and tricks</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Executing_actions_on_insertion/removal_of_YubiKey_device">
<span id="Executing_actions_on_insertion.2Fremoval_of_YubiKey_device"></span>Executing actions on insertion/removal of YubiKey device</h3></div>
<p>For example, you want to perform an action when you pull your YubiKey out of the USB slot, create the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/80-yubikey-actions.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="remove", ENV{ID_VENDOR}=="Yubico", ENV{ID_VENDOR_ID}=="1050", ENV{ID_MODEL_ID}=="0010|0111|0112|0113|0114|0115|0116|0401|0402|0403|0404|0405|0406|0407|0410", RUN+="''/usr/local/bin/script args''"
</pre>
<p>Please note, most keys are covered within this example but it may not work for all versions of YubiKey. You will have to look at the output of lsusb to get the vendor and model ID's, along with the description of the device or you could use udevadm to get information. Of course, to execute a script on insertion, you would change the action to 'add' instead of remove.
</p>
<div class="mw-heading mw-heading3"><h3 id="Start_Yubico_Authenticator_on_insertion">Start Yubico Authenticator on insertion</h3></div>
<p>The authenticator is a long-running GUI process. If run directly in a udev rule, the process would block udev's processing. If forked, udev would unconditionally kill the process after the event handling finishes. Thus you cannot start the authenticator from udev rules. However, systemd.device may be used to handle this case.
</p>
<p>Similar to above, create:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/80-yubikey-actions.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ENV{ID_VENDOR}=="Yubico", ENV{ID_VENDOR_ID}=="1050", ENV{ID_MODEL_ID}=="0010|0111|0112|0113|0114|0115|0116|0401|0402|0403|0404|0405|0406|0407|0410", SYMLINK+="yubikey", TAG+="systemd"
</pre>
<p>Then <a href="../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Create">create</a> a new systemd <a href="../en/User_unit.html" class="mw-redirect" title="User unit">user unit</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/yubioath-desktop.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Autostart Yubico Authenticator
# Uncomment if you want to stop the authenticator when unplugged.
#StopPropagatedFrom=dev-yubikey.device

[Install]
WantedBy=dev-yubikey.device

[Service]
Type=oneshot
ExecStart=/usr/bin/yubioath-desktop</pre>
<p>and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> it. <i>systemctl</i> would warn that it is added as a dependency to a non-existent unit <code>dev-yubikey.device</code>. But it is okay. Such unit will start existing once the YubiKey is plugged in.
</p>
<div class="mw-heading mw-heading2"><h2 id="Maintenance_/_upgrades">
<span id="Maintenance_.2F_upgrades"></span>Maintenance / upgrades</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Installing_the_OATH_Applet_for_a_YubiKey_NEO">Installing the OATH Applet for a YubiKey NEO</h3></div>
<p>These steps will allow you to install the OATH applet onto your YubiKey NEO. This allows the use of Yubico Authenticator in the Google Play Store.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> These steps are only for NEOs with a firmware version &lt;= 3.1.2. The current generation NEOs (with U2F) come with the OpenPGP applet already installed)</div>
<div class="mw-heading mw-heading4"><h4 id="Configure_the_NEO_as_a_CCID_device">Configure the NEO as a CCID device</h4></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> yubikey-personalization-gui is dead and its repository has been archived. Apparently <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-manager">yubikey-manager</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yubico-authenticator/">yubico-authenticator</a></span><sup><small>AUR</small></sup> are recommended alternatives. <a rel="nofollow" class="external autonumber" href="https://lists.archlinux.org/archives/list/aur-requests@lists.archlinux.org/message/FM3Y56EOSBFTO35UMYAWIKSKK45U2FLG/">[3]</a> (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:YubiKey.html">Talk:YubiKey</a>)</div>
</div>
<ol>
<li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=yubikey-personalization-gui">yubikey-personalization-gui</a></span>.</li>
<li>Add the udev rules and reboot so you can manage the YubiKey without needing to be root</li>
<li>Run <code>ykpersonalize -m82</code>, enter <code>y</code>, and hit enter.</li>
</ol>
<div class="mw-heading mw-heading4"><h4 id="Install_the_applet">Install the applet</h4></div>
<ol>
<li>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gpshell/">gpshell</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gppcscconnectionplugin/">gppcscconnectionplugin</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/globalplatform/">globalplatform</a></span><sup><small>AUR</small></sup>, and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pcsclite">pcsclite</a></span>.</li>
<li>
<a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> <code>pcscd.service</code>.</li>
<li>Download the most recent CAP file from the <a rel="nofollow" class="external text" href="https://developers.yubico.com/ykneo-oath/Releases/">ykneo-oath</a> site.</li>
<li>Download <code>gpinstall.txt</code> from <a rel="nofollow" class="external text" href="https://github.com/Yubico/ykneo-oath/blob/master/gpinstall.txt">GitHub</a>.</li>
<li>Edit the line in gpinstall.txt beginning with <code>install -file</code> to reflect the path where the CAP file is located.</li>
<li>Open a terminal and run <code>gpshell <i>path/to/gpinstall.txt</i></code>.</li>
<li>Ideally, a bunch of text will scroll by and it ends saying something like<pre>Command --&gt; 80E88013D7C000C400BE00C700CA00CA00B400BE00CE00D200D500D700B000DB00C700DF00BEFFFF00BE00E400AC00AE00AE00DB00E700A
A00EA00ED00ED00ED00BE00EF00F100F400F100F700FA00FF00BE00F700AA01010103010700CA00C400B400AA00F700B400AA00B600C7010C
010C00AA0140012001B0056810B0013005600000056810E0011006B4B44304B44404B44106B44B4405B443400343B002410636810E06B4B44
407326810B004B43103441003334002B102B404B3B403BB4003B440076820A4100221024405B4341008B44600000231066820A100
Wrapped command --&gt; 84E88013DFC000C400BE00C700CA00CA00B400BE00CE00D200D500D700B000DB00C700DF00BEFFFF00BE00E400AC00AE00AE00DB00E700A
A00EA00ED00ED00ED00BE00EF00F100F400F100F700FA00FF00BE00F700AA01010103010700CA00C400B400AA00F700B400AA00B600C7010C
010C00AA0140012001B0056810B0013005600000056810E0011006B4B44304B44404B44106B44B4405B443400343B002410636810E06B4B44
407326810B004B43103441003334002B102B404B3B403BB4003B440076820A4100221024405B4341008B44600000231066820A15D848CB77
27D0EDA00
Response &lt;-- 009000
Command --&gt; 80E60C002107A000000527210108A00000052721010108A000000527210101010003C901000000
Wrapped command --&gt; 84E60C002907A000000527210108A00000052721010108A000000527210101010003C9010000B4648127914A4C7C00
Response &lt;-- 009000
card_disconnect
release_context</pre>
</li>
<li>Unplug the NEO and try it with the Yubico Authenticator app.</li>
</ol>
<div class="mw-heading mw-heading4"><h4 id="(Optional)_Install_the_Yubico_Authenticator_desktop_client">
<span id=".28Optional.29_Install_the_Yubico_Authenticator_desktop_client"></span>(Optional) Install the Yubico Authenticator desktop client</h4></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> Package got merged into <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yubico-authenticator/">yubico-authenticator</a></span><sup><small>AUR</small></sup>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:YubiKey.html">Talk:YubiKey</a>)</div>
</div>
<p>You can get the desktop version of the Yubico Authenticator by installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yubioath-desktop/">yubioath-desktop</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>.
</p>
<p>While <code>pcscd.service</code> is running, run <code>yubioath-desktop</code> and insert your YubiKey when prompted.
</p>
<div class="mw-heading mw-heading2"><h2 id="Troubleshooting">Troubleshooting</h2></div>
<p>Restart, especially if you have completed updates since your YubiKey last worked. Do this even if some functions appear to be functioning.
</p>
<div class="mw-heading mw-heading3"><h3 id="YubiKey_not_acting_as_HID_device">YubiKey not acting as HID device</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> These steps are no longer necessary after <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/commit/d45ee2f31a8358db0accde2e7c81777cedadc3c2">systemd since v244</a> added native support for this functionality.</div>
<p>Add udev rule as described in <a rel="nofollow" class="external text" href="https://michaelheap.com/yubikey-on-arch/">this article</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-security-key.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">KERNEL=="hidraw*", SUBSYSTEM=="hidraw", MODE="0664", GROUP="users", ATTRS{idVendor}=="2581", ATTRS{idProduct}=="f1d0"</pre>
<p>Run <code>udevadm trigger</code> afterwards.
</p>
<div class="mw-heading mw-heading3"><h3 id="ykman_fails_to_connect_to_the_YubiKey">ykman fails to connect to the YubiKey</h3></div>
<p>If the manager fails to connect to the YubiKey, make sure you have started <code>pcscd.service</code> or <code>pcscd.socket</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Error:_Failed_connecting_to_YubiKey_5_[OTP+FIDO+CCID]._Make_sure_the_application_have_the_required_permissions.">
<span id="Error:_Failed_connecting_to_YubiKey_5_.5BOTP.2BFIDO.2BCCID.5D._Make_sure_the_application_have_the_required_permissions."></span>Error: Failed connecting to YubiKey 5 [OTP+FIDO+CCID]. Make sure the application have the required permissions.</h3></div>
<p>This can occur when using <code>ykman</code> to access the oath credentials on the device if <code>scdaemon</code> has already taken exclusive control of the device. <a rel="nofollow" class="external autonumber" href="https://github.com/Yubico/yubikey-manager/issues/35">[4]</a>
</p>
<p>To fix this you can set the <code>reader-port</code> option with the correct value for your device in <code>~/.gnupg/scdaemon.conf</code>. <a rel="nofollow" class="external autonumber" href="https://support.yubico.com/hc/en-us/articles/360013714479-Troubleshooting-Issues-with-GPG">[5]</a>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> This will cause the gpgagent to re-prompt you to unlock the YubiKey after each time you access the YubiKey through ykman.</div>
<p>For YubiKey NEO and YubiKey 4:
</p>
<pre>reader-port Yubico Yubikey
</pre>
<p>or for YubiKey 5:
</p>
<pre>reader-port Yubico Yubi
</pre>
<div class="mw-heading mw-heading3"><h3 id="YubiKey_fails_to_bind_within_a_guest_VM">YubiKey fails to bind within a guest VM</h3></div>
<p>Assuming the YubiKey is available to the guest, the issue results from a driver binding to the device on the host. To unbind the device, the bus and port information is needed from <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Dmesg">dmesg</a> on the host:
</p>
<pre># dmesg | grep -B1 Yubico | tail -n 2 | head -n 1 | sed -E 's/^\[[^]]+\] usb ([^:]*):.*/\1/'
</pre>
<p>The resulting USB id should be of the form <code>X-Y.Z</code> or <code>X-Y</code>. Then, on the host, use <code>find</code> to search <code>/sys/bus/usb/drivers</code> for which driver the YubiKey is binded to (e.g. <code>usbhid</code> or <code>usbfs</code>).
</p>
<pre>$ find /sys/bus/usb/drivers -name "*X-Y.Z*"
</pre>
<p>To unbind the device, use the result from the previous command (i.e. <code>/sys/bus/usb/drivers/<i>DRIVER</i>/X-Y.Z:1.0</code>):
</p>
<pre># echo 'X-Y.Z:1.0' &gt; /sys/bus/usb/drivers/<i>DRIVER</i>/unbind
</pre>
<div class="mw-heading mw-heading3"><h3 id="Error:_[key]_could_not_be_locally_signed_or_gpg:_No_default_secret_key:_No_public_key">
<span id="Error:_.5Bkey.5D_could_not_be_locally_signed_or_gpg:_No_default_secret_key:_No_public_key"></span>Error: [key] could not be locally signed or gpg: No default secret key: No public key</h3></div>
<p>Occurs when attempting to sign keys on a non-standard keyring while a YubiKey is plugged in, e.g. as <a href="../en/Pacman/Package_signing.html" title="Pacman/Package signing">Pacman</a> does in <code>pacman-key --populate</code>. The solution is to remove the offending YubiKey and start over.
</p>
<div class="mw-heading mw-heading3"><h3 id="YubiKey_disappears_and_reappears_in_Yubico_Authenticator">YubiKey disappears and reappears in Yubico Authenticator</h3></div>
<p>This happens when the CCID driver is not installed. You may need to <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ccid">ccid</a></span> package.
</p>
<div class="mw-heading mw-heading3"><h3 id="YubiKey_core_error:_timeout">YubiKey core error: timeout</h3></div>
<p>You are probably using the wrong slot. Try the other one.
</p>
<div class="mw-heading mw-heading3"><h3 id="gpg:_no_such_device">gpg: no such device</h3></div>
<p>gpg (scdaemon) tries to acquire exclusive access to the yubikey. It needs to be configured to use PSCS and use shared access.<a rel="nofollow" class="external autonumber" href="https://blog.apdu.fr/posts/2024/12/gnupg-and-pcsc-conflicts-episode-3/">[6]</a><a rel="nofollow" class="external autonumber" href="https://github.com/LudovicRousseau/PCSC/issues/65">[7]</a>
</p>
<p>Your configuration file should contain:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/scdaemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">disable-ccid
pcsc-shared
</pre>
<p>For old versions of GnuPG, the <code>pcsc-shared</code> option is not available. Only keep <code>disable-ccid</code> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>pcscd.service</code> as a workaround.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:OpenPGP.html" title="Category:OpenPGP">OpenPGP</a></li>
<li><a href="../en/Category:Smartcards.html" title="Category:Smartcards">Smartcards</a></li>
<li><a href="../en/Category:Universal_2nd_Factor.html" title="Category:Universal 2nd Factor">Universal 2nd Factor</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=YubiKey&amp;oldid=862099">https://wiki.archlinux.org/index.php?title=YubiKey&amp;oldid=862099</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 20 January 2026, at 00:44.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">YubiKey</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
