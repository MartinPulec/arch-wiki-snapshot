<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>XDG Desktop Portal - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-XDG_Desktop_Portal rootpage-XDG_Desktop_Portal skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Backends" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Backends">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Backends</div>
		</a>
		
			<button aria-controls="toc-Backends-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Backends subsection</span>
			</button>
		
		<ul id="toc-Backends-sublist" class="vector-toc-list">
			<li id="toc-List_of_backends_and_interfaces" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#List_of_backends_and_interfaces">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>List of backends and interfaces</div>
			</a>
			
			<ul id="toc-List_of_backends_and_interfaces-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Force_desktop_environment" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Force_desktop_environment">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Force desktop environment</div>
			</a>
			
			<ul id="toc-Force_desktop_environment-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-xdg-desktop-portal-wlr_does_not_start_automatically_on_sway" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#xdg-desktop-portal-wlr_does_not_start_automatically_on_sway">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>xdg-desktop-portal-wlr does not start automatically on sway</div>
			</a>
			
			<ul id="toc-xdg-desktop-portal-wlr_does_not_start_automatically_on_sway-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_multiple_monitors_with_xdg-desktop-portal-wlr" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_multiple_monitors_with_xdg-desktop-portal-wlr">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Using multiple monitors with xdg-desktop-portal-wlr</div>
			</a>
			
			<ul id="toc-Using_multiple_monitors_with_xdg-desktop-portal-wlr-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Poor_font_rendering_in_GTK_apps_on_KDE_Plasma" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Poor_font_rendering_in_GTK_apps_on_KDE_Plasma">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Poor font rendering in GTK apps on KDE Plasma</div>
			</a>
			
			<ul id="toc-Poor_font_rendering_in_GTK_apps_on_KDE_Plasma-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GTK_(possibly_others)_file_chooser_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GTK_(possibly_others)_file_chooser_not_working">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>GTK (possibly others) file chooser not working</div>
			</a>
			
			<ul id="toc-GTK_(possibly_others)_file_chooser_not_working-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">XDG Desktop Portal</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/XDG_%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97_%E3%83%9D%E3%83%BC%E3%82%BF%E3%83%AB" title="XDG デスクトップ ポータル – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/XDG_Desktop_Portal" title="XDG Desktop Portal – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Flatpak.html" title="Flatpak">Flatpak</a></li>
<li><a href="../en/PipeWire.html#WebRTC_screen_sharing" title="PipeWire">PipeWire#WebRTC screen sharing</a></li>
</ul>
</div>
<p>From the <a rel="nofollow" class="external text" href="https://docs.flatpak.org/en/latest/desktop-integration.html#portals">Flatpak documentation</a>:
</p>
<dl><dd>Portals are the framework for securely accessing resources from outside an application sandbox. They provide a range of common features to applications, including: Determining network status, opening a file with a file chooser, opening URIs, taking screenshots and screencasts [...]</dd></dl>
<p>Portals were designed for use with applications sandboxed through <a href="../en/Flatpak.html" title="Flatpak">Flatpak</a>, but any application can use portals to provide uniform access to features independent of desktops and toolkits. This is commonly used, for example, to <a href="../en/PipeWire.html#WebRTC_screen_sharing" title="PipeWire">allow screen sharing</a> on <a href="../en/Wayland.html" title="Wayland">Wayland</a> via <a href="../en/PipeWire.html" title="PipeWire">PipeWire</a>, or to <a href="../en/Firefox.html#KDE_integration" title="Firefox">use file open and save dialogs</a> on <a href="../en/Firefox.html" title="Firefox">Firefox</a> that use the same toolkit as your current <a href="../en/Desktop_environment.html" title="Desktop environment">desktop environment</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal">xdg-desktop-portal</a></span> and one or more <a href="#Backends">backends</a>. The package includes a <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a> service that will be automatically started via <a href="../en/D-Bus.html" title="D-Bus">D-Bus</a>.
</p>
<h2><span class="mw-headline" id="Backends">Backends</span></h2>
<p>When an application makes a request through a portal, it is handled by <code>xdg-desktop-portal</code>, which then forwards it to a backend implementation. This allows a clean way to provide suitable user interfaces that fit into different desktop environments, and access environment-specific APIs for requests like showing notifications or recording the screen. Multiple backends can be installed: for example, a <a href="../en/Sway.html" title="Sway">Sway</a> user may use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-wlr">xdg-desktop-portal-wlr</a></span> for screen sharing support and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gtk">xdg-desktop-portal-gtk</a></span> as a fallback for all other interfaces that <i>xdg-desktop-portal-wlr</i> does not implement.
</p>
<p>Portal backend definitions are located in <code>/usr/share/xdg-desktop-portal/portals/*.portal</code>. Each portal backend file contains a list of interfaces that it can handle, and the desktop environments that it can be used in.
</p>
<h3><span class="mw-headline" id="List_of_backends_and_interfaces">List of backends and interfaces</span></h3>
<p>The following table lists all backends available and their support for certain common interfaces.
</p>
<table class="wikitable">

<tbody>
<tr>
<th>Backend</th>
<th>File chooser</th>
<th>Screenshot and screen cast
</th>
</tr>
<tr>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-dde">xdg-desktop-portal-dde</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes, on <a href="../en/Deepin_Desktop_Environment.html" title="Deepin Desktop Environment">Deepin Desktop Environment</a>
</td>
</tr>
<tr>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gnome">xdg-desktop-portal-gnome</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes, on <a href="../en/GNOME.html" title="GNOME">GNOME</a>
</td>
</tr>
<tr>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gtk">xdg-desktop-portal-gtk</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No
</td>
</tr>
<tr>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-kde">xdg-desktop-portal-kde</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes, on <a href="../en/KDE.html" title="KDE">KDE</a>
</td>
</tr>
<tr>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-hyprland">xdg-desktop-portal-hyprland</a></span><sup>1</sup>
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes, on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wlroots">wlroots</a></span>
</td>
</tr>
<tr>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-lxqt">xdg-desktop-portal-lxqt</a></span></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No
</td>
</tr>
<tr>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-wlr">xdg-desktop-portal-wlr</a></span></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes, on <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wlroots">wlroots</a></span>
</td>
</tr>
<tr>
<td><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-xapp">xdg-desktop-portal-xapp</a></span></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes, on <a href="../en/Cinnamon.html" title="Cinnamon">Cinnamon</a>
</td>
</tr>
<tr>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xdg-desktop-portal-liri-git/">xdg-desktop-portal-liri-git</a></span><sup><small>AUR</small></sup>
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes, on <a href="../en/Liri.html" title="Liri">Liri</a>
</td>
</tr>
<tr>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xdg-desktop-portal-shana/">xdg-desktop-portal-shana</a></span><sup><small>AUR</small></sup>
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes<sup>2</sup>
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No
</td>
</tr>
<tr>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xdg-desktop-portal-td/">xdg-desktop-portal-td</a></span><sup><small>AUR</small></sup>
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No
</td>
</tr>
<tr>
<td>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xdg-desktop-portal-termfilechooser-git/">xdg-desktop-portal-termfilechooser-git</a></span><sup><small>AUR</small></sup>
</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Yes<sup>3</sup>
</td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">No
</td>
</tr>
</tbody>
</table>
<ol>
<li>works with all wlroots-based compositors, but provides extra functionality when used with <a href="../en/Hyprland.html" title="Hyprland">Hyprland</a> such as sharing individual windows.</li>
<li>redirects requests to GNOME/GTK/KDE/LXQt backends</li>
<li>allows using a <a href="../en/List_of_applications/Utilities.html#Console" title="List of applications/Utilities">terminal file manager</a> as a file chooser</li>
</ol>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>When a request is made, <code>xdg-desktop-portal</code> will use the <code>/usr/share/xdg-desktop-portal/<i>DE</i>-portals.conf</code> file, where <i>DE</i> is based on the <code>XDG_CURRENT_DESKTOP</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a>. These files are provided by the desktop environments themselves and determine which backends should be used when a specific environment is running.
</p>
<p>If you want to override the desktop environment defaults, or your desktop environment does not provide a default configuration, you may create a portal configuration file at <code>$XDG_CONFIG_HOME/xdg-desktop-portal/portals.conf</code> to determine which backends you want to use, either generally or for each individual interface. If you use multiple desktop environments, you may also create multiple <code>$XDG_CONFIG_HOME/xdg-desktop-portal/<i>DE</i>-portals.conf</code> files for each environment. 
</p>
<p>For example, if your desktop environment does not have a portal backend, and you want to use <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gtk">xdg-desktop-portal-gtk</a></span> as a generic fallback but also use the LXQt file picker through <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-lxqt">xdg-desktop-portal-lxqt</a></span>, you can use the following configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/xdg-desktop-portal/portals.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[preferred]
default=gtk
org.freedesktop.impl.portal.FileChooser=lxqt</pre>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 5 portals.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/portals.conf.5">portals.conf(5)</a></span> for more information.
</p>
<h3><span class="mw-headline" id="Force_desktop_environment">Force desktop environment</span></h3>
<p>In some cases, such as when you have a standalone <a href="../en/Window_manager.html" title="Window manager">window manager</a>, you might want to make <code>xdg-desktop-portal</code> to think you are using a specific desktop environment. This can be achieved by setting the <a href="../en/Environment_variables.html#Examples" class="mw-redirect" title="XDG CURRENT DESKTOP">XDG_CURRENT_DESKTOP</a> environment variable for the <code>xdg-desktop-portal.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a> using a <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in snippet">drop-in snippet</a>. For example, to use the backend associated with KDE:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/xdg-desktop-portal.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Environment="XDG_CURRENT_DESKTOP=KDE"</pre>
<p>If you create the file manually instead of using <a href="../en/Systemd.html#Editing_provided_units" title="Systemd">systemctl</a>, do a <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Daemon-reload">daemon-reload</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="xdg-desktop-portal-wlr_does_not_start_automatically_on_sway">xdg-desktop-portal-wlr does not start automatically on sway</span></h3>
<p>For <code>xdg-desktop-portal-wlr</code> to work, the <code>XDG_CURRENT_DESKTOP</code> and <code>WAYLAND_DISPLAY</code> environment variables have to be set in the <a href="../en/Systemd/User.html#Environment_variables" title="Systemd/User">systemd user session</a>. <code>XDG_CURRENT_DESKTOP</code> has to be set to the name of your compositor, e.g. <code>XDG_CURRENT_DESKTOP=sway</code>. <code>WAYLAND_DISPLAY</code> is set automatically by the compositor.
</p>
<p>Check whether these variables are set with <code>systemctl --user show-environment</code>. If they are not set, import these environment variables into the systemd user session and dbus by running the following commands after launching the compositor (e.g., include them in the compositor's configuration file).
</p>
<pre>$ systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
$ dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=<i>compositor_name</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <a href="../en/Sway.html" title="Sway">Sway</a> provides a drop-in file which does this automatically, see <a href="../en/Sway.html#Configuration" title="Sway">Sway#Configuration</a>.</div>
<p>See <a rel="nofollow" class="external autonumber" href="https://github.com/emersion/xdg-desktop-portal-wlr#running">[1]</a> and <a rel="nofollow" class="external autonumber" href="https://github.com/emersion/xdg-desktop-portal-wlr/wiki">[2]</a> for more details.
</p>
<h3><span class="mw-headline" id="Using_multiple_monitors_with_xdg-desktop-portal-wlr">Using multiple monitors with xdg-desktop-portal-wlr</span></h3>
<p><code>xdg-desktop-portal-wlr</code> requires an external chooser to select the shared monitor. By default, it looks for <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=slurp">slurp</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wofi">wofi</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bemenu">bemenu</a></span> in this order. When using <i>slurp</i>, after a request for screen sharing you will be presented with a crosshair cursor and you will need to click the screen you want to share. When using <i>wofi</i> or <i>bemenu</i>, you will be presented with a menu of available displays to share. If no choosers are available, <code>xdg-desktop-portal-wlr</code> will fallback to the first monitor found. For more information, see <span class="plainlinks archwiki-template-man" title="$ man 5 xdg-desktop-portal-wlr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xdg-desktop-portal-wlr.5#SCREENCAST_OPTIONS">xdg-desktop-portal-wlr(5) § SCREENCAST OPTIONS</a></span>.
</p>
<h3><span class="mw-headline" id="Poor_font_rendering_in_GTK_apps_on_KDE_Plasma">Poor font rendering in GTK apps on KDE Plasma</span></h3>
<p>Some GTK apps require <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gtk">xdg-desktop-portal-gtk</a></span> on Plasma in order to render font correctly. Install it and then run:
</p>
<pre>$ /usr/lib/xdg-desktop-portal --replace
</pre>
<h3>
<span id="GTK_.28possibly_others.29_file_chooser_not_working"></span><span class="mw-headline" id="GTK_(possibly_others)_file_chooser_not_working">GTK (possibly others) file chooser not working</span>
</h3>
<p>If the application runs on X via <code>xwayland</code> (easiest way to check is to run <code>xeyes</code> and see whether they follow the mouse over the application in question), then <code>xdg-desktop-portal-gtk</code> will show up on demand, but after you select the file nothing will happen. In that case adding <code>DISPLAY=:0</code> to the <code>xdg-desktop-portal-gtk</code> environment might help. To do this you can either follow the instructions above about <code>import-environment</code> or just edit the systemd user unit file of <code>xdg-desktop-portal-gtk</code>. Alternatively you can force the application under wayland (i.e if it's using <code>electron</code>).
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://flatpak.github.io/xdg-desktop-portal/">Project homepage</a></li>
<li>
<a rel="nofollow" class="external text" href="https://flatpak.github.io/xdg-desktop-portal/docs/">Portal Documentation</a>: Lists all APIs applications and backends can implement.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Freedesktop.org.html" title="Category:Freedesktop.org">Freedesktop.org</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=XDG_Desktop_Portal&amp;oldid=811811">https://wiki.archlinux.org/index.php?title=XDG_Desktop_Portal&amp;oldid=811811</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 3 July 2024, at 01:33.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
