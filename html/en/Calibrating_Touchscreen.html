<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Calibrating Touchscreen - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Calibrating_Touchscreen rootpage-Calibrating_Touchscreen skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Using_nVidia's_TwinView" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_nVidia's_TwinView">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Using nVidia's TwinView</div>
		</a>
		
			<button aria-controls="toc-Using_nVidia's_TwinView-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Using nVidia's TwinView subsection</span>
			</button>
		
		<ul id="toc-Using_nVidia's_TwinView-sublist" class="vector-toc-list">
			<li id="toc-Get_to_know_your_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Get_to_know_your_system">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Get to know your system</div>
			</a>
			
			<ul id="toc-Get_to_know_your_system-sublist" class="vector-toc-list">
				<li id="toc-Your_screen" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Your_screen">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>Your screen</div>
			</a>
			
			<ul id="toc-Your_screen-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Your_touch_device" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Your_touch_device">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>Your touch device</div>
			</a>
			
			<ul id="toc-Your_touch_device-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Touch_area" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Touch_area">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.3</span>Touch area</div>
			</a>
			
			<ul id="toc-Touch_area-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Calculate_the_Coordinate_Transformation_Matrix" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Calculate_the_Coordinate_Transformation_Matrix">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Calculate the Coordinate Transformation Matrix</div>
			</a>
			
			<ul id="toc-Calculate_the_Coordinate_Transformation_Matrix-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Apply_the_Matrix" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Apply_the_Matrix">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Apply the Matrix</div>
			</a>
			
			<ul id="toc-Apply_the_Matrix-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Do_it_automatically_via_a_udev_rule" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Do_it_automatically_via_a_udev_rule">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4</span>Do it automatically via a udev rule</div>
			</a>
			
			<ul id="toc-Do_it_automatically_via_a_udev_rule-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Wayland" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Wayland">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Wayland</div>
		</a>
		
		<ul id="toc-Wayland-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Using_libinput" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_libinput">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Using libinput</div>
			</a>
			
			<ul id="toc-Using_libinput-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Calibrating Touchscreen</span></h1>
				</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Touchscreen.html" title="Touchscreen">Touchscreen</a>.</b></p>
<div>
<b>Notes:</b> <span style="color:red;">please use the second argument of the template to provide more detailed indications.</span> (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Calibrating_Touchscreen.html">Talk:Calibrating Touchscreen</a>)</div>
</div>
<p>To use multiple displays (some of which are touchscreens), you need to tell Xorg the mapping between the touch surface and the screen. This can be done using <code>xinput</code> to set the touchscreen's coordinate transformation matrix.
</p>
<p>This is a guide to do that, the old-fashioned way, in cases when xrandr does not know about your separate screens because they have been merged into one (e.g., when using TwinView).  Everyone else, please go to <a href="../en/Touchscreen.html" title="Touchscreen">Touchscreen</a> to do it the easy way.
</p>
<p>You will need to run the <code>xinput</code> command every time you attach the monitor or log in. Or course, you can add the command to your session-autostart.
You can also use <a href="../en/Udev.html" title="Udev">Udev</a> to automate this.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Using_nVidia.27s_TwinView"></span><span class="mw-headline" id="Using_nVidia's_TwinView">Using nVidia's TwinView</span>
</h2>
<h3><span class="mw-headline" id="Get_to_know_your_system">Get to know your system</span></h3>
<h4><span class="mw-headline" id="Your_screen">Your screen</span></h4>
<p>Using TwinView, X will see all your Screens as one big screen. You can get your total height and width by executing
</p>
<pre>$ xrandr | grep \* # xrandr uses "*" to identify the screen being used
</pre>
<p>You should see a line like this:
</p>
<pre>3600x1230      50.0* 
</pre>
<p>what means, your total width is 3600 and your total height is 1230.
</p>
<h4><span class="mw-headline" id="Your_touch_device">Your touch device</span></h4>
<p>Your next job is to get your device's name. Execute
</p>
<pre>$ xinput list
</pre>
<p>and find it by its name. Find the item containing <code>[slave  pointer  (2)]</code>, which is usually your own device name. E.g. if the line can look like this
</p>
<pre>⎜   ↳ Acer T230H                              	id=24	[slave  pointer  (2)]
</pre>
<p>your device name is
</p>
<pre>Acer T230H
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If your device contains both a stylus and a touch screen and more touch devices, then please pay attention to the name when determining the device.</div>
<p>Execute
</p>
<pre>$ xinput list-props "<i>Device Name</i>"
</pre>
<p>and make sure there is a property called
</p>
<pre>Coordinate Transformation Matrix
</pre>
<p>If not, you probably selected the wrong device, use another one.
</p>
<h4><span class="mw-headline" id="Touch_area">Touch area</span></h4>
<p>You need to shrink your touch area into a rectangle which is smaller than the total screen. This means, you have to know four values:
</p>
<ul>
<li>Height of touch area</li>
<li>Width of touch area</li>
<li>horizontal offset (x offset) (amount of pixels between the left edge of your total screen and the left edge of your touch area)</li>
<li>vertical offset (y offset) (amount of pixels between the top edge of your total screen and the top edge of your touch area)</li>
</ul>
<h3><span class="mw-headline" id="Calculate_the_Coordinate_Transformation_Matrix">Calculate the Coordinate Transformation Matrix</span></h3>
<p>Now, calculate these as accurate as possible:
</p>
<ul>
<li>c0 = touch_area_width / total_width</li>
<li>c2 = touch_area_height / total_height</li>
<li>c1 = touch_area_x_offset / total_width</li>
<li>c3 = touch_area_y_offset / total_height</li>
</ul>
<p>The matrix is
</p>
<pre>[ c0 0  c1 ]
[ 0  c2 c3 ]
[ 0  0  1  ]
</pre>
<p>which is represented as a row-by-row array:
</p>
<pre>c0 0 c1 0 c2 c3 0 0 1
</pre>
<h3><span class="mw-headline" id="Apply_the_Matrix">Apply the Matrix</span></h3>
<p>Execute
</p>
<pre>$ xinput set-prop "<i>Device Name</i>" --type=float "Coordinate Transformation Matrix" <i>c0</i> 0 <i>c1</i> 0 <i>c2</i> <i>c3</i> 0 0 1
</pre>
<p>e.g.
</p>
<pre>$ xinput set-prop "Acer T230H" --type=float "Coordinate Transformation Matrix" 0.533333333 0 0 0 0.87804878 0.12195122 0 0 1
</pre>
<p>to calibrate your touchscreen device. Now, it should work properly.
</p>
<h3><span class="mw-headline" id="Do_it_automatically_via_a_udev_rule">Do it automatically via a udev rule</span></h3>
<p>Create a file something like <code>/etc/udev/rules.d/99-acer-touch.rules</code> with contents like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-acer-touch.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ENV{ID_VENDOR_ID}=="2149",ENV{ID_MODEL_ID}=="2703",ENV{WL_OUTPUT}="DVI1",ENV{LIBINPUT_CALIBRATION_MATRIX}="1 0 0  0 1 0"</pre>
<p>Substitute your own touchscreen's vendor ID, model ID, the xrandr output name, and the calibration matrix that you calculated above.  This is based on the assumption that you are using the libinput driver for your touchscreen.
</p>
<h2><span class="mw-headline" id="Wayland">Wayland</span></h2>
<p>Using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libinput">libinput</a></span> you can calibrate your touchscreen on Wayland compositors. See the <a rel="nofollow" class="external text" href="https://wayland.freedesktop.org/libinput/doc/latest/device-configuration-via-udev.html#static-device-configuration-via-udev">libinput documentation</a>.
</p>
<p>If you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=weston">weston</a></span> installed, you can use the <code>weston-calibrator</code> utility to get the transformation matrix. You can then apply it using a udev rule.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>If, after following these instructions, multiple clicks occur in different places when you touch the screen, you will need to build the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-server">xorg-server</a></span> package using the <a href="../en/Arch_build_system.html" class="mw-redirect" title="ABS">ABS</a>, applying <a rel="nofollow" class="external text" href="https://patchwork.freedesktop.org/patch/5024/">this patch</a> before you build the package. (This patch fails on the current xorg source, but the bug is present on at least 1 system.)
</p>
<h3><span class="mw-headline" id="Using_libinput">Using libinput</span></h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libinput">libinput</a></span> package provides a few utilities to debug input events:
</p>
<ul>
<li>The <code>libinput debug-events</code> command provides a list of events emitted by all devices, including the touchscreen driver. You can use the <code>--verbose</code> option to get more information.</li>
<li>
<code>libinput debug-gui</code> provides a graphical debug environment. This can be useful to verify visually that the transformation matrix has the correct values.</li>
<li>
<code>libinput list-devices</code> lists all input devices. This can be useful to identify the name and eventual attributes of an input device. Using this command you can also verify that the transformation matrix was applied correctly.</li>
</ul>
<p>For more information see the <a href="../en/Libinput.html#Troubleshooting" title="Libinput">troubleshooting section</a> of the <a href="../en/Libinput.html" title="Libinput">libinput</a> page.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external free" href="https://wiki.postmarketos.org/wiki/Screen_Calibration#Touch_screen">https://wiki.postmarketos.org/wiki/Screen_Calibration#Touch_screen</a></li>
<li><a rel="nofollow" class="external free" href="https://wayland.freedesktop.org/libinput/doc/latest/device-configuration-via-udev.html#static-device-configuration-via-udev">https://wayland.freedesktop.org/libinput/doc/latest/device-configuration-via-udev.html#static-device-configuration-via-udev</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Input_devices.html" title="Category:Input devices">Input devices</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Calibrating_Touchscreen&amp;oldid=787174">https://wiki.archlinux.org/index.php?title=Calibrating_Touchscreen&amp;oldid=787174</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 8 September 2023, at 07:17.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
