<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Citrix - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Citrix rootpage-Citrix skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Chromium/Google_Chrome" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Chromium/Google_Chrome">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Chromium/Google Chrome</div>
			</a>
			
			<ul id="toc-Chromium/Google_Chrome-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-wfica.desktop" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#wfica.desktop">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>wfica.desktop</div>
			</a>
			
			<ul id="toc-wfica.desktop-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-TLS/SSL_Certificates" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#TLS/SSL_Certificates">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>TLS/SSL Certificates</div>
		</a>
		
		<ul id="toc-TLS/SSL_Certificates-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Audio_Support" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Audio_Support">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Audio Support</div>
		</a>
		
			<button aria-controls="toc-Audio_Support-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Audio Support subsection</span>
			</button>
		
		<ul id="toc-Audio_Support-sublist" class="vector-toc-list">
			<li id="toc-Pulse_Audio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pulse_Audio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Pulse Audio</div>
			</a>
			
			<ul id="toc-Pulse_Audio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Pipewire" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pipewire">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Pipewire</div>
			</a>
			
			<ul id="toc-Pipewire-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Endpoint_Analysis_(EPA)" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Endpoint_Analysis_(EPA)">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Endpoint Analysis (EPA)</div>
		</a>
		
		<ul id="toc-Endpoint_Analysis_(EPA)-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Microsoft_Teams_audio_redirection_troubleshooting" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Microsoft_Teams_audio_redirection_troubleshooting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Microsoft Teams audio redirection troubleshooting</div>
			</a>
			
			<ul id="toc-Microsoft_Teams_audio_redirection_troubleshooting-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Citrix</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Citrix" title="Citrix â€“ æ—¥æœ¬èªž" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>æ—¥æœ¬èªž</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Citrix.html">Talk:Citrix</a>)</div>
</div>
<p><a href="https://en.wikipedia.org/wiki/Citrix_Workspace_App" class="extiw" title="wikipedia:Citrix Workspace App">Citrix Workspace App</a> (previously known as Citrix Receiver and ICA Client) is the client component of <a href="https://en.wikipedia.org/wiki/XenDesktop" class="extiw" title="wikipedia:XenDesktop">XenDesktop</a> (desktop virtualization software) and <a href="https://en.wikipedia.org/wiki/XenApp" class="extiw" title="wikipedia:XenApp">XenApp</a> (application virtualization software), developed by <a href="https://en.wikipedia.org/wiki/Citrix_Systems" class="extiw" title="wikipedia:Citrix Systems">Citrix Systems</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/icaclient/">icaclient</a></span><sup><small>AUR</small></sup> package. It includes the <code>wfica.desktop</code> file, so Arch knows how to open ica files.
</p>
<h3>
<span id="Chromium.2FGoogle_Chrome"></span><span class="mw-headline" id="Chromium/Google_Chrome">Chromium/Google Chrome</span>
</h3>
<p>If you have problems launching Citrix applications with Chromium, just go to <code>chrome://extensions</code> and disable "Citrix Receiver for Linux".
</p>
<h3><span class="mw-headline" id="wfica.desktop">wfica.desktop</span></h3>
<p>Create <code>/usr/share/applications/wfica.desktop</code> (Exec path may vary based on package installed):
</p>
<pre>[Desktop Entry]
Name=Citrix ICA client
Comment="Launch Citrix applications from .ica files"
Categories=Network;
Exec=/opt/Citrix/ICAClient/wfica
Terminal=false
Type=Application
NoDisplay=true
MimeType=application/x-ica;</pre>
<p>Now <code>xdg-open</code> will handle .ica extensions using <code>/opt/Citrix/ICAClient/wfica</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you are running Xfce and Chromium is opening the .ica files in the wrong application (e.g. a text editor), make sure you have <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xprop">xorg-xprop</a></span> installed.</div>
<h2>
<span id="TLS.2FSSL_Certificates"></span><span class="mw-headline" id="TLS/SSL_Certificates">TLS/SSL Certificates</span>
</h2>
<p>Because ICAClient uses SSL you may need a security certificate to connect to the server, check with the server administrator. If there is a certificate download and place it in <code>/usr/lib/ICAClient/keystore/cacerts/</code>.
</p>
<p>You may then receive the error <code>You have not chosen to trust the issuer of the server's security certificate. (SSL Error 61)</code>.
</p>
<p>There may be several reasons for this:
</p>
<dl>
<dt>You do not have the root Certificate Authority (CA) certificates.</dt>
<dd>These are already installed on most systems, they are part of the core package <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ca-certificates">ca-certificates</a></span>, but they are not where ICAClient looks for them. Since versions 13.1, Citrix needs the certificates in separate files. You need to run the following commands as root:</dd>
</dl>
<pre># cd /opt/Citrix/ICAClient/keystore/cacerts/
# cp /etc/ca-certificates/extracted/tls-ca-bundle.pem .
# awk 'BEGIN {c=0;} /BEGIN CERT/{c++} { print &gt; "cert." c ".pem"}' &lt; tls-ca-bundle.pem</pre>
<dl>
<dd>You may also need to download your CA's intermediate certificates and store them in the same directory.</dd>
<dd>Changes to your certificate directory will likely require rehashing links for openssl to find them properly. Skipping this step might result in Citrix still giving certificate errors. To do this, use this command (borrowed from <a rel="nofollow" class="external autonumber" href="https://help.ubuntu.com/community/CitrixICAClientHowTo#A5._Add_more_SSL_certificates">[1]</a>)</dd>
</dl>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> After the last [April 2018] openssl upgrade, the <i>c_rehash</i> command is broken in Arch. [unless the command has not been deprecated upstream, this should be a <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/">bug report</a>] (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Citrix.html">Talk:Citrix</a>)</div>
</div>
<dl><dd><pre># c_rehash /opt/Citrix/ICAClient/keystore/cacerts/</pre></dd></dl>
<p>Instead of using <code>c_rehash</code> which no longer works the <code>openssl rehash</code> command can be used instead. 
</p>
<dl><dd><pre># openssl rehash /opt/Citrix/ICAClient/keystore/cacerts/</pre></dd></dl>
<h2><span class="mw-headline" id="Audio_Support">Audio Support</span></h2>
<h3><span class="mw-headline" id="Pulse_Audio">Pulse Audio</span></h3>
<p>Citrix Receiver uses <a href="https://en.wikipedia.org/wiki/Advanced_Linux_Sound_Architecture" class="extiw" title="wikipedia:Advanced Linux Sound Architecture">ALSA</a>. If you use <a href="https://en.wikipedia.org/wiki/Pulse_Audio" class="extiw" title="wikipedia:Pulse Audio">Pulse Audio</a>, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span>.
</p>
<p>To get audio input into Citrix Receiver, in <code>~/.ICAClient/wfclient.ini</code>, add <code>AllowAudioInput=True</code> anywhere in the <code>[WFClient]</code> section.
</p>
<p>As of client 2012 - December 2020 Citrix has introduced additional audio redirection: <a rel="nofollow" class="external free" href="https://docs.citrix.com/en-us/citrix-workspace-app-for-linux/configure-xenapp.html#audio">https://docs.citrix.com/en-us/citrix-workspace-app-for-linux/configure-xenapp.html#audio</a> .
If your audio device is no longer detected within the Citrix Workspace App, you may need to disable this new functionality following the instructions provided.
</p>
<h3><span class="mw-headline" id="Pipewire">Pipewire</span></h3>
<p>Pipewire - although not officially supported - interacts with Citrix much in the same way Pulse Audio does. Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-alsa">pipewire-alsa</a></span> to allow Citrix to redirect audio and make sure you have <code>AllowAudioInput=True</code> in your <code>~/.ICAClient/wfclient.ini</code> like described above.
</p>
<p>Citrix also checks for the <code>/usr/bin/pulseaudio</code> binary to be present on the system and aborts audio redirection otherwise. For this reason you also need to create a dummy executable with the following content<a rel="nofollow" class="external autonumber" href="https://lists.opensuse.org/archives/list/factory@lists.opensuse.org/message/P3BQM6LE2JSJXSYVE6TF7D52NRETIB6O/">[2]</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/bin/pulseaudio</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
if [ "$1" == "--version" ]; then
    pactl info | grep Server\ Name | sed -e "s/Server Name: //"
else
    echo "This is a dummy file for apps that check if pulseaudio is available by checking for the binary existing"
fi</pre>
<p>Make it <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>.
</p>
<h2>
<span id="Endpoint_Analysis_.28EPA.29"></span><span class="mw-headline" id="Endpoint_Analysis_(EPA)">Endpoint Analysis (EPA)</span>
</h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Numerous style issues. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Citrix.html">Talk:Citrix</a>)</div>
</div>
<p>If your company has activated the optional endpoint analysis to check if your computer meets certain requirements, you will have to install another component, the EPA-Plugin. It seems like it was a browser plugin using the legacy NPAPI, but now it is just an application the browser calls with a protocol handler for "nsgcepa://". Here is what you have to do to get it running:
</p>
<ul><li>Step 1. Download the EPA plugin from your company's Citrix gateway. Opening the URL of your company's Citrix gateway will try to start the endoint check immediately, which (of course) fails, because you have not installed the EPA plugin, yet. Under the error message you will see a button for downloading <code>nsepa.deb</code>. Download it.</li></ul>
<ul><li>Step 2. Transform the Debian package into an Arch package with debtap. You might need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/debtap/">debtap</a></span><sup><small>AUR</small></sup> first. <pre># debtap nsepa.deb</pre> Call the package "nsepa" and use the suggested version. Install it like so: <pre># pacman -U nsepa-1.0.0.35-1-x86_64.pkg.tar.xz</pre>
</li></ul>
<p>Recent versions of the EPA are linked to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libcurl-gnutls">libcurl-gnutls</a></span> and you are done now. Unfortunately your company might use and old version that has the following problem:
</p>
<pre>$ ldd /opt/Citrix/Browser-EPA/nsgcepa
/opt/Citrix/Browser-EPA/nsgcepa: /usr/lib/libcurl.so.4: version `CURL_OPENSSL_3' not found (required by /opt/Citrix/Browser-EPA/nsgcepa)
	linux-vdso.so.1 (0x00007fff33f4f000)
	libX11.so.6 =&gt; /usr/lib/libX11.so.6 (0x00007fe4401d9000)
        [...]</pre>
<p>As you can see, the nsgcepa executable (which is the main executable of nsepa) has been linked to a libcurl.so.4 that contains the "CURL_OPENSSL_3" symbol. I think this is a patched version from Ubuntu and I could not find an Arch package providing it, not even <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libcurl-compat">libcurl-compat</a></span>. Unfortunately you have to find an appropriate lib for yourself. I found one in the Steam runtime under <code>~/.local/share/Steam/ubuntu12_32/steam-runtime/usr/lib/x86_64-linux-gnu</code>.
</p>
<ul><li>Troubleshooting-Step 1. Create a directory for patched library files and copy libcurl.so.4 into it. Also copy dependencies.</li></ul>
<pre># mkdir /opt/Citrix/lib
$ cd ~/.local/share/Steam/ubuntu12_32/steam-runtime/usr/lib/x86_64-linux-gnu
# cp libcurl.so.4 /opt/Citrix/lib
# cp libhogweed.so.4 libnettle.so.6 librtmp.so.0 libidn.so.11 /opt/Citrix/lib
</pre>
<ul><li>Troubleshooting-Step 2. In order to use these libs instead of your system's libs, we have to fiddle with the way nsgcepa is being called. There is a .desktop file provided in the nsepa package for that: <code>/opt/Citrix/Browser-EPA/nsgcepa.desktop</code>. Change the Exec line to: <pre>Exec=env LD_LIBRARY_PATH=/opt/Citrix/lib LD_PRELOAD=/opt/Citrix/lib/libcurl.so.4 /opt/Citrix/Browser-EPA/nsgcepa</pre>
</li></ul>
<ul><li>Troubleshooting-Step 3. The .desktop file had already been copied to where the system expects it to be: <code>/usr/share/applications/</code>. Overwrite it with your new one. <pre>$ cp /opt/Citrix/Browser-EPA/nsgcepa.desktop /usr/share/applications/</pre>
</li></ul>
<p>
Now go to you company's Citrix URL again. The EPA should run. If it does not, you should check if the protocol handler for "nsgcepa://" works:</p>
<pre>$ xdg-open nsgcepa://something.com</pre>
<p> If it answers "gio: nsgcepa://something.com: The specified location is not supported" or "klauncher said: Unknown protocol 'nsgcepa'" you need to add the protocol handler manually: </p>
<pre>$ xdg-mime default nsgcepa.desktop x-scheme-handler/nsgcepa</pre>
<p>If the EPA still fails you should ask your company's Citrix Netscaler admins if they have disabled Linux logins completely. It seems like there is no corresponding error message for that case, instead the error message is the same as if you do not have installed the EPA plugin at all.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<ul><li>If you have issues opening a Citrix connection under Firefox you may need to set the Citrix Receiver plugin to 'Always Activate' under the Firefox Add-ons Manager plugin settings.</li></ul>
<ul><li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perl-file-mimeinfo">perl-file-mimeinfo</a></span> may be required to correctly interpret the .ica file mimeinfo and open it as per the setup in wfica.desktop</li></ul>
<ul><li>If you have cursor alignment issues under Citrix and you have multiple displays connected to your machine you may need to disable all but one when using Citrix.</li></ul>
<ul><li>If you have sticky Control Ctrl key issues after logging to session you may resolve it using this <a rel="nofollow" class="external text" href="https://looselytyped.blogspot.com/2014/08/fixing-sticky-control-key-issues-with.html">guide</a>
</li></ul>
<ul><li>On <a href="../en/I3.html" title="I3">i3</a>, Citrix might go full screen and grab all keyboard input. A workaround is to disable full screen mode. See <a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=242398">https://bbs.archlinux.org/viewtopic.php?id=242398</a>.</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.ICAClient/All_Regions.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Virtual Channels\Seamless Windows]
TWIMode=0

[Virtual Channels\Thinwire Graphics]
DesiredColor=8
ApproximateColors=*
DesiredHRES=1024
DesiredVRES=768
ScreenPercent=*
UseFullScreen=false
TWIFullScreenMode=false
NoWindowManager=false</pre>
<ul><li>If <code>Alt+Tab</code> does not work in a remote Citrix session on GNOME Wayland, these two settings will enable key passthrough.</li></ul>
<pre>$ gsettings set org.gnome.mutter.wayland xwayland-grab-access-rules "['Wfica']"
$ gsettings set org.gnome.mutter.wayland xwayland-allow-grabs true
</pre>
<ul><li>If ICAClient is flooding the <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journal">journal</a> with error messages, a simple fix is to disable all logging in Citrix Workspace Preferences.</li></ul>
<ul><li>If your timezone inside the VDI is reset to UTC when starting session from Firefox, you might need to go to <code>about:config</code> and set <code>privacy.resistFingerprinting=false</code>. This feature spoofs the browser's timezone to UTC which is then redirected to the Citrix session.</li></ul>
<p>Note: at the time of writing the <code>privacy.resistFingerprinting.exemptedDomains</code> setting cannot be used to exclude your company's self-service portal because it's still under testing and not fully working. This might not be the case in the future anymore.
</p>
<h3><span class="mw-headline" id="Microsoft_Teams_audio_redirection_troubleshooting">Microsoft Teams audio redirection troubleshooting</span></h3>
<ul><li>If audio devices are detected by Windows inside the VDI but not by MS Teams, check whether the HdxRtcEngine process is running on your client machine:</li></ul>
<pre>$ ps -ef | grep HdxRtcEngine</pre>
<p>If not, the process might have crashed. Look for any libraries that are not installed or loaded from the wrong path:
</p>
<pre>$ ldd /opt/Citrix/ICAClient/util/HdxRtcEngine</pre>
<p>In most cases you might be missing some of them. In particular <code>libunwind</code> might be installed in a different path from the one Citrix is trying to load it from. In such case execute the following to fix that:
</p>
<pre># ln -s /usr/lib/libunwind.so /usr/lib/libunwind.so.1</pre>
<p>Another thing that might be crashing the <code>HdxRtcEngine</code> process is an incompatible version (at the time of writing) of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gpsd">gpsd</a></span>. Downgrading to version 3.18-2 from the <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">Arch Linux Archive</a> may fix the issue:
</p>
<pre># pacman -U <a rel="nofollow" class="external free" href="https://archive.org/download/archlinux_pkg_gpsd/gpsd-3.18-2-x86_64.pkg.tar.xz">https://archive.org/download/archlinux_pkg_gpsd/gpsd-3.18-2-x86_64.pkg.tar.xz</a></pre>
<p>Note: you don't actually need to start the <code>gpsd</code> service, but only have a compatible <code>libgps</code> installed.
</p>
<ul><li>When starting sessions from Firefox, calls are interrupting after a few minutes or audio is dropping, it might be related to resource limits set by Firefox and inherited by the Citrix processes. You can check that by running <code>$ prlimit --rttime --pid=$(pgrep HdxRtcEngine)</code> while a session is running. If the soft or hard limits show anything different than unlimited (default on most systems) you might have to run <code># prlimit --rttime=unlimited --pid=$(pgrep HdxRtcEngine)</code> to fix that. Note that limits are reset when you close and reopen a session so you'll have to set them every time.</li></ul>
<p>Alternatively you can just start your session from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=chromium">chromium</a></span> or other Chromium based browsers.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Citrix&amp;oldid=811709">https://wiki.archlinux.org/index.php?title=Citrix&amp;oldid=811709</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 July 2024, at 08:09.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
