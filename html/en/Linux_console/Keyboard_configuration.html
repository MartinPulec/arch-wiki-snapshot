<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Linux console/Keyboard configuration - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Linux_console_Keyboard_configuration rootpage-Linux_console skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Viewing_keyboard_settings" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Viewing_keyboard_settings">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Viewing keyboard settings</div>
		</a>
		
		<ul id="toc-Viewing_keyboard_settings-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Keymaps" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Keymaps">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Keymaps</div>
		</a>
		
			<button aria-controls="toc-Keymaps-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Keymaps subsection</span>
			</button>
		
		<ul id="toc-Keymaps-sublist" class="vector-toc-list">
			<li id="toc-Listing_keymaps" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Listing_keymaps">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Listing keymaps</div>
			</a>
			
			<ul id="toc-Listing_keymaps-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Loadkeys" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Loadkeys">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Loadkeys</div>
			</a>
			
			<ul id="toc-Loadkeys-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Persistent_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Persistent_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Persistent configuration</div>
			</a>
			
			<ul id="toc-Persistent_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Creating_a_custom_keymap" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Creating_a_custom_keymap">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Creating a custom keymap</div>
			</a>
			
			<ul id="toc-Creating_a_custom_keymap-sublist" class="vector-toc-list">
				<li id="toc-Adding_directives" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Adding_directives">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.1</span>Adding directives</div>
			</a>
			
			<ul id="toc-Adding_directives-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Other_examples" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Other_examples">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.2</span>Other examples</div>
			</a>
			
			<ul id="toc-Other_examples-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Saving_changes" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Saving_changes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.3</span>Saving changes</div>
			</a>
			
			<ul id="toc-Saving_changes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Adjusting_typematic_delay_and_rate" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Adjusting_typematic_delay_and_rate">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Adjusting typematic delay and rate</div>
		</a>
		
			<button aria-controls="toc-Adjusting_typematic_delay_and_rate-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Adjusting typematic delay and rate subsection</span>
			</button>
		
		<ul id="toc-Adjusting_typematic_delay_and_rate-sublist" class="vector-toc-list">
			<li id="toc-Systemd_service" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Systemd_service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Systemd service</div>
			</a>
			
			<ul id="toc-Systemd_service-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Layout_switching" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Layout_switching">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Layout switching</div>
		</a>
		
		<ul id="toc-Layout_switching-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Linux console/Keyboard configuration</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 7 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-7" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">7 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-es mw-list-item"><a href="../../es/Linux_console/Keyboard_configuration.html" title="Linux console (Español)/Keyboard configuration – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../../fr/Linux_console/Keyboard_configuration.html" title="Linux console (Français)/Keyboard configuration – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Linux_%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB/%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E8%A8%AD%E5%AE%9A" title="Linux コンソール/キーボード設定 – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../../pt/Linux_console/Keyboard_configuration.html" title="Linux console (Português)/Keyboard configuration – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../../ru/Linux_console/Keyboard_configuration.html" title="Linux console (Русский)/Keyboard configuration – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-tr mw-list-item"><a href="../../tr/Linux_console/Keyboard_configuration.html" title="Linux console (Türkçe)/Keyboard configuration – Türkçe" lang="tr" hreflang="tr" class="interlanguage-link-target"><span>Türkçe</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Linux_console/Keyboard_configuration" title="Linux console/Keyboard configuration – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../en/Linux_console.html" title="Linux console">Linux console</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../../en/Xorg/Keyboard_configuration.html" title="Xorg/Keyboard configuration">Xorg/Keyboard configuration</a></li>
<li><a href="../../en/Keyboard_input.html" title="Keyboard input">Keyboard input</a></li>
<li><a href="../../en/Linux_console.html#Fonts" title="Linux console">Linux console#Fonts</a></li>
</ul>
</div>
<p>Keyboard mappings (keymaps), console fonts and console maps for the <a href="../../en/Linux_console.html" title="Linux console">Linux console</a> are provided by the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kbd">kbd</a></span> package (a dependency of <a href="../../en/Systemd.html" title="Systemd">systemd</a>), which also provides many low-level tools for managing the text console. In addition, <i>systemd</i> provides the <i>localectl</i> tool, which can control both the system <a href="../../en/Locale.html" title="Locale">locale</a> and keyboard layout settings for both the console and Xorg.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Viewing_keyboard_settings">Viewing keyboard settings</span></h2>
<p>Use <code>localectl status</code> to view the current keyboard configuration.
</p>
<h2><span class="mw-headline" id="Keymaps">Keymaps</span></h2>
<p>The <i>keymap</i> files are stored in the <code>/usr/share/kbd/keymaps/</code> directory tree. A keymap file fully describes the keyboard layout, possibly with symbols for different languages and <a href="#Layout_switching">layout switching</a> is simulated via <code>AltGr_Lock</code> <i>keysym</i> usage.
</p>
<p>The <code>include</code> statement can be used to share common parts of keymap files. Where to look for an include file is described in the <a rel="nofollow" class="external text" href="https://github.com/legionus/kbd/blob/f3faba1640e877f8c141a7f8790e650c075360d6/src/libkeymap/analyze.l#L76">source code</a> only. 
</p>
<p>For more details see <span class="plainlinks archwiki-template-man" title="$ man 5 keymaps"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/keymaps.5">keymaps(5)</a></span>.
</p>
<h3><span class="mw-headline" id="Listing_keymaps">Listing keymaps</span></h3>
<p>The naming conventions of console keymaps are somewhat arbitrary, but usually they are based on:
</p>
<ul>
<li>
<a href="https://en.wikipedia.org/wiki/ISO_639-1" class="extiw" title="wikipedia:ISO 639-1">Language codes</a>: where the language code is the same as its country code (e.g. <code>de</code> for German, or <code>fr</code> for French).</li>
<li>
<a href="https://en.wikipedia.org/wiki/Country_code" class="extiw" title="wikipedia:Country code">Country codes</a>: where variations of the same language are used in different countries (e.g.<code>uk</code> for United Kingdom English, or <code>us</code> for United States English); a list of country codes can also be found in <a href="https://en.wikipedia.org/wiki/ISO_3166-1#Codes" class="extiw" title="wikipedia:ISO 3166-1">wikipedia:ISO 3166-1#Codes</a>.</li>
<li>
<a href="https://en.wikipedia.org/wiki/Keyboard_layout" class="extiw" title="wikipedia:Keyboard layout">Keyboard layouts</a>: where the layout is not related to a particular country or language (e.g. <code>dvorak</code> for the <a href="https://en.wikipedia.org/wiki/Dvorak_Simplified_Keyboard" class="extiw" title="wikipedia:Dvorak Simplified Keyboard">Dvorak keyboard layout</a>).</li>
</ul>
<p>For a list of all the available keymaps, use the command:
</p>
<pre>$ localectl list-keymaps
</pre>
<p>To search for a keymap, use the following command, replacing <code><i>search_term</i></code> with the code for your language, country, or layout:
</p>
<pre>$ localectl list-keymaps | grep -i <i>search_term</i>
</pre>
<p>Alternatively, using find:
</p>
<pre>$ find /usr/share/kbd/keymaps/ -type f -name "*<i>search_term</i>*"
</pre>
<h3><span class="mw-headline" id="Loadkeys">Loadkeys</span></h3>
<p>It is possible to set a keymap just for the current session. This is useful for testing different keymaps, solving problems etc. The <i>loadkeys</i> tool is used for this purpose:
</p>
<pre># loadkeys <i>keymap</i>
</pre>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 1 loadkeys"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/loadkeys.1">loadkeys(1)</a></span> for details. The same tool is used internally by <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-vconsole-setup"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-vconsole-setup.8">systemd-vconsole-setup(8)</a></span> when loading the keymap configured in <code>/etc/vconsole.conf</code>.
</p>
<h3><span class="mw-headline" id="Persistent_configuration">Persistent configuration</span></h3>
<p>A persistent keymap can be set in <code>/etc/vconsole.conf</code>, which is read by <a href="../../en/Systemd.html" title="Systemd">systemd</a> on start-up. The <code>KEYMAP</code> variable is used for specifying the keymap. If the variable is empty or not set, the <code>us</code> keymap is used as default value. See <span class="plainlinks archwiki-template-man" title="$ man 5 vconsole.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vconsole.conf.5">vconsole.conf(5)</a></span> for all options. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/vconsole.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">KEYMAP=<i>uk</i></pre>
<p>For convenience, <i>localectl</i> may be used to set the console keymap. It will change the <code>KEYMAP</code> variable in <code>/etc/vconsole.conf</code> and also set the keymap for the current session:
</p>
<pre># localectl set-keymap --no-convert <i>keymap</i>
</pre>
<p>The <code>--no-convert</code> option can be used to prevent <code>localectl</code> from automatically changing the <a href="../../en/Xorg/Keyboard_configuration.html" class="mw-redirect" title="Keyboard configuration in Xorg">Xorg keymap</a> to the nearest match. See <span class="plainlinks archwiki-template-man" title="$ man 1 localectl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/localectl.1">localectl(1)</a></span> for more information.
</p>
<p>If required, the keymap from <code>/etc/vconsole.conf</code> can be loaded during early userspace by the <code>keymap</code> <a href="../../en/Mkinitcpio.html#Common_hooks" title="Mkinitcpio">mkinitcpio hook</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>If you saved your custom keymap somewhere other than <code>/usr/share/kbd/keymaps/</code>, it must be specified by a full path to the file in <code>vconsole.conf</code> or when using the <i>localectl</i> command above.</li>
<li>The <code>XKB<i>*</i></code> variables in <code>/etc/vconsole.conf</code> are for <a href="../../en/Xorg/Keyboard_configuration.html" title="Xorg/Keyboard configuration">Xorg/Keyboard configuration</a>. <i>loadkeys</i> does not yet support using them; see <a rel="nofollow" class="external text" href="https://github.com/legionus/kbd/issues/72">kbd issue 72</a>. And neither does Xorg.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Creating_a_custom_keymap">Creating a custom keymap</span></h3>
<p>When using the console, you can use hotkeys to print a specific character. Moreover we can also print a sequence of characters and some escape sequences. Thus, if we print the sequence of characters constituting a command and afterwards an escape character for a new line, that command will be executed.
</p>
<p>One method of doing this is editing the keymap file. However, since it will be rewritten anytime the package it belongs to is updated, editing this file is discouraged. It is better to integrate the existing keymap with a personal keymap. The <code>loadkeys</code> utility can do this.
</p>
<p>First, create a keymap file. This keymap file can be anywhere, but one method is to mimic the directory hierarchy in <code>/usr/local</code>: <a href="../../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Create">create</a> the <code>/usr/local/share/kbd/keymaps</code> directory, then <a href="../../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Textedit">edit</a> <code>/usr/local/share/kbd/keymaps/personal.map</code>.
</p>
<p>As a side note, it is worth noting that such a personal keymap is useful also to redefine the behaviour of keys already treated by the default keymap: when loaded with <code>loadkeys</code>, the directives in the default keymap will be replaced when they conflict with the new directives and conserved otherwise. This way, only changes to the keymap must be specified in the personal keymap.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>You can also edit an existing keymap located in the <code>/usr/share/kbd/keymaps/</code> directory tree. Keymaps have an <i>.map.gz</i> extension, for example <code>us.map.gz</code> is an American keymap. Just copy the keymap to <code>/usr/local/share/kbd/keymaps/personal.map.gz</code> and <i>gunzip</i> it.</li>
<li>The custom keymap can be made persistent by setting it in <code>/etc/vconsole.conf</code>. Given this, if you use the <code>sd-vconsole</code> <a href="../../en/Mkinitcpio.html#Common_hooks" title="Mkinitcpio">mkinitcpio hook</a> instead of <code>keymap</code>, you could place your custom keymap file in <code>/usr/share/kbd/keymaps/</code>. This way its dependencies from <code>/usr/share/kbd/keymaps</code> will be automatically added to the initial ramdisk image by the hook. On the other hand, if you place your custom keymap file under <code>/usr/local/</code>, then its dependencies will need to be manually specified in the <code>FILES</code> array in <code>mkinitcpio.conf</code>.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Adding_directives">Adding directives</span></h4>
<p>Two kinds of directives are required in this personal keymap. First of all, the <a href="../../en/Extra_keyboard_keys.html" title="Extra keyboard keys">keycode</a> directives, which matches the format seen in the default keymaps. These directives associate a keycode with a keysym. Keysyms represent keyboard actions. The actions available include outputting character codes or character sequences, switching consoles or keymaps, booting the machine, and many other actions. The full currently active keymap can be obtained with
</p>
<pre># dumpkeys -l
</pre>
<p>Most keysyms are intuitive. For example, to set key 112 to output an 'e', the directive will be:
</p>
<pre>keycode 112  = e
</pre>
<p>To set key 112 to output a euro symbol, the directive will be:
</p>
<pre>keycode 112 = euro
</pre>
<p>Some keysym are not immediately connected to a keyboard actions. In particular, the keysyms prefixed by a capital F and one to three digits (F1-F246) constituting a number greater than 30 are always free. This is useful directing a hotkey to output a sequence of characters and other actions:
</p>
<pre>keycode 112 = F70
</pre>
<p>Then, F70 can be bound to output a specific string:
</p>
<pre>string F70 = "Hello"
</pre>
<p>When key 112 is pressed, it will output the contents of F70. In order to execute a printed command in a terminal, a newline escape character must be appended to the end of the command string. For example, to <a href="../../en/Power_management/Suspend_and_hibernate.html" title="Power management/Suspend and hibernate">enter a system into hibernation</a>, the following keymap is added:
</p>
<pre>string F70 = "sudo systemctl hibernate\n"
</pre>
<h4><span class="mw-headline" id="Other_examples">Other examples</span></h4>
<ul><li>To make the Right Alt key same as Left Alt key (for Emacs), use the following line in your keymap. It will include the file <code>/usr/share/kbd/keymaps/i386/include/linux-with-two-alt-keys.inc</code>, check it for details.</li></ul>
<pre>include "linux-with-two-alt-keys"
</pre>
<ul><li>To swap CapsLock with Escape (for Vim), remap the respective keycodes:</li></ul>
<pre>keycode 1 = Caps_Lock
keycode 58 = Escape
</pre>
<ul><li>To make CapsLock another Control key, remap the respective keycode:</li></ul>
<pre>keycode 58 = Control
</pre>
<ul><li>To swap CapsLock with Left Control key, remap the respective keycodes:</li></ul>
<pre>keycode 29 = Caps_Lock
keycode 58 = Control
</pre>
<h4><span class="mw-headline" id="Saving_changes">Saving changes</span></h4>
<p>In order to make use of the personal keymap, it must be loaded with <i>loadkeys</i>:
</p>
<pre># loadkeys /usr/local/share/kbd/keymaps/personal.map
</pre>
<p>However this keymap is only active for the current session. In order to load the keymap at boot, specify the full path to the file in the <code>KEYMAP</code> variable in <a href="#Persistent_configuration">/etc/vconsole.conf</a>. The file does not have to be gzipped as the official keymaps provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kbd">kbd</a></span>.
</p>
<h2><span class="mw-headline" id="Adjusting_typematic_delay_and_rate">Adjusting typematic delay and rate</span></h2>
<p>The <i>typematic delay</i> indicates the amount of time (typically in milliseconds) a key needs to be pressed and held in order for the repeating process to begin. After the repeating process has been triggered, the character will be repeated with a certain frequency (usually given in Hz) specified by the <i>typematic rate</i>. These values can be changed using the <i>kbdrate</i> command. Note that these settings are configured separately for the console and <a href="../../en/Xorg/Keyboard_configuration.html#Adjusting_typematic_delay_and_rate" title="Xorg/Keyboard configuration">for Xorg</a>.
</p>
<pre># kbdrate [-d <i>delay</i>] [-r <i>rate</i>]
</pre>
<p>For example to set a typematic delay to 200ms and a typematic rate to 30Hz, use the following command:
</p>
<pre># kbdrate -d 200 -r 30
</pre>
<p>Issuing the command without specifying the delay and rate will reset the typematic values to their respective defaults; a delay of 250ms and a rate of 11Hz:
</p>
<pre># kbdrate
</pre>
<h3><span class="mw-headline" id="Systemd_service">Systemd service</span></h3>
<p>A systemd service can be used to set the keyboard rate. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/kbdrate.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Keyboard repeat rate in tty.

[Service]
Type=oneshot
RemainAfterExit=yes
StandardInput=tty
StandardOutput=tty
ExecStart=/usr/bin/kbdrate --silent --delay 250 --rate 30

[Install]
WantedBy=multi-user.target</pre>
<p>Then <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> the <code>kbdrate.service</code> systemd service.
</p>
<h2><span class="mw-headline" id="Layout_switching">Layout switching</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> General layout toggling <a href="../../en/Xorg/Keyboard_configuration.html#Switching_between_keyboard_layouts" title="Xorg/Keyboard configuration">like on X11</a> is <i>not</i> supported on the console. The following will not work with arbitrary layout combinations, especially <b>some main layouts will not allow this at all</b>.</div>
<p>Layout switching can only be simulated by establishing a different layout on one of the higher layers (typically the 3rd, <code>AltGr</code>).
</p>
<p>For a list of layouts that <i>likely</i> support this, run
</p>
<pre>$ find /usr/share/kbd/keymaps -exec zgrep -l 'AltGr_Lock' '{}' ';'
</pre>
<p>You can test this by passing main and augmenting layout to <i>loadkeys</i>, e.g.
</p>
<pre># loadkeys us mk
</pre>
<p>If it worked, the 3rd level shift (<code>AltGr</code>) will allow you to access the second layout, the <code>AltGr_Lock</code> (often <code>Alt+Shift</code>, you will have to inspect the keymap file with <i>zless</i>) will provide an effective toggle.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If the second layout only prints squares, this is probably a <a href="../../en/Linux_console.html#Fonts" title="Linux console">font configuration</a> issue.</div>
<p>For a permanent configuration, set the <code>KEYMAP_TOGGLE</code> next to the <code>KEYMAP</code> in <code>/etc/vconsole.conf</code>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../../en/Category:Linux_console.html" title="Category:Linux console">Linux console</a></li>
<li><a href="../../en/Category:Keyboard_configuration.html" title="Category:Keyboard configuration">Keyboard configuration</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Linux_console/Keyboard_configuration&amp;oldid=808053">https://wiki.archlinux.org/index.php?title=Linux_console/Keyboard_configuration&amp;oldid=808053</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 10 May 2024, at 17:49.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
