<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Mullvad - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Mullvad rootpage-Mullvad skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Manual_configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Manual_configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Manual configuration</div>
		</a>
		
			<button aria-controls="toc-Manual_configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Manual configuration subsection</span>
			</button>
		
		<ul id="toc-Manual_configuration-sublist" class="vector-toc-list">
			<li id="toc-Using_OpenVPN" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_OpenVPN">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Using OpenVPN</div>
			</a>
			
			<ul id="toc-Using_OpenVPN-sublist" class="vector-toc-list">
				<li id="toc-Using_NetworkManager_front-ends" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_NetworkManager_front-ends">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>Using NetworkManager front-ends</div>
			</a>
			
			<ul id="toc-Using_NetworkManager_front-ends-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_systemd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_systemd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>Using systemd</div>
			</a>
			
			<ul id="toc-Using_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enabling_a_Kill_Switch" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Enabling_a_Kill_Switch">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.3</span>Enabling a Kill Switch</div>
			</a>
			
			<ul id="toc-Enabling_a_Kill_Switch-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Using_WireGuard" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_WireGuard">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Using WireGuard</div>
			</a>
			
			<ul id="toc-Using_WireGuard-sublist" class="vector-toc-list">
				<li id="toc-Using_WG-Quick" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_WG-Quick">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>Using WG-Quick</div>
			</a>
			
			<ul id="toc-Using_WG-Quick-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_NetworkManager" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_NetworkManager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2</span>With NetworkManager</div>
			</a>
			
			<ul id="toc-With_NetworkManager-sublist" class="vector-toc-list">
				<li id="toc-with_KDE" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#with_KDE">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2.1</span>with KDE</div>
			</a>
			
			<ul id="toc-with_KDE-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-With_systemd-networkd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_systemd-networkd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.3</span>With systemd-networkd</div>
			</a>
			
			<ul id="toc-With_systemd-networkd-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-DNS_leaks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#DNS_leaks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>DNS leaks</div>
		</a>
		
		<ul id="toc-DNS_leaks-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Automatic_configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Automatic_configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Automatic configuration</div>
		</a>
		
		<ul id="toc-Automatic_configuration-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Mullvad</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Mullvad.html" title="Mullvad – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Mullvad" title="Mullvad – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-nl mw-list-item"><a href="../nl/Mullvad.html" title="Mullvad – Nederlands" lang="nl" hreflang="nl" class="interlanguage-link-target"><span>Nederlands</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<p><a rel="nofollow" class="external text" href="https://mullvad.net/en/">Mullvad</a> is a VPN service based in Sweden which uses <a href="../en/OpenVPN.html" title="OpenVPN">OpenVPN</a> and <a href="../en/WireGuard.html" title="WireGuard">WireGuard</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The new <a rel="nofollow" class="external text" href="https://mullvad.net/download/">official GUI client</a> is available as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mullvad-vpn/">mullvad-vpn</a></span><sup><small>AUR</small></sup>.
</p>
<p>After installation, you will need to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>mullvad-daemon.service</code>.
</p>
<p>Alternatively you can use the old client or either <a href="../en/OpenVPN.html" title="OpenVPN">OpenVPN</a> or <a href="../en/WireGuard.html" title="WireGuard">WireGuard</a> with a configuration file for Mullvad as explained in <a href="#Manual_configuration">#Manual configuration</a>.
</p>
<h2><span class="mw-headline" id="Manual_configuration">Manual configuration</span></h2>
<p>If you do not want to use the Mullvad app you can set it up manually with standard Linux software. Mullvad supports the <a href="../en/OpenVPN.html" title="OpenVPN">OpenVPN</a> and <a href="../en/WireGuard.html" title="WireGuard">WireGuard</a> protocols. Mullvad themselves <a rel="nofollow" class="external text" href="https://mullvad.net/en/help/why-wireguard/">advise</a> to use WireGuard. However, using OpenVPN may be preferable since for instance the GNOME GUI can handle OpenVPN graphically, which makes it easy to see that the VPN is being used, or switching between VPN servers.
</p>
<p>No matter if you opt for OpenVPN or WireGuard, if you use <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> you may want to set up <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a> to decrease DNS-lookup times and also decreasing risk of DNS leakages. Follow the steps under <a href="../en/NetworkManager.html#DNS_caching_and_conditional_forwarding" title="NetworkManager">DNS_caching_and_conditional_forwarding</a>. Mind you, using <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a> together with the Mullvad app will result in poorer performance as NetworkManager cannot manage per-interface configs via dnsmasq.
</p>
<h3><span class="mw-headline" id="Using_OpenVPN">Using OpenVPN</span></h3>
<p>First make sure the packages <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openvpn">openvpn</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openresolv">openresolv</a></span> are installed, then proceed to download Mullvad's OpenVPN configuration file package from <a rel="nofollow" class="external text" href="https://mullvad.net/en/account/openvpn-config">their website</a> and unzip the downloaded file to <code>/etc/openvpn/client/</code>. From here you can either use the <a href="../en/NetworkManager.html#Front-ends" title="NetworkManager">NetworkManager front-ends</a> when using <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a>, or you can use <a href="../en/Systemd.html" title="Systemd">systemd</a> to start it automatically at boot.
</p>
<h4><span class="mw-headline" id="Using_NetworkManager_front-ends">Using NetworkManager front-ends</span></h4>
<p>See <a href="../en/OpenVPN.html#NetworkManager-native_VPN_configuration" title="OpenVPN">OpenVPN#NetworkManager-native VPN configuration</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Make sure to generate <i>Android/ChromeOS</i> and not <i>Linux</i> configurations in the Mullvad website.</div>
<h4><span class="mw-headline" id="Using_systemd">Using systemd</span></h4>
<p>Rename <code>mullvad_linux.conf</code> for a shorter name to be used with the <a href="../en/Systemd.html" title="Systemd">systemd</a> service later:
</p>
<pre># mv /etc/openvpn/client/mullvad_linux.conf /etc/openvpn/client/mullvad.conf
</pre>
<p>In order to use the nameservers supplied by Mullvad, <a href="../en/OpenVPN.html#The_update-resolv-conf_custom_script" title="OpenVPN">update-resolv-conf script</a> is being called upon starting and stopping the connection with OpenVPN to modify <a href="../en/Domain_name_resolution.html" class="mw-redirect" title="Resolv.conf">resolv.conf</a> to include the correct IP addresses. This script is also included in the Mullvad configuration zipfile, but should be moved to <code>/etc/openvpn/</code> to match the path specified in the Mullvad configuration file:
</p>
<pre># mv /etc/openvpn/client/update-resolv-conf /etc/openvpn/
</pre>
<p>Ensure that the script is <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a>. 
</p>
<p>The script can be kept updated with the <a rel="nofollow" class="external text" href="https://github.com/masterkorp/openvpn-update-resolv-conf">openvpn-update-resolv-conf</a> script, which also contains a fix for DNS leaks.
</p>
<p>After configuration the VPN connection can be <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enabled">managed</a> with <code>openvpn-client@mullvad.service</code>. If the service fails to start with an error like <code>Cannot open TUN/TAP dev /dev/net/tun: No such device (errno=19)</code>, you might need to reboot the system to enable OpenVPN creating the correct network device for the task.
</p>
<h4><span class="mw-headline" id="Enabling_a_Kill_Switch">Enabling a Kill Switch</span></h4>
<p>To enable a Kill Switch function to prevent data leakage in case the VPN connection goes down, you can use <a href="../en/Iptables.html" title="Iptables">iptables</a> as explained in the <a rel="nofollow" class="external text" href="https://mullvad.net/en/help/linux-openvpn-installation/">Mullvad OpenVPN on Linux</a> page, under Enabling a Kill Switch.
</p>
<h3><span class="mw-headline" id="Using_WireGuard">Using WireGuard</span></h3>
<h4><span class="mw-headline" id="Using_WG-Quick">Using WG-Quick</span></h4>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireguard-tools">wireguard-tools</a></span> package. Log in to Mullvad with your account and then go to the <a rel="nofollow" class="external text" href="https://mullvad.net/en/account/#/wireguard-config/">Wireguard-config page</a>. Choose Linux as platform, then click generate key to generate a public key. In a terminal, issue the following command to generate a private key:
</p>
<pre># wg genkey
</pre>
<p>Click on <i>Manage keys</i> on the Mullvad WireGuard-config page, and insert the private key you just generated into the field that says <i>Enter private key</i>, and click on <i>import key</i>. Fill out step 3 on the website and download the file. Unzip the file you downloaded to get one or several configuration files depending on your selections in step 3. With these configuration files you can use the terminal interface of NetworkManager, nmcli.
</p>
<p>After following the guide in <i>Using Networkmanager</i> to obtain the configuration zip file that we will be using you can go ahead and unzip the file you obtained and moving it to your working folder. Next we shall go ahead and import our wg connection by moving our mullvad configuration file into <code>/etc/wireguard</code> and naming it <code>wg0.conf</code> for the below commands to work. Then we shall go ahead 
</p>
<pre># wg-quick up wg0
</pre>
<p>If you want to stop it run the command below. This is not permanent however and you will need to run the above command manually whenever your PC restarts.
</p>
<pre># wg-quick down
</pre>
<p>To permanently have it run, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> <code>wg-quick@wg0.service</code> which will always enable the configuration whenever your PC starts up.
</p>
<h4><span class="mw-headline" id="With_NetworkManager">With NetworkManager</span></h4>
<p>To add a WireGuard connection from a config-file, issue following command in terminal:
</p>
<pre># nmcli connection import type wireguard file <i>configuration_file</i>
</pre>
<p>If the file was called WG1.conf a connection called WG1 should have been added. 
</p>
<p>If you at any point want to delete the connection, issue the command:
</p>
<pre># nmcli connection delete <i>connection_name</i>
</pre>
<p>To actually start the WireGuard tunnel, issue command:
</p>
<pre># nmcli connection up <i>connection_name</i>
</pre>
<p>Make sure the connection is listed when you run nmcli:
</p>
<pre># nmcli
</pre>
<p>You might want to verify that the private and public keys are correct and corresponds with what you got from your VPN provider:
</p>
<pre># WG_HIDE_KEYS=never wg
</pre>
<p>Mullvad has provided a <a rel="nofollow" class="external text" href="https://mullvad.net/en/help/wireguard-and-mullvad-vpn/">shell script</a> to automate this process - with a caveat: the automatically generated configuration files do not contain kill switches, which need to be manually added if you so desire.
</p>
<h5><span class="mw-headline" id="with_KDE">with KDE</span></h5>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/WireGuard.html" class="mw-redirect" title="Wireguard">Wireguard</a>.</b></p>
<div>
<b>Notes:</b> Not specific to Mullvad (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Mullvad.html">Talk:Mullvad</a>)</div>
</div>
<p>KDE settings (`systemsettings kcm_networkmanagement`), which is a frontend for Network Manager, can either import individual files that you download from mullvad's website (linux configuration), or you can open those files and manually add the values.
</p>
<p>The required fields are:
</p>
<table class="wikitable">
<caption>Wiguard config file fields translation to KDE Conections
</caption>
<tbody>
<tr>
<th>settings tab</th>
<th>field</th>
<th>mullvad config file
</th>
</tr>
<tr>
<td>IP V4</td>
<td>Method: Manual</td>
<td>n/a
</td>
</tr>
<tr>
<td>IP V4</td>
<td>Address/Netmask</td>
<td>Interface.Address (must split on `,` and interpret the mask value. Same for IPV6)
</td>
</tr>
<tr>
<td>IP V6</td>
<td>Method: Manual (or ignored)</td>
<td>n/a
</td>
</tr>
<tr>
<td>Wireguard Interface</td>
<td>Private Key</td>
<td>Interface.PrivateKey
</td>
</tr>
<tr>
<td>Peers</td>
<td>Public Key</td>
<td>Peer.PublicKey
</td>
</tr>
<tr>
<td>Peers</td>
<td>Allowed IPs</td>
<td>Peer.AllowedIPs
</td>
</tr>
<tr>
<td>Peers</td>
<td>Endpoint address</td>
<td>Peer.Endpoing (must split on `:`)
</td>
</tr>
<tr>
<td>Peers</td>
<td>Endpoint port</td>
<td>Peer.Endpoing (must split on `:`)
</td>
</tr>
</tbody>
</table>
<p>Note that there's an easy to miss "Peers" button in the "Wireguard Interface" tab to open the Peers section.
</p>
<p>To use multiple peers, you will have to open the `zip` file, and add one peer from each individual file on the Peers dialog. Note that the "Wireguard Interface" and IP tabs will be the same for all the files inside the `zip` archive you got from mullbad.
</p>
<h4><span class="mw-headline" id="With_systemd-networkd">With systemd-networkd</span></h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/99-wg0.netdev</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[NetDev]
Name=wg0
Kind=wireguard
Description=WireGuard VPN

[WireGuard]
FirewallMark=0x8888
ListenPort=51820
RouteTable=off
PrivateKey=&lt;private key&gt;                               

[WireGuardPeer]
PublicKey=&lt;public key&gt;                                
AllowedIPs=0.0.0.0/0  
AllowedIPs=::0/0
Endpoint=&lt;ip&gt;:&lt;port&gt;</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/99-wg0.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Match]
Name=wg0

[Network]
Address=&lt;ipv4 addr&gt;/32
Address=&lt;ipv6 addr&gt;/128
DNS=&lt;dns&gt;
DNSDefaultRoute=yes
Domains=~.

[RoutingPolicyRule]
Family=both
SuppressPrefixLength=0
Priority=999
Table=main

[RoutingPolicyRule]
Family=both
FirewallMark=0x8888
InvertRule=true
Table=1000
Priority=1000

[Route]
Gateway=0.0.0.0
Table=1000

[Route]
Gateway=::
Table=1000</pre>
<p>For basic kill-switch functionality you can use iptables to block all outgoing connections except those with fwmark 0x8888:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">iptables incomplete example</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">-A OUTPUT -m mark --mark 0x8888 -j ACCEPT
-A OUTPUT -j DROP</pre>
<h2><span class="mw-headline" id="DNS_leaks">DNS leaks</span></h2>
<p>By default, the Mullvad OpenVPN configurations allow DNS leaks and for usual VPN use cases this is an unfavorable privacy defect. Mullvad's new GUI client automatically stops DNS leaks by removing every DNS server IP from the system configuration and replacing them with an IP pointing out to Mullvad's own non-logging DNS server, valid during the VPN connection. This fix can also be applied with the plain OpenVPN method by configuring <a href="../en/Domain_name_resolution.html" class="mw-redirect" title="Resolv.conf">resolv.conf</a> to use <b>only</b> the Mullvad DNS server IP specified on their <a rel="nofollow" class="external text" href="https://www.mullvad.net/guides/dns-leaks/">website</a>.
</p>
<p>The resolv.conf update script version in <a rel="nofollow" class="external text" href="https://github.com/masterkorp/openvpn-update-resolv-conf">openvpn-update-resolv-conf</a> implements a different fix for the leaks by using the exclusive interface switch <code>-x</code> when running the <code>resolvconf</code> command, but this might cause another form of DNS leakage by making even every local network address resolve via the DNS server provided by Mullvad, as noted in the <a rel="nofollow" class="external text" href="https://github.com/masterkorp/openvpn-update-resolv-conf/issues/18">script's GitHub issue page</a>.
</p>
<p>If you use Mullvad with wireguard remember to install the <a href="../en/Openresolv.html" title="Openresolv">openresolv</a> package to prevent DNS leaks.
</p>
<h2><span class="mw-headline" id="Automatic_configuration">Automatic configuration</span></h2>
<p><a href="../en/List_of_applications/Internet.html#VPN_clients" class="mw-redirect" title="Vopono">vopono</a> supports automatically generating configuration files for Mullvad, allowing you to instantly run applications via Mullvad connections in temporary network namespaces.
</p>
<p>Both OpenVPN and Wireguard connections are supported. Shadowsocks is supported for OpenVPN connections, and port forwarding is supported for Wireguard connections.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/mullvad/mullvadvpn-app">Mullvad client source code</a></li>
<li><a rel="nofollow" class="external text" href="https://mullvad.net/en/faq/">Mullvad FAQ</a></li>
<li><a href="../en/List_of_applications/Internet.html#VPN_clients" class="mw-redirect" title="Vopono">vopono</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:VPN_providers.html" title="Category:VPN providers">VPN providers</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Mullvad&amp;oldid=802512">https://wiki.archlinux.org/index.php?title=Mullvad&amp;oldid=802512</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 7 March 2024, at 18:36.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
