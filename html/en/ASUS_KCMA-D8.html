<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ASUS KCMA-D8 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ASUS_KCMA-D8 rootpage-ASUS_KCMA-D8 skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-BIOS" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#BIOS">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>BIOS</div>
		</a>
		
		<ul id="toc-BIOS-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Sensors" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Sensors">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Sensors</div>
		</a>
		
		<ul id="toc-Sensors-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Fan_control" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Fan_control">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Fan control</div>
		</a>
		
		<ul id="toc-Fan_control-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Gaming_Boost_Clocks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Gaming_Boost_Clocks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Gaming Boost Clocks</div>
		</a>
		
		<ul id="toc-Gaming_Boost_Clocks-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-IPMI_Module" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#IPMI_Module">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>IPMI Module</div>
		</a>
		
		<ul id="toc-IPMI_Module-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">ASUS KCMA-D8</span></h1>
				</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p>This page describes the steps necessary to get most of the features of the ASUS KCMA-D8 working correctly. It assumes that you have already successfully installed Arch Linux and use the <a href="../en/GRUB.html" title="GRUB">GRUB bootloader</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="BIOS">BIOS</span></h2>
<p>The manufacturers BIOS is outdated and unsafe, it has no NVMe drivers, fails to resume from suspend, and it's closed source. To remedy this, we can install a precompiled open source bios known as <a rel="nofollow" class="external text" href="https://libreboot.org/">libreboot</a> instead.
</p>
<p>The stock BIOS prevents you from flashing it with a non-stock BIOS, so the first flash must be done via hardware. The easiest way to <a rel="nofollow" class="external text" href="https://libreboot.org/docs/install/">install libreboot</a> for the first time is with a raspberry pi, connecting the bios chip to the GPIO <a rel="nofollow" class="external text" href="https://libreboot.org/docs/install/spi.html#gpio-pins-on-raspberry-pi-rpi-40-pin">as seen here</a>. Install flashprog on the pi with <code>apt install flashprog</code>, and then download, verify, and extract the latest bios images from the <a rel="nofollow" class="external text" href="https://libreboot.org/download.html">libreboot downloads</a> page (recommended to be testing release <code>20231021</code> or later, earlier versions do not support NVMe). Make sure to pick the bios image with the correct RAM type, ROM size, payloads, and keyboard type, and then follow the <a rel="nofollow" class="external text" href="https://libreboot.org/docs/install/spi.html#how-to-use-flashprog">how to use flashprog instructions</a> to flash the bios, replacing <code>./flashprog</code> with <code>flashprog</code> since we have installed it. Make sure to clear the CMOS before booting with the new BIOS.
</p>
<p>Once libreboot has been installed, it can be updated from within the operating system by following <a rel="nofollow" class="external text" href="https://libreboot.org/docs/install/spi.html#how-to-use-flashprog">these instructions</a>.
</p>
<p>The stock BIOS chip is 2MiB, and can be upgraded to a 16MiB one such as the <code>25Q128FVIQ</code>, or the <code>W25Q128FVSG</code> with a SOP8 to DIP8 adapter PCB. This will allow more space for larger payloads in the future, but isn't strictly necessary.
</p>
<p>To boot your operating system from NVMe, it's recommended to install your operating system entirely to NVMe, and <a href="../en/GRUB.html#Installation_2" title="GRUB">install GRUB</a> to a SATA drive (which must have at least one partition on it). This simply prevents you from having to reconfigure GRUB's boot order from within the libreboot bios.
</p>
<h2><span class="mw-headline" id="Sensors">Sensors</span></h2>
<p>After running <code>sensors detect</code>, it loads the incorrect kernel driver <code>w83627ehf</code>. This can be remediated by replacing <code>w83627ehf</code> with <code>w83795</code> in <a href="../en/Lm_sensors.html" title="Lm sensors">lm_sensors</a> configuration file: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/conf.d/lm_sensors</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HWMON_MODULES="w83795"</pre>
<p>The enumerated hwmon symlinks located in <code>/sys/class/hwmon/</code> may vary in order after a power cycle, because the kernel modules do not load in a consistent order every boot. Something as simple as plugging in a game controller could cause the order to change. Creating/editing <code>/etc/modules-load.d/modules.conf</code> in such a manner should create a defined order for the modules to load in, which should make the hwmon paths stay where they are and not change order upon reboot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/modules.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Load w83795 at boot
w83795</pre>
<p>This method may not always work consistently, and a more reliable method should be documented and implemented.
</p>
<h2><span class="mw-headline" id="Fan_control">Fan control</span></h2>
<p>Fan control in this motherboard is quite unusual. There is 8 PWM fan control channels, however only 2 channels are used for controlling the fan speed of all 8 fan headers. One must use a combination of 4 pin fans (recommended for CPU), and 3 pin fans (recommended for case). One speed can be set for all of the 4 pin fans, and another speed can be set for all of the 3 pin fans. After running <code>pwmconfig</code>, <code>fancontrol.service</code> refuses to start. This is because <a href="../en/Fan_speed_control.html" class="mw-redirect" title="Fancontrol">fancontrol</a> cannot associate more than 2 fans with PWM speed. Manually configure <code>/etc/fancontrol</code> so that <code>FCFANS</code> only has two inputs per device, and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>fancontrol.service</code>. Here is an example configuration: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fancontrol</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">INTERVAL=10
DEVPATH=hwmon6=devices/pci0000:00/0000:00:14.0/i2c-8/8-002f
DEVNAME=hwmon6=w83795g
FCTEMPS=hwmon6/device/pwm2=hwmon6/device/temp1_input hwmon6/device/pwm1=hwmon6/device/temp8_input
FCFANS=hwmon6/device/pwm2=hwmon6/device/fan8_input+hwmon6/device/fan6_input hwmon6/device/pwm1=hwmon6/device/fan2_input+hwmon6/device/fan1_input
MINTEMP=hwmon6/device/pwm2=60 hwmon6/device/pwm1=40
MAXTEMP=hwmon6/device/pwm2=80 hwmon6/device/pwm1=65
MINSTART=hwmon6/device/pwm2=60 hwmon6/device/pwm1=60
MINSTOP=hwmon6/device/pwm2=0 hwmon6/device/pwm1=0</pre>
<h2><span class="mw-headline" id="Gaming_Boost_Clocks">Gaming Boost Clocks</span></h2>
<p>Gaming on the KCMA-D8 is quite attainable with a pair of 4332 HE / 4386 CPU's and some 1333-1600MHz RAM. However, there is a few things you can do to make it better. For example, the 4386's all core max turbo is 3.1GHz, however it can boost to 3.8GHz on 2 cores 4 threads when the other 2 cores 4 threads are not as busy. Since these CPU's have plenty of threads and can pull quite a bit of power, we can simply disable half the cores on boot and get a massive single threaded boost while saving on electricity. The recommended way to do this is with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cpupower-gui-git/">cpupower-gui-git</a></span><sup><small>AUR</small></sup>. Execute <code>sudo cpupower-gui</code> to modify the default profile applied at boot by <code>cpupower-gui.service</code>. See <a rel="nofollow" class="external text" href="https://github.com/vagnum08/cpupower-gui?tab=readme-ov-file#systemd-units">cpupower-gui systemd units</a> to learn more about global and user configurations.
</p>
<p>Keep in mind that inter-CPU communication introduces latency that isn't usually desirable for games, so restricting all of the game threads to run on CPU 0 is often desirable. See <span class="plainlinks archwiki-template-man" title="$ man 1 taskset"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/taskset.1">taskset(1)</a></span> for setting cpu affinity.
</p>
<h2><span class="mw-headline" id="IPMI_Module">IPMI Module</span></h2>
<p>This motherboard supports an ASMB4 IPMI Module. The manufacturers ROM for the IPMI module has slight incompatibilities with coreboot as is, preventing restarts from working correctly. There exists an open source replacement for the IPMI module ROM called <a rel="nofollow" class="external text" href="https://www.raptorengineering.com/coreboot/kgpe-d16-bmc-port-status.php">OpenBMC</a>, however compilation is extremely difficult as the codebase has not been updated in a long time and it requires an antiquated version of debian to compile. The developers of dasharo seem to have interest in supporting the KCMA-D8, because they already maintain and update their implementation of coreboot and OpenBMC for the very similar KGPE-D16, they just need a little bit more of a push from the community. If Dasharo decides to support the KCMA-D8, this would be massive, because the IPMI module has the ability to control fan speeds properly regardless of the state of the operating system, which could save the hardware from overheating in the unlikely event of a freeze, making the KCMA-D8 an even more legendary FOSS motherboard. However, they have declined to reply to any emails regarding this topic so it seems unlikely.
</p>
<p>Leah Rowe, founder of libreboot, is displaying curiosity in porting dasharo to the KCMA-D8. This would let an even more modern version of coreboot run on the KCMA-D8, which would also presumably support the OpenBMC from dasharo too. Please show Leah your support :)
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Mainboards_and_BIOS.html" title="Category:Mainboards and BIOS">Mainboards and BIOS</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ASUS_KCMA-D8&amp;oldid=804095">https://wiki.archlinux.org/index.php?title=ASUS_KCMA-D8&amp;oldid=804095</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 March 2024, at 20:33.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
