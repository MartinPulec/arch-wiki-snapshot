<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>pacman - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pacman rootpage-Pacman skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Usage</span>
			</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Installing_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Installing packages</span>
				</div>
			</a>
			
			<ul id="toc-Installing_packages-sublist" class="vector-toc-list">
				<li id="toc-Installing_specific_packages" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Installing_specific_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.1</span>
					<span>Installing specific packages</span>
				</div>
			</a>
			
			<ul id="toc-Installing_specific_packages-sublist" class="vector-toc-list">
				<li id="toc-Virtual_packages" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Virtual_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.1.1</span>
					<span>Virtual packages</span>
				</div>
			</a>
			
			<ul id="toc-Virtual_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Installing_package_groups" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Installing_package_groups">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.2</span>
					<span>Installing package groups</span>
				</div>
			</a>
			
			<ul id="toc-Installing_package_groups-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Removing_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Removing_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Removing packages</span>
				</div>
			</a>
			
			<ul id="toc-Removing_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Upgrading_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Upgrading_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Upgrading packages</span>
				</div>
			</a>
			
			<ul id="toc-Upgrading_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Querying_package_databases" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Querying_package_databases">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Querying package databases</span>
				</div>
			</a>
			
			<ul id="toc-Querying_package_databases-sublist" class="vector-toc-list">
				<li id="toc-Pactree" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Pactree">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.1</span>
					<span>Pactree</span>
				</div>
			</a>
			
			<ul id="toc-Pactree-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Database_structure" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Database_structure">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.2</span>
					<span>Database structure</span>
				</div>
			</a>
			
			<ul id="toc-Database_structure-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Cleaning_the_package_cache" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cleaning_the_package_cache">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.5</span>
					<span>Cleaning the package cache</span>
				</div>
			</a>
			
			<ul id="toc-Cleaning_the_package_cache-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Additional_commands" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Additional_commands">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.6</span>
					<span>Additional commands</span>
				</div>
			</a>
			
			<ul id="toc-Additional_commands-sublist" class="vector-toc-list">
				<li id="toc-dry_run" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#dry_run">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.6.1</span>
					<span>dry run</span>
				</div>
			</a>
			
			<ul id="toc-dry_run-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Installation_reason" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installation_reason">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.7</span>
					<span>Installation reason</span>
				</div>
			</a>
			
			<ul id="toc-Installation_reason-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-What_happens_during_package_install/upgrade/removal" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#What_happens_during_package_install/upgrade/removal">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.8</span>
					<span>What happens during package install/upgrade/removal</span>
				</div>
			</a>
			
			<ul id="toc-What_happens_during_package_install/upgrade/removal-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-General_options" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#General_options">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>General options</span>
				</div>
			</a>
			
			<ul id="toc-General_options-sublist" class="vector-toc-list">
				<li id="toc-Comparing_versions_before_updating" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Comparing_versions_before_updating">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>Comparing versions before updating</span>
				</div>
			</a>
			
			<ul id="toc-Comparing_versions_before_updating-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Parallel_downloads" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Parallel_downloads">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.2</span>
					<span>Parallel downloads</span>
				</div>
			</a>
			
			<ul id="toc-Parallel_downloads-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Skip_package_from_being_upgraded" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Skip_package_from_being_upgraded">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.3</span>
					<span>Skip package from being upgraded</span>
				</div>
			</a>
			
			<ul id="toc-Skip_package_from_being_upgraded-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Skip_package_group_from_being_upgraded" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Skip_package_group_from_being_upgraded">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.4</span>
					<span>Skip package group from being upgraded</span>
				</div>
			</a>
			
			<ul id="toc-Skip_package_group_from_being_upgraded-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Skip_file_from_being_upgraded" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Skip_file_from_being_upgraded">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.5</span>
					<span>Skip file from being upgraded</span>
				</div>
			</a>
			
			<ul id="toc-Skip_file_from_being_upgraded-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Skip_files_from_being_installed_to_system" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Skip_files_from_being_installed_to_system">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.6</span>
					<span>Skip files from being installed to system</span>
				</div>
			</a>
			
			<ul id="toc-Skip_files_from_being_installed_to_system-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Maintain_several_configuration_files" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Maintain_several_configuration_files">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.7</span>
					<span>Maintain several configuration files</span>
				</div>
			</a>
			
			<ul id="toc-Maintain_several_configuration_files-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hooks" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Hooks">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.8</span>
					<span>Hooks</span>
				</div>
			</a>
			
			<ul id="toc-Hooks-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Repositories_and_mirrors" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Repositories_and_mirrors">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Repositories and mirrors</span>
				</div>
			</a>
			
			<ul id="toc-Repositories_and_mirrors-sublist" class="vector-toc-list">
				<li id="toc-Package_cache_directory" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Package_cache_directory">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Package cache directory</span>
				</div>
			</a>
			
			<ul id="toc-Package_cache_directory-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Package_security" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Package_security">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Package security</span>
				</div>
			</a>
			
			<ul id="toc-Package_security-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id='toc-"Failed_to_commit_transaction_(conflicting_files)"_error' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"Failed_to_commit_transaction_(conflicting_files)"_error'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>"Failed to commit transaction (conflicting files)" error</span>
				</div>
			</a>
			
			<ul id='toc-"Failed_to_commit_transaction_(conflicting_files)"_error-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-"Failed_to_commit_transaction_(invalid_or_corrupted_package)"_error' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"Failed_to_commit_transaction_(invalid_or_corrupted_package)"_error'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>"Failed to commit transaction (invalid or corrupted package)" error</span>
				</div>
			</a>
			
			<ul id='toc-"Failed_to_commit_transaction_(invalid_or_corrupted_package)"_error-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-"Failed_to_init_transaction_(unable_to_lock_database)"_error' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"Failed_to_init_transaction_(unable_to_lock_database)"_error'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>"Failed to init transaction (unable to lock database)" error</span>
				</div>
			</a>
			
			<ul id='toc-"Failed_to_init_transaction_(unable_to_lock_database)"_error-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Packages_cannot_be_retrieved_on_installation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Packages_cannot_be_retrieved_on_installation">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Packages cannot be retrieved on installation</span>
				</div>
			</a>
			
			<ul id="toc-Packages_cannot_be_retrieved_on_installation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fixing_an_unbootable_system_caused_by_an_interrupted_upgrade" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fixing_an_unbootable_system_caused_by_an_interrupted_upgrade">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Fixing an unbootable system caused by an interrupted upgrade</span>
				</div>
			</a>
			
			<ul id="toc-Fixing_an_unbootable_system_caused_by_an_interrupted_upgrade-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Pacman_crashes_during_an_upgrade" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pacman_crashes_during_an_upgrade">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>Pacman crashes during an upgrade</span>
				</div>
			</a>
			
			<ul id="toc-Pacman_crashes_during_an_upgrade-sublist" class="vector-toc-list">
				<li id="toc-pacman:_command_not_found" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#pacman:_command_not_found">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6.1</span>
					<span>pacman: command not found</span>
				</div>
			</a>
			
			<ul id="toc-pacman:_command_not_found-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Manually_reinstalling_pacman" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Manually_reinstalling_pacman">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7</span>
					<span>Manually reinstalling pacman</span>
				</div>
			</a>
			
			<ul id="toc-Manually_reinstalling_pacman-sublist" class="vector-toc-list">
				<li id="toc-Using_pacman-static" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_pacman-static">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7.1</span>
					<span>Using pacman-static</span>
				</div>
			</a>
			
			<ul id="toc-Using_pacman-static-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_an_external_pacman" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_an_external_pacman">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7.2</span>
					<span>Using an external pacman</span>
				</div>
			</a>
			
			<ul id="toc-Using_an_external_pacman-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-By_manually_extracting" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#By_manually_extracting">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7.3</span>
					<span>By manually extracting</span>
				</div>
			</a>
			
			<ul id="toc-By_manually_extracting-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id='toc-"Unable_to_find_root_device"_error_after_rebooting' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"Unable_to_find_root_device"_error_after_rebooting'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.8</span>
					<span>"Unable to find root device" error after rebooting</span>
				</div>
			</a>
			
			<ul id='toc-"Unable_to_find_root_device"_error_after_rebooting-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-"Warning:_current_locale_is_invalid;_using_default_"C"_locale"_error' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"Warning:_current_locale_is_invalid;_using_default_"C"_locale"_error'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.9</span>
					<span>"Warning: current locale is invalid; using default "C" locale" error</span>
				</div>
			</a>
			
			<ul id='toc-"Warning:_current_locale_is_invalid;_using_default_"C"_locale"_error-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Missing_Locales_Warning_Messages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Missing_Locales_Warning_Messages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.10</span>
					<span>Missing Locales Warning Messages</span>
				</div>
			</a>
			
			<ul id="toc-Missing_Locales_Warning_Messages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Pacman_does_not_honor_proxy_settings" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pacman_does_not_honor_proxy_settings">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.11</span>
					<span>Pacman does not honor proxy settings</span>
				</div>
			</a>
			
			<ul id="toc-Pacman_does_not_honor_proxy_settings-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-How_do_I_reinstall_all_packages,_retaining_information_on_whether_something_was_explicitly_installed_or_as_a_dependency?" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#How_do_I_reinstall_all_packages,_retaining_information_on_whether_something_was_explicitly_installed_or_as_a_dependency?">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.12</span>
					<span>How do I reinstall all packages, retaining information on whether something was explicitly installed or as a dependency?</span>
				</div>
			</a>
			
			<ul id="toc-How_do_I_reinstall_all_packages,_retaining_information_on_whether_something_was_explicitly_installed_or_as_a_dependency?-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-"Cannot_open_shared_object_file"_error' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"Cannot_open_shared_object_file"_error'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.13</span>
					<span>"Cannot open shared object file" error</span>
				</div>
			</a>
			
			<ul id='toc-"Cannot_open_shared_object_file"_error-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Freeze_of_package_downloads" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Freeze_of_package_downloads">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.14</span>
					<span>Freeze of package downloads</span>
				</div>
			</a>
			
			<ul id="toc-Freeze_of_package_downloads-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_retrieving_file_'core.db'_from_mirror" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_retrieving_file_'core.db'_from_mirror">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.15</span>
					<span>Failed retrieving file 'core.db' from mirror</span>
				</div>
			</a>
			
			<ul id="toc-Failed_retrieving_file_'core.db'_from_mirror-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-error:_'local-package.pkg.tar':_permission_denied" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#error:_'local-package.pkg.tar':_permission_denied">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.16</span>
					<span>error: 'local-package.pkg.tar': permission denied</span>
				</div>
			</a>
			
			<ul id="toc-error:_'local-package.pkg.tar':_permission_denied-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.17</span>
					<span>error: could not determine cachedir mount point /var/cache/pacman/pkg</span>
				</div>
			</a>
			
			<ul id="toc-error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-error:_GPGME_error:_No_data" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#error:_GPGME_error:_No_data">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.18</span>
					<span>error: GPGME error: No data</span>
				</div>
			</a>
			
			<ul id="toc-error:_GPGME_error:_No_data-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-error:_GPGME_error:_General_error_and_"::_File_/var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst_is_corrupted_(invalid_or_corrupted_package_(PGP_signature)).' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#error:_GPGME_error:_General_error_and_"::_File_/var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst_is_corrupted_(invalid_or_corrupted_package_(PGP_signature)).'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.19</span>
					<span>error: GPGME error: General error and ":: File /var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst is corrupted (invalid or corrupted package (PGP signature)).</span>
				</div>
			</a>
			
			<ul id='toc-error:_GPGME_error:_General_error_and_"::_File_/var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst_is_corrupted_(invalid_or_corrupted_package_(PGP_signature)).-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reinstall_broken_or_out-of-sync_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reinstall_broken_or_out-of-sync_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.20</span>
					<span>Reinstall broken or out-of-sync packages</span>
				</div>
			</a>
			
			<ul id="toc-Reinstall_broken_or_out-of-sync_packages-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">pacman</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 11 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-11" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">11 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Pacman" title="Pacman – Deutsch" lang="de" hreflang="de" data-title="Pacman" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Pacman.html" title="Pacman – español" lang="es" hreflang="es" data-title="Pacman" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fi mw-list-item"><a href="../fi/Pacman.html" title="Pacman – suomi" lang="fi" hreflang="fi" data-title="Pacman" data-language-autonym="Suomi" data-language-local-name="suomi" class="interlanguage-link-target"><span>Suomi</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Pacman.html" title="Pacman – français" lang="fr" hreflang="fr" data-title="Pacman" data-language-autonym="Français" data-language-local-name="français" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-it mw-list-item"><a href="../it/Pacman.html" title="Pacman – italiano" lang="it" hreflang="it" data-title="Pacman" data-language-autonym="Italiano" data-language-local-name="italiano" class="interlanguage-link-target"><span>Italiano</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Pacman" title="Pacman – 日本語" lang="ja" hreflang="ja" data-title="Pacman" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pl mw-list-item"><a href="../pl/Pacman.html" title="Pacman – polski" lang="pl" hreflang="pl" data-title="Pacman" data-language-autonym="Polski" data-language-local-name="polski" class="interlanguage-link-target"><span>Polski</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Pacman.html" title="Pacman – português" lang="pt" hreflang="pt" data-title="Pacman" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Pacman.html" title="Pacman – русский" lang="ru" hreflang="ru" data-title="Pacman" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-sv mw-list-item"><a href="../sv/Pacman.html" title="Pacman – svenska" lang="sv" hreflang="sv" data-title="Pacman" data-language-autonym="Svenska" data-language-local-name="svenska" class="interlanguage-link-target"><span>Svenska</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Pacman" title="Pacman – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Pacman" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Pacman/Package_signing.html" title="Pacman/Package signing">/Package signing</a></li>
<li><a href="../en/Pacman/Pacnew_and_Pacsave.html" title="Pacman/Pacnew and Pacsave">/Pacnew and Pacsave</a></li>
<li><a href="../en/Pacman/Restore_local_database.html" title="Pacman/Restore local database">/Restore local database</a></li>
<li><a href="../en/Pacman/Rosetta.html" title="Pacman/Rosetta">/Rosetta</a></li>
<li><a href="../en/Pacman/Tips_and_tricks.html" title="Pacman/Tips and tricks">/Tips and tricks</a></li>
<li><a href="../en/Arch_User_Repository.html" title="Arch User Repository">Arch User Repository</a></li>
<li><a href="../en/Creating_packages.html" title="Creating packages">Creating packages</a></li>
<li><a href="../en/Downgrading_packages.html" title="Downgrading packages">Downgrading packages</a></li>
<li><a href="../en/Namcap.html" title="Namcap">namcap</a></li>
<li><a href="../en/Frequently_asked_questions.html#Package_management" class="mw-redirect" title="FAQ">FAQ#Package management</a></li>
<li><a href="../en/System_maintenance.html" title="System maintenance">System maintenance</a></li>
</ul>
</div>
<p>The <a rel="nofollow" class="external text" href="https://pacman.archlinux.page/">pacman</a> <a href="https://en.wikipedia.org/wiki/Package_manager" class="extiw" title="wikipedia:Package manager">package manager</a> is one of the major distinguishing features of <a href="../en/Arch_Linux.html" title="Arch Linux">Arch Linux</a>. It combines a simple binary package format with an easy-to-use <a href="../en/Arch_build_system.html" title="Arch build system">Arch build system</a>. The goal of <i>pacman</i> is to make it possible to easily manage packages, whether they are from the <a href="../en/Official_repositories.html" title="Official repositories">official repositories</a> or the user's own builds.
</p>
<p><i>Pacman</i> keeps the system up-to-date by synchronizing package lists with the master server. This server/client model also allows the user to download/install packages with a simple command, complete with all required dependencies.
</p>
<p><i>Pacman</i> is written in the <a href="../en/C.html" title="C">C</a> programming language and uses the <span class="plainlinks archwiki-template-man" title="$ man 1 bsdtar"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bsdtar.1">bsdtar(1)</a></span> <a href="https://en.wikipedia.org/wiki/tar_(computing)" class="extiw" title="w:tar (computing)">tar</a> format for packaging.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> package contains tools such as <a href="../en/Makepkg.html" title="Makepkg">makepkg</a> and <span class="plainlinks archwiki-template-man" title="$ man 8 vercmp"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vercmp.8">vercmp(8)</a></span>. Other useful tools such as <a href="#Pactree">pactree</a> and <a href="../en/System_maintenance.html#Partial_upgrades_are_unsupported" class="mw-redirect" title="Checkupdates">checkupdates</a> are found in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span> (<a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/commit/0c99eabd50752310f42ec808c8734a338122ec86">formerly</a> part of <i>pacman</i>). Run <code>pacman -Ql pacman pacman-contrib | grep -E 'bin/.+'</code> to see the full list.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>What follows is just a small sample of the operations that <i>pacman</i> can perform. To read more examples, refer to <span class="plainlinks archwiki-template-man" title="$ man 8 pacman"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.8">pacman(8)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For those who have used other Linux distributions before, there is a helpful <a href="../en/Pacman/Rosetta.html" title="Pacman/Rosetta">Pacman/Rosetta</a> article.</div>
<h3><span class="mw-headline" id="Installing_packages">Installing packages</span></h3>
<p>A package is an archive containing:
</p>
<ul>
<li>all of the (compiled) files of an application</li>
<li>metadata about the application, such as application name, version, dependencies, etc.</li>
<li>installation files and directives for <i>pacman</i>
</li>
</ul>
<p>Arch's package manager <i>pacman</i> can install, update, and remove those packages. Using packages instead of compiling and installing programs yourself has various benefits:
</p>
<ul>
<li>easily updatable: <i>pacman</i> will update existing packages as soon as updates are available</li>
<li>dependency checks: <i>pacman</i> handles dependencies for you, you only need to specify the program and <i>pacman</i> installs it together with every other program it needs</li>
<li>clean removal: <i>pacman</i> has a list of every file in a package; this way, no files are unintentionally left behind when you decide to remove a package.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Packages often have <a href="../en/PKGBUILD.html#optdepends" title="PKGBUILD">optional dependencies</a> which are packages that provide additional functionality to the application but not strictly required for running it. When installing a package, <i>pacman</i> will list a package's optional dependencies, but they will not be found in <code>pacman.log</code>. Use the <a href="#Querying_package_databases">#Querying package databases</a> command to view the optional dependencies of a package.</li>
<li>When installing a package which you require only as a (optional) dependency of some other package (i.e. not required by you explicitly), it is recommended to use the <code>--asdeps</code> option. For details, see the <a href="#Installation_reason">#Installation reason</a> section.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> When installing packages in Arch, avoid refreshing the package list without <a href="#Upgrading_packages">upgrading the system</a> (for example, when a <a href="#Packages_cannot_be_retrieved_on_installation">package is no longer found</a> in the official repositories). In practice, do <b>not</b> run <code>pacman -Sy <i>package_name</i></code> instead of <code>pacman -Sy<b>u</b> <i>package_name</i></code>, as this could lead to dependency issues. See <a href="../en/System_maintenance.html#Partial_upgrades_are_unsupported" title="System maintenance">System maintenance#Partial upgrades are unsupported</a> and <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=89328">BBS#89328</a>.</div>
<h4><span class="mw-headline" id="Installing_specific_packages">Installing specific packages</span></h4>
<p>To install a single package or list of packages, including dependencies, issue the following command:
</p>
<pre># pacman -S <i>package_name1</i> <i>package_name2</i> ...
</pre>
<p>To install a list of packages with regex (see <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=7179">this forum thread</a>):
</p>
<pre># pacman -S $(pacman -Ssq <i>package_regex</i>)
</pre>
<p>Sometimes there are multiple versions of a package in different repositories (e.g. <i>extra</i> and <i>extra-testing</i>). To install the version from the <i>extra</i> repository in this example, the repository needs to be defined in front of the package name:
</p>
<pre># pacman -S extra/<i>package_name</i>
</pre>
<p>To install a number of packages sharing similar patterns in their names, one can use curly brace expansion. For example:
</p>
<pre># pacman -S plasma-{desktop,mediacenter,nm}
</pre>
<p>This can be expanded to however many levels needed:
</p>
<pre># pacman -S plasma-{workspace{,-wallpapers},pa}
</pre>
<h5><span class="mw-headline" id="Virtual_packages">Virtual packages</span></h5>
<p>A virtual package is a special package which does not exist by itself, but is <a href="../en/PKGBUILD.html#provides" title="PKGBUILD">provided</a> by one or more other packages. Virtual packages allow other packages to not name a specific package as a dependency, in case there are several candidates. Virtual packages cannot be installed by their name, instead they become installed in your system when you have installed a package <i>providing</i> the virtual package. An example is the <a href="../en/D-Bus.html#Implementations" title="D-Bus">dbus-units</a> package.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> When there are multiple candidates, the list of choices presented will sort first by <a href="../en/Repository.html" class="mw-redirect" title="Repositories">repositories</a> in the order they appear in <code>pacman.conf</code>, then alphabetically when multiple results exist from the same repository.</div>
<h4><span class="mw-headline" id="Installing_package_groups">Installing package groups</span></h4>
<p>Some packages belong to a <a href="../en/Meta_package_and_package_group.html" class="mw-redirect" title="Package group">group of packages</a> that can all be installed simultaneously. For example, issuing the command:
</p>
<pre># pacman -S gnome
</pre>
<p>will prompt you to select the packages from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome/">gnome</a></span> group that you wish to install.
</p>
<p>Sometimes a package group will contain a large amount of packages, and there may be only a few that you do or do not want to install. Instead of having to enter all the numbers except the ones you do not want, it is sometimes more convenient to select or exclude packages or ranges of packages with the following syntax:
</p>
<pre>Enter a selection (default=all): 1-10 15
</pre>
<p>which will select packages 1 through 10 and 15 for installation, or:
</p>
<pre>Enter a selection (default=all): ^5-8 ^2
</pre>
<p>which will select all packages except 5 through 8 and 2 for installation.
</p>
<p>To see what packages belong to the gnome group, run:
</p>
<pre>$ pacman -Sg gnome
</pre>
<p>Also visit <a rel="nofollow" class="external free" href="https://archlinux.org/groups/">https://archlinux.org/groups/</a> to see what package groups are available.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If a package in the list is already installed on the system, it will be reinstalled even if it is already up-to-date. This behavior can be overridden with the <code>--needed</code> option.</div>
<h3><span class="mw-headline" id="Removing_packages">Removing packages</span></h3>
<p>To remove a single package, leaving all of its dependencies installed:
</p>
<pre># pacman -R <i>package_name</i>
</pre>
<p>To remove a package and its dependencies which are not required by any other installed package:
</p>
<pre># pacman -Rs <i>package_name</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> When removing a group, such as <i>gnome</i>, this ignores the install reason of the packages in the group, because it acts as though each package in the group is listed separately. Install reason of dependencies is still respected.</div>
<p>The above may sometimes refuse to run when removing a group which contains otherwise needed packages. In this case try:
</p>
<pre># pacman -Rsu <i>package_name</i>
</pre>
<p>To remove a package, its dependencies and all the packages that depend on the target package:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This operation is recursive, and must be used with care since it can remove many potentially needed packages.</div>
<pre># pacman -Rsc <i>package_name</i>
</pre>
<p>To remove a package, which is required by another package, without removing the dependent package:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The following operation can break a system and should be avoided. See <a href="../en/System_maintenance.html#Avoid_certain_pacman_commands" title="System maintenance">System maintenance#Avoid certain pacman commands</a>.</div>
<pre># pacman -Rdd <i>package_name</i>
</pre>
<p><i>Pacman</i> saves important configuration files when removing certain applications and names them with the extension: <i>.pacsave</i>. To prevent the creation of these backup files use the <code>-n</code> option:
</p>
<pre># pacman -Rn <i>package_name</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <i>Pacman</i> will not remove configurations that the application itself creates (for example "dotfiles" in the home directory).</div>
<h3><span class="mw-headline" id="Upgrading_packages">Upgrading packages</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>Users are expected to follow the guidance in the <a href="../en/System_maintenance.html#Upgrading_the_system" title="System maintenance">System maintenance#Upgrading the system</a> section to upgrade their systems regularly and not blindly run the following command.</li>
<li>Arch only supports full system upgrades. See <a href="../en/System_maintenance.html#Partial_upgrades_are_unsupported" title="System maintenance">System maintenance#Partial upgrades are unsupported</a> and <a href="#Installing_packages">#Installing packages</a> for details.</li>
</ul>
</div>
<p><i>Pacman</i> can update all packages on the system with just one command. This could take quite a while depending on how up-to-date the system is. The following command synchronizes the repository databases <i>and</i> updates the system's packages, excluding "local" packages that are not in the configured repositories:
</p>
<pre># pacman -Syu
</pre>
<h3><span class="mw-headline" id="Querying_package_databases">Querying package databases</span></h3>
<p><i>Pacman</i> queries the local package database with the <code>-Q</code> flag, the sync database with the <code>-S</code> flag and the files database with the <code>-F</code> flag. See <code>pacman -Q --help</code>, <code>pacman -S --help</code> and <code>pacman -F --help</code> for the respective suboptions of each flag.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Sync the files database before querying it to get up-to-date results:
<pre># pacman -Fy
</pre>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> the <code>pacman-filesdb-refresh.timer</code> (provided within the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span> package) to refresh <i>pacman</i> files database weekly.</div>
<p><i>Pacman</i> can search for packages in the database, searching both in packages' names and descriptions:
</p>
<pre>$ pacman -Ss <i>string1</i> <i>string2</i> ...
</pre>
<p>Sometimes, <code>-s</code>'s builtin ERE (Extended Regular Expressions) can cause a lot of unwanted results, so it has to be limited to match the package name only; not the description nor any other field:
</p>
<pre>$ pacman -Ss '^vim-'
</pre>
<p>To search for already installed packages:
</p>
<pre>$ pacman -Qs <i>string1</i> <i>string2</i> ...
</pre>
<p>To search for package file names in remote packages:
</p>
<pre>$ pacman -F <i>string1</i> <i>string2</i> ...
</pre>
<p>To display extensive information about a given package (e.g. its dependencies):
</p>
<pre>$ pacman -Si <i>package_name</i>
</pre>
<p>For locally installed packages:
</p>
<pre>$ pacman -Qi <i>package_name</i>
</pre>
<p>Passing two <code>-i</code> flags will also display the list of backup files and their modification states:
</p>
<pre>$ pacman -Qii <i>package_name</i>
</pre>
<p>To retrieve a list of the files installed by a package:
</p>
<pre>$ pacman -Ql <i>package_name</i>
</pre>
<p>To retrieve a list of the files installed by a remote package:
</p>
<pre>$ pacman -Fl <i>package_name</i>
</pre>
<p>To verify the presence of the files installed by a package:
</p>
<pre>$ pacman -Qk <i>package_name</i>
</pre>
<p>Passing the <code>k</code> flag twice will perform a more thorough check.
</p>
<p>To query the database to know which package a file in the file system belongs to:
</p>
<pre>$ pacman -Qo <i>/path/to/file_name</i>
</pre>
<p>To query the database to know which remote package a file belongs to:
</p>
<pre>$ pacman -F <i>/path/to/file_name</i>
</pre>
<p>To list all packages no longer required as dependencies (orphans):
</p>
<pre>$ pacman -Qdt
</pre>
<p>To list all packages explicitly installed and not required as dependencies:
</p>
<pre>$ pacman -Qet
</pre>
<p>See <a href="../en/Pacman/Tips_and_tricks.html" title="Pacman/Tips and tricks">pacman/Tips and tricks</a> for more examples.
</p>
<p>For advanced functionality, install <a href="../en/Pkgfile.html" title="Pkgfile">pkgfile</a>, which uses a separate database with all files and their associated packages.
</p>
<h4><span class="mw-headline" id="Pactree">Pactree</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <span class="plainlinks archwiki-template-man" title="$ man 8 pactree"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pactree.8">pactree(8)</a></span> is not part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> package anymore. Instead it can be found in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span>.</div>
<p>To view the dependency tree of a package:
</p>
<pre>$ pactree <i>package_name</i>
</pre>
<p>To view the dependent tree of a package, pass the reverse flag <code>-r</code> to <i>pactree</i>.
</p>
<h4><span class="mw-headline" id="Database_structure">Database structure</span></h4>
<p>The <i>pacman</i> databases are normally located at <code>/var/lib/pacman/sync</code>. For each repository specified in <code>/etc/pacman.conf</code>, there will be a corresponding database file located there. Database files are gzipped tar archives containing one directory for each package, for example for the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=which">which</a></span> package:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ tree which-2.21-5</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">which-2.21-5
|-- desc
</pre>
<p>The <code>desc</code> file contains meta data such as the package description, dependencies, file size and MD5 hash.
</p>
<h3><span class="mw-headline" id="Cleaning_the_package_cache">Cleaning the package cache</span></h3>
<p><i>Pacman</i> stores its downloaded packages in <code>/var/cache/pacman/pkg/</code> and does not remove the old or uninstalled versions automatically. This has some advantages:
</p>
<ol>
<li>It allows to <a href="../en/Downgrading_packages.html" class="mw-redirect" title="Downgrade">downgrade</a> a package without the need to retrieve the previous version through other means, such as the <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">Arch Linux Archive</a>.</li>
<li>A package that has been uninstalled can easily be reinstalled directly from the cache directory, not requiring a new download from the repository.</li>
</ol>
<p>However, it is necessary to deliberately clean up the cache periodically to prevent the directory to grow indefinitely in size.
</p>
<p>The <span class="plainlinks archwiki-template-man" title="$ man 8 paccache"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/paccache.8">paccache(8)</a></span> script, provided within the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span> package, deletes all cached versions of installed and uninstalled packages, except for the most recent three, by default:
</p>
<pre># paccache -r
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> <code>paccache.timer</code> to discard unused packages weekly. You can configure the arguments for the service in <code>/etc/conf.d/pacman-contrib</code>, e.g with <code>PACCACHE_ARGS='-k1'</code> or <code>PACCACHE_ARGS='-uk0'</code> for the two examples below.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can create a <a href="#Hooks">hook</a> to run this automatically after every <i>pacman</i> transaction, <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/paccache-hook/">paccache-hook</a></span><sup><small>AUR</small></sup> and see <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1694743#p1694743">other examples</a>
</div>
<p>You can also define how many recent versions you want to keep. To retain only one past version use:
</p>
<pre># paccache -rk1
</pre>
<p>Add the <code>-u</code>/<code>--uninstalled</code> switch to limit the action of <i>paccache</i> to uninstalled packages. For example to remove all cached versions of uninstalled packages, use the following:
</p>
<pre># paccache -ruk0
</pre>
<p>See <code>paccache -h</code> for more options.
</p>
<p><i>Pacman</i> also has some built-in options to clean the cache and the leftover database files from repositories which are no longer listed in the configuration file <code>/etc/pacman.conf</code>. However <i>pacman</i> does not offer the possibility to keep a number of past versions and is therefore more aggressive than <i>paccache</i> default options.
</p>
<p>To remove all the cached packages that are not currently installed, and the unused sync databases, execute:
</p>
<pre># pacman -Sc
</pre>
<p>To remove all files from the cache, use the clean switch twice, this is the most aggressive approach and will leave nothing in the cache directory:
</p>
<pre># pacman -Scc
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> One should avoid deleting from the cache all past versions of installed packages and all uninstalled packages unless one desperately needs to free some disk space. This will prevent downgrading or reinstalling packages without downloading them again.</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pkgcacheclean/">pkgcacheclean</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacleaner/">pacleaner</a></span><sup><small>AUR</small></sup> are two further alternatives to clean the cache.
</p>
<h3><span class="mw-headline" id="Additional_commands">Additional commands</span></h3>
<p>Download a package without installing it:
</p>
<pre># pacman -Sw <i>package_name</i>
</pre>
<p>Install a 'local' package that is not from a remote repository (e.g. the package is from the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>):
</p>
<pre># pacman -U <i>/path/to/package/package_name-version.pkg.tar.zst</i>
</pre>
<p>To keep a copy of the local package in <i>pacman'</i>s cache, use:
</p>
<pre># pacman -U file:///<i>path/to/package/package_name-version.pkg.tar.zst</i>
</pre>
<p>Install a 'remote' package (not from a repository stated in <i>pacman'</i>s configuration files):
</p>
<pre># pacman -U <i>http://www.example.com/repo/example.pkg.tar.zst</i>
</pre>
<h4><span class="mw-headline" id="dry_run">dry run</span></h4>
<p><i>Pacman</i> <b>always</b> lists packages to be installed or removed, and asks for permission before taking any action.
</p>
<p>To get a list in a processable format, and to prevent the actions of <code>-S</code>, <code>-U</code> and <code>-R</code>, you can use <code>-p</code>, short for <code>--print</code>.
</p>
<p><code>--print-format</code> can be added to format this list in various ways. <code>--print-format %n</code> will return a list without package versions.
</p>
<h3><span class="mw-headline" id="Installation_reason">Installation reason</span></h3>
<p>The <i>pacman</i> database organizes installed packages into two groups, according to installation reason:
</p>
<ul>
<li>
<b>explicitly-installed</b>: packages that were literally passed to a generic <i>pacman</i> <code>-S</code> or <code>-U</code> command;</li>
<li>
<b>dependencies</b>: packages that, despite never (in general) having been passed to a <i>pacman</i> installation command, were <i>implicitly</i> installed because they were  <a href="../en/PKGBUILD.html#Dependencies" class="mw-redirect" title="Dependency">required</a> by packages explicitly installed.</li>
</ul>
<p>When installing a package, it is possible to force its installation reason to <i>dependency</i> with:
</p>
<pre># pacman -S --asdeps <i>package_name</i>
</pre>
<p>The command is normally used because explicitly-installed packages may offer <a href="../en/PKGBUILD.html#optdepends" class="mw-redirect" title="Optdepends">optional packages</a>, usually for non-essential features for which the user has discretion.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Installing optional dependencies with <code>--asdeps</code> will ensure that, if you <a href="../en/Pacman/Tips_and_tricks.html#Removing_unused_packages_(orphans)" title="Pacman/Tips and tricks">remove orphans</a>, <i>pacman</i> will also remove optional packages set this way.</div>
<p>When <b>re</b>installing a package, though, the current installation reason is preserved by default.
</p>
<p>The list of explicitly-installed packages can be shown with <code>pacman -Qe</code>, while the complementary list of dependencies can be shown with <code>pacman -Qd</code>.
</p>
<p>To change the installation reason of an already installed package, execute:
</p>
<pre># pacman -D --asdeps <i>package_name</i>
</pre>
<p>Use <code>--asexplicit</code> to do the opposite operation.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Using <code>--asdeps</code> and <code>--asexplicit</code> options when upgrading, such as with <code>pacman -Syu <i>package_name</i> --asdeps</code>, is discouraged. This would change the installation reason of not only the package being installed, but also the packages being upgraded.</div>
<h3>
<span id="What_happens_during_package_install.2Fupgrade.2Fremoval"></span><span class="mw-headline" id="What_happens_during_package_install/upgrade/removal">What happens during package install/upgrade/removal</span>
</h3>
<p>When successful, the workflow of a transaction follows five high-level steps plus pre/post transaction hooks:
</p>
<ol>
<li>Initialize the transaction if there is not a database lock.</li>
<li>Choose which packages will be added or removed in the transaction.</li>
<li>Prepare the transaction, based on flags, by performing sanity checks on the sync databases, packages, and their dependencies.</li>
<li>Commit the transaction:
<ol>
<li>When applicable, download packages (<code>_alpm_sync_load</code>).</li>
<li>If pre-existing <i>pacman</i> <code>PreTransaction</code> hooks apply, they are executed.</li>
<li>Packages are removed that are to-be-replaced, conflicting, or explicitly targeted to be removed.</li>
<li>If there are packages to add, then each package is committed:
<ol>
<li>If the package has an install script, its <code>pre_install</code> function is executed (or <code>pre_upgrade</code> or <code>pre_remove</code> in the case of an upgraded or removed package).</li>
<li>
<i>Pacman</i> deletes all the files from a pre-existing version of the package (in the case of an upgraded or removed package). However, files that were marked as configuration files in the package are kept (see <a href="../en/Pacman/Pacnew_and_Pacsave.html" title="Pacman/Pacnew and Pacsave">/Pacnew and Pacsave</a>).</li>
<li>
<i>Pacman</i> untars the package and dumps its files into the file system (in the case of an installed or upgraded package). Files that would overwrite kept, and manually modified, configuration files (see previous step), are stored with a new name (<i>.pacnew</i>).</li>
<li>If the package has an install script, its <code>post_install</code> function is executed (or <code>post_upgrade</code> or <code>post_remove</code> in the case of an upgraded or removed package).</li>
</ol>
</li>
<li>If <i>pacman</i> <code>PostTransaction</code> hooks that exist at the end of the transaction apply, they are executed.</li>
</ol>
</li>
<li>Release the transaction and transaction resource (i.e. database lock).</li>
</ol>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p><i>Pacman</i> settings are located in <code>/etc/pacman.conf</code>: this is the place where the user configures the program to work in the desired manner. In-depth information about the configuration file can be found in <span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span>.
</p>
<h3><span class="mw-headline" id="General_options">General options</span></h3>
<p>General options are in the <code>[options]</code> section. Read <span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span> or look in the default <code>pacman.conf</code> for information on what can be done here.
</p>
<h4><span class="mw-headline" id="Comparing_versions_before_updating">Comparing versions before updating</span></h4>
<p>To see old and new versions of available packages, uncomment the "VerbosePkgLists" line in <code>/etc/pacman.conf</code>. The output of <code>pacman -Syu</code> will be like this:
</p>
<pre>Package (6)             Old Version  New Version  Net Change  Download Size

extra/libmariadbclient  10.1.9-4     10.1.10-1      0.03 MiB       4.35 MiB
extra/libpng            1.6.19-1     1.6.20-1       0.00 MiB       0.23 MiB
extra/mariadb           10.1.9-4     10.1.10-1      0.26 MiB      13.80 MiB
</pre>
<h4><span class="mw-headline" id="Parallel_downloads">Parallel downloads</span></h4>
<p>The number of packages being downloaded in parallel (at the same time) are configured in <code>/etc/pacman.conf</code> with the <code>ParallelDownloads</code> option under <code>[options]</code>. The <code>/etc/pacman.conf</code> shipped with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> package sets it to <code>5</code>. If the option is unset, packages will be downloaded sequentially.
</p>
<h4><span class="mw-headline" id="Skip_package_from_being_upgraded">Skip package from being upgraded</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Be careful in skipping packages, since <a href="../en/System_maintenance.html#Partial_upgrades_are_unsupported" class="mw-redirect" title="Partial upgrade">partial upgrades</a> are unsupported.</div>
<p>To have a specific package skipped when <a href="#Upgrading_packages">upgrading</a> the system, add this line in the <code>[options]</code> section:
</p>
<pre>IgnorePkg=linux
</pre>
<p>For multiple packages use a space-separated list, or use additional <code>IgnorePkg</code> lines. Also, <a href="https://en.wikipedia.org/wiki/glob_(programming)" class="extiw" title="wikipedia:glob (programming)">glob</a> patterns can be used. If you want to skip packages just once, you can also use the <code>--ignore</code> option on the command-line - this time with a comma-separated list.
</p>
<p>It will still be possible to upgrade the ignored packages using <code>pacman -S</code>: in this case <i>pacman</i> will remind you that the packages have been included in an <code>IgnorePkg</code> statement.
</p>
<h4><span class="mw-headline" id="Skip_package_group_from_being_upgraded">Skip package group from being upgraded</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Be careful in skipping package groups, since <a href="../en/System_maintenance.html#Partial_upgrades_are_unsupported" class="mw-redirect" title="Partial upgrade">partial upgrades</a> are unsupported.</div>
<p>As with packages, skipping a whole package group is also possible:
</p>
<pre>IgnoreGroup=gnome
</pre>
<h4><span class="mw-headline" id="Skip_file_from_being_upgraded">Skip file from being upgraded</span></h4>
<p>All files listed with a <code>NoUpgrade</code> directive will never be touched during a package install/upgrade, and the new files will be installed with a <i>.pacnew</i> extension.
</p>
<pre>NoUpgrade=<i>path/to/file</i>
</pre>
<p>Multiple files can be specified like this:
</p>
<pre>NoUpgrade=<i>path/to/file1 path/to/file2</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The path refers to files in the package archive. Therefore, do not include the leading slash.</div>
<h4><span class="mw-headline" id="Skip_files_from_being_installed_to_system">Skip files from being installed to system</span></h4>
<p>To always skip installation of specific files or directories list them under <code>NoExtract</code>. For example, to avoid installing bash completion scripts, use:
</p>
<pre>NoExtract=usr/share/bash-completion/completions/*
</pre>
<p>Later rules override previous ones, and you can negate a rule by prepending <code>!</code>.
</p>
<h4><span class="mw-headline" id="Maintain_several_configuration_files">Maintain several configuration files</span></h4>
<p>If you have several configuration files (e.g. main configuration and configuration with <a href="../en/Official_repositories.html#Testing_repositories" class="mw-redirect" title="Testing">testing</a> repository enabled) and would have to share options between configurations you may use <code>Include</code> option declared in the configuration files, e.g.:
</p>
<pre>Include = <i>/path/to/common/settings</i>
</pre>
<p>where <code><i>/path/to/common/settings</i></code> file contains the same options for both configurations.
</p>
<h4><span class="mw-headline" id="Hooks">Hooks</span></h4>
<p>Pacman can run pre- and post-transaction hooks from the <code>/usr/share/libalpm/hooks/</code> directory; more directories can be specified with the <code>HookDir</code> option in <code>pacman.conf</code>, which defaults to <code>/etc/pacman.d/hooks</code>. Hook file names must be suffixed with <i>.hook</i>. Pacman hooks are not interactive.
</p>
<p>Pacman hooks are used, for example, in combination with <code>systemd-sysusers</code> and <code>systemd-tmpfiles</code> to automatically create system users and files during the installation of packages. For example, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat8">tomcat8</a></span> specifies that it wants a system user called <code>tomcat8</code> and certain directories owned by this user. The <i>pacman</i> hooks <code>systemd-sysusers.hook</code> and <code>systemd-tmpfiles.hook</code> invoke <code>systemd-sysusers</code> and <code>systemd-tmpfiles</code> when <i>pacman</i> determines that <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat8">tomcat8</a></span> contains files specifying users and tmp files.
</p>
<p>For more information on alpm hooks, see <span class="plainlinks archwiki-template-man" title="$ man 5 alpm-hooks"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/alpm-hooks.5">alpm-hooks(5)</a></span>.
</p>
<h3><span class="mw-headline" id="Repositories_and_mirrors">Repositories and mirrors</span></h3>
<p>Besides the special <a href="#General_options">[options]</a> section, each other <code>[section]</code> in <code>pacman.conf</code> defines a package repository to be used. A <i>repository</i> is a <i>logical</i> collection of packages, which are <i>physically</i> stored on one or more servers: for this reason each server is called a <i>mirror</i> for the repository.
</p>
<p>Repositories are distinguished between <a href="../en/Official_repositories.html" title="Official repositories">official</a> and <a href="../en/Unofficial_user_repositories.html" title="Unofficial user repositories">unofficial</a>. The order of repositories in the configuration file matters; repositories listed first will take precedence over those listed later in the file when packages in two repositories have identical names, regardless of version number. In order to use a repository after adding it, you will need to <a href="#Upgrading_packages">upgrade</a> the whole system first.
</p>
<p>Each repository section allows defining the list of its mirrors directly or in a dedicated external file through the <code>Include</code> directive; for example, the mirrors for the official repositories are included from <code>/etc/pacman.d/mirrorlist</code>. See the <a href="../en/Mirrors.html" title="Mirrors">Mirrors</a> article for mirror configuration.
</p>
<h4><span class="mw-headline" id="Package_cache_directory">Package cache directory</span></h4>
<p>Pacman stores downloaded package files in cache, in a directory denoted by <code>CacheDir</code> in <a href="#General_options">[options]</a> section of <code>pacman.conf</code> (defaults to <code>/var/cache/pacman/pkg/</code> if not set).
</p>
<p>Cache directory may grow over time, even if keeping just the freshest versions of installed packages.
</p>
<p>If you want to move that directory to some more convenient place, do one of the following:
</p>
<ul>
<li>Set the <code>CacheDir</code> option in <code>pacman.conf</code> to new directory. Remember to retain the trailing slash. <b>This is the recommended solution</b>.</li>
<li>Mount a dedicated partition or e.g. <a href="../en/Btrfs.html#Subvolumes" title="Btrfs">Btrfs subvolume</a> in <code>/var/cache/pacman/pkg/</code>.</li>
<li>Bind-mount selected directory in <code>/var/cache/pacman/pkg/</code>.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> <b>Do not symlink</b> the <code>/var/cache/pacman/pkg/</code> directory to some other location. It <b>will</b> cause pacman to misbehave, especially when pacman attempts to update itself.</div>
<h4><span class="mw-headline" id="Package_security">Package security</span></h4>
<p>Pacman supports package signatures, which add an extra layer of security to the packages. The default configuration, <code>SigLevel = Required DatabaseOptional</code>, enables signature verification for all the packages on a global level. This can be overridden by per-repository <code>SigLevel</code> lines. For more details on package signing and signature verification, take a look at <a href="../en/Pacman/Package_signing.html" class="mw-redirect" title="Pacman-key">pacman-key</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id=".22Failed_to_commit_transaction_.28conflicting_files.29.22_error"></span><span class="mw-headline" id='"Failed_to_commit_transaction_(conflicting_files)"_error'>"Failed to commit transaction (conflicting files)" error</span>
</h3>
<p>If you see the following error: <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=56373">[1]</a>
</p>
<pre>error: could not prepare transaction
error: failed to commit transaction (conflicting files)
<i>package</i>: <i>/path/to/file</i> exists in filesystem
Errors occurred, no packages were upgraded.
</pre>
<p>This is happening because <i>pacman</i> has detected a file conflict, and by design, will not overwrite files for you. This is by design, not a flaw.
</p>
<p>The problem is usually trivial to solve (although to be sure, you should try to find out how these files got there in the first place). A safe way is to first check if another package owns the file (<code>pacman -Qo <i>/path/to/file</i></code>). If the file is owned by another package, <a href="../en/Bug_reporting_guidelines.html" class="mw-redirect" title="Reporting bug guidelines">file a bug report</a>. If the file is not owned by another package, rename the file which "exists in filesystem" and re-issue the update command. If all goes well, the file may then be removed.
</p>
<p>If you had installed a program manually without using <i>pacman</i>, for example through <code>make install</code>, you have to remove/uninstall this program with all of its files. See also <a href="../en/Pacman/Tips_and_tricks.html#Identify_files_not_owned_by_any_package" class="mw-redirect" title="Pacman tips">Pacman tips#Identify files not owned by any package</a>.
</p>
<p>Every installed package provides a <code>/var/lib/pacman/local/<i>package-version</i>/files</code> file that contains metadata about this package. If this file gets corrupted, is empty or goes missing, it results in <code>file exists in filesystem</code> errors when trying to update the package. Such an error usually concerns only one package. Instead of manually renaming and later removing all the files that belong to the package in question, you may explicitly run <code>pacman -S --overwrite <i>glob</i> <i>package</i></code> to force <i>pacman</i> to overwrite files that match <code><i>glob</i></code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Generally avoid using the <code>--overwrite</code> switch. See <a href="../en/System_maintenance.html#Avoid_certain_pacman_commands" title="System maintenance">System maintenance#Avoid certain pacman commands</a>.</div>
<h3>
<span id=".22Failed_to_commit_transaction_.28invalid_or_corrupted_package.29.22_error"></span><span class="mw-headline" id='"Failed_to_commit_transaction_(invalid_or_corrupted_package)"_error'>"Failed to commit transaction (invalid or corrupted package)" error</span>
</h3>
<p>Look for <i>.part</i> files (partially downloaded packages) in <code>/var/cache/pacman/pkg/</code> and remove them (often caused by usage of a custom <code>XferCommand</code> in <code>pacman.conf</code>).
</p>
<pre># find /var/cache/pacman/pkg/ -iname "*.part" -delete
</pre>
<p>That same error may also appear if <i>archlinux-keyring</i> is out-of-date, preventing <i>pacman</i> from verifying signatures. See <a href="../en/Pacman/Package_signing.html#Upgrade_system_regularly" title="Pacman/Package signing">Pacman/Package signing#Upgrade system regularly</a> for the fix and how to avoid it in the future.
</p>
<h3>
<span id=".22Failed_to_init_transaction_.28unable_to_lock_database.29.22_error"></span><span class="mw-headline" id='"Failed_to_init_transaction_(unable_to_lock_database)"_error'>"Failed to init transaction (unable to lock database)" error</span>
</h3>
<p>When <i>pacman</i> is about to alter the package database, for example installing a package, it creates a lock file at <code>/var/lib/pacman/db.lck</code>. This prevents another instance of <i>pacman</i> from trying to alter the package database at the same time.
</p>
<p>If <i>pacman</i> is interrupted while changing the database, this stale lock file can remain. If you are certain that no instances of <i>pacman</i> are running then delete the lock file:
</p>
<pre># rm /var/lib/pacman/db.lck
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> You can run <code>fuser /var/lib/pacman/db.lck</code> as root to verify if there is any process still using it.</div>
<h3><span class="mw-headline" id="Packages_cannot_be_retrieved_on_installation">Packages cannot be retrieved on installation</span></h3>
<p>This error manifests as <code>Not found in sync db</code>, <code>Target not found</code> or <code>Failed retrieving file</code>.
</p>
<p>Firstly, ensure the package actually exists. If certain the package exists, your package list may be out-of-date. Try running <code>pacman -Syu</code> to force a refresh of all package lists and upgrade. Also make sure the selected <a href="../en/Mirrors.html" title="Mirrors">mirrors</a> are up-to-date and <a href="#Repositories_and_mirrors">repositories</a> are correctly configured. You can also use <a href="../en/Reflector.html" title="Reflector">Reflector</a> to keep the mirrors up-to-date.
</p>
<p>It could also be that the repository containing the package is not enabled on your system, e.g. the package could be in the <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> repository, but <i>multilib</i> is not enabled in your <code>pacman.conf</code>.
</p>
<p>See also <a href="../en/Frequently_asked_questions.html#Why_is_there_only_a_single_version_of_each_shared_library_in_the_official_repositories?" class="mw-redirect" title="FAQ">FAQ#Why is there only a single version of each shared library in the official repositories?</a>.
</p>
<h3><span class="mw-headline" id="Fixing_an_unbootable_system_caused_by_an_interrupted_upgrade">Fixing an unbootable system caused by an interrupted upgrade</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Multiple potential issues, see talk page. (Discuss in <a href="../en/Talk:Pacman.html#More_details_in_pacman_crashes_during_an_update" title="Talk:Pacman">Talk:Pacman#More details in pacman crashes during an update</a>)</div>
</div>
<p>Whether due to power loss, kernel panic or hardware failure an update may be interrupted. In most cases, there will not be much damage but the system will likely be unbootable.
</p>
<ol>
<li>Ready a <a href="../en/USB_flash_installation_medium.html" title="USB flash installation medium">USB flash installation medium</a> and boot it.</li>
<li>
<a href="../en/File_systems.html#Mount_a_file_system" class="mw-redirect" title="Mount">Mount</a> the root filesystem.</li>
<li>
<code>arch-chroot</code> into the mounted root filesystem.</li>
<li>Check <code>/var/log/pacman.log</code> and replicate the exact update by supplying the <i>entire</i> list of packages that was upgraded during the failed transaction to <code>pacman -S</code> and allowing it to reinstall, e.g:</li>
</ol>
<pre># pacman -S linux linux-headers systemd systemd-libs systemd-sysvcompat firefox texlive-basic texlive-fontsextra texlive-latex texlive-latexextra texlive-latexrecommended texlive-pictures
</pre>
<p>Replicating the <i>exact</i> upgrade is needed to ensure the right scriptlets and hooks will run.
</p>
<h3><span class="mw-headline" id="Pacman_crashes_during_an_upgrade">Pacman crashes during an upgrade</span></h3>
<p>In the case that <i>pacman</i> crashes with a "database write" error while removing packages, and reinstalling or upgrading packages fails thereafter, do the following:
</p>
<ol>
<li>Boot using the Arch <a href="../en/USB_flash_installation_medium.html" title="USB flash installation medium">USB flash installation medium</a>. Preferably use a recent media so that the <i>pacman</i> version matches/is newer than the system.</li>
<li>Mount the system's root filesystem, e.g., <code>mount /dev/sdaX /mnt</code> as root, and check the mount has sufficient space with <code>df -h</code>
</li>
<li>Mount the proc, sys and dev filesystems as well: <code>mount -t proc proc /mnt/proc; mount --rbind /sys /mnt/sys; mount --rbind /dev /mnt/dev</code>
</li>
<li>If the system uses default database and directory locations, you can now update the system's <i>pacman</i> database and upgrade it via <code>pacman --root=/mnt --cachedir=/mnt/var/cache/pacman/pkg -Syu</code> as root.
<ul><li>Alternatively, if you cannot update/upgrade, refer to <a href="../en/Pacman/Tips_and_tricks.html#Reinstalling_all_packages" title="Pacman/Tips and tricks">Pacman/Tips and tricks#Reinstalling all packages</a>.</li></ul>
</li>
<li>After the upgrade, one way to double-check for not upgraded but still broken packages: <code>find /mnt/usr/lib -size 0</code>
</li>
<li>Followed by a re-install of any still broken package via <code>pacman --root /mnt --cachedir=/mnt/var/cache/pacman/pkg -S <i>package</i></code>.</li>
</ol>
<h4><span class="mw-headline" id="pacman:_command_not_found">pacman: command not found</span></h4>
<p>If <code>/var/cache/pacman/pkg</code> is a symlink, <i>pacman</i> will try to make a directory instead and thus remove this symlink during self-upgrade. This will cause the update to fail. As a result, <code>/usr/bin/pacman</code> and other contents of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> package will be missing.
</p>
<p>Never symlink <code>/var/cache/pacman/pkg</code> because it is controlled by <i>pacman</i>. Use the <code>CacheDir</code> option or a bind mount instead; see <a href="#Package_cache_directory">#Package cache directory</a>.
</p>
<p>If you have already encountered this problem and broke your system, you can manually extract <code>/usr</code> contents from the package to restore <i>pacman</i> and then reinstall it properly; see <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/73306">FS#73306</a> and <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=241213">related forum thread</a> for details.
</p>
<h3><span class="mw-headline" id="Manually_reinstalling_pacman">Manually reinstalling pacman</span></h3>
<h4><span class="mw-headline" id="Using_pacman-static">Using pacman-static</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacman-static/">pacman-static</a></span><sup><small>AUR</small></sup> is a statically compiled version of <i>pacman</i>, so it will be able to run even when the libraries on the system are not working. This can also come in handy when a <a href="../en/System_maintenance.html#Partial_upgrades_are_unsupported" class="mw-redirect" title="Partial upgrade">partial upgrade</a> was performed and <i>pacman</i> can not run anymore.
</p>
<p>The pinned comment and the PKGBUILD provides a way to directly download the binary, which can be used to reinstall <i>pacman</i> or to upgrade the entire system in case of partial upgrades.
</p>
<h4><span class="mw-headline" id="Using_an_external_pacman">Using an external pacman</span></h4>
<p>If even <code>pacman-static</code> does not work, it is possible to recover using an external <i>pacman</i>. One of the easiest methods to do so is by using the <a href="../en/Archiso.html" title="Archiso">archiso</a> and simply using <code>--sysroot</code> or <code>--root</code> to specify the mount point of the system to perform the operation on. See <a href="../en/Chroot.html#Using_chroot" title="Chroot">Chroot#Using chroot</a> on how to mount the necessary filesystems required by <code>--sysroot</code>.
</p>
<h4><span class="mw-headline" id="By_manually_extracting">By manually extracting</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> It is extremely easy to break your system even worse using this approach. Use this only as a last resort if the method from <a href="#Pacman_crashes_during_an_upgrade">#Pacman crashes during an upgrade</a> is not an option.</div>
<p>Even if <i>pacman</i> is terribly broken, you can fix it manually by downloading the latest packages and extracting them to the correct locations. The rough steps to perform are:
</p>
<ol>
<li>Determine the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> dependencies to install</li>
<li>Download each package from a <a href="../en/Mirrors.html" class="mw-redirect" title="Mirror">mirror</a> of your choice</li>
<li>Extract each package to root</li>
<li>Reinstall these packages with <code>pacman -S --overwrite</code> to update the package database accordingly</li>
<li>Do a full system upgrade</li>
</ol>
<p>If you have a healthy Arch system on hand, you can see the full list of dependencies with:
</p>
<pre>$ pacman -Q $(pactree -u pacman)
</pre>
<p>But you may only need to update a few of them depending on your issue. An example of extracting a package is
</p>
<pre># tar -xvpwf <i>package.tar.zst</i> -C / --exclude .PKGINFO --exclude .INSTALL --exclude .MTREE --exclude .BUILDINFO
</pre>
<p>Note the use of the <code>w</code> flag for interactive mode. Running non-interactively is very risky since you might end up overwriting an important file. Also take care to extract packages in the correct order (i.e. dependencies first). <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=95007">This forum post</a> contains an example of this process where only a couple <i>pacman</i> dependencies are broken.
</p>
<h3>
<span id=".22Unable_to_find_root_device.22_error_after_rebooting"></span><span class="mw-headline" id='"Unable_to_find_root_device"_error_after_rebooting'>"Unable to find root device" error after rebooting</span>
</h3>
<p>Most likely the <a href="../en/Arch_boot_process.html#initramfs" class="mw-redirect" title="Initramfs">initramfs</a> became corrupted during a <a href="../en/Kernel.html" title="Kernel">kernel</a> update (improper use of <i>pacman'</i>s <code>--overwrite</code> option can be a cause). There are two options; first, try the <i>Fallback</i> entry.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> In case you removed the <i>Fallback</i> entry, you can always press the <code>Tab</code> key when the boot loader menu shows up (for Syslinux) or <code>e</code> (for GRUB or systemd-boot), rename it <code>initramfs-linux-fallback.img</code> and press <code>Enter</code> or <code>b</code> (depending on your <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a>) to boot with the new parameters.</div>
<p>Once the system starts, run this command (for the stock <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernel) either from the console or from a terminal to rebuild the initramfs image:
</p>
<pre># mkinitcpio -p linux
</pre>
<p>If that does not work, from a current Arch release (CD/DVD or USB stick), <a href="../en/File_systems.html#Mount_a_file_system" class="mw-redirect" title="Mount">mount</a> your root and boot partitions to <code>/mnt</code> and <code>/mnt/boot</code>, respectively. Then <a href="../en/Chroot.html" title="Chroot">chroot</a> using <i>arch-chroot</i>:
</p>
<pre># arch-chroot /mnt
# pacman -Syu mkinitcpio systemd linux
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>If you do not have a current release or if you only have some other "live" Linux distribution laying around, you can <a href="../en/Chroot.html" title="Chroot">chroot</a> using the old fashioned way. Obviously, there will be more typing than simply running the <code>arch-chroot</code> script.</li>
<li>If <i>pacman</i> fails with <code>Could not resolve host</code>, please <a href="../en/Network_configuration.html#Check_the_connection" title="Network configuration">check your internet connection</a>.</li>
<li>If you cannot enter the arch-chroot or chroot environment but need to re-install packages, you can use the command <code>pacman --sysroot /mnt -Syu foo bar</code> to use <i>pacman</i> on your root partition.</li>
</ul>
</div>
<p>Reinstalling the kernel (the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> package) will automatically re-generate the initramfs image with <code>mkinitcpio -p linux</code>. There is no need to do this separately.
</p>
<p>Afterwards, it is recommended that you run <code>exit</code>, <code>umount /mnt/{boot,} </code> and <code>reboot</code>.
</p>
<h3>
<span id=".22Warning:_current_locale_is_invalid.3B_using_default_.22C.22_locale.22_error"></span><span class="mw-headline" id='"Warning:_current_locale_is_invalid;_using_default_"C"_locale"_error'>"Warning: current locale is invalid; using default "C" locale" error</span>
</h3>
<p>As the error message says, your locale is not correctly configured. See <a href="../en/Locale.html" title="Locale">Locale</a>.
</p>
<h3><span class="mw-headline" id="Missing_Locales_Warning_Messages">Missing Locales Warning Messages</span></h3>
<p>When locale files are intentionally removed by tools such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bleachbit">bleachbit</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/localepurge/">localepurge</a></span><sup><small>AUR</small></sup>, pacman may issue warnings about missing locales during package updates.
</p>
<p>To suppress these warnings, you can comment out the <code>CheckSpace</code> option in <code>pacman.conf</code>. Keep in mind that disabling CheckSpace turns off the space-checking functionality for all package installations, so use this workaround only when you have alternative means to monitor disk space.
</p>
<h3><span class="mw-headline" id="Pacman_does_not_honor_proxy_settings">Pacman does not honor proxy settings</span></h3>
<p>Make sure that the relevant environment variables (<code>$http_proxy</code>, <code>$ftp_proxy</code> etc.) are set up. If you use  <i>pacman</i> with <a href="../en/Sudo.html" title="Sudo">sudo</a>, you need to configure sudo to <a href="../en/Sudo.html#Environment_variables" title="Sudo">pass these environment variables to pacman</a>. Also, ensure the configuration of <a href="../en/GnuPG.html#Key_servers" title="GnuPG">dirmngr</a> has <code>honor-http-proxy</code> in <code>/etc/pacman.d/gnupg/dirmngr.conf</code> to honor the proxy when refreshing the keys.
</p>
<h3>
<span id="How_do_I_reinstall_all_packages.2C_retaining_information_on_whether_something_was_explicitly_installed_or_as_a_dependency.3F"></span><span class="mw-headline" id="How_do_I_reinstall_all_packages,_retaining_information_on_whether_something_was_explicitly_installed_or_as_a_dependency?">How do I reinstall all packages, retaining information on whether something was explicitly installed or as a dependency?</span>
</h3>
<p>To reinstall all the native packages: <code>pacman -Qnq | pacman -S -</code> or <code>pacman -S $(pacman -Qnq)</code> (the <code>-S</code> option preserves the installation reason by default).
</p>
<p>You will then need to reinstall all the foreign packages, which can be listed with <code>pacman -Qmq</code>.
</p>
<h3>
<span id=".22Cannot_open_shared_object_file.22_error"></span><span class="mw-headline" id='"Cannot_open_shared_object_file"_error'>"Cannot open shared object file" error</span>
</h3>
<p>It looks like previous <i>pacman</i> transaction removed or corrupted shared libraries needed for <i>pacman</i> itself.
</p>
<p>To recover from this situation, you need to unpack required libraries to your filesystem manually. First find what package contains the missed library and then locate it in the <i>pacman</i> cache (<code>/var/cache/pacman/pkg/</code>). Unpack required shared library to the filesystem. This will allow to run <i>pacman</i>.
</p>
<p>Now you need to <a href="#Installing_specific_packages">reinstall</a> the broken package. Note that you need to use <code>--overwrite</code> flag as you just unpacked system files and <i>pacman</i> does not know about it. Pacman will correctly replace our shared library file with one from package.
</p>
<p>That's it. Update the rest of the system.
</p>
<h3><span class="mw-headline" id="Freeze_of_package_downloads">Freeze of package downloads</span></h3>
<p>Some issues have been reported regarding network problems that prevent <i>pacman</i> from updating/synchronizing repositories. <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=68944">[2]</a> <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=65728">[3]</a> When installing Arch Linux natively, these issues have been resolved by replacing the default <i>pacman</i> file downloader with an alternative (see <a href="../en/Pacman/Tips_and_tricks.html#Performance" class="mw-redirect" title="Improve pacman performance">Improve pacman performance</a> for more details). When installing Arch Linux as a guest OS in <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a>, this issue has also been addressed by using <i>Host interface</i> instead of <i>NAT</i> in the machine properties.
</p>
<h3>
<span id="Failed_retrieving_file_.27core.db.27_from_mirror"></span><span class="mw-headline" id="Failed_retrieving_file_'core.db'_from_mirror">Failed retrieving file 'core.db' from mirror</span>
</h3>
<p>If you receive this error message with correct <a href="../en/Mirrors.html" title="Mirrors">mirrors</a>, try setting a different <a href="../en/Domain_name_resolution.html" class="mw-redirect" title="Resolv.conf">name server</a>.
</p>
<h3>
<span id="error:_.27local-package.pkg.tar.27:_permission_denied"></span><span class="mw-headline" id="error:_'local-package.pkg.tar':_permission_denied">error: 'local-package.pkg.tar': permission denied</span>
</h3>
<p>If you want to install a package on an sshfs mount using <code>pacman -U</code> and receive this error, move the package to a local directory and try to install again.
</p>
<h3>
<span id="error:_could_not_determine_cachedir_mount_point_.2Fvar.2Fcache.2Fpacman.2Fpkg"></span><span class="mw-headline" id="error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg">error: could not determine cachedir mount point /var/cache/pacman/pkg</span>
</h3>
<p>Upon executing, e.g., <code>pacman -Syu</code> inside a chroot environment an error is encountered:
</p>
<pre>error: could not determine cachedir mount point /var/cache/pacman/pkg
error: failed to commit transaction (not enough free disk space)
</pre>
<p>This is frequently caused by the chroot directory not being a mountpoint when the chroot is entered. See the note at <a href="../en/Install_Arch_Linux_from_existing_Linux.html#Downloading_basic_tools" title="Install Arch Linux from existing Linux">Install Arch Linux from existing Linux#Downloading basic tools</a> for a solution, and <span class="plainlinks archwiki-template-man" title="$ man 8 arch-chroot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/arch-chroot.8">arch-chroot(8)</a></span> for an explanation and an example of using bind mounting to make the chroot directory a mountpoint.
</p>
<h3><span class="mw-headline" id="error:_GPGME_error:_No_data">error: GPGME error: No data</span></h3>
<p>If you are unable to update packages and receive this error, then try <code>rm -r /var/lib/pacman/sync/</code> before attempting to update.
</p>
<p>If removing sync files doesn't help, check that the sync files are <code>gzip compressed data</code> using <code>file /var/lib/pacman/sync/*</code> before attempting to update. A router or proxy might corrupt the downloads. Corruption could possibly be HTML type.
</p>
<p>If sync files are of the correct type, there might be an issue with the mirror server. Look up the mirror server(s) in use with <code>pacman-conf -r core</code> and <code>pacman-conf -r extra</code>. Paste the first returned url in a browser and check that a file listing is returned. In case the mirror returns an error, comment it in <code>/etc/pacman.d/mirrorlist</code>. You may try updating or re-ranking <a href="../en/Mirrors.html" title="Mirrors">mirrors</a>.
</p>
<h3>
<span id="error:_GPGME_error:_General_error_and_.22::_File_.2Fvar.2Fcache.2Fpacman.2Fpkg.2F.3Cpackage.3E.pkg.tar.zst_is_corrupted_.28invalid_or_corrupted_package_.28PGP_signature.29.29."></span><span class="mw-headline" id='error:_GPGME_error:_General_error_and_"::_File_/var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst_is_corrupted_(invalid_or_corrupted_package_(PGP_signature)).'>error: GPGME error: General error and ":: File /var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst is corrupted (invalid or corrupted package (PGP signature)).</span>
</h3>
<p>If this error occurs and you're for instance unable to update your system or any package at all, it is possible that you have <code>DISPLAY</code> set to a blank value, which seems to break the GPG-Flow.
</p>
<p>In this case, <code>unset DISPLAY</code> or setting it to a arbitrary value will most likely allow to update again, in case any other option above didn't do the trick yet.
See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=2204786">this</a> post for further details.
</p>
<h3><span class="mw-headline" id="Reinstall_broken_or_out-of-sync_packages">Reinstall broken or out-of-sync packages</span></h3>
<p>One may use the <code>pacman -Qk $pkg</code> to check if the installed files of the <code>$pkg</code> package match the files from its database version. For several packages, one may use the following loop to
reinstall all packages which have missing file(s):
</p>
<pre># LC_ALL=C.UTF-8 pacman -Qk 2&gt;/dev/null | grep -v ' 0 missing files' | cut -d: -f1 |
    while read -r package; do
        pacman -S "$package" --noconfirm
    done
</pre>
<p>Suppose that your local database located in <code>/var/lib/pacman</code> is more up-to-date compared to installed packages in the <code>/</code> filesystem (<i>e.g.</i>, because of a partial rollback), then this method is the appropriate one to re-synchronize the root filesystem with the local database.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><span class="plainlinks archwiki-template-man" title="$ man 3 libalpm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libalpm.3">libalpm(3)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 pacman"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.8">pacman(8)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 repo-add"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/repo-add.8">repo-add(8)</a></span></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Arch_projects.html" title="Category:Arch projects">Arch projects</a></li>
<li><a href="../en/Category:Package_manager.html" title="Category:Package manager">Package manager</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pacman&amp;oldid=834636">https://wiki.archlinux.org/index.php?title=Pacman&amp;oldid=834636</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 26 May 2025, at 14:34.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
