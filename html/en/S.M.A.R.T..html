<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>S.M.A.R.T. - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-S_M_A_R_T rootpage-S_M_A_R_T skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Smartmontools" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Smartmontools">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Smartmontools</div>
		</a>
		
			<button aria-controls="toc-Smartmontools-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Smartmontools subsection</span>
			</button>
		
		<ul id="toc-Smartmontools-sublist" class="vector-toc-list">
			<li id="toc-smartctl" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#smartctl">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>smartctl</div>
			</a>
			
			<ul id="toc-smartctl-sublist" class="vector-toc-list">
				<li id="toc-Run_a_test" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Run_a_test">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>Run a test</div>
			</a>
			
			<ul id="toc-Run_a_test-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-View_test_results" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#View_test_results">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>View test results</div>
			</a>
			
			<ul id="toc-View_test_results-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_table_with_attributes_of_all_disks" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Generate_table_with_attributes_of_all_disks">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.3</span>Generate table with attributes of all disks</div>
			</a>
			
			<ul id="toc-Generate_table_with_attributes_of_all_disks-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-smartd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#smartd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>smartd</div>
			</a>
			
			<ul id="toc-smartd-sublist" class="vector-toc-list">
				<li id="toc-daemon_management" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#daemon_management">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.1</span>daemon management</div>
			</a>
			
			<ul id="toc-daemon_management-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Define_the_devices_to_monitor" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Define_the_devices_to_monitor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.2</span>Define the devices to monitor</div>
			</a>
			
			<ul id="toc-Define_the_devices_to_monitor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Notifying_potential_problems" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Notifying_potential_problems">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.3</span>Notifying potential problems</div>
			</a>
			
			<ul id="toc-Notifying_potential_problems-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Power_management" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Power_management">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.4</span>Power management</div>
			</a>
			
			<ul id="toc-Power_management-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Schedule_self-tests" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Schedule_self-tests">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.5</span>Schedule self-tests</div>
			</a>
			
			<ul id="toc-Schedule_self-tests-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alert_on_temperature_changes" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Alert_on_temperature_changes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.6</span>Alert on temperature changes</div>
			</a>
			
			<ul id="toc-Alert_on_temperature_changes-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Complete_smartd.conf_example" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Complete_smartd.conf_example">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.7</span>Complete smartd.conf example</div>
			</a>
			
			<ul id="toc-Complete_smartd.conf_example-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-update-smart-drivedb" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#update-smart-drivedb">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>update-smart-drivedb</div>
			</a>
			
			<ul id="toc-update-smart-drivedb-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Console_applications" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Console_applications">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Console applications</div>
		</a>
		
		<ul id="toc-Console_applications-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-GUI_applications" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#GUI_applications">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>GUI applications</div>
		</a>
		
		<ul id="toc-GUI_applications-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">S.M.A.R.T.</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/S.M.A.R.T..html" title="S.M.A.R.T. – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/S.M.A.R.T." title="S.M.A.R.T. – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/S.M.A.R.T..html" title="S.M.A.R.T. – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><a href="https://en.wikipedia.org/wiki/Self-Monitoring,_Analysis_and_Reporting_Technology" class="extiw" title="wikipedia:Self-Monitoring, Analysis and Reporting Technology">S.M.A.R.T.</a> (Self-Monitoring, Analysis, and Reporting Technology) is a supplementary component built into many modern storage devices through which devices monitor, store, and analyze the health of their operation.  Statistics are collected (temperature, number of reallocated sectors, seek errors...) which software can use to measure the health of a device, predict possible device failure, and provide notifications on unsafe values.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Smartmontools">Smartmontools</span></h2>
<p>The smartmontools package contains two utility programs for analyzing and monitoring storage devices: <code>smartctl</code> and <code>smartd</code> and a 3rd database update utility <code>update-smart-drivedb</code>.
</p>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smartmontools">smartmontools</a></span> package to use these tools.
</p>
<p>SMART support must be available and enabled on each storage device to effectively use these tools. You can use <a href="#smartctl">#smartctl</a> to check for and enable SMART support. That done, you can manually <a href="#Run_a_test">#Run a test</a> and <a href="#View_test_results">#View test results</a>, or you can use <a href="#smartd">#smartd</a> to automatically run tests and email notifications.
</p>
<h3><span class="mw-headline" id="smartctl">smartctl</span></h3>
<p>smartctl is a command-line tool that "controls the  Self-Monitoring, Analysis and Reporting Technology (SMART) system built into most ATA/SATA and SCSI/SAS hard drives and solid-state drives."
</p>
<p>The <code>-i</code>/<code>--info</code> option prints a variety of information about a device, including whether SMART is available and enabled:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># smartctl --info /dev/sda | grep 'SMART support is:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SMART support is: Available - device has SMART capability.
SMART support is: Enabled
</pre>
<p>If SMART is available but not enabled, you can enable it:
</p>
<pre># smartctl --smart=on /dev/<i>device</i>
</pre>
<p>You may need to specify a device type. For example, specifying <code>--device=ata</code> tells smartctl that the device type is ATA, and this prevents smartctl from issuing SCSI commands to that device.
</p>
<h4><span class="mw-headline" id="Run_a_test">Run a test</span></h4>
<p>There are three types of self-tests that a device can execute (all are safe to user data):
</p>
<ul>
<li>Short: runs tests that have a high probability of detecting device problems,</li>
<li>Extended or Long: the test is the same as the short check but with no time limit and with complete disk surface examination,</li>
<li>Conveyance: identifies if damage incurred during transportation of the device.</li>
<li>Selective: tests a range of LBA (read <span class="plainlinks archwiki-template-man" title="$ man 8 smartctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smartctl.8#t">smartctl(8) § t</a></span> for more).</li>
</ul>
<p>The <code>-c</code>/<code>--capabilities</code> flag prints which tests a device supports and the approximate execution time of each test. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># smartctl -c /dev/sda</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Short self-test routine
recommended polling time:        (   1) minutes.
Extended self-test routine
recommended polling time:        (  74) minutes.
Conveyance self-test routine
recommended polling time:        (   2) minutes.
...
</pre>
<p>Use <code>-t</code>/<code>--test=<i>test_name</i></code> flag to run a test:
</p>
<pre># smartctl -t short /dev/<i>device</i>
# smartctl -t long /dev/<i>device</i>
# smartctl -t conveyance /dev/<i>device</i>
# smartctl -t select,123+345 /dev/<i>device</i>
</pre>
<h4><span class="mw-headline" id="View_test_results">View test results</span></h4>
<p>You can view a device's overall health with the <code>-H</code> flag. "If the device reports failing health status, this means either that the device has already failed, or that it is predicting its own failure within the next 24 hours. If this happens […] get your data off the disk and to someplace safe as soon as you can."
</p>
<pre># smartctl -H /dev/<i>device</i>
</pre>
<p>You can also view a list of recent test results and detailed information about a device:
</p>
<pre># smartctl -l selftest /dev/<i>device</i>
# smartctl -x /dev/<i>device</i>
</pre>
<h4><span class="mw-headline" id="Generate_table_with_attributes_of_all_disks">Generate table with attributes of all disks</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> The wiki is not a code development platform. Long scripts should be maintained elsewhere. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:S.M.A.R.T..html">Talk:S.M.A.R.T.</a>)</div>
</div>
<pre>#!/bin/bash
function drives_csv {
	declare -A drive_values
	for d in `smartctl --scan -d scsi | cut -d' ' -f1`; do
		drive_values["-Drive-----------------"]="${drive_values[-Drive-----------------]},$d"
		for l in `smartctl -A $d | grep ATTRIBUTE_NAME -A30 | grep -v ATTRIBUTE_NAME | column -H1,3,4,5,6,7,8,9,11,12,13,14,15 -t -o, | sed 's/ //g'`; do
			key=`echo $l | cut -d',' -f1`
			value=`echo $l | cut -d',' -f2`
			existing=${drive_values["$key"]}
			drive_values["${key}"]="${existing},${value}"
			#~ echo "${key},${drive_values[$key]}"
		done
	done
	for key in "${!drive_values[@]}"; do
		echo "${key}${drive_values[$key]}"
	done | sort
}
drives_csv | column -s, -t
</pre>
<h3><span class="mw-headline" id="smartd">smartd</span></h3>
<p>The smartd daemon monitors SMART statuses and emits notifications when something goes wrong. It can be managed with systemd and configured using the <code>/etc/smartd.conf</code> configuration file. The configuration file syntax is esoteric, and this wiki page provides only a quick reference. For more complete information, read the examples and comments within the configuration file, or read <span class="plainlinks archwiki-template-man" title="$ man 5 smartd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smartd.conf.5">smartd.conf(5)</a></span>.
</p>
<h4><span class="mw-headline" id="daemon_management">daemon management</span></h4>
<p>To start the daemon, check its status, make it auto-start on system boot and read recent log file entries, simply <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> the <code>smartd.service</code> systemd unit.
</p>
<h4><span class="mw-headline" id="Define_the_devices_to_monitor">Define the devices to monitor</span></h4>
<p>To monitor for all possible SMART errors on all disks, the following setting must be added in the configuration file.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -a</pre>
<p>Note this is the default <i>smartd</i> configuration and the <code>-a</code> parameter, which is the default parameter, may be omitted.
</p>
<p>To monitor for all possible SMART errors on <code>/dev/sda</code> and <code>/dev/sdb</code>, and ignore all other devices:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sda -a
/dev/sdb -a
</pre>
<p>To monitor for all possible SMART errors on externally connected disks (USB-backup disks spring to mind) it is prudent to tell <i>smartd</i> the UUID of the device since the <code>/dev/sd<i>X</i></code> of the drive might change during a reboot.
</p>
<p>First, you will have to get the UUID of the disk to monitor: <code>ls -lah /dev/disk/by-uuid/</code> now look for the disk you want to Monitor
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -lah /dev/disk/by-uuid/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">lrwxrwxrwx 1 root root   9 Nov  5 22:41 820cdd8a-866a-444d-833c-1edb0f4becac -&gt; ../../sde
lrwxrwxrwx 1 root root  10 Nov  5 22:41 b51b87f3-425e-4fe7-883f-f4ff1689189e -&gt; ../../sdf2
lrwxrwxrwx 1 root root   9 Nov  5 22:42 ea2199dd-8f9f-4065-a7ba-71bde11a462c -&gt; ../../sda
lrwxrwxrwx 1 root root  10 Nov  5 22:41 fe9e886a-8031-439f-a909-ad06c494fadb -&gt; ../../sdf1
</pre>
<p>In this example, the target device is <i>sde</i>. Now to tell <i>smartd</i> to monitor that disk simply use the <code>/dev/disk/by-uuid/</code> path.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/disk/by-uuid/820cdd8a-866a-444d-833c-1edb0f4becac -a
</pre>
<p>Note that you may additionally need <code>-d removable</code> for <i>smartd</i> to work.
</p>
<p>Now your USB disk will be monitored even if the <code>/dev/sd<i>X</i></code> path changes during reboot.
</p>
<h4><span class="mw-headline" id="Notifying_potential_problems">Notifying potential problems</span></h4>
<p>To have an email sent when a failure or new error occurs, use the <code>-m</code> option:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -m address@domain.com
</pre>
<p>To be able to send the email externally (i.e. not to the root mail account) a MTA (Mail Transport Agent) or a MUA (Mail User Agent) will need to be installed and configured. Common MUAs are <a href="../en/Msmtp.html" title="Msmtp">msmtp</a> and <a href="../en/Postfix.html" title="Postfix">Postfix</a>, but perhaps the easiest <a href="../en/Dma.html" title="Dma">dma</a> will suffice. Common MTAs are sendmail and <a href="../en/Postfix.html" title="Postfix">Postfix</a>. It is enough to simply configure <a href="../en/S-nail.html" title="S-nail">S-nail</a> if you do not want anything else, but you will need to follow <a rel="nofollow" class="external text" href="//web.archive.org/web/20161011211420/https://dominicm.com/configure-email-notifications-on-arch-linux/">these instructions</a>.
</p>
<p>The <code>-M test</code> option causes a test email to be sent each time the smartd daemon starts:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -m address@domain.com -M test
</pre>
<p>Emails can take quite a while to be delivered. To make sure you are warned immediately if your hard drive fails, you may also define a script to be executed in addition to the email sending:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -m address@domain.com -M exec /usr/local/bin/smartdnotify
</pre>
<p>To send an email and a system notification, put something like this into <code>/usr/local/bin/smartdnotify</code>:
</p>
<pre>#!/bin/sh
# Send email
echo "$SMARTD_MESSAGE" | mail -s "$SMARTD_FAILTYPE" "$SMARTD_ADDRESS"
# Notify user
wall "$SMARTD_MESSAGE"
</pre>
<p>If you are running a desktop environment, you might also prefer having a popup to appear on your desktop. In this case, you can use this script (replace <code><i>X_user</i></code> and <code><i>X_userid</i></code> with the user and userid running X respectively) :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/smartdnotify</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

sudo -u <i>X_user</i> DISPLAY=:0 DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/<i>X_userid</i>/bus notify-send "S.M.A.R.T Error ($SMARTD_FAILTYPE)" "$SMARTD_MESSAGE" --icon=dialog-warning -u critical</pre>
<p>This requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libnotify">libnotify</a></span> and a compatible desktop environment. See <a href="../en/Desktop_notifications.html" title="Desktop notifications">Desktop notifications</a> for more details.
</p>
<p>You can also put your custom scripts into <code>/usr/share/smartmontools/smartd_warning.d/</code>:
</p>
<p>This scripts notifies every logged in users on the system via libnotify.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/smartmontools/smartd_warning.d/smartdnotify</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

IFS=$'\n'
for LINE in `w -hs`
do
    USER=`echo $LINE | awk '{print $1}'`
    USER_ID=`id -u $USER`
    DISP_ID=`echo $LINE | awk '{print $8}'`
    sudo -u $USER DISPLAY=$DISP_ID DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/$USER_ID/bus notify-send "S.M.A.R.T Error ($SMARTD_FAILTYPE)" "$SMARTD_MESSAGE" --icon=dialog-warning -u critical
done</pre>
<p>This script requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libnotify">libnotify</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=procps-ng">procps-ng</a></span> and a compatible desktop environment.
</p>
<p>
You can execute your custom scripts with </p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -m @smartdnotify</pre>
<h4><span class="mw-headline" id="Power_management">Power management</span></h4>
<p>If you use a computer under control of power management, you should instruct smartd how to handle disks in low power mode. Usually, in response to SMART commands issued by smartd, the disk platters are spun up. So if this option is not used, then a disk which is in a low-power mode may be spun up and put into a higher-power mode when it is periodically polled by smartd.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -n standby,15,q
</pre>
<p>More info on <a rel="nofollow" class="external text" href="https://www.smartmontools.org/wiki/Powermode">smartmontools wiki</a>.
</p>
<p>On some devices the <code>-n</code> does not work. You get the following error message in syslog:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># journalctl -u smartd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CHECK POWER MODE: incomplete response, ATA output registers missing
Device: /dev/sdb [SAT], no ATA CHECK POWER STATUS support, ignoring -n Directive
</pre>
<p>As an alternative, you can use the <code>-i</code> option of smartd. It controls how often smartd spins the disks up to check their status. Default is 30 minutes. To change it, edit <code>/etc/conf.d/smartd</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/conf.d/smartd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SMARTD_ARGS="-i 10800"  Check status every 10800 seconds (3 hours)</pre>
<p>For more info see <span class="plainlinks archwiki-template-man" title="$ man 8 smartd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smartd.8">smartd(8)</a></span>.
</p>
<h4><span class="mw-headline" id="Schedule_self-tests">Schedule self-tests</span></h4>
<p>smartd can tell disks to perform self-tests on a schedule. The following <code>/etc/smartd.conf</code> configuration will start a short self-test every day between 2-3am, and an extended self test weekly on Saturdays between 3-4am:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -s (S/../.././02|L/../../6/03)
</pre>
<h4><span class="mw-headline" id="Alert_on_temperature_changes">Alert on temperature changes</span></h4>
<p>smartd can track disk temperatures and alert if they rise too quickly or hit a high limit. The following will log changes of 4 degrees or more, log when temp reaches 35 degrees, and log/email a warning when temp reaches 40:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -W 4,35,40
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>You can determine the current disk temperature with the command <code>smartctl -A /dev/<i>device</i> | grep Temperature_Celsius</code>
</li>
<li>If you have some disks that run a lot hotter/cooler than others, remove <code>DEVICESCAN</code> and define a separate configuration for each device with appropriate temperature settings.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Complete_smartd.conf_example">Complete smartd.conf example</span></h4>
<p>Putting together all of the above gives the following example configuration:
</p>
<ul>
<li>
<code>DEVICESCAN</code> smartd scans for disks and monitors all it finds</li>
<li>
<code>-a</code> monitor all attributes</li>
<li>
<code>-o on</code> enable automatic offline data collection</li>
<li>
<code>-S on</code> enable automatic attribute autosave</li>
<li>
<code>-n standby,q</code> do not check if disk is in standby, and suppress log message to that effect so as not to cause a write to disk</li>
<li>
<code>-s ...</code> schedule short and long self-tests</li>
<li>
<code>-W ...</code> monitor temperature</li>
<li>
<code>-m ...</code> mail alerts</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -a -o on -S on -n standby,q -s (S/../.././02|L/../../6/03) -W 4,35,40 -m <i>username-or-email</i>
</pre>
<h3><span class="mw-headline" id="update-smart-drivedb">update-smart-drivedb</span></h3>
<p>This utility downloads the latest version of <code>drivedb.h</code> from the smartmontools source repository so that new drives and their parameters are understood.
</p>
<p>The downloaded file can replace the default one located at <code>/usr/share/smartmontools/drivedb.h</code> and is a plaintext file that contains comma separated values for each drive.
</p>
<p>If your drive is not yet recognised, it can be <a rel="nofollow" class="external text" href="https://www.smartmontools.org/wiki/FAQ#MyATASATAdriveisnotinthesmartctlsmartddatabase">submitted upstream</a>.
</p>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 8 update-smart-drivedb"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/update-smart-drivedb.8">update-smart-drivedb(8)</a></span> for full command line options.
</p>
<h2><span class="mw-headline" id="Console_applications">Console applications</span></h2>
<ul><li>
<b>skdump</b> — utility to monitor and manage SMART devices to monitor and report hard disk drive health.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://0pointer.de/blog/projects/being-smart.html">https://0pointer.de/blog/projects/being-smart.html</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libatasmart">libatasmart</a></span>
</dd></dl>
<ul><li>
<code>iostat -x</code> (from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sysstat">sysstat</a></span>) also provides some disk health metrics: in particular, high values in the f_await column mean that the disk does not respond quickly to requests, and might be failing.</li></ul>
<h2><span class="mw-headline" id="GUI_applications">GUI applications</span></h2>
<ul><li>
<b>DisKMonitor</b> — Tools for KDE to monitor SMART devices and MDRaid health status.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/papylhomme/diskmonitor">https://github.com/papylhomme/diskmonitor</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/diskmonitor/">diskmonitor</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b><a href="https://en.wikipedia.org/wiki/GNOME_Disks" class="extiw" title="wikipedia:GNOME Disks">GNOME Disks</a></b> — GNOME frontend which uses <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libatasmart">libatasmart</a></span> to monitor and report hard disk drive health. Part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome/">gnome</a></span>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://apps.gnome.org/DiskUtility/">https://apps.gnome.org/DiskUtility/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-disk-utility">gnome-disk-utility</a></span>
</dd></dl>
<ul><li>
<b>GSmartControl</b> — GUI for smartctl. It allows you to inspect the drive's SMART data to determine its health, as well as run various tests on it.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gsmartcontrol.shaduri.dev/">https://gsmartcontrol.shaduri.dev/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gsmartcontrol">gsmartcontrol</a></span>
</dd></dl>
<ul><li>
<b>Plasma Disks</b> — Hard disk health monitoring for KDE Plasma. Part of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/plasma/">plasma</a></span>.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://invent.kde.org/plasma/plasma-disks/">https://invent.kde.org/plasma/plasma-disks/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-disks">plasma-disks</a></span>
</dd></dl>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.smartmontools.org/">Smartmontools Homepage</a></li>
<li><a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/Smartmontools">Smartmontools on Ubuntu Wiki</a></li>
<li><a href="https://wiki.gentoo.org/wiki/smartmontools" class="extiw" title="gentoo:smartmontools">Gentoo: smartmontools</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Storage.html" title="Category:Storage">Storage</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=S.M.A.R.T.&amp;oldid=809164">https://wiki.archlinux.org/index.php?title=S.M.A.R.T.&amp;oldid=809164</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 May 2024, at 16:49.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
