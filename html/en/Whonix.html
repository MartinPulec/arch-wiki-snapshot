<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Whonix - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Whonix rootpage-Whonix skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Background_on_Whonix_and_Tor" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Background_on_Whonix_and_Tor">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Background on Whonix and Tor</div>
		</a>
		
		<ul id="toc-Background_on_Whonix_and_Tor-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Downloading_and_Installing_Whonix_Gateway" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Downloading_and_Installing_Whonix_Gateway">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Downloading and Installing Whonix Gateway</div>
		</a>
		
			<button aria-controls="toc-Downloading_and_Installing_Whonix_Gateway-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Downloading and Installing Whonix Gateway subsection</span>
			</button>
		
		<ul id="toc-Downloading_and_Installing_Whonix_Gateway-sublist" class="vector-toc-list">
			<li id="toc-Download_and_install_the_Whonix_Gateway" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Download_and_install_the_Whonix_Gateway">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Download and install the Whonix Gateway</div>
			</a>
			
			<ul id="toc-Download_and_install_the_Whonix_Gateway-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Update_the_Whonix_Gateway" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Update_the_Whonix_Gateway">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Update the Whonix Gateway</div>
			</a>
			
			<ul id="toc-Update_the_Whonix_Gateway-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installation_of_Arch_as_a_Whonix_Workstation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation_of_Arch_as_a_Whonix_Workstation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Installation of Arch as a Whonix Workstation</div>
		</a>
		
			<button aria-controls="toc-Installation_of_Arch_as_a_Whonix_Workstation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation of Arch as a Whonix Workstation subsection</span>
			</button>
		
		<ul id="toc-Installation_of_Arch_as_a_Whonix_Workstation-sublist" class="vector-toc-list">
			<li id="toc-Starting_Arch_inside_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Starting_Arch_inside_VirtualBox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Starting Arch inside VirtualBox</div>
			</a>
			
			<ul id="toc-Starting_Arch_inside_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Connecting_to_internet_during_Arch_install" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connecting_to_internet_during_Arch_install">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Connecting to internet during Arch install</div>
			</a>
			
			<ul id="toc-Connecting_to_internet_during_Arch_install-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mapping_files_over_to_your_arch-chroot_installation_environment" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mapping_files_over_to_your_arch-chroot_installation_environment">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Mapping files over to your arch-chroot installation environment</div>
			</a>
			
			<ul id="toc-Mapping_files_over_to_your_arch-chroot_installation_environment-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tor_Check" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tor_Check">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Tor Check</div>
			</a>
			
			<ul id="toc-Tor_Check-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-(Optional)_Post-Installation_considerations" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#(Optional)_Post-Installation_considerations">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>(Optional) Post-Installation considerations</div>
		</a>
		
			<button aria-controls="toc-(Optional)_Post-Installation_considerations-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle (Optional) Post-Installation considerations subsection</span>
			</button>
		
		<ul id="toc-(Optional)_Post-Installation_considerations-sublist" class="vector-toc-list">
			<li id="toc-Installing_Tor_Browser" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installing_Tor_Browser">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Installing Tor Browser</div>
			</a>
			
			<ul id="toc-Installing_Tor_Browser-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DNS_Leak_Tests" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#DNS_Leak_Tests">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>DNS Leak Tests</div>
			</a>
			
			<ul id="toc-DNS_Leak_Tests-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Familiarize_yourself_with_the_strengths_and_weaknesses_of_both_the_Whonix_model_and_Tor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Familiarize_yourself_with_the_strengths_and_weaknesses_of_both_the_Whonix_model_and_Tor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Familiarize yourself with the strengths and weaknesses of both the Whonix model and Tor</div>
			</a>
			
			<ul id="toc-Familiarize_yourself_with_the_strengths_and_weaknesses_of_both_the_Whonix_model_and_Tor-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Whonix</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Whonix" title="Whonix – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><a rel="nofollow" class="external text" href="https://www.whonix.org">Whonix</a> is a desktop operating system setup designed for advanced security and privacy. This page describes how an Arch user may use a Whonix Gateway to route all traffic through <a href="../en/Tor.html" title="Tor">Tor</a> and receive many other the security benefits from compartmentalization as described below.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Background_on_Whonix_and_Tor">Background on Whonix and Tor</span></h2>
<p>The Whonix setup works by compartmentalizing two separate operating systems running inside of two separate virtual machines for greater security, while simultaneously routing all traffic through <a href="../en/Tor.html" title="Tor">Tor</a>.  This greater security model <a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/Main_Page">provides several benifits</a>:
</p>
<ul>
<li>Only connections through <a href="../en/Tor.html" title="Tor">Tor</a> are permitted.</li>
<li>Servers can be run, and applications used, anonymously over the internet.</li>
<li>DNS leaks are impossible.</li>
<li>Malware with root privileges cannot discover the user's real IP address.</li>
<li>Threats posed by misbehaving applications and user error are minimized.</li>
</ul>
<p><a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/Comparison_with_Others">The Whonix wiki</a> provides many specific examples of attacks and software flaws that would normally pose a security and/or privacy problem, but are thwarted by this compartmentalization model.  It also describes where this model may still fail so it is an important page to understand. 
</p>
<p>The first operating system is "The Workstation" and is the OS you perform your normal everyday tasks in. The second is "The Gateway" that forces all traffic from the Workstation through Tor while providing the additional security benefits listed above.
</p>
<p>The main Whonix team provides both a Gateway and Workstation running on top of Debian, but Arch users may enjoy using Arch as their main Workstation OS. This page describes how that can to be done.
</p>
<h2><span class="mw-headline" id="Downloading_and_Installing_Whonix_Gateway">Downloading and Installing Whonix Gateway</span></h2>
<p>You will not use the Gateway for everyday tasks.  It only serves to compartmentalize your Workstation activity from the internet while routing all traffic through Tor.
</p>
<h3><span class="mw-headline" id="Download_and_install_the_Whonix_Gateway">Download and install the Whonix Gateway</span></h3>
<p>Go to the <a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/VirtualBox">Whonix VirtualBox page</a>, download the "Whonix-Gateway" using one of the download options available, then verify download using one of the methods described on that page.  Make sure you also have <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a> installed. 
</p>
<p>Next, import the Whonix-Gateway inside VirtualBox by going to, <i>File &gt; Import Appliance &gt; Whonix-Gateway-&lt;version&gt;.ova</i>, to select the Gateway file just downloaded, then agree to the conditions that describe system requirements and security considerations for using Whonix. It may be helpful to follow the instructions provided on the Whonix download page previously linked . There are also <a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/Videos">video tutorials available</a> demonstrating this process. 
</p>
<p>After the appliance has been installed, start the Gateway using the start icon.
</p>
<h3><span class="mw-headline" id="Update_the_Whonix_Gateway">Update the Whonix Gateway</span></h3>
<p>Before we start Arch, we need to agree to the terms and ensure our Whonix Gateway has all up-to-date security patches. As with importing the appliance above, the terms you must agree to state that you understand the security considerations for running Whonix. After booting up the Gateway agree to these terms, state that you intend on using the stable repository and check "I am ready to enable TOR". After this, open a terminal. It will present you with information how to login as either root or a normal user.  
</p>
<p>Log in inside of this terminal as root and run:
</p>
<pre># apt-get update
</pre>
<pre># apt-get dist-upgrade
</pre>
<p>Then reboot your Whonix Gateway.  After rebooting, open a terminal and this time log in as the normal user.  Run the whonix check:
</p>
<pre>$ whonixcheck
</pre>
<p>You may also run nyx:
</p>
<pre>$ nyx
</pre>
<p>To monitor traffic through the gateway.
</p>
<h2><span class="mw-headline" id="Installation_of_Arch_as_a_Whonix_Workstation">Installation of Arch as a Whonix Workstation</span></h2>
<h3><span class="mw-headline" id="Starting_Arch_inside_VirtualBox">Starting Arch inside VirtualBox</span></h3>
<p>After you have installed the Whonix-Gateway, and while the Gateway is running, install an instance of Arch inside a separate <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a> instance. This is installation process is done as normal, save a few important steps described below, and so one should follow the <a href="../en/Installation_guide.html" title="Installation guide">Installation guide</a>.
</p>
<p>After creating the Arch instance, and before starting, three important settings need to be selected.  First, the network has to point to the running Whonix-Gateway. To do this, select <i>Settings &gt; Network &gt; Attached to &gt; Internal Network &gt; Whonix</i> to select networking through Whonix.
</p>
<p>Also it is best if PAE is enabled so select <i>Settings &gt; System &gt; Processor &gt; Extended Features &gt; Enable PAE/NX</i>.
</p>
<p>Lastly, select the Arch installation iso you downloaded as your boot storage by going to <i>Settings &gt; Storage &gt; Empty &gt; Optical Drive &gt; Choose Virtual Optical Disk File &gt; archlinux-&lt;version&gt;.iso</i>.
</p>
<p>After these three settings have been selected, start your Arch VirtualBox instance.
</p>
<h3><span class="mw-headline" id="Connecting_to_internet_during_Arch_install">Connecting to internet during Arch install</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Duplicates <a href="../en/Network_configuration.html" title="Network configuration">Network configuration</a>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Whonix.html">Talk:Whonix</a>)</div>
</div>
<p>When connecting a non-preset Workstation to the internet through a Whonix Gateway a few settings must be set manually <a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/VirtualBox">as described here</a>.  The address must be set to 10.152.152.50, the netmask to 255.255.192.0, the gateway to 10.152.152.10 and the nameserver to 10.152.152.10.  First, find your interface by running:
</p>
<pre># ip a
</pre>
<p>and look for your ethernet interface.  Something like eth0 or enp0s3 is common. Next, deactivate the interface with:
</p>
<pre># ip link set <i>interface</i> down
</pre>
<p>Where <code><i>interface</i></code> is replaced with the name of the interface found above.  Next we must configure the static network connection to use the values shown above.  Perhaps the easiest way is to copy the static example file:
</p>
<pre># cp /etc/netctl/examples/ethernet-static /etc/netctl/whonix
</pre>
<p>Then replace the contents of that file with:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/netctl/whonix</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Description='Whonix static ethernet connection'
Interface=enp0s3
Connection=ethernet
IP=static
Address=('10.152.152.50/18')
Gateway='10.152.152.10'
</pre>
<p>Where you should use replace enp0s3 with your <code><i>interface</i></code> found above. The /18 is <a rel="nofollow" class="external text" href="https://saloperie.com/docs/mask.html">CIDR notation</a> for the above netmask. Then edit <code>/etc/resolv.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/resolv.conf:</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">nameserver 10.152.152.10
</pre>
<p>Then edit <code>/etc/environment</code> to prevent potential <a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/Tor_Browser/Advanced_Users#Platform-specific_Issues:_Whonix_.E2.84.A2_Custom_Linux_Workstation">Tor over Tor problems</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/environment</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TOR_SKIP_LAUNCH=1
TOR_NO_DISPLAY_NETWORK_SETTINGS=1
TOR_SKIP_CONTROLPORTTEST=1</pre>
<p>Now enable the Whonix network connection:
</p>
<pre># netctl start whonix
</pre>
<p>And bring your interface back up:
</p>
<pre># ip link set <i>interface</i> up
</pre>
<p>Where once again <code><i>interface</i></code> should be replaced with your interface. Next, confirm that the address 10.152.152.50/18 now shows up under your interface using:
</p>
<pre># ip a
</pre>
<p>If that checks out, try loading your favorite website such as:
</p>
<pre># lynx www.google.com
</pre>
<p>If lynx successfully loads a website, then the internet is working through Whonix.  Running "nyx" inside the Gateway as described above will further confirm that the packets are being sent across the Gateway.
</p>
<h3><span class="mw-headline" id="Mapping_files_over_to_your_arch-chroot_installation_environment">Mapping files over to your arch-chroot installation environment</span></h3>
<p>Once these files have been edited and your internet is working, proceed with the normal Arch installation process. Preparing drives, formatting, etc. Then after you run pacstrap, but before you arch-chroot into your installation chroot, you need to copy the files you created above over.
</p>
<pre># cp /etc/netctl/whonix /mnt/etc/netctl/whonix
</pre>
<pre># cp /etc/resolv.conf /mnt/etc/resolv.conf
</pre>
<pre># cp /etc/environment /mnt/etc/environment
</pre>
<p>Then perform the standard arch-chroot and enable your network settings there:
</p>
<pre># arch-chroot /mnt
</pre>
<pre># netctl enable whonix
</pre>
<p>Make sure you are still connected to the internet, and complete your Arch installation as you would normally. Set up root password, boot loader, etc. It is important that you set your timezone to UTC to match the Gateway.  Once the installation is done, reboot.
</p>
<h3><span class="mw-headline" id="Tor_Check">Tor Check</span></h3>
<p>Once your installation is completed, you have rebooted into Arch, and verified the Whonix Gateway is running, you should be able to access the internet routed through Tor.  You can verify traffic is being routed through Tor by installing your favorite web browser and <a rel="nofollow" class="external text" href="https://check.torproject.org/">performing the Tor Check</a>.  This Tor Check should explicitly say you are using Tor.
</p>
<h2>
<span id=".28Optional.29_Post-Installation_considerations"></span><span class="mw-headline" id="(Optional)_Post-Installation_considerations">(Optional) Post-Installation considerations</span>
</h2>
<h3><span class="mw-headline" id="Installing_Tor_Browser">Installing Tor Browser</span></h3>
<p>The standard web-browsers one would install in Arch will be forced to route all traffic through Tor and will receive all the benefits of Whonix compartmentalization.  This can easily easily be checked by <a rel="nofollow" class="external text" href="https://check.torproject.org/">performing the Tor Check</a> as well as other DNS tests described below.  
</p>
<p>However, some might like to use the official Tor browser that comes with extra add-ons and security audits for use with Tor.  To install the Tor browser, <a rel="nofollow" class="external text" href="https://www.torproject.org/download/download.html">download the browser from here</a> and extract it into ~/.tb as follows. 
</p>
<pre>$ mkdir -p ~/.tb
</pre>
<pre>$ tar -xf tor-browser-<i>version</i>.tar.xz
</pre>
<pre>$ mv tor-browser_<i>version</i> ~/.tb/tor-browser
</pre>
<p>After the Tor Browser is installed we need to set the configuration to access Tor properly through the Whonix Gateway which is done by editing the following file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.tb/tor-browser/Browser/TorBrowser/Data/Browser/profile.default/user.js</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">user_pref("extensions.torbutton.use_privoxy", false);
user_pref("extensions.torbutton.settings_method", "custom");
user_pref("extensions.torbutton.socks_host", "10.152.152.10");
user_pref("extensions.torbutton.socks_port", 9100);
user_pref("network.proxy.socks", "10.152.152.10");
user_pref("network.proxy.socks_port", 9100);
user_pref("extensions.torbutton.custom.socks_host", "10.152.152.10");
user_pref("extensions.torbutton.custom.socks_port", 9100);
user_pref("extensions.torlauncher.control_host", "10.152.152.10");
user_pref("extensions.torlauncher.control_port", 9052);
</pre>
<p>Now start the Tor Browser.
</p>
<pre>$ cd ~/.tb/tor-browser
</pre>
<pre>$ ./start-tor-browser.desktop
</pre>
<p>The <a rel="nofollow" class="external text" href="https://check.torproject.org/">Tor Check</a> should verify both that you are using Tor and the Tor Browser.
</p>
<h3><span class="mw-headline" id="DNS_Leak_Tests">DNS Leak Tests</span></h3>
<p>There are several Leak Tests one can preform to verify no traffic is leaking outside of tor:
</p>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.dnsleaktest.com">DNS Leak Test</a></li>
<li>
<a rel="nofollow" class="external text" href="https://dns-leak.com/">DNS-Data</a><sup title="Last check status: SSL error">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2024-03-03 ⓘ]</sup>
</li>
<li><a rel="nofollow" class="external text" href="https://dnsleak.com/">dnsleak.com</a></li>
</ul>
<p>These are also helpful for verifying that no location or other identifying information is being leaked.  
</p>
<p>The <a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/Dev/Leak_Tests">Whonix DNS Leak Test Wiki</a> has other helpful leak tests that can be performed in addition to checking websites.
</p>
<h3><span class="mw-headline" id="Familiarize_yourself_with_the_strengths_and_weaknesses_of_both_the_Whonix_model_and_Tor">Familiarize yourself with the strengths and weaknesses of both the Whonix model and Tor</span></h3>
<p>As suggested above, familiarize yourself with <a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/Main_Page">how the Whonix model works</a>, <a rel="nofollow" class="external text" href="https://www.whonix.org/wiki/Comparison_with_Others">the specific cases</a> it provides extra security and privacy benefits in comparison with other approaches, <a rel="nofollow" class="external text" href="https://www.torproject.org/about/overview.html.en">how Tor works</a> along with the benefits it provides, and the <a rel="nofollow" class="external text" href="https://support.torproject.org/#staying-anonymous">Tor project suggestions</a> for making Tor work more reliably. 
</p>
<p>There is no silver bullet to security and privacy, but understanding these concepts may bring many additional benefits when used properly.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Whonix&amp;oldid=813503">https://wiki.archlinux.org/index.php?title=Whonix&amp;oldid=813503</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 July 2024, at 20:54.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
