<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>GNOME/Keyring - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-GNOME_Keyring rootpage-GNOME skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Security_model" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Security_model">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Security model</div>
		</a>
		
		<ul id="toc-Security_model-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Manage_using_GUI" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Manage_using_GUI">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Manage using GUI</div>
		</a>
		
		<ul id="toc-Manage_using_GUI-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Using_the_keyring" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_the_keyring">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Using the keyring</div>
		</a>
		
			<button aria-controls="toc-Using_the_keyring-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Using the keyring subsection</span>
			</button>
		
		<ul id="toc-Using_the_keyring-sublist" class="vector-toc-list">
			<li id="toc-PAM_step" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PAM_step">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>PAM step</div>
			</a>
			
			<ul id="toc-PAM_step-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-SSH_keys" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#SSH_keys">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>SSH keys</div>
		</a>
		
			<button aria-controls="toc-SSH_keys-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle SSH keys subsection</span>
			</button>
		
		<ul id="toc-SSH_keys-sublist" class="vector-toc-list">
			<li id="toc-Setup_gcr" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Setup_gcr">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Setup gcr</div>
			</a>
			
			<ul id="toc-Setup_gcr-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Using</div>
			</a>
			
			<ul id="toc-Using-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disabling" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disabling">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Disabling</div>
			</a>
			
			<ul id="toc-Disabling-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Integration_with_applications" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Integration_with_applications">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Integration with applications</div>
			</a>
			
			<ul id="toc-Integration_with_applications-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Flushing_passphrases" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Flushing_passphrases">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Flushing passphrases</div>
			</a>
			
			<ul id="toc-Flushing_passphrases-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Git_integration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Git_integration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Git integration</div>
			</a>
			
			<ul id="toc-Git_integration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GnuPG_integration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GnuPG_integration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>GnuPG integration</div>
			</a>
			
			<ul id="toc-GnuPG_integration-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Renaming_a_keyring" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Renaming_a_keyring">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Renaming a keyring</div>
			</a>
			
			<ul id="toc-Renaming_a_keyring-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Automatically_change_keyring_password_with_user_password" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automatically_change_keyring_password_with_user_password">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>Automatically change keyring password with user password</div>
			</a>
			
			<ul id="toc-Automatically_change_keyring_password_with_user_password-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_gnome-keyring-daemon_outside_desktop_environments_(KDE,_GNOME,_XFCE,_...)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_gnome-keyring-daemon_outside_desktop_environments_(KDE,_GNOME,_XFCE,_...)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>Using gnome-keyring-daemon outside desktop environments (KDE, GNOME, XFCE, ...)</div>
			</a>
			
			<ul id="toc-Using_gnome-keyring-daemon_outside_desktop_environments_(KDE,_GNOME,_XFCE,_...)-sublist" class="vector-toc-list">
				<li id="toc-Launching" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Launching">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7.1</span>Launching</div>
			</a>
			
			<ul id="toc-Launching-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GNOME_Keyring_XDG_Portal" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GNOME_Keyring_XDG_Portal">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7.2</span>GNOME Keyring XDG Portal</div>
			</a>
			
			<ul id="toc-GNOME_Keyring_XDG_Portal-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Passwords_are_not_remembered" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Passwords_are_not_remembered">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>Passwords are not remembered</div>
			</a>
			
			<ul id="toc-Passwords_are_not_remembered-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Resetting_the_keyring" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Resetting_the_keyring">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.2</span>Resetting the keyring</div>
			</a>
			
			<ul id="toc-Resetting_the_keyring-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unable_to_locate_daemon_control_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unable_to_locate_daemon_control_file">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.3</span>Unable to locate daemon control file</div>
			</a>
			
			<ul id="toc-Unable_to_locate_daemon_control_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_such_secret_collection_at_path:_/" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_such_secret_collection_at_path:_/">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.4</span>No such secret collection at path: /</div>
			</a>
			
			<ul id="toc-No_such_secret_collection_at_path:_/-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Terminal_gives_the_message_"discover_other_daemon:_1"' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Terminal_gives_the_message_"discover_other_daemon:_1"'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.5</span>Terminal gives the message "discover_other_daemon: 1"</div>
			</a>
			
			<ul id='toc-Terminal_gives_the_message_"discover_other_daemon:_1"-sublist' class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">GNOME/Keyring</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-es mw-list-item"><a href="../../es/GNOME/Keyring.html" title="GNOME (Español)/Keyring – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/GNOME/Keyring" title="GNOME/Keyring – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/GNOME/Keyring" title="GNOME/Keyring – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../en/GNOME.html" title="GNOME">GNOME</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><br>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../../en/GnuPG.html" title="GnuPG">GnuPG</a></li>
<li><a href="../../en/OpenPGP.html" title="OpenPGP">OpenPGP</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/GnomeKeyring">GNOME Keyring</a> is "a collection of components in GNOME that store secrets, passwords, keys, certificates and make them available to applications."
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Security_model">Security model</span></h2>
<p>There was a security issue (known as <a rel="nofollow" class="external text" href="https://nvd.nist.gov/vuln/detail/CVE-2018-19358">CVE-2018-19358</a>) reported in the past regarding the behaviour of the GNOME/Keyring API. Any application <a rel="nofollow" class="external text" href="https://github.com/sungjungk/keyring_crack">can easily read any secret</a> if the keyring is unlocked. And, if a user is logged in, then the login/default collection is unlocked. Available D-Bus protection mechanisms (involving the busconfig and policy XML elements) are not used by default and would be easy to bypass anyway.
</p>
<p>The GNOME project <a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/gnome-keyring/-/issues/5#note_1876550">disagrees</a> with this vulnerability report because, according to their stated security model, untrusted applications must not be allowed to communicate with the secret service.
</p>
<p>Applications sandboxed via Flatpak only have filtered access to the session bus.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span> is a member of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome/">gnome</a></span> group is thus usually present on systems running GNOME. The package can otherwise be <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">installed</a> on its own. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsecret">libsecret</a></span> should also be installed to grant other applications access to your keyrings. Although <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libgnome-keyring">libgnome-keyring</a></span> is deprecated (and superseded by <i>libsecret</i>), it may still be required by certain applications.
</p>
<p>The gnome-keyring-daemon is automatically started via a systemd user service upon logging in. It can also be started upon request via a socket.
</p>
<p>Extra utilities related to GNOME Keyring include:
</p>
<ul><li>
<b>secret-tool</b> — Access the GNOME Keyring (and any other service implementing the <a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/secret-service/">DBus Secret Service API</a>) from the command line.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.gnome.org/Projects/Libsecret">https://wiki.gnome.org/Projects/Libsecret</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsecret">libsecret</a></span>
</dd></dl>
<ul><li>
<b>lssecret</b> — List all secret items using <i>libsecret</i> (e.g. GNOME Keyring).</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.com/GrantMoyer/lssecret">https://gitlab.com/GrantMoyer/lssecret</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lssecret-git/">lssecret-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2><span class="mw-headline" id="Manage_using_GUI">Manage using GUI</span></h2>
<p>You can manage the contents of GNOME Keyring using Seahorse; <a href="../../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=seahorse">seahorse</a></span> package.
</p>
<p>Passwords for keyrings (e.g., the default keyring, "Login") can be changed and even removed. See <a rel="nofollow" class="external text" href="https://help.gnome.org/users/seahorse/stable/keyring-create.html">Create a new keyring</a> and <a rel="nofollow" class="external text" href="https://help.gnome.org/users/seahorse/stable/keyring-update-password.html">Update the keyring password</a> in GNOME Help for more information.
</p>
<h2><span class="mw-headline" id="Using_the_keyring">Using the keyring</span></h2>
<p>The <a href="../../en/PAM.html" title="PAM">PAM</a> module <i>pam_gnome_keyring.so</i> initialises GNOME Keyring partially, unlocking the default <i>login</i> keyring in the process. The gnome-keyring-daemon is automatically started with a systemd user service.
</p>
<h3><span class="mw-headline" id="PAM_step">PAM step</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> To use automatic unlocking <b>without automatic login</b>, the password for the user account should be the same as the default keyring. See <a href="#Automatically_change_keyring_password_with_user_password">#Automatically change keyring password with user password</a>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>To use automatic unlocking with automatic login, you can set a blank password for the default keyring. Note that the contents of the keyring are stored unencrypted in this case.</li>
<li>Alternatively, if using GDM and LUKS, GDM can unlock your keyring if it matches your LUKS password. For this to work, you need to use the <a href="../../en/Mkinitcpio.html#Common_hooks" title="Mkinitcpio">systemd init in your mkinitcpio.conf</a> as well as the <a href="../../en/Dm-crypt/System_configuration.html#Using_systemd-cryptsetup-generator" title="Dm-crypt/System configuration">appropriate kernel parameters</a>. See <a rel="nofollow" class="external autonumber" href="https://reddit.com/r/Fedora/comments/jwnqq5/">[1]</a> for more details.</li>
<li>If you desire to skip the PAM step, the default keyring must be unlocked manually or via another method. See <a href="#Using_gnome-keyring-daemon_outside_desktop_environments_(KDE,_GNOME,_XFCE,_...)">#Using gnome-keyring-daemon outside desktop environments (KDE, GNOME, XFCE, ...)</a> and the <a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/GnomeKeyring/RunningDaemon">GnomeKeyring wiki</a>.</li>
</ul>
</div>
<p>When using a display manager, the keyring works out of the box for most cases. <a href="../../en/GDM.html" title="GDM">GDM</a>, <a href="../../en/LightDM.html" title="LightDM">LightDM</a>, <a href="../../en/LXDM.html" title="LXDM">LXDM</a>, and <a href="../../en/SDDM.html" title="SDDM">SDDM</a> already have the necessary PAM configuration. For a display manager that does not automatically unlock the keyring edit the appropriate file instead of <code>/etc/pam.d/login</code> as mentioned below.
</p>
<p>When using console-based login, edit <code>/etc/pam.d/login</code>:
</p>
<p>Add <code>auth optional pam_gnome_keyring.so</code> at the end of the <code>auth</code> section and <code>session optional pam_gnome_keyring.so auto_start</code> at the end of the <code>session</code> section.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/login</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#%PAM-1.0

auth       required     pam_securetty.so
auth       requisite    pam_nologin.so
auth       include      system-local-login
<b>auth       optional     pam_gnome_keyring.so</b>
account    include      system-local-login
session    include      system-local-login
<b>session    optional     pam_gnome_keyring.so auto_start</b>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If using the <a href="../../en/Greetd.html" title="Greetd">greetd</a> login manager, the file that needs to be modified is <code>/etc/pam.d/greetd</code>, instead of <code>/etc/pam.d/login</code>.</div>
<h2><span class="mw-headline" id="SSH_keys">SSH keys</span></h2>
<p>GNOME Keyring can act as a wrapper around <a href="../../en/SSH_keys.html#ssh-agent" title="SSH keys">ssh-agent</a>. In that mode, it will display a GUI password entry dialog each time you need to unlock an SSH key. The dialog includes a checkbox to remember the password you type, which, if selected, will allow fully passwordless use of that key in the future as long as your login keyring is unlocked.
</p>
<p>The SSH functionality is disabled by default in gnome-keyring-daemon builds since version <a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/gnome-keyring/-/commit/25c5a1982467802fa12c6852b03c57924553ba73">1:46</a>. It has been <a rel="nofollow" class="external text" href="https://gitlab.gnome.org/GNOME/gcr/-/merge_requests/67">moved</a> into <code>/usr/lib/gcr-ssh-agent</code>, which is part of the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gcr-4">gcr-4</a></span> package.
</p>
<h3><span class="mw-headline" id="Setup_gcr">Setup gcr</span></h3>
<p>All you need to do is
</p>
<ol>
<li>
<a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> the <code>gcr-ssh-agent.socket</code> systemd <a href="../../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a>.</li>
<li>
<a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> once the <code>gcr-ssh-agent.socket</code> systemd <a href="../../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a>.  This will create socket file <code>$XDG_RUNTIME_DIR/gcr/ssh</code>.  Once file is created, 1st step is sufficient to have socket unit started automatically.</li>
<li>Manual configuration of <code>SSH_AUTH_SOCK</code> environment variable shall not be necessary, if <code>gcr-ssh-agent.socket</code> unit is active.  The value of <code>SSH_AUTH_SOCK</code> environment variable shall be set to <code>$XDG_RUNTIME_DIR/gcr/ssh</code> after user logs out and logs in.  This is known to work with Gnome <code>Console</code> application for user using <code>fish</code> as default shell.</li>
</ol>
<p>There are <a href="../../en/Environment_variables.html#Defining_variables" title="Environment variables">many ways</a> to set environment variables, and the one you use will depend on your specific setup and preferences.
</p>
<p>Use list command to test <code>ssh-agent</code>:
</p>
<pre>$ ssh-agent -l
</pre>
<h3><span class="mw-headline" id="Using">Using</span></h3>
<p>You can run
</p>
<pre>$ ssh-add -L
</pre>
<p>to list loaded SSH keys in the running agent. This can help ensure you started the appropriate service and set <code>SSH_AUTH_SOCK</code> correctly.
</p>
<p>To permanently save a passphrase in the keyring, use ssh-askpass from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=seahorse">seahorse</a></span> package:
</p>
<pre>$ /usr/lib/seahorse/ssh-askpass <i>my_key</i>
</pre>
<p>To manually add an SSH key from another directory:
</p>
<pre>$ ssh-add ~/.private/id_rsa
Enter passphrase for ~/.private/id_rsa:
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You have to have the corresponding <i>.pub</i> file in the same directory as the private key (<code>~/.ssh/id_rsa.pub</code> in the example). Also, make sure that the public key is the file name of the private key plus <i>.pub</i> (for example, <code>my_key.pub</code>).</div>
<p>To disable all manually added keys:
</p>
<pre>$ ssh-add -D
</pre>
<h3><span class="mw-headline" id="Disabling">Disabling</span></h3>
<p>If you wish to run an alternative SSH agent (e.g. <a href="../../en/SSH_keys.html#ssh-agent" title="SSH keys">ssh-agent</a> directly or <a href="../../en/GnuPG.html#gpg-agent" class="mw-redirect" title="Gpg-agent">gpg-agent</a>), it's a good idea to disable GNOME Keyring's ssh-agent wrapper. Doing so isn't strictly necessary, since each agent listens on a different socket and <code>SSH_AUTH_SOCK</code> can be used to choose between them, but it can make debugging issues easier.
</p>
<p>To disable gcr-ssh-agent, ensure <code>gcr-ssh-agent.socket</code> and <code>gcr-ssh-agent.service</code> are both disabled and stopped in systemd.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Integration_with_applications">Integration with applications</span></h3>
<ul><li><a href="../../en/Chromium.html#Force_a_password_store" title="Chromium">Chromium</a></li></ul>
<h3><span class="mw-headline" id="Flushing_passphrases">Flushing passphrases</span></h3>
<pre>$ gnome-keyring-daemon -r -d
</pre>
<p>This command starts gnome-keyring-daemon, shutting down previously running instances.
</p>
<h3><span class="mw-headline" id="Git_integration">Git integration</span></h3>
<p>The GNOME keyring is useful in conjunction with <a href="../../en/Git.html" title="Git">Git</a> when you are pushing over HTTPS. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsecret">libsecret</a></span> package <a href="#Installation">needs to be installed for this functionality to be available</a>.
</p>
<p>Configure Git to use the <i>libsecret</i> helper:
</p>
<pre>$ git config --global credential.helper /usr/lib/git-core/git-credential-libsecret
</pre>
<p>The next time you run <code>git push</code>, you will be asked to unlock your keyring if it is not already unlocked.
</p>
<h3><span class="mw-headline" id="GnuPG_integration">GnuPG integration</span></h3>
<p>Several applications which use GnuPG require a <code>pinentry-program</code> to be set. Set the following to use GNOME 3 pinentry for GNOME Keyring to manage passphrase prompts.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/gpg-agent.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">pinentry-program /usr/bin/pinentry-gnome3
</pre>
<p>Another option is to <a href="../../en/GnuPG.html#Unattended_passphrase" title="GnuPG">force loopback for GPG</a> which should allow the passphrase to be entered in the application.
</p>
<h3><span class="mw-headline" id="Renaming_a_keyring">Renaming a keyring</span></h3>
<p>The display name for a keyring (i.e., the name that appears in Seahorse and from <code>file</code>) can be changed by <a rel="nofollow" class="external text" href="https://ttboj.wordpress.com/2013/01/27/renaming-a-gnome-keyring-for-seahorse-the-passwords-and-keyrings-application/">changing the value of display-name in the unencrypted keyring file</a>. Keyrings will usually be stored in <code>~/.local/share/keyrings/</code> with the <i>.keyring</i> file extension.
</p>
<h3><span class="mw-headline" id="Automatically_change_keyring_password_with_user_password">Automatically change keyring password with user password</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This only affects the default keyring.</div>
<p><a href="../../en/Help:Reading.html#Append,_add,_create,_edit" class="mw-redirect" title="Append">Append</a> <code>password optional pam_gnome_keyring.so</code> to <code>/etc/pam.d/passwd</code>: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/passwd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
password	optional	pam_gnome_keyring.so</pre>
<h3>
<span id="Using_gnome-keyring-daemon_outside_desktop_environments_.28KDE.2C_GNOME.2C_XFCE.2C_....29"></span><span class="mw-headline" id="Using_gnome-keyring-daemon_outside_desktop_environments_(KDE,_GNOME,_XFCE,_...)">Using gnome-keyring-daemon outside desktop environments (KDE, GNOME, XFCE, ...)</span>
</h3>
<h4><span class="mw-headline" id="Launching">Launching</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> At least <a href="../../en/Xinit.html" title="Xinit">xinit</a> and <a href="../../en/SDDM.html" title="SDDM">SDDM</a> execute all scripts from <code>/etc/X11/xinit/xinitrc.d/</code> and <a href="../../en/Sway.html" title="Sway">sway</a> provides <code>/etc/sway/config.d/50-systemd-user.conf</code> so the problem is not being "outside desktop environments". If gnome-keyring requires <a href="../../en/XDG_Autostart.html" title="XDG Autostart">XDG Autostart</a>, the installation/configuration section should say so. (Discuss in <a href="../../en/Talk:GNOME/Keyring.html#Launching_gnome-keyring-daemon_outside_desktop_environments_(KDE,_GNOME,_XFCE,_...)" title="Talk:GNOME/Keyring">Talk:GNOME/Keyring#Launching gnome-keyring-daemon outside desktop environments (KDE,_GNOME,_XFCE,_...)</a>)</div>
</div>
<p>If you are using sway, i3, or any window manager that does not execute
</p>
<ul>
<li><code>/etc/xdg/autostart/gnome-keyring-*.desktop</code></li>
<li><code>/etc/X11/xinit/xinitrc.d/50-systemd-user.sh</code></li>
</ul>
<p>your window manager needs to execute the following commands during window manager startup. The commands do not need to be executed in any specific order.
</p>
<pre>dbus-update-activation-environment DISPLAY XAUTHORITY WAYLAND_DISPLAY</pre>
<p>or
</p>
<pre>dbus-update-activation-environment --all</pre>
<p>This command passes environment variables from the window manager to session dbus. Without this, GUI prompts cannot be triggered over DBus. For example, this is required for seahorse password prompt.
</p>
<p>This is required because session dbus is started before graphical environment is started. Thus, session dbus does not know about the graphical environment you are in. Someone or something has to teach session dbus about the graphical environment by passing environment variables describing the graphical environment to session dbus.
</p>
<pre>gnome-keyring-daemon --start --components=secrets</pre>
<p>During login, PAM starts <code>gnome-keyring-daemon --login</code> which is responsible for keeping gnome-keyring unlocked with login password. If <code>gnome-keyring-daemon --login</code> is not connected to session dbus within a few minutes, <code>gnome-keyring-daemon --login</code> dies. If <code>gnome-keyring-daemon --start ...</code> is started against session dbus in a window manager, <code>gnome-keyring-daemon --login</code> is connected to session dbus. If your login session does not start <code>gnome-keyring-daemon --start ...</code> before <code>gnome-keyring-daemon --login</code> quits, you can also use any program that uses gnome-keyring or secret service API before <code>gnome-keyring-daemon --login</code> dies.
</p>
<h4><span class="mw-headline" id="GNOME_Keyring_XDG_Portal">GNOME Keyring XDG Portal</span></h4>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Modifies package files in <code>/usr/share</code>, will be undone on pacman upgrades (Discuss in <a rel="nofollow" class="external text" href="../../en/Talk:GNOME/Keyring.html">Talk:GNOME/Keyring</a>)</div>
</div>
<p>GNOME Keyring exposes an XDG Portal backend (for use with applications sandboxed through <a href="../../en/Flatpak.html" title="Flatpak">flatpak</a> for example). In order for it to work outside of GNOME, one must add their desktop environment to the <code>/usr/share/xdg-desktop-portal/portals/gnome-keyring.portal</code> configuration file by modifying the <code>UseIn</code> key. For instance, to add <a href="../../en/Sway.html" title="Sway">sway</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/xdg-desktop-portal/portals/gnome-keyring.portal</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[portal]
DBusName=org.freedesktop.secrets
Interfaces=org.freedesktop.impl.portal.Secret
UseIn=gnome;sway
</pre>
<p>See <a href="../../en/XDG_Desktop_Portal.html#Backends" title="XDG Desktop Portal">XDG Desktop Portal#Backends</a> for more information about XDG Desktop Portal backends.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Passwords_are_not_remembered">Passwords are not remembered</span></h3>
<p>If you are prompted for a password after logging in and you find that your passwords are not saved, then you may need to create/set a default keyring. To do this using Seahorse (a.k.a. Passwords and Keys), see <a rel="nofollow" class="external text" href="https://help.gnome.org/users/seahorse/stable/keyring-create.html">Create a new keyring</a> and <a rel="nofollow" class="external text" href="https://help.gnome.org/users/seahorse/stable/keyring-change-default.html">Change the default keyring</a> in GNOME Help.
</p>
<h3><span class="mw-headline" id="Resetting_the_keyring">Resetting the keyring</span></h3>
<p>You will need to <a href="#Manage_using_GUI">change your login keyring password</a> if you receive the following error message: "The password you use to login to your computer no longer matches that of your login keyring".
</p>
<p>Alternatively, you can remove the <code>login.keyring</code> and <code>user.keystore</code> files from <code>~/.local/share/keyrings/</code>. Be warned that this will permanently delete all saved keys. After removing the files, simply log out and log in again.
</p>
<h3><span class="mw-headline" id="Unable_to_locate_daemon_control_file">Unable to locate daemon control file</span></h3>
<p>The following error may appear in the <a href="../../en/Systemd/Journal.html" class="mw-redirect" title="Journal">journal</a> after logging in:
</p>
<pre>gkr-pam: unable to locate daemon control file
</pre>
<p>This message "can be safely ignored" if there are no other related issues <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1940190#p1940190">[2]</a>.
</p>
<h3>
<span id="No_such_secret_collection_at_path:_.2F"></span><span class="mw-headline" id="No_such_secret_collection_at_path:_/">No such secret collection at path: /</span>
</h3>
<p>If you use a custom <code>~/.xinitrc</code> and receive this error when trying to create a new keyring with Seahorse, this may be solved by adding the following line <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1640822#p1640822">[3]</a> 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xinitrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">source /etc/X11/xinit/xinitrc.d/50-systemd-user.sh
</pre>
<h3>
<span id="Terminal_gives_the_message_.22discover_other_daemon:_1.22"></span><span class="mw-headline" id='Terminal_gives_the_message_"discover_other_daemon:_1"'>Terminal gives the message "discover_other_daemon: 1"</span>
</h3>
<p>This is caused by <i>gnome-keyring-daemon</i> being started for the second time. Since a systemd service is delivered together with the daemon, you do not need to start it another way. So make sure to remove the start command from your <code>.zshenv</code>, <code>.bash_profile</code>, <code>.xinitrc</code>, <code>config.fish</code> or similar. Alternatively you can <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Disable">disable</a> the <code>gnome-keyring-daemon.service</code> and <code>gnome-keyring-daemon.socket</code> <a href="../../en/Systemd/User.html" class="mw-redirect" title="User unit">user units</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external free" href="https://help.gnome.org/users/seahorse/stable/">https://help.gnome.org/users/seahorse/stable/</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.gnome.org/action/show/Projects/GnomeKeyring">GNOME Wiki page</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../../en/Category:GNOME.html" title="Category:GNOME">GNOME</a></li>
<li><a href="../../en/Category:OpenPGP.html" title="Category:OpenPGP">OpenPGP</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=GNOME/Keyring&amp;oldid=812813">https://wiki.archlinux.org/index.php?title=GNOME/Keyring&amp;oldid=812813</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 July 2024, at 05:58.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
