<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Incus - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Incus rootpage-Incus skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Migrating_from_LXD" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Migrating_from_LXD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Migrating from LXD</span>
				</div>
			</a>
			
			<ul id="toc-Migrating_from_LXD-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configuration</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Unprivileged_containers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unprivileged_containers">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Unprivileged containers</span>
				</div>
			</a>
			
			<ul id="toc-Unprivileged_containers-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Accessing_Incus_as_an_unprivileged_user" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Accessing_Incus_as_an_unprivileged_user">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Accessing Incus as an unprivileged user</span>
				</div>
			</a>
			
			<ul id="toc-Accessing_Incus_as_an_unprivileged_user-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Initialize_Incus_config" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Initialize_Incus_config">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Initialize Incus config</span>
				</div>
			</a>
			
			<ul id="toc-Initialize_Incus_config-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Adding_a_Web-UI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Adding_a_Web-UI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Adding a Web-UI</span>
				</div>
			</a>
			
			<ul id="toc-Adding_a_Web-UI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Usage</span>
			</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Overview_of_commands" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Overview_of_commands">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Overview of commands</span>
				</div>
			</a>
			
			<ul id="toc-Overview_of_commands-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Create_a_container" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Create_a_container">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Create a container</span>
				</div>
			</a>
			
			<ul id="toc-Create_a_container-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Access_the_containers_by_name_on_the_host" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Access_the_containers_by_name_on_the_host">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Access the containers by name on the host</span>
				</div>
			</a>
			
			<ul id="toc-Access_the_containers_by_name_on_the_host-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Troubleshooting</span>
			</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Starting_a_virtual_machine_fails" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Starting_a_virtual_machine_fails">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Starting a virtual machine fails</span>
				</div>
			</a>
			
			<ul id="toc-Starting_a_virtual_machine_fails-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Incus_does_not_respect_Shell's_environment_proxy_variables" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Incus_does_not_respect_Shell's_environment_proxy_variables">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Incus does not respect Shell's environment proxy variables</span>
				</div>
			</a>
			
			<ul id="toc-Incus_does_not_respect_Shell's_environment_proxy_variables-sublist" class="vector-toc-list">
				<li id="toc-Temporary" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Temporary">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.1</span>
					<span>Temporary</span>
				</div>
			</a>
			
			<ul id="toc-Temporary-sublist" class="vector-toc-list">
				<li id="toc-Import_Shell_variables_to_systemd's_environment" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Import_Shell_variables_to_systemd's_environment">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.1.1</span>
					<span>Import Shell variables to systemd's environment</span>
				</div>
			</a>
			
			<ul id="toc-Import_Shell_variables_to_systemd's_environment-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Persistent" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Persistent">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.2</span>
					<span>Persistent</span>
				</div>
			</a>
			
			<ul id="toc-Persistent-sublist" class="vector-toc-list">
				<li id="toc-Edit_incus_service_unit" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Edit_incus_service_unit">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.2.1</span>
					<span>Edit incus service unit</span>
				</div>
			</a>
			
			<ul id="toc-Edit_incus_service_unit-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Use_Incus_core.proxy_options" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Use_Incus_core.proxy_options">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.2.2</span>
					<span>Use Incus core.proxy options</span>
				</div>
			</a>
			
			<ul id="toc-Use_Incus_core.proxy_options-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Uninstall" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Uninstall">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Uninstall</span>
			</div>
		</a>
		
		<ul id="toc-Uninstall-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Incus</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Incus.html" title="Incus – español" lang="es" hreflang="es" data-title="Incus" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Incus" title="Incus – 日本語" lang="ja" hreflang="ja" data-title="Incus" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Linux_Containers.html" title="Linux Containers">Linux Containers</a></li>
<li><a href="../en/LXD.html" title="LXD">LXD</a></li>
</ul>
</div>
<p><b><a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/introduction/">Incus</a></b> is a manager/hypervisor for containers (via <a href="../en/Linux_Containers.html" class="mw-redirect" title="LXC">LXC</a>) and virtual-machines (via <a href="../en/QEMU.html" title="QEMU">QEMU</a>).
</p>
<p>It is a fork of <a rel="nofollow" class="external text" href="https://ubuntu.com/lxd">LXD</a> by the original maintainers. Documentation from the <a href="../en/LXD.html" title="LXD">LXD</a> wiki page is still largely relevant and encouraged reading.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=incus">incus</a></span> package, then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the <code>incus.socket</code>.
</p>
<p>Alternatively, you can <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> the <code>incus.service</code> directly, in case you want instances to autostart for example.
</p>
<p>To delegate container creation to users, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> the <code>incus-user.socket</code> unit. See <a href="#Accessing_Incus_as_an_unprivileged_user">#Accessing Incus as an unprivileged user</a> for group delegation.
</p>
<h3><span class="mw-headline" id="Migrating_from_LXD">Migrating from LXD</span></h3>
<p>If you wish to migrate from an existing LXD installation, you should do so at this point, as the migration tool will only run against an empty target Incus server.
</p>
<p>After verifying that both the <code>lxc info</code> and <code>incus info</code> commands are running correctly, read the upstream <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/howto/server_migrate_lxd/">documentation</a> about the process, and afterwards run the migration tool: 
</p>
<pre># lxd-to-incus
</pre>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Unprivileged_containers">Unprivileged containers</span></h3>
<p>Incus launches <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/explanation/security/#container-security">unprivileged containers  by default</a> (see <a href="../en/Linux_Containers.html#Privileged_or_unprivileged_containers" title="Linux Containers">Linux Containers#Privileged or unprivileged containers</a> for an explanation of the difference).
</p>
<p>For this to work, you need to setup an appropriate range of sub{u,g}ids for the <b>root</b> user<a rel="nofollow" class="external autonumber" href="https://linuxcontainers.org/incus/docs/main/installing/#machine-setup">[1]</a>: unlike <i>e.g.</i> <a href="../en/Podman.html" title="Podman">podman</a>, Incus uses a daemon that needs to run as root.<a rel="nofollow" class="external autonumber" href="https://discuss.linuxcontainers.org/t/incus-no-uid-gid-allocation-configured/19002/13">[2]</a>
</p>
<p>Verify the content of both <code>/etc/subuid</code> and <code>/etc/subgid</code>, and if needed add a <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/installing/#machine-setup">contiguous range of at least 10M UID/GID</a> for the root user:
</p>
<pre># usermod -v 1000000-1000999999 -w 1000000-1000999999 root
</pre>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>incus</code>.
</p>
<p>For the alternative, see <a href="../en/LXD.html#Privileged_containers" title="LXD">LXD#Privileged containers</a>.
</p>
<h3><span class="mw-headline" id="Accessing_Incus_as_an_unprivileged_user">Accessing Incus as an unprivileged user</span></h3>
<p>From the <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/tutorial/first_steps/#install-and-initialize-incus">official documentation</a>:
</p>
<p>"Access to Incus is controlled through two groups:
</p>
<ul>
<li>
<code>incus</code> allows basic user access, no configuration and all actions restricted to a per-user project.</li>
<li>
<code>incus-admin</code> allows full control over Incus."</li>
</ul>
<p>To have a normal user capable of launching and operating instances, <a href="../en/Users_and_groups.html#Group_management" title="Users and groups">add the user</a> to the <code>incus</code> group. 
</p>
<p>To give a normal user full control over Incus without having to use <a href="../en/Sudo.html" title="Sudo">sudo</a>, <a href="../en/Users_and_groups.html#Group_management" title="Users and groups">add the user</a> to <code>incus-admin</code> (not recommended).
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Anyone added to the <code>incus-admin</code> group is root equivalent. For more information, see <a rel="nofollow" class="external autonumber" href="https://github.com/lxc/incus#security">[3]</a> and <a rel="nofollow" class="external autonumber" href="https://bugs.launchpad.net/ubuntu/+source/lxd/+bug/1829071">[4]</a>.</div>
<h3><span class="mw-headline" id="Initialize_Incus_config">Initialize Incus config</span></h3>
<p>Before it can be used, Incus' config needs to be initialized:
</p>
<pre>$ incus admin init
</pre>
<p>From the <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/howto/initialize/#interactive-configuration">official documentation</a>:
</p>
<dl><dd>"<i>For simple configurations, you can run this command as a normal user. However, some more advanced operations during the initialization process (for example, joining an existing cluster) require root privileges. In this case, run the command with sudo or as root."</i>
</dd></dl>
<p>This will start an interactive configuration guide in the terminal, that covers different topics like storages, networks etc. <br>
You can find an overview in the official <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/tutorial/first_steps/">Getting Started Guide</a>.
</p>
<h3><span class="mw-headline" id="Adding_a_Web-UI">Adding a Web-UI</span></h3>
<p>The <a rel="nofollow" class="external text" href="https://github.com/canonical/lxd-ui">lxd-ui</a> browser frontend has been patched to fit Incus. These patches are found in the debian packge source. <a rel="nofollow" class="external autonumber" href="https://github.com/zabbly/incus/tree/daily/patches">[5]</a>
</p>
<p>To make use of this UI install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/incus-ui/">incus-ui</a></span><sup><small>AUR</small></sup> package.
</p>
<p>Then set the address and port for the webserver:
</p>
<pre>$ incus config set core.https_address=127.0.0.1:8443
</pre>
<p>And <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> Incus.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<h3><span class="mw-headline" id="Overview_of_commands">Overview of commands</span></h3>
<p>You can get an overview of all available commands by typing:
</p>
<pre>$ incus
</pre>
<h3><span class="mw-headline" id="Create_a_container">Create a container</span></h3>
<p>Container are based on images, that are downloaded from image servers or remote LXD servers.
</p>
<p>You can see the list of already added servers with:
</p>
<pre>$ incus remote list
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> An image server can be referred to by using the name displayed in the <code>NAME</code> column on the left, <i>e.g.</i> <code>images</code> in the following examples.</div>
<p>You can list all images on a server with <code>incus image list &lt;server-name&gt;:</code>, for example:
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> It is recommended to pipe the output of the following command through a pager like <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=less">less</a></span> due the high number of images available.</div>
<pre>$ incus image list images:
</pre>
<p>This will show you all images on one of the default servers: <a rel="nofollow" class="external text" href="https://images.linuxcontainers.org">images.linuxcontainers.org</a>
</p>
<p>You can also search for images by adding terms like the distribution name:
</p>
<pre>$ incus image list images:debian
</pre>
<p>Launch a container with an image from a specific server with:
</p>
<pre>$ incus launch servername:imagename
</pre>
<p>For example to create a randomly named container instance from the Ubuntu Noble image from the default server:
</p>
<pre>$ incus launch images:ubuntu/noble
</pre>
<p>To specify a name for the instance simply add it afterwards, <i>e.g.</i>:
</p>
<pre>$ incus launch images:archlinux/current/amd64 arch
</pre>
<p>will create an amd64 Arch container named <code>arch</code>.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Access_the_containers_by_name_on_the_host">Access the containers by name on the host</span></h3>
<p>This assumes that you are using the default bridge that it is named <code>incusbr0</code> and that you are using <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>.
</p>
<pre># systemd-resolve --interface incusbr0 --set-domain '~incus' --set-dns $(incus network get incusbr0 ipv4.address | cut -d / -f 1)
</pre>
<p>You can now access the containers by name:
</p>
<pre>$ ping <i>containername</i>.incus
</pre>
<p>To make this change permanent, edit the <code>incus.service</code> systemd unit to include an <code>ExecStartPost</code> directive, which runs the command after launch:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># systemctl edit incus.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

[Service]
ExecStartPost=/bin/sh -c 'systemd-resolve --interface incusbr0 --set-domain "~incus" --set-dns $(incus network get incusbr0 ipv4.address | cut -d / -f 1)'

...</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Starting_a_virtual_machine_fails">Starting a virtual machine fails</span></h3>
<p>If you see the error:
</p>
<pre>Error: Couldn't find one of the required UEFI firmware files: [{code:OVMF_CODE.4MB.fd vars:OVMF_VARS.4MB.ms.fd} {code:OVMF_CODE.2MB.fd vars:OVMF_VARS.2MB.ms.fd} {code:OVMF_CODE.fd vars:OVMF_VARS.ms.fd} {code:OVMF_CODE.fd vars:qemu.nvram}]
</pre>
<p>It's because Arch Linux does not distribute secure boot signed ovmf firmware. To boot virtual machines, you need to disable secure boot for the time being:
</p>
<pre>$ incus launch ubuntu:18.04 test-vm --vm -c security.secureboot=false
</pre>
<p>This can also be added to the default profile by doing:
</p>
<pre>$ incus profile set default security.secureboot=false
</pre>
<h3>
<span id="Incus_does_not_respect_Shell.27s_environment_proxy_variables"></span><span class="mw-headline" id="Incus_does_not_respect_Shell's_environment_proxy_variables">Incus does not respect Shell's environment proxy variables</span>
</h3>
<p>Examples are <code>incus launch</code> or <code>incus image</code> commands not using value of <code>*_proxy</code>/<code>*_PROXY</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Variable">variables</a> when downloading images. 
</p>
<p>Incus implements a server-client paradigm. It simply means that operations are done by <code>incusd</code> acting as the <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/server">Incus server</a> — usually running in the background, unless invoked from an interactive shell. And <code>incus</code> commandline interface is used to communicate with Incus server acting as the <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/client">Incus client</a>.
</p>
<p>That makes <code>incusd</code>, typically started as a service, not inheriting shell's environment variables of the client. But respecting variables of the environment that it's invoked from, instead.<a rel="nofollow" class="external autonumber" href="https://linuxcontainers.org/incus/docs/main/environment">[6]</a> In Arch Linux, Incus server is started by systemd.
</p>
<p>There can be many workarounds to this difficulty, following exist some examples. See Incus's <a rel="nofollow" class="external text" href="https://github.com/lxc/incus/issues/574">issue#574</a> for more information.
</p>
<h4><span class="mw-headline" id="Temporary">Temporary</span></h4>
<h5>
<span id="Import_Shell_variables_to_systemd.27s_environment"></span><span class="mw-headline" id="Import_Shell_variables_to_systemd's_environment">Import Shell variables to systemd's environment</span>
</h5>
<p>First, <a href="../en/Environment_variables.html#Per_session_or_shell" title="Environment variables">export</a> <code>*_PROXY</code> variables:
</p>
<pre>$ export <i>ALL</i>_PROXY="socks://<i>proxy_server_address</i>:<i>port</i>/"
</pre>
<p>Import them to systemd's environment:
</p>
<pre># systemctl import-environment <i>ALL</i>_PROXY
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Re/start</a> <code>incus.service</code> unit.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Use <code>systemctl unset-environment</code> command to unset a variable and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> the service.</div>
<h4><span class="mw-headline" id="Persistent">Persistent</span></h4>
<h5><span class="mw-headline" id="Edit_incus_service_unit">Edit incus service unit</span></h5>
<p>If you want Incus daemon to always start with some static environment variables, like <code>*_proxy</code>, you can use <code>Environment</code> directive of <a href="../en/Systemd.html" title="Systemd">systemd</a>. <code>systemctl set-property</code> command cannot manipulate <code>Environment</code> directive. <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">Edit</a> <code>incus.service</code> and add <code>Environment</code> key with appropriate <code>variable=value</code> pair. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># systemctl edit incus.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

[Service]
Environment=<i>ALL</i>_PROXY="socks://<i>proxy_server_address</i>:<i>port</i>/"

...</pre>
<h5><span class="mw-headline" id="Use_Incus_core.proxy_options">Use Incus core.proxy options</span></h5>
<p>One can make Incus server use a desired proxy with <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/howto/server_configure/">configuring</a> Incus's server with <a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/server_config/#server-core:core.proxy_http">core.proxy</a> options. For instance:
</p>
<pre># incus config set core.proxy_http "<i>proxy_address</i>:<i>proxy_port</i>"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>core.proxy</code> options have global scopes. I.e. they apply to cluster members, immediately.</div>
<h2><span class="mw-headline" id="Uninstall">Uninstall</span></h2>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">Stop</a> and disable the services. Then <a href="../en/Pacman.html#Removing_packages" class="mw-redirect" title="Uninstall">uninstall</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=incus">incus</a></span> package.
</p>
<p>If you want to remove all data:
</p>
<pre># rm -r /var/lib/incus
</pre>
<p>If you used any of the example networking configuration, you should remove those as well.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/">The official Incus homepage</a></li>
<li><a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/">Official documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://linuxcontainers.org/incus/docs/main/tutorial/first_steps/">Getting Started Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://discuss.linuxcontainers.org/">Official Forum</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/lxc/incus">The Incus GitHub repository</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Incus&amp;oldid=824556">https://wiki.archlinux.org/index.php?title=Incus&amp;oldid=824556</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 5 January 2025, at 08:54.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
