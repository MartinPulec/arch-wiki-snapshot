<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Deluge - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Deluge rootpage-Deluge skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Daemon" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Daemon">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Daemon</div>
		</a>
		
			<button aria-controls="toc-Daemon-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Daemon subsection</span>
			</button>
		
		<ul id="toc-Daemon-sublist" class="vector-toc-list">
			<li id="toc-System_service" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#System_service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>System service</div>
			</a>
			
			<ul id="toc-System_service-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-User_service" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#User_service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>User service</div>
			</a>
			
			<ul id="toc-User_service-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Shared_directories_for_downloads/uploads" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Shared_directories_for_downloads/uploads">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Shared directories for downloads/uploads</div>
			</a>
			
			<ul id="toc-Shared_directories_for_downloads/uploads-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Firewall" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Firewall">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Firewall</div>
			</a>
			
			<ul id="toc-Firewall-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Plugins" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Plugins">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Plugins</div>
			</a>
			
			<ul id="toc-Plugins-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Clients" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Clients">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Clients</div>
		</a>
		
			<button aria-controls="toc-Clients-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Clients subsection</span>
			</button>
		
		<ul id="toc-Clients-sublist" class="vector-toc-list">
			<li id="toc-Console" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Console">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Console</div>
			</a>
			
			<ul id="toc-Console-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GTK" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GTK">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>GTK</div>
			</a>
			
			<ul id="toc-GTK-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Web" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Web">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Web</div>
			</a>
			
			<ul id="toc-Web-sublist" class="vector-toc-list">
				<li id="toc-System_service_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#System_service_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.1</span>System service</div>
			</a>
			
			<ul id="toc-System_service_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-User_service_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#User_service_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.2</span>User service</div>
			</a>
			
			<ul id="toc-User_service_2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Headless_setup" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Headless_setup">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Headless setup</div>
		</a>
		
			<button aria-controls="toc-Headless_setup-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Headless setup subsection</span>
			</button>
		
		<ul id="toc-Headless_setup-sublist" class="vector-toc-list">
			<li id="toc-Create_a_user" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Create_a_user">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Create a user</div>
			</a>
			
			<ul id="toc-Create_a_user-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Allow_remote" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Allow_remote">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Allow remote</div>
			</a>
			
			<ul id="toc-Allow_remote-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Firewall_2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Firewall_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Firewall</div>
			</a>
			
			<ul id="toc-Firewall_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Connect" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connect">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Connect</div>
			</a>
			
			<ul id="toc-Connect-sublist" class="vector-toc-list">
				<li id="toc-SSH_Tunnel" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#SSH_Tunnel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4.1</span>SSH Tunnel</div>
			</a>
			
			<ul id="toc-SSH_Tunnel-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-No_module_named_service_identity" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_module_named_service_identity">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>No module named service_identity</div>
			</a>
			
			<ul id="toc-No_module_named_service_identity-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Web_ui_.torrent_upload_does_not_work" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Web_ui_.torrent_upload_does_not_work">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Web ui .torrent upload does not work</div>
			</a>
			
			<ul id="toc-Web_ui_.torrent_upload_does_not_work-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Execute_script_not_found_or_not_executable" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Execute_script_not_found_or_not_executable">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Execute script not found or not executable</div>
			</a>
			
			<ul id="toc-Execute_script_not_found_or_not_executable-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Torrents_list_has_completely_disappeared_after_an_unexpected_shutdown" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Torrents_list_has_completely_disappeared_after_an_unexpected_shutdown">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Torrents list has completely disappeared after an unexpected shutdown</div>
			</a>
			
			<ul id="toc-Torrents_list_has_completely_disappeared_after_an_unexpected_shutdown-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Console_is_unusable" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Console_is_unusable">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Console is unusable</div>
			</a>
			
			<ul id="toc-Console_is_unusable-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_Also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_Also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>See Also</div>
		</a>
		
		<ul id="toc-See_Also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Deluge</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Deluge" title="Deluge – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Deluge" title="Deluge – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/RTorrent.html" title="RTorrent">rTorrent</a></li>
<li><a href="../en/Systemd.html" title="Systemd">systemd</a></li>
<li><a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a></li>
<li><a href="../en/Iptables.html" title="Iptables">iptables</a></li>
<li><a href="../en/OpenSSL.html" title="OpenSSL">OpenSSL</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://deluge-torrent.org/">Deluge</a> is a full-featured BitTorrent application written in Python 3. It has a variety of features, including but not limited to: a client/server model, DHT support, magnet links, a plugin system, UPnP support, full-stream encryption, proxy support, and three different client applications. When the server daemon is running, users can connect to it via a console client, a GTK-based GUI, or a Web-based UI. A full list of features can be viewed <a rel="nofollow" class="external text" href="https://dev.deluge-torrent.org/wiki/About">here</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=deluge">deluge</a></span> and optionally install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=deluge-gtk">deluge-gtk</a></span>. Be sure to read and install the optional dependencies for the gtk client <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=deluge-gtk">deluge-gtk</a></span> to enable desktop notifications and appindicator notifications.
</p>
<h2><span class="mw-headline" id="Daemon">Daemon</span></h2>
<p>Deluge works with a client/server model. The server is referred to as the daemon and runs in the background, waiting for a client (console, gtk, or web-based) to connect.  The client can disconnect, but the daemon continues to run, transferring the torrent files in the queue.
</p>
<p>Upon installation, pacman will create a non-privileged <b>deluge</b> user.  This user is meant to run the provided daemon, <code>/usr/bin/deluged</code>. Users are able to start the daemon several ways:
</p>
<ol>
<li>Systemd system service (runs as the deluge user).</li>
<li>Systemd user service (runs as another user).</li>
<li>Running it directly (runs as another user).</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For the highest level of security, running <code>deluged</code> via the systemd system service (<code>deluged.service</code>) is recommended since the deluge user has no shell access (limited account) or other group affiliation on the host system.  In addition to the security benefits of running as the non-privileged deluge user, the system service can also run at boot without the need to start Xorg or a client.</div>
<h3><span class="mw-headline" id="System_service">System service</span></h3>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a>/<a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>deluged.service</code>.
</p>
<h3><span class="mw-headline" id="User_service">User service</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> If multiple users are running a daemon, the default port (58846) will need to be changed for each user.</div>
<p>A user service will allow <code>deluged</code> to run when <code>systemd --user</code> is started. This is accomplished by creating a user service file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/user/deluged.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Deluge Daemon
After=network.target

[Service]
ExecStart=/usr/bin/deluged -d -P %h/.config/deluge/deluge.pid

[Install]
WantedBy=default.target
</pre>
<p>The deluge user service can now be <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">started</a> and enabled by the user.
</p>
<p>The <code>deluged</code> user service can also be placed in <code>$HOME/.config/systemd/user/</code>. See <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a> for more information on user services.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Deluge can be configured through any of the clients as well as by simply editing the JSON-formatted configuration files located in <code>$HOME/.config/deluge/</code>. <b>$HOME</b> refers to the home directory of the user that <code>deluged</code> is running as. This means that if the daemon is running as the <b>deluge</b> user, the default home directory is <code>/srv/deluge/</code>.
</p>
<h3>
<span id="Shared_directories_for_downloads.2Fuploads"></span><span class="mw-headline" id="Shared_directories_for_downloads/uploads">Shared directories for downloads/uploads</span>
</h3>
<p>When using the systemd deluged.service, the shared directory/directories need to be shared so that other users on the system are able to access the data.  The general strategy is to:
</p>
<ol>
<li>Change the owner and group of the shared directory to deluge:deluge.</li>
<li>Set the <a href="../en/File_permissions_and_attributes.html" title="File permissions and attributes">File permissions and attributes</a> on the shared directory to at least 770.</li>
<li>Add your user (or the user/users needing to access the files) to the deluge group.</li>
</ol>
<p>Example using <code>/mnt/torrent_data</code>:
</p>
<pre># chown -R deluge:deluge /mnt/torrent_data
# chmod 770 /mnt/torrent_data
# usermod -a -G deluge YOURUSER
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> When usermod is used to change group affiliation, a logout/login is required before changes take effect.</div>
<h3><span class="mw-headline" id="Firewall">Firewall</span></h3>
<p>Deluge requires at least one port open for TCP and UDP to allow incoming connections for seeding. If deluge complaining that it cannot open a port for incoming connections, users must open port(s) to be used. In this example, ports 56881 through 56889 are opened for TCP and UDP:
</p>
<pre># iptables -A INPUT -p tcp --dport 56881:56889 -j ACCEPT
# iptables -A INPUT -p udp --dport 56881:56889 -j ACCEPT
</pre>
<p>Users who are behind a NAT router/firewall must setup the corresponding ports to be forwarded. UPnP may also be used, but that will not work with the local firewall on the system because it requires predefined ports.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> One can limit this to a single port; just be sure to enable both TCP and UDP.</div>
<p>On many default configurations, when using iptables with connection tracking (conntrack) set to drop "INVALID" packets, sometimes a great deal of legitimate torrent traffic (especially DHT traffic) is dropped as "invalid." This is typically caused by either conntrack's memory restrictions, or from long periods between packets among peers (see <a rel="nofollow" class="external autonumber" href="https://github.com/rakshasa/rtorrent/wiki/Using-DHT#dht-and-ip-connection-tracking">[1]</a> and <a rel="nofollow" class="external autonumber" href="https://www.linuxquestions.org/questions/showthread.php?p=5145026">[2]</a>). Symptoms of this problem include torrents not seeding, especially when the torrent client has been active for more than a day or two continuously, and consistently low overhead traffic (in one experience, less than 3KiB/s in either in or out) with DHT enabled, even when deluge/libtorrent has been continuously running for more than forty-eight hours and many torrents are active. For this reason, it may be necessary to disable connection tracking of all torrent traffic for optimal performance, even with the listening ports set to ACCEPT (as the causes for dropping INVALID packets, for instance conntrack's memory problems, may supercede any rules to accept traffic to/from those ports).
</p>
<p>To fully turn off connection tracking for torrents, specify ports for both Incoming and Outgoing traffic in Deluge, for instance, 56881-56889 for incoming connections and 56890-57200 for outgoing connections.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Limiting incoming connections is not recommended with libtorrent as this will limit the ability to keep multiple connections to the same client, even for different torrents.</div>
<p>Then issue the following commands (after substituting the relevant port ranges):
</p>
<pre># iptables -t raw -I PREROUTING -p udp --dport 56881:57200 -j NOTRACK
# iptables -t raw -I OUTPUT -p udp --sport 56881:57200 -j NOTRACK
# iptables -t raw -I PREROUTING -p tcp --dport 56881:57200 -j NOTRACK
# iptables -t raw -I OUTPUT -p tcp --sport 56881:57200 -j NOTRACK
# iptables -I INPUT -p icmp --icmp-type 3 -j ACCEPT
# iptables -I INPUT -p icmp --icmp-type 4 -j ACCEPT
# iptables -I INPUT -p icmp --icmp-type 11 -j ACCEPT
# iptables -I INPUT -p icmp --icmp-type 12 -j ACCEPT
</pre>
<p>The ICMP allowances are desirable because once connection tracking is disabled on those ports, those important ICMP messages (types 3 (Destination Unreachable), 4 (Source Quench), 11 (Time Exceeded) and 12 (Parameter Problem)) would otherwise be declared INVALID themselves (as netfilter would not know of any connections that they are associated with), and they would potentially be blocked.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> A port range of 1024:65535 would break every DNS query.</div>
<h3><span class="mw-headline" id="Plugins">Plugins</span></h3>
<p>A complete list of plugins can be found on the <a rel="nofollow" class="external text" href="https://dev.deluge-torrent.org/wiki/Plugins">Deluge Wiki</a>
</p>
<p><a rel="nofollow" class="external text" href="https://github.com/ratanakvlun/deluge-ltconfig">ltConfig</a> is a useful plugin that allows direct modification to libtorrent settings and has preset support.
</p>
<p>It offers additional settings like <code>announce_ip</code> (IP to announce to trackers), <code>half_open_limit</code> (Remove maximum half-open connections limit) and more possible privacy and (seed) speedboost features.
</p>
<h2><span class="mw-headline" id="Clients">Clients</span></h2>
<h3><span class="mw-headline" id="Console">Console</span></h3>
<p>The console client can be run with:
</p>
<pre>$ deluge-console
</pre>
<p>Enter the <code>help</code> command for a list of available commands.
</p>
<h3><span class="mw-headline" id="GTK">GTK</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It is necessary to select Thin Client Mode in <i>Edit -&gt; Preferences -&gt; Interface</i> for daemon (server) setups.</div>
<p>The GTK client can be run with:
</p>
<pre>$ deluge-gtk
</pre>
<p>or:
</p>
<pre>$ deluge
</pre>
<p>The GTK client has a number of useful plugins:
</p>
<ul>
<li>AutoAdd - Monitors directories for .torrent files</li>
<li>Blocklist - Downloads and imports an IP blocklist</li>
<li>Execute - Event-based command execution</li>
<li>Extractor - Extracts archived files upon completion <i><b>(beware of random high disk I/O usage)</b></i>
</li>
<li>Label - Allows labels to be assigned to torrents, as well as state, tracker, and keyword filters</li>
<li>Notifications - Provides notifications (email, pop-up, blink, sound) for events as well as other plugins</li>
<li>Scheduler - Limits active torrents and their speed on a per-hour, per-day basis</li>
<li>WebUi - Allows the Web UI to be started via the GTK client</li>
</ul>
<h3><span class="mw-headline" id="Web">Web</span></h3>
<p>Just as with deluge daemon mentioned above, the web client can be started several different ways:
</p>
<ol>
<li>Systemd system service (runs as the deluge user).</li>
<li>Systemd user service (runs as another user).</li>
<li>Running it directly (runs as another user).</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The default password for the web interface is <i>deluge</i>.</li>
<li>The web client offers many of the same features of the GTK UI, including the plugin system.</li>
<li>It is recommended to use HTTPS for the Web client to protect against a man-in-the-middle attack.</li>
<li>Users may  be greeted by a warning from the browser that the SSL certificate is untrusted. Add an exception to this in the browser to continue on. See the <a href="../en/OpenSSL.html" title="OpenSSL">OpenSSL</a> page for information on creating your own certificate.</li>
<li>If multiple users are running a daemon, the default port (8112) will need to be changed for each user.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> For the highest level of security, running <code>deluge-web</code> via the systemd system service (<code>deluge-web.service</code>) is recommended since the deluge user has no shell access (limited account) or other group affiliation on the host system.  In addition to the security benefits of running as the non-privileged deluge user, the system service can also run at boot without the need to start Xorg or a client.</div>
<p>Once running, users may connect to the web client by browsing to <a rel="nofollow" class="external free" href="http://127.0.0.1:8112">http://127.0.0.1:8112</a>, if using encryption on <a rel="nofollow" class="external free" href="https://127.0.0.1:8112">https://127.0.0.1:8112</a> and/or by the host IP-address.
</p>
<h4><span class="mw-headline" id="System_service_2">System service</span></h4>
<p>Deluge ships with <code>deluge-web.service</code>, a systemd system unit, which is used to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the Deluge Web UI. The Deluge Web UI uses a Connection Manager, allowing managing of multiple Deluge clients running under the same host or on an entirely different one. Remember to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> and optionally <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> the <code>deluged</code> service to allow the Web UI connect to the host Deluge client.
</p>
<h4><span class="mw-headline" id="User_service_2">User service</span></h4>
<p>A user service will allow <code>deluge-web</code> to run when <code>systemd --user</code> is started. This is accomplished by creating a user service file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/user/deluge-web.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Deluge Web UI
After=deluged.service

[Service]
ExecStart=/usr/bin/deluge-web -d --ssl

[Install]
WantedBy=default.target
</pre>
<p>The deluge user service can now be <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">started</a> and enabled by the user.
</p>
<p>The <code>deluge-web</code> user service can also be placed in <code>$HOME/.config/systemd/user/</code>. See <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a> for more information on user services.
</p>
<h2><span class="mw-headline" id="Headless_setup">Headless setup</span></h2>
<p>Deluge is quite useful on a headless system, often referred to as a seed box, because of its client/server model. To set up deluge on a headless system, set up the daemon as shown above.
</p>
<h3><span class="mw-headline" id="Create_a_user">Create a user</span></h3>
<p>To allow interaction with the server remotely, create a user in <code>$HOME/.config/deluge/auth</code>. For example:
</p>
<pre>$ echo "delugeuser:p422WoRd:10" &gt;&gt; $HOME/.config/deluge/auth
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>The user/password created does not have to match any system users, and to maintain good security practices it should <b>not</b>!</li>
<li>The user/password in this file are not hashed or salted like in the web client config.</li>
<li>The user/password must match the user/password found in /srv/deluge/.config/deluge/auth otherwise the authentication fails.</li>
</ul>
</div>
<p>The number <b>10</b> corresponds to a level of <b>Admin</b>.  Refer to the following table for additional values:
</p>
<table class="wikitable" align="center">

<tbody>
<tr>
<th>Level Name</th>
<th>Level Value
</th>
</tr>
<tr>
<td>None</td>
<td>0
</td>
</tr>
<tr>
<td>Read-Only</td>
<td>1
</td>
</tr>
<tr>
<td>Normal</td>
<td>5
</td>
</tr>
<tr>
<td>Admin</td>
<td>10
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> In Deluge 1.35, these values have no effect, but multiuser options are under development.</div>
<h3><span class="mw-headline" id="Allow_remote">Allow remote</span></h3>
<p>The default settings disallow remote connections. Change the "allow_remote" setting in <code>$HOME/.config/deluge/core.conf</code>:
</p>
<pre>"allow_remote": true
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<p>1. <code>$HOME/.config/deluge/core.conf</code> is automatically created at the first configuration change, if it does not exist, set the value via <code>deluge-console</code>:
</p>
<pre>config --set allow_remote true
</pre>
<p>2. Changes made while the service is running will not be read into the daemon, therefore, stop the service before making changes to this file.
</p>
</div>
<h3><span class="mw-headline" id="Firewall_2">Firewall</span></h3>
<p>Open the port for remote access. The following example uses the default daemon port (58846):
</p>
<pre># iptables -A INPUT -p tcp --dport 58846 -j ACCEPT
</pre>
<p>See <a href="../en/Iptables.html" title="Iptables">iptables</a> for more information on firewall rules.
</p>
<p>Users behind a NAT router/firewall must forward the port to access the daemon from outside the network if this behavior is desired.
</p>
<h3><span class="mw-headline" id="Connect">Connect</span></h3>
<p>In the console client:
</p>
<pre>connect &lt;host&gt;[:&lt;port&gt;] &lt;user&gt; &lt;password&gt;
</pre>
<p>In the GTK client, <i>Edit &gt; Connection Manager &gt; Add</i>.
</p>
<p>In the Web client, <i>Connection Manager &gt; Add</i>.
</p>
<h4><span class="mw-headline" id="SSH_Tunnel">SSH Tunnel</span></h4>
<p>An SSH tunnel can be created to use an encrypted connection on any client. This requires an extra loopback address to be added, but this can be automated at boot. Without this step, the connection would be considered local. The actual command to establish an SSH tunnel cannot be automated as it requires user input. There are a few possible ways to go about doing that.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/extra_lo_addr.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=extra loopback address
Wants=network.target

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/sbin/ip addr add 127.0.0.2/8 dev lo
ExecStop=/sbin/ip addr del 127.0.0.2/8 dev lo

[Install]
WantedBy=multi-user.target
</pre>
<pre>$ ssh -fNL 127.0.0.2:58846:localhost:58846 &lt;ssh host&gt;
</pre>
<p>The port <b>58846</b> should be replaced with the port the deluge server is running on and <b>&lt;ssh host&gt;</b> should be replaced with the server hosting both deluge and the SSH server.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="No_module_named_service_identity">No module named service_identity</span></h3>
<p>Upon running <code>deluged</code> or <code>deluge-console</code>, one may receive a message like the following:
</p>
<pre>:0: UserWarning: You do not have a working installation of the service_identity module: 'No module named service_identity'.  
Please install it from &lt;<a rel="nofollow" class="external free" href="https://pypi.python.org/pypi/service_identity">https://pypi.python.org/pypi/service_identity</a>&gt; and make sure all of its dependencies are satisfied.  
Without the service_identity module and a recent enough pyOpenSSL to support it, Twisted can perform only rudimentary TLS 
client hostname verification.  Many valid certificate/hostname mappings may be rejected.
</pre>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-service-identity">python-service-identity</a></span>, an optional dependency to <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-twisted">python-twisted</a></span>, is likely missing. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/43806">FS#43806</a>.
</p>
<h3><span class="mw-headline" id="Web_ui_.torrent_upload_does_not_work">Web ui .torrent upload does not work</span></h3>
<p>Users running the web ui behind a reverse proxy need to allow embedding for .torrent upload to work (X-Frame-Options ALLOW)
</p>
<h3><span class="mw-headline" id="Execute_script_not_found_or_not_executable">Execute script not found or not executable</span></h3>
<p>When using the <a rel="nofollow" class="external text" href="https://dev.deluge-torrent.org/wiki/Plugins/Execute">Execute</a> plugin, the following error message is logged when deluge tries to execute the script:
</p>
<pre>[ERROR   ][deluge_execute.core           :145 ] Execute script not found or not executable
</pre>
<p>If <code>deluged</code> is running as a system service, note that it likely will not be able to access the home directory of other users. Consider putting custom scripts in <code>/usr/local/bin/</code>.
</p>
<p>Script permission issues can be debugged as the <code>deluge</code> user:
</p>
<pre>[deluge]$ <i>/path/to/script</i>
</pre>
<h3><span class="mw-headline" id="Torrents_list_has_completely_disappeared_after_an_unexpected_shutdown">Torrents list has completely disappeared after an unexpected shutdown</span></h3>
<p>This usually means the state file has gotten corrupted. It <a rel="nofollow" class="external text" href="https://forum.deluge-torrent.org/viewtopic.php?t=55087">has been an intermittent issue since last decade.</a> There should be one backup state file along with a copy of all the previously-running torrents in your deluge profile folder (for systemd users this is usually <code>/srv/deluge/.config/deluge/state</code>) that can be restored to remedy this issue. However, it can get overwritten pretty quickly, especially if you only notice your torrents list after several reboots. A suggested course of action to keep it from happening again is to automate a daily backup of the state file and the torrents.
</p>
<h3><span class="mw-headline" id="Console_is_unusable">Console is unusable</span></h3>
<p>If you run Deluge using the <code>deluge</code> user, you should access <code>deluge-console</code> via the <code>deluge</code> user, or else you can run into various Python exceptions and bugs.
</p>
<pre>[deluge]$ deluge-console
</pre>
<p>or 
</p>
<pre># deluge-console -c /srv/deluge/.config/deluge
</pre>
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://deluge-torrent.org/">Deluge homepage</a></li>
<li><a rel="nofollow" class="external text" href="https://dev.deluge-torrent.org/wiki">Deluge wiki</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:BitTorrent.html" title="Category:BitTorrent">BitTorrent</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Deluge&amp;oldid=811421">https://wiki.archlinux.org/index.php?title=Deluge&amp;oldid=811421</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 28 June 2024, at 12:02.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
