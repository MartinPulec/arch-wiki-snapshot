<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>TigerVNC - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TigerVNC rootpage-TigerVNC skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Running_vncserver_for_virtual_(headless)_sessions" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Running_vncserver_for_virtual_(headless)_sessions">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Running vncserver for virtual (headless) sessions</div>
		</a>
		
			<button aria-controls="toc-Running_vncserver_for_virtual_(headless)_sessions-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Running vncserver for virtual (headless) sessions subsection</span>
			</button>
		
		<ul id="toc-Running_vncserver_for_virtual_(headless)_sessions-sublist" class="vector-toc-list">
			<li id="toc-Initial_setup" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Initial_setup">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Initial setup</div>
			</a>
			
			<ul id="toc-Initial_setup-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Starting_and_stopping_tigervnc" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Starting_and_stopping_tigervnc">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Starting and stopping tigervnc</div>
			</a>
			
			<ul id="toc-Starting_and_stopping_tigervnc-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Expose_the_local_display_directly" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Expose_the_local_display_directly">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Expose the local display directly</div>
		</a>
		
		<ul id="toc-Expose_the_local_display_directly-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Running_x0vncserver_to_directly_control_the_local_display" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Running_x0vncserver_to_directly_control_the_local_display">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Running x0vncserver to directly control the local display</div>
		</a>
		
			<button aria-controls="toc-Running_x0vncserver_to_directly_control_the_local_display-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Running x0vncserver to directly control the local display subsection</span>
			</button>
		
		<ul id="toc-Running_x0vncserver_to_directly_control_the_local_display-sublist" class="vector-toc-list">
			<li id="toc-With_xprofile" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#With_xprofile">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>With xprofile</div>
			</a>
			
			<ul id="toc-With_xprofile-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_systemd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#With_systemd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>With systemd</div>
			</a>
			
			<ul id="toc-With_systemd-sublist" class="vector-toc-list">
				<li id="toc-With_a_system_service" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_a_system_service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.1</span>With a system service</div>
			</a>
			
			<ul id="toc-With_a_system_service-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-With_a_user_service" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#With_a_user_service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.2</span>With a user service</div>
			</a>
			
			<ul id="toc-With_a_user_service-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Running_Xvnc_with_XDMCP_for_on_demand_sessions" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Running_Xvnc_with_XDMCP_for_on_demand_sessions">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Running Xvnc with XDMCP for on demand sessions</div>
		</a>
		
		<ul id="toc-Running_Xvnc_with_XDMCP_for_on_demand_sessions-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Connecting_to_vncserver" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Connecting_to_vncserver">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Connecting to vncserver</div>
		</a>
		
			<button aria-controls="toc-Connecting_to_vncserver-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Connecting to vncserver subsection</span>
			</button>
		
		<ul id="toc-Connecting_to_vncserver-sublist" class="vector-toc-list">
			<li id="toc-Passwordless_authentication" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Passwordless_authentication">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Passwordless authentication</div>
			</a>
			
			<ul id="toc-Passwordless_authentication-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Example_GUI-based_clients" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Example_GUI-based_clients">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Example GUI-based clients</div>
			</a>
			
			<ul id="toc-Example_GUI-based_clients-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Accessing_vncserver_via_SSH_tunnels" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Accessing_vncserver_via_SSH_tunnels">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Accessing vncserver via SSH tunnels</div>
		</a>
		
			<button aria-controls="toc-Accessing_vncserver_via_SSH_tunnels-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Accessing vncserver via SSH tunnels subsection</span>
			</button>
		
		<ul id="toc-Accessing_vncserver_via_SSH_tunnels-sublist" class="vector-toc-list">
			<li id="toc-On_the_server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#On_the_server">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>On the server</div>
			</a>
			
			<ul id="toc-On_the_server-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-On_the_client" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#On_the_client">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.2</span>On the client</div>
			</a>
			
			<ul id="toc-On_the_client-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Connecting_to_a_vncserver_from_Android_devices_over_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connecting_to_a_vncserver_from_Android_devices_over_SSH">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.3</span>Connecting to a vncserver from Android devices over SSH</div>
			</a>
			
			<ul id="toc-Connecting_to_a_vncserver_from_Android_devices_over_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Connecting_to_a_macOS_system" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Connecting_to_a_macOS_system">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>Connecting to a macOS system</div>
			</a>
			
			<ul id="toc-Connecting_to_a_macOS_system-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Recommended_security_settings" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Recommended_security_settings">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.2</span>Recommended security settings</div>
			</a>
			
			<ul id="toc-Recommended_security_settings-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Toggling_fullscreen" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Toggling_fullscreen">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3</span>Toggling fullscreen</div>
			</a>
			
			<ul id="toc-Toggling_fullscreen-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Workaround_for_mouse_back_and_forward_buttons_not_working" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Workaround_for_mouse_back_and_forward_buttons_not_working">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.4</span>Workaround for mouse back and forward buttons not working</div>
			</a>
			
			<ul id="toc-Workaround_for_mouse_back_and_forward_buttons_not_working-sublist" class="vector-toc-list">
				<li id="toc-Substituting_mouse_back/forward_buttons_with_keyboard_keys_XF86Back/XF86Forward" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Substituting_mouse_back/forward_buttons_with_keyboard_keys_XF86Back/XF86Forward">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.4.1</span>Substituting mouse back/forward buttons with keyboard keys XF86Back/XF86Forward</div>
			</a>
			
			<ul id="toc-Substituting_mouse_back/forward_buttons_with_keyboard_keys_XF86Back/XF86Forward-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mapping_the_keyboard_key_presses_back_to_mouse_button_clicks_on_the_server" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Mapping_the_keyboard_key_presses_back_to_mouse_button_clicks_on_the_server">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.4.2</span>Mapping the keyboard key presses back to mouse button clicks on the server</div>
			</a>
			
			<ul id="toc-Mapping_the_keyboard_key_presses_back_to_mouse_button_clicks_on_the_server-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Black_rectangle_instead_of_window" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Black_rectangle_instead_of_window">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.1</span>Black rectangle instead of window</div>
			</a>
			
			<ul id="toc-Black_rectangle_instead_of_window-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Empty_black_window_with_mouse_cursor_or_xinit:_connection_to_X_server_lost" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Empty_black_window_with_mouse_cursor_or_xinit:_connection_to_X_server_lost">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.2</span>Empty black window with mouse cursor or xinit: connection to X server lost</div>
			</a>
			
			<ul id="toc-Empty_black_window_with_mouse_cursor_or_xinit:_connection_to_X_server_lost-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_mouse_cursor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_mouse_cursor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.3</span>No mouse cursor</div>
			</a>
			
			<ul id="toc-No_mouse_cursor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Copying_clipboard_content_from_the_remote_machine" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Copying_clipboard_content_from_the_remote_machine">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.4</span>Copying clipboard content from the remote machine</div>
			</a>
			
			<ul id="toc-Copying_clipboard_content_from_the_remote_machine-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_window_decoration_/_borders_/_titlebars_/_cannot_move_windows_around" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_window_decoration_/_borders_/_titlebars_/_cannot_move_windows_around">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.5</span>No window decoration / borders / titlebars / cannot move windows around</div>
			</a>
			
			<ul id="toc-No_window_decoration_/_borders_/_titlebars_/_cannot_move_windows_around-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desktop_environment_is_displaying_only_boxes_for_font" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desktop_environment_is_displaying_only_boxes_for_font">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.6</span>Desktop environment is displaying only boxes for font</div>
			</a>
			
			<ul id="toc-Desktop_environment_is_displaying_only_boxes_for_font-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">TigerVNC</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/VNC" title="VNC – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/TigerVNC" title="TigerVNC – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/TigerVNC.html" title="TigerVNC – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/TigerVNC" title="TigerVNC – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/X11vnc.html" title="X11vnc">x11vnc</a></li>
<li><a href="../en/TurboVNC.html" title="TurboVNC">TurboVNC</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://tigervnc.org/">TigerVNC</a> is an implementation of the <a href="https://en.wikipedia.org/wiki/Virtual_Network_Computing" class="extiw" title="wikipedia:Virtual Network Computing">Virtual Network Computing</a> (VNC) protocol. This article focuses on the server functionality.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tigervnc">tigervnc</a></span> package.
</p>
<h2>
<span id="Running_vncserver_for_virtual_.28headless.29_sessions"></span><span class="mw-headline" id="Running_vncserver_for_virtual_(headless)_sessions">Running vncserver for virtual (headless) sessions</span>
</h2>
<h3><span class="mw-headline" id="Initial_setup">Initial setup</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Linux systems can have as many VNC servers as memory allows, all of which will be running in parallel to each other.</div>
<p>For a quick start, see the steps below.  Users are encouraged to read <span class="plainlinks archwiki-template-man" title="$ man 8 vncserver"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vncserver.8">vncserver(8)</a></span> for the complete list of configuration options.
</p>
<ol>
<li>Create a password using <code>vncpasswd</code> which will store the hashed password in <code>~/.vnc/passwd</code>. Ensure the file's permission is set to <code>0600</code>.</li>
<li>Edit <code>/etc/tigervnc/vncserver.users</code> to define user mappings.  Each user defined in this file will have a corresponding port on which its session will run.  The number in the file corresponds to a TCP port.  By default, :1 is TCP port 5901 (5900+1).  If another parallel server is needed, a second instance can then run on the next highest, free port, i.e 5902 (5900+2).</li>
<li>Create <code>~/.vnc/config</code> and at a minimum, define the type of session desired with a line like <code>session=foo</code> where foo corresponds to whichever <a href="../en/Desktop_environment.html" title="Desktop environment">desktop environment</a> is to run.  One can see which desktop environments are available on the system by seeing their corresponding <i>.desktop</i> files within <code>/usr/share/xsessions/</code>. For example:</li>
</ol>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.vnc/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">session=lxqt
geometry=1920x1080
localhost
alwaysshared</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The previous step requires additional security setup to fully work; see <a href="#Accessing_vncserver_via_SSH_tunnels">#Accessing vncserver via SSH tunnels</a> to complete the setup. For testing purposes, omit this step to allow unsecured connections from outside of localhost.</div>
<h3><span class="mw-headline" id="Starting_and_stopping_tigervnc">Starting and stopping tigervnc</span></h3>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> an instance of the <code>vncserver@.service</code> template and optionally <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> it to run at boot time/shutdown. Note that the <i>instance identifier</i> in this case is the display number (e.g. instance <code>vncserver@:1.service</code> for display number <code>:1</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Direct calls to <code>/usr/bin/vncserver</code> are not supported as they will not establish a proper session scope. The <i>systemd</i> service is the only supported method of using TigerVNC. See: <a rel="nofollow" class="external text" href="https://github.com/TigerVNC/tigervnc/issues/1096">Issue #1096</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Remove drop-in service files created for earlier versions of TigerVNC before starting <b>vncserver</b>. Prior versions required drop-in service files for each display, e.g. for display :1 <code>/etc/systemd/system/vncserver@:1.service</code>. <b>vncserver</b> will fail to start if the old drop-in file is present when you attempt to start with the new templated service file.</div>
<h2><span class="mw-headline" id="Expose_the_local_display_directly">Expose the local display directly</span></h2>
<p>TigerVNC includes <code>libvnc.so</code>, which can be seamlessly loaded during X initialization for enhanced performance. To utilize this feature, create the following file and then restart X:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-vnc.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Module"
Load "vnc"
EndSection

Section "Screen"
Identifier "Screen0"
Option "UserPasswdVerifier" "VncAuth"
Option "PasswordFile" "/root/.vnc/passwd"
EndSection
</pre>
<h2><span class="mw-headline" id="Running_x0vncserver_to_directly_control_the_local_display">Running x0vncserver to directly control the local display</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tigervnc">tigervnc</a></span> also provides <span class="plainlinks archwiki-template-man" title="$ man 1 x0vncserver"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/x0vncserver.1">x0vncserver(1)</a></span> which allows direct control over a physical X session. After defining a session password using the <i>vncpasswd</i> tool, invoke the server like so:
</p>
<pre>$ x0vncserver -rfbauth ~/.vnc/passwd
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<a href="../en/X11vnc.html" title="X11vnc">x11vnc</a> is an alternative VNC server which can also provide direct control of the current X session.</li>
<li>
<code>x0vncserver</code> does not currently support clipboard sharing between the client and the server (even with the help of <code>autocutsel</code>). See: <a rel="nofollow" class="external text" href="https://github.com/TigerVNC/tigervnc/issues/529">Issue #529</a>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="With_xprofile">With xprofile</span></h3>
<p>A simple way to start <i>x0vncserver</i> is adding a line in one of the <a href="../en/Xprofile.html" title="Xprofile">xprofile</a> files such as:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xprofile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
x0vncserver -rfbauth ~/.vnc/passwd &amp;
</pre>
<h3><span class="mw-headline" id="With_systemd">With systemd</span></h3>
<h4><span class="mw-headline" id="With_a_system_service">With a system service</span></h4>
<p>This option will allow the users to access the current display, including the login screen provided by your display manager.
</p>
<p>The service will be relaunched automatically every time an user logs off of their session.
</p>
<p><a href="../en/LightDM.html" title="LightDM">LightDM</a> is used for the example below, but it should be possible to adapt it to other display managers by modifying the <code>XAUTHORITY</code> variable.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/x0vncserver.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Remote desktop service (VNC) for :0 display
Requires=display-manager.service
After=network-online.target
After=display-manager.service

[Service]
Type=simple
Environment=HOME=/root
Environment=XAUTHORITY=/var/run/lightdm/root/:0
ExecStart=x0vncserver -display :0 -rfbauth ~/.vnc/passwd
Restart=on-failure
RestartSec=500ms

[Install]
WantedBy=multi-user.target</pre>
<p>As this is a system unit, <code>-rfbauth ~/.vnc/passwd</code> refers to <code>/root/.vnc/passwd</code>
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> <code>x0vncserver.service</code>.
</p>
<h4><span class="mw-headline" id="With_a_user_service">With a user service</span></h4>
<p>In order to have a VNC Server running <i>x0vncserver</i>, which is the easiest way for most users to quickly have remote access to the current desktop, create a <i>systemd</i> unit as follows replacing the user and the options with the desired ones:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/x0vncserver.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Remote desktop service (VNC)

[Service]
Type=simple
ExecStartPre=/bin/sh -c 'while ! pgrep -U "$USER" Xorg; do sleep 2; done'
ExecStart=/usr/bin/x0vncserver -rfbauth %h/.vnc/passwd

[Install]
WantedBy=default.target</pre>
<p>The <code>ExecStartPre</code> line waits for Xorg to be started by <code>${USER}</code>. 
</p>
<p>To login with your username and password, replace <code>ExecStart</code> by <code>/usr/bin/x0vncserver -PAMService=login -PlainUsers=${USER} -SecurityTypes=TLSPlain</code>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> the <code>x0vncserver.service</code> <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user unit</a>.
</p>
<h2><span class="mw-headline" id="Running_Xvnc_with_XDMCP_for_on_demand_sessions">Running Xvnc with XDMCP for on demand sessions</span></h2>
<p>One can use <i>systemd</i> socket activation in combination with <a href="../en/XDMCP.html" title="XDMCP">XDMCP</a> to automatically spawn VNC servers for each user who attempts to login, so there is no need to set up one server/port per user. This setup uses the display manager to authenticate users and login, so there is no need for VNC passwords. The downside is that users cannot leave a session running on the server and reconnect to it later.
</p>
<p>To get this running, first set up <a href="../en/XDMCP.html" title="XDMCP">XDMCP</a> and make sure the display manager is running.
Then create:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/xvnc.socket</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=XVNC Server

[Socket]
ListenStream=5900
Accept=yes

[Install]
WantedBy=sockets.target</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/xvnc@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=XVNC Per-Connection Daemon

[Service]
ExecStart=-/usr/bin/Xvnc -inetd -query localhost -geometry 1920x1080 -once -SecurityTypes=None
User=nobody
StandardInput=socket
StandardError=syslog</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> <code>xvnc.socket</code>. Now, any number of users can get unique desktops by connecting to port 5900.
</p>
<p>If the VNC server is exposed to the internet, add the <code>-localhost</code> option to <code>Xvnc</code> in <code>xvnc@.service</code> (note that <code>-query localhost</code> and <code>-localhost</code> are different switches) and follow <a href="#Accessing_vncserver_via_SSH_tunnels">#Accessing vncserver via SSH tunnels</a>. Since we only select a user after connecting, the VNC server runs as user <i>nobody</i> and uses <code>Xvnc</code> directly instead of the <code>vncserver</code> script, so any options in <code>~/.vnc</code> are ignored. Optionally, <a href="../en/Autostarting.html" class="mw-redirect" title="Autostart">autostart</a> <i>vncconfig</i> so that the clipboard works (<i>vncconfig</i> exits immediately in non-VNC sessions). One way is to create:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xinit/xinitrc.d/99-vncconfig.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
vncconfig -nowin &amp;
</pre>
<h2><span class="mw-headline" id="Connecting_to_vncserver">Connecting to vncserver</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The default's TigerVNC security method is not secure. It lacks identity verification and will not prevent man-in-the-middle attack during the connection setup. Make sure you understand the security settings of your server and do not connect insecurely to a vncserver outside of a trusted LAN.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> By default, TigerVNC uses the <i>TLSVnc</i> authentication/encryption method unless specifically instructed via the <code>SecurityTypes</code> parameter. With <i>TLSVnc</i>, there is standard VNC authentication and traffic is encrypted with GNUTLS but the identity of the server is not verified. TigerVNC supports alternative security schemes such as <i>X509Vnc</i> that combines standard VNC authentication with GNUTLS encryption and server identification; this is the recommended mode for a secure connection.
When <code>SecurityTypes</code> on the server is set to a non-encrypted option as high-priority (such as <i>None</i>, <i>VncAuth</i>, <i>Plain</i>, <i>TLSNone</i>, <i>TLSPlain</i>, <i>X509None</i>, <i>X509Plain</i>), which is ill-advised, then it is not possible to use encryption. When running <i>vncviewer</i>, it is safer to explicitly set <code>SecurityTypes</code> and not accept any unencrypted traffic. Any other mode is to be used only when <a href="#Accessing_vncserver_via_SSH_tunnels">#Accessing vncserver via SSH tunnels</a>. </div>
<p>Any number of clients can connect to a vncserver.  A simple example is given below where vncserver is running on 10.1.10.2 port 5901, or :1 in shorthand notation:
</p>
<pre>$ vncviewer 10.1.10.2:1
</pre>
<h3><span class="mw-headline" id="Passwordless_authentication">Passwordless authentication</span></h3>
<p>The <code>-passwd</code> switch enables one to specify the location of the server's <code>~/.vnc/passwd</code> file. This file is expected to be accessible to the user through <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a> or physical access to the server. In either case, place the file on the client's file system in a safe location, i.e. one in which only the intended user has read access.
</p>
<pre>$ vncviewer -passwd <i>/path/to/server-passwd-file</i>
</pre>
<p>The password can also be provided directly.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The password below is not secured; anyone who can run <code>ps</code> on the machine will see it.</div>
<pre>$ vncviewer -passwd &lt;(echo MYPASSWORD | vncpasswd -f)
</pre>
<h3><span class="mw-headline" id="Example_GUI-based_clients">Example GUI-based clients</span></h3>
<ul>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gtk-vnc">gtk-vnc</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=krdc">krdc</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vinagre">vinagre</a></span></li>
<li><a href="../en/Remmina.html" title="Remmina">remmina</a></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virt-viewer">virt-viewer</a></span></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vncviewer-jar/">vncviewer-jar</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>
</li>
</ul>
<p>TigerVNC's vncviewer also has a simple GUI when run without any parameters:
</p>
<pre>$ vncviewer
</pre>
<h2><span class="mw-headline" id="Accessing_vncserver_via_SSH_tunnels">Accessing vncserver via SSH tunnels</span></h2>
<p>For servers offering SSH connection, an advantage of this method is that it is not necessary to open any other port than the already opened SSH port to the outside, since the VNC traffic is tunneled through the SSH port.
</p>
<h3><span class="mw-headline" id="On_the_server">On the server</span></h3>
<p>On the server side, <i>vncserver</i> or <i>x0vncserver</i> must be run.
</p>
<p>When running either one of these, it is recommended to use the <code>localhost</code> option in <code>~/.vnc/config</code> or the <code>-localhost</code> switch (for <i>x0vncserver</i>) since it allows connections from the localhost only and by analogy, only from users ssh'ed and authenticated on the box. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.vnc/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">session=lxqt
geometry=1920x1080
localhost
alwaysshared</pre>
<p>Make sure to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> or <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">Restart</a> the <code>vncserver@.service</code>, for example (see also <a href="#Initial_setup">#Initial setup</a>):
</p>
<pre># systemctl start vncserver@:1
</pre>
<p>or for <i>x0vncserver</i>:
</p>
<pre>$ x0vncserver <b>-localhost</b> -SecurityTypes none
</pre>
<h3><span class="mw-headline" id="On_the_client">On the client</span></h3>
<p>The VNC server has been setup on the remote machine to only accept local connections.
Now, the client must open a secure shell with the remote machine (10.1.10.2 in this example) and create a tunnel from the client port, for instance 9901, to the remote server 5901 port. For more details on this feature, see <a href="../en/OpenSSH.html#Forwarding_other_ports" title="OpenSSH">OpenSSH#Forwarding other ports</a> and <span class="plainlinks archwiki-template-man" title="$ man 1 ssh"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh.1">ssh(1)</a></span>.
</p>
<pre>$ ssh 10.1.10.2 -L 9901:localhost:5901
</pre>
<p>Once connected via SSH, leave this shell window open since it is acting as the secured tunnel with the server. Alternatively, directly run SSH in the background using the <code>-f</code> option. On the client side, to connect via this encrypted tunnel, point the <i>vncviewer</i> to the forwarded client port on the localhost.
</p>
<pre>$ vncviewer localhost:9901
</pre>
<p>What happens in practice is that the vncviewer connects locally to port 9901 which is tunneled to the server's localhost port 5901. The connection is established to the right port within the secure shell.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> It is possible, with a one-liner, to keep the port forwarding active during the connection and close it right after:
 <pre>$ ssh -fL 9901:localhost:5901 10.1.10.2 sleep 10; vncviewer localhost:9901</pre>
<p>What it does is that the <code>-f</code> switch will make ssh go in the background; it will still be alive executing <code>sleep 10</code>. vncviewer is then executed and ssh remains open in the background as long as vncviewer makes use of the tunnel. ssh will close once the tunnel is dropped which is the wanted behavior.
</p>
<p>Alternatively, vncviewer's <code>-via</code> switch provides a shortcut for the above command:
</p>
 <pre>$ vncviewer -via 10.1.10.2 localhost::5901</pre>
<p>(Notice the double colon – vncviewer's syntax is <code>[host]:[display#]</code> or <code>[host]::[port]</code>.)
</p>
</div>
<h3><span class="mw-headline" id="Connecting_to_a_vncserver_from_Android_devices_over_SSH">Connecting to a vncserver from Android devices over SSH</span></h3>
<p>To connect to a VNC server over SSH using an Android device as a client, consider having the following setup:
</p>
<ol>
<li>SSH running on the server</li>
<li>vncserver running on server (with <code>-localhost</code> flag for security)</li>
<li>SSH client on the Android device: <i>ConnectBot</i> is a popular choice and will be used in this guide as an example</li>
<li>VNC client on the Android device: <i>androidVNC</i> used here</li>
</ol>
<p>In <i>ConnectBot</i>, connect to the desired machine. Tap the options key, select <i>Port Forwards</i> and add a port:
</p>
<pre>Type: Local
Source port: 5901
Destination: 127.0.0.1:5901
</pre>
<p>In <i>androidVNC</i>, connect to the VNC port; this is the local address following the SSH connection:
</p>
<pre>Password: the vncserver password
Address: 127.0.0.1
Port: 5901
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Connecting_to_a_macOS_system">Connecting to a macOS system</span></h3>
<p>See <a rel="nofollow" class="external free" href="https://help.ubuntu.com/community/AppleRemoteDesktop">https://help.ubuntu.com/community/AppleRemoteDesktop</a>. Tested with Remmina.
</p>
<h3><span class="mw-headline" id="Recommended_security_settings">Recommended security settings</span></h3>
<p>If not <a href="#Accessing_vncserver_via_SSH_tunnels">#Accessing vncserver via SSH tunnels</a> where the identification and the encryption are handled via SSH, it is recommended to use <i>X509Vnc</i>, as <i>TLSVnc</i> lacks identity verification.
</p>
<pre>$ vncserver -x509key <i>/path/to/key.pem</i> -x509cert <i>/path/to/cert.pem</i> -SecurityTypes X509Vnc :1
</pre>
<p>Issuing x509 certificates is beyond the scope of this guide. However, <a href="https://en.wikipedia.org/wiki/Let%27s_Encrypt" class="extiw" title="wikipedia:Let's Encrypt">Let's Encrypt</a> provides an easy way to do so. Alternatively, one can issue certificates using <a href="../en/OpenSSL.html" title="OpenSSL">OpenSSL</a>, share the public key with the client and specify it with the <code>-X509CA</code> parameter. An example is given below the server is running on 10.1.10.2:
</p>
<pre>$ vncviewer 10.1.10.2 -X509CA <i>/path/to/cert.pem</i>
</pre>
<h3><span class="mw-headline" id="Toggling_fullscreen">Toggling fullscreen</span></h3>
<p>This can be done through vnc client's menu. By default, vnc client's mkey is <code>F8</code>.
</p>
<h3><span class="mw-headline" id="Workaround_for_mouse_back_and_forward_buttons_not_working">Workaround for mouse back and forward buttons not working</span></h3>
<p>The VNC protocol currently only uses 7 mouse buttons (left, middle, right, scroll up, scroll down, scroll left, scroll right) which means if your mouse has a back and a forward button, these are not usable and input will be ignored.
</p>
<p><a rel="nofollow" class="external text" href="https://www.bedroomlan.org/projects/evrouter/">evrouter</a> can be used to work around this limitation by sending keyboard key presses when clicking the mouse back/forward buttons. Optionally, xte found in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xautomation">xautomation</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xbindkeys">xbindkeys</a></span> can be used on the server to map the keyboard key presses back to mouse button clicks if needed.
</p>
<h4>
<span id="Substituting_mouse_back.2Fforward_buttons_with_keyboard_keys_XF86Back.2FXF86Forward"></span><span class="mw-headline" id="Substituting_mouse_back/forward_buttons_with_keyboard_keys_XF86Back/XF86Forward">Substituting mouse back/forward buttons with keyboard keys XF86Back/XF86Forward</span>
</h4>
<p>This method is simple and suitable if you only need a way to navigate backward/forward while using web browsers or file browsers for example.
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/evrouter/">evrouter</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xautomation">xautomation</a></span> on the client. Configure evrouter, see <a href="../en/Mouse_buttons.html#evrouter" title="Mouse buttons">Mouse buttons#evrouter</a> and evrouter man pages for instructions and tips on how to find the correct device name, window name, button names etc. Example config:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.evrouterrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Window "OtherComputer:0 - TigerVNC": # Window title used as filter

# Using Shell to avoid repeating key presses (see evrouter manual)
"USB mouse" "/dev/input/by-id/usb-Mouse-name-event-mouse" none key/275 "Shell/xte 'key XF86Back'"
"USB mouse" "/dev/input/by-id/usb-Mouse-name-event-mouse" none key/276 "Shell/xte 'key XF86Forward'"

# Use XKey below instead if repeating keys is desired (see evrouter manual)
#"Logitech Gaming Mouse G400" "/dev/input/by-id/usb-Logitech_Gaming_Mouse_G400-event-mouse" none key/275 "XKey/XF86Back"
#"Logitech Gaming Mouse G400" "/dev/input/by-id/usb-Logitech_Gaming_Mouse_G400-event-mouse" none key/276 "XKey/XF86Forward"
</pre>
<p>Start evrouter on the client. With above configuration keyboard key <code>XF86Back</code> is sent to the VNC server when clicking the back button on the mouse, and <code>XF86Forward</code> is sent when clicking the forward button.
</p>
<h4><span class="mw-headline" id="Mapping_the_keyboard_key_presses_back_to_mouse_button_clicks_on_the_server">Mapping the keyboard key presses back to mouse button clicks on the server</span></h4>
<p>If needed, it is possible to map the keyboard keys back to mouse button clicks on the server. In this case, it might be a good idea to use keyboard keys which are never on the client or server. In the example below, keyboard keys <code>XF86Launch8</code>/<code>XF86Launch9</code> are used as mouse buttons 8/9.
</p>
<p>Evrouter configuration on the client:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.evrouterrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Window "OtherComputer:0 - TigerVNC": # Window title

# Using Shell to avoid repeating key presses (see evrouter manual)
"USB mouse" "/dev/input/by-id/usb-Mouse-name-event-mouse" none key/275 "Shell/xte 'key XF86Launch8'"
"USB mouse" "/dev/input/by-id/usb-Mouse-name-event-mouse" none key/276 "Shell/xte 'key XF86Launch9'"
</pre>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xautomation">xautomation</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xbindkeys">xbindkeys</a></span> on the server. Configure xbindkeys to map keyboard keys <code>XF86Launch8</code>/<code>XF86Launch9</code> to mouse buttons 8/9 with xte.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.xbindkeysrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">"xte 'mouseclick 8'"
     XF86Launch8

"xte 'mouseclick 9'"
     XF86Launch9
</pre>
<p>Start xbindkeys (<code>xbindkeys -f ~/.xbindkeysrc</code>). The server will now map <code>XF86Launch8</code>/<code>XF86Launch9</code> to mouse buttons 8/9.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Black_rectangle_instead_of_window">Black rectangle instead of window</span></h3>
<p>Most probably, this is due to the application strictly requiring the composite Xorg extension.  For example webkit based app: midori, psi-plus, etc.
</p>
<p>Restart vncserver in this case using something like following:
</p>
<pre>$ vncserver -geometry ... -depth 24 :1 +extension Composite
</pre>
<p>It looks like Composite extension in VNC will work only with 24bit depth.
</p>
<h3><span class="mw-headline" id="Empty_black_window_with_mouse_cursor_or_xinit:_connection_to_X_server_lost">Empty black window with mouse cursor or xinit: connection to X server lost</span></h3>
<p>Verify that the user is not logged into a physical X session, unless this option was configured with <code>x0vncserver</code>. Multiple X sessions for a single user are not supported, see <a rel="nofollow" class="external text" href="https://github.com/TigerVNC/tigervnc/issues/684#issuecomment-494385395">684#issuecomment-494385395</a> and <a rel="nofollow" class="external text" href="https://github.com/TigerVNC/tigervnc/issues/1634">#1634</a>.
</p>
<p>Conversely, trying to log into a local X session while a VNC server service is running for that user will likely not work, and you may get stuck on a splash screen when using a desktop environment.
</p>
<h3><span class="mw-headline" id="No_mouse_cursor">No mouse cursor</span></h3>
<p>If no mouse cursor is visible when using <i>x0vncserver</i>, start <i>vncviewer</i> as follows:
</p>
<pre>$ vncviewer DotWhenNoCursor=1 <i>server</i>
</pre>
<p>Alternatively, put <code>DotWhenNoCursor=1</code> in the TigerVNC configuration file, which is at <code>~/.vnc/default.tigervnc</code> by default.
</p>
<h3><span class="mw-headline" id="Copying_clipboard_content_from_the_remote_machine">Copying clipboard content from the remote machine</span></h3>
<p>If copying from the remote machine to the local machine does not work, run <code>autocutsel</code> on the server, as mentioned in <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=101243">[1]</a>:
</p>
<pre>$ autocutsel -fork
</pre>
<p>Now, press <code>F8</code> to display the VNC menu popup, and select <code>Clipboard: local -&gt; remote</code> option.
</p>
<h3>
<span id="No_window_decoration_.2F_borders_.2F_titlebars_.2F_cannot_move_windows_around"></span><span class="mw-headline" id="No_window_decoration_/_borders_/_titlebars_/_cannot_move_windows_around">No window decoration / borders / titlebars / cannot move windows around</span>
</h3>
<p>Start a window manager to fix an empty <a href="../en/Xterm.html" title="Xterm">xterm</a> frame. For example, on <a href="../en/Xfce.html" title="Xfce">Xfce</a>, run <code>xfwm4 &amp;</code>.
</p>
<h3><span class="mw-headline" id="Desktop_environment_is_displaying_only_boxes_for_font">Desktop environment is displaying only boxes for font</span></h3>
<p>Some <a href="../en/Desktop_environment.html" title="Desktop environment">desktop environments</a> might be missing necessary font to display ASCII characters. <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ttf-dejavu">ttf-dejavu</a></span>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a rel="nofollow" class="external free" href="https://github.com/TigerVNC/tigervnc">https://github.com/TigerVNC/tigervnc</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Remote_desktop.html" title="Category:Remote desktop">Remote desktop</a></li>
<li><a href="../en/Category:Servers.html" title="Category:Servers">Servers</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=TigerVNC&amp;oldid=801631">https://wiki.archlinux.org/index.php?title=TigerVNC&amp;oldid=801631</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 28 February 2024, at 21:36.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
