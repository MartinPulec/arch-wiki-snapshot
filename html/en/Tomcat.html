<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Tomcat - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Tomcat rootpage-Tomcat skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Filesystem_hierarchy" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Filesystem_hierarchy">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Filesystem hierarchy</div>
			</a>
			
			<ul id="toc-Filesystem_hierarchy-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Initial_configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Initial_configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Initial configuration</div>
		</a>
		
		<ul id="toc-Initial_configuration-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Start/stop_Tomcat" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Start/stop_Tomcat">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Start/stop Tomcat</div>
		</a>
		
			<button aria-controls="toc-Start/stop_Tomcat-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Start/stop Tomcat subsection</span>
			</button>
		
		<ul id="toc-Start/stop_Tomcat-sublist" class="vector-toc-list">
			<li id='toc-Alternate_"manual"_way' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Alternate_"manual"_way'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Alternate "manual" way</div>
			</a>
			
			<ul id='toc-Alternate_"manual"_way-sublist' class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Deploy_and_handle_web_applications" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Deploy_and_handle_web_applications">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Deploy and handle web applications</div>
		</a>
		
			<button aria-controls="toc-Deploy_and_handle_web_applications-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Deploy and handle web applications subsection</span>
			</button>
		
		<ul id="toc-Deploy_and_handle_web_applications-sublist" class="vector-toc-list">
			<li id="toc-The_GUI_way" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#The_GUI_way">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>The GUI way</div>
			</a>
			
			<ul id="toc-The_GUI_way-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-The_CLI_way" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#The_CLI_way">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>The CLI way</div>
			</a>
			
			<ul id="toc-The_CLI_way-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hosting_files_outside_the_webapps_folder" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hosting_files_outside_the_webapps_folder">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Hosting files outside the webapps folder</div>
			</a>
			
			<ul id="toc-Hosting_files_outside_the_webapps_folder-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Logging" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Logging">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Logging</div>
		</a>
		
		<ul id="toc-Logging-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Further_setup" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Further_setup">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Further setup</div>
		</a>
		
			<button aria-controls="toc-Further_setup-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Further setup subsection</span>
			</button>
		
		<ul id="toc-Further_setup-sublist" class="vector-toc-list">
			<li id="toc-Migrating_from_previous_versions_of_Tomcat" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Migrating_from_previous_versions_of_Tomcat">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Migrating from previous versions of Tomcat</div>
			</a>
			
			<ul id="toc-Migrating_from_previous_versions_of_Tomcat-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_Tomcat_with_a_different_JRE/JDK" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_Tomcat_with_a_different_JRE/JDK">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Using Tomcat with a different JRE/JDK</div>
			</a>
			
			<ul id="toc-Using_Tomcat_with_a_different_JRE/JDK-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Security_configuration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Security_configuration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Security configuration</div>
			</a>
			
			<ul id="toc-Security_configuration-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Tomcat_service_is_started,_but_page_is_not_loaded" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tomcat_service_is_started,_but_page_is_not_loaded">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>Tomcat service is started, but page is not loaded</div>
			</a>
			
			<ul id="toc-Tomcat_service_is_started,_but_page_is_not_loaded-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Tomcat</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Apache_Tomcat" title="Apache Tomcat – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Tomcat" title="Tomcat – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Tomcat" title="Tomcat – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p>Tomcat is an open source Java <a href="https://en.wikipedia.org/wiki/Web_container" class="extiw" title="wikipedia:Web container">Servlet container</a> developed by the Apache Software Foundation. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Tomcat currently exists under four stable branches: <a rel="nofollow" class="external text" href="https://tomcat.apache.org/download-70.cgi">7</a>, <a rel="nofollow" class="external text" href="https://tomcat.apache.org/download-80.cgi">8</a>, <a rel="nofollow" class="external text" href="https://tomcat.apache.org/download-90.cgi">9</a> and <a rel="nofollow" class="external text" href="https://tomcat.apache.org/download-10.cgi">10</a>, . None of these version deprecates the preceding. Instead, <a rel="nofollow" class="external text" href="https://tomcat.apache.org/whichversion.html#Apache_Tomcat_Versions">each branch is the implementation of a couple of the "Servlet" and "JSP" Java standards</a>. The last versions are officially supported in Arch Linux: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat8">tomcat8</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat9">tomcat9</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat10">tomcat10</a></span>. Check the version you need depending on your web applications requirements.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install one of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat8">tomcat8</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat9">tomcat9</a></span>, or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat10">tomcat10</a></span>.
</p>
<p>If deploying Tomcat onto a production environment, consider installing <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat-native">tomcat-native</a></span>. The native library for Tomcat configures the server to use the Apache Portable Runtime (APR) library's network connection (socket) and RNG implementations. It uses native 32- or 64-bit code to enhance performance and is sometimes used in production environments where speed is crucial. No configuration is necessary for default Tomcat installations. More information is available in the <a rel="nofollow" class="external text" href="https://tomcat.apache.org/native-doc/">official Tomcat docs</a>.
</p>
<p>Using tomcat-native will remove the following warning in <code>catalina.err</code>:
</p>
<pre>INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path [...]
</pre>
<h3><span class="mw-headline" id="Filesystem_hierarchy">Filesystem hierarchy</span></h3>
<p>Replace the <code><i>n</i></code> with your installed version (8, 9, 10).
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Pathname</th>
<th>Use
</th>
</tr>
<tr>
<td><code>/etc/tomcat<i>n</i></code></td>
<td>Configuration files. Among some: <code>tomcat-users.xml</code> (defines users allowed to use administration tools and their roles), <code>server.xml</code> (Main Tomcat configuration file), <code>catalina.policy</code> (security policies configuration file)
</td>
</tr>
<tr>
<td><code>/usr/share/tomcat<i>n</i></code></td>
<td>Main Tomcat folder containing scripts and links to other directories
</td>
</tr>
<tr>
<td><code>/usr/share/java/tomcat<i>n</i></code></td>
<td>Tomcat Java libraries (jars)
</td>
</tr>
<tr>
<td><code>/var/log/tomcat<i>n</i></code></td>
<td>Log files <b>not</b> handled by <code>systemd</code> (see <a href="#Logging">#Logging</a>)
</td>
</tr>
<tr>
<td><code>/var/lib/tomcat<i>n</i>/webapps</code></td>
<td>Where Tomcat deploys your web applications
</td>
</tr>
<tr>
<td><code>/var/tmp/tomcat<i>n</i></code></td>
<td>Where Tomcat store your webapps' data
</td>
</tr>
</tbody>
</table>
<h2><span class="mw-headline" id="Initial_configuration">Initial configuration</span></h2>
<p>In order to be able to use the manager webapp and the admin webapp, you need to edit <code>/etc/tomcat<i>n</i>/tomcat-users.xml</code>.
</p>
<p>Uncomment the "role and user" XML declaration and modify it to enable roles <code>tomcat</code>, <code>admin-gui</code>, <code>admin-script</code> and/or <code>manager-gui</code>, <code>manager-script</code>, <code>manager-jmx</code>, <code>manager-status</code>, depending on your needs (see <a rel="nofollow" class="external text" href="https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access">Configuring Manager Application Access</a>).
To keep it short, <code>tomcat</code> is the mandatory role used to run, <code>manager-*</code> are roles able to administer web applications and <code>admin-*</code> are full right administrator roles on the Tomcat server.
</p>
<p>Here is a bare configuration file that declares some of these roles along with usernames and passwords (be sure to change the following [CHANGE_ME] passwords to something secure):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tomcat<i>n</i>/tomcat-users.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;tomcat-users&gt;
  &lt;role rolename="tomcat"/&gt;
  &lt;role rolename="manager-gui"/&gt;
  &lt;role rolename="manager-script"/&gt;
  &lt;role rolename="manager-jmx"/&gt;
  &lt;role rolename="manager-status"/&gt;
  &lt;role rolename="admin-gui"/&gt;
  &lt;role rolename="admin-script"/&gt;
  &lt;user username="tomcat" password="<b>[CHANGE_ME]</b>" roles="tomcat"/&gt;
  &lt;user username="manager" password="<b>[CHANGE_ME]</b>" roles="manager-gui,manager-script,manager-jmx,manager-status"/&gt;
  &lt;user username="admin" password="<b>[CHANGE_ME]</b>" roles="admin-gui"/&gt;
&lt;/tomcat-users&gt;</pre>
<p>Keep in mind that Tomcat must be restarted each time a modification is made to this file.
</p>
<p>This <a rel="nofollow" class="external text" href="https://blog.techstacks.com/2010/07/new-manager-roles-in-tomcat-7-are-wonderful.html">blog post</a> gives a good description of these roles.
</p>
<p>To have read permissions on the configuration files and work well with some IDEs, you must add your user to the <code>tomcat<i>n</i></code> <a href="../en/Users_and_groups.html#Group_management" class="mw-redirect" title="User group">user group</a>.
</p>
<h2>
<span id="Start.2Fstop_Tomcat"></span><span class="mw-headline" id="Start/stop_Tomcat">Start/stop Tomcat</span>
</h2>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">Start</a> the <code>tomcat<i>n</i>.service</code>.
</p>
<p>Once Tomcat is started, you can visit this page to see the result: <a rel="nofollow" class="external text" href="http://localhost:8080">http://localhost:8080</a>. If a nice Tomcat local home page is displayed, this means your Servlet container is up and running and ready to host you web apps. If the startup script failed or you can only see a Java error displayed in you browser, have a look at startup logs using systemd's <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journalctl">journalctl</a>. Google is full of answers on recurrent issues found in Tomcat logs.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> <code>/etc/conf.d/tomcat<i>n</i></code> does not exist at least on tomcat{9,10}. Check where the new <code>CATALINA_OPTS</code> exists. (Discuss in <a rel="nofollow" class="external text" href="../en/ArchWiki:Archive.html">Talk:Tomcat</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> To improve security, Arch Linux's Tomcat packages use the <a rel="nofollow" class="external text" href="https://commons.apache.org/proper/commons-daemon/jsvc.html">jsvc</a> binary from Apache's <a rel="nofollow" class="external text" href="https://commons.apache.org/proper/commons-daemon/">common-daemons</a>. Tomcat's <code>systemd</code> service runs this Apache binary with root privileges which itself starts Tomcat with an underprivileged user (<code>tomcat<i>n</i>:tomcat<i>n</i></code> in Arch Linux). This prevents malicious code that could be executed in a bad web application from causing too much damage. This also enables the use of ports under 1024 if needed. See <code>man jsvc</code> for options available and pass them through the <code>CATALINA_OPTS</code> environment variable declared in <code>/etc/conf.d/tomcat<i>n</i></code>.</div>
<h3>
<span id="Alternate_.22manual.22_way"></span><span class="mw-headline" id='Alternate_"manual"_way'>Alternate "manual" way</span>
</h3>
<p>Tomcat can also be controlled directly using upstream scripts:
</p>
<pre>/usr/share/tomcat/bin/{startup.sh,shutdown.sh,..}
</pre>
<p>This can be useful to debug applications or even debug Tomcat, but do not use it to start Tomcat for the first time as doing so can set some permissions wrongly and stop web apps from working. In order to be able to use these scripts, some further configuration may be needed. Be aware that using these scripts prevents the jsvc security advantage described above.
</p>
<h2><span class="mw-headline" id="Deploy_and_handle_web_applications">Deploy and handle web applications</span></h2>
<p>Tomcat is bundled with 5 already deployed web applications (change localhost with your server's FQDN if needed):
</p>
<ul>
<li>The default home page: <a rel="nofollow" class="external text" href="http://localhost:8080/">http://localhost:8080/</a>
</li>
<li>Tomcat's local documentation: <a rel="nofollow" class="external text" href="http://localhost:8080/docs/">http://localhost:8080/docs/</a>
</li>
<li>Examples of Servlets and JSP: <a rel="nofollow" class="external text" href="http://localhost:8080/examples/">http://localhost:8080/examples/</a>
</li>
<li>The host-manager to handle virtual hosts: <a rel="nofollow" class="external text" href="http://localhost:8080/host-manager">http://localhost:8080/host-manager/</a>
</li>
<li>The manager to administer web applications: <a rel="nofollow" class="external text" href="http://localhost:8080/manager/html">http://localhost:8080/manager/html/</a>
</li>
</ul>
<h3><span class="mw-headline" id="The_GUI_way">The GUI way</span></h3>
<p>Probably the easiest way is to use the manager webapp <a rel="nofollow" class="external text" href="http://localhost:8080/manager/html">http://localhost:8080/manager/html</a>. Use the username/password you defined as <code>manager</code> in <code>tomcat-users.xml</code>. Once logged in, you can see five already deployed web applications. Add yours through the "Deploy" area and then stop/start/undeploy it with the "Applications" area.
</p>
<h3><span class="mw-headline" id="The_CLI_way">The CLI way</span></h3>
<p>One can also just copy the WAR file of the application to directory <code>/usr/share/tomcat<i>n</i>/webapps</code>. For that later, be sure that the <code>autoDeploy</code> option is still set for the right host as shown here:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tomcat<i>n</i>/server.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
&lt;Host name="localhost"  appBase="webapps"
      unpackWARs="true" <b>autoDeploy="true"</b>&gt;
...</pre>
<h3><span class="mw-headline" id="Hosting_files_outside_the_webapps_folder">Hosting files outside the webapps folder</span></h3>
<p>If you want to keep your project outside the webapps folder, this is possible by creating a <code>Context</code>. 
Go to <code>/etc/tomcat<i>n</i>/Catalina/localhost/</code> and create your context. A context is a simple xml file which specifies where tomcat should look for the project. The basic format of the file is: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tomcat<i>n</i>/Catalina/localhost/whatShouldFollowLocalhost.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;Context path="/whatSholdFollwLocalhost" docBase="/where/your/project/is/" reloadable="true"/&gt;</pre>
<p>A working example is as follows. This assumes that the project is hosted somewhere in the users /home-folder.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tomcat<i>n</i>/Catalina/localhost/myProject.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;Context path="/myProject" docBase="/home/archie/code/jsp/myProject" reloadable="true"/&gt;</pre>
<p>The files can now be hosted in <code>/home/archie/code/jsp/myProject/</code>. To see the project in your webbrowser, go to <a rel="nofollow" class="external text" href="http://localhost:8080/myProject">http://localhost:8080/myProject</a>.
If tomcat is unable to load the files, it might be an issue with permissions. Making <code>/home/archie/code/jsp/myProject</code> <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a> should fix the issue.
</p>
<h2><span class="mw-headline" id="Logging">Logging</span></h2>
<p>Tomcat when used with official Arch Linux packages uses systemd's <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journalctl">journalctl</a> <b>for startup log</b>. This means that files <code>/var/log/tomcat<i>n</i>/catalina.err</code> and <code>/var/log/tomcat<i>n</i>/catalina.out</code> are <b>not</b> used. Other logs such as access logs and business logs defined in <code>/etc/tomcat<i>n</i>/server.xml</code> as <code>Valve</code> will still by default end up in <code>/var/log/tomcat<i>n</i>/</code>.
</p>
<p>To restore upstream style logging, use a <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a> to change both <code>SYSLOG</code> for the absolute paths of log files.
</p>
<h2><span class="mw-headline" id="Further_setup">Further setup</span></h2>
<p>Basic configuration can be made through the virtual host manager web application: <a rel="nofollow" class="external free" href="http://localhost:8080/host-manager/html">http://localhost:8080/host-manager/html</a>. Provide the username/password you set in <code>tomcat-users.xml</code>. Other options are tweaked in configuration files in <code>/etc/tomcat<i>n</i></code>, the most important being <code>server.xml</code>. Using these files is out of the scope of this 101 wiki page. Please have a look at the <a rel="nofollow" class="external text" href="https://tomcat.apache.org/tomcat-10.0-doc/index.html">latest official Tomcat documentation</a> for more details.
</p>
<h3><span class="mw-headline" id="Migrating_from_previous_versions_of_Tomcat">Migrating from previous versions of Tomcat</span></h3>
<p>As said in the introduction, <b>Tomcat 10 does not deprecate Tomcat 9, Tomcat 9 does not deprecate Tomcat 8 and so on</b>. They all are implementations of Servlet/JSP standards. Hence you must first determine <a rel="nofollow" class="external text" href="https://tomcat.apache.org/whichversion.html#Apache_Tomcat_Versions">which version</a> of Tomcat you need depending on the versions of Servlet/JSP your application uses. If you need to migrate, the official website gives <a rel="nofollow" class="external text" href="https://tomcat.apache.org/migration.html">instructions on how to handle such a process</a>.
</p>
<h3>
<span id="Using_Tomcat_with_a_different_JRE.2FJDK"></span><span class="mw-headline" id="Using_Tomcat_with_a_different_JRE/JDK">Using Tomcat with a different JRE/JDK</span>
</h3>
<p>Apart from installing the desired JRE/JDK, the only requirement is to set the <code>TOMCAT_JAVA_HOME</code> variable with a <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/tomcat<i>n</i>.service.d/start.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Environment=TOMCAT_JAVA_HOME=/usr/lib/jvm/java-8-openjdk</pre>
<h3><span class="mw-headline" id="Security_configuration">Security configuration</span></h3>
<p>This page gives the bare minimum to get your first web application to run on Tomcat. It is not intended to be the definitive guide to administering Tomcat (it is a job of its own). The official Tomcat website will provide all necessary official matter. One could also refer to this <a rel="nofollow" class="external text" href="https://web.archive.org/web/20140926063309/http://oreilly.com/java/archive/tomcat-tips.html">O'Reilly page</a> and this <a rel="nofollow" class="external text" href="https://www.unidata.ucar.edu/software/thredds/current/tds/reference/TomcatSecurity.html">unidata one</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-05-06 ⓘ]</sup>. 
Still, here are some security tips to get you started:
</p>
<ul>
<li>Keep your Tomcat installation up to date to get the latest fixes to security issues</li>
<li>Remove unwanted default applications such as <code>examples</code>, <code>docs</code>, default home page <code>ROOT</code> ("_" in the <code>manager</code> webapp). This prevents potential security holes to be exploited. Use the <code>manager</code> for that.</li>
</ul>
<p>For more security, you could even remove the host-manager and manager web applications. Keep in mind that the later is useful to deploy web applications.
</p>
<ul><li>Disable the WAR auto-deploy option. This would prevent someone who gained restricted access to the server to copy a WAR into the <code>/usr/share/java/webapps</code> directory to get it running. Edit <code>server.xml</code> and set the <code>autoDeploy</code> to <code>false</code>:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tomcat<i>n</i>/server.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
&lt;Host name="localhost"  appBase="webapps"
      unpackWARs="true" <b>autoDeploy="false"</b>&gt;
...</pre>
<ul><li>Anonymize Tomcat's default error page to prevent potential attackers to retrieve Tomcat's version. To see what Tomcat says by default, just visit an nonexistent page such as <a rel="nofollow" class="external text" href="http://localhost:8080/I_dont_exist">http://localhost:8080/I_dont_exist</a>. You get a 404 error page with Tomcat's version at the bottom.</li></ul>
<p>To anonymize this, edit/open the following JAR (Editors like <code>vim</code> can edit zips directly)
</p>
<pre>/usr/share/tomcat<i>n</i>/lib/catalina.jar
</pre>
<p>And edit the following file: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">org/apache/catalina/util/ServerInfo.properties</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
server.info=
server.number=
server.built=
...</pre>
<ul>
<li>Disable unused <code>connectors</code> in <code>server.xml</code>
</li>
<li>Keep restricted access to <code>/etc/tomcat<i>n</i>/server.xml</code>. Only <code>tomcat</code> user and/or <code>root</code> should be able to read and write this.</li>
<li>Keep <code>jsvc</code> usage. Do not use upstream startup scripts unless particular reason as explained in the security note above.</li>
<li>Use strong different passwords for each user in <code>tomcat-users.xml</code>, give roles to users who really need them and even disable usernames/roles you do not use/need.</li>
</ul>
<p>One can even crypt <code>tomcat-users.xml</code> passwords using the following upstream script:
</p>
<pre>/usr/share/tomcat<i>n</i>/bin/digest.sh -a sha-512 -h org.apache.catalina.realm.MessageDigestCredentialHandler NEW_PASSWORD
</pre>
<p>This will output something like:
</p>
<pre>NEW_PASSWORD:58adca01951a24aebce28f4d7a759aa30ef2f38bc54e41e51071c257ed4a1a9b$1$b4ccaafa86c26dea13825d35da73f9d11ce63f5deae15a13aafb835bdaf710d38922843c8065f35f245a20b1d2df9b20ddf2c005990512c598a62514f78cf3d2
</pre>
<p>Paste the hashed part in place of the clear password in <code>tomcat-users.xml</code> and add the following to <code>server.xml</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tomcat<i>n</i>/server.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;Realm className="org.apache.catalina.realm.LockOutRealm"&gt;
        &lt;Realm className="org.apache.catalina.realm.UserDatabaseRealm"
               resourceName="UserDatabase"&gt;
               &lt;CredentialHandler className="org.apache.catalina.realm.MessageDigestCredentialHandler"
                                  algorithm="sha-512"/&gt;
        &lt;/Realm&gt;
      &lt;/Realm&gt;
  ...
/&gt;</pre>
<p>Note that this may not be relevant because only root and/or tomcat is supposed to have read/write access to that file. If an intruder manages to gain root access, they would not need such passwords to mess with your applications/data anyway. Be sure to keep restricted read and write access to that file, and always know what you are deploying!
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id="Tomcat_service_is_started.2C_but_page_is_not_loaded"></span><span class="mw-headline" id="Tomcat_service_is_started,_but_page_is_not_loaded">Tomcat service is started, but page is not loaded</span>
</h3>
<p>First, check <code>/etc/tomcat<i>n</i>/tomcat-users.xml</code> for any syntax error. If everything is fine and <code>tomcat<i>n</i></code> is correctly running, run <code>journalctl -r</code> as root to check the logs for any exception thrown (see <a href="#Logging">#Logging</a>). If you read anything like <code>java.lang.Exception: Socket bind failed: [98] Address already in use</code>, this is due to some other service listening on the same port. For instance, it is possible that <a href="../en/Apache_HTTP_Server.html" title="Apache HTTP Server">Apache HTTP Server</a> and Tomcat are listening on the same port (if for example you have Apache running on port 8080 with <a href="../en/Nginx.html" title="Nginx">Nginx</a> serving it as a proxy on port 80). If this is the case, edit the <code>/etc/tomcat<i>n</i>/server.xml</code> file and change the Connector port to something else under <code>&lt;Service name="Catalina"&gt;</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tomcat<i>n</i>/server.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;?xml version='1.0' encoding='utf-8'?&gt;
...
...
&lt;!-- Change port from 8080 to something else, like 8090 --&gt;
&lt;Service name="Catalina"&gt;
    &lt;Connector executor="tomcatThreadPool"
                 port="8090" protocol="HTTP/1.1"
                 connectionTimeout="20000"
                 redirectPort="8443" /&gt;
...
...
&lt;/Service&gt;
</pre>
<p>Finally, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>tomcat<i>n</i></code> and <code>httpd</code> services.
</p>
<p>If you have no solution and you are in a VM, it can help to delete <code>/dev/random</code> and create it again (cf. <a rel="nofollow" class="external text" href="https://www.nofluffjuststuff.com/blog/pratik_patel/2010/01/solution_futex_wait_hangs_java_on_linux__ubuntu_in_vmware_or_virtual_box">Solution: FUTEX_WAIT hangs Java on Linux / Ubuntu in vmware or virtual box</a>):
</p>
<pre># rm /dev/random 
# mknod -m 644 /dev/random c 1 9
</pre>
<p>Or another solution to keep it even after a reboot is to modify <code>/usr/lib/jvm/java-8-openjdk/jre/lib/security/java.security</code> (for example) to point to <code>/dev/urandom</code>/
</p>
</div>
</div>
					<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Tomcat&amp;oldid=784516">https://wiki.archlinux.org/index.php?title=Tomcat&amp;oldid=784516</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 5 August 2023, at 06:55.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
