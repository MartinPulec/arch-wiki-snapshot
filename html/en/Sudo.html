<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Sudo - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Sudo rootpage-Sudo skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Usage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Usage</div>
		</a>
		
			<button aria-controls="toc-Usage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage-sublist" class="vector-toc-list">
			<li id="toc-Login_shell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Login_shell">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Login shell</div>
			</a>
			
			<ul id="toc-Login_shell-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Defaults_skeleton" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Defaults_skeleton">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Defaults skeleton</div>
			</a>
			
			<ul id="toc-Defaults_skeleton-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-View_current_settings" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#View_current_settings">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>View current settings</div>
			</a>
			
			<ul id="toc-View_current_settings-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_visudo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_visudo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Using visudo</div>
			</a>
			
			<ul id="toc-Using_visudo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Example_entries" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Example_entries">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Example entries</div>
			</a>
			
			<ul id="toc-Example_entries-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sudoers_default_file_permissions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sudoers_default_file_permissions">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Sudoers default file permissions</div>
			</a>
			
			<ul id="toc-Sudoers_default_file_permissions-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Disable_password_prompt_timeout" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_password_prompt_timeout">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Disable password prompt timeout</div>
			</a>
			
			<ul id="toc-Disable_password_prompt_timeout-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Add_terminal_bell_to_the_password_prompt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Add_terminal_bell_to_the_password_prompt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Add terminal bell to the password prompt</div>
			</a>
			
			<ul id="toc-Add_terminal_bell_to_the_password_prompt-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Passing_aliases" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Passing_aliases">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Passing aliases</div>
			</a>
			
			<ul id="toc-Passing_aliases-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_per-terminal_sudo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_per-terminal_sudo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Disable per-terminal sudo</div>
			</a>
			
			<ul id="toc-Disable_per-terminal_sudo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reduce_the_number_of_times_you_have_to_type_a_password" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reduce_the_number_of_times_you_have_to_type_a_password">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Reduce the number of times you have to type a password</div>
			</a>
			
			<ul id="toc-Reduce_the_number_of_times_you_have_to_type_a_password-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Environment_variables" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Environment_variables">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>Environment variables</div>
			</a>
			
			<ul id="toc-Environment_variables-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Root_password" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Root_password">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7</span>Root password</div>
			</a>
			
			<ul id="toc-Root_password-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_root_login" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disable_root_login">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8</span>Disable root login</div>
			</a>
			
			<ul id="toc-Disable_root_login-sublist" class="vector-toc-list">
				<li id="toc-kdesu" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#kdesu">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8.1</span>kdesu</div>
			</a>
			
			<ul id="toc-kdesu-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Harden_with_sudo_example" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Harden_with_sudo_example">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9</span>Harden with sudo example</div>
			</a>
			
			<ul id="toc-Harden_with_sudo_example-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configure_sudo_using_drop-in_files_in_/etc/sudoers.d" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configure_sudo_using_drop-in_files_in_/etc/sudoers.d">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10</span>Configure sudo using drop-in files in /etc/sudoers.d</div>
			</a>
			
			<ul id="toc-Configure_sudo_using_drop-in_files_in_/etc/sudoers.d-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Editing_files" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Editing_files">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11</span>Editing files</div>
			</a>
			
			<ul id="toc-Editing_files-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_insults" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_insults">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.12</span>Enable insults</div>
			</a>
			
			<ul id="toc-Enable_insults-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_password_input_feedback" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enable_password_input_feedback">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.13</span>Enable password input feedback</div>
			</a>
			
			<ul id="toc-Enable_password_input_feedback-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Colored_password_prompt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Colored_password_prompt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.14</span>Colored password prompt</div>
			</a>
			
			<ul id="toc-Colored_password_prompt-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_U2F" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_U2F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.15</span>Using U2F</div>
			</a>
			
			<ul id="toc-Using_U2F-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-SSH_problem_without_TTY" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SSH_problem_without_TTY">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>SSH problem without TTY</div>
			</a>
			
			<ul id="toc-SSH_problem_without_TTY-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Permissive_umask" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Permissive_umask">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Permissive umask</div>
			</a>
			
			<ul id="toc-Permissive_umask-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Sudo</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 8 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-8" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">8 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/sudo" title="sudo – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Sudo.html" title="Sudo – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Sudo.html" title="Sudo – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Sudo" title="Sudo – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Sudo.html" title="Sudo – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Sudo.html" title="Sudo – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-uk mw-list-item"><a href="../uk/Sudo.html" title="Sudo – українська" lang="uk" hreflang="uk" class="interlanguage-link-target"><span>Українська</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Sudo" title="Sudo – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Users_and_groups.html" title="Users and groups">Users and groups</a></li>
<li><a href="../en/Su.html" title="Su">su</a></li>
<li><a href="../en/Doas.html" title="Doas">doas</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.sudo.ws/sudo/">Sudo</a> allows a system administrator to delegate authority to give certain users—or groups of users—the ability to run commands as root or another user while providing an audit trail of the commands and their arguments.
</p>
<p>Sudo is an alternative to <a href="../en/Su.html" title="Su">su</a> for running commands as root. Unlike <a href="../en/Su.html" title="Su">su</a>, which launches a root shell that allows all further commands root access, sudo instead grants temporary privilege elevation to a single command. By enabling root privileges only when needed, sudo usage reduces the likelihood that a typo or a bug in an invoked command will ruin the system.
</p>
<p>Sudo can also be used to run commands as other users; additionally, sudo logs all commands and failed access attempts for security auditing.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span> package.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>To begin using <code>sudo</code> as a non-privileged user, it must be properly configured. See <a href="#Configuration">#Configuration</a>.
</p>
<p>To use <i>sudo</i>, simply prefix a command and its arguments with <code>sudo</code> and a space:
</p>
<pre>$ sudo <i>cmd</i>
</pre>
<p>For example, to use pacman:
</p>
<pre>$ sudo pacman -Syu
</pre>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8">sudo(8)</a></span> for more information.
</p>
<h3><span class="mw-headline" id="Login_shell">Login shell</span></h3>
<p>You cannot run every command as an other user simply by prepending <i>sudo</i>. In particular when using a <a href="https://en.wikipedia.org/wiki/Redirection_(computing)" class="extiw" title="wikipedia:Redirection (computing)">redirection</a> and <a href="https://en.wikipedia.org/wiki/Command_substitution" class="extiw" title="wikipedia:Command substitution">command substitution</a>, you must use a login shell, which can be easily accessed with <code>sudo -iu <i>user</i></code> (one can omit <code>-u <i>user</i></code> if the desired user is root).
</p>
<p>In the following example command substitution would work in a full shell, but fails with prepending <i>sudo</i>: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ sudo wpa_supplicant -B -i <i>interface</i> -c <b>&lt;(</b>wpa_passphrase <i>MYSSID passphrase</i><b>)</b></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Successfully initialized wpa_supplicant
Failed to open config file '/dev/fd/63', error: No such file or directory
Failed to read or parse configuration '/dev/fd/63'
</pre>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Create an intro discussing <code>Defaults</code>, perhaps with a table that lists common settings (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Sudo.html">Talk:Sudo</a>)</div>
</div>
<h3><span class="mw-headline" id="Defaults_skeleton">Defaults skeleton</span></h3>
<p><span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5#SUDOERS_OPTIONS">sudoers(5) § SUDOERS OPTIONS</a></span> lists all the options that can be used with the <code>Defaults</code> command in the <code>/etc/sudoers</code> file.
</p>
<p>See <a rel="nofollow" class="external autonumber" href="https://gist.github.com/AladW/7eca9799b9ea624eca31">[1]</a> for a list of options (parsed from the version 1.8.7 source code) in a format optimized for <code>sudoers</code>.
</p>
<p>See <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> for more information, such as configuring the password timeout.
</p>
<h3><span class="mw-headline" id="View_current_settings">View current settings</span></h3>
<p>Run <code>sudo -ll</code> to print out the current sudo configuration, or <code>sudo -lU <i>user</i></code> for a specific user.
</p>
<h3><span class="mw-headline" id="Using_visudo">Using visudo</span></h3>
<p>The configuration file for sudo is <code>/etc/sudoers</code>. It should <b>always</b> be edited with the <span class="plainlinks archwiki-template-man" title="$ man 8 visudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/visudo.8">visudo(8)</a></span> command. <i>visudo</i> locks the <code>sudoers</code> file, saves edits to a temporary file, and checks it for syntax errors before copying it to <code>/etc/sudoers</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>It is imperative that <code>sudoers</code> be free of syntax errors! Any error makes sudo unusable. <b>Always</b> edit it with <i>visudo</i> to prevent errors.</li>
<li>
<span class="plainlinks archwiki-template-man" title="$ man 8 visudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/visudo.8">visudo(8)</a></span> warns that configuring <i>visudo</i> to honor the user environment variables for their editor of choice may be a security hole, since it allows the user with <i>visudo</i> privileges to run arbitrary commands as root without logging simply by setting that variable to something else.</li>
</ul>
</div>
<p>The default editor for <i>visudo</i> is <i>vi</i>. The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span> package is compiled with <code>--with-env-editor</code> and honors the use of the <code>SUDO_EDITOR</code>, <code>VISUAL</code> and <code>EDITOR</code> variables. <code>EDITOR</code> is not used when <code>VISUAL</code> is set.
</p>
<p>To establish <a href="../en/Nano.html" title="Nano">nano</a> as the <i>visudo</i> editor for the duration of the current shell session, export <code>EDITOR=nano</code>; to use a different editor just once simply set the variable before calling <i>visudo</i>:
</p>
<pre># EDITOR=nano visudo
</pre>
<p>Alternatively you may edit a copy of the <code>/etc/sudoers</code> file and check it using <code>visudo -c <i>/copy/of/sudoers</i></code>. This might come in handy in case you want to circumvent locking the file with <i>visudo</i>.
</p>
<p>To change the editor permanently, see <a href="../en/Environment_variables.html#Per_user" title="Environment variables">Environment variables#Per user</a>. To change the editor of choice permanently system-wide only for <i>visudo</i>, add the following to <code>/etc/sudoers</code> (assuming <a href="../en/Nano.html" title="Nano">nano</a> is your preferred editor):
</p>
<pre># Set default EDITOR to restricted version of nano, and do not allow visudo to use EDITOR/VISUAL.
Defaults      editor=/usr/bin/rnano, !env_editor
</pre>
<h3><span class="mw-headline" id="Example_entries">Example entries</span></h3>
<p>To allow a user to gain full root privileges when they precede a command with <code>sudo</code>, add the following line:
</p>
<pre>USER_NAME   ALL=(ALL:ALL) ALL
</pre>
<p>To allow a user to run all commands as any user but only on the machine with hostname <code>HOST_NAME</code>:
</p>
<pre>USER_NAME   HOST_NAME=(ALL:ALL) ALL
</pre>
<p>To allow members of group <a href="../en/Users_and_groups.html#Group_list" class="mw-redirect" title="Wheel">wheel</a> sudo access:
</p>
<pre>%wheel      ALL=(ALL:ALL) ALL
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> When creating new administrators, it is often desirable to enable sudo access for the <code>wheel</code> group and <a href="../en/Users_and_groups.html#Group_management" title="Users and groups">add the user to it</a>, since by default <a href="../en/Polkit.html#Administrator_identities" title="Polkit">Polkit</a> treats the members of the <code>wheel</code> group as administrators. If the user is not a member of <code>wheel</code>, software using Polkit may ask to authenticate using the root password instead of the user password.</div>
<p>To disable asking for a password for user <code>USER_NAME</code>:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This will allow any process running with your user name to use sudo without asking for permission.</div>
<pre>Defaults:USER_NAME      !authenticate
</pre>
<p>Enable explicitly defined commands only for user <code>USER_NAME</code> on host <code>HOST_NAME</code>:
</p>
<pre>USER_NAME HOST_NAME=/usr/bin/halt,/usr/bin/poweroff,/usr/bin/reboot,/usr/bin/pacman -Syu
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The most customized option should go at the end of the file, as the later lines overrides the previous ones. In particular such a line should be after the <code>%wheel</code> line if your user is in this group.</div>
<p>Enable explicitly defined commands only for user <code>USER_NAME</code> on host <code>HOST_NAME</code> without password:
</p>
<pre>USER_NAME HOST_NAME= NOPASSWD: /usr/bin/halt,/usr/bin/poweroff,/usr/bin/reboot,/usr/bin/pacman -Syu
</pre>
<p>A detailed <code>sudoers</code> example is available at <code>/usr/share/doc/sudo/examples/sudoers</code>. Otherwise, see the <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> for detailed information.
</p>
<h3><span class="mw-headline" id="Sudoers_default_file_permissions">Sudoers default file permissions</span></h3>
<p>The owner and group for the <code>sudoers</code> file must both be 0. The file permissions must be set to 0440. These permissions are set by default, but if you accidentally change them, they should be changed back immediately or sudo will fail.
</p>
<pre># chown -c root:root /etc/sudoers
# chmod -c 0440 /etc/sudoers
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Disable_password_prompt_timeout">Disable password prompt timeout</span></h3>
<p>A common annoyance is a long-running process that runs on a background terminal somewhere that runs with normal permissions and elevates only when needed. This leads to a sudo password prompt which goes unnoticed and times out, at which point the process dies and the work done is lost or, at best, cached. Common advice is to enable passwordless sudo, or extend the timeout of sudo remembering a password. Both of these have negative security implications. The <b>prompt</b> timeout can also be disabled and since that does not serve any reasonable security purpose it should be the solution here:
</p>
<pre>Defaults passwd_timeout=0
</pre>
<h3><span class="mw-headline" id="Add_terminal_bell_to_the_password_prompt">Add terminal bell to the password prompt</span></h3>
<p>To draw attention to a sudo prompt in a background terminal, users can simply make it echo a <a href="https://en.wikipedia.org/wiki/Bell_character" class="extiw" title="wikipedia:Bell character">bell character</a>:
</p>
<pre>Defaults passprompt="<span style="color:#ebf1f5; background-color:#222222;">^G</span>[sudo] password for %p: "
</pre>
<p>Note the <code><span style="color:#ebf1f5; background-color:#222222;">^G</span></code> is a literal bell character. E.g. in <a href="../en/Vim.html" title="Vim">vim</a>, insert using the sequence <code>Ctrl+v</code> <code>Ctrl+g</code>. If <code>Ctrl+v</code> is mapped, e.g. for pasting, one can <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/a/366875">usually</a> use <code>Ctrl+q</code> instead. In <a href="../en/Nano.html" title="Nano">nano</a>, <code>Alt+v</code> <code>Ctrl+g</code>.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Is it possible to preserve the localized prompt while using bell? The same question for the case when SUDO_PROMPT is used. Is there an alternative, for example by using "-B" option as default?  (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Sudo.html">Talk:Sudo</a>)</div>
</div>
<p>Another option is to set the <code>SUDO_PROMPT</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a>. For example, add the following to your shell configuration file:
</p>
<pre>export SUDO_PROMPT=$'\a[sudo] please enter a password: '
</pre>
<h3><span class="mw-headline" id="Passing_aliases">Passing aliases</span></h3>
<p>Aliases in <a href="../en/Zsh.html" title="Zsh">Zsh</a> and <a href="../en/Bash.html" title="Bash">Bash</a> are normally only expanded for the first word in a command. This means that your aliases will not normally get expanded when running the <code>sudo</code> command. One way to make the next word expand is to make an alias for sudo ending with a space. Add the following to your <a href="../en/Command-line_shell.html#Configuration_files" title="Command-line shell">shell's configuration file</a>:
</p>
<pre>alias sudo='sudo '
</pre>
<p><span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#ALIASING">zshmisc(1) § ALIASING</a></span> describes how this works:
</p>
<dl><dd>If the replacement text ends with a space, the next word in the shell input is always eligible for purposes of alias expansions.</dd></dl>
<p>As well as <span class="plainlinks archwiki-template-man" title="$ man 1 bash"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bash.1#ALIASES">bash(1) § ALIASES</a></span>:
</p>
<dl><dd>If the last character of the alias value is a blank, then the next command word following the alias is also checked for alias expansion.</dd></dl>
<h3><span class="mw-headline" id="Disable_per-terminal_sudo">Disable per-terminal sudo</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> This will let any process use your sudo session.</div>
<p>If you are annoyed by sudo's defaults that require you to enter your password every time you open a new terminal, set <code>timestamp_type</code> to <code>global</code>:
</p>
<pre>Defaults timestamp_type=global
</pre>
<h3><span class="mw-headline" id="Reduce_the_number_of_times_you_have_to_type_a_password">Reduce the number of times you have to type a password</span></h3>
<p>If you are annoyed that you have to re-enter your password every 5 minutes (default), you can change this by setting a longer value for <code>timestamp_timeout</code> (in minutes):
</p>
<pre>Defaults timestamp_timeout=10
</pre>
<p>If you are using a lot of sudo commands on a row, it is more logical to refresh the timeout every time you use sudo than
to increase <code>timestamp_timeout</code>. Refreshing the timeout can be done with <code>sudo -v</code> (whereas <code>sudo -K</code> revokes immediately).
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Default <code>sudo</code> usage already refreshes timeout. (Discuss in <a href='../en/Talk:Sudo.html#Remove_alias_recommendation_in_"Reduce_the_number_of_times_you_have_to_type_a_password"?' title="Talk:Sudo">Talk:Sudo#Remove alias recommendation in "Reduce the number of times you have to type a password"?</a>)</div>
</div>
<p>You might want to automate this by adding the following to your <a href="../en/Environment_variables.html#Using_shell_initialization_files" title="Environment variables">shell initialization files</a>:
</p>
<pre>alias sudo='sudo -v; sudo '
</pre>
<p>It is also possible to use a bash function; for more details see <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/584725/expand-certain-aliases-from-within-sudo-bash-function">stackexchange</a>.
</p>
<h3><span class="mw-headline" id="Environment_variables">Environment variables</span></h3>
<p>If you have a lot of environment variables, or you export your proxy settings via <code>export http_proxy="..."</code>, when using sudo these variables do not get passed to the root account unless you run sudo with the <code>-E</code>/<code>--preserve-env</code> option.
</p>
<pre>$ sudo -E pacman -Syu
</pre>
<p>The recommended way of preserving environment variables is to append them to <code>env_keep</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults env_keep += "ftp_proxy http_proxy https_proxy no_proxy"</pre>
<h3><span class="mw-headline" id="Root_password">Root password</span></h3>
<p>Users can configure sudo to ask for the root password instead of the user password by adding <code>targetpw</code> (target user, defaults to root) or <code>rootpw</code> to the Defaults line in <code>/etc/sudoers</code>:
</p>
<pre>Defaults targetpw
</pre>
<p>To prevent exposing your root password to users, you can restrict this to a specific group:
</p>
<pre>Defaults:%wheel targetpw
%wheel ALL=(ALL) ALL
</pre>
<h3><span class="mw-headline" id="Disable_root_login">Disable root login</span></h3>
<p>Users may wish to disable the root login. Without root, attackers must first guess a user name configured as a sudoer as well as the user password. See for example <a href="../en/OpenSSH.html#Deny" title="OpenSSH">OpenSSH#Deny</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> 
<ul>
<li>Be careful, you may lock yourself out by disabling root login. Sudo is not automatically installed and its default configuration allows neither passwordless root access nor root access with your own password. Ensure a user is properly configured as a sudoer <i>before</i> disabling the root account!</li>
<li>If you have changed your sudoers file to use rootpw as default, then do not disable root login with any of the following commands!</li>
<li>If you are already locked out, see <a href="../en/Reset_lost_root_password.html" class="mw-redirect" title="Password recovery">Password recovery</a> for help.</li>
</ul>
</div>
<p>The account can be locked via <code>passwd</code>:
</p>
<pre># passwd -l root
</pre>
<p>A similar command unlocks root.
</p>
<pre>$ sudo passwd -u root
</pre>
<p>Alternatively, edit <code>/etc/shadow</code> and replace the root's encrypted password with <code>!*</code>:
</p>
<pre>root:!*:12345::::::
</pre>
<p>To enable root login again:
</p>
<pre>$ sudo passwd root
</pre>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> In most cases when a user ends up in an emergency shell they are using the initramfs, will not use the following configuration, unless added to the <code>FILES</code> in <a href="../en/Mkinitcpio.html#Configuration" title="Mkinitcpio">mkinitcpio's configuration</a>. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Sudo.html">Talk:Sudo</a>)</div>
</div>
<p>In case of system emergency, the recovery prompt is going to ask your for a root password, making it impossible to log into recovery shell. To automatically unlock the root account in case of emergency add <code>SYSTEMD_SULOGIN_FORCE=1</code> environment variable to <code>rescue.service</code> using a <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/rescue.service.d/SYSTEMD_SULOGIN_FORCE.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Environment=SYSTEMD_SULOGIN_FORCE=1</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To get to an interactive root prompt, even after disabling the <i>root</i> account, use <code>sudo -i</code>.</div>
<h4><span class="mw-headline" id="kdesu">kdesu</span></h4>
<p>kdesu may be used under <a href="../en/KDE.html" title="KDE">KDE</a> to launch GUI applications with root privileges. It is possible that by default kdesu will try to use su even if the root account is disabled. Fortunately one can tell kdesu to use sudo instead of su. Create/edit the file <code>~/.config/kdesurc</code>:
</p>
<pre>[super-user-command]
super-user-command=sudo
</pre>
<p>or use the following command:
</p>
<pre>$ kwriteconfig6 --file kdesurc --group super-user-command --key super-user-command sudo
</pre>
<h3><span class="mw-headline" id="Harden_with_sudo_example">Harden with sudo example</span></h3>
<p>Let us say you create 3 users: admin, devel, and archie. The user "admin" is used for journalctl, systemctl, mount, kill, and iptables; "devel" is used for installing packages, and editing configuration files; and "archie" is the user you log in with. To let "archie" reboot, shutdown, and use netctl we would do the following:
</p>
<p>Edit <code>/etc/pam.d/su</code> and <code>/etc/pam.d/su-l</code>. Require user be in the wheel group, but do not put anyone in it.
</p>
<pre>#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
#auth           sufficient      pam_wheel.so trust use_uid
# Uncomment the following line to require a user to be in the "wheel" group.
auth            required        pam_wheel.so use_uid
auth            required        pam_unix.so
account         required        pam_unix.so
session         required        pam_unix.so
</pre>
<p>Limit SSH login to the 'ssh' group. Only "archie" will be part of this group.
</p>
<pre># groupadd -r ssh
# gpasswd -a archie ssh
# echo 'AllowGroups ssh' &gt;&gt; /etc/ssh/sshd_config
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">Restart</a> <code>sshd.service</code>.
</p>
<p>Add users to other groups.
</p>
<pre># for g in power network ;do ;gpasswd -a archie $g ;done
# for g in network power storage ;do ;gpasswd -a admin $g ;done
</pre>
<p>Set permissions on configs so devel can edit them.
</p>
<pre># chown -R devel:root /etc/{http,openvpn,cups,zsh,vim,screenrc}
</pre>
<pre>Cmnd_Alias  POWER       =   /usr/bin/shutdown -h now, /usr/bin/halt, /usr/bin/poweroff, /usr/bin/reboot
Cmnd_Alias  STORAGE     =   /usr/bin/mount -o nosuid\,nodev\,noexec, /usr/bin/umount
Cmnd_Alias  SYSTEMD     =   /usr/bin/journalctl, /usr/bin/systemctl
Cmnd_Alias  KILL        =   /usr/bin/kill, /usr/bin/killall
Cmnd_Alias  PKGMAN      =   /usr/bin/pacman
Cmnd_Alias  NETWORK     =   /usr/bin/netctl
Cmnd_Alias  FIREWALL    =   /usr/bin/iptables, /usr/bin/ip6tables
Cmnd_Alias  SHELL       =   /usr/bin/zsh, /usr/bin/bash
%power      ALL         =   (root)  NOPASSWD: POWER
%network    ALL         =   (root)  NETWORK
%storage    ALL         =   (root)  STORAGE
root        ALL         =   (ALL)   ALL
admin       ALL         =   (root)  SYSTEMD, KILL, FIREWALL
devel	    ALL         =   (root)  PKGMAN
archie	    ALL         =   (devel) SHELL, (admin) SHELL 
</pre>
<p>With this setup, you will almost never need to login as the root user.
</p>
<p>"archie" can connect to their home WiFi.
</p>
<pre>$ sudo netctl start home
$ sudo poweroff
</pre>
<p>"archie" can not use netctl as any other user.
</p>
<pre>$ sudo -u admin -- netctl start home
</pre>
<p>When "archie" needs to use journalctl or kill run away process they can switch to that user.
</p>
<pre>$ sudo -i -u devel
$ sudo -i -u admin
</pre>
<p>But "archie" cannot switch to the root user.
</p>
<pre>$ sudo -i -u root
</pre>
<p>If "archie" want to start a gnu-screen session as admin they can do it like this:
</p>
<pre>$ sudo -i -u admin
[admin]$ chown admin:tty `echo $TTY`
[admin]$ screen
</pre>
<h3>
<span id="Configure_sudo_using_drop-in_files_in_.2Fetc.2Fsudoers.d"></span><span class="mw-headline" id="Configure_sudo_using_drop-in_files_in_/etc/sudoers.d">Configure sudo using drop-in files in /etc/sudoers.d</span>
</h3>
<p><i>sudo</i> parses files contained in the directory <code>/etc/sudoers.d/</code>. This means that instead of editing <code>/etc/sudoers</code>, you can change settings in standalone files and drop them in that directory. This has two advantages:
</p>
<ul>
<li>There is no need to edit a <code>sudoers.pacnew</code> file;</li>
<li>If there is a problem with a new entry, you can remove the offending file instead of editing <code>/etc/sudoers</code> (but see the warning below).</li>
</ul>
<p>The format for entries in these drop-in files is the same as for <code>/etc/sudoers</code> itself. To edit them directly, use <code>visudo -f /etc/sudoers.d/<i>somefile</i></code>. See <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5#Including_other_files_from_within_sudoers">sudoers(5) § Including other files from within sudoers</a></span> for details.
</p>
<p>The files in <code>/etc/sudoers.d/</code> directory are parsed in lexicographical order, file names containing <code>.</code> or <code>~</code> are skipped. To avoid sorting problems, the file names should begin with two digits, e.g. <code>01_foo</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The order of entries in the drop-in files is important: make sure that the statements do not override themselves.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The files in <code>/etc/sudoers.d/</code> are just as fragile as <code>/etc/sudoers</code> itself: any improperly formatted file will prevent <code>sudo</code> from working.  Hence, for the same reason it is strongly advised to use <code>visudo</code>
</div>
<h3><span class="mw-headline" id="Editing_files">Editing files</span></h3>
<p><code>sudo</code> provides the <code>sudoedit</code> command (equivalent to <code>sudo -e</code>). This is useful for editing files which can be edited by root only while still running the editor as a normal user, and using that user’s configuration.
</p>
<p>To edit a file, set <code>SUDO_EDITOR</code> to the name of the editor and pass the file name to <code>sudoedit</code>. For example:
</p>
<pre>$ SUDO_EDITOR=vim sudoedit /etc/file
</pre>
<p>See <a href="#Using_visudo">#Using visudo</a> and <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8#e">sudo(8) § e</a></span> for ways to set the editor, but beware of <a href="../en/Security.html#Use_sudo_instead_of_su" title="Security">possible security issues</a>.
</p>
<p>If multiple names are passed to <code>sudo</code>, all files are opened in the editor in a single invocation. A feature useful for merging files:
</p>
<pre>$ SUDO_EDITOR=vimdiff sudoedit /etc/file /etc/file.pacnew
</pre>
<h3><span class="mw-headline" id="Enable_insults">Enable insults</span></h3>
<p>Users can enable the insults easter egg in sudo by adding the following line in the <code>sudoers</code> file with <code>visudo</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults insults</pre>
<p>Upon entering an incorrect password, this will replace <code>Sorry, try again.</code> message with humorous insults.
</p>
<h3><span class="mw-headline" id="Enable_password_input_feedback">Enable password input feedback</span></h3>
<p>By default, there is no visual feedback when you input a password. That is done on purpose for extra security. However, if you wish to have visual input, you can enable it by adding this line: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults pwfeedback</pre>
<h3><span class="mw-headline" id="Colored_password_prompt">Colored password prompt</span></h3>
<p>To customize the password prompt with colors and/or bold fonts, set the <code>SUDO_PROMPT</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> in your shell initialization file and use <span class="plainlinks archwiki-template-man" title="$ man 1 tput"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/tput.1">tput(1)</a></span>.
</p>
<p>For example, to set the password prompt to display <code>Password: </code> in bold red, use this:
</p>
<pre>export SUDO_PROMPT="$(tput setaf 1 bold)Password:$(tput sgr0) "
</pre>
<p>Or use different colors with the default message like so:
</p>
<pre>export SUDO_PROMPT="$(tput setab 1 setaf 7 bold)[sudo]$(tput sgr0) $(tput setaf 6)password for$(tput sgr0) $(tput setaf 5)%p$(tput sgr0): "
</pre>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Color_output_in_console.html" title="Color output in console">Color output in console</a>.</b></p>
<div>
<b>Notes:</b> Not sudo-specific. (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Sudo.html">Talk:Sudo</a>)</div>
</div>
<table>

<tbody><tr>
<td>
<table class="wikitable">
<caption>tput command line option cheatsheet
</caption>
<tbody>
<tr>
<th>tput command</th>
<th>Description
</th>
</tr>
<tr>
<td><code>tput bold</code></td>
<td>Bold text
</td>
</tr>
<tr>
<td><code>tput setaf [CODE]</code></td>
<td>Set foreground color
</td>
</tr>
<tr>
<td><code>tput setab [CODE]</code></td>
<td>Set background color
</td>
</tr>
<tr>
<td><code>tput rev</code></td>
<td>Inverse colors
</td>
</tr>
<tr>
<td><code>tput sgr0</code></td>
<td>Reset everything
</td>
</tr>
</tbody>
</table>
<p><br>
<br>
<br>
</p>
</td>
<td>  </td>
<td>
<table class="wikitable sortable">
<caption>tput color codes
</caption>
<tbody>
<tr>
<th>tput color [CODE]</th>
<th>Color
</th>
</tr>
<tr>
<td>0</td>
<td>Black
</td>
</tr>
<tr>
<td>1</td>
<td>Red
</td>
</tr>
<tr>
<td>2</td>
<td>Green
</td>
</tr>
<tr>
<td>3</td>
<td>Yellow
</td>
</tr>
<tr>
<td>4</td>
<td>Blue
</td>
</tr>
<tr>
<td>5</td>
<td>Magenta
</td>
</tr>
<tr>
<td>6</td>
<td>Cyan
</td>
</tr>
<tr>
<td>7</td>
<td>White
</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody>
</table>
<h3><span class="mw-headline" id="Using_U2F">Using U2F</span></h3>
<p>U2F is great to use with sudo, as it can effectively eliminate the risk of <a href="https://en.wikipedia.org/wiki/Shoulder_surfing_(computer_security)" class="extiw" title="wikipedia:Shoulder surfing (computer security)">shoulder surfing</a> in public areas while still giving you conscious control to approve the prompt with a simple physical touch.
</p>
<p>See <a href="../en/Universal_2nd_Factor.html#Passwordless_sudo" title="Universal 2nd Factor">Universal 2nd Factor#Passwordless sudo</a>.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="SSH_problem_without_TTY">SSH problem without TTY</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="#Configuration">#Configuration</a>.</b></p>
<div>
<b>Notes:</b> <span style="color:red;">please use the second argument of the template to provide more detailed indications.</span> (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Sudo.html">Talk:Sudo</a>)</div>
</div>
<p>SSH does not allocate a tty by default when running a remote command. Without an allocated tty, sudo cannot prevent the password from being displayed. You can use ssh's <code>-t</code> option to force it to allocate a tty.
</p>
<p>The <code>Defaults</code> option <code>requiretty</code> only allows the user to run sudo if they have a tty.
</p>
<pre># Disable "ssh hostname sudo &lt;cmd&gt;", because it will show the password in clear text. You have to run "ssh -t hostname sudo &lt;cmd&gt;".
#
#Defaults    requiretty
</pre>
<h3><span class="mw-headline" id="Permissive_umask">Permissive umask</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="#Configuration">#Configuration</a>.</b></p>
<div>
<b>Notes:</b> <span style="color:red;">please use the second argument of the template to provide more detailed indications.</span> (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:Sudo.html">Talk:Sudo</a>)</div>
</div>
<p>Sudo will union the user's <a href="../en/Umask.html" title="Umask">umask</a> value with its own umask (which defaults to 0022). This prevents sudo from creating files with more open permissions than the user's umask allows. While this is a sane default if no custom umask is in use, this can lead to situations where a utility run by sudo may create files with different permissions than if run by root directly. If errors arise from this, sudo provides a means to fix the umask, even if the desired umask is more permissive than the umask that the user has specified. Adding this (using <code>visudo</code>) will override sudo's default behavior:
</p>
<pre>Defaults umask = 0022
Defaults umask_override
</pre>
<p>This sets sudo's umask to root's default umask (0022) and overrides the default behavior, always using the indicated umask regardless of what umask the user as set.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Security.html" title="Category:Security">Security</a></li>
<li><a href="../en/Category:Commands.html" title="Category:Commands">Commands</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Sudo&amp;oldid=811791">https://wiki.archlinux.org/index.php?title=Sudo&amp;oldid=811791</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 2 July 2024, at 19:34.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
