<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ReadyMedia - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ReadyMedia rootpage-ReadyMedia skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration_and_starting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration_and_starting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration and starting</div>
		</a>
		
			<button aria-controls="toc-Configuration_and_starting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration and starting subsection</span>
			</button>
		
		<ul id="toc-Configuration_and_starting-sublist" class="vector-toc-list">
			<li id="toc-Automatic_Media_DB_Update" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automatic_Media_DB_Update">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Automatic Media_DB Update</div>
			</a>
			
			<ul id="toc-Automatic_Media_DB_Update-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Troubleshooting_service_autostart" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Troubleshooting_service_autostart">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Troubleshooting service autostart</div>
			</a>
			
			<ul id="toc-Troubleshooting_service_autostart-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Running_minidlna_as_your_own_user" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Running_minidlna_as_your_own_user">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Running minidlna as your own user</div>
			</a>
			
			<ul id="toc-Running_minidlna_as_your_own_user-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Running_minidlnad_without_systemd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Running_minidlnad_without_systemd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Running minidlnad without systemd</div>
			</a>
			
			<ul id="toc-Running_minidlnad_without_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Other_aspects" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Other_aspects">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Other aspects</div>
		</a>
		
			<button aria-controls="toc-Other_aspects-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Other aspects subsection</span>
			</button>
		
		<ul id="toc-Other_aspects-sublist" class="vector-toc-list">
			<li id="toc-Firewall" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Firewall">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Firewall</div>
			</a>
			
			<ul id="toc-Firewall-sublist" class="vector-toc-list">
				<li id="toc-iptables" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#iptables">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.1</span>iptables</div>
			</a>
			
			<ul id="toc-iptables-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-File_System_and_Localization" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#File_System_and_Localization">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>File System and Localization</div>
			</a>
			
			<ul id="toc-File_System_and_Localization-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Media_Handling" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Media_Handling">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Media Handling</div>
			</a>
			
			<ul id="toc-Media_Handling-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Building_a_media_server" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Building_a_media_server">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Building a media server</div>
		</a>
		
			<button aria-controls="toc-Building_a_media_server-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Building a media server subsection</span>
			</button>
		
		<ul id="toc-Building_a_media_server-sublist" class="vector-toc-list">
			<li id="toc-Automount_external_drives" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Automount_external_drives">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Automount external drives</div>
			</a>
			
			<ul id="toc-Automount_external_drives-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Issues" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Issues">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Issues</div>
			</a>
			
			<ul id="toc-Issues-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Server_not_visible_in_wireless_network" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Server_not_visible_in_wireless_network">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Server not visible in wireless network</div>
			</a>
			
			<ul id="toc-Server_not_visible_in_wireless_network-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Media_directory_not_accessible" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Media_directory_not_accessible">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Media directory not accessible</div>
			</a>
			
			<ul id="toc-Media_directory_not_accessible-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DLNA_server_stops_being_visible_after_some_time_when_being_shared_on_a_bridge_device" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#DLNA_server_stops_being_visible_after_some_time_when_being_shared_on_a_bridge_device">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>DLNA server stops being visible after some time when being shared on a bridge device</div>
			</a>
			
			<ul id="toc-DLNA_server_stops_being_visible_after_some_time_when_being_shared_on_a_bridge_device-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">ReadyMedia</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/ReadyMedia" title="ReadyMedia – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><a rel="nofollow" class="external text" href="https://sourceforge.net/projects/minidlna">ReadyMedia</a> (previously <b>MiniDLNA</b>) is server software with the aim of being fully compliant with <a href="https://en.wikipedia.org/wiki/Digital_Living_Network_Alliance" class="extiw" title="wikipedia:Digital Living Network Alliance">DLNA</a>/<a href="https://en.wikipedia.org/wiki/Universal_Plug_and_Play" class="extiw" title="wikipedia:Universal Plug and Play">UPnP</a> clients.  The MiniDLNA daemon serves media files (music, pictures, and video) to clients on a network.  Example clients include applications such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=totem">totem</a></span> and <a href="../en/Kodi.html" title="Kodi">Kodi</a>, and devices such as portable media players, smartphones, televisions, and gaming consoles.
</p>
<p>ReadyMedia is a simple, lightweight alternative to <a href="../en/Gerbera.html" title="Gerbera">Gerbera</a>, but has fewer features. It does not have a web interface for administration and must be configured by editing a text file.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=minidlna">minidlna</a></span> package.
</p>
<p>If you want to use an unofficial branch which supports transcoding, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/readymedia-transcode-git/">readymedia-transcode-git</a></span><sup><small>AUR</small></sup> package.
</p>
<h2><span class="mw-headline" id="Configuration_and_starting">Configuration and starting</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The current version of ReadyMedia has a serious bug: The <code>-i</code> command-line option and <code>network_interface</code> configuration option used to bind to a specific IP address does not apply to the HTTP server. Bug reported in 2017 to <a rel="nofollow" class="external text" href="https://sourceforge.net/p/minidlna/bugs/297/">upstream</a>. The webserver remains accessible on all interfaces, potentially creating a security problem if running on a publicly accessible host.</div>
<p>By default, minidlna runs as a system service (alternatively, you can <a href="#Running_minidlnad_without_systemd">run it manually</a>). It can be configured in <code>/etc/minidlna.conf</code>. Set the following necessary settings:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/minidlna.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#network_interface=eth0                         # Self-discovers if commented (at times necessary to set)
media_dir=A,/home/user/Music                    # Mounted Media_Collection drive directories
media_dir=P,/home/user/Pictures                 # Use A, P, and V to restrict media 'type' in directory
media_dir=V,/home/user/Videos
friendly_name=Media Server                      # Optional
inotify=yes                                     # 'no' for less resources, restart required for new media
presentation_url=http://www.mylan/index.php     # or use your device static IP <a rel="nofollow" class="external free" href="http://192.168.0.14:8200/">http://192.168.0.14:8200/</a></pre>
<p>MiniDLNA runs as the <i>minidlna</i> user by default. To change the user it runs as, see <a href="#Running_minidlna_as_your_own_user">#Running minidlna as your own user</a> below.
</p>
<p>The minidlna service can be managed by <code>minidlna.service</code> <a href="../en/Systemd.html#Using_units" title="Systemd">using systemd</a>.
</p>
<h3><span class="mw-headline" id="Automatic_Media_DB_Update">Automatic Media_DB Update</span></h3>
<p>Kernel adds one <a href="https://en.wikipedia.org/wiki/Inotify" class="extiw" title="wikipedia:Inotify">inotify</a> watch per each folder/subfolder in <i>Media_Collection</i> Directories set in <code>/etc/minidlna.conf</code> to monitor changes thus allowing MiniDLNA to update <i>Media_DB</i> in real time. When MiniDLNA is run as a regular user, it does not have the ability to change the kernel's <i>inotify</i> limits. If default number of <i>inotify</i> watches is non-sufficient to have MiniDLNA monitor all your media folders, increase <i>inotify</i> watches through <code>sysctl</code> (100000 should be enough for most uses):
</p>
<pre># sysctl fs.inotify.max_user_watches=100000
</pre>
<p>To have it permanently changed, add to <code>/etc/sysctl.d/90-inotify.conf</code>
</p>
<pre># Increase inotify max watchs per user for local minidlna
fs.inotify.max_user_watches = 100000
</pre>
<p><i>inotify</i> performance may depend on device type. Some do not rescan media drives on a consistent basis or at all.  If files are added/deleted to monitored media directories, they may not be noticed until the device DLNA client is restarted.
</p>
<p>Check <i>inotify</i> updates via MiniDLNA <i>presentation_url</i> by comparing files count. If it does not change, make sure the user running MiniDLNA has <i>rw</i> access to the DB folder. If the issue persists, copy or download new files first to a non-watched by <i>inotify</i> <b>Downloads</b> folder on the same drive, and then move them to appropriate media folders, since lengthy media files copying or downloading may confuse <i>inotify</i>.
</p>
<p>You can also clean or rebuild MiniDLNA DB manually after stopping MiniDLNA daemon, or analyze its debug output (Ctrl+C to exit):
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:View-refresh-red.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section is out of date.</b></p>
<div>
<b>Reason:</b> This doesn't work since <a rel="nofollow" class="external text" href="https://github.com/archlinux/svntogit-community/commit/c80e569c9edd3d81c236da3c5e8c3feb834cc7f5">minidlna 1.3.0-2</a> dropped the transient <i>minidlna</i> user. (Results in: <code>minidlna.c:782: fatal: Bad user 'minidlna'.</code>) (Discuss in <a rel="nofollow" class="external text" href="../en/Talk:ReadyMedia.html">Talk:ReadyMedia</a>)</div>
</div>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">Stop</a> the MiniDLNA daemon.
</p>
<p>To rebuild Media_DB forcibly:
</p>
<pre># minidlnad -R
</pre>
<p>Stop the daemon after rebuilding Media_DB e.g. <code>killall minidlnad</code>.
</p>
<p>To run in debug mode:
</p>
<pre># minidlnad -d
</pre>
<p><code>Ctrl+C</code> to exit it.
</p>
<h3><span class="mw-headline" id="Troubleshooting_service_autostart">Troubleshooting service autostart</span></h3>
<p>Sometimes the minidlna daemon fails to start while booting. <a href="../en/NetworkManager.html#NetworkManager-wait-online" title="NetworkManager">NetworkManager#NetworkManager-wait-online</a> solves this issue. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/35325">FS#35325</a>.
</p>
<h3><span class="mw-headline" id="Running_minidlna_as_your_own_user">Running minidlna as your own user</span></h3>
<p>Change <code>user</code> line in <code>/etc/minidlna.conf</code>, and change the <code>db_dir</code> and <code>log_dir</code> options to directories that are writeable by that user. If you are <a href="#Running_minidlnad_without_systemd">running without systemd</a>, this is all you need.
</p>
<p>If you are using the systemd service, <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> <code>minidlna.service</code> as it will by default run as the <code>minidlna</code> user. To do so, create a <code>/etc/systemd/system/minidlna.service.d/run-as-user.conf</code> <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/minidlna.service.d/run-as-user.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
User=<i>user</i>
Group=<i>group</i></pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Add <code>ProtectHome=off</code> and <code>DynamicUser=no</code> in the <code>[Service]</code> section if you want minidlna to be able to read/write to <code>/home/<i>user</i>/</code>, including the <code>db_dir</code> or any <code>media_dir</code>.</li>
<li>The <code>log_dir</code> is not used by the systemd service. Instead, run <code>journalctl -u minidlna.service</code> as root to view the logs.</li>
</ul>
</div>
<p>Copy the <code>/usr/lib/tmpfiles.d/minidlna.conf</code> file to <code>/etc/tmpfiles.d/minidlna.conf</code> and replace root with your own user and group:
</p>
<h3><span class="mw-headline" id="Running_minidlnad_without_systemd">Running minidlnad without systemd</span></h3>
<p>Alternatively to a system service, you can run minidlna manually. This can be useful if you want to share media but do not have administrator access to the machine.
</p>
<p>Create the necessary files and directories locally and edit the configuration:
</p>
<pre>$ install -Dm644 /etc/minidlna.conf ~/.config/minidlna/minidlna.conf
$ $EDITOR minidlna.conf
</pre>
<p>Configuring should be as above, specifically:
</p>
<pre>media_dir=/home/$USER/dir
db_dir=/home/$USER/.cache/minidlna
log_dir=/home/$USER/.config/minidlna
</pre>
<p>You can now start minidlna with the following command:
</p>
<pre>$ minidlnad -f /home/$USER/.config/minidlna/minidlna.conf -P /home/$USER/.config/minidlna/minidlna.pid
</pre>
<p>To autostart it at login, add the previous line to <code>~/.bash_profile</code>.
</p>
<h2><span class="mw-headline" id="Other_aspects">Other aspects</span></h2>
<p>Other aspects and MiniDLNA limitations may need to be considered beforehand to ensure satisfaction from its performance.
</p>
<h3><span class="mw-headline" id="Firewall">Firewall</span></h3>
<p>If using a firewall the ssdp (1900/udp) and trivnet1 (8200/tcp) ports will need to be opened. For example, this can be done with arno's iptables firewall by editing <code>firewall.conf</code> and opening the ports by doing:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">firewall.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">OPEN_TCP="8200"
OPEN_UDP="1900"</pre>
<h4><span class="mw-headline" id="iptables">iptables</span></h4>
<p>In addition to 1900/udp and 8200/tcp, minidlna may also require allowing muliticasts. An overall configuration for <a href="../en/Iptables.html" title="Iptables">iptables</a> may therefore look like the following snippet, assuming there are separate chains which handle <a href="../en/Simple_stateful_firewall.html#Creating_necessary_chains" title="Simple stateful firewall">TCP, UDP</a> and IGMP.
</p>
<pre> -A TCP -m tcp --dport 8200 -m comment --comment minidlna -j ACCEPT
 -A UDP -d 239.255.255.250/32 -m udp --dport 1900 -m comment --comment "upnp dlna" -j ACCEPT
 -A IGMP -d 224.0.0.1/32 -m comment --comment "igmp membership queries, upnp/dlna" -j ACCEPT
 -A IGMP -d 239.0.0.0/8 -m comment --comment "igmp multicast, upnp/dlna" -j ACCEPT
</pre>
<h3><span class="mw-headline" id="File_System_and_Localization">File System and Localization</span></h3>
<p>When keeping MiniDLNA <i>Media_DB</i> on an external drive accessible in both Linux and Windows, choose proper <a href="../en/File_systems.html" class="mw-redirect" title="File system">file system</a> for it. <b>NTFS</b> preserves in Windows its Linux defaults: <i>rw</i> access for <i>root</i> user and <i>UTF8</i> font <i>encoding</i> for file names, so media titles in your language are readable when browsing <i>Media_DB</i> in terminal and media players, since most support <i>UTF8</i>. If you prefer <b>Vfat</b> (FAT32) for better USB drive compatibility with older players when hooked directly, or your <i>Media_Collection</i> drive is Vfat and has folder &amp; file names in your local language, MiniDLNA can transcode them to <i>UTF8</i> charset while scanning folders to <i>Media_DB</i>. Add to <i>Media_Collection</i> and <i>Media_DB</i> drives' mount options your FS language <a href="https://en.wikipedia.org/wiki/Code_page" class="extiw" title="wikipedia:Code page">codepage</a> for transcoding to short DOS file names, and <a href="https://en.wikipedia.org/wiki/Character_encoding" class="extiw" title="wikipedia:Character encoding">iocharset</a> for converting long file names to your terminal's locale, i.g. <i>codepage=cp866,iocharset=utf8 (or ISO-8859-5)</i>. Set <i>rw</i> permissions for all users, since <i>Vfat</i> does not preserve Linux access permissions:
</p>
<pre>UUID=6140-75F7 /media/MyDrive/Media_DB vfat user,rw,async,noatime,umask=111,dmask=000,codepage=cp866,iocharset=utf8 0 0</pre>
<p>While your <i>iocharset</i> would be present in the system with a matching <a href="../en/Locale.html" title="Locale">locale</a>, if your terminal or player supports only short file names, check if the set <i>codepage</i> is also present and enabled (like ru_RU.CP866), i.e. was included in system configuration when Arch Linux release was compiled, or consider recompiling the release to add it: 
</p>
<pre>ls /usr/share/fonts/encodings
</pre>
<p>MiniDLNA lists <i>Movies</i> and <i>Photos</i> by file name in its DB, and <i>Music</i> entries by <a rel="nofollow" class="external text" href="https://id3lib.sourceforge.net/id3/">ID3 tags</a> instead of file names. If Music collection was not tagged in UTF8 but in a local charset, MiniDLNA might not identify and transcode it correctly to UTF8 for display in media players, or the original tags <i>codepage(s)</i> may be absent in your system, so the tags will not be readable even when media file names are. In this case consider re-tagging your collection to <i>UTF-16BE</i> or <i>UTF-8</i> encoding with an <b>ID3 Tag Converter</b>.
</p>
<p>Picking the "right" <i>file system</i> for your <i>Media_Collection</i> is a trade-off: XFS and EXT4 show fast read/write for HDs and lower CPU load critical for slow computers with attached storage. NTFS is most compatible with Windows when plugging a drive directly for faster copy, while network file systems like Samba, NFS or iSCSI allow import to Windows any Linux FS with slower data copy. As file fragmentation affects playback, store your Movies on a non-system drive formatted in XFS (prevents fragments), NTFS (fragment resistant and easy to defrag), or EXT4 (uses large file <i>extents</i>), and <a rel="nofollow" class="external text" href="https://trac.transmissionbt.com/ticket/849">avoid</a> EXT3 or <a href="https://en.wikipedia.org/wiki/File_Allocation_Table#Fragmentation" class="extiw" title="wikipedia:File Allocation Table">less</a> resistant FAT32. For smaller Flash drives with seldom fragmented Music and Photo files, VFAT (FAT32) and EXT4 show faster writes with less CPU load, but EXT4 may affect memory wear due to journaling, and less compatible with media players. Proper drive partitioning, block <a rel="nofollow" class="external text" href="https://lwn.net/Articles/428584/">alignment</a> and <i>mount options</i> (i.e. <i>async,noatime</i>...- choice depends on file system and memory type) can greatly <a rel="nofollow" class="external text" href="https://linux-howto-guide.blogspot.ca/2009/10/increase-usb-flash-drive-write-speed.html">accelerate</a> flash and HD drive speed among other <a href="https://en.wikipedia.org/wiki/Logical_Disk_Manager#Advantages_of_using_a_1-MiB_alignment_boundary" class="extiw" title="wikipedia:Logical Disk Manager">advantages</a>.
</p>
<h3><span class="mw-headline" id="Media_Handling">Media Handling</span></h3>
<p>MiniDLNA is aimed for small devices, so does not generate movie thumbnails to lower CPU load and DB built time. It uses either thumbs in the same folder with movie if any, or extracts them where present from media containers like MP4 or MKV with embedded Album Art tags, but not AVI. One can add thumbs (JPG 160x160 pxl or less) to media folders with a <b>Thumbnail Maker</b>, and miniDLNA will link them to media files after rescan. Larger thumbs will be resized and stored in <i>Media_DB</i> that slows scan. At one movie per folder, follow thumb naming rules in <i>minidlna.conf</i>. For multiple show episodes per folder, each thumb name should match its episode name without ext. (<i>&lt;file&gt;.cover.jpg</i> or <i>&lt;file&gt;.jpg</i>). To handle <i>MS Album Art</i> thumb names with GUID, add * to the end <i>"AlbumArt_{*".jpg</i> . MiniDLNA will list on screen only chosen media type (i.e. Movies), but will not other files in the same folder.
</p>
<p>When viewing photos, progressive and/or lossless compression JPG may not be supported by your player via DLNA. Also resize photos to "suggested photo size" by the player's docs for problem free image slideshow. DLNA spec restricts image type to JPG or PNG, and max size to 4096 x 4096 pixels - and that is if the DLNA server implementation supports the LARGE format. The next size limit down (MEDIUM) is 1024 x 768, so resizing may help to show photos correctly.
</p>
<p>To decrease system load, MiniDLNA does not transcode on the fly unsupported media files into supported by your player formats. When building <i>Media_DB</i>, it might not correctly identify whether certain formats are supported by your player, which may play via UPnP a broader formats choice. DLNA standard is quite limiting UPnP subset in media containers and codec <i>profiles</i> allowed. If you do not see on TV screen or cannot play some media files listed in <i>Media_DB</i>, check if your HD started spinning or try connecting to your media player via USB for their playback. MiniDLNA might not support choosing audio tracks, subtitles, disk chapters, list sorting, and other advanced playback features for your player model.
</p>
<h2><span class="mw-headline" id="Building_a_media_server">Building a media server</span></h2>
<p>Media served could be based on lightweight and cheap system like development board (Raspberry Pi, CubeBoard, etc.). You do not even need to put X Server on this board.
</p>
<h3><span class="mw-headline" id="Automount_external_drives">Automount external drives</span></h3>
<p>This is very useful if you want to automate the server. See <a href="../en/Udisks.html#Mount_helpers" title="Udisks">udisks#Mount helpers</a> for more information.
</p>
<h3><span class="mw-headline" id="Issues">Issues</span></h3>
<p>Media server based on MiniDLNA could face the drive re-scan issue. Ex.: external HDD you have plugged will be scanned each time again and again. This happens due to MiniDLNA removes DB records for unplugged drive. If your drive plugged all the time it is not a problem, but if you have "pluggable" media library on large external drives this could take a big while till you start watching your video.
</p>
<p>One can resolve the rescan issue by using <a rel="nofollow" class="external text" href="https://code.google.com/p/minidlna-fastscan">this minidlna fork</a>. It creates a metadata file next to each video file. This can significantly decrease the scan time for large media.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Server_not_visible_in_wireless_network">Server not visible in wireless network</span></h3>
<p>Multicast requests restricted sometimes in wireless networks. So minidlna server will not see <i>239.255.255.250:1900 ssdp:discover</i> client's requests and will not show up. To solve this, disable "Multicast Isolation" and/or "Multicast to Unicast" on the router. Examples:
</p>
<ul>
<li>On ADB / Pirelli P.RG EA4202N router, connect to the configuration page, then Settings-&gt;Bridge and VLAN-&gt;Bridge List-&gt;click edit on Bridge Ethernet WiFi-&gt;set Multicast Isolation to No-&gt;Apply</li>
<li>Upvell routers: Wireless &gt; Advanced Settings &gt; Multicast to Unicast &gt; Disabled, Multicast rate "Auto"</li>
</ul>
<h3><span class="mw-headline" id="Media_directory_not_accessible">Media directory not accessible</span></h3>
<p>Please note that the default systemd service file enforces the parameter <code>ProtectHome=on</code>. If you intend to share files that reside within the <code>/home/</code> file system you may want to lessen that restriction.
You can achieve this by updating the <a href="../en/Systemd.html" title="Systemd">systemd</a> unit override file.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/minidlna.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ProtectHome=read-only</pre>
<h3><span class="mw-headline" id="DLNA_server_stops_being_visible_after_some_time_when_being_shared_on_a_bridge_device">DLNA server stops being visible after some time when being shared on a bridge device</span></h3>
<p>If you are using ReadyMedia to "broadcast" on a bridged device (such as an OpenVPN device bridged to an Ethernet device), the server may stop being seen by the clients after some time (which may vary from a few seconds to half a day).
In order to solve this you need to disable 'multicast snooping'. You can do it instantly with the following command:
</p>
<pre># echo 0 &gt;&gt; /sys/devices/virtual/net/br0/bridge/multicast_snooping
</pre>
<p>This should make the server visible to the clients *immediately*, but the change will be lost on reboot.
If this works, you can make it a permanent change by using a systemd service file. Edit the file <code>/etc/systemd/system/multicast_snooping.service</code> with the following content:
</p>
<pre>[Unit]
Description=Set multicast snoop to off
After=network-online.target

[Service]
Type=oneshot
ExecStart=/usr/bin/bash -c "echo 0 &gt;&gt; /sys/devices/virtual/net/br0/bridge/multicast_snooping"
RemainAfterExit=true
ExecStop=/usr/bin/bash -c "echo 1 &gt;&gt; /sys/devices/virtual/net/br0/bridge/multicast_snooping"
StandardOutput=journal

[Install]
WantedBy=multi-user.target
</pre>
<p>Now all you have to do is <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>multicast_snooping.service</code>.
</p>
<p>This approach should disable multicast_snooping on every boot.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Media_servers.html" title="Category:Media servers">Media servers</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ReadyMedia&amp;oldid=812645">https://wiki.archlinux.org/index.php?title=ReadyMedia&amp;oldid=812645</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 20 July 2024, at 02:04.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
