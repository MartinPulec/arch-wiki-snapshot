<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>DSDT - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-DSDT rootpage-DSDT skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Before_you_start" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Before_you_start">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Before you start</span>
			</div>
		</a>
		
			<button aria-controls="toc-Before_you_start-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Before you start subsection</span>
			</button>
		
		<ul id="toc-Before_you_start-sublist" class="vector-toc-list">
			<li id="toc-Tell_the_kernel_to_report_a_version_of_Windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tell_the_kernel_to_report_a_version_of_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Tell the kernel to report a version of Windows</span>
				</div>
			</a>
			
			<ul id="toc-Tell_the_kernel_to_report_a_version_of_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Find_a_fixed_DSDT" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Find_a_fixed_DSDT">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Find a fixed DSDT</span>
				</div>
			</a>
			
			<ul id="toc-Find_a_fixed_DSDT-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Recompiling_it_yourself" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Recompiling_it_yourself">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Recompiling it yourself</span>
			</div>
		</a>
		
		<ul id="toc-Recompiling_it_yourself-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Using_modified_code" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Using_modified_code">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Using modified code</span>
			</div>
		</a>
		
			<button aria-controls="toc-Using_modified_code-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Using modified code subsection</span>
			</button>
		
		<ul id="toc-Using_modified_code-sublist" class="vector-toc-list">
			<li id="toc-Using_mkinitcpio's_acpi_override_hook" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_mkinitcpio's_acpi_override_hook">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Using mkinitcpio's acpi_override hook</span>
				</div>
			</a>
			
			<ul id="toc-Using_mkinitcpio's_acpi_override_hook-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_a_CPIO_archive" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_a_CPIO_archive">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Using a CPIO archive</span>
				</div>
			</a>
			
			<ul id="toc-Using_a_CPIO_archive-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Compiling_into_the_kernel" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Compiling_into_the_kernel">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Compiling into the kernel</span>
				</div>
			</a>
			
			<ul id="toc-Compiling_into_the_kernel-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_the_AML_with_GRUB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_the_AML_with_GRUB">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Using the AML with GRUB</span>
				</div>
			</a>
			
			<ul id="toc-Using_the_AML_with_GRUB-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_the_AML_with_dracut" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_the_AML_with_dracut">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Using the AML with dracut</span>
				</div>
			</a>
			
			<ul id="toc-Using_the_AML_with_dracut-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Verify_successful_override" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Verify_successful_override">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Verify successful override</span>
			</div>
		</a>
		
		<ul id="toc-Verify_successful_override-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">DSDT</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/DSDT" title="DSDT – 日本語" lang="ja" hreflang="ja" data-title="DSDT" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/DSDT" title="DSDT – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="DSDT" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/ACPI_modules.html" title="ACPI modules">ACPI modules</a></li>
<li><a href="../en/Acpid.html" title="Acpid">acpid</a></li>
</ul>
</div>
<p>DSDT (Differentiated System Description Table) is a part of the <a href="https://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface" class="extiw" title="wikipedia:Advanced Configuration and Power Interface">ACPI</a> specification. It supplies information about supported power events in a given system. ACPI tables are provided in firmware from the manufacturer. A common Linux problem is missing ACPI functionality, such as: fans not running, screens not turning off when the lid is closed, etc.  This can stem from DSDTs made with Windows specifically in mind, which can be patched after installation. The goal of this article is to analyze and rebuild a faulty DSDT, so that the kernel can override the default one.
</p>
<p>Basically a DSDT table is the code run on ACPI (Power Management) events.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The goal of the <a rel="nofollow" class="external text" href="https://01.org/linux-acpi">Linux ACPI</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-09-16 ⓘ]</sup> project is that Linux should work on unmodified firmware.  If you still find this type of workaround necessary on modern kernels then you should consider <a href="../en/Bug_reporting_guidelines.html" class="mw-redirect" title="Reporting bug guidelines">submitting a bug report</a>. </div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Before_you_start">Before you start</span></h2>
<p>It is possible that the hardware manufacturer has released an updated firmware which fixes ACPI related problems.  Installing an updated firmware is often preferred over this method because it would avoid duplication of effort.
</p>
<p>This process does tamper with some fairly fundamental code on your installation. You will want to be absolutely sure of the changes you make. You might also wish to <a href="../en/Disk_cloning.html" title="Disk cloning">clone your disk</a> beforehand.
</p>
<p>Even before attempting to fix your DSDT yourself, you can attempt a couple of different shortcuts:
</p>
<h3><span class="mw-headline" id="Tell_the_kernel_to_report_a_version_of_Windows">Tell the kernel to report a version of Windows</span></h3>
<p>Use the variable <code>acpi_os_name</code> as a <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>. For example:
</p>
<pre>acpi_os_name="Microsoft Windows NT"
</pre>
<p>To add a recognized OS interface, use the variable <code>acpi_osi</code>.
</p>
<pre>acpi_osi="Linux"
</pre>
<p>To use only one OS interface, add <code>acpi_osi=!</code>. This tells the firmware that there is only one supported operating system, so this is often the recommended solution.
</p>
<pre>acpi_osi=! acpi_osi="Windows 2022"
</pre>
<p>To remove an interface, use a an exclamation point in the beginning of the string.
</p>
<pre>acpi_osi="!Windows 2012"
</pre>
<p>Other strings to test:
</p>
<ul>
<li>"Microsoft Windows XP"</li>
<li>"Microsoft Windows 2000"</li>
<li>"Microsoft Windows 2000.1"</li>
<li>"Microsoft Windows ME: Millennium Edition"</li>
<li>"Microsoft WindowsME: Millennium Edition"</li>
<li>"Windows 2001"</li>
<li>"Windows 2006"</li>
<li>"Windows 2009"</li>
<li>"Windows 2012"</li>
<li>"Windows 2015"</li>
<li>"Windows 2020"</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Although not recommended, you can try "Linux".</div>
<p>Out of curiousity, you can follow the steps below to extract your DSDT and search the <i>.dsl</i> file.  Just grep for "Windows" and see what pops up.
</p>
<h3><span class="mw-headline" id="Find_a_fixed_DSDT">Find a fixed DSDT</span></h3>
<p>A DSDT file is originally written in ACPI Source language (an <i>.asl</i>/<i>.dsl</i> file). Using a compiler this can produce an 'ACPI Machine Language' file (<i>.aml</i>) or a hex table (<i>.hex</i>). To incorporate the file in your Arch install, you will need to get hold of a compiled <i>.aml</i> file — whether this means compiling it yourself or trusting some stranger on the Internet is at your discretion.  If you do download a file from the world wide web, it will most likely be a compressed <i>.asl</i> file.  So you will need to unzip it and compile it. The upside to this is that you will not have to research specific code fixes yourself.
</p>
<p>Arch users with the same laptop as you are: a minority of a minority of a minority. Try browsing other distributions/Linux forums for talk about the same model. It is likely they have the same problems and either because there is a lot of them, or because they are tech savvy — someone there has produced a working DSDT and may even provide a precompiled version (again, use at your own risk).
Search engines are your best tools. Try keeping it short: 'model name' + 'dsdt' will probably produce results.
</p>
<h2><span class="mw-headline" id="Recompiling_it_yourself">Recompiling it yourself</span></h2>
<p>Your best resources in this endeavor are going to be <a rel="nofollow" class="external text" href="https://uefi.org/acpi/specs">ACPI Spec homepage</a>, and <a rel="nofollow" class="external text" href="https://01.org/linux-acpi">Linux ACPI Project</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2023-09-16 ⓘ]</sup> which supercedes the activity that occurred at <i>acpi.sourceforge.net</i>.
In a nutshell, you can use Intel's ASL compiler to turn your systems DSDT table into source code, locate/fix the errors, and recompile.
</p>
<p>You will need to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpica">acpica</a></span> to modify code.
</p>
<p><b>What compiled the original code?</b>
Check if your system's DSDT was compiled using Intel or Microsoft compiler:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg | grep DSDT</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACPI: DSDT 00000000bf7e5000 0A35F (v02 Intel  CALPELLA 06040000 INTL 20060912)
ACPI: EC: Look up EC in DSDT
</pre>
<p>In case Microsoft's compiler had been used, abbreviation INTL would instead be MSFT.
In the example, there were 5 errors on decompiling/recompiling the DSDT. Two of them were easy to fix after a bit of googling and delving into the ACPI specification. Three of them were due to different versions of compiler used and are, as later discovered, handled by the ACPICA at boot-time. The ACPICA component of the kernel can handle most of the trivial errors you get while compiling the DSDT. So do not fret yourself over compile errors if your system is <i>working the way it should</i>.
</p>
<p>Extract the binary ACPI tables:
</p>
<pre># cat /sys/firmware/acpi/tables/DSDT &gt; dsdt.dat</pre>
<p>Disassemble the ACPI tables to a <i>.dsl</i> file:
</p>
<pre>$ iasl -d dsdt.dat</pre>
<p>Attempt to create a hex AML table (in C) from the <i>.dsl</i> file:
</p>
<pre>$ iasl -tc dsdt.dsl</pre>
<p>Examine any errors outputted from creating the hex AML table and fix them. For example:
</p>
<pre>dsdt.dsl   6727:                         Name (_PLD, Buffer (0x10)  
Error    4105 -          Invalid object type for reserved name ^  (found BUFFER, requires Package)
</pre>
<p>Amend the file at line 6727 where the error occurred:
</p>
<pre>(_PLD, <b>Package(1) {</b>Buffer (0x10)
{
    ...
}<b>}</b>)
</pre>
<p>Increase the OEM version. Otherwise, the kernel will not apply the modified ACPI table. For example, before increasing the OEM version:
</p>
<pre>DefinitionBlock ("DSDT.aml", "DSDT", 2, "INTEL ", "TEMPLATE", 0x00000000)</pre>
<p>After increasing the OEM version:
</p>
<pre>DefinitionBlock ("DSDT.aml", "DSDT", 2, "INTEL ", "TEMPLATE", 0x0000000<b>1</b>)</pre>
<p>Create the hex AML table again after fixing all errors and increasing the OEM version:
</p>
<pre>$ iasl -tc dsdt.dsl</pre>
<p>You might want to try the option <code>-ic</code> for C include file to insert into kernel source. If no errors and no warnings are raised, you should be good to go.
</p>
<h2><span class="mw-headline" id="Using_modified_code">Using modified code</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> After each BIOS update you will need to fix DSDT again and repeat these steps!</div>
<p>There are at least two ways to use a custom DSDT:
</p>
<ul>
<li>creating a uncompressed CPIO archive that is loaded by the kernel very early during boot,</li>
<li>compiling it into the kernel.</li>
</ul>
<h3>
<span id="Using_mkinitcpio.27s_acpi_override_hook"></span><span class="mw-headline" id="Using_mkinitcpio's_acpi_override_hook">Using mkinitcpio's acpi_override hook</span>
</h3>
<p><a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> provides an <code>acpi_override</code> hook which takes all <i>.aml</i> files found in <code>/usr/initcpio/acpi_override/</code> and <code>/etc/initcpio/acpi_override/</code> and places them in an early uncompressed CPIO archive inside <code>/kernel/firmware/acpi/</code>. This avoids the need to manually create a separate CPIO archive or to change the boot loader configuration since <i>mkinitcpio</i> packs the uncompressed CPIO archive together with the main initramfs image into one file.
</p>
<p>First, create the <code>/etc/initcpio/acpi_override</code> directory and copy all needed <i>.aml</i> files to it. E.g.:
</p>
<pre># mkdir /etc/initcpio/acpi_override
# cp dsdt.aml /etc/initcpio/acpi_override/
</pre>
<p>Add <code>acpi_override</code> to the <code>HOOKS</code> array in <code>/etc/mkinitcpio.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HOOKS=(... <b>acpi_override</b>)</pre>
<p>Finally, <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a> and reboot.
</p>
<h3><span class="mw-headline" id="Using_a_CPIO_archive">Using a CPIO archive</span></h3>
<p>This method has the advantage that you do not need to recompile your kernel, and updating the kernel will not make it necessary to repeat these steps.
</p>
<p>This method requires the <code>ACPI_TABLE_UPGRADE=y</code> kernel configuration to be enabled (true for the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> package). See <a rel="nofollow" class="external autonumber" href="https://docs.kernel.org/admin-guide/acpi/initrd_table_override.html">[1]</a> for details.
</p>
<p>First, create the following folder structure: 
</p>
<pre>$ mkdir -p kernel/firmware/acpi
</pre>
<p>Copy the fixed ACPI tables into the just created <code>kernel/firmware/acpi</code> folder, for example:
</p>
<pre>$ cp dsdt.aml ssdt1.aml kernel/firmware/acpi
</pre>
<p>Within the same folder where the newly created <code>kernel/</code> folder resides, run:
</p>
<pre>$ find kernel | cpio -H newc --create &gt; acpi_override
</pre>
<p>This creates the CPIO archive containing the fixed ACPI tables. Copy the archive to the <code>boot</code> directory.
</p>
<pre># cp acpi_override /boot
</pre>
<p>Lastly, configure the <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loader</a> to load your CPIO archive. For example, using <a href="../en/Systemd-boot.html" title="Systemd-boot">Systemd-boot</a>, <code>/boot/loader/entries/arch.conf</code> might look like this:
</p>
<pre>title	 Arch Linux
linux	 /vmlinuz-linux
initrd   /acpi_override
initrd	 /initramfs-linux.img
options  root=PARTUUID=ec9d5998-a9db-4bd8-8ea0-35a45df04701 resume=PARTUUID=58d0aa86-d39b-4fe1-81cf-45e7add275a0 ...
</pre>
<p>Now all that is left to do is to reboot and to <a href="#Verify_successful_override">verify the result.</a>
</p>
<h3><span class="mw-headline" id="Compiling_into_the_kernel">Compiling into the kernel</span></h3>
<p>You will want to be familiar with <a href="../en/Kernel.html" class="mw-redirect" title="Kernels">compiling your own kernel</a>.  The most straightforward way is with the "traditional" approach.
After compiling DSDT, iasl produce two files: <code>dsdt.hex</code> and <code>dsdt.aml</code>.
</p>
<p><b>Using <code>menuconfig</code>:</b>
</p>
<ul>
<li>Disable "Select only drivers that do not need compile-time external firmware". Located in "Device Drivers -&gt; Generic Driver Options".</li>
<li>Enable "Include Custom DSDT" and specify the absolute path of your fixed DSDT file (<code>dsdt.hex</code>, not <code>dsdt.aml</code>). Located in "Power management and ACPI options -&gt; ACPI (Advanced Configuration and Power Interface) Support".</li>
</ul>
<h3><span class="mw-headline" id="Using_the_AML_with_GRUB">Using the AML with GRUB</span></h3>
<p>If you use <a href="../en/GRUB.html" title="GRUB">GRUB</a> you can use an even easier method. Copy the above created <i>.aml</i> file to your boot partition:
</p>
<pre># cp dsdt_patch.aml /boot
</pre>
<p>Then add the following line to your GRUB config:
</p>
<pre>acpi /dsdt_patch.aml
</pre>
<p>You can e.g. add this to <code>/etc/grub.d/40_custom</code>, don't forget to generate your GRUB config afterwards.
</p>
<h3><span class="mw-headline" id="Using_the_AML_with_dracut">Using the AML with dracut</span></h3>
<p>If you use <a href="../en/Dracut.html" title="Dracut">Dracut</a>, you can simply copy the above created <i>.aml</i> file to a defined location. An according configuration file 
<code>/etc/dracut.conf.d/acpi-fix.conf</code> must be created:
</p>
<pre>acpi_override="yes"
acpi_table_dir="/usr/local/lib/firmware/acpi"
</pre>
<h2><span class="mw-headline" id="Verify_successful_override">Verify successful override</span></h2>
<p>Look for messages that confirm the override, for example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg | grep ACPI</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[    0.000000] ACPI: Override [DSDT-   A M I], this is unsafe: tainting kernel
[    0.000000] ACPI: DSDT 00000000be9b1190 Logical table override, new table: ffffffff81865af0
[    0.000000] ACPI: DSDT ffffffff81865af0 0BBA3 (v02 ALASKA    A M I 000000F3 INTL 20130517)
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/acpi/initrd_table_override.html">Upgrading ACPI tables via initrd</a></li>
<li><a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/windows-hardware/drivers/acpi/winacpi-osi">How to Identify the Windows Version in ACPI by Using _OSI</a></li>
<li><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dracut.conf.5">How to override ACPI tables with dracut</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Boot_process.html" title="Category:Boot process">Boot process</a></li>
<li><a href="../en/Category:Kernel.html" title="Category:Kernel">Kernel</a></li>
<li><a href="../en/Category:Power_management.html" title="Category:Power management">Power management</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=DSDT&amp;oldid=827491">https://wiki.archlinux.org/index.php?title=DSDT&amp;oldid=827491</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 February 2025, at 16:52.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
