<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>PeerGuardian Linux - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PeerGuardian_Linux rootpage-PeerGuardian_Linux skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Server" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Server">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Server</div>
			</a>
			
			<ul id="toc-Server-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-LAN" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#LAN">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>LAN</div>
			</a>
			
			<ul id="toc-LAN-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Starting_up" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Starting_up">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Starting up</div>
		</a>
		
		<ul id="toc-Starting_up-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Running_pgl_from_within_a_container" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Running_pgl_from_within_a_container">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Running pgl from within a container</div>
		</a>
		
		<ul id="toc-Running_pgl_from_within_a_container-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">PeerGuardian Linux</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 1 language">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-1" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">1 language</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/PeerGuardian_Linux" title="PeerGuardian Linux – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<p><a rel="nofollow" class="external text" href="https://sourceforge.net/projects/peerguardian/">PeerGuardian Linux</a> (<i>pgl</i>) is a privacy oriented firewall application.  It blocks connections to and from hosts specified in huge block lists (thousands or millions of IP ranges). <i>pgl</i> is based on the Linux kernel <a href="https://en.wikipedia.org/wiki/Netfilter" class="extiw" title="wikipedia:Netfilter">netfilter</a> framework and <a href="../en/Iptables.html" title="Iptables">iptables</a>. 
</p>
<p>A more native, efficient solution to achieve the same end is to use the <a href="../en/Ipset.html" title="Ipset">ipset</a> kernel module in conjunction with the pg2ipset tool and the ipset-update script.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>There are two possible packages to <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a>: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pgl-cli/">pgl-cli</a></span><sup><small>AUR</small></sup> includes only the daemon and CLI tools, while <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pgl/">pgl</a></span><sup><small>AUR</small></sup> comes complete with a GUI (written using Qt).
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<ul>
<li>
<code>/etc/pgl/blocklists.list</code> contains a list of URL for retrieving the various block lists.</li>
<li>
<code>/etc/pgl/pglcmd.conf</code>, empty by default, overrides the default settings present in <code>/usr/lib/pgl/pglcmd.defaults</code>.</li>
<li>
<code>/etc/pgl/allow.p2p</code> lists custom IP ranges that will not be filtered.</li>
</ul>
<p>The default lists in <code>/etc/pgl/blocklists.list</code> block many potentially legitimate IP address.  Users are encouraged to exercise best judgment and the information available at <a rel="nofollow" class="external text" href="https://www.iblocklist.com/">I-Blocklist</a>.
</p>
<p>It is recommended to disable the filtering of HTTP connections by adding the following to <code>/etc/pgl/pglcmd.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pgl/pglcmd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">WHITE_TCP_OUT="http https"</pre>
<p>Conversely, one could white list all the ports except the ones used by the program to be blocked. The following example only use the block lists to stop incoming traffic on ports 53 (DNS) and 80 (HTTP):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pgl/pglcmd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">WHITE_TCP_IN="0:79 81:65535"
WHITE_UDP_IN="0:52 54:65535"</pre>
<h3><span class="mw-headline" id="Server">Server</span></h3>
<p><a href="../en/Systemd.html" title="Systemd">systemd</a> initialization of the system means that it is quite possible for a server to be briefly unprotected, prior to <i>pgl</i> launch. To ensure adequate protection, <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Extend the unit">extend the unit</a> <code>httpd.service</code> with the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/httpd.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Wants=pgl.service
After=pgl.service</pre>
<h3><span class="mw-headline" id="LAN">LAN</span></h3>
<p>By default, <i>pgl</i> blocks traffic on the local IPv4 addresses. To disable this behavior, edit <code>/etc/pgl/pglcmd.conf</code> to add an exception using the <i>WHITE_IP_*</i> setting:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pgl/pglcmd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">WHITE_IP_OUT="192.168.0.0/24"</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pgl/pglcmd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">WHITE_IP_IN="192.168.0.0/24"</pre>
<p>For further information, please refer to the <code># Whitelist IPs #</code> section of <code>/usr/lib/pgl/pglcmd.defaults</code>.
</p>
<h2><span class="mw-headline" id="Starting_up">Starting up</span></h2>
<p>Once comfortable with the configuration of both the daemon and lists, start the <code>pgl</code> <a href="../en/Systemd.html" class="mw-redirect" title="Daemon">service</a>. To make sure that <i>pgl</i> works as intended, issue this command:
</p>
<pre># pglcmd test
</pre>
<p>To start <i>pgl</i> automatically at boot, enable the <code>pgl</code> service.
</p>
<h2><span class="mw-headline" id="Running_pgl_from_within_a_container">Running pgl from within a container</span></h2>
<p>Users running pgl within a <a href="../en/Linux_Containers.html" class="mw-redirect" title="Linux Container">Linux Container</a> may need to <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> the included <code>lxc@.service</code> to add the loading of key modules needed by pgl.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/lxc@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=%i LXC
After=network.target

[Service]
Type=forking
ExecStartPre=/usr/bin/modprobe -a xt_NFQUEUE xt_mark xt_iprange
ExecStart=/usr/bin/lxc-start -d -n %i
ExecStop=/usr/bin/lxc-stop -n %i
Delegate=true

[Install]
WantedBy=multi-user.target
</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Firewalls.html" title="Category:Firewalls">Firewalls</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=PeerGuardian_Linux&amp;oldid=769115">https://wiki.archlinux.org/index.php?title=PeerGuardian_Linux&amp;oldid=769115</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 23 February 2023, at 09:41.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
