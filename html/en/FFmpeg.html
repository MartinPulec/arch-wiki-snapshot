<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>FFmpeg - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-FFmpeg rootpage-FFmpeg skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Encoding_examples" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Encoding_examples">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Encoding examples</div>
		</a>
		
			<button aria-controls="toc-Encoding_examples-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Encoding examples subsection</span>
			</button>
		
		<ul id="toc-Encoding_examples-sublist" class="vector-toc-list">
			<li id="toc-Screen_capture" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_capture">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Screen capture</div>
			</a>
			
			<ul id="toc-Screen_capture-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Recording_webcam" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Recording_webcam">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Recording webcam</div>
			</a>
			
			<ul id="toc-Recording_webcam-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VOB_to_any_container" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VOB_to_any_container">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>VOB to any container</div>
			</a>
			
			<ul id="toc-VOB_to_any_container-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-x264" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#x264">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>x264</div>
			</a>
			
			<ul id="toc-x264-sublist" class="vector-toc-list">
				<li id="toc-Lossless" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Lossless">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.1</span>Lossless</div>
			</a>
			
			<ul id="toc-Lossless-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Constant_rate_factor" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Constant_rate_factor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.2</span>Constant rate factor</div>
			</a>
			
			<ul id="toc-Constant_rate_factor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Two-pass_(very_high-quality)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Two-pass_(very_high-quality)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.3</span>Two-pass (very high-quality)</div>
			</a>
			
			<ul id="toc-Two-pass_(very_high-quality)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Video_stabilization" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Video_stabilization">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.4</span>Video stabilization</div>
			</a>
			
			<ul id="toc-Video_stabilization-sublist" class="vector-toc-list">
				<li id="toc-First_pass" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#First_pass">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.4.1</span>First pass</div>
			</a>
			
			<ul id="toc-First_pass-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Second_pass" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Second_pass">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.4.2</span>Second pass</div>
			</a>
			
			<ul id="toc-Second_pass-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-x265" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#x265">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.5</span>x265</div>
			</a>
			
			<ul id="toc-x265-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Single-pass_MPEG-2_(near_lossless)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Single-pass_MPEG-2_(near_lossless)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.6</span>Single-pass MPEG-2 (near lossless)</div>
			</a>
			
			<ul id="toc-Single-pass_MPEG-2_(near_lossless)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Subtitles" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Subtitles">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.7</span>Subtitles</div>
			</a>
			
			<ul id="toc-Subtitles-sublist" class="vector-toc-list">
				<li id="toc-Extracting" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Extracting">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.7.1</span>Extracting</div>
			</a>
			
			<ul id="toc-Extracting-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hardsubbing" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Hardsubbing">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.7.2</span>Hardsubbing</div>
			</a>
			
			<ul id="toc-Hardsubbing-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Volume_gain" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Volume_gain">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.8</span>Volume gain</div>
			</a>
			
			<ul id="toc-Volume_gain-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Volume_normalization" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Volume_normalization">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.9</span>Volume normalization</div>
			</a>
			
			<ul id="toc-Volume_normalization-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Extracting_audio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Extracting_audio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.10</span>Extracting audio</div>
			</a>
			
			<ul id="toc-Extracting_audio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Stripping_audio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Stripping_audio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.11</span>Stripping audio</div>
			</a>
			
			<ul id="toc-Stripping_audio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Splitting_files" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Splitting_files">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.12</span>Splitting files</div>
			</a>
			
			<ul id="toc-Splitting_files-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hardware_video_acceleration" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hardware_video_acceleration">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.13</span>Hardware video acceleration</div>
			</a>
			
			<ul id="toc-Hardware_video_acceleration-sublist" class="vector-toc-list">
				<li id="toc-VA-API" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#VA-API">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.13.1</span>VA-API</div>
			</a>
			
			<ul id="toc-VA-API-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-NVIDIA_NVENC/NVDEC" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#NVIDIA_NVENC/NVDEC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.13.2</span>NVIDIA NVENC/NVDEC</div>
			</a>
			
			<ul id="toc-NVIDIA_NVENC/NVDEC-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Intel_QuickSync_(QSV)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Intel_QuickSync_(QSV)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.13.3</span>Intel QuickSync (QSV)</div>
			</a>
			
			<ul id="toc-Intel_QuickSync_(QSV)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-AMD_AMF" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#AMD_AMF">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.13.4</span>AMD AMF</div>
			</a>
			
			<ul id="toc-AMD_AMF-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Animated_GIF" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Animated_GIF">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.14</span>Animated GIF</div>
			</a>
			
			<ul id="toc-Animated_GIF-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Preset_files" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Preset_files">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Preset files</div>
		</a>
		
			<button aria-controls="toc-Preset_files-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Preset files subsection</span>
			</button>
		
		<ul id="toc-Preset_files-sublist" class="vector-toc-list">
			<li id="toc-Using_preset_files" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_preset_files">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Using preset files</div>
			</a>
			
			<ul id="toc-Using_preset_files-sublist" class="vector-toc-list">
				<li id="toc-libavcodec-vhq.ffpreset" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#libavcodec-vhq.ffpreset">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.1</span>libavcodec-vhq.ffpreset</div>
			</a>
			
			<ul id="toc-libavcodec-vhq.ffpreset-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Tips and tricks</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Reduce_verbosity" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reduce_verbosity">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Reduce verbosity</div>
			</a>
			
			<ul id="toc-Reduce_verbosity-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Output_the_duration_of_a_video" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Output_the_duration_of_a_video">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Output the duration of a video</div>
			</a>
			
			<ul id="toc-Output_the_duration_of_a_video-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Output_stream_information_as_JSON" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Output_stream_information_as_JSON">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Output stream information as JSON</div>
			</a>
			
			<ul id="toc-Output_stream_information_as_JSON-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Create_a_screen_of_the_video_every_X_frames" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Create_a_screen_of_the_video_every_X_frames">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Create a screen of the video every X frames</div>
			</a>
			
			<ul id="toc-Create_a_screen_of_the_video_every_X_frames-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>See also</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">FFmpeg</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/FFmpeg" title="FFmpeg – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/FFmpeg" title="FFmpeg – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Convert_FLAC_to_MP3.html#With_FFmpeg" title="Convert FLAC to MP3">Convert FLAC to MP3#With FFmpeg</a></li>
</ul>
</div>
<p>From the project <a rel="nofollow" class="external text" href="https://www.ffmpeg.org/">home page</a>:
</p>
<dl><dd>FFmpeg is a complete, cross-platform solution to record, convert and stream audio and video. It includes libavcodec - the leading audio/video codec library.</dd></dl>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You may encounter FFmpeg forks like <i>libav</i> and <i>avconv</i>, see <a rel="nofollow" class="external text" href="https://blog.pkh.me/p/13-the-ffmpeg-libav-situation.html">The FFmpeg/Libav situation</a> for a blog article about the differences between the project and the current status of FFmpeg.</div>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ffmpeg">ffmpeg</a></span> package.
</p>
<p>For the development version, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ffmpeg-git/">ffmpeg-git</a></span><sup><small>AUR</small></sup> package. There is also <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ffmpeg-full/">ffmpeg-full</a></span><sup><small>AUR</small></sup>, which is built with as many optional features enabled as possible.
</p>
<h2><span class="mw-headline" id="Encoding_examples">Encoding examples</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>It is important that parameters are specified in the correct order (e.g. input, video, filters, audio, output). Failing to do so may cause parameters being skipped or will prevent FFmpeg from executing.</li>
<li>FFmpeg should automatically choose the number of CPU threads available. However you may want to force the number of threads available by the parameter <code>-threads <i>number</i></code>.</li>
</ul>
</div>
<p>See <a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki#Encoding">FFmpeg encoding wiki</a> and <span class="plainlinks archwiki-template-man" title="$ man 1 ffmpeg"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ffmpeg.1#EXAMPLES">ffmpeg(1) § EXAMPLES</a></span>.
</p>
<h3><span class="mw-headline" id="Screen_capture">Screen capture</span></h3>
<p>FFmpeg includes the <a rel="nofollow" class="external text" href="https://www.ffmpeg.org/ffmpeg-devices.html#x11grab">x11grab</a> and <a rel="nofollow" class="external text" href="https://www.ffmpeg.org/ffmpeg-devices.html#alsa-1">ALSA</a> virtual devices that enable capturing the entire user display and audio input.
</p>
<p>To take a screenshot <code>screen.png</code>:
</p>
<pre>$ ffmpeg -f x11grab -video_size 1920x1080 -i $DISPLAY -vframes 1 screen.png
</pre>
<p>where <code>-video_size</code> specifies the size of the area to capture.
</p>
<p>To take a screencast <code>screen.mkv</code> with lossless encoding and without audio:
</p>
<pre>$ ffmpeg -f x11grab -video_size 1920x1080 -framerate 25 -i $DISPLAY -c:v ffvhuff screen.mkv
</pre>
<p>Here, the Huffyuv codec is used, which is fast, but produces huge file sizes.
</p>
<p>To take a screencast <code>screen.mp4</code> with lossy encoding and with audio:
</p>
<pre>$ ffmpeg -f x11grab -video_size 1920x1080 -framerate 25 -i $DISPLAY -f alsa -i default -c:v libx264 -preset ultrafast -c:a aac screen.mp4
</pre>
<p>Here, the x264 codec with the fastest possible encoding speed is used. Other codecs can be used; if writing each frame is too slow (either due to inadequate disk performance or slow encoding), then frames will be dropped and video output will be choppy.
</p>
<p>If the video stream should not be saved as a file, but used as a virtual webcam for screen sharing purposes, see <a href="../en/V4l2loopback.html#Casting_X11_using_FFmpeg" title="V4l2loopback">v4l2loopback#Casting X11 using FFmpeg</a>.
</p>
<p>See also the <a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki/Capture/Desktop#Linux">official documentation</a>.
</p>
<h3><span class="mw-headline" id="Recording_webcam">Recording webcam</span></h3>
<p>FFmpeg includes the <a rel="nofollow" class="external text" href="https://www.ffmpeg.org/ffmpeg-devices.html#video4linux2_002c-v4l2">video4linux2</a> and <a rel="nofollow" class="external text" href="https://www.ffmpeg.org/ffmpeg-devices.html#alsa-1">ALSA</a> input devices that enable capturing webcam and audio input.
</p>
<p>The following command will record a video <code>webcam.mp4</code> from the webcam without audio, assuming that the webcam is correctly recognized under <code>/dev/video0</code>:
</p>
<pre>$ ffmpeg -f v4l2 -video_size 640x480 -i /dev/video0 -c:v libx264 -preset ultrafast webcam.mp4
</pre>
<p>where <code>-video_size</code> specifies the largest allowed image size from the webcam.
</p>
<p>The above produces a silent video. To record a video <code>webcam.mp4</code> from the webcam with audio:
</p>
<pre>$ ffmpeg -f v4l2 -video_size 640x480 -i /dev/video0 -f alsa -i default -c:v libx264 -preset ultrafast -c:a aac webcam.mp4
</pre>
<p>Here, the x264 codec with the fastest possible encoding speed is used. Other codecs can be used; if writing each frame is too slow (either due to inadequate disk performance or slow encoding), then frames will be dropped and video output will be choppy.
</p>
<p>See also the <a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki/Capture/Webcam#Linux">official documentation</a>.
</p>
<h3><span class="mw-headline" id="VOB_to_any_container">VOB to any container</span></h3>
<p>Concatenate the desired <a href="https://en.wikipedia.org/wiki/VOB" class="extiw" title="wikipedia:VOB">VOB</a> files into a single stream and mux them to MPEG-2:
</p>
<pre>$ cat f0.VOB f1.VOB f2.VOB | ffmpeg -i - out.mp2
</pre>
<h3><span class="mw-headline" id="x264">x264</span></h3>
<h4><span class="mw-headline" id="Lossless">Lossless</span></h4>
<p>The <i>ultrafast</i> preset will provide the fastest encoding and is useful for quick capturing (such as screencasting):
</p>
<pre>$ ffmpeg -i input -c:v libx264 -preset ultrafast -qp 0 -c:a copy output
</pre>
<p>On the opposite end of the preset spectrum is <i>veryslow</i> and will encode slower than <i>ultrafast</i> but provide a smaller output file size:
</p>
<pre>$ ffmpeg -i input -c:v libx264 -preset veryslow -qp 0 -c:a copy output
</pre>
<p>Both examples will provide the same quality output.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> If your computer is able to handle <code>-preset superfast</code> in realtime, you should use that instead of <code>-preset ultrafast</code>. Ultrafast is <i>far</i> less efficient compression than superfast.</div>
<h4><span class="mw-headline" id="Constant_rate_factor">Constant rate factor</span></h4>
<p>Used when you want a specific quality output. General usage is to use the highest <code>-crf</code> value that still provides an acceptable quality. Lower values are higher quality; 0 is lossless, 18 is visually lossless, and 23 is the default value. A sane range is between 18 and 28. Use the slowest <code>-preset</code> you have patience for. See the <a rel="nofollow" class="external text" href="https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide">x264 Encoding Guide</a> for more information.
</p>
<pre>$ ffmpeg -i <i>video</i> -c:v libx264 -tune film -preset slow -crf 22 -x264opts fast_pskip=0 -c:a libmp3lame -aq 4 <i>output</i>.mkv
</pre>
<p><code>-tune</code> option can be used to <a rel="nofollow" class="external text" href="https://forum.doom9.org/showthread.php?t=149394">match the type and content of the of media being encoded</a>.
</p>
<h4>
<span id="Two-pass_.28very_high-quality.29"></span><span class="mw-headline" id="Two-pass_(very_high-quality)">Two-pass (very high-quality)</span>
</h4>
<p>Audio deactivated as only video statistics are recorded during the first of multiple pass runs:
</p>
<pre>$ ffmpeg -i <i>video</i>.VOB -an -vcodec libx264 -pass 1 -preset veryslow \
-threads 0 -b:v 3000k -x264opts frameref=15:fast_pskip=0 -f rawvideo -y /dev/null
</pre>
<p>Container format is automatically detected and muxed into from the output file extension (<code>.mkv</code>):
</p>
<pre>$ ffmpeg -i <i>video</i>.VOB -acodec aac -b:a 256k -ar 96000 -vcodec libx264 \
-pass 2 -preset veryslow -threads 0 -b:v 3000k -x264opts frameref=15:fast_pskip=0 <i>video</i>.mkv
</pre>
<h4><span class="mw-headline" id="Video_stabilization">Video stabilization</span></h4>
<p>Video stablization using the vid.stab plugin entails two passes.
</p>
<h5><span class="mw-headline" id="First_pass">First pass</span></h5>
<p>The first pass records stabilization parameters to a file and/or a test video for visual analysis.
</p>
<ul>
<li>Records stabilization parameters to a file only <pre>$ ffmpeg -i input -vf vidstabdetect=stepsize=4:mincontrast=0:result=transforms.trf -f null -</pre>
</li>
<li>Records stabilization parameters to a file and create test video "output-stab" for visual analysis <pre>$ ffmpeg -i input -vf vidstabdetect=stepsize=4:mincontrast=0:result=transforms.trf output-stab</pre>
</li>
</ul>
<h5><span class="mw-headline" id="Second_pass">Second pass</span></h5>
<p>The second pass parses the stabilization parameters generated from the first pass and applies them to produce "output-stab_final".  You will want to apply any additional filters at this point so as to avoid subsequent transcoding to preserve as much video quality as possible.  The following example performs the following in addition to video stabilization:
</p>
<ul>
<li>
<code>unsharp</code> is recommended by the author of vid.stab. Here we are simply using the defaults of 5:5:1.0:5:5:1.0</li>
<li>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> fade=t=in:st=0:d=4</div> fade in from black starting from the beginning of the file for four seconds</li>
<li>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> fade=t=out:st=60:d=4</div> fade out to black starting from sixty seconds into the video for four seconds</li>
<li>
<code>-c:a pcm_s16le</code> XAVC-S codec records in pcm_s16be which is losslessly transcoded to pcm_s16le</li>
</ul>
<pre>$  ffmpeg -i input -vf vidstabtransform=smoothing=30:interpol=bicubic:input=transforms.trf,unsharp,fade=t=in:st=0:d=4,fade=t=out:st=60:d=4 -c:v libx264 -tune film -preset veryslow -crf 8 -x264opts fast_pskip=0 -c:a pcm_s16le output-stab_final
</pre>
<h3><span class="mw-headline" id="x265">x265</span></h3>
<p>Example command showing the defaults when libx265 is invoked without any parameters (Constant Rate Factor encoding):
</p>
<pre>ffmpeg -i input -c:v libx265 -crf 28 -preset medium -c:a libvorbis output.mp4
</pre>
<p>See FFmpeg <a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki/Encode/H.265">H.265/HEVC Video Encoding Guide</a> for more information.
</p>
<h3>
<span id="Single-pass_MPEG-2_.28near_lossless.29"></span><span class="mw-headline" id="Single-pass_MPEG-2_(near_lossless)">Single-pass MPEG-2 (near lossless)</span>
</h3>
<p>Allow FFmpeg to automatically set DVD standardized parameters. Encode to DVD <a href="https://en.wikipedia.org/wiki/MPEG-2" class="extiw" title="wikipedia:MPEG-2">MPEG-2</a> at ~30 FPS:
</p>
<pre>$ ffmpeg -i <i>video</i>.VOB -target ntsc-dvd <i>output</i>.mpg
</pre>
<p>Encode to DVD MPEG-2 at ~24 FPS:
</p>
<pre>$ ffmpeg -i <i>video</i>.VOB -target film-dvd <i>output</i>.mpg
</pre>
<h3><span class="mw-headline" id="Subtitles">Subtitles</span></h3>
<h4><span class="mw-headline" id="Extracting">Extracting</span></h4>
<p>Subtitles embedded in container files, such as MPEG-2 and Matroska, can be extracted and converted into SRT, SSA, WebVTT among other subtitle formats <a rel="nofollow" class="external autonumber" href="https://trac.ffmpeg.org/wiki/ExtractSubtitles">[1]</a>.
</p>
<ul><li>Inspect a file to determine if it contains a subtitle stream:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ffprobe -hide_banner foo.mkv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Stream #0:0(und): Video: h264 (High), yuv420p, 1920x800 [SAR 1:1 DAR 12:5], 23.98 fps, 23.98 tbr, 1k tbn, 47.95 tbc (default)
  Metadata:
  CREATION_TIME   : 2012-06-05 05:04:15
  LANGUAGE        : und
Stream #0:1(und): Audio: aac, 44100 Hz, stereo, fltp (default)
 Metadata:
 CREATION_TIME   : 2012-06-05 05:10:34
 LANGUAGE        : und
 HANDLER_NAME    : GPAC ISO Audio Handler
<b>Stream #0:2: Subtitle: ssa (default)</b>
</pre>
<ul><li>
<code>foo.mkv</code> has an embedded SSA subtitle which can be extracted into an independent file:</li></ul>
<pre>$ ffmpeg -i foo.mkv foo.ssa
</pre>
<p>Add <code>-c:s srt</code> to save subtitles in desirable format, e.g. <a href="https://en.wikipedia.org/wiki/SubRip" class="extiw" title="wikipedia:SubRip">SubRip</a>:
</p>
<pre>$ ffmpeg -i foo.mkv -c:s srt foo.srt
</pre>
<p>When dealing with multiple subtitles, you may need to specify the stream that needs to be extracted using the <code>-map <i>key</i>:<i>stream</i></code> parameter:
</p>
<pre>$ ffmpeg -i foo.mkv -map 0:2 foo.ssa
</pre>
<h4><span class="mw-headline" id="Hardsubbing">Hardsubbing</span></h4>
<p>(instructions based on <a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki/HowToBurnSubtitlesIntoVideo">HowToBurnSubtitlesIntoVideo</a> at the FFmpeg wiki)
</p>
<p><a href="https://en.wikipedia.org/wiki/Hardsub" class="extiw" title="wikipedia:Hardsub">Hardsubbing</a> entails merging subtitles with the video. Hardsubs cannot be disabled, nor language switched.
</p>
<ul><li>Overlay <code>foo.mpg</code> with the subtitles in <code>foo.ssa</code>:</li></ul>
<pre>$ ffmpeg -i foo.mpg -vf subtitles=foo.ssa out.mpg
</pre>
<h3><span class="mw-headline" id="Volume_gain">Volume gain</span></h3>
<p>Volume gain can be modified through <i>ffmpeg'</i>s filter function. First select the audio stream by using <code>-af</code> or <code>-filter:a</code>, then select the <i>volume</i> filter followed by the number that you want to change the stream by. For example:
</p>
<pre>$ ffmpeg -i input.flac -af <b>volume=1.5</b> ouput.flac
</pre>
<p>Here <code>volume=1.5</code> provides a 150% volume gain, instead of 1.5 use for example 0.5 to half the volume. The volume filter can also take a decibel measure, use <code>volume=3dB</code> to increase the volume by 3dB or <code>volume=-3dB</code> to decrease it by 3dB.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Doubling a file's volume gain, is not the same thing as doubling its volume. You will have to experiment to find the right volume.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To know the current average and peak volume of a file, one can use the <i>volumedetect</i> filter: <code>ffmpeg -i input.flac -af volumedetect -f null -</code>. Then, the difference between the target and the current level can be provided to the <i>volume</i> filter to achieve the desired level.</div>
<h3><span class="mw-headline" id="Volume_normalization">Volume normalization</span></h3>
<p>A given average and peak volume can also be achieved through normalization using the <i>loudnorm</i> filter. To normalize the perceived loudness of a file using <i>fmpeg'</i>s default values for target average, peak and range loudness (respectively -24 LUFS, -2 dBTP and 7 LU), use:
</p>
<pre>$ ffmpeg -i input.flac -af <b>loudnorm</b> output.flac
</pre>
<p>To obtain a different loudness profile, use the <code>i</code>, <code>tp</code> and <code>lra</code> parameters of the filter to indicate respectively the <i>i</i>ntegrated, <i>t</i>rue <i>p</i>eak and <i>l</i>oudness <i>ra</i>nge. For example for a higher perceived loudness than the default, use: 
</p>
<pre>$ ffmpeg -i input.flac -af loudnorm=i=-16:tp=-1.5:lra=11:print_format=summary output.flac
</pre>
<p>In this example, <code>print_format=summary</code> is also added to display the input and output loudness values of the audio file.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The filter also supports two-pass mode, extracting the measured loudness values from a first run and using them in a second run to perform a linear normalization. See <a rel="nofollow" class="external text" href="https://ffmpeg.org/ffmpeg-filters.html#loudnorm">ffmpeg loudnorm documentation</a> for more information.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To know the current loudness measures of a file, use <code>ffmpeg -i input.flac -af loudnorm=print_format=summary -f null -</code>.</div>
<h3><span class="mw-headline" id="Extracting_audio">Extracting audio</span></h3>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ffmpeg -i <i>video</i>.mpg output.ext</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Input #0, avi, from '<i>video</i>.mpg':
  Duration: 01:58:28.96, start: 0.000000, bitrate: 3000 kb/s
    Stream #0.0: Video: mpeg4, yuv420p, 720x480 [PAR 1:1 DAR 16:9], 29.97 tbr, 29.97 tbn, 29.97 tbc
    Stream #0.1: Audio: ac3, 48000 Hz, stereo, s16, 384 kb/s
    Stream #0.2: Audio: ac3, 48000 Hz, 5.1, s16, 448 kb/s
    Stream #0.3: Audio: dts, 48000 Hz, 5.1 768 kb/s
...
</pre>
<p>Extract the first (<code>-map 0:1</code>) <a href="https://en.wikipedia.org/wiki/Dolby_Digital" class="extiw" title="wikipedia:Dolby Digital">AC-3</a> encoded audio stream exactly as it was multiplexed into the file:
</p>
<pre>$ ffmpeg -i <i>video</i>.mpg -map 0:1 -acodec copy -vn <i>video</i>.ac3
</pre>
<p>Convert the third (<code>-map 0:3</code>) <a href="https://en.wikipedia.org/wiki/DTS_(sound_system)" class="extiw" title="wikipedia:DTS (sound system)">DTS</a> audio stream to an <a href="https://en.wikipedia.org/wiki/Advanced_Audio_Coding" class="extiw" title="wikipedia:Advanced Audio Coding">AAC</a> file with a bitrate of 192 kb/s and a <a href="https://en.wikipedia.org/wiki/Sampling_rate" class="extiw" title="wikipedia:Sampling rate">sampling rate</a> of 96000 Hz:
</p>
<pre>$ ffmpeg -i <i>video</i>.mpg -map 0:3 -acodec aac -b:a 192k -ar 96000 -vn <i>output</i>.aac
</pre>
<p><code>-vn</code> disables the processing of the video stream.
</p>
<p>Extract audio stream with certain time interval: 
</p>
<pre>$ ffmpeg -ss 00:01:25 -t 00:00:05 -i <i>video</i>.mpg -map 0:1 -acodec copy -vn <i>output</i>.ac3
</pre>
<p><code>-ss</code> specifies the start point, and <code>-t</code> specifies the duration.
</p>
<h3><span class="mw-headline" id="Stripping_audio">Stripping audio</span></h3>
<ol>
<li>Copy the first video stream (<code>-map 0:0</code>) along with the second AC-3 audio stream (<code>-map 0:2</code>).</li>
<li>Convert the AC-3 audio stream to two-channel MP3 with a bitrate of 128 kb/s and a sampling rate of 48000 Hz.</li>
</ol>
<pre>$ ffmpeg -i <i>video</i>.mpg -map 0:0 -map 0:2 -vcodec copy -acodec libmp3lame \
-b:a 128k -ar 48000 -ac 2 <i>video</i>.mkv
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ffmpeg -i <i>video</i>.mkv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Input #0, avi, from '<i>video</i>.mpg':
  Duration: 01:58:28.96, start: 0.000000, bitrate: 3000 kb/s
    Stream #0.0: Video: mpeg4, yuv420p, 720x480 [PAR 1:1 DAR 16:9], 29.97 tbr, 29.97 tbn, 29.97 tbc
    Stream #0.1: Audio: mp3, 48000 Hz, stereo, s16, 128 kb/s
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Removing undesired audio streams allows for additional bits to be allocated towards improving video quality.</div>
<h3><span class="mw-headline" id="Splitting_files">Splitting files</span></h3>
<p>You can use the <code>copy</code> codec to perform operations on a file without changing the encoding. For example, this allows you to easily split any kind of media file into two:
</p>
<pre>$ ffmpeg -i file.ext -t 00:05:30 -c copy part1.ext -ss 00:05:30 -c copy part2.ext
</pre>
<h3><span class="mw-headline" id="Hardware_video_acceleration">Hardware video acceleration</span></h3>
<p>Encoding/decoding performance may be improved by using <a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki/HWAccelIntro">hardware acceleration API's</a>, however only a specific kind of codec(s) are allowed and/or may not always produce the same result when using software encoding.
</p>
<h4><span class="mw-headline" id="VA-API">VA-API</span></h4>
<p><a href="../en/Hardware_video_acceleration.html" class="mw-redirect" title="VA-API">VA-API</a> can be used for encoding and decoding on Intel CPUs (requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-media-driver">intel-media-driver</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libva-intel-driver">libva-intel-driver</a></span>) and on certain AMD GPUs when using the open-source <a href="../en/AMDGPU.html" title="AMDGPU">AMDGPU</a> driver (requires <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libva-mesa-driver">libva-mesa-driver</a></span>).
See the <a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki/Hardware/VAAPI">FFmpeg documentation</a> for information about available parameters and supported platforms.
</p>
<p>An example of encoding using the supported H.264 codec:
</p>
<pre>$ ffmpeg -threads 1 -i file.ext -vaapi_device /dev/dri/renderD128 -vcodec h264_vaapi -vf format='nv12|vaapi,hwupload' output.mp4
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong>  VA-API is generally enabled by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ffmpeg">ffmpeg</a></span>'s autodetect feature during build time, as long as it detects the respective headers and libraries included in <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libva">libva</a></span>, which should be a dependency of the FFmpeg package.</div>
<p>For a quick reference, a constant quality encoding can be achieved with:
</p>
<pre>$ ffmpeg -vaapi_device /dev/dri/renderD128 -i input.mp4 -vf 'format=nv12,hwupload' -c:v hevc_vaapi -f mp4 -rc_mode 1 -qp 25 output.mp4
</pre>
<p>If using hevc_vaapi, tune -qp between 25 (visually identical) and more (28 starts to have very small visual loss). If using h264_vaapi, tune between 18 (visually identical) and more (20 starts to have very small visual loss). Also, hevc_vaapi seems to encode 50% faster than h264_vaapi.
</p>
<h4>
<span id="NVIDIA_NVENC.2FNVDEC"></span><span class="mw-headline" id="NVIDIA_NVENC/NVDEC">NVIDIA NVENC/NVDEC</span>
</h4>
<p><a href="https://en.wikipedia.org/wiki/Nvidia_NVENC" class="extiw" title="wikipedia:Nvidia NVENC">NVENC</a> and <a href="https://en.wikipedia.org/wiki/Nvidia_NVDEC" class="extiw" title="wikipedia:Nvidia NVDEC">NVDEC</a> can be used for encoding/decoding when using the proprietary <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> driver with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia-utils">nvidia-utils</a></span> package installed. Minimum supported GPUs are from <a href="https://en.wikipedia.org/wiki/GeForce_600_series" class="extiw" title="wikipedia:GeForce 600 series">600 series</a>, see <a href="../en/Hardware_video_acceleration.html#NVIDIA" title="Hardware video acceleration">Hardware video acceleration#NVIDIA</a> for details.
</p>
<p><a rel="nofollow" class="external text" href="https://web.archive.org/web/20190808223352/https://gist.github.com/Brainiarc7/8b471ff91319483cdb725f615908286e">This old gist</a> provides some techniques. NVENC is somewhat similar to <a href="../en/GPGPU.html#CUDA" class="mw-redirect" title="CUDA">CUDA</a>, thus it works even from terminal session. Depending on hardware NVENC is several times faster than Intel's VA-API encoders.
</p>
<p>To print available options execute (<code>hevc_nvenc</code> may also be available):
</p>
<pre>$ ffmpeg -help encoder=h264_nvenc
</pre>
<p>Example usage:
</p>
<pre>$ ffmpeg -i source.ext -c:v h264_nvenc -rc constqp -qp 28 output.mkv
</pre>
<h4>
<span id="Intel_QuickSync_.28QSV.29"></span><span class="mw-headline" id="Intel_QuickSync_(QSV)">Intel QuickSync (QSV)</span>
</h4>
<p><a rel="nofollow" class="external text" href="https://www.intel.com/content/www/us/en/architecture-and-technology/quick-sync-video/quick-sync-video-general.html">Intel® Quick Sync Video</a> uses media processing capabilities of an <a href="../en/Intel_graphics.html" class="mw-redirect" title="Intel">Intel</a> GPU to decode and encode fast, enabling the processor to complete other tasks and improving system responsiveness.
</p>
<p>This requires a <b>libmfx</b> runtime implementation to be installed. <b>libmfx</b> is a dispatcher library that loads an implementation at runtime based on the underlying hardware platform. 
</p>
<p>When running under Iron Lake (Gen5) to <a href="https://en.wikipedia.org/wiki/Ice_Lake_(microprocessor)" class="extiw" title="wikipedia:Ice Lake (microprocessor)">Ice Lake (Gen10)</a> GPUs, it will load <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=intel-media-sdk">intel-media-sdk</a></span> as the runtime implementation.
</p>
<p>When running under <a href="https://en.wikipedia.org/wiki/Tiger_Lake" class="extiw" title="wikipedia:Tiger Lake">Tiger Lake (Gen11)</a> and newer GPUs, <b>libmfx</b> will load <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vpl-gpu-rt">vpl-gpu-rt</a></span>. See also the <a rel="nofollow" class="external text" href="https://github.com/intel/vpl-gpu-rt#system-requirements">vpl-gpu-rt system-requirements</a>.
</p>
<p>The runtime implementation cannot be changed or chosen on systems with a single Intel GPU, and the corresponding implementation should be installed following the hardware where it will run.
</p>
<p>Failure to install said runtime will result in errors like the following: 
</p>
<pre>[AVHWDeviceContext @ 0x558283838c80] Error initializing an MFX session: -3.
Device creation failed: -1313558101.
</pre>
<p>The usage of QuickSync is describe in the <a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki/Hardware/QuickSync">FFmpeg Wiki</a>. It is recommended to use <a href="../en/Hardware_video_acceleration.html" class="mw-redirect" title="VA-API">VA-API</a> <a rel="nofollow" class="external autonumber" href="https://trac.ffmpeg.org/wiki/Hardware/VAAPI">[2]</a> with either the <i>iHD</i> or <i>i965</i> driver instead of using <i>libmfx</i> directly, see the FFmpeg Wiki section <i>Hybrid transcode</i> for encoding examples and <a href="../en/Hardware_video_acceleration.html#Configuring_VA-API" title="Hardware video acceleration">Hardware video acceleration#Configuring VA-API</a> for driver instructions.
</p>
<h4><span class="mw-headline" id="AMD_AMF">AMD AMF</span></h4>
<p>AMD added support for H264 only video encoding on Linux through AMD Video Coding Engine (GPU encoding) with the <a href="../en/AMDGPU_PRO.html" title="AMDGPU PRO">AMDGPU PRO</a> proprietary packages, and ffmpeg added support for AMF video encoding, so in order to encode using the h264_amf video encoder, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amf-amdgpu-pro/">amf-amdgpu-pro</a></span><sup><small>AUR</small></sup> is required. You may need to link to the ICD file provided by the <a href="../en/AMDGPU_PRO.html" title="AMDGPU PRO">AMDGPU PRO</a> packages as a variable or ffmpeg could use the open AMDGPU's ICD file and not be able to use this video encoder. An example of a command for encoding could be as follows:
</p>
<pre>$ VK_DRIVER_FILES=/usr/share/vulkan/icd.d/amd_pro_icd64.json ffmpeg -hwaccel auto -vaapi_device /dev/dri/renderD128 -i input.mkv -c:v h264_amf -rc 1 -b:v 8M h264_amf_8M.mp4
</pre>
<p>For a quick reference, a constant quality encoding can be achieved with:
</p>
<pre>$ VK_DRIVER_FILES=/usr/share/vulkan/icd.d/amd_pro_icd64.json ffmpeg -hwaccel auto -vaapi_device /dev/dri/renderD128 -i input.mp4 -c:v h264_amf -f mp4 -rc 0 -qp_b 22 -qp_i 22 -qp_p 22 -quality 2 output.mp4
</pre>
<p>Tune the three -qp_(b|i|p) together being 18 visually identical and 22 starting to have very small visual loss.
</p>
<h3><span class="mw-headline" id="Animated_GIF">Animated GIF</span></h3>
<p>Whilst animated GIFs are generally a poor choice of video format due to their poor image quality, relatively large file size and lack of audio support, they are still in frequent use on the web. The following command can be used to turn a video into an animated GIF:
</p>
<pre>$ ffmpeg -i input.mp4 -vf "fps=10,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse" -loop -1 output.gif
</pre>
<p>See <a rel="nofollow" class="external free" href="https://blog.pkh.me/p/21-high-quality-gif-with-ffmpeg.html">https://blog.pkh.me/p/21-high-quality-gif-with-ffmpeg.html</a> for more information on using the palette filters to generate high quality GIFs.
</p>
<h2><span class="mw-headline" id="Preset_files">Preset files</span></h2>
<p>Populate <code>~/.ffmpeg</code> with the default <a rel="nofollow" class="external text" href="https://ffmpeg.org/ffmpeg.html#Preset-files">preset files</a>: 
</p>
<pre>$ cp -iR /usr/share/ffmpeg ~/.ffmpeg
</pre>
<p>Create new and/or modify the default preset files:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.ffmpeg/libavcodec-vhq.ffpreset</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vtag=DX50
mbd=2
trellis=2
flags=+cbp+mv0
pre_dia_size=4
dia_size=4
precmp=4
cmp=4
subcmp=4
preme=2
qns=2</pre>
<h3><span class="mw-headline" id="Using_preset_files">Using preset files</span></h3>
<p>Enable the <code>-vpre</code> option after declaring the desired  <code>-vcodec</code>
</p>
<h4><span class="mw-headline" id="libavcodec-vhq.ffpreset">libavcodec-vhq.ffpreset</span></h4>
<ul>
<li>
<code>libavcodec</code> <b>=</b> Name of the vcodec/acodec</li>
<li>
<code>vhq</code> <b>=</b> Name of specific preset to be called out</li>
<li>
<code>ffpreset</code> <b>=</b> FFmpeg preset filetype suffix</li>
</ul>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Reduce_verbosity">Reduce verbosity</span></h3>
<p>Use a combination of the following options to reduce verbosity to the desired level:
</p>
<ul>
<li>
<code>-hide_banner</code>: prevents <i>ffmpeg</i> from outputting its copyright notice, build options and library versions</li>
<li>
<code>-loglevel</code>: modulates verbosity (fine-tuning options are available), e.g. <code>-loglevel warning</code>
</li>
<li>
<code>-nostats</code>: disables printing of encoding progress/statistics</li>
</ul>
<h3><span class="mw-headline" id="Output_the_duration_of_a_video">Output the duration of a video</span></h3>
<pre>$ ffprobe -select_streams v:0 -show_entries stream=duration -of default=noprint_wrappers=1:nokey=1 file.ext
</pre>
<h3><span class="mw-headline" id="Output_stream_information_as_JSON">Output stream information as JSON</span></h3>
<pre>$ ffprobe -v quiet -print_format json -show_format -show_streams file.ext
</pre>
<h3><span class="mw-headline" id="Create_a_screen_of_the_video_every_X_frames">Create a screen of the video every X frames</span></h3>
<pre>$ ffmpeg -i file.ext -an -s 319x180 -vf fps=1/<b>100</b> -qscale:v 75 %03d.jpg
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://ffmpeg.org/ffmpeg.html">FFmpeg documentation</a> - official documentation</li>
<li>
<a rel="nofollow" class="external text" href="https://trac.ffmpeg.org/wiki">FFmpeg Wiki</a> - official wiki</li>
<li>
<a rel="nofollow" class="external text" href="http://www.mplayerhq.hu/DOCS/HTML/en/menc-feat-x264.html">Encoding with the x264 codec</a> - MEncoder documentation</li>
<li>
<a rel="nofollow" class="external text" href="https://avidemux.org/admWiki/doku.php?id=tutorial:h.264">H.264 encoding guide</a> - Avidemux wiki</li>
<li>
<a rel="nofollow" class="external text" href="http://howto-pages.org/ffmpeg/">Using FFmpeg</a> - Linux how to pages</li>
<li>
<a rel="nofollow" class="external text" href="https://ffmpeg.org/general.html#Supported-File-Formats_002c-Codecs-or-Features">List</a> of supported audio and video streams</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Audio.html" title="Category:Audio">Audio</a></li>
<li><a href="../en/Category:Video.html" title="Category:Video">Video</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=FFmpeg&amp;oldid=818170">https://wiki.archlinux.org/index.php?title=FFmpeg&amp;oldid=818170</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 12 October 2024, at 06:26.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
