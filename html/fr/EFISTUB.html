<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>EFISTUB (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-EFISTUB_Français rootpage-EFISTUB_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Préparation_d'EFISTUB" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Pr%C3%A9paration_d'EFISTUB">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Préparation d'EFISTUB</div>
		</a>
		
		<ul id="toc-Préparation_d'EFISTUB-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Démarrage_de_EFISTUB" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#D%C3%A9marrage_de_EFISTUB">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Démarrage de EFISTUB</div>
		</a>
		
			<button aria-controls="toc-Démarrage_de_EFISTUB-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Démarrage de EFISTUB subsection</span>
			</button>
		
		<ul id="toc-Démarrage_de_EFISTUB-sublist" class="vector-toc-list">
			<li id="toc-Utilisation_directe_de_l'UEFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilisation_directe_de_l'UEFI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Utilisation directe de l'UEFI</div>
			</a>
			
			<ul id="toc-Utilisation_directe_de_l'UEFI-sublist" class="vector-toc-list">
				<li id="toc-efibootmgr" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#efibootmgr">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>efibootmgr</div>
			</a>
			
			<ul id="toc-efibootmgr-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-bcfg" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#bcfg">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>bcfg</div>
			</a>
			
			<ul id="toc-bcfg-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-kesboot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#kesboot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.3</span>kesboot</div>
			</a>
			
			<ul id="toc-kesboot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Utilisation_du_shell_UEFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilisation_du_shell_UEFI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Utilisation du shell UEFI</div>
			</a>
			
			<ul id="toc-Utilisation_du_shell_UEFI-sublist" class="vector-toc-list">
				<li id="toc-Utilisation_d'un_script_startup.nsh" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Utilisation_d'un_script_startup.nsh">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>Utilisation d'un script startup.nsh</div>
			</a>
			
			<ul id="toc-Utilisation_d'un_script_startup.nsh-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dépannage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#D%C3%A9pannage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Dépannage</div>
		</a>
		
			<button aria-controls="toc-Dépannage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dépannage subsection</span>
			</button>
		
		<ul id="toc-Dépannage-sublist" class="vector-toc-list">
			<li id="toc-Les_entrées_de_démarrage_sont_retirées_de_manière_aléatoire" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Les_entr%C3%A9es_de_d%C3%A9marrage_sont_retir%C3%A9es_de_mani%C3%A8re_al%C3%A9atoire">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Les entrées de démarrage sont retirées de manière aléatoire</div>
			</a>
			
			<ul id="toc-Les_entrées_de_démarrage_sont_retirées_de_manière_aléatoire-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-EFISTUB_ne_fonctionne_pas_sur_certains_systèmes_Dell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#EFISTUB_ne_fonctionne_pas_sur_certains_syst%C3%A8mes_Dell">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>EFISTUB ne fonctionne pas sur certains systèmes Dell</div>
			</a>
			
			<ul id="toc-EFISTUB_ne_fonctionne_pas_sur_certains_systèmes_Dell-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Les_modifications_des_entrées_de_démarrage_ne_sont_pas_appliquées" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Les_modifications_des_entr%C3%A9es_de_d%C3%A9marrage_ne_sont_pas_appliqu%C3%A9es">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Les modifications des entrées de démarrage ne sont pas appliquées</div>
			</a>
			
			<ul id="toc-Les_modifications_des_entrées_de_démarrage_ne_sont_pas_appliquées-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Voir_aussi" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Voir_aussi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Voir aussi</div>
		</a>
		
		<ul id="toc-Voir_aussi-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">EFISTUB (Français)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/EFISTUB" title="EFISTUB – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/EFISTUB.html" title="EFISTUB – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/EFISTUB.html" title="EFISTUB – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/EFISTUB" title="EFISTUB – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/EFISTUB.html" title="EFISTUB – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/EFISTUB.html" title="EFISTUB">EFISTUB</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=EFISTUB&amp;diff=0&amp;oldid=747663">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../fr/Arch_boot_process.html" title="Arch boot process (Français)">Arch boot process (Français)</a></li>
<li><a href="../en/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface</a></li>
</ul>
</div>
<p>Le noyau Linux prend en charge le démarrage EFISTUB qui permet aux microprogrammes <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="EFI">EFI</a> de charger le noyau comme un exécutable EFI. L'option est activée par défaut sur les noyaux Arch Linux, ou si l'on compile le noyau, on peut l'activer en définissant <code>CONFIG_EFI_STUB=y</code> dans la configuration du noyau. Consultez <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/efi-stub.html">The EFI Boot Stub</a> pour plus d'informations.
</p>
<p>Avec EFISTUB, un noyau peut être démarré directement par une carte mère UEFI ou indirectement en utilisant un <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" class="mw-redirect" title="Chargeur d'amorçage">chargeur d'amorçage</a>. L'utilisation d'un chargeur d'amorçage est recommandée si vous avez plusieurs paires noyau/initramfs et que le menu de démarrage UEFI de votre carte mère n'est pas facile à utiliser.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Pr.C3.A9paration_d.27EFISTUB"></span><span class="mw-headline" id="Préparation_d'EFISTUB">Préparation d'EFISTUB</span>
</h2>
<p>Tout d'abord, vous devez créer une <a href="../fr/EFI_system_partition.html" title="EFI system partition (Français)">partition système EFI</a> et choisir son mode de montage. Consultez <a href="../fr/EFI_system_partition.html#Monter_la_partition" title="EFI system partition (Français)">EFI system partition (Français)#Monter la partition</a> pour connaître toutes les options de montage ESP disponibles.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> 
<ul>
<li>
<a href="../fr/Pacman.html" title="Pacman (Français)">pacman</a> mettra directement à jour le noyau que le firmware EFI lira si vous montez l'ESP sur <code>/boot</code>.</li>
<li>Vous pouvez garder le noyau et initramfs hors de l'ESP si vous utilisez un gestionnaire de démarrage qui a un pilote pour le système de fichiers de la partition où ils résident, par exemple <a href="../en/REFInd.html" title="REFInd">rEFInd</a>.</li>
</ul>
</div>
<h2>
<span id="D.C3.A9marrage_de_EFISTUB"></span><span class="mw-headline" id="Démarrage_de_EFISTUB">Démarrage de EFISTUB</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong>  Il existe plusieurs gestionnaires de démarrage UEFI qui peuvent fournir des options supplémentaires ou simplifier le processus de démarrage UEFI - en particulier si vous expérimentez avec les <a href="../en/Kernel_parameters.html" title="Kernel parameters">paramètres du noyau</a> ou si vous avez plusieurs noyaux/systèmes d'exploitation. Consultez <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" title="Arch boot process (Français)">Arch boot process (Français)#Chargeur d'amorçage</a> pour plus d'informations.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Le chemin d'accès à l'initramfs des noyau Linux EFISTUB doit être relatif à la racine de la partition système EFI et utiliser des antislashes (conformément aux normes EFI). Par exemple, si l'initramfs est situé dans <code><i>esp</i>/EFI/arch/initramfs-linux.img</code>, la ligne formatée UEFI correspondante doit être <code>initrd=\EFI\arch\initramfs-linux.img</code>. Dans les exemples suivants, nous supposerons que tout est sous <code> <i>esp</i>/</code>.</div>
<h3>
<span id="Utilisation_directe_de_l.27UEFI"></span><span class="mw-headline" id="Utilisation_directe_de_l'UEFI">Utilisation directe de l'UEFI</span>
</h3>
<p>UEFI est conçu pour supprimer le besoin d'un chargeur d'amorçage intermédiaire tel que <a href="../en/GRUB.html" class="mw-redirect" title="GRUB (Français)">GRUB</a>. Si votre carte mère dispose d'une bonne implémentation de l'UEFI, il est possible d'intégrer les paramètres du noyau dans une entrée d'amorçage UEFI et de permettre à la carte mère d'amorcer directement Arch. Vous pouvez utiliser <a href="../en/Unified_Extensible_Firmware_Interface.html#efibootmgr" class="mw-redirect" title="Efibootmgr">efibootmgr</a> ou UEFI Shell v2 pour modifier les entrées de démarrage de votre carte mère.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Les implémentations UEFI obsolètes peuvent présenter des problèmes de compatibilité avec le noyau Linux. S'il existe une version plus récente de votre UEFI avec des corrections de bogues, envisagez de la flasher avec l'outil recommandé par le fabricant.</li>
<li>Certains firmwares ne transmettent pas les paramètres de ligne de commande des entrées de démarrage en NVRAM aux binaires EFI. <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=178154">[1]</a> Dans ce cas, le noyau et les paramètres peuvent être combinés dans une <a href="../en/Unified_kernel_image.html" title="Unified kernel image">image de noyau unifiée</a>, puis créer une entrée de démarrage avec le fichier <i>.efi</i> résultant.</li>
</ul>
</div>
<h4><span class="mw-headline" id="efibootmgr">efibootmgr</span></h4>
<p>Pour créer une entrée de démarrage avec <i>efibootmgr</i> qui chargera le noyau :
</p>
<pre># efibootmgr --create --disk <i>/dev/sdX</i> --part <i>Y</i> --label "Arch Linux" --loader /vmlinuz-linux --unicode 'root=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXXXXXX</i> rw initrd=\initramfs-linux.img'
</pre>
<p>ou créer une entrée de démarrage avec <i>efibootmgr</i> et hibernation sur la partition swap :
</p>
<pre># efibootmgr --create --disk <i>/dev/sdX</i> --part <i>Y</i> --label "Arch Linux" --loader /vmlinuz-linux --unicode 'root=PARTUUID=<i>XXXXXXXX- XXXX-XXXX-XXXX-XXXXXXXX</i> resume=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXXXXXX</i> rw initrd=\initramfs-linux. img'
</pre>
<p>Où <code><i>/dev/sdX</i></code> et <code><i>Y</i></code> sont le numéro du lecteur et de la partition où se trouve l'ESP. Modifiez les paramètres <code>root=</code> et <code>resume=</code> pour refléter vos partitions racine et swap Linux.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Consultez <a href="../en/Kernel_parameters.html#Parameter_list" title="Kernel parameters">les paramètres du noyau</a> pour connaître les formats de noms de périphériques pris en charge, et <a href="../fr/Persistent_block_device_naming.html" title="Persistent block device naming (Français)">le nommage persistant des périphériques de type bloc</a> pour savoir comment obtenir la valeur correspondante.</div>
<p>Si elle est omise, la première partition sur <code><i>/dev/sda</i></code> est utilisée comme ESP.
</p>
<p>Notez que l'argument <code>-u</code>/{ 'ic|--unicode}} entre guillemets est juste la liste des <a href="../en/Kernel_parameters.html" title="Kernel parameters">paramètres du noyau</a>, vous devrez donc peut-être ajouter des paramètres supplémentaires (par exemple pour la <a href="../en/Power_management/Suspend_and_hibernate.html#Pass_hibernate_location_to_initramfs" title="Power management/Suspend and hibernate">suspension sur disque</a> ou <a href="../en/Microcode.html" title="Microcode">microcode</a>).
</p>
<p>Après avoir ajouté l'entrée de démarrage, vous pouvez vérifier que l'entrée a été ajoutée correctement avec :
</p>
<pre># efibootmgr --unicode
</pre>
<p>Pour définir l'ordre de démarrage :
</p>
<pre># efibootmgr --bootorder <i>XXXX</i>, <i>XXXX</i> --unicode
</pre>
<p>Où <i>XXXX</i> est le numéro qui apparaît dans la sortie de la commande <i>efibootmgr</i> pour chaque entrée.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> 
<ul>
<li>
<a rel="nofollow" class="external free" href="https://github.com/de-arl/auto-UEFI-entry">https://github.com/de-arl/auto-UEFI-entry</a> est un outil permettant de créer les commandes</li>
<li>Il est pratique d'enregistrer la commande de création de l'entrée de démarrage dans un script shell, ce qui permet de la modifier plus facilement, par exemple lors de la modification des paramètres du noyau. En faisant cela, pensez à automatiser la suppression des anciennes entrées de démarrage, comme <i>efibootmgr</i> <a rel="nofollow" class="external text" href="https://github.com/rhboot/efibootmgr/issues/49">ne prend pas en charge la modification des entrées existantes</a> actuellement.</li>
<li>Le post du forum international intitulé <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1090040#p1090040">The linux kernel with build in bootloader ?</a> peut également être intéressant.</li>
</ul>
</div>
<h4><span class="mw-headline" id="bcfg">bcfg</span></h4>
<p>Certaines implémentations UEFI rendent difficile la modification de la NVRAM en utilisant <i>efibootmgr</i>. Si <i>efibootmgr</i> ne parvient pas à créer une entrée, vous pouvez utiliser la commande <a href="../en/Unified_Extensible_Firmware_Interface.html#bcfg" class="mw-redirect" title="UEFI">bcfg</a> dans UEFI Shell v2 (c'est-à-dire à partir de l'iso live <a rel="nofollow" class="external text" href="https://archlinux.org/download/">Arch Linux</a>).
</p>
<p>Tout d'abord, trouvez le numéro du périphérique sur lequel votre <a href="../fr/EFI_system_partition.html" title="EFI system partition (Français)">ESP</a> réside :
</p>
<pre>Shell&gt; map
</pre>
<p>Dans cet exemple, <code>1</code> est utilisé comme numéro de périphérique. Pour lister le contenu de l'<a href="../fr/EFI_system_partition.html" title="EFI system partition (Français)">ESP</a> :
</p>
<pre>Shell&gt; ls FS1 :
</pre>
<p>Pour afficher les entrées de démarrage actuelles :
</p>
<pre>Shell&gt; bcfg boot dump
</pre>
<p>Pour ajouter une entrée pour votre noyau, utilisez :
</p>
<pre>Shell&gt; bcfg boot add <i>N</i> FS1:\vmlinuz-linux "Arch Linux"
</pre>
<p>Où <code><i>N</i></code> est l'emplacement où l'entrée sera ajoutée dans le menu de démarrage. 0 est le premier élément de menu. Les éléments de menu déjà existants seront déplacés dans le menu sans être supprimés.
</p>
<p>Ajoutez les options du noyau nécessaires en créant un fichier sur votre ESP :
</p>
<pre>Shell&gt; edit FS1:\options.txt
</pre>
<p>Dans ce fichier, ajoutez la ligne de démarrage. Par exemple :
</p>
<pre>root=/dev/sda2 ro initrd=\initramfs-linux.img
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Ajoutez des espaces supplémentaires au début de la ligne dans le fichier. Il y a une <a href="https://en.wikipedia.org/wiki/fr:Indicateur_d%27ordre_des_octets" class="extiw" title="wikipedia:fr:Indicateur d'ordre des octets">byte order mark</a> au début de la ligne qui écrasera tout caractère à côté, ce qui provoquera une erreur lors du démarrage.</div>
<p>Appuyez sur <code>F2</code> pour enregistrer, puis sur <code>F3</code> pour quitter.
</p>
<p>Ajoutez ces options à votre entrée précédente :
</p>
<pre>Shell&gt; bcfg boot -opt <i>N</i> FS1:\options.txt
</pre>
<p>Répétez ce processus pour toute entrée supplémentaire.
</p>
<p>Pour supprimer un élément précédemment ajouté, procédez comme suit
</p>
<pre>Shell&gt; bcfg boot rm <i>N</i>
</pre>
<h4><span class="mw-headline" id="kesboot">kesboot</span></h4>
<p>Vous pouvez également simplifier et automatiser le travail avec EFISTUB en utilisant un script du paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/kesboot-git/">kesboot-git</a></span><sup><small>AUR</small></sup>. Il contient également un <a href="../fr/Pacman.html#Hooks" title="Pacman (Français)">hook de pacman</a> qui peut ajouter et supprimer des variables EFI pendant les actions avec les paquets.
</p>
<p>Tout d'abord, installez le paquet, puis configurez le fichier <code>/etc/kesboot.conf</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/kesboot.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CMDLINES=('linux' 'acpi=on'
          linux-zen' 'iommu=off')</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Si vous utilisez un hook (les variables <code>INSTALL_HOOK</code> et <code>REMOVE_HOOK</code>), alors il écrasera le tableau <code>CMDLINES</code> à chaque exécution (en préservant le contenu de tous les enregistrements).</div>
<p>Ensuite, exécutez
</p>
<pre># kesboot -u
</pre>
<p>Le paquet contient également un programme pour la configuration initiale du démarrage EFI. Après avoir <a href="../fr/EFI_system_partition.html#Monter_la_partition" title="EFI system partition (Français)">monté l'ESP</a>, exécutez
</p>
<pre># /usr/lib/setup-efi-boot
</pre>
<h3><span class="mw-headline" id="Utilisation_du_shell_UEFI">Utilisation du shell UEFI</span></h3>
<p>Si vous ne voulez pas créer une entrée de démarrage permanente, il est possible de lancer le noyau depuis UEFI Shell puisqu'il s'agit d'une application UEFI normale :
</p>
<pre>&gt; FS0 :
&gt; \vmlinuz-linux root=PARTUUID=3518bb68-d01e-45c9-b973-0b5d918aae96 rw initrd=\initramfs-linux.img
</pre>
<p>Dans ce cas, les paramètres du noyau sont passés comme des paramètres normaux au fichier noyau EFISTUB lancé.
</p>
<p>Pour éviter d'avoir à se souvenir de tous les paramètres du noyau à chaque fois, vous pouvez enregistrer la commande exécutable dans un script shell tel que <code>archlinux.nsh</code> sur votre partition système UEFI, puis l'exécuter avec :
</p>
<pre>&gt; FS0 :
&gt; archlinux
</pre>
<h4>
<span id="Utilisation_d.27un_script_startup.nsh"></span><span class="mw-headline" id="Utilisation_d'un_script_startup.nsh">Utilisation d'un script startup.nsh</span>
</h4>
<p>Certaines implémentations UEFI ne conservent pas les variables EFI entre les démarrages à froid (par exemple <a href="../en/VirtualBox.html" class="mw-redirect" title="VirtualBox (Français)">VirtualBox</a> avant la version 6.1) et tout ce qui est défini par l'interface firmware UEFI est perdu à la mise hors tension.
</p>
<p>La <a rel="nofollow" class="external text" href="https://www.uefi.org/sites/default/files/resources/UEFI_Shell_Spec_2_0.pdf">Specification UEFI Shell 2.0</a> établit qu'un script appelé <code>startup.nsh</code> à la racine de la partition ESP sera toujours interprété et peut contenir des instructions arbitraires ; parmi celles-ci vous pouvez définir une ligne de chargement pour l'amorçage. Assurez-vous de monter la partition ESP sur <code>/boot</code> et de créer un script <code>startup.nsh</code> qui contient une ligne de chargement du noyau. Par exemple :
</p>
<pre>vmlinuz-linux rw root=/dev/sd<i>X</i> [rootfs=<i>myfs</i>] [rootflags=<i>myrootflags</i>] \
 [kernel.flag=<i>foo</i>] [<i>mymodule</i>.flag=<i>bar</i>] \
 [initrd=\intel-ucode.img] initrd=\initramfs-linux.img
</pre>
<p>Cette méthode fonctionnera avec presque toutes les versions du firmware UEFI que vous pouvez rencontrer dans du matériel réel, vous pouvez l'utiliser en dernier recours. <b>Le script doit être une seule longue ligne</b>. Les sections entre parenthèses sont facultatives et données uniquement à titre indicatif. Les sauts de ligne de style Shell ne sont donnés que pour une clarification visuelle. Les systèmes de fichiers FAT utilisent la barre oblique inverse comme séparateur de chemin et dans ce cas, la barre oblique inverse déclare que l'initramfs est situé à la racine de la partition ESP. Seul le microcode Intel est chargé dans la ligne des paramètres d'amorçage ; le microcode AMD est lu sur le disque plus tard pendant le processus de démarrage ; ceci est fait automatiquement par le noyau.
</p>
<h2>
<span id="D.C3.A9pannage"></span><span class="mw-headline" id="Dépannage">Dépannage</span>
</h2>
<h3>
<span id="Les_entr.C3.A9es_de_d.C3.A9marrage_sont_retir.C3.A9es_de_mani.C3.A8re_al.C3.A9atoire"></span><span class="mw-headline" id="Les_entrées_de_démarrage_sont_retirées_de_manière_aléatoire">Les entrées de démarrage sont retirées de manière aléatoire</span>
</h3>
<p>Certaines cartes mères peuvent supprimer les entrées de démarrage en raison d'un manque d'espace libre dans la NVRAM au lieu de donner une erreur à la création. Pour éviter que cela ne se produise, réduisez la quantité d'entrées de démarrage ajoutées par <i>efibootmgr</i> en minimisant votre processus de création d'entrées, ainsi que la quantité d'entrées de démarrage automatique du lecteur par le <a href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface#CSM_booting" class="extiw" title="wikipedia:Unified Extensible Firmware Interface">Compatibility Support Module (CSM)</a> en le désactivant dans vos paramètres UEFI. Consultez <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1608838#p1608838">[2]</a>.
</p>
<h3>
<span id="EFISTUB_ne_fonctionne_pas_sur_certains_syst.C3.A8mes_Dell"></span><span class="mw-headline" id="EFISTUB_ne_fonctionne_pas_sur_certains_systèmes_Dell">EFISTUB ne fonctionne pas sur certains systèmes Dell</span>
</h3>
<p>Plusieurs générations de microprogrammes Dell transmettent mal les arguments au chargeur d'amorçage, ce qui fait que EFISTUB analyse une ligne de commande nulle, ce qui entraîne normalement un système non amorçable (consultez la discussion complète dans <a rel="nofollow" class="external text" href="https://lore.kernel.org/linux-efi/20200907170021.GA2284449@rani.riverdale.lan/">linux-efi</a>).
</p>
<p>Une solution de contournement a été trouvée depuis Linux 5.10 pour corriger ce comportement (consultez ce <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=4a568ce29d3f48df95919f82a80e4b9be7ea0dc1">commit </a>). Pour Linux &lt; 5.10, vous pouvez utiliser un empaqueteur efi comme <a rel="nofollow" class="external text" href="https://github.com/RobertCsordas/arch-efiboot">arch-efiboot</a>, ou un autre chargeur d'amorçage.
</p>
<h3>
<span id="Les_modifications_des_entr.C3.A9es_de_d.C3.A9marrage_ne_sont_pas_appliqu.C3.A9es"></span><span class="mw-headline" id="Les_modifications_des_entrées_de_démarrage_ne_sont_pas_appliquées">Les modifications des entrées de démarrage ne sont pas appliquées</span>
</h3>
<p>Certaines cartes mères, telles que les cartes Asus de l'ère Haswell (<a rel="nofollow" class="external text" href="https://forums.archlinux.fr/viewtopic.php?t=19618">comme rencontré sur le forum français</a>), ne remarqueront pas les modifications des entrées de démarrage à moins que le système ne soit démarré avec une autre entrée de démarrage préexistante avant de démarrer l'entrée EFISTUB mise à jour.
</p>
<h2><span class="mw-headline" id="Voir_aussi">Voir aussi</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/efi-stub.html">Documentation du noyau Linux sur EFISTUB</a></li>
<li><a rel="nofollow" class="external text" href="https://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=commitdiff;h=291f36325f9f252bd76ef5f603995f37e453fc60;hp=55839d515495e766605d7aaabd9c2758370a8d27">Commit dans Git pour EFISTUB dans le noyau Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://www.rodsbooks.com/efi-bootloaders/efistub.html">Page de Rod Smith sur EFISTUB</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fr/Category:Boot_loaders.html" title="Category:Boot loaders (Français)">Boot loaders (Français)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=EFISTUB_(Fran%C3%A7ais)&amp;oldid=802372">https://wiki.archlinux.org/index.php?title=EFISTUB_(Français)&amp;oldid=802372</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 5 March 2024, at 22:27.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
