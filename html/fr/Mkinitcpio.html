<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>mkinitcpio (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Mkinitcpio_Français rootpage-Mkinitcpio_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Création_et_activation_d'images" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Cr%C3%A9ation_et_activation_d'images">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Création et activation d'images</div>
		</a>
		
			<button aria-controls="toc-Création_et_activation_d'images-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Création et activation d'images subsection</span>
			</button>
		
		<ul id="toc-Création_et_activation_d'images-sublist" class="vector-toc-list">
			<li id="toc-Génération_automatique" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#G%C3%A9n%C3%A9ration_automatique">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Génération automatique</div>
			</a>
			
			<ul id="toc-Génération_automatique-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Génération_manuelle" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#G%C3%A9n%C3%A9ration_manuelle">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Génération manuelle</div>
			</a>
			
			<ul id="toc-Génération_manuelle-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Génération_personnalisée" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#G%C3%A9n%C3%A9ration_personnalis%C3%A9e">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Génération personnalisée</div>
			</a>
			
			<ul id="toc-Génération_personnalisée-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Images_de_noyau_unifiées" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Images_de_noyau_unifi%C3%A9es">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Images de noyau unifiées</div>
			</a>
			
			<ul id="toc-Images_de_noyau_unifiées-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-MODULES" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#MODULES">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>MODULES</div>
			</a>
			
			<ul id="toc-MODULES-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-BINARIES_et_FILES" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#BINARIES_et_FILES">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>BINARIES et FILES</div>
			</a>
			
			<ul id="toc-BINARIES_et_FILES-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-HOOKS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#HOOKS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>HOOKS</div>
			</a>
			
			<ul id="toc-HOOKS-sublist" class="vector-toc-list">
				<li id="toc-Hooks_de_construction" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Hooks_de_construction">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.1</span>Hooks de construction</div>
			</a>
			
			<ul id="toc-Hooks_de_construction-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hooks_d'exécution" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Hooks_d'ex%C3%A9cution">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.2</span>Hooks d'exécution</div>
			</a>
			
			<ul id="toc-Hooks_d'exécution-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hooks_communs" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Hooks_communs">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.3</span>Hooks communs</div>
			</a>
			
			<ul id="toc-Hooks_communs-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-COMPRESSION" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#COMPRESSION">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>COMPRESSION</div>
			</a>
			
			<ul id="toc-COMPRESSION-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-COMPRESSION_OPTIONS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#COMPRESSION_OPTIONS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>COMPRESSION_OPTIONS</div>
			</a>
			
			<ul id="toc-COMPRESSION_OPTIONS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Personnalisation_de_l'exécution" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Personnalisation_de_l'ex%C3%A9cution">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Personnalisation de l'exécution</div>
		</a>
		
			<button aria-controls="toc-Personnalisation_de_l'exécution-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Personnalisation de l'exécution subsection</span>
			</button>
		
		<ul id="toc-Personnalisation_de_l'exécution-sublist" class="vector-toc-list">
			<li id="toc-init_avec_le_«hook»_base" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#init_avec_le_%C2%ABhook%C2%BB_base">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>init avec le «hook» base</div>
			</a>
			
			<ul id="toc-init_avec_le_«hook»_base-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utiliser_RAID" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utiliser_RAID">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Utiliser RAID</div>
			</a>
			
			<ul id="toc-Utiliser_RAID-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utiliser_net" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utiliser_net">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Utiliser net</div>
			</a>
			
			<ul id="toc-Utiliser_net-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utiliser_LVM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utiliser_LVM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Utiliser LVM</div>
			</a>
			
			<ul id="toc-Utiliser_LVM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utiliser_une_partition_système_chiffrée" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utiliser_une_partition_syst%C3%A8me_chiffr%C3%A9e">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Utiliser une partition système chiffrée</div>
			</a>
			
			<ul id="toc-Utiliser_une_partition_système_chiffrée-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-/usr_sur_une_partition_séparée" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#/usr_sur_une_partition_s%C3%A9par%C3%A9e">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>/usr sur une partition séparée</div>
			</a>
			
			<ul id="toc-/usr_sur_une_partition_séparée-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dépannage" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#D%C3%A9pannage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Dépannage</div>
		</a>
		
			<button aria-controls="toc-Dépannage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dépannage subsection</span>
			</button>
		
		<ul id="toc-Dépannage-sublist" class="vector-toc-list">
			<li id="toc-Extraction_de_l'image" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Extraction_de_l'image">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Extraction de l'image</div>
			</a>
			
			<ul id="toc-Extraction_de_l'image-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Recompression_d'une_image_extraite_modifiée" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Recompression_d'une_image_extraite_modifi%C3%A9e">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Recompression d'une image extraite modifiée</div>
			</a>
			
			<ul id="toc-Recompression_d'une_image_extraite_modifiée-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-&quot;/dev_must_be_mounted&quot;_alors_qu'il_l'est_déjà" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#&quot;/dev_must_be_mounted&quot;_alors_qu'il_l'est_d%C3%A9j%C3%A0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>"/dev must be mounted" alors qu'il l'est déjà</div>
			</a>
			
			<ul id="toc-&quot;/dev_must_be_mounted&quot;_alors_qu'il_l'est_déjà-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Possibly_missing_firmware_for_module_XXXX" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Possibly_missing_firmware_for_module_XXXX">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Possibly missing firmware for module XXXX</div>
			</a>
			
			<ul id="toc-Possibly_missing_firmware_for_module_XXXX-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-No_PS/2_controller_found" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_PS/2_controller_found">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>No PS/2 controller found</div>
			</a>
			
			<ul id="toc-No_PS/2_controller_found-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Procédures_de_secours_standard" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Proc%C3%A9dures_de_secours_standard">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>Procédures de secours standard</div>
			</a>
			
			<ul id="toc-Procédures_de_secours_standard-sublist" class="vector-toc-list">
				<li id="toc-Le_démarrage_réussit_sur_une_machine_et_échoue_sur_une_autre" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Le_d%C3%A9marrage_r%C3%A9ussit_sur_une_machine_et_%C3%A9choue_sur_une_autre">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6.1</span>Le démarrage réussit sur une machine et échoue sur une autre</div>
			</a>
			
			<ul id="toc-Le_démarrage_réussit_sur_une_machine_et_échoue_sur_une_autre-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Voir_aussi" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Voir_aussi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Voir aussi</div>
		</a>
		
		<ul id="toc-Voir_aussi-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">mkinitcpio (Français)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Mkinitcpio" title="Mkinitcpio – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Mkinitcpio.html" title="Mkinitcpio – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Mkinitcpio" title="Mkinitcpio – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Mkinitcpio.html" title="Mkinitcpio – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Mkinitcpio.html" title="Mkinitcpio – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Mkinitcpio" title="Mkinitcpio – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Mkinitcpio.html" title="Mkinitcpio">Mkinitcpio</a>. Date de la dernière traduction: 2022-01-27. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Mkinitcpio&amp;diff=0&amp;oldid=712782">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../fr/Systemd.html" title="Systemd (Français)">systemd (Français)</a></li>
<li><a href="../en/Kernel_module.html" class="mw-redirect" title="Kernel modules">Kernel modules</a></li>
<li><a href="../en/Mkinitcpio/Minimal_initramfs.html" title="Mkinitcpio/Minimal initramfs">mkinitcpio/Minimal initramfs</a></li>
<li><a href="../fr/General_troubleshooting.html#Probl%C3%A8mes_de_d%C3%A9marrage" class="mw-redirect" title="Problèmes de démarrage">Problèmes de démarrage</a></li>
<li><a href="../en/Dracut.html" title="Dracut">dracut</a></li>
<li><a href="../en/Booster.html" title="Booster">Booster</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/mkinitcpio/mkinitcpio">mkinitcpio</a> est un script Bash utilisé pour créer un environnement <a href="https://en.wikipedia.org/wiki/fr:Initrd" class="extiw" title="wikipedia:fr:Initrd">«ramdisk» initial</a>. Extrait de la page de manuel <span class="plainlinks archwiki-template-man" title="$ man 8 mkinitcpio"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkinitcpio.8">mkinitcpio(8)</a></span> :
</p>
<dl><dd>Le «ramdisk» initial est par essence un très petit environnement (early userspace) qui charge divers modules du noyau et configure les choses nécessaires avant de céder le contrôle à <code>init</code>. Cela permet d'avoir, par exemple, des systèmes de fichiers racine chiffrés et des systèmes de fichiers racine sur une matrice RAID logicielle. <i>mkinitcpio</i> permet une extension facile avec des «hooks» personnalisés, a une autodétection à l'exécution, et beaucoup d'autres fonctionnalités.</dd></dl>
<p>Traditionnellement, le noyau était responsable de toutes les tâches de détection et d'initialisation du matériel au début du <a href="../fr/Arch_boot_process.html" class="mw-redirect" title="Processus de démarrage">processus de démarrage</a> avant de monter le système de fichiers racine et de passer le contrôle à <code>init</code>. Cependant, au fur et à mesure des progrès technologiques, ces tâches sont devenues de plus en plus complexes. 
</p>
<p>De nos jours, le système de fichiers racine peut se trouver sur un large éventail de matériel, des disques SCSI aux disques SATA en passant par les disques USB, contrôlés par une variété de contrôleurs de disques de différents fabricants. En outre, le système de fichiers racine peut être chiffré ou compressé, dans une matrice RAID logicielle ou un groupe de volumes logiques. La façon la plus simple de gérer cette complexité est de passer la gestion dans l'espace utilisateur : un «ramdisk» initial. Consultez également : <a rel="nofollow" class="external text" href="https://web.archive.org/web/20150430223035/http://archlinux.me/brain0/2010/02/13/early-userspace-in-arch-linux/">/dev/brain0 » Blog Archive » L'espace utilisateur initial dans Arch Linux</a>.
</p>
<p><i>mkinitcpio</i> a été développé par les développeurs d'Arch Linux et à partir de contributions de la communauté. Consultez le <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/mkinitcpio/mkinitcpio">dépôt Git public</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">Installez</a> le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mkinitcpio">mkinitcpio</a></span>, qui est une dépendance du paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>, donc la plupart des utilisateurs l'auront déjà installé.
</p>
<p>Les utilisateurs avancés peuvent souhaiter installer la dernière version de développement de <i>mkinitcpio</i> depuis Git avec le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mkinitcpio-git/">mkinitcpio-git</a></span><sup><small>AUR</small></sup>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Il est <b>fortement</b> recommandé de suivre la <a rel="nofollow" class="external text" href="https://lists.archlinux.org/mailman3/lists/arch-projects.lists.archlinux.org/">mailing list arch-projects</a> si vous utilisez <i>mkinitcpio</i> depuis Git!</div>
<h2>
<span id="Cr.C3.A9ation_et_activation_d.27images"></span><span class="mw-headline" id="Création_et_activation_d'images">Création et activation d'images</span>
</h2>
<h3>
<span id="G.C3.A9n.C3.A9ration_automatique"></span><span class="mw-headline" id="Génération_automatique">Génération automatique</span>
</h3>
<p>Chaque fois qu'un noyau est installé ou mis à jour, un <a href="../fr/Pacman.html#Hooks" title="Pacman (Français)">«hook» de pacman</a> génère automatiquement un fichier <i>.preset</i> enregistré dans <code>/etc/mkinitcpio.d/</code>. Par exemple <code>linux.preset</code> pour le paquet stable officiel <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> du noyau. Un preset est simplement une liste d'informations requises pour créer des images ramdisk initiales, au lieu de spécifier manuellement les différents paramètres et l'emplacement des fichiers de sortie.
Par défaut, il contient les instructions pour créer deux images :
</p>
<ol>
<li>l'image ramdisk <i>par défaut</i> créée suivant les directives spécifiées dans la <a href="#Configuration">#Configuration</a> de mkinitcpio, et</li>
<li>l'image ramdisk <i>fallback</i>, identique à la précédente sauf que le hook <i>autodetect</i> est ignoré pendant la création, incluant ainsi une gamme complète de modules qui prends en charge la plupart des systèmes.</li>
</ol>
<p>Après avoir créé le preset, le hook pacman appelle le script <i>mkinitcpio</i> qui génère les deux images, en utilisant les informations fournies dans le preset.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Les fichiers <i>preset</i> sont utilisés pour régénérer automatiquement les initramfs après une mise à jour du noyau ; soyez prudent lorsque vous les modifiez.</div>
<h3>
<span id="G.C3.A9n.C3.A9ration_manuelle"></span><span class="mw-headline" id="Génération_manuelle">Génération manuelle</span>
</h3>
<p>Pour exécuter le script manuellement, référez-vous à la page de manuel <span class="plainlinks archwiki-template-man" title="$ man 8 mkinitcpio"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkinitcpio.8">mkinitcpio(8)</a></span> pour les instructions. En particulier, pour (re-)générer le préréglage fourni par un paquet du noyau, utilisez l'option <code>-p</code>/<code>--preset</code> suivie du préréglage à utiliser. Par exemple, pour le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>, utilisez la commande :
</p>
<pre># mkinitcpio -p linux
</pre>
<p>Pour (re)générer tous les préréglages existants, utilisez le paramètre <code>-P</code>/<code>--allpresets</code>. Ceci est typiquement utilisé pour régénérer toutes les images initramfs après un changement de la <a href="#Configuration">#Configuration</a> globale :
</p>
<pre># mkinitcpio -P
</pre>
<p>Les utilisateurs peuvent créer un nombre arbitraire d'images initramfs avec une variété de configurations différentes. L'image désirée doit être spécifiée dans le fichier de configuration du <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" class="mw-redirect" title="Chargeur d'amorçage">chargeur d'amorçage</a> respectif.
</p>
<h3>
<span id="G.C3.A9n.C3.A9ration_personnalis.C3.A9e"></span><span class="mw-headline" id="Génération_personnalisée">Génération personnalisée</span>
</h3>
<p>Les utilisateurs peuvent générer une image en utilisant un fichier de configuration alternatif. Par exemple, ce qui suit générera une image initiale de disque RAM selon les instructions de <code>/etc/mkinitcpio-custom.conf</code> et l'enregistrera sous <code>/boot/initramfs-custom.img</code>.
</p>
<pre># mkinitcpio --config /etc/mkinitcpio-custom.conf --generate /boot/initramfs-custom.img
</pre>
<p>Si vous générez une image pour un noyau autre que celui en cours d'exécution, ajoutez la version du noyau à la ligne de commande. Les versions des noyaux installés peuvent être trouvées dans <code>/usr/lib/modules/</code>, la syntaxe est cohérente avec la sortie de la commande <code>uname -r</code> pour chaque noyau.
</p>
<pre># mkinitcpio --generate /boot/initramfs-custom2.img --kernel 5.7.12-arch1-1
</pre>
<h3>
<span id="Images_de_noyau_unifi.C3.A9es"></span><span class="mw-headline" id="Images_de_noyau_unifiées">Images de noyau unifiées</span>
</h3>
<p>Depuis la version 31, <i>mkinitcpio</i> peut également créer des <a href="../en/Unified_kernel_image.html" title="Unified kernel image">images de noyau unifiées</a>.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Le principal fichier de configuration de <i>mkinitcpio</i> est <code>/etc/mkinitcpio.conf</code>. De plus, les définitions des «presets» sont fournies par les paquets du noyau dans le répertoire <code>/etc/mkinitcpio.d</code> (par exemple <code>/etc/mkinitcpio.d/linux.preset</code>).
</p>
<p>Les utilisateurs peuvent modifier six variables dans le fichier de configuration, consultez <span class="plainlinks archwiki-template-man" title="$ man 5 mkinitcpio.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkinitcpio.conf.5">mkinitcpio.conf(5)</a></span> pour plus de détails :
</p>
<dl>
<dt><code>MODULES</code></dt>
<dd>Modules du noyau à charger avant l'exécution des «hooks» de démarrage.</dd>
<dt><code>BINARIES</code></dt>
<dd>Binaires supplémentaires à inclure dans l'image initramfs.</dd>
<dt><code>FILES</code></dt>
<dd>Fichiers supplémentaires à inclure dans l'image initramfs.</dd>
<dt><code>HOOKS</code></dt>
<dd>Les «hooks» (crochets) sont des scripts qui s'exécutent dans le ramdisk initial.</dd>
<dt><code>COMPRESSION</code></dt>
<dd>Utilisé pour compresser l'image initramfs.</dd>
<dt><code>COMPRESSION_OPTIONS</code></dt>
<dd>Arguments supplémentaires à passer au programme ; <code>COMPRESSION</code>. L'utilisation de ce paramètre est fortement déconseillée. <i>mkinitcpio</i> gérera les exigences particulières des compresseurs (par exemple, passer <code>--check=crc32</code> à xz) et une mauvaise utilisation peut facilement conduire à un système non amorçable.</dd>
</dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Certains «hooks» qui peuvent être nécessaires à votre système comme <b>lvm2</b>, <b>mdadm_udev</b>, et <b>encrypt</b> ne sont <b>PAS</b> activés par défaut. Lisez attentivement la section <a href="#HOOKS">#HOOKS</a> pour obtenir des instructions.</li>
<li>Les utilisateurs avec plusieurs contrôleurs de disques matériels qui utilisent les mêmes noms de noeuds mais des modules de noyau différents (par exemple deux contrôleurs SCSI/SATA ou deux IDE) devraient utiliser le <a href="../fr/Persistent_block_device_naming.html" class="mw-redirect" title="Nommage persistant des périphériques de type bloc">nommage persistant des périphériques de type bloc</a> pour s'assurer que les bons périphériques sont montés. Sinon, l'emplacement du périphérique racine peut changer entre les démarrages, ce qui entraîne des paniques du noyau.</li>
</ul>
</div>
<h3><span class="mw-headline" id="MODULES">MODULES</span></h3>
<p>Le tableau <code>MODULES</code> est utilisé pour spécifier les modules à charger avant toute autre chose.
</p>
<p>Les modules suffixés par un <code>?</code> ne lanceront pas d'erreur s'ils ne sont pas trouvés. Cela peut être utile pour les noyaux personnalisés qui compilent dans des modules qui sont listés explicitement dans un «hook» ou un fichier de configuration.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Si vous utilisez <b>reiser4</b>, il <i>doit</i> être ajouté au tableau <code>MODULES</code>.</li>
<li>Si vous utilisez le «hook» <b>encrypt</b> ou <b>sd-encrypt</b>, les modules clavier et/ou les systèmes de fichiers nécessaires pour déverrouiller le périphérique LUKS pendant le démarrage du système doivent être ajoutés au tableau <code>MODULES</code> lorsque le système cible diffère de celui utilisé pour exécuter <i>mkinitcpio</i>.  Par exemple, si vous utilisez un fichier clé sur un système de fichiers ext2 mais qu'aucun système de fichiers ext2 n'est monté au moment où <i>mkinitcpio</i> s'exécute, ajoutez <code>ext2</code>. Consultez l'article anglais <a href="../en/Dm-crypt/System_configuration.html#cryptkey" title="Dm-crypt/System configuration">dm-crypt/System configuration#cryptkey</a> pour plus de détails.</li>
<li>Si vous utilisez un clavier via un hub USB 3 et souhaitez l'utiliser pour déverrouiller un périphérique LUKS, ajoutez <code>usbhid xhci_hcd</code>.</li>
<li>Si vous utilisez des écrans connectés à une station d'accueil, vous devrez peut-être ajouter un module pour votre carte graphique afin de rendre la sortie initrd visible (par exemple, <code>i915</code> pour la plupart des cartes Intel).</li>
</ul>
</div>
<h3><span class="mw-headline" id="BINARIES_et_FILES">BINARIES et FILES</span></h3>
<p>Ces options permettent aux utilisateurs d'ajouter des fichiers à l'image. <code>BINARIES</code> et <code>FILES</code> sont ajoutées avant l'exécution des «hooks» et peuvent être utilisées pour remplacer les fichiers utilisés ou fournis par un «hook». Les <code>BINARIES</code> sont localisées automatiquement dans un <code>PATH</code> standard et sont analysées en fonction des dépendances, ce qui signifie que toute bibliothèque requise sera également ajoutée. Les <code>FILES</code> sont ajoutés <i>tels quels</i>. Par exemple :
</p>
<pre>FILES=(/etc/modprobe.d/modprobe.conf)
</pre>
<pre>BINARIES=(kexec)
</pre>
<p>Notez que comme <code>BINARIES</code> et <code>FILES</code> sont des tableaux <a href="../en/Bash.html" title="Bash">Bash</a>, plusieurs entrées peuvent être ajoutées en étant délimitées par des espaces.
</p>
<h3><span class="mw-headline" id="HOOKS">HOOKS</span></h3>
<p>Le tableau <code>HOOKS</code> est le paramètre le plus important du fichier. Les «hooks» sont de petits scripts qui décrivent ce qui sera ajouté à l'image. Pour certains d'entre eux, ils contiennent également un composant d'exécution qui fournit un comportement supplémentaire, comme le démarrage d'un daemon ou l'assemblage d'un périphérique à blocs empilés. Les «hooks» sont désignés par leur nom, et exécutés dans l'ordre où ils existent dans le tableau <code>HOOKS</code> du fichier de configuration.
</p>
<p>Le paramètre par défaut <code>HOOKS</code> devrait être suffisant pour la plupart des configurations simples, à un seul disque. Pour les périphériques racine qui sont empilés ou multi-blocs tels que <a href="../en/LVM.html" title="LVM">LVM</a>, <a href="../en/RAID.html" title="RAID">RAID</a>, ou <a href="../en/Dm-crypt.html" title="Dm-crypt">dm-crypt</a>, consultez les pages wiki respectives pour la configuration nécessaire.
</p>
<h4><span class="mw-headline" id="Hooks_de_construction">Hooks de construction</span></h4>
<p>Les «hooks» de construction se trouvent dans <code>/usr/lib/initcpio/install/</code>, les «hooks» de construction personnalisés peuvent être placés dans <code>/etc/initcpio/install/</code>. Ces fichiers sont récupérés par le shell bash pendant l'exécution de <i>mkinitcpio</i> et doivent contenir deux fonctions : <code>build</code> et <code>help</code>. La fonction <code>build</code> décrit les modules, fichiers et binaires qui seront ajoutés à l'image. Une API, documentée par <span class="plainlinks archwiki-template-man" title="$ man 8 mkinitcpio"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkinitcpio.8">mkinitcpio(8)</a></span>, sert à faciliter l'ajout de ces éléments. La fonction <code>help</code> fournit une description de ce que le «hook» accomplit.
</p>
<p>Pour une liste de tous les «hooks» disponibles :
</p>
<pre>$ mkinitcpio -L
</pre>
<p>Utilisez l'option <code>-H</code>/<code>--hookhelp</code> de <i>mkinitcpio</i> pour afficher l'aide d'un «hook» spécifique, par exemple :
</p>
<pre>$ mkinitcpio -H udev
</pre>
<h4>
<span id="Hooks_d.27ex.C3.A9cution"></span><span class="mw-headline" id="Hooks_d'exécution">Hooks d'exécution</span>
</h4>
<p>Les «hooks» d'exécution se trouvent dans <code>/usr/lib/initcpio/hooks/</code>, les «hooks» d'exécution personnalisés peuvent être placés dans <code>/etc/initcpio/hooks/</code>. Pour tout «hook» d'exécution, il devrait toujours y avoir un «hook» de construction du même nom, qui appelle <code>add_runscript</code> pour ajouter le «hook» d'exécution à l'image. Ces fichiers sont utilisés par le shell busybox ash au début de l'espace utilisateur. À l'exception des «hooks» de nettoyage, ils seront toujours exécutés dans l'ordre indiqué dans le paramètre <code>HOOKS</code>. Les «hooks» d'exécution peuvent contenir plusieurs fonctions :
</p>
<p><code>run_earlyhook</code> : Les fonctions avec ce nom seront exécutées une fois que les systèmes de fichiers de l'API auront été montés et que la ligne de commande du noyau aura été analysée. C'est généralement à partir de là que sont lancés les daemons supplémentaires, tels que udev, qui sont nécessaires au processus de démarrage rapide.
</p>
<p><code>run_hook</code> : Les fonctions avec ce nom sont exécutées peu après les «hooks» précoces. Il s'agit du point d'accrochage le plus courant, et des opérations telles que l'assemblage de périphériques à blocs empilés devraient avoir lieu ici.
</p>
<p><code>run_latehook</code> : Les fonctions avec ce nom sont exécutées après le montage du périphérique racine. Elle doit être utilisée, avec parcimonie, pour une configuration plus poussée du périphérique racine, ou pour monter d'autres systèmes de fichiers, tels que <code>/usr</code>.
</p>
<p><code>run_cleanuphook</code> : Les fonctions avec ce nom sont exécutées le plus tard possible, et dans l'ordre inverse de celui dans lequel elles sont listées dans le tableau <code>HOOKS</code> du fichier de configuration. Ces «hooks» doivent être utilisés pour tout nettoyage de dernière minute, comme l'arrêt de tout daemon lancé par un «hook» précédent.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Les «hooks» d'exécution ne sont utilisés que par l'init busybox. Le «hook» <b>systemd</b> déclenche un init basé sur systemd, qui n'exécute pas de «hooks» d'exécution mais utilise des unités systemd à la place.</div>
<h4><span class="mw-headline" id="Hooks_communs">Hooks communs</span></h4>
<p>Voici un tableau des «hooks» communs et de la manière dont ils affectent la création et l'exécution des images. Notez que ce tableau n'est pas complet, car les paquets peuvent fournir des «hooks» personnalisés.
</p>
<table class="wikitable">
<tbody>
<tr>
<th>busybox init</th>
<th>systemd init</th>
<th><a href="#Hooks_de_construction">Hooks de construction</a></th>
<th>
<a href="#Hooks_d'ex%C3%A9cution">Hooks d'exécution</a> (busybox init only)
</th>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>base</b></td>
<td>Configure tous les répertoires initiaux et installe les utilitaires de base et les bibliothèques. Conservez toujours ce "hook" comme premier "hook" à moins que vous ne sachiez ce que vous faites, car il fournit un init busybox critique lorsque vous n'utilisez pas le «hook» <b>systemd</b>. <br>Optionnel lors de l'utilisation du «hook» <b>systemd</b> car il fournit juste un shell de récupération busybox. <div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Le shell de récupération n'est pas utilisable car le compte root dans l'initramfs est <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/systemd/-/commit/292cdf8a2f7dd7c6c7d91d2b59617391935c837c">verrouillé</a>. See <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/70408">FS#70408</a>.</div>
</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>udev</b></td>
<td rowspan="3" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>systemd</b></td>
<td>Ajoute udevd, udevadm, et un petit sous-ensemble de règles udev à votre image.</td>
<td>Démarre le daemon udev et traite les uevents du noyau, en créant des nœuds de périphériques. Comme il simplifie le processus de démarrage en ne demandant pas à l'utilisateur de spécifier explicitement les modules nécessaires, son utilisation est recommandée.
</td>
</tr>
<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>usr</b></td>
<td>Ajoute la prise en charge de <code>/usr</code> sur une partition séparée. Consultez <a href="#/usr_sur_une_partition_s%C3%A9par%C3%A9e">#/usr sur une partition séparée</a> pour plus de détails.</td>
<td>Monte la partition <code>/usr</code> après que la racine réelle ait été montée.
</td>
</tr>

<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>resume</b></td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–</td>
<td>Tente de reprendre à partir de l'état "suspend to disk". Consultez <a href="../en/Power_management/Suspend_and_hibernate.html#Hibernation" class="mw-redirect" title="Hibernation">Hibernation</a> pour plus de configuration.
</td>
</tr>
<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>btrfs</b></td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">--</td>
<td>Définit les modules requis pour activer <a href="../en/Btrfs.html" class="mw-redirect" title="Btrfs (Français)">Btrfs</a> afin d'utiliser plusieurs périphériques avec Btrfs. Vous devez avoir <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=btrfs-progs">btrfs-progs</a></span> installé pour utiliser ceci. Ce «hook» n'est pas nécessaire pour utiliser Btrfs sur un seul périphérique.</td>
<td>Lance <code>btrfs device scan</code> pour assembler un système de fichiers racine Btrfs multi-périphérique lorsque le «hook» <b>udev</b> ou le «hook» <b>systemd</b> n'est pas présent. Le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=btrfs-progs">btrfs-progs</a></span> est nécessaire pour ce «hook».
</td>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>autodetect</b></td>
<td>Réduit votre initramfs à une taille plus petite en créant une liste blanche de modules à partir d'une analyse de sysfs. Assurez-vous de vérifier que les modules inclus sont corrects et qu'aucun n'est manquant. Ce «hook» doit être exécuté avant les autres «hooks» du sous-système afin de profiter de l'auto-détection. Tous les «hooks» placés avant 'autodetect' seront installés dans leur intégralité.</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>modconf</b></td>
<td>Inclut les fichiers de configuration modprobe de <code>/etc/modprobe.d/</code> et <code>/usr/lib/modprobe.d/</code>.</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>block</b></td>
<td>Ajoute tous les modules de périphérique de type bloc, auparavant fournis séparément par les «hooks» <i>fw</i>, <i>mmc</i>, <i>pata</i>, <i>sata</i>, <i>scsi</i>, <i>usb</i>, et <i>virtio</i>.</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>net</b></td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;"><i>pas mis en œuvre</i></td>
<td>Ajoute les modules nécessaires pour un périphérique réseau. Vous devez avoir <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mkinitcpio-nfs-utils">mkinitcpio-nfs-utils</a></span> installé pour utiliser ceci, consultez <a href="#Utiliser_net">#Utiliser net</a> pour plus de détails.</td>
<td>Fournit la gestion d'un système de fichiers racine basé sur NFS.
</td>
</tr>
<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>dmraid</b></td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;"><i>?</i></td>
<td>Fournit la prise en charge des périphériques racine fakeRAID. Vous devez avoir installé <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dmraid">dmraid</a></span> pour l'utiliser. Notez qu'il est préférable d'utiliser <a href="../en/RAID.html" class="mw-redirect" title="Mdadm">mdadm</a> avec le «hook» <b>mdadm_udev</b> avec fakeRAID si votre contrôleur le prends en charge. Consultez <a href="#Utiliser_RAID">#Utiliser RAID</a> pour plus de détails.</td>
<td>Localise et assemble les périphériques blocs fakeRAID en utilisant <code>dmraid</code>.
</td>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>mdadm_udev</b></td>
<td>Fournit la prise en charge de l'assemblage de matrices RAID via udev. Vous devez avoir <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mdadm">mdadm</a></span> installé pour l'utiliser. Si vous utilisez ce «hook» avec une matrice FakeRAID, il est recommandé d'inclure <code>mdmon</code> dans <code>BINARIES</code>. Consultez <a href="#Utiliser_RAID">#Utiliser RAID</a> pour plus de détails.</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>keyboard</b></td>
<td>Ajoute les modules nécessaires pour les périphériques clavier. Utilisez ceci si vous avez un clavier USB ou série et que vous en avez besoin dans le premier espace utilisateur (soit pour entrer des mots de passe de chiffrement, soit pour l'utiliser dans un shell interactif). Par effet de bord, des modules pour certains périphériques d'entrée autres que le clavier peuvent être ajoutés également, mais il ne faut pas s'y fier. Remplace l'ancien «hook» <i>usbinput</i>.
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Pour les systèmes qui sont démarrés avec différentes configurations matérielles (par exemple, les ordinateurs portables avec un clavier externe ou un clavier interne ou <a href="https://en.wikipedia.org/wiki/Headless_computer" class="extiw" title="wikipedia:Headless computer">«headless»</a>), ce «hook» doit être placé avant <b>autodetect</b> afin de pouvoir utiliser le clavier au moment du démarrage, par exemple pour déverrouiller un périphérique chiffré lorsque le «hook» <code>encrypt</code> est utilisé.</div>
</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>keymap</b></td>
<td rowspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>sd-vconsole</b></td>
<td>Ajoute la <a href="../fr/Linux_console/Keyboard_configuration.html#Configuration_persistante" title="Linux console (Français)/Keyboard configuration (Français)">keymap</a> spécifiée dans <code>/etc/vconsole.conf</code> à l'initramfs. Si vous utilisez le <a href="../en/Dm-crypt/Encrypting_an_entire_system.html" title="Dm-crypt/Encrypting an entire system">chiffrement système</a>, en particulier le chiffrement de disque complet, assurez-vous de l'ajouter avant le «hook» <code>encrypt</code>.</td>
<td>Charge les keymaps spécifiés depuis <code>/etc/vconsole.conf</code> au début de l'espace utilisateur.
</td>
</tr>
<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>consolefont</b></td>
<td>Ajoute la <a href="../en/Linux_console.html#Persistent_configuration" title="Linux console">police de console</a> spécifiée de <code>/etc/vconsole.conf</code> à l'initramfs.</td>
<td>Charge la police de la console spécifiée depuis <code>/etc/vconsole.conf</code> au début de l'espace utilisateur.
</td>
</tr>
<tr>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>encrypt</b></td>
<td style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>sd-encrypt</b></td>
<td>Ajoute le module noyau <code>dm_crypt</code> et l'outil <code>cryptsetup</code> à l'image. Vous devez avoir installé <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cryptsetup">cryptsetup</a></span> pour l'utiliser. <div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Tenez compte des remarques concernant le «hook» <i>clavier</i> ci-dessus pour déverrouiller un périphérique chiffré au démarrage, et/ou des remarques concernant le système de fichiers dans <a href="#MODULES">#MODULES</a> lorsque vous utilisez un fichier à déverrouiller.</div>
</td>
<td>Détecte et déverrouille une partition racine chiffrée. Consultez <a href="#Personnalisation_de_l'ex%C3%A9cution">#Personnalisation de l'exécution</a> pour la suite de la configuration.
<p>Pour <b>sd-encrypt</b> consultez <a href="../en/Dm-crypt/System_configuration.html#Using_systemd-cryptsetup-generator" title="Dm-crypt/System configuration">dm-crypt/System configuration#Using systemd-cryptsetup-generator</a>.
</p>
</td>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>lvm2</b></td>
<td>Ajoute le module noyau mappeur de périphériques et l'outil <code>lvm</code> à l'image. Vous devez avoir <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span> installé pour l'utiliser. Ceci est nécessaire si vous avez votre système de fichiers racine sur <a href="../en/LVM.html" title="LVM">LVM</a>.</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>fsck</b></td>
<td>Ajoute le binaire fsck et les aides spécifiques au système de fichiers pour permettre l'exécution de fsck sur votre périphérique racine (et <code>/usr</code> si séparé) avant le montage. Si il est ajouté après le «hook» <b>autodetect</b>, seule l'aide spécifique à votre système de fichiers racine sera ajoutée. L'utilisation de ce «hook» est <b>fortement</b> recommandée, et il est requis avec une partition <code>/usr</code> séparée. Il est fortement recommandé, si vous incluez ce «hook», d'inclure également tous les modules nécessaires pour que votre clavier fonctionne dans l'espace utilisateur primitif. <br>L'utilisation de ce «hook» nécessite que le paramètre <code>rw</code> soit défini sur la <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel command line">ligne de commande du noyau</a>. (<a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1307895#p1307895">discussion</a>). Consultez <a href="../fr/Fsck.html#V%C3%A9rification_au_d%C3%A9marrage" title="Fsck (Français)">Fsck (Français)#Vérification au démarrage</a> pour plus de détails.</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td colspan="2" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;"><b>filesystems</b></td>
<td>Ceci inclut les modules de système de fichiers nécessaires dans votre image. Ce «hook» est <b>requis</b> à moins que vous ne spécifiez vos modules de système de fichiers dans <code>MODULES</code>.</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
</tbody>
</table>
<h3><span class="mw-headline" id="COMPRESSION">COMPRESSION</span></h3>
<p>Le noyau prend en charge plusieurs formats pour la compression de l'initramfs : <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gzip">gzip</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bzip2">bzip2</a></span>, lzma, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xz">xz</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lzo">lzo</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lz4">lz4</a></span> et <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zstd">zstd</a></span>. mkinitcpio utilise des images compressées zstd par défaut, notez que la compression zstd fonctionne en mode multi-cœur (avec l'option <code>-T0</code> qui génère autant de processus que de cœurs détectés).
</p>
<p>Le fichier <code>mkinitcpio.conf</code> fourni contient les différentes options <code>COMPRESSION</code> commentées. Décommentez l'une d'entre elles si vous souhaitez passer à une autre méthode de compression et assurez-vous d'avoir installé l'utilitaire de compression correspondant. Si aucune option n'est spécifiée, la méthode par défaut de zstd est utilisée. Si vous souhaitez créer une image non compressée, spécifiez <code>COMPRESSION='<i>cat</i></code> dans le fichier de configuration ou utilisez <code>-z cat</code> sur la ligne de commande.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Avec un taux de compression typiquement autour de 2,5 sur l'image dans son mode de compression élevé (<code>-9</code>), lz4 atteint la vitesse de décompression la plus rapide au prix d'une compression plus lente en mode mono-cœur. Pour une compression légèrement meilleure, lzo est toujours rapide à décompresser. zstd offre une solution polyvalente, avec une compression multi-cœur et une large gamme de niveaux de compression grâce à ses options - consultez <span class="plainlinks archwiki-template-man" title="$ man 1 zstd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zstd.1#Operation_modifiers">zstd(1) § Operation modifiers</a></span>. xz atteint la plus petite taille avec un facteur de réduction autour de 5 dans son préréglage de haute compression (<code>-9</code>), au prix d'une vitesse de décompression beaucoup plus lente.</div>
<h3><span class="mw-headline" id="COMPRESSION_OPTIONS">COMPRESSION_OPTIONS</span></h3>
<p>Il s'agit d'options supplémentaires transmises au programme spécifié par <code>COMPRESSION</code>, par exemple :
</p>
<pre>COMPRESSION_OPTIONS=(-9)
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Cette option peut être laissée vide, <i>mkinitcpio</i> s'assurera que toute méthode de compression prise en charge possède les paramètres nécessaires pour produire une image fonctionnelle. D'un autre côté, une mauvaise utilisation de cette option peut conduire à un <i>système non amorçable</i> si le noyau est incapable de décompresser l'archive résultante.</div>
<h2>
<span id="Personnalisation_de_l.27ex.C3.A9cution"></span><span class="mw-headline" id="Personnalisation_de_l'exécution">Personnalisation de l'exécution</span>
</h2>
<p>Les options de configuration durant l'exécution peuvent être transmises à <code>init</code> et à certains «hooks» via la ligne de commande du noyau. Les paramètres de la ligne de commande du noyau sont souvent fournis par le chargeur d'amorçage. Les options présentées ci-dessous peuvent être ajoutées à la ligne de commande du noyau pour modifier le comportement par défaut. Consultez <a href="../en/Kernel_parameters.html" title="Kernel parameters">Paramètres du noyau (en)</a> et <a href="../fr/Arch_boot_process.html" class="mw-redirect" title="Processus de démarrage">Processus de démarrage</a> pour plus d'informations.
</p>
<h3>
<span id="init_avec_le_.C2.ABhook.C2.BB_base"></span><span class="mw-headline" id="init_avec_le_«hook»_base">init avec le «hook» base</span>
</h3>
<dl>
<dt><code>root</code></dt>
<dd>C'est le paramètre le plus important spécifié sur la ligne de commande du noyau, car il détermine le périphérique qui sera monté comme votre périphérique racine. <i>mkinitcpio</i> est assez flexible pour permettre une grande variété de formats, par exemple : <pre> root=/dev/sda1 # /dev node
 root=LABEL=CorsairF80 # label
 root=UUID=ea1c4959-406c-45d0-a144-912f4e86b207 # UUID
 root=PARTUUID=14420948-2cea-4de7-b042-40f67c618660 # UUID de la partition GPT</pre> <div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Les paramètres de démarrage suivants modifient le comportement par défaut de <code>init</code> dans l'environnement initramfs. Consultez <code>/usr/lib/initcpio/init</code> pour plus de détails. Ils ne fonctionneront pas lorsque le «hook» <code>systemd</code> est utilisé puisque le «hook» <code>init</code> de <code>base</code> est remplacé.</div>
</dd>
</dl>
<dl>
<dt><code>break</code></dt>
<dd>Si <code>break</code> ou <code>break=premount</code> est spécifié, <code>init</code> met en pause le processus de démarrage (après le chargement des «hooks», mais avant le montage du système de fichiers racine) et lance un shell interactif qui peut être utilisé à des fins de dépannage. Ce shell peut être lancé après le montage de la racine en spécifiant <code>break=postmount</code>. Le démarrage normal se poursuit après avoir quitté le shell.</dd>
</dl>
<dl>
<dt><code>disablehooks</code></dt>
<dd>Désactive les «hooks» au moment de l'exécution en ajoutant <code>disablehooks=hook1[,hook2,...]</code>. Par exemple : <pre>disablehooks=resume</pre>
</dd>
</dl>
<dl>
<dt><code>earlymodules</code></dt>
<dd>Modifie l'ordre dans lequel les modules sont chargés en spécifiant les modules à charger précocement via <code>earlymodules=mod1[,mod2,...]</code>. (Cela peut être utilisé, par exemple, pour assurer l'ordre correct de plusieurs interfaces réseau).</dd>
</dl>
<p>Consultez <a href="../fr/General_troubleshooting.html#Probl%C3%A8mes_de_d%C3%A9marrage" class="mw-redirect" title="Problèmes de démarrage">Problèmes de démarrage</a> et <span class="plainlinks archwiki-template-man" title="$ man 8 mkinitcpio"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkinitcpio.8">mkinitcpio(8)</a></span> pour d'autres paramètres.
</p>
<h3><span class="mw-headline" id="Utiliser_RAID">Utiliser RAID</span></h3>
<p>Consultez <a href="../en/RAID.html#Configure_mkinitcpio" title="RAID">RAID#Configure mkinitcpio</a>.
</p>
<h3><span class="mw-headline" id="Utiliser_net">Utiliser net</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> NFSv4 n'est pas encore pris en charge <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/28287">FS#28287</a>.</div>
<p><b>Paquets requis</b>
</p>
<p><code>net</code> nécessite le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mkinitcpio-nfs-utils">mkinitcpio-nfs-utils</a></span>.
</p>
<p><b>Paramètres du noyau</b>
</p>
<p>Des informations complètes et à jour peuvent être trouvées dans la documentation officielle <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/nfs/nfsroot.html">documentation du noyau</a>.
</p>
<p><b>ip=</b>
</p>
<p>Ce paramètre indique au noyau comment configurer les adresses IP des périphériques et aussi comment configurer la table de routage IP. Il peut prendre jusqu'à neuf arguments séparés par des deux-points : <code>ip=&lt;client-ip&gt;:&lt;server-ip&gt;:&lt;gw-ip&gt;:&lt;netmask&gt;:&lt;hostname&gt;:&lt;device&gt;:&lt;autoconf&gt;:&lt;dns0-ip&gt;:&lt;dns1-ip&gt;:&lt;ntp0-ip&gt;</code>.
</p>
<p>Si ce paramètre est absent de la ligne de commande du noyau, tous les champs sont supposés être vides, et les valeurs par défaut mentionnées dans la <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/nfs/nfsroot.html">documentation du noyau</a> s'appliquent. En général, cela signifie que le noyau essaie de tout configurer en utilisant l'autoconfiguration.
</p>
<p>Le paramètre <code>&lt;autoconf&gt;</code> peut apparaître seul comme valeur du paramètre <code>ip</code> (sans tous les caractères <code>:</code> avant). Si la valeur est <code>ip=off</code> ou <code>ip=none</code>, aucune autoconfiguration n'aura lieu, sinon l'autoconfiguration aura lieu. La façon la plus courante d'utiliser ce paramètre est <code>ip=dhcp</code>.
</p>
<p>Pour une explication des paramètres, consultez la <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/nfs/nfsroot.html">documentation du noyau</a>.
</p>
<p>Exemples :
</p>
<pre>ip=127.0.0.1:::::lo:none  --&gt; Enable the loopback interface.
ip=192.168.1.1:::::eth2:none --&gt; Enable static eth2 interface.
ip=:::::eth0:dhcp --&gt; Enable dhcp protocol for eth0 configuration.
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Veillez à utiliser les noms de périphériques du noyau (par exemple, <code>eth0</code>) pour le paramètre <code>&lt;device&gt;</code>, les noms persistants (par exemple, <code>enp2s0</code>) ne fonctionneront pas. Consultez <a href="../en/Network_configuration.html#Network_interfaces" title="Network configuration">Network configuration#Network interfaces</a> pour plus d'informations.</div>
<p><b>BOOTIF=</b>
</p>
<p>Si vous avez plusieurs cartes réseau, ce paramètre peut inclure l'adresse MAC de l'interface à partir de laquelle vous démarrez. Ceci est souvent utile lorsque la numérotation des interfaces peut changer, ou en conjonction avec l'option pxelinux IPAPPEND 2 ou IPAPPEND 3. S'il n'est pas donné, <code>eth0</code> sera utilisé.
</p>
<p>Exemple :
</p>
<pre>BOOTIF=01-A1-B2-C3-D4-E5-F6 # Notez le préfixe "01-" et les lettres majuscules.
</pre>
<p><b>nfsroot=</b>
</p>
<p>Si le paramètre <code>nfsroot</code> n'est PAS donné sur la ligne de commande, le paramètre par défaut <code>/tftpboot/%s</code> sera utilisé.
</p>
<pre>nfsroot=[&lt;server-ip&gt; :]&lt;root-dir&gt;[,&lt;nfs-options&gt;]
</pre>
<p>Exécutez <code>mkinitcpio -H net</code> pour l'explication des paramètres.
</p>
<h3><span class="mw-headline" id="Utiliser_LVM">Utiliser LVM</span></h3>
<p>Si votre périphérique racine est sur <a href="../en/LVM.html" title="LVM">LVM</a>, consultez <a href="../en/Install_Arch_Linux_on_LVM.html#Adding_mkinitcpio_hooks" title="Install Arch Linux on LVM">Install Arch Linux on LVM#Adding mkinitcpio hooks</a>.
</p>
<h3>
<span id="Utiliser_une_partition_syst.C3.A8me_chiffr.C3.A9e"></span><span class="mw-headline" id="Utiliser_une_partition_système_chiffrée">Utiliser une partition système chiffrée</span>
</h3>
<p>Si vous utilisez une <a href="../en/Dm-crypt/Encrypting_an_entire_system.html" title="Dm-crypt/Encrypting an entire system">partition système chiffrée</a>, consultez <a href="../en/Dm-crypt/System_configuration.html#mkinitcpio" title="Dm-crypt/System configuration">dm-crypt/System configuration#mkinitcpio</a> pour des informations détaillées sur les «hooks» à inclure.
</p>
<h3>
<span id=".2Fusr_sur_une_partition_s.C3.A9par.C3.A9e"></span><span class="mw-headline" id="/usr_sur_une_partition_séparée">/usr sur une partition séparée</span>
</h3>
<p>Si vous conservez <code>/usr</code> sur une partition séparée, vous devez respecter les exigences suivantes :
</p>
<ul>
<li>Ajouter le «hook» <code>fsck</code>, marquer <code>/usr</code> avec un <code>passno</code> de <code>2</code> dans <code>/etc/fstab</code> pour exécuter la vérification sur la partition au démarrage. Bien que recommandé pour tout le monde, il est obligatoire si vous voulez que votre partition <code>/usr</code> soit vérifié au démarrage. Sans ce «hook», <code>/usr</code> ne sera jamais vérifié.</li>
<li>Si vous n'utilisez pas le «hook» systemd, ajoutez le «hook» <code>usr</code>. Ceci montera la partition <code>/usr</code> après que la racine soit monté.</li>
</ul>
<h2>
<span id="D.C3.A9pannage"></span><span class="mw-headline" id="Dépannage">Dépannage</span>
</h2>
<h3>
<span id="Extraction_de_l.27image"></span><span class="mw-headline" id="Extraction_de_l'image">Extraction de l'image</span>
</h3>
<p>Si vous êtes curieux de savoir ce que contient l'image initramfs, vous pouvez l'extraire et consulter les fichiers qu'elle contient. 
</p>
<p>L'image initramfs est une archive CPIO SVR4, générée par les commandes <code>find</code> et <code>bsdcpio</code>, éventuellement compressée avec un schéma de compression compris par le noyau. Pour plus d'informations sur les schémas de compression, consultez <a href="#COMPRESSION">#COMPRESSION</a>.
</p>
<p><i>mkinitcpio</i> inclut un utilitaire appelé <span class="plainlinks archwiki-template-man" title="$ man 1 lsinitcpio"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/lsinitcpio.1">lsinitcpio(1)</a></span> qui listera et/ou extraira le contenu des images initramfs.
</p>
<p>Vous pouvez lister les fichiers de l'image avec :
</p>
<pre># lsinitcpio /boot/initramfs-linux.img
</pre>
<p>Et pour les extraire tous dans le répertoire courant :
</p>
<pre># lsinitcpio -x /boot/initramfs-linux.img
</pre>
<p>Vous pouvez également obtenir une liste plus conviviale des parties importantes de l'image :
</p>
<pre># lsinitcpio -a /boot/initramfs-linux.img
</pre>
<h3>
<span id="Recompression_d.27une_image_extraite_modifi.C3.A9e"></span><span class="mw-headline" id="Recompression_d'une_image_extraite_modifiée">Recompression d'une image extraite modifiée</span>
</h3>
<p>Invoquer la fonction <code>build_image</code> du script <code>/usr/bin/mkinitcpio</code> avec comme paramètres
</p>
<pre>build_image <i>outfile</i> <i>compression</i>
</pre>
<p>On peut le faire en créant un nouveau script avec le contenu de la fonction <code>build_image</code> et en l'exécutant avec les paramètres ci-dessus.
Cela permettra de compresser le contenu présent dans le répertoire courant dans un fichier nommé <code><i>outfile</i></code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> C'est une bonne idée de renommer le fichier généré automatiquement <code>/boot/initramfs-linux.img</code> avant de le remplacer, afin de pouvoir facilement annuler vos modifications.  Soyez prêt à faire une erreur qui empêchera votre système de démarrer.  Si cela se produit, vous devrez démarrer à travers le fallback, ou un CD de démarrage, pour restaurer votre original, exécuter <i>mkinitcpio</i> pour écraser vos changements, ou les corriger vous-même et recompresser l'image.</div>
<h3>
<span id=".22.2Fdev_must_be_mounted.22_alors_qu.27il_l.27est_d.C3.A9j.C3.A0"></span><span class="mw-headline" id="&quot;/dev_must_be_mounted&quot;_alors_qu'il_l'est_déjà">"/dev must be mounted" alors qu'il l'est déjà</span>
</h3>
<p>Le test utilisé par <i>mkinitcpio</i> pour déterminer si <code>/dev</code> est monté est de consulter si <code>/dev/fd/</code> est présent. Si tout le reste semble correct, il peut être "créé" manuellement par :
</p>
<pre># ln -s /proc/self/fd /dev/
</pre>
<p>(Évidemment, <code>/proc</code> doit aussi être monté. <i>mkinitcpio</i> le requiert de toute façon, et c'est la prochaine chose qu'il vérifiera).
</p>
<h3><span class="mw-headline" id="Possibly_missing_firmware_for_module_XXXX">Possibly missing firmware for module XXXX</span></h3>
<p>Lorsque les initramfs sont reconstruits après une mise à jour du noyau, vous pouvez obtenir ces avertissements ou des avertissements similaires :
</p>
<pre>==&gt; WARNING: Possibly missing firmware for module : wd719x
==&gt; WARNING: Possibly missing firmware for module : aic94xx
==&gt; WARNING: Possibly missing firmware for module : xhci_pci.
</pre>
<p>Ceux-ci apparaissent à la plupart des utilisateurs d'Arch Linux, car le microprogramme n'est pas inclus dans le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span>. Si vous n'utilisez pas de matériel qui utilise ces microprogrammes, vous pouvez ignorer ce message sans risque. Actuellement, la seule solution pour supprimer les avertissements pour les modules wd719x et aic94xx est d'installer les paquets de firmware pour ces modules. Pour aic94xx, installez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/aic94xx-firmware/">aic94xx-firmware</a></span><sup><small>AUR</small></sup>. Pour wd719x, installez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/wd719x-firmware/">wd719x-firmware</a></span><sup><small>AUR</small></sup>. Pour xhci_pci, installez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/upd72020x-fw/">upd72020x-fw</a></span><sup><small>AUR</small></sup>. Consultez la discussion correspondante <a rel="nofollow" class="external text" href="https://gist.github.com/imrvelj/c65cd5ca7f5505a65e59204f5a3f7a6d">ici</a>.
</p>
<p>Pour les microprogrammes les plus courants, <a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">installez</a> le paquet <i>linux-firmware</i>. Pour les autres paquets fournissant des microprogrammes, essayez de chercher le nom du module dans les <a href="../fr/Official_repositories.html" class="mw-redirect" title="Dépôts officiels">dépôts officiels</a> ou <a href="../fr/Arch_User_Repository.html" title="Arch User Repository (Français)">AUR</a>.
</p>
<h3>
<span id="No_PS.2F2_controller_found"></span><span class="mw-headline" id="No_PS/2_controller_found">No PS/2 controller found</span>
</h3>
<p>Sur certaines cartes mères (surtout les anciennes, mais aussi quelques nouvelles), le contrôleur i8042 ne peut pas être détecté automatiquement. C'est rare, mais certaines personnes se retrouveront sûrement sans clavier. Vous pouvez détecter cette situation à l'avance. Si vous avez un port PS/2 et obtenez le message <code>i8042: PNP: No PS/2 controller found. Probing ports directly</code>, ajoutez <b>atkbd</b> au tableau <code>MODULES</code>.
</p>
<h3>
<span id="Proc.C3.A9dures_de_secours_standard"></span><span class="mw-headline" id="Procédures_de_secours_standard">Procédures de secours standard</span>
</h3>
<p>Avec un disque RAM initial inadéquat, un système est souvent impossible à démarrer. Suivez donc une procédure de sauvetage du système comme ci-dessous :
</p>
<h4>
<span id="Le_d.C3.A9marrage_r.C3.A9ussit_sur_une_machine_et_.C3.A9choue_sur_une_autre"></span><span class="mw-headline" id="Le_démarrage_réussit_sur_une_machine_et_échoue_sur_une_autre">Le démarrage réussit sur une machine et échoue sur une autre</span>
</h4>
<p>Le hook <code>autodetect</code> de <i>mkinitcpio</i> filtre les <a href="../fr/Kernel_module.html" title="Kernel module (Français)">modules du noyau</a> inutiles dans l'analyse primaire de l'initramfs <code>/sys</code> et les modules chargés au moment de son exécution. Si vous transférez votre répertoire <code>/boot</code> sur une autre machine et que la séquence de démarrage échoue au début de l'espace utilisateur, cela peut être dû au fait que le nouveau matériel n'est pas détecté en raison de modules du noyau manquants. Notez que les USB 2.0 et 3.0 nécessitent des modules de noyau différents. 
</p>
<p>Pour corriger ce problème, essayez d'abord de choisir l'image <a href="#Cr%C3%A9ation_et_activation_d'images">fallback</a> à partir de votre <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" class="mw-redirect" title="Chargeur d'amorçage">chargeur d'amorçage</a>, car elle n'est pas filtrée par <code>autodetect</code>. Une fois démarré, exécutez <i>mkinitcpio</i> sur la nouvelle machine pour reconstruire l'image primaire avec les modules corrects. Si l'image de repli échoue, essayez de démarrer sur un CD/USB live Arch Linux, chrootez dans l'installation, et exécutez <i>mkinitcpio</i> sur la nouvelle machine. En dernier recours, essayez <a href="#MODULES">manuellement</a> d'ajouter des modules à l'initramfs.
</p>
<h2><span class="mw-headline" id="Voir_aussi">Voir aussi</span></h2>
<ul>
<li>Documentation du noyau Linux sur <a rel="nofollow" class="external text" href="https://docs.kernel.org/filesystems/ramfs-rootfs-initramfs.html#what-is-rootfs">initramfs, "What is rootfs ?"</a>.</li>
<li>Documentation du noyau Linux sur <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/initrd.html">initrd</a>
</li>
<li>Article de Wikipedia sur <a href="https://en.wikipedia.org/wiki/initrd" class="extiw" title="wikipedia:initrd">initrd</a>.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../fr/Category:Initramfs.html" title="Category:Initramfs (Français)">Initramfs (Français)</a></li>
<li><a href="../fr/Category:Kernel.html" title="Category:Kernel (Français)">Kernel (Français)</a></li>
<li><a href="../fr/Category:Arch_projects.html" title="Category:Arch projects (Français)">Arch projects (Français)</a></li>
<li><a href="../fr/Category:Commands.html" title="Category:Commands (Français)">Commands (Français)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Mkinitcpio_(Fran%C3%A7ais)&amp;oldid=795812">https://wiki.archlinux.org/index.php?title=Mkinitcpio_(Français)&amp;oldid=795812</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 2 January 2024, at 06:48.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
