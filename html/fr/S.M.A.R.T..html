<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>S.M.A.R.T. (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-S_M_A_R_T_Français rootpage-S_M_A_R_T_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Smartmontools" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Smartmontools">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Smartmontools</div>
		</a>
		
			<button aria-controls="toc-Smartmontools-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Smartmontools subsection</span>
			</button>
		
		<ul id="toc-Smartmontools-sublist" class="vector-toc-list">
			<li id="toc-smartctl" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#smartctl">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>smartctl</div>
			</a>
			
			<ul id="toc-smartctl-sublist" class="vector-toc-list">
				<li id="toc-Lancer_un_test" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Lancer_un_test">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>Lancer un test</div>
			</a>
			
			<ul id="toc-Lancer_un_test-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Voir_les_résultats_du_test" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Voir_les_r%C3%A9sultats_du_test">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>Voir les résultats du test</div>
			</a>
			
			<ul id="toc-Voir_les_résultats_du_test-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Générer_une_table_avec_les_attributs_de_tous_les_disques" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#G%C3%A9n%C3%A9rer_une_table_avec_les_attributs_de_tous_les_disques">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.3</span>Générer une table avec les attributs de tous les disques</div>
			</a>
			
			<ul id="toc-Générer_une_table_avec_les_attributs_de_tous_les_disques-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-smartd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#smartd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>smartd</div>
			</a>
			
			<ul id="toc-smartd-sublist" class="vector-toc-list">
				<li id="toc-Gestion_du_daemon" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gestion_du_daemon">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.1</span>Gestion du daemon</div>
			</a>
			
			<ul id="toc-Gestion_du_daemon-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Définir_les_périphériques_à_surveiller" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#D%C3%A9finir_les_p%C3%A9riph%C3%A9riques_%C3%A0_surveiller">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.2</span>Définir les périphériques à surveiller</div>
			</a>
			
			<ul id="toc-Définir_les_périphériques_à_surveiller-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Notifier_des_problèmes_potentiels" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Notifier_des_probl%C3%A8mes_potentiels">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.3</span>Notifier des problèmes potentiels</div>
			</a>
			
			<ul id="toc-Notifier_des_problèmes_potentiels-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gestion_de_l'alimentation" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gestion_de_l'alimentation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.4</span>Gestion de l'alimentation</div>
			</a>
			
			<ul id="toc-Gestion_de_l'alimentation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Planifier_les_auto-tests" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Planifier_les_auto-tests">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.5</span>Planifier les auto-tests</div>
			</a>
			
			<ul id="toc-Planifier_les_auto-tests-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alerte_sur_les_changements_de_température" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Alerte_sur_les_changements_de_temp%C3%A9rature">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.6</span>Alerte sur les changements de température</div>
			</a>
			
			<ul id="toc-Alerte_sur_les_changements_de_température-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exemple_complet_de_smartd.conf" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Exemple_complet_de_smartd.conf">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.7</span>Exemple complet de smartd.conf</div>
			</a>
			
			<ul id="toc-Exemple_complet_de_smartd.conf-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Applications_en_console" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Applications_en_console">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Applications en console</div>
		</a>
		
		<ul id="toc-Applications_en_console-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Applications_en_GUI" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Applications_en_GUI">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Applications en GUI</div>
		</a>
		
		<ul id="toc-Applications_en_GUI-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Voir_aussi" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Voir_aussi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Voir aussi</div>
		</a>
		
		<ul id="toc-Voir_aussi-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">S.M.A.R.T. (Français)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/S.M.A.R.T..html" title="S.M.A.R.T. – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/S.M.A.R.T." title="S.M.A.R.T. – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/S.M.A.R.T..html" title="S.M.A.R.T. – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/S.M.A.R.T..html" title="S.M.A.R.T.">S.M.A.R.T.</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=S.M.A.R.T.&amp;diff=0&amp;oldid=731812">changements</a> dans la version anglaise.</div>
<p><a href="https://en.wikipedia.org/wiki/fr:S.M.A.R.T." class="extiw" title="wikipedia:fr:S.M.A.R.T.">S.M.A.R.T.</a> (<i>S</i>elf-<i>M</i>onitoring, <i>A</i>nalysis, and <i>R</i>eporting <i>T</i>echnology, qu'on peut traduire par technique d'auto-diagnostic, d'analyse et de signalement) est un composant supplémentaire intégré à de nombreux dispositifs de stockage modernes grâce auquel les périphériques surveillent, stockent et analysent la «santé» de leur fonctionnement.  Des statistiques sont collectées (température, nombre de secteurs réalloués, erreurs d'accès...) que les logiciels peuvent utiliser pour mesurer l'état de santé d'un périphérique, prédire une éventuelle défaillance du périphérique et fournir des notifications lorsque les valeurs annoncent un danger.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Smartmontools">Smartmontools</span></h2>
<p>Le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smartmontools">smartmontools</a></span> comporte deux utilitaires permettant d'analyser et de surveiller des périphériques de stockage : <code>smartctl</code> et <code>smartd</code>.
</p>
<p>La prise en charge de SMART doit être disponible et activée sur chaque périphérique de stockage pour utiliser efficacement ces outils. Vous pouvez utiliser <a href="#smartctl">#smartctl</a> pour vérifier et activer la prise en charge de SMART. Ceci fait, vous pouvez manuellement <a href="#Lancer_un_test">#Lancer un test</a> et <a href="#Voir_les_r%C3%A9sultats_du_test">#Voir les résultats du test</a>, ou vous pouvez utiliser <a href="#smartd">#smartd</a> pour exécuter automatiquement des tests et envoyer des notifications par courriel.
</p>
<h3><span class="mw-headline" id="smartctl">smartctl</span></h3>
<p><code>smartctl</code> est un outil en ligne de commande qui contrôle le système SMART intégré dans la plupart des disques durs ou à mémoire flash en ATA/SATA et SCSI/SAS.
</p>
<p>L'option <code>-i</code>/<code>--info</code> imprime une variété d'informations sur un périphérique, y compris si SMART est disponible et activé :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># smartctl --info /dev/sda | grep 'SMART support is:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SMART support is: Available - device has SMART capability.
SMART support is: Enabled
</pre>
<p>Si la prise en charge de SMART est disponible mais inactif, vous pouvez l'activer :
</p>
<pre># smartctl --smart=on /dev/<i>device</i>
</pre>
<p>Vous devrez peut-être préciser le type de périphérique. Par exemple, spécifier <code>--device=ata</code> indique à smartctl que le type de périphérique est ATA, ce qui empêche smartctl d'envoyer des commandes SCSI à ce périphérique.
</p>
<h4><span class="mw-headline" id="Lancer_un_test">Lancer un test</span></h4>
<p>Un périphérique de stockage peut effectuer trois types d'auto-tests (tous préserveront les données utilisateur!) :
</p>
<ul>
<li>
<code>Short</code> (Court): exécute des tests qui ont une forte probabilité de détecter les problèmes du périphérique,</li>
<li>
<code>Extended</code> (Long) : mêmes tests que short mais sans limitation sur le temps de réponse et avec examen exhaustif des secteurs,</li>
<li>
<code>Conveyance</code> (Acheminement) : identifie les dommages physiques survenus pendant le transport du périphérique.</li>
</ul>
<p>L'option <code>-c</code>/<code>--capabilities</code> affiche les tests disponibles pour le périphérique et leur durée d'exécution approximative. Par exemple:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># smartctl -c /dev/sda</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Short self-test routine
recommended polling time:        (   1) minutes.
Extended self-test routine
recommended polling time:        (  74) minutes.
Conveyance self-test routine
recommended polling time:        (   2) minutes.
...
</pre>
<p>Pour lancer le test, utilisez l'option <code>-t</code>/<code>--test=<i>test_name</i></code> :
</p>
<pre># smartctl -t short /dev/<i>device</i>
# smartctl -t long /dev/<i>device</i>
# smartctl -t conveyance /dev/<i>device</i>
</pre>
<h4>
<span id="Voir_les_r.C3.A9sultats_du_test"></span><span class="mw-headline" id="Voir_les_résultats_du_test">Voir les résultats du test</span>
</h4>
<p>Vous pouvez afficher l'état de santé général d'un périphérique avec l'option <code>-H</code>. Si le périphérique signale un état de santé défaillant, cela signifie soit que le périphérique est déjà tombé en panne, soit qu'il prévoit sa propre panne dans les 24 heures à venir. Si cela se produit [...], retirez vos données du disque et mettez-les en lieu sûr dès que possible.
</p>
<pre># smartctl -H /dev/<i>device</i>
</pre>
<p>Vous pouvez également afficher une liste des résultats de tests récents et des informations détaillées sur un périphérique :
</p>
<pre># smartctl -l selftest /dev/<i>device</i>
# smartctl -a /dev/<i>device</i>
</pre>
<h4>
<span id="G.C3.A9n.C3.A9rer_une_table_avec_les_attributs_de_tous_les_disques"></span><span class="mw-headline" id="Générer_une_table_avec_les_attributs_de_tous_les_disques">Générer une table avec les attributs de tous les disques</span>
</h4>
<pre>#!/bin/bash
function drives_csv {
	declare -A drive_values
	for d in `smartctl --scan -d scsi | cut -d' ' -f1`; do
		drive_values["-Drive-----------------"]="${drive_values[-Drive-----------------]},$d"
		for l in `smartctl -A $d | grep ATTRIBUTE_NAME -A30 | grep -v ATTRIBUTE_NAME | column -H1,3,4,5,6,7,8,9,11,12,13,14,15 -t -o, | sed 's/ //g'`; do
			key=`echo $l | cut -d',' -f1`
			value=`echo $l | cut -d',' -f2`
			existing=${drive_values["$key"]}
			drive_values["${key}"]="${existing},${value}"
			#~ echo "${key},${drive_values[$key]}"
		done
	done
	for key in "${!drive_values[@]}"; do
		echo "${key}${drive_values[$key]}"
	done | sort
}
drives_csv | column -s, -t
</pre>
<h3><span class="mw-headline" id="smartd">smartd</span></h3>
<p>Le <a href="../fr/Systemd.html" class="mw-redirect" title="Daemons (Français)">daemon</a> smartd surveille les états SMART et émet des notifications lors d'une anomalie. Il est géré par systemd et configuré par le fichier <code>/etc/smartd.conf</code>. La syntaxe de ce fichier de configuration est plutôt ésotérique, et nous n'en donnons ici qu'un aperçu ; vous trouverez des exemples dans les sections commentées de <code>/etc/smartd.conf</code> et plus dans <span class="plainlinks archwiki-template-man" title="$ man 5 smartd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smartd.conf.5">smartd.conf(5)</a></span>.
</p>
<h4><span class="mw-headline" id="Gestion_du_daemon">Gestion du daemon</span></h4>
<p>Pour démarrer le daemon, vérifier son état, le faire démarrer automatiquement au démarrage du système et lire les entrées récentes du fichier journal, <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Démarrez">démarrez</a> et <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Activez">activez</a> simplement l'unité <code>smartd.service</code> de systemd.
</p>
<p>smartd reconnaît toutes les commandes courantes des commandes <a href="../fr/Systemd.html#Utilisation_basique_de_systemctl" title="Systemd (Français)">systemctl</a> et <a href="../en/Systemd/Journal.html" class="mw-redirect" title="Journalctl">journalctl</a>.
</p>
<h4>
<span id="D.C3.A9finir_les_p.C3.A9riph.C3.A9riques_.C3.A0_surveiller"></span><span class="mw-headline" id="Définir_les_périphériques_à_surveiller">Définir les périphériques à surveiller</span>
</h4>
<p>Pour surveiller toutes les erreurs SMART possibles sur tous les disques, le paramètre suivant doit être ajouté dans le fichier de configuration.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -a</pre>
<p>Notez que ceci est la configuration par défaut de <i>smartd</i> et que le paramètre <code>-a</code>, qui est le paramètre par défaut, peut être omis.
</p>
<p>Pour surveiller toutes les erreurs SMART possibles sur <code>/dev/sda</code> et <code>/dev/sdb</code>, et ignorer tous les autres périphériques :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sda -a
/dev/sdb -a
</pre>
<p>Pour surveiller toutes les erreurs SMART possibles sur les périphériques de stockage externes (des clefs USB par exemple), il est préférable d'indiquer à <i>smartd</i> l'UUID du périphérique puisque le <code>/dev/sd<i>X</i></code> du lecteur peut changer lors d'un redémarrage.
</p>
<p>Il vous faut donc d'abord récupérer l'UUID du périphérique en question. Cherchez dans les lignes affichées par la commande <code>ls -lah /dev/disk/by-uuid/</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ls -lah /dev/disk/by-uuid/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">lrwxrwxrwx 1 root root   9 Nov  5 22:41 820cdd8a-866a-444d-833c-1edb0f4becac -&gt; ../../sde
lrwxrwxrwx 1 root root  10 Nov  5 22:41 b51b87f3-425e-4fe7-883f-f4ff1689189e -&gt; ../../sdf2
lrwxrwxrwx 1 root root   9 Nov  5 22:42 ea2199dd-8f9f-4065-a7ba-71bde11a462c -&gt; ../../sda
lrwxrwxrwx 1 root root  10 Nov  5 22:41 fe9e886a-8031-439f-a909-ad06c494fadb -&gt; ../../sdf1
</pre>
<p>Supposons qu'ici la clef USB que nous voulions contrôler soit celle adressée par /dev/sde au démarrage. Maintenant, pour demander à <i>smartd</i> de surveiller ce disque, il suffit d'utiliser le chemin <code>/dev/disk/by-uuid/</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/disk/by-uuid/820cdd8a-866a-444d-833c-1edb0f4becac -a
</pre>
<p>Notez que vous pouvez avoir besoin en plus de <code>-d removable</code> pour que <i>smartd</i> fonctionne.
</p>
<p>Maintenant, votre clef USB sera surveillé même si le chemin <code>/dev/sd<i>X</i></code> change pendant le redémarrage.
</p>
<h4>
<span id="Notifier_des_probl.C3.A8mes_potentiels"></span><span class="mw-headline" id="Notifier_des_problèmes_potentiels">Notifier des problèmes potentiels</span>
</h4>
<p>Pour qu'un courriel soit envoyé lorsqu'un échec ou une nouvelle erreur se produit, utilisez l'option <code>-m</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -m address@domain.com
</pre>
<p>Pour que le courriel parvienne à un compte utilisateur (et non au compte root), il faut que vous ayez préalablement installé et configuré un service MTA (Mail Transport Agent) ou MUA (Mail User Agent). Les MTA les plus connus sont <a href="../en/Msmtp.html" title="Msmtp">Msmtp (en)</a> et <a href="../en/SSMTP.html" title="SSMTP">sSMTP (en)</a>, mais un simple <a href="../en/Dma.html" title="Dma">dma (en)</a> suffira sans doute. Les MTU les plus connus sont sendmail et <a href="../en/Postfix.html" title="Postfix">Postfix (en)</a>. Si vous n'avez pas d'autres usages, il vous suffit de configurer <a href="../en/S-nail.html" title="S-nail">S-nail (en)</a>, mais en suivant <a rel="nofollow" class="external text" href="//web.archive.org/web/20161011211420/https://dominicm.com/configure-email-notifications-on-arch-linux/">ces instructions</a>.
</p>
<p>L'option <code>-M test</code> envoie un courriel à chaque lancement du daemon smartd :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -m address@domain.com -M test
</pre>
<p>Les courriels peuvent mettre du temps à vous parvenir. Pour être sûr d'être averti immédiatement en cas de défaillance de votre disque dur, vous pouvez également définir un script qui sera exécuté en plus de l'envoi du courriel : 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -m address@domain.com -M exec /usr/local/bin/smartdnotify
</pre>
<p>Pour envoyer un courriel et une notification système, mettez quelque chose comme ceci dans <code>/usr/local/bin/smartdnotify</code> :
</p>
<pre>#!/bin/sh
# Envoyer un courriel
echo "$SMARTD_MESSAGE" | mail -s "$SMARTD_FAILTYPE" "$SMARTD_ADDRESS"
# Notification a l'utilisateur
wall "$SMARTD_MESSAGE"
</pre>
<p>Si vous utilisez un environnement de bureau, vous pouvez également préférer qu'une fenêtre contextuelle apparaisse sur votre bureau. Dans ce cas, vous pouvez utiliser ce script (remplacez <code><i>X_user</i></code> et <code><i>X_userid</i></code> par l'utilisateur et l'identifiant de l'utilisateur exécutant X respectivement) :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/smartdnotify</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

sudo -u <i>X_user</i> DISPLAY=:0 DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/<i>X_userid</i>/bus notify-send "S.M.A.R.T Error ($SMARTD_FAILTYPE)" "$SMARTD_MESSAGE" --icon=dialog-warning -u critical</pre>
<p>Ce script nécessite <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libnotify">libnotify</a></span> et un environnement de bureau compatible. Consultez l'article anglais <a href="../en/Desktop_notifications.html" title="Desktop notifications">Desktop notifications</a> pour plus de détails.
</p>
<p>Vous pouvez aussi placer vos scripts personnalisés dans le répertoire <code>/usr/share/smartmontools/smartd_warning.d/</code>:
</p>
<p>Ce script prévient tous les utilisateurs connectés au système via libnotify.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/smartmontools/smartd_warning.d/smartdnotify</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

IFS=$'\n'
for LINE in `w -hs`
do
    USER=`echo $LINE | awk '{print $1}'`
    USER_ID=`id -u $USER`
    DISP_ID=`echo $LINE | awk '{print $8}'`
    sudo -u $USER DISPLAY=$DISP_ID DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/$USER_ID/bus notify-send "S.M.A.R.T Error ($SMARTD_FAILTYPE)" "$SMARTD_MESSAGE" --icon=dialog-warning -u critical
done</pre>
<p>Ce script nécessite <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libnotify">libnotify</a></span> et <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=procps-ng">procps-ng</a></span> ainsi qu'un environnement de bureau compatible.
</p>
<p>Vous pouvez exécuter vos scripts personnalisés avec 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -m @smartdnotify</pre>
<h4>
<span id="Gestion_de_l.27alimentation"></span><span class="mw-headline" id="Gestion_de_l'alimentation">Gestion de l'alimentation</span>
</h4>
<p>Si vous utilisez un ordinateur avec gestion de l'énergie, vous devez indiquer à smartd comment gérer les disques en mode de faible consommation. Habituellement, en réponse aux commandes SMART émises par smartd, les plateaux de disques sont mis en rotation. Ainsi, si cette option n'est pas utilisée, un disque qui est en mode basse consommation peut être mis en rotation et passer en mode haute consommation lorsqu'il est interrogé périodiquement par smartd.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -n standby,15,q
</pre>
<p>Plus d'informations sur le <a rel="nofollow" class="external text" href="https://www.smartmontools.org/wiki/Powermode">wiki smartmontools</a>.
</p>
<p>Sur certains périphériques, le <code>-n</code> ne fonctionne pas. Vous obtenez le message d'erreur suivant dans le syslog :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># journalctl -u smartd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CHECK POWER MODE: incomplete response, ATA output registers missing
Device: /dev/sdb [SAT], no ATA CHECK POWER STATUS support, ignoring -n Directive
</pre>
<p>Comme alternative, vous pouvez utiliser l'option <code>-i</code> de smartd. Elle contrôle la fréquence à laquelle smartd fait tourner les disques pour vérifier leur état. La valeur par défaut est de 30 minutes. Pour la modifier, créez et éditez <code>/etc/default/smartmontools</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/default/smartmontools</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SMARTD_ARGS="-i 10800"  Check status every 10800 seconds (3 hours)</pre>
<p>Pour plus d'informations, consultez <span class="plainlinks archwiki-template-man" title="$ man 8 smartd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smartd.8">smartd(8)</a></span>.
</p>
<h4><span class="mw-headline" id="Planifier_les_auto-tests">Planifier les auto-tests</span></h4>
<p>smartd peut demander aux disques d'effectuer des auto-tests selon un calendrier. La configuration suivante <code>/etc/smartd.conf</code> lancera un autotest court chaque jour entre 2 et 3 heures du matin, et un autotest étendu chaque semaine le samedi entre 3 et 4 heures du matin :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -s (S/../.././02|L/../../6/03)
</pre>
<h4>
<span id="Alerte_sur_les_changements_de_temp.C3.A9rature"></span><span class="mw-headline" id="Alerte_sur_les_changements_de_température">Alerte sur les changements de température</span>
</h4>
<p>smartd peut suivre les températures des disques et alerter si elles augmentent trop rapidement ou atteignent une limite élevée. Ce qui suit enregistrera les changements de 4 degrés ou plus, enregistrera lorsque la température atteint 35 degrés, et enregistrera/enverra par courriel un avertissement lorsque la température atteint 40 :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -W 4,35,40
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> 
<ul>
<li>Vous pouvez déterminer la température actuelle du disque avec la commande <code>smartctl -A /dev/<i>device</i> | grep Temperature_Celsius</code>.</li>
<li>Si vous avez des disques qui fonctionnent beaucoup plus chauds/froids que d'autres, supprimez <code>DEVICESCAN</code> et définissez une configuration séparée pour chaque périphérique avec des paramètres de température appropriés.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Exemple_complet_de_smartd.conf">Exemple complet de smartd.conf</span></h4>
<p>En rassemblant tout ce qui précède, on obtient l'exemple de configuration suivant :
</p>
<ul>
<li>
<code>DEVICESCAN</code> smartd recherche les disques et surveille tous ceux qu'il trouve.</li>
<li>
<code>-a</code> surveiller tous les attributs</li>
<li>
<code>-o on</code> activer la collecte automatique de données hors ligne</li>
<li>
<code>-S on</code> activer la sauvegarde automatique des attributs</li>
<li>
<code>-n standby,q</code> ne pas vérifier si le disque est en veille et supprimer le message de journal à cet effet afin de ne pas provoquer une écriture sur le disque.</li>
<li>
<code>-s ...</code> programmer des autotests courts et longs</li>
<li>
<code>-W ...</code> surveiller la température</li>
<li>
<code>-m ...</code> alertes par mail</li>
</ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/smartd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVICESCAN -a -o on -S on -n standby,q -s (S/../.././02|L/../../6/03) -W 4,35,40 -m <i>nom-ou-courriel</i>
</pre>
<h2><span class="mw-headline" id="Applications_en_console">Applications en console</span></h2>
<ul><li>
<b>skdump</b> — utilitaire d'interrogation du composant SMART des supports de stockage.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://0pointer.de/blog/projects/being-smart.html">https://0pointer.de/blog/projects/being-smart.html</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libatasmart">libatasmart</a></span>
</dd></dl>
<ul><li>
<code>iostat -x</code> (fourni par <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sysstat">sysstat</a></span>) affiche également certaines mesures de santé du disque : en particulier, des valeurs élevées dans la colonne f_await signifient que le disque ne répond pas rapidement aux requêtes et qu'il peut être défaillant.</li></ul>
<h2><span class="mw-headline" id="Applications_en_GUI">Applications en GUI</span></h2>
<ul><li>
<b>DisKMonitor</b> — Outil KDE d'interrogation des composants SMART et MDRaid.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/papylhomme/diskmonitor">https://github.com/papylhomme/diskmonitor</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/diskmonitor/">diskmonitor</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Plasma Disks</b> — Système de contrôle des disques de KDE Plasma.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://invent.kde.org/plasma/plasma-disks/">https://invent.kde.org/plasma/plasma-disks/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-disks">plasma-disks</a></span>
</dd></dl>
<ul><li>
<b>Gnome Disks</b> — Interface GNOME exploitant l'API <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libatasmart">libatasmart</a></span> (Gnome Disks, avec l’utilitaire d'alerte gsd-disk-utility-notify, est inclus nativement dans l'environnement de bureau gnome).</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.gnome.org/GNOME/gnome-disk-utility/">https://gitlab.gnome.org/GNOME/gnome-disk-utility/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-disk-utility">gnome-disk-utility</a></span>
</dd></dl>
<ul><li>
<b>GSmartControl</b> — Interface GNOME à smartctl.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gsmartcontrol.sourceforge.io/">https://gsmartcontrol.sourceforge.io/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gsmartcontrol">gsmartcontrol</a></span>
</dd></dl>
<h2><span class="mw-headline" id="Voir_aussi">Voir aussi</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.smartmontools.org/">Pages d’accueil du projet Smartmontools</a></li>
<li><a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/Smartmontools">Smartmontools sur le Wiki d'Ubuntu</a></li>
<li><a href="https://wiki.gentoo.org/wiki/smartmontools" class="extiw" title="gentoo:smartmontools">Gentoo: smartmontools</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fr/Category:Storage.html" title="Category:Storage (Français)">Storage (Français)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=S.M.A.R.T._(Fran%C3%A7ais)&amp;oldid=773431">https://wiki.archlinux.org/index.php?title=S.M.A.R.T._(Français)&amp;oldid=773431</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 March 2023, at 21:07.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
