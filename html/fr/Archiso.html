<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Archiso (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Archiso_Français rootpage-Archiso_Français skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Installation</span>
			</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Préparer_un_profil_personnalisé" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Pr%C3%A9parer_un_profil_personnalis%C3%A9">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Préparer un profil personnalisé</span>
			</div>
		</a>
		
			<button aria-controls="toc-Préparer_un_profil_personnalisé-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Préparer un profil personnalisé subsection</span>
			</button>
		
		<ul id="toc-Préparer_un_profil_personnalisé-sublist" class="vector-toc-list">
			<li id="toc-Structure_du_profil" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Structure_du_profil">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Structure du profil</span>
				</div>
			</a>
			
			<ul id="toc-Structure_du_profil-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Sélection_des_paquets" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#S%C3%A9lection_des_paquets">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Sélection des paquets</span>
				</div>
			</a>
			
			<ul id="toc-Sélection_des_paquets-sublist" class="vector-toc-list">
				<li id="toc-Dépôt_local_personnalisé" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#D%C3%A9p%C3%B4t_local_personnalis%C3%A9">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Dépôt local personnalisé</span>
				</div>
			</a>
			
			<ul id="toc-Dépôt_local_personnalisé-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Paquets_de_multilib" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Paquets_de_multilib">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Paquets de multilib</span>
				</div>
			</a>
			
			<ul id="toc-Paquets_de_multilib-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Ajout_de_fichiers_à_l'image" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ajout_de_fichiers_%C3%A0_l'image">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Ajout de fichiers à l'image</span>
				</div>
			</a>
			
			<ul id="toc-Ajout_de_fichiers_à_l'image-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Noyau" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Noyau">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Noyau</span>
				</div>
			</a>
			
			<ul id="toc-Noyau-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Chargeur_d'amorçage" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Chargeur_d'amor%C3%A7age">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>Chargeur d'amorçage</span>
				</div>
			</a>
			
			<ul id="toc-Chargeur_d'amorçage-sublist" class="vector-toc-list">
				<li id="toc-Boot_sécurisé_UEFI" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Boot_s%C3%A9curis%C3%A9_UEFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.1</span>
					<span>Boot sécurisé UEFI</span>
				</div>
			</a>
			
			<ul id="toc-Boot_sécurisé_UEFI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-unités_systemd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#unit%C3%A9s_systemd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.6</span>
					<span>unités systemd</span>
				</div>
			</a>
			
			<ul id="toc-unités_systemd-sublist" class="vector-toc-list">
				<li id="toc-Gestionnaire_de_connexion" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gestionnaire_de_connexion">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.6.1</span>
					<span>Gestionnaire de connexion</span>
				</div>
			</a>
			
			<ul id="toc-Gestionnaire_de_connexion-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Modification_de_la_connexion_automatique" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Modification_de_la_connexion_automatique">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.6.2</span>
					<span>Modification de la connexion automatique</span>
				</div>
			</a>
			
			<ul id="toc-Modification_de_la_connexion_automatique-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Utilisateurs_et_mots_de_passe" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilisateurs_et_mots_de_passe">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.7</span>
					<span>Utilisateurs et mots de passe</span>
				</div>
			</a>
			
			<ul id="toc-Utilisateurs_et_mots_de_passe-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Changer_le_nom_de_la_distribution_utilisé_dans_l'ISO" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Changer_le_nom_de_la_distribution_utilis%C3%A9_dans_l'ISO">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.8</span>
					<span>Changer le nom de la distribution utilisé dans l'ISO</span>
				</div>
			</a>
			
			<ul id="toc-Changer_le_nom_de_la_distribution_utilisé_dans_l'ISO-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Créer_l'ISO" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Cr%C3%A9er_l'ISO">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Créer l'ISO</span>
			</div>
		</a>
		
			<button aria-controls="toc-Créer_l'ISO-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Créer l'ISO subsection</span>
			</button>
		
		<ul id="toc-Créer_l'ISO-sublist" class="vector-toc-list">
			<li id="toc-Suppression_du_répertoire_de_travail" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Suppression_du_r%C3%A9pertoire_de_travail">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Suppression du répertoire de travail</span>
				</div>
			</a>
			
			<ul id="toc-Suppression_du_répertoire_de_travail-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Utilisation_de_l'ISO" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Utilisation_de_l'ISO">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Utilisation de l'ISO</span>
			</div>
		</a>
		
		<ul id="toc-Utilisation_de_l'ISO-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Tester_l'ISO_dans_QEMU" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Tester_l'ISO_dans_QEMU">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Tester l'ISO dans QEMU</span>
			</div>
		</a>
		
		<ul id="toc-Tester_l'ISO_dans_QEMU-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Trucs_et_astuces" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Trucs_et_astuces">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Trucs et astuces</span>
			</div>
		</a>
		
			<button aria-controls="toc-Trucs_et_astuces-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Trucs et astuces subsection</span>
			</button>
		
		<ul id="toc-Trucs_et_astuces-sublist" class="vector-toc-list">
			<li id="toc-Construction_en_ligne" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Construction_en_ligne">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>Construction en ligne</span>
				</div>
			</a>
			
			<ul id="toc-Construction_en_ligne-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Préparer_un_ISO_pour_une_installation_via_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pr%C3%A9parer_un_ISO_pour_une_installation_via_SSH">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>Préparer un ISO pour une installation via SSH</span>
				</div>
			</a>
			
			<ul id="toc-Préparer_un_ISO_pour_une_installation_via_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Se_connecter_automatiquement_à_un_réseau_Wi-Fi_en_utilisant_iwd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Se_connecter_automatiquement_%C3%A0_un_r%C3%A9seau_Wi-Fi_en_utilisant_iwd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3</span>
					<span>Se connecter automatiquement à un réseau Wi-Fi en utilisant iwd</span>
				</div>
			</a>
			
			<ul id="toc-Se_connecter_automatiquement_à_un_réseau_Wi-Fi_en_utilisant_iwd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ajustement_de_la_taille_de_la_partition_racine_à_la_volée" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ajustement_de_la_taille_de_la_partition_racine_%C3%A0_la_vol%C3%A9e">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4</span>
					<span>Ajustement de la taille de la partition racine à la volée</span>
				</div>
			</a>
			
			<ul id="toc-Ajustement_de_la_taille_de_la_partition_racine_à_la_volée-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Chiffrement" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Chiffrement">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.5</span>
					<span>Chiffrement</span>
				</div>
			</a>
			
			<ul id="toc-Chiffrement-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Images_Google_Compute_Engine" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Images_Google_Compute_Engine">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.6</span>
					<span>Images Google Compute Engine</span>
				</div>
			</a>
			
			<ul id="toc-Images_Google_Compute_Engine-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration_de_la_machine_virtuelle_libvirt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuration_de_la_machine_virtuelle_libvirt">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.7</span>
					<span>Configuration de la machine virtuelle libvirt</span>
				</div>
			</a>
			
			<ul id="toc-Configuration_de_la_machine_virtuelle_libvirt-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dépannage" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#D%C3%A9pannage">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>Dépannage</span>
			</div>
		</a>
		
			<button aria-controls="toc-Dépannage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dépannage subsection</span>
			</button>
		
		<ul id="toc-Dépannage-sublist" class="vector-toc-list">
			<li id="toc-Le_gestionnaire_de_fenêtres_se_bloque" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Le_gestionnaire_de_fen%C3%AAtres_se_bloque">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.1</span>
					<span>Le gestionnaire de fenêtres se bloque</span>
				</div>
			</a>
			
			<ul id="toc-Le_gestionnaire_de_fenêtres_se_bloque-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Voir_aussi" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Voir_aussi">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Voir aussi</span>
			</div>
		</a>
		
		<ul id="toc-Voir_aussi-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Archiso (Français)</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Archiso.html" title="Archiso">Archiso</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Archiso&amp;diff=0&amp;oldid=751017">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Archiso_as_pxe_server.html" class="mw-redirect" title="Archiso as pxe server">Archiso as pxe server</a></li>
<li><a href="../en/Offline_installation.html" title="Offline installation">Offline installation</a></li>
<li><a href="../en/USB_flash_installation_medium.html" title="USB flash installation medium">USB flash installation medium</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso">Archiso</a> est un outil hautement personnalisable pour construire des images ISO CD/USB live d'Arch Linux. Les <a rel="nofollow" class="external text" href="https://archlinux.org/download/">images officielles</a> sont construites avec Archiso. Il peut être utilisé comme base pour des systèmes de secours, des installateurs linux ou d'autres systèmes. Cet article du wiki explique comment installer Archiso et comment le configurer pour contrôler certains aspects de l'image ISO résultante, tels que les paquets et les fichiers inclus. Les exigences techniques et les étapes de construction peuvent être trouvées dans la <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/tree/master/docs">documentation officielle du projet</a>. Archiso est implémenté avec un certain nombre de scripts bash. L'élément central d'Archiso est la commande <i>mkarchiso</i>. Ses options sont documentées dans <i>mkarchiso -h</i> et ne sont pas couvertes ici.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Installation">Installation</h2></div>
<p><a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">Installez</a> le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archiso">archiso</a></span> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/archiso-git/">archiso-git</a></span><sup><small>AUR</small></sup>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Préparer_un_profil_personnalisé">
<span id="Pr.C3.A9parer_un_profil_personnalis.C3.A9"></span>Préparer un profil personnalisé</h2></div>
<p>Archiso est livré avec deux profils, <b>releng</b> et <b>baseline</b>.
</p>
<ul>
<li>
<b>releng</b> est utilisé pour créer l'ISO officiel d'installation mensuelle. Il peut être utilisé comme point de départ pour créer une image ISO personnalisée.</li>
<li>
<b>baseline</b> est une configuration minimaliste, qui ne comprend que le strict minimum de paquets nécessaires pour démarrer l'environnement live à partir du support.</li>
</ul>
<p>Pour construire une version non modifiée des profils, passez à <a href="#Cr%C3%A9er_l'ISO">#Créer l'ISO</a>. Sinon, si vous souhaitez adapter ou personnaliser l'un des profils fournis par archiso, copiez-le depuis <code>/usr/share/archiso/configs/<i>profile-name</i>/</code> vers un répertoire accessible en écriture portant le nom de votre choix. Par exemple :
</p>
<pre>$ cp -r /usr/share/archiso/configs/releng/ archlive
</pre>
<p>Passez aux sections suivantes pour personnaliser et construire le profil personnalisé.
</p>
<div class="mw-heading mw-heading3"><h3 id="Structure_du_profil">Structure du profil</h3></div>
<p>Un profil archiso contient la configuration qui définit l'image ISO résultante. La structure du profil est documentée dans <code>/usr/share/doc/archiso/README.profile.rst</code> <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/docs/README.profile.rst">[1]</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Sélection_des_paquets">
<span id="S.C3.A9lection_des_paquets"></span>Sélection des paquets</h3></div>
<p>Modifiez <code>packages.x86_64</code> pour sélectionner les paquets à installer sur l'image système live, en listant les paquets ligne par ligne.
</p>
<div class="mw-heading mw-heading4"><h4 id="Dépôt_local_personnalisé">
<span id="D.C3.A9p.C3.B4t_local_personnalis.C3.A9"></span>Dépôt local personnalisé</h4></div>
<p>Pour ajouter des paquets qui ne se trouvent pas dans les dépôts standards d'Arch (par exemple des paquets personnalisés ou des paquets provenant de <a href="../fr/Arch_User_Repository.html" title="Arch User Repository (Français)">AUR</a>/<a href="../fr/Arch_build_system.html" title="Arch build system (Français)">ABS</a>), créez un <a href="../fr/Pacman/Tips_and_tricks.html#D%C3%A9p%C3%B4t_local_personnalis%C3%A9" title="Pacman (Français)/Tips and tricks (Français)">dépôt local personnalisé</a> et ajoutez-y vos paquets personnalisés. Ajoutez ensuite votre dépôt à <code>pacman.conf</code> comme suit : 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[<i>customrepo</i>]
SigLevel = Optional TrustAll
Serveur = file://<i>/path/to/customrepo</i> (fichier)
...</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> L'ordre dans <code>pacman.conf</code> est important. Pour donner la priorité absolue à votre dépôt personnalisé, placez-le au-dessus des autres entrées de dépôt</div>
<div class="mw-heading mw-heading4"><h4 id="Paquets_de_multilib">Paquets de multilib</h4></div>
<p>Pour installer des paquets du dépôt <a href="../fr/Official_repositories.html#multilib" title="Official repositories (Français)">multilib</a>, il suffit de décommenter ce dépôt dans <code>pacman.conf</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Ajout_de_fichiers_à_l'image">
<span id="Ajout_de_fichiers_.C3.A0_l.27image"></span>Ajout de fichiers à l'image</h3></div>
<p>Le répertoire airootfs est utilisé comme point de départ pour le <a href="https://en.wikipedia.org/wiki/Root_directory" class="extiw" title="wikipedia:Root directory">root directory</a>. (<code>/</code>) du système live sur l'image. Tout son contenu sera copié dans le répertoire de travail avant l'installation des paquets.
</p>
<p>Placez tous les fichiers et/ou répertoires personnalisés à l'emplacement souhaité sous <code>airootfs/</code>. Par exemple, si vous avez un ensemble de scripts iptables sur votre système actuel que vous voulez utiliser sur votre image live, copiez-les comme tel :
</p>
<pre>$ cp -r /etc/iptables <i>archlive</i>/airootfs/etc
</pre>
<p>De même, il faut faire attention aux fichiers de configuration spéciaux qui se trouvent quelque part dans la hiérarchie. Les parties manquantes de la structure de répertoire peuvent être simplement créées avec <span class="plainlinks archwiki-template-man" title="$ man 1 mkdir"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkdir.1">mkdir(1)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce</strong> Pour ajouter un fichier au répertoire personnel de l'utilisateur de l'installation, placez-le dans <code><i>archlive</i>/airootfs/root/</code>. Pour ajouter un fichier au répertoire personnel de tous les autres utilisateurs, placez-le dans <code><i>archlive</i>/airootfs/etc/skel/</code>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Les fichiers personnalisés qui entrent en conflit avec ceux fournis par les paquets seront écrasés à moins qu'un paquet ne les spécifie comme <a href="../fr/Pacman/Pacnew_and_Pacsave.html#Fichiers_de_sauvegarde_des_paquets" title="Pacman (Français)/Pacnew and Pacsave (Français)">«backup files»</a>.</div>
<p>Par défaut, les <a href="../en/File_permissions_and_attributes.html" class="mw-redirect" title="Permissions">permissions</a> seront <code>644</code> pour les fichiers et <code>755</code> pour les répertoires. Tous ces fichiers appartiennent à l'utilisateur root. Pour définir des permissions ou des propriétés différentes pour des fichiers et/ou des dossiers spécifiques, utilisez le tableau associatif <code>file_permissions</code> dans <code>profiledef.sh</code>. Consultez <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/docs/README.profile.rst">README.profile.rst</a> pour plus de détails.
</p>
<div class="mw-heading mw-heading3"><h3 id="Noyau">Noyau</h3></div>
<p>Bien que les deux profils inclus d'archiso n'aient que <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>, les ISO peuvent être faits pour inclure d'autres ou même de multiples <a href="../fr/Kernel.html" class="mw-redirect" title="Noyau">noyaux</a>.
</p>
<p>Tout d'abord, éditez <code>packages.x86_64</code> pour inclure les noms des paquets du noyau que vous voulez. Quand <i>mkarchiso</i> s'exécute, il inclura tous les fichiers <code><i>work_dir</i>/airootfs/boot/vmlinuz-*</code> et <code><i>work_dir</i>/boot/initramfs-*.img</code> dans l'ISO (et en plus dans l'image FAT utilisée pour le démarrage UEFI).
</p>
<p>Les presets de <a href="../fr/Mkinitcpio.html" title="Mkinitcpio (Français)">mkinitcpio</a> construiront par défaut des images initramfs de secours. Pour un ISO, l'image initramfs principale n'inclut généralement pas le crochet <code>autodetect</code>, ce qui rend inutile la création d'une image de repli supplémentaire. Pour empêcher la création d'une image initramfs de secours, afin qu'elle ne prenne pas de place ou ne ralentisse pas le processus de construction, placez un préréglage personnalisé dans <code><i>archlive</i>/airootfs/etc/mkinitcpio.d/<i>pkgbase</i>.preset</code>. Par exemple, pour <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/mkinitcpio.d/linux-lts.preset</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PRESETS=('archiso')

ALL_kver='/boot/vmlinuz-linux-lts
ALL_config='/etc/mkinitcpio.conf

archiso_image="/boot/initramfs-linux-lts.img"</pre>
<p>Enfin, créez la <a href="#Chargeur_d'amor%C3%A7age">configuration du chargeur d'amorçage</a> pour permettre de démarrer le(s) noyau(x).
</p>
<div class="mw-heading mw-heading3"><h3 id="Chargeur_d'amorçage">
<span id="Chargeur_d.27amor.C3.A7age"></span>Chargeur d'amorçage</h3></div>
<p>Archiso prend en charge <a href="../fr/Syslinux.html" class="mw-redirect" title="Syslinux (Français)">syslinux</a> pour le démarrage du BIOS et <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> pour le démarrage de l'UEFI. Référez-vous aux articles des chargeurs d'amorçage pour des informations sur leur syntaxe de configuration.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce</strong> 
<ul>
<li>Le profil <b>releng</b> construit par défaut un ISO qui prend en charge les démarrages BIOS et UEFI lorsqu'il est gravé sur un disque optique à l'aide d'El Torito, ou lorsqu'il est écrit sur un disque dur (ou une clé USB, ou similaire) à l'aide de <a rel="nofollow" class="external text" href="https://wiki.syslinux.org/wiki/index.php?title=Isohybrid">Isohybrid</a>.</li>
<li>En raison de la nature modulaire d'isolinux, vous pouvez utiliser beaucoup d'addons puisque tous les fichiers <i>.c32</i> sont copiés et disponibles pour vous. Jetez un coup d'oeil au <a rel="nofollow" class="external text" href="https://wiki.syslinux.org/wiki/index.php/SYSLINUX">site officiel syslinux</a> et au <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/tree/master/configs/releng/syslinux">archiso git repo</a>. En utilisant ces addons, il est possible de faire des menus visuellement attractifs et complexes. Consultez <a rel="nofollow" class="external autonumber" href="https://wiki.syslinux.org/wiki/index.php/Comboot/menu.c32">[2]</a>.</li>
</ul>
</div>
<p>mkarchiso s'attend à ce que la configuration <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> se trouve dans le répertoire <code>efiboot</code>, et la configuration <a href="../fr/Syslinux.html" class="mw-redirect" title="Syslinux (Français)">syslinux</a> dans les répertoires <code>syslinux</code> et <code>isolinux</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Boot_sécurisé_UEFI">
<span id="Boot_s.C3.A9curis.C3.A9_UEFI"></span>Boot sécurisé UEFI</h4></div>
<p>Si vous voulez rendre votre Archiso démarrable sur un environnement activé par UEFI Secure Boot, vous devez utiliser un chargeur d'amorçage signé. Vous pouvez suivre les instructions sur <a href="../en/Secure_Boot.html#Booting_an_installation_medium" class="mw-redirect" title="Secure Boot">Secure Boot#Booting an installation medium</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="unités_systemd">
<span id="unit.C3.A9s_systemd"></span>unités systemd</h3></div>
<p>Pour <a href="../fr/Help:Reading.html#Contr%C3%B4le_des_unit%C3%A9s_de_systemd" class="mw-redirect" title="Activer">activer</a> les services/sockets/temporisateurs de systemd pour l'environnement live, vous devez créer manuellement les liens symboliques comme le fait <code>systemctl enable</code>.
</p>
<p>Par exemple, pour activer <code>gpm.service</code>, qui contient <code>WantedBy=multi-user.target</code>, exécutez :
</p>
<pre>$ mkdir -p <i>archlive</i>/airootfs/etc/systemd/system/multi-user.target.wants
$ ln -s /usr/lib/systemd/system/gpm.service <i>archlive</i>/airootfs/etc/systemd/system/multi-user.target.wants/
</pre>
<p>Les liens symboliques requis peuvent être trouvés en lisant l'unité systemd, ou si le service est installé, en l'<a href="../fr/Help:Reading.html#Contr%C3%B4le_des_unit%C3%A9s_de_systemd" class="mw-redirect" title="Activer">activant</a> et en observant la sortie de systemctl.
</p>
<div class="mw-heading mw-heading4"><h4 id="Gestionnaire_de_connexion">Gestionnaire de connexion</h4></div>
<p>Le démarrage de X au démarrage se fait en activant le service <a href="../fr/Systemd.html" title="Systemd (Français)">systemd</a> de votre gestionnaire de connexion. Si vous ne savez pas quel <i>.service</i> activer, vous pouvez facilement le découvrir si vous utilisez le même programme sur le système sur lequel vous construisez votre ISO. Utilisez simplement :
</p>
<pre>$ ls -l /etc/systemd/system/display-manager.service
</pre>
<p>Créez maintenant le même lien symbolique dans <code><i>archlive</i>/airootfs/etc/systemd/system/</code>. Pour LXDM :
</p>
<pre>$ ln -s /usr/lib/systemd/system/lxdm.service <i>archlive</i>/airootfs/etc/systemd/system/display-manager.service
</pre>
<p>Ceci activera LXDM au démarrage du système sur votre système live.
</p>
<div class="mw-heading mw-heading4"><h4 id="Modification_de_la_connexion_automatique">Modification de la connexion automatique</h4></div>
<p>La configuration de la connexion automatique de getty se trouve sous <code>airootfs/etc/systemd/system/getty@tty1.service.d/autologin.conf</code>.
</p>
<p>Vous pouvez modifier ce fichier pour changer l'utilisateur de la connexion automatique :
</p>
<pre>[Service]
ExecStart=
ExecStart=-/sbin/agetty --autologin <i><b>username</b></i> --noclear %I 38400 linux
</pre>
<p>Ou supprimez-la complètement pour désactiver la connexion automatique.
</p>
<div class="mw-heading mw-heading3"><h3 id="Utilisateurs_et_mots_de_passe">Utilisateurs et mots de passe</h3></div>
<p>Pour créer un <a href="../fr/Users_and_groups.html" title="Users and groups (Français)">utilisateur</a> qui sera disponible dans l'environnement réel, vous devez modifier manuellement <code><i>archlive</i>/airootfs/etc/passwd</code>, <code><i>archlive</i>/airootfs/etc/shadow</code>, <code><i>archlive</i>/airootfs/etc/group</code> et <code><i>archlive</i>/airootfs/etc/gshadow</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Si ces fichiers existent, ils doivent contenir l'utilisateur et le groupe root.</div>
<p>Par exemple, pour ajouter un utilisateur <code>archie</code>. Ajoutez-le à <code><i>archlive</i>/airootfs/etc/passwd</code> en suivant la syntaxe <span class="plainlinks archwiki-template-man" title="$ man 5 passwd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/passwd.5">passwd(5)</a></span> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/passwd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root:x:0:0:root:/root:/usr/bin/zsh
archie:x:1000:1000::/home/archie:/usr/bin/zsh
</pre>
<p>Générez un hachage de mot de passe avec <code>openssl passwd -6</code> et ajoutez-le à <code><i>archlive</i>/airootfs/etc/shadow</code> en suivant la syntaxe de <span class="plainlinks archwiki-template-man" title="$ man 5 shadow"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/shadow.5">shadow(5)</a></span>. Par exemple :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/shadow</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root::14871::::: :
archie:$6$randomsalt$cij4/pJREFQV/NgAgh9YyBIoCRRNq2jp5l8lbnE5aLggJnzIRmNVlogAg8N6hEEecLwXHtMQIl2NX2HlDqhCU1:14871::::: :</pre>
<p>Ajoutez le groupe de l'utilisateur et les groupes dont il fera partie à <code><i>archlive</i>/airootfs/etc/group</code> selon <span class="plainlinks archwiki-template-man" title="$ man 5 group"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/group.5">group(5)</a></span>. Par exemple :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/group</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root:x:0:root
adm:x:4:archie
wheel:x:10:archie
uucp:x:14:archie
archie:x:1000 :</pre>
<p>Créez le <code><i>archlive</i>/airootfs/etc/gshadow</code> approprié selon <span class="plainlinks archwiki-template-man" title="$ man 5 gshadow"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/gshadow.5">gshadow(5)</a></span> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/gshadow</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root:!*::root
archie:!*: :</pre>
<p>Vérifiez que <code>/etc/shadow</code> et <code>/etc/gshadow</code> ont les bonnes permissions :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/profiledef.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
file_permissions=(
  ...
  ["/etc/shadow"]="0:0:0400"
  ["/etc/gshadow"]="0:0:0400"
)</pre>
<p>Après l'installation du paquet, <i>mkarchiso</i> créera tous les répertoires personnels spécifiés pour les utilisateurs listés dans <code><i>archlive</i>/airootfs/etc/passwd</code> et y copiera <code><i>work_directory</i>/x86_64/airootfs/etc/skel/*</code>. Les fichiers copiés auront la propriété de l'utilisateur et du groupe appropriés.
</p>
<div class="mw-heading mw-heading3"><h3 id="Changer_le_nom_de_la_distribution_utilisé_dans_l'ISO">
<span id="Changer_le_nom_de_la_distribution_utilis.C3.A9_dans_l.27ISO"></span>Changer le nom de la distribution utilisé dans l'ISO</h3></div>
<p>Commencez par copier le fichier <code>/etc/os-release</code> dans le dossier <code>etc/</code> du rootfs. Ensuite, éditez le fichier en conséquence. Vous pouvez également changer le nom dans GRUB et syslinux.
</p>
<div class="mw-heading mw-heading2"><h2 id="Créer_l'ISO">
<span id="Cr.C3.A9er_l.27ISO"></span>Créer l'ISO</h2></div>
<p>Créez un ISO que vous pouvez ensuite graver sur un CD ou une clé USB en exécutant :
</p>
<pre># mkarchiso -v -w <i>/path/to/work_dir</i> -o <i>/path/to/out_dir</i> <i>/path/to/profile/</i>
</pre>
<ul>
<li>
<code>-w</code> spécifie le répertoire de travail. Si l'option n'est pas spécifiée, il s'agira par défaut de <code>work</code> dans le répertoire courant.</li>
<li>
<code>-o</code> spécifie le répertoire où l'image ISO construite sera placée. Si l'option n'est pas spécifiée, il s'agira par défaut de <code>out</code> dans le répertoire courant.</li>
<li>Il convient de noter que le fichier de profil <code>profiledef.sh</code> ne peut pas être spécifié lors de l'exécution de mkarchiso, juste le chemin d'accès au fichier.</li>
</ul>
<p>Remplacez <code><i>/path/to/profile/</i></code> par le chemin d'accès à votre profil personnalisé, ou par <code>/usr/share/archiso/configs/releng/</code> si vous construisez un profil non modifié.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce</strong> Si la mémoire le permet, il est préférable de placer le répertoire de travail en <a href="../fr/Tmpfs.html" title="Tmpfs (Français)">tmpfs</a>. Par exemple :
<pre># mkarchiso -v -w /tmp/archiso-tmp <i>/path/to/profile/</i>
</pre>
</div>
<p>Une fois exécuté, le script téléchargera et installera les paquets que vous avez spécifiés dans <code><i>work_directory</i>/x86_64/airootfs</code>, créera le noyau et les images init, appliquera vos personnalisations et enfin construira l'ISO dans le répertoire de sortie.
</p>
<div class="mw-heading mw-heading3"><h3 id="Suppression_du_répertoire_de_travail">
<span id="Suppression_du_r.C3.A9pertoire_de_travail"></span>Suppression du répertoire de travail</h3></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention</strong> Si <i>mkarchiso</i> est interrompu, exécutez <span class="plainlinks archwiki-template-man" title="$ man 8 findmnt"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/findmnt.8">findmnt(8)</a></span> pour vous assurer qu'il n'y a pas de liaison de montage avant de le supprimer - sinon, <b>vous risquez de perdre des données</b> (par ex. un périphérique externe monté dans <code>/run/media/<i>user</i>/<i>label</i></code> est lié à <code>work/x86_64/airootfs/run/media/<i>user</i>/<i>label</i></code> pendant le processus de construction).</div>
<p>Les fichiers temporaires sont copiés dans le répertoire de travail. Après avoir réussi à construire l'ISO , le répertoire de travail et son contenu peuvent être supprimés. Par exemple :
</p>
<pre># rm -rf <i>/path/to/work_dir</i>
</pre>
<div class="mw-heading mw-heading2"><h2 id="Utilisation_de_l'ISO">
<span id="Utilisation_de_l.27ISO"></span>Utilisation de l'ISO</h2></div>
<p>Consultez <a href="../en/Guide_d'installation.html#Pr%C3%A9parer_un_support_d'installation" class="mw-redirect" title="Guide d'installation">Guide d'installation#Préparer un support d'installation</a> pour connaître les différentes options.
</p>
<div class="mw-heading mw-heading2"><h2 id="Tester_l'ISO_dans_QEMU">
<span id="Tester_l.27ISO_dans_QEMU"></span>Tester l'ISO dans QEMU</h2></div>
<p><a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">Installez</a> les dépendances optionnelles <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu-desktop">qemu-desktop</a></span> et <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=edk2-ovmf">edk2-ovmf</a></span>.
</p>
<p>Utilisez le script de commodité <code>run_archiso</code> pour exécuter une image construite en utilisant <a href="../en/QEMU.html" title="QEMU">QEMU</a>.
</p>
<pre>$ run_archiso -i <i>/path/to/</i>archlinux-<i>yyyy.mm.dd</i>-x86_64.iso
</pre>
<p>La machine virtuelle peut également être exécutée à l'aide de l'émulation UEFI :
</p>
<pre>$ run_archiso -u -i <i>/path/to/</i>archlinux-<i>yyyy.mm.dd</i>-x86_64.iso
</pre>
<div class="mw-heading mw-heading2"><h2 id="Trucs_et_astuces">Trucs et astuces</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Construction_en_ligne">Construction en ligne</h3></div>
<p>Si vous ne disposez pas d'un système d'archivage ou si vous devez configurer Archiso à partir d'une autre distribution GNU/Linux, sachez qu'il existe un <a rel="nofollow" class="external text" href="https://colab.research.google.com/github/tallero/archiso-profiles/">générateur en ligne</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Préparer_un_ISO_pour_une_installation_via_SSH">
<span id="Pr.C3.A9parer_un_ISO_pour_une_installation_via_SSH"></span>Préparer un ISO pour une installation via SSH</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Depuis <code>archlinux-2021.02.01-x86_64.iso</code>, la <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/tree/bd2b861aa39167e4fc658a354071b95fbd050c0f/configs/releng/airootfs/etc/systemd/system/cloud-init.target.wants">prise en charge de cloud-init</a> est fournie, et <code>sshd.service</code> est <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/bd2b861aa39167e4fc658a354071b95fbd050c0f/configs/releng/airootfs/etc/systemd/system/multi-user.target.wants/sshd.service">activé par défaut</a>.</div>
<p>Pour <a href="../en/Install_Arch_Linux_via_SSH.html" title="Install Arch Linux via SSH">installer Arch Linux via SSH</a> sans aucune interaction avec le système, une clé publique SSH doit être placée dans <code>authorized_keys</code>.
</p>
<p>L'ajout de la clé SSH peut être fait manuellement (expliqué ici), ou <a href="../en/Install_Arch_Linux_via_SSH.html#Installation_on_a_headless_server" title="Install Arch Linux via SSH">par cloud-init</a>.
</p>
<p>Pour ajouter la clé manuellement, commencez par <a href="#Pr%C3%A9parer_un_profil_personnalis%C3%A9">copier le profil releng d'Archiso</a> dans un répertoire accessible en écriture. L'exemple suivant utilise <code>archlive</code>.
</p>
<pre>$ cp -r /usr/share/archiso/configs/<i>profil/</i> archlive
</pre>
<p>Créez un répertoire <code>.ssh</code> dans le répertoire personnel de l'utilisateur qui sera utilisé pour se connecter. Dans l'exemple suivant, nous utiliserons l'utilisateur root.
</p>
<pre>$ mkdir archlive/airootfs/root/.ssh
</pre>
<p>Ajoutez la ou les clés publiques SSH, qui seront utilisées pour se connecter, à <code>authorized_keys</code> :
</p>
<pre>$ cat ~/.ssh/<i>key1</i>.pub &gt;&gt; archlive/airootfs/root/.ssh/authorized_keys
$ cat ~/.ssh/<i>key2</i>.pub &gt;&gt; archlive/airootfs/root/.ssh/authorized_keys
</pre>
<p>Définissez les <a href="../en/File_permissions_and_attributes.html" class="mw-redirect" title="Permissions">permissions</a> et la propriété correctes pour le répertoire <code>.ssh</code> et le fichier <code>authorized_keys</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">archlive/profiledef.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
file_permissions=(
  ...
  ["/root"]="0:0:0750"
  ["/root/.ssh"]="0:0:0700"
  ["/root/.ssh/authorized_keys"]="0:0:0600"
)</pre>
<p>Enfin, <a href="#Cr%C3%A9er_l'ISO">créez l'ISO</a>. Au démarrage de l'ISO, <a href="../fr/OpenSSH.html" title="OpenSSH (Français)">OpenSSH</a> démarrera et il sera possible de se connecter en utilisant la ou les clés privées SSH correspondantes.
</p>
<div class="mw-heading mw-heading3"><h3 id="Se_connecter_automatiquement_à_un_réseau_Wi-Fi_en_utilisant_iwd">
<span id="Se_connecter_automatiquement_.C3.A0_un_r.C3.A9seau_Wi-Fi_en_utilisant_iwd"></span>Se connecter automatiquement à un réseau Wi-Fi en utilisant iwd</h3></div>
<p>Créez <code>/var/lib/iwd/</code> dans le répertoire <code>airootfs</code> du profil et définissez les permissions correctes :
</p>
<pre>$ mkdir -p <i>archlive</i>/airootfs/var/lib/iwd
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">archlive/profiledef.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
file_permissions=(
  ...
  ["/var/lib/iwd"]="0:0:0700"
)</pre>
<p>Suivez les instructions de <a href="../en/Iwd.html#Network_configuration" title="Iwd">Iwd#Network configuration</a> et de <span class="plainlinks archwiki-template-man" title="$ man 5 iwd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/iwd.network.5">iwd.network(5)</a></span> pour créer un fichier de configuration réseau pour votre réseau Wi-Fi.
</p>
<p>Enregistrez le fichier de configuration dans <code><i>archlive</i>/airootfs/var/lib/iwd/</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Ajustement_de_la_taille_de_la_partition_racine_à_la_volée">
<span id="Ajustement_de_la_taille_de_la_partition_racine_.C3.A0_la_vol.C3.A9e"></span>Ajustement de la taille de la partition racine à la volée</h3></div>
<p>Si vous obtenez le message d'erreur suivant lors du téléchargement de fichiers ou de l'installation de paquets dans l'environnement ISO démarré, vous devrez peut-être arrêter et ajuster la taille de la partition racine en redémarrant l'Archiso.
</p>
<pre>error: partition / too full: 63256 blocks needed, 61450 blocks free
error: not enough free disk space
error: failed to commit transaction (not enough free disk space) 
Errors occurred: no packages were upgraded.
</pre>
<p>Pour ajuster la taille de la partition racine sur le système Arch Linux en direct, appuyez sur la touche <code>Tab</code> pour modifier les paramètres du noyau.
Ajoutez <code>cow_spacesize=2G</code> à la fin pour obtenir une taille de 2G pour la partition racine.
Appuyez sur <code>Enter</code> pour continuer à démarrer dans le système "live".
Vous pouvez vérifier la taille des systèmes de fichiers en exécutant :
</p>
<pre>$ df -h
</pre>
<p>Vous pouvez également ajuster la taille de la partition racine à la volée en exécutant cette commande :
</p>
<pre># mount -o remount,size=2G /run/archiso/cowspace
</pre>
<p>Consultez d'autres paramètres de démarrage <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/mkinitcpio/mkinitcpio-archiso/blob/master/docs/README.bootparams">ici</a>
</p>
<div class="mw-heading mw-heading3"><h3 id="Chiffrement">Chiffrement</h3></div>
<p>Pour que <code>mkarchiso</code> produise des images chiffrées, la prise en charge de <a href="../en/Dm-crypt.html" class="mw-redirect" title="LUKS">LUKS</a> dans <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/merge_requests/217">archiso</a>, la compatibilité du hook <a href="../en/Dm-crypt/System_configuration.html" title="Dm-crypt/System configuration">encrypt</a> dans <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/mkinitcpio/mkinitcpio-archiso/-/merge_requests/25">mkinitcpio-archiso</a> et la prise en charge des <code>cryptkey</code>s imbriquées dans <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cryptsetup">cryptsetup</a></span> doivent être approuvées.
</p>
<p>Les paquets avec ces fonctionnalités sont <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/archiso-encryption/">archiso-encryption</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mkinitcpio-archiso-encryption/">mkinitcpio-archiso-encryption</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup> et <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cryptsetup-nested-cryptkey/">cryptsetup-nested-cryptkey</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>.
</p>
<p>Pour activer le chiffrement à un profil existant : 
</p>
<ul>
<li>ajoutez <code>+luks</code> à la valeur <code>airootfs_image_type</code> dans <code>profiledef.sh</code> ;</li>
<li>Définissez une <code>encryption_key</code> dans <code>profiledef.sh</code> (pour utiliser un fichier clé au lieu d'un mot de passe).</li>
<li>activer le hook <code>encrypt</code> dans <code>/etc/mkinitcpio.conf</code> ;</li>
<li>ajouter les paquets AUR (ou construire des remplacements personnalisés avec les sources mentionnées ci-dessus) dans <code>packages.x86_64</code>
</li>
<li>Ajouter le mode de construction <code>keys</code> au tableau <code>buildmodes</code> de <code>profiledef.sh</code> (pour construire un deuxième ISO contenant le fichier clé qui, placé sur un stockage externe, est capable de démarrer le système).</li>
</ul>
<p>Des exemples de configurations basées sur les profils <code>baseline</code> et <code>releng</code> sont disponibles en tant que <code>ebaseline</code> et <code>ereleng</code> dans le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/archiso-profiles/">archiso-profiles</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Images_Google_Compute_Engine">Images Google Compute Engine</h3></div>
<p>Une image compressée <code>releng</code> compatible avec Google Compute Engine est disponible sous la forme <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/archlinux-gce/">archlinux-gce</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Configuration_de_la_machine_virtuelle_libvirt">Configuration de la machine virtuelle libvirt</h3></div>
<p>Une configuration <a href="../en/Libvirt.html" title="Libvirt">libvirt</a> qui exécute l'image <code>releng</code> est disponible sous <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/archlinux-libvirt/">archlinux-libvirt</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">broken link</a>: package not found]</sup>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Dépannage">
<span id="D.C3.A9pannage"></span>Dépannage</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Le_gestionnaire_de_fenêtres_se_bloque">
<span id="Le_gestionnaire_de_fen.C3.AAtres_se_bloque"></span>Le gestionnaire de fenêtres se bloque</h3></div>
<p>Si vous voulez utiliser un <a href="../en/f866b96087c0d87093cf5906eff101d2.html" class="mw-redirect" title="Gestionnaire de fenêtres">gestionnaire de fenêtres</a> dans le Live CD, vous devez ajouter les <a href="../fr/Xorg.html#Installation_des_pilotes" title="Xorg (Français)">pilotes vidéo</a> nécessaires et corrects, ou le WM peut se bloquer au chargement.
</p>
<div class="mw-heading mw-heading2"><h2 id="Voir_aussi">Voir aussi</h2></div>
<ul>
<li><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso">Page du projet Archiso</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/tree/master/docs">Documentation officielle</a></li>
<li><a rel="nofollow" class="external text" href="https://lists.archlinux.org/mailman3/lists/arch-releng.lists.archlinux.org/">Liste de diffusion pour l'ingénierie de la version d'Arch Linux</a></li>
<li><a rel="nofollow" class="external text" href="ircs://irc.libera.chat/archlinux-releng">#archlinux-releng - canal IRC pour l'ingénierie des versions d'Arch Linux</a></li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/pierres/archiso-manager">archiso-manager - l'outil utilisé pour construire les ISOs mensuels officiels</a>.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../fr/Category:Live_Arch_systems.html" title="Category:Live Arch systems (Français)">Live Arch systems (Français)</a></li>
<li><a href="../fr/Category:Installation_process.html" title="Category:Installation process (Français)">Installation process (Français)</a></li>
<li><a href="../fr/Category:Arch_projects.html" title="Category:Arch projects (Français)">Arch projects (Français)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Archiso_(Fran%C3%A7ais)&amp;oldid=857533">https://wiki.archlinux.org/index.php?title=Archiso_(Français)&amp;oldid=857533</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 20 December 2025, at 19:52.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Archiso (Français)</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
