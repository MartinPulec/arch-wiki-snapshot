<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Arch package guidelines (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Arch_package_guidelines_Français rootpage-Arch_package_guidelines_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Prototype_de_PKGBUILD" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Prototype_de_PKGBUILD">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Prototype de PKGBUILD</div>
		</a>
		
		<ul id="toc-Prototype_de_PKGBUILD-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Étiquette_des_paquets" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%C3%89tiquette_des_paquets">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Étiquette des paquets</div>
		</a>
		
		<ul id="toc-Étiquette_des_paquets-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Nommage_des_paquets" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Nommage_des_paquets">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Nommage des paquets</div>
		</a>
		
		<ul id="toc-Nommage_des_paquets-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Version_des_paquets" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Version_des_paquets">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Version des paquets</div>
		</a>
		
		<ul id="toc-Version_des_paquets-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Dépendances_des_paquets" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#D%C3%A9pendances_des_paquets">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Dépendances des paquets</div>
		</a>
		
		<ul id="toc-Dépendances_des_paquets-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Relations_avec_les_paquets" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Relations_avec_les_paquets">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Relations avec les paquets</div>
		</a>
		
		<ul id="toc-Relations_avec_les_paquets-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Sources_des_paquets" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Sources_des_paquets">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Sources des paquets</div>
		</a>
		
		<ul id="toc-Sources_des_paquets-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Travailler_avec_les_développeurs_en_amont" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Travailler_avec_les_d%C3%A9veloppeurs_en_amont">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Travailler avec les développeurs en amont</div>
		</a>
		
		<ul id="toc-Travailler_avec_les_développeurs_en_amont-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Répertoires" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#R%C3%A9pertoires">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Répertoires</div>
		</a>
		
		<ul id="toc-Répertoires-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Fonctions_de_makepkg" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Fonctions_de_makepkg">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>Fonctions de makepkg</div>
		</a>
		
		<ul id="toc-Fonctions_de_makepkg-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Architectures" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Architectures">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">11</span>Architectures</div>
		</a>
		
		<ul id="toc-Architectures-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Licences" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Licences">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">12</span>Licences</div>
		</a>
		
		<ul id="toc-Licences-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Constructions_reproductibles" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Constructions_reproductibles">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">13</span>Constructions reproductibles</div>
		</a>
		
		<ul id="toc-Constructions_reproductibles-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Directives_supplémentaires" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Directives_suppl%C3%A9mentaires">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">14</span>Directives supplémentaires</div>
		</a>
		
		<ul id="toc-Directives_supplémentaires-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Arch package guidelines (Français)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Arch_package_guidelines.html" title="Arch package guidelines – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Arch_package_guidelines.html" title="Arch package guidelines – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Arch_%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3" title="Arch パッケージガイドライン – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Arch_package_guidelines.html" title="Arch package guidelines – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Arch_package_guidelines.html" title="Arch package guidelines – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Arch_package_guidelines" title="Arch package guidelines – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Arch_package_guidelines.html" title="Arch package guidelines">Arch package guidelines</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Arch_package_guidelines&amp;diff=0&amp;oldid=731073">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Creating_packages.html" title="Creating packages">Creating packages</a></li>
<li><a href="../fr/PKGBUILD.html" title="PKGBUILD (Français)">PKGBUILD (Français)</a></li>
<li><a href="../fr/Makepkg.html" title="Makepkg (Français)">makepkg (Français)</a></li>
<li><a href="../fr/Arch_build_system.html" class="mw-redirect" title="Arch Build System (Français)">Arch Build System (Français)</a></li>
<li><a href="../fr/Arch_User_Repository.html" title="Arch User Repository (Français)">Arch User Repository (Français)</a></li>
<li><a href="../en/Arch_package_guidelines/Security.html" title="Arch package guidelines/Security">Arch package guidelines/Security</a></li>
</ul>
</div>
<p>Lorsque vous construisez des paquets pour Arch Linux, <b>adhérez aux directives pour les paquets</b> ci-dessous, surtout si votre intention est de <b>contribuer</b> à un nouveau paquet pour Arch Linux. Vous devriez également consulter les pages de manuel <span class="plainlinks archwiki-template-man" title="$ man 5 PKGBUILD"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/PKGBUILD.5">PKGBUILD(5)</a></span> et <span class="plainlinks archwiki-template-man" title="$ man 8 makepkg"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/makepkg.8">makepkg(8)</a></span>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Prototype_de_PKGBUILD">Prototype de PKGBUILD</span></h2>
<pre># Mainteneur : Votre nom &lt;votremail@domaine.com&gt;
pkgname=NAME
pkgver=VERSION
pkgrel=1
pkgdesc=""
arch=()
url=""
license=('GPL')
groups=()
depends=()
makedepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=($pkgname-$pkgver.tar.gz)
noextract=()
md5sums=() #auto-compléter en utilisant updpkgsums

build() {
  cd "$pkgname-$pkgver

  ./configure --prefix=/usr
  make
}

package() {
  cd "$pkgname-$pkgver

  make DESTDIR="$pkgdir/" install
}</pre>
<p>D'autres prototypes se trouvent dans <code>/usr/share/pacman/</code> fourni par le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span>.
</p>
<h2>
<span id=".C3.89tiquette_des_paquets"></span><span class="mw-headline" id="Étiquette_des_paquets">Étiquette des paquets</span>
</h2>
<ul>
<li>Les paquets ne doivent <b>jamais</b> être installés sur <code>/usr/local/</code>.</li>
<li>
<b>N'introduisez pas de nouvelles variables ou fonctions</b> dans les scripts de construction <code>PKGBUILD</code>, à moins que le paquet ne puisse être construit sans cela, car elles pourraient entrer en <b>conflit</b> avec des variables et des fonctions utilisées dans makepkg lui-même.</li>
<li>Si une nouvelle variable ou une nouvelle fonction est absolument nécessaire, <b>préfixez son nom avec un trait de soulignement</b> (<code>_</code>), par exemple <pre>_customvariable=</pre>
</li>
<li>
<b>Evitez</b> d'utiliser <code>/usr/libexec/</code> pour quoi que ce soit. Utilisez plutôt <code>/usr/lib/$pkgname/</code>.</li>
<li>Le champ <code>packager</code> du fichier meta du paquet peut être <b>personnalisé</b> par le constructeur du paquet en modifiant l'option appropriée dans le fichier <code>/etc/makepkg.conf</code>, ou alternativement en créant <code>~/.makepkg.conf</code>.</li>
<li>
<b>N'utilisez pas les sous-routines de makepkg</b> (par exemple <code>error</code>, <code>msg</code>, <code>msg2</code>, <code>plain</code>, <code>warning</code>) car elles peuvent changer à tout moment. Pour imprimer des données, utilisez <code>printf</code> ou <code>echo</code>.</li>
<li>Tous les messages importants doivent être répercutés pendant l'installation à l'aide d'un <b>fichier .install</b>. Par exemple, si un paquet a besoin d'une configuration supplémentaire pour fonctionner, des instructions doivent être incluses.</li>
<li>Les <b>dépendances</b> sont l'erreur d'empaquetage la plus courante. Veuillez prendre le temps de les vérifier soigneusement, par exemple en exécutant <code>ldd</code> sur les exécutables dynamiques, en vérifiant les outils requis par les scripts ou en regardant la documentation du logiciel. L'utilitaire <a href="../en/Namcap.html" title="Namcap">namcap</a> peut vous aider à cet égard. Cet outil peut analyser à la fois PKGBUILD et le paquet résultant et vous avertira des mauvaises permissions, des dépendances manquantes, des dépendances redondantes et d'autres erreurs courantes.</li>
<li>Toute <b>dépendance optionnelle</b> qui n'est pas nécessaire à l'exécution du paquet ou à son fonctionnement général ne doit pas être incluse dans le tableau <b>depends</b> ; l'information doit plutôt être ajoutée au tableau <b>optdepends</b> :</li>
</ul>
<dl>
<dd><pre>optdepends=('cups: printing support'
            'sane: scanners support'
            'libgphoto2: digital cameras support'
            'alsa-lib: sound support'
            'giflib: GIF images support'
            'libjpeg: JPEG images support'
            'libpng: PNG images support')
</pre></dd>
<dd>L'exemple ci-dessus est tiré du paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine">wine</a></span>. Les informations optdepends sont automatiquement imprimées lors de l'installation/mise à jour, il ne faut donc <b>pas</b> conserver ce genre d'informations dans les fichiers <code>.install</code>.</dd>
</dl>
<ul>
<li>Lors de la création d'une <b>description de paquet</b> pour un paquet, n'incluez pas le nom du paquet de manière auto-référentielle.  Par exemple, "Nedit est un éditeur de texte pour X11" pourrait être simplifié en "Un éditeur de texte pour X11".  Essayez également de garder les descriptions à environ 80 caractères ou moins.</li>
<li>Essayez de maintenir la <b>longueur de ligne</b> dans le PKGBUILD en dessous de environ 100 caractères.</li>
<li>Si possible, <b>supprimez les lignes vides</b> du <code>PKGBUILD</code>. (<code>provides</code>, <code>replaces</code>, etc.)</li>
<li>Il est courant de <b>conserver l'ordre</b> des champs <code>PKGBUILD</code> comme indiqué ci-dessus. Cependant, ce n'est pas obligatoire, car la seule exigence dans ce contexte est <b>une syntaxe bash correcte</b>.</li>
<li>
<b>Utilisez des guillemets</b> pour les variables qui peuvent contenir des espaces, comme <code> "$pkgdir"</code> et <code> "$srcdir"</code>.</li>
<li>Pour garantir l'<b>intégrité</b> des paquets, assurez-vous que les variables <a href="../fr/PKGBUILD.html#Int%C3%A9grit%C3%A9" title="PKGBUILD (Français)">integrity|</a> contiennent des valeurs correctes. Celles-ci peuvent être mises à jour en utilisant l'outil <span class="plainlinks archwiki-template-man" title="$ man 8 updpkgsums"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/updpkgsums.8">updpkgsums(8)</a></span>.</li>
</ul>
<h2><span class="mw-headline" id="Nommage_des_paquets">Nommage des paquets</span></h2>
<ul>
<li>Les noms de paquets ne peuvent contenir que des caractères alphanumériques et l'un des éléments suivants : <code>@</code>, <code>.</code>, <code>_</code>, <code>+</code>, <code>-</code>. Les noms ne peuvent pas commencer par des traits d'union ou des points. Toutes les lettres doivent être en minuscules.</li>
<li>Les noms de paquets <b>ne doivent pas</b> être suffixés par le numéro de version de la version majeure amont (par exemple, nous ne voulons pas de libfoo2 si les développeurs en amont l'appelle libfoo v2.3.4) dans le cas où la bibliothèque et ses dépendances sont censées pouvoir continuer à utiliser la version la plus récente de la bibliothèque avec chaque version amont respective. Cependant, pour certains logiciels ou dépendances, cela ne peut être supposé. Dans le passé, cela a été particulièrement vrai pour les boîtes à outils de widgets telles que GTK et Qt. Les logiciels qui dépendent de ces boîtes à outils ne peuvent généralement pas être portés de manière triviale vers une nouvelle version majeure. Ainsi, dans les cas où le logiciel ne peut pas continuer à évoluer de manière triviale avec ses dépendances, les noms de paquets doivent porter le suffixe de la version majeure (par exemple gtk2, gtk3, qt4, qt5). Pour les cas où la plupart des dépendances peuvent continuer à rouler avec la dernière version, mais pas certaines (par exemple, une source fermée qui a besoin de libpng12 ou similaire), une version dépréciée de ce paquet peut être appelée libfoo1 alors que la version actuelle est juste libfoo.</li>
</ul>
<h2><span class="mw-headline" id="Version_des_paquets">Version des paquets</span></h2>
<ul>
<li>Les versions des paquets (c'est-à-dire <a href="../fr/PKGBUILD.html#pkgver" title="PKGBUILD (Français)">PKGBUILD (Français)#pkgver</a>) <b>doivent être identiques à la version publiée par l'auteur</b>. Les versions peuvent inclure des lettres si nécessaire (par exemple, la version de nmap est <code>2.54BETA32</code>). <b>Les balises de version ne peuvent pas inclure de traits d'union !</b> Seulement des lettres, des chiffres et des points.</li>
<li>Les versions de paquet (i.e. <a href="../fr/PKGBUILD.html#pkgrel" title="PKGBUILD (Français)">PKGBUILD (Français)#pkgrel</a>) sont <b>spécifiques aux paquets Arch Linux</b>. Elles permettent aux utilisateurs de différencier les paquets les plus récents des plus anciens. Lorsqu'une nouvelle version d'un paquet est publiée pour la première fois, le <b>nombre de versions commence à 1</b>. Puis, au fur et à mesure que des corrections et des optimisations sont apportées, le paquet sera <b>re-livré</b> au public d'Arch Linux et le <b>numéro de version</b> sera incrémenté. Quand une nouvelle version sort, le nombre de versions est remis à 1. Les étiquettes de version de paquet suivent les <b>mêmes restrictions de nommage que les étiquettes de version</b>.</li>
</ul>
<h2>
<span id="D.C3.A9pendances_des_paquets"></span><span class="mw-headline" id="Dépendances_des_paquets">Dépendances des paquets</span>
</h2>
<ul>
<li>
<b>Ne comptez pas sur les <a href="https://en.wikipedia.org/wiki/Transitive_dependency" class="extiw" title="wikipedia:Transitive dependency">dépendances transitives</a></b> dans aucun des <a href="../fr/PKGBUILD.html#D%C3%A9pendances" title="PKGBUILD (Français)">PKGBUILD (Français)#Dépendances</a>, car elles pourraient se casser, si une des dépendances est mise à jour.</li>
<li>Lister toutes les dépendances directes de la bibliothèque. Pour les identifier, <span class="plainlinks archwiki-template-man" title="$ man 1 find-libdeps"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/find-libdeps.1">find-libdeps(1)</a></span> (partie de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=devtools">devtools</a></span>) peut être utilisé.</li>
</ul>
<h2><span class="mw-headline" id="Relations_avec_les_paquets">Relations avec les paquets</span></h2>
<ul>
<li>N'ajoutez pas <code>$pkgname</code> à <a href="../fr/PKGBUILD.html#provides" title="PKGBUILD (Français)">PKGBUILD (Français)#provides</a>, car il est toujours implicitement fourni par le paquet.</li>
<li>Listez toutes les bibliothèques partagées externes d'un paquet dans <a href="../fr/PKGBUILD.html#provides" title="PKGBUILD (Français)">PKGBUILD (Français)#provides</a> (par exemple, <code>'libsomething.so'</code>). Pour les identifier, <span class="plainlinks archwiki-template-man" title="$ man 1 find-libprovides"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/find-libprovides.1">find-libprovides(1)</a></span> (qui fait partie de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=devtools">devtools</a></span>) peut être utilisée.</li>
</ul>
<h2><span class="mw-headline" id="Sources_des_paquets">Sources des paquets</span></h2>
<ul>
<li>Les sources HTTPS (<code>https://</code> pour les archives, <code>git+https://</code> pour les sources git) doivent être utilisées autant que possible.</li>
<li>Les sources doivent être vérifiées à l'aide de signatures PGP dans la mesure du possible (ce qui peut impliquer de construire à partir d'une balise git plutôt que d'une archive source, si l'amont signe les commits et les balises mais pas les archives).</li>
<li>Lors de la construction à partir d'une étiquette «tag» git, utilisez son hachage d'objet obtenu par <code>git rev-parse</code> au lieu du nom de l'étiquette :</li>
</ul>
<dl>
<dd><pre>_tag=1234567890123456789012345678901234567890 # git rev-parse "v$pkgver"
source=(git+https://$url.git?signed#tag=$_tag)

pkgver() {
    cd "$pkgname"
    git describe
}
</pre></dd>
<dd>Un exemple de cette approche peut être trouvé dans le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gitea">gitea</a></span>. La raison de cette pratique est que les étiquettes peuvent être modofiées de force pour changer le commit vers lequel elles pointent, ce qui modifierait le paquet construit. L'utilisation du hachage de l'objet balise garantit l'intégrité des sources car le forçage de l'étiquette modifie son hachage. L'utilisation d'une fonction <code>pkgver()</code> empêche de modifier accidentellement <code>pkgver</code> sans mettre également à jour <code>_tag</code>.</dd>
</dl>
<ul>
<li>
<b>Ne pas diminuer la sécurité ou la validité d'un paquet</b> (par exemple, en supprimant la vérification de la somme de contrôle ou la vérification de la signature PGP), parce qu'une version amont est cassée ou manque soudainement d'une certaine fonctionnalité (par exemple, la signature PGP manque pour une nouvelle version).</li>
<li>Les sources doivent être uniques dans <code>srcdir</code>. (cela peut nécessiter de les renommer lors du téléchargement, par exemple <code>"${pkgname}-${pkgver}.tar.gz::https://${pkgname}.tld/download/${pkgver}.tar.gz"</code>
</li>
<li>Éviter d'utiliser des miroirs spécifiques (par exemple sur sourceforge) pour télécharger, car ils pourraient devenir indisponibles.</li>
</ul>
<h2>
<span id="Travailler_avec_les_d.C3.A9veloppeurs_en_amont"></span><span class="mw-headline" id="Travailler_avec_les_développeurs_en_amont">Travailler avec les développeurs en amont</span>
</h2>
<p>Il est considéré comme une bonne pratique de travailler en étroite collaboration avec les développeurs en amont dans la mesure du possible. Cela implique de signaler les problèmes de construction et de test d'un paquet.
</p>
<ul>
<li>Signalez immédiatement les problèmes aux développeurs en amont.</li>
<li>Remontez les patches lorsque c'est possible.</li>
<li>Ajoutez des commentaires avec des liens vers les tickets de suivi de bogues (en amont) pertinents dans le <a href="../fr/PKGBUILD.html" title="PKGBUILD (Français)">PKGBUILD</a> (ceci est particulièrement important, car cela garantit que les autres empaqueteurs peuvent comprendre les changements et travailler avec un paquet également).</li>
</ul>
<p>Il est recommandé de suivre le flux amont avec des outils tels que <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvchecker">nvchecker</a></span> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=urlwatch">urlwatch</a></span> pour être informé des nouvelles versions stables.
</p>
<h2>
<span id="R.C3.A9pertoires"></span><span class="mw-headline" id="Répertoires">Répertoires</span>
</h2>
<ul>
<li>Les fichiers de configuration doivent être placés dans le répertoire <code>/etc</code>. S'il y a plus d'un fichier de configuration, il est d'usage d'<i>utiliser un sous-répertoire</i> afin de garder la zone <code>/etc</code> aussi propre que possible. Utilisez <code>/etc/{pkgname}/</code> où <code>{pkgname}</code> est le nom du paquet (ou une alternative appropriée, par exemple, apache utilise <code>/etc/httpd/</code>).</li>
<li>Les fichiers de paquets doivent suivre ces <b>directives générales de répertoire</b> :</li>
</ul>
<dl><dd><table>

<tbody>
<tr>
<td>
<code>/etc</code>
</td>
<td>Fichiers de configuration <b>essentiels au système</b>
</td>
</tr>
<tr>
<td>
<code>/usr/bin</code>
</td>
<td>Binaires
</td>
</tr>
<tr>
<td>
<code>/usr/lib</code>
</td>
<td>Bibliothèques
</td>
</tr>
<tr>
<td>
<code>/usr/include</code>
</td>
<td>Fichiers d'en-tête
</td>
</tr>
<tr>
<td>
<code>/usr/lib/{pkg}</code>
</td>
<td>Modules, plugins, etc.
</td>
</tr>
<tr>
<td>
<code>/usr/share/doc/{pkg}</code>
</td>
<td>Documentation de l'application
</td>
</tr>
<tr>
<td>
<code>/usr/share/info</code>
</td>
<td>Fichiers système GNU Info
</td>
</tr>
<tr>
<td>
<code>/usr/share/man</code>
</td>
<td>Pages de manuel
</td>
</tr>
<tr>
<td>
<code>/usr/share/{pkg}</code>
</td>
<td>Données de l'application
</td>
</tr>
<tr>
<td>
<code>/var/lib/{pkg}</code>
</td>
<td>Stockage persistant des applications
</td>
</tr>
<tr>
<td>
<code>/etc/{pkg}</code>
</td>
<td>Fichiers de configuration pour <code>{pkg}</code>
</td>
</tr>
<tr>
<td>
<code>/opt/{pkg}</code>
</td>
<td>Gros paquets autonomes
</td>
</tr>
</tbody>
</table></dd></dl>
<ul><li>Les paquets ne doivent contenir aucun des répertoires suivants :</li></ul>
<dl>
<dd><code>/bin</code></dd>
<dd><code>/sbin</code></dd>
<dd><code>/dev</code></dd>
<dd><code>/home</code></dd>
<dd><code>/srv</code></dd>
<dd><code>/media</code></dd>
<dd><code>/mnt</code></dd>
<dd><code>/proc</code></dd>
<dd><code>/root</code></dd>
<dd><code>/selinux</code></dd>
<dd><code>/sys</code></dd>
<dd><code>/tmp</code></dd>
<dd><code>/var/tmp</code></dd>
<dd><code>/run</code></dd>
</dl>
<h2><span class="mw-headline" id="Fonctions_de_makepkg">Fonctions de makepkg</span></h2>
<p>Lorsque <a href="../fr/Makepkg.html" title="Makepkg (Français)">makepkg</a> est utilisé pour construire un paquet, il effectue automatiquement les tâches suivantes :
</p>
<ol>
<li>Vérifie si les <b>dependencies</b> et <b>makedepends</b> du paquet sont installés</li>
<li>
<b>Télécharge les fichiers sources</b> depuis les serveurs</li>
<li>
<b>Vérifie l'intégrité</b> des fichiers sources</li>
<li>
<b>Désarchive</b> les fichiers sources</li>
<li>Applique tout <b>patch</b> nécessaire</li>
<li>
<b>Compile</b> le logiciel et l'installe dans une fausse racine</li>
<li>
<b>Dépouille</b> les symboles des binaires</li>
<li>
<b>Dépouille</b> les symboles de débogage des bibliothèques</li>
<li>
<b>Compresse</b> les pages de manuel et/ou d'information</li>
<li>Génère le <b>fichier meta du paquet</b> qui est inclus dans chaque paquet</li>
<li>
<b>Compresse</b> la fausse racine dans le fichier paquet</li>
<li>
<b>Enregistre</b> le fichier du paquet dans le répertoire de destination configuré (c'est à dire le répertoire courant «cwd» par défaut)</li>
</ol>
<h2><span class="mw-headline" id="Architectures">Architectures</span></h2>
<p>Le tableau <code>arch</code> doit contenir <code>'x86_64'</code> si le paquet compilé est spécifique à une architecture. Sinon, utilisez <code>'any'</code> pour les paquets indépendants de l'architecture.
</p>
<h2><span class="mw-headline" id="Licences">Licences</span></h2>
<p>Consultez <a href="../fr/PKGBUILD.html#license" title="PKGBUILD (Français)">PKGBUILD (Français)#license</a>.
</p>
<h2><span class="mw-headline" id="Constructions_reproductibles">Constructions reproductibles</span></h2>
<p>Arch travaille à rendre tous les paquets <a href="../en/Reproducible_builds.html" title="Reproducible builds">reproductibles</a>. Un empaqueteur peut vérifier si un paquet est reproductible avec <code>makerepropkg</code> de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=devtools">devtools</a></span> ou <code>repro</code> de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archlinux-repro">archlinux-repro</a></span>.
</p>
<pre>$ makerepropkg $pkgname-1-1-any.pkg.tar.zst
</pre>
<p>Ou
</p>
<pre>$ repro -f $pkgname-1-1-any.pkg.tar.zst
</pre>
<h2>
<span id="Directives_suppl.C3.A9mentaires"></span><span class="mw-headline" id="Directives_supplémentaires">Directives supplémentaires</span>
</h2>
<p>Assurez-vous de lire d'abord les directives ci-dessus - les points importants sont listés sur cette page et ne seront pas répétés dans les pages de directives suivantes. Ces directives spécifiques sont destinées à compléter les normes énumérées sur cette page.
</p>
<div class="toc" style="display:block; text-align: center; margin-bottom: 1em;">
<b><a href="../en/Arch_package_guidelines.html" title="Arch package guidelines">Arch package guidelines</a></b>
<hr>
<p><a href="../en/32-bit_package_guidelines.html" title="32-bit package guidelines">32-bit</a> – <a href="../en/CLR_package_guidelines.html" title="CLR package guidelines">CLR</a> – <a href="../en/CMake_package_guidelines.html" title="CMake package guidelines">CMake</a> – <a href="../en/Cross-compiling_tools_package_guidelines.html" title="Cross-compiling tools package guidelines">Cross</a> – <a href="../en/DKMS_package_guidelines.html" title="DKMS package guidelines">DKMS</a> – <a href="../en/Eclipse_plugin_package_guidelines.html" title="Eclipse plugin package guidelines">Eclipse</a> – <a href="../en/Electron_package_guidelines.html" title="Electron package guidelines">Electron</a> – <a href="../en/Font_package_guidelines.html" title="Font package guidelines">Font</a> – <a href="../en/Free_Pascal_package_guidelines.html" title="Free Pascal package guidelines">Free Pascal</a> – <a href="../en/GNOME_package_guidelines.html" title="GNOME package guidelines">GNOME</a> – <a href="../en/Go_package_guidelines.html" title="Go package guidelines">Go</a> – <a href="../en/Haskell_package_guidelines.html" title="Haskell package guidelines">Haskell</a> – <a href="../en/Java_package_guidelines.html" title="Java package guidelines">Java</a> – <a href="../en/KDE_package_guidelines.html" title="KDE package guidelines">KDE</a> – <a href="../en/Kernel_module_package_guidelines.html" title="Kernel module package guidelines">Kernel modules</a> – <a href="../en/Lisp_package_guidelines.html" title="Lisp package guidelines">Lisp</a> – <a href="../en/Meson_package_guidelines.html" title="Meson package guidelines">Meson</a> – <a href="../en/MinGW_package_guidelines.html" title="MinGW package guidelines">MinGW</a> – <a href="../en/Node.js_package_guidelines.html" title="Node.js package guidelines">Node.js</a> – <a href="../en/Nonfree_applications_package_guidelines.html" title="Nonfree applications package guidelines">Nonfree</a> – <a href="../en/OCaml_package_guidelines.html" title="OCaml package guidelines">OCaml</a> – <a href="../en/Perl_package_guidelines.html" title="Perl package guidelines">Perl</a> – <a href="../en/PHP_package_guidelines.html" title="PHP package guidelines">PHP</a> – <a href="../en/Python_package_guidelines.html" title="Python package guidelines">Python</a> – <a href="../en/R_package_guidelines.html" title="R package guidelines">R</a> – <a href="../en/Ruby_package_guidelines.html" title="Ruby package guidelines">Ruby</a> – <a href="../en/Rust_package_guidelines.html" title="Rust package guidelines">Rust</a> – <a href="../en/Shell_package_guidelines.html" title="Shell package guidelines">Shell</a> – <a href="../en/VCS_package_guidelines.html" title="VCS package guidelines">VCS</a> – <a href="../en/Web_application_package_guidelines.html" title="Web application package guidelines">Web</a> – <a href="../en/Wine_package_guidelines.html" title="Wine package guidelines">Wine</a>
</p>
</div>
<p>Les paquets soumis à l'AUR doivent en outre respecter les <a href="../en/AUR_submission_guidelines.html" title="AUR submission guidelines">AUR submission guidelines</a>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fr/Category:Arch_package_guidelines.html" title="Category:Arch package guidelines (Français)">Arch package guidelines (Français)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Arch_package_guidelines_(Fran%C3%A7ais)&amp;oldid=781474">https://wiki.archlinux.org/index.php?title=Arch_package_guidelines_(Français)&amp;oldid=781474</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 19 June 2023, at 05:34.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
