<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Internet sharing (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Internet_sharing_Français rootpage-Internet_sharing_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Pré-requis" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Pr%C3%A9-requis">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Pré-requis</div>
		</a>
		
		<ul id="toc-Pré-requis-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Adresse_IP_statique" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Adresse_IP_statique">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Adresse IP statique</div>
			</a>
			
			<ul id="toc-Adresse_IP_statique-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Activer_la_retransmission_des_paquets" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Activer_la_retransmission_des_paquets">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Activer la retransmission des paquets</div>
			</a>
			
			<ul id="toc-Activer_la_retransmission_des_paquets-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Activer_le_NAT" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Activer_le_NAT">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Activer le NAT</div>
			</a>
			
			<ul id="toc-Activer_le_NAT-sublist" class="vector-toc-list">
				<li id="toc-Avec_iptables" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Avec_iptables">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.1</span>Avec iptables</div>
			</a>
			
			<ul id="toc-Avec_iptables-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Avec_nftables" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Avec_nftables">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.2</span>Avec nftables</div>
			</a>
			
			<ul id="toc-Avec_nftables-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Attribution_d'adresses_IP_au(x)_PC_client(s)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Attribution_d'adresses_IP_au(x)_PC_client(s)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Attribution d'adresses IP au(x) PC client(s)</div>
			</a>
			
			<ul id="toc-Attribution_d'adresses_IP_au(x)_PC_client(s)-sublist" class="vector-toc-list">
				<li id="toc-Ajout_manuel_d'une_IP" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ajout_manuel_d'une_IP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.1</span>Ajout manuel d'une IP</div>
			</a>
			
			<ul id="toc-Ajout_manuel_d'une_IP-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dépannage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#D%C3%A9pannage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Dépannage</div>
		</a>
		
		<ul id="toc-Dépannage-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Voir_aussi" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Voir_aussi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Voir aussi</div>
		</a>
		
		<ul id="toc-Voir_aussi-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Internet sharing (Français)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Internet_sharing.html" title="Internet sharing – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%8D%E3%83%83%E3%83%88%E5%85%B1%E6%9C%89" title="インターネット共有 – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Internet_sharing.html" title="Internet sharing – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Internet_sharing" title="Internet sharing – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Internet_sharing.html" title="Internet sharing">Internet sharing</a>. Date de la dernière traduction: 2022-01-27. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Internet_sharing&amp;diff=0&amp;oldid=710430">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Android_tethering.html" title="Android tethering">Android tethering</a></li>
<li><a href="../en/Software_access_point.html" title="Software access point">Software access point</a></li>
<li><a href="../en/Bridge_with_netctl.html" title="Bridge with netctl">Bridge with netctl</a></li>
<li><a href="../en/Ad-hoc_networking.html" title="Ad-hoc networking">Ad-hoc networking</a></li>
<li><a href="../en/Sharing_PPP_Connection.html" title="Sharing PPP Connection">Sharing PPP Connection</a></li>
<li><a href="../en/Simple_stateful_firewall.html" title="Simple stateful firewall">Simple stateful firewall</a></li>
<li><a href="../en/Router.html" title="Router">Router</a></li>
<li><a href="../en/Mobile_broadband_modem.html" class="mw-redirect" title="USB 3G Modem">USB 3G Modem</a></li>
</ul>
</div>
<p>Cet article explique la marche à suivre pour partager une connexion Internet d'une machine à une autre.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Pr.C3.A9-requis"></span><span class="mw-headline" id="Pré-requis">Pré-requis</span>
</h2>
<p>La machine fonctionnant comme le serveur devra posséder une interface réseau supplémentaire pour établir le lien (<a href="https://en.wikipedia.org/wiki/Data_link_layer" class="extiw" title="wikipedia:Data link layer">data link layer</a>) avec la machine qui recevra la connexion Internet:
</p>
<ul>
<li>Pour partager Internet avec plusieurs machines un <a href="https://en.wikipedia.org/wiki/Network_switch" class="extiw" title="wikipedia:Network switch">switch</a> peut fournir la connexion <i>physique</i>.</li>
<li>Un périphérique sans fil peut également partager une conexion vers plusieurs machines, voir <a href="../en/Software_access_point.html" title="Software access point">Software access point</a> (en) en premier lieu.</li>
<li>Si vous partagez l'accès à une seule machine un câble croisé <a href="https://en.wikipedia.org/wiki/Ethernet_crossover_cable" class="extiw" title="wikipedia:Ethernet crossover cable">(crossover cable)</a> peut suffir. Dans le cas de deux ordinateurs ayant des carte ethernet activant la fonctionnalité <a href="https://en.wikipedia.org/wiki/Medium_Dependent_Interface#Auto_MDI-X" class="extiw" title="wikipedia:Medium Dependent Interface">MDI-X</a>, un câble normal suffit. Executez <code>ethtool <i>interface</i> | grep MDI</code> en tant que root pour en connaitre la disponibilité.</li>
</ul>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Cette section suppose que le périphérique réseau connecté à l'ordinateur client est nommé <code>net0</code> et que le périphérique réseau connecté à Internet est <code>internet0</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Vous pouvez renommer vos interfaces à votre convenance. Voir <a href="../en/Udev.html#Setting_static_device_names" title="Udev">udev#Setting static device names</a>.</div>
<p>Toute la configuration s'effectue sur l'ordinateur serveur, sauf l'étape finale <a href="#Attribution_d'adresses_IP_au(x)_PC_client(s)">#Attribution d'adresses IP au(x) PC client(s)</a>.
</p>
<h3><span class="mw-headline" id="Adresse_IP_statique">Adresse IP statique</span></h3>
<p>Sur l'ordinateur serveur assignez une adresse statique IPv4 à l'interface connectée aux autres machines. Les 3 premiers bytes de cette adresse ne pourront pas être les mêmes que ceux d'une autre interface, à moins que chaque interface ait un netmasks strictement suppérieur à /24.
</p>
<pre># ip link set up dev net0
# ip addr add 192.168.123.100/24 dev net0 # arbitrary address
</pre>
<p>Pour assigner une adresse statique lors du démarrage, vous pouvez utiliser un <a href="../en/Network_configuration.html#Network_managers" title="Network configuration">gestionnaire de connexion réseau</a>.
</p>
<h3><span class="mw-headline" id="Activer_la_retransmission_des_paquets">Activer la retransmission des paquets</span></h3>
<p>Pour consulter l'état actuel:
</p>
<pre># sysctl -a | grep forward
</pre>
<p>Remarquez que des options existent pour activer la la retransmission de paquet par défaut, par interface, ainsi que des options pour IPv4/IPv6 par interface.
</p>
<p>Pur activer la retransmission des paquets après démarrage utilisez:
</p>
<pre># sysctl net.ipv4.ip_forward=1
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Pour activer la retransmission de paquet pour une interface en particulier utilisez <code>sysctl net.ipv4.conf.<i>interface_name</i>.forwarding=1</code> à la place.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Si votre système utilise <a href="../fr/Systemd-networkd.html" title="Systemd-networkd (Français)">systemd-networkd</a> pour contrôler les interfaces réseau, un réglage pour chaque interface n'est pas possible en IPV4, voir <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.network.5">systemd.network(5)</a></span>
</div>
<p>Éditez <code>/etc/sysctl.d/30-ipforward.conf</code> pour établir les définitivement le changement après redémarrage pour toutes les interfaces:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/30-ipforward.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">net.ipv4.ip_forward=1
net.ipv6.conf.default.forwarding=1
net.ipv6.conf.all.forwarding=1
</pre>
<p>Après ceci, il est conseillé de bien vérifier que le «packet forwarding» est bien actif après reboot.
</p>
<h3><span class="mw-headline" id="Activer_le_NAT">Activer le NAT</span></h3>
<h4><span class="mw-headline" id="Avec_iptables">Avec iptables</span></h4>
<p><a href="../fr/Pacman.html#Installation_de_paquets" title="Pacman (Français)">Installez</a> le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iptables">iptables</a></span>. Et utilisez <i>iptables</i> pour activer le NAT:
</p>
<pre># iptables -t nat -A POSTROUTING -o internet0 -j MASQUERADE
# iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
# iptables -A FORWARD -i net0 -o internet0 -j ACCEPT
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Bien sûr cela fonctionne également avec une connexion mobile (généralement appellée <i>ppp0</i> sur le PC "routeur").</div>
<p>Si vous êtes connecté via PPPoE, bloquez mss sur pmtu afin d'éviter la fragmentation :
</p>
<pre># iptables -t mangle -A FORWARD -o ppp0 -p tcp -m tcp --tcp-flags SYN,RST SYN -j TCPMSS --clamp-mss-to-pmtu
</pre>
<p>Lisez l'article <a href="../fr/Iptables.html" title="Iptables (Français)">iptables</a> pour plus d'informations (notamment pour enregistrer la règle et l'appliquer automatiquement au démarrage). Il existe également un excellent guide sur iptables <a href="../en/Simple_stateful_firewall.html" title="Simple stateful firewall">Simple stateful firewall</a>.
</p>
<h4><span class="mw-headline" id="Avec_nftables">Avec nftables</span></h4>
<p><a href="../fr/Pacman.html#Installation_de_paquets" title="Pacman (Français)">Installez</a> le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nftables">nftables</a></span>. Pour activer le NAT avec <a href="../en/Nftables.html" title="Nftables">nftables</a>, vous devrez créer la chaîne <code>postrouting</code> dans une table nouvelle/existante :
</p>
<pre># nft add table inet nat
# nft add chain inet nat postrouting '{type nat hook postrouting priority 100 ; }'.
</pre>
<p>Ensuite, vous devez masquer les adresses <code>net0</code> pour <code>internet0</code> :
</p>
<pre># nft add rule inet nat postrouting oifname internet0 masquerade
</pre>
<p>Vous pouvez ajouter d'autres restrictions de pare-feu sur le transfert (en supposant que la table de filtres existe déjà, comme configuré dans <a href="../en/Nftables.html#Server" title="Nftables">nftables#Server</a>) :
</p>
<pre># nft add chain inet filter forward '{ type filter hook forward priority 0 ; policy drop ; }<i>.</i>
# nft add rule inet filter forward ct state related,established accept
# nft add rule inet filter forward iifname net0 oifname internet0 accept
</pre>
<p>Vous pouvez trouver plus d'informations sur le NAT dans nftables dans le <a rel="nofollow" class="external text" href="https://wiki.nftables.org/wiki-nftables/index.php/Performing_Network_Address_Translation_(NAT)">Wiki nftables (en)</a>. Si vous voulez rendre ces changements permanents, suivez les instructions sur l'article <a href="../en/Nftables.html" title="Nftables">nftables</a> en anglais.
</p>
<h3>
<span id="Attribution_d.27adresses_IP_au.28x.29_PC_client.28s.29"></span><span class="mw-headline" id="Attribution_d'adresses_IP_au(x)_PC_client(s)">Attribution d'adresses IP au(x) PC client(s)</span>
</h3>
<p>Si vous prévoyez d'avoir régulièrement plusieurs machines utilisant l'internet partagé par cette machine, c'est une bonne idée d'installer un serveur <a href="https://en.wikipedia.org/wiki/fr:DHCP" class="extiw" title="wikipedia:fr:DHCP">DHCP</a>, tel que <a href="../en/Dhcpd.html" title="Dhcpd">dhcpd</a> ou <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a>. Configurez ensuite un client DHCP (par exemple <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a>) sur chaque PC client.
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Ce n'est pas un guide sur iptables. L'expansion de la chaîne avec <code>iptables -I</code> pourrait sauter d'autres règles importantes ; si vous avez besoin d'un interrupteur ON/OFF pour cela, utilisez une chaîne personnalisée avec un saut placé soigneusement dans la chaîne INPUT. (Discuss in <a href="../en/Talk:Internet_sharing.html" title="Talk:Internet sharing">Talk:Internet sharing</a>)</div>
</div>
<p>Les connexions entrantes vers le port UDP 67 doivent être autorisées pour le serveur DHCP. Il est également nécessaire d'autoriser les connexions entrantes sur le port UDP/TCP 53 pour les requêtes DNS.
</p>
<pre># iptables -I INPUT -p udp --dport 67 -i net0 -j ACCEPT
# iptables -I INPUT -p udp --dport 53 -s 192.168.123.0/24 -j ACCEPT
# iptables -I INPUT -p tcp --dport 53 -s 192.168.123.0/24 -j ACCEPT
</pre>
<p>Si vous ne prévoyez pas d'utiliser cette configuration régulièrement, vous pouvez ajouter manuellement une IP à chaque client.
</p>
<h4>
<span id="Ajout_manuel_d.27une_IP"></span><span class="mw-headline" id="Ajout_manuel_d'une_IP">Ajout manuel d'une IP</span>
</h4>
<p>Au lieu d'utiliser DHCP, une adresse IP statique et une route par défaut via <code>192.168.123.100</code> peuvent également être configurées manuellement. Il existe de nombreux outils permettant de configurer le réseau en conséquence. Un exemple important d'un tel outil est <span class="plainlinks archwiki-template-man" title="$ man 8 ip"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ip.8">ip(8)</a></span>, consultez <a href="../en/Network_configuration.html#Network_management" title="Network configuration">Network configuration#Network management</a>. On peut également utiliser un fichier <code>.network</code>, consultez l'article concernant <a href="../fr/Systemd-networkd.html" title="Systemd-networkd (Français)">Systemd-networkd</a> pour configurer une IP statique.
</p>
<p>Configurez un serveur DNS pour chaque client, consultez l'article concernant la <a href="../fr/Domain_name_resolution.html" title="Domain name resolution (Français)">résolution de noms de domaine</a> pour plus de détails.
</p>
<p>Le tour est joué. Le PC client devrait maintenant avoir Internet.
</p>
<h2>
<span id="D.C3.A9pannage"></span><span class="mw-headline" id="Dépannage">Dépannage</span>
</h2>
<p>Si vous pouvez connecter les deux PC mais que vous ne pouvez pas envoyer de données (par exemple, si le PC client fait une demande DHCP au PC serveur, que ce dernier reçoit la demande et offre une IP au client, mais que ce dernier ne l'accepte pas et s'arrête), vérifiez que vous n'avez pas d'autres règles <a href="../fr/Iptables.html" title="Iptables (Français)">iptables</a> <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1093208">interférant</a>.
</p>
<h2><span class="mw-headline" id="Voir_aussi">Voir aussi</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://xyne.dev/notes/network/dhcp_with_dns.html">le guide Xyne (avec scripts) pour lancer un sous-réseau avec DHCP et DNS</a></li>
<li>
<a href="../fr/NetworkManager.html" title="NetworkManager (Français)">NetworkManager</a> peut être utilisé pour configurer un partage de connexion.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fr/Category:Network_sharing.html" title="Category:Network sharing (Français)">Network sharing (Français)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Internet_sharing_(Fran%C3%A7ais)&amp;oldid=754058">https://wiki.archlinux.org/index.php?title=Internet_sharing_(Français)&amp;oldid=754058</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 October 2022, at 08:42.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
