<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>cron (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Cron_Français rootpage-Cron_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Activation_et_démarrage_automatique" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Activation_et_d%C3%A9marrage_automatique">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Activation et démarrage automatique</div>
			</a>
			
			<ul id="toc-Activation_et_démarrage_automatique-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gestion_des_erreurs_des_tâches" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Gestion_des_erreurs_des_t%C3%A2ches">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Gestion des erreurs des tâches</div>
			</a>
			
			<ul id="toc-Gestion_des_erreurs_des_tâches-sublist" class="vector-toc-list">
				<li id="toc-Exemple_avec_sSMTP" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Exemple_avec_sSMTP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>Exemple avec sSMTP</div>
			</a>
			
			<ul id="toc-Exemple_avec_sSMTP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exemple_avec_msmtp" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Exemple_avec_msmtp">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2</span>Exemple avec msmtp</div>
			</a>
			
			<ul id="toc-Exemple_avec_msmtp-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exemple_avec_esmtp" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Exemple_avec_esmtp">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.3</span>Exemple avec esmtp</div>
			</a>
			
			<ul id="toc-Exemple_avec_esmtp-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exemple_avec_opensmtpd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Exemple_avec_opensmtpd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.4</span>Exemple avec opensmtpd</div>
			</a>
			
			<ul id="toc-Exemple_avec_opensmtpd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tâche_cron_longue" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#T%C3%A2che_cron_longue">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.5</span>Tâche cron longue</div>
			</a>
			
			<ul id="toc-Tâche_cron_longue-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Format_de_la_crontab" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Format_de_la_crontab">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Format de la crontab</div>
		</a>
		
		<ul id="toc-Format_de_la_crontab-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Commandes_de_base" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Commandes_de_base">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Commandes de base</div>
		</a>
		
		<ul id="toc-Commandes_de_base-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Exemples" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Exemples">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Exemples</div>
		</a>
		
		<ul id="toc-Exemples-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Éditeur_par_défaut" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%C3%89diteur_par_d%C3%A9faut">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Éditeur par défaut</div>
		</a>
		
		<ul id="toc-Éditeur_par_défaut-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Exécution_d'applications_basées_sur_le_serveur_X.org" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Ex%C3%A9cution_d'applications_bas%C3%A9es_sur_le_serveur_X.org">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Exécution d'applications basées sur le serveur X.org</div>
		</a>
		
		<ul id="toc-Exécution_d'applications_basées_sur_le_serveur_X.org-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Traitement_asynchrone_des_tâches" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Traitement_asynchrone_des_t%C3%A2ches">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Traitement asynchrone des tâches</div>
		</a>
		
			<button aria-controls="toc-Traitement_asynchrone_des_tâches-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Traitement asynchrone des tâches subsection</span>
			</button>
		
		<ul id="toc-Traitement_asynchrone_des_tâches-sublist" class="vector-toc-list">
			<li id="toc-Cronie" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cronie">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>Cronie</div>
			</a>
			
			<ul id="toc-Cronie-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Dcron" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dcron">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.2</span>Dcron</div>
			</a>
			
			<ul id="toc-Dcron-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cronwhip" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cronwhip">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3</span>Cronwhip</div>
			</a>
			
			<ul id="toc-Cronwhip-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Anacron" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Anacron">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.4</span>Anacron</div>
			</a>
			
			<ul id="toc-Anacron-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fcron" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fcron">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.5</span>Fcron</div>
			</a>
			
			<ul id="toc-Fcron-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Assurer_l'exclusivité" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Assurer_l'exclusivit%C3%A9">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Assurer l'exclusivité</div>
		</a>
		
		<ul id="toc-Assurer_l'exclusivité-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Cronie_2" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Cronie_2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>Cronie</div>
		</a>
		
		<ul id="toc-Cronie_2-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Dcron_2" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Dcron_2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">11</span>Dcron</div>
		</a>
		
		<ul id="toc-Dcron_2-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Voir_aussi" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Voir_aussi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">12</span>Voir aussi</div>
		</a>
		
		<ul id="toc-Voir_aussi-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">cron (Français)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Cron" title="Cron – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Cron.html" title="Cron – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Cron" title="Cron – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Cron" title="Cron – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
<li class="interlanguage-link interwiki-zh-hant mw-list-item"><a href="../zh-hant/Cron.html" title="Cron – 中文（繁體）" lang="zh-Hant" hreflang="zh-Hant" class="interlanguage-link-target"><span>中文（繁體）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Cron.html" title="Cron">Cron</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Cron&amp;diff=0&amp;oldid=733479">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Systemd/Timers.html" title="Systemd/Timers">systemd/Timers</a></li>
</ul>
</div>
<p>Selon <a href="https://en.wikipedia.org/wiki/fr:Cron" class="extiw" title="wikipedia:fr:Cron">Wikipedia</a> :
</p>
<dl><dd>
<i>cron</i> est un programme qui permet aux utilisateurs des systèmes Unix d’exécuter automatiquement des scripts, des commandes ou des logiciels à une date et une heure spécifiée à l’avance, ou selon un cycle défini à l’avance. Il est généralement utilisé pour automatiser la maintenance ou l'administration du système.</dd></dl>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Il existe de nombreuses implémentations de cron, mais aucune d'entre elles n'est installée par défaut car le système de base utilise <a href="../fr/Systemd/Timers.html" title="Systemd (Français)/Timers (Français)">systemd (Français)/Timers (Français)</a> à la place. Consultez le <a rel="nofollow" class="external text" href="https://www.gentoo.org/doc/en/cron-guide.xml">guide de cron</a> de Gentoo, qui propose des comparaisons.
</p>
<p>Paquets disponibles :
</p>
<ul>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cronie">cronie</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fcron">fcron</a></span></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dcron/">dcron</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vixie-cron/">vixie-cron</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fcron-dev/">fcron-dev</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/scron-git/">scron-git</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3>
<span id="Activation_et_d.C3.A9marrage_automatique"></span><span class="mw-headline" id="Activation_et_démarrage_automatique">Activation et démarrage automatique</span>
</h3>
<p>Après l'installation, le daemon ne sera pas activé par défaut. Le paquet installé fournit probablement un service, qui peut être contrôlé par <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" title="Systemd (Français)">systemctl</a>. Par exemple, <i>cronie</i> utilise <code>cronie.service</code>.
</p>
<p>Consultez <code>/etc/cron.daily/</code> et les répertoires similaires pour consulter les tâches présentes. L'activation du service de cron les déclenchera tous.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <i>cronie</i> fournit une tâche <i>hourly</i> (horaire) avec <code>0anacron</code> qui permet le <a href="#Traitement_asynchrone_des_t%C3%A2ches">l'exécution retardée d'autres tâches</a>, par exemple si l'ordinateur était éteint au moment de l'exécution standard.</div>
<h3>
<span id="Gestion_des_erreurs_des_t.C3.A2ches"></span><span class="mw-headline" id="Gestion_des_erreurs_des_tâches">Gestion des erreurs des tâches</span>
</h3>
<p>cron enregistre la sortie de <i>stdout</i> et <i>stderr</i> et tente de l'envoyer par courriel aux boites des utilisateurs via la commande <code>sendmail</code>. Cronie désactive la sortie du courrier si <code>/usr/bin/sendmail</code> n'est pas trouvé. Pour que le courrier soit écrit dans la boite d'un utilisateur, un daemon smtp doit tourner sur le système, par exemple <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=opensmtpd">opensmtpd</a></span>. Sinon, vous pouvez installer un paquet qui fournit la commande sendmail et le configurer pour envoyer du courrier à un serveur de courrier distant. Vous pouvez également enregistrer les messages en utilisant l'option <code>-m</code> et en écrivant un script personnalisé.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> On peut envoyer la sortie aux utilisateurs du système local en utilisant <a href="../en/Postfix.html#Local_mail" title="Postfix">Postfix#Local mail</a>.</div>
<ol>
<li>
<a href="../fr/Systemd.html#Modifier_les_unit%C3%A9s_fournies" class="mw-redirect" title="Éditez">Éditez</a> l'unité <code>cronie.service</code>.</li>
<li>Installez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/esmtp/">esmtp</a></span><sup><small>AUR</small></sup>, <a href="../en/Msmtp.html" title="Msmtp">msmtp</a>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=opensmtpd">opensmtpd</a></span>, <a href="../en/SSMTP.html" title="SSMTP">sSMTP</a>, ou écrire un script personnalisé.</li>
</ol>
<h4><span class="mw-headline" id="Exemple_avec_sSMTP">Exemple avec sSMTP</span></h4>
<p>sSMTP est un émulateur de sendmail qui envoie des courriels d'un ordinateur local vers un serveur smtp.  Bien qu'il n'y ait actuellement aucun mainteneur actif, il reste de loin le moyen le plus simple de transférer du courrier vers un mailhub configuré.  Il n'y a pas de daemons à exécuter et la configuration peut être aussi simple que l'édition de 3 lignes dans un seul fichier de configuration (si votre hôte est autorisé à relayer des courriels non authentifiés par le biais de votre mailhub). sSMTP ne reçoit pas de courriel, ne développe pas d'alias et ne gère pas de file d'attente. 
</p>
<p>Installez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ssmtp/">ssmtp</a></span><sup><small>AUR</small></sup>, qui crée un lien symbolique de <code>/usr/bin/sendmail</code> vers <code>/usr/bin/ssmtp</code>. Vous devez ensuite éditer <code>/etc/ssmtp/ssmtp.conf</code>.  Consultez <a href="../en/SSMTP.html" title="SSMTP">sSMTP</a> pour plus de détails.  La création d'un lien symbolique vers <code>/usr/bin/sendmail</code> garantit que les programmes comme <a href="../en/S-nail.html" title="S-nail">S-nail</a> (ou tout autre paquets qui fournit <code>/usr/bin/mail</code>) fonctionneront sans modification.
</p>
<p>Redémarrez <code>cronie</code> pour vous assurer qu'il détecte que vous avez maintenant un <code>/usr/bin/sendmail</code> installé.
</p>
<h4><span class="mw-headline" id="Exemple_avec_msmtp">Exemple avec msmtp</span></h4>
<p>Installez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=msmtp-mta">msmtp-mta</a></span>, qui crée un lien symbolique de <code>/usr/bin/sendmail</code> vers <code>/usr/bin/msmtp</code>. Redémarrez <code>cronie</code> pour vous assurer qu'elle détecte la nouvelle commande <code>sendmail</code>. Vous devez ensuite fournir un moyen pour <code>msmtp</code> de convertir votre nom d'utilisateur en adresse courriel.
</p>
<p>Ensuite, soit vous ajoutez la ligne <code>MAILTO</code> à votre crontab, comme ceci :
</p>
<pre>MAILTO=your@email.com
</pre>
<p><b>ou</b> créez <code>/etc/msmtprc</code> et ajoutez cette ligne :
</p>
<pre>alias /etc/aliases
</pre>
<p>et créez <code>/etc/aliases</code> : 
</p>
<pre>your_username: your@email.com
# Optional:
default: your@email.com
</pre>
<p>Puis <a href="../en/Systemd.html#Editing_provided_units" title="Systemd">modifier la configuration</a> du daemon <i>cronie</i> en remplaçant la commande <code>ExecStart</code> par :
</p>
<pre>ExecStart=/usr/bin/crond -n -m'/usr/bin/msmtp -t'
</pre>
<h4><span class="mw-headline" id="Exemple_avec_esmtp">Exemple avec esmtp</span></h4>
<p>Installez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/esmtp/">esmtp</a></span><sup><small>AUR</small></sup> et <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/procmail/">procmail</a></span><sup><small>AUR</small></sup>.
</p>
<p>Après l'installation, configurez le routage :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/esmtprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">identity <i>myself</i>@myisp.com
       hostname mail.myisp.com:25
       username <i>"myself"</i>
       password <i>"secret"</i>
       starttls enabled
       default
mda "/usr/bin/procmail -d %T"
</pre>
<p>Procmail a besoin des privilèges root pour fonctionner en mode livraison mais ce n'est pas un problème si vous exécutez les tâches de cron en root de toute façon.
</p>
<p>Pour tester que tout fonctionne correctement, créez un fichier <code>message.txt</code> avec <code>"message de test"</code> dedans. 
</p>
<p>Depuis le même répertoire, exécutez :
</p>
<pre>$ sendmail <i>nom_utilisateur</i> &lt; message.txt 
</pre>
<p>puis :
</p>
<pre>$ cat /var/spool/mail/<i>nom_d_utilisateur</i>
</pre>
<p>Vous devriez maintenant consulter le message de test ainsi que l'heure et la date de son envoi.
</p>
<p>La sortie d'erreur de tous les tâches sera maintenant redirigée vers <code>/var/spool/mail/<i>user_name</i></code>.
</p>
<p>En raison du problème de privilège, il est difficile de créer et d'envoyer des courriels à root (par exemple, <code>su -c ""</code>). Vous pouvez demander à <code>esmtp</code> de transférer tous les courriels de root à un utilisateur ordinaire avec :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/esmtprc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">force_mda="<i>user-name</i>"</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Si le test ci-dessus n'a pas fonctionné, vous pouvez essayer de créer une configuration locale dans <code>~/.esmtprc</code> avec le même contenu.
<p>Exécutez la commande suivante pour vous assurer qu'elle dispose de la bonne permission : 
</p>
<pre>$ chmod 710 ~/.esmtprc
</pre>
Ensuite, répétez le test avec <code>message.txt</code> exactement comme avant.</div>
<h4><span class="mw-headline" id="Exemple_avec_opensmtpd">Exemple avec opensmtpd</span></h4>
<p>Installez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=opensmtpd">opensmtpd</a></span>.
</p>
<p>Editez <code>/etc/smtpd/smtpd.conf</code>. La configuration suivante permet la livraison locale :
</p>
<pre>listen on localhost
action "local" mbox alias &lt;aliases&gt;
match for local action "local"
</pre>
<p>Vous pouvez procéder à un test. Tout d'abord <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Démarrez">démarrez</a> <code>smtpd.service</code>. Puis faites :
</p>
<pre>$ echo test | sendmail user
</pre>
<p>Votre <i>user</i> peut consulter son courriel avec n'importe quel <a href="../en/Category:Email_clients.html" title="Category:Email clients">client mail</a> capable de gérer le format mbox, ou simplement jeter un coup d'oeil au fichier <code>/var/spool/mail/<i>user</i></code>. Si tout se passe comme prévu, <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Activez">activez</a> opensmtpd pour les démarrages futurs.
</p>
<p>Cette approche a l'avantage de ne pas envoyer de notifications cron locales à un serveur distant. L'inconvénient est que vous devez faire tourner un nouveau daemon.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Au moment de l'écriture, le paquet Arch opensmtpd ne crée pas tous les répertoires nécessaires sous <code>/var/spool/smtpd</code>, mais le daemon vous en avertira en spécifiant les propriétaires et les permissions nécessaires. Créez-les simplement comme suggéré.</li>
<li>Même si la configuration suggérée n'accepte pas les connexions distantes, il est prudent d'ajouter une couche supplémentaire de sécurité en bloquant le port 25 avec <a href="../fr/Iptables.html" title="Iptables (Français)">iptables (Français)</a> ou similaire.</li>
</ul>
</div>
<h4>
<span id="T.C3.A2che_cron_longue"></span><span class="mw-headline" id="Tâche_cron_longue">Tâche cron longue</span>
</h4>
<p>Supposons que ce programme soit invoqué par cron :
</p>
<pre>#!/bin/sh
echo "J'ai eu une erreur récupérable !"
sleep 1h
</pre>
<p>Voici ce qui se passe :
</p>
<ol>
<li>cron exécute le script</li>
<li>dès que cron consulte une sortie, il lance votre MTA, et lui fournit les en-têtes. Il laisse le tube ouvert, parce que la tâche n'est pas terminé et qu'il peut y avoir d'autres sorties.</li>
<li>le MTA ouvre la connexion à postfix et laisse cette connexion ouverte pendant qu'il attend le reste du corps.</li>
<li>postfix ferme la connexion inactive après moins d'une heure et vous obtenez une erreur comme celle-ci : <pre>smtpmsg='421 … Error: timeout exceeded' errormsg='the server did not accept the mail'</pre>
</li>
</ol>
<p>Pour résoudre ce problème, vous pouvez utiliser la commande chronic ou sponge de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=moreutils">moreutils</a></span>.
Depuis leur page de manuel respective :
</p>
<dl>
<dt>chronic</dt>
<dd>chronic exécute une commande, et fait en sorte que sa sortie standard et son erreur standard ne soient affichées que si la commande échoue (sortie non nulle ou plantage). Si la commande réussit, toute sortie superflue sera cachée.</dd>
<dt>sponge</dt>
<dd>sponge lit l'entrée standard et l'écrit dans le fichier spécifié. Contrairement à une redirection de l'interpréteur de commandes, sponge absorbe toute son entrée avant d'ouvrir le fichier de sortie... Si aucun fichier de sortie n'est spécifié, sponge sort sur stdout.</dd>
</dl>
<p>Chronic aussi met en mémoire tampon la sortie de la commande avant d'ouvrir sa sortie standard.
</p>
<h2><span class="mw-headline" id="Format_de_la_crontab">Format de la crontab</span></h2>
<p>Le format de base d'une crontab est :
</p>
<pre><i>minute</i> <i>heure</i> <i>jour_du_mois</i> <i>mois</i> <i>jour_de_la_semaine</i> <i>commande</i>
</pre>
<ul>
<li>Les valeurs de <i>minute</i> peuvent être comprises entre 0 et 59.</li>
<li>Les valeurs des <i>heures</i> peuvent être comprises entre 0 et 23.</li>
<li>Les valeurs de <i>jour_du_mois</i> peuvent aller de 1 à 31.</li>
<li>Les valeurs de <i>mois</i> peuvent aller de 1 à 12.</li>
<li>Les valeurs de <i>jour_de_la_semaine</i> peuvent aller de 0 à 6, avec 0 pour le dimanche.</li>
</ul>
<p>Les espaces sont utilisés pour séparer les champs. Pour affiner votre organisation, vous pouvez également utiliser l'un des symboles suivants :
</p>
<table class="wikitable" style="text-align : center">
<tbody>
<tr>
<th>Symbole</th>
<th>Description
</th>
</tr>
<tr>
<td><b>*</b></td>
<td>Caractère générique, spécifie tous les intervalles de temps possibles
</td>
</tr>
<tr>
<td><b>,</b></td>
<td>Liste de plusieurs valeurs séparées par une virgule.
</td>
</tr>
<tr>
<td><b>-</b></td>
<td>Spécifie un intervalle entre deux nombres, séparés par un trait d'union
</td>
</tr>
<tr>
<td><b>/</b></td>
<td>Spécifier une périodicité/fréquence à l'aide d'une barre oblique
</td>
</tr>
</tbody>
</table>
<p>Par exemple, la ligne :
</p>
<pre>*/5 9-16 * 1-5,9-12 1-5 ~/bin/j_adore_cron.sh
</pre>
<p>exécutera le script <code>j_adore_cron.sh</code> à intervalles de cinq minutes de 9 h à 16 h 55 les jours de semaine, sauf pendant les mois de juin, juillet et août.
</p>
<p>De plus, crontab possède quelques mots-clés spéciaux :
</p>
<table class="wikitable" style="text-align: center">
<tbody>
<tr>
<th>Keyword</th>
<th>Description
</th>
</tr>
<tr>
<td><b>@reboot</b></td>
<td>au démarrage
</td>
</tr>
<tr>
<td><b>@yearly</b></td>
<td>une fois par an
</td>
</tr>
<tr>
<td><b>@annually</b></td>
<td>identique à @yearly
</td>
</tr>
<tr>
<td><b>@monthly</b></td>
<td>une fois par mois
</td>
</tr>
<tr>
<td><b>@weekly</b></td>
<td>une fois par semaine
</td>
</tr>
<tr>
<td><b>@daily</b></td>
<td>une fois par jour
</td>
</tr>
<tr>
<td><b>@midnight</b></td>
<td>identique @daily
</td>
</tr>
<tr>
<td><b>@hourly</b></td>
<td>une fois par heure
</td>
</tr>
</tbody>
</table>
<p>Par exemple :
</p>
<pre>@reboot ~/bin/j_adore_cron.sh
</pre>
<p>exécutera le script <code>j_adore_cron.sh</code> au démarrage.
</p>
<p>Pour en savoir plus, consultez : <a rel="nofollow" class="external free" href="https://www.adminschoice.com/crontab-quick-reference">https://www.adminschoice.com/crontab-quick-reference</a>
</p>
<p>Vous trouverez ci-dessous d'autres exemples et des techniques de configuration avancées.
</p>
<h2><span class="mw-headline" id="Commandes_de_base">Commandes de base</span></h2>
<p>Les crontabs ne doivent jamais être modifiés directement ; les utilisateurs doivent plutôt utiliser le programme <code>crontab</code> pour travailler avec leurs crontabs. Pour avoir accès à cette commande, l'utilisateur doit être membre du groupe users (consultez la commande <code>gpasswd</code>).
</p>
<p>Pour visualiser leurs crontabs, les utilisateurs doivent lancer la commande :
</p>
<pre>$ crontab -l
</pre>
<p>Pour modifier leurs crontabs, ils peuvent utiliser :
</p>
<pre>$ crontab -e
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Par défaut, la commande <code>crontab</code> utilise l'éditeur <code>vi</code>. Pour le changer, <a href="../en/Environment_variables.html" class="mw-redirect" title="Export">exportez</a> <code>EDITOR</code> ou <code>VISUAL</code>, ou spécifiez directement l'éditeur : <code>EDITOR=vim crontab -e</code>.</div>
<p>Pour supprimer leurs crontabs, ils doivent utiliser :
</p>
<pre>$ crontab -r
</pre>
<p>Si un utilisateur possède une crontab enregistrée et qu'il souhaite écraser complètement son ancienne crontab, il doit utiliser :
</p>
<pre>$ crontab <i>saved_crontab_filename</i>.
</pre>
<p>Pour écraser une crontab à partir de la ligne de commande (<a href="https://en.wikipedia.org/wiki/fr:Flux_standard#Entr.C3.A9e_standard" class="extiw" title="wikipedia:fr:Flux standard">Wikipedia:fr:Flux standard#Entrée standard</a>), utilisez
</p>
<pre>$ crontab - 
</pre>
<p>Pour modifier la crontab de quelqu'un d'autre, lancez la commande suivante en tant que root :
</p>
<pre># crontab -u <i>nom d'utilisateur</i> -e
</pre>
<p>Ce même format (ajouter <code>-u <i>nom d'utilisateur</i></code> à une commande) fonctionne également pour lister et supprimer les crontabs.
</p>
<h2><span class="mw-headline" id="Exemples">Exemples</span></h2>
<p>L'entrée :
</p>
<pre>01 * * * * /bin/echo Hello, world !
</pre>
<p>exécute la commande <code>/bin/echo Hello, world!</code> à la première minute de chaque heure de chaque jour de chaque mois (c'est-à-dire à 12:01, 1:01, 2:01, etc.).
</p>
<p>De même :
</p>
<pre>*/5 * * jan mon-fri /bin/echo Hello, world !
</pre>
<p>exécute le même travail toutes les cinq minutes les jours de la semaine pendant le mois de janvier (c'est-à-dire à 12:00, 12:05, 12:10, etc.).
</p>
<p>La ligne (comme indiqué dans <span class="plainlinks archwiki-template-man" title="$ man 5 crontab"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/crontab.5">crontab(5)</a></span>) :
</p>
<pre>*0,*5 9-16 * 1-5,9-12 1-5 /home/user/bin/j_adore_cron.sh
</pre>
<p>exécutera le script <code>j_adore_cron.sh</code> à intervalles de cinq minutes de 9 h à 17 h (à l'exception de 17 h) tous les jours de la semaine (du lundi au vendredi) de chaque mois, sauf en été (juin, juillet et août).
</p>
<p>Les paramètres périodiques peuvent également être saisis comme dans ce modèle crontab :
</p>
<pre># Chronological table of program loadings                                       
# Edit with "crontab" for proper functionality, "man 5 crontab" for formatting
# User: johndoe

# mm  hh  DD  MM  W /path/progam [--option]...  ( W = weekday: 0-6 [Sun=0] )
  21  01  *   *   * /usr/bin/systemctl hibernate
  @weekly           $HOME/.local/bin/trash-empty</pre>
<p>Voici quelques exemples explicites de syntaxe crontab :
</p>
<pre>30 4 echo "It is now 4:30 am."
0 22 echo "It is now 10 pm."
30 15 25 12 echo "It is 3:30pm on Christmas Day."
30 3 * * * echo "Remind me that it's 3:30am every day."
0 * * * * echo "It is the start of a new hour."
0 6 1,15 * * echo "At 6am on the 1st and 15th of every month."
0 6 * * 2,3,5 echo "At 6am on Tuesday, Wednesday and Thursdays."
59 23 * * 1-5 echo "Just before midnight on weekdays."
0 */2 * * * echo "Every two hours."
0 20 * * 4 echo "8pm on a Thursday."
0 20 * * Thu echo "8pm on a Thursday."
*/15 9-17 * * 2-5 echo "Every 15 minutes from 9am-5pm on weekdays."
@yearly echo "Happy New Year!"
</pre>
<h2>
<span id=".C3.89diteur_par_d.C3.A9faut"></span><span class="mw-headline" id="Éditeur_par_défaut">Éditeur par défaut</span>
</h2>
<p>Pour utiliser un autre éditeur par défaut, définissez la variable d'environnement <code>EDITOR</code> dans un script d'initialisation du shell comme décrit dans les <a href="../en/Environment_variables.html" title="Environment variables">variables d'environnement</a>.
</p>
<p>En tant qu'utilisateur normal, <code>su</code> devra être utilisé au lieu de <code>sudo</code> pour que la variable d'environnement soit tirée correctement :
</p>
<pre>$ su -c "crontab -e"
</pre>
<p>Pour avoir un alias à cette <code>printf</code> est nécessaire pour porter la chaîne arbitraire car <code>su</code> se lance dans un nouveau shell :
</p>
<pre>alias scron="su -c $(printf "%q " "crontab -e")"
</pre>
<h2>
<span id="Ex.C3.A9cution_d.27applications_bas.C3.A9es_sur_le_serveur_X.org"></span><span class="mw-headline" id="Exécution_d'applications_basées_sur_le_serveur_X.org">Exécution d'applications basées sur le serveur X.org</span>
</h2>
<p>Cron ne s'exécute pas sous le serveur X.org ; il ne peut donc pas connaître les variables d'environnement nécessaires pour pouvoir lancer une application serveur X.org ; il faudra donc les définir. On peut utiliser un programme comme <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xuserrun-git/">xuserrun-git</a></span><sup><small>AUR</small></sup> pour le faire :
</p>
<pre>17 02 * ... /usr/bin/xuserrun /usr/bin/xclock
</pre>
<p>Ou bien ils peuvent être définis manuellement (<code>echo $DISPLAY</code> donnera la valeur actuelle de DISPLAY) :
</p>
<pre>17 02 * ... env DISPLAY=:0 /usr/bin/xclock
</pre>
<p>Si vous exécutez notify-send pour les notifications de bureau dans cron, notify-send envoie des valeurs à dbus. Il doit donc dire à dbus de se connecter au bon bus. 
L'adresse peut être trouvée en examinant la variable d'environnement DBUS_SESSION_BUS_ADDRESS et en lui donnant la même valeur. Donc : 
</p>
<pre>17 02 * ... env DBUS_SESSION_BUS_ADDRESS=votre-adresse notify-send 'Machin truc'
</pre>
<p>Si cela est fait par SSH, par exemple, la permission devra être donnée :
</p>
<pre># xhost +si:localuser:$(whoami)
</pre>
<h2>
<span id="Traitement_asynchrone_des_t.C3.A2ches"></span><span class="mw-headline" id="Traitement_asynchrone_des_tâches">Traitement asynchrone des tâches</span>
</h2>
<p>Si vous éteignez régulièrement votre ordinateur mais que vous ne voulez pas manquer les travaux, il existe quelques solutions (de la plus simple à la plus difficile) :
</p>
<h3><span class="mw-headline" id="Cronie">Cronie</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cronie">cronie</a></span> est livré avec anacron inclus. La page d'accueil du projet dit :
</p>
<p>Cronie contient le daemon UNIX standard crond qui exécute des programmes spécifiés à des heures programmées et les outils associés.
Il est basé sur le cron original et possède des améliorations de sécurité et de configuration comme la possibilité d'utiliser pam et SELinux.
</p>
<h3><span class="mw-headline" id="Dcron">Dcron</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dcron/">dcron</a></span><sup><small>AUR</small></sup> prend en charge de base le traitement asynchrone des tâches. Il suffit de le mettre avec @hourly, @daily, @weekly ou @monthly avec un nom de tâche, comme ceci :
</p>
<pre>@hourly ID=meilleure_tache echo Cete tâche est très utile.
</pre>
<h3><span class="mw-headline" id="Cronwhip">Cronwhip</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cronwhip/">cronwhip</a></span><sup><small>AUR</small></sup> est un script pour exécuter automatiquement les tâches cron manquées ; il fonctionne avec l'ancienne implémentation cron par défaut, <i>dcron</i>.
Consultez également le fil de discussion du forum <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=57973">[1]</a>.
</p>
<h3><span class="mw-headline" id="Anacron">Anacron</span></h3>
<p>Anacron est un remplacement complet de <i>dcron</i> qui traite les tâches de manière asynchrone.
</p>
<p>Il est fourni par <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cronie">cronie</a></span>. Le fichier de configuration est <code>/etc/anacrontab</code>. Des informations sur le format peuvent être trouvées dans <span class="plainlinks archwiki-template-man" title="$ man 5 anacrontab"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/anacrontab.5">anacrontab(5)</a></span>. L'exécution de <code>anacron -T</code> testera la validité de <code>/etc/anacrontab</code>.
</p>
<h3><span class="mw-headline" id="Fcron">Fcron</span></h3>
<p>Comme <i>anacron</i>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fcron">fcron</a></span> suppose que l'ordinateur n'est pas toujours en marche et, contrairement à <i>anacron</i>, il peut programmer des événements à des intervalles plus courts qu'une journée, ce qui peut être utile pour les systèmes qui suspendent/hibernent régulièrement (comme un ordinateur portable). Comme cronwhip, fcron peut exécuter des tâches qui auraient dû être exécutées pendant le temps d'arrêt de l'ordinateur.
</p>
<p>Si vous remplacez <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cronie">cronie</a></span> par fcron, sachez que le répertoire de spool est <code>/var/spool/fcron</code> et que la commande <code>fcrontab</code> est utilisée à la place de <i>crontab</i> pour modifier les crontabs de l'utilisateur. Ces crontabs sont stockés dans un format binaire avec la version texte à côté sous le nom de <i>foo</i>.orig dans le répertoire spool. Tous les scripts qui modifient manuellement les crontabs des utilisateurs peuvent avoir besoin d'être ajustés en raison de cette différence de comportement.
</p>
<p>Un script rapide qui peut aider à convertir les crontabs utilisateurs traditionnels au format fcron :
</p>
<pre>cd /var/spool/cron &amp;&amp; (
 for ctab in * ; do
  fcrontab ${ctab} -u ${ctab}
 done
)
</pre>
<p>Consultez également le fil de discussion du forum <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=140497">[2]</a>.
</p>
<h2>
<span id="Assurer_l.27exclusivit.C3.A9"></span><span class="mw-headline" id="Assurer_l'exclusivité">Assurer l'exclusivité</span>
</h2>
<p>Si vous exécutez des tâches qui peuvent durer longtemps (par exemple, une sauvegarde peut soudainement durer longtemps, en raison de nombreux changements ou d'une connexion réseau particulièrement lente), <code>flock</code> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span>) peut garantir que la tâche cron ne démarrera pas une deuxième fois. (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span>) peut garantir que la tâche cron ne démarrera pas une seconde fois.
</p>
<pre>  5,35 * * * * /usr/bin/flock -n /tmp/lock.backup /root/make-backup.sh
</pre>
<h2><span class="mw-headline" id="Cronie_2">Cronie</span></h2>
<p>La hiérarchie des fichiers pertinents pour cronie est la suivante :
</p>
<pre>   /etc/
     |----- cron.d/
              | ----- 0hourly
     |----- cron.minutely/
     |----- cron.hourly/
              | ----- 0anacron
     |----- anacrontab
     |----- cron.daily/
     |----- cron.monthly/
     |----- cron.weekly/
     |----- crontab
     |----- cron.deny
</pre>
<p>Cronie fournit à la fois les fonctionnalités <i>cron</i> et <i>anacron</i> : <i>cron</i> exécute des tâches à intervalles réguliers (jusqu'à une granularité d'une minute) tant que le système est disponible à l'heure spécifiée, tandis que <i>anacron</i> exécute des commandes à des intervalles spécifiés en jours. Contrairement à cron, il ne suppose pas que le système fonctionne en permanence. Chaque fois que le système est en marche, <i>anacron</i> vérifie s'il y a des travaux qui auraient dû être exécutés et les traite en conséquence. 
</p>
<p>Une tâche <i>cron</i> peut être définie dans un fichier de type crontab dans le répertoire <code>/etc/cron.d</code> ou ajoutée dans le fichier <code>/etc/crontab</code>. Notez que ce dernier n'est pas présent par défaut mais est utilisé s'il existe. Selon les instructions de <code>/etc/cron.d/0hourly</code>, tout fichier exécutable dans <code>/etc/cron.hourly</code> sera lancé toutes les heures (par défaut à la minute 1 de l'heure). Les fichiers dans <code>/etc/cron.minutely</code> sont exécutés toutes les minutes si cela est indiqué dans <code>/etc/cron.d/0hourly</code>. Les exécutables sont généralement des scripts shell, des liens symboliques vers des fichiers exécutables peuvent également être utilisés. 
Le fichier <code>/etc/cron.deny</code> inclut la liste des utilisateurs non autorisés à utiliser crontab, sans ce fichier, seuls les utilisateurs listés dans <code>/etc/cron.allow</code> peuvent l'utiliser. 
</p>
<p><i>Anacron</i> fonctionne de manière similaire, en exécutant les fichiers des répertoires <code>/etc/cron.daily</code>, <code>/etc/cron.weekly</code> et <code>/etc/cron.monthly</code>, placés là en fonction de la fréquence de travail souhaitée. Le travail cron <code>/etc/cron.hourly/0anacron</code> s'assure que <i>anacron</i> est lancé une fois par jour pour effectuer ses tâches en attente.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Cronie utilise <code>run-parts</code> pour exécuter les scripts dans les différents répertoires. Les noms de fichiers ne doivent pas inclure de point (.) car <code>run-parts</code>, dans son mode par défaut, les ignorera silencieusement (consultez <span class="plainlinks archwiki-template-man" title="$ man 8 run-parts"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/run-parts.8">run-parts(8)</a></span>). Les noms doivent être composés uniquement de lettres majuscules et minuscules, de chiffres, de traits de soulignement et de traits d'union en moins.</li>
<li>La sortie de <code>systemctl status cronie</code> peut afficher un message tel que <code>CAN'T OPEN (/etc/crontab) : No such file or directory</code>. Cependant, ceci peut être ignoré puisque cronie n'en a pas besoin.</li>
<li>Cronie est particulier quant aux permissions pour <code>/etc/cron.d/0hourly</code>. Aucune des tâches de <code>/etc/cron.d/{hourly,weekly,daily} ... etc</code> ne sera exécutée (y compris le lanceur anacron) si <code>/etc/cron.d/0hourly</code> est endommagé ou a des permissions incorrectes. <code>pacman -Qkk cronie</code> peut montrer si vous avez de tels problèmes.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Pour empêcher l'envoi de la sortie et arrêter l'alerte par courriel, ajoutez <code>&gt;/dev/null 2&gt;&amp;1</code> à la fin de la ligne de chaque tâche cron pour rediriger la sortie vers /dev/null. 
<pre>0 1 5 10 * /path/to/script.sh &gt;/dev/null 2&gt;&amp;1
</pre>
Vous pouvez également définir la variable <code>MAILTO=""</code> dans votre fichier crontab pour désactiver les alertes courriel.</div>
<h2><span class="mw-headline" id="Dcron_2">Dcron</span></h2>
<p>Le daemon cron analyse un fichier de configuration appelé <code>crontab</code>. Chaque utilisateur du système peut maintenir un fichier crontab distinct pour programmer des commandes individuellement. Le crontab de l'utilisateur root est utilisé pour planifier les tâches de l'ensemble du système (bien que les utilisateurs puissent choisir d'utiliser <code>/etc/crontab</code> ou le répertoire <code>/etc/cron.d</code>, selon l'implémentation de cron qu'ils choisissent).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/spool/cron/root</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Exécuter la commande à un moment programmé
# Modifier avec 'crontab -e' pour vérifier les erreurs, man 1 crontab pour un format acceptable.

# &lt;@freq&gt; &lt;balises et commande&gt;
@hourly ID=sys-hourly /usr/sbin/run-cron /etc/cron.hourly
@daily ID=sys-daily /usr/sbin/run-cron /etc/cron.daily
@weekly ID=sys-weekly /usr/sbin/run-cron /etc/cron.weekly
@monthly ID=sys-monthly /usr/sbin/run-cron /etc/cron.monthly

# mm hh DD MM W /path/command (ou tags) # W = semaine : 0-6, Sun=0
  21 01 * * * /usr/bin/systemctl suspend
</pre>
<p>Ces lignes illustrent l'un des formats que peuvent avoir les entrées crontab, à savoir des champs séparés par des espaces blancs spécifiant :
</p>
<ol>
<li>@period</li>
<li>ID=jobname (cette balise est spécifique à dcron)</li>
<li>commande</li>
</ol>
<p>L'autre format standard pour les entrées crontab est :
</p>
<ol>
<li>minute</li>
<li>heure</li>
<li>jour</li>
<li>mois</li>
<li>Jour de la semaine</li>
<li>commande</li>
</ol>
<p>Les fichiers crontab eux-mêmes sont généralement stockés dans <code>/var/spool/cron/username</code>. Par exemple, le crontab de root se trouve dans <code>/var/spool/cron/root</code>.
</p>
<p>Consultez la <a href="../en/Man_page.html" title="Man page">page de manuel</a> de crontab pour plus d'informations et des exemples de configuration.
</p>
<h2><span class="mw-headline" id="Voir_aussi">Voir aussi</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.gentoo.org/doc/en/cron-guide.xml">Guide du Cron de Gentoo Linux</a></li>
<li>
<a rel="nofollow" class="external text" href="https://crontab.guru/">crontab.guru</a> - éditeur en ligne pour les expressions de cronjob.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fr/Category:System_administration.html" title="Category:System administration (Français)">System administration (Français)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Cron_(Fran%C3%A7ais)&amp;oldid=750998">https://wiki.archlinux.org/index.php?title=Cron_(Français)&amp;oldid=750998</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 3 October 2022, at 14:53.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
