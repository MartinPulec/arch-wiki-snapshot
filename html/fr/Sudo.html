<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Sudo (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Sudo_Français rootpage-Sudo_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installation</div>
		</a>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Utilisation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Utilisation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Utilisation</div>
		</a>
		
		<ul id="toc-Utilisation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuration" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Configuration</div>
		</a>
		
			<button aria-controls="toc-Configuration-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuration subsection</span>
			</button>
		
		<ul id="toc-Configuration-sublist" class="vector-toc-list">
			<li id="toc-Squelette_des_paramètres_par_défaut" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Squelette_des_param%C3%A8tres_par_d%C3%A9faut">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Squelette des paramètres par défaut</div>
			</a>
			
			<ul id="toc-Squelette_des_paramètres_par_défaut-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Afficher_les_paramètres_actuels" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Afficher_les_param%C3%A8tres_actuels">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Afficher les paramètres actuels</div>
			</a>
			
			<ul id="toc-Afficher_les_paramètres_actuels-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utilisation_de_visudo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilisation_de_visudo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Utilisation de visudo</div>
			</a>
			
			<ul id="toc-Utilisation_de_visudo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exemples_d'entrées" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Exemples_d'entr%C3%A9es">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Exemples d'entrées</div>
			</a>
			
			<ul id="toc-Exemples_d'entrées-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Permissions_par_défaut_des_fichiers_Sudoers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Permissions_par_d%C3%A9faut_des_fichiers_Sudoers">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Permissions par défaut des fichiers Sudoers</div>
			</a>
			
			<ul id="toc-Permissions_par_défaut_des_fichiers_Sudoers-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Trucs_et_astuces" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Trucs_et_astuces">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Trucs et astuces</div>
		</a>
		
			<button aria-controls="toc-Trucs_et_astuces-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Trucs et astuces subsection</span>
			</button>
		
		<ul id="toc-Trucs_et_astuces-sublist" class="vector-toc-list">
			<li id="toc-Désactiver_la_temporisation_de_l'invite_de_mot_de_passe" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9sactiver_la_temporisation_de_l'invite_de_mot_de_passe">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Désactiver la temporisation de l'invite de mot de passe</div>
			</a>
			
			<ul id="toc-Désactiver_la_temporisation_de_l'invite_de_mot_de_passe-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ajouter_une_cloche_de_terminal_à_l'invite_de_mot_de_passe" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ajouter_une_cloche_de_terminal_%C3%A0_l'invite_de_mot_de_passe">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Ajouter une cloche de terminal à l'invite de mot de passe</div>
			</a>
			
			<ul id="toc-Ajouter_une_cloche_de_terminal_à_l'invite_de_mot_de_passe-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Passer_des_alias" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Passer_des_alias">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Passer des alias</div>
			</a>
			
			<ul id="toc-Passer_des_alias-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Désactiver_un_sudo_par_terminal" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9sactiver_un_sudo_par_terminal">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Désactiver un sudo par terminal</div>
			</a>
			
			<ul id="toc-Désactiver_un_sudo_par_terminal-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Réduire_le_nombre_de_fois_où_vous_devez_taper_un_mot_de_passe" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#R%C3%A9duire_le_nombre_de_fois_o%C3%B9_vous_devez_taper_un_mot_de_passe">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Réduire le nombre de fois où vous devez taper un mot de passe</div>
			</a>
			
			<ul id="toc-Réduire_le_nombre_de_fois_où_vous_devez_taper_un_mot_de_passe-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Variables_d'environnement" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Variables_d'environnement">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>Variables d'environnement</div>
			</a>
			
			<ul id="toc-Variables_d'environnement-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mot_de_passe_root" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mot_de_passe_root">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7</span>Mot de passe root</div>
			</a>
			
			<ul id="toc-Mot_de_passe_root-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Désactiver_la_connexion_root" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9sactiver_la_connexion_root">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8</span>Désactiver la connexion root</div>
			</a>
			
			<ul id="toc-Désactiver_la_connexion_root-sublist" class="vector-toc-list">
				<li id="toc-kdesu" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#kdesu">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8.1</span>kdesu</div>
			</a>
			
			<ul id="toc-kdesu-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Exemple_de_durcissement_avec_sudo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Exemple_de_durcissement_avec_sudo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9</span>Exemple de durcissement avec sudo</div>
			</a>
			
			<ul id="toc-Exemple_de_durcissement_avec_sudo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configurer_sudo_en_utilisant_les_fichiers_de_dépôt_dans_/etc/sudoers.d" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configurer_sudo_en_utilisant_les_fichiers_de_d%C3%A9p%C3%B4t_dans_/etc/sudoers.d">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10</span>Configurer sudo en utilisant les fichiers de dépôt dans /etc/sudoers.d</div>
			</a>
			
			<ul id="toc-Configurer_sudo_en_utilisant_les_fichiers_de_dépôt_dans_/etc/sudoers.d-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Édition_de_fichiers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%C3%89dition_de_fichiers">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11</span>Édition de fichiers</div>
			</a>
			
			<ul id="toc-Édition_de_fichiers-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Activer_les_insultes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Activer_les_insultes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.12</span>Activer les insultes</div>
			</a>
			
			<ul id="toc-Activer_les_insultes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dépannage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#D%C3%A9pannage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Dépannage</div>
		</a>
		
			<button aria-controls="toc-Dépannage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dépannage subsection</span>
			</button>
		
		<ul id="toc-Dépannage-sublist" class="vector-toc-list">
			<li id="toc-Problème_de_SSH_sans_TTY" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Probl%C3%A8me_de_SSH_sans_TTY">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Problème de SSH sans TTY</div>
			</a>
			
			<ul id="toc-Problème_de_SSH_sans_TTY-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Permissive_umask" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Permissive_umask">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Permissive umask</div>
			</a>
			
			<ul id="toc-Permissive_umask-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Sudo (Français)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 8 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-8" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">8 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/sudo" title="sudo – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Sudo.html" title="Sudo – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Sudo.html" title="Sudo – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Sudo" title="Sudo – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Sudo.html" title="Sudo – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Sudo.html" title="Sudo – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-uk mw-list-item"><a href="../uk/Sudo.html" title="Sudo – українська" lang="uk" hreflang="uk" class="interlanguage-link-target"><span>Українська</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Sudo" title="Sudo – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Sudo.html" title="Sudo">Sudo</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Sudo&amp;diff=0&amp;oldid=739727">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../fr/Users_and_groups.html" title="Users and groups (Français)">Users and groups (Français)</a></li>
<li><a href="../fr/Su.html" title="Su (Français)">su (Français)</a></li>
<li><a href="../en/Doas.html" title="Doas">doas</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.sudo.ws/sudo/">Sudo</a> permet à un administrateur système de déléguer l'autorité pour donner à certains utilisateurs - ou groupes d'utilisateurs - la possibilité d'exécuter des commandes en tant que root ou un autre utilisateur tout en fournissant une piste d'audit des commandes et de leurs arguments.
</p>
<p>Sudo est une alternative à <a href="../fr/Su.html" title="Su (Français)">su</a> pour exécuter des commandes en tant que root. Contrairement à <a href="../fr/Su.html" title="Su (Français)">su</a>, qui lance un shell root permettant à toutes les autres commandes d'accéder à l'utilisateur root, sudo accorde une élévation temporaire des privilèges à une seule commande. En activant les privilèges root uniquement lorsque cela est nécessaire, l'utilisation de sudo réduit la probabilité qu'une faute de frappe ou un bug dans une commande invoquée ruine le système.
</p>
<p>Sudo peut également être utilisé pour exécuter des commandes en tant qu'autres utilisateurs ; en outre, sudo enregistre toutes les commandes et les tentatives d'accès échouées à des fins d'audit de sécurité.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">Installez</a> le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span>.
</p>
<h2><span class="mw-headline" id="Utilisation">Utilisation</span></h2>
<p>Pour commencer à utiliser <code>sudo</code> en tant qu'utilisateur non privilégié, il doit être correctement configuré. Consultez <a href="#Configuration">#Configuration</a>.
</p>
<p>Pour utiliser <i>sudo</i>, il suffit de préfixer une commande et ses arguments par <code>sudo</code> et un espace :
</p>
<pre>$ sudo <i>cmd</i>
</pre>
<p>Par exemple, pour utiliser pacman :
</p>
<pre>$ sudo pacman -Syu
</pre>
<p>Consultez <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8">sudo(8)</a></span> pour plus d'informations.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3>
<span id="Squelette_des_param.C3.A8tres_par_d.C3.A9faut"></span><span class="mw-headline" id="Squelette_des_paramètres_par_défaut">Squelette des paramètres par défaut</span>
</h3>
<p><span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5#SUDOERS_OPTIONS">sudoers(5) § SUDOERS OPTIONS</a></span> liste toutes les options qui peuvent être utilisées avec la commande <code>Defaults</code> dans le fichier <code>/etc/sudoers</code>.
</p>
<p>Consultez <a rel="nofollow" class="external autonumber" href="https://gist.github.com/AladW/7eca9799b9ea624eca31">[1]</a> pour obtenir une liste d'options (analysées à partir du code source de la version 1.8.7) dans un format optimisé pour <code>sudoers</code>.
</p>
<p>Consultez <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> pour plus d'informations, comme la configuration du délai d'expiration du mot de passe.
</p>
<h3>
<span id="Afficher_les_param.C3.A8tres_actuels"></span><span class="mw-headline" id="Afficher_les_paramètres_actuels">Afficher les paramètres actuels</span>
</h3>
<p>Exécutez <code>sudo -ll</code> pour imprimer la configuration sudo actuelle, ou <code>sudo -lU <i>user</i></code> pour un utilisateur spécifique.
</p>
<h3><span class="mw-headline" id="Utilisation_de_visudo">Utilisation de visudo</span></h3>
<p>Le fichier de configuration de sudo est <code>/etc/sudoers</code>. Il doit <b>toujours</b> être édité avec la commande <span class="plainlinks archwiki-template-man" title="$ man 8 visudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/visudo.8">visudo(8)</a></span>. La commande <i>visudo</i> verrouille le fichier <code>sudoers</code>, enregistre les modifications dans un fichier temporaire, et vérifie qu'il n'y a pas d'erreurs de syntaxe avant de le copier dans <code>/etc/sudoers</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> 
<ul>
<li>Il est impératif que le fichier <code>sudoers</code> soit exempt d'erreurs de syntaxe ! Toute erreur rend sudo inutilisable. Il faut <b>toujours</b> l'éditer avec <i>visudo</i> pour éviter les erreurs.</li>
<li>
<span class="plainlinks archwiki-template-man" title="$ man 8 visudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/visudo.8">visudo(8)</a></span> prévient que configurer <i>visudo</i> pour honorer les variables d'environnement de l'utilisateur pour l'éditeur de son choix peut être une faille de sécurité, puisqu'elle permet à l'utilisateur avec les privilèges de <i>visudo</i> d'exécuter des commandes arbitraires en tant que root sans journalisation simplement en définissant cette variable à quelque chose d'autre.</li>
</ul>
</div>
<p>L'éditeur par défaut de <i>visudo</i> est <i>vi</i>. Le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span> est compilé avec <code>--with-env-editor</code> et respecte l'utilisation des variables <code>SUDO_EDITOR</code>, <code>VISUAL</code> et <code>EDITOR</code>. <code>EDITOR</code> n'est pas utilisée lorsque <code>VISUAL</code> est définie.
</p>
<p>Pour établir <a href="../fr/Nano.html" title="Nano (Français)">nano</a> comme éditeur de <i>visudo</i> pour la durée de la session actuelle du shell, exportez <code>EDITOR=nano</code> ; pour utiliser un éditeur différent une seule fois, il suffit de définir la variable avant d'appeler <i>visudo</i> :
</p>
<pre># EDITOR=nano visudo
</pre>
<p>Vous pouvez également éditer une copie du fichier <code>/etc/sudoers</code> et la vérifier en utilisant <code>visudo -c <i>/copy/of/sudoers</i></code>. Cela peut s'avérer pratique si vous voulez contourner le verrouillage du fichier avec <i>visudo</i>.
</p>
<p>Pour changer l'éditeur de façon permanente, consultez <a href="../en/Environment_variables.html#Per_user" title="Environment variables">Environment variables#Per user</a>. Pour changer l'éditeur de choix de façon permanente dans tout le système et seulement pour <i>visudo</i>, ajoutez ce qui suit à <code>/etc/sudoers</code> (en supposant que <a href="../fr/Nano.html" title="Nano (Français)">nano</a> est votre éditeur préféré) :
</p>
<pre># Réinitialiser l'environnement par défaut
Defaults      env_reset
# Définir l'ÉDITEUR par défaut à la version restreinte de nano, et ne pas autoriser visudo à utiliser EDITOR/VISUAL.
Defaults      editor=/usr/bin/rnano, !env_editor
</pre>
<h3>
<span id="Exemples_d.27entr.C3.A9es"></span><span class="mw-headline" id="Exemples_d'entrées">Exemples d'entrées</span>
</h3>
<p>Pour permettre à un utilisateur d'obtenir tous les privilèges de root lorsqu'il fait précéder une commande de <code>sudo</code>, ajoutez la ligne suivante :
</p>
<pre>USER_NAME   ALL=(ALL:ALL) ALL
</pre>
<p>Pour permettre à un utilisateur d'exécuter toutes les commandes comme n'importe quel utilisateur mais uniquement sur la machine dont le nom d'hôte est <code>HOST_NAME</code> :
</p>
<pre>USER_NAME   HOST_NAME=(ALL:ALL) ALL
</pre>
<p>Pour permettre aux membres du groupe <a href="../fr/Users_and_groups.html#Liste_des_groupes" title="Users and groups (Français)">wheel</a> d'accéder à sudo :
</p>
<pre>%wheel ALL=(ALL:ALL) ALL
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Lors de la création de nouveaux administrateurs, il est souvent souhaitable d'activer l'accès sudo pour le groupe <code>wheel</code> et <a href="../fr/Users_and_groups.html#Autres_exemples_de_gestion_des_utilisateurs" title="Users and groups (Français)">ajouter l'utilisateur à ce groupe</a>, car par défaut <a href="../fr/Polkit.html#Identit%C3%A9s_d'administrateur" title="Polkit (Français)">Polkit</a> traite les membres du groupe <code>wheel</code> comme des administrateurs. Si l'utilisateur n'est pas membre du groupe <code>wheel</code>, les logiciels utilisant Polkit peuvent demander à s'authentifier en utilisant le mot de passe root au lieu du mot de passe utilisateur.</div>
<p>Pour désactiver la demande de mot de passe pour l'utilisateur <code>USER_NAME</code> :
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Cela permettra à tout processus s'exécutant sous votre nom d'utilisateur d'utiliser sudo sans demander la permission.</div>
<pre>Defaults:USER_NAME      !authenticate
</pre>
<p>Active les commandes explicitement définies uniquement pour l'utilisateur <code>USER_NAME</code> sur l'hôte <code>HOST_NAME</code> :
</p>
<pre>USER_NAME HOST_NAME=/usr/bin/halt,/usr/bin/poweroff,/usr/bin/reboot,/usr/bin/pacman -Syu
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> L'option la plus personnalisée doit être placée à la fin du fichier, car les lignes suivantes remplacent les précédentes. En particulier, cette ligne doit se trouver après la ligne <code>%wheel</code> si votre utilisateur fait partie de ce groupe.</div>
<p>Activer les commandes explicitement définies uniquement pour l'utilisateur <code>USER_NAME</code> sur l'hôte <code>HOST_NAME</code> sans mot de passe :
</p>
<pre>USER_NAME HOST_NAME= NOPASSWD: /usr/bin/halt,/usr/bin/poweroff,/usr/bin/reboot,/usr/bin/pacman -Syu
</pre>
<p>Un exemple détaillé de <code>sudoers</code> est disponible à <code>/usr/share/doc/sudo/examples/sudoers</code>. Sinon, consultez le <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> pour des informations détaillées.
</p>
<h3>
<span id="Permissions_par_d.C3.A9faut_des_fichiers_Sudoers"></span><span class="mw-headline" id="Permissions_par_défaut_des_fichiers_Sudoers">Permissions par défaut des fichiers Sudoers</span>
</h3>
<p>Le propriétaire et le groupe du fichier <code>sudoers</code> doivent tous deux être 0. Les permissions du fichier doivent être définies sur 0440. Ces permissions sont définies par défaut, mais si vous les modifiez accidentellement, vous devez les rétablir immédiatement, sinon sudo échouera.
</p>
<pre># chown -c root:root /etc/sudoers
# chmod -c 0440 /etc/sudoers
</pre>
<h2><span class="mw-headline" id="Trucs_et_astuces">Trucs et astuces</span></h2>
<h3>
<span id="D.C3.A9sactiver_la_temporisation_de_l.27invite_de_mot_de_passe"></span><span class="mw-headline" id="Désactiver_la_temporisation_de_l'invite_de_mot_de_passe">Désactiver la temporisation de l'invite de mot de passe</span>
</h3>
<p>Un ennui courant est un processus de longue durée qui s'exécute sur un terminal en arrière-plan quelque part, qui fonctionne avec des permissions normales et ne s'élève que si nécessaire. Cela conduit à une demande de mot de passe sudo qui passe inaperçue et se termine, à ce moment-là le processus meurt et le travail effectué est perdu ou, au mieux, mis en cache. Les conseils les plus courants sont d'activer sudo sans mot de passe ou d'allonger le délai de mémorisation d'un mot de passe par sudo. Ces deux solutions ont des conséquences négatives sur la sécurité. Le délai d'attente de l'"invite" peut également être désactivé et puisque cela ne sert aucun objectif de sécurité raisonnable, ce devrait être la solution ici :
</p>
<pre>Defaults passwd_timeout=0
</pre>
<h3>
<span id="Ajouter_une_cloche_de_terminal_.C3.A0_l.27invite_de_mot_de_passe"></span><span class="mw-headline" id="Ajouter_une_cloche_de_terminal_à_l'invite_de_mot_de_passe">Ajouter une cloche de terminal à l'invite de mot de passe</span>
</h3>
<p>Pour attirer l'attention sur une invite sudo dans un terminal en arrière-plan, les utilisateurs peuvent simplement lui faire renvoyer un <a href="https://en.wikipedia.org/wiki/Bell_character" class="extiw" title="wikipedia:Bell character">caractère «cloche»</a> :
</p>
<pre>Defaults passprompt="^G[sudo] password for %p: "
</pre>
<p>Notez que le <code>^G</code> est un caractère de cloche littéral. Par exemple, dans <a href="../en/Vim.html" class="mw-redirect" title="Vim (Français)">vim</a>, insérer en utilisant la séquence <code>Ctrl+v</code> <code>Ctrl+g</code>, ou dans <a href="../fr/Nano.html" title="Nano (Français)">nano</a>, <code>Alt+v</code> <code>Ctrl+g</code>.
</p>
<h3><span class="mw-headline" id="Passer_des_alias">Passer des alias</span></h3>
<p>Les alias dans <a href="../en/Zsh.html" title="Zsh">Zsh</a> et <a href="../en/Bash.html" title="Bash">Bash</a> ne sont normalement développés que pour le premier mot d'une commande. Cela signifie que vos alias ne seront normalement pas développés lors de l'exécution de la commande <code>sudo</code>. Une façon de faire en sorte que le mot suivant soit développé est de créer un alias pour sudo se terminant par un espace. Ajoutez ce qui suit à votre <a href="../en/Command-line_shell.html#Configuration_files" title="Command-line shell">fichier de configuration du shell</a> :
</p>
<pre>alias sudo='sudo '
</pre>
<p><span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#ALIASING">zshmisc(1) § ALIASING</a></span> décrit comment cela fonctionne :
</p>
<dl><dd>Si le texte de remplacement se termine par un espace, le mot suivant dans l'entrée du shell est toujours éligible pour les expansions d'alias.</dd></dl>
<p>De même que <span class="plainlinks archwiki-template-man" title="$ man 1 bash"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bash.1#ALIASES">bash(1) § ALIASES</a></span> :
</p>
<dl><dd>Si le dernier caractère de la valeur de l'alias est un espace, alors le mot de commande suivant l'alias est également vérifié pour l'expansion d'alias.</dd></dl>
<h3>
<span id="D.C3.A9sactiver_un_sudo_par_terminal"></span><span class="mw-headline" id="Désactiver_un_sudo_par_terminal">Désactiver un sudo par terminal</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Cela laissera n'importe quel processus utiliser votre session sudo.</div>
<p>Si vous êtes gêné par les valeurs par défaut de sudo qui vous obligent à entrer votre mot de passe chaque fois que vous ouvrez un nouveau terminal, définissez <code>timestamp_type</code> à <code>global</code> :
</p>
<pre>Defaults timestamp_type=global
</pre>
<h3>
<span id="R.C3.A9duire_le_nombre_de_fois_o.C3.B9_vous_devez_taper_un_mot_de_passe"></span><span class="mw-headline" id="Réduire_le_nombre_de_fois_où_vous_devez_taper_un_mot_de_passe">Réduire le nombre de fois où vous devez taper un mot de passe</span>
</h3>
<p>Si vous êtes agacé par le fait de devoir saisir à nouveau votre mot de passe toutes les 5 minutes (valeur par défaut), vous pouvez changer cela en définissant une valeur plus longue pour <code>timestamp_timeout</code> (en minutes) :
</p>
<pre>Defaults timestamp_timeout=10
</pre>
<p>Si vous utilisez beaucoup de commandes sudo à la suite, il est plus logique de rafraîchir le délai d'attente à chaque fois que vous utilisez sudo que de
d'augmenter <code>timestamp_timeout</code>. Le rafraîchissement du délai d'attente peut être effectué avec <code>sudo -v</code>. (alors que <code>sudo -K</code> révoque immédiatement).
</p>
<p>Vous pouvez automatiser cette opération en ajoutant ce qui suit à votre <code>.bashrc</code> :
</p>
<pre>alias sudo='sudo -v ; sudo '
</pre>
<p>Il est également possible d'utiliser une fonction bash ; pour plus de détails, consultez <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/584725/expand-certain-aliases-from-within-sudo-bash-function">stackexchange</a>.
</p>
<h3>
<span id="Variables_d.27environnement"></span><span class="mw-headline" id="Variables_d'environnement">Variables d'environnement</span>
</h3>
<p>Si vous avez beaucoup de variables d'environnement, ou si vous exportez vos paramètres de proxy via <code>export http_proxy="..."</code>, lorsque vous utilisez sudo, ces variables ne sont pas transmises au compte root, sauf si vous exécutez sudo avec l'option <code>-E</code>.
</p>
<pre>$ sudo -E pacman -Syu
</pre>
<p>La méthode recommandée pour préserver les variables d'environnement est de les ajouter à <code>env_keep</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Défauts env_keep += "ftp_proxy http_proxy https_proxy no_proxy"</pre>
<h3><span class="mw-headline" id="Mot_de_passe_root">Mot de passe root</span></h3>
<p>Les utilisateurs peuvent configurer sudo de manière à ce qu'il demande le mot de passe root au lieu du mot de passe utilisateur en ajoutant <code>targetpw</code> (utilisateur cible, par défaut root) ou <code>rootpw</code> à la ligne Defaults de <code>/etc/sudoers</code> :
</p>
<pre>Defaults targetpw
</pre>
<p>Pour éviter d'exposer votre mot de passe root aux utilisateurs, vous pouvez le restreindre à un groupe spécifique :
</p>
<pre>Defaults:%wheel targetpw
%wheel ALL=(ALL) ALL
</pre>
<h3>
<span id="D.C3.A9sactiver_la_connexion_root"></span><span class="mw-headline" id="Désactiver_la_connexion_root">Désactiver la connexion root</span>
</h3>
<p>Les utilisateurs peuvent souhaiter désactiver la connexion root. Sans root, les attaquants doivent d'abord deviner un nom d'utilisateur configuré comme sudoer ainsi que le mot de passe de l'utilisateur. Consultez par exemple <a href="../en/OpenSSH.html#Deny" title="OpenSSH">OpenSSH#Deny</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> 
<ul>
<li>Prenez garde, vous pouvez vous bloquer en désactivant la connexion root. Sudo n'est pas automatiquement installé et sa configuration par défaut ne permet ni l'accès root sans mot de passe ni l'accès root avec votre propre mot de passe. Assurez-vous qu'un utilisateur est correctement configuré comme sudoer <i>avant</i> de désactiver le compte root !</li>
<li>Si vous avez modifié votre fichier sudoers pour utiliser rootpw par défaut, alors ne désactivez pas l'accès root avec l'une des commandes suivantes !</li>
<li>Si vous êtes déjà coincé, consultez <a href="../en/Reset_lost_root_password.html" class="mw-redirect" title="Password recovery">Password recovery</a> pour obtenir de l'aide.</li>
</ul>
</div>
<p>Le compte peut être verrouillé via <code>passwd</code> :
</p>
<pre># passwd -l root
</pre>
<p>Une commande similaire permet de déverrouiller root.
</p>
<pre>$ sudo passwd -u root
</pre>
<p>Vous pouvez également éditer <code>/etc/shadow</code> et remplacer le mot de passe chiffré de root par "!":
</p>
<pre>root:!:12345::::: :
</pre>
<p>Pour réactiver la connexion de root :
</p>
<pre>$ sudo passwd root
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Pour obtenir une invite interactive pour root, même après avoir désactivé le compte <i>root</i>, utilisez <code>sudo -i</code>.</div>
<h4><span class="mw-headline" id="kdesu">kdesu</span></h4>
<p>kdesu peut être utilisé sous <a href="../en/KDE.html" class="mw-redirect" title="KDE (Français)">KDE</a> pour lancer des applications GUI avec les privilèges de root. Il est possible que par défaut, kdesu essaie d'utiliser su même si le compte root est désactivé. Heureusement, on peut dire à kdesu d'utiliser sudo au lieu de su. Créez/éditez le fichier <code>~/.config/kdesurc</code> :
</p>
<pre>[super-user-command]
super-user-command=sudo
</pre>
<p>ou utilisez la commande suivante :
</p>
<pre>$ kwriteconfig5 --file kdesurc --group super-user-command --key super-user-command sudo
</pre>
<h3><span class="mw-headline" id="Exemple_de_durcissement_avec_sudo">Exemple de durcissement avec sudo</span></h3>
<p>Disons que vous créez 3 utilisateurs : admin, devel, et joe. L'utilisateur "admin" est utilisé pour journalctl, systemctl, mount, kill et iptables ; "devel" est utilisé pour installer des paquets et éditer des fichiers de configuration ; et "joe" est l'utilisateur avec lequel vous vous connectez. Pour permettre à "joe" de redémarrer, d'arrêter et d'utiliser netctl, nous ferions ce qui suit :
</p>
<p>Éditez <code>/etc/pam.d/su</code> et <code>/etc/pam.d/su-l</code>. Demandez à l'utilisateur d'être dans le groupe wheel, mais n'y mettez personne.
</p>
<pre>#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
#auth           sufficient      pam_wheel.so trust use_uid
# Uncomment the following line to require a user to be in the "wheel" group.
auth            required        pam_wheel.so use_uid
auth            required        pam_unix.so
account         required        pam_unix.so
session         required        pam_unix.so
</pre>
<p>Limite la connexion SSH au groupe 'ssh'. Seul "joe" fera partie de ce groupe.
</p>
<pre># groupadd -r ssh
# gpasswd -a joe ssh
# echo 'AllowGroups ssh' &gt;&gt; /etc/ssh/sshd_config
</pre>
<p><a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Redémarrez">Redémarrez</a> <code>sshd.service</code>.
</p>
<p>Ajouter des utilisateurs à d'autres groupes.
</p>
<pre># for g in réseau puissance ;do ;gpasswd -a joe $g ;done
# for g in network power storage ;do ;gpasswd -a admin $g ;done
</pre>
<p>Définissez les permissions sur les configs pour que devel puisse les modifier.
</p>
<pre># chown -R devel:root /etc/{http,openvpn,cups,zsh,vim,screenrc}
</pre>
<pre>Cmnd_Alias  POWER       =   /usr/bin/shutdown -h now, /usr/bin/halt, /usr/bin/poweroff, /usr/bin/reboot
Cmnd_Alias  STORAGE     =   /usr/bin/mount -o nosuid\,nodev\,noexec, /usr/bin/umount
Cmnd_Alias  SYSTEMD     =   /usr/bin/journalctl, /usr/bin/systemctl
Cmnd_Alias  KILL        =   /usr/bin/kill, /usr/bin/killall
Cmnd_Alias  PKGMAN      =   /usr/bin/pacman
Cmnd_Alias  NETWORK     =   /usr/bin/netctl
Cmnd_Alias  FIREWALL    =   /usr/bin/iptables, /usr/bin/ip6tables
Cmnd_Alias  SHELL       =   /usr/bin/zsh, /usr/bin/bash
%power      ALL         =   (root)  NOPASSWD: POWER
%network    ALL         =   (root)  NETWORK
%storage    ALL         =   (root)  STORAGE
root        ALL         =   (ALL)   ALL
admin       ALL         =   (root)  SYSTEMD, KILL, FIREWALL
devel	    ALL         =   (root)  PKGMAN
joe	    ALL         =   (devel) SHELL, (admin) SHELL 
</pre>
<p>Avec cette configuration, vous n'aurez presque jamais besoin de vous connecter en tant qu'utilisateur root.
</p>
<p>"joe" peut se connecter au WiFi de sa maison.
</p>
<pre>$ sudo netctl start home
$ sudo poweroff
</pre>
<p>"joe" ne peut pas utiliser netctl comme un autre utilisateur.
</p>
<pre>$ sudo -u admin -- netctl start home
</pre>
<p>Lorsque "Joe" a besoin d'utiliser journalctl ou de tuer un processus en cours, il peut passer à cet utilisateur.
</p>
<pre>$ sudo -i -u devel
$ sudo -i -u admin
</pre>
<p>Mais "joe" ne peut pas passer à l'utilisateur root.
</p>
<pre>$ sudo -i -u root
</pre>
<p>Si "Joe" veut démarrer une session gnu-screen en tant qu'administrateur, il peut le faire comme suit :
</p>
<pre>$ sudo -i -u admin
[admin]$ chown admin:tty `echo $TTY`
[admin]$ screen
</pre>
<h3>
<span id="Configurer_sudo_en_utilisant_les_fichiers_de_d.C3.A9p.C3.B4t_dans_.2Fetc.2Fsudoers.d"></span><span class="mw-headline" id="Configurer_sudo_en_utilisant_les_fichiers_de_dépôt_dans_/etc/sudoers.d">Configurer sudo en utilisant les fichiers de dépôt dans /etc/sudoers.d</span>
</h3>
<p><i>sudo</i> analyse les fichiers contenus dans le répertoire <code>/etc/sudoers.d/</code>. Cela signifie qu'au lieu de modifier <code>/etc/sudoers</code>, vous pouvez changer les paramètres dans des fichiers autonomes et les déposer dans ce répertoire. Cela présente deux avantages :
</p>
<ul>
<li>Il n'est pas nécessaire d'éditer un fichier <code>sudoers.pacnew</code> ;</li>
<li>S'il y a un problème avec une nouvelle entrée, vous pouvez supprimer le fichier en question au lieu de modifier <code>/etc/sudoers</code> (mais consultez l'avertissement ci-dessous).</li>
</ul>
<p>Le format des entrées dans ces fichiers de dépôt est le même que pour <code>/etc/sudoers</code> lui-même. Pour les modifier directement, utilisez <code>visudo -f /etc/sudoers.d/<i>somefile</i></code>. Consultez <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5#Inclure_d'autres_fichiers_dans_sudoers">sudoers(5) § Inclure d'autres fichiers dans sudoers</a></span> pour plus de détails.
</p>
<p>Les fichiers du répertoire <code>/etc/sudoers.d/</code> sont analysés par ordre lexicographique, les noms de fichiers contenant <code>.</code> ou <code>~</code> sont ignorés. Pour éviter les problèmes de tri, les noms de fichiers doivent commencer par deux chiffres, par exemple <code>01_foo</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> L'ordre des entrées dans les fichiers de dépôt est important : veillez à ce que les déclarations ne s'écrasent pas entre elles.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Les fichiers de <code>/etc/sudoers.d/</code> sont tout aussi fragiles que <code>/etc/sudoers</code> lui-même : tout fichier mal formaté empêchera <code>sudo</code> de fonctionner.  Ainsi, pour la même raison, il est fortement conseillé d'utiliser <code>visudo</code>
</div>
<h3>
<span id=".C3.89dition_de_fichiers"></span><span class="mw-headline" id="Édition_de_fichiers">Édition de fichiers</span>
</h3>
<p><code>sudo -e</code> ou <code>sudoedit</code> vous permet de modifier un fichier en tant qu'autre utilisateur tout en exécutant l'éditeur de texte en tant que votre utilisateur.
</p>
<p>Ceci est particulièrement utile pour éditer des fichiers en tant que root sans élever les privilèges de votre éditeur de texte, pour plus de détails lisez <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8#e">sudo(8) § e</a></span>.
</p>
<p>Notez que vous pouvez définir l'éditeur sur n'importe quel programme, donc par exemple on peut utiliser <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=meld">meld</a></span> pour gérer les fichiers <a href="../fr/Pacman/Pacnew_and_Pacsave.html" title="Pacman (Français)/Pacnew and Pacsave (Français)">pacnew</a> :
</p>
<pre>$ SUDO_EDITOR=meld sudo -e /etc/<i>fichier</i>{,.pacnew<i>}</i>
</pre>
<h3><span class="mw-headline" id="Activer_les_insultes">Activer les insultes</span></h3>
<p>Les utilisateurs peuvent activer l’œuf de Pâques des insultes dans sudo en ajoutant la ligne suivante dans le fichier <code>sudoers</code> avec <code>visudo</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults insults</pre>
<p>Lors de la saisie d'un mot de passe incorrect, ceci remplacera le message <code>Sorry, try again.</code> par des insultes humoristiques.
</p>
<h2>
<span id="D.C3.A9pannage"></span><span class="mw-headline" id="Dépannage">Dépannage</span>
</h2>
<h3>
<span id="Probl.C3.A8me_de_SSH_sans_TTY"></span><span class="mw-headline" id="Problème_de_SSH_sans_TTY">Problème de SSH sans TTY</span>
</h3>
<p>SSH n'alloue pas de tty par défaut lors de l'exécution d'une commande distante. Sans un tty alloué, sudo ne peut pas empêcher l'affichage du mot de passe. Vous pouvez utiliser l'option <code>-t</code> de ssh pour le forcer à allouer un tty.
</p>
<p>L'option <code>Defaults requiretty</code> ne permet à l'utilisateur d'exécuter sudo que s'il dispose d'un tty.
</p>
<pre># Désactivez "ssh hostname sudo &lt;cmd&gt;", car il affichera le mot de passe en clair. Vous devez exécuter "ssh -t hostname sudo &lt;cmd&gt;".
#
#Defaults requiretty
</pre>
<h3><span class="mw-headline" id="Permissive_umask">Permissive umask</span></h3>
<p>Sudo fusionnera la valeur <a href="../en/Umask.html" title="Umask">umask</a> de l'utilisateur avec son propre umask (qui a la valeur 0022 par défaut). Cela empêche sudo de créer des fichiers avec des permissions plus ouvertes que celles autorisées par l'umask de l'utilisateur. Bien qu'il s'agisse d'une valeur par défaut saine si aucun umask personnalisé n'est utilisé, cela peut conduire à des situations où un utilitaire exécuté par sudo peut créer des fichiers avec des permissions différentes de celles de l'utilisateur root. Si des erreurs surviennent, sudo fournit un moyen de corriger l'umask, même si l'umask souhaité est plus permissif que celui que l'utilisateur a spécifié. L'ajout de cette option (en utilisant <code>visudo</code>) annulera le comportement par défaut de sudo :
</p>
<pre>Defaults umask = 0022
Defaults umask_override
</pre>
<p>Ceci définit l'umask de sudo sur l'umask par défaut de root (0022) et annule le comportement par défaut, en utilisant toujours l'umask indiqué, quel que soit l'umask défini par l'utilisateur.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../fr/Category:Security.html" title="Category:Security (Français)">Security (Français)</a></li>
<li><a href="../fr/Category:Commands.html" title="Category:Commands (Français)">Commands (Français)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Sudo_(Fran%C3%A7ais)&amp;oldid=799366">https://wiki.archlinux.org/index.php?title=Sudo_(Français)&amp;oldid=799366</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 February 2024, at 18:09.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
