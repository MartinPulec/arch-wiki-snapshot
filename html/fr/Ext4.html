<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Ext4 (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Ext4_Français rootpage-Ext4_Français skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Créer_un_nouveau_système_de_fichiers_ext4" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Cr%C3%A9er_un_nouveau_syst%C3%A8me_de_fichiers_ext4">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Créer un nouveau système de fichiers ext4</span>
			</div>
		</a>
		
			<button aria-controls="toc-Créer_un_nouveau_système_de_fichiers_ext4-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Créer un nouveau système de fichiers ext4 subsection</span>
			</button>
		
		<ul id="toc-Créer_un_nouveau_système_de_fichiers_ext4-sublist" class="vector-toc-list">
			<li id="toc-Ratio_d'octets_par_noeud" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ratio_d'octets_par_noeud">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Ratio d'octets par noeud</span>
				</div>
			</a>
			
			<ul id="toc-Ratio_d'octets_par_noeud-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Blocs_réservés" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Blocs_r%C3%A9serv%C3%A9s">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Blocs réservés</span>
				</div>
			</a>
			
			<ul id="toc-Blocs_réservés-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Migrer_de_ext2/ext3_vers_ext4" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Migrer_de_ext2/ext3_vers_ext4">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Migrer de ext2/ext3 vers ext4</span>
			</div>
		</a>
		
			<button aria-controls="toc-Migrer_de_ext2/ext3_vers_ext4-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Migrer de ext2/ext3 vers ext4 subsection</span>
			</button>
		
		<ul id="toc-Migrer_de_ext2/ext3_vers_ext4-sublist" class="vector-toc-list">
			<li id="toc-Montage_de_partitions_ext2/ext3_en_ext4_sans_conversion" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Montage_de_partitions_ext2/ext3_en_ext4_sans_conversion">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Montage de partitions ext2/ext3 en ext4 sans conversion</span>
				</div>
			</a>
			
			<ul id="toc-Montage_de_partitions_ext2/ext3_en_ext4_sans_conversion-sublist" class="vector-toc-list">
				<li id="toc-Justification" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Justification">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>Justification</span>
				</div>
			</a>
			
			<ul id="toc-Justification-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Procédure" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Proc%C3%A9dure">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.2</span>
					<span>Procédure</span>
				</div>
			</a>
			
			<ul id="toc-Procédure-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Conversion_des_partitions_ext2/ext3_en_ext4" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Conversion_des_partitions_ext2/ext3_en_ext4">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Conversion des partitions ext2/ext3 en ext4</span>
				</div>
			</a>
			
			<ul id="toc-Conversion_des_partitions_ext2/ext3_en_ext4-sublist" class="vector-toc-list">
				<li id="toc-Raison_d'être" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Raison_d'%C3%AAtre">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Raison d'être</span>
				</div>
			</a>
			
			<ul id="toc-Raison_d'être-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Procédure_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Proc%C3%A9dure_2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Procédure</span>
				</div>
			</a>
			
			<ul id="toc-Procédure_2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Améliorer_les_performances" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Am%C3%A9liorer_les_performances">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Améliorer les performances</span>
			</div>
		</a>
		
			<button aria-controls="toc-Améliorer_les_performances-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Améliorer les performances subsection</span>
			</button>
		
		<ul id="toc-Améliorer_les_performances-sublist" class="vector-toc-list">
			<li id="toc-Désactiver_la_mise_à_jour_du_temps_d'accès" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9sactiver_la_mise_%C3%A0_jour_du_temps_d'acc%C3%A8s">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Désactiver la mise à jour du temps d'accès</span>
				</div>
			</a>
			
			<ul id="toc-Désactiver_la_mise_à_jour_du_temps_d'accès-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Augmentation_de_l'intervalle_de_commit" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Augmentation_de_l'intervalle_de_commit">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Augmentation de l'intervalle de commit</span>
				</div>
			</a>
			
			<ul id="toc-Augmentation_de_l'intervalle_de_commit-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Désactiver_les_barrières" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9sactiver_les_barri%C3%A8res">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Désactiver les barrières</span>
				</div>
			</a>
			
			<ul id="toc-Désactiver_les_barrières-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Désactiver_la_journalisation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9sactiver_la_journalisation">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Désactiver la journalisation</span>
				</div>
			</a>
			
			<ul id="toc-Désactiver_la_journalisation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utiliser_un_journal_externe_pour_optimiser_les_performances" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utiliser_un_journal_externe_pour_optimiser_les_performances">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Utiliser un journal externe pour optimiser les performances</span>
				</div>
			</a>
			
			<ul id="toc-Utiliser_un_journal_externe_pour_optimiser_les_performances-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Trucs_et_astuces" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Trucs_et_astuces">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Trucs et astuces</span>
			</div>
		</a>
		
			<button aria-controls="toc-Trucs_et_astuces-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Trucs et astuces subsection</span>
			</button>
		
		<ul id="toc-Trucs_et_astuces-sublist" class="vector-toc-list">
			<li id="toc-Utilisation_du_chiffrement_basé_sur_les_fichiers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilisation_du_chiffrement_bas%C3%A9_sur_les_fichiers">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Utilisation du chiffrement basé sur les fichiers</span>
				</div>
			</a>
			
			<ul id="toc-Utilisation_du_chiffrement_basé_sur_les_fichiers-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Activation_des_sommes_de_contrôle_des_métadonnées_dans_les_systèmes_de_fichiers_existants" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Activation_des_sommes_de_contr%C3%B4le_des_m%C3%A9tadonn%C3%A9es_dans_les_syst%C3%A8mes_de_fichiers_existants">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Activation des sommes de contrôle des métadonnées dans les systèmes de fichiers existants</span>
				</div>
			</a>
			
			<ul id="toc-Activation_des_sommes_de_contrôle_des_métadonnées_dans_les_systèmes_de_fichiers_existants-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Activation_de_fast_commit_dans_les_systèmes_de_fichiers_existants" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Activation_de_fast_commit_dans_les_syst%C3%A8mes_de_fichiers_existants">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Activation de fast_commit dans les systèmes de fichiers existants</span>
				</div>
			</a>
			
			<ul id="toc-Activation_de_fast_commit_dans_les_systèmes_de_fichiers_existants-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Voir_aussi" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Voir_aussi">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Voir aussi</span>
			</div>
		</a>
		
		<ul id="toc-Voir_aussi-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Ext4 (Français)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 7 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-7" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">7 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Ext4" title="Ext4 – Deutsch" lang="de" hreflang="de" data-title="Ext4" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Ext4.html" title="Ext4 – English" lang="en" hreflang="en" data-title="Ext4" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Ext4.html" title="Ext4 – español" lang="es" hreflang="es" data-title="Ext4" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-hu mw-list-item"><a href="../hu/Ext4.html" title="Ext4 – magyar" lang="hu" hreflang="hu" data-title="Ext4" data-language-autonym="Magyar" data-language-local-name="magyar" class="interlanguage-link-target"><span>Magyar</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Ext4" title="Ext4 – 日本語" lang="ja" hreflang="ja" data-title="Ext4" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Ext4.html" title="Ext4 – português" lang="pt" hreflang="pt" data-title="Ext4" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Ext4" title="Ext4 – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Ext4" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Ext4.html" title="Ext4">Ext4</a>. Date de la dernière traduction: 2022-09-05. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Ext4&amp;diff=0&amp;oldid=744974">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/File_systems.html" title="File systems">File systems</a></li>
<li><a href="../en/Ext3.html" title="Ext3">Ext3</a></li>
</ul>
</div>
<p>Extrait de <a rel="nofollow" class="external text" href="https://kernelnewbies.org/Ext4">Ext4 - Linux Kernel Newbies</a> :
</p>
<dl><dd>Ext4 est l'évolution du système de fichiers Linux le plus utilisé, Ext3. A bien des égards, Ext4 est une amélioration plus profonde d'Ext3 que Ext3 ne l'était d'Ext2. Ext3 consistait principalement à ajouter la journalisation à Ext2, mais Ext4 modifie des structures de données importantes du système de fichiers telles que celles destinées à stocker les données des fichiers. Le résultat est un système de fichiers avec une conception améliorée, de meilleures performances, une meilleure fiabilité et de meilleures fonctionnalités.</dd></dl>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Créer_un_nouveau_système_de_fichiers_ext4">
<span id="Cr.C3.A9er_un_nouveau_syst.C3.A8me_de_fichiers_ext4"></span>Créer un nouveau système de fichiers ext4</h2></div>
<p><a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">Installez</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=e2fsprogs">e2fsprogs</a></span>.
</p>
<p>Pour formater une partition, faites :
</p>
<pre># mkfs.ext4 /dev/<i>partition</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce</strong> 
<ul>
<li>Consultez <span class="plainlinks archwiki-template-man" title="$ man 8 mke2fs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mke2fs.8">mke2fs(8)</a></span> pour plus d'options ; modifiez <code>/etc/mke2fs.conf</code> pour afficher/configurer les options par défaut.</li>
<li>Si elles sont prises en charge, vous pouvez vouloir activer les <a href="#Activation_des_sommes_de_contr%C3%B4le_des_m%C3%A9tadonn%C3%A9es_dans_les_syst%C3%A8mes_de_fichiers_existants">métadonnées de contrôle</a>.</li>
</ul>
</div>
<div class="mw-heading mw-heading3"><h3 id="Ratio_d'octets_par_noeud">
<span id="Ratio_d.27octets_par_noeud"></span>Ratio d'octets par noeud</h3></div>
<p>Extrait de <span class="plainlinks archwiki-template-man" title="$ man 8 mke2fs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mke2fs.8">mke2fs(8)</a></span> :
</p>
<dl><dd>
<i><b>mke2fs</b> crée un inode pour chaque </i>bytes-per-inode<i> d'espace sur le disque. Plus le ratio </i>bytes-per-inode<i> est élevé, moins il y aura d'inodes créés.</i>
</dd></dl>
<p>La création d'un nouveau fichier, répertoire, lien symbolique, etc. nécessite au moins un <a href="https://en.wikipedia.org/wiki/Inode" class="extiw" title="wikipedia:Inode">inode</a> libre. Si le nombre d'inodes est trop faible, aucun fichier ne peut être créé sur le système de fichiers, même s'il reste de la place. 
</p>
<p>Comme il n'est pas possible de modifier le ratio octets par inode ou le nombre d'inodes après la création du système de fichiers, <code>mkfs.ext4</code> utilise par défaut un ratio assez faible d'un inode tous les 16384 octets (16 KiB) pour éviter cette situation.
</p>
<p>Cependant, pour les partitions dont la taille est de l'ordre de centaines ou de milliers de Go et dont la taille moyenne des fichiers est de l'ordre du mégaoctet, le nombre d'inodes est généralement beaucoup trop élevé car le nombre de fichiers créés n'atteint jamais le nombre d'inodes.
</p>
<p>Il en résulte un gaspillage d'espace disque, car tous ces inodes inutilisés occupent chacun 256 octets sur le système de fichiers (ceci est également défini dans <code>/etc/mke2fs.conf</code> mais ne devrait pas être modifié). 256 * plusieurs millions = pas mal de gigaoctets gaspillés en inodes inutilisés.
</p>
<p>Cette situation peut être évaluée en comparant les chiffres de <code>Use%</code> et <code>IUse%</code> fournis par <code>df</code> et <code>df -i</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ df -h /home</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Filesystem              Size    Used   Avail  <b>Use%</b>   Mounted on
/dev/mapper/lvm-home    115G    56G    59G    <b>49%</b>    /home
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ df -hi /home</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Filesystem              Inodes  IUsed  IFree  <b>IUse%</b>  Mounted on
/dev/mapper/lvm-home    1.8M    1.1K   1.8M   <b>1%</b>     /home
</pre>
<p>Pour spécifier un ratio octets-par-inode différent, vous pouvez utiliser l'option <code>-T <i>usage-type</i></code> qui donne des indications sur l'utilisation attendue du système de fichiers en utilisant les types définis dans <code>/etc/mke2fs.conf</code>. Parmi ces types, on trouve les plus gros <code>largefile</code> et <code>largefile4</code> qui offrent des ratios plus pertinents d'un inode tous les 1 MiB et 4 MiB respectivement. Il peut être utilisé comme tel :
</p>
<pre># mkfs.ext4 -T largefile /dev/<i>device</i>
</pre>
<p>Le ratio d'octets par inode peut également être défini directement via l'option <code>-i</code> : <i>e.g.</i> utiliser <code>-i 2097152</code> pour un ratio de 2 MiB et <code>-i 6291456</code> pour un ratio de 6 MiB.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce</strong> Inversement, si vous mettez en place une partition dédiée à l'hébergement de millions de petits fichiers tels que des courriels ou des éléments de groupes de discussion, vous pouvez utiliser des valeurs de <i>type d'utilisation</i> plus petites telles que <code>news</code> (un inode pour chaque 4096). (un inode pour 4096 octets) ou <code>small</code>. (même chose mais avec des tailles d'inodes et de blocs plus petites).</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention</strong> Si vous faites un usage intensif de liens symboliques, assurez-vous de maintenir le nombre d'inodes suffisamment élevé avec un faible ratio d'octets par inode, car sans prendre plus d'espace, chaque nouveau lien symbolique consomme un nouvel inode et le système de fichiers peut donc en manquer rapidement.</div>
<div class="mw-heading mw-heading3"><h3 id="Blocs_réservés">
<span id="Blocs_r.C3.A9serv.C3.A9s"></span>Blocs réservés</h3></div>
<p>Par défaut, 5 % des blocs du système de fichiers sont réservés au super-utilisateur, pour éviter la fragmentation et "<i>permettre aux daemons appartenant à l'utilisateur root de continuer à fonctionner correctement après que les processus non privilégiés aient été empêchés d'écrire dans le système de fichiers</i>" (<span class="plainlinks archwiki-template-man" title="$ man 8 mke2fs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mke2fs.8">mke2fs(8)</a></span>).
</p>
<p>Pour les disques modernes de grande capacité, cette valeur est plus élevée que nécessaire si la partition est utilisée comme archive à long terme ou si elle n'est pas cruciale pour le fonctionnement du système (comme <code>/home</code>). Consultez <a rel="nofollow" class="external text" href="https://www.redhat.com/archives/ext3-users/2009-January/msg00026.html">ce courriel</a> pour connaître l'opinion du développeur ext4 Ted Ts'o sur les blocs réservés et <a rel="nofollow" class="external text" href="https://superuser.com/questions/1256074/how-much-space-to-leave-free-on-hdd-or-ssd/1257550#1257550">cette réponse sur superuser</a> pour obtenir des informations générales sur ce sujet.
</p>
<p>Il est généralement sûr de réduire le pourcentage de blocs réservés pour libérer de l'espace disque lorsque la partition est soit :
</p>
<ul>
<li>Très grande (par exemple &gt; 50G)</li>
<li>Utilisée comme archive à long terme, c'est-à-dire où les fichiers ne seront pas supprimés et créés très souvent.</li>
</ul>
<p>L'option <code>-m</code> des utilitaires liés à ext4 permet de spécifier le pourcentage de blocs réservés.
</p>
<p>Pour empêcher totalement la réservation de blocs à la création du système de fichiers, utilisez :
</p>
<pre># mkfs.ext4 -m 0 /dev/<i>device</i>
</pre>
<p>Pour le changer à 1% par la suite, utilisez :
</p>
<pre># tune2fs -m 1 /dev/<i>device</i>
</pre>
<p>Pour définir le nombre d'espace-bloc réservé à une taille absolue en gigaoctets, utilisez <code>-r</code> :
</p>
<pre># tune2fs -r $((<i>ngigs</i> * 1024**3 / <i>blocksize</i>)) /dev/<i>device</i>
</pre>
<p><code><i>blocksize</i></code> est la taille de bloc du système de fichiers en octets. C'est presque toujours 4096, mais vous pouvez vérifier pour être sûr :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># tune2fs -l /dev/<i>device</i> | grep 'Block size:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Block size:               4096
</pre>
<p>La syntaxe <code>$(())</code> est destinée à l'expansion mathématique. Cette syntaxe fonctionne dans <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bash">bash</a></span> et <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span>, mais elle ne fonctionnera pas dans <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fish">fish</a></span>. Pour <i>fish</i>, voici la syntaxe :
</p>
<pre># tune2fs -r (math 'ngigs * 1024^3 / blocksize') /dev/<i>device</i>
</pre>
<p>Ces commandes peuvent être appliquées aux systèmes de fichiers actuellement montés, les changements prenant effet immédiatement. Vous pouvez utiliser <span class="plainlinks archwiki-template-man" title="$ man 8 findmnt"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/findmnt.8">findmnt(8)</a></span> pour trouver le nom du périphérique :
</p>
<pre># tune2fs -m 1 "$(findmnt -no SOURCE <i>/the/mount/point</i>)"
</pre>
<p>Pour demander le nombre actuel de blocs réservés :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># tune2fs -l /dev/mapper/proxima-root | grep 'Reserved block count:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Nombre de blocs réservés :     2975334
</pre>
<p>Il s'agit du nombre de blocs, il faut donc le multiplier par la taille de bloc du système de fichiers pour obtenir le nombre d'octets ou de gigaoctets : <code>2975334 * 4096 / 1024**3 = 11.34 GiB</code>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Migrer_de_ext2/ext3_vers_ext4">
<span id="Migrer_de_ext2.2Fext3_vers_ext4"></span>Migrer de ext2/ext3 vers ext4</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Montage_de_partitions_ext2/ext3_en_ext4_sans_conversion">
<span id="Montage_de_partitions_ext2.2Fext3_en_ext4_sans_conversion"></span>Montage de partitions ext2/ext3 en ext4 sans conversion</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Justification">Justification</h4></div>
<p>Un compromis entre la conversion complète en ext4 et le maintien de ext2/ext3 est de monter les partitions en ext4.
</p>
<p><b>Pour:</b>
</p>
<ul>
<li>Compatibilité (le système de fichiers peut continuer à être monté en ext3) – Cela permet aux utilisateurs de lire le système de fichiers à partir d'autres systèmes d'exploitation qui ne prennent pas en charge ext4 (par exemple Windows avec des pilotes ext2/ext3).</li>
<li>Amélioration des performances (mais pas autant qu'une partition ext4 entièrement convertie) <a rel="nofollow" class="external autonumber" href="https://kernelnewbies.org/Ext4">[1]</a> <a rel="nofollow" class="external autonumber" href="https://events.static.linuxfound.org/slides/2010/linuxcon_japan/linuxcon_jp2010_fujita.pdf">[2]</a>
</li>
</ul>
<p><b>Contre :</b>
</p>
<ul><li>Moins de fonctionnalités de ext4 sont utilisées (seulement celles qui ne changent pas le format du disque comme l'allocation multibloc et l'allocation retardée).</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Sauf la nouveauté relative de ext4 (qui peut être vue comme un risque), <b>il n'y a pas d'inconvénient majeur à cette technique</b>.</div>
<div class="mw-heading mw-heading4"><h4 id="Procédure">
<span id="Proc.C3.A9dure"></span>Procédure</h4></div>
<ol>
<li>Editez <code>/etc/fstab</code> et changez le 'type' de ext2/ext3 en ext4 pour toutes les partitions que vous souhaitez monter en ext4.</li>
<li>Remontez les partitions concernées.</li>
</ol>
<div class="mw-heading mw-heading3"><h3 id="Conversion_des_partitions_ext2/ext3_en_ext4">
<span id="Conversion_des_partitions_ext2.2Fext3_en_ext4"></span>Conversion des partitions ext2/ext3 en ext4</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Raison_d'être">
<span id="Raison_d.27.C3.AAtre"></span>Raison d'être</h4></div>
<p>Pour profiter des avantages de ext4, un processus de conversion irréversible doit être effectué.
</p>
<p><b>Pour:</b>
</p>
<ul><li>Amélioration des performances et nouvelles fonctionnalités. <a rel="nofollow" class="external autonumber" href="https://kernelnewbies.org/Ext4">[3]</a> <a rel="nofollow" class="external autonumber" href="https://events.static.linuxfound.org/slides/2010/linuxcon_japan/linuxcon_jp2010_fujita.pdf">[4]</a>
</li></ul>
<p><b>Contre :</b>
</p>
<ul>
<li>Les partitions qui contiennent principalement des fichiers statiques, comme une partition <code>/boot</code>, peuvent ne pas bénéficier des nouvelles fonctionnalités. De plus, l'ajout d'un journal (qui est sous-entendue lors de la migration d'une partition ext2 vers ext3/4) entraîne toujours une surcharge impactant les performances.</li>
<li>Irréversible (les partitions ext4 ne peuvent pas être "rétrogradées" vers ext2/ext3. Elles sont toutefois rétrocompatibles jusqu'à ce que l'option extent et d'autres options uniques soient activées).</li>
</ul>
<div class="mw-heading mw-heading4"><h4 id="Procédure_2">
<span id="Proc.C3.A9dure_2"></span>Procédure</h4></div>
<p>Ces instructions ont été adaptées de la <a rel="nofollow" class="external text" href="https://ext4.wiki.kernel.org/index.php/Ext4_Howto">documentation du noyau</a> et d'un <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=61602">fil BBS</a>. 
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention</strong> 
<ul>
<li>Si vous convertissez le système de fichiers racine du système, assurez-vous que l'initramfs 'de secours' est disponible au redémarrage. Alternativement, ajoutez <code>ext4</code> conformément à <a href="../fr/Mkinitcpio.html#MODULES" title="Mkinitcpio (Français)">Mkinitcpio (Français)#MODULES</a> et <a href="../fr/Mkinitcpio.html#Cr%C3%A9ation_et_activation_d'images" class="mw-redirect" title="Régénérez l'initramfs">régénérez l'initramfs</a> avant de démarrer.</li>
<li>Si vous décidez de convertir une partition <code>/boot</code> séparée, assurez-vous que le <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" class="mw-redirect" title="Chargeur d'amorçage">chargeur d'amorçage</a> prend en charge le démarrage à partir d'ext4.</li>
</ul>
</div>
<p>Dans les étapes suivantes, <code>/dev/sdxX</code> désigne le chemin d'accès à la partition à convertir, comme <code>/dev/sda1</code>. 
</p>
<ol>
<li>
<a href="../en/Synchronization_and_backup_programs.html" class="mw-redirect" title="Backup programs">Sauvegardez</a> toutes les données sur les partitions ext3 qui doivent être converties en ext4. Un paquet utile, spécialement pour les partitions racine, est <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=clonezilla">clonezilla</a></span>.</li>
<li>Editez <code>/etc/fstab</code> et changez le 'type' de ext3 à ext4 pour toutes les partitions qui doivent être converties en ext4.</li>
<li>Démarrez le support «live» (si nécessaire). Le processus de conversion avec <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=e2fsprogs">e2fsprogs</a></span> doit être effectué lorsque le lecteur n'est pas monté. Si vous convertissez une partition racine, la façon la plus simple d'y parvenir est de démarrer à partir d'un autre support «live».</li>
<li>Assurez-vous que la partition est <i>non</i> montée.</li>
<li>Si vous voulez convertir une partition ext2, la première étape de conversion consiste à ajouter un <a href="../en/File_systems.html#Journaling" title="File systems">journal</a> en exécutant <code>tune2fs -j /dev/sdxX</code> en tant que root ; ce qui en fait une partition ext3.</li>
<li>Exécutez <code>tune2fs -O extent,uninit_bg,dir_index /dev/sdxX</code> en tant que root. Cette commande convertit le système de fichiers ext3 en ext4 (de manière irréversible).</li>
<li>Exécutez <code>fsck -f /dev/sdxX</code> en tant que root.
<ul><li>Cette étape est nécessaire, sinon le système de fichiers <b>sera illisible</b>. Cette exécution de <i>fsck</i> est nécessaire pour remettre le système de fichiers dans un état cohérent. Elle trouvera des erreurs de somme de contrôle dans les descripteurs de groupe - c'est normal. L'option <code>-f</code> demande à <i>fsck</i> de forcer la vérification même si le système de fichiers semble propre. L'option <code>-p</code> peut être utilisée en plus pour "réparer automatiquement" (sinon, l'utilisateur sera invité à saisir des données pour chaque erreur).</li></ul>
</li>
<li>Recommandé : monter la partition et exécuter <code>e4defrag -c -v /dev/sdxX</code> en tant que root.
<ul><li>Même si le système de fichiers est maintenant converti en ext4, tous les fichiers qui ont été écrits avant la conversion ne profitent pas encore de l'option extent de ext4, qui améliorera les performances des gros fichiers et réduira la fragmentation et le temps de vérification du système de fichiers. Afin de tirer pleinement parti de ext4, tous les fichiers devraient être réécrits sur le disque. Utilisez <i>e4defrag</i> pour résoudre ce problème.</li></ul>
</li>
<li>Redémarrage</li>
</ol>
<div class="mw-heading mw-heading2"><h2 id="Améliorer_les_performances">
<span id="Am.C3.A9liorer_les_performances"></span>Améliorer les performances</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Désactiver_la_mise_à_jour_du_temps_d'accès">
<span id="D.C3.A9sactiver_la_mise_.C3.A0_jour_du_temps_d.27acc.C3.A8s"></span>Désactiver la mise à jour du temps d'accès</h3></div>
<p>Le système de fichiers <i>ext4</i> enregistre des informations sur le dernier accès à un fichier et il y a un coût associé à cet enregistrement. Avec l'option <code>noatime</code>, les horodatages d'accès sur le système de fichiers ne sont pas mis à jour.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sda5 / ext4 defaults, <b>noatime</b> 0 1
</pre>
<p>Faire ainsi casse les applications qui comptent sur le temps d'accès, consultez <a href="../fr/Fstab.html#Options_atime" title="Fstab (Français)">Fstab (Français)#Options atime</a> pour des solutions possibles.
</p>
<div class="mw-heading mw-heading3"><h3 id="Augmentation_de_l'intervalle_de_commit">
<span id="Augmentation_de_l.27intervalle_de_commit"></span>Augmentation de l'intervalle de commit</h3></div>
<p>L'intervalle de synchronisation des données et des métadonnées peut être augmenté en fournissant un délai plus élevé à l'option <code>commit</code>.
</p>
<p>Le délai par défaut de 5 secondes signifie qu'en cas de coupure de courant, on perd autant que les 5 dernières secondes de travail. 
Cela force une synchronisation complète de toutes les données/journaux sur un support physique toutes les 5 secondes. Le système de fichiers ne sera cependant pas endommagé, grâce à la journalisation.
Le <a href="../fr/Fstab.html" title="Fstab (Français)">fstab (Français)</a> suivant illustre l'utilisation de <code>commit</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sda5 / ext4 defaults,noatime, <b>commit=60</b> 0 1</pre>
<div class="mw-heading mw-heading3"><h3 id="Désactiver_les_barrières">
<span id="D.C3.A9sactiver_les_barri.C3.A8res"></span>Désactiver les barrières</h3></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention</strong> La désactivation des barrières pour les disques sans cache alimenté par batterie n'est pas recommandée et peut entraîner une grave corruption du système de fichiers et la perte de données.</div>
<p><i>Ext4</i> active les barrières d'écriture par défaut. Cela garantit que les métadonnées du système de fichiers sont correctement écrites et ordonnées sur le disque, même lorsque les caches d'écriture perdent de l'énergie. Cela a un coût en termes de performances, en particulier pour les applications qui utilisent beaucoup <i>fsync</i> ou qui créent et suppriment de nombreux petits fichiers. Pour les disques dont le cache d'écriture est alimenté par une batterie d'une manière ou d'une autre, la désactivation des barrières peut améliorer les performances en toute sécurité.
</p>
<p>Pour désactiver les barrières, ajoutez l'option <code>barrier=0</code> au système de fichiers souhaité. Par exemple :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sda5 / ext4 noatime, <b>barrier=0</b> 0 1</pre>
<div class="mw-heading mw-heading3"><h3 id="Désactiver_la_journalisation">
<span id="D.C3.A9sactiver_la_journalisation"></span>Désactiver la journalisation</h3></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention</strong> L'utilisation d'un système de fichiers sans journalisation peut entraîner une perte de données en cas de démontage soudain, comme une panne de courant ou un blocage du noyau</div>
<p>Désactiver la journalisation avec <i>ext4</i> peut être fait avec la commande suivante sur un disque non monté :
</p>
<pre># tune2fs -O "^has_journal" /dev/sdXN
</pre>
<div class="mw-heading mw-heading3"><h3 id="Utiliser_un_journal_externe_pour_optimiser_les_performances">Utiliser un journal externe pour optimiser les performances</h3></div>
<p>Pour ceux qui se soucient à la fois de l'intégrité des données et des performances, la journalisation peut être accélérée de manière significative avec l'option de montage <code>journal_async_commit</code>. Notez que cette option <a rel="nofollow" class="external text" href="https://patchwork.ozlabs.org/patch/414750/">ne fonctionne pas avec</a> la valeur par défaut équilibrée de <code>data=ordered</code>, elle n'est donc recommandée que lorsque le système de fichiers utilise déjà prudemment <code>data=journal</code>.
</p>
<p>Vous pouvez alors formater un périphérique dédié à la journalisation avec <code>mke2fs -O journal_dev /dev/journal_dev</code>. Utilisez <code>tune2fs -J device=/dev/journal_device /dev/ext4_fs</code> pour affecter le journal à un périphérique existant, ou remplacez <code>tune2fs</code> par <code>mkfs.ext4</code> si vous créez un nouveau système de fichiers.
</p>
<div class="mw-heading mw-heading2"><h2 id="Trucs_et_astuces">Trucs et astuces</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Utilisation_du_chiffrement_basé_sur_les_fichiers">
<span id="Utilisation_du_chiffrement_bas.C3.A9_sur_les_fichiers"></span>Utilisation du chiffrement basé sur les fichiers</h3></div>
<p>Depuis Linux 4.1, ext4 prend nativement en charge le chiffrement des fichiers, consultez l'article <a href="../en/Fscrypt.html" title="Fscrypt">fscrypt</a>.  Le chiffrement est appliqué au niveau du répertoire, et différents répertoires peuvent utiliser différentes clés de chiffrement. Ceci est différent à la fois de <a href="../en/Dm-crypt.html" title="Dm-crypt">dm-crypt</a>, qui est un chiffrement au niveau des blocs, et de <a href="../en/ECryptfs.html" title="ECryptfs">eCryptfs</a>, qui est un système de fichiers cryptographique empilé.
</p>
<div class="mw-heading mw-heading3"><h3 id="Activation_des_sommes_de_contrôle_des_métadonnées_dans_les_systèmes_de_fichiers_existants">
<span id="Activation_des_sommes_de_contr.C3.B4le_des_m.C3.A9tadonn.C3.A9es_dans_les_syst.C3.A8mes_de_fichiers_existants"></span>Activation des sommes de contrôle des métadonnées dans les systèmes de fichiers existants</h3></div>
<p>Lorsqu'un système de fichiers a été créé avec <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=e2fsprogs">e2fsprogs</a></span> 1.43 (2016) ou une version ultérieure, les sommes de contrôle des métadonnées sont activées par défaut. Les systèmes de fichiers existants peuvent être convertis pour prendre en charge les sommes de contrôle des métadonnées.
</p>
<p>Si l'unité centrale prend en charge SSE 4.2, assurez-vous que le <a href="../fr/Kernel_module.html" class="mw-redirect" title="Module du noyau">module du noyau</a> <code>crc32c_intel</code> est chargé afin d'activer l'algorithme CRC32C accéléré par le matériel <a rel="nofollow" class="external autonumber" href="https://ext4.wiki.kernel.org/index.php/Ext4_Metadata_Checksums#Benchmarking">[5]</a>. Sinon, chargez le module <code>crc32c_generic</code> à la place.
</p>
<p>Pour en savoir plus sur les sommes de contrôle des métadonnées, consultez le <a rel="nofollow" class="external text" href="https://ext4.wiki.kernel.org/index.php/Ext4_Metadata_Checksums">wiki ext4</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce</strong> Utiliser <code>dumpe2fs</code> pour vérifier les fonctionnalités qui sont activées sur le système de fichiers :
<pre># dumpe2fs -h <i>/dev/path/to/disk</i>
</pre>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Le système de fichiers ne doit pas être monté.</div>
<p>La partition doit d'abord être vérifiée et optimisée à l'aide de <code>e2fsck</code> :
</p>
<pre># e2fsck -Df <i>/dev/path/to/disk</i>  
</pre>
<p>Convertissez le système de fichiers en 64 bits :
</p>
<pre># resize2fs -b <i>/dev/path/to/disk</i>
</pre>
<p>Enfin, prenez en charge les sommes de contrôle :
</p>
<pre># tune2fs -O metadata_csum <i>/dev/path/to/disk</i>
</pre>
<p>Pour vérifier :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dumpe2fs -h <i>/dev/path/to/disk</i> | grep features:</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Caractéristiques du système de fichiers : has_journal ext_attr resize_inode dir_index filetype extent <b>64bit</b> flex_bg sparse_super large_file huge_file dir_nlink extra_isize <b>metadata_csum</b>.</pre>
<div class="mw-heading mw-heading3"><h3 id="Activation_de_fast_commit_dans_les_systèmes_de_fichiers_existants">
<span id="Activation_de_fast_commit_dans_les_syst.C3.A8mes_de_fichiers_existants"></span>Activation de fast_commit dans les systèmes de fichiers existants</h3></div>
<p>À partir du noyau 5.10, ext4 peut bénéficier d'une augmentation des performances en activant l'option <code>fast_commit</code> :   
</p>
<pre># tune2fs -O fast_commit /dev/<i>drivepartition</i>
</pre>
<p>Pour clarifier la configuration actuelle ou les changements :  
</p>
<pre># tune2fs -l /dev/<i>drivepartition</i> | grep features
</pre>
<div class="mw-heading mw-heading2"><h2 id="Voir_aussi">Voir aussi</h2></div>
<ul>
<li><a rel="nofollow" class="external text" href="https://ext4.wiki.kernel.org/">wiki officiel Ext4</a></li>
<li>
<a rel="nofollow" class="external text" href="https://ext4.wiki.kernel.org/index.php/Ext4_Disk_Layout">Ext4 Disk Layout</a> décrit dans son wiki</li>
<li>
<a rel="nofollow" class="external text" href="https://lwn.net/Articles/639427/">Ext4 Encryption</a> article LWN</li>
<li>Commits du noyau pour le chiffrement ext4 <a rel="nofollow" class="external autonumber" href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=6162e4b0bedeb3dac2ba0a5e1b1f56db107d97ec">[6]</a> <a rel="nofollow" class="external autonumber" href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=8663da2c0919896788321cd8a0016af08588c656">[7]</a>
</li>
<li><a rel="nofollow" class="external text" href="https://e2fsprogs.sourceforge.net/e2fsprogs-release.html">e2fsprogs Changelog</a></li>
<li><a rel="nofollow" class="external text" href="https://ext4.wiki.kernel.org/index.php/Ext4_Metadata_Checksums">Somme de contrôle des métadonnées Ext4</a></li>
<li><a rel="nofollow" class="external text" href="https://lwn.net/Articles/842385/">Ext4 fast commits</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fr/Category:File_systems.html" title="Category:File systems (Français)">File systems (Français)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Ext4_(Fran%C3%A7ais)&amp;oldid=838728">https://wiki.archlinux.org/index.php?title=Ext4_(Français)&amp;oldid=838728</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 22 June 2025, at 06:09.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Ext4 (Français)</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
