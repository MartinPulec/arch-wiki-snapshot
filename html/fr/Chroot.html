<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>chroot (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Chroot_Français rootpage-Chroot_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Raisonnement" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Raisonnement">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Raisonnement</div>
		</a>
		
		<ul id="toc-Raisonnement-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Pré-requis" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Pr%C3%A9-requis">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Pré-requis</div>
		</a>
		
		<ul id="toc-Pré-requis-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Préparer_le_nouvel_emplacement_de_la_racine" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Pr%C3%A9parer_le_nouvel_emplacement_de_la_racine">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Préparer le nouvel emplacement de la racine</div>
		</a>
		
		<ul id="toc-Préparer_le_nouvel_emplacement_de_la_racine-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Utilisation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Utilisation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Utilisation</div>
		</a>
		
			<button aria-controls="toc-Utilisation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Utilisation subsection</span>
			</button>
		
		<ul id="toc-Utilisation-sublist" class="vector-toc-list">
			<li id="toc-Avec_arch-chroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Avec_arch-chroot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Avec arch-chroot</div>
			</a>
			
			<ul id="toc-Avec_arch-chroot-sublist" class="vector-toc-list">
				<li id="toc-Entrer_un_chroot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Entrer_un_chroot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.1</span>Entrer un chroot</div>
			</a>
			
			<ul id="toc-Entrer_un_chroot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Quitter_un_chroot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Quitter_un_chroot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.2</span>Quitter un chroot</div>
			</a>
			
			<ul id="toc-Quitter_un_chroot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exécuter_une_seule_commande_et_quitter" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ex%C3%A9cuter_une_seule_commande_et_quitter">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.3</span>Exécuter une seule commande et quitter</div>
			</a>
			
			<ul id="toc-Exécuter_une_seule_commande_et_quitter-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Avec_chroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Avec_chroot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Avec chroot</div>
			</a>
			
			<ul id="toc-Avec_chroot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Exécuter_des_applications_graphiques_à_partir_de_chroot" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Ex%C3%A9cuter_des_applications_graphiques_%C3%A0_partir_de_chroot">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Exécuter des applications graphiques à partir de chroot</div>
		</a>
		
		<ul id="toc-Exécuter_des_applications_graphiques_à_partir_de_chroot-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Sans_privilèges_root" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Sans_privil%C3%A8ges_root">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Sans privilèges root</div>
		</a>
		
			<button aria-controls="toc-Sans_privilèges_root-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Sans privilèges root subsection</span>
			</button>
		
		<ul id="toc-Sans_privilèges_root-sublist" class="vector-toc-list">
			<li id="toc-PRoot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PRoot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>PRoot</div>
			</a>
			
			<ul id="toc-PRoot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fakechroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fakechroot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Fakechroot</div>
			</a>
			
			<ul id="toc-Fakechroot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unshare" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unshare">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Unshare</div>
			</a>
			
			<ul id="toc-Unshare-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dépannage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#D%C3%A9pannage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Dépannage</div>
		</a>
		
			<button aria-controls="toc-Dépannage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dépannage subsection</span>
			</button>
		
		<ul id="toc-Dépannage-sublist" class="vector-toc-list">
			<li id="toc-arch-chroot:_/chemin/vers/la/nouvelle/racine_is_not_a_mountpoint._This_may_have_undesirable_side_effects." class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#arch-chroot:_/chemin/vers/la/nouvelle/racine_is_not_a_mountpoint._This_may_have_undesirable_side_effects.">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>arch-chroot: /chemin/vers/la/nouvelle/racine is not a mountpoint. This may have undesirable side effects.</div>
			</a>
			
			<ul id="toc-arch-chroot:_/chemin/vers/la/nouvelle/racine_is_not_a_mountpoint._This_may_have_undesirable_side_effects.-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Voir_aussi" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Voir_aussi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Voir aussi</div>
		</a>
		
		<ul id="toc-Voir_aussi-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">chroot (Français)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 8 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-8" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">8 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Chroot" title="Chroot – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Chroot.html" title="Chroot – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Chroot.html" title="Chroot – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Chroot" title="Chroot – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Chroot.html" title="Chroot – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Chroot.html" title="Chroot – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-tr mw-list-item"><a href="../tr/Chroot.html" title="Chroot – Türkçe" lang="tr" hreflang="tr" class="interlanguage-link-target"><span>Türkçe</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Chroot" title="Chroot – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Chroot.html" title="Chroot">chroot</a>. Date de la dernière traduction: 2023-02-18. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Chroot&amp;diff=0&amp;oldid=767970">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/PRoot.html" title="PRoot">PRoot</a></li>
<li><a href="../en/Linux_Containers.html" title="Linux Containers">Linux Containers</a></li>
<li><a href="../en/Systemd-nspawn.html" title="Systemd-nspawn">systemd-nspawn</a></li>
<li><a href="../DeveloperWiki:Building_in_a_clean_chroot.html" title="DeveloperWiki:Building in a clean chroot">DeveloperWiki:Building in a clean chroot</a></li>
</ul>
</div>
<p>Un <a href="https://en.wikipedia.org/wiki/fr:Chroot" class="extiw" title="wikipedia:fr:Chroot">chroot</a> est une opération qui modifie le répertoire racine apparent pour le processus en cours d'exécution et ses enfants. Un programme qui est exécuté dans un tel environnement modifié ne peut pas accéder aux fichiers et aux commandes en dehors de l'arborescence des répertoires de l'environnement.  Cet environnement modifié est appelé <i>chroot jail</i> (prison «chroot»).
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Raisonnement">Raisonnement</span></h2>
<p>Le changement de racine est généralement effectué pour effectuer la maintenance du système sur des systèmes où il n'est plus possible de démarrer et/ou de se connecter. Des exemples courants sont :
</p>
<ul>
<li>Réinstaller le <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" class="mw-redirect" title="Chargeur d'amorçage">chargeur d'amorçage</a>.</li>
<li>Reconstruction de l'image <a href="../fr/Mkinitcpio.html" title="Mkinitcpio (Français)">initramfs</a>.</li>
<li>Mise à jour ou <a href="../fr/Downgrading_packages.html" class="mw-redirect" title="Rétrograde">rétrogradation de paquets</a>.</li>
<li>Réinitialisation d'un <a href="../en/Reset_lost_root_password.html" class="mw-redirect" title="Password recovery">mot de passe oublié</a>.</li>
<li>Construction de paquets dans un <a href="../DeveloperWiki:Building_in_a_clean_chroot.html" title="DeveloperWiki:Building in a clean chroot">chroot propre</a>.</li>
</ul>
<p>Consultez également <a href="https://en.wikipedia.org/wiki/Chroot#Limitations" class="extiw" title="wikipedia:Chroot">Wikipedia:Chroot#Limitations</a>.
</p>
<h2>
<span id="Pr.C3.A9-requis"></span><span class="mw-headline" id="Pré-requis">Pré-requis</span>
</h2>
<p>Afin d'utiliser chroot, vous avez besoin d'une autre installation sous Linux ou d'un autre support d'installation (de n'importe quelle distribution), avec :
</p>
<ul>
<li>Les privilèges <a href="../fr/Users_and_groups.html#Vue_d'ensemble" title="Users and groups (Français)">root</a> (voir <a href="#Sans_privil%C3%A8ges_root">#Sans privilèges root</a> pour les alternatives).</li>
<li>Le même <a href="https://en.wikipedia.org/wiki/fr:Jeu_d%27instructions" class="extiw" title="wikipedia:fr:Jeu d'instructions">jeu d'instructions</a> que le système dans lequel vous allez chrooter. L'architecture de l'environnement actuel peut être trouvée avec : <code>uname -m</code> (par exemple, i686 ou x86_64).</li>
<li>Charger les modules du noyau qui sont nécessaires dans l'environnement chroot.</li>
<li>
<a href="../fr/Swap.html" title="Swap (Français)">Swap</a> activé si nécessaire : <pre># swapon /dev/sd<i>xY</i></pre>
</li>
<li>Une connexion Internet fonctionnelle si nécessaire.</li>
</ul>
<h2>
<span id="Pr.C3.A9parer_le_nouvel_emplacement_de_la_racine"></span><span class="mw-headline" id="Préparer_le_nouvel_emplacement_de_la_racine">Préparer le nouvel emplacement de la racine</span>
</h2>
<p>La cible du chroot doit être un répertoire qui contient une hiérarchie de système de fichiers. 
</p>
<p>Dans le <a href="../fr/Installation_guide.html" class="mw-redirect" title="Guide d'installation">guide d'installation</a>, ce répertoire est <code>/mnt</code>. Pour une installation existante, vous devez monter vous-même les partitions existantes dans <code>/mnt</code> :
</p>
<p>Exécutez <code>lsblk</code> et notez la disposition des partitions de votre installation. Ce sera généralement quelque chose comme <code>/dev/sd<i>XY</i></code> ou si vous avez un lecteur NVMe <code>/dev/nvme0n<i>X</i>p<i>Y</i></code>.
</p>
<p>Montez le système de fichiers : 
</p>
<ol><li>mount /dev/sd<i>XY'</i> /mnt</li></ol>
<p>Si vous avez une <a href="../fr/EFI_system_partition.html" title="EFI system partition (Français)">partition système EFI</a> et que vous devez y apporter des modifications (par exemple, mettre à jour les images <a href="../fr/Kernel.html" title="Kernel (Français)">vmlinuz</a> ou <a href="../fr/Arch_boot_process.html#Initramfs" title="Arch boot process (Français)">initramfs</a>) :
</p>
<ol><li>mount /dev/sd'<i>XZ</i> /mnt/<i>esp</i>
</li></ol>
<p>Si vous avez des <a href="../en/Partitioning.html#Discrete_partitions" title="Partitioning">partitions distinctes</a>, montez-les également.
</p>
<p>Dans les exemples suivants, <code><i>/chemin/vers/la/nouvelle/racine</i></code> est le répertoire où réside la nouvelle racine (par exemple <code>/mnt</code>).
</p>
<h2><span class="mw-headline" id="Utilisation">Utilisation</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Certains outils <a href="../fr/Systemd.html" title="Systemd (Français)">systemd</a> tels que <i>hostnamectl</i>, <i>localectl</i> et <i>timedatectl</i> ne peuvent pas être utilisés dans un chroot, car ils nécessitent une connexion <a href="../en/D-Bus.html" class="mw-redirect" title="Dbus">dbus</a> active. <a rel="nofollow" class="external autonumber" href="https://github.com/systemd/systemd/issues/798#issuecomment-126568596">[1]</a>
</li>
<li>Le système de fichiers qui servira de nouvelle racine (<code>/</code>) à votre chroot doit être accessible (c'est-à-dire déchiffré, <a href="../en/File_systems.html#Mount_a_file_system" class="mw-redirect" title="Mount">monté</a>).</li>
</ul>
</div>
<p>Il y a deux options principales pour utiliser chroot, décrites ci-dessous.
</p>
<h3><span class="mw-headline" id="Avec_arch-chroot">Avec arch-chroot</span></h3>
<p>Le script bash <i>arch-chroot</i> fait partie du paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span>. <i>arch-chroot</i> est une surcouche de <span class="plainlinks archwiki-template-man" title="$ man 1 chroot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/chroot.1">chroot(1)</a></span>, assurant que les fonctionnalités importantes sont disponibles, par exemple le montage de <code>/dev</code>, <code>/proc</code> et d'autres systèmes de fichiers API, ou l'exposition de <code>/etc/resolv.conf</code> au chroot.
</p>
<h4><span class="mw-headline" id="Entrer_un_chroot">Entrer un chroot</span></h4>
<p>Lancez arch-chroot avec le nouveau répertoire racine comme premier argument :
</p>
<pre># arch-chroot <i>/chemin/vers/la/nouvelle/racine</i>
</pre>
<p>Vous pouvez maintenant effectuer la plupart des opérations disponibles dans votre installation existante. Certaines tâches qui nécessitent le <a href="../en/D-Bus.html" title="D-Bus">D-Bus</a> ne fonctionneront pas comme indiqué dans <a href="#Utilisation">#Utilisation</a>.
</p>
<h4><span class="mw-headline" id="Quitter_un_chroot">Quitter un chroot</span></h4>
<p>Pour quitter le chroot, utilisez :
</p>
<pre># exit
</pre>
<h4>
<span id="Ex.C3.A9cuter_une_seule_commande_et_quitter"></span><span class="mw-headline" id="Exécuter_une_seule_commande_et_quitter">Exécuter une seule commande et quitter</span>
</h4>
<p>Pour exécuter une commande depuis le chroot et sortir à nouveau, ajoutez la commande à la fin de la ligne :
</p>
<pre># arch-chroot <i>/chemin/vers/la/nouvelle/racine</i> <i>ma-commande</i>
</pre>
<p>Par exemple, pour exécuter <code>mkinitcpio -p linux</code> pour un chroot situé à <code>/mnt/arch</code>, faites :
</p>
<pre># arch-chroot /mnt/arch mkinitcpio -p linux
</pre>
<h3><span class="mw-headline" id="Avec_chroot">Avec chroot</span></h3>
<p>Tout d'abord, montez les systèmes de fichiers temporaires de l'API :
</p>
<pre># cd <i>/chemin/vers/la/nouvelle/racine</i>
# mount -t proc /proc proc/
# mount -t sysfs /sys sys/
# mount --rbind /dev dev/
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Lorsque vous utilisez <code>--rbind</code>, certains sous-répertoires de <code>dev/</code> et <code>sys/</code> ne seront pas démontables. Tenter de démonter avec <code>umount -l</code> dans cette situation interrompra votre session et nécessitera un redémarrage. Si possible, utilisez <code>-o bind</code> à la place.</div>
<p>Et optionnellement :
</p>
<pre># mount --rbind /run run/
</pre>
<p>Si vous utilisez un système UEFI, vous aurez également besoin d'accéder aux variables EFI. Sinon, lors de l'installation de GRUB, vous recevrez un message similaire à : <code>UEFI variables not supported on this machine</code> :
</p>
<pre># mount --rbind /sys/firmware/efi/efivars sys/firmware/efi/efivars/
</pre>
<p>Ensuite, afin d'utiliser une connexion internet dans l'environnement chroot, copiez les détails du DNS :
</p>
<pre># cp /etc/resolv.conf etc/resolv.conf
</pre>
<p>Enfin, pour changer la racine en <code><i>/chemin/vers/la/nouvelle/racine</i></code> en utilisant un shell bash :
</p>
<pre># chroot <i>/chemin/vers/la/nouvelle/racine</i> /bin/bash
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Si vous rencontrez l'erreur :
<ul>
<li>
<code>chroot : cannot run command '/usr/bin/bash' : Exec format error</code>, il est probable que les architectures de l'environnement hôte et de l'environnement chroot ne correspondent pas.</li>
<li>
<code>chroot : '/usr/bin/bash' : permission denied</code>, remontez avec la permission d'exécuter : <code>mount -o remount,exec <i>/chemin/vers/la/nouvelle/racine</i></code>.
<ul><li>Si cette vérification n'a pas aidé, alors <a rel="nofollow" class="external text" href="https://www.tldp.org/LDP/LG/issue52/okopnik.html">assurez-vous</a> que les composants de base du nouvel environnement sont intacts (si c'est une racine Arch, essayez <code>paccheck --root=<i>/chemin/vers/la/nouvelle/racine</i> --files --file-properties --md5sum glibc filesystem</code>, de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacutils">pacutils</a></span>).</li></ul>
</li>
</ul>
</div>
<p>Après le chrootage, il peut être nécessaire de charger la configuration locale de bash :
</p>
<pre># source /etc/profile
# source ~/.bashrc
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Optionnellement, créez une invite unique pour pouvoir différencier votre environnement chroot :
<pre># export PS1="(chroot) $PS1"</pre>
</div>
<p>Lorsque vous avez terminé avec le chroot, vous pouvez le quitter via :
</p>
<pre># exit
</pre>
<p>Puis démontez les systèmes de fichiers temporaires :
</p>
<pre># cd /
# umount --recursive <i>/chemin/vers/la/nouvelle/racine</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> S'il y a une erreur mentionnant quelque chose comme : <code>umount : /path : device is busy</code>, cela signifie généralement que soit : un programme (même un shell) a été laissé en exécution dans le chroot ou qu'un sous-montage existe toujours.  Quittez le programme et utilisez <code>findmnt -R <i>/chemin/vers/la/nouvelle/racine</i></code> pour trouver et ensuite <code>umount</code> les sous-montages. Il peut être délicat de <code>umount</code> certaines choses et on peut espérer que <code>umount --force</code> fonctionne. En dernier recours, utilisez <code>umount --lazy</code> qui les libère simplement. Dans tous les cas, pour être sûr, <code>reboot</code>ez dès que possible si ces problèmes ne sont pas résolus pour éviter d'éventuels conflits futurs.</div>
<h2>
<span id="Ex.C3.A9cuter_des_applications_graphiques_.C3.A0_partir_de_chroot"></span><span class="mw-headline" id="Exécuter_des_applications_graphiques_à_partir_de_chroot">Exécuter des applications graphiques à partir de chroot</span>
</h2>
<p>Si un <a href="../fr/Xorg.html" class="mw-redirect" title="Serveur X">serveur X</a> est exécuté sur votre système, vous pouvez lancer des applications graphiques à partir de l'environnement chroot.
</p>
<p>Pour permettre à l'environnement chroot de se connecter à un serveur X, ouvrez un terminal virtuel à l'intérieur du serveur X (c'est-à-dire à l'intérieur du bureau de l'utilisateur qui est actuellement connecté), puis exécutez la commande <a href="../en/Xhost.html" title="Xhost">xhost</a>, qui donne la permission à quiconque de se connecter au serveur X de l'utilisateur (consultez également <a href="../en/Xhost.html" title="Xhost">Xhost</a>) :
</p>
<pre>$ xhost +local :
</pre>
<p>Ensuite, pour diriger les applications vers le serveur X à partir du chroot, définissez la variable d'environnement DISPLAY à l'intérieur du chroot pour qu'elle corresponde à la variable DISPLAY de l'utilisateur propriétaire du serveur X. Ainsi, par exemple, exécutez : 
</p>
<pre>$ echo $DISPLAY
</pre>
<p>en tant qu'utilisateur propriétaire du serveur X pour consulter la valeur de DISPLAY. Si la valeur est ":0" (par exemple), exécutez la commande suivante dans l'environnement chroot :
</p>
<pre># export DISPLAY=:0
</pre>
<h2>
<span id="Sans_privil.C3.A8ges_root"></span><span class="mw-headline" id="Sans_privilèges_root">Sans privilèges root</span>
</h2>
<p>Chroot nécessite des privilèges root, ce qui peut ne pas être souhaitable ou possible pour l'utilisateur dans certaines situations. Il existe cependant plusieurs façons de simuler un comportement de type chroot en utilisant des implémentations alternatives.
</p>
<h3><span class="mw-headline" id="PRoot">PRoot</span></h3>
<p><a href="../en/PRoot.html" title="PRoot">PRoot</a> peut être utilisé pour changer le répertoire racine apparent et utiliser <code>mount --bind</code> sans les privilèges de root. Ceci est utile pour confiner des applications à un seul répertoire ou pour exécuter des programmes construits pour une architecture de CPU différente, mais il y a des limitations dues au fait que tous les fichiers appartiennent à l'utilisateur du système hôte. PRoot fournit un argument <code>--root-id</code> qui peut être utilisé comme une solution de contournement pour certaines de ces limitations d'une manière similaire (bien que plus limitée) à <i>fakeroot</i>.
</p>
<h3><span class="mw-headline" id="Fakechroot">Fakechroot</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fakechroot">fakechroot</a></span> est une bibliothèque «shim» (cale) qui intercepte l'appel chroot et simule les résultats. Elle peut être utilisée en conjonction avec <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fakeroot">fakeroot</a></span> pour simuler un chroot comme un utilisateur normal. 
</p>
<pre>$ fakechroot fakeroot chroot ~/my-chroot bash
</pre>
<h3><span class="mw-headline" id="Unshare">Unshare</span></h3>
<p>Unshare, qui fait partie de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span>, peut être utilisé pour créer un nouvel espace de noms du noyau. Cela fonctionne avec la commande chroot habituelle. Par exemple :
</p>
<pre>$ unshare --map-root-user chroot ~/namespace /bin/sh
</pre>
<h2>
<span id="D.C3.A9pannage"></span><span class="mw-headline" id="Dépannage">Dépannage</span>
</h2>
<h3>
<span id="arch-chroot:_.2Fchemin.2Fvers.2Fla.2Fnouvelle.2Fracine_is_not_a_mountpoint._This_may_have_undesirable_side_effects."></span><span class="mw-headline" id="arch-chroot:_/chemin/vers/la/nouvelle/racine_is_not_a_mountpoint._This_may_have_undesirable_side_effects.">arch-chroot: /chemin/vers/la/nouvelle/racine is not a mountpoint. This may have undesirable side effects.</span>
</h3>
<p>Lors de l'exécution de <code>arch-chroot <i>/chemin/vers/la/nouvelle/racine</i></code>, un avertissement est émis :
</p>
<pre>==&gt; WARNING: <i>/chemin/vers/la/nouvelle/racine</i> is not a mountpoint. This may have undesirable side effects.
</pre>
<p>Consultez <span class="plainlinks archwiki-template-man" title="$ man 8 arch-chroot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/arch-chroot.8">arch-chroot(8)</a></span> pour une explication et un exemple d'utilisation de bind mounting pour faire du répertoire chroot un point de montage.
</p>
<h2><span class="mw-headline" id="Voir_aussi">Voir aussi</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/BasicChroot">Chroot de base</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../fr/Category:System_recovery.html" title="Category:System recovery (Français)">System recovery (Français)</a></li>
<li><a href="../fr/Category:Sandboxing.html" title="Category:Sandboxing (Français)">Sandboxing (Français)</a></li>
<li><a href="../fr/Category:Commands.html" title="Category:Commands (Français)">Commands (Français)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Chroot_(Fran%C3%A7ais)&amp;oldid=799154">https://wiki.archlinux.org/index.php?title=Chroot_(Français)&amp;oldid=799154</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 February 2024, at 18:03.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
