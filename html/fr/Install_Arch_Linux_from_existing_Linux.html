<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Install Arch Linux from existing Linux (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Install_Arch_Linux_from_existing_Linux_Français rootpage-Install_Arch_Linux_from_existing_Linux_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Sauvegarde_et_préparation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Sauvegarde_et_pr%C3%A9paration">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Sauvegarde et préparation</div>
		</a>
		
		<ul id="toc-Sauvegarde_et_préparation-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Depuis_un_hôte_exécutant_Arch_Linux" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Depuis_un_h%C3%B4te_ex%C3%A9cutant_Arch_Linux">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Depuis un hôte exécutant Arch Linux</div>
		</a>
		
			<button aria-controls="toc-Depuis_un_hôte_exécutant_Arch_Linux-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Depuis un hôte exécutant Arch Linux subsection</span>
			</button>
		
		<ul id="toc-Depuis_un_hôte_exécutant_Arch_Linux-sublist" class="vector-toc-list">
			<li id="toc-Créer_une_nouvelle_installation_d'Arch" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cr%C3%A9er_une_nouvelle_installation_d'Arch">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Créer une nouvelle installation d'Arch</div>
			</a>
			
			<ul id="toc-Créer_une_nouvelle_installation_d'Arch-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Créer_une_copie_d'une_installation_Arch_existante" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cr%C3%A9er_une_copie_d'une_installation_Arch_existante">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Créer une copie d'une installation Arch existante</div>
			</a>
			
			<ul id="toc-Créer_une_copie_d'une_installation_Arch_existante-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Depuis_un_hôte_exécutant_une_autre_distribution_Linux" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Depuis_un_h%C3%B4te_ex%C3%A9cutant_une_autre_distribution_Linux">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Depuis un hôte exécutant une autre distribution Linux</div>
		</a>
		
			<button aria-controls="toc-Depuis_un_hôte_exécutant_une_autre_distribution_Linux-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Depuis un hôte exécutant une autre distribution Linux subsection</span>
			</button>
		
		<ul id="toc-Depuis_un_hôte_exécutant_une_autre_distribution_Linux-sublist" class="vector-toc-list">
			<li id="toc-Utiliser_pacman_depuis_le_système_hôte" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utiliser_pacman_depuis_le_syst%C3%A8me_h%C3%B4te">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Utiliser pacman depuis le système hôte</div>
			</a>
			
			<ul id="toc-Utiliser_pacman_depuis_le_système_hôte-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Création_d'un_chroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cr%C3%A9ation_d'un_chroot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Création d'un chroot</div>
			</a>
			
			<ul id="toc-Création_d'un_chroot-sublist" class="vector-toc-list">
				<li id="toc-Méthode_A_:_Utilisation_de_l'image_bootstrap_(recommandée)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#M%C3%A9thode_A_:_Utilisation_de_l'image_bootstrap_(recommand%C3%A9e)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.1</span>Méthode A : Utilisation de l'image bootstrap (recommandée)</div>
			</a>
			
			<ul id="toc-Méthode_A_:_Utilisation_de_l'image_bootstrap_(recommandée)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Méthode_B_:_Utilisation_de_l'image_LiveCD" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#M%C3%A9thode_B_:_Utilisation_de_l'image_LiveCD">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.2</span>Méthode B : Utilisation de l'image LiveCD</div>
			</a>
			
			<ul id="toc-Méthode_B_:_Utilisation_de_l'image_LiveCD-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Utilisation_d'un_environnement_chroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilisation_d'un_environnement_chroot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Utilisation d'un environnement chroot</div>
			</a>
			
			<ul id="toc-Utilisation_d'un_environnement_chroot-sublist" class="vector-toc-list">
				<li id="toc-Initialisation_du_trousseau_de_clés_pacman" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Initialisation_du_trousseau_de_cl%C3%A9s_pacman">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.1</span>Initialisation du trousseau de clés pacman</div>
			</a>
			
			<ul id="toc-Initialisation_du_trousseau_de_clés_pacman-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Téléchargement_des_outils_de_base" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#T%C3%A9l%C3%A9chargement_des_outils_de_base">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.2</span>Téléchargement des outils de base</div>
			</a>
			
			<ul id="toc-Téléchargement_des_outils_de_base-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Conseils_d'installation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Conseils_d'installation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Conseils d'installation</div>
			</a>
			
			<ul id="toc-Conseils_d'installation-sublist" class="vector-toc-list">
				<li id="toc-Hôte_basé_sur_Debian" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#H%C3%B4te_bas%C3%A9_sur_Debian">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.1</span>Hôte basé sur Debian</div>
			</a>
			
			<ul id="toc-Hôte_basé_sur_Debian-sublist" class="vector-toc-list">
				<li id="toc-/dev/shm" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#/dev/shm">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.1.1</span>/dev/shm</div>
			</a>
			
			<ul id="toc-/dev/shm-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-/dev/pts" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#/dev/pts">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.1.2</span>/dev/pts</div>
			</a>
			
			<ul id="toc-/dev/pts-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-lvmetad" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#lvmetad">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.1.3</span>lvmetad</div>
			</a>
			
			<ul id="toc-lvmetad-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Hôte_basé_sur_Fedora" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#H%C3%B4te_bas%C3%A9_sur_Fedora">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.2</span>Hôte basé sur Fedora</div>
			</a>
			
			<ul id="toc-Hôte_basé_sur_Fedora-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Choses_à_vérifier_avant_de_redémarrer" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Choses_%C3%A0_v%C3%A9rifier_avant_de_red%C3%A9marrer">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Choses à vérifier avant de redémarrer</div>
		</a>
		
		<ul id="toc-Choses_à_vérifier_avant_de_redémarrer-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Remplacer_le_système_existant_sans_LiveCD" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Remplacer_le_syst%C3%A8me_existant_sans_LiveCD">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Remplacer le système existant sans LiveCD</div>
		</a>
		
			<button aria-controls="toc-Remplacer_le_système_existant_sans_LiveCD-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Remplacer le système existant sans LiveCD subsection</span>
			</button>
		
		<ul id="toc-Remplacer_le_système_existant_sans_LiveCD-sublist" class="vector-toc-list">
			<li id="toc-Définir_l'ancienne_partition_swap_comme_nouvelle_partition_racine" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9finir_l'ancienne_partition_swap_comme_nouvelle_partition_racine">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Définir l'ancienne partition swap comme nouvelle partition racine</div>
			</a>
			
			<ul id="toc-Définir_l'ancienne_partition_swap_comme_nouvelle_partition_racine-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installation">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Install Arch Linux from existing Linux (Français)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 7 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-7" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">7 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Arch_Linux_auf_einem_Root-Server" title="Arch Linux auf einem Root-Server – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Install_Arch_Linux_from_existing_Linux.html" title="Install Arch Linux from existing Linux – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Install_Arch_Linux_from_existing_Linux.html" title="Install Arch Linux from existing Linux – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E6%97%A2%E5%AD%98%E3%81%AE_Linux_%E3%81%8B%E3%82%89%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" title="既存の Linux からインストール – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Install_Arch_Linux_from_existing_Linux.html" title="Install Arch Linux from existing Linux – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Install_Arch_Linux_from_existing_Linux.html" title="Install Arch Linux from existing Linux – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Install_Arch_Linux_from_existing_Linux" title="Install Arch Linux from existing Linux – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Install_Arch_Linux_from_existing_Linux.html" title="Install Arch Linux from existing Linux">Install Arch Linux from existing Linux</a>. Date de la dernière traduction: 2022-05-22. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_from_existing_Linux&amp;diff=0&amp;oldid=730326">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Articles apparentés</p>
<ul>
<li><a href="../en/Install_Arch_Linux_via_SSH.html" class="mw-redirect" title="Install from SSH">Install from SSH</a></li>
</ul>
</div>
<p>Ce document décrit le processus d'amorçage nécessaire pour installer Arch Linux à partir d'un système hôte Linux en fonctionnement.
Après l'amorçage, l'installation se déroule comme décrit dans le <a href="../fr/Installation_guide.html" class="mw-redirect" title="Guide d'installation">Guide d'installation</a>.
</p>
<p>Installer Arch Linux à partir d'un système Linux en fonctionnement est utile pour :
</p>
<ul>
<li>installer Arch Linux à distance, par exemple un serveur racine (virtuel)</li>
<li>remplacer un Linux existant sans LiveCD (voir <a href="#Remplacer_le_syst%C3%A8me_existant_sans_LiveCD">#Remplacer le système existant sans LiveCD</a>)</li>
<li>créer une nouvelle distribution Linux ou <a href="../en/Arch-based_distributions.html" title="Arch-based distributions">LiveMedia basé sur Arch Linux</a>.</li>
<li>créer un environnement chroot Arch Linux, par exemple pour un conteneur de base Docker</li>
<li>
<a href="../en/Diskless_system.html" class="mw-redirect" title="Diskless network boot NFS root">rootfs-over-NFS for diskless machines</a>.</li>
</ul>
<p>Le but de la procédure d'amorçage est de mettre en place un environnement à partir duquel les scripts de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span> (tels que <code>pacstrap</code> et <code>arch-chroot</code>) peuvent être exécutés.
</p>
<p>Si le système hôte utilise Arch Linux, il suffit d'installer <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span>. Si le système hôte fonctionne sous une autre distribution Linux, vous devrez d'abord configurer un chroot basé sur Arch Linux.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Ce guide exige que le système hôte existant soit capable d'exécuter les programmes de la nouvelle architecture Arch Linux cible. Cela signifie qu'il doit s'agir d'un hôte x86_64.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Veuillez vous assurer que vous comprenez chaque étape avant de procéder. Il est facile de détruire votre système ou de perdre des données critiques, et votre fournisseur de services vous facturera probablement beaucoup pour vous aider à récupérer.</div>
<meta property="mw:PageProp/toc">
<h2>
<span id="Sauvegarde_et_pr.C3.A9paration"></span><span class="mw-headline" id="Sauvegarde_et_préparation">Sauvegarde et préparation</span>
</h2>
<p>Sauvegardez toutes vos données, y compris les courriers électroniques, les serveurs Web, etc. Ayez toutes les informations à portée de main. Conservez toutes les configurations de vos serveurs, les noms d'hôtes, etc.
</p>
<p>Voici une liste des données dont vous aurez probablement besoin :
</p>
<ul>
<li>adresse IP</li>
<li>nom(s) d'hôte (note : les serveurs racines font souvent partie du domaine du fournisseur, vérifiez ou sauvegardez votre <code>/etc/hosts</code> avant de le supprimer)</li>
<li>serveur DNS (vérifiez <code>/etc/resolv.conf</code>)</li>
<li>Clés SSH (si d'autres personnes travaillent sur votre serveur, elles devront accepter de nouvelles clés sinon. Cela inclut les clés de votre Apache, de vos serveurs de messagerie, de votre serveur SSH et autres).</li>
<li>Infos sur le matériel (carte réseau, etc. Référez-vous à votre <code>/etc/modules.conf</code> pré-installé)</li>
<li>Les fichiers de configuration de Grub.</li>
</ul>
<p>En général, c'est une bonne idée d'avoir une copie locale de votre répertoire original <code>/etc</code> sur votre disque dur local.
</p>
<h2>
<span id="Depuis_un_h.C3.B4te_ex.C3.A9cutant_Arch_Linux"></span><span class="mw-headline" id="Depuis_un_hôte_exécutant_Arch_Linux">Depuis un hôte exécutant Arch Linux</span>
</h2>
<p>Installez le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span>.
</p>
<p>Suivez <a href="../fr/Installation_guide.html#Montage_des_syst%C3%A8mes_de_fichiers" class="mw-redirect" title="Guide d'installation">Guide d'installation#Montage des systèmes de fichiers</a> pour monter le système de fichiers qui sera utilisé pour le répertoire racine ainsi que tous les autres points de montage nécessaires. Si vous utilisez déjà le répertoire <code>/mnt</code> pour autre chose, créez simplement un autre répertoire tel que <code>/mnt/install</code> et utilisez-le comme base de point de montage pour le reste de l'installation.
</p>
<p>À ce stade, Arch Linux peut soit être installé à partir de zéro, soit refléter l'installation de l'hôte. Les deux options sont décrites ci-après.
</p>
<h3>
<span id="Cr.C3.A9er_une_nouvelle_installation_d.27Arch"></span><span class="mw-headline" id="Créer_une_nouvelle_installation_d'Arch">Créer une nouvelle installation d'Arch</span>
</h3>
<p>Suivez <a href="../fr/Installation_guide.html#Installation" class="mw-redirect" title="Guide d'installation">Guide d'installation#Installation</a>.
</p>
<p>Dans la procédure, la première étape, <a href="../fr/Installation_guide.html#S%C3%A9lection_du_miroir" class="mw-redirect" title="Guide d'installation">Guide d'installation#Sélection du miroir</a>, peut être sautée puisque l'hôte devrait déjà avoir une liste de miroirs correcte.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> 
<ul>
<li>Afin d'éviter de retélécharger tous les paquets, envisagez de suivre <a href="../fr/Pacman/Tips_and_tricks.html#Cache_pacman_partag%C3%A9_en_r%C3%A9seau" title="Pacman (Français)/Tips and tricks (Français)">Pacman (Français)/Tips and tricks (Français)#Cache pacman partagé en réseau</a>, ou utilisez l'option <code>-c</code> de <i>pacstrap</i> pour utiliser le cache des paquets de votre machine hôte.</li>
<li>Lorsque le chargeur d'amorçage GRUB est utilisé, le <code>grub-mkconfig</code> peut détecter les périphériques de manière incorrecte. Il en résultera <code>Error:no such device</code> lors de la tentative d'amorçage à partir de la clé. Pour résoudre ce problème, depuis l'hôte exécutant Arch Linux, montez les partitions nouvellement installées, <i>arch-chroot</i> sur la nouvelle partition, puis installez et configurez GRUB. La dernière étape peut nécessiter la désactivation de <i>lvmetad</i> dans <code>/etc/lvm/lvm.conf</code> en définissant <code>use_lvmetad=0</code>.</li>
</ul>
</div>
<h3>
<span id="Cr.C3.A9er_une_copie_d.27une_installation_Arch_existante"></span><span class="mw-headline" id="Créer_une_copie_d'une_installation_Arch_existante">Créer une copie d'une installation Arch existante</span>
</h3>
<p>Il est possible de répliquer une installation Arch Linux existante en copiant le système de fichiers hôte sur la nouvelle partition et en y apportant quelques ajustements pour la rendre amorçable et unique.
</p>
<p>La première étape consiste à copier les fichiers hôtes dans la nouvelle partition montée, pour cela, envisagez d'utiliser l'approche exposée dans <a href="../fr/Rsync.html#Clonage_du_syst%C3%A8me_de_fichiers" title="Rsync (Français)">Rsync (Français)#Clonage du système de fichiers</a>.
</p>
<p>Ensuite, suivez la procédure décrite dans <a href="../fr/Installation_guide.html#Configuration_du_syst%C3%A8me" class="mw-redirect" title="Guide d'installation">Guide d'installation#Configuration du système</a> avec quelques avertissements et étapes supplémentaires :
</p>
<ul>
<li>
<a href="../fr/Installation_guide.html#Heure" class="mw-redirect" title="Guide d'installation">Guide d'installation#Heure</a>, <a href="../fr/Installation_guide.html#Locales" class="mw-redirect" title="Guide d'installation">Guide d'installation#Locales</a> et <a href="../fr/Installation_guide.html#Mot_de_passe_administrateur" class="mw-redirect" title="Guide d'installation">Guide d'installation#Mot de passe administrateur</a> peuvent être ignorés.</li>
<li>
<a href="../fr/Installation_guide.html#Initramfs" class="mw-redirect" title="Guide d'installation">Guide d'installation#Initramfs</a> peut être nécessaire en particulier si vous changez de système de fichiers, par exemple de <a href="../fr/Ext4.html" title="Ext4 (Français)">ext4</a> à <a href="../en/Btrfs.html" class="mw-redirect" title="Btrfs (Français)">Btrfs</a>.</li>
<li>Concernant <a href="../fr/Installation_guide.html#Installation_d'un_chargeur_d'amor%C3%A7age" class="mw-redirect" title="Guide d'installation">Guide d'installation#Installation d'un chargeur d'amorçage</a>, il est nécessaire de réinstaller le chargeur d'amorçage</li>
<li>Supprimer <code>/etc/machine-id</code> pour qu'un nouveau, unique, soit généré au prochain démarrage.</li>
</ul>
<p>Si l'installation miroir d'Arch peut être utilisée dans une configuration différente ou avec un autre matériel, envisagez les opérations supplémentaires suivantes :
</p>
<ul>
<li>Utilisez la mise à jour du <a href="../en/Microcode.html" title="Microcode">microcode</a> du processeur adaptée au système cible lors de l'étape <a href="../fr/Installation_guide.html#Installation_d'un_chargeur_d'amor%C3%A7age" class="mw-redirect" title="Guide d'installation">Guide d'installation#Installation d'un chargeur d'amorçage</a>.</li>
<li>Si une <a href="../fr/Xorg.html#Configuration" title="Xorg (Français)">Xorg (Français)#Configuration</a> spécifique était présente sur l'hôte et peut être incompatible avec le système cible, suivez <a href="../en/Moving_an_existing_install_into_(or_out_of)_a_virtual_machine.html#Disable_any_Xorg-related_files" title="Moving an existing install into (or out of) a virtual machine">Moving an existing install into (or out of) a virtual machine#Disable any Xorg-related files</a>.</li>
<li>Effectuez tout autre ajustement approprié au système cible, comme la reconfiguration du réseau ou de l'audio.</li>
</ul>
<h2>
<span id="Depuis_un_h.C3.B4te_ex.C3.A9cutant_une_autre_distribution_Linux"></span><span class="mw-headline" id="Depuis_un_hôte_exécutant_une_autre_distribution_Linux">Depuis un hôte exécutant une autre distribution Linux</span>
</h2>
<p>Il existe de nombreux outils qui automatisent une grande partie des étapes décrites dans les sous-sections suivantes. Consultez leurs pages d'accueil respectives pour des instructions détaillées.
</p>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://github.com/tokland/arch-bootstrap">arch-bootstrap</a> (Bash)</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/gh2o/digitalocean-debian-to-arch">digitalocean-debian-to-arch</a> (repartitionnement du disque, spécifique à DigitalOcean)</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/hartwork/image-bootstrap">image-bootstrap</a> (Python)</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/drizzt/vps2arch">vps2arch</a> (Bash)</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/BiteDasher/archbashstrap">archbashstrap</a> (Bash)</li>
</ul>
<p>La méthode manuelle est présentée dans les sous-sections suivantes. L'idée est soit de faire fonctionner <a href="../fr/Pacman.html" title="Pacman (Français)">pacman</a> directement sur le système hôte, soit de faire tourner un système Arch à l'intérieur du système hôte, l'installation réelle étant exécutée à partir du système Arch. Le système imbriqué est contenu dans un chroot.
</p>
<h3>
<span id="Utiliser_pacman_depuis_le_syst.C3.A8me_h.C3.B4te"></span><span class="mw-headline" id="Utiliser_pacman_depuis_le_système_hôte">Utiliser pacman depuis le système hôte</span>
</h3>
<p><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman">Pacman</a> peut être compilé sur la plupart des distributions Linux, et utilisé directement sur le système hôte pour amorcer Arch Linux. Les <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/arch-install-scripts">arch-install-scripts</a> devraient s'exécuter sans problème directement à partir des sources téléchargées sur toute distribution récente.
</p>
<p>Certaines distributions fournissent un paquet pour <i>pacman</i> et/ou <i>arch-install-scripts</i> dans leurs dépôts officiels qui peuvent être utilisés à cette fin. En juillet 2020, Void Linux est connu pour fournir le paquet <i>pacman</i>, et Alpine Linux et Fedora sont connus pour fournir à la fois <i>pacman</i> et <i>arch-install-scripts</i>.
</p>
<h3>
<span id="Cr.C3.A9ation_d.27un_chroot"></span><span class="mw-headline" id="Création_d'un_chroot">Création d'un chroot</span>
</h3>
<p>Deux méthodes pour configurer et entrer dans le chroot sont présentées ci-dessous, de la plus simple à la plus compliquée. Ne sélectionnez qu'une seule des deux méthodes. Ensuite, continuez à <a href="#Utilisation_d'un_environnement_chroot">#Utilisation d'un environnement chroot</a>.
</p>
<h4>
<span id="M.C3.A9thode_A_:_Utilisation_de_l.27image_bootstrap_.28recommand.C3.A9e.29"></span><span class="mw-headline" id="Méthode_A_:_Utilisation_de_l'image_bootstrap_(recommandée)">Méthode A : Utilisation de l'image bootstrap (recommandée)</span>
</h4>
<p>Téléchargez l'image bootstrap depuis un <a rel="nofollow" class="external text" href="https://archlinux.org/download">mirror</a> dans <code>/tmp</code>. Vous pouvez également télécharger la signature (même URL avec <code>.sig</code> ajouté) et <a href="../en/GnuPG.html#Verify_a_signature" title="GnuPG">vérifier avec GnuPG</a>.
</p>
<p>Extrayez l'archive tarball :
</p>
<pre># tar xzf &lt;path-to-bootstrap-image&gt;/archlinux-bootstrap-*-x86_64.tar.gz --numeric-owner
</pre>
<p>Prenez note de l'option finale <code>--numeric-owner</code>, qui est importante pour préserver les numéros UID et GID corrects des fichiers extraits dans le cas où votre système Linux existant utilise des numéros différents de ceux d'Arch Linux.
</p>
<p>Sélectionnez un serveur de dépôt en éditant <code>/tmp/root.x86_64/etc/pacman.d/mirrorlist</code>.
</p>
<p>Entrez dans le chroot :
</p>
<ul>
<li>Si bash 4 ou plus est installé, et que <i>unshare</i> prends en charge les options <code>--fork</code> et <code>--pid</code> : <pre># /tmp/root.x86_64/bin/arch-chroot /tmp/root.x86_64/</pre>
</li>
<li>Sinon, exécutez les commandes suivantes : <pre># mount --bind /tmp/root.x86_64 /tmp/root.x86_64
# cd /tmp/root.x86_64
# cp /etc/resolv.conf etc
# mount -t proc /proc proc
# mount --make-rslave --rbind /sys sys
# mount --make-rslave --rbind /dev dev
# mount --make-rslave --rbind /run run # (en supposant que /run existe sur le système)
# chroot /tmp/root.x86_64 /bin/bash
</pre>
</li>
</ul>
<h4>
<span id="M.C3.A9thode_B_:_Utilisation_de_l.27image_LiveCD"></span><span class="mw-headline" id="Méthode_B_:_Utilisation_de_l'image_LiveCD">Méthode B : Utilisation de l'image LiveCD</span>
</h4>
<p>Il est possible de monter l'image racine du dernier support d'installation d'Arch Linux et d'y accéder par chroot.  Cette méthode a l'avantage de fournir une installation d'Arch Linux fonctionnelle au sein même du système hôte sans avoir besoin de le préparer en installant des paquets spécifiques.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Avant de procéder, assurez-vous que la dernière version de <a rel="nofollow" class="external text" href="https://squashfs.sourceforge.net/">squashfs</a> est installée sur le système hôte. Sinon, des erreurs comme celles qui suivent sont à prévoir : <code>FATAL ERROR aborting : uncompress_inode_table : failed to read block}.</code>
</div>
<p>L'image racine peut être trouvée sur l'un des <a rel="nofollow" class="external text" href="https://archlinux.org/download">mirrors</a> sous <code>iso/latest/arch/x86_64/</code>. Le format squashfs n'est pas modifiable, donc nous déséquilibrons l'image racine et la montons.
</p>
<p>Pour déséquiper l'image racine, exécutez
</p>
<pre># unsquashfs airootfs.sfs
</pre>
<p>Sélectionnez un serveur de dépôt en éditant <code>squashfs-root/etc/pacman.d/mirrorlist</code>.
</p>
<p>Avant de <a href="../fr/Chroot.html" class="mw-redirect" title="Changer de racine">chrooter</a> vers l'image racine non squashfs, nous devons configurer quelques points de montage et copier le <code>resolv.conf</code> pour le réseau.
</p>
<pre># mount --bind squashfs-root squashfs-root
# mount -t proc none squashfs-root/proc
# mount -t sysfs none squashfs-root/sys
# mount -o bind /dev squashfs-root/dev
# mount -o bind /dev/pts squashfs-root/dev/pts ## important pour pacman (pour la vérification de la signature)
# cp -L /etc/resolv.conf squashfs-root/etc ## ceci est nécessaire pour utiliser le réseau dans le chroot.
</pre>
<p>Maintenant, tout est prêt pour le chroot dans l'environnement Arch nouvellement installé :
</p>
<pre># chroot squashfs-root bash
</pre>
<h3>
<span id="Utilisation_d.27un_environnement_chroot"></span><span class="mw-headline" id="Utilisation_d'un_environnement_chroot">Utilisation d'un environnement chroot</span>
</h3>
<p>L'environnement bootstrap est vraiment dépouillé (pas de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nano">nano</a></span> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lvm2">lvm2</a></span>). Par conséquent, nous devons configurer pacman afin de télécharger les autres paquets nécessaires.
</p>
<h4>
<span id="Initialisation_du_trousseau_de_cl.C3.A9s_pacman"></span><span class="mw-headline" id="Initialisation_du_trousseau_de_clés_pacman">Initialisation du trousseau de clés pacman</span>
</h4>
<p>Avant de commencer l'installation, les trousseaux de clés pacman doivent être configurés. Avant d'exécuter les deux commandes suivantes, lisez <a href="../fr/Pacman/Package_signing.html#Initialisation_du_trousseau_de_cl%C3%A9s" title="Pacman (Français)/Package signing (Français)">Pacman (Français)/Package signing (Français)#Initialisation du trousseau de clés</a> pour comprendre les exigences en matière d'entropie :
</p>
<pre># pacman-key --init
# pacman-key --populate
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Si vous devez exécuter <code>pacman-key --init</code> sur un ordinateur qui ne génère pas beaucoup d'entropie (par exemple, un serveur sans affichage), la génération de clés peut prendre beaucoup de temps. Pour générer une pseudo-entropie, installez <a href="../en/Haveged.html" title="Haveged">haveged</a> ou <a href="../en/Rng-tools.html" title="Rng-tools">rng-tools</a> <b>sur le système hôte</b> et démarrez le service correspondant avant d'exécuter <code>pacman-key --init</code>. (L'installation de ces services sur le système cible ne fonctionnera pas, puisque <i>systemd</i> <a rel="nofollow" class="external text" href="https://superuser.com/questions/688733/start-a-systemd-service-inside-chroot">refuse de démarrer les services à partir d'un chroot</a> et que vous devez initialiser le trousseau de clés pacman avant d'installer tout paquet).
<p>Si vous préférez générer de l'entropie à travers l'activité du système et décidez d'exécuter <code>ls -Ra /</code> dans une autre console (TTY, terminal, session SSH...), n'ayez pas peur de l'exécuter en boucle plusieurs fois : cinq ou six exécutions depuis l'hôte se sont avérées suffisantes pour générer suffisamment d'entropie sur un serveur distant sans affichage.
</p>
</div>
<h4>
<span id="T.C3.A9l.C3.A9chargement_des_outils_de_base"></span><span class="mw-headline" id="Téléchargement_des_outils_de_base">Téléchargement des outils de base</span>
</h4>
<p><a href="../en/Mirrors.html#Force_pacman_to_refresh_the_package_lists" title="Mirrors">Refresh the package lists</a> et <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> ce dont vous avez besoin : <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base-devel">base-devel</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=parted">parted</a></span> etc.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Lorsque vous essayez d'installer des paquets avec pacman, vous pouvez obtenir <code><i>error : could not determine cachedir mount point /var/cache/pacman/pkg</i></code>. Pour contourner ce problème, exécutez <pre>mount --bind <i>directory-to-livecd-or-bootstrap</i> <i>directory-to-livecd-or-bootstrap</i></pre> avant le chrootage. Consultez <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/46169">FS#46169</a>.</div>
<h3>
<span id="Conseils_d.27installation"></span><span class="mw-headline" id="Conseils_d'installation">Conseils d'installation</span>
</h3>
<p>Vous pouvez maintenant passer à <a href="../fr/Installation_guide.html#Montage_des_syst%C3%A8mes_de_fichiers" class="mw-redirect" title="Guide d'installation">Guide d'installation#Montage des systèmes de fichiers</a> et suivre le reste du <a href="../fr/Installation_guide.html" class="mw-redirect" title="Guide d'installation">Guide d'installation</a>.
</p>
<p>Certains systèmes hôtes ou configurations peuvent nécessiter certaines étapes supplémentaires. Consultez les sections ci-dessous pour obtenir des conseils.
</p>
<h4>
<span id="H.C3.B4te_bas.C3.A9_sur_Debian"></span><span class="mw-headline" id="Hôte_basé_sur_Debian">Hôte basé sur Debian</span>
</h4>
<h5>
<span id=".2Fdev.2Fshm"></span><span class="mw-headline" id="/dev/shm">/dev/shm</span>
</h5>
<p>Sur certains systèmes hôtes basés sur Debian, <i>pacstrap</i> peut produire l'erreur suivante :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pacstrap /mnt base</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">==&gt; Création de la racine de l'installation sur /mnt
mount : le point de montage /mnt/dev/shm est un lien symbolique vers nulle part.
==&gt; ERROR : échec de la configuration des systèmes de fichiers API dans la nouvelle racine
</pre>
<p>Ceci est dû au fait que dans certaines versions de Debian, <code>/dev/shm</code> pointe vers <code>/run/shm</code> alors que dans le chroot basé sur Arch, <code>/run/shm</code> n'existe pas et le lien est rompu. Pour corriger cette erreur, créez un répertoire <code>/run/shm</code> :
</p>
<pre># mkdir /run/shm
</pre>
<h5>
<span id=".2Fdev.2Fpts"></span><span class="mw-headline" id="/dev/pts">/dev/pts</span>
</h5>
<p>Lors de l'installation de <code>archlinux-2015.07.01-x86_64</code> depuis un hôte Debian 7, l'erreur suivante a empêché <span class="plainlinks archwiki-template-man" title="$ man 8 pacstrap"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacstrap.8">pacstrap(8)</a></span> et <a href="../fr/Chroot.html#Avec_arch-chroot" title="Chroot (Français)">arch-chroot</a> de fonctionner :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># pacstrap -i /mnt</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">mount : le point de montage /mnt/dev/pts n'existe pas
==&gt; ERROR : échec de la configuration du chroot /mnt
</pre>
<p>Apparemment, c'est parce que ces deux scripts utilisent une fonction commune. <code>chroot_setup()</code> <a rel="nofollow" class="external autonumber" href="https://github.com/archlinux/arch-install-scripts/tree/master/common#L76">[1]</a> s'appuie sur de nouvelles fonctionnalités de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span>, qui sont incompatibles avec l'espace utilisateur de Debian 7 (voir <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/45737">FS#45737</a>).
</p>
<p>La solution pour <i>pacstrap</i> est d'exécuter manuellement ses <a rel="nofollow" class="external text" href="https://github.com/archlinux/arch-install-scripts/tree/master/pacstrap.in#L77">various tasks</a>, mais d'utiliser la <a href="../fr/Chroot.html#Avec_chroot" title="Chroot (Français)">regular procedure</a> pour monter les systèmes de fichiers du noyau sur le répertoire cible (<code>"$newroot"</code>) :
</p>
<pre># newroot=/mnt
# mkdir -m 0755 -p "$newroot"/var/{cache/pacman/pkg,lib/pacman,log} "$newroot"/{dev,run,etc}
# mkdir -m 1777 -p "$newroot"/tmp
# mkdir -m 0555 -p "$newroot"/{sys,proc}
# mount --bind "$newroot" "$newroot"
# mount -t proc /proc "$newroot/proc"
# mount --rbind /sys "$newroot/sys"
# mount --rbind /run "$newroot/run"
# mount --rbind /dev "$newroot/dev"
# pacman -r "$newroot" --cachedir="$newroot/var/cache/pacman/pkg" -Sy base base-devel ... ## ajoutez les paquets que vous voulez
# cp -a /etc/pacman.d/gnupg "$newroot/etc/pacman.d/"       ## copier le porte-clés
# cp -a /etc/pacman.d/mirrorlist "$newroot/etc/pacman.d/"  ## copy mirrorlist
</pre>
<p>Au lieu d'utiliser <i>arch-chroot</i> pour <a href="../fr/Installation_guide.html#Chroot" class="mw-redirect" title="Guide d'installation">Guide d'installation#Chroot</a>, utilisez simplement :
</p>
<pre># chroot "$newroot"
</pre>
<h5><span class="mw-headline" id="lvmetad">lvmetad</span></h5>
<p>Essayer de créer <a href="../en/LVM.html" class="mw-redirect" title="LVM (Français)">LVM</a> <a href="../en/LVM.html#Logical_volumes" title="LVM">volumes logiques</a> à partir d'un environnement <code>archlinux-bootstrap-2015.07.01-x86_64</code> sur un hôte Debian 7 a entraîné l'erreur suivante :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lvcreate -L 20G lvm -n root</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  /run/lvm/lvmetad.socket : connect failed : Aucun fichier ou répertoire de ce type
  WARNING : Échec de la connexion à lvmetad. Retour à l'analyse interne.
  /dev/lvm/root : non trouvé : périphérique non effacé
  Abandon. Échec de l'effacement du début du nouveau LV.</pre>
<p>(La création du volume physique et du groupe de volumes a fonctionné malgré <code>/run/lvm/lvmetad.socket : connect failed : No such file or directory</code> s'affiche).
</p>
<p>Ceci peut être facilement contourné en créant les volumes logiques en dehors du chroot (depuis l'hôte Debian). Ils sont alors disponibles une fois le chroot rétabli.
</p>
<p>De plus, si le système que vous utilisez dispose de lvm, vous pouvez obtenir le résultat suivant :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># grub-install --target=i386-pc --recheck /dev/main/archroot</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Installation pour la plate-forme i386-pc.
  /run/lvm/lvmetad.socket : échec de la connexion : Aucun fichier ou répertoire de ce type
  WARNING : échec de la connexion à lvmetad. Retour à l'analyse interne.
  /run/lvm/lvmetad.socket : connect failed : No such file or directory
  WARNING : Échec de la connexion à lvmetad. Retour à l'analyse interne.
  /run/lvm/lvmetad.socket : échec de la connexion : No such file or directory
  WARNING : Échec de la connexion à lvmetad. Retour à l'analyse interne.
  /run/lvm/lvmetad.socket : échec de la connexion : No such file or directory
  WARNING : Échec de la connexion à lvmetad. Retour à l'analyse interne.
  /run/lvm/lvmetad.socket : échec de la connexion : No such file or directory
  WARNING : Échec de la connexion à lvmetad. Retour à l'analyse interne.</pre>
<p>Ceci est dû au fait que debian n'utilise pas lvmetad par défaut. Vous devez éditer <code>/etc/lvm/lvm.conf</code> et définir <code>use_lvmetad</code> à <code>0</code> :
</p>
<pre>use_lvmetad = 0
</pre>
<p>Cela déclenchera plus tard une erreur au démarrage dans l'étape initrd. Par conséquent, vous devez le modifier après la génération de grub. Dans un RAID logiciel + LVM, les étapes seraient les suivantes :
</p>
<ul>
<li>Après avoir installé le système, vérifiez votre <a href="../en/Mkinitcpio.html" title="Mkinitcpio">Mkinitcpio</a> et vos paramètres de chargeur d'amorçage. Consultez <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" class="mw-redirect" title="Chargeur d'amorçage">Chargeur d'amorçage</a> pour une liste de chargeurs de démarrage.</li>
<li>Vous devrez peut-être modifier votre <code>/etc/mdadm.conf</code> pour refléter vos paramètres <a href="../en/RAID.html" class="mw-redirect" title="RAID (Français)">RAID</a> (si applicable).</li>
<li>Vous devrez peut-être modifier vos <code>HOOKS</code> et <code>MODULES</code> en fonction de vos besoins en <a href="../en/LVM.html" class="mw-redirect" title="LVM (Français)">LVM</a> et <a href="../en/RAID.html" class="mw-redirect" title="RAID (Français)">RAID</a> : <code>MODULES="dm_mod" HOOKS="base udev <b>mdadm_udev</b> ... block <b>lvm2</b> filesystems ..."</code>}</li>
<li>Vous aurez très probablement besoin de générer de nouvelles images initrd avec mkinitcpio. Consultez <a href="../fr/Mkinitcpio.html#Cr%C3%A9ation_et_activation_d'images" title="Mkinitcpio (Français)">Mkinitcpio (Français)#Création et activation d'images</a>.</li>
<li>Définissez <code>use_lvmetad = 0</code> dans <code>/etc/lvm/lvm.conf</code>.</li>
<li>Mettez à jour les paramètres de votre chargeur d'amorçage. Consultez la page wiki de votre chargeur d'amorçage pour plus de détails.</li>
<li>Définissez <code>use_lvmetad = 1</code> dans <code>/etc/lvm/lvm.conf</code>.</li>
</ul>
<h4>
<span id="H.C3.B4te_bas.C3.A9_sur_Fedora"></span><span class="mw-headline" id="Hôte_basé_sur_Fedora">Hôte basé sur Fedora</span>
</h4>
<p>Sur les hôtes basés sur Fedora et les live USB, vous pouvez rencontrer des problèmes en utilisant <i>genfstab</i> pour générer votre <a href="../fr/Fstab.html" title="Fstab (Français)">fstab</a>. Supprimez les entrées en double et l'option "seclabel" lorsqu'elle apparaît, car elle est spécifique à Fedora et empêchera votre système de démarrer normalement.
</p>
<h2>
<span id="Choses_.C3.A0_v.C3.A9rifier_avant_de_red.C3.A9marrer"></span><span class="mw-headline" id="Choses_à_vérifier_avant_de_redémarrer">Choses à vérifier avant de redémarrer</span>
</h2>
<p>Avant de redémarrer, vérifiez quelques détails de votre installation afin d'obtenir une installation réussie. Pour ce faire, il faut d'abord chrooter sur le système nouvellement installé, puis :
</p>
<ul>
<li>
<a href="../fr/Users_and_groups.html#Gestion_des_utilisateurs" title="Users and groups (Français)">créer un utilisateur avec un mot de passe</a>, afin que vous puissiez vous connecter via <i>ssh</i>. Ceci est essentiel puisque la connexion root est désactivée par défaut depuis OpenSSH-7.1p2.</li>
<li>
<a href="../fr/Users_and_groups.html#Gestion_des_utilisateurs" title="Users and groups (Français)">créer un mot de passe root</a> pour que vous puissiez passer en tant que root via <i>su</i> plus tard.</li>
<li>
<a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installer">installer</a> une solution <a href="../fr/Secure_Shell.html" title="Secure Shell (Français)">ssh</a> et <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Activer">activer</a> son instance de serveur pour qu'elle démarre automatiquement au démarrage.</li>
<li>Configurez votre <a href="../en/Network_configuration.html" class="mw-redirect" title="Network configuration (Français)">configuration réseau</a> afin qu'une connexion soit lancée automatiquement au démarrage.</li>
<li>Installez un <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" class="mw-redirect" title="Chargeur d'amorçage">chargeur d'amorçage</a> et configurez-le pour qu'il utilise la partition swap que vous vous êtes appropriée plus tôt comme partition racine. Vous voudrez peut-être configurer votre chargeur d'amorçage pour pouvoir démarrer sur votre ancien système ; il est utile de réutiliser la partition <code>/boot</code> existante du serveur dans le nouveau système à cette fin.</li>
</ul>
<h2>
<span id="Remplacer_le_syst.C3.A8me_existant_sans_LiveCD"></span><span class="mw-headline" id="Remplacer_le_système_existant_sans_LiveCD">Remplacer le système existant sans LiveCD</span>
</h2>
<p>Trouvez ~700 MB d'espace libre quelque part sur le disque, par exemple en partitionnant une partition swap. Vous pouvez désactiver la partition swap et y installer votre système.
</p>
<h3>
<span id="D.C3.A9finir_l.27ancienne_partition_swap_comme_nouvelle_partition_racine"></span><span class="mw-headline" id="Définir_l'ancienne_partition_swap_comme_nouvelle_partition_racine">Définir l'ancienne partition swap comme nouvelle partition racine</span>
</h3>
<p>Vérifiez <code>cfdisk</code>, <code>/proc/swaps</code> ou <code>/etc/fstab</code> pour trouver votre partition swap. En supposant que votre disque dur est situé sur <code>sda<i>X</i></code> (<code><i>X</i></code> sera un nombre).
</p>
<p>Faites ce qui suit :
</p>
<p>Désactivez l'espace d'échange :
</p>
<pre># swapoff /dev/sda<i>X</i>
</pre>
<p>Créez un système de fichiers dessus
</p>
<pre># fdisk /dev/sda
(définissez le champ ID de /dev/sda<i>X</i> à "Linux" - Hex 83)
# mke2fs -j /dev/sda<i>X</i>
</pre>
<p>Créez un répertoire pour le monter
</p>
<pre># mkdir /mnt/newsys
</pre>
<p>Enfin, montez le nouveau répertoire pour installer le système intermédiaire.
</p>
<pre># mount -t ext4 /dev/sda<i>X</i> /mnt/newsys
</pre>
<h3><span class="mw-headline" id="Installation">Installation</span></h3>
<p><a href="../fr/Installation_guide.html#Installation_des_paquets_essentiels" class="mw-redirect" title="Guide d'installation">Installation des paquets essentiels</a> et tout autre paquet nécessaire pour obtenir un système avec une connexion internet opérationnelle dans la partition temporaire, en faisant attention à la limite de ~700 Mo d'espace. Lorsque vous spécifiez les paquets à installer avec <i>pacstrap</i>, pensez à ajouter le paramètre <code>-c</code> pour éviter de remplir un espace précieux en téléchargeant les paquets sur le système hôte.
</p>
<p>Une fois le nouveau système Arch Linux installé, corrigez la configuration du chargeur d'amorçage, puis redémarrez le système nouvellement créé, et <a href="../en/Rsync.html#Full_system_backup" title="Rsync">rsync the entire system</a> sur la partition primaire.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fr/Category:Installation_process.html" title="Category:Installation process (Français)">Installation process (Français)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_from_existing_Linux_(Fran%C3%A7ais)&amp;oldid=813055">https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_from_existing_Linux_(Français)&amp;oldid=813055</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 July 2024, at 06:17.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
