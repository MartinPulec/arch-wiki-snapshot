<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Kernel mode setting (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Kernel_mode_setting_Français rootpage-Kernel_mode_setting_Français skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Contexte" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Contexte">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Contexte</div>
		</a>
		
		<ul id="toc-Contexte-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installation">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Installation</div>
		</a>
		
			<button aria-controls="toc-Installation-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installation subsection</span>
			</button>
		
		<ul id="toc-Installation-sublist" class="vector-toc-list">
			<li id="toc-Démarrage_tardif_de_KMS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9marrage_tardif_de_KMS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Démarrage tardif de KMS</div>
			</a>
			
			<ul id="toc-Démarrage_tardif_de_KMS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Démarrage_précoce_de_KMS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D%C3%A9marrage_pr%C3%A9coce_de_KMS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Démarrage précoce de KMS</div>
			</a>
			
			<ul id="toc-Démarrage_précoce_de_KMS-sublist" class="vector-toc-list">
				<li id="toc-mkinitcpio" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#mkinitcpio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>mkinitcpio</div>
			</a>
			
			<ul id="toc-mkinitcpio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Booster" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Booster">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2</span>Booster</div>
			</a>
			
			<ul id="toc-Booster-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dépannage" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#D%C3%A9pannage">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Dépannage</div>
		</a>
		
			<button aria-controls="toc-Dépannage-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dépannage subsection</span>
			</button>
		
		<ul id="toc-Dépannage-sublist" class="vector-toc-list">
			<li id="toc-Mes_polices_sont_trop_petites" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mes_polices_sont_trop_petites">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Mes polices sont trop petites</div>
			</a>
			
			<ul id="toc-Mes_polices_sont_trop_petites-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problème_au_démarrage_et_dans_dmesg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Probl%C3%A8me_au_d%C3%A9marrage_et_dans_dmesg">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Problème au démarrage et dans dmesg</div>
			</a>
			
			<ul id="toc-Problème_au_démarrage_et_dans_dmesg-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Forcer_les_modes_et_l'EDID" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Forcer_les_modes_et_l'EDID">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Forcer les modes et l'EDID</div>
		</a>
		
			<button aria-controls="toc-Forcer_les_modes_et_l'EDID-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Forcer les modes et l'EDID subsection</span>
			</button>
		
		<ul id="toc-Forcer_les_modes_et_l'EDID-sublist" class="vector-toc-list">
			<li id="toc-Forcer_les_modes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Forcer_les_modes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Forcer les modes</div>
			</a>
			
			<ul id="toc-Forcer_les_modes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Désactiver_modesetting" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#D%C3%A9sactiver_modesetting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Désactiver modesetting</div>
		</a>
		
		<ul id="toc-Désactiver_modesetting-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Kernel mode setting (Français)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/KMS" title="KMS – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Kernel_mode_setting.html" title="Kernel mode setting – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Kernel_mode_setting.html" title="Kernel mode setting – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%82%AB%E3%83%BC%E3%83%8D%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89%E8%A8%AD%E5%AE%9A" title="カーネルモード設定 – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Kernel_mode_setting.html" title="Kernel mode setting – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Kernel_mode_setting" title="Kernel mode setting – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="fr" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Kernel_mode_setting.html" title="Kernel mode setting">Kernel mode setting</a>. Date de la dernière traduction: 2022-10-06. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Kernel_mode_setting&amp;diff=0&amp;oldid=749641">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/ATI.html" class="mw-redirect" title="ATI (Français)">ATI (Français)</a></li>
<li><a href="../en/Intel_graphics.html" class="mw-redirect" title="Intel graphics (Français)">Intel graphics (Français)</a></li>
<li><a href="../fr/Nouveau.html" title="Nouveau (Français)">Nouveau (Français)</a></li>
</ul>
</div>
<p>Le <a href="https://en.wikipedia.org/wiki/fr:Kernel-based_mode-setting" class="extiw" title="wikipedia:fr:Kernel-based mode-setting">Kernel-based Mode-Setting</a> (KMS) est une procédé permettant de définir la résolution et la profondeur d'affichage dans l'espace du noyau plutôt que dans l'espace utilisateur.
</p>
<p>L'implémentation de KMS par le noyau Linux permet une résolution native dans le framebuffer et permet une permutation instantanée vers la console (tty). KMS permet également d'utiliser des technologies plus récentes (telles que DRI2) qui contribuent à réduire les artefacts et à augmenter les performances 3D, et même les économies d'énergie depuis le noyau.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Le pilote propriétaire <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> (depuis 364.12) implémente également KMS, mais il n'utilise pas l'implémentation intégrée du noyau et il lui manque un pilote fbdev pour la console haute résolution</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Contexte">Contexte</span></h2>
<p>Auparavant, la configuration de la carte vidéo était la tâche du serveur X. De ce fait, il n'était pas facile de configurer la carte vidéo. Pour cette raison, il n'était pas facile d'avoir des graphismes sophistiqués dans les <a href="../en/Linux_console.html#Virtual_consoles" class="mw-redirect" title="Virtual console">consoles virtuelles</a>. De plus, chaque fois que l'on passait de X à une console virtuelle (<code>Ctrl+Alt+F2</code>), le serveur devait donner le contrôle de la carte vidéo au noyau, ce qui était lent et provoquait des scintillements. Le même processus "douloureux" se produisait lorsque le contrôle était rendu au serveur X (<code>Alt+F7</code> lorsque X fonctionne en VT7).
</p>
<p>Avec Kernel Mode Setting (KMS), le noyau est maintenant capable de définir le mode de la carte vidéo. Cela rend possible, entre autres, les graphismes sophistiqués pendant le démarrage, la console virtuelle et la permutation rapide avec X.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Tout d'abord, notez que pour <i>toute</i> méthode que vous utilisez, vous devez <i>toujours</i> désactiver :
</p>
<ul>
<li>Toute option <code>vga=</code> dans votre chargeur d'amorçage car elle entrera en conflit avec la résolution native activée par KMS.</li>
<li>Toute ligne <code>video=</code> qui active un framebuffer en conflit avec le pilote.</li>
<li>Tout autre pilote de framebuffer (tel que <a href="../en/Uvesafb.html" title="Uvesafb">uvesafb</a>).</li>
</ul>
<h3>
<span id="D.C3.A9marrage_tardif_de_KMS"></span><span class="mw-headline" id="Démarrage_tardif_de_KMS">Démarrage tardif de KMS</span>
</h3>
<p>Les pilotes <a href="../en/Intel_graphics.html" class="mw-redirect" title="Intel graphics (Français)">Intel</a>, <a href="../fr/Nouveau.html" title="Nouveau (Français)">Nouveau</a>, <a href="../en/ATI.html" class="mw-redirect" title="ATI (Français)">ATI</a> et <a href="../en/AMDGPU.html" title="AMDGPU">AMDGPU</a> activent déjà KMS automatiquement pour tous les chipsets, vous n'avez donc pas besoin de l'installer manuellement.
</p>
<p>Le pilote propriétaire <a href="../en/NVIDIA.html" title="NVIDIA">NVIDIA</a> prend en charge KMS (depuis 364.12), qui doit être <a href="../en/NVIDIA.html#DRM_kernel_mode_setting" class="mw-redirect" title="NVIDIA (Français)">activé manuellement</a>.
</p>
<h3>
<span id="D.C3.A9marrage_pr.C3.A9coce_de_KMS"></span><span class="mw-headline" id="Démarrage_précoce_de_KMS">Démarrage précoce de KMS</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> Si vous rencontrez des problèmes de résolution, vous pouvez vérifier si <a href="#Forcer_les_modes_et_l'EDID">Forcer les modes</a> aide.</div>
<p>KMS est généralement initialisé après l'étape <a href="../fr/Arch_boot_process.html#Initramfs" title="Arch boot process (Français)">initramfs</a>. Cependant, il est possible d'activer KMS déjà pendant l'étape initramfs. Ajoutez le module requis pour le <a href="../fr/Xorg.html#Installation_des_pilotes" title="Xorg (Français)">pilote vidéo</a> au fichier de configuration initramfs :
</p>
<ul>
<li>
<code>amdgpu</code> pour <a href="../en/AMDGPU.html" title="AMDGPU">AMDGPU</a>, ou <code>radeon</code> si vous utilisez l'ancien pilote <a href="../en/ATI.html" class="mw-redirect" title="ATI (Français)">ATI</a>.</li>
<li>
<code>i915</code> pour <a href="../en/Intel_graphics.html" class="mw-redirect" title="Intel graphics (Français)">Intel</a>.</li>
<li>
<code>nouveau</code> pour le pilote open-source <a href="../fr/Nouveau.html" title="Nouveau (Français)">Nouveau</a>.</li>
<li>
<code>nvidia nvidia_modeset nvidia_uvm nvidia_drm</code> pour le pilote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvidia">nvidia</a></span>. Consultez <a href="../en/NVIDIA.html#DRM_kernel_mode_setting" class="mw-redirect" title="NVIDIA (Français)">NVIDIA (Français)#DRM kernel mode setting</a> pour plus de détails.</li>
</ul>
<ul>
<li>
<code>mgag200</code> pour les cartes Matrox.</li>
<li>Selon la sortie vidéo de <a href="../en/QEMU.html" title="QEMU">QEMU</a> (option <code>-vga <i>type</i></code> de <i>qemu</i> ou <a href="../en/Libvirt.html" title="Libvirt">libvirt</a> <code>&lt;video&gt;&lt;model type='<i>type</i>'&gt;</code><a rel="nofollow" class="external autonumber" href="https://libvirt.org/formatdomain.html#video-devices">[1]</a>):
<ul>
<li>
<code>bochs</code> pour <code>std</code> avec <i>qemu</i> et <code>vga</code>/<code>bochs</code> avec <i>libvirt</i>,</li>
<li>
<code>virtio-gpu</code> pour <code>virtio</code>,</li>
<li>
<code>qxl</code> pour <code>qxl</code>,</li>
<li>
<code>vmwgfx</code> pour <code>vmware</code> avec <i>qemu</i> et <code>vmvga</code> pour <i>libvirt</i>,</li>
<li>
<code>cirrus</code> pour <code>cirrus</code>.</li>
</ul>
</li>
<li>Selon le mode de <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a>:
<ul>
<li>
<code>vmwgfx</code> pour VMSVGA,</li>
<li>
<code>vboxvideo</code> pour VBoxVGA ou VBoxSVGA.</li>
</ul>
</li>
</ul>
<p>Les instructions de configuration d'initramfs sont légèrement différentes selon le générateur d'initramfs que vous utilisez.
</p>
<h4><span class="mw-headline" id="mkinitcpio">mkinitcpio</span></h4>
<p>Par exemple, pour activer le KMS précoce pour le pilote graphique Intel :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES=(... i915 ...)</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Les utilisateurs d'Intel peuvent avoir besoin d'ajouter <code>intel_agp</code> avant <code>i915</code> pour supprimer les erreurs ACPI (consultez la sortie de <code>lsmod</code> sur votre système en fonctionnement pour voir si <code>intel_agp</code> est chargé). Cela peut être nécessaire pour que la reprise depuis une hibernation fonctionne avec une configuration d'affichage modifiée. Si vous utilisez PRIME GPU avec Intel IGP comme GPU principal et AMD comme GPU dédié, l'ajout de <code>intel_agp</code> peut entraîner des problèmes lors de la reprise après une hibernation (le moniteur ne reçoit aucun signal). Consultez <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=262043">[2]</a> pour plus d'informations.</div>
<p>Si vous utilisez un fichier EDID personnalisé (non applicable pour les résolutions intégrées), vous devez également l'intégrer dans l'<a href="../fr/Arch_boot_process.html#Initramfs" title="Arch boot process (Français)">initramfs</a> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">FILES=(/usr/lib/firmware/edid/<i>your_edid</i>.bin)</pre>
<p>Puis <a href="../fr/Mkinitcpio.html#Cr%C3%A9ation_et_activation_d'images" class="mw-redirect" title="Régénérez l'initramfs">régénérez l'initramfs</a>.
</p>
<h4><span class="mw-headline" id="Booster">Booster</span></h4>
<p>Si vous utilisez <a href="../en/Booster.html" title="Booster">Booster</a>, vous pouvez charger les modules nécessaires avec ce changement de configuration :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/booster.yaml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">modules_force_load : i915
</pre>
<p>Pour ajouter des fichiers supplémentaires à l'image :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/booster.yaml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">extra_files : /usr/lib/firmware/edid/<i>your_edid</i>.bin
</pre>
<p>Puis <a href="../en/Booster.html#Regenerate_booster_images" title="Booster">régénérez</a> les images booster.
</p>
<h2>
<span id="D.C3.A9pannage"></span><span class="mw-headline" id="Dépannage">Dépannage</span>
</h2>
<h3><span class="mw-headline" id="Mes_polices_sont_trop_petites">Mes polices sont trop petites</span></h3>
<p>Consultez <a href="../en/Linux_console.html#Fonts" title="Linux console">Linux console#Fonts</a> pour savoir comment changer la police de votre console en une grande police. La police Terminus (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=terminus-font">terminus-font</a></span>) est disponible en plusieurs tailles, comme <code>ter-132n</code> qui est plus grande.
</p>
<p>Alternativement, <a href="#D%C3%A9sactiver_modesetting">désactiver modesetting</a> peut passer à une résolution inférieure et faire apparaître les polices plus grandes.
</p>
<h3>
<span id="Probl.C3.A8me_au_d.C3.A9marrage_et_dans_dmesg"></span><span class="mw-headline" id="Problème_au_démarrage_et_dans_dmesg">Problème au démarrage et dans dmesg</span>
</h3>
<p>L'interrogation des périphériques d'affichage connectés sur les anciens systèmes peut être assez coûteuse. L'interrogation se fait périodiquement et peut dans le pire des cas prendre plusieurs centaines de millisecondes, selon le matériel. Cela provoquera des blocages visibles, par exemple dans la lecture vidéo. Ces blocages peuvent se produire même si votre vidéo est sur la sortie HDP mais que vous avez d'autres sorties non HDP dans votre configuration matérielle. Si vous constatez des blocages de la sortie d'affichage toutes les 10 secondes, la désactivation de l'interrogation peut vous aider.
</p>
<p>Si vous consultez un code d'erreur de <code>0x00000010 (2)</code> lors du démarrage (vous obtiendrez environ 10 lignes de texte, la dernière partie indiquant le code d'erreur), utilisez la commande suivante :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/modprobe.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options drm_kms_helper poll=0</pre>
<h2>
<span id="Forcer_les_modes_et_l.27EDID"></span><span class="mw-headline" id="Forcer_les_modes_et_l'EDID">Forcer les modes et l'EDID</span>
</h2>
<p>Si votre résolution native n'est pas automatiquement configurée ou si aucun affichage n'est détecté, alors votre moniteur peut ne pas envoyer de fichier <a href="https://en.wikipedia.org/wiki/fr:Extended_Display_Identification_Data" class="extiw" title="wikipedia:fr:Extended Display Identification Data">EDID</a> ou seulement un fichier biaisé. Le noyau essaiera d'appréhender ce cas et définira l'une des résolutions les plus courantes.
</p>
<p>Si vous avez le fichier EDID de votre moniteur, il vous suffit de l'appliquer explicitement (consultez ci-dessous). Cependant, le plus souvent, on n'a pas d'accès direct à un fichier sain et il est nécessaire soit d'extraire un fichier existant et de le corriger, soit d'en générer un nouveau.
</p>
<p>La génération de nouveaux binaires EDID pour diverses résolutions et configurations est possible pendant la compilation du noyau en suivant la <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/edid.html">documentation en amont</a> (consultez également <a rel="nofollow" class="external text" href="https://www.osadl.org/Single-View.111+M5315d29dd12.0.html">ici</a> pour un petit guide). D'autres solutions sont décrites en détail dans cet <a rel="nofollow" class="external text" href="https://kodi.wiki/view/Archive:Creating_and_using_edid.bin_via_xorg.conf">article</a>.
L'extraction d'un EDID existant est dans la plupart des cas plus facile, par exemple, si votre moniteur fonctionne correctement sous Windows, vous pouvez extraire l'EDID du pilote correspondant, ou si un moniteur similaire fonctionne avec les mêmes paramètres, vous pouvez utiliser <code>get-edid</code> du paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=read-edid">read-edid</a></span>. Vous pouvez également essayer de chercher dans <code>/sys/class/drm/*/edid</code>.
</p>
<p>Après avoir préparé votre EDID, placez-le dans un répertoire, par exemple appelé <code>edid</code> sous <code>/usr/lib/firmware</code> et copiez-y votre binaire.
</p>
<p>Pour le charger au démarrage, spécifiez ce qui suit dans la <a href="../en/Kernel_parameters.html" title="Kernel parameters">ligne de commande du noyau</a> :
</p>
<pre>drm.edid_firmware=edid/votre_edid.bin
</pre>
<p>Pour les noyaux plus anciens que 4.13, utilisez cette ligne à la place :
</p>
<pre>drm_kms_helper.edid_firmware=edid/votre_edid.bin
</pre>
<p>Afin de l'appliquer uniquement à un connecteur spécifique, utilisez
</p>
<pre>drm.edid_firmware=VGA-1:edid/votre_edid.bin
</pre>
<p>Pour les résolutions intégrées, référez-vous au tableau ci-dessous. La colonne <b>Nom</b> spécifie le nom que l'on est supposé utiliser afin d'imposer son usage.
</p>
<table class="wikitable">

<tbody>
<tr>
<th>Résolution</th>
<th>Nom
</th>
</tr>
<tr>
<td>800x600</td>
<td>edid/800x600.bin
</td>
</tr>
<tr>
<td>1024x768</td>
<td>edid/1024x768.bin
</td>
</tr>
<tr>
<td>1280x1024</td>
<td>edid/1280x1024.bin
</td>
</tr>
<tr>
<td>1600x1200 (kernel 3.10 ou supérieur)</td>
<td>edid/1600x1200.bin
</td>
</tr>
<tr>
<td>1680x1050</td>
<td>edid/1680x1050.bin
</td>
</tr>
<tr>
<td>1920x1080</td>
<td>edid/1920x1080.bin
</td>
</tr>
</tbody>
</table>
<p>Si vous faites un <a href="#D%C3%A9marrage_pr%C3%A9coce_de_KMS">démarrage précoce de KMS</a>, vous devez inclure le fichier EDID personnalisé dans l'initramfs, sinon vous rencontrerez des problèmes.
</p>
<p>La valeur du paramètre <code>drm.edid_firmware</code> peut également être modifiée après le démarrage en écrivant dans <code>/sys/module/drm/parameters/edid_firmware</code> :
</p>
<pre># echo edid/votre_edid.bin &gt; /sys/module/drm/parameters/edid_firmware
</pre>
<p>Ceci ne prendra effet que pour les écrans nouvellement branchés, les écrans déjà branchés continueront à utiliser leurs paramètres EDID existants. Pour les écrans externes, il suffit de les rebrancher pour consulter l'effet.
</p>
<p>Depuis le noyau 3.15, pour charger un EDID après le démarrage, vous pouvez utiliser debugfs au lieu d'un paramètre de ligne de commande du noyau si le noyau n'est pas en <a href="../en/Security.html#Kernel_lockdown_mode" title="Security">mode lockdown</a>.  Ceci est très utile si vous échangez les moniteurs sur un connecteur ou simplement pour des tests.  Une fois que vous avez un fichier EDID comme ci-dessus, exécutez :
</p>
<pre># cat correct-edid.bin &gt; /sys/kernel/debug/dri/0/HDMI-A-2/edid_override
</pre>
<p>Et pour désactiver :
</p>
<pre># echo -n reset &gt; /sys/kernel/debug/dri/0/HDMI-A-2/edid_override
</pre>
<h3><span class="mw-headline" id="Forcer_les_modes">Forcer les modes</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> La méthode décrite ci-dessous est en quelque sorte incomplète car, par exemple, <a href="../fr/Xorg.html" title="Xorg (Français)">Xorg</a> ne prend pas en compte la résolution spécifiée, les utilisateurs sont donc encouragés à utiliser la méthode décrite ci-dessus. Cependant, spécifier la résolution avec la ligne de commande <code>video=</code> peut être utile dans certains scénarios.</div>
<p>Extrait du <a rel="nofollow" class="external text" href="https://nouveau.freedesktop.org/wiki/KernelModeSetting">wiki de nouveau</a> :
</p>
<dl><dd>Un mode peut être forcé sur la ligne de commande du noyau. Malheureusement, l'option de ligne de commande video est mal documentée dans le cas du DRM. Des bribes sur la façon de l'utiliser peuvent être trouvées dans
<ul>
<li><a rel="nofollow" class="external free" href="https://docs.kernel.org/fb/modedb.html">https://docs.kernel.org/fb/modedb.html</a></li>
<li><a rel="nofollow" class="external free" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/gpu/drm/drm_fb_helper.c">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/gpu/drm/drm_fb_helper.c</a></li>
</ul>
</dd></dl>
<p>Le format est le suivant 
</p>
<pre>video=&lt;conn&gt;:&lt;xres&gt;x&lt;yres&gt;[M][R][-&lt;bpp&gt;][@&lt;refresh&gt;][i][m][eDd]
</pre>
<ul>
<li>
<code>&lt;conn&gt;</code> : Connecteur, par exemple DVI-I-1, consultez <code>/sys/class/drm/</code> pour connaître les connecteurs disponibles.</li>
<li>
<code>&lt;xres&gt; x &lt;yres&gt;</code> : résolution</li>
<li>
<code>M</code> : calcul d'un mode CVT ?</li>
<li>
<code>R</code> : réduction du blanking ?</li>
<li>
<code>-&lt;bpp&gt;</code> : profondeur de couleur</li>
<li>
<code>@&lt;refresh&gt;</code> : vitesse de rafraîchissement</li>
<li>
<code>i</code> : entrelacé (mode non-CVT)</li>
<li>
<code>m</code> : marges ?</li>
<li>
<code>e</code> : sortie forcée active</li>
<li>
<code>d</code> : sortie forcée à l'arrêt</li>
<li>
<code>D</code> : sortie numérique activée de force (par exemple, connecteur DVI-I)</li>
</ul>
<p>Vous pouvez modifier les modes de plusieurs sorties en utilisant plusieurs fois <code>video=</code>, par exemple, pour forcer <code>DVI</code> à <i>1024x768</i> à <i>85 Hz</i> et <code>TV-out</code> à être désactivé : 
</p>
<pre>video=DVI-I-1:1024x768@85 video=TV-1:d
</pre>
<p>Pour obtenir le nom et l'état actuel des connecteurs, vous pouvez utiliser le shell suivant oneliner :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ for p in /sys/class/drm/*/status ; do con=${p%/status} ; echo -n "${con#*/card?-} : " ; cat $p ; done</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DVI-I-1 : connected
HDMI-A-1 : disconnected
VGA-1 : disconnected
</pre>
<h2>
<span id="D.C3.A9sactiver_modesetting"></span><span class="mw-headline" id="Désactiver_modesetting">Désactiver modesetting</span>
</h2>
<p>Vous pouvez vouloir désactiver KMS pour diverses raisons. Pour désactiver KMS, ajoutez <code>nomodeset</code> comme paramètre du noyau. Consultez <a href="../en/Kernel_parameters.html" title="Kernel parameters">Kernel parameters</a> pour plus d'informations.
</p>
<p>En plus du paramètre du noyau <code>nomodeset</code>, pour les cartes graphiques Intel, vous devez ajouter <code>i915.modeset=0</code> et pour les cartes graphiques Nvidia, vous devez ajouter <code>nouveau.modeset=0</code>. Pour un système Nvidia Optimus avec deux cartes, vous devez ajouter les trois paramètres du noyau (c'est-à-dire <code>"nomodeset i915.modeset=0 nouveau.modeset=0"</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Certains pilotes <a href="../fr/Xorg.html" title="Xorg (Français)">Xorg</a> ne fonctionneront pas avec KMS désactivé. Consultez la page wiki de votre pilote spécifique pour plus de détails.</div>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../fr/Category:Graphics.html" title="Category:Graphics (Français)">Graphics (Français)</a></li>
<li><a href="../fr/Category:Kernel.html" title="Category:Kernel (Français)">Kernel (Français)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Kernel_mode_setting_(Fran%C3%A7ais)&amp;oldid=801699">https://wiki.archlinux.org/index.php?title=Kernel_mode_setting_(Français)&amp;oldid=801699</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 February 2024, at 15:21.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
