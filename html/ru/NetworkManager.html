<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>NetworkManager (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-NetworkManager_Русский rootpage-NetworkManager_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Установка</span>
			</div>
		</a>
		
			<button aria-controls="toc-Установка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Установка subsection</span>
			</button>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
			<li id="toc-Включение_NetworkManager" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_NetworkManager">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Включение NetworkManager</span>
				</div>
			</a>
			
			<ul id="toc-Включение_NetworkManager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Дополнительные_интерфейсы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Дополнительные интерфейсы</span>
				</div>
			</a>
			
			<ul id="toc-Дополнительные_интерфейсы-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Поддержка_мобильной_сети" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_%D0%BC%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D1%81%D0%B5%D1%82%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Поддержка мобильной сети</span>
				</div>
			</a>
			
			<ul id="toc-Поддержка_мобильной_сети-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Поддержка_PPPoE_/_DSL" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_PPPoE_/_DSL">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Поддержка PPPoE / DSL</span>
				</div>
			</a>
			
			<ul id="toc-Поддержка_PPPoE_/_DSL-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Поддержка_VPN" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_VPN">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.5</span>
					<span>Поддержка VPN</span>
				</div>
			</a>
			
			<ul id="toc-Поддержка_VPN-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Использование" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Использование</span>
			</div>
		</a>
		
			<button aria-controls="toc-Использование-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Использование subsection</span>
			</button>
		
		<ul id="toc-Использование-sublist" class="vector-toc-list">
			<li id="toc-Примеры_nmcli" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_nmcli">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Примеры nmcli</span>
				</div>
			</a>
			
			<ul id="toc-Примеры_nmcli-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Изменение_соединения" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Изменение соединения</span>
				</div>
			</a>
			
			<ul id="toc-Изменение_соединения-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-nmtui" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#nmtui">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>nmtui</span>
				</div>
			</a>
			
			<ul id="toc-nmtui-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Фронтенды" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A4%D1%80%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D0%B4%D1%8B">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Фронтенды</span>
			</div>
		</a>
		
			<button aria-controls="toc-Фронтенды-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Фронтенды subsection</span>
			</button>
		
		<ul id="toc-Фронтенды-sublist" class="vector-toc-list">
			<li id="toc-GNOME" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GNOME">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>GNOME</span>
				</div>
			</a>
			
			<ul id="toc-GNOME-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-KDE_Plasma" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#KDE_Plasma">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>KDE Plasma</span>
				</div>
			</a>
			
			<ul id="toc-KDE_Plasma-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-nm-applet" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#nm-applet">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>nm-applet</span>
				</div>
			</a>
			
			<ul id="toc-nm-applet-sublist" class="vector-toc-list">
				<li id="toc-Appindicator" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Appindicator">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3.1</span>
					<span>Appindicator</span>
				</div>
			</a>
			
			<ul id="toc-Appindicator-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-networkmanager-dmenu" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#networkmanager-dmenu">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>networkmanager-dmenu</span>
				</div>
			</a>
			
			<ul id="toc-networkmanager-dmenu-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-switchboard" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#switchboard">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>switchboard</span>
				</div>
			</a>
			
			<ul id="toc-switchboard-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Настройка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Настройка</span>
			</div>
		</a>
		
			<button aria-controls="toc-Настройка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка subsection</span>
			</button>
		
		<ul id="toc-Настройка-sublist" class="vector-toc-list">
			<li id="toc-NetworkManager-wait-online" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#NetworkManager-wait-online">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>NetworkManager-wait-online</span>
				</div>
			</a>
			
			<ul id="toc-NetworkManager-wait-online-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_разрешений_PolicyKit" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%80%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B9_PolicyKit">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Настройка разрешений PolicyKit</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_разрешений_PolicyKit-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройки_прокси" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Настройки прокси</span>
				</div>
			</a>
			
			<ul id="toc-Настройки_прокси-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проверка_соединения" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Проверка соединения</span>
				</div>
			</a>
			
			<ul id="toc-Проверка_соединения-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Captive_portal" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Captive_portal">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Captive portal</span>
				</div>
			</a>
			
			<ul id="toc-Captive_portal-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Клиент_DHCP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D0%BB%D0%B8%D0%B5%D0%BD%D1%82_DHCP">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>Клиент DHCP</span>
				</div>
			</a>
			
			<ul id="toc-Клиент_DHCP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Управление_DNS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_DNS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7</span>
					<span>Управление DNS</span>
				</div>
			</a>
			
			<ul id="toc-Управление_DNS-sublist" class="vector-toc-list">
				<li id="toc-Кэширование_DNS_и_условное_перенаправление" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D1%8D%D1%88%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_DNS_%D0%B8_%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%BD%D0%BE%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.1</span>
					<span>Кэширование DNS и условное перенаправление</span>
				</div>
			</a>
			
			<ul id="toc-Кэширование_DNS_и_условное_перенаправление-sublist" class="vector-toc-list">
				<li id="toc-dnsmasq" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#dnsmasq">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.1.1</span>
					<span>dnsmasq</span>
				</div>
			</a>
			
			<ul id="toc-dnsmasq-sublist" class="vector-toc-list">
				<li id="toc-Пользовательская_конфигурация_dnsmasq" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B0%D1%8F_%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F_dnsmasq">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.1.1.1</span>
					<span>Пользовательская конфигурация dnsmasq</span>
				</div>
			</a>
			
			<ul id="toc-Пользовательская_конфигурация_dnsmasq-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-IPv6" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#IPv6">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.1.1.2</span>
					<span>IPv6</span>
				</div>
			</a>
			
			<ul id="toc-IPv6-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DNSSEC" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#DNSSEC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.1.1.3</span>
					<span>DNSSEC</span>
				</div>
			</a>
			
			<ul id="toc-DNSSEC-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-systemd-resolved" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#systemd-resolved">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.1.2</span>
					<span>systemd-resolved</span>
				</div>
			</a>
			
			<ul id="toc-systemd-resolved-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Распознаватель_DNS_с_абонентом_openresolv" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D1%81%D0%BF%D0%BE%D0%B7%D0%BD%D0%B0%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C_DNS_%D1%81_%D0%B0%D0%B1%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%BC_openresolv">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.1.3</span>
					<span>Распознаватель DNS с абонентом openresolv</span>
				</div>
			</a>
			
			<ul id="toc-Распознаватель_DNS_с_абонентом_openresolv-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Пользовательские_серверы_DNS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D1%8B_DNS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.2</span>
					<span>Пользовательские серверы DNS</span>
				</div>
			</a>
			
			<ul id="toc-Пользовательские_серверы_DNS-sublist" class="vector-toc-list">
				<li id="toc-Настройка_глобальных_серверов_DNS" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%B3%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%B2_DNS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.2.1</span>
					<span>Настройка глобальных серверов DNS</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_глобальных_серверов_DNS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_серверов_DNS_для_соединения" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%B2_DNS_%D0%B4%D0%BB%D1%8F_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.2.2</span>
					<span>Настройка серверов DNS для соединения</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_серверов_DNS_для_соединения-sublist" class="vector-toc-list">
				<li id="toc-Настройка_серверов_DNS_для_соединения_(GUI)" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%B2_DNS_%D0%B4%D0%BB%D1%8F_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F_(GUI)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.2.2.1</span>
					<span>Настройка серверов DNS для соединения (GUI)</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_серверов_DNS_для_соединения_(GUI)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_серверов_DNS_для_соединения_(nmcli_/_файл_соединения)" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%B2_DNS_%D0%B4%D0%BB%D1%8F_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F_(nmcli_/_%D1%84%D0%B0%D0%B9%D0%BB_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.2.2.2</span>
					<span>Настройка серверов DNS для соединения (nmcli / файл соединения)</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_серверов_DNS_для_соединения_(nmcli_/_файл_соединения)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-/etc/resolv.conf" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#/etc/resolv.conf">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.3</span>
					<span>/etc/resolv.conf</span>
				</div>
			</a>
			
			<ul id="toc-/etc/resolv.conf-sublist" class="vector-toc-list">
				<li id="toc-Неуправляемый_/etc/resolv.conf" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%8F%D0%B5%D0%BC%D1%8B%D0%B9_/etc/resolv.conf">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.3.1</span>
					<span>Неуправляемый /etc/resolv.conf</span>
				</div>
			</a>
			
			<ul id="toc-Неуправляемый_/etc/resolv.conf-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_openresolv" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_openresolv">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.3.2</span>
					<span>Использование openresolv</span>
				</div>
			</a>
			
			<ul id="toc-Использование_openresolv-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Межсетевой_экран" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%B5%D0%B6%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8</span>
					<span>Межсетевой экран</span>
				</div>
			</a>
			
			<ul id="toc-Межсетевой_экран-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Сетевые_службы_с_диспетчером_NetworkManager" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D1%8B_%D1%81_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D0%BE%D0%BC_NetworkManager">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Сетевые службы с диспетчером NetworkManager</span>
			</div>
		</a>
		
			<button aria-controls="toc-Сетевые_службы_с_диспетчером_NetworkManager-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Сетевые службы с диспетчером NetworkManager subsection</span>
			</button>
		
		<ul id="toc-Сетевые_службы_с_диспетчером_NetworkManager-sublist" class="vector-toc-list">
			<li id="toc-Обход_таймаута_диспетчера" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D1%85%D0%BE%D0%B4_%D1%82%D0%B0%D0%B9%D0%BC%D0%B0%D1%83%D1%82%D0%B0_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Обход таймаута диспетчера</span>
				</div>
			</a>
			
			<ul id="toc-Обход_таймаута_диспетчера-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Примеры_диспетчерских_скриптов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D1%81%D0%BA%D0%B8%D1%85_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Примеры диспетчерских скриптов</span>
				</div>
			</a>
			
			<ul id="toc-Примеры_диспетчерских_скриптов-sublist" class="vector-toc-list">
				<li id="toc-Автоматическая_установка_часового_пояса" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%87%D0%B0%D1%81%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE_%D0%BF%D0%BE%D1%8F%D1%81%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.1</span>
					<span>Автоматическая установка часового пояса</span>
				</div>
			</a>
			
			<ul id="toc-Автоматическая_установка_часового_пояса-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Монтирование_удалённого_каталога_с_помощью_sshfs" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%83%D0%B4%D0%B0%D0%BB%D1%91%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_sshfs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.2</span>
					<span>Монтирование удалённого каталога с помощью sshfs</span>
				</div>
			</a>
			
			<ul id="toc-Монтирование_удалённого_каталога_с_помощью_sshfs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Монтирование_общих_ресурсов_SMB" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BE%D0%B1%D1%89%D0%B8%D1%85_%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D0%BE%D0%B2_SMB">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.3</span>
					<span>Монтирование общих ресурсов SMB</span>
				</div>
			</a>
			
			<ul id="toc-Монтирование_общих_ресурсов_SMB-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Монтирование_общих_ресурсов_NFS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BE%D0%B1%D1%89%D0%B8%D1%85_%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D0%BE%D0%B2_NFS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.4</span>
					<span>Монтирование общих ресурсов NFS</span>
				</div>
			</a>
			
			<ul id="toc-Монтирование_общих_ресурсов_NFS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_диспетчера_для_переключения_беспроводной_сети_в_зависимости_от_состояния_проводного_соединения" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D0%B0_%D0%B4%D0%BB%D1%8F_%D0%BF%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B1%D0%B5%D1%81%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D0%BE%D0%B9_%D1%81%D0%B5%D1%82%D0%B8_%D0%B2_%D0%B7%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8_%D0%BE%D1%82_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D0%BE%D0%B3%D0%BE_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.5</span>
					<span>Использование диспетчера для переключения беспроводной сети в зависимости от состояния проводного соединения</span>
				</div>
			</a>
			
			<ul id="toc-Использование_диспетчера_для_переключения_беспроводной_сети_в_зависимости_от_состояния_проводного_соединения-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_диспетчера_для_подключения_к_VPN_после_появления_сети" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D0%B0_%D0%B4%D0%BB%D1%8F_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BA_VPN_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BF%D0%BE%D1%8F%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%B5%D1%82%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.6</span>
					<span>Использование диспетчера для подключения к VPN после появления сети</span>
				</div>
			</a>
			
			<ul id="toc-Использование_диспетчера_для_подключения_к_VPN_после_появления_сети-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_диспетчера_для_отключения_IPv6_при_подключении_VPN" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D0%B0_%D0%B4%D0%BB%D1%8F_%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_IPv6_%D0%BF%D1%80%D0%B8_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B8_VPN">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.7</span>
					<span>Использование диспетчера для отключения IPv6 при подключении VPN</span>
				</div>
			</a>
			
			<ul id="toc-Использование_диспетчера_для_отключения_IPv6_при_подключении_VPN-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OpenNTPD" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#OpenNTPD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.8</span>
					<span>OpenNTPD</span>
				</div>
			</a>
			
			<ul id="toc-OpenNTPD-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Динамическая_установка_серверов_NTP,_полученных_через_DHCP,_с_использованием_systemd-timesyncd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%94%D0%B8%D0%BD%D0%B0%D0%BC%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%B2_NTP,_%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_DHCP,_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_systemd-timesyncd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2.9</span>
					<span>Динамическая установка серверов NTP, полученных через DHCP, с использованием systemd-timesyncd</span>
				</div>
			</a>
			
			<ul id="toc-Динамическая_установка_серверов_NTP,_полученных_через_DHCP,_с_использованием_systemd-timesyncd-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Тестирование" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Тестирование</span>
			</div>
		</a>
		
		<ul id="toc-Тестирование-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>Советы и рекомендации</span>
			</div>
		</a>
		
			<button aria-controls="toc-Советы_и_рекомендации-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Советы и рекомендации subsection</span>
			</button>
		
		<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
			<li id="toc-Шифрование_паролей_Wi-Fi" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A8%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9_Wi-Fi">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.1</span>
					<span>Шифрование паролей Wi-Fi</span>
				</div>
			</a>
			
			<ul id="toc-Шифрование_паролей_Wi-Fi-sublist" class="vector-toc-list">
				<li id="toc-С_помощью_GNOME_Keyring" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_GNOME_Keyring">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.1.1</span>
					<span>С помощью GNOME Keyring</span>
				</div>
			</a>
			
			<ul id="toc-С_помощью_GNOME_Keyring-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-С_помощью_KDE_Wallet" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_KDE_Wallet">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.1.2</span>
					<span>С помощью KDE Wallet</span>
				</div>
			</a>
			
			<ul id="toc-С_помощью_KDE_Wallet-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Раздача_интернета_через_Wi-Fi" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B7%D0%B4%D0%B0%D1%87%D0%B0_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BD%D0%B5%D1%82%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_Wi-Fi">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.2</span>
					<span>Раздача интернета через Wi-Fi</span>
				</div>
			</a>
			
			<ul id="toc-Раздача_интернета_через_Wi-Fi-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Раздача_интернета_через_Ethernet" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B7%D0%B4%D0%B0%D1%87%D0%B0_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BD%D0%B5%D1%82%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_Ethernet">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.3</span>
					<span>Раздача интернета через Ethernet</span>
				</div>
			</a>
			
			<ul id="toc-Раздача_интернета_через_Ethernet-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проверка_работоспособности_сети_внутри_задачи_cron_или_скрипта" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BE%D1%81%D0%BF%D0%BE%D1%81%D0%BE%D0%B1%D0%BD%D0%BE%D1%81%D1%82%D0%B8_%D1%81%D0%B5%D1%82%D0%B8_%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B8_%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B8_cron_%D0%B8%D0%BB%D0%B8_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.4</span>
					<span>Проверка работоспособности сети внутри задачи cron или скрипта</span>
				</div>
			</a>
			
			<ul id="toc-Проверка_работоспособности_сети_внутри_задачи_cron_или_скрипта-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Подключение_к_сети_с_паролем_при_загрузке_системы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA_%D1%81%D0%B5%D1%82%D0%B8_%D1%81_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%BC_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.5</span>
					<span>Подключение к сети с паролем при загрузке системы</span>
				</div>
			</a>
			
			<ul id="toc-Подключение_к_сети_с_паролем_при_загрузке_системы-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OpenConnect_с_паролем_в_KWallet" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OpenConnect_%D1%81_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%BC_%D0%B2_KWallet">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.6</span>
					<span>OpenConnect с паролем в KWallet</span>
				</div>
			</a>
			
			<ul id="toc-OpenConnect_с_паролем_в_KWallet-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Игнорирование_определённых_устройств" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D0%B3%D0%BD%D0%BE%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D1%85_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.7</span>
					<span>Игнорирование определённых устройств</span>
				</div>
			</a>
			
			<ul id="toc-Игнорирование_определённых_устройств-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Рандомизация_MAC-адреса" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%BD%D0%B4%D0%BE%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_MAC-%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.8</span>
					<span>Рандомизация MAC-адреса</span>
				</div>
			</a>
			
			<ul id="toc-Рандомизация_MAC-адреса-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Включение_IPv6_Privacy_Extensions" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_IPv6_Privacy_Extensions">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.9</span>
					<span>Включение IPv6 Privacy Extensions</span>
				</div>
			</a>
			
			<ul id="toc-Включение_IPv6_Privacy_Extensions-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_уникального_DUID_для_соединения" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%83%D0%BD%D0%B8%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE_DUID_%D0%B4%D0%BB%D1%8F_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.10</span>
					<span>Настройка уникального DUID для соединения</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_уникального_DUID_для_соединения-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Работа_с_проводными_соединениями" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D1%8B%D0%BC%D0%B8_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%D0%BC%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.11</span>
					<span>Работа с проводными соединениями</span>
				</div>
			</a>
			
			<ul id="toc-Работа_с_проводными_соединениями-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_iwd_в_качестве_бэкенда_Wi-Fi" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_iwd_%D0%B2_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5_%D0%B1%D1%8D%D0%BA%D0%B5%D0%BD%D0%B4%D0%B0_Wi-Fi">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.12</span>
					<span>Использование iwd в качестве бэкенда Wi-Fi</span>
				</div>
			</a>
			
			<ul id="toc-Использование_iwd_в_качестве_бэкенда_Wi-Fi-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запуск_в_сетевом_пространстве_имён" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D0%B2_%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%BC_%D0%BF%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%D0%B5_%D0%B8%D0%BC%D1%91%D0%BD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.13</span>
					<span>Запуск в сетевом пространстве имён</span>
				</div>
			</a>
			
			<ul id="toc-Запуск_в_сетевом_пространстве_имён-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Автоматическое_подключение_к_VPN" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA_VPN">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.14</span>
					<span>Автоматическое подключение к VPN</span>
				</div>
			</a>
			
			<ul id="toc-Автоматическое_подключение_к_VPN-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Решение проблем</span>
			</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Не_запрашивается_пароль_Wi-Fi" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D0%B7%D0%B0%D0%BF%D1%80%D0%B0%D1%88%D0%B8%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8C_Wi-Fi">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.1</span>
					<span>Не запрашивается пароль Wi-Fi</span>
				</div>
			</a>
			
			<ul id="toc-Не_запрашивается_пароль_Wi-Fi-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Управление_сетью_отключено" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B5%D1%82%D1%8C%D1%8E_%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%BE">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.2</span>
					<span>Управление сетью отключено</span>
				</div>
			</a>
			
			<ul id="toc-Управление_сетью_отключено-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблемы_с_внутренним_клиентом_DHCP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B5%D0%BD%D0%BD%D0%B8%D0%BC_%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%BE%D0%BC_DHCP">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.3</span>
					<span>Проблемы с внутренним клиентом DHCP</span>
				</div>
			</a>
			
			<ul id="toc-Проблемы_с_внутренним_клиентом_DHCP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблемы_с_DHCP_при_использовании_dhclient" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_DHCP_%D0%BF%D1%80%D0%B8_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B8_dhclient">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.4</span>
					<span>Проблемы с DHCP при использовании dhclient</span>
				</div>
			</a>
			
			<ul id="toc-Проблемы_с_DHCP_при_использовании_dhclient-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-3G-модем_не_определяется" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#3G-%D0%BC%D0%BE%D0%B4%D0%B5%D0%BC_%D0%BD%D0%B5_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D1%8F%D0%B5%D1%82%D1%81%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.5</span>
					<span>3G-модем не определяется</span>
				</div>
			</a>
			
			<ul id="toc-3G-модем_не_определяется-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Выключение_беспроводной_сети_на_ноутбуках" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B1%D0%B5%D1%81%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D0%BE%D0%B9_%D1%81%D0%B5%D1%82%D0%B8_%D0%BD%D0%B0_%D0%BD%D0%BE%D1%83%D1%82%D0%B1%D1%83%D0%BA%D0%B0%D1%85">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.6</span>
					<span>Выключение беспроводной сети на ноутбуках</span>
				</div>
			</a>
			
			<ul id="toc-Выключение_беспроводной_сети_на_ноутбуках-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройки_статического_IP-адреса_сбрасываются_на_DHCP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_%D1%81%D1%82%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_IP-%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0_%D1%81%D0%B1%D1%80%D0%B0%D1%81%D1%8B%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F_%D0%BD%D0%B0_DHCP">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.7</span>
					<span>Настройки статического IP-адреса сбрасываются на DHCP</span>
				</div>
			</a>
			
			<ul id="toc-Настройки_статического_IP-адреса_сбрасываются_на_DHCP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_редактировать_соединения_от_имени_обычного_пользователя" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BE%D1%82_%D0%B8%D0%BC%D0%B5%D0%BD%D0%B8_%D0%BE%D0%B1%D1%8B%D1%87%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.8</span>
					<span>Не удаётся редактировать соединения от имени обычного пользователя</span>
				</div>
			</a>
			
			<ul id="toc-Не_удаётся_редактировать_соединения_от_имени_обычного_пользователя-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Забыть_скрытую_беспроводную_сеть" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B1%D1%8B%D1%82%D1%8C_%D1%81%D0%BA%D1%80%D1%8B%D1%82%D1%83%D1%8E_%D0%B1%D0%B5%D1%81%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D1%83%D1%8E_%D1%81%D0%B5%D1%82%D1%8C">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.9</span>
					<span>Забыть скрытую беспроводную сеть</span>
				</div>
			</a>
			
			<ul id="toc-Забыть_скрытую_беспроводную_сеть-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VPN_не_работает_в_GNOME" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VPN_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82_%D0%B2_GNOME">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.10</span>
					<span>VPN не работает в GNOME</span>
				</div>
			</a>
			
			<ul id="toc-VPN_не_работает_в_GNOME-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_подключиться_к_видимым_европейским_беспроводным_сетям" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%D1%81%D1%8F_%D0%BA_%D0%B2%D0%B8%D0%B4%D0%B8%D0%BC%D1%8B%D0%BC_%D0%B5%D0%B2%D1%80%D0%BE%D0%BF%D0%B5%D0%B9%D1%81%D0%BA%D0%B8%D0%BC_%D0%B1%D0%B5%D1%81%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D1%8B%D0%BC_%D1%81%D0%B5%D1%82%D1%8F%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.11</span>
					<span>Не удаётся подключиться к видимым европейским беспроводным сетям</span>
				</div>
			</a>
			
			<ul id="toc-Не_удаётся_подключиться_к_видимым_европейским_беспроводным_сетям-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Автоматическое_подключение_к_VPN_при_загрузке_системы_не_работает" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA_VPN_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.12</span>
					<span>Автоматическое подключение к VPN при загрузке системы не работает</span>
				</div>
			</a>
			
			<ul id="toc-Автоматическое_подключение_к_VPN_при_загрузке_системы_не_работает-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Замедление_загрузки_системы_из-за_журнала_systemd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BC%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B_%D0%B8%D0%B7-%D0%B7%D0%B0_%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB%D0%B0_systemd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.13</span>
					<span>Замедление загрузки системы из-за журнала systemd</span>
				</div>
			</a>
			
			<ul id="toc-Замедление_загрузки_системы_из-за_журнала_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Постоянные_отключения_беспроводной_сети,_задержки_и_потеря_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B1%D0%B5%D1%81%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D0%BE%D0%B9_%D1%81%D0%B5%D1%82%D0%B8,_%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B8_%D0%B8_%D0%BF%D0%BE%D1%82%D0%B5%D1%80%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.14</span>
					<span>Постоянные отключения беспроводной сети, задержки и потеря пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Постоянные_отключения_беспроводной_сети,_задержки_и_потеря_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_включить_Wi-Fi_на_ноутбуке_Lenovo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C_Wi-Fi_%D0%BD%D0%B0_%D0%BD%D0%BE%D1%83%D1%82%D0%B1%D1%83%D0%BA%D0%B5_Lenovo">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.15</span>
					<span>Не удаётся включить Wi-Fi на ноутбуке Lenovo</span>
				</div>
			</a>
			
			<ul id="toc-Не_удаётся_включить_Wi-Fi_на_ноутбуке_Lenovo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отключение_отправки_имени_хоста" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B8_%D0%B8%D0%BC%D0%B5%D0%BD%D0%B8_%D1%85%D0%BE%D1%81%D1%82%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.16</span>
					<span>Отключение отправки имени хоста</span>
				</div>
			</a>
			
			<ul id="toc-Отключение_отправки_имени_хоста-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-nm-applet_пропадает_в_i3" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#nm-applet_%D0%BF%D1%80%D0%BE%D0%BF%D0%B0%D0%B4%D0%B0%D0%B5%D1%82_%D0%B2_i3">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.17</span>
					<span>nm-applet пропадает в i3</span>
				</div>
			</a>
			
			<ul id="toc-nm-applet_пропадает_в_i3-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unit_dbus-org.freedesktop.resolve1.service_not_found" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unit_dbus-org.freedesktop.resolve1.service_not_found">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.18</span>
					<span>Unit dbus-org.freedesktop.resolve1.service not found</span>
				</div>
			</a>
			
			<ul id="toc-Unit_dbus-org.freedesktop.resolve1.service_not_found-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Secrets_were_required,_but_not_provided" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Secrets_were_required,_but_not_provided">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.19</span>
					<span>Secrets were required, but not provided</span>
				</div>
			</a>
			
			<ul id="toc-Secrets_were_required,_but_not_provided-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Подключение_к_сети_WPA_Enterprise_с_использованием_iwd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA_%D1%81%D0%B5%D1%82%D0%B8_WPA_Enterprise_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_iwd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.20</span>
					<span>Подключение к сети WPA Enterprise с использованием iwd</span>
				</div>
			</a>
			
			<ul id="toc-Подключение_к_сети_WPA_Enterprise_с_использованием_iwd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_request_VPN_secrets" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_request_VPN_secrets">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.21</span>
					<span>Failed to request VPN secrets</span>
				</div>
			</a>
			
			<ul id="toc-Failed_to_request_VPN_secrets-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Соединения_OpenVPN_выдают_ошибку_«secrets:_failed_to_request_VPN_secrets»" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F_OpenVPN_%D0%B2%D1%8B%D0%B4%D0%B0%D1%8E%D1%82_%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D1%83_%C2%ABsecrets:_failed_to_request_VPN_secrets%C2%BB">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.22</span>
					<span>Соединения OpenVPN выдают ошибку «secrets: failed to request VPN secrets»</span>
				</div>
			</a>
			
			<ul id="toc-Соединения_OpenVPN_выдают_ошибку_«secrets:_failed_to_request_VPN_secrets»-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ошибка_«ca_md_too_weak»_в_соединениях_OpenVPN" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%88%D0%B8%D0%B1%D0%BA%D0%B0_%C2%ABca_md_too_weak%C2%BB_%D0%B2_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%D1%85_OpenVPN">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.23</span>
					<span>Ошибка «ca md too weak» в соединениях OpenVPN</span>
				</div>
			</a>
			
			<ul id="toc-Ошибка_«ca_md_too_weak»_в_соединениях_OpenVPN-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Соединения_WPA_Enterprise_не_проходят_аутентификацию_с_ошибкой_OpenSSL_«unsupported_protocol»" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F_WPA_Enterprise_%D0%BD%D0%B5_%D0%BF%D1%80%D0%BE%D1%85%D0%BE%D0%B4%D1%8F%D1%82_%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8E_%D1%81_%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%BE%D0%B9_OpenSSL_%C2%ABunsupported_protocol%C2%BB">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.24</span>
					<span>Соединения WPA Enterprise не проходят аутентификацию с ошибкой OpenSSL «unsupported protocol»</span>
				</div>
			</a>
			
			<ul id="toc-Соединения_WPA_Enterprise_не_проходят_аутентификацию_с_ошибкой_OpenSSL_«unsupported_protocol»-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">9</span>
				<span>Смотрите также</span>
			</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">NetworkManager (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Networkmanager" title="Networkmanager – Deutsch" lang="de" hreflang="de" data-title="Networkmanager" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/NetworkManager.html" title="NetworkManager – English" lang="en" hreflang="en" data-title="NetworkManager" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/NetworkManager.html" title="NetworkManager – français" lang="fr" hreflang="fr" data-title="NetworkManager" data-language-autonym="Français" data-language-local-name="français" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/NetworkManager" title="NetworkManager – 日本語" lang="ja" hreflang="ja" data-title="NetworkManager" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/NetworkManager.html" title="NetworkManager – português" lang="pt" hreflang="pt" data-title="NetworkManager" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/NetworkManager" title="NetworkManager – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="NetworkManager" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a>. Дата последней синхронизации: 10 апреля 2025. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=NetworkManager&amp;diff=0&amp;oldid=831579">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Network_configuration.html" class="mw-redirect" title="Настройка сети">Настройка сети</a></li>
<li><a href="../ru/Network_configuration/Wireless.html" class="mw-redirect" title="Настройка беспроводной сети">Настройка беспроводной сети</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://networkmanager.dev/">NetworkManager</a> — это программа для обнаружения и настройки систем для автоматического подключения к сетям. Функциональность NetworkManager может быть полезна как для беспроводных, так и проводных сетей. При подключении к беспроводным сетям NetworkManager отдаёт предпочтение ранее известным сетям и имеет возможность переключаться на наиболее стабильную сеть. Приложения, поддерживающие NetworkManager, могут переключаться из онлайн-режима в автономный. NetworkManager также предпочитает проводные соединения беспроводным, поддерживает модемные соединения и некоторые типы VPN. NetworkManager изначально был разработан компанией Red Hat, а в настоящее время поддерживается проектом <a href="../ru/GNOME.html" title="GNOME (Русский)">GNOME</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> По умолчанию все секреты (например, пароли Wi-Fi) хранятся в открытом виде и доступны для чтения пользователю root в файловой системе и пользователям, имеющим доступ к настройкам (например, через <i>nm-applet</i>). Смотрите раздел <a href="#%D0%A8%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9_Wi-Fi">#Шифрование паролей Wi-Fi</a>.</div>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager">networkmanager</a></span>, который содержит демон, консольный инструмент <code>nmcli</code> и интерфейс <code>nmtui</code> на основе curses.
</p>
<h3>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_NetworkManager"></span><span class="mw-headline" id="Включение_NetworkManager">Включение NetworkManager</span>
</h3>
<p>После установки <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>NetworkManager.service</code>. После запуска NetworkManager автоматически подключится ко всем «системным соединениям», которые уже были заранее настроены в системе. «Пользовательские соединения» настраиваются и подключаются через <i>nmcli</i> или апплет.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Каждый сетевой интерфейс должен управляться только одним <a href="../ru/Network_configuration.html#%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D1%8B" title="Network configuration (Русский)">DHCP-клиентом или сетевым менеджером</a>, поэтому рекомендуется запускать в системе только один DHCP-клиент или сетевой менеджер. Вы можете посмотреть список запущенных служб командой <code>systemctl --type=service</code> и затем <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">остановить</a> или перенастроить конфликтующие.</li>
<li>Если <a href="../ru/Systemd-resolved.html" title="Systemd-resolved (Русский)">systemd-resolved</a> не запущен, вы получите кучу ошибок в журнале. Подробнее смотрите <a href="#Unit_dbus-org.freedesktop.resolve1.service_not_found">#Unit dbus-org.freedesktop.resolve1.service not found</a>.</li>
</ul>
</div>
<h3>
<span id=".D0.94.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.8B"></span><span class="mw-headline" id="Дополнительные_интерфейсы">Дополнительные интерфейсы</span>
</h3>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nm-connection-editor">nm-connection-editor</a></span> предоставляет графический интерфейс,</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span> предоставляет апплет для трея (<code>nm-applet</code>).</li>
</ul>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_.D0.BC.D0.BE.D0.B1.D0.B8.D0.BB.D1.8C.D0.BD.D0.BE.D0.B9_.D1.81.D0.B5.D1.82.D0.B8"></span><span class="mw-headline" id="Поддержка_мобильной_сети">Поддержка мобильной сети</span>
</h3>
<p>NetworkManager использует <a href="../en/Mobile_broadband_modem.html#ModemManager" class="mw-redirect" title="ModemManager">ModemManager</a> для подключения к мобильным сетям.
</p>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакеты <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=modemmanager">modemmanager</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usb_modeswitch">usb_modeswitch</a></span>. Затем <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>ModemManager.service</code>.
</p>
<p>Может понадобиться <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустить">перезапустить</a> <code>NetworkManager.service</code>, чтобы он обнаружил ModemManager. После перезапуска переподключите модем, и он должен обнаружиться.
</p>
<p>При добавлении нового соединения (например через <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nm-connection-editor">nm-connection-editor</a></span>) выберите «Мобильное широкополосное подключение». После выбора оператора и тарифного плана остальные настройки (в частности <a href="https://en.wikipedia.org/wiki/ru:APN" class="extiw" title="wikipedia:ru:APN">APN</a>) должны заполниться автоматически на основе информации из <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mobile-broadband-provider-info">mobile-broadband-provider-info</a></span>.
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_PPPoE_.2F_DSL"></span><span class="mw-headline" id="Поддержка_PPPoE_/_DSL">Поддержка PPPoE / DSL</span>
</h3>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ppp">ppp</a></span> и добавьте новое соединение через <code>nm-connection-editor</code>.
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_VPN"></span><span class="mw-headline" id="Поддержка_VPN">Поддержка VPN</span>
</h3>
<p>С версии 1.16 NetworkManager поддерживает <a href="../en/WireGuard.html" title="WireGuard">WireGuard</a>, нужен лишь модуль ядра <code>wireguard</code>. Подробности читайте в <a rel="nofollow" class="external text" href="https://blogs.gnome.org/thaller/2019/03/15/wireguard-in-networkmanager/">посте в блоге</a>.
</p>
<p>Поддержка других VPN осуществляется через систему плагинов. Доступны следующие пакеты:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-openconnect">networkmanager-openconnect</a></span> для <a href="../en/OpenConnect.html" title="OpenConnect">OpenConnect</a>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-openvpn">networkmanager-openvpn</a></span> для <a href="../en/OpenVPN.html" class="mw-redirect" title="OpenVPN (Русский)">OpenVPN</a>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-pptp">networkmanager-pptp</a></span> для <a href="../en/PPTP_Client.html" title="PPTP Client">клиента PPTP</a>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-strongswan">networkmanager-strongswan</a></span> для <a href="../en/StrongSwan.html" title="StrongSwan">strongSwan</a>
</li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-vpnc">networkmanager-vpnc</a></span></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-fortisslvpn/">networkmanager-fortisslvpn</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-iodine-git/">networkmanager-iodine-git</a></span><sup><small>AUR</small></sup>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-libreswan/">networkmanager-libreswan</a></span><sup><small>AUR</small></sup>
</li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-l2tp">networkmanager-l2tp</a></span></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-ssh-git/">networkmanager-ssh-git</a></span><sup><small>AUR</small></sup>
</li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-sstp">network-manager-sstp</a></span></li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Есть много <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues?search=VPN&amp;state=opened">багов</a>, связанных с поддержкой VPN. Проверяйте, что опции процессов проставлены графическим интерфейсом корректно, и перепроверяйте после каждого обновления.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Чтобы DNS полноценно работал при использовании VPN, вам может понадобиться настроить <a href="#%D0%9A%D1%8D%D1%88%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_DNS_%D0%B8_%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%BD%D0%BE%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5">условное перенаправление</a>.</li>
<li>Некоторые плагины могут не иметь интерфейса для командной строки или вообще не работать без запущенного апплета для трея. Это обычно не проблема при использовании среды рабочего стола, но если вы её не используете, запускайте <a href="#nm-applet">#nm-applet</a> вручную при работе с VPN-соединениями, чтобы плагин мог отобразить все необходимые для соединения диалоговые окна, такие как запрос пароля. <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=246698">[1]</a>
</li>
</ul>
</div>
<h2>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Использование">Использование</span>
</h2>
<p>NetworkManager поставляется с командами <span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmcli.1">nmcli(1)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 1 nmtui"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmtui.1">nmtui(1)</a></span>.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_nmcli"></span><span class="mw-headline" id="Примеры_nmcli">Примеры nmcli</span>
</h3>
<p>Посмотреть список доступных сетей Wi-Fi:
</p>
<pre>$ nmcli device wifi list
</pre>
<p>Подключиться к сети Wi-Fi:
</p>
<pre>$ nmcli device wifi connect <i>SSID_или_BSSID</i> password <i>пароль</i>
</pre>
<p>Подключиться к скрытой сети Wi-Fi:
</p>
<pre>$ nmcli device wifi connect <i>SSID_или_BSSID</i> password <i>пароль</i> hidden yes
</pre>
<p>Подключиться к Wi-Fi на интерфейсе <code>wlan1</code>:
</p>
<pre>$ nmcli device wifi connect <i>SSID_или_BSSID</i> password <i>пароль</i> ifname wlan1 <i>имя_профиля</i>
</pre>
<p>Отключить сетевой интерфейс:
</p>
<pre>$ nmcli device disconnect ifname eth0
</pre>
<p>Получить список соединений с их именами, UUID, типами и используемыми устройствами:
</p>
<pre>$ nmcli connection show
</pre>
<p>Активировать соединение (то есть подключиться к сети с существующим профилем):
</p>
<pre>$ nmcli connection up <i>имя_или_uuid</i>
</pre>
<p>Удалить соединение:
</p>
<pre>$ nmcli connection delete <i>имя_или_uuid</i>
</pre>
<p>Посмотреть список сетевых устройств и их состояние:
</p>
<pre>$ nmcli device
</pre>
<p>Отключить Wi-Fi:
</p>
<pre>$ nmcli radio wifi off
</pre>
<h3>
<span id=".D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Изменение_соединения">Изменение соединения</span>
</h3>
<p>Полный список параметров можно посмотреть в <span class="plainlinks archwiki-template-man" title="$ man 5 nm-settings"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nm-settings.5">nm-settings(5)</a></span>.
</p>
<p>Сперва получите список соединений:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nmcli connection</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NAME                    UUID                                  TYPE      DEVICE
Проводное соединение 2  e7054040-a421-3bef-965d-bb7d60b7cecf  ethernet  enp5s0
Проводное соединение 1  997f2782-f0fc-301d-bfba-15421a2735d8  ethernet  enp0s25
MY-HOME-WIFI-5G         92a0f7b3-2eba-49ab-a899-24d83978f308  wifi       --
</pre>
<p>Имя, указанное в первом столбце, можно использовать в качестве идентификатора соединения. Здесь для примера используем <code>Проводное соединение 2</code>.
</p>
<p>Есть три способа настройки соединения после его создания:
</p>
<dl>
<dt>Интерактивный редактор nmcli</dt>
<dd>
<code>nmcli connection edit 'Проводное соединение 2'</code>.<br> В редакторе есть хорошая встроенная документация на русском языке.</dd>
</dl>
<dl>
<dt>Интерфейс командной строки nmcli</dt>
<dd>
<code>nmcli connection modify 'Проводное соединение 2' <i>параметр</i>.<i>свойство</i> <i>значение</i></code>. Для использования смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmcli.1">nmcli(1)</a></span>. Например, изменить метрику маршрута IPv4 на 200 можно с помощью команды <code>nmcli connection modify 'Проводное соединение 2' ipv4.route-metric 200</code>.</dd>
</dl>
<p>Для удаления настройки укажите пустое значение (""):
</p>
<dl><dd><code>nmcli connection modify 'Проводное соединение 2' <i>параметр</i>.<i>свойство</i> ""</code></dd></dl>
<dl>
<dt>Файл соединения</dt>
<dd>В каталоге <code>/etc/NetworkManager/system-connections/</code> измените соответствующий файл <code>Проводное соединение 2.nmconnection</code>.<br> Не забудьте перезагрузить настройки командой <code>nmcli connection reload</code>.</dd>
</dl>
<h3><span class="mw-headline" id="nmtui">nmtui</span></h3>
<p>В состав NetworkManager входит программа с текстовым интерфейсом (TUI) для управления соединениями, настройки имени хоста и управления беспроводными картами. Запустить её можно командой <code>nmtui</code>.
</p>
<h2>
<span id=".D0.A4.D1.80.D0.BE.D0.BD.D1.82.D0.B5.D0.BD.D0.B4.D1.8B"></span><span class="mw-headline" id="Фронтенды">Фронтенды</span>
</h2>
<p>Для интеграции со <a href="../ru/Desktop_environment.html" title="Desktop environment (Русский)">средой рабочего стола</a> обычно используют апплет в трее. Он предоставляет не только лёгкий доступ к настройкам сети, но и агент для хранения паролей. Многие среды рабочего стола имеют свои собственные апплеты; если в вашей среде его нет, вы можете использовать <a href="#nm-applet">#nm-applet</a>.
</p>
<h3><span class="mw-headline" id="GNOME">GNOME</span></h3>
<p>В <a href="../ru/GNOME.html" title="GNOME (Русский)">GNOME</a> есть свой собственный инструмент, доступный в настройках сети.
</p>
<h3><span class="mw-headline" id="KDE_Plasma">KDE Plasma</span></h3>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-nm">plasma-nm</a></span> и добавьте виджет сети на панель задач.
</p>
<h3><span class="mw-headline" id="nm-applet">nm-applet</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span> — фронтенд на базе GTK 3, который работает в окружениях Xorg как значок в трее.
</p>
<p>Для сохранения паролей установите и настройте приложение, реализующее <a rel="nofollow" class="external text" href="https://specifications.freedesktop.org/secret-service-spec/latest/">Secret Service D-Bus API</a>: например, <a href="../ru/GNOME/Keyring.html" title="GNOME (Русский)/Keyring (Русский)">GNOME Keyring</a>, <a href="../en/KDE_Wallet.html" title="KDE Wallet">KDE Wallet</a> или <a href="../ru/KeePass.html" title="KeePass (Русский)">KeePassXC</a>.
</p>
<p>Имейте в виду, что после включения флажка <i>Все пользователи могут подключаться к этой сети</i> NetworkManager сохраняет пароль открытым текстом, хотя соответствующий файл доступен только для root (или других пользователей через <code>nm-applet</code>). Смотрите <a href="#%D0%A8%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9_Wi-Fi">#Шифрование паролей Wi-Fi</a>.
</p>
<p>Для запуска <code>nm-applet</code> без панели задач можно использовать <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=trayer">trayer</a></span> или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=stalonetray">stalonetray</a></span>. Например, вы можете сделать такой скрипт:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nmgui</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
nm-applet    2&gt;&amp;1 &gt; /dev/null &amp;
stalonetray  2&gt;&amp;1 &gt; /dev/null
killall nm-applet
</pre>
<p>После закрытия окна <i>stalonetray</i> он автоматически завершит <code>nm-applet</code>.
</p>
<p>Апплет может уведомлять о событиях, таких как как подключение к сети Wi-Fi или отключение от неё. Чтобы эти уведомления отображались, убедитесь, что у вас установлен сервер уведомлений — смотрите статью <a href="../en/Desktop_notifications.html" class="mw-redirect" title="Desktop notifications (Русский)">Desktop notifications (Русский)</a>. Если вы используете апплет без сервера уведомлений, вы можете увидеть некоторые сообщения в stdout/stderr, и апплет может зависнуть. Смотрите <a rel="nofollow" class="external autonumber" href="https://bugzilla.gnome.org/show_bug.cgi?id=788313">[2]</a>.
</p>
<p>Запустить <code>nm-applet</code> с отключенными уведомлениями можно так:
</p>
<pre>$ nm-applet --no-agent
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> <code>nm-applet</code> может быть запущен автоматически с помощью <a href="../ru/XDG_Autostart.html" title="XDG Autostart (Русский)">desktop-файла автозапуска</a>. В этом случае для добавления опции <code>--no-agent</code> измените строку Exec в этом файле:
<pre>Exec=nm-applet --no-agent</pre>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> При работе в <a href="../ru/I3.html" title="I3 (Русский)">i3</a> nm-applet, запущенный с опцией <code>--no-agent</code>, не позволит подключиться к защищённой сети Wi-Fi, так как не сможет запросить пароль. В <a href="../ru/Systemd/Journal.html" title="Systemd (Русский)/Journal (Русский)">журнале</a> будет ошибка <code>no secrets: No agents were available for this request</code>.</div>
<h4><span class="mw-headline" id="Appindicator">Appindicator</span></h4>
<p>С версии 1.18.0 в официальном пакете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span> <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/network-manager-applet/-/commit/527448fb2a87d85055f504f463dfe961dccd75c3">появилась</a> поддержка Appindicator. Для использования Appindicator добавьте соответствующий параметр:
</p>
<pre>$ nm-applet --indicator
</pre>
<h3><span class="mw-headline" id="networkmanager-dmenu">networkmanager-dmenu</span></h3>
<p>Ещё вариант — <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-dmenu-git/">networkmanager-dmenu-git</a></span><sup><small>AUR</small></sup>, небольшой скрипт для управления соединениями NetworkManager через <a href="../ru/Dmenu.html" title="Dmenu (Русский)">dmenu</a> или <a href="../ru/Rofi.html" title="Rofi (Русский)">rofi</a> вместо <code>nm-applet</code>. Он предоставляет все основные функции, такие как подключение к существующим Wi-Fi или проводным соединениям NetworkManager, подключение к новым Wi-Fi соединениям, запрос пароля по необходимости, подключение к существующим VPN соединениям, включение/выключение сети, запуск <i>nm-connection-editor</i>, подключение к Bluetooth-сетям.
</p>
<h3><span class="mw-headline" id="switchboard">switchboard</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=switchboard">switchboard</a></span> из Pantheon предлагает способ настройки NetworkManager, не зависящий от среды рабочего стола, в сочетании с <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=switchboard-plug-network">switchboard-plug-network</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nm-connection-editor">nm-connection-editor</a></span>. Его можно запустить командой:
</p>
<pre>$ io.elementary.settings
</pre>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка">Настройка</span>
</h2>
<p>NetworkManager требует некоторых дополнительных шагов для правильной работы. Убедитесь, что вы настроили <code>/etc/hosts</code> как описано в разделе <a href="../ru/Network_configuration.html#%D0%98%D0%BC%D1%8F_%D1%85%D0%BE%D1%81%D1%82%D0%B0" class="mw-redirect" title="Настройка сети">Настройка сети#Имя хоста</a>.
</p>
<p>Глобальный файл настроек — <code>/etc/NetworkManager/NetworkManager.conf</code>. Дополнительные файлы можно добавить в каталог <code>/etc/NetworkManager/conf.d/</code>. Обычно менять их не требуется.
</p>
<p>После изменения файлов настроек нужно применить изменения:
</p>
<pre># nmcli general reload
</pre>
<h3><span class="mw-headline" id="NetworkManager-wait-online">NetworkManager-wait-online</span></h3>
<p>Включение <code>NetworkManager.service</code> автоматически включает <code>NetworkManager-wait-online.service</code> — oneshot-службу, которая ждёт окончания настройки сети. У неё есть <code>WantedBy=network-online.target</code>, так что она завершится только когда сам <code>network-online.target</code> будет включен или задействован каким-то другим юнитом. Смотрите также <a href="../ru/Systemd.html#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BE%D0%B2_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BA_%D1%81%D0%B5%D1%82%D0%B8" title="Systemd (Русский)">systemd (Русский)#Запуск сервисов после подключения к сети</a>.
</p>
<p>По умолчанию <code>NetworkManager-wait-online.service</code> ждёт не появления сети, а завершения загрузки NetworkManager (смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 nm-online"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nm-online.1">nm-online(1)</a></span>). Если она завершится до реального появления сети, это может привести к проблемам запуска других служб, зависимых от сети. Для решения проблемы создайте <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" class="mw-redirect" title="Drop-in файл">drop-in файл</a> для этого юнита, чтобы убрать параметр <code>-s</code> из строки <code>ExecStart</code>:
</p>
<pre>[Service]
ExecStart=
ExecStart=/usr/bin/nm-online -q
</pre>
<p>Однако это может привести к <a rel="nofollow" class="external text" href="https://lists.fedoraproject.org/archives/list/users@lists.fedoraproject.org/thread/EGC324JD3HJCGVN7J55WYPRLFDA3TP7N/">другим проблемам</a>.
</p>
<p>Иногда служба по-прежнему не запускается при загрузке из-за слишком маленького таймаута. <a href="../ru/Systemd.html#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Отредактируйте">Отредактируйте</a> службу, прописав для <code>NM_ONLINE_TIMEOUT</code> вместо <code>60</code> значение побольше.
</p>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.80.D0.B0.D0.B7.D1.80.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B9_PolicyKit"></span><span class="mw-headline" id="Настройка_разрешений_PolicyKit">Настройка разрешений PolicyKit</span>
</h3>
<p>По умолчанию пользователи в активных локальных сеансах могут редактировать большинство сетевых настроек без пароля. Проверьте тип сеанса как описано в разделе <a href="../ru/General_troubleshooting.html#%D0%A0%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%B5%D1%81%D1%81%D0%B8%D0%B8" class="mw-redirect" title="Устранение часто встречающихся неполадок">Устранение часто встречающихся неполадок#Разрешения сессии</a>. В большинстве случаев всё должно работать из коробки.
</p>
<p>Некоторые действия (например, изменение имени хоста системы) требуют пароля администратора. В этом случае вам нужно <a href="../ru/Users_and_groups.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" title="Users and groups (Русский)">добавить</a> себя в группу <code>wheel</code> и запустить <a href="../ru/Polkit.html#%D0%90%D0%B3%D0%B5%D0%BD%D1%82%D1%8B_%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8" title="Polkit (Русский)">агент аутентификации Polkit</a>, который будет запрашивать пароль.
</p>
<p>Для удалённых сеансов (например, <a href="../ru/TigerVNC.html#%D0%92%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_vncserver_%D0%B4%D0%BB%D1%8F_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_(%D0%B1%D0%B5%D0%B7%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D1%8B%D1%85)_%D1%81%D0%B5%D1%81%D1%81%D0%B8%D0%B9" title="TigerVNC (Русский)">headless VNC</a>) у вас есть несколько вариантов получения привилегий, необходимых для работы с NetworkManager:
</p>
<ol>
<li>
<a href="../ru/Users_and_groups.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" title="Users and groups (Русский)">Добавить</a> себя в группу <code>wheel</code>. Вам нужно будет вводить свой пароль при каждом действии. Имейте в виду, что эта группа также может предоставлять другие разрешения, такие как возможность использовать <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a> без ввода пароля root.</li>
<li>
<a href="../ru/Users_and_groups.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" title="Users and groups (Русский)">Добавить</a> себя в группу <code>network</code> и создать файл <code>/etc/polkit-1/rules.d/50-org.freedesktop.NetworkManager.rules</code> со следующим содержимым: <pre>polkit.addRule(function(action, subject) {
  if (action.id.indexOf("org.freedesktop.NetworkManager.") == 0 &amp;&amp; subject.isInGroup("network")) {
    return polkit.Result.YES;
  }
});
</pre> Все пользователи в группе <code>network</code> смогут добавлять и удалять сети без пароля (что означает, что вам не понадобится запускать агент аутентификации Polkit, так что этот вариант работает в том числе через SSH).</li>
</ol>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D0.BF.D1.80.D0.BE.D0.BA.D1.81.D0.B8"></span><span class="mw-headline" id="Настройки_прокси">Настройки прокси</span>
</h3>
<p>NetworkManager поддерживает некоторые настройки прокси. Хотя их нельзя изменить напрямую через <i>nmtui</i>, <i>nm-applet</i> и <i>nmcli</i> поддерживают их.
Смотрите настройки прокси в <span class="plainlinks archwiki-template-man" title="$ man 5 nm-settings-nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nm-settings-nmcli.5">nm-settings-nmcli(5)</a></span>.
</p>
<p>Кроме того, пользовательские команды прокси всегда можно запустить с помощью диспетчерских скриптов; смотрите раздел <a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D1%81%D0%BA%D0%B8%D1%85_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B2">#Примеры диспетчерских скриптов</a>.
</p>
<p>Смотрите также <a href="../en/Proxy_server.html" class="mw-redirect" title="Proxy settings">Proxy settings</a>.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Проверка_соединения">Проверка соединения</span>
</h3>
<p>NetworkManager может попытаться связаться с веб-сервером после подключения к сети, чтобы определить, находится ли он, например, за <a href="https://en.wikipedia.org/wiki/ru:Captive_portal" class="extiw" title="wikipedia:ru:Captive portal">captive portal</a>. По умолчанию для проверки используется <a rel="nofollow" class="external text" href="https://ping.archlinux.org">ping.archlinux.org</a> (это CNAME-псевдоним для redirect.archlinux.org, прописан в файле <code>/usr/lib/NetworkManager/conf.d/20-connectivity.conf</code>). Если вы хотите прописать другой адрес, создайте файл <code>/etc/NetworkManager/conf.d/20-connectivity.conf</code>, смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5#CONNECTIVITY_SECTION">NetworkManager.conf(5) § CONNECTIVITY SECTION</a></span>. Пример использования серверов GNOME (использовать сам <a href="../ru/GNOME.html" title="GNOME (Русский)">GNOME</a> при этом необязательно):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/20-connectivity.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[connectivity]
uri=http://nmcheck.gnome.org/check_network_status.txt
</pre>
<p>Чтобы отключить проверку соединения NetworkManager, используйте следующую конфигурацию. Это может быть полезно при подключении к VPN, которая блокирует проверки соединения.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/20-connectivity.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[connectivity]
enabled=false
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Хотя автоматические проверки соединения являются потенциальной проблемой конфиденциальности, стандартный URL в Arch Linux не логирует обращения к нему. <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/infrastructure/-/commit/fabccd0f61e5dea3925e8a0c6a46d56d5750c121#a4f34381bbb18ea77bfb3dd11a8aeca707078fca_0_26">[3]</a> <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/infrastructure/-/blob/master/roles/ping/templates/nginx.d.conf.j2">[4]</a>
</div>
<h3><span class="mw-headline" id="Captive_portal">Captive portal</span></h3>
<p>При использовании сетей, в которых используется <a href="https://en.wikipedia.org/wiki/ru:Captive_portal" class="extiw" title="wikipedia:ru:Captive portal">captive portal</a>, среда рабочего стола может автоматически открыть окно с запросом учётных данных. Если ваша среда этого не делает, вы можете использовать <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=capnet-assist">capnet-assist</a></span> (однако на данный момент в нём сломан диспетчерский скрипт). В качестве альтернативы можно создать свой диспетчерский скрипт:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/90-open_captive_portal</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh -e
# Script to dispatch NetworkManager events
#
# Runs shows a login webpage on walled garden networks.
# See NetworkManager(8) for further documentation of the dispatcher events.

PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

if [ -x "/usr/bin/logger" ]; then
    logger="/usr/bin/logger -s -t captive-portal"
else
    logger=":"
fi

wait_for_process() {
    PNAME=$1
    while [ -z "$(/usr/bin/pgrep $PNAME)" ]; do
        sleep 3;
    done
}

#launch the browser, but on boot we need to wait that nm-applet starts
start_browser() {
    local user="$1"
    local display="$2"

    export DISPLAY="$display"
    wait_for_process nm-applet

    export XAUTHORITY="/home/$user/.Xauthority"

    $logger "Running browser as '$user' with display '$display' to login in captive portal"
    sudo -u "$user" --preserve-env=DISPLAY,XAUTHORITY -H xdg-open http://capnet.elementary.io 2&gt;&amp;1 &gt; /dev/null
}

# Run the right scripts
case "$2" in
    connectivity-change)
    $logger -p user.debug "dispatcher script triggered on connectivity change: $CONNECTIVITY_STATE"
    if [ "$CONNECTIVITY_STATE" = "PORTAL" ]; then
        # Match last column of who's output with ' :[at least one digit] '
        who | awk '$NF ~ /\(:[0-9]+\)/ { print $1 " " substr($NF, 2, length($NF)-2) };' | \
        while read user display; do
            start_browser $user $display || $logger -p user.err "Failed for user: '$user' display: '$display'"
        done
    fi
    ;;
    *)
    # In a down phase
    exit 0
    ;;
esac
</pre>
<p>Сделайте скрипт <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a>. Он предполагает, что вы используете X, и просто открывает http-страницу. Это может сработать не для всех.
</p>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">Перезапустите</a> службу <code>NetworkManager.service</code> или перезагрузитесь для применения изменений. После этого скрипт должен открыть страницу входа, как только обнаружит captive portal.
</p>
<p>Простым решением является <a rel="nofollow" class="external text" href="https://github.com/Seme4eg/captive-portal-sh">captive-portal-sh</a> — скрипт, который получает адрес captive portal и открывает его в браузере по умолчанию (только для Wayland).
</p>
<p>Ещё одно решение — <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/captive-browser-git/">captive-browser-git</a></span><sup><small>AUR</small></sup>, основанное на Google Chrome.
</p>
<h3>
<span id=".D0.9A.D0.BB.D0.B8.D0.B5.D0.BD.D1.82_DHCP"></span><span class="mw-headline" id="Клиент_DHCP">Клиент DHCP</span>
</h3>
<p>По умолчанию NetworkManager использует свой внутренний DHCP-клиент. Внутренний плагин DHCPv4 основан на <a rel="nofollow" class="external text" href="https://nettools.github.io/n-dhcp4/">nettools n-dhcp4</a>, в то время как плагин DHCPv6 основан на коде из systemd-networkd.
</p>
<p>Для использования другого клиента DHCP <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">установите</a> какую-нибудь альтернативу:
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcpcd">dhcpcd</a></span> — <a href="../ru/Dhcpcd.html" title="Dhcpcd (Русский)">dhcpcd</a>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span> — <a href="../ru/Network_configuration.html#%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D1%8B" title="Network configuration (Русский)">dhclient</a>
</li>
</ul>
<p>Для выбора клиента DHCP пропишите опцию <code>main.dhcp=<i>имя_клиента_dhcp</i></code> в каком-нибудь файле в каталоге <code>/etc/NetworkManager/conf.d/</code>, например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dhcp-client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
dhcp=dhcpcd</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<p>Не включайте юниты, идущие в комплекте с пакетами <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhclient">dhclient</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcpcd">dhcpcd</a></span>: они будут конфликтовать с NetworkManager. Смотрите примечание в разделе <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">#Установка</a>.
</p>
</div>
<h3>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_DNS"></span><span class="mw-headline" id="Управление_DNS">Управление DNS</span>
</h3>
<p>Управление DNS в NetworkManager описано на вики-странице проекта GNOME: <a rel="nofollow" class="external text" href="https://wiki.gnome.org/Projects/NetworkManager/DNS">Projects/NetworkManager/DNS</a>.
</p>
<h4>
<span id=".D0.9A.D1.8D.D1.88.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_DNS_.D0.B8_.D1.83.D1.81.D0.BB.D0.BE.D0.B2.D0.BD.D0.BE.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.BD.D0.B0.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Кэширование_DNS_и_условное_перенаправление">Кэширование DNS и условное перенаправление</span>
</h4>
<p>NetworkManager имеет плагин для включения кэширования DNS и условного перенаправления (conditional forwarding, <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/merge_requests/143">ранее</a> известный как "split DNS") с использованием <a href="../en/Dnsmasq.html" class="mw-redirect" title="Dnsmasq (Русский)">dnsmasq</a> или <a href="../ru/Systemd-resolved.html" title="Systemd-resolved (Русский)">systemd-resolved</a>. Преимущества этого в том, что запросы DNS будут кэшироваться, что сокращает время резолвинга, а DNS-запросы для хостов VPN будут направляться на соответствующие DNS-серверы VPN. Это особенно полезно, если вы подключены к нескольким VPN.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если <code>/etc/resolv.conf</code> является символической ссылкой на <code>/run/systemd/resolve/stub-resolv.conf</code>, <code>/run/systemd/resolve/resolv.conf</code>, <code>/lib/systemd/resolv.conf</code> или <code>/usr/lib/systemd/resolv.conf</code>, NetworkManager автоматически использует systemd-resolved. Для использования dnsmasq сперва удалите эту ссылку и перезапустите NetworkManager.</div>
<h5><span class="mw-headline" id="dnsmasq">dnsmasq</span></h5>
<p>Установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> и пропишите <code>main.dns=dnsmasq</code> в каком-нибудь файле в каталоге <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dns.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
dns=dnsmasq</pre>
<p>Затем выполните <code>nmcli general reload</code> от имени root. NetworkManager автоматически запустит dnsmasq и добавит <code>127.0.0.1</code> в <code>/etc/resolv.conf</code>. Исходные DNS-серверы можно найти в файле <code>/run/NetworkManager/no-stub-resolv.conf</code>. Вы можете проверить, используется ли dnsmasq, дважды выполнив один и тот же DNS-запрос с помощью <code>drill example.com</code> и сравнив время запроса.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Вам не нужно запускать <code>dnsmasq.service</code> или изменять <code>/etc/dnsmasq.conf</code>. NetworkManager запустит dnsmasq без использования службы systemd и без чтения стандартных файлов настроек dnsmasq.</li>
<li>Экземпляр dnsmasq, который запускается NetworkManager'ом, будет принимать запросы на <code>127.0.0.1:53</code>, вы не можете запустить другие программы (в том числе <code>dnsmasq.service</code>) на том же адресе и порту.</li>
</ul>
</div>
<h6>
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B0.D1.8F_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_dnsmasq"></span><span class="mw-headline" id="Пользовательская_конфигурация_dnsmasq">Пользовательская конфигурация dnsmasq</span>
</h6>
<p>Свои настройки для <i>dnsmasq</i> можно добавить в каталог <code>/etc/NetworkManager/dnsmasq.d/</code>. Например, для изменения размера кэша DNS (который находится в оперативной памяти):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dnsmasq.d/cache.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">cache-size=1000</pre>
<p>Проверить синтаксис можно такой командой:
</p>
<pre>$ dnsmasq --test --conf-file=/dev/null --conf-dir=/etc/NetworkManager/dnsmasq.d
</pre>
<p>Смотрите список доступных опций в <span class="plainlinks archwiki-template-man" title="$ man 8 dnsmasq"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dnsmasq.8">dnsmasq(8)</a></span>.
</p>
<h6><span class="mw-headline" id="IPv6">IPv6</span></h6>
<p>Включение <code>dnsmasq</code> в NetworkManager может сломать IPv6-only DNS lookups (т. е. <code>drill -6 [hostname]</code>), которые без него работали бы. Чтобы решить эту проблему, создание следующего файла настроит <i>dnsmasq</i> на прослушивание IPv6 loopback:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dnsmasq.d/ipv6-listen.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">listen-address=::1</pre>
<p>Кроме того, <code>dnsmasq</code> также не определяет приоритеты upstream DNS IPv6. К сожалению, NetworkManager этого не делает (<a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/network-manager/+bug/936712">Ubuntu Bug</a>). Обходной путь — отключить IPv4 DNS в конфигурации NetworkManager, если таковой существует.
</p>
<h6><span class="mw-headline" id="DNSSEC">DNSSEC</span></h6>
<p>Экземпляр dnsmasq, который запускается NetworkManager'ом, по умолчанию не будет проверять <a href="../en/DNSSEC.html" title="DNSSEC">DNSSEC</a>, так как он запускается с параметром <code>--proxy-dnssec</code>. Он будет доверять любой информации DNSSEC, полученной от вышестоящего DNS-сервера.
</p>
<p>Чтобы dnsmasq правильно проверял DNSSEC, тем самым ломая разрешение DNS с серверами имён, которые его не поддерживают, создайте следующий файл настроек:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dnsmasq.d/dnssec.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">conf-file=/usr/share/dnsmasq/trust-anchors.conf
dnssec</pre>
<h5><span class="mw-headline" id="systemd-resolved">systemd-resolved</span></h5>
<p>NetworkManager может использовать <a href="../ru/Systemd-resolved.html" title="Systemd-resolved (Русский)">systemd-resolved</a> в качестве распознавателя DNS и кэша. Перед использованием убедитесь, что <i>systemd-resolved</i> правильно настроен и что служба <code>systemd-resolved.service</code> запущена.
</p>
<p>NetworkManager автоматически будет использовать systemd-resolved, если файл <code>/etc/resolv.conf</code> является <a href="../ru/Systemd-resolved.html#DNS" title="Systemd-resolved (Русский)">символической ссылкой</a> на <code>/run/systemd/resolve/stub-resolv.conf</code>, <code>/run/systemd/resolve/resolv.conf</code> или <code>/usr/lib/systemd/resolv.conf</code>.
</p>
<p>Вы можете включить его явно, добавив настройку <code>main.dns=systemd-resolved</code> в какой-нибудь файл в каталоге <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dns.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
dns=systemd-resolved</pre>
<h5>
<span id=".D0.A0.D0.B0.D1.81.D0.BF.D0.BE.D0.B7.D0.BD.D0.B0.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C_DNS_.D1.81_.D0.B0.D0.B1.D0.BE.D0.BD.D0.B5.D0.BD.D1.82.D0.BE.D0.BC_openresolv"></span><span class="mw-headline" id="Распознаватель_DNS_с_абонентом_openresolv">Распознаватель DNS с абонентом openresolv</span>
</h5>
<p>Если <a href="../ru/Openresolv.html" title="Openresolv (Русский)">openresolv</a> позволяет подключить ваш локальный <a href="../ru/Domain_name_resolution.html#DNS-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D1%8B" title="Domain name resolution (Русский)">DNS-резолвер</a> в качестве абонента, подключите его и <a href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_openresolv">настройте NetworkManager на использование openresolv</a>.
</p>
<p>Поскольку NetworkManager выглядит как один «интерфейс» для <i>resolvconf</i>, невозможно реализовать условное перенаправление между двумя соединениями NetworkManager. Смотрите <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues/153">NetworkManager issue 153</a>.
</p>
<p>Эта проблема может быть частично решена, если вы установите <code>private_interfaces="*"</code> в <code>/etc/resolvconf.conf</code><a rel="nofollow" class="external autonumber" href="https://roy.marples.name/projects/openresolv/configuration/">[5]</a>. Любые запросы к доменам, которых нет в списке поисковых доменов, не будут перенаправлены. Они будут обработаны в соответствии с конфигурацией локального резолвера, например, перенаправлены на другой DNS-сервер или разрешены рекурсивно от корня DNS.
</p>
<h4>
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B8.D0.B5_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D1.8B_DNS"></span><span class="mw-headline" id="Пользовательские_серверы_DNS">Пользовательские серверы DNS</span>
</h4>
<h5>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.B3.D0.BB.D0.BE.D0.B1.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.BE.D0.B2_DNS"></span><span class="mw-headline" id="Настройка_глобальных_серверов_DNS">Настройка глобальных серверов DNS</span>
</h5>
<p>Чтобы задать DNS-серверы для всех соединений, укажите их в <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span>, используя синтаксис <code>servers=<i>ipадрес1</i>,<i>ipадрес2</i>,<i>ipадрес3</i></code> в разделе <code>[global-dns-domain-*]</code>. Например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dns-servers.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global-dns-domain-*]
servers=::1,127.0.0.1</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Если вы используете <a href="#%D0%9A%D1%8D%D1%88%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_DNS_%D0%B8_%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%BD%D0%BE%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5">плагин dnsmasq или systemd-resolved</a> или <a href="#%D0%A0%D0%B0%D1%81%D0%BF%D0%BE%D0%B7%D0%BD%D0%B0%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C_DNS_%D1%81_%D0%B0%D0%B1%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%BC_openresolv">#Распознаватель DNS с абонентом openresolv</a>, не указывайте loopback-адреса, это сломает DNS.</li>
<li>Указанные серверы не отправляются на <a href="../ru/Systemd-resolved.html" title="Systemd-resolved (Русский)">systemd-resolved</a>, вместо них используются DNS-серверы соединения. Смотрите <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/issues/1366">NetworkManager issue 1366</a> и <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/33754">systemd issue 33754</a>.</li>
</ul>
</div>
<h5>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.BE.D0.B2_DNS_.D0.B4.D0.BB.D1.8F_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Настройка_серверов_DNS_для_соединения">Настройка серверов DNS для соединения</span>
</h5>
<h6>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.BE.D0.B2_DNS_.D0.B4.D0.BB.D1.8F_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F_.28GUI.29"></span><span class="mw-headline" id="Настройка_серверов_DNS_для_соединения_(GUI)">Настройка серверов DNS для соединения (GUI)</span>
</h6>
<p>Настройка зависит от типа используемого графического интерфейса. Обычно для этого нужно открыть изменение соединения через апплет и выбрать метод <i>Только автоматические адреса (DHCP)</i>, затем в поле <i>Серверы DNS</i> будет можно их ввести примерно в таком виде: <code>127.0.0.1, <i>DNS-сервер-раз</i>, ...</code>.
</p>
<h6>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.BE.D0.B2_DNS_.D0.B4.D0.BB.D1.8F_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F_.28nmcli_.2F_.D1.84.D0.B0.D0.B9.D0.BB_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F.29"></span><span class="mw-headline" id="Настройка_серверов_DNS_для_соединения_(nmcli_/_файл_соединения)">Настройка серверов DNS для соединения (nmcli / файл соединения)</span>
</h6>
<p>Чтобы настроить серверы DNS для отдельного соединения, измените параметры <code>ipv4.dns</code> и <code>ipv6.dns</code> (и связанные с ними <code>dns-search</code> и <code>dns-options</code>) в <a href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F">настройках соединения</a>.
</p>
<p>Если <code>method</code> установлен на <code>auto</code> (при использовании DHCP/RA), также установите <code>ignore-auto-dns</code> на <code>yes</code>.
</p>
<p>Чтобы использовать DNS over TLS (<a href="#systemd-resolved">требуется systemd-resolved</a>), укажите серверы DNS, используя синтаксис <code>dns=<i>ip.адрес</i>#<i>имясервера</i>;</code> и дополнительно установите параметр <code>connection.dns-over-tls</code> в значение <code>2</code>. Пример для Quad9:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/system-connections/Example Wi-Fi.nmconnection</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[connection]
...
dns-over-tls=2

[ipv4]
...
dns=9.9.9.9#dns.quad9.net;149.112.112.112#dns.quad9.net;
ignore-auto-dns=true

[ipv6]
...
dns=2620:fe::fe#dns.quad9.net;2620:fe::9#dns.quad9.net;
ignore-auto-dns=true</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Пример использует Quad9; замените его на сервер DNS, которому вы доверяете. Смотрите раздел <a href="../ru/Domain_name_resolution.html#%D0%A1%D1%82%D0%BE%D1%80%D0%BE%D0%BD%D0%BD%D0%B8%D0%B5_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D1%8B_DNS" class="mw-redirect" title="Разрешение доменных имён">Разрешение доменных имён#Сторонние службы DNS</a>.</div>
<h4>
<span id=".2Fetc.2Fresolv.conf"></span><span class="mw-headline" id="/etc/resolv.conf">/etc/resolv.conf</span>
</h4>
<p>Управление файлом <code>/etc/resolv.conf</code> настраивается параметром <code>main.rc-manager</code>. Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager">networkmanager</a></span> использует <code>symlink</code>, что отличается от значения по умолчанию <code>auto</code> в апстриме. Документация по этой настройке доступна в <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Использование openresolv позволяет NetworkManager сосуществовать с другими программами, поддерживающими <i>resolvconf</i> или, например, запускать локальное кэширование DNS и split-DNS резолвер, для которого openresolv имеет <a href="../ru/Openresolv.html#%D0%90%D0%B1%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B" title="Openresolv (Русский)">абонентов</a>. Обратите внимание, что условное перенаправление <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/issues/153">ещё не полностью поддерживается</a> при использовании NetworkManager с openresolv.</div>
<p><i>NetworkManager</i> также предоставляет хуки через так называемые диспетчерские скрипты (dispatcher scripts), которые можно использовать для обновления <code>/etc/resolv.conf</code> после изменения состояния сети. Смотрите <a href="#%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D1%8B_%D1%81_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D0%BE%D0%BC_NetworkManager">#Сетевые службы с диспетчером NetworkManager</a> и <span class="plainlinks archwiki-template-man" title="$ man 8 NetworkManager"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.8">NetworkManager(8)</a></span> для более подробной информации.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Если NetworkManager настроен на использование <a href="#dnsmasq">dnsmasq</a> или <a href="#systemd-resolved">systemd-resolved</a>, в файл <code>/etc/resolv.conf</code> будут записаны соответствующие loopback-адреса.</li>
<li>Файл <code>resolv.conf</code>, который NetworkManager записывает или мог бы записать, находится в <code>/run/NetworkManager/resolv.conf</code>.</li>
<li>Файл <code>resolv.conf</code> с назначенными серверами имен и поисковыми доменами находится в <code>/run/NetworkManager/no-stub-resolv.conf</code>.</li>
</ul>
</div>
<h5>
<span id=".D0.9D.D0.B5.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.8F.D0.B5.D0.BC.D1.8B.D0.B9_.2Fetc.2Fresolv.conf"></span><span class="mw-headline" id="Неуправляемый_/etc/resolv.conf">Неуправляемый /etc/resolv.conf</span>
</h5>
<p>Чтобы NetworkManager больше не трогал файл <code>/etc/resolv.conf</code>, пропишите опцию <code>main.dns=none</code> в файле настроек внутри <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/dns.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
dns=none</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Также можно добавить <code>main.systemd-resolved=false</code>, чтобы NetworkManager не отправлял настройки DNS в <a href="../ru/Systemd-resolved.html" title="Systemd-resolved (Русский)">systemd-resolved</a>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Вместо использования <code>main.dns=none</code> можно настроить NetworkManager на использование <a href="../en/Dnsmasq.html" class="mw-redirect" title="Dnsmasq (Русский)">dnsmasq</a> или <a href="../ru/Systemd-resolved.html" title="Systemd-resolved (Русский)">systemd-resolved</a> в качестве бэкенда DNS; смотрите раздел <a href="#%D0%9A%D1%8D%D1%88%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_DNS_%D0%B8_%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%BD%D0%BE%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5">#Кэширование DNS и условное перенаправление</a>.</div>
<p>После этого <code>/etc/resolv.conf</code> может оказаться сломанной символической ссылкой, которую нужно будет удалить. Затем просто создайте новый файл <code>/etc/resolv.conf</code>.
</p>
<h5>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_openresolv"></span><span class="mw-headline" id="Использование_openresolv">Использование openresolv</span>
</h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> NetworkManager не поддерживает интерфейс <i>resolvconf</i> от systemd-resolved (<span class="plainlinks archwiki-template-man" title="$ man 1 resolvectl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/resolvectl.1#COMPATIBILITY_WITH_RESOLVCONF(8)">resolvectl(1) § COMPATIBILITY WITH RESOLVCONF(8)</a></span>), который предоставляется пакетом <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd-resolvconf">systemd-resolvconf</a></span>.
<ul>
<li>Не указывайте <code>main.rc-manager=resolvconf</code> при использовании <a href="../ru/Systemd-resolved.html" title="Systemd-resolved (Русский)">systemd-resolved</a>, вместо этого <a href="../ru/Systemd-resolved.html#DNS" title="Systemd-resolved (Русский)">создайте символическую ссылку /etc/resolv.conf</a> или <a href="#systemd-resolved">настройте NetworkManager на явное использование systemd-resolved</a>.</li>
<li>Убедитесь, что пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd-resolvconf">systemd-resolvconf</a></span> не установлен, если systemd-resolved не используется. Пока <code>systemd-resolved.service</code> не запущен, это сломает все сетевые приложения (не только NetworkManager), которые используют resolvconf.</li>
</ul>
</div>
<p>Чтобы настроить NetworkManager на использование <a href="../ru/Openresolv.html" title="Openresolv (Русский)">openresolv</a>, установите опцию <code>main.rc-manager=resolvconf</code> в файле настроек внутри <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/rc-manager.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
rc-manager=resolvconf</pre>
<h3>
<span id=".D0.9C.D0.B5.D0.B6.D1.81.D0.B5.D1.82.D0.B5.D0.B2.D0.BE.D0.B9_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD"></span><span class="mw-headline" id="Межсетевой_экран">Межсетевой экран</span>
</h3>
<p>Вы можете <a href="../en/Firewalld.html#Using_NetworkManager_to_manage_zones" title="Firewalld">назначить зону firewalld</a> на основе вашего текущего соединения. Например, ограничительный брандмауэр на работе и менее ограничительный дома.
</p>
<p>Это также можно сделать с помощью <a href="#%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D1%8B_%D1%81_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D0%BE%D0%BC_NetworkManager">диспетчера NetworkManager</a>.
</p>
<h2>
<span id=".D0.A1.D0.B5.D1.82.D0.B5.D0.B2.D1.8B.D0.B5_.D1.81.D0.BB.D1.83.D0.B6.D0.B1.D1.8B_.D1.81_.D0.B4.D0.B8.D1.81.D0.BF.D0.B5.D1.82.D1.87.D0.B5.D1.80.D0.BE.D0.BC_NetworkManager"></span><span class="mw-headline" id="Сетевые_службы_с_диспетчером_NetworkManager">Сетевые службы с диспетчером NetworkManager</span>
</h2>
<p>Существует сетевые службы, которые желательно не запускать до тех пор, пока NetworkManager не настроит сеть. NetworkManager имеет возможность запускать службы при подключении к сети и останавливать их при отключении (например, при использовании <a href="../en/NFS.html" class="mw-redirect" title="NFS (Русский)">NFS</a>, <a href="../ru/Samba.html" title="Samba (Русский)">SMB</a> и <a href="../ru/Network_Time_Protocol_daemon.html" title="Network Time Protocol daemon (Русский)">NTPd</a>).
</p>
<p>Для активации этой возможности <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>NetworkManager-dispatcher.service</code>.
</p>
<p>После включения службы можно добавлять скрипты в каталог <code>/etc/NetworkManager/dispatcher.d</code>.
</p>
<p>Владельцем скриптов должен быть <b>root</b>, иначе диспетчер не станет их выполнять. Для дополнительной безопасности укажите также группу root:
</p>
<pre># chown root:root /etc/NetworkManager/dispatcher.d/<i>10-скрипт.sh</i>
</pre>
<p>Сделайте файл <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a>.
</p>
<p>Скрипты будут запускаться в алфавитном порядке во время подключения и в обратном алфавитном порядке во время отключения. Чтобы чётко определить, в каком порядке они будут запускаться, обычно используют цифровые символы перед именем скрипта (например, <code>10-portmap</code> или <code>30-netfs</code> (что гарантирует, что <i>portmapper</i> будет запущен до попытки монтирования NFS).
</p>
<p>Скрипты будут принимать два аргумента:
</p>
<ul>
<li>
<b>Имя интерфейса:</b> например, <code>eth0</code>
</li>
<li>
<b>Действие:</b> <i>up</i>, <i>down</i>, <i>vpn-up</i>, <i>vpn-down</i>, ... (полный список приведён в <span class="plainlinks archwiki-template-man" title="$ man 8 NetworkManager-dispatcher"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager-dispatcher.8">NetworkManager-dispatcher(8)</a></span>)</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Если вы подключаетесь к чужим или общедоступным сетям, обращайте внимание на то, какие службы вы запускаете и какие серверы должны быть доступными при подключении к ним. Запуск неправильных служб в чужой сети может оказаться дырой в безопасности.</div>
<h3>
<span id=".D0.9E.D0.B1.D1.85.D0.BE.D0.B4_.D1.82.D0.B0.D0.B9.D0.BC.D0.B0.D1.83.D1.82.D0.B0_.D0.B4.D0.B8.D1.81.D0.BF.D0.B5.D1.82.D1.87.D0.B5.D1.80.D0.B0"></span><span class="mw-headline" id="Обход_таймаута_диспетчера">Обход таймаута диспетчера</span>
</h3>
<p>Если всё работает, то этот раздел вам не нужен. Однако существует общая проблема, связанная с запуском диспетчерских скриптов, которые выполняются долго. Изначально использовался внутренний тайм-аут, равный всего трём секундам. Если вызванный скрипт не успевал завершиться, диспетчер его убивал. Позже таймаут был увеличен примерно до 20 секунд (подробнее в <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=982734">баг-трекере</a>). Если таймаут всё ещё создает проблемы, то можно обойтись без него, используя <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" class="mw-redirect" title="Drop-in файл">drop-in файл</a>, чтобы служба <code>NetworkManager-dispatcher.service</code> оставалась активной после завершения работы:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/NetworkManager-dispatcher.service.d/remain_after_exit.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
RemainAfterExit=yes</pre>
<p>Теперь запустите и включите изменённую службу <code>NetworkManager-dispatcher</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Добавление строки <code>RemainAfterExit</code> предотвратит закрытие диспетчера. К сожалению, диспетчер <b>нужно</b> закрыть, прежде чем он сможет снова запустить ваши скрипты. С этой строкой диспетчер не будет завершать работу по таймауту, но и не будет закрываться, что означает, что скрипты будут выполняться только один раз за загрузку. Поэтому не добавляйте эту строку, если таймаут не вызывает проблем.</div>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_.D0.B4.D0.B8.D1.81.D0.BF.D0.B5.D1.82.D1.87.D0.B5.D1.80.D1.81.D0.BA.D0.B8.D1.85_.D1.81.D0.BA.D1.80.D0.B8.D0.BF.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Примеры_диспетчерских_скриптов">Примеры диспетчерских скриптов</span>
</h3>
<h4>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B0.D1.8F_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.87.D0.B0.D1.81.D0.BE.D0.B2.D0.BE.D0.B3.D0.BE_.D0.BF.D0.BE.D1.8F.D1.81.D0.B0"></span><span class="mw-headline" id="Автоматическая_установка_часового_пояса">Автоматическая установка часового пояса</span>
</h4>
<p>Установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tzupdate/">tzupdate</a></span><sup><small>AUR</small></sup> и создайте такой скрипт (не забудьте сделать его <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/update-timezone.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
# Автоматическая установка часового пояса после подключения к сети
iface=$1
action=$2

if [[ $iface != lo &amp;&amp; $action == up ]]; then
    tz=$(tzupdate -s 1 -p 2&gt;/dev/null)
    if [[ -n $tz &amp;&amp; -r /usr/share/zoneinfo/$tz ]]; then
	timedatectl set-timezone $tz
    fi
fi
</pre>
<p>Если нужно, обновите условие <code>$iface != lo</code> на сравнение с нужным вам сетевым интерфейсом.
</p>
<h4>
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.83.D0.B4.D0.B0.D0.BB.D1.91.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BA.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3.D0.B0_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_sshfs"></span><span class="mw-headline" id="Монтирование_удалённого_каталога_с_помощью_sshfs">Монтирование удалённого каталога с помощью sshfs</span>
</h4>
<p>Поскольку скрипт выполняется в очень ограниченной среде, вам нужно экспортировать <code>SSH_AUTH_SOCK</code>, чтобы подключиться к SSH-агенту. Это можно сделать разными способами, подробности есть в <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1042030#p1042030">этом сообщении</a>. Пример ниже работает с <a href="../ru/GNOME/Keyring.html" title="GNOME (Русский)/Keyring (Русский)">GNOME Keyring</a> и попросит вас ввести пароль, если он ещё не разблокирован. Если NetworkManager подключается автоматически при входе в систему, есть вероятность, что <i>gnome-keyring</i> ещё не будет запущен на момент запуска скрипта, и экспорт будет неудачным (поэтому здесь может пригодиться sleep). <code>UUID</code>, который нужно использовать, можно узнать с помощью команды <code>nmcli connection status</code> или <code>nmcli connection list</code>.
</p>
<pre>#!/bin/sh
USER='пользователь'
REMOTE='пользователь@хост:/удалённый/путь'
LOCAL='/локальный/путь'

interface=$1 status=$2
if [ "$CONNECTION_UUID" = "<i>uuid</i>" ]; then
  case $status in
    up)
      # sleep 10
      SSH_AUTH_SOCK=$(find /tmp -maxdepth 1 -type s -user "$USER" -name 'ssh')
      export SSH_AUTH_SOCK
      su "$USER" -c "sshfs $REMOTE $LOCAL"
      ;;
    down)
      fusermount -u "$LOCAL"
      ;;
  esac
fi
</pre>
<h4>
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BE.D0.B1.D1.89.D0.B8.D1.85_.D1.80.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.BE.D0.B2_SMB"></span><span class="mw-headline" id="Монтирование_общих_ресурсов_SMB">Монтирование общих ресурсов SMB</span>
</h4>
<p>Некоторые общие ресурсы <a href="../ru/Samba.html" title="Samba (Русский)">SMB</a> доступны только в определённых сетях или местах (например, дома). Можно использовать диспетчер для монтирования только тех ресурсов SMB, которые доступны в вашем текущем местоположении.
</p>
<p>Следующий скрипт проверит, подключены ли мы к определённой сети, и соответственно смонтирует общие ресурсы:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/30-mount-smb.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

# Найдите UUID нужного соединения с помощью команды «nmcli connection show».
# Поддерживаются все типы соединений NetworkManager: беспроводные, VPN, проводные...
if [ "$2" = "up" ]; then
  if [ "$CONNECTION_UUID" = "uuid" ]; then
    mount /ваша/точка/монтирования &amp;
    # можно добавить другие ресурсы по необходимости
  fi
fi
</pre>
<p>Следующий скрипт размонтирует все общие ресурсы SMB перед программным отключением от определённой сети:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/pre-down.d/30-umount-smb.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

if [ "$CONNECTION_UUID" = "uuid" ]; then
  umount -a -l -t cifs
fi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Убедитесь, что этот скрипт находится именно в подкаталоге <code>pre-down.d</code>, как показано выше, иначе он будет размонтировать все общие ресурсы при любом изменении состояния соединения.</div>
<p>Следующий скрипт попытается размонтировать все общие ресурсы SMB после неожиданного отключения от определённой сети:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/40-umount-smb.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

if [ "$CONNECTION_UUID" = "uuid" ]; then
  if [ "$2" = "down" ]; then
    umount -a -l -t cifs
  fi
fi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>С версии NetworkManager 0.9.8 события <i>pre-down</i> и <i>down</i> не выполняются при выключении или перезапуске, более подробную информацию смотрите в <a rel="nofollow" class="external text" href="https://bugzilla.gnome.org/show_bug.cgi?id=701242">этом баг-репорте</a>.</li>
<li>Эти <i>umount</i>-скрипты всё ещё могут привести к зависанию приложений, обращающихся к примонтированным ресурсам.</li>
</ul>
</div>
<p>Также можно использовать скрипт, подобный описанному в разделе <a href="../en/NFS.html#Using_a_NetworkManager_dispatcher" title="NFS">NFS#Using a NetworkManager dispatcher</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/30-smb.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

# Найдите UUID нужного соединения с помощью команды «nmcli con show».
# Поддерживаются все типы соединений NetworkManager: беспроводные, VPN, проводные...
WANTED_CON_UUID="ИЗМЕНИ-МЕНЯ-9c7eff15-010a-4b1c-a786-9b4efa218ba9"

if [ "$CONNECTION_UUID" = "$WANTED_CON_UUID" ]; then

    # Параметр скрипта $1: имя сетевого интерфейса, не используется
    # Параметр скрипта $2: отправленное событие

    case "$2" in
        "up")
            mount -a -t cifs
            ;;
        "down"|"pre-down"|"vpn-pre-down")
            umount -l -a -t cifs &gt;/dev/null
            ;;
    esac
fi
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Этот скрипт игнорирует точки монтирования с опцией <code>noauto</code>; удалите эту опцию или используйте <code>auto</code>, чтобы позволить диспетчеру управлять ими.</div>
<p>Создайте символическую ссылку в каталоге <code>/etc/NetworkManager/dispatcher.d/pre-down/</code>, чтобы скрипт стал перехватывать события <code>pre-down</code>:
</p>
<pre># ln -s ../30-smb.sh /etc/NetworkManager/dispatcher.d/pre-down.d/30-smb.sh
</pre>
<h4>
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BE.D0.B1.D1.89.D0.B8.D1.85_.D1.80.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.BE.D0.B2_NFS"></span><span class="mw-headline" id="Монтирование_общих_ресурсов_NFS">Монтирование общих ресурсов NFS</span>
</h4>
<p>Смотрите <a href="../en/NFS.html#Using_a_NetworkManager_dispatcher" title="NFS">NFS#Using a NetworkManager dispatcher</a>.
</p>
<h4>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B8.D1.81.D0.BF.D0.B5.D1.82.D1.87.D0.B5.D1.80.D0.B0_.D0.B4.D0.BB.D1.8F_.D0.BF.D0.B5.D1.80.D0.B5.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B1.D0.B5.D1.81.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D0.BE.D0.B9_.D1.81.D0.B5.D1.82.D0.B8_.D0.B2_.D0.B7.D0.B0.D0.B2.D0.B8.D1.81.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B8_.D0.BE.D1.82_.D1.81.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.B8.D1.8F_.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D0.BE.D0.B3.D0.BE_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Использование_диспетчера_для_переключения_беспроводной_сети_в_зависимости_от_состояния_проводного_соединения">Использование диспетчера для переключения беспроводной сети в зависимости от состояния проводного соединения</span>
</h4>
<p>Идея заключается в том, чтобы включать Wi-Fi только при отключении сетевого кабеля (например, при отсоединении ноутбука от док-станции), и отключать Wi-Fi после того, как только сетевой кабель снова подключен.
</p>
<p>Создайте следующий диспетчерский скрипт<a rel="nofollow" class="external autonumber" href="https://superuser.com/questions/233448/disable-wlan-if-wired-cable-network-is-available">[6]</a>, заменив <code><i>ваш_Ethernet_интерфейс</i></code> на имя вашего проводного интерфейса.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Получить список интерфейсов можно с помощью <a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_nmcli">nmcli</a> (<code>nmcli d | grep ethernet</code>). Ethernet-интерфейсы начинаются с <code>en</code> или <code>eth</code>, например <code>enp0s5</code> или <code>eth0</code>.</div>
<p>Не забудьте сделать скрипт <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a>. Вы можете убедиться, что он работает, <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" title="Help:Reading (Русский)">перезапустив</a> службу <code>NetworkManager.service</code>, выполнив <code>ip a</code> и проверив, что интерфейс Wi-Fi (например, <code>wlp3s0</code>) находится в <code>state DOWN</code>. Если вы столкнулись с неожиданным поведением, проверьте <a href="../ru/Systemd/Journal.html" class="mw-redirect" title="Журнал">журнал</a> службы <code>NetworkManager-dispatcher.service</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/99-wifi-auto-toggle</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

LOG_PREFIX="WiFi Auto-Toggle"
ETHERNET_INTERFACE="<i>ваш_Ethernet_интерфейс</i>"

if [ "$1" = "$ETHERNET_INTERFACE" ]; then
    case "$2" in
        up)
            echo "$LOG_PREFIX ethernet up"
            nmcli radio wifi off
            ;;
        down)
            echo "$LOG_PREFIX ethernet down"
            nmcli radio wifi on
            ;;
    esac
elif [ "$(nmcli -g GENERAL.STATE device show $ETHERNET_INTERFACE)" = "20 (unavailable)" ]; then
    echo "$LOG_PREFIX failsafe"
    nmcli radio wifi on
fi</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> В скрипте присутствует дополнительная проверка (failsafe) для случая, когда проводной интерфейс был подключен, когда компьютер был ещё включен, а затем отключен в то время, когда компьютер был выключен. Без такой проверки могло бы получиться, что при включении компьютера Wi-Fi всё ещё был бы выключен, а при отключенном проводном интерфейсе у вас не было бы сети.</div>
<h4>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B8.D1.81.D0.BF.D0.B5.D1.82.D1.87.D0.B5.D1.80.D0.B0_.D0.B4.D0.BB.D1.8F_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BA_VPN_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.BF.D0.BE.D1.8F.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D1.81.D0.B5.D1.82.D0.B8"></span><span class="mw-headline" id="Использование_диспетчера_для_подключения_к_VPN_после_появления_сети">Использование диспетчера для подключения к VPN после появления сети</span>
</h4>
<p>В этом примере мы хотим автоматически подключаться к определённому VPN-соединению после подключения к определённой сети Wi-Fi. Первое, что нужно сделать, это создать диспетчерский скрипт, который определяет, что делать после подключения к сети.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Так как этот скрипт использует <code>iwgetid</code>, для его работы нужно установить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless_tools">wireless_tools</a></span>.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/vpn-up</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
VPN_NAME="имя VPN-соединения, определённое в NetworkManager"
ESSID="ESSID сети Wi-Fi (не имя соединения)"

interface=$1 status=$2
case $status in
  up|vpn-down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      nmcli connection up id "$VPN_NAME"
    fi
    ;;
  down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      if nmcli connection show --active | grep "$VPN_NAME"; then
        nmcli connection down id "$VPN_NAME"
      fi
    fi
    ;;
esac
</pre>
<p>Если вы хотите попытаться автоматически подключиться к VPN для всех сетей Wi-Fi, можете использовать следующее определение ESSID: <code>ESSID=$(iwgetid -r)</code>.
</p>
<p>Попытка подключения этим скриптом может закончиться неудачей, поскольку служба <code>NetworkManager-dispatcher.service</code> будет жаловаться на 'no valid VPN secrets' из-за <a rel="nofollow" class="external text" href="https://developer.gnome.org/NetworkManager/0.9/secrets-flags.html">способа хранения VPN-секретов</a>. К счастью, существуют варианты предоставить скрипту доступ к паролю VPN.
</p>
<p>1: Один из них требует редактирования файла конфигурации VPN-соединения, чтобы заставить NetworkManager хранить секреты самостоятельно, а не в связке ключей, которая будет <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=710552">недоступна для root</a>: откройте <code>/etc/NetworkManager/system-connections/<i>имя-VPN-соединения</i></code> и измените флаги <code>password-flags</code> и <code>secret-flags</code> с <code>1</code> на <code>0</code>.
</p>
<p>Если это не поможет, возможно, вам придётся создать <code>passwd-file</code> в безопасном месте с теми же правами и владельцем, что и у скрипта, со следующим содержимым:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/путь/к/passwd-file</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vpn.secrets.password:ВАШ_ПАРОЛЬ
</pre>
<p>Измените скрипт, чтобы он получал пароль из файла:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/vpn-up</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
VPN_NAME="имя VPN-соединения, определённое в NetworkManager"
ESSID="ESSID сети Wi-Fi (не имя соединения)"

interface=$1 status=$2
case $status in
  up|vpn-down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      nmcli connection up id "$VPN_NAME" passwd-file /путь/к/passwd-file
    fi
    ;;
  down)
    if iwgetid | grep -qs ":\"$ESSID\""; then
      if nmcli connection show --active | grep "$VPN_NAME"; then
        nmcli connection down id "$VPN_NAME"
      fi
    fi
    ;;
esac
</pre>
<p>2: В качестве альтернативы измените <code>password-flags</code> и задайте пароль непосредственно в файле настроек, добавив раздел <code>vpn-secrets</code>:
</p>
<pre>[vpn]
....
password-flags=0

[vpn-secrets]
password=<i>ваш_пароль</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Теперь может потребоваться повторно открыть редактор соединений NetworkManager и заново сохранить пароли/секреты VPN.</div>
<h4>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B8.D1.81.D0.BF.D0.B5.D1.82.D1.87.D0.B5.D1.80.D0.B0_.D0.B4.D0.BB.D1.8F_.D0.BE.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D1.8F_IPv6_.D0.BF.D1.80.D0.B8_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B8_VPN"></span><span class="mw-headline" id="Использование_диспетчера_для_отключения_IPv6_при_подключении_VPN">Использование диспетчера для отключения IPv6 при подключении VPN</span>
</h4>
<p>Многие <a href="../ru/Category:VPN_providers.html" title="Category:VPN providers (Русский)">коммерческие VPN-провайдеры</a> поддерживают только IPv4. Это означает, что весь трафик IPv6 идёт в обход VPN, из-за чего VPN становится фактически бесполезным. Чтобы избежать этого, можно использовать диспетчер для отключения всего трафика IPv6 на время работы VPN-соединения.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/10-vpn-ipv6</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

case "$2" in
	vpn-up)
		echo 1 &gt; /proc/sys/net/ipv6/conf/all/disable_ipv6
		;;
	vpn-down)
		echo 0 &gt; /proc/sys/net/ipv6/conf/all/disable_ipv6
		;;
esac
</pre>
<p>В качестве альтернативы можно использовать диспетчер, чтобы временно установить IPv6-режим <code>link-local</code> на устройстве, используемом для VPN-соединения. Это позволит избежать спама в журнале NetworkManager об отключенном IPv6. Этот скрипт не будет работать, если IPv6 предоставляют несколько устройств или соединений, но может быть адаптирован для итерации по нескольким устройствам. Обратите внимание, что любое изменение соединения (с помощью <span class="plainlinks archwiki-template-man" title="$ man 1 nmcli"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmcli.1">nmcli(1)</a></span> или через <a href="../ru/Desktop_environment.html" title="Desktop environment (Русский)">среду рабочего стола</a>) приведёт к повторному применению всего соединения к устройству и повторному включению IPv6 (если он включен в настройках соединения).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/10-vpn-ipv6</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

case "$2" in
	vpn-up)
		nmcli device modify "${DEVICE_IFACE}" ipv6.method link-local
		;;
	vpn-down)
		nmcli device reapply "${DEVICE_IFACE}"
		;;
esac
</pre>
<h4><span class="mw-headline" id="OpenNTPD">OpenNTPD</span></h4>
<p>Смотрите <a href="../en/OpenNTPD.html#Using_NetworkManager_dispatcher" title="OpenNTPD">OpenNTPD#Using NetworkManager dispatcher</a>.
</p>
<h4>
<span id=".D0.94.D0.B8.D0.BD.D0.B0.D0.BC.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B0.D1.8F_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.BE.D0.B2_NTP.2C_.D0.BF.D0.BE.D0.BB.D1.83.D1.87.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_DHCP.2C_.D1.81_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_systemd-timesyncd"></span><span class="mw-headline" id="Динамическая_установка_серверов_NTP,_полученных_через_DHCP,_с_использованием_systemd-timesyncd">Динамическая установка серверов NTP, полученных через DHCP, с использованием systemd-timesyncd</span>
</h4>
<p>При перемещении между различными сетями (например, локальная сеть компании, домашний Wi-Fi, иногда другие Wi-Fi) вы можете захотеть установить NTP-сервер(ы), которые использует timesyncd, на те, которые предоставляются местным DHCP-сервером. Однако сам NetworkManager не способен взаимодействовать с systemd-timesyncd для установки серверов NTP.
</p>
<p>Это можно обойти с помощью диспетчера.
</p>
<p>Создайте каталог <code>/etc/systemd/timesyncd.conf.d</code>, если его ещё нет, а затем в <code>/etc/NetworkManager/dispatcher.d</code> создайте такой скрипт:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/10-update-timesyncd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

[ -z "$CONNECTION_UUID" ] &amp;&amp; exit 0
INTERFACE="$1"
ACTION="$2"

case $ACTION in
up | dhcp4-change | dhcp6-change)
	[ -n "$DHCP4_NTP_SERVERS" ] || exit 0
	mkdir -p /etc/systemd/timesyncd.conf.d
	cat &lt;&lt;-THE_END &gt;"/etc/systemd/timesyncd.conf.d/${CONNECTION_UUID}.conf"
		[Time]
		NTP=$DHCP4_NTP_SERVERS
	THE_END
	systemctl restart systemd-timesyncd.service
	;;
down)
	rm -f "/etc/systemd/timesyncd.conf.d/${CONNECTION_UUID}.conf"
	systemctl restart systemd-timesyncd.service
	;;
esac
</pre>
<p>Каждый раз, когда NetworkManager устанавливает новое соединение (<code>ACTION=up</code>) или получает обновление для существующего (<code>ACTION=dhcp4-change</code> или <code>ACTION=dhcp6-change</code>) и предоставленные данные соединения содержат информацию о NTP-сервере (<code>DHCP4_NTP_SERVERS</code>), в каталог <code>/etc/systemd/timesyncd.conf.d</code> записывается файл настроек, специфичный для соединения, содержащий предоставленные NTP-серверы. Каждый раз, когда соединение отключается (<code>ACTION=down</code>), этот файл удаляется. После каждого изменения конфигурации systemd-timesyncd служба перезапускается, чтобы применить обновлённую конфигурацию. Файлы намеренно привязаны к конкретным соединениям, чтобы при параллельном управлении двумя или более соединениями NetworkManager различные имена NTP-серверов в конфигурации не перезаписывались, поскольку действия <code>up</code>, <code>dhcp4-change</code>, <code>dhcp6-change</code> и <code>down</code> могут происходить в произвольном порядке.
</p>
<h2>
<span id=".D0.A2.D0.B5.D1.81.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Тестирование">Тестирование</span>
</h2>
<p>Апплеты NetworkManager загружаются при входе в систему, поэтому большинству пользователей не потребуется дополнительная настройка. Если вы уже отключили предыдущие сетевые настройки и отсоединились от сети, вы можете проверить, будет ли работать NetworkManager. В первую очередь <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> службу <code>NetworkManager.service</code>.
</p>
<p>Некоторые апплеты предоставляют файл <code>.desktop</code>, чтобы апплет NetworkManager можно было загрузить через меню приложений. Если это не так, вам нужно либо найти команду для запуска, либо перелогиниться, чтобы сработал автозапуск апплета. После запуска апплет, скорее всего, начнёт опрашивать сетевые соединения на предмет автоматической настройки с помощью DHCP-сервера.
</p>
<p>Чтобы запустить апплет GNOME в несовместимых с xdg оконных менеджерах, таких как <a href="../ru/Awesome.html" title="Awesome (Русский)">awesome</a>:
</p>
<pre>nm-applet --sm-disable &amp;
</pre>
<p>Для статических IP-адресов нужно настроить NetworkManager для их понимания. Обычно это можно сделать правым щелчком мыши по апплету и выбора пункта про редактирование соединений.
</p>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Советы_и_рекомендации">Советы и рекомендации</span>
</h2>
<h3>
<span id=".D0.A8.D0.B8.D1.84.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D0.B5.D0.B9_Wi-Fi"></span><span class="mw-headline" id="Шифрование_паролей_Wi-Fi">Шифрование паролей Wi-Fi</span>
</h3>
<p>По умолчанию NetworkManager хранит пароли открытым текстом в файлах соединений в каталоге <code>/etc/NetworkManager/system-connections/</code>. Чтобы вывести сохранённые пароли, выполните следующую команду:
</p>
<pre># grep -r '^psk=' /etc/NetworkManager/system-connections/
</pre>
<p>Пароли могут прочитать root и пользователи, имеющие доступ к настройкам (например, через <i>nm-applet</i>).
</p>
<p>Лучше сохранять пароли в зашифрованном виде в связке ключей, а не открытым текстом. Недостатком использования связки ключей является то, что соединения должны быть настроены отдельно для каждого пользователя.
</p>
<p>Для работы со связкой ключей должен быть доступен агент секретов. Это может быть:
</p>
<ul>
<li>
<code>nmcli</code> с опцией <code>--ask</code>;</li>
<li>какой-нибудь графический интерфейс (смотрите раздел <a href="#%D0%A4%D1%80%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D0%B4%D1%8B">#Фронтенды</a>).</li>
</ul>
<p>Если агент недоступен, то аутентификация завершится с ошибкой <code>no secrets: No agents were available for this request.</code>
</p>
<h4>
<span id=".D0.A1_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_GNOME_Keyring"></span><span class="mw-headline" id="С_помощью_GNOME_Keyring">С помощью GNOME Keyring</span>
</h4>
<p>Демон GNOME Keyring должен быть запущен, а связка ключей должна быть разблокирована, чтобы описанные ниже действия работали.
</p>
<p>Кроме того, NetworkManager должен быть настроен так, чтобы не хранить пароль для всех пользователей. Запустите <code>nm-connection-editor</code> (входит в состав пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=network-manager-applet">network-manager-applet</a></span>), откройте редактирование нужного соединения, выберите вкладку <i>Защита Wi-Fi</i>, нажмите на значок справа в поле ввода пароля и выберите пункт <i>Запомнить пароль только для этого пользователя</i>.
</p>
<h4>
<span id=".D0.A1_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_KDE_Wallet"></span><span class="mw-headline" id="С_помощью_KDE_Wallet">С помощью KDE Wallet</span>
</h4>
<p>Используя <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-nm">plasma-nm</a></span>, нажмите на апплет сети, нажмите на значок <i>Настроить сетевые соединения</i> в правом верхнем углу, выберите нужное соединение, на вкладке <i>Основные параметры</i> снимите галочку <i>Все пользователи могут подключаться к этой сети</i>. При включенной галочке пароли будут храниться открытым текстом даже при запущенном демоне связки ключей.
</p>
<p>Если галочка ранее стояла и вы сняли её, возможно, сначала придётся воспользоваться опцией сброса, чтобы пароль исчез из файла. В качестве альтернативы сначала удалите соединение и установите его снова.
</p>
<h3>
<span id=".D0.A0.D0.B0.D0.B7.D0.B4.D0.B0.D1.87.D0.B0_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D0.BD.D0.B5.D1.82.D0.B0_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_Wi-Fi"></span><span class="mw-headline" id="Раздача_интернета_через_Wi-Fi">Раздача интернета через Wi-Fi</span>
</h3>
<p>Вы можете предоставить общий доступ к вашему интернет-соединению (например, 3G или проводному) всего в несколько кликов мышью. Обратите внимание, что <a href="../ru/Category:Firewalls.html" class="mw-redirect" title="Межсетевой экран">межсетевой экран</a> может помешать раздаче интернета.
</p>
<p>Вам понадобится карта Wi-Fi, поддерживающая режим точки доступа; смотрите раздел <a href="../ru/Software_access_point.html#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0_AP_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE%D0%BC_Wi-Fi" class="mw-redirect" title="Программная точка доступа">Программная точка доступа#Поддержка режима AP устройством Wi-Fi</a>.
</p>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span>, чтобы иметь возможность предоставить общий доступ к соединению. Обратите внимание, что NetworkManager запускает свой собственный экземпляр <i>dnsmasq</i>, независимый от <code>dnsmasq.service</code>, в качестве DHCP-сервера. Смотрите предостережения в разделе <a href="#dnsmasq">#dnsmasq</a>.
</p>
<p>Создайте общее соединение:
</p>
<ul>
<li>Откройте редактор сетевых соединений и создайте новую беспроводную сеть.</li>
<li>Заполните все необходимые настройки (выберите WPA2 или новее для защиты Wi-Fi и используйте не менее 8 символов для пароля).
<ul><li>В настройке <i>Режим</i> выберите <i>Точка доступа</i> (<a rel="nofollow" class="external text" href="https://fedoraproject.org/wiki/Features/RealHotspot">Hotspot</a>) или <i>Одноранговый</i> (<i>Ad-hoc</i>).</li></ul>
</li>
</ul>
<p>Соединение будет сохранено и останется до следующего раза, когда оно вам понадобится.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Android не поддерживает подключение к сетям Ad-hoc. Для обмена соединением с Android используйте режим инфраструктуры (то есть установите режим Wi-Fi на <i>Точка доступа</i>).</div>
<h3>
<span id=".D0.A0.D0.B0.D0.B7.D0.B4.D0.B0.D1.87.D0.B0_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D0.BD.D0.B5.D1.82.D0.B0_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_Ethernet"></span><span class="mw-headline" id="Раздача_интернета_через_Ethernet">Раздача интернета через Ethernet</span>
</h3>
<p>Ситуация: ваше устройство подключено к Интернету через Wi-Fi, и вы хотите предоставить доступ к Интернету другим устройствам через Ethernet.
</p>
<p>Требования:
</p>
<ul>
<li>
<a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакеты <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nm-connection-editor">nm-connection-editor</a></span>, чтобы иметь возможность предоставить общий доступ к соединению. Обратите внимание, что NetworkManager запускает свой собственный экземпляр <i>dnsmasq</i>, независимый от <code>dnsmasq.service</code>, в качестве DHCP-сервера. Смотрите предостережения в разделе <a href="#dnsmasq">#dnsmasq</a>.</li>
<li>Ваше устройство, подключенное к Интернету, и другие устройства соединены друг с другом через подходящий кабель Ethernet (обычно это означает перекрёстный кабель или коммутатор между ними).</li>
<li>Общий доступ в интернет не заблокирован <a href="../ru/Category:Firewalls.html" class="mw-redirect" title="Межсетевой экран">межсетевым экраном</a>.</li>
</ul>
<p>Шаги:
</p>
<ul>
<li>Запустите <code>nm-connection-editor</code>.</li>
<li>Добавьте новое Ethernet-соединение.</li>
<li>Задайте какое-нибудь информативное имя, например «Раздача интернета».</li>
<li>Перейдите на вкладку <i>Параметры IPv4</i>.</li>
<li>Измените <i>Метод</i> на <i>Общий с другими компьютерами</i>.</li>
<li>Сохраните.</li>
</ul>
<p>Теперь в списке проводных соединений должна появиться «Раздача интернета».
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.BE.D1.81.D0.BF.D0.BE.D1.81.D0.BE.D0.B1.D0.BD.D0.BE.D1.81.D1.82.D0.B8_.D1.81.D0.B5.D1.82.D0.B8_.D0.B2.D0.BD.D1.83.D1.82.D1.80.D0.B8_.D0.B7.D0.B0.D0.B4.D0.B0.D1.87.D0.B8_cron_.D0.B8.D0.BB.D0.B8_.D1.81.D0.BA.D1.80.D0.B8.D0.BF.D1.82.D0.B0"></span><span class="mw-headline" id="Проверка_работоспособности_сети_внутри_задачи_cron_или_скрипта">Проверка работоспособности сети внутри задачи cron или скрипта</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <i>nm-tool</i> был удалён из NetworkManager. <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/commit/bb8c75bd536d4f8fb80a4366025a279078f0ec81">[7]</a>
</div>
<p>Некоторым задачам <i>cron</i> может понадобиться работающая сеть. Чтобы не выполнять их при отсутствии сети, добавьте проверку, запрашивающую статус сети у NetworkManager. Это может быть полезно для ноутбуков, которые не всегда подключены к сети.
</p>
<pre>if [ $(nm-tool|grep State|cut -f2 -d' ') == "connected" ]; then
    # Добавьте сюда команды для выполнения при работающей сети
else
    # Добавьте сюда команды для выполнения при отсутствующей сети
    # Этот блок и строка else опциональны
fi
</pre>
<p>Пример использования — скрипт <code>cron.hourly</code>, который запускает <i>fpupdate</i> для обновления сигнатур вирусного сканера F-Prot. Другой способ, который может быть полезен, с небольшими изменениями — различать сети, используя различные части вывода <i>nm-tool</i>; например, поскольку активная беспроводная сеть обозначается звёздочкой, вы можете через grep получить строку с именем нужной сети, а через второй grep проверить наличие звёздочки.
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA_.D1.81.D0.B5.D1.82.D0.B8_.D1.81_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D0.B5.D0.BC_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B"></span><span class="mw-headline" id="Подключение_к_сети_с_паролем_при_загрузке_системы">Подключение к сети с паролем при загрузке системы</span>
</h3>
<p>По умолчанию NetworkManager не будет автоматически подключаться к сетям, требующим пароль, при загрузке системы. Это происходит потому, что по умолчанию он закрепляет такие соединения за тем пользователем, который их создал, подключаясь только после входа пользователя в систему. Чтобы изменить это, выполните следующие шаги:
</p>
<ol>
<li>Откройте редактирование сетевых соединений (например, через значок <code>nm-applet</code> в трее).</li>
<li>Выберите Wi-Fi соединение, к которому вы хотите автоматически подключаться, и откройте его редактирование.</li>
<li>На вкладке <i>Основное</i> поставьте галочки <i>Подключаться автоматически</i> и <i>Все пользователи могут подключаться к этой сети</i>.</li>
<li>На вкладке <i>Защита Wi-Fi</i> выберите пункт <i>Запомнить пароль для всех пользователей</i> (в <i>nm-connection-editor</i> он спрятан в небольшом значке справа от пароля).</li>
</ol>
<p>Перелогиньтесь для завершения.
</p>
<h3>
<span id="OpenConnect_.D1.81_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D0.B5.D0.BC_.D0.B2_KWallet"></span><span class="mw-headline" id="OpenConnect_с_паролем_в_KWallet">OpenConnect с паролем в KWallet</span>
</h3>
<p>Хотя вы можете ввести оба значения во время подключения, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-nm">plasma-nm</a></span> 0.9.3.2-1 и новее способны получить имя пользователя и пароль OpenConnect непосредственно из <a href="../en/KDE_Wallet.html" class="mw-redirect" title="KWallet">KWallet</a>.
</p>
<p>Откройте <i>Управление бумажниками</i> (<i>KWalletManager</i>) и найдите ваше VPN-соединение OpenConnect в разделе «Network Management|Maps». Нажмите <i>Показать содержимое</i> и введите свои учётные данные в ключе «VpnSecrets» в этой форме (замените <i>пользователь</i> и <i>пароль</i> соответствующим образом):
</p>
<pre>form:main:username%SEP%<i>пользователь</i>%SEP%form:main:password%SEP%<i>пароль</i>
</pre>
<p>При следующем подключении имя пользователя и пароль должны появиться в диалоговом окне «VPN secrets».
</p>
<h3>
<span id=".D0.98.D0.B3.D0.BD.D0.BE.D1.80.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BE.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D1.91.D0.BD.D0.BD.D1.8B.D1.85_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2"></span><span class="mw-headline" id="Игнорирование_определённых_устройств">Игнорирование определённых устройств</span>
</h3>
<p>Иногда бывает нужно, чтобы NetworkManager игнорировал определённые устройства и не пытался настроить для них адреса и маршруты. Чтобы игнорировать устройства по MAC-адресу или имени интерфейса, пропишите их в файле <code>/etc/NetworkManager/conf.d/unmanaged.conf</code>:
</p>
<pre>[keyfile]
unmanaged-devices=mac:00:22:68:1c:59:b1;mac:00:1E:65:30:D1:C4;interface-name:eth0
</pre>
<p>После редактирования файла выполните <code>nmcli general reload</code> от имени root. После это вы сможете вручную настроить указанные интерфейсы, и NetworkManager не будет изменять ваши настройки.
</p>
<h3>
<span id=".D0.A0.D0.B0.D0.BD.D0.B4.D0.BE.D0.BC.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D1.8F_MAC-.D0.B0.D0.B4.D1.80.D0.B5.D1.81.D0.B0"></span><span class="mw-headline" id="Рандомизация_MAC-адреса">Рандомизация MAC-адреса</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Иногда бывает нужно отключить рандомизацию MAC-адреса для более стабильного соединения <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=220101">[8]</a> или для работы в сетях, которые ограничивают доступ к сети по MAC-адресам.</div>
<p>Рандомизация MAC-адреса скрывает от сети ваш реальный MAC-адрес, что можно использовать для повышения конфиденциальности.
</p>
<p>NetworkManager поддерживает два типа рандомизации: для сканирования и для соединений. Оба режима могут быть настроены в файле <code>/etc/NetworkManager/NetworkManager.conf</code> или путём создания отдельного файла настроек в <code>/etc/NetworkManager/conf.d/</code>, что предпочтительнее, поскольку NetworkManager может перезаписывать вышеупомянутый файл настроек.
</p>
<p>Рандомизация при сканировании Wi-Fi включена по умолчанию, но её можно отключить добавлением следующих строк в <code>/etc/NetworkManager/NetworkManager.conf</code> или в отдельный файл настроек в <code>/etc/NetworkManager/conf.d</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/wifi_rand_mac.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[device]
wifi.scan-rand-mac-address=no</pre>
<p>Рандомизация MAC-адреса для соединений может быть установлена в разные режимы для беспроводных и проводных интерфейсов.
</p>
<p>В плане рандомизации MAC наиболее важными режимами являются <code>stable</code> и <code>random</code>. Режим <code>stable</code> генерирует случайный MAC-адрес, когда вы подключаетесь к новой сети, и связывает их друг с другом навсегда. Это означает, что вы будете использовать один и тот же MAC-адрес при каждом подключении к этой сети. Режим <code>random</code> генерирует новый MAC-адрес каждый раз, когда вы подключаетесь к новой или ранее известной сети. Настроить рандомизацию можно добавлением настроек в <code>/etc/NetworkManager/conf.d</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/wifi_rand_mac.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[device-mac-randomization]
# "yes" уже используется по умолчанию при сканировании
wifi.scan-rand-mac-address=yes

[connection-mac-randomization]
# Генерирование нового случайного MAC при каждом подключении к проводному соединению
ethernet.cloned-mac-address=random
# Генерирование случайного MAC для каждого Wi-Fi при первом подключении и связывание их вместе
wifi.cloned-mac-address=stable</pre>
<p>Чтобы настроить рандомизацию MAC-адреса для конкретного соединения (например, если сети не нравятся случайные MAC-адреса), <a href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F">измените соединение</a>, установив <code>802-11-wireless.cloned-mac-address</code> в один из режимов (например, <code>stable</code> или <code>random</code>).
</p>
<p>Более подробная информация о режимах есть в <a rel="nofollow" class="external text" href="https://blogs.gnome.org/thaller/2016/08/26/mac-address-spoofing-in-networkmanager-1-4-0/">блоге GNOME</a>.
</p>
<h3>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_IPv6_Privacy_Extensions"></span><span class="mw-headline" id="Включение_IPv6_Privacy_Extensions">Включение IPv6 Privacy Extensions</span>
</h3>
<p>Смотрите <a href="../ru/IPv6.html#NetworkManager" title="IPv6 (Русский)">IPv6 (Русский)#NetworkManager</a>.
</p>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.83.D0.BD.D0.B8.D0.BA.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B3.D0.BE_DUID_.D0.B4.D0.BB.D1.8F_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Настройка_уникального_DUID_для_соединения">Настройка уникального DUID для соединения</span>
</h3>
<p>Уникальный идентификатор DHCPv6 (DHCPv6 Unique Identifier, DUID) — это значение, используемое клиентом DHCPv6 для идентификации себя на серверах DHCPv6. NetworkManager поддерживает 3 типа DUID:
</p>
<ul>
<li>DUID-UUID (<a href="https://tools.ietf.org/html/rfc6355" class="extiw" title="rfc:6355">RFC 6355</a>): генерируется из UUID.</li>
<li>DUID-LL (<a href="https://tools.ietf.org/html/rfc3315" class="extiw" title="rfc:3315">RFC 3315</a>): генерируется из адреса канального уровня (MAC-адреса).</li>
<li>DUID-LLT (<a href="https://tools.ietf.org/html/rfc3315" class="extiw" title="rfc:3315">RFC 3315</a>): генерируется из адреса канального уровня и метки времени.</li>
</ul>
<p>Если используется встроенный DHCP-клиент NetworkManager (по умолчанию), он идентифицирует себя с помощью глобального и постоянного DUID-UUID, сгенерированного из machine-id (<code>/etc/machine-id</code>). Это означает, что во всех соединениях используется один и тот же UUID, что может оказаться проблемой конфиденциальности.
</p>
<p>К счастью, NetworkManager позволяет настроить уникальные DUID для каждого соединения, получаемые из stable-id соединения и уникального ключа для каждого хоста. Вы можете включить эту функцию, добавив следующую конфигурацию в <code>/etc/NetworkManager/conf.d/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/duid.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[connection]
ipv6.dhcp-duid=stable-uuid</pre>
<p>Также поддерживаются значения <code>stable-ll</code> и <code>stable-llt</code>. Дополнительная информация есть в описании <code>dhcp-duid</code> в <span class="plainlinks archwiki-template-man" title="$ man 5 nm-settings"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nm-settings.5#ipv6_setting">nm-settings(5) § ipv6 setting</a></span>.
</p>
<h3>
<span id=".D0.A0.D0.B0.D0.B1.D0.BE.D1.82.D0.B0_.D1.81_.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D1.8B.D0.BC.D0.B8_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F.D0.BC.D0.B8"></span><span class="mw-headline" id="Работа_с_проводными_соединениями">Работа с проводными соединениями</span>
</h3>
<p>По умолчанию NetworkManager генерирует профиль соединения для каждого найденного Ethernet-адаптера. В момент создания соединения он не знает, будут ли доступны ещё какие-нибудь Ethernet-адаптеры, поэтому он называет первое проводное соединение «Проводное соединение 1». Вы можете избежать генерации этого соединения, настроив параметр <code>no-auto-default</code> (смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span>) или просто удалив его. Тогда NetworkManager запомнит, что генерировать соединение для этого интерфейса не нужно.
</p>
<p>Вы также можете отредактировать соединение (и сохранить его на диске) или удалить его. NetworkManager не будет повторно генерировать соединение. Затем вы можете изменить имя на любое другое. Для этой задачи можно использовать что-то вроде <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nm-connection-editor">nm-connection-editor</a></span>.
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_iwd_.D0.B2_.D0.BA.D0.B0.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.B5_.D0.B1.D1.8D.D0.BA.D0.B5.D0.BD.D0.B4.D0.B0_Wi-Fi"></span><span class="mw-headline" id="Использование_iwd_в_качестве_бэкенда_Wi-Fi">Использование iwd в качестве бэкенда Wi-Fi</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Не включайте <code>iwd.service</code> и не настраивайте <a href="../ru/Iwd.html" title="Iwd (Русский)">iwd</a> вручную. NetworkManager сам всё запустит и настроит.</li>
<li>Перед переходом на <i>iwd</i> ознакомьтесь со <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/issues?scope=all&amp;utf8=%E2%9C%93&amp;state=opened&amp;search=iwd">списком известных проблем</a>.</li>
</ul>
</div>
<p>Чтобы включить <a rel="nofollow" class="external text" href="https://archive.kernel.org/oldwiki/iwd.wiki.kernel.org/networkmanager.html">экспериментальный бэкенд iwd</a>, сперва <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iwd">iwd</a></span> и создайте такой файл настроек:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/wifi_backend.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[device]
wifi.backend=iwd</pre>
<p>Другой вариант — установить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/networkmanager-iwd/">networkmanager-iwd</a></span><sup><small>AUR</small></sup>. Это модифицированный пакет, который собирает <i>NetworkManager</i> только с поддержкой <i>iwd</i>. Главное отличие в том, что это позволяет удалить вам <i>wpa_supplicant</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Вам может понадобиться <a rel="nofollow" class="external text" href="https://archive.kernel.org/oldwiki/iwd.wiki.kernel.org/networkmanager.html#converting_network_profiles">преобразовать существующие сетевые профили NetworkManager</a> после перехода на <i>iwd</i>.</div>
<h3>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0.B2_.D1.81.D0.B5.D1.82.D0.B5.D0.B2.D0.BE.D0.BC_.D0.BF.D1.80.D0.BE.D1.81.D1.82.D1.80.D0.B0.D0.BD.D1.81.D1.82.D0.B2.D0.B5_.D0.B8.D0.BC.D1.91.D0.BD"></span><span class="mw-headline" id="Запуск_в_сетевом_пространстве_имён">Запуск в сетевом пространстве имён</span>
</h3>
<p>Если вы хотите запустить NetworkManager в сетевом пространстве имён (например, для управления определённым устройством, которое должно использоваться выбранными приложениями), выключите устройство, прежде чем перемещать его в пространство имён:
</p>
<pre>$ ip link set dev <i>УСТРОЙСТВО</i> down
$ ip link set dev <i>УСТРОЙСТВО</i> netns <i>ПРОСТРАНСТВО_ИМЁН</i>
$ ip netns exec <i>ПРОСТРАНСТВО_ИМЁН</i> NetworkManager
...
$ ip netns exec <i>ПРОСТРАНСТВО_ИМЁН</i> killall NetworkManager
</pre>
<p>В противном случае NetworkManager впоследствии не сможет установить соединение с ошибкой <code>device is strictly unmanaged</code>.
</p>
<h3>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B5_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA_VPN"></span><span class="mw-headline" id="Автоматическое_подключение_к_VPN">Автоматическое подключение к VPN</span>
</h3>
<p>NetworkManager можно настроить на автоматическое подключение к VPN при подключении к интернету или для отдельной сети. Само VPN-соединение можно добавить через фронтенд NetworkManager в GNOME, но для автоматического подключения нужно использовать <code>nmcli</code>. В других фронтендах может не быть этого ограничения.
</p>
<p>Сперва убедитесь, что VPN-соединение доступно всем пользователям. В GNOME для этого нужно установить флажок на вкладке <code>details</code>. На вкладке <code>Identity</code> в поле пароля нажмите на значок справа и выберите значение <code>Store the password for all users</code>.
</p>
<p>Затем найдите UUID нужного VPN-соединения и добавьте его в <code>connection.secondaries</code> интернет-соединения:
</p>
<pre># UUID=$(nmcli --get-values connection.uuid connection show <i>название-VPN-соединения</i>)
# nmcli connection modify <i>название-интернет-соединения</i> connection.secondaries "$UUID"
</pre>
<p>Теперь после перезапуска NetworkManager и переподключения к настроенному интернет-соединению вы должны автоматически подключиться к VPN.
</p>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3>
<span id=".D0.9D.D0.B5_.D0.B7.D0.B0.D0.BF.D1.80.D0.B0.D1.88.D0.B8.D0.B2.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D1.8C_Wi-Fi"></span><span class="mw-headline" id="Не_запрашивается_пароль_Wi-Fi">Не запрашивается пароль Wi-Fi</span>
</h3>
<p>Если при попытке подключиться к защищённой сети Wi-Fi не отображается запрос на ввод пароля и соединение не устанавливается, это может быть связано с тем, что не установлена программа для управления паролями. Простым решением является установка <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-keyring">gnome-keyring</a></span>. Если вы хотите, чтобы пароли хранились в зашифрованном виде, настройте <i>gnome-keyring-daemon</i>, как описано в статье <a href="../ru/GNOME/Keyring.html" title="GNOME (Русский)/Keyring (Русский)">GNOME (Русский)/Keyring (Русский)</a>.
</p>
<h3>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D0.B5.D1.82.D1.8C.D1.8E_.D0.BE.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.BE"></span><span class="mw-headline" id="Управление_сетью_отключено">Управление сетью отключено</span>
</h3>
<p>Если после завершения работы NetworkManager файл pid (state) оказался не удалён, вы увидите сообщение <code>Network management disabled</code>. В этом случае удалите файл вручную:
</p>
<pre># rm /var/lib/NetworkManager/NetworkManager.state
</pre>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D0.B2.D0.BD.D1.83.D1.82.D1.80.D0.B5.D0.BD.D0.BD.D0.B8.D0.BC_.D0.BA.D0.BB.D0.B8.D0.B5.D0.BD.D1.82.D0.BE.D0.BC_DHCP"></span><span class="mw-headline" id="Проблемы_с_внутренним_клиентом_DHCP">Проблемы с внутренним клиентом DHCP</span>
</h3>
<p>Если у вас возникли проблемы с получением IP-адреса при использовании встроенного клиента DHCP, попробуйте использовать другой клиент; смотрите раздел <a href="#%D0%9A%D0%BB%D0%B8%D0%B5%D0%BD%D1%82_DHCP">#Клиент DHCP</a>. Это обходное решение может решить проблемы в больших беспроводных сетях, таких как eduroam.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_DHCP_.D0.BF.D1.80.D0.B8_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B8_dhclient"></span><span class="mw-headline" id="Проблемы_с_DHCP_при_использовании_dhclient">Проблемы с DHCP при использовании dhclient</span>
</h3>
<p>Если у вас возникли проблемы с получением IP-адреса через DHCP, попробуйте добавить в файл <code>/etc/dhclient.conf</code>:
</p>
<pre> interface "eth0" {
   send dhcp-client-identifier 01:<i>aa:bb:cc:dd:ee:ff</i>;
 }
</pre>
<p>Где <code><i>aa:bb:cc:dd:ee:ff</i></code> — это MAC-адрес вашей сетевой карты. Узнать его можно с помощью команды <code>ip link show <i>интерфейс</i></code> (пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iproute2">iproute2</a></span>).
</p>
<h3>
<span id="3G-.D0.BC.D0.BE.D0.B4.D0.B5.D0.BC_.D0.BD.D0.B5_.D0.BE.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D1.8F.D0.B5.D1.82.D1.81.D1.8F"></span><span class="mw-headline" id="3G-модем_не_определяется">3G-модем не определяется</span>
</h3>
<p>Смотрите <a href="../en/Mobile_broadband_modem.html#NetworkManager" title="Mobile broadband modem">Mobile broadband modem#NetworkManager</a>.
</p>
<h3>
<span id=".D0.92.D1.8B.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B1.D0.B5.D1.81.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D0.BE.D0.B9_.D1.81.D0.B5.D1.82.D0.B8_.D0.BD.D0.B0_.D0.BD.D0.BE.D1.83.D1.82.D0.B1.D1.83.D0.BA.D0.B0.D1.85"></span><span class="mw-headline" id="Выключение_беспроводной_сети_на_ноутбуках">Выключение беспроводной сети на ноутбуках</span>
</h3>
<p>Иногда NetworkManager не работает, когда вы отключаете свой Wi-Fi адаптер с помощью переключателя на ноутбуке и после этого пытаетесь включить его снова. Часто это проблема с <i>rfkill</i>. Чтобы проверить, сообщает ли драйвер о состоянии беспроводного адаптера в <i>rfkill</i>, используйте:
</p>
<pre>$ watch -n1 rfkill list all
</pre>
<p>Если идентификатор остаётся заблокированным после включения адаптера, можно попробовать вручную разблокировать его с помощью (где X — номер идентификатора, указанный в выводе этой команды):
</p>
<pre># rfkill event unblock X
</pre>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D1.81.D1.82.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_IP-.D0.B0.D0.B4.D1.80.D0.B5.D1.81.D0.B0_.D1.81.D0.B1.D1.80.D0.B0.D1.81.D1.8B.D0.B2.D0.B0.D1.8E.D1.82.D1.81.D1.8F_.D0.BD.D0.B0_DHCP"></span><span class="mw-headline" id="Настройки_статического_IP-адреса_сбрасываются_на_DHCP">Настройки статического IP-адреса сбрасываются на DHCP</span>
</h3>
<p>Из-за бага при изменении стандартных подключений на статический IP-адрес <code>nm-applet</code> может неправильно сохранить настройки и сбросить их на автоматический DHCP.
</p>
<p>Чтобы решить эту проблему, нужно отредактировать подключение по умолчанию (например, «Auto eth0») в <code>nm-applet</code>, изменить имя подключения (например, «Мой eth0»), снять флажок «Все пользователи могут подключаться к этой сети», изменить настройки статического IP-адреса по своему усмотрению и сохранить их.
</p>
<p>Далее нужно сделать так, чтобы соединение по умолчанию не подключалось автоматически. Для этого запустите <code>nm-connection-editor</code> (от имени обычного пользователя, <b>не</b> от root). Отредактируйте подключение по умолчанию (например, «Auto eth0»), снимите флажок «Подключаться автоматически» и сохраните изменения.
</p>
<h3>
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D1.80.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D1.82.D1.8C_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BE.D1.82_.D0.B8.D0.BC.D0.B5.D0.BD.D0.B8_.D0.BE.D0.B1.D1.8B.D1.87.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span><span class="mw-headline" id="Не_удаётся_редактировать_соединения_от_имени_обычного_пользователя">Не удаётся редактировать соединения от имени обычного пользователя</span>
</h3>
<p>Смотрите раздел <a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%80%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B9_PolicyKit">#Настройка разрешений PolicyKit</a>.
</p>
<h3>
<span id=".D0.97.D0.B0.D0.B1.D1.8B.D1.82.D1.8C_.D1.81.D0.BA.D1.80.D1.8B.D1.82.D1.83.D1.8E_.D0.B1.D0.B5.D1.81.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D1.83.D1.8E_.D1.81.D0.B5.D1.82.D1.8C"></span><span class="mw-headline" id="Забыть_скрытую_беспроводную_сеть">Забыть скрытую беспроводную сеть</span>
</h3>
<p>Поскольку скрытые сети не отображаются в списке выбора беспроводной сети, их нельзя забыть (удалить) через графический интерфейс. Можно вручную удалить соответствующие файлы:
</p>
<pre># rm /etc/NetworkManager/system-connections/<i>SSID</i>
</pre>
<p>Это также работает с любыми другими соединениями.
</p>
<h3>
<span id="VPN_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82_.D0.B2_GNOME"></span><span class="mw-headline" id="VPN_не_работает_в_GNOME">VPN не работает в GNOME</span>
</h3>
<p>При настройке соединений OpenConnect или vpnc в NetworkManager при использовании GNOME иногда не появляется диалоговое окно, а в <code>/var/log/errors.log</code> появляется следующая ошибка:
</p>
<pre>localhost NetworkManager[399]: &lt;error&gt; [1361719690.10506] [nm-vpn-connection.c:1405] get_secrets_cb(): Failed to request VPN secrets #3: (6) No agents were available for this request.
</pre>
<p>Это происходит из-за того, что апплет GNOME NetworkManager ожидает, что диалоговые скрипты будут находиться в <code>/usr/lib/gnome-shell</code>, в то время как пакеты NetworkManager помещают их в <code>/usr/lib/networkmanager</code>. В качестве «временного» исправления (эта ошибка существует уже некоторое время) сделайте следующие символические ссылки:
</p>
<ul>
<li>Для OpenConnect: <code>ln -s /usr/lib/networkmanager/nm-openconnect-auth-dialog /usr/lib/gnome-shell/</code>
</li>
<li>Для VPNC (то есть Cisco VPN): <code>ln -s /usr/lib/networkmanager/nm-vpnc-auth-dialog /usr/lib/gnome-shell/</code>
</li>
</ul>
<p>Это может потребоваться и для других VPN-плагинов NetworkManager.
</p>
<h3>
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B8.D1.82.D1.8C.D1.81.D1.8F_.D0.BA_.D0.B2.D0.B8.D0.B4.D0.B8.D0.BC.D1.8B.D0.BC_.D0.B5.D0.B2.D1.80.D0.BE.D0.BF.D0.B5.D0.B9.D1.81.D0.BA.D0.B8.D0.BC_.D0.B1.D0.B5.D1.81.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D1.8B.D0.BC_.D1.81.D0.B5.D1.82.D1.8F.D0.BC"></span><span class="mw-headline" id="Не_удаётся_подключиться_к_видимым_европейским_беспроводным_сетям">Не удаётся подключиться к видимым европейским беспроводным сетям</span>
</h3>
<p>Чипы беспроводной связи поставляются с <a href="../ru/Network_configuration/Wireless.html#%D0%A1%D0%BE%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B8%D0%B5_%D1%80%D0%B5%D0%B3%D0%BB%D0%B0%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D0%BC" title="Network configuration (Русский)/Wireless (Русский)">регулятивным доменом</a> по умолчанию. Если ваша точка доступа работает за пределами ограничений этого домена, вы не сможете подключиться к сети. Исправить это просто:
</p>
<ul>
<li>
<a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireless-regdb">wireless-regdb</a></span>;</li>
<li>раскомментируйте строку с правильным кодом страны в файле <code>/etc/conf.d/wireless-regdom</code>;</li>
<li>перезагрузитесь — обновлённые настройки прочитаются при следующей загрузке системы.</li>
</ul>
<h3>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B5_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA_VPN_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82"></span><span class="mw-headline" id="Автоматическое_подключение_к_VPN_при_загрузке_системы_не_работает">Автоматическое подключение к VPN при загрузке системы не работает</span>
</h3>
<p>Проблема возникает, когда система (то есть NetworkManager, запущенный от имени root) пытается установить VPN-соединение, но пароль недоступен, поскольку находится в хранилище паролей конкретного пользователя.
</p>
<p>Решением является хранение пароля от VPN в открытом виде, как описано в шаге 2 раздела <a href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B8%D1%81%D0%BF%D0%B5%D1%82%D1%87%D0%B5%D1%80%D0%B0_%D0%B4%D0%BB%D1%8F_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BA_VPN_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BF%D0%BE%D1%8F%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%B5%D1%82%D0%B8">#Использование диспетчера для подключения к VPN после появления сети</a>.
</p>
<p>Использовать диспетчер, как описано в шаге 1, не нужно, если вы включили опцию «Автоматически подключаться к VPN» в графическом интерфейсе <code>nm-applet</code>.
</p>
<h3>
<span id=".D0.97.D0.B0.D0.BC.D0.B5.D0.B4.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_.D0.B8.D0.B7-.D0.B7.D0.B0_.D0.B6.D1.83.D1.80.D0.BD.D0.B0.D0.BB.D0.B0_systemd"></span><span class="mw-headline" id="Замедление_загрузки_системы_из-за_журнала_systemd">Замедление загрузки системы из-за журнала systemd</span>
</h3>
<p>Некоторые пользователи замечали, что большой размер <code>/var/log/journal</code> может повлиять на скорость загрузки системы при использовании NetworkManager; подробнее в разделе <a href="../ru/Systemd.html#%D0%92%D1%80%D0%B5%D0%BC%D1%8F_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B_%D1%83%D0%B2%D0%B5%D0%BB%D0%B8%D1%87%D0%B8%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D1%81_%D1%82%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC_%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%B8" title="Systemd (Русский)">systemd (Русский)#Время загрузки системы увеличивается с течением времени</a>.
</p>
<h3>
<span id=".D0.9F.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D1.8B.D0.B5_.D0.BE.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B1.D0.B5.D1.81.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D0.BE.D0.B9_.D1.81.D0.B5.D1.82.D0.B8.2C_.D0.B7.D0.B0.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B8_.D0.B8_.D0.BF.D0.BE.D1.82.D0.B5.D1.80.D1.8F_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Постоянные_отключения_беспроводной_сети,_задержки_и_потеря_пакетов">Постоянные отключения беспроводной сети, задержки и потеря пакетов</span>
</h3>
<p>NetworkManager выполняет сканирование каждые 2 минуты.
</p>
<p>Некоторые драйверы Wi-Fi имеют проблемы при сканировании при наличии установленного подключения. Среди симптомов — отключение/переподключение VPN и потеря пакетов, веб-страницы не загружаются, а затем начинают загружаться без проблем.
</p>
<p>Запуск <code>journalctl -f</code> от имени root продемонстрирует, что это происходит: в журнале с регулярными интервалами будут появляться примерно такие сообщения:
</p>
<pre>NetworkManager[410]: &lt;info&gt;  (wlp3s0): roamed from BSSID 00:14:48:11:20:CF (my-wifi-name) to (none) ((none))
</pre>
<p>Если роуминг беспроводных сетей не важен, периодическое сканирование можно отключить, заблокировав BSSID точки доступа в профиле подключения Wi-Fi.
</p>
<h3>
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D0.B2.D0.BA.D0.BB.D1.8E.D1.87.D0.B8.D1.82.D1.8C_Wi-Fi_.D0.BD.D0.B0_.D0.BD.D0.BE.D1.83.D1.82.D0.B1.D1.83.D0.BA.D0.B5_Lenovo"></span><span class="mw-headline" id="Не_удаётся_включить_Wi-Fi_на_ноутбуке_Lenovo">Не удаётся включить Wi-Fi на ноутбуке Lenovo</span>
</h3>
<p>Существует проблема с модулем <code>ideapad_laptop</code> на некоторых моделях Lenovo, связанная с тем, что драйвер Wi-Fi неверно сообщает о наличии программной блокировки. Картой по-прежнему можно управлять с помощью <code>netctl</code>, но менеджеры вроде NetworkManager ломаются. Вы можете убедиться, что проблема заключается именно в этом, проверив вывод <code>rfkill list</code> после переключения аппаратного переключателя и убедившись, что программная блокировка сохраняется.
</p>
<p><a href="../ru/Kernel_module.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F%D0%BC%D0%B8_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E" title="Kernel module (Русский)">Выгрузка</a> модуля <code>ideapad_laptop</code> может помочь (осторожно, это также может отключить клавиатуру и тачпад ноутбука).
</p>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BE.D1.82.D0.BF.D1.80.D0.B0.D0.B2.D0.BA.D0.B8_.D0.B8.D0.BC.D0.B5.D0.BD.D0.B8_.D1.85.D0.BE.D1.81.D1.82.D0.B0"></span><span class="mw-headline" id="Отключение_отправки_имени_хоста">Отключение отправки имени хоста</span>
</h3>
<p>По умолчанию NetworkManager отправляет имя хоста на DHCP-сервер. Отключить это можно только для отдельных соединений, а не глобально (<a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/issues/584">Issue #584</a>).
</p>
<p>Чтобы отключить отправку имени хоста на DHCP-сервер для конкретного соединения, добавьте следующее в файл соединения:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/system-connections/<i>файл_нужного_соединения</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[ipv4]
dhcp-send-hostname=false
...
[ipv6]
dhcp-send-hostname=false
...</pre>
<h3>
<span id="nm-applet_.D0.BF.D1.80.D0.BE.D0.BF.D0.B0.D0.B4.D0.B0.D0.B5.D1.82_.D0.B2_i3"></span><span class="mw-headline" id="nm-applet_пропадает_в_i3">nm-applet пропадает в i3</span>
</h3>
<p>Если вы используете <code>xfce4-notifyd.service</code>, <a href="../ru/Systemd.html#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Отредактируйте">отредактируйте</a> юнит, добавив следующее:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/user/xfce4-notifyd.service.d/display_env.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Environment="DISPLAY=:0.0"</pre>
<p>Затем выполните <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" title="Help:Reading (Русский)">daemon-reload</a>, <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезагрузите">перезагрузите</a> службу <code>xfce4-notifyd.service</code> и перезайдите в i3.
</p>
<h3><span class="mw-headline" id="Unit_dbus-org.freedesktop.resolve1.service_not_found">Unit dbus-org.freedesktop.resolve1.service not found</span></h3>
<p>Если <code>systemd-resolved.service</code> не запущен, NetworkManager попытается запустить его через D-Bus, но не сможет:
</p>
<pre>dbus-daemon[991]: [system] Activating via systemd: service name='org.freedesktop.resolve1' unit='dbus-org.freedesktop.resolve1.service' requested by ':1.23' (uid=0 pid=1012 comm="/usr/bin/NetworkManager --no-daemon ")
dbus-daemon[991]: [system] Activation via systemd failed for unit 'dbus-org.freedesktop.resolve1.service': Unit dbus-org.freedesktop.resolve1.service not found.
dbus-daemon[991]: [system] Activating via systemd: service name='org.freedesktop.resolve1' unit='dbus-org.freedesktop.resolve1.service' requested by ':1.23' (uid=0 pid=1012 comm="/usr/bin/NetworkManager --no-daemon ")
</pre>
<p>Это происходит потому, что NetworkManager будет пытаться отправить информацию о DNS в <a href="../ru/Systemd-resolved.html" title="Systemd-resolved (Русский)">systemd-resolved</a> независимо от настройки <code>main.dns=</code> в <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span>.<a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/commit/d4eb4cb45f41b1751cacf71da558bf8f0988f383">[9]</a>
</p>
<p>Это можно отключить в настройках:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/no-systemd-resolved.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[main]
systemd-resolved=false</pre>
<p>Смотрите <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/62138">FS#62138</a>.
</p>
<h3>
<span id="Secrets_were_required.2C_but_not_provided"></span><span class="mw-headline" id="Secrets_were_required,_but_not_provided">Secrets were required, but not provided</span>
</h3>
<p>Если при попытке подключиться к сети вы получаете ошибку:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nmcli device wifi connect <i>SSID</i> password <i>пароль</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Error: Connection activation failed: (7) Secrets were required, but not provided
</pre>
<p>У этой ошибки может быть множество причин, и вам стоит почитать <a href="../ru/Systemd/Journal.html" class="mw-redirect" title="Журнал">журнал</a> службы (параметр <code>-u NetworkManager</code>). Например, если NetworkManager слишком долго устанавливал соединение, он будет считать, что пароль неверен:
</p>
<pre>NetworkManager[1372]: &lt;warn&gt;  [1643991888.3808] device (wlan0): Activation: (wifi) association took too long
NetworkManager[1372]: &lt;info&gt;  [1643991888.3809] device (wlan0): state change: config -&gt; need-auth (reason 'none', sys-iface-state: 'managed')
NetworkManager[1372]: &lt;warn&gt;  [1643991888.3838] device (wlan0): Activation: (wifi) asking for new secrets
</pre>
<p>Также можно попробовать удалить соединение и создать новое:
</p>
<pre>$ nmcli connection delete <i>SSID</i>
$ nmcli device wifi connect <i>SSID</i> password <i>пароль</i>
</pre>
<p>Ещё можно попробовать отключить рандомизацию MAC-адреса:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/wifi_rand_mac.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[device]
wifi.scan-rand-mac-address=no</pre>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA_.D1.81.D0.B5.D1.82.D0.B8_WPA_Enterprise_.D1.81_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_iwd"></span><span class="mw-headline" id="Подключение_к_сети_WPA_Enterprise_с_использованием_iwd">Подключение к сети WPA Enterprise с использованием iwd</span>
</h3>
<p>Если вы попытаетесь подключиться к eduroam через NetworkManager с <a href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_iwd_%D0%B2_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5_%D0%B1%D1%8D%D0%BA%D0%B5%D0%BD%D0%B4%D0%B0_Wi-Fi">бэкендом iwd</a>, вы получите следующую ошибку от NetworkManager:
</p>
<pre>Connection 'eduroam' is not avialable on device wlan0 because profile is not compatible with device (802.1x connections must have IWD provisioning files)
</pre>
<p>Это связано с тем, что NetworkManager не может настроить сеть WPA Enterprise. Поэтому вам нужно настроить её через файл настроек <code>/var/lib/iwd/<i>essid</i>.8021x</code>, как описано в разделе <a href="../ru/Iwd.html#WPA_Enterprise" title="Iwd (Русский)">iwd (Русский)#WPA Enterprise</a>.
</p>
<h3><span class="mw-headline" id="Failed_to_request_VPN_secrets">Failed to request VPN secrets</span></h3>
<p>Если вы получаете ошибку:
</p>
<pre>Failed to request VPN secrets #1: No agents were available for this request.
</pre>
<p>Это может происходить из-за пустого пароля или из-за <a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%80%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B9_PolicyKit">ненастроенных разрешений PolicyKit</a>.
</p>
<h3>
<span id=".D0.A1.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F_OpenVPN_.D0.B2.D1.8B.D0.B4.D0.B0.D1.8E.D1.82_.D0.BE.D1.88.D0.B8.D0.B1.D0.BA.D1.83_.C2.ABsecrets:_failed_to_request_VPN_secrets.C2.BB"></span><span class="mw-headline" id="Соединения_OpenVPN_выдают_ошибку_«secrets:_failed_to_request_VPN_secrets»">Соединения OpenVPN выдают ошибку «secrets: failed to request VPN secrets»</span>
</h3>
<p>Если в настройках соединения не сохранён пароль, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-openvpn">networkmanager-openvpn</a></span> вынужден каким-то образом получить его от пользователя. Обычно это делается через графический интерфейс, для работы которого нужно установить опциональные зависимости <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libnma-gtk4">libnma-gtk4</a></span> и/или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libnma">libnma</a></span> (GTK3). Если они не установлены, попытка подключения может привести к появлению такой ошибки:
</p>
<pre>NetworkManager[642]: &lt;warn&gt;  [...] vpn[..."name_of_vpn_profile VPN"]: secrets: failed to request VPN secrets #3: No agents were available for this request.
</pre>
<h3>
<span id=".D0.9E.D1.88.D0.B8.D0.B1.D0.BA.D0.B0_.C2.ABca_md_too_weak.C2.BB_.D0.B2_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F.D1.85_OpenVPN"></span><span class="mw-headline" id="Ошибка_«ca_md_too_weak»_в_соединениях_OpenVPN">Ошибка «ca md too weak» в соединениях OpenVPN</span>
</h3>
<p>После обновления <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssl">openssl</a></span> до версии 3 сертификаты, созданные с использованием устаревших криптографических алгоритмов, по умолчанию отклоняются. Попытка использовать <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=networkmanager-openvpn">networkmanager-openvpn</a></span> с такой настройкой может привести к появлению следующих ошибок в журнале:
</p>
<pre>nm-openvpn[14359]: OpenSSL: error:0A00018E:SSL routines::ca md too weak
nm-openvpn[14359]: Cannot load certificate file /home/archie/.local/share/networkmanagement/certificates/my_issued_cert.crt
nm-openvpn[14359]: Exiting due to fatal error
</pre>
<p>Самое правильное решение — попросить администратора сервера OpenVPN выпустить более безопасные сертификаты. Если это по каким-то причинам невозможно и требуется немедленное решение проблемы — OpenVPN требует <code>tls-cipher "DEFAULT:@SECLEVEL=0"</code>, который нужно включить через <i>nmcli</i>. Также нужно включить провайдер <i>legacy</i> в настройках OpenSSL.
</p>
<p>Сперва узнайте имя проблемного VPN-соединения:
</p>
<pre>$ nmcli connection show
</pre>
<p>Например, если имя <i>vpn.example.com</i>, выполните такую команду:
</p>
<pre>$ nmcli connection modify vpn.example.com +vpn.data tls-cipher=DEFAULT:@SECLEVEL=0
</pre>
<p>Она обновит настройки в файле <code>/etc/NetworkManager/system-connections/vpn.example.com.nmconnection</code>.
</p>
<p>Также нужно включить провайдер <i>legacy</i> в настройках OpenSSL, отредактировав <code>/etc/ssl/openssl.cnf</code> как описано в <a rel="nofollow" class="external text" href="https://wiki.openssl.org/index.php/OpenSSL_3.0#Providers">OpenSSL wiki</a>.
</p>
<p>В конце раздела <code>[provider_sect]</code> добавьте <code>legacy = legacy_sect</code>, а в разделе <code>[default_sect]</code> раскомментируйте <code>activate = 1</code>. Затем добавьте раздел <code>[legacy_sect]</code> со строкой <code>activate = 1</code>. После внесения изменений файл должен содержать примерно такие настройки (другие настройки из этого файла опущены для краткости):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/ssl/openssl.cnf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">openssl_conf = openssl_init

[openssl_init]
providers = provider_sect

[provider_sect]
default = default_sect
legacy = legacy_sect

[default_sect]
activate = 1

[legacy_sect]
activate = 1</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">Перезапустите</a> службу <code>NetworkManager.service</code> для применения изменений.
</p>
<h3>
<span id=".D0.A1.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F_WPA_Enterprise_.D0.BD.D0.B5_.D0.BF.D1.80.D0.BE.D1.85.D0.BE.D0.B4.D1.8F.D1.82_.D0.B0.D1.83.D1.82.D0.B5.D0.BD.D1.82.D0.B8.D1.84.D0.B8.D0.BA.D0.B0.D1.86.D0.B8.D1.8E_.D1.81_.D0.BE.D1.88.D0.B8.D0.B1.D0.BA.D0.BE.D0.B9_OpenSSL_.C2.ABunsupported_protocol.C2.BB"></span><span class="mw-headline" id="Соединения_WPA_Enterprise_не_проходят_аутентификацию_с_ошибкой_OpenSSL_«unsupported_protocol»">Соединения WPA Enterprise не проходят аутентификацию с ошибкой OpenSSL «unsupported protocol»</span>
</h3>
<p>После обновления <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssl">openssl</a></span> до версии 3 протоколы SSL 3, TLS 1.0, TLS 1.1 и DTLS 1.0 <a rel="nofollow" class="external text" href="https://www.openssl.org/news/openssl-3.0-notes.html">по умолчанию</a> работают только на уровне безопасности 0. Попытка подключения к беспроводной сети, поддерживающей только более старые стандарты, приводит к появлению в журнале следующей ошибки:
</p>
<pre>wpa_supplicant[3320]: SSL: SSL3 alert: write (local SSL3 detected an error):fatal:protocol version
wpa_supplicant[3320]: OpenSSL: openssl_handshake - SSL_connect error:0A000102:SSL routines::unsupported protocol
wpa_supplicant[3320]: wlp3s0: CTRL-EVENT-EAP-FAILURE EAP authentication failed
</pre>
<p>Самое правильное решение — попросить администратора сети добавить поддержку TLS 1.3 и по возможности прекратить использование устаревших протоколов TLS 1.0/1.1, DTLS 1.0 и SSL 1-3. Если это по каким-то причинам невозможно и требуется немедленное решение проблемы — есть несколько способов разрешить TLS 1.0 и/или 1.1 по умолчанию. Один из способов — откат данного изменения в OpenSSL (<a rel="nofollow" class="external autonumber" href="https://github.com/openssl/openssl/commit/7bf2e4d7f0c7ae19b7a8c416910886a7171e9820">[10]</a>). Поскольку это также снижает безопасность всех других программ, использующих уровень безопасности 1, этот способ не рекомендуется. Вместо этого можно напрямую установить уровень, используемый wpa_supplicant, как описано в <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=286417#p2104492">BBS#286417</a>. Чтобы изменить только затронутое соединение, в настройках соединения в разделе <code>[802-1x]</code> пропишите <code>phase1-auth-flags=32</code> или <code>phase1-auth-flags=64</code>. Это нельзя сделать через графический интерфейс, но можно сделать через <i>nmcli</i>.
</p>
<p>Сперва узнайте имя проблемного беспроводного соединения:
</p>
<pre>$ nmcli connection show
</pre>
<p>Например, если имя <i>Example Wi-Fi</i> и оно использует TLS 1.0, выполните такую команду:
</p>
<pre>$ nmcli connection modify 'Example Wi-Fi' 802-1x.phase1-auth-flags 32
</pre>
<p>А для TLS 1.1 укажите 64:
</p>
<pre>$ nmcli connection modify 'Example Wi-Fi' 802-1x.phase1-auth-flags 64
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Число, которое вы вводите, относится к числу, которое получается при возведении 2 в степень <b>n</b>. Здесь <b>n</b> — это индекс бита в битовой маске с порядком справа налево. Переключение пятого бита включает TLS 1.0 <b>[log(2) 32]</b>, а переключение шестого бита включает TLS 1.1 <b>[log(2) 64]</b>.</div>
<p>Команда обновит настройки в файле <code>/etc/NetworkManager/system-connections/Example Wi-Fi.nmconnection</code>.
</p>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">Перезапустите</a> службу <code>NetworkManager.service</code> для применения изменений.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://blogs.gnome.org/dcbw/2015/02/16/networkmanager-for-administrators-part-1/">NetworkManager for Administrators Part 1</a></li>
<li><a href="https://en.wikipedia.org/wiki/ru:NetworkManager" class="extiw" title="wikipedia:ru:NetworkManager">Wikipedia:ru:NetworkManager</a></li>
<li><a rel="nofollow" class="external text" href="https://networkmanager.dev/">Официальный сайт NetworkManager</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:Network_managers.html" title="Category:Network managers (Русский)">Network managers (Русский)</a></li>
<li><a href="../ru/Category:Red_Hat.html" title="Category:Red Hat (Русский)">Red Hat (Русский)</a></li>
<li><a href="../ru/Category:DHCP.html" title="Category:DHCP (Русский)">DHCP (Русский)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=NetworkManager_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=833902">https://wiki.archlinux.org/index.php?title=NetworkManager_(Русский)&amp;oldid=833902</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 14 May 2025, at 05:45.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
