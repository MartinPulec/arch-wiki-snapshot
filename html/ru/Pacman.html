<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>pacman (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pacman_Русский rootpage-Pacman_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Использование" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Использование</div>
		</a>
		
			<button aria-controls="toc-Использование-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Использование subsection</span>
			</button>
		
		<ul id="toc-Использование-sublist" class="vector-toc-list">
			<li id="toc-Установка_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Установка пакетов</div>
			</a>
			
			<ul id="toc-Установка_пакетов-sublist" class="vector-toc-list">
				<li id="toc-Установка_отдельных_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>Установка отдельных пакетов</div>
			</a>
			
			<ul id="toc-Установка_отдельных_пакетов-sublist" class="vector-toc-list">
				<li id="toc-Виртуальные_пакеты" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1.1</span>Виртуальные пакеты</div>
			</a>
			
			<ul id="toc-Виртуальные_пакеты-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Установка_группы_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>Установка группы пакетов</div>
			</a>
			
			<ul id="toc-Установка_группы_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Удаление_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Удаление пакетов</div>
			</a>
			
			<ul id="toc-Удаление_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Обновление_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Обновление пакетов</div>
			</a>
			
			<ul id="toc-Обновление_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запросы_к_базам_данных_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_%D0%BA_%D0%B1%D0%B0%D0%B7%D0%B0%D0%BC_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4</span>Запросы к базам данных пакетов</div>
			</a>
			
			<ul id="toc-Запросы_к_базам_данных_пакетов-sublist" class="vector-toc-list">
				<li id="toc-Pactree" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Pactree">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.1</span>Pactree</div>
			</a>
			
			<ul id="toc-Pactree-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Структура_базы_данных" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4.2</span>Структура базы данных</div>
			</a>
			
			<ul id="toc-Структура_базы_данных-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Очистка_кэша_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%87%D0%B8%D1%81%D1%82%D0%BA%D0%B0_%D0%BA%D1%8D%D1%88%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.5</span>Очистка кэша пакетов</div>
			</a>
			
			<ul id="toc-Очистка_кэша_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Дополнительные_команды" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.6</span>Дополнительные команды</div>
			</a>
			
			<ul id="toc-Дополнительные_команды-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Причина_установки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D1%87%D0%B8%D0%BD%D0%B0_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.7</span>Причина установки</div>
			</a>
			
			<ul id="toc-Причина_установки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Поиск_пакета_по_названию_файла" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B8%D1%81%D0%BA_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0_%D0%BF%D0%BE_%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D1%8E_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.8</span>Поиск пакета по названию файла</div>
			</a>
			
			<ul id="toc-Поиск_пакета_по_названию_файла-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Процесс_установки/обновления/удаления_пакета" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8/%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.9</span>Процесс установки/обновления/удаления пакета</div>
			</a>
			
			<ul id="toc-Процесс_установки/обновления/удаления_пакета-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Настройка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Настройка</div>
		</a>
		
			<button aria-controls="toc-Настройка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка subsection</span>
			</button>
		
		<ul id="toc-Настройка-sublist" class="vector-toc-list">
			<li id="toc-Глобальные_параметры" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%93%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Глобальные параметры</div>
			</a>
			
			<ul id="toc-Глобальные_параметры-sublist" class="vector-toc-list">
				<li id="toc-Сравнение_версий_пакетов_перед_обновлением" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B9_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>Сравнение версий пакетов перед обновлением</div>
			</a>
			
			<ul id="toc-Сравнение_версий_пакетов_перед_обновлением-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Параллельная_загрузка" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%B0%D1%80%D0%B0%D0%BB%D0%BB%D0%B5%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>Параллельная загрузка</div>
			</a>
			
			<ul id="toc-Параллельная_загрузка-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запрет_на_обновление_отдельных_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.3</span>Запрет на обновление отдельных пакетов</div>
			</a>
			
			<ul id="toc-Запрет_на_обновление_отдельных_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запрет_на_обновление_группы_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.4</span>Запрет на обновление группы пакетов</div>
			</a>
			
			<ul id="toc-Запрет_на_обновление_группы_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запрет_на_обновление_файлов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.5</span>Запрет на обновление файлов</div>
			</a>
			
			<ul id="toc-Запрет_на_обновление_файлов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запрет_на_установку_файлов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D1%83_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.6</span>Запрет на установку файлов</div>
			</a>
			
			<ul id="toc-Запрет_на_установку_файлов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Работа_с_несколькими_файлами_настроек" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D0%BC%D0%B8_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.7</span>Работа с несколькими файлами настроек</div>
			</a>
			
			<ul id="toc-Работа_с_несколькими_файлами_настроек-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Хуки" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A5%D1%83%D0%BA%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.8</span>Хуки</div>
			</a>
			
			<ul id="toc-Хуки-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Репозитории_и_зеркала" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B8_%D0%B8_%D0%B7%D0%B5%D1%80%D0%BA%D0%B0%D0%BB%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Репозитории и зеркала</div>
			</a>
			
			<ul id="toc-Репозитории_и_зеркала-sublist" class="vector-toc-list">
				<li id="toc-Каталог_для_кэша_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3_%D0%B4%D0%BB%D1%8F_%D0%BA%D1%8D%D1%88%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>Каталог для кэша пакетов</div>
			</a>
			
			<ul id="toc-Каталог_для_кэша_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Безопасность_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2</span>Безопасность пакетов</div>
			</a>
			
			<ul id="toc-Безопасность_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Решение проблем</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Failed_to_commit_transaction_(conflicting_files)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_commit_transaction_(conflicting_files)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Failed to commit transaction (conflicting files)</div>
			</a>
			
			<ul id="toc-Failed_to_commit_transaction_(conflicting_files)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_commit_transaction_(invalid_or_corrupted_package)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_commit_transaction_(invalid_or_corrupted_package)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Failed to commit transaction (invalid or corrupted package)</div>
			</a>
			
			<ul id="toc-Failed_to_commit_transaction_(invalid_or_corrupted_package)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_init_transaction_(unable_to_lock_database)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_init_transaction_(unable_to_lock_database)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Failed to init transaction (unable to lock database)</div>
			</a>
			
			<ul id="toc-Failed_to_init_transaction_(unable_to_lock_database)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_найти_пакет_для_установки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%BD%D0%B0%D0%B9%D1%82%D0%B8_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82_%D0%B4%D0%BB%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Не удаётся найти пакет для установки</div>
			</a>
			
			<ul id="toc-Не_удаётся_найти_пакет_для_установки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-pacman_падает_при_обновлении" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#pacman_%D0%BF%D0%B0%D0%B4%D0%B0%D0%B5%D1%82_%D0%BF%D1%80%D0%B8_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>pacman падает при обновлении</div>
			</a>
			
			<ul id="toc-pacman_падает_при_обновлении-sublist" class="vector-toc-list">
				<li id="toc-pacman:_команда_не_найдена" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#pacman:_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0_%D0%BD%D0%B5_%D0%BD%D0%B0%D0%B9%D0%B4%D0%B5%D0%BD%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.1</span>pacman: команда не найдена</div>
			</a>
			
			<ul id="toc-pacman:_команда_не_найдена-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Переустановка_pacman_вручную" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_pacman_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Переустановка pacman вручную</div>
			</a>
			
			<ul id="toc-Переустановка_pacman_вручную-sublist" class="vector-toc-list">
				<li id="toc-С_помощью_pacman-static" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_pacman-static">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6.1</span>С помощью pacman-static</div>
			</a>
			
			<ul id="toc-С_помощью_pacman-static-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-С_помощью_внешнего_pacman" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B3%D0%BE_pacman">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6.2</span>С помощью внешнего pacman</div>
			</a>
			
			<ul id="toc-С_помощью_внешнего_pacman-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Извлечение_вручную" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%B2%D0%BB%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6.3</span>Извлечение вручную</div>
			</a>
			
			<ul id="toc-Извлечение_вручную-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id='toc-Ошибка_"Unable_to_find_root_device"_после_перезагрузки' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#%D0%9E%D1%88%D0%B8%D0%B1%D0%BA%D0%B0_"Unable_to_find_root_device"_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Ошибка "Unable to find root device" после перезагрузки</div>
			</a>
			
			<ul id='toc-Ошибка_"Unable_to_find_root_device"_после_перезагрузки-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Warning:_current_locale_is_invalid;_using_default_"C"_locale' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Warning:_current_locale_is_invalid;_using_default_"C"_locale'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>Warning: current locale is invalid; using default "C" locale</div>
			</a>
			
			<ul id='toc-Warning:_current_locale_is_invalid;_using_default_"C"_locale-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-pacman_игнорирует_настройки_прокси" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#pacman_%D0%B8%D0%B3%D0%BD%D0%BE%D1%80%D0%B8%D1%80%D1%83%D0%B5%D1%82_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.9</span>pacman игнорирует настройки прокси</div>
			</a>
			
			<ul id="toc-pacman_игнорирует_настройки_прокси-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Как_переустановить_все_пакеты,_сохранив_информацию_о_том,_какие_из_них_установлены_явно,_а_какие_—_в_качестве_зависимостей?" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D0%B0%D0%BA_%D0%BF%D0%B5%D1%80%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C_%D0%B2%D1%81%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D1%8B,_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%B2_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8E_%D0%BE_%D1%82%D0%BE%D0%BC,_%D0%BA%D0%B0%D0%BA%D0%B8%D0%B5_%D0%B8%D0%B7_%D0%BD%D0%B8%D1%85_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D1%8B_%D1%8F%D0%B2%D0%BD%D0%BE,_%D0%B0_%D0%BA%D0%B0%D0%BA%D0%B8%D0%B5_%E2%80%94_%D0%B2_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5_%D0%B7%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B5%D0%B9?">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.10</span>Как переустановить все пакеты, сохранив информацию о том, какие из них установлены явно, а какие — в качестве зависимостей?</div>
			</a>
			
			<ul id="toc-Как_переустановить_все_пакеты,_сохранив_информацию_о_том,_какие_из_них_установлены_явно,_а_какие_—_в_качестве_зависимостей?-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cannot_open_shared_object_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cannot_open_shared_object_file">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.11</span>Cannot open shared object file</div>
			</a>
			
			<ul id="toc-Cannot_open_shared_object_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблемы_с_загрузкой_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%BE%D0%B9_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.12</span>Проблемы с загрузкой пакетов</div>
			</a>
			
			<ul id="toc-Проблемы_с_загрузкой_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_retrieving_file_'core.db'_from_mirror" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_retrieving_file_'core.db'_from_mirror">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.13</span>Failed retrieving file 'core.db' from mirror</div>
			</a>
			
			<ul id="toc-Failed_retrieving_file_'core.db'_from_mirror-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-'local-package.pkg.tar':_permission_denied" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#'local-package.pkg.tar':_permission_denied">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.14</span>'local-package.pkg.tar': permission denied</div>
			</a>
			
			<ul id="toc-'local-package.pkg.tar':_permission_denied-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.15</span>error: could not determine cachedir mount point /var/cache/pacman/pkg</div>
			</a>
			
			<ul id="toc-error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Смотрите также</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">pacman (Русский)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 11 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-11" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">11 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Pacman" title="Pacman – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Pacman.html" title="Pacman – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Pacman.html" title="Pacman – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fi mw-list-item"><a href="../fi/Pacman.html" title="Pacman – suomi" lang="fi" hreflang="fi" class="interlanguage-link-target"><span>Suomi</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Pacman.html" title="Pacman – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-it mw-list-item"><a href="../it/Pacman.html" title="Pacman – italiano" lang="it" hreflang="it" class="interlanguage-link-target"><span>Italiano</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Pacman" title="Pacman – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pl mw-list-item"><a href="../pl/Pacman.html" title="Pacman – polski" lang="pl" hreflang="pl" class="interlanguage-link-target"><span>Polski</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Pacman.html" title="Pacman – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-sv mw-list-item"><a href="../sv/Pacman.html" title="Pacman – svenska" lang="sv" hreflang="sv" class="interlanguage-link-target"><span>Svenska</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Pacman" title="Pacman – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Creating_packages.html" class="mw-redirect" title="Создание пакетов">Создание пакетов</a></li>
<li><a href="../en/Downgrading_packages.html" class="mw-redirect" title="Откат пакетов">Откат пакетов</a></li>
<li><a href="../ru/Pacman/Package_signing.html" class="mw-redirect" title="Pacman/Подпись пакета">pacman/Подпись пакета</a></li>
<li><a href="../ru/Pacman/Pacnew_and_Pacsave.html" class="mw-redirect" title="Pacman (Русский)/Pacnew и Pacsave">pacman (Русский)/Pacnew и Pacsave</a></li>
<li><a href="../ru/Pacman/Restore_local_database.html" class="mw-redirect" title="Pacman/Восстановление локальной базы данных">pacman/Восстановление локальной базы данных</a></li>
<li><a href="../en/Pacman/Rosetta.html" title="Pacman/Rosetta">pacman/Rosetta</a></li>
<li><a href="../ru/Pacman/Tips_and_tricks.html" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы</a></li>
<li><a href="../ru/Frequently_asked_questions.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0%D0%BC%D0%B8" class="mw-redirect" title="ЧаВо">ЧаВо#Управление пакетами</a></li>
<li><a href="../ru/System_maintenance.html" class="mw-redirect" title="Обслуживание системы">Обслуживание системы</a></li>
<li><a href="../ru/Arch_build_system.html" class="mw-redirect" title="Система сборки Arch">Система сборки Arch</a></li>
<li><a href="../ru/Official_repositories.html" class="mw-redirect" title="Официальные репозитории">Официальные репозитории</a></li>
<li><a href="../ru/Arch_User_Repository.html" class="mw-redirect" title="Пользовательский репозиторий Arch">Пользовательский репозиторий Arch</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Pacman.html" title="Pacman">pacman</a>. Дата последней синхронизации: 12 января 2022. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Pacman&amp;diff=0&amp;oldid=709588">изменения</a>.</div>
<p><a href="https://en.wikipedia.org/wiki/ru:%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0%D0%BC%D0%B8" class="extiw" title="wikipedia:ru:Система управления пакетами">Пакетный менеджер</a> <a rel="nofollow" class="external text" href="https://archlinux.org/pacman/">pacman</a> — одна из важнейших отличительных особенностей Arch Linux. Он объединил в себе двоичный формат пакетов и лёгкую в использовании <a href="../ru/Arch_build_system.html" title="Arch build system (Русский)">систему сборки</a>. Цель <i>pacman</i> — удобное управление пакетами вне зависимости от того, взяты они из <a href="../ru/Official_repositories.html" title="Official repositories (Русский)">официальных репозиториев</a> или же собраны самостоятельно.
</p>
<p>Pacman поддерживает систему в актуальном состоянии, синхронизируя пакеты с мастер-сервером. Эта клиент-серверная модель позволяет пользователю скачивать/устанавливать пакеты со всеми необходимыми зависимостями всего одной командой.
</p>
<p>Pacman написан на языке <a href="../en/C.html" title="C">Си</a> и работает с <a href="https://en.wikipedia.org/wiki/ru:tar" class="extiw" title="wikipedia:ru:tar">tar</a>-пакетами в формате <span class="plainlinks archwiki-template-man" title="$ man 1 bsdtar"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bsdtar.1">bsdtar(1)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> содержит также утилиты <a href="../ru/Makepkg.html" title="Makepkg (Русский)">makepkg</a> и <span class="plainlinks archwiki-template-man" title="$ man 8 vercmp"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vercmp.8">vercmp(8)</a></span>. В пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span> вошли другие полезные программы, например, <a href="#Pactree">pactree</a> и <i>checkupdates</i>, которые <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/commit/0c99eabd50752310f42ec808c8734a338122ec86">раньше</a> были частью <i>pacman</i>. Команда <code>pacman -Ql pacman pacman-contrib | grep -E 'bin/.+'</code> выведет полный список доступных утилит.</div>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Использование">Использование</span>
</h2>
<p>В этом разделе приведена небольшая подборка доступных возможностей <i>pacman</i>. Больше примеров можно найти в руководстве <span class="plainlinks archwiki-template-man" title="$ man 8 pacman"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.8">pacman(8)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Если раньше вы использовали другой дистрибутив Linux, то будет полезно ознакомиться со статьёй <a href="../en/Pacman/Rosetta.html" title="Pacman/Rosetta">pacman/Rosetta</a>.
</div>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Установка_пакетов">Установка пакетов</span>
</h3>
<p>Пакет представляет собой архив, в котором содержатся:
</p>
<ul>
<li>все (скомпилированные) файлы приложения;</li>
<li>метаданные о приложении (имя приложения, версия, зависимости и т.д.);</li>
<li>установочные файлы и директивы для <i>pacman</i>;</li>
<li>(необязательно) дополнительные файлы для облегчения жизни, например — сценарии запуска/остановки.</li>
</ul>
<p>Pacman, менеджер пакетов Arch Linux, может устанавливать, обновлять и удалять пакеты. Использование пакетов имеет ряд преимуществ по сравнению с альтернативным подходом — ручной компиляцией и установкой программ:
</p>
<ul>
<li>удобное обновление: <i>pacman</i> будет устанавливать обновления по мере их появления;</li>
<li>проверка зависимостей: <i>pacman</i> самостоятельно отслеживает зависимости, вам нужно только указать целевую программу, и <i>pacman</i> установит её вместе с неоходимыми дополнительными пакетами;</li>
<li>чистое удаление: <i>pacman</i> хранит список файлов всех пакетов. При удалении пакета в системе не остаётся лишнего "мусора".</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Часто у пакетов есть <a href="../ru/PKGBUILD.html#optdepends" title="PKGBUILD (Русский)">опциональные зависимости</a>, которые не являются обязательными, но предоставляют дополнительную функциональность. Во время установки <i>pacman</i> выведет список опциональных зависимостей, но в файле <code>pacman.log</code> упоминаний о них не будет. Чтобы получить информацию об опциональных зависимостях пакета, используйте <a href="#%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_%D0%BA_%D0%B1%D0%B0%D0%B7%D0%B0%D0%BC_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">#Запросы к базам данных пакетов</a>.</li>
<li>При установке пакета, который нужен только в качестве (опциональной) зависимости для другого пакета и который не будет использоваться вами напрямую, рекомендуется использовать параметр <code>--asdeps</code>. Подробнее смотрите раздел <a href="#%D0%9F%D1%80%D0%B8%D1%87%D0%B8%D0%BD%D0%B0_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8">#Причина установки</a>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> При установке пакетов старайтесь не синхронизировать базу данных пакетов без последующего <a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">обновления системы</a> (например, на случай, если пакета <a href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%BD%D0%B0%D0%B9%D1%82%D0%B8_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82_%D0%B4%D0%BB%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8">уже нет</a> в официальных репозиториях). В частности, не используйте команду <code>pacman -Sy <i>название_пакета</i></code> вместо <code>pacman -Sy<b>u</b> <i>название_пакета</i></code>, потому что это может привести к проблемам с зависимостями. Подробнее смотрите статью <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">System maintenance#Частичные обновления не поддерживаются</a> и ветку форума <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=89328">BBS#89328</a>.</div>
<h4>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BE.D1.82.D0.B4.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Установка_отдельных_пакетов">Установка отдельных пакетов</span>
</h4>
<p>Для установки одного пакета или списка пакетов (включая зависимости) используйте следующую команду:
</p>
<pre># pacman -S <i>название_пакета1</i> <i>название_пакета2</i> ...
</pre>
<p>Для установки списка пакетов при помощи поиска по регулярному выражению (смотрите <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=7179">эту ветку форума</a>) выполните:
</p>
<pre># pacman -S $(pacman -Ssq <i>регулярное_выражение</i>)
</pre>
<p>Если пакет имеет несколько версий в разных репозиториях (например, в <i>extra</i> и <i>testing</i>), можно указать, откуда именно следует установить пакет:
</p>
<pre># pacman -S extra/<i>имя_пакета</i>
</pre>
<p>Чтобы установить несколько пакетов с частично совпадающими названиями, используйте фигурные скобки:
</p>
<pre># pacman -S plasma-{desktop,mediacenter,nm}
</pre>
<p>Можно использовать несколько уровней вложенных фигурных скобок:
</p>
<pre># pacman -S plasma-{workspace{,-wallpapers},pa}
</pre>
<h5>
<span id=".D0.92.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D1.8B"></span><span class="mw-headline" id="Виртуальные_пакеты">Виртуальные пакеты</span>
</h5>
<p>Виртуальным называется такой пакет, который сам по себе не существует, но <a href="../ru/PKGBUILD.html#provides" title="PKGBUILD (Русский)">предоставляется</a> другими пакетами. "Виртуальность" позволяет другим пакетам не объявлять зависимостью какой-то конкретный пакет, если есть возможность выбора из нескольких кандидатов. Виртуальный пакет нельзя установить по имени, он добавляется в систему только при установке пакета, который <i>предоставляет</i> его.
</p>
<h4>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Установка_группы_пакетов">Установка группы пакетов</span>
</h4>
<p>Некоторые пакеты объединены в <a href="../ru/Meta_package_and_package_group.html" title="Meta package and package group (Русский)">группы</a> и могут устанавливаться одной командой. Например, после команды
</p>
<pre># pacman -S gnome
</pre>
<p>вам будет предложено выбрать пакеты из группы <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome/">gnome</a></span>, которые вы хотели бы установить.
</p>
<p>Некоторые группы содержат большое количество пакетов, и среди них могут быть всего несколько нужных или ненужных вам. Вместо того, чтобы вводить все необходимые вам номера, иногда удобнее выбрать или исключить отдельные числа или диапазоны чисел при помощи приведенного ниже синтаксиса:
</p>
<pre>Enter a selection (default=all): 1-10 15
</pre>
<p>— будут выбраны все пакеты в диапазоне с 1 по 10, а также 15;
</p>
<pre>Enter a selection (default=all): ^5-8 ^2
</pre>
<p>— будут выбраны все пакеты, кроме входящих в диапазон с 5 по 8, а также 2.
</p>
<p>Чтобы увидеть список пакетов, принадлежащих к группе gnome, выполните:
</p>
<pre># pacman -Sg gnome
</pre>
<p>Перечень групп можно найти на странице <a rel="nofollow" class="external free" href="https://archlinux.org/groups/">https://archlinux.org/groups/</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Установлены будут все пакеты из списка, в том числе и те, которые уже были установлены в систему ранее — даже если они последней версии и не нуждаются в обновлении. Чтобы не устанавливать такие пакеты заново, укажите параметр <code>--needed</code>.
</div>
<h3>
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Удаление_пакетов">Удаление пакетов</span>
</h3>
<p>Удалить пакет, не удаляя его зависимости:
</p>
<pre># pacman -R <i>название_пакета</i>
</pre>
<p>Удалить пакет и те его зависимости, которые не нужны никаким другим пакетам:
</p>
<pre># pacman -Rs <i>название_пакета</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> При удалении группы пакетов (вроде <i>gnome</i>), причина установки отдельных пакетов, входящих в группу, игнорируется. Причина установки пакетов-зависимостей, тем не менее, по-прежнему учитывается.</div>
<p>Команда выше может не сработать при удалении группы с другими необходимыми пакетами. В этом случае используйте команду:
</p>
<pre># pacman -Rsu <i>название_пакета</i>
</pre>
<p>Удалить пакет, его зависимости, а также все пакеты, для которых он сам является зависимостью:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Эта операция рекурсивна. Используйте её с осторожностью — есть риск удалить нужные пакеты.
</div>
<pre># pacman -Rsc <i>название_пакета</i>
</pre>
<p>Удалить пакет, который требуется другому пакету, без удаления зависимостей:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Этой операции следует избегать, так как она может нанести тяжелый вред системе. Подробнее смотрите статью <a href="../ru/System_maintenance.html#%D0%98%D0%B7%D0%B1%D0%B5%D0%B3%D0%B0%D0%B9%D1%82%D0%B5_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_pacman" title="System maintenance (Русский)">System maintenance#Избегайте определенных команд pacman</a>.
</div>
<pre># pacman -Rdd <i>название_пакета</i>
</pre>
<p>Pacman создает резервные копии конфигурационных файлов удаляемых приложений и добавляет к ним расширение <i>.pacsave</i>. Если вы хотите удалить и эти файлы, используйте ключ <code>-n</code>:
</p>
<pre># pacman -Rn <i>название_пакета</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Pacman не удаляет файлы настроек, которые созданы самими приложениями — например, скрытые файлы (имя которых начинается с точки) в домашнем каталоге).</div>
<h3>
<span id=".D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Обновление_пакетов">Обновление пакетов</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> 
<ul>
<li>Обновление системы следует выполнять регулярно, следуя рекомендациям в статье <a href="../ru/System_maintenance.html#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" title="System maintenance (Русский)">System maintenance#Обновление системы</a>. При этом пользователь должен понимать смысл выполняемых действий, а не слепо повторять предложенные команды.</li>
<li>Arch поддерживает только полные обновления системы. Смотрите статьи <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">System maintenance#Частичные обновления не поддерживаются</a> и <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">#Установка пакетов</a>.</li>
</ul>
</div>
<p>Pacman полностью обновляет систему всего одной командой. Если система давно не обновлялась, процесс может занять довольно длительное время. Приведённая ниже команда одновременно синхронизирует базы данных репозиториев <b>и</b> выполняет обновление системы — при этом пакеты, которых нет в подключённых репозиториях, обновлены не будут:
</p>
<pre># pacman -Syu
</pre>
<h3>
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D1.8B_.D0.BA_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Запросы_к_базам_данных_пакетов">Запросы к базам данных пакетов</span>
</h3>
<p>Для взаимодействия с базами данных в <i>pacman</i> предусмотрены флаги <code>-Q</code> (база данных пакетов), <code>-S</code> (база данных синхронизации) и <code>-F</code> (база данных файлов). Команды <code>pacman -Q --help</code>, <code>pacman -S --help</code> и <code>pacman -F --help</code> выведут список возможных опций для этих флагов.
</p>
<p>Pacman может выполнять поиск в базе данных как среди названий пакетов, так и по их описаниям:
</p>
<pre>$ pacman -Ss <i>условие1</i> <i>условие2</i> ...
</pre>
<p>Иногда поиск с параметром <code>-s</code> выдаёт много ненужных результатов, поэтому имеет смысл ограничить поиск только названиями пакетов, отключив поиск по описаниям и другим полям. Для этого можно использовать регулярные выражения:
</p>
<pre>$ pacman -Ss '^vim-'
</pre>
<p>Искать среди установленных пакетов:
</p>
<pre>$ pacman -Qs <i>условие1</i> <i>условие2</i> ...
</pre>
<p>Искать пакет в репозиториях по названию файла:
</p>
<pre>$ pacman -F <i>условие1</i> <i>условие2</i> ...
</pre>
<p>Показать подробную информацию о пакете в репозитории:
</p>
<pre>$ pacman -Si <i>название_пакета</i>
</pre>
<p>То же самое — для установленного пакета:
</p>
<pre>$ pacman -Qi <i>название_пакета</i>
</pre>
<p>Если указать сразу два флага <code>-i</code>, то будет также выведен список резервных копий файлов и их состояние (модифицирован/нет):
</p>
<pre>$ pacman -Qii <i>название_пакета</i>
</pre>
<p>Вывести список файлов установленного пакета:
</p>
<pre>$ pacman -Ql <i>название_пакета</i>
</pre>
<p>Вывести список файлов пакета в репозитории:
</p>
<pre>$ pacman -Fl <i>название_пакета</i>
</pre>
<p>Проверить наличие файлов установленного пакета:
</p>
<pre>$ pacman -Qk <i>название_пакета</i>
</pre>
<p>С двумя флагами <code>-k</code> проверка будет более тщательной.
</p>
<p>Узнать, какому пакету принадлежит файл:
</p>
<pre>$ pacman -Qo <i>/путь/к/файлу/имя_файла</i>
</pre>
<p>Узнать, какому пакету в репозиториях принадлежит файл:
</p>
<pre>$ pacman -F <i>/путь/к/файлу/имя_файла</i>
</pre>
<p>Вывести список пакетов, которые больше не требуются как зависимости ("пакеты-сироты"):
</p>
<pre>$ pacman -Qdt
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Последнюю команду имеет смысл сделать <a href="#%D0%A5%D1%83%D0%BA%D0%B8">пост-транзакционным хуком</a> <i>pacman</i>, чтобы получить уведомление, если какое-то действие привело к появлению пакета-сироты. Это может быть полезно, например, если пакет был удалён из репозитория, вследствие чего на локальной системе он будет считаться сиротой (кроме случая, когда пакет был установлен явно). Чтобы не получать ошибку "failed to execute command" в случае отсутствия пакетов-сирот, укажите следующую команду в параметре <code>Exec</code> в описании хука: <code>/usr/bin/bash -c "/usr/bin/pacman -Qtd || /usr/bin/echo '=&gt; None found.'"</code>
</div>
<p>Вывести список пакетов, установленных явно (explicitly) и не являющихся зависимостями для других пакетов:
</p>
<pre>$ pacman -Qet
</pre>
<p>Другие полезные команды можно найти в статье <a href="../ru/Pacman/Tips_and_tricks.html" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы</a>.
</p>
<h4><span class="mw-headline" id="Pactree">Pactree</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <span class="plainlinks archwiki-template-man" title="$ man 8 pactree"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pactree.8">pactree(8)</a></span> больше не является частью пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span>. Теперь он входит в состав <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span>.
</div>
<p>Дерево зависимостей пакета можно узнать командой
</p>
<pre>$ pactree <i>название_пакета</i>
</pre>
<p>Чтобы увидеть "обратное" дерево зависимостей, т.е. список пакетов, которые сами зависят от указанного, используйте флаг <i>pactree</i> <code>-r</code> или утилиту <i>whoneeds</i> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pkgtools/">pkgtools</a></span><sup><small>AUR</small></sup>.
</p>
<h4>
<span id=".D0.A1.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0_.D0.B1.D0.B0.D0.B7.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Структура_базы_данных">Структура базы данных</span>
</h4>
<p>Базы данных <i>pacman</i> обычно размещаются в каталоге <code>/var/lib/pacman/sync</code>. Для каждого подключённого в файле <code>/etc/pacman.conf</code> репозитория в этом каталоге находится соответствующий файл базы данных. Сам файл представляет собой gzip-сжатый tar-архив (с расширением <i>.db</i>), содержащий по одному каталогу для каждого пакета. Например, для пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=which">which</a></span> содержимое каталога имеет вид:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ tree which-2.21-5</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">which-2.21-5
|-- desc
</pre>
<p>В файле <code>desc</code> хранятся мета-данные пакета — описание, список зависимостей, размер, хэш-сумма MD5 и т.д.
</p>
<h3>
<span id=".D0.9E.D1.87.D0.B8.D1.81.D1.82.D0.BA.D0.B0_.D0.BA.D1.8D.D1.88.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Очистка_кэша_пакетов">Очистка кэша пакетов</span>
</h3>
<p>Pacman сохраняет скачиваемые пакеты в каталог <code>/var/cache/pacman/pkg/</code>. Старые версии пакетов и пакеты, удалённые из системы, не удаляются из этого каталога автоматически. Такой подход обладает следующими преимуществами:
</p>
<ol>
<li>Можно выполнить <a href="../en/Downgrading_packages.html" class="mw-redirect" title="Downgrading packages (Русский)">откат пакета</a> без необходимости искать где-то (например, в <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">архиве Arch Linux</a>) его старую версию;</li>
<li>Удалённый по ошибке пакет можно заново установить из кэша, не скачивая из репозитория.</li>
</ol>
<p>Тем не менее, это означает, что время от времени необходимо чистить этот каталог самостоятельно, чтобы предотвратить его разрастание.
</p>
<p>Скрипт <span class="plainlinks archwiki-template-man" title="$ man 8 paccache"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/paccache.8">paccache(8)</a></span> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span> удаляет из кэша старые версии пакетов, как установленных в системе, так и уже удалённых, по умолчанию оставляя только три самые свежие:
</p>
<pre># paccache -r
</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">Включите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> <code>paccache.timer</code>, чтобы очистка кэша выполнялась каждую неделю автоматически.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Также можно создать <a href="#%D0%A5%D1%83%D0%BA%D0%B8">хук</a>, чтобы очистка запускалась после каждого действия <i>pacman</i>. Подробнее смотрите <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1694743#p1694743">примеры</a> на форуме и пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacman-cleanup-hook/">pacman-cleanup-hook</a></span><sup><small>AUR</small></sup>.</div>
<p>При необходимости можно задать количество последних версий, которые нужно оставить. Команда для удаления всех версий, кроме последней:
</p>
<pre># paccache -rk1
</pre>
<p>Флаг <code>-u</code>/<code>--uninstalled</code> позволяет ограничить действие <i>paccache</i> только версиями пакетов, которых в системе уже нет. Например, команда удаления всех кэшированных версий удалённых пакетов:
</p>
<pre># paccache -ruk0
</pre>
<p>Список возможных опций выводится командой <code>paccache -h</code>.
</p>
<p>В <i>pacman</i> есть встроеный функционал очистки кэша и удаления баз данных репозиториев, которые были заблокированы в файле <code>/etc/pacman.conf</code>. Однако <i>pacman</i> гораздо менее гибок по сравнению с <i>paccache</i> и не даёт возможности сохранить некоторое количество последних версий, просто очищая каталог кэша.
</p>
<p>Чтобы удалить все кэшированные версии удалённых пакетов и неиспользуемые базы данных, выполните:
</p>
<pre># pacman -Sc
</pre>
<p>Чтобы удалить вообще все файлы из кэша, укажите флаг очистки дважды:
</p>
<pre># pacman -Scc
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Следует избегать полной очистки кэша, кроме случая, когда вам очень нужно освободить дисковое пространство. Очистка сделает невозможным откат пакетов или их переустановку без повторного скачивания.
</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pkgcacheclean/">pkgcacheclean</a></span><sup><small>AUR</small></sup> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacleaner/">pacleaner</a></span><sup><small>AUR</small></sup> — две альтернативные программы для очистки кэша.
</p>
<h3>
<span id=".D0.94.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B"></span><span class="mw-headline" id="Дополнительные_команды">Дополнительные команды</span>
</h3>
<p>Скачать пакет без установки:
</p>
<pre># pacman -Sw <i>название_пакета</i>
</pre>
<p>Установить пакет не из удалённого репозитория, а хранящийся локально (например, предварительно скачанный из <a href="../ru/Arch_User_Repository.html" title="Arch User Repository (Русский)">AUR</a>):
</p>
<pre># pacman -U <i>/путь/к/пакету/имя_пакета-версия.pkg.tar.zst</i>
</pre>
<p>Сохранить копию локально устанавливаемого пакета в кэше <i>pacman</i>:
</p>
<pre># pacman -U file:<i>///путь/к/пакету/имя_пакета-версия.pkg.tar.zst</i>
</pre>
<p>Скачать и установить пакет из удаленного источника (но и не из репозиториев, перечисленных в конфигурационном файле <i>pacman</i>):
</p>
<pre># pacman -U http:<i>//www.example.com/repo/example.pkg.tar.zst</i>
</pre>
<p>Флаг <code>-p</code> можно использовать для подавления стандартных действий <code>-S</code>, <code>-U</code> и <code>-R</code>.
</p>
<p>Pacman всегда выводит список пакетов, которые будут установлены или удалены, и спрашивает разрешение пользователя перед выполнением действия.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D1.87.D0.B8.D0.BD.D0.B0_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B8"></span><span class="mw-headline" id="Причина_установки">Причина установки</span>
</h3>
<p>Для <i>pacman</i> с точки зрения причины установки пакет относится к одной из двух категорий:
</p>
<ul>
<li>
<b>установлен явно</b> (explicitly-installed): установлен пользователем командами <code>pacman -S</code> или <code>pacman -U</code>;</li>
<li>
<b>зависимость</b> (dependency): установлен автоматически в процессе установки другого пакета, поскольку являлся его <a href="../ru/PKGBUILD.html#%D0%97%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8" title="PKGBUILD (Русский)">зависимостью</a>.</li>
</ul>
<p>При явной установке пакета можно принудительно изменить причину установки на <i>зависимость</i>:
</p>
<pre># pacman -S --asdeps <i>название_пакета</i>
</pre>
<p>Эта команда обычно используется в случае, когда явно установленные пакеты предлагают установить <a href="../ru/PKGBUILD.html#optdepends" title="PKGBUILD (Русский)">дополнительные пакеты</a> для поддержки дополнительных функций, которые пользователь может выбирать по своему усмотрению.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> При установке опциональных зависимостей вручную стоит всегда указывать флаг <code>--asdeps</code>. Тогда при <a href="../ru/Pacman/Tips_and_tricks.html#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B5%D0%BC%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Pacman/Советы и приёмы">удалении пакетов-сирот</a> ненужные опциональные зависимости тоже будут удаляться.
</div>
<p>При <b>пере</b>установке пакета текущая причина установки не меняется.
</p>
<p>Список явно установленных пакетов выводится командой <code>pacman -Qe</code>, а пакетов-зависимостей — командой <code>pacman -Qd</code>.
</p>
<p>Чтобы изменить причину установки уже установленного пакета, выполните:
</p>
<pre># pacman -D --asdeps <i>название_пакета</i>
</pre>
<p>Для противоположной операции используйте флаг <code>--asexplicit</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Не стоить использовать опции <code>--asdeps</code> и <code>--asexplicit</code> в команде обновления системы, например <code>pacman -Syu <i>название_пакета</i> --asdeps</code>. Это изменит причину установки не только для устанавливаемого пакета, но и для всех обновляемых.
</div>
<h3>
<span id=".D0.9F.D0.BE.D0.B8.D1.81.D0.BA_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.B0_.D0.BF.D0.BE_.D0.BD.D0.B0.D0.B7.D0.B2.D0.B0.D0.BD.D0.B8.D1.8E_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0"></span><span class="mw-headline" id="Поиск_пакета_по_названию_файла">Поиск пакета по названию файла</span>
</h3>
<p>Синхронизировать базу данных файлов:
</p>
<pre># pacman -Fy
</pre>
<p>Найти пакет, содержащий определённый файл (например, файл <code>pacman</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacman -F pacman</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">core/pacman 5.2.1-1 (base base-devel) [установлен]
    usr/bin/pacman
    usr/share/bash-completion/completions/pacman
extra/xscreensaver 5.43-1
    usr/lib/xscreensaver/pacman
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Вы можете назначить задачу в <a href="../en/Cron.html" class="mw-redirect" title="Cron (Русский)">Cron</a> или <a href="../ru/Systemd/Timers.html" title="Systemd (Русский)/Timers (Русский)">таймер</a> systemd для регулярной синхронизации баз данных.</div>
<p>Утилита <a href="../ru/Pkgfile.html" title="Pkgfile (Русский)">pkgfile</a> также осуществляет поиск пакетов по файлам, опираясь на свою базу данных; она обладает расширенной функциональностью по сравнению с <code>pacman -F</code>.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B8.2F.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F.2F.D1.83.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.B0"></span><span class="mw-headline" id="Процесс_установки/обновления/удаления_пакета">Процесс установки/обновления/удаления пакета</span>
</h3>
<p>Каждая операция ("транзакция") <i>pacman</i> состоит из пяти последовательных шагов, включая пред- и пост-транзакционные хуки:
</p>
<ol>
<li>Если база данных не заблокирована, то транзакция инициализируется.</li>
<li>Определяются пакеты, над которыми будут выполняться действия.</li>
<li>В зависимости от заданных флагов выполняется подготовка транзакции, проверяется целостность базы данных, а также пакеты и их зависимости.</li>
<li>Транзакция выполняется:
<ol>
<li>Загружаются пакеты (<code>_alpm_sync_load</code>), если это необходимо.</li>
<li>Выполняются <code>PreTransaction</code>-хуки, которые возможно применить.</li>
<li>Удаляются пакеты, которые должны быть заменены, конфликтуют или явно указаны для удаления.</li>
<li>Добавляются пакеты.
<ol>
<li>Если пакет содержит установочный сценарий, выполняется функция <code>pre_install</code> (<code>pre_upgrade</code>/<code>pre_remove</code> для обновляемых и удаляемых пакетов соответственно).</li>
<li>Удаляются существующие файлы пакета (при обновлении или удалении пакета). Сохраняются только файлы настроек (смотрите <a href="../ru/Pacman/Pacnew_and_Pacsave.html" title="Pacman (Русский)/Pacnew and Pacsave (Русский)">/Pacnew and Pacsave</a>).</li>
<li>Распаковывается архив с новыми файлами пакета; файлы размещаются в нужные места файловой системы (при установке или обновлении пакета). Изменённые пользователем файлы настроек, которые нельзя просто перезаписать, остаются без изменений; новые файлы настроек сохраняются с суффиксом <i>.pacnew</i> (смотрите предыдущий шаг).</li>
<li>Если пакет содержит установочный сценарий, выполняется функция <code>post_install</code> (<code>post_upgrade</code>/<code>post_remove</code> для обновляемых и удаляемых пакетов соответственно).</li>
</ol>
</li>
<li>Выполняются <code>PostTransaction</code>-хуки, которые возможно применить.</li>
</ol>
</li>
<li>Завершение транзакции и освобождение ресурсов (например, разблокирование базы данных).</li>
</ol>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка">Настройка</span>
</h2>
<p>Настройки <i>pacman</i> находятся в файле <code>/etc/pacman.conf</code>. Подробную информацию о файле настроек можно найти в руководстве <span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span>.
</p>
<h3>
<span id=".D0.93.D0.BB.D0.BE.D0.B1.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B"></span><span class="mw-headline" id="Глобальные_параметры">Глобальные параметры</span>
</h3>
<p>Глобальные настройки <i>pacman</i> указываются в разделе <code>[options]</code>. Помимо руководства <span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span> некоторая информация о настройках из этого раздела содержится в комментариях самого файла <code>pacman.conf</code>.
</p>
<h4>
<span id=".D0.A1.D1.80.D0.B0.D0.B2.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2.D0.B5.D1.80.D1.81.D0.B8.D0.B9_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5.D0.BC"></span><span class="mw-headline" id="Сравнение_версий_пакетов_перед_обновлением">Сравнение версий пакетов перед обновлением</span>
</h4>
<p>Чтобы увидеть сравнение старых и новых версий доступных для обновления пакетов, раскомментируйте строку <code>VerbosePkgLists</code> в файле <code>pacman.conf</code>. Теперь команда <code>pacman -Syu</code> будет выводить примерно следующее:
</p>
<pre>Пакет (6)               Старая версия  Новая версия  Изменение размера  Размер загрузки

extra/libmariadbclient  10.1.9-4       10.1.10-1              0,03 MiB         4,35 MiB
extra/libpng            1.6.19-1       1.6.20-1               0,00 MiB         0,23 MiB
extra/mariadb           10.1.9-4       10.1.10-1              0,26 MiB        13,80 MiB
</pre>
<h4>
<span id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BB.D0.BB.D0.B5.D0.BB.D1.8C.D0.BD.D0.B0.D1.8F_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0"></span><span class="mw-headline" id="Параллельная_загрузка">Параллельная загрузка</span>
</h4>
<p>В <i>pacman</i> 6.0 была добавлена функциональность параллельной загрузки пакетов. Чтобы включить эту возможность, необходимо присвоить опции <code>ParallelDownloads</code> в файле <code>/etc/pacman.conf</code> любое положительное значение (например, <code>5</code>). В противном случае, если опция не задана, то пакеты будут загружаться последовательно.
</p>
<h4>
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BE.D1.82.D0.B4.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Запрет_на_обновление_отдельных_пакетов">Запрет на обновление отдельных пакетов</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Будьте осторожны при использовании этой настройки, потому что частичные обновления <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">не поддерживаются</a>.</div>
<p>Чтобы пропустить пакет во время <a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">обновления</a> системы добавьте его название в параметр <code>IgnorePkg</code> в разделе <code>[options]</code>:
</p>
<pre>IgnorePkg=linux
</pre>
<p>Если необходимо пропустить обновление для нескольких пакетов, укажите названия, разделив их пробелами, или используйте несколько строк <code>IgnorePkg</code>. Также можно использовать <a href="https://en.wikipedia.org/wiki/ru:%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D0%B0" class="extiw" title="wikipedia:ru:Шаблон поиска">шаблоны поиска</a>. Если нужно пропустить обновление пакета всего один раз, то лучше использовать опцию командной строки <code>--ignore</code> — здесь в качестве разделителя для названий пакетов используется запятая.
</p>
<p>При необходимости обновить пакет из списка исключений всё же можно, командой <code>pacman -S <i>название_пакета</i></code>: <i>pacman</i> при этом выведет напоминание, что пакет указан в <code>IgnorePkg</code>.
</p>
<h4>
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Запрет_на_обновление_группы_пакетов">Запрет на обновление группы пакетов</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Будьте осторожны при использовании этой настройки, потому что частичные обновления <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">не поддерживаются</a>.
</div>
<p>Аналогично запрету на обновление отдельного пакета, можно запретить обновление сразу для целой группы, например:
</p>
<pre>IgnoreGroup=gnome
</pre>
<h4>
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Запрет_на_обновление_файлов">Запрет на обновление файлов</span>
</h4>
<p>Файлы, указанные в параметре <code>NoUpgrade</code>, не будут изменяться в процессе установки/обновления; новые версии этих файлов будут сохраняться с расширением <i>.pacnew</i>.
</p>
<pre>NoUpgrade=<i>путь/к/файлу</i>
</pre>
<p>Указать несколько файлов можно так:
</p>
<pre>NoUpgrade=<i>путь/к/файлу1 путь/к/файлу2</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Путь к файлу соответствует названию файла в tar-архиве пакета. Следовательно, указывать ведущий слэш не нужно.
</div>
<h4>
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D1.83_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Запрет_на_установку_файлов">Запрет на установку файлов</span>
</h4>
<p>Чтобы запретить установку файлов в определённые каталоги, перечислите их в параметре <code>NoExtract</code>. Например, запрет установки юнитов <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a>:
</p>
<pre>NoExtract=usr/lib/systemd/system/*
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Pacman выводит предупреждение о недостающих файлах локализаций при обновлении пакетов, локали которых были удалены утилитами вроде <i>localepurge</i> или <i>bleachbit</i>. Чтобы отключить эти сообщения, закомментируйте параметр <code>CheckSpace</code> в файле <code>pacman.conf</code>, но имейте в виду, что это отключит функционал проверки наличия свободного места для всех пакетов.
</div>
<h4>
<span id=".D0.A0.D0.B0.D0.B1.D0.BE.D1.82.D0.B0_.D1.81_.D0.BD.D0.B5.D1.81.D0.BA.D0.BE.D0.BB.D1.8C.D0.BA.D0.B8.D0.BC.D0.B8_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0.D0.BC.D0.B8_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA"></span><span class="mw-headline" id="Работа_с_несколькими_файлами_настроек">Работа с несколькими файлами настроек</span>
</h4>
<p>Если имеется несколько конфигурационных файлов (например, основная конфигурация и дополнительная с подключённым репозиторием <a href="../ru/Official_repositories.html#%D0%A2%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D1%8B%D0%B5_%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B8" title="Official repositories (Русский)">testing</a>), то работу с ними можно упростить, если вынести общие пункты настроек в отдельный файл и подключать его с помощью опции <code>Include</code>:
</p>
<pre>Include = <i>/путь/к/файлу/общих/настроек</i>
</pre>
<p>В этом примере общие настройки вынесены в файл <code><i>/путь/к/файлу/общих/настроек</i></code>. Приведённую выше строку нужно добавить в оба файла настроек, основной и дополнительный.
</p>
<h4>
<span id=".D0.A5.D1.83.D0.BA.D0.B8"></span><span class="mw-headline" id="Хуки">Хуки</span>
</h4>
<p>Системные пре- и пост-транзакционные хуки хранятся в каталоге <code>/usr/share/libalpm/hooks</code>; <i>pacman</i> может выполнять хуки как из системного каталога, так и из каталогов, подключённых опцией — <code>HookDir</code> в файле <code>pacman.conf</code> (каталог по умолчанию — <code>/etc/pacman.d/hooks</code>). Название файла хука должно заканчиваться на <code>.hook</code>. Хуки <i>pacman</i> неинтерактивны.
</p>
<p>В частности, хуки <i>pacman</i> используются в связке с <code>systemd-sysusers</code> и <code>systemd-tmpfiles</code> для автоматического создания пользователей и файлов в процессе установки пакетов. Например, пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat8">tomcat8</a></span> требует наличия пользователя <code>tomcat8</code> и определённых каталогов, ему принадлежащих. Хуки <code>systemd-sysusers.hook</code> и <code>systemd-tmpfiles.hook</code> вызывают команды <code>systemd-sysusers</code> и <code>systemd-tmpfiles</code> соответственно, когда <i>pacman</i> видит в пакете указания на пользователей и временные файлы.
</p>
<p>Хуки <i>alpm</i> подробно описаны в руководстве <span class="plainlinks archwiki-template-man" title="$ man 5 alpm-hooks"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/alpm-hooks.5">alpm-hooks(5)</a></span>.
</p>
<h3>
<span id=".D0.A0.D0.B5.D0.BF.D0.BE.D0.B7.D0.B8.D1.82.D0.BE.D1.80.D0.B8.D0.B8_.D0.B8_.D0.B7.D0.B5.D1.80.D0.BA.D0.B0.D0.BB.D0.B0"></span><span class="mw-headline" id="Репозитории_и_зеркала">Репозитории и зеркала</span>
</h3>
<p>Помимо общего раздела <a href="#%D0%93%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B">[options]</a> в файле <code>pacman.conf</code> также содержатся отдельные разделы для каждого из репозиториев. Репозиторий — набор пакетов, который физически находится на одном или нескольких серверах; эти сервера называются <i>зеркалами</i> репозитория.
</p>
<p>Репозитории делятся на <a href="../ru/Official_repositories.html" title="Official repositories (Русский)">официальные</a> и <a href="../en/Unofficial_user_repositories.html" title="Unofficial user repositories">неофициальные</a>. Порядок репозиториев в файле настроек имеет значение: если в разных репозиториях содержатся пакеты с одинаковым названием, то вне зависимости от их версий предпочтение отдаётся тому пакету, репозиторий которого ближе к началу файла. Чтобы подключённый репозиторий можно было использовать, сначала необходимо выполнить полное <a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">обновление</a> системы.
</p>
<p>Разделы репозиториев в файле <code>pacman.conf</code> содержат информацию о зеркалах. Список зеркал хранится в отдельном файле и подключается параметром <code>Include</code>. Например, зеркала официальных репозиториев подключаются из файла <code>/etc/pacman.d/mirrorlist</code>. Настройка зеркал описана в статье <a href="../ru/Mirrors.html" title="Mirrors (Русский)">Mirrors</a>.
</p>
<h4>
<span id=".D0.9A.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3_.D0.B4.D0.BB.D1.8F_.D0.BA.D1.8D.D1.88.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Каталог_для_кэша_пакетов">Каталог для кэша пакетов</span>
</h4>
<p>Pacman хранит загруженные файлы пакетов в кэше — в каталоге, указанном в опции <code>CacheDir</code> в разделе <a href="#%D0%93%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B">[options]</a> файла <code>pacman.conf</code> (по умолчанию <code>/var/cache/pacman/pkg/</code>).
</p>
<p>Размер этого каталога может расти со временем, даже если в нём хранятся только самые свежие версии установленных пакетов.
</p>
<p>Если вы хотите переместить этот каталог в более удобное место, выполните одно из следующих действий:
</p>
<ul>
<li>В опцию <code>CacheDir</code> пропишите путь к новому каталогу. Не забудьте добавить косую черту в конце. <b>Это рекомендуемое решение</b>.</li>
<li>Примонтируйте отдельный раздел в <code>/var/cache/pacman/pkg/</code>
</li>
<li>Сделайте bind mount в <code>/var/cache/pacman/pkg/</code>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> <b>Не создавайте символическую ссылку</b> на месте каталога <code>/var/cache/pacman/pkg/</code>. Использование символической ссылки приведёт к тому, что <i>pacman</i> <b>сломает</b> сам себя в процессе обновления.</div>
<h4>
<span id=".D0.91.D0.B5.D0.B7.D0.BE.D0.BF.D0.B0.D1.81.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Безопасность_пакетов">Безопасность пакетов</span>
</h4>
<p>Pacman использует цифровые подписи в качестве дополнительного механизма обеспечения безопасности пакетов. Настройки проверки подписей задаются параметром <code>SigLevel</code>. По умолчанию в разделе <code>[options]</code> задано глобальное значение <code>SigLevel = Required DatabaseOptional</code>, что означает проверку подписей всех пакетов без исключения. Можно задать особые правила проверки подписей для отдельных репозиториев, указав параметр <code>SigLevel</code> в соответствующих разделах. Подробнее смотрите в статье <a href="../ru/Pacman/Package_signing.html" class="mw-redirect" title="Pacman/Подпись пакета">pacman/Подпись пакета</a>.
</p>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3>
<span id="Failed_to_commit_transaction_.28conflicting_files.29"></span><span class="mw-headline" id="Failed_to_commit_transaction_(conflicting_files)">Failed to commit transaction (conflicting files)</span>
</h3>
<p>Следующее сообщение об ошибке <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=56373">[1]</a>:
</p>
<pre>ошибка: не удалось завершить транзакцию (конфликтующие файлы)
<i>пакет</i>: '<i>/путь/к/файлу</i>' существует в файловой системе
Обнаружены ошибки, пакеты не обновлены.
</pre>
<p>означает, что при выполнении операции были обнаружены конфликтующие файлы. Pacman не будет их перезаписывать автоматически. Это не ошибка, так сделано специально.
</p>
<p>Проблема решается тривиально. Сначала проверьте, не принадлежит ли файл другому пакету (<code>pacman -Qo <i>/путь/к/файлу</i></code>). Если принадлежит, создайте <a href="../ru/Bug_reporting_guidelines.html" class="mw-redirect" title="Reporting bug guidelines (Русский)">отчет об ошибке</a>. Если проблемный файл не нужен другим пакетам, переименуйте его и перезапустите команду обновления. Если в дальнейшем проблем не возникнет, то старый файл можно удалить.
</p>
<p>Если программа была установлена вручную без <i>pacman</i> — например, при помощи команды <code>make install</code> — необходимо удалить программу и все её файлы, а затем выполнить установку при помощи <i>pacman</i>. Смотрите также <a href="../ru/Pacman/Tips_and_tricks.html#%D0%9F%D0%BE%D0%B8%D1%81%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D0%B1%D0%B5%D0%B7_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0-%D0%B2%D0%BB%D0%B0%D0%B4%D0%B5%D0%BB%D1%8C%D1%86%D0%B0" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы#Поиск файлов без пакета-владельца</a>.
</p>
<p>Информация о каждом установленном файле хранится в файле с метаданными пакета <code>/var/lib/pacman/local/<i>пакет-версия</i>/files</code>. При повреждении этого файла (он может быть пустым или отсутствовать) во время обновления пакета будет получена ошибка <code>file exists in filesystem</code> ("файл существует в файловой системе"). Обычно такие ошибки возникают во время установки или обновления всего лишь одного пакета. Вместо ручного переименования или удаления конфликтующих файлов, принадлежащих данному пакету, лучше выполнить команду <code>pacman -S --overwrite <i>шаблон</i> <i>пакет</i></code>, чтобы <i>pacman</i> принудительно перезаписал файлы, название которых совпадает с шаблоном.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Будьте осторожны при использовании ключа <code>--overwrite</code>. Смотрите <a href="../ru/System_maintenance.html#%D0%98%D0%B7%D0%B1%D0%B5%D0%B3%D0%B0%D0%B9%D1%82%D0%B5_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_pacman" class="mw-redirect" title="Обслуживание системы">Обслуживание системы#Избегайте определенных команд pacman</a>.
</div>
<h3>
<span id="Failed_to_commit_transaction_.28invalid_or_corrupted_package.29"></span><span class="mw-headline" id="Failed_to_commit_transaction_(invalid_or_corrupted_package)">Failed to commit transaction (invalid or corrupted package)</span>
</h3>
<p>Удалите все файлы <i>.part</i> (частично скачанные пакеты) из кэша <i>pacman</i> <code>/var/cache/pacman/pkg/</code>. Причиной ошибки чаще всего является пользовательская команда в параметре <code>XferCommand</code> файла <code>pacman.conf</code>.
</p>
<pre># find /var/cache/pacman/pkg/ -iname "*.part" -delete
</pre>
<h3>
<span id="Failed_to_init_transaction_.28unable_to_lock_database.29"></span><span class="mw-headline" id="Failed_to_init_transaction_(unable_to_lock_database)">Failed to init transaction (unable to lock database)</span>
</h3>
<p>Когда <i>pacman</i> собирается внести изменения в базу данных пакетов, например, при установке пакета, он создаёт файл блокировки <code>/var/lib/pacman/db.lck</code>. Это предотвращает запуск другого экземпляра <i>pacman</i> и таким образом спасает от возможного повреждения базы.
</p>
<p>Если работа <i>pacman</i> была прервана во время внесения изменений в базу, этот файл блокировки может остаться неудалённым, что может привести к появлению такой ошибки:
</p>
<pre>ошибка: не удалось начать транзакцию (не удалось заблокировать базу данных)
ошибка: не удалось заблокировать базу: Файл существует
</pre>
<p>Если вы уверены, что на вашей машине не запущено других экземпляров <i>pacman</i>, удалите этот файл блокировки:
</p>
<pre># rm /var/lib/pacman/db.lck
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Можно выполнить команду <code>fuser /var/lib/pacman/db.lck</code>, чтобы проверить, используется ли файл каким-то процессом.</div>
<h3>
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D0.BD.D0.B0.D0.B9.D1.82.D0.B8_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82_.D0.B4.D0.BB.D1.8F_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B8"></span><span class="mw-headline" id="Не_удаётся_найти_пакет_для_установки">Не удаётся найти пакет для установки</span>
</h3>
<p>Эта ошибка проявляется в сообщениях <code>Not found in sync db</code>, <code>не найдена цель</code> или <code>не удалось получить файл</code>.
</p>
<p>Удостоверьтесь, что пакет, который вы пытаетесь установить, действительно существует. Если это так, возможно, список хранящихся в репозиториях пакетов устарел. Выполните <code>pacman -Syu</code>, чтобы получить новый список и обновить систему. Также убедитесь, что выбранные <a href="../ru/Mirrors.html" title="Mirrors (Русский)">зеркала</a> в рабочем состоянии, а <a href="#%D0%A0%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B8_%D0%B8_%D0%B7%D0%B5%D1%80%D0%BA%D0%B0%D0%BB%D0%B0">репозитории</a> настроены правильно.
</p>
<p>Также есть вероятность того, что в вашей системе не включен репозиторий, содержащий нужный пакет — например, пакет находится в репозитории <a href="../ru/Official_repositories.html#multilib" title="Official repositories (Русский)">multilib</a>, но <code>multilib</code> не включен в файле <code>pacman.conf</code>.
</p>
<p>Смотрите также <a href="../ru/Frequently_asked_questions.html#%D0%9F%D0%BE%D1%87%D0%B5%D0%BC%D1%83_%D0%B2_%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D1%8F%D1%85_%D0%B5%D1%81%D1%82%D1%8C_%D1%82%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE_%D0%BE%D0%B4%D0%BD%D0%B0_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8F_%D0%BA%D0%B0%D0%B6%D0%B4%D0%BE%D0%B9_%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B8?" title="Frequently asked questions (Русский)">FAQ#Почему в репозиториях есть только одна версия каждой библиотеки?</a>
</p>
<h3>
<span id="pacman_.D0.BF.D0.B0.D0.B4.D0.B0.D0.B5.D1.82_.D0.BF.D1.80.D0.B8_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B8"></span><span class="mw-headline" id="pacman_падает_при_обновлении">pacman падает при обновлении</span>
</h3>
<p>Если при удалении пакетов <i>pacman</i> завершает свою работу с ошибкой "database write" ("запись в базу данных"), и после этого все попытки переустановки или обновления пакетов завершаются неудачей, сделайте следующее:
</p>
<ol>
<li>Загрузитесь, используя Arch Live USB. Желательно, чтобы версия <i>pacman</i> в образе была не старше той, что установлена в системе.</li>
<li>Смонтируйте корневую файловую систему, например, командой <code>mount /dev/sdaX /mnt</code> от root, и убедитесь, что в точке монтирования достаточно свободного места (команда <code>df -h</code>).</li>
<li>Смонтируйте файловые системы proc, sys и dev: <code>mount -t proc proc /mnt/proc; mount --rbind /sys /mnt/sys; mount --rbind /dev /mnt/dev </code>
</li>
<li>Если в системе используются стандартное расположение баз данных и каталогов, то можно синхронизировать базу данных <i>pacman</i> и обновить систему командой <code>pacman --sysroot /mnt -Syu</code> с правами root.
<ul><li>Кроме того, если не удаётся обновить систему, изучите рекомендации из <a href="../ru/Pacman/Tips_and_tricks.html#%D0%9F%D0%B5%D1%80%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B2%D1%81%D0%B5%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы#Переустановка всех пакетов</a>.</li></ul>
</li>
<li>После обновления стоит убедиться, что в системе не осталось необновлённых нерабочих пакетов: <code>find /mnt/usr/lib -size 0</code>.</li>
<li>Если такие пакеты всё же есть, их нужно переустановить: <code>pacman --sysroot /mnt -S <i>пакет</i></code>.</li>
</ol>
<h4>
<span id="pacman:_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B0_.D0.BD.D0.B5_.D0.BD.D0.B0.D0.B9.D0.B4.D0.B5.D0.BD.D0.B0"></span><span class="mw-headline" id="pacman:_команда_не_найдена">pacman: команда не найдена</span>
</h4>
<p>Если <code>/var/cache/pacman/pkg</code> является символической ссылкой, <i>pacman</i> в процессе самообновления попытается вместо неё создать каталог и таким образом удалит эту символическую ссылку. Из-за этого обновление завершится неудачей. В результате <code>/usr/bin/pacman</code> и другие файлы из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> исчезнут из системы.
</p>
<p>Никогда не делайте <code>/var/cache/pacman/pkg</code> символической ссылкой, так как этот путь находится под контролем <i>pacman</i>. Вместо этого используйте опцию <code>CacheDir</code> или bind mount; подробнее смотрите <a href="#%D0%9A%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3_%D0%B4%D0%BB%D1%8F_%D0%BA%D1%8D%D1%88%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">#Каталог для кэша пакетов</a>.
</p>
<p>Если вы всё-таки столкнулись с этой проблемой и сломали свою систему, вы можете вручную извлечь содержимое <code>/usr</code> из пакета, чтобы восстановить <i>pacman</i>, а затем корректно его переустановить; смотрите <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/73306">FS#73306</a> и <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=241213">тему на форуме</a> для подробностей.
</p>
<h3>
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_pacman_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E"></span><span class="mw-headline" id="Переустановка_pacman_вручную">Переустановка pacman вручную</span>
</h3>
<h4>
<span id=".D0.A1_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_pacman-static"></span><span class="mw-headline" id="С_помощью_pacman-static">С помощью pacman-static</span>
</h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacman-static/">pacman-static</a></span><sup><small>AUR</small></sup> — статически скомпонованная версия <i>pacman</i>, которая может работать даже при отключении/повреждении системных библиотек. Это может помочь, если произошло <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">частичное обновление</a> и <i>pacman</i> больше не работает.
</p>
<p>Прикреплённый комментарий в PKGBUILD содержит ссылку на закачку двоичного файла, с помощью которого можно переустановить <i>pacman</i> или обновить систему целиком в случае частичного обновления.
</p>
<h4>
<span id=".D0.A1_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D0.B2.D0.BD.D0.B5.D1.88.D0.BD.D0.B5.D0.B3.D0.BE_pacman"></span><span class="mw-headline" id="С_помощью_внешнего_pacman">С помощью внешнего pacman</span>
</h4>
<p>Если не работает даже <code>pacman-static</code>, то можно попробовать восстановить систему с помощью внешнего <i>pacman</i>. Простейший способ — воспользоваться <a href="../ru/Archiso.html" title="Archiso (Русский)">archiso</a> и указать точку монтирования в опции <code>--sysroot</code> или <code>--root</code>. Подробнее о том, как смонтировать файловую систему для <code>--sysroot</code>, смотрите <a href="../ru/Chroot.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_chroot" title="Chroot (Русский)">chroot#Используя chroot</a>.
</p>
<h4>
<span id=".D0.98.D0.B7.D0.B2.D0.BB.D0.B5.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E"></span><span class="mw-headline" id="Извлечение_вручную">Извлечение вручную</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Есть большая вероятность, что следуя рекомендациям ниже вы добьёте свою систему. Используйте их как последнее средство, если советы из раздела <a href="#pacman_%D0%BF%D0%B0%D0%B4%D0%B0%D0%B5%D1%82_%D0%BF%D1%80%D0%B8_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8">#pacman падает при обновлении</a> не помогли или нереализуемы.
</div>
<p>Даже если <i>pacman</i> не подаёт признаков жизни, всё ещё можно починить его вручную, загрузив последние версии пакетов и распаковав файлы в нужные места. Последовательность действий:
</p>
<ol>
<li>Узнайте зависимости пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span>.</li>
<li>Скачайте пакеты с любого рабочего <a href="../ru/Mirrors.html" title="Mirrors (Русский)">зеркала</a>.</li>
<li>Извлеките каждый пакет в корневой каталог.</li>
<li>Переустановите эти пакеты командами <code>pacman -S --overwrite <i>название_пакета</i></code>, чтобы обновить базу данных.</li>
<li>Выполните полное обновление системы.</li>
</ol>
<p>Если у вас имеется доступ к другой работоспособной системе с Arch Linux, полный список зависимостей можно узнать командой
</p>
<pre>$ pacman -Q $(pactree -u pacman)
</pre>
<p>Возможно, вам необходимо обновить только несколько пакетов, в зависимости от серьёзности проблемы. Пример команды распаковки архива пакета:
</p>
<pre># tar -xvpwf <i>пакет.tar.zst</i> -C / --exclude .PKGINFO --exclude .INSTALL --exclude .MTREE --exclude .BUILDINFO
</pre>
<p>Обратите внимание на флаг <code>-w</code>, который включает интерактивный режим. Запускать распаковку неинтерактивно рискованно, потому что можно перезаписать важный файл. Также не забудьте, что пакеты нужно распаковывать в правильном порядке (сначала зависимости). <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=95007">На форуме</a> рассмотрен пример процесса восстановления работоспособности <i>pacman</i> c несколькими неработающими пакетами-зависимостями.
</p>
<h3>
<span id=".D0.9E.D1.88.D0.B8.D0.B1.D0.BA.D0.B0_.22Unable_to_find_root_device.22_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8"></span><span class="mw-headline" id='Ошибка_"Unable_to_find_root_device"_после_перезагрузки'>Ошибка "Unable to find root device" после перезагрузки</span>
</h3>
<p>Вероятно, при обновлении <a href="../ru/Kernel.html" title="Kernel (Русский)">ядра</a> был повреждён образ <a href="../ru/Arch_boot_process.html#initramfs" title="Arch boot process (Русский)">initramfs</a> (например, при использовании <i>pacman</i> с опцией <code>--overwrite</code>). Для восстановления работоспособности есть два варианта, и первый из них — использовать <i>fallback</i>-образ.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Если вы удалили этот пункт из меню загрузчика по каким-либо причинам, вы можете нажать клавишу <code>Tab</code> (при использовании Syslinux) или <code>e</code> (при использовании GRUB или systemd-boot), когда на экране появится меню загрузчика, переименовать образ в <code>initramfs-linux-fallback.img</code> и нажать <code>Enter</code> или <code>b</code> (в зависимости от используемого <a href="../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" title="Arch boot process (Русский)">загрузчика</a>), чтобы выполнить загрузку с новыми параметрами.
</div>
<p>Когда система запустится, выполните команду пересборки образа initramfs либо из консоли, либо из терминала (для стандартного ядра <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>):
</p>
<pre># mkinitcpio -p linux
</pre>
<p>Если этот способ не сработает, загрузитесь с Live-USB, <a href="../ru/File_systems.html#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" title="File systems (Русский)">смонтируйте</a> корневой и загрузочный разделы, после чего сделайте <a href="../ru/Chroot.html" title="Chroot (Русский)">chroot</a> командой <i>arch-chroot</i>:
</p>
<pre># arch-chroot /mnt
# pacman -Syu mkinitcpio systemd linux
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Если у вас нет текущего релиза, или есть только какой-либо другой "live"-дистрибутив Linux, вы можете выполнить <a href="../ru/Chroot.html" class="mw-redirect" title="Change root (Русский)">chroot</a>, используя старый способ. Очевидно, при этом вам придется напечатать больше, чем просто <code>arch-chroot</code> для запуска соответствующего скрипта.</li>
<li>Если <i>pacman</i> выдаёт ошибку <code>Could not resolve host</code>, <a href="../ru/Network_configuration.html#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F" title="Network configuration (Русский)">проверьте ваше интернет-соединение</a>.</li>
<li>Если вы не можете войти в окружение arch-chroot или chroot, но нуждаетесь в переустановке пакетов, можете использовать команду <code>pacman --sysroot /mnt -Syu foo bar</code>, чтобы указать <i>pacman</i> ваш корневой раздел.</li>
</ul>
</div>
<p>Переустановка ядра (пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>) автоматически пересоздаст образ initramfs при помощи <code>mkinitcpio -p linux</code>. Нет необходимости дополнительно вводить эту команду.
</p>
<p>После всего этого рекомендуется выполнить <code>exit</code>, <code>umount /mnt/{boot,} </code> и <code>reboot</code>.
</p>
<h3>
<span id="Warning:_current_locale_is_invalid.3B_using_default_.22C.22_locale"></span><span class="mw-headline" id='Warning:_current_locale_is_invalid;_using_default_"C"_locale'>Warning: current locale is invalid; using default "C" locale</span>
</h3>
<p>Как сказано в сообщении ошибки, локаль системы настроена неправильно (смотрите статью <a href="../ru/Locale.html" class="mw-redirect" title="Локали">Локали</a>).
</p>
<h3>
<span id="pacman_.D0.B8.D0.B3.D0.BD.D0.BE.D1.80.D0.B8.D1.80.D1.83.D0.B5.D1.82_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D0.BF.D1.80.D0.BE.D0.BA.D1.81.D0.B8"></span><span class="mw-headline" id="pacman_игнорирует_настройки_прокси">pacman игнорирует настройки прокси</span>
</h3>
<p>Удостоверьтесь, что соответствующие переменные окружения (<code>$http_proxy</code>, <code>$ftp_proxy</code> и т.д.) заданы верно. Если вы используете <i>pacman</i> вместе с <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a>, необходимо настроить sudo на <a href="../ru/Sudo.html#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F" title="Sudo (Русский)">передачу переменных окружения в pacman</a>. Также убедитесь, что настройки <a href="../en/GnuPG.html#Use_a_keyserver" title="GnuPG">dirmngr</a> в файле <code>/etc/pacman.d/gnupg/dirmngr.conf</code> содержат параметр <code>honor-http-proxy</code>, отвечающий за использование прокси при обновлении ключей.
</p>
<h3>
<span id=".D0.9A.D0.B0.D0.BA_.D0.BF.D0.B5.D1.80.D0.B5.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.B8.D1.82.D1.8C_.D0.B2.D1.81.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D1.8B.2C_.D1.81.D0.BE.D1.85.D1.80.D0.B0.D0.BD.D0.B8.D0.B2_.D0.B8.D0.BD.D1.84.D0.BE.D1.80.D0.BC.D0.B0.D1.86.D0.B8.D1.8E_.D0.BE_.D1.82.D0.BE.D0.BC.2C_.D0.BA.D0.B0.D0.BA.D0.B8.D0.B5_.D0.B8.D0.B7_.D0.BD.D0.B8.D1.85_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D1.8B_.D1.8F.D0.B2.D0.BD.D0.BE.2C_.D0.B0_.D0.BA.D0.B0.D0.BA.D0.B8.D0.B5_.E2.80.94_.D0.B2_.D0.BA.D0.B0.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.B5_.D0.B7.D0.B0.D0.B2.D0.B8.D1.81.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B5.D0.B9.3F"></span><span class="mw-headline" id="Как_переустановить_все_пакеты,_сохранив_информацию_о_том,_какие_из_них_установлены_явно,_а_какие_—_в_качестве_зависимостей?">Как переустановить все пакеты, сохранив информацию о том, какие из них установлены явно, а какие — в качестве зависимостей?</span>
</h3>
<p>Чтобы переустановить все пакеты из официальных репозиториев, выполните <code>pacman -S $(pacman -Qnq)</code> (опция <code>-S</code> сохраняет причину установки по умолчанию).
</p>
<p>После этого необходимо переустановить все пакеты из неизвестных источников, список которых можно получить командой <code>pacman -Qmq</code>.
</p>
<h3><span class="mw-headline" id="Cannot_open_shared_object_file">Cannot open shared object file</span></h3>
<p>Скорее всего, это означает, что при выполнении предыдущей операции <i>pacman</i> удалил или повредил разделяемые библиотеки, необходимые для него самого.
</p>
<p>Чтобы выйти из этой ситуации, нужно вручную распаковать необходимые библиотеки в вашу файловую систему. Сперва определите, в каком пакете содержится требуемая библиотека, а затем найдите этот пакет в кэше <i>pacman</i> (<code>/var/cache/pacman/pkg/</code>). Распакуйте разделяемую библиотеку в файловую систему. Это позволит вам запустить <i>pacman</i>.
</p>
<p>Теперь необходимо <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">переустановить</a> испорченный пакет. При этом обязательно используйте ключ <code>--overwrite</code>, поскольку вы лишь распаковали системные файлы, но <i>pacman</i> об этом не знает. Pacman корректно заменит ваш файл разделяемой библиотеки на тот, что имеется в пакете.
</p>
<p>Вот и все. Обновите оставшуюся часть системы.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.BE.D0.B9_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Проблемы_с_загрузкой_пакетов">Проблемы с загрузкой пакетов</span>
</h3>
<p>Были сообщения о некоторых сетевых проблемах, которые приводят к невозможности обновления/синхронизации: <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=68944">[2]</a>, <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=65728">[3]</a>. При обычной установке Arch Linux эти проблемы не появляются, так как стандартный загрузчик файлов при этом заменяется другим (смотрите <a href="../ru/Pacman/Tips_and_tricks.html#%D0%9F%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы#Производительность</a>). При установке Arch Linux в <a href="../ru/VirtualBox.html" title="VirtualBox (Русский)">VirtualBox</a> эта проблема также появляется, когда вы используете опцию виртуальной машины <i>Host interface</i> вместо <i>NAT</i>.
</p>
<h3>
<span id="Failed_retrieving_file_.27core.db.27_from_mirror"></span><span class="mw-headline" id="Failed_retrieving_file_'core.db'_from_mirror">Failed retrieving file 'core.db' from mirror</span>
</h3>
<p>Если <a href="../ru/Mirrors.html" title="Mirrors (Русский)">зеркала</a> настроены правильно, но вы получаете сообщение об ошибке <code>не удалось получить файл 'core.db'</code>, попробуйте выбрать другой <a href="../ru/Domain_name_resolution.html" title="Domain name resolution (Русский)">сервер имён</a>.
</p>
<h3>
<span id=".27local-package.pkg.tar.27:_permission_denied"></span><span class="mw-headline" id="'local-package.pkg.tar':_permission_denied">'local-package.pkg.tar': permission denied</span>
</h3>
<p>Если вы пытались установить пакет в смонтированной файловой системе sshfs с помощью команды <code>pacman -U</code> и получили такую ошибку, переместите пакет в локальный каталог и попробуйте ещё раз.
</p>
<h3>
<span id="error:_could_not_determine_cachedir_mount_point_.2Fvar.2Fcache.2Fpacman.2Fpkg"></span><span class="mw-headline" id="error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg">error: could not determine cachedir mount point /var/cache/pacman/pkg</span>
</h3>
<p>Во время выполнения в chroot-окружении, например, команды <code>pacman -Syu</code>, может произойти следующая ошибка:
</p>
<pre>error: could not determine cachedir mount point /var/cache/pacman/pkg
error: failed to commit transaction (not enough free disk space)
</pre>
<p>Такое часто случается, если каталог для chroot не являлся точкой монтирования на момент входа в chroot. Решение проблемы приведено в примечании к <a href="../ru/Install_Arch_Linux_from_existing_Linux.html#%D0%A1%D0%BA%D0%B0%D1%87%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B1%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D1%85_%D1%83%D1%82%D0%B8%D0%BB%D0%B8%D1%82" class="mw-redirect" title="Установка Arch из другого дистрибутива">Установка Arch из другого дистрибутива#Скачивание базовых утилит</a>, а объяснения и пример bind-монтирования с превращением chroot-каталога в точку монтирования можно найти в <span class="plainlinks archwiki-template-man" title="$ man 8 arch-chroot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/arch-chroot.8">arch-chroot(8)</a></span>.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://archlinux.org/pacman/">Страница проекта pacman</a></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 3 libalpm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libalpm.3">libalpm(3)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 pacman"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.8">pacman(8)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 repo-add"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/repo-add.8">repo-add(8)</a></span></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:Package_manager.html" title="Category:Package manager (Русский)">Package manager (Русский)</a></li>
<li><a href="../ru/Category:Arch_projects.html" title="Category:Arch projects (Русский)">Arch projects (Русский)</a></li>
<li><a href="../ru/Category:Commands.html" title="Category:Commands (Русский)">Commands (Русский)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=799334">https://wiki.archlinux.org/index.php?title=Pacman_(Русский)&amp;oldid=799334</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 February 2024, at 18:08.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
