<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>pacman (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pacman_Русский rootpage-Pacman_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Использование" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Использование</span>
			</div>
		</a>
		
			<button aria-controls="toc-Использование-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Использование subsection</span>
			</button>
		
		<ul id="toc-Использование-sublist" class="vector-toc-list">
			<li id="toc-Установка_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Установка пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Установка_пакетов-sublist" class="vector-toc-list">
				<li id="toc-Установка_отдельных_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.1</span>
					<span>Установка отдельных пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Установка_отдельных_пакетов-sublist" class="vector-toc-list">
				<li id="toc-Виртуальные_пакеты" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.1.1</span>
					<span>Виртуальные пакеты</span>
				</div>
			</a>
			
			<ul id="toc-Виртуальные_пакеты-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Установка_группы_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.2</span>
					<span>Установка группы пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Установка_группы_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Удаление_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Удаление пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Удаление_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Обновление_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Обновление пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Обновление_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запросы_к_базам_данных_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_%D0%BA_%D0%B1%D0%B0%D0%B7%D0%B0%D0%BC_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Запросы к базам данных пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Запросы_к_базам_данных_пакетов-sublist" class="vector-toc-list">
				<li id="toc-Pactree" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Pactree">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.1</span>
					<span>Pactree</span>
				</div>
			</a>
			
			<ul id="toc-Pactree-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Структура_базы_данных" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.2</span>
					<span>Структура базы данных</span>
				</div>
			</a>
			
			<ul id="toc-Структура_базы_данных-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Очистка_кэша_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%87%D0%B8%D1%81%D1%82%D0%BA%D0%B0_%D0%BA%D1%8D%D1%88%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.5</span>
					<span>Очистка кэша пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Очистка_кэша_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Дополнительные_команды" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.6</span>
					<span>Дополнительные команды</span>
				</div>
			</a>
			
			<ul id="toc-Дополнительные_команды-sublist" class="vector-toc-list">
				<li id="toc-dry_run" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#dry_run">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.6.1</span>
					<span>dry run</span>
				</div>
			</a>
			
			<ul id="toc-dry_run-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Причина_установки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D1%87%D0%B8%D0%BD%D0%B0_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.7</span>
					<span>Причина установки</span>
				</div>
			</a>
			
			<ul id="toc-Причина_установки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Процесс_установки/обновления/удаления_пакета" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8/%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F/%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.8</span>
					<span>Процесс установки/обновления/удаления пакета</span>
				</div>
			</a>
			
			<ul id="toc-Процесс_установки/обновления/удаления_пакета-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Настройка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Настройка</span>
			</div>
		</a>
		
			<button aria-controls="toc-Настройка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка subsection</span>
			</button>
		
		<ul id="toc-Настройка-sublist" class="vector-toc-list">
			<li id="toc-Глобальные_параметры" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%93%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Глобальные параметры</span>
				</div>
			</a>
			
			<ul id="toc-Глобальные_параметры-sublist" class="vector-toc-list">
				<li id="toc-Сравнение_версий_пакетов_перед_обновлением" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B9_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>Сравнение версий пакетов перед обновлением</span>
				</div>
			</a>
			
			<ul id="toc-Сравнение_версий_пакетов_перед_обновлением-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Параллельная_загрузка" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%B0%D1%80%D0%B0%D0%BB%D0%BB%D0%B5%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.2</span>
					<span>Параллельная загрузка</span>
				</div>
			</a>
			
			<ul id="toc-Параллельная_загрузка-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запрет_на_обновление_отдельных_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.3</span>
					<span>Запрет на обновление отдельных пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Запрет_на_обновление_отдельных_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запрет_на_обновление_группы_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.4</span>
					<span>Запрет на обновление группы пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Запрет_на_обновление_группы_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запрет_на_обновление_файлов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.5</span>
					<span>Запрет на обновление файлов</span>
				</div>
			</a>
			
			<ul id="toc-Запрет_на_обновление_файлов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запрет_на_установку_файлов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D1%83_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.6</span>
					<span>Запрет на установку файлов</span>
				</div>
			</a>
			
			<ul id="toc-Запрет_на_установку_файлов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Работа_с_несколькими_файлами_настроек" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D0%BC%D0%B8_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.7</span>
					<span>Работа с несколькими файлами настроек</span>
				</div>
			</a>
			
			<ul id="toc-Работа_с_несколькими_файлами_настроек-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Хуки" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A5%D1%83%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.8</span>
					<span>Хуки</span>
				</div>
			</a>
			
			<ul id="toc-Хуки-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Репозитории_и_зеркала" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B8_%D0%B8_%D0%B7%D0%B5%D1%80%D0%BA%D0%B0%D0%BB%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Репозитории и зеркала</span>
				</div>
			</a>
			
			<ul id="toc-Репозитории_и_зеркала-sublist" class="vector-toc-list">
				<li id="toc-Каталог_для_кэша_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3_%D0%B4%D0%BB%D1%8F_%D0%BA%D1%8D%D1%88%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Каталог для кэша пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Каталог_для_кэша_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Безопасность_пакетов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Безопасность пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Безопасность_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Решение проблем</span>
			</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Failed_to_commit_transaction_(conflicting_files)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_commit_transaction_(conflicting_files)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Failed to commit transaction (conflicting files)</span>
				</div>
			</a>
			
			<ul id="toc-Failed_to_commit_transaction_(conflicting_files)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_commit_transaction_(invalid_or_corrupted_package)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_commit_transaction_(invalid_or_corrupted_package)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Failed to commit transaction (invalid or corrupted package)</span>
				</div>
			</a>
			
			<ul id="toc-Failed_to_commit_transaction_(invalid_or_corrupted_package)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_init_transaction_(unable_to_lock_database)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_to_init_transaction_(unable_to_lock_database)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Failed to init transaction (unable to lock database)</span>
				</div>
			</a>
			
			<ul id="toc-Failed_to_init_transaction_(unable_to_lock_database)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_найти_пакет_для_установки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%BD%D0%B0%D0%B9%D1%82%D0%B8_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82_%D0%B4%D0%BB%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Не удаётся найти пакет для установки</span>
				</div>
			</a>
			
			<ul id="toc-Не_удаётся_найти_пакет_для_установки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Исправление_не_загружающейся_системы,_вызванной_прерванным_обновлением" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B0%D1%8E%D1%89%D0%B5%D0%B9%D1%81%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B,_%D0%B2%D1%8B%D0%B7%D0%B2%D0%B0%D0%BD%D0%BD%D0%BE%D0%B9_%D0%BF%D1%80%D0%B5%D1%80%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%BC_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Исправление не загружающейся системы, вызванной прерванным обновлением</span>
				</div>
			</a>
			
			<ul id="toc-Исправление_не_загружающейся_системы,_вызванной_прерванным_обновлением-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-pacman_падает_при_обновлении" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#pacman_%D0%BF%D0%B0%D0%B4%D0%B0%D0%B5%D1%82_%D0%BF%D1%80%D0%B8_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>pacman падает при обновлении</span>
				</div>
			</a>
			
			<ul id="toc-pacman_падает_при_обновлении-sublist" class="vector-toc-list">
				<li id="toc-pacman:_команда_не_найдена" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#pacman:_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0_%D0%BD%D0%B5_%D0%BD%D0%B0%D0%B9%D0%B4%D0%B5%D0%BD%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6.1</span>
					<span>pacman: команда не найдена</span>
				</div>
			</a>
			
			<ul id="toc-pacman:_команда_не_найдена-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Переустановка_pacman_вручную" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_pacman_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7</span>
					<span>Переустановка pacman вручную</span>
				</div>
			</a>
			
			<ul id="toc-Переустановка_pacman_вручную-sublist" class="vector-toc-list">
				<li id="toc-С_помощью_pacman-static" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_pacman-static">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7.1</span>
					<span>С помощью pacman-static</span>
				</div>
			</a>
			
			<ul id="toc-С_помощью_pacman-static-sublist" class="vector-toc-list">
				<li id="toc-Использование_предварительно_скомпилированного_двоичного_файла_pacman-static_при_сбое_сборки_PKGBUILD" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D0%B2%D0%B0%D1%80%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE_%D1%81%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B2%D0%BE%D0%B8%D1%87%D0%BD%D0%BE%D0%B3%D0%BE_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0_pacman-static_%D0%BF%D1%80%D0%B8_%D1%81%D0%B1%D0%BE%D0%B5_%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B8_PKGBUILD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7.1.1</span>
					<span>Использование предварительно скомпилированного двоичного файла pacman-static при сбое сборки PKGBUILD</span>
				</div>
			</a>
			
			<ul id="toc-Использование_предварительно_скомпилированного_двоичного_файла_pacman-static_при_сбое_сборки_PKGBUILD-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-С_помощью_внешнего_pacman" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B5%D0%B3%D0%BE_pacman">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7.2</span>
					<span>С помощью внешнего pacman</span>
				</div>
			</a>
			
			<ul id="toc-С_помощью_внешнего_pacman-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Извлечение_вручную" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%B2%D0%BB%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7.3</span>
					<span>Извлечение вручную</span>
				</div>
			</a>
			
			<ul id="toc-Извлечение_вручную-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Ошибка_&quot;Unable_to_find_root_device&quot;_после_перезагрузки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%88%D0%B8%D0%B1%D0%BA%D0%B0_&quot;Unable_to_find_root_device&quot;_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.8</span>
					<span>Ошибка "Unable to find root device" после перезагрузки</span>
				</div>
			</a>
			
			<ul id="toc-Ошибка_&quot;Unable_to_find_root_device&quot;_после_перезагрузки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Warning:_current_locale_is_invalid;_using_default_&quot;C&quot;_locale" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Warning:_current_locale_is_invalid;_using_default_&quot;C&quot;_locale">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.9</span>
					<span>Warning: current locale is invalid; using default "C" locale</span>
				</div>
			</a>
			
			<ul id="toc-Warning:_current_locale_is_invalid;_using_default_&quot;C&quot;_locale-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Предупреждающие_сообщения_о_пропущенных_локалях" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B5%D0%B4%D1%83%D0%BF%D1%80%D0%B5%D0%B6%D0%B4%D0%B0%D1%8E%D1%89%D0%B8%D0%B5_%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BE_%D0%BF%D1%80%D0%BE%D0%BF%D1%83%D1%89%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8F%D1%85">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.10</span>
					<span>Предупреждающие сообщения о пропущенных локалях</span>
				</div>
			</a>
			
			<ul id="toc-Предупреждающие_сообщения_о_пропущенных_локалях-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-pacman_игнорирует_настройки_прокси" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#pacman_%D0%B8%D0%B3%D0%BD%D0%BE%D1%80%D0%B8%D1%80%D1%83%D0%B5%D1%82_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_%D0%BF%D1%80%D0%BE%D0%BA%D1%81%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.11</span>
					<span>pacman игнорирует настройки прокси</span>
				</div>
			</a>
			
			<ul id="toc-pacman_игнорирует_настройки_прокси-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Как_переустановить_все_пакеты,_сохранив_информацию_о_том,_какие_из_них_установлены_явно,_а_какие_—_в_качестве_зависимостей?" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D0%B0%D0%BA_%D0%BF%D0%B5%D1%80%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C_%D0%B2%D1%81%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D1%8B,_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%B2_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8E_%D0%BE_%D1%82%D0%BE%D0%BC,_%D0%BA%D0%B0%D0%BA%D0%B8%D0%B5_%D0%B8%D0%B7_%D0%BD%D0%B8%D1%85_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D1%8B_%D1%8F%D0%B2%D0%BD%D0%BE,_%D0%B0_%D0%BA%D0%B0%D0%BA%D0%B8%D0%B5_%E2%80%94_%D0%B2_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5_%D0%B7%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B5%D0%B9?">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.12</span>
					<span>Как переустановить все пакеты, сохранив информацию о том, какие из них установлены явно, а какие — в качестве зависимостей?</span>
				</div>
			</a>
			
			<ul id="toc-Как_переустановить_все_пакеты,_сохранив_информацию_о_том,_какие_из_них_установлены_явно,_а_какие_—_в_качестве_зависимостей?-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cannot_open_shared_object_file" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cannot_open_shared_object_file">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.13</span>
					<span>Cannot open shared object file</span>
				</div>
			</a>
			
			<ul id="toc-Cannot_open_shared_object_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблемы_с_загрузкой_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%BE%D0%B9_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.14</span>
					<span>Проблемы с загрузкой пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Проблемы_с_загрузкой_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_retrieving_file_'core.db'_from_mirror" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Failed_retrieving_file_'core.db'_from_mirror">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.15</span>
					<span>Failed retrieving file 'core.db' from mirror</span>
				</div>
			</a>
			
			<ul id="toc-Failed_retrieving_file_'core.db'_from_mirror-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-'local-package.pkg.tar':_permission_denied" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#'local-package.pkg.tar':_permission_denied">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.16</span>
					<span>'local-package.pkg.tar': permission denied</span>
				</div>
			</a>
			
			<ul id="toc-'local-package.pkg.tar':_permission_denied-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.17</span>
					<span>error: could not determine cachedir mount point /var/cache/pacman/pkg</span>
				</div>
			</a>
			
			<ul id="toc-error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-error:_GPGME_error:_No_data" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#error:_GPGME_error:_No_data">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.18</span>
					<span>error: GPGME error: No data</span>
				</div>
			</a>
			
			<ul id="toc-error:_GPGME_error:_No_data-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-error:_GPGME_error:_General_error_and_&quot;::_File_/var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst_is_corrupted_(invalid_or_corrupted_package_(PGP_signature))." class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#error:_GPGME_error:_General_error_and_&quot;::_File_/var/cache/pacman/pkg/<package>.pkg.tar.zst_is_corrupted_(invalid_or_corrupted_package_(PGP_signature)).">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.19</span>
					<span>error: GPGME error: General error and ":: File /var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst is corrupted (invalid or corrupted package (PGP signature)).</span>
				</div>
			</a>
			
			<ul id="toc-error:_GPGME_error:_General_error_and_&quot;::_File_/var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst_is_corrupted_(invalid_or_corrupted_package_(PGP_signature)).-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Переустановка_сломанных_или_несинхронизированных_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81%D0%BB%D0%BE%D0%BC%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%B8%D0%BB%D0%B8_%D0%BD%D0%B5%D1%81%D0%B8%D0%BD%D1%85%D1%80%D0%BE%D0%BD%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.20</span>
					<span>Переустановка сломанных или несинхронизированных пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Переустановка_сломанных_или_несинхронизированных_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Смотрите также</span>
			</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">pacman (Русский)</h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../en/aa39ad8e51e35798096a6208c66bfd26.html" class="mw-redirect" title="Pacman/Подпись пакета">pacman/Подпись пакета</a></li>
<li><a href="../ru/553da77ed2d72fad845f4f22fc3d2fe0.html" class="mw-redirect" title="Pacman (Русский)/Pacnew и Pacsave">pacman (Русский)/Pacnew и Pacsave</a></li>
<li><a href="../en/868191a801bfbc072182572d3a84745c.html" class="mw-redirect" title="Pacman/Восстановление локальной базы данных">pacman/Восстановление локальной базы данных</a></li>
<li><a href="../en/Pacman/Rosetta.html" title="Pacman/Rosetta">pacman/Rosetta</a></li>
<li><a href="../en/2e4d227f9777e5ab77c3bc6da83f5768.html" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы</a></li>
<li><a href="../en/30c45e8c66befb80fb2b1d9cb7b9a8d7.html" class="mw-redirect" title="Пользовательский репозиторий Arch">Пользовательский репозиторий Arch</a></li>
<li><a href="../en/6a6fcf05ad6d91351ec7e276ecf38c99.html" class="mw-redirect" title="Создание пакетов">Создание пакетов</a></li>
<li><a href="../en/faa6507255f03b7e9a006a00039d6b43.html" class="mw-redirect" title="Откат пакетов">Откат пакетов</a></li>
<li><a href="../ru/Frequently_asked_questions.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0%D0%BC%D0%B8" class="mw-redirect" title="ЧаВо">ЧаВо#Управление пакетами</a></li>
<li><a href="../en/2ca8a9d540e03cdeaa29635b80327fb3.html" class="mw-redirect" title="Обслуживание системы">Обслуживание системы</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Pacman.html" title="Pacman">pacman</a>. Дата последней синхронизации: 6 августа 2025. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Pacman&amp;diff=0&amp;oldid=842653">изменения</a>.</div>
<p><a href="https://en.wikipedia.org/wiki/ru:%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0%D0%BC%D0%B8" class="extiw" title="wikipedia:ru:Система управления пакетами">Пакетный менеджер</a> <a rel="nofollow" class="external text" href="https://archlinux.org/pacman/">pacman</a> — одна из важнейших отличительных особенностей Arch Linux. Он объединил в себе двоичный формат пакетов и лёгкую в использовании <a href="../ru/Arch_build_system.html" title="Arch build system (Русский)">систему сборки</a>. Цель <i>pacman</i> — удобное управление пакетами вне зависимости от того, взяты они из <a href="../ru/Official_repositories.html" title="Official repositories (Русский)">официальных репозиториев</a> или же собраны самостоятельно.
</p>
<p><i>Pacman</i> поддерживает систему в актуальном состоянии, синхронизируя пакеты с мастер-сервером. Эта клиент-серверная модель позволяет пользователю скачивать/устанавливать пакеты со всеми необходимыми зависимостями всего одной командой.
</p>
<p><i>Pacman</i> написан на языке <a href="../ru/C.html" title="C (Русский)">Си</a> и работает с <a href="https://en.wikipedia.org/wiki/ru:tar" class="extiw" title="wikipedia:ru:tar">tar</a>-пакетами в формате <span class="plainlinks archwiki-template-man" title="$ man 1 bsdtar"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bsdtar.1">bsdtar(1)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> содержит также утилиты <a href="../ru/Makepkg.html" title="Makepkg (Русский)">makepkg</a> и <span class="plainlinks archwiki-template-man" title="$ man 8 vercmp"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vercmp.8">vercmp(8)</a></span>. В пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span> вошли другие полезные программы, например, <a href="#Pactree">pactree</a> и <i>checkupdates</i>, которые <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/commit/0c99eabd50752310f42ec808c8734a338122ec86">раньше</a> были частью <i>pacman</i>. Команда <code>pacman -Ql pacman pacman-contrib | grep -E 'bin/.+'</code> выведет полный список доступных утилит.</div>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Использование">
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span>Использование</h2></div>
<p>В этом разделе приведена небольшая подборка доступных возможностей <i>pacman</i>. Больше примеров можно найти в руководстве <span class="plainlinks archwiki-template-man" title="$ man 8 pacman"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.8">pacman(8)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Если раньше вы использовали другой дистрибутив Linux, то будет полезно ознакомиться со статьёй <a href="../en/Pacman/Rosetta.html" title="Pacman/Rosetta">pacman/Rosetta</a>.
</div>
<div class="mw-heading mw-heading3"><h3 id="Установка_пакетов">
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Установка пакетов</h3></div>
<p>Пакет представляет собой архив, в котором содержатся:
</p>
<ul>
<li>все (скомпилированные) файлы приложения;</li>
<li>метаданные о приложении (имя приложения, версия, зависимости и т.д.);</li>
<li>установочные файлы и директивы для <i>pacman</i>;</li>
</ul>
<p>Pacman, менеджер пакетов Arch Linux, может устанавливать, обновлять и удалять пакеты. Использование пакетов имеет ряд преимуществ по сравнению с альтернативным подходом — ручной компиляцией и установкой программ:
</p>
<ul>
<li>удобное обновление: <i>pacman</i> будет устанавливать обновления по мере их появления;</li>
<li>проверка зависимостей: <i>pacman</i> самостоятельно отслеживает зависимости, вам нужно только указать целевую программу, и <i>pacman</i> установит её вместе с неоходимыми дополнительными пакетами;</li>
<li>чистое удаление: <i>pacman</i> хранит список файлов всех пакетов. При удалении пакета в системе не остаётся лишнего "мусора".</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> 
<ul>
<li>Часто у пакетов есть <a href="../ru/PKGBUILD.html#optdepends" title="PKGBUILD (Русский)">опциональные зависимости</a>, которые не являются обязательными, но предоставляют дополнительную функциональность. Во время установки <i>pacman</i> выведет список опциональных зависимостей, но в файле <code>pacman.log</code> упоминаний о них не будет. Чтобы получить информацию об опциональных зависимостях пакета, используйте <a href="#%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_%D0%BA_%D0%B1%D0%B0%D0%B7%D0%B0%D0%BC_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">#Запросы к базам данных пакетов</a>.</li>
<li>При установке пакета, который нужен только в качестве (опциональной) зависимости для другого пакета и который не будет использоваться вами напрямую, рекомендуется использовать параметр <code>--asdeps</code>. Подробнее смотрите раздел <a href="#%D0%9F%D1%80%D0%B8%D1%87%D0%B8%D0%BD%D0%B0_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8">#Причина установки</a>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> При установке пакетов старайтесь не синхронизировать базу данных пакетов без последующего <a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">обновления системы</a> (например, на случай, если пакета <a href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%BD%D0%B0%D0%B9%D1%82%D0%B8_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82_%D0%B4%D0%BB%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8">уже нет</a> в официальных репозиториях). В частности, не используйте команду <code>pacman -Sy <i>название_пакета</i></code> вместо <code>pacman -Sy<b>u</b> <i>название_пакета</i></code>, потому что это может привести к проблемам с зависимостями. Подробнее смотрите статью <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">System maintenance#Частичные обновления не поддерживаются</a> и ветку форума <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=89328">BBS#89328</a>.</div>
<div class="mw-heading mw-heading4"><h4 id="Установка_отдельных_пакетов">
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BE.D1.82.D0.B4.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Установка отдельных пакетов</h4></div>
<p>Для установки одного пакета или списка пакетов (включая зависимости) используйте следующую команду:
</p>
<pre># pacman -S <i>название_пакета1</i> <i>название_пакета2</i> ...
</pre>
<p>Для установки списка пакетов при помощи поиска по регулярному выражению (смотрите <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=7179">эту ветку форума</a>) выполните:
</p>
<pre># pacman -S $(pacman -Ssq <i>регулярное_выражение</i>)
</pre>
<p>Если пакет имеет несколько версий в разных репозиториях (например, в <i>extra</i> и <i>extra-testing</i>), можно указать, откуда именно следует установить пакет:
</p>
<pre># pacman -S extra/<i>имя_пакета</i>
</pre>
<p>Чтобы установить несколько пакетов с частично совпадающими названиями, используйте фигурные скобки:
</p>
<pre># pacman -S plasma-{desktop,mediacenter,nm}
</pre>
<p>Можно использовать несколько уровней вложенных фигурных скобок:
</p>
<pre># pacman -S plasma-{workspace{,-wallpapers},pa}
</pre>
<div class="mw-heading mw-heading5"><h5 id="Виртуальные_пакеты">
<span id=".D0.92.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D1.8B"></span>Виртуальные пакеты</h5></div>
<p>Виртуальным называется такой пакет, который сам по себе не существует, но <a href="../ru/PKGBUILD.html#provides" title="PKGBUILD (Русский)">предоставляется</a> другими пакетами. "Виртуальность" позволяет другим пакетам не объявлять зависимостью какой-то конкретный пакет, если есть возможность выбора из нескольких кандидатов. Виртуальный пакет нельзя установить по имени, он добавляется в систему только при установке пакета, который <i>предоставляет</i> его. Примером может служить пакет <a href="../ru/D-Bus.html#%D0%A0%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8" title="D-Bus (Русский)">dbus-units</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> При наличии нескольких кандидатов представленный список вариантов сначала будет отсортирован по <a href="../en/Repository.html" title="Repository">репозиториям</a> в порядке их появления в <code>pacman.conf</code>, затем в алфавитном порядке, если в одном репозитории существует несколько результатов.</div>
<div class="mw-heading mw-heading4"><h4 id="Установка_группы_пакетов">
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Установка группы пакетов</h4></div>
<p>Некоторые пакеты объединены в <a href="../ru/Meta_package_and_package_group.html" title="Meta package and package group (Русский)">группы</a> и могут устанавливаться одной командой. Например, после команды
</p>
<pre># pacman -S gnome
</pre>
<p>вам будет предложено выбрать пакеты из группы <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/groups/x86_64/gnome/">gnome</a></span>, которые вы хотели бы установить.
</p>
<p>Некоторые группы содержат большое количество пакетов, и среди них могут быть всего несколько нужных или ненужных вам. Вместо того, чтобы вводить все необходимые вам номера, иногда удобнее выбрать или исключить отдельные числа или диапазоны чисел при помощи приведенного ниже синтаксиса:
</p>
<pre>Enter a selection (default=all): 1-10 15
</pre>
<p>— будут выбраны все пакеты в диапазоне с 1 по 10, а также 15;
</p>
<pre>Enter a selection (default=all): ^5-8 ^2
</pre>
<p>— будут выбраны все пакеты, кроме входящих в диапазон с 5 по 8, а также 2.
</p>
<p>Чтобы увидеть список пакетов, принадлежащих к группе gnome, выполните:
</p>
<pre>$ pacman -Sg gnome
</pre>
<p>Перечень групп можно найти на странице <a rel="nofollow" class="external free" href="https://archlinux.org/groups/">https://archlinux.org/groups/</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Установлены будут все пакеты из списка, в том числе и те, которые уже были установлены в систему ранее — даже если они последней версии и не нуждаются в обновлении. Чтобы не устанавливать такие пакеты заново, укажите параметр <code>--needed</code>.
</div>
<div class="mw-heading mw-heading3"><h3 id="Удаление_пакетов">
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Удаление пакетов</h3></div>
<p>Удалить пакет, не удаляя его зависимости:
</p>
<pre># pacman -R <i>название_пакета</i>
</pre>
<p>Удалить пакет и те его зависимости, которые не нужны никаким другим пакетам:
</p>
<pre># pacman -Rs <i>название_пакета</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> При удалении группы пакетов (вроде <i>gnome</i>), причина установки отдельных пакетов, входящих в группу, игнорируется. Причина установки пакетов-зависимостей, тем не менее, по-прежнему учитывается.</div>
<p>Команда выше может не сработать при удалении группы с другими необходимыми пакетами. В этом случае используйте команду:
</p>
<pre># pacman -Rsu <i>название_пакета</i>
</pre>
<p>Удалить пакет, его зависимости, а также все пакеты, для которых он сам является зависимостью:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Эта операция рекурсивна. Используйте её с осторожностью — есть риск удалить нужные пакеты.
</div>
<pre># pacman -Rsc <i>название_пакета</i>
</pre>
<p>Удалить пакет, который требуется другому пакету, без удаления зависимостей:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Этой операции следует избегать, так как она может нанести тяжелый вред системе. Подробнее смотрите статью <a href="../ru/System_maintenance.html#%D0%98%D0%B7%D0%B1%D0%B5%D0%B3%D0%B0%D0%B9%D1%82%D0%B5_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_pacman" title="System maintenance (Русский)">System maintenance#Избегайте определенных команд pacman</a>.
</div>
<pre># pacman -Rdd <i>название_пакета</i>
</pre>
<p><i>Pacman</i> создает резервные копии конфигурационных файлов удаляемых приложений и добавляет к ним расширение <i>.pacsave</i>. Если вы хотите удалить и эти файлы, используйте ключ <code>-n</code>:
</p>
<pre># pacman -Rn <i>название_пакета</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> <i>Pacman</i> не удаляет файлы настроек, которые созданы самими приложениями — например, скрытые файлы (имя которых начинается с точки) в домашнем каталоге).</div>
<div class="mw-heading mw-heading3"><h3 id="Обновление_пакетов">
<span id=".D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Обновление пакетов</h3></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> 
<ul>
<li>Обновление системы следует выполнять регулярно, следуя рекомендациям в статье <a href="../ru/System_maintenance.html#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" title="System maintenance (Русский)">System maintenance#Обновление системы</a>. При этом пользователь должен понимать смысл выполняемых действий, а не слепо повторять предложенные команды.</li>
<li>Arch поддерживает только полные обновления системы. Смотрите статьи <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">System maintenance#Частичные обновления не поддерживаются</a> и <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">#Установка пакетов</a>.</li>
</ul>
</div>
<p>Pacman полностью обновляет систему всего одной командой. Если система давно не обновлялась, процесс может занять довольно длительное время. Приведённая ниже команда одновременно синхронизирует базы данных репозиториев <b>и</b> выполняет обновление системы — при этом пакеты, которых нет в подключённых репозиториях, обновлены не будут:
</p>
<pre># pacman -Syu
</pre>
<div class="mw-heading mw-heading3"><h3 id="Запросы_к_базам_данных_пакетов">
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D1.8B_.D0.BA_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Запросы к базам данных пакетов</h3></div>
<p>Для взаимодействия с базами данных в <i>pacman</i> предусмотрены флаги <code>-Q</code> (база данных пакетов), <code>-S</code> (база данных синхронизации) и <code>-F</code> (база данных файлов). Команды <code>pacman -Q --help</code>, <code>pacman -S --help</code> и <code>pacman -F --help</code> выведут список возможных опций для этих флагов.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> Синхронизируйте базу данных файлов перед запросом к ней для получения актуальных результатов:
<pre># pacman -Fy
</pre>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Вы можете <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" title="Help:Reading (Русский)">запустить/включить</a> юнит <code>pacman-filesdb-refresh.timer</code> (входящий в пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span>), чтобы еженедельно обновлять базу данных файлов <i>pacman</i>.</div>
<p><i>Pacman</i> может выполнять поиск в базе данных как среди названий пакетов, так и по их описаниям:
</p>
<pre>$ pacman -Ss <i>условие1</i> <i>условие2</i> ...
</pre>
<p>Иногда поиск с параметром <code>-s</code> выдаёт много ненужных результатов, поэтому имеет смысл ограничить поиск только названиями пакетов, отключив поиск по описаниям и другим полям. Для этого можно использовать регулярные выражения:
</p>
<pre>$ pacman -Ss '^vim-'
</pre>
<p>Искать среди установленных пакетов:
</p>
<pre>$ pacman -Qs <i>условие1</i> <i>условие2</i> ...
</pre>
<p>Искать пакет в репозиториях по названию файла:
</p>
<pre>$ pacman -F <i>условие1</i> <i>условие2</i> ...
</pre>
<p>Показать подробную информацию о пакете в репозитории (например о его зависимостях):
</p>
<pre>$ pacman -Si <i>название_пакета</i>
</pre>
<p>То же самое — для установленного пакета:
</p>
<pre>$ pacman -Qi <i>название_пакета</i>
</pre>
<p>Если указать сразу два флага <code>-i</code>, то будет также выведен список резервных копий файлов и их состояние (модифицирован/нет):
</p>
<pre>$ pacman -Qii <i>название_пакета</i>
</pre>
<p>Вывести список файлов установленного пакета:
</p>
<pre>$ pacman -Ql <i>название_пакета</i>
</pre>
<p>Вывести список файлов пакета в репозитории:
</p>
<pre>$ pacman -Fl <i>название_пакета</i>
</pre>
<p>Проверить наличие файлов установленного пакета:
</p>
<pre>$ pacman -Qk <i>название_пакета</i>
</pre>
<p>С двумя флагами <code>-k</code> проверка будет более тщательной.
</p>
<p>Узнать, какому пакету принадлежит файл:
</p>
<pre>$ pacman -Qo <i>/путь/к/файлу/имя_файла</i>
</pre>
<p>Узнать, какому пакету в репозиториях принадлежит файл:
</p>
<pre>$ pacman -F <i>/путь/к/файлу/имя_файла</i>
</pre>
<p>Вывести список пакетов, которые больше не требуются как зависимости ("пакеты-сироты"):
</p>
<pre>$ pacman -Qdt
</pre>
<p>Вывести список пакетов, установленных явно (explicitly) и не являющихся зависимостями для других пакетов:
</p>
<pre>$ pacman -Qet
</pre>
<p>Другие полезные команды можно найти в статье <a href="../en/2e4d227f9777e5ab77c3bc6da83f5768.html" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы</a>.
</p>
<p>Для получения расширенной функциональности установите <a href="../ru/Pkgfile.html" title="Pkgfile (Русский)">pkgfile</a>, который использует отдельную базу данных со всеми файлами и связанными с ними пакетами.
</p>
<div class="mw-heading mw-heading4"><h4 id="Pactree">Pactree</h4></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> <span class="plainlinks archwiki-template-man" title="$ man 8 pactree"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pactree.8">pactree(8)</a></span> больше не является частью пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span>. Теперь он входит в состав <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span>.
</div>
<p>Дерево зависимостей пакета можно узнать командой
</p>
<pre>$ pactree <i>название_пакета</i>
</pre>
<p>Чтобы увидеть "обратное" дерево зависимостей, т.е. список пакетов, которые сами зависят от указанного, используйте флаг <i>pactree</i> <code>-r</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Структура_базы_данных">
<span id=".D0.A1.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0_.D0.B1.D0.B0.D0.B7.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span>Структура базы данных</h4></div>
<p>Базы данных <i>pacman</i> обычно размещаются в каталоге <code>/var/lib/pacman/sync</code>. Для каждого подключённого в файле <code>/etc/pacman.conf</code> репозитория в этом каталоге находится соответствующий файл базы данных. Сам файл представляет собой gzip-сжатый tar-архив (с расширением <i>.db</i>), содержащий по одному каталогу для каждого пакета. Например, для пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=which">which</a></span> содержимое каталога имеет вид:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ tree which-2.21-5</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">which-2.21-5
|-- desc
</pre>
<p>В файле <code>desc</code> хранятся мета-данные пакета — описание, список зависимостей, размер, хэш-сумма MD5 и т.д.
</p>
<div class="mw-heading mw-heading3"><h3 id="Очистка_кэша_пакетов">
<span id=".D0.9E.D1.87.D0.B8.D1.81.D1.82.D0.BA.D0.B0_.D0.BA.D1.8D.D1.88.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Очистка кэша пакетов</h3></div>
<p><i>Pacman</i> сохраняет скачиваемые пакеты в каталог <code>/var/cache/pacman/pkg/</code>. Старые версии пакетов и пакеты, удалённые из системы, не удаляются из этого каталога автоматически. Такой подход обладает следующими преимуществами:
</p>
<ol>
<li>Можно выполнить <a href="../ru/Downgrading_packages.html" class="mw-redirect" title="Downgrading packages (Русский)">откат пакета</a> без необходимости искать где-то (например, в <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">архиве Arch Linux</a>) его старую версию;</li>
<li>Удалённый по ошибке пакет можно заново установить из кэша, не скачивая из репозитория.</li>
</ol>
<p>Тем не менее, это означает, что время от времени необходимо чистить этот каталог самостоятельно, чтобы предотвратить его разрастание.
</p>
<p>Скрипт <span class="plainlinks archwiki-template-man" title="$ man 8 paccache"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/paccache.8">paccache(8)</a></span> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span> удаляет из кэша старые версии пакетов, как установленных в системе, так и уже удалённых, по умолчанию оставляя только три самые свежие:
</p>
<pre># paccache -r
</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">Включите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> <code>paccache.timer</code>, чтобы очистка кэша выполнялась каждую неделю автоматически.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Также можно создать <a href="#%D0%A5%D1%83%D0%BA%D0%B8">хук</a>, чтобы очистка запускалась после каждого действия <i>pacman</i>. <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/paccache-hook/">paccache-hook</a></span><sup><small>AUR</small></sup> и посмотрите <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1694743#p1694743">другие примеры</a>
</div>
<p>.
</p>
<p>}}
</p>
<p>При необходимости можно задать количество последних версий, которые нужно оставить. Команда для удаления всех версий, кроме последней:
</p>
<pre># paccache -rk1
</pre>
<p>Флаг <code>-u</code>/<code>--uninstalled</code> позволяет ограничить действие <i>paccache</i> только версиями пакетов, которых в системе уже нет. Например, команда удаления всех кэшированных версий удалённых пакетов:
</p>
<pre># paccache -ruk0
</pre>
<p>Список возможных опций выводится командой <code>paccache -h</code>.
</p>
<p>В <i>pacman</i> есть встроеный функционал очистки кэша и удаления баз данных репозиториев, которые были заблокированы в файле <code>/etc/pacman.conf</code>. Однако <i>pacman</i> гораздо менее гибок по сравнению с <i>paccache</i> и не даёт возможности сохранить некоторое количество последних версий, просто очищая каталог кэша.
</p>
<p>Чтобы удалить все кэшированные версии удалённых пакетов и неиспользуемые базы данных, выполните:
</p>
<pre># pacman -Sc
</pre>
<p>Чтобы удалить вообще все файлы из кэша, укажите флаг очистки дважды:
</p>
<pre># pacman -Scc
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Следует избегать полной очистки кэша, кроме случая, когда вам очень нужно освободить дисковое пространство. Очистка сделает невозможным откат пакетов или их переустановку без повторного скачивания.
</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pkgcacheclean/">pkgcacheclean</a></span><sup><small>AUR</small></sup> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacleaner/">pacleaner</a></span><sup><small>AUR</small></sup> — две альтернативные программы для очистки кэша.
</p>
<div class="mw-heading mw-heading3"><h3 id="Дополнительные_команды">
<span id=".D0.94.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B"></span>Дополнительные команды</h3></div>
<p>Скачать пакет без установки:
</p>
<pre># pacman -Sw <i>название_пакета</i>
</pre>
<p>Установить пакет не из удалённого репозитория, а хранящийся локально (например, предварительно скачанный из <a href="../ru/Arch_User_Repository.html" title="Arch User Repository (Русский)">AUR</a>):
</p>
<pre># pacman -U <i>/путь/к/пакету/имя_пакета-версия.pkg.tar.zst</i>
</pre>
<p>Сохранить копию локально устанавливаемого пакета в кэше <i>pacman</i>:
</p>
<pre># pacman -U file:<i>///путь/к/пакету/имя_пакета-версия.pkg.tar.zst</i>
</pre>
<p>Скачать и установить пакет из удаленного источника (но и не из репозиториев, перечисленных в конфигурационном файле <i>pacman</i>):
</p>
<pre># pacman -U http:<i>//www.example.com/repo/example.pkg.tar.zst</i>
</pre>
<div class="mw-heading mw-heading4"><h4 id="dry_run">dry run</h4></div>
<p><i>Pacman</i> <b>всегда</b> выводит список пакетов, которые будут установлены или удалены, и спрашивает разрешение пользователя перед выполнением действия.
</p>
<p>Чтобы получить список в удобном для обработки формате и предотвратить действия <code>-S</code>, <code>-U</code> и <code>-R</code>, вы можете использовать <code>-p</code>, сокращение от <code>--print</code>.
</p>
<p><code>--print-format</code> можно добавить для форматирования этого списка различными способами. <code>--print-format %n</code> вернет список без указания версий пакета.
</p>
<div class="mw-heading mw-heading3"><h3 id="Причина_установки">
<span id=".D0.9F.D1.80.D0.B8.D1.87.D0.B8.D0.BD.D0.B0_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B8"></span>Причина установки</h3></div>
<p>Для <i>pacman</i> с точки зрения причины установки пакет относится к одной из двух категорий:
</p>
<ul>
<li>
<b>установлен явно</b> (explicitly-installed): установлен пользователем командами <code>pacman -S</code> или <code>pacman -U</code>;</li>
<li>
<b>зависимость</b> (dependency): установлен автоматически в процессе установки другого пакета, поскольку являлся его <a href="../ru/PKGBUILD.html#%D0%97%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8" title="PKGBUILD (Русский)">зависимостью</a>.</li>
</ul>
<p>При явной установке пакета можно принудительно изменить причину установки на <i>зависимость</i>:
</p>
<pre># pacman -S --asdeps <i>название_пакета</i>
</pre>
<p>Эта команда обычно используется в случае, когда явно установленные пакеты предлагают установить <a href="../ru/PKGBUILD.html#optdepends" title="PKGBUILD (Русский)">дополнительные пакеты</a> для поддержки дополнительных функций, которые пользователь может выбирать по своему усмотрению.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> При установке опциональных зависимостей вручную стоит всегда указывать флаг <code>--asdeps</code>. Тогда при <a href="../en/2e4d227f9777e5ab77c3bc6da83f5768.html#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B5%D0%BC%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Pacman/Советы и приёмы">удалении пакетов-сирот</a> ненужные опциональные зависимости тоже будут удаляться.
</div>
<p>При <b>пере</b>установке пакета текущая причина установки не меняется.
</p>
<p>Список явно установленных пакетов выводится командой <code>pacman -Qe</code>, а пакетов-зависимостей — командой <code>pacman -Qd</code>.
</p>
<p>Чтобы изменить причину установки уже установленного пакета, выполните:
</p>
<pre># pacman -D --asdeps <i>название_пакета</i>
</pre>
<p>Для противоположной операции используйте флаг <code>--asexplicit</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Не стоить использовать опции <code>--asdeps</code> и <code>--asexplicit</code> в команде обновления системы, например <code>pacman -Syu <i>название_пакета</i> --asdeps</code>. Это изменит причину установки не только для устанавливаемого пакета, но и для всех обновляемых.
</div>
<div class="mw-heading mw-heading3"><h3 id="Процесс_установки/обновления/удаления_пакета">
<span id=".D0.9F.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B8.2F.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F.2F.D1.83.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.B0"></span>Процесс установки/обновления/удаления пакета</h3></div>
<p>Каждая операция ("транзакция") <i>pacman</i> состоит из пяти последовательных шагов, включая пред- и пост-транзакционные хуки:
</p>
<ol>
<li>Если база данных не заблокирована, то транзакция инициализируется.</li>
<li>Определяются пакеты, над которыми будут выполняться действия.</li>
<li>В зависимости от заданных флагов выполняется подготовка транзакции, проверяется целостность базы данных, а также пакеты и их зависимости.</li>
<li>Транзакция выполняется:
<ol>
<li>Загружаются пакеты (<code>_alpm_sync_load</code>), если это необходимо.</li>
<li>Выполняются <code>PreTransaction</code>-хуки, которые возможно применить.</li>
<li>Удаляются пакеты, которые должны быть заменены, конфликтуют или явно указаны для удаления.</li>
<li>Добавляются пакеты.
<ol>
<li>Если пакет содержит установочный сценарий, выполняется функция <code>pre_install</code> (<code>pre_upgrade</code>/<code>pre_remove</code> для обновляемых и удаляемых пакетов соответственно).</li>
<li>Удаляются существующие файлы пакета (при обновлении или удалении пакета). Сохраняются только файлы настроек (смотрите <a href="../ru/Pacman/Pacnew_and_Pacsave.html" title="Pacman (Русский)/Pacnew and Pacsave (Русский)">/Pacnew and Pacsave</a>).</li>
<li>Распаковывается архив с новыми файлами пакета; файлы размещаются в нужные места файловой системы (при установке или обновлении пакета). Изменённые пользователем файлы настроек, которые нельзя просто перезаписать, остаются без изменений; новые файлы настроек сохраняются с суффиксом <i>.pacnew</i> (смотрите предыдущий шаг).</li>
<li>Если пакет содержит установочный сценарий, выполняется функция <code>post_install</code> (<code>post_upgrade</code>/<code>post_remove</code> для обновляемых и удаляемых пакетов соответственно).</li>
</ol>
</li>
<li>Выполняются <code>PostTransaction</code>-хуки, которые возможно применить.</li>
</ol>
</li>
<li>Завершение транзакции и освобождение ресурсов (например, разблокирование базы данных).</li>
</ol>
<div class="mw-heading mw-heading2"><h2 id="Настройка">
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span>Настройка</h2></div>
<p>Настройки <i>pacman</i> находятся в файле <code>/etc/pacman.conf</code>. Подробную информацию о файле настроек можно найти в руководстве <span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Глобальные_параметры">
<span id=".D0.93.D0.BB.D0.BE.D0.B1.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B"></span>Глобальные параметры</h3></div>
<p>Глобальные настройки <i>pacman</i> указываются в разделе <code>[options]</code>. Помимо руководства <span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span> некоторая информация о настройках из этого раздела содержится в комментариях самого файла <code>pacman.conf</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Сравнение_версий_пакетов_перед_обновлением">
<span id=".D0.A1.D1.80.D0.B0.D0.B2.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2.D0.B5.D1.80.D1.81.D0.B8.D0.B9_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5.D0.BC"></span>Сравнение версий пакетов перед обновлением</h4></div>
<p>Чтобы увидеть сравнение старых и новых версий доступных для обновления пакетов, раскомментируйте строку <code>VerbosePkgLists</code> в файле <code>pacman.conf</code>. Теперь команда <code>pacman -Syu</code> будет выводить примерно следующее:
</p>
<pre>Пакет (6)               Старая версия  Новая версия  Изменение размера  Размер загрузки

extra/libmariadbclient  10.1.9-4       10.1.10-1              0,03 MiB         4,35 MiB
extra/libpng            1.6.19-1       1.6.20-1               0,00 MiB         0,23 MiB
extra/mariadb           10.1.9-4       10.1.10-1              0,26 MiB        13,80 MiB
</pre>
<div class="mw-heading mw-heading4"><h4 id="Параллельная_загрузка">
<span id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BB.D0.BB.D0.B5.D0.BB.D1.8C.D0.BD.D0.B0.D1.8F_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0"></span>Параллельная загрузка</h4></div>
<p>Количество пакетов, загружаемых параллельно (в одно и то же время), настраивается в <code>/etc/pacman.conf</code> с помощью параметра <code>ParallelDownloads</code> в разделе <code>[options]</code>. В пакете <code>/etc/pacman.conf</code>, поставляемом с пакетом <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span>, для этого параметра установлено значение <code>5</code>. В противном случае, если опция не задана, то пакеты будут загружаться последовательно.
</p>
<div class="mw-heading mw-heading4"><h4 id="Запрет_на_обновление_отдельных_пакетов">
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BE.D1.82.D0.B4.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Запрет на обновление отдельных пакетов</h4></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Будьте осторожны при использовании этой настройки, потому что частичные обновления <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">не поддерживаются</a>.</div>
<p>Чтобы пропустить пакет во время <a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">обновления</a> системы добавьте его название в параметр <code>IgnorePkg</code> в разделе <code>[options]</code>:
</p>
<pre>IgnorePkg=linux
</pre>
<p>Если необходимо пропустить обновление для нескольких пакетов, укажите названия, разделив их пробелами, или используйте несколько строк <code>IgnorePkg</code>. Также можно использовать <a href="https://en.wikipedia.org/wiki/ru:%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%D0%B0" class="extiw" title="wikipedia:ru:Шаблон поиска">шаблоны поиска</a>. Если нужно пропустить обновление пакета всего один раз, то лучше использовать опцию командной строки <code>--ignore</code> — здесь в качестве разделителя для названий пакетов используется запятая.
</p>
<p>При необходимости обновить пакет из списка исключений всё же можно, командой <code>pacman -S <i>название_пакета</i></code>: <i>pacman</i> при этом выведет напоминание, что пакет указан в <code>IgnorePkg</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Запрет_на_обновление_группы_пакетов">
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Запрет на обновление группы пакетов</h4></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Будьте осторожны при использовании этой настройки, потому что частичные обновления <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">не поддерживаются</a>.
</div>
<p>Аналогично запрету на обновление отдельного пакета, можно запретить обновление сразу для целой группы, например:
</p>
<pre>IgnoreGroup=gnome
</pre>
<div class="mw-heading mw-heading4"><h4 id="Запрет_на_обновление_файлов">
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span>Запрет на обновление файлов</h4></div>
<p>Файлы, указанные в параметре <code>NoUpgrade</code>, не будут изменяться в процессе установки/обновления; новые версии этих файлов будут сохраняться с расширением <i>.pacnew</i>.
</p>
<pre>NoUpgrade=<i>путь/к/файлу</i>
</pre>
<p>Указать несколько файлов можно так:
</p>
<pre>NoUpgrade=<i>путь/к/файлу1 путь/к/файлу2</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Путь к файлу соответствует названию файла в tar-архиве пакета. Следовательно, указывать ведущий слэш не нужно.
</div>
<div class="mw-heading mw-heading4"><h4 id="Запрет_на_установку_файлов">
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82_.D0.BD.D0.B0_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D1.83_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span>Запрет на установку файлов</h4></div>
<p>Чтобы запретить установку определённых файлов или каталогов, перечислите их в параметре <code>NoExtract</code>. Например, запрет установки юнитов <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a>:
</p>
<pre>NoExtract=usr/share/bash-completion/completions/*
</pre>
<div class="mw-heading mw-heading4"><h4 id="Работа_с_несколькими_файлами_настроек">
<span id=".D0.A0.D0.B0.D0.B1.D0.BE.D1.82.D0.B0_.D1.81_.D0.BD.D0.B5.D1.81.D0.BA.D0.BE.D0.BB.D1.8C.D0.BA.D0.B8.D0.BC.D0.B8_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0.D0.BC.D0.B8_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA"></span>Работа с несколькими файлами настроек</h4></div>
<p>Если имеется несколько конфигурационных файлов (например, основная конфигурация и дополнительная с подключённым репозиторием <a href="../ru/Official_repositories.html#%D0%A2%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D1%8B%D0%B5_%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B8" title="Official repositories (Русский)">testing</a>), то работу с ними можно упростить, если вынести общие пункты настроек в отдельный файл и подключать его с помощью опции <code>Include</code>:
</p>
<pre>Include = <i>/путь/к/файлу/общих/настроек</i>
</pre>
<p>В этом примере общие настройки вынесены в файл <code><i>/путь/к/файлу/общих/настроек</i></code>. Приведённую выше строку нужно добавить в оба файла настроек, основной и дополнительный.
</p>
<div class="mw-heading mw-heading4"><h4 id="Хуки">
<span id=".D0.A5.D1.83.D0.BA.D0.B8"></span>Хуки</h4></div>
<p>Системные пре- и пост-транзакционные хуки хранятся в каталоге <code>/usr/share/libalpm/hooks</code>; <i>pacman</i> может выполнять хуки как из системного каталога, так и из каталогов, подключённых опцией — <code>HookDir</code> в файле <code>pacman.conf</code> (каталог по умолчанию — <code>/etc/pacman.d/hooks</code>). Название файла хука должно заканчиваться на <code>.hook</code>. Хуки <i>pacman</i> неинтерактивны.
</p>
<p>В частности, хуки <i>pacman</i> используются в связке с <code>systemd-sysusers</code> и <code>systemd-tmpfiles</code> для автоматического создания пользователей и файлов в процессе установки пакетов. Например, пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tomcat8">tomcat8</a></span> требует наличия пользователя <code>tomcat8</code> и определённых каталогов, ему принадлежащих. Хуки <code>systemd-sysusers.hook</code> и <code>systemd-tmpfiles.hook</code> вызывают команды <code>systemd-sysusers</code> и <code>systemd-tmpfiles</code> соответственно, когда <i>pacman</i> видит в пакете указания на пользователей и временные файлы.
</p>
<p>Хуки <i>alpm</i> подробно описаны в руководстве <span class="plainlinks archwiki-template-man" title="$ man 5 alpm-hooks"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/alpm-hooks.5">alpm-hooks(5)</a></span>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Репозитории_и_зеркала">
<span id=".D0.A0.D0.B5.D0.BF.D0.BE.D0.B7.D0.B8.D1.82.D0.BE.D1.80.D0.B8.D0.B8_.D0.B8_.D0.B7.D0.B5.D1.80.D0.BA.D0.B0.D0.BB.D0.B0"></span>Репозитории и зеркала</h3></div>
<p>Помимо общего раздела <a href="#%D0%93%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B">[options]</a> в файле <code>pacman.conf</code> также содержатся отдельные разделы для каждого из репозиториев. Репозиторий — набор пакетов, который физически находится на одном или нескольких серверах; эти сервера называются <i>зеркалами</i> репозитория.
</p>
<p>Репозитории делятся на <a href="../ru/Official_repositories.html" title="Official repositories (Русский)">официальные</a> и <a href="../en/Unofficial_user_repositories.html" title="Unofficial user repositories">неофициальные</a>. Порядок репозиториев в файле настроек имеет значение: если в разных репозиториях содержатся пакеты с одинаковым названием, то вне зависимости от их версий предпочтение отдаётся тому пакету, репозиторий которого ближе к началу файла. Чтобы подключённый репозиторий можно было использовать, сначала необходимо выполнить полное <a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">обновление</a> системы.
</p>
<p>Разделы репозиториев в файле <code>pacman.conf</code> содержат информацию о зеркалах. Список зеркал хранится в отдельном файле и подключается параметром <code>Include</code>. Например, зеркала официальных репозиториев подключаются из файла <code>/etc/pacman.d/mirrorlist</code>. Настройка зеркал описана в статье <a href="../ru/Mirrors.html" title="Mirrors (Русский)">Mirrors</a>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Каталог_для_кэша_пакетов">
<span id=".D0.9A.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3_.D0.B4.D0.BB.D1.8F_.D0.BA.D1.8D.D1.88.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Каталог для кэша пакетов</h4></div>
<p>Pacman хранит загруженные файлы пакетов в кэше — в каталоге, указанном в опции <code>CacheDir</code> в разделе <a href="#%D0%93%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B">[options]</a> файла <code>pacman.conf</code> (по умолчанию <code>/var/cache/pacman/pkg/</code>).
</p>
<p>Размер этого каталога может расти со временем, даже если в нём хранятся только самые свежие версии установленных пакетов.
</p>
<p>Если вы хотите переместить этот каталог в более удобное место, выполните одно из следующих действий:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> <b>Не создавайте символическую ссылку</b> на месте каталога <code>/var/cache/pacman/pkg/</code>. Использование символической ссылки приведёт к тому, что <i>pacman</i> <b>сломает</b> сам себя в процессе обновления.</div>
<ul>
<li>В опцию <code>CacheDir</code> пропишите путь к новому каталогу. Не забудьте добавить косую черту в конце. <b>Это рекомендуемое решение</b>.</li>
<li>Примонтируйте отдельный раздел или <a href="../ru/Btrfs.html#%D0%9F%D0%BE%D0%B4%D1%82%D0%BE%D0%BC%D0%B0" title="Btrfs (Русский)">подтом Btrfs</a> в <code>/var/cache/pacman/pkg/</code>.</li>
<li>Сделайте bind mount в <code>/var/cache/pacman/pkg/</code>
</li>
</ul>
<div class="mw-heading mw-heading4"><h4 id="Безопасность_пакетов">
<span id=".D0.91.D0.B5.D0.B7.D0.BE.D0.BF.D0.B0.D1.81.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Безопасность пакетов</h4></div>
<p>Pacman использует цифровые подписи в качестве дополнительного механизма обеспечения безопасности пакетов. Настройки проверки подписей задаются параметром <code>SigLevel</code>. По умолчанию в разделе <code>[options]</code> задано глобальное значение <code>SigLevel = Required DatabaseOptional</code>, что означает проверку подписей всех пакетов без исключения. Можно задать особые правила проверки подписей для отдельных репозиториев, указав параметр <code>SigLevel</code> в соответствующих разделах. Подробнее смотрите в статье <a href="../en/aa39ad8e51e35798096a6208c66bfd26.html" class="mw-redirect" title="Pacman/Подпись пакета">pacman/Подпись пакета</a>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Решение_проблем">
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span>Решение проблем</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Failed_to_commit_transaction_(conflicting_files)">
<span id="Failed_to_commit_transaction_.28conflicting_files.29"></span>Failed to commit transaction (conflicting files)</h3></div>
<p>Следующее сообщение об ошибке <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=56373">[1]</a>:
</p>
<pre>ошибка: не удалось завершить транзакцию (конфликтующие файлы)
<i>пакет</i>: '<i>/путь/к/файлу</i>' существует в файловой системе
Обнаружены ошибки, пакеты не обновлены.
</pre>
<p>означает, что при выполнении операции были обнаружены конфликтующие файлы. Pacman не будет их перезаписывать автоматически. Это не ошибка, так сделано специально.
</p>
<p>Проблема решается тривиально (хотя, чтобы быть уверенным, вам следует попытаться выяснить, как эти файлы попали туда в первую очередь). Сначала проверьте, не принадлежит ли файл другому пакету (<code>pacman -Qo <i>/путь/к/файлу</i></code>). Если принадлежит, создайте <a href="../ru/Reporting_bug_guidelines.html" class="mw-redirect" title="Reporting bug guidelines (Русский)">отчет об ошибке</a>. Если проблемный файл не нужен другим пакетам, переименуйте его и перезапустите команду обновления. Если в дальнейшем проблем не возникнет, то старый файл можно удалить.
</p>
<p>Если программа была установлена вручную без <i>pacman</i> — например, при помощи команды <code>make install</code> — необходимо удалить программу и все её файлы, а затем выполнить установку при помощи <i>pacman</i>. Смотрите также <a href="../en/2e4d227f9777e5ab77c3bc6da83f5768.html#%D0%9F%D0%BE%D0%B8%D1%81%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D0%B1%D0%B5%D0%B7_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0-%D0%B2%D0%BB%D0%B0%D0%B4%D0%B5%D0%BB%D1%8C%D1%86%D0%B0" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы#Поиск файлов без пакета-владельца</a>.
</p>
<p>Информация о каждом установленном файле хранится в файле с метаданными пакета <code>/var/lib/pacman/local/<i>пакет-версия</i>/files</code>. При повреждении этого файла (он может быть пустым или отсутствовать) во время обновления пакета будет получена ошибка <code>file exists in filesystem</code> ("файл существует в файловой системе"). Обычно такие ошибки возникают во время установки или обновления всего лишь одного пакета. Вместо ручного переименования или удаления конфликтующих файлов, принадлежащих данному пакету, лучше выполнить команду <code>pacman -S --overwrite <i>шаблон</i> <i>пакет</i></code>, чтобы <i>pacman</i> принудительно перезаписал файлы, название которых совпадает с шаблоном.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Будьте осторожны при использовании ключа <code>--overwrite</code>. Смотрите <a href="../en/2ca8a9d540e03cdeaa29635b80327fb3.html#%D0%98%D0%B7%D0%B1%D0%B5%D0%B3%D0%B0%D0%B9%D1%82%D0%B5_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_pacman" class="mw-redirect" title="Обслуживание системы">Обслуживание системы#Избегайте определенных команд pacman</a>.
</div>
<div class="mw-heading mw-heading3"><h3 id="Failed_to_commit_transaction_(invalid_or_corrupted_package)">
<span id="Failed_to_commit_transaction_.28invalid_or_corrupted_package.29"></span>Failed to commit transaction (invalid or corrupted package)</h3></div>
<p>Удалите все файлы <i>.part</i> (частично скачанные пакеты) из кэша <i>pacman</i> <code>/var/cache/pacman/pkg/</code>. Причиной ошибки чаще всего является пользовательская команда в параметре <code>XferCommand</code> файла <code>pacman.conf</code>.
</p>
<pre># find /var/cache/pacman/pkg/ -iname "*.part" -delete
</pre>
<p>Эта же ошибка может также появиться, если <i>archlinux-keyring</i> устарел, что не позволяет <i>pacman</i> проверять подписи. Смотрите <a href="../ru/Pacman/Package_signing.html#%D0%A0%D0%B5%D0%B3%D1%83%D0%BB%D1%8F%D1%80%D0%BD%D0%BE_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D1%8F%D0%B9%D1%82%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%83" title="Pacman (Русский)/Package signing (Русский)">Регулярно обновляйте систему</a>, чтобы узнать об исправлении и о том, как избежать этого в будущем.
</p>
<div class="mw-heading mw-heading3"><h3 id="Failed_to_init_transaction_(unable_to_lock_database)">
<span id="Failed_to_init_transaction_.28unable_to_lock_database.29"></span>Failed to init transaction (unable to lock database)</h3></div>
<p>Когда <i>pacman</i> собирается внести изменения в базу данных пакетов, например, при установке пакета, он создаёт файл блокировки <code>/var/lib/pacman/db.lck</code>. Это предотвращает запуск другого экземпляра <i>pacman</i> и таким образом спасает от возможного повреждения базы.
</p>
<p>Если работа <i>pacman</i> была прервана во время внесения изменений в базу, этот файл блокировки может остаться неудалённым, что может привести к появлению такой ошибки:
</p>
<pre>ошибка: не удалось начать транзакцию (не удалось заблокировать базу данных)
ошибка: не удалось заблокировать базу: Файл существует
</pre>
<p>Если вы уверены, что на вашей машине не запущено других экземпляров <i>pacman</i>, удалите этот файл блокировки:
</p>
<pre># rm /var/lib/pacman/db.lck
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Можно выполнить команду <code>fuser /var/lib/pacman/db.lck</code>, чтобы проверить, используется ли файл каким-то процессом.</div>
<div class="mw-heading mw-heading3"><h3 id="Не_удаётся_найти_пакет_для_установки">
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D0.BD.D0.B0.D0.B9.D1.82.D0.B8_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82_.D0.B4.D0.BB.D1.8F_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B8"></span>Не удаётся найти пакет для установки</h3></div>
<p>Эта ошибка проявляется в сообщениях <code>Not found in sync db</code>, <code>не найдена цель</code> или <code>не удалось получить файл</code>.
</p>
<p>Удостоверьтесь, что пакет, который вы пытаетесь установить, действительно существует. Если это так, возможно, список хранящихся в репозиториях пакетов устарел. Выполните <code>pacman -Syu</code>, чтобы получить новый список и обновить систему. Также убедитесь, что выбранные <a href="../ru/Mirrors.html" title="Mirrors (Русский)">зеркала</a> в рабочем состоянии, а <a href="#%D0%A0%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B8_%D0%B8_%D0%B7%D0%B5%D1%80%D0%BA%D0%B0%D0%BB%D0%B0">репозитории</a> настроены правильно. Вы также можете использовать <a href="../ru/Reflector.html" title="Reflector (Русский)">Reflector</a>, чтобы поддерживать зеркала в актуальном состоянии.
</p>
<p>Также есть вероятность того, что в вашей системе не включен репозиторий, содержащий нужный пакет — например, пакет находится в репозитории <a href="../ru/Official_repositories.html#multilib" title="Official repositories (Русский)">multilib</a>, но <code>multilib</code> не включен в файле <code>pacman.conf</code>.
</p>
<p>Смотрите также <a href="../ru/Frequently_asked_questions.html#%D0%9F%D0%BE%D1%87%D0%B5%D0%BC%D1%83_%D0%B2_%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D1%8F%D1%85_%D0%B5%D1%81%D1%82%D1%8C_%D1%82%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE_%D0%BE%D0%B4%D0%BD%D0%B0_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8F_%D0%BA%D0%B0%D0%B6%D0%B4%D0%BE%D0%B9_%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B8?" title="Frequently asked questions (Русский)">FAQ#Почему в репозиториях есть только одна версия каждой библиотеки?</a>
</p>
<div class="mw-heading mw-heading3"><h3 id="Исправление_не_загружающейся_системы,_вызванной_прерванным_обновлением">
<span id=".D0.98.D1.81.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B6.D0.B0.D1.8E.D1.89.D0.B5.D0.B9.D1.81.D1.8F_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B.2C_.D0.B2.D1.8B.D0.B7.D0.B2.D0.B0.D0.BD.D0.BD.D0.BE.D0.B9_.D0.BF.D1.80.D0.B5.D1.80.D0.B2.D0.B0.D0.BD.D0.BD.D1.8B.D0.BC_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5.D0.BC"></span>Исправление не загружающейся системы, вызванной прерванным обновлением</h3></div>
<p>Обновление может быть прервано из-за отключения питания, сбоя ядра или аппаратного сбоя. В большинстве случаев большого ущерба не будет, но система, скорее всего, не сможет загружаться.
</p>
<ol>
<li>Подготовьте <a href="../ru/USB_flash_installation_medium.html" title="USB flash installation medium (Русский)">установочный USB-носитель</a> и загрузитесь с него.</li>
<li>
<a href="../ru/File_systems.html#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" class="mw-redirect" title="Смонтируйте">Смонтируйте</a> корневую файловую систему, а также ваш <a href="../ru/EFI_system_partition.html" title="EFI system partition (Русский)">ESP</a>.</li>
<li>
<code>arch-chroot</code> в смонтированную корневую файловую систему.</li>
<li>Проверьте <code>/var/log/pacman.log</code> и повторите точное обновление, указав <i>полный</i> список пакетов, которые были обновлены во время неудачной транзакции, в <code>pacman -Syu</code>, что позволит переустановить его при возобновлении первоначального обновления:</li>
</ol>
<pre># pacman -Syu $(grep "\[<i>2025-07-27T22.*</i>\] \[ALPM\] upgraded" /var/log/pacman.log | cut -d " " -f4 | tr "\n" " ")
</pre>
<p>Необходимо повторить <i>точное</i> обновление для обеспечения запуска правильных скриплетов и хуков.
</p>
<div class="mw-heading mw-heading3"><h3 id="pacman_падает_при_обновлении">
<span id="pacman_.D0.BF.D0.B0.D0.B4.D0.B0.D0.B5.D1.82_.D0.BF.D1.80.D0.B8_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B8"></span>pacman падает при обновлении</h3></div>
<p>Если при удалении пакетов <i>pacman</i> завершает свою работу с ошибкой "database write" ("запись в базу данных"), и после этого все попытки переустановки или обновления пакетов завершаются неудачей, сделайте следующее:
</p>
<ol>
<li>Загрузитесь, используя <a href="../ru/USB_flash_installation_medium.html" title="USB flash installation medium (Русский)">Arch Live USB</a>. Желательно, чтобы версия <i>pacman</i> в образе была не старше той, что установлена в системе.</li>
<li>Смонтируйте корневую файловую систему, например, командой <code>mount /dev/sdaX /mnt</code> от root, и убедитесь, что в точке монтирования достаточно свободного места (команда <code>df -h</code>).</li>
<li>Смонтируйте файловые системы proc, sys и dev: <code>mount -t proc proc /mnt/proc; mount --rbind /sys /mnt/sys; mount --rbind /dev /mnt/dev </code>
</li>
<li>Если в системе используются стандартное расположение баз данных и каталогов, то можно синхронизировать базу данных <i>pacman</i> и обновить систему командой <code>pacman --root=/mnt --cachedir=/mnt/var/cache/pacman/pkg -Syu</code> с правами root.
<ul><li>Кроме того, если не удаётся обновить систему, изучите рекомендации из <a href="../en/2e4d227f9777e5ab77c3bc6da83f5768.html#%D0%9F%D0%B5%D1%80%D0%B5%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B2%D1%81%D0%B5%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы#Переустановка всех пакетов</a>.</li></ul>
</li>
<li>После обновления стоит убедиться, что в системе не осталось необновлённых нерабочих пакетов: <code>find /mnt/usr/lib -size 0</code>.</li>
<li>Если такие пакеты всё же есть, их нужно переустановить: <code>pacman --root /mnt --cachedir=/mnt/var/cache/pacman/pkg -S <i>пакет</i></code>.</li>
</ol>
<div class="mw-heading mw-heading4"><h4 id="pacman:_команда_не_найдена">
<span id="pacman:_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B0_.D0.BD.D0.B5_.D0.BD.D0.B0.D0.B9.D0.B4.D0.B5.D0.BD.D0.B0"></span>pacman: команда не найдена</h4></div>
<p>Если <code>/var/cache/pacman/pkg</code> является символической ссылкой, <i>pacman</i> в процессе самообновления попытается вместо неё создать каталог и таким образом удалит эту символическую ссылку. Из-за этого обновление завершится неудачей. В результате <code>/usr/bin/pacman</code> и другие файлы из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span> исчезнут из системы.
</p>
<p>Никогда не делайте <code>/var/cache/pacman/pkg</code> символической ссылкой, так как этот путь находится под контролем <i>pacman</i>. Вместо этого используйте опцию <code>CacheDir</code> или bind mount; подробнее смотрите <a href="#%D0%9A%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3_%D0%B4%D0%BB%D1%8F_%D0%BA%D1%8D%D1%88%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">#Каталог для кэша пакетов</a>.
</p>
<p>Если вы всё-таки столкнулись с этой проблемой и сломали свою систему, вы можете вручную извлечь содержимое <code>/usr</code> из пакета, чтобы восстановить <i>pacman</i>, а затем корректно его переустановить; смотрите <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/73306">FS#73306</a> и <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=241213">тему на форуме</a> для подробностей.
</p>
<div class="mw-heading mw-heading3"><h3 id="Переустановка_pacman_вручную">
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_pacman_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E"></span>Переустановка pacman вручную</h3></div>
<div class="mw-heading mw-heading4"><h4 id="С_помощью_pacman-static">
<span id=".D0.A1_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_pacman-static"></span>С помощью pacman-static</h4></div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pacman-static/">pacman-static</a></span><sup><small>AUR</small></sup> — статически скомпонованная версия <i>pacman</i>, которая может работать даже при отключении/повреждении системных библиотек. Это может помочь, если произошло <a href="../ru/System_maintenance.html#%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D1%8E%D1%82%D1%81%D1%8F" title="System maintenance (Русский)">частичное обновление</a> и <i>pacman</i> больше не работает.
</p>
<p>Прикреплённый комментарий в PKGBUILD содержит ссылку на закачку двоичного файла, с помощью которого можно переустановить <i>pacman</i> или обновить систему целиком в случае частичного обновления.
</p>
<div class="mw-heading mw-heading5"><h5 id="Использование_предварительно_скомпилированного_двоичного_файла_pacman-static_при_сбое_сборки_PKGBUILD">
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.B5.D0.B4.D0.B2.D0.B0.D1.80.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.BE_.D1.81.D0.BA.D0.BE.D0.BC.D0.BF.D0.B8.D0.BB.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B2.D0.BE.D0.B8.D1.87.D0.BD.D0.BE.D0.B3.D0.BE_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0_pacman-static_.D0.BF.D1.80.D0.B8_.D1.81.D0.B1.D0.BE.D0.B5_.D1.81.D0.B1.D0.BE.D1.80.D0.BA.D0.B8_PKGBUILD"></span>Использование предварительно скомпилированного двоичного файла pacman-static при сбое сборки PKGBUILD</h5></div>
<p>В некоторых ситуациях ваша система может быть слишком перегружена (например, из-за отсутствия или несовместимости библиотек) для успешного запуска `makepkg` или сборки пакета `pacman-static` из AUR.
</p>
<p>Если сборка из PKGBUILD завершается неудачей или `makepkg` не может быть запущен, вы можете загрузить предварительно скомпилированный двоичный файл `pacman-static` из надежного источника. Этот статический двоичный файл не зависит от системных библиотек и может быть использован для восстановления работоспособности `pacman` в вашей системе.
</p>
<p>Надежным источником для этого двоичного файла является:
</p>
<pre># <a rel="nofollow" class="external free" href="https://pkgbuild.com/~morganamilo/pacman-static/x86_64/bin/pacman-static">https://pkgbuild.com/~morganamilo/pacman-static/x86_64/bin/pacman-static</a>
</pre>
<p>Используйте его, запустив:
</p>
<pre>$ curl -L -o pacman-static <a rel="nofollow" class="external free" href="https://pkgbuild.com/~morganamilo/pacman-static/x86_64/bin/pacman-static">https://pkgbuild.com/~morganamilo/pacman-static/x86_64/bin/pacman-static</a>
$ chmod +x pacman-static
$ sudo ./pacman-static -Syu pacman
</pre>
<p>Это обновит вашу систему и переустановит `pacman`, исправив нарушенные зависимости, связанные с отсутствующими общими библиотеками.
</p>
<div class="mw-heading mw-heading4"><h4 id="С_помощью_внешнего_pacman">
<span id=".D0.A1_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D0.B2.D0.BD.D0.B5.D1.88.D0.BD.D0.B5.D0.B3.D0.BE_pacman"></span>С помощью внешнего pacman</h4></div>
<p>Если не работает даже <code>pacman-static</code>, то можно попробовать восстановить систему с помощью внешнего <i>pacman</i>. Простейший способ — воспользоваться <a href="../ru/Archiso.html" title="Archiso (Русский)">archiso</a> и указать точку монтирования в опции <code>--sysroot</code> или <code>--root</code>. Подробнее о том, как смонтировать файловую систему для <code>--sysroot</code>, смотрите <a href="../ru/Chroot.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_chroot" title="Chroot (Русский)">chroot#Используя chroot</a>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Извлечение_вручную">
<span id=".D0.98.D0.B7.D0.B2.D0.BB.D0.B5.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E"></span>Извлечение вручную</h4></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Есть большая вероятность, что следуя рекомендациям ниже вы добьёте свою систему. Используйте их как последнее средство, если советы из раздела <a href="#pacman_%D0%BF%D0%B0%D0%B4%D0%B0%D0%B5%D1%82_%D0%BF%D1%80%D0%B8_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8">#pacman падает при обновлении</a> не помогли или нереализуемы.
</div>
<p>Даже если <i>pacman</i> не подаёт признаков жизни, всё ещё можно починить его вручную, загрузив последние версии пакетов и распаковав файлы в нужные места. Последовательность действий:
</p>
<ol>
<li>Узнайте зависимости пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span>.</li>
<li>Скачайте пакеты с любого рабочего <a href="../ru/Mirrors.html" title="Mirrors (Русский)">зеркала</a>.</li>
<li>Извлеките каждый пакет в корневой каталог.</li>
<li>Переустановите эти пакеты командами <code>pacman -S --overwrite <i>название_пакета</i></code>, чтобы обновить базу данных.</li>
<li>Выполните полное обновление системы.</li>
</ol>
<p>Если у вас имеется доступ к другой работоспособной системе с Arch Linux, полный список зависимостей можно узнать командой
</p>
<pre>$ pacman -Q $(pactree -u pacman)
</pre>
<p>Возможно, вам необходимо обновить только несколько пакетов, в зависимости от серьёзности проблемы. Пример команды распаковки архива пакета:
</p>
<pre># tar -xvpwf <i>пакет.tar.zst</i> -C / --exclude .PKGINFO --exclude .INSTALL --exclude .MTREE --exclude .BUILDINFO
</pre>
<p>Обратите внимание на флаг <code>-w</code>, который включает интерактивный режим. Запускать распаковку неинтерактивно рискованно, потому что можно перезаписать важный файл. Также не забудьте, что пакеты нужно распаковывать в правильном порядке (сначала зависимости). <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=95007">На форуме</a> рассмотрен пример процесса восстановления работоспособности <i>pacman</i> c несколькими неработающими пакетами-зависимостями.
</p>
<div class="mw-heading mw-heading3"><h3 id="Ошибка_&quot;Unable_to_find_root_device&quot;_после_перезагрузки">
<span id=".D0.9E.D1.88.D0.B8.D0.B1.D0.BA.D0.B0_.22Unable_to_find_root_device.22_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8"></span>Ошибка "Unable to find root device" после перезагрузки</h3></div>
<p>Вероятно, при обновлении <a href="../ru/Kernel.html" title="Kernel (Русский)">ядра</a> был повреждён образ <a href="../ru/Arch_boot_process.html#initramfs" title="Arch boot process (Русский)">initramfs</a> (например, при использовании <i>pacman</i> с опцией <code>--overwrite</code>). Для восстановления работоспособности есть два варианта, и первый из них — использовать <i>fallback</i>-образ.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Если вы удалили этот пункт из меню загрузчика по каким-либо причинам, вы можете нажать клавишу <code>Tab</code> (при использовании Syslinux) или <code>e</code> (при использовании GRUB или systemd-boot), когда на экране появится меню загрузчика, переименовать образ в <code>initramfs-linux-fallback.img</code> и нажать <code>Enter</code> или <code>b</code> (в зависимости от используемого <a href="../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" title="Arch boot process (Русский)">загрузчика</a>), чтобы выполнить загрузку с новыми параметрами.
</div>
<p>Когда система запустится, выполните команду пересборки образа initramfs либо из консоли, либо из терминала (для стандартного ядра <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>):
</p>
<pre># mkinitcpio -p linux
</pre>
<p>Если этот способ не сработает, загрузитесь с Live-USB, <a href="../ru/File_systems.html#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" title="File systems (Русский)">смонтируйте</a> корневой и загрузочный разделы в <code>/mnt</code> и <code>/mnt/boot</code> соответственно, после чего сделайте <a href="../ru/Chroot.html" title="Chroot (Русский)">chroot</a> командой <i>arch-chroot</i>:
</p>
<pre># arch-chroot /mnt
# pacman -Syu mkinitcpio systemd linux
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> 
<ul>
<li>Если у вас нет текущего релиза, или есть только какой-либо другой "live"-дистрибутив Linux, вы можете выполнить <a href="../ru/Change_root.html" class="mw-redirect" title="Change root (Русский)">chroot</a>, используя старый способ. Очевидно, при этом вам придется напечатать больше, чем просто <code>arch-chroot</code> для запуска соответствующего скрипта.</li>
<li>Если <i>pacman</i> выдаёт ошибку <code>Could not resolve host</code>, <a href="../ru/Network_configuration.html#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F" title="Network configuration (Русский)">проверьте ваше интернет-соединение</a>.</li>
<li>Если вы не можете войти в окружение arch-chroot или chroot, но нуждаетесь в переустановке пакетов, можете использовать команду <code>pacman --sysroot /mnt -Syu foo bar</code>, чтобы указать <i>pacman</i> ваш корневой раздел.</li>
</ul>
</div>
<p>Переустановка ядра (пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>) автоматически пересоздаст образ initramfs при помощи <code>mkinitcpio -p linux</code>. Нет необходимости дополнительно вводить эту команду.
</p>
<p>После всего этого рекомендуется выполнить <code>exit</code>, <code>umount /mnt/{boot,} </code> и <code>reboot</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Warning:_current_locale_is_invalid;_using_default_&quot;C&quot;_locale">
<span id="Warning:_current_locale_is_invalid.3B_using_default_.22C.22_locale"></span>Warning: current locale is invalid; using default "C" locale</h3></div>
<p>Как сказано в сообщении ошибки, локаль системы настроена неправильно (смотрите статью <a href="../ru/Locale.html" class="mw-redirect" title="Локали">Локали</a>).
</p>
<div class="mw-heading mw-heading3"><h3 id="Предупреждающие_сообщения_о_пропущенных_локалях">
<span id=".D0.9F.D1.80.D0.B5.D0.B4.D1.83.D0.BF.D1.80.D0.B5.D0.B6.D0.B4.D0.B0.D1.8E.D1.89.D0.B8.D0.B5_.D1.81.D0.BE.D0.BE.D0.B1.D1.89.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BE_.D0.BF.D1.80.D0.BE.D0.BF.D1.83.D1.89.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_.D0.BB.D0.BE.D0.BA.D0.B0.D0.BB.D1.8F.D1.85"></span>Предупреждающие сообщения о пропущенных локалях</h3></div>
<p>Когда файлы локалей намеренно удаляются с помощью таких инструментов, как <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bleachbit">bleachbit</a></span> или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/localepurge/">localepurge</a></span><sup><small>AUR</small></sup>, <i>pacman</i> может выдавать предупреждения об отсутствующих локалях во время обновления пакета.
</p>
<p>Чтобы отключить эти предупреждения, вы можете закомментировать параметр <code>CheckSpace</code> в <code>pacman.conf</code>. Имейте в виду, что отключение CheckSpace отключает функцию проверки свободного места при установке всех пакетов, поэтому используйте этот обходной путь только в том случае, если у вас есть альтернативные средства контроля свободного места на диске.
</p>
<div class="mw-heading mw-heading3"><h3 id="pacman_игнорирует_настройки_прокси">
<span id="pacman_.D0.B8.D0.B3.D0.BD.D0.BE.D1.80.D0.B8.D1.80.D1.83.D0.B5.D1.82_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_.D0.BF.D1.80.D0.BE.D0.BA.D1.81.D0.B8"></span>pacman игнорирует настройки прокси</h3></div>
<p>Удостоверьтесь, что соответствующие переменные окружения (<code>$http_proxy</code>, <code>$ftp_proxy</code> и т.д.) заданы верно. Если вы используете <i>pacman</i> вместе с <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a>, необходимо настроить sudo на <a href="../ru/Sudo.html#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F" title="Sudo (Русский)">передачу переменных окружения в pacman</a>. Также убедитесь, что настройки <a href="../ru/GnuPG.html#%D0%A1%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D1%8B_%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9" title="GnuPG (Русский)">dirmngr</a> в файле <code>/etc/pacman.d/gnupg/dirmngr.conf</code> содержат параметр <code>honor-http-proxy</code>, отвечающий за использование прокси при обновлении ключей.
</p>
<div class="mw-heading mw-heading3"><h3 id="Как_переустановить_все_пакеты,_сохранив_информацию_о_том,_какие_из_них_установлены_явно,_а_какие_—_в_качестве_зависимостей?">
<span id=".D0.9A.D0.B0.D0.BA_.D0.BF.D0.B5.D1.80.D0.B5.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.B8.D1.82.D1.8C_.D0.B2.D1.81.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D1.8B.2C_.D1.81.D0.BE.D1.85.D1.80.D0.B0.D0.BD.D0.B8.D0.B2_.D0.B8.D0.BD.D1.84.D0.BE.D1.80.D0.BC.D0.B0.D1.86.D0.B8.D1.8E_.D0.BE_.D1.82.D0.BE.D0.BC.2C_.D0.BA.D0.B0.D0.BA.D0.B8.D0.B5_.D0.B8.D0.B7_.D0.BD.D0.B8.D1.85_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D1.8B_.D1.8F.D0.B2.D0.BD.D0.BE.2C_.D0.B0_.D0.BA.D0.B0.D0.BA.D0.B8.D0.B5_.E2.80.94_.D0.B2_.D0.BA.D0.B0.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.B5_.D0.B7.D0.B0.D0.B2.D0.B8.D1.81.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B5.D0.B9.3F"></span>Как переустановить все пакеты, сохранив информацию о том, какие из них установлены явно, а какие — в качестве зависимостей?</h3></div>
<p>Чтобы переустановить все пакеты из официальных репозиториев, выполните <code>pacman -S $(pacman -Qnq)</code> (опция <code>-S</code> сохраняет причину установки по умолчанию).
</p>
<p>После этого необходимо переустановить все пакеты из неизвестных источников, список которых можно получить командой <code>pacman -Qmq</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Cannot_open_shared_object_file">Cannot open shared object file</h3></div>
<p>Скорее всего, это означает, что при выполнении предыдущей операции <i>pacman</i> удалил или повредил разделяемые библиотеки, необходимые для него самого.
</p>
<p>Чтобы выйти из этой ситуации, нужно вручную распаковать необходимые библиотеки в вашу файловую систему. Сперва определите, в каком пакете содержится требуемая библиотека, а затем найдите этот пакет в кэше <i>pacman</i> (<code>/var/cache/pacman/pkg/</code>). Распакуйте разделяемую библиотеку в файловую систему. Это позволит вам запустить <i>pacman</i>.
</p>
<p>Теперь необходимо <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">переустановить</a> испорченный пакет. При этом обязательно используйте ключ <code>--overwrite</code>, поскольку вы лишь распаковали системные файлы, но <i>pacman</i> об этом не знает. Pacman корректно заменит ваш файл разделяемой библиотеки на тот, что имеется в пакете.
</p>
<p>Вот и все. Обновите оставшуюся часть системы.
</p>
<div class="mw-heading mw-heading3"><h3 id="Проблемы_с_загрузкой_пакетов">
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.BE.D0.B9_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Проблемы с загрузкой пакетов</h3></div>
<p>Были сообщения о некоторых сетевых проблемах, которые приводят к невозможности обновления/синхронизации: <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=68944">[2]</a>, <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=65728">[3]</a>. При обычной установке Arch Linux эти проблемы не появляются, так как стандартный загрузчик файлов при этом заменяется другим (смотрите <a href="../en/2e4d227f9777e5ab77c3bc6da83f5768.html#%D0%9F%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C" class="mw-redirect" title="Pacman/Советы и приёмы">pacman/Советы и приёмы#Производительность</a>). При установке Arch Linux в <a href="../ru/VirtualBox.html" title="VirtualBox (Русский)">VirtualBox</a> эта проблема также появляется, когда вы используете опцию виртуальной машины <i>Host interface</i> вместо <i>NAT</i>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Failed_retrieving_file_'core.db'_from_mirror">
<span id="Failed_retrieving_file_.27core.db.27_from_mirror"></span>Failed retrieving file 'core.db' from mirror</h3></div>
<p>Если <a href="../ru/Mirrors.html" title="Mirrors (Русский)">зеркала</a> настроены правильно, но вы получаете сообщение об ошибке <code>не удалось получить файл 'core.db'</code>, попробуйте выбрать другой <a href="../ru/Domain_name_resolution.html" title="Domain name resolution (Русский)">сервер имён</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="'local-package.pkg.tar':_permission_denied">
<span id=".27local-package.pkg.tar.27:_permission_denied"></span>'local-package.pkg.tar': permission denied</h3></div>
<p>Если вы пытались установить пакет в смонтированной файловой системе sshfs с помощью команды <code>pacman -U</code> и получили такую ошибку, переместите пакет в локальный каталог и попробуйте ещё раз.
</p>
<div class="mw-heading mw-heading3"><h3 id="error:_could_not_determine_cachedir_mount_point_/var/cache/pacman/pkg">
<span id="error:_could_not_determine_cachedir_mount_point_.2Fvar.2Fcache.2Fpacman.2Fpkg"></span>error: could not determine cachedir mount point /var/cache/pacman/pkg</h3></div>
<p>Во время выполнения в chroot-окружении, например, команды <code>pacman -Syu</code>, может произойти следующая ошибка:
</p>
<pre>error: could not determine cachedir mount point /var/cache/pacman/pkg
error: failed to commit transaction (not enough free disk space)
</pre>
<p>Такое часто случается, если каталог для chroot не являлся точкой монтирования на момент входа в chroot. Решение проблемы приведено в примечании к <a href="../en/b0e3204c2dd7655ea2ac4741f5d01d4a.html#%D0%A1%D0%BA%D0%B0%D1%87%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B1%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D1%85_%D1%83%D1%82%D0%B8%D0%BB%D0%B8%D1%82" class="mw-redirect" title="Установка Arch из другого дистрибутива">Установка Arch из другого дистрибутива#Скачивание базовых утилит</a>, а объяснения и пример bind-монтирования с превращением chroot-каталога в точку монтирования можно найти в <span class="plainlinks archwiki-template-man" title="$ man 8 arch-chroot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/arch-chroot.8">arch-chroot(8)</a></span>.
</p>
<div class="mw-heading mw-heading3"><h3 id="error:_GPGME_error:_No_data">error: GPGME error: No data</h3></div>
<p>If you are unable to update packages and receive this error, then try <code>rm -r /var/lib/pacman/sync/</code> before attempting to update.
</p>
<p><br>	
If removing sync files doesn't help, check that the sync files are <code>gzip compressed data</code> using <code>file /var/lib/pacman/sync/*</code> before attempting to update. A router or proxy might corrupt the downloads. Corruption could possibly be HTML type.
</p>
<p><br>	
If sync files are of the correct type, there might be an issue with the mirror server. Look up the mirror server(s) in use with <code>pacman-conf -r core</code> and <code>pacman-conf -r extra</code>. Paste the first returned url in a browser and check that a file listing is returned. In case the mirror returns an error, comment it in <code>/etc/pacman.d/mirrorlist</code>. You may try updating or re-ranking <a href="../en/Mirrors.html" title="Mirrors">mirrors</a>.
</p>
<p><br>	
</p>
<div class="mw-heading mw-heading3"><h3 id="error:_GPGME_error:_General_error_and_&quot;::_File_/var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst_is_corrupted_(invalid_or_corrupted_package_(PGP_signature)).">
<span id="error:_GPGME_error:_General_error_and_.22::_File_.2Fvar.2Fcache.2Fpacman.2Fpkg.2F.3Cpackage.3E.pkg.tar.zst_is_corrupted_.28invalid_or_corrupted_package_.28PGP_signature.29.29."></span>error: GPGME error: General error and ":: File /var/cache/pacman/pkg/&lt;package&gt;.pkg.tar.zst is corrupted (invalid or corrupted package (PGP signature)).</h3></div>
<p>If this error occurs and you're for instance unable to update your system or any package at all, it is possible that you have <code>DISPLAY</code> set to a blank value, which seems to break the GPG-Flow.
</p>
<p><br>	
In this case, <code>unset DISPLAY</code> or setting it to a arbitrary value will most likely allow to update again, in case any other option above didn't do the trick yet.
</p>
<p>See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=2204786">this</a> post for further details.
</p>
<p><br>	
</p>
<div class="mw-heading mw-heading3"><h3 id="Переустановка_сломанных_или_несинхронизированных_пакетов">
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.81.D0.BB.D0.BE.D0.BC.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D0.B8.D0.BB.D0.B8_.D0.BD.D0.B5.D1.81.D0.B8.D0.BD.D1.85.D1.80.D0.BE.D0.BD.D0.B8.D0.B7.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span>Переустановка сломанных или несинхронизированных пакетов</h3></div>
<p>Можно использовать <code>pacman -Qk $pkg</code>, чтобы проверить, соответствуют ли установленные файлы пакета <code>$pkg</code> файлам из его версии базы данных. Для нескольких пакетов можно использовать следующий цикл, чтобы переустановить все пакеты, в которых отсутствуют файлы:
</p>
<pre># LC_ALL=C.UTF-8 pacman -Qk 2&gt;/dev/null | grep -v ' 0 missing files' | cut -d: -f1 |
    while read -r package; do
        pacman -S "$package" --noconfirm
    done
</pre>
<p>Предположим, что ваша локальная база данных, расположенная в <code>/var/lib/pacman</code>, более актуальна по сравнению с установленными пакетами в файловой системе <code>/</code> (<i>например</i>, из-за частичного отката), тогда этот метод подходит для повторной синхронизации корневой файловой системы с локальной базой данных.
</p>
<div class="mw-heading mw-heading2"><h2 id="Смотрите_также">
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span>Смотрите также</h2></div>
<ul>
<li><span class="plainlinks archwiki-template-man" title="$ man 3 libalpm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/libalpm.3">libalpm(3)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 pacman"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.8">pacman(8)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 5 pacman.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pacman.conf.5">pacman.conf(5)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 repo-add"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/repo-add.8">repo-add(8)</a></span></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:Package_manager.html" title="Category:Package manager (Русский)">Package manager (Русский)</a></li>
<li><a href="../ru/Category:Arch_projects.html" title="Category:Arch projects (Русский)">Arch projects (Русский)</a></li>
<li><a href="../ru/Category:Commands.html" title="Category:Commands (Русский)">Commands (Русский)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pacman_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=844450">https://wiki.archlinux.org/index.php?title=Pacman_(Русский)&amp;oldid=844450</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 17 August 2025, at 15:27.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true">pacman (Русский)</div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
