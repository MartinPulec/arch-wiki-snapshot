<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Bluetooth headset (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Bluetooth_headset_Русский rootpage-Bluetooth_headset_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Наушники_через_PipeWire" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%B8_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_PipeWire">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Наушники через PipeWire</div>
		</a>
		
		<ul id="toc-Наушники_через_PipeWire-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Наушники_через_Bluez5/PulseAudio" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%B8_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_Bluez5/PulseAudio">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Наушники через Bluez5/PulseAudio</div>
		</a>
		
			<button aria-controls="toc-Наушники_через_Bluez5/PulseAudio-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Наушники через Bluez5/PulseAudio subsection</span>
			</button>
		
		<ul id="toc-Наушники_через_Bluez5/PulseAudio-sublist" class="vector-toc-list">
			<li id="toc-Настройка_через_командную_строку" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D1%83%D1%8E_%D1%81%D1%82%D1%80%D0%BE%D0%BA%D1%83">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Настройка через командную строку</div>
			</a>
			
			<ul id="toc-Настройка_через_командную_строку-sublist" class="vector-toc-list">
				<li id="toc-Автоподключение" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>Автоподключение</div>
			</a>
			
			<ul id="toc-Автоподключение-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Настройка_через_GNOME_Bluetooth" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_GNOME_Bluetooth">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Настройка через GNOME Bluetooth</div>
			</a>
			
			<ul id="toc-Настройка_через_GNOME_Bluetooth-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-LDAC/aptX" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#LDAC/aptX">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>LDAC/aptX</div>
			</a>
			
			<ul id="toc-LDAC/aptX-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Решение проблем</div>
			</a>
			
			<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
				<li id="toc-Плохой_звук_/_Постоянный_шум_/_«Мутный»_звук" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%BB%D0%BE%D1%85%D0%BE%D0%B9_%D0%B7%D0%B2%D1%83%D0%BA_/_%D0%9F%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D1%8B%D0%B9_%D1%88%D1%83%D0%BC_/_%C2%AB%D0%9C%D1%83%D1%82%D0%BD%D1%8B%D0%B9%C2%BB_%D0%B7%D0%B2%D1%83%D0%BA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.1</span>Плохой звук / Постоянный шум / «Мутный» звук</div>
			</a>
			
			<ul id="toc-Плохой_звук_/_Постоянный_шум_/_«Мутный»_звук-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Профиль_выбран,_но_наушники_неактивны_и_звук_не_может_быть_перенаправлен" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D1%8C_%D0%B2%D1%8B%D0%B1%D1%80%D0%B0%D0%BD,_%D0%BD%D0%BE_%D0%BD%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%B8_%D0%BD%D0%B5%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D1%8B_%D0%B8_%D0%B7%D0%B2%D1%83%D0%BA_%D0%BD%D0%B5_%D0%BC%D0%BE%D0%B6%D0%B5%D1%82_%D0%B1%D1%8B%D1%82%D1%8C_%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.2</span>Профиль выбран, но наушники неактивны и звук не может быть перенаправлен</div>
			</a>
			
			<ul id="toc-Профиль_выбран,_но_наушники_неактивны_и_звук_не_может_быть_перенаправлен-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Сопряжение_не_удаётся_с_ошибкой_AuthenticationFailed" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D1%81_%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%BE%D0%B9_AuthenticationFailed">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.3</span>Сопряжение не удаётся с ошибкой AuthenticationFailed</div>
			</a>
			
			<ul id="toc-Сопряжение_не_удаётся_с_ошибкой_AuthenticationFailed-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Сопряжение_работает,_но_соединение_не_удаётся" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82,_%D0%BD%D0%BE_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.4</span>Сопряжение работает, но соединение не удаётся</div>
			</a>
			
			<ul id="toc-Сопряжение_работает,_но_соединение_не_удаётся-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Соединение_работает,_но_в_звуке_постоянные_артефакты" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82,_%D0%BD%D0%BE_%D0%B2_%D0%B7%D0%B2%D1%83%D0%BA%D0%B5_%D0%BF%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D1%8B%D0%B5_%D0%B0%D1%80%D1%82%D0%B5%D1%84%D0%B0%D0%BA%D1%82%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.5</span>Соединение работает, но в звуке постоянные артефакты</div>
			</a>
			
			<ul id="toc-Соединение_работает,_но_в_звуке_постоянные_артефакты-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Соединение_работает,_но_не_получается_воспроизвести_звук" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82,_%D0%BD%D0%BE_%D0%BD%D0%B5_%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D0%B2%D0%BE%D1%81%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%B8_%D0%B7%D0%B2%D1%83%D0%BA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.6</span>Соединение работает, но не получается воспроизвести звук</div>
			</a>
			
			<ul id="toc-Соединение_работает,_но_не_получается_воспроизвести_звук-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Соединение_работает,_но_устройство_не_отображается_среди_устройств_вывода_PulseAudio" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82,_%D0%BD%D0%BE_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%BD%D0%B5_%D0%BE%D1%82%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D1%81%D1%80%D0%B5%D0%B4%D0%B8_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0_PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.7</span>Соединение работает, но устройство не отображается среди устройств вывода PulseAudio</div>
			</a>
			
			<ul id="toc-Соединение_работает,_но_устройство_не_отображается_среди_устройств_вывода_PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Соединение_работает,_звук_играет,_а_после_неактивности_заикается" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82,_%D0%B7%D0%B2%D1%83%D0%BA_%D0%B8%D0%B3%D1%80%D0%B0%D0%B5%D1%82,_%D0%B0_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BD%D0%B5%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D0%BE%D1%81%D1%82%D0%B8_%D0%B7%D0%B0%D0%B8%D0%BA%D0%B0%D0%B5%D1%82%D1%81%D1%8F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.8</span>Соединение работает, звук играет, а после неактивности заикается</div>
			</a>
			
			<ul id="toc-Соединение_работает,_звук_играет,_а_после_неактивности_заикается-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-UUIDs_has_unsupported_type" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#UUIDs_has_unsupported_type">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.9</span>UUIDs has unsupported type</div>
			</a>
			
			<ul id="toc-UUIDs_has_unsupported_type-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Компьютер_показывает_устройство_как_сопряжённое,_но_это_не_распознаётся_устройством" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80_%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D0%B5%D1%82_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%BA%D0%B0%D0%BA_%D1%81%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D1%91%D0%BD%D0%BD%D0%BE%D0%B5,_%D0%BD%D0%BE_%D1%8D%D1%82%D0%BE_%D0%BD%D0%B5_%D1%80%D0%B0%D1%81%D0%BF%D0%BE%D0%B7%D0%BD%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.10</span>Компьютер показывает устройство как сопряжённое, но это не распознаётся устройством</div>
			</a>
			
			<ul id="toc-Компьютер_показывает_устройство_как_сопряжённое,_но_это_не_распознаётся_устройством-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Устройство_подключается_и_затем_отключается_спустя_мгновение" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D0%B8_%D0%B7%D0%B0%D1%82%D0%B5%D0%BC_%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D1%81%D0%BF%D1%83%D1%81%D1%82%D1%8F_%D0%BC%D0%B3%D0%BD%D0%BE%D0%B2%D0%B5%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.11</span>Устройство подключается и затем отключается спустя мгновение</div>
			</a>
			
			<ul id="toc-Устройство_подключается_и_затем_отключается_спустя_мгновение-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-В_Apple_AirPods_маленькая_громкость" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%92_Apple_AirPods_%D0%BC%D0%B0%D0%BB%D0%B5%D0%BD%D1%8C%D0%BA%D0%B0%D1%8F_%D0%B3%D1%80%D0%BE%D0%BC%D0%BA%D0%BE%D1%81%D1%82%D1%8C">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.12</span>В Apple AirPods маленькая громкость</div>
			</a>
			
			<ul id="toc-В_Apple_AirPods_маленькая_громкость-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Apple_AirPods_Pro_работает_с_PulseAudio_как_вывод_A2DP,_но_не_как_HSP/HFP" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Apple_AirPods_Pro_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82_%D1%81_PulseAudio_%D0%BA%D0%B0%D0%BA_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4_A2DP,_%D0%BD%D0%BE_%D0%BD%D0%B5_%D0%BA%D0%B0%D0%BA_HSP/HFP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.13</span>Apple AirPods Pro работает с PulseAudio как вывод A2DP, но не как HSP/HFP</div>
			</a>
			
			<ul id="toc-Apple_AirPods_Pro_работает_с_PulseAudio_как_вывод_A2DP,_но_не_как_HSP/HFP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблема_с_HSP:_ввод_и_вывод_bluetooth_созданы,_но_звук_не_передаётся" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D0%B0_%D1%81_HSP:_%D0%B2%D0%B2%D0%BE%D0%B4_%D0%B8_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4_bluetooth_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D1%8B,_%D0%BD%D0%BE_%D0%B7%D0%B2%D1%83%D0%BA_%D0%BD%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.14</span>Проблема с HSP: ввод и вывод bluetooth созданы, но звук не передаётся</div>
			</a>
			
			<ul id="toc-Проблема_с_HSP:_ввод_и_вывод_bluetooth_созданы,_но_звук_не_передаётся-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error:_Failed_to_start_discovery_org.bluez.Error.InProgress" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Error:_Failed_to_start_discovery_org.bluez.Error.InProgress">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.15</span>Error: Failed to start discovery org.bluez.Error.InProgress</div>
			</a>
			
			<ul id="toc-Error:_Failed_to_start_discovery_org.bluez.Error.InProgress-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Высокая_громкость_звука_из-за_синхронизации_между_наушниками_и_PulseAudio" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D1%81%D0%BE%D0%BA%D0%B0%D1%8F_%D0%B3%D1%80%D0%BE%D0%BC%D0%BA%D0%BE%D1%81%D1%82%D1%8C_%D0%B7%D0%B2%D1%83%D0%BA%D0%B0_%D0%B8%D0%B7-%D0%B7%D0%B0_%D1%81%D0%B8%D0%BD%D1%85%D1%80%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8_%D0%BC%D0%B5%D0%B6%D0%B4%D1%83_%D0%BD%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%B0%D0%BC%D0%B8_%D0%B8_PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.16</span>Высокая громкость звука из-за синхронизации между наушниками и PulseAudio</div>
			</a>
			
			<ul id="toc-Высокая_громкость_звука_из-за_синхронизации_между_наушниками_и_PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Переключение_между_HSP/HFP_и_A2DP" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%B5%D0%B6%D0%B4%D1%83_HSP/HFP_%D0%B8_A2DP">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Переключение между HSP/HFP и A2DP</div>
		</a>
		
			<button aria-controls="toc-Переключение_между_HSP/HFP_и_A2DP-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Переключение между HSP/HFP и A2DP subsection</span>
			</button>
		
		<ul id="toc-Переключение_между_HSP/HFP_и_A2DP-sublist" class="vector-toc-list">
			<li id="toc-A2DP_не_работает_с_PulseAudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#A2DP_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82_%D1%81_PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>A2DP не работает с PulseAudio</div>
			</a>
			
			<ul id="toc-A2DP_не_работает_с_PulseAudio-sublist" class="vector-toc-list">
				<li id="toc-Проблема_с_интерфейсом_Socket" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D0%B0_%D1%81_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%BE%D0%BC_Socket">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.1</span>Проблема с интерфейсом Socket</div>
			</a>
			
			<ul id="toc-Проблема_с_интерфейсом_Socket-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Недоступен_профиль_вывода_A2DP" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B5%D0%BD_%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D1%8C_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0_A2DP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.2</span>Недоступен профиль вывода A2DP</div>
			</a>
			
			<ul id="toc-Недоступен_профиль_вывода_A2DP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gnome_с_GDM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gnome_%D1%81_GDM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.3</span>Gnome с GDM</div>
			</a>
			
			<ul id="toc-Gnome_с_GDM-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-HFP_не_работает_с_PulseAudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#HFP_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82_%D1%81_PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>HFP не работает с PulseAudio</div>
			</a>
			
			<ul id="toc-HFP_не_работает_с_PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отключение_автоматического_перехода_наушников_на_HSP/HFP_в_PulseAudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0_%D0%BD%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2_%D0%BD%D0%B0_HSP/HFP_%D0%B2_PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Отключение автоматического перехода наушников на HSP/HFP в PulseAudio</div>
			</a>
			
			<ul id="toc-Отключение_автоматического_перехода_наушников_на_HSP/HFP_в_PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отключение_профиля_HSP/HFP_в_PipeWire" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D1%8F_HSP/HFP_%D0%B2_PipeWire">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Отключение профиля HSP/HFP в PipeWire</div>
			</a>
			
			<ul id="toc-Отключение_профиля_HSP/HFP_в_PipeWire-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Альтернатива:_A2DP_duplex_channel" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%90%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D0%B0:_A2DP_duplex_channel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Альтернатива: A2DP duplex channel</div>
			</a>
			
			<ul id="toc-Альтернатива:_A2DP_duplex_channel-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Советы и рекомендации</div>
		</a>
		
			<button aria-controls="toc-Советы_и_рекомендации-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Советы и рекомендации subsection</span>
			</button>
		
		<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
			<li id="toc-Уровень_заряда_батареи" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C_%D0%B7%D0%B0%D1%80%D1%8F%D0%B4%D0%B0_%D0%B1%D0%B0%D1%82%D0%B0%D1%80%D0%B5%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Уровень заряда батареи</div>
			</a>
			
			<ul id="toc-Уровень_заряда_батареи-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Мультимедийные_кнопки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D1%83%D0%BB%D1%8C%D1%82%D0%B8%D0%BC%D0%B5%D0%B4%D0%B8%D0%B9%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Мультимедийные кнопки</div>
			</a>
			
			<ul id="toc-Мультимедийные_кнопки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Мультимедийные_кнопки_AVRCP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D1%83%D0%BB%D1%8C%D1%82%D0%B8%D0%BC%D0%B5%D0%B4%D0%B8%D0%B9%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8_AVRCP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Мультимедийные кнопки AVRCP</div>
			</a>
			
			<ul id="toc-Мультимедийные_кнопки_AVRCP-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Bluetooth headset (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Bluetooth_headset.html" title="Bluetooth headset – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Bluetooth_%E3%83%98%E3%83%83%E3%83%89%E3%82%BB%E3%83%83%E3%83%88" title="Bluetooth ヘッドセット – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Bluetooth_headset" title="Bluetooth headset – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Bluetooth_headset.html" title="Bluetooth headset">Bluetooth headset</a>. Дата последней синхронизации: 13 февраля 2024. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Bluetooth_headset&amp;diff=0&amp;oldid=798574">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Bluetooth.html" title="Bluetooth (Русский)">Bluetooth (Русский)</a></li>
</ul>
</div>
<p>Есть три аудиосистемы Bluetooth:
</p>
<ul>
<li>A2DP (advanced audio distribution) обеспечивает стереовывод (sink), подходящий для музыки, обычно без источника (source).
<ul>
<li>A2DP может использовать различные кодеки. Стандартный SBC имеет не самое высокое качество, но гораздо более качественные открытые альтернативы (LDAC, AptX) получили широкое распространение.</li>
<li>AVRCP используется поверх A2DP для управления воспроизведением.</li>
</ul>
</li>
<li>HFP/HSP (hands-free/headset) обеспечивает монофонический вывод для голоса и источник. HFP работает поверх HSP.</li>
<li>LE Audio — аудиостандарт с низким энергопотреблением, представленный в 2020 году. Стандартным кодеком является LC3.</li>
</ul>
<p>Ядро, BlueZ 5 и PipeWire поддерживают все три профиля. Более старые звуковые серверы, такие как PulseAudio и ALSA, поддерживают только A2DP и HFP/HSP. Хотя Bluetooth печально известен своей ненадёжностью<a rel="nofollow" class="external autonumber" href="https://xkcd.com/2055/">[1]</a>, многие его реализации получили значительные улучшения, что улучшило ситуацию на хорошо зарекомендовавшем себя оборудовании, таком как Bluetooth-чипы Intel.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.9D.D0.B0.D1.83.D1.88.D0.BD.D0.B8.D0.BA.D0.B8_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_PipeWire"></span><span class="mw-headline" id="Наушники_через_PipeWire">Наушники через PipeWire</span>
</h2>
<p><a href="../ru/PipeWire.html" title="PipeWire (Русский)">PipeWire</a> выступает прямой заменой <a href="../ru/PulseAudio.html" title="PulseAudio (Русский)">PulseAudio</a> и даёт лёгкий способ установки Bluetooth-наушников. Он имеет поддержку A2DP-профилей из коробки с использованием кодеков SBC/SBC-XQ, AptX, LDAC или AAC, а также HFP/HSP.
</p>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-pulse">pipewire-pulse</a></span> (который заменяет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio">pulseaudio</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span>).
</p>
<p>Демон запустится автоматически как <a href="../ru/Systemd/User.html" title="Systemd (Русский)/User (Русский)">пользовательская служба</a>. Используйте <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> или настройки вашей среды рабочего стола для конфигурации. Подробности есть в разделе <a href="../ru/PipeWire.html#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_Bluetooth" title="PipeWire (Русский)">PipeWire (Русский)#Устройства Bluetooth</a>.
</p>
<h2>
<span id=".D0.9D.D0.B0.D1.83.D1.88.D0.BD.D0.B8.D0.BA.D0.B8_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_Bluez5.2FPulseAudio"></span><span class="mw-headline" id="Наушники_через_Bluez5/PulseAudio">Наушники через Bluez5/PulseAudio</span>
</h2>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакеты <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> — последний предоставляет инструмент <code>bluetoothctl</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Перед продолжением убедитесь, что Bluetooth-устройство не заблокировано через <a href="../ru/Network_configuration/Wireless.html#%D0%9F%D1%80%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D0%B5%D1%80%D0%B5%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F_Rfkill" title="Network configuration (Русский)/Wireless (Русский)">rfkill</a>.</div>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.BD.D1.83.D1.8E_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D1.83"></span><span class="mw-headline" id="Настройка_через_командную_строку">Настройка через командную строку</span>
</h3>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">Запустите</a> службу <code>bluetooth.service</code>.
</p>
<p>Мы будем использовать утилиту командной строки <i>bluetoothctl</i> для сопряжения и подключения. Более подробное описание и решение проблем смотрите в основной статье <a href="../ru/Bluetooth.html" title="Bluetooth (Русский)">Bluetooth (Русский)</a>. Запустите эту утилиту:
</p>
<pre>$ bluetoothctl
</pre>
<p>Вы попадёте в её командную строку. В ней введите:
</p>
<pre>[bluetooth]# power on
[bluetooth]# agent on
[bluetooth]# default-agent
[bluetooth]# scan on
</pre>
<p>Теперь переведите ваши наушники в режим сопряжения, и компьютер вскоре должен обнаружить их. Например,
</p>
<pre>[NEW] Device 00:1D:43:6D:03:26 Lasmex LBT10
</pre>
<p>показывает устройство с названием «Lasmex LBT10» и MAC-адресом «00:1D:43:6D:03:26». Мы будем использовать этот MAC-адрес для сопряжения:
</p>
<pre>[bluetooth]# pair 00:1D:43:6D:03:26
</pre>
<p>После сопряжения нужно явно подключить устройство (если это не работает, попробуйте команду <code>trust</code> перед попыткой подключения):
</p>
<pre>[bluetooth]# connect 00:1D:43:6D:03:26
</pre>
<p>Если возникает ошибка <code>org.bluez.Error.Failed</code>, попробуйте ещё раз, предварительно завершив демон PulseAudio:
</p>
<pre>$ pulseaudio -k
[bluetooth]# connect 00:1D:43:6D:03:26
</pre>
<p>Наконец, если вы хотите автоматически подключаться к этому устройству в будущем:
</p>
<pre>[bluetooth]# trust 00:1D:43:6D:03:26
</pre>
<p>Если всё работает корректно, вы увидите отдельное устройство вывода в <a href="../ru/PulseAudio.html" title="PulseAudio (Русский)">PulseAudio</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Устройство может быть отключено по умолчанию. Выберите профиль аудио (<code>OFF</code>, <code>A2DP</code>, <code>HFP</code>) на вкладке «Конфигурация» в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>.</div>
<p>Теперь можно направить любое аудио на это устройство на вкладках «Проигрывание» и «Запись» в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>.
</p>
<p>Теперь вы можете остановить сканирование и выйти из программы:
</p>
<pre>[bluetooth]# scan off
[bluetooth]# exit
</pre>
<h4>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Автоподключение">Автоподключение</span>
</h4>
<p>Чтобы наушники автоматически подключались, нужно включить PulseAudio-модуль switch-on-connect. Добавьте следующие строки в <code>/etc/pulse/default.pa</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">### Automatically switch to newly-connected devices
load-module module-switch-on-connect
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Убедитесь, что ваше аудиоустройство bluetooth является доверенным (<i>trusted</i>), иначе повторное сопряжение окончится неудачей. Подробнее смотрите <a href="../ru/Bluetooth.html#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5" title="Bluetooth (Русский)">Bluetooth (Русский)#Сопряжение</a>.</div>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_GNOME_Bluetooth"></span><span class="mw-headline" id="Настройка_через_GNOME_Bluetooth">Настройка через GNOME Bluetooth</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Профиль A2DP не будет активироваться этим способом на pulseaudio 9/10 из-за бага, что приведёт к низкокачественному моно-звуку. Для возможного решения смотрите <a href="#A2DP_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82_%D1%81_PulseAudio">#A2DP не работает с PulseAudio</a>.</div>
<p>Вы можете использовать графический фронтенд <a href="../ru/Bluetooth.html#%D0%93%D1%80%D0%B0%D1%84%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5" title="Bluetooth (Русский)">GNOME Bluetooth</a> для лёгкой настройки наушников.
</p>
<p>Сперва убедитесь, что служба <code>bluetooth.service</code> запущена.
</p>
<p>Откройте GNOME Bluetooth и активируйте bluetooth. После сканирования устройств вы можете подключиться к наушникам, выбрав их в списке устройств. Вы можете получить доступ к настройкам звука из меню устройства. После подключения устройства в настройках звука должен появиться новый аудиовывод.
</p>
<h3>
<span id="LDAC.2FaptX"></span><span class="mw-headline" id="LDAC/aptX">LDAC/aptX</span>
</h3>
<p>Кодеки <a href="https://en.wikipedia.org/wiki/LDAC_(codec)" class="extiw" title="wikipedia:LDAC (codec)">LDAC</a>/<a href="https://en.wikipedia.org/wiki/aptX" class="extiw" title="wikipedia:aptX">aptX</a> поддерживаются с <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/15.0/#supportforldacandaptxbluetoothcodecsplussbcxqsbcwithhigher-qualityparameters">PulseAudio 15.0</a>. Вы можете проверить используемый кодек с помощью команды:
</p>
<pre>$ pactl list | grep a2dp_codec
</pre>
<h3>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> У многих пользователей возникают проблемы при попытках добиться работы A2DP/Bluetooth наушников. Подробнее смотрите <a href="#%D0%9F%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%B5%D0%B6%D0%B4%D1%83_HSP/HFP_%D0%B8_A2DP">#Переключение между HSP/HFP и A2DP</a>.</div>
<h4>
<span id=".D0.9F.D0.BB.D0.BE.D1.85.D0.BE.D0.B9_.D0.B7.D0.B2.D1.83.D0.BA_.2F_.D0.9F.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D1.8B.D0.B9_.D1.88.D1.83.D0.BC_.2F_.C2.AB.D0.9C.D1.83.D1.82.D0.BD.D1.8B.D0.B9.C2.BB_.D0.B7.D0.B2.D1.83.D0.BA"></span><span class="mw-headline" id="Плохой_звук_/_Постоянный_шум_/_«Мутный»_звук">Плохой звук / Постоянный шум / «Мутный» звук</span>
</h4>
<p>Плохое качество звука скорее всего связано с тем, что не выбран правильный профиль.
Смотрите <a href="#%D0%9F%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%B5%D0%B6%D0%B4%D1%83_HSP/HFP_%D0%B8_A2DP">#Переключение между HSP/HFP и A2DP</a> для решения проблемы.
</p>
<p>Если вы подозреваете, что плохое качество звука связано с плохим соединением bluetooth, можно попробовать переключиться на кодек с более низким битрейтом и более низким качеством звука, например SBC или aptX, с помощью <code>pactl</code>:
</p>
<pre>$ pactl send-message /card/bluez_card.XX_XX_XX_XX_XX_XX/bluez switch-codec '"sbc"'
</pre>
<p>Список доступных кодеков можно посмотреть командой:
</p>
<pre>$ pactl send-message /card/bluez_card.XX_XX_XX_XX_XX_XX/bluez list-codecs
</pre>
<h4>
<span id=".D0.9F.D1.80.D0.BE.D1.84.D0.B8.D0.BB.D1.8C_.D0.B2.D1.8B.D0.B1.D1.80.D0.B0.D0.BD.2C_.D0.BD.D0.BE_.D0.BD.D0.B0.D1.83.D1.88.D0.BD.D0.B8.D0.BA.D0.B8_.D0.BD.D0.B5.D0.B0.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D1.8B_.D0.B8_.D0.B7.D0.B2.D1.83.D0.BA_.D0.BD.D0.B5_.D0.BC.D0.BE.D0.B6.D0.B5.D1.82_.D0.B1.D1.8B.D1.82.D1.8C_.D0.BF.D0.B5.D1.80.D0.B5.D0.BD.D0.B0.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD"></span><span class="mw-headline" id="Профиль_выбран,_но_наушники_неактивны_и_звук_не_может_быть_перенаправлен">Профиль выбран, но наушники неактивны и звук не может быть перенаправлен</span>
</h4>
<p>Это меню обманчиво доступно ещё до подключения устройства; пока оно не подключено, это меню не будет иметь никакого эффекта. Кажется, меню создаётся сразу после определения устройства.
</p>
<p>Запустите <code>bluetoothctl</code> как root и подключите устройство вручную.
</p>
<h4>
<span id=".D0.A1.D0.BE.D0.BF.D1.80.D1.8F.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D1.81_.D0.BE.D1.88.D0.B8.D0.B1.D0.BA.D0.BE.D0.B9_AuthenticationFailed"></span><span class="mw-headline" id="Сопряжение_не_удаётся_с_ошибкой_AuthenticationFailed">Сопряжение не удаётся с ошибкой AuthenticationFailed</span>
</h4>
<p>Попробуйте включить или <a rel="nofollow" class="external text" href="https://stackoverflow.com/questions/12888589/linux-command-line-howto-accept-pairing-for-bluetooth-device-without-pin">отключить SSPMode</a>:
</p>
<pre># btmgmt ssp off
</pre>
<p>или
</p>
<pre># btmgmt ssp on
</pre>
<p>Может понадобиться выключить Bluetooth на время выполнения этой команды.
</p>
<h4>
<span id=".D0.A1.D0.BE.D0.BF.D1.80.D1.8F.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82.2C_.D0.BD.D0.BE_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F"></span><span class="mw-headline" id="Сопряжение_работает,_но_соединение_не_удаётся">Сопряжение работает, но соединение не удаётся</span>
</h4>
<p>Вы можете увидеть такую ошибку в <i>bluetoothctl</i>:
</p>
<pre>[bluetooth]# connect 00:1D:43:6D:03:26
Attempting to connect to 00:1D:43:6D:03:26
Failed to connect: org.bluez.Error.Failed
</pre>
<p>Для изучения проверьте статус <code>bluetooth.service</code> или гляньте журнал:
</p>
<pre># journalctl -n 20
</pre>
<p>Там может оказаться примерно такое сообщение:
</p>
<pre>bluetoothd[5556]: a2dp-sink profile connect failed for 00:1D:43:6D:03:26: Protocol not available
</pre>
<p>Это может быть из-за того, что пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span> не установлен. Установите его и затем перезапустите PulseAudio.
</p>
<p>Это также может быть из-за проблем с правами доступа, особенно если запуск PulseAudio от root решает проблему. Добавьте своего пользователя в группу <i>lp</i> и перезапустите PulseAudio.
Смотрите <code>/etc/dbus-1/system.d/bluetooth.conf</code> для справки.
</p>
<p>Если перезапуск PulseAudio не помогает, возможно, требуется загрузить module-bluetooth-discover.
</p>
<pre># pactl load-module module-bluetooth-discover
</pre>
<p>Такую же команду load-module можно добавить в <code>/etc/pulse/default.pa</code>.
</p>
<p>Если всё равно не работает или ваш PulseAudio общесистемный, также загрузите эти модули (опять же, их можно прописать в <code>default.pa</code> или <code>system.pa</code>):
</p>
<pre>module-bluetooth-policy
module-bluez5-device
module-bluez5-discover
</pre>
<p>Ещё может оказаться, что у владельца <code>/var/lib/bluetooth/</code> нет <a href="../ru/File_permissions_and_attributes.html" title="File permissions and attributes (Русский)">доступа на запись</a>. В таком случае проблема может решиться повторным сопряжением, но после перезагрузки всё опять перестанет работать. Возвращение прав на запись поможет:
</p>
<pre># chmod -R u+w /var/lib/bluetooth
</pre>
<h4>
<span id=".D0.A1.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82.2C_.D0.BD.D0.BE_.D0.B2_.D0.B7.D0.B2.D1.83.D0.BA.D0.B5_.D0.BF.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D1.8B.D0.B5_.D0.B0.D1.80.D1.82.D0.B5.D1.84.D0.B0.D0.BA.D1.82.D1.8B"></span><span class="mw-headline" id="Соединение_работает,_но_в_звуке_постоянные_артефакты">Соединение работает, но в звуке постоянные артефакты</span>
</h4>
<p>Это скорее всего связано с тем, что Bluetooth и Wi-Fi используют один и тот же чип, одну и ту же антенну и, возможно, диапазон (2.4 ГГц). Хотя это работает без проблем в Windows, в Linux это не так.
</p>
<p>Возможным решением является переключение вашей Wi-Fi сети на 5 ГГц, чтобы больше не возникало интерференции. Если карта/роутер не поддерживают этот диапазон, попробуйте обновить драйвера/прошивку Wi-Fi. Это работает на Realtek 8723BE с последними rtl драйверами с AUR.
</p>
<p>Если сделать это невозможно, менее эффективным решением будет настройка размера фрагмента и задержки на выводе PulseAudio, через которые можно попытаться скомпенсировать интерференцию. Нужно выбирать разумные значения, так как эти изменения могут привести к рассинхронизации звука (например, при проигрывании видео). Для изменения задержки на порту bluetooth-наушников (например, 125000 микросекунд в данном примере):
</p>
<pre>$ pactl set-port-latency-offset &lt;bluez_card&gt; headset-output <b>125000</b>
</pre>
<p>где идентификатор карты можно узнать с помощью
</p>
<pre>$ pacmd list-sinks | grep -Eo 'bluez_card[^&gt;]*'
</pre>
<p>Размер фрагмента можно установить в файле <code>/etc/pulse/daemon.conf</code>, изменения применятся после перезапуска PulseAudio (подробнее смотрите <a href="../ru/PulseAudio/Troubleshooting.html#%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%BE%D0%BC%D0%B5%D1%80%D0%B0_%D1%84%D1%80%D0%B0%D0%B3%D0%BC%D0%B5%D0%BD%D1%82%D0%B0_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E_%D0%B8_%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%D0%B0_%D0%B1%D1%83%D1%84%D0%B5%D1%80%D0%B0_%D0%B2_PulseAudio" class="mw-redirect" title="PulseAudio/Решение проблем">PulseAudio/Решение проблем#Определение номера фрагмента по умолчанию и размера буфера в PulseAudio</a>).
</p>
<p>Иногда может помочь добавление <code>options ath9k btcoex_enable=1</code> в файл <code>/etc/modprobe.d/ath9k.conf</code> (с соответствующим адаптером bluetooth):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/ath9k.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># possibly fix for sound glitches
options ath9k btcoex_enable=1</pre>
<p>После этого перезагрузитесь.
</p>
<h4>
<span id=".D0.A1.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82.2C_.D0.BD.D0.BE_.D0.BD.D0.B5_.D0.BF.D0.BE.D0.BB.D1.83.D1.87.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.B2.D0.BE.D1.81.D0.BF.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.B5.D1.81.D1.82.D0.B8_.D0.B7.D0.B2.D1.83.D0.BA"></span><span class="mw-headline" id="Соединение_работает,_но_не_получается_воспроизвести_звук">Соединение работает, но не получается воспроизвести звук</span>
</h4>
<p>Поищите в системном журнале такие сообщения:
</p>
<pre>bluetoothd[5556]: Endpoint registered: sender=:1.83 path=/MediaEndpoint/A2DPSource
bluetoothd[5556]: Endpoint registered: sender=:1.83 path=/MediaEndpoint/A2DPSink
</pre>
<p>Если подобные сообщения есть, можно продолжить изучать конфигурацию PulseAudio. Если нет, то убедитесь, что соединение успешно.
</p>
<p>При использовании <a href="../en/GDM.html" title="GDM">GDM</a> запускается другой экземпляр PulseAudio, который «захватывает» ваши bluetooth-соединения. Это можно предотвратить, <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">замаскировав</a> сокет pulseaudio для пользователя GDM:
</p>
<pre># mkdir -p  /var/lib/gdm/.config/systemd/user
# ln -s /dev/null  /var/lib/gdm/.config/systemd/user/pulseaudio.socket
</pre>
<p>При следующей перезагрузке второй экземпляр PulseAudio запускаться не будет.
</p>
<p>Также может оказаться, что bluez неправильно определяет наушники как не поддерживающие a2dp. В таком случае найдите индекс bluetooth-устройства:
</p>
<pre>$ pacmd ls
</pre>
<p>Среди вывода должен быть раздел, связанный с bluetooth-наушниками, выглядящий примерно так:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd ls</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">index: 2
        name: &lt;bluez_card.XX_XX_XX_XX_XX_XX&gt;
        driver: &lt;module-bluez5-device.c&gt;
        owner module: 27
        properties:
                device.description = "SONY MDR-100ABN"
                device.string = "XX:XX:XX:XX:XX:XX"
                device.api = "bluez"
                device.class = "sound"
                ...</pre>
<p>Для ручного выбора профиля выполните
</p>
<pre>$ pacmd set-card-profile 2 a2dp_sink
</pre>
<p>где 2 это индекс устройства, полученный через <code>pacmd ls</code>.
</p>
<h4>
<span id=".D0.A1.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82.2C_.D0.BD.D0.BE_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE_.D0.BD.D0.B5_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D1.81.D1.80.D0.B5.D0.B4.D0.B8_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0_PulseAudio"></span><span class="mw-headline" id="Соединение_работает,_но_устройство_не_отображается_среди_устройств_вывода_PulseAudio">Соединение работает, но устройство не отображается среди устройств вывода PulseAudio</span>
</h4>
<p>Если наушники успешно подключаются (в чём можно <a href="../ru/Bluetooth.html#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5" title="Bluetooth (Русский)">убедиться</a> через <code>bluetoothctl</code>), но не отображаются среди устройств вывода или ввода в <code>pavucontrol</code>, попробуйте добавить следующую политику в файл настроек <code>/etc/bluetooth/main.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
Enable=Control,Gateway,Headset,Media,Sink,Socket,Source</pre>
<p>Некоторые пользователи <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=234790">сообщали</a>, что это решает проблему.
</p>
<h4>
<span id=".D0.A1.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82.2C_.D0.B7.D0.B2.D1.83.D0.BA_.D0.B8.D0.B3.D1.80.D0.B0.D0.B5.D1.82.2C_.D0.B0_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.BD.D0.B5.D0.B0.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D0.BE.D1.81.D1.82.D0.B8_.D0.B7.D0.B0.D0.B8.D0.BA.D0.B0.D0.B5.D1.82.D1.81.D1.8F"></span><span class="mw-headline" id="Соединение_работает,_звук_играет,_а_после_неактивности_заикается">Соединение работает, звук играет, а после неактивности заикается</span>
</h4>
<p>Если наушники играют звук нормально до ухода в режим ожидания, а после возобновления он начинает заикаться (например, если звук был приостановлен или ничего не воспроизводилось какое-то время), попробуйте отключить автоматическую приостановку источника/вывода в PulseAudio.
</p>
<p>Некоторые пользователи <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=117420">сообщают</a> об огромных задержках или даже отсутствии звука, когда Bluetooth-соединение не отправляет никаких данных. Это из-за модуля <code>module-suspend-on-idle</code>, который автоматически приостанавливает неактивные источники/выводы.
</p>
<p>Чтобы отключить загрузку этого модуля, закомментируйте эту строку в используемом файле конфигурации (<code>~/.config/pulse/default.pa</code> или <code>/etc/pulse/default.pa</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">### Automatically suspend sinks/sources that become idle for too long
#load-module module-suspend-on-idle
</pre>
<p>Перезапустите PulseAudio для применения изменений.
</p>
<h4><span class="mw-headline" id="UUIDs_has_unsupported_type">UUIDs has unsupported type</span></h4>
<p>В процессе сопряжения вы можете увидеть в <i>bluetoothctl</i> такой вывод:
</p>
<pre>[CHG] Device 00:1D:43:6D:03:26 UUIDs has unsupported type
</pre>
<p>Это сообщение очень частое и может быть проигнорировано.
</p>
<h4>
<span id=".D0.9A.D0.BE.D0.BC.D0.BF.D1.8C.D1.8E.D1.82.D0.B5.D1.80_.D0.BF.D0.BE.D0.BA.D0.B0.D0.B7.D1.8B.D0.B2.D0.B0.D0.B5.D1.82_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE_.D0.BA.D0.B0.D0.BA_.D1.81.D0.BE.D0.BF.D1.80.D1.8F.D0.B6.D1.91.D0.BD.D0.BD.D0.BE.D0.B5.2C_.D0.BD.D0.BE_.D1.8D.D1.82.D0.BE_.D0.BD.D0.B5_.D1.80.D0.B0.D1.81.D0.BF.D0.BE.D0.B7.D0.BD.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE.D0.BC"></span><span class="mw-headline" id="Компьютер_показывает_устройство_как_сопряжённое,_но_это_не_распознаётся_устройством">Компьютер показывает устройство как сопряжённое, но это не распознаётся устройством</span>
</h4>
<p>Это может быть из-за того, что устройство не поддерживает Bluetooth LE для сопряжения.
</p>
<p>Попробуйте прописать настройку <code>ControllerMode = bredr</code> в файле <code>/etc/bluetooth/main.conf</code>. Смотрите <a rel="nofollow" class="external autonumber" href="https://unix.stackexchange.com/questions/292189/pairing-bose-qc-35-over-bluetooth-on-fedora">[2]</a>.
</p>
<h4>
<span id=".D0.A3.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.B8_.D0.B7.D0.B0.D1.82.D0.B5.D0.BC_.D0.BE.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D1.81.D0.BF.D1.83.D1.81.D1.82.D1.8F_.D0.BC.D0.B3.D0.BD.D0.BE.D0.B2.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Устройство_подключается_и_затем_отключается_спустя_мгновение">Устройство подключается и затем отключается спустя мгновение</span>
</h4>
<p>Если вы видите в журнале подобные сообщения и устройство не может подключиться или отключается вскоре после подключения:
</p>
<pre>bluetoothd: Unable to get connect data for Headset Voice gateway: getpeername: Transport endpoint is not connected (107)
bluetoothd: connect error: Connection refused (111)
</pre>
<p>Это может быть из-за того, что вы уже настроили сопряжение с этим устройством в другой операционной системе с тем же Bluetooth-адаптером (например, в случае двойной загрузки). Некоторые устройства не могут обрабатывать несколько сопряжений с одним и тем же MAC-адресом. Смотрите <a href="../ru/Bluetooth.html#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8_%D0%B4%D0%B2%D0%BE%D0%B9%D0%BD%D0%BE%D0%B9_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5" title="Bluetooth (Русский)">Bluetooth (Русский)#Сопряжение при двойной загрузке</a> для настройки сопряжения в обеих ОС.
</p>
<p>Если другая ОС вас уже не интересует, можно просто выполнить сопряжение заново. Сперва удалите существующее сопряжение:
</p>
<pre>$ bluetoothctl
[bluetooth]# devices
Device XX:XX:XX:XX:XX:XX My Device
[bluetooth]# remove XX:XX:XX:XX:XX:XX
</pre>
<p>Затем <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">перезапустите</a> <code>bluetooth.service</code>, включите bluetooth-адаптер, сделайте своё устройство видимым, пересканируйте устройства и выполните сопряжение с вашим устройством (смотрите <a href="../ru/Bluetooth.html#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5" title="Bluetooth (Русский)">основную статью</a>). В зависимости от вашего менеджера Bluetooth может понадобиться выполнить полную перезагрузку для переподключения устройств.
</p>
<h4>
<span id=".D0.92_Apple_AirPods_.D0.BC.D0.B0.D0.BB.D0.B5.D0.BD.D1.8C.D0.BA.D0.B0.D1.8F_.D0.B3.D1.80.D0.BE.D0.BC.D0.BA.D0.BE.D1.81.D1.82.D1.8C"></span><span class="mw-headline" id="В_Apple_AirPods_маленькая_громкость">В Apple AirPods маленькая громкость</span>
</h4>
<p>Создайте <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" class="mw-redirect" title="Drop-in файл">drop-in файл</a> для службы <code>bluetooth.service</code> со следующим содержимым:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/bluetooth.service.d/noplugin-avrc.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/lib/bluetooth/bluetoothd --noplugin=avrcp</pre>
<p>Затем выполните <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" title="Help:Reading (Русский)">daemon-reload</a>, <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">перезапустите</a> службу <code>bluetooth.service</code> и переподключите наушники.
</p>
<p>Кроме того, для AirPods Pro отключите пространственный звук и включите моно в настройках вашего iPhone.
</p>
<p>Это также может решить проблемы с некоторыми устройствами, которыми нельзя управлять через AVRCP.
</p>
<h4>
<span id="Apple_AirPods_Pro_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82_.D1.81_PulseAudio_.D0.BA.D0.B0.D0.BA_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4_A2DP.2C_.D0.BD.D0.BE_.D0.BD.D0.B5_.D0.BA.D0.B0.D0.BA_HSP.2FHFP"></span><span class="mw-headline" id="Apple_AirPods_Pro_работает_с_PulseAudio_как_вывод_A2DP,_но_не_как_HSP/HFP">Apple AirPods Pro работает с PulseAudio как вывод A2DP, но не как HSP/HFP</span>
</h4>
<p>Если AirPods Pro работает, но не может использовать HSP/HFP (в <i>pavucontrol</i> на вкладке <i>Конфигурация</i> обычно отображается как недоступный), попробуйте перейти на <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pipewire-pulse">pipewire-pulse</a></span>.
</p>
<p>Переход на <i>pipewire-pulse</i> (и перезапуск компьютера или соответствующих пользовательских служб) должен включить HSP/HFP, но также может отключить A2DP (при выборе этого профиля в <i>pavucontrol</i> он мгновенно отключается). Если у вас появилась такая проблема, попробуйте удалить/переименовать папку <code>/var/lib/bluetooth</code>:
</p>
<pre># mv /var/lib/bluetooth /var/lib/bluetooth.bak
</pre>
<p>После этого проведите повторное сопряжение с AirPods Pro (и другими устройствами). После этого все конфигурации (HSP/HFP и A2DP) должны быть снова доступны в <i>pavucontrol</i> и <i>pacmd</i>.
</p>
<h4>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D0.B0_.D1.81_HSP:_.D0.B2.D0.B2.D0.BE.D0.B4_.D0.B8_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4_bluetooth_.D1.81.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D1.8B.2C_.D0.BD.D0.BE_.D0.B7.D0.B2.D1.83.D0.BA_.D0.BD.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F"></span><span class="mw-headline" id="Проблема_с_HSP:_ввод_и_вывод_bluetooth_созданы,_но_звук_не_передаётся">Проблема с HSP: ввод и вывод bluetooth созданы, но звук не передаётся</span>
</h4>
<p>У вас может отсутствовать прошивка или SCO (аудио протокол HSP и HFP) роутинг может быть неправильным. Смотрите <a rel="nofollow" class="external autonumber" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Bluetooth/#index10h3">[3]</a> — прошивка для BCM20702 может быть установлена через пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bcm20702a1-firmware/">bcm20702a1-firmware</a></span><sup><small>AUR</small></sup> или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bcm20702b0-firmware/">bcm20702b0-firmware</a></span><sup><small>AUR</small></sup>.
</p>
<h4><span class="mw-headline" id="Error:_Failed_to_start_discovery_org.bluez.Error.InProgress">Error: Failed to start discovery org.bluez.Error.InProgress</span></h4>
<p>Если наушники обнаруживаются, но подключение не проходит с ошибкой «Failed to start discovery org.bluez.Error.InProgress», установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bluez-hciconfig/">bluez-hciconfig</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">ссылка недействительна</a>: package not found]</sup> и выполните
</p>
<pre>$ hciconfig hci<i>X</i> up
$ hciconfig hci<i>X</i> reset
</pre>
<p>где <i>X</i> — это идентификатор bluetooth-устройства вашего компьютера (обычно 0).
</p>
<p>Теперь подключение должно работать как описано в разделе <a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D1%83%D1%8E_%D1%81%D1%82%D1%80%D0%BE%D0%BA%D1%83">#Настройка через командную строку</a>.
</p>
<h4>
<span id=".D0.92.D1.8B.D1.81.D0.BE.D0.BA.D0.B0.D1.8F_.D0.B3.D1.80.D0.BE.D0.BC.D0.BA.D0.BE.D1.81.D1.82.D1.8C_.D0.B7.D0.B2.D1.83.D0.BA.D0.B0_.D0.B8.D0.B7-.D0.B7.D0.B0_.D1.81.D0.B8.D0.BD.D1.85.D1.80.D0.BE.D0.BD.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8_.D0.BC.D0.B5.D0.B6.D0.B4.D1.83_.D0.BD.D0.B0.D1.83.D1.88.D0.BD.D0.B8.D0.BA.D0.B0.D0.BC.D0.B8_.D0.B8_PulseAudio"></span><span class="mw-headline" id="Высокая_громкость_звука_из-за_синхронизации_между_наушниками_и_PulseAudio">Высокая громкость звука из-за синхронизации между наушниками и PulseAudio</span>
</h4>
<p>Начиная с <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Notes/15.0/#supportforbluetootha2dpavrcpabsolutevolume">PulseAudio 15</a>, «Absolute Volume» связывает друг с другом громкость звука в наушниках и PulseAudio, делая невозможным изменение отдельно друг от друга. На некоторых наушниках, например на Hoco W25, это может привести к раздражающей громкости. Чтобы отключить «Absolute Volume», отредактируйте файл <code>/etc/pulse/default.pa</code>, изменив строку
</p>
<pre>load-module module-bluetooth-discover
</pre>
<p>на
</p>
<pre>load-module module-bluetooth-discover avrcp_absolute_volume=false
</pre>
<h2>
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B5.D0.B6.D0.B4.D1.83_HSP.2FHFP_.D0.B8_A2DP"></span><span class="mw-headline" id="Переключение_между_HSP/HFP_и_A2DP">Переключение между HSP/HFP и A2DP</span>
</h2>
<p>Это можно сделать с помощью следующей команды, где <code><i>номер_карты</i></code> можно узнать с помощью команды <code>pacmd list-cards</code>.
</p>
<pre>$ pacmd set-card-profile <i>номер_карты</i> a2dp_sink
</pre>
<p>Для автоматического переключения с A2DP на HSP при включении записи можно добавить <code>auto_switch=2</code> к <code>load-module module-bluetooth-policy</code> в файле <code>/etc/pulse/default.pa</code>.
</p>
<p>Подробнее о профилях смотрите <a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Bluetooth/#index1h2">документацию PulseAudio</a>.
</p>
<h3>
<span id="A2DP_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82_.D1.81_PulseAudio"></span><span class="mw-headline" id="A2DP_не_работает_с_PulseAudio">A2DP не работает с PulseAudio</span>
</h3>
<h4>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D0.B0_.D1.81_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.BE.D0.BC_Socket"></span><span class="mw-headline" id="Проблема_с_интерфейсом_Socket">Проблема с интерфейсом Socket</span>
</h4>
<p>Если PulseAudio не может переключить профиль на A2DP с bluez 4.1+ и PulseAudio 3.0+, можно попробовать отключить интерфейс Socket в файле <code>/etc/bluetooth/main.conf</code> путём удаления строки <code>Enable=Socket</code> и добавления <code>Disable=Socket</code>.
</p>
<h4>
<span id=".D0.9D.D0.B5.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B5.D0.BD_.D0.BF.D1.80.D0.BE.D1.84.D0.B8.D0.BB.D1.8C_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0_A2DP"></span><span class="mw-headline" id="Недоступен_профиль_вывода_A2DP">Недоступен профиль вывода A2DP</span>
</h4>
<p>Когда профиль вывода A2DP недоступен, становится невозможно переключиться на A2DP вывод в настройках PulseAudio или он вообще не отображается в списке. Это можно проверить с помощью <code>pactl</code>:
</p>
<pre>$ pactl list | grep -C2 A2DP
     Profiles:
             headset_head_unit: Headset Head Unit (HSP/HFP) (sinks: 1, sources: 1, priority: 30, available: yes)
             a2dp_sink: High Fidelity Playback (A2DP Sink) (sinks: 1, sources: 0, priority: 40, available: no)
             off: Off (sinks: 0, sources: 0, priority: 0, available: yes)
        Active Profile: headset_head_unit
</pre>
<p>Попытка ручного изменения профиля через <code>pacmd</code> также окончится неудачей.
</p>
<pre>$ pacmd set-card-profile bluez_card.C4_45_67_09_12_00 a2dp_sink
Failed to set card profile to 'a2dp_sink'.
</pre>
<p>Это известная проблема PulseAudio с версии 10.0 при подключении Bluetooth-наушников через Bluedevil или другой фронтенд BlueZ. Смотрите <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pulseaudio/pulseaudio/issues/525">связанный баг-репорт.</a>
</p>
<p>Эта проблема также случается после сопряжения на некоторых Bluetooth-контроллерах (например, <code>0a12:0001, Cambridge Silicon Radio</code>), которые по умолчанию включают службу <code>Handsfree</code> или <code>Headset - HS</code> и не позволяют переключиться на A2DP.
</p>
<p>Возможные решения:
</p>
<ul>
<li>На некоторых наушниках помогает нажатие кнопок управления громкостью и воспроизведением, после чего профиль A2DP становится доступным.</li>
<li>Может оказаться, что подключение наушников через <code>bluetoothctl</code> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> делает профиль A2DP доступным. Можно автоматизировать это каждый раз при подключении bluetooth: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fix-bt-a2dp/">fix-bt-a2dp</a></span><sup><small>AUR</small></sup> (<a rel="nofollow" class="external text" href="https://github.com/pastleo/fix-bt-a2dp#usage">детальное описание</a>).</li>
</ul>
<pre>[bluetooth]# connect <i>MAC_адрес_наушников</i>
</pre>
<ul><li>Ручное переключение на Bluetooth-службу <code>AudioSink</code> может сделать профиль A2DP и A2DP-вывод в PulseAudio доступным. Это можно сделать через blueman-manager из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=blueman">blueman</a></span> или путём регистрации UUID службы AudioSink через <code>bluetoothctl</code>.</li></ul>
<pre>$ bluetoothctl
[bluetooth]# menu gatt
[bluetooth]# register-service 0000110b-0000-1000-8000-00805f9b34fb
[bluetooth]# quit
</pre>
<ul><li>Отключите профиль Headset</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
Disable=Headset</pre>
<ul><li>Включите поддержку MultiProfile. Это может помочь для наушников, которые поддерживают как A2DP, так и Headset.</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
MultiProfile=multiple</pre>
<ul>
<li>Иногда никакой из предыдущих шагов не помогает. Возможно, вы безрезультатно пытались перезагрузить и выключить Bluetooth, а затем снова включить его. В таком случае попробуйте перезапустить службу <code>bluetooth.service</code>.</li>
<li>На некоторых моделях наушников с возможностью управления звуком профиль A2DP необходимо включить, нажав кнопку «Воспроизведение / Пауза».</li>
</ul>
<h4>
<span id="Gnome_.D1.81_GDM"></span><span class="mw-headline" id="Gnome_с_GDM">Gnome с GDM</span>
</h4>
<p>Эта инструкция протестирована с Gnome 3.24.2 и PulseAudio 10.0, но может быть полезна и для других версий.
</p>
<p>Если PulseAudio не удаётся изменить профиль на A2DP при использовании GNOME с GDM, нужно запретить GDM запуск его собственного экземпляра PulseAudio:
</p>
<ul><li>Предотвратите запуск сервера клиентами PulseAudio, если он не запущен, с помощью добавления этих строк:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/gdm/.config/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autospawn = no
daemon-binary = /bin/true</pre>
<ul><li>Предотвратите запуск PulseAudio через socket-активацию в systemd:</li></ul>
<pre>$ sudo -ugdm mkdir -p /var/lib/gdm/.config/systemd/user
$ sudo -ugdm ln -s /dev/null /var/lib/gdm/.config/systemd/user/pulseaudio.socket
</pre>
<ul><li>Перезагрузитесь и проверьте, что нет процесса PulseAudio, запущенного пользователем <code>gdm</code>:</li></ul>
<pre>$ pgrep -u gdm pulseaudio
</pre>
<p>Обсуждение этой проблемы и другие варианты решения можно почитать на форуме: <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=194006">[4]</a> и <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=196689">[5]</a>. Также можно попробовать <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fix-bt-a2dp/">fix-bt-a2dp</a></span><sup><small>AUR</small></sup>.
</p>
<h3>
<span id="HFP_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82_.D1.81_PulseAudio"></span><span class="mw-headline" id="HFP_не_работает_с_PulseAudio">HFP не работает с PulseAudio</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Некоторые пользователи сообщают об успешном включении HFP путём замены PulseAudio на PipeWire для поддержки Bluetooth. <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/archlinux/comments/w69mij/hfp_audio_is_no_longer_available_stuck_on/">[6]</a> Смотрите раздел <a href="#%D0%9D%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%B8_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_PipeWire">#Наушники через PipeWire</a>.</div>
<p>Наушники с поддержкой только HFP могут не заработать со стандартной конфигурацией PulseAudio. Соответствующие профили есть, но они недоступны:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">bluetoothctl info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
UUID: A/V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)
UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">pactl list</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Profiles:
      ...
      headset_head_unit: Headset Head Unit (HSP/HFP) (sinks: 1, sources: 1, priority: 30, available: no)
</pre>
<p>Для решения проблемы обновите PulseAudio и BlueZ до последних версий. Затем <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">установите</a> пакеты <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ofono/">ofono</a></span><sup><small>AUR</small></sup> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/phonesim/">phonesim</a></span><sup><small>AUR</small></sup> и создайте поддельный модем как описано здесь <a rel="nofollow" class="external autonumber" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Bluetooth/#index1h3">[7]</a>:
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Шаги после создания <code>phonesim.conf</code> нужно повторять <i>каждый раз</i> для подключения наушников.</div>
<ul><li>Создайте <code>/etc/ofono/phonesim.conf</code>:</li></ul>
<pre>[phonesim]
Address=127.0.0.1
Driver=phonesim
Port=12345
</pre>
<ul><li>Запустите от имени своего пользователя:</li></ul>
<pre>$ phonesim -p 12345 /usr/share/phonesim/default.xml &amp;
</pre>
<ul><li>
<a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">Запустите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>ofono.service</code>.</li></ul>
<ul><li>Включите модем:</li></ul>
<pre>$ dbus-send --print-reply --system --dest=org.ofono /phonesim org.ofono.Modem.SetProperty string:"Powered" variant:boolean:true
</pre>
<ul><li>Активируйте модем:</li></ul>
<pre>$ dbus-send --print-reply --system --dest=org.ofono /phonesim org.ofono.Modem.SetProperty string:"Online" variant:boolean:true
</pre>
<ul><li>Для проверки результата используйте команды тестирования из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ofono/">ofono</a></span><sup><small>AUR</small></sup>, находящиеся в каталоге <code>/usr/lib/ofono/test/</code>. Для включения, активации и тестирования модема можно использовать:</li></ul>
<pre>$ /usr/lib/ofono/test/enable-modem /phonesim
$ /usr/lib/ofono/test/online-modem /phonesim
$ /usr/lib/ofono/test/list-modems
</pre>
<p>Вывод для соответствующего модема должен выглядеть примерно так:
</p>
<pre>...
[ /phonesim ]
  Online = 1
  Powered = 1
  Lockdown = 0
  Emergency = 0
  Manufacturer = MeeGo
  ...
</pre>
<ul><li>Наконец, перезапустите PulseAudio и переподключите наушники. Теперь HFP должен стать доступен:</li></ul>
<pre>headset_head_unit: Headset Head Unit (HSP/HFP) (sinks: 1, sources: 1, priority: 30, available: yes)
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Поддержка HFP не является стабильной и может приводить к артефактам при переключении на A2DP; попробуйте переподключиться, если нужный режим недоступен.</div>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B0.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D0.BF.D0.B5.D1.80.D0.B5.D1.85.D0.BE.D0.B4.D0.B0_.D0.BD.D0.B0.D1.83.D1.88.D0.BD.D0.B8.D0.BA.D0.BE.D0.B2_.D0.BD.D0.B0_HSP.2FHFP_.D0.B2_PulseAudio"></span><span class="mw-headline" id="Отключение_автоматического_перехода_наушников_на_HSP/HFP_в_PulseAudio">Отключение автоматического перехода наушников на HSP/HFP в PulseAudio</span>
</h3>
<p>При использовании наушников, поддерживающих несколько профилей, некоторые приложения автоматически переключают их на профиль HSP/HFP. Если вас это не устраивает, можно отключить это добавлением параметра auto_switch=false к модулю bluetooth-policy:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-bluetooth-policy auto_switch=false</pre>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D1.84.D0.B8.D0.BB.D1.8F_HSP.2FHFP_.D0.B2_PipeWire"></span><span class="mw-headline" id="Отключение_профиля_HSP/HFP_в_PipeWire">Отключение профиля HSP/HFP в PipeWire</span>
</h3>
<p>В отличие от PulseAudio, <a href="../ru/PipeWire.html#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B2%D1%8B%D0%B1%D0%BE%D1%80_%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D1%8F" title="PipeWire (Русский)">PipeWire не переключается между A2DP и HSP/HFP автоматически в ответ на события ввода</a>. Однако вместо того, чтобы включать автоматическое переключение на профиль HSP/HFP (с более низким качеством звука) при сбое A2DP, вы можете предпочесть отключить первый вообще. Для этого создайте копию файла <code>/usr/share/wireplumber/bluetooth.lua.d/50-bluez-config.lua</code> <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/archlinux/comments/x29emb/purge_hsphfp_support/">[8]</a> как показано ниже.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> HSP необходим для работы микрофона <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/pop_os/comments/otofgt/bluetooth_headphone_switches_to_hsphfp_when/">[9]</a>.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/bluetooth.lua.d/50-bluez-config.lua (или ~/.config/wireplumber/bluetooth.lua.d/50-bluez-config.lua)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
bluez_monitor.properties = {
  ...
  <b>["bluez5.roles"] = "[ a2dp_sink ]",</b>
  ...
  <b>["bluez5.hfphsp-backend"] = "none",</b>
}
...
bluez_monitor.rules = {
  {
    ...
    apply_properties = {
      ...
      <b>["bluez5.auto-connect"] = "[ a2dp_sink ]",</b>
      ...
      <b> ["bluez5.hw-volume"] = "[ a2dp_sink ]",</b>
    },
    ...
  },
}</pre>
<h3>
<span id=".D0.90.D0.BB.D1.8C.D1.82.D0.B5.D1.80.D0.BD.D0.B0.D1.82.D0.B8.D0.B2.D0.B0:_A2DP_duplex_channel"></span><span class="mw-headline" id="Альтернатива:_A2DP_duplex_channel">Альтернатива: A2DP duplex channel</span>
</h3>
<p>FastStream, AptX LL и «Opus 05 Pro» (<a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/pipewire/-/merge_requests/1322">специфично для pipewire</a>) имеют «duplex» канал, который позволяет отправлять звук с микрофона без необходимости переключаться HSP/HFP и мириться с ухудшением качества звука. Эту функцию поддерживает PipeWire, но не PulseAudio. Поддержка автоматическая при обнаружении функции. Взаимодействие с существующим переключателем профилей (WirePlumber) неизвестно.
</p>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Советы_и_рекомендации">Советы и рекомендации</span>
</h2>
<p>Применимы и к PipeWire, и к PulseAudio.
</p>
<h3>
<span id=".D0.A3.D1.80.D0.BE.D0.B2.D0.B5.D0.BD.D1.8C_.D0.B7.D0.B0.D1.80.D1.8F.D0.B4.D0.B0_.D0.B1.D0.B0.D1.82.D0.B0.D1.80.D0.B5.D0.B8"></span><span class="mw-headline" id="Уровень_заряда_батареи">Уровень заряда батареи</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Это экспериментальная функция. Её включение может помешать некоторым Bluetooth-мышам подключаться автоматически (смотрите <a rel="nofollow" class="external text" href="https://github.com/bluez/bluez/issues/236">issue на GitHub</a>).</div>
<p>Чтобы получать данные о текущем уровне заряда батареи наушников в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=upower">upower</a></span>, нужно включить экспериментальные функции D-Bus в настройках BlueZ, как описано в разделе <a href="../ru/Bluetooth.html#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8D%D0%BA%D1%81%D0%BF%D0%B5%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B9" title="Bluetooth (Русский)">Bluetooth (Русский)#Включение экспериментальных функций</a>.
</p>
<h3>
<span id=".D0.9C.D1.83.D0.BB.D1.8C.D1.82.D0.B8.D0.BC.D0.B5.D0.B4.D0.B8.D0.B9.D0.BD.D1.8B.D0.B5_.D0.BA.D0.BD.D0.BE.D0.BF.D0.BA.D0.B8"></span><span class="mw-headline" id="Мультимедийные_кнопки">Мультимедийные кнопки</span>
</h3>
<p>Для использования мультимедийных кнопок они могут быть перенаправлены в MPRIS, где их подхватят плееры, поддерживающие MPRIS для управления. Подробнее смотрите <a href="../en/MPRIS.html#Bluetooth" title="MPRIS">MPRIS#Bluetooth</a>.
</p>
<h3>
<span id=".D0.9C.D1.83.D0.BB.D1.8C.D1.82.D0.B8.D0.BC.D0.B5.D0.B4.D0.B8.D0.B9.D0.BD.D1.8B.D0.B5_.D0.BA.D0.BD.D0.BE.D0.BF.D0.BA.D0.B8_AVRCP"></span><span class="mw-headline" id="Мультимедийные_кнопки_AVRCP">Мультимедийные кнопки AVRCP</span>
</h3>
<p>Если на наушниках слишком чувствительное сенсорное управление, вы можете захотеть отключить его. Это можно сделать через параметр <code>inhibited</code> в sysfs, соответствующий устройству AVRCP, например, <code>/sys/devices/virtual/input/input877/inhibited</code>. Найти правильное устройство можно по его имени: например, в файле <code>/sys/devices/virtual/input/input877/name</code> может быть записано что-то вроде «Soundcore Life P3 (AVRCP)». Запишите <code>1</code> в файл <code>inhibited</code> для отключения или <code>0</code> для включения. Изменения применяются на лету, переподключение или перезагрузка чего-либо не требуется.
</p>
<p>Этот параметр будет сбрасываться при переподключении устройства, поэтому, чтобы сделать изменение постоянным, можно создать правило <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>:
</p>
<pre>SUBSYSTEM=="input" ATTR{name}=="Soundcore Life P3 (AVRCP)" ATTR{inhibited}="1"
</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:Sound.html" title="Category:Sound (Русский)">Sound (Русский)</a></li>
<li><a href="../ru/Category:Bluetooth.html" title="Category:Bluetooth (Русский)">Bluetooth (Русский)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Bluetooth_headset_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=803336">https://wiki.archlinux.org/index.php?title=Bluetooth_headset_(Русский)&amp;oldid=803336</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 15 March 2024, at 19:53.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
