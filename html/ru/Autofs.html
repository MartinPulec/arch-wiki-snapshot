<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Autofs (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Autofs_Русский rootpage-Autofs_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Установка</span>
			</div>
		</a>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Настройка" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Настройка</span>
			</div>
		</a>
		
			<button aria-controls="toc-Настройка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка subsection</span>
			</button>
		
		<ul id="toc-Настройка-sublist" class="vector-toc-list">
			<li id="toc-Съёмные_носители" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D1%8A%D1%91%D0%BC%D0%BD%D1%8B%D0%B5_%D0%BD%D0%BE%D1%81%D0%B8%D1%82%D0%B5%D0%BB%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Съёмные носители</span>
				</div>
			</a>
			
			<ul id="toc-Съёмные_носители-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Монтирование_NFS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_NFS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Монтирование NFS</span>
				</div>
			</a>
			
			<ul id="toc-Монтирование_NFS-sublist" class="vector-toc-list">
				<li id="toc-Ручная_настройка_NFS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A0%D1%83%D1%87%D0%BD%D0%B0%D1%8F_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_NFS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Ручная настройка NFS</span>
				</div>
			</a>
			
			<ul id="toc-Ручная_настройка_NFS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Samba" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Samba">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Samba</span>
				</div>
			</a>
			
			<ul id="toc-Samba-sublist" class="vector-toc-list">
				<li id="toc-Одиночные_ресурсы" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D0%B4%D0%B8%D0%BD%D0%BE%D1%87%D0%BD%D1%8B%D0%B5_%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.1</span>
					<span>Одиночные ресурсы</span>
				</div>
			</a>
			
			<ul id="toc-Одиночные_ресурсы-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Несколько_ресурсов" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE_%D1%80%D0%B5%D1%81%D1%83%D1%80%D1%81%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.2</span>
					<span>Несколько ресурсов</span>
				</div>
			</a>
			
			<ul id="toc-Несколько_ресурсов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Автообнаружение" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BE%D0%B1%D0%BD%D0%B0%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.3</span>
					<span>Автообнаружение</span>
				</div>
			</a>
			
			<ul id="toc-Автообнаружение-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-FTP_и_SSH_(через_Fuse)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#FTP_%D0%B8_SSH_(%D1%87%D0%B5%D1%80%D0%B5%D0%B7_Fuse)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>FTP и SSH (через Fuse)</span>
				</div>
			</a>
			
			<ul id="toc-FTP_и_SSH_(через_Fuse)-sublist" class="vector-toc-list">
				<li id="toc-Удалённые_FTP" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D0%B5_FTP">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.1</span>
					<span>Удалённые FTP</span>
				</div>
			</a>
			
			<ul id="toc-Удалённые_FTP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Удалённые_SSH" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D0%B5_SSH">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.2</span>
					<span>Удалённые SSH</span>
				</div>
			</a>
			
			<ul id="toc-Удалённые_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-MTP" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#MTP">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>MTP</span>
			</div>
		</a>
		
		<ul id="toc-MTP-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Решение_проблем_и_советы" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC_%D0%B8_%D1%81%D0%BE%D0%B2%D0%B5%D1%82%D1%8B">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Решение проблем и советы</span>
			</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем_и_советы-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем и советы subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем_и_советы-sublist" class="vector-toc-list">
			<li id="toc-Using_NIS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_NIS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Using NIS</span>
				</div>
			</a>
			
			<ul id="toc-Using_NIS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Опциональные_параметры" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%BF%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Опциональные параметры</span>
				</div>
			</a>
			
			<ul id="toc-Опциональные_параметры-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Распознавание_нескольких_устройств" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D1%81%D0%BF%D0%BE%D0%B7%D0%BD%D0%B0%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D1%85_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Распознавание нескольких устройств</span>
				</div>
			</a>
			
			<ul id="toc-Распознавание_нескольких_устройств-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Права_доступа_AutoFS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B0%D0%B2%D0%B0_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_AutoFS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Права доступа AutoFS</span>
				</div>
			</a>
			
			<ul id="toc-Права_доступа_AutoFS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблемы_с_fusermount" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_fusermount">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Проблемы с fusermount</span>
				</div>
			</a>
			
			<ul id="toc-Проблемы_с_fusermount-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отладка_проблем_с_автомонтированием" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BB%D0%B0%D0%B4%D0%BA%D0%B0_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC_%D1%81_%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>Отладка проблем с автомонтированием</span>
				</div>
			</a>
			
			<ul id="toc-Отладка_проблем_с_автомонтированием-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Альтернативы" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%90%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D1%8B">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Альтернативы</span>
			</div>
		</a>
		
		<ul id="toc-Альтернативы-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Смотрите также</span>
			</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Autofs (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Autofs.html" title="Autofs – English" lang="en" hreflang="en" data-title="Autofs" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Autofs.html" title="Autofs – español" lang="es" hreflang="es" data-title="Autofs" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Autofs" title="Autofs – 日本語" lang="ja" hreflang="ja" data-title="Autofs" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Autofs.html" title="Autofs">Autofs</a>. Дата последней синхронизации: 17 января 2022. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Autofs&amp;diff=0&amp;oldid=710682">изменения</a>.</div>
<p>AutoFS даёт возможность автоматического монтирования съёмных носителей и сетевых ресурсов при вставке или обращении к ним.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Установка">
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span>Установка</h2></div>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/autofs/">autofs</a></span><sup><small>AUR</small></sup>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Загружать модуль <code>autofs4</code> больше не нужно.</div>
<div class="mw-heading mw-heading2"><h2 id="Настройка">
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span>Настройка</h2></div>
<p>AutoFS использует для конфигурирования шаблоны, расположенные в <code>/etc/autofs</code>. Основной шаблон называется <code>auto.master</code>, он может указывать на один или несколько других шаблонов для конкретных типов носителей.
</p>
<ul><li>Откройте <code>/etc/autofs/auto.master</code> своим любимым редактором. Вы увидите что-то подобное:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/autofs/auto.master</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#/media /etc/autofs/auto.media</pre>
<p>Первое значение в каждой строке определяет базовый каталог, в который носители будут монтироваться, второе значение - шаблон который будет использован. По умолчанию базовый путь <code>/media</code>, но вы можете изменить путь на любое другое значение по вашему желанию. Например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/autofs/auto.master</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/media/misc     /etc/autofs/auto.misc     --timeout=5
/media/net      /etc/autofs/auto.net      --timeout=60</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Убедитесь в наличии пустой строки в конце файла шаблона (нажмите <code>ENTER</code> после последнего слова). Если нет корректного EOF (end of file), демон AutoFS не загрузится корректно.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Дополнительный параметр <code>timeout</code> устанавливает количество секунд, после истечения которых каталоги будут размонтированы. Значение <code>0</code> отключает таймаут.</div>
<p>Базовый каталог будет создан, если он не существует. Он станет точкой монтирования, отображающей в себе динамически подключаемые носители, что означает, что существующее содержимое базового каталога будет недоступно, пока autofs работает. Однако это обратимо, так что если вы случайно настроили автомонтирование в непустой каталог, то можно просто прописать другой путь в <code>auto.master</code> и перезапустить AutoFS — содержимое существующего каталога вернётся на место.
</p>
<p>Если вы всё равно хотите автомонтирование в непустой каталог и при этом иметь доступ к его содержимому даже во время работы autofs, вы можете настроить autofs на другой каталог (например, /var/autofs/net) и создать символические ссылки на неё:
</p>
<pre># ln -s /var/autofs/net/share_name /media/share_name
</pre>
<p>В качестве альтернативы вы можете настроить монтирование носителей в конкретные каталоги вместо использования общего каталога:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/autofs/auto.master</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/-     /etc/autofs/auto.template</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/autofs/auto.template</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/path/to/folder     -options :/device/path
/home/user/usbstick  -fstype=auto,async,nodev,nosuid,umask=000  :/dev/sdb1</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Это может вызвать проблемы с блокировкой ресурсов, если соединение до ресурса оказалось потеряно. При обращении к каталогу программы будут зависать в ожидании ответа, и придётся дожидаться возвращения соединения или убивать процесс, чтобы размонтирование стало возможным. Чтобы избежать этого, используйте только если вы всегда подключены к общему ресурсу, и не используйте домашний каталог или другие часто используемые каталоги, чтобы ваш файловый менеджер не пытался читать содержимое отключенного каталога.</div>
<ul><li>Откройте файл <code>/etc/nsswitch.conf</code> и добавьте запись для автоматического монтирования:</li></ul>
<pre>automount: files
</pre>
<ul><li>Когда вы закончите настраивать шаблоны (см. ниже), <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>autofs.service</code>.</li></ul>
<p>Теперь устройства автоматически монтируются при обращении и остаются примонтированными всё то время, пока вы их используете.
</p>
<div class="mw-heading mw-heading3"><h3 id="Съёмные_носители">
<span id=".D0.A1.D1.8A.D1.91.D0.BC.D0.BD.D1.8B.D0.B5_.D0.BD.D0.BE.D1.81.D0.B8.D1.82.D0.B5.D0.BB.D0.B8"></span>Съёмные носители</h3></div>
<p>Съемным устройствам назначаются имена блочных устройств в соответствии со следующим доступным местом, например если <code>/dev/sd{a,b,c} </code> уже заняты, съёмный носитель подключится как блочное устройство <code>/dev/sdd</code>. Вместо назначения точки монтирования на основе ненадежного пути к блочному устройству более надежным подходом является использование <a href="../ru/Persistent_block_device_naming.html#by-uuid" title="Persistent block device naming (Русский)">UUID</a> или <a href="../ru/Persistent_block_device_naming.html#by-partuuid" title="Persistent block device naming (Русский)">PARTUUID</a> съемного носителя в качестве местоположения в map-файле.
</p>
<p>Например, чтобы примонтировать определённый USB-диск в путь <code>/mnt/black</code>, настройте файл шаблона и map-файл:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/autofs/auto.master</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># основной шаблон
/mnt     /etc/autofs/auto.mnt   # [опции тут]</pre>
<p>Используйте <code>blkid</code> чтобы найте UUID нужного раздела, затем сгенерируйте map-файл:
</p>
<pre> # _ID=$( blkid --output value --match-tag PARTUUID /dev/sd<i>XY</i> )
 # printf "%s %s\n" "black -fstype=auto :PARTUUID=" "${_ID}" &gt;/etc/autofs/auto.mnt
</pre>
<div class="mw-heading mw-heading3"><h3 id="Монтирование_NFS">
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_NFS"></span>Монтирование NFS</h3></div>
<p>AutoFS предоставляет способ автоматического обнаружения и монтирования NFS-ресурсов на удалённых серверах (шаблон конфигурирования сетевых ресурсов <code>/etc/autofs/auto.net</code> был удалён в autofs5). Чтобы включить автоматическое обнаружение и монтирование сетевых ресурсов со всех доступных серверов без необходимости дополнительного конфигурирования, вам необходимо добавить следующее в файл <code>/etc/autofs/auto.master</code>:
</p>
<pre>/net -hosts --timeout=60
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Каждое имя хоста должно быть разрешимым (resolvable), например, любой IP-адрес в <code>/etc/hosts</code> или заданный через <a href="https://en.wikipedia.org/wiki/Domain_Name_System" class="extiw" title="wikipedia:Domain Name System">DNS</a>. Убедитесь, что у вас установлен и настроен пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nfs-utils">nfs-utils</a></span>. Также нужно <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включить">включить</a> <code>rpcbind</code> для просмотра общих каталогов.</div>
<p>К примеру, есть удалённый сервер <i>fileserver</i> (название каталога является именем хоста сервера) с ресурсом NFS, который называется <code>/home/share</code>, вы можете получить доступ к ресурсу просто набрав:
</p>
<pre># cd /net/fileserver/home/share
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Please note that <i>ghosting</i> (i.e. automatically creating directory placeholders before mounting shares) is enabled by default; although, AutoFS installation notes claim to remove that option from <code>/etc/conf.d/autofs</code> in order to start the AutoFS daemon.</div>
<p>Опция <code>-hosts</code> использует механизм, похожий на команду <code>showmount</code>, для обнаружения удалённых ресурсов. Вы можете посмотреть экспортированные ресурсы с помощью этой команды:
</p>
<pre># showmount &lt;имясервера&gt; -e 
</pre>
<p>Замените <i>&lt;имясервера&gt;</i> на имя вашего собственного сервера.
</p>
<div class="mw-heading mw-heading4"><h4 id="Ручная_настройка_NFS">
<span id=".D0.A0.D1.83.D1.87.D0.BD.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_NFS"></span>Ручная настройка NFS</h4></div>
<p>Чтобы примонтировать NFS-ресурс <i>file_server</i>, располагаемый по удалённому пути <code>/srv/shared_dir</code>, в локальный путь <code>/mnt/foo</code>, <a href="../ru/Help:Reading.html#%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C,_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C,_%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C" class="mw-redirect" title="Добавьте">добавьте</a> новый файл конфигурации, например <code>file_server.autofs</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/autofs/auto.master.d/file_server.autofs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/mnt   /etc/autofs/auto.file_server --timeout 60</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/autofs/auto.file_server</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">foo  -rw,soft,rsize=8192,wsize=8192 file_server:/srv/shared_dir</pre>
<div class="mw-heading mw-heading3"><h3 id="Samba">Samba</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Одиночные_ресурсы">
<span id=".D0.9E.D0.B4.D0.B8.D0.BD.D0.BE.D1.87.D0.BD.D1.8B.D0.B5_.D1.80.D0.B5.D1.81.D1.83.D1.80.D1.81.D1.8B"></span>Одиночные ресурсы</h4></div>
<p>Добавьте в <code>/etc/autofs/auto.master</code>:
</p>
<pre>/media/[мой_сервер] /etc/autofs/auto.[мой_сервер] --timeout 60 --browse
</pre>
<p>где <code>--timeout</code> определяет, сколько секунд ждать перед размонтированием. Опция <code>--browse</code> создаёт пустые каталоги для каждой точки монтирования для избегания таймаута, если не удаётся связаться с сетевым ресурсом.
</p>
<p>Затем создайте файл <code>/etc/autofs/auto.[мой_сервер]</code>
</p>
<pre>[любое_имя] -fstype=cifs,[другие_опции] ://[удалённый_сервер]/[имя_удалённого_ресурса]
</pre>
<p>Можно указать имя пользователя и пароль для общего ресурса в опциях:
</p>
<pre>[любое_имя] -fstype=cifs,username=[имя_пользователя],password=[пароль],[другие_опции] ://[remote_server]/[имя_удалённого_ресурса]
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Экранируйте $ и другие спецсимволы обратным слэшем по необходимости.</div>
<div class="mw-heading mw-heading4"><h4 id="Несколько_ресурсов">
<span id=".D0.9D.D0.B5.D1.81.D0.BA.D0.BE.D0.BB.D1.8C.D0.BA.D0.BE_.D1.80.D0.B5.D1.81.D1.83.D1.80.D1.81.D0.BE.D0.B2"></span>Несколько ресурсов</h4></div>
<p>Вы можете указать несколько общих ресурсов в <code>/etc/autofs/auto.[мой_сервер]</code>, например:
</p>
<pre>[любое_имя] -fstype=cifs,[другие_опции] /photos ://[удалённый_сервер]/photos /music ://[удалённый_сервер]/music /video ://[удалённый_сервер]/video
</pre>
<div class="mw-heading mw-heading4"><h4 id="Автообнаружение">
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BE.D0.B1.D0.BD.D0.B0.D1.80.D1.83.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5"></span>Автообнаружение</h4></div>
<p>Смотрите комментарии в <code>/etc/autofs/auto.smb</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="FTP_и_SSH_(через_Fuse)">
<span id="FTP_.D0.B8_SSH_.28.D1.87.D0.B5.D1.80.D0.B5.D0.B7_Fuse.29"></span>FTP и SSH (через Fuse)</h3></div>
<p>Доступ к удалённым FTP- и SSH-серверам может быть легко получен с AutoFS через <a href="https://en.wikipedia.org/wiki/ru:FUSE_(%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C_%D1%8F%D0%B4%D1%80%D0%B0)" class="extiw" title="wikipedia:ru:FUSE (модуль ядра)">FUSE</a>, слой виртуальной файловой системы.
</p>
<div class="mw-heading mw-heading4"><h4 id="Удалённые_FTP">
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D1.91.D0.BD.D0.BD.D1.8B.D0.B5_FTP"></span>Удалённые FTP</h4></div>
<p>Во-первых, установите пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=curlftpfs">curlftpfs</a></span>.
</p>
<p>Загрузите модуль <b>fuse</b>:
</p>
<pre># modprobe fuse
</pre>
<p>Создайте файл <code>/etc/modules-load.d/fuse.conf</code> с содержимым <code>fuse</code> для загрузки его при каждом запуске компьютера.
</p>
<p>Далее, добавьте новую запись для FTP-серверов в <code>/etc/autofs/auto.master</code>:
</p>
<pre>/media/ftp        /etc/autofs/auto.ftp    --timeout=60
</pre>
<p>Создайте файл <code>/etc/autofs/auto.ftp</code> и добавьте сервер в формате <code><a rel="nofollow" class="external free" href="ftp://myuser:mypassword@host:port/path">ftp://myuser:mypassword@host:port/path</a></code>:
</p>
<pre>servername -fstype=curl,rw,allow_other,nodev,nonempty,noatime    :ftp\://myuser\:mypassword\@remoteserver
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Ваши пароли может видеть каждый, кто запустит <code>df</code> (только для примонтированных серверов) или откроет файл <code>/etc/autofs/auto.ftp</code>.</div>
<p>Если Вы хотите немного больше безопасности, можете создать файл  <code>~root/.netrc</code> и указать пароли там.
Пароли по-прежнему написаны в текстовом формате, но Вы можете задать права 600, и команда <code>df</code> их не покажет (неважно, примонтирован сервер или нет).
Этот способ также менее чувствителен к специальным символам (которых иначе необходимо избегать) в паролях. Придерживайтесь такого формата:
</p>
<pre>machine remoteserver  
login myuser
password mypassword
</pre>
<p>Строчка в <code>/etc/autofs/auto.ftp</code> выглядит как эта, без имени пользователя и пароля:
</p>
<pre>servername -fstype=curl,allow_other    :ftp\://remoteserver
</pre>
<p>Создайте файл <code>/sbin/mount.curl</code> с кодом:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/sbin/mount.curl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> #! /bin/sh
 curlftpfs $1 $2 -o $4,disable_eprt
</pre>
<p>Создайте файл <code>/sbin/umount.curl</code> с кодом:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/sbin/umount.curl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> #! /bin/sh
 fusermount -u $1
</pre>
<p>Установите права для обоих файлов:
</p>
<pre># chmod 755 /sbin/mount.curl
# chmod 755 /sbin/umount.curl
</pre>
<p>После перезапуска Ваш новый FTP-сервер должен быть доступен через <code>/media/ftp/servername</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Удалённые_SSH">
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D1.91.D0.BD.D0.BD.D1.8B.D0.B5_SSH"></span>Удалённые SSH</h4></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> All the <i>ssh*</i> commands should be executed as the same user, as before <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Autofs&amp;diff=prev&amp;oldid=318335">this edit</a>. It should not matter if it is root or unprivileged. (Discuss in <a rel="nofollow" class="external text" href="../ru/Talk:Autofs.html">Talk:Autofs (Русский)</a>)</div>
</div>
<p>Здесь базовые инструкции по доступу к удалённой файловой системе через <a href="../ru/OpenSSH.html" class="mw-redirect" title="SSH (Русский)">SSH</a> с помощью AutoFS. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Аутентификация без пароля может быть удобной, но также имеет последствия для безопасности. Подробнее смотрите в <a href="../en/SSH_keys.html" title="SSH keys">SSH keys</a>.</div>
<p>Установите пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sshfs">sshfs</a></span>.
</p>
<p>Загрузите модуль <code>fuse</code>:
</p>
<pre># modprobe fuse
</pre>
<p>Создайте файл <code>/etc/modules-load.d/fuse.conf</code> с содержимым <code>fuse</code> чтобы загружать его при каждом запуске системы, если вы не создали ранее.
</p>
<p>Установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssh">openssh</a></span>.
</p>
<p>Сгенерируйте <a href="../en/SSH_keys.html" title="SSH keys">ключ SSH</a>:
</p>
<pre>$ ssh-keygen
</pre>
<p>Когда генератор запросит фразу-пароль, просто нажмите <code>ENTER</code>. Использование ключей SSH без фразы-пароля менее безопасно, однако запуск AutoFS с паролем приводит к некоторым дополнительным трудностям, которые (пока) не были освещены в этой статье. 
</p>
<p>Далее, скопируйте публичный ключ на удалённый SSH сервер:
</p>
<pre>$ ssh-copy-id username@remotehost
</pre>
<p>Скопируйте личный ключ в домашнюю директорию пользователя root, чтобы AutoFS могла его найти:
</p>
<pre># sudo cp ~/.ssh/id_rsa /root/.ssh/id_rsa
</pre>
<p>Вышеприведённое работает, если AutoFS запускается с правами root и по умолчанию не имеет доступа в домашнюю директорию пользователя, содержащую личный ключ. 
</p>
<p><b>Как root</b> убедитесь, что вы можете войти на сервер:
</p>
<pre># ssh username@remotehost
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Это добавит удалённый сервер в список известных хостов <code>known_hosts</code>. Также можно добавить его вручную в <code>/etc/ssh/ssh_known_hosts</code>.</div>
<p>Создайте новый вход для сервера SSH в <code>/etc/autofs/auto.master</code>:
</p>
<pre>/media/ssh		/etc/autofs/auto.ssh	--timeout=60
</pre>
<p>Создайте файл <code>/etc/autofs/auto.ssh</code> и добавьте SSH:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/autofs/auto.ssh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">servername     -fstype=fuse,rw,allow_other,IdentityFile=/home/username/.ssh/id_rsa :sshfs\#username@host\:/</pre>
<p>После перезапуска Ваш сервер SSH должен быть доступен через <code>/media/ssh/servername</code>.
</p>
<div class="mw-heading mw-heading2"><h2 id="MTP">MTP</h2></div>
<p>Media Transfer Protocol (<a href="../en/Media_Transfer_Protocol.html" class="mw-redirect" title="MTP">MTP</a>) используется на некоторых устройствах Android.
</p>
<p>Установите пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mtpfs">mtpfs</a></span>.
</p>
<p>Создайте новую запись для MTP в <code>/etc/autofs/auto.misc</code>:
</p>
<pre>android -fstype=fuse,allow_other,umask=000     :mtpfs
</pre>
<div class="mw-heading mw-heading2"><h2 id="Решение_проблем_и_советы">
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC_.D0.B8_.D1.81.D0.BE.D0.B2.D0.B5.D1.82.D1.8B"></span>Решение проблем и советы</h2></div>
<p>Эта секция содержит несколько решений самых распространённых проблем с AutoFS.
</p>
<div class="mw-heading mw-heading3"><h3 id="Using_NIS">Using NIS</h3></div>
<p>AutoFS с версии 5.0.5 имеет более продвинутую поддержку <a href="../en/NIS.html" title="NIS">NIS</a>. Чтобы использовать AutoFS вместе с NIS, добавьте <code>yp:</code> в начало имён шаблонов в <code>/etc/autofs/auto.master</code>:
</p>
<pre>/home   yp:auto_home    --timeout=60 
/sbtn   yp:auto_sbtn    --timeout=60
+auto.master
</pre>
<p>В более ранних версиях NIS (до 5.0.4), вам нужно добавить <code>nis</code> в <code>/etc/nsswitch.conf</code>:
</p>
<pre>automount: files nis
</pre>
<div class="mw-heading mw-heading3"><h3 id="Опциональные_параметры">
<span id=".D0.9E.D0.BF.D1.86.D0.B8.D0.BE.D0.BD.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B"></span>Опциональные параметры</h3></div>
<p>Вы можете установить параметры, такие как <code>timeout</code>, на общесистемном уровне для всех медиаустройств AutoFS в <code>/etc/default/autofs</code>:
</p>
<ul><li>Откройте файл <code>/etc/default/autofs</code> и отредактируйте строку <code>OPTIONS</code>:</li></ul>
<pre>OPTIONS='--timeout=5'
</pre>
<ul><li>Чтобы сделать возможным ведение логов (по умолчанию его нет), добавьте <code>--verbose</code> в строку <code>OPTIONS</code> в <code>/etc/default/autofs</code>, например:</li></ul>
<pre>OPTIONS='--verbose --timeout=5'
</pre>
<p>После перезапуска демона <code>autofs</code> вы увидите подробный вывод в <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">состоянии юнита</a> или <a href="../ru/Systemd/Journal.html" title="Systemd (Русский)/Journal (Русский)">журнале</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Распознавание_нескольких_устройств">
<span id=".D0.A0.D0.B0.D1.81.D0.BF.D0.BE.D0.B7.D0.BD.D0.B0.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5.D1.81.D0.BA.D0.BE.D0.BB.D1.8C.D0.BA.D0.B8.D1.85_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2"></span>Распознавание нескольких устройств</h3></div>
<p>Если Вы используете несколько устройств USB и хотите легко отсоединять их, Вы можете использовать AutoFS чтобы определять точки монтирования и udev чтобы давать имена Вашим устройствам USB. Посмотрите <a href="../ru/Udev.html#%D0%9E_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0%D1%85_udev" title="Udev (Русский)">udev#О правилах udev</a> для инструкций по настройке правил udev.
</p>
<div class="mw-heading mw-heading3"><h3 id="Права_доступа_AutoFS">
<span id=".D0.9F.D1.80.D0.B0.D0.B2.D0.B0_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_AutoFS"></span>Права доступа AutoFS</h3></div>
<p>Если AutoFS не работает правильно, убедитесь в том, что права доступа для файлов шаблонов установлены правильно, иначе AutoFS не будет запускаться. Это может случиться, если Вы сделали резервную копию способом, который не сохраняет права. Вот как должны быть установлены права доступа для файлов конфигурации:
</p>
<ul>
<li>0644 - /etc/autofs/auto.master</li>
<li>0644 - /etc/autofs/auto.media</li>
<li>0644 - /etc/autofs/auto.misc</li>
<li>0644 - /etc/conf.d/autofs</li>
</ul>
<p>В общем, скрипты (такие как вышеупомянутый <code>auto.net</code>) должны быть <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" title="Help:Reading (Русский)">исполняемыми</a>, а списки монтируемых устройств не должны.
</p>
<p>Если Вы получаете ошибки в <code>/var/log/daemon.log</code>, подобные этим, значит у Вас проблемы с правами доступа:
</p>
<pre>May  7 19:44:16 peterix automount[15218]: lookup(program): lookup for petr failed
May  7 19:44:16 peterix automount[15218]: failed to mount /media/cifs/petr
</pre>
<div class="mw-heading mw-heading3"><h3 id="Проблемы_с_fusermount">
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_fusermount"></span>Проблемы с fusermount</h3></div>
<p>В некоторых версиях util-linux у вас может не получиться размонтировать файловую систему fuse, которую примонтировал autofs, даже с опцией "user=". Смотрите обсуждение здесь:
<a rel="nofollow" class="external free" href="https://sourceforge.net/p/fuse/mailman/fuse-devel/thread/k3a8pi%2457r%241%40ger.gmane.org/">https://sourceforge.net/p/fuse/mailman/fuse-devel/thread/k3a8pi%2457r%241%40ger.gmane.org/</a>
</p>
<div class="mw-heading mw-heading3"><h3 id="Отладка_проблем_с_автомонтированием">
<span id=".D0.9E.D1.82.D0.BB.D0.B0.D0.B4.D0.BA.D0.B0_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC_.D1.81_.D0.B0.D0.B2.D1.82.D0.BE.D0.BC.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC"></span>Отладка проблем с автомонтированием</h3></div>
<p>Для более удобной отладки вы можете запустить automount на переднем плане (не как демон).
</p>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Остановите">Остановите</a> службу <code>autofs.service</code>, затем выполните:
</p>
<pre># automount -f -v
</pre>
<p>Или если вы хотите больше отладочной информации:
</p>
<pre># automount -f --debug
</pre>
<div class="mw-heading mw-heading2"><h2 id="Альтернативы">
<span id=".D0.90.D0.BB.D1.8C.D1.82.D0.B5.D1.80.D0.BD.D0.B0.D1.82.D0.B8.D0.B2.D1.8B"></span>Альтернативы</h2></div>
<ul>
<li>
<a href="../ru/Systemd.html" title="Systemd (Русский)">Systemd</a> может автоматически монтировать файловые системы по запросу; смотрите see <a href="../ru/Fstab.html#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81_systemd" title="Fstab (Русский)">здесь</a> для описания и статью <a href="../ru/SSHFS.html#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5" title="SSHFS (Русский)">sshfs</a> как пример.</li>
<li>
<a href="../ru/Thunar.html#Thunar_Volume_Manager" title="Thunar (Русский)">Thunar Volume Manager</a> — система автомонтирования для пользователей файлового менеджера <a href="../ru/Thunar.html" title="Thunar (Русский)">Thunar</a>.</li>
<li>
<a href="../en/PCManFM.html" title="PCManFM">PCManFM</a> — легковесный файловый менеджер с встроенной поддержкой удалённых общих ресурсов.</li>
<li>
<a href="../ru/Udisks.html" title="Udisks (Русский)">udisks</a> — минималистичная служба автоматического монтирования дисков.</li>
</ul>
<div class="mw-heading mw-heading2"><h2 id="Смотрите_также">
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span>Смотрите также</h2></div>
<ul>
<li>Информация об использовании FTP и SFTP с AutoFS основана на этой статье из Gentoo Wiki: <a rel="nofollow" class="external free" href="https://web.archive.org/web/20130414074212/http://en.gentoo-wiki.com/wiki/Mounting_SFTP_and_FTP_shares">https://web.archive.org/web/20130414074212/http://en.gentoo-wiki.com/wiki/Mounting_SFTP_and_FTP_shares</a>
</li>
<li>Больше информации о SSH можно найти на страницах <a href="../ru/OpenSSH.html" class="mw-redirect" title="Secure Shell (Русский)">SSH</a> и <a href="../en/SSH_keys.html" class="mw-redirect" title="SSH keys (Русский)">SSH Keys</a> этого wiki.</li>
<li>Ubuntu's Autofs help wiki: <a rel="nofollow" class="external free" href="https://help.ubuntu.com/community/Autofs">https://help.ubuntu.com/community/Autofs</a>
</li>
<li>Опции монтирования, специфичные для определённых файловых систем: <span class="plainlinks archwiki-template-man" title="$ man 8 mount"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mount.8#FILESYSTEM-SPECIFIC_MOUNT_OPTIONS">mount(8) § FILESYSTEM-SPECIFIC MOUNT OPTIONS</a></span>
</li>
<li>Опции монтирования, специфичные для fuse: <span class="plainlinks archwiki-template-man" title="$ man 8 mount.fuse"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mount.fuse.8">mount.fuse(8)</a></span>
</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:File_systems.html" title="Category:File systems (Русский)">File systems (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Autofs_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=739779">https://wiki.archlinux.org/index.php?title=Autofs_(Русский)&amp;oldid=739779</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 2 August 2022, at 10:16.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Autofs (Русский)</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
