<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Sudo (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Sudo_Русский rootpage-Sudo_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Установка</span>
			</div>
		</a>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Использование" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Использование</span>
			</div>
		</a>
		
		<ul id="toc-Использование-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Настройка" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Настройка</span>
			</div>
		</a>
		
			<button aria-controls="toc-Настройка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка subsection</span>
			</button>
		
		<ul id="toc-Настройка-sublist" class="vector-toc-list">
			<li id="toc-Defaults" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Defaults">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Defaults</span>
				</div>
			</a>
			
			<ul id="toc-Defaults-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Просмотр_текущих_настроек" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%81%D0%BC%D0%BE%D1%82%D1%80_%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B8%D1%85_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Просмотр текущих настроек</span>
				</div>
			</a>
			
			<ul id="toc-Просмотр_текущих_настроек-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_visudo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_visudo">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Использование visudo</span>
				</div>
			</a>
			
			<ul id="toc-Использование_visudo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Примеры_настроек" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Примеры настроек</span>
				</div>
			</a>
			
			<ul id="toc-Примеры_настроек-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Права_доступа_к_файлам_sudoers_по_умолчанию" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B0%D0%B2%D0%B0_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC_sudoers_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Права доступа к файлам sudoers по умолчанию</span>
				</div>
			</a>
			
			<ul id="toc-Права_доступа_к_файлам_sudoers_по_умолчанию-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Советы и рекомендации</span>
			</div>
		</a>
		
			<button aria-controls="toc-Советы_и_рекомендации-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Советы и рекомендации subsection</span>
			</button>
		
		<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
			<li id="toc-Отключение_таймаута_запроса_пароля" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%82%D0%B0%D0%B9%D0%BC%D0%B0%D1%83%D1%82%D0%B0_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Отключение таймаута запроса пароля</span>
				</div>
			</a>
			
			<ul id="toc-Отключение_таймаута_запроса_пароля-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Сигнал_при_запросе_пароля" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%B8%D0%B3%D0%BD%D0%B0%D0%BB_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B5_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Сигнал при запросе пароля</span>
				</div>
			</a>
			
			<ul id="toc-Сигнал_при_запросе_пароля-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Перенос_псевдонимов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D0%BD%D0%BE%D1%81_%D0%BF%D1%81%D0%B5%D0%B2%D0%B4%D0%BE%D0%BD%D0%B8%D0%BC%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Перенос псевдонимов</span>
				</div>
			</a>
			
			<ul id="toc-Перенос_псевдонимов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Один_тайм-аут_на_все_сеансы_терминала" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%B4%D0%B8%D0%BD_%D1%82%D0%B0%D0%B9%D0%BC-%D0%B0%D1%83%D1%82_%D0%BD%D0%B0_%D0%B2%D1%81%D0%B5_%D1%81%D0%B5%D0%B0%D0%BD%D1%81%D1%8B_%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Один тайм-аут на все сеансы терминала</span>
				</div>
			</a>
			
			<ul id="toc-Один_тайм-аут_на_все_сеансы_терминала-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Время_действия_введённого_пароля" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D1%80%D0%B5%D0%BC%D1%8F_%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D1%8F_%D0%B2%D0%B2%D0%B5%D0%B4%D1%91%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Время действия введённого пароля</span>
				</div>
			</a>
			
			<ul id="toc-Время_действия_введённого_пароля-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Переменные_окружения" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>Переменные окружения</span>
				</div>
			</a>
			
			<ul id="toc-Переменные_окружения-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Пароль_суперпользователя" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B0%D1%80%D0%BE%D0%BB%D1%8C_%D1%81%D1%83%D0%BF%D0%B5%D1%80%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7</span>
					<span>Пароль суперпользователя</span>
				</div>
			</a>
			
			<ul id="toc-Пароль_суперпользователя-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отключение_учетной_записи_root" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%83%D1%87%D0%B5%D1%82%D0%BD%D0%BE%D0%B9_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8_root">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8</span>
					<span>Отключение учетной записи root</span>
				</div>
			</a>
			
			<ul id="toc-Отключение_учетной_записи_root-sublist" class="vector-toc-list">
				<li id="toc-kdesu" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#kdesu">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8.1</span>
					<span>kdesu</span>
				</div>
			</a>
			
			<ul id="toc-kdesu-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Еще_один_пример_настройки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%95%D1%89%D0%B5_%D0%BE%D0%B4%D0%B8%D0%BD_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9</span>
					<span>Еще один пример настройки</span>
				</div>
			</a>
			
			<ul id="toc-Еще_один_пример_настройки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_sudo_с_помощью_вкладываемых_в_/etc/sudoers.d_файлов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_sudo_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D0%B2%D0%BA%D0%BB%D0%B0%D0%B4%D1%8B%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D1%85_%D0%B2_/etc/sudoers.d_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.10</span>
					<span>Настройка sudo с помощью вкладываемых в /etc/sudoers.d файлов</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_sudo_с_помощью_вкладываемых_в_/etc/sudoers.d_файлов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Редактирование_файлов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.11</span>
					<span>Редактирование файлов</span>
				</div>
			</a>
			
			<ul id="toc-Редактирование_файлов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Шутливые_оскорбления" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A8%D1%83%D1%82%D0%BB%D0%B8%D0%B2%D1%8B%D0%B5_%D0%BE%D1%81%D0%BA%D0%BE%D1%80%D0%B1%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.12</span>
					<span>Шутливые оскорбления</span>
				</div>
			</a>
			
			<ul id="toc-Шутливые_оскорбления-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Решение проблем</span>
			</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Проблемы_с_TTY_через_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_TTY_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_SSH">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Проблемы с TTY через SSH</span>
				</div>
			</a>
			
			<ul id="toc-Проблемы_с_TTY_через_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Наложение_umask" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_umask">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Наложение umask</span>
				</div>
			</a>
			
			<ul id="toc-Наложение_umask-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Sudo (Русский)</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Sudo.html" title="Sudo">Sudo</a>. Дата последней синхронизации: 26 июня 2022. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Sudo&amp;diff=0&amp;oldid=734696">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../en/c8c2c4a7aa94f9b27ddbceafd7990419.html" class="mw-redirect" title="Пользователи и группы">Пользователи и группы</a></li>
<li><a href="../ru/Su.html" title="Su (Русский)">su (Русский)</a></li>
<li><a href="../ru/Doas.html" title="Doas (Русский)">doas (Русский)</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.sudo.ws/sudo/">Sudo</a> (англ. <i>substitute user do</i>, дословно «подменить пользователя и выполнить») позволяет системному администратору делегировать полномочия, чтобы дать некоторым пользователям (или группе пользователей) возможность запускать некоторые (или все) команды c правами суперпользователя или любого другого пользователя, обеспечивая контроль над командами и их аргументами.
</p>
<p>Sudo - это альтернатива <a href="../ru/Su.html" title="Su (Русский)">su</a> для выполнения команд с правами суперпользователя (root). В отличие от <a href="../ru/Su.html" title="Su (Русский)">su</a>, который запускает оболочку с правами root и даёт всем дальнейшим командам root-права, sudo предоставляет временное повышение привилегий для одной команды. Предоставляя привилегии root только при необходимости, sudo снижает вероятность того, что опечатка или ошибка в выполняемой команде произведут в системе разрушительные действия.
</p>
<p>Sudo может также использоваться для выполнения команд от имени других пользователей; кроме того, sudo логирует все команды и неудачные попытки доступа для аудита безопасности.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Установка">
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span>Установка</h2></div>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Использование">
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span>Использование</h2></div>
<p>Чтобы начать использовать <code>sudo</code> как непривилегированный пользователь, его нужно настроить должным образом. Для этого прочтите раздел о настройке.
</p>
<p>Для использования <i>sudo</i> просто добавьте <code>sudo</code> и пробел перед нужной командой:
</p>
<pre>$ sudo <i>команда</i>
</pre>
<p>Например, для использования pacman:
</p>
<pre>$ sudo pacman -Syu
</pre>
<p>Смотрите <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8">sudo(8)</a></span> для более подробной информации.
</p>
<div class="mw-heading mw-heading2"><h2 id="Настройка">
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span>Настройка</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Defaults">Defaults</h3></div>
<p><span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5#SUDOERS_OPTIONS">sudoers(5) § SUDOERS OPTIONS</a></span> содержит список опций, которые можно использовать с командой <code>Defaults</code> в файле <code>/etc/sudoers</code>.
</p>
<p><a rel="nofollow" class="external text" href="https://gist.github.com/AladW/7eca9799b9ea624eca31">Здесь</a> доступен список опций (извлечён из исходного кода версии 1.8.7) в формате, удобном для копирования и вставки в файл <code>sudoers</code>.
</p>
<p>Смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> для более подробной информации, например о настройке таймаутов.
</p>
<div class="mw-heading mw-heading3"><h3 id="Просмотр_текущих_настроек">
<span id=".D0.9F.D1.80.D0.BE.D1.81.D0.BC.D0.BE.D1.82.D1.80_.D1.82.D0.B5.D0.BA.D1.83.D1.89.D0.B8.D1.85_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA"></span>Просмотр текущих настроек</h3></div>
<p>Выполните <code>sudo -ll</code> для вывода текущей конфигурации sudo.
Чтобы посмотреть настройки, действующие для конкретного пользователя, выполните <code>sudo -lU <i>пользователь</i></code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Использование_visudo">
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_visudo"></span>Использование visudo</h3></div>
<p>Файл настроек <code>/etc/sudoers</code> <b>всегда</b> следует редактировать с помощью команды <span class="plainlinks archwiki-template-man" title="$ man 8 visudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/visudo.8">visudo(8)</a></span>. <i>visudo</i> блокирует файл <code>sudoers</code>, сохраняет изменения во временный файл и проверяет, что файл синтаксически корректен, перед тем как скопировать его в <code>/etc/sudoers</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> 
<ul>
<li>Крайне важно, чтобы файл <code>sudoers</code> был без синтаксических ошибок! Любая ошибка делает sudo неработоспособным. <b>Всегда</b> редактируйте его только с помощью <i>visudo</i> для предотвращения ошибок.</li>
<li>Из <span class="plainlinks archwiki-template-man" title="$ man 8 visudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/visudo.8">visudo(8)</a></span>: <i>Обратите внимание, что это дыра в безопасности, поскольку позволяет пользователю запускать любую программу, какую он захочет, просто прописав её в VISUAL или EDITOR.</i>
</li>
</ul>
</div>
<p>visudo использует <i>vi</i> в качестве текстового редактора по умолчанию. Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span> скомпилирован с опцией <code>--with-env-editor</code> по умолчанию и использует переменные <code>VISUAL</code> и <code>EDITOR</code>. <code>EDITOR</code> не используется, если задана переменная <code>VISUAL</code>.
</p>
<p>Чтобы выбрать <a href="../ru/Nano.html" title="Nano (Русский)">nano</a> в качестве редактора для <i>visudo</i> в текущем сеансе, задайте и экспортируйте переменную <code>EDITOR</code> перед запуском <i>visudo</i>. Чтобы выбрать другой редактор однократно, можно просто прописать эту переменную перед командой <i>visudo</i>:
</p>
<pre># EDITOR=nano visudo
</pre>
<p>В качестве альтернативы можно отредактировать копию файла <code>/etc/sudoers</code> и вручную запустить проверку синтаксиса с помощью команды <code>visudo -c <i>/копия/файла/sudoers</i></code>. Это может пригодиться, если вас не устраивает, что <i>visudo</i> блокирует файл.
</p>
<p>Для изменения редактора на постоянной основе для текущего пользователя, смотрите раздел <a href="../en/67b015fa24971247b980e6b516811bbc.html#%D0%9D%D0%B0_%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D0%B5_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F" class="mw-redirect" title="Переменные окружения">Переменные окружения#На уровне пользователя</a>. Для того, чтобы установить выбранный редактор на постоянной основе для всей системы, но только для <i>visudo</i>, добавьте следующее в <code>/etc/sudoers</code> (предположим, что вы предпочитаете <a href="../ru/Nano.html" title="Nano (Русский)">nano</a> в качестве редактора):
</p>
<pre># Сброс окружения
Defaults      env_reset
# Установка ограниченного варианта nano в качестве редактора по умолчанию и запрет visudo использовать EDITOR/VISUAL.
Defaults      editor=/usr/bin/rnano, !env_editor
</pre>
<div class="mw-heading mw-heading3"><h3 id="Примеры_настроек">
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA"></span>Примеры настроек</h3></div>
<p>Настройка sudo осуществляется добавлением записей в файл <code>/etc/sudoers</code>. Чтобы дать пользователю привилегии суперпользователя, когда он вводит <code>sudo</code> перед командой, добавьте следующую строку:
</p>
<pre><i>имя_пользователя</i>   ALL=(ALL:ALL) ALL
</pre>
<p>Разрешить пользователю выполнять все команды от любого пользователя, но только на машине с определенным названием хоста:
</p>
<pre><i>имя_пользователя</i>   <i>название_хоста</i>=(ALL:ALL) ALL
</pre>
<p>Предоставить членам группы <a href="../ru/Users_and_groups.html#%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%B3%D1%80%D1%83%D0%BF%D0%BF" title="Users and groups (Русский)">wheel</a> доступ к sudo:
</p>
<pre>%wheel      ALL=(ALL:ALL) ALL
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Для добавления новых администраторов рекомендуется включить доступ к sudo для группы <code>wheel</code> и <a href="../ru/Users_and_groups.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" title="Users and groups (Русский)">добавлять новых пользователей в неё</a>, поскольку по умолчанию <a href="../ru/Polkit.html#%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B0%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BE%D0%B2" title="Polkit (Русский)">Polkit</a> рассматривает членов группы <code>wheel</code> как администраторов. Если пользователь не является членом группы <code>wheel</code>, программы, использующие Polkit, могут запросить аутентификацию с использованием пароля root вместо пароля пользователя.</div>
<p>Чтобы не спрашивать пароль у пользователя:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Это позволит любому процессу, запущенному под вашим именем пользователя, использовать sudo, не спрашивая разрешения.</div>
<pre>Defaults:<i>имя_пользователя</i>      !authenticate
</pre>
<p>Разрешить выполнять только конкретные команды и только пользователю на определенном хосте:
</p>
<pre><i>имя_пользователя</i> <i>название_хоста</i>=/usr/bin/halt,/usr/bin/poweroff,/usr/bin/reboot,/usr/bin/pacman -Syu
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Наиболее общие опции должны идти в начале файла, а наиболее частные - наоборот, в конце файла, так как более нижние строки переопределяют более верхние. В частности, добавляемая строка должна быть после строки <code>%wheel</code>, если ваш пользователь находится в этой группе.</div>
<p>Разрешить выполнять конкретно определённые команды только для пользователя на определенном хосте и без пароля:
</p>
<pre><i>имя_пользователя</i> <i>название_хоста</i>= NOPASSWD: /usr/bin/halt,/usr/bin/poweroff,/usr/bin/reboot,/usr/bin/pacman -Syu
</pre>
<p>Подробный пример для <code>sudoers</code> доступен в <code>/usr/share/doc/sudo/examples/sudoers</code>. Также смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> для получения более подробной информации.
</p>
<div class="mw-heading mw-heading3"><h3 id="Права_доступа_к_файлам_sudoers_по_умолчанию">
<span id=".D0.9F.D1.80.D0.B0.D0.B2.D0.B0_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_.D0.BA_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0.D0.BC_sudoers_.D0.BF.D0.BE_.D1.83.D0.BC.D0.BE.D0.BB.D1.87.D0.B0.D0.BD.D0.B8.D1.8E"></span>Права доступа к файлам sudoers по умолчанию</h3></div>
<p>Файл <code>sudoers</code> должен иметь владельца root и группу root (0). Права доступа всегда должны быть установлены как <code>r--r-----</code> (0440). Эти права установлены по умолчанию, однако если вы случайно измените их, они должны быть немедленно изменены обратно, иначе sudo не будет работать.
</p>
<pre># chown -c root:root /etc/sudoers
# chmod -c 0440 /etc/sudoers
</pre>
<div class="mw-heading mw-heading2"><h2 id="Советы_и_рекомендации">
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span>Советы и рекомендации</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Отключение_таймаута_запроса_пароля">
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.82.D0.B0.D0.B9.D0.BC.D0.B0.D1.83.D1.82.D0.B0_.D0.B7.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D0.B0_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D1.8F"></span>Отключение таймаута запроса пароля</h3></div>
<p>Часто раздражает такая вещь: вы запускаете какой-то долгий процесс, который работает с обычными правами и повышает их только при необходимости, и когда sudo запросит пароль, вы можете случайно не заметить это и не ввести его вовремя, из-за чего случается таймаут, процесс умирает и проделанная работа теряется или, если повезёт, кэшируется. Обычно советуют отключить запрос пароля для sudo или увеличить время действия ранее введённого пароля, однако оба этих способа имеют негативные последствия для безопасности. Таймаут <b>запроса</b> пароля тоже можно отключить, и поскольку это никак не влияет на безопасность, это и должно быть предпочтительным решением:
</p>
<pre>Defaults passwd_timeout=0
</pre>
<div class="mw-heading mw-heading3"><h3 id="Сигнал_при_запросе_пароля">
<span id=".D0.A1.D0.B8.D0.B3.D0.BD.D0.B0.D0.BB_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.BF.D1.80.D0.BE.D1.81.D0.B5_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D1.8F"></span>Сигнал при запросе пароля</h3></div>
<p>Чтобы работающий в фоне терминал привлёк ваше внимание в момент запроса пароля, можно добавить <a href="https://en.wikipedia.org/wiki/Bell_character" class="extiw" title="wikipedia:Bell character">символ BELL</a> в строку запроса пароля:
</p>
<pre>Defaults passprompt="^G[sudo] password for %p: "
</pre>
<p>Вместо <code>^G</code> должен быть вписан настоящий символ BELL. Например, чтобы ввести его в <a href="../ru/Vim.html" title="Vim (Русский)">vim</a>, используйте сочетание <code>Ctrl+v</code> <code>Ctrl+g</code>, а в <a href="../ru/Nano.html" title="Nano (Русский)">nano</a> используйте <code>Alt+v</code> <code>Ctrl+g</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Перенос_псевдонимов">
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D0.BD.D0.BE.D1.81_.D0.BF.D1.81.D0.B5.D0.B2.D0.B4.D0.BE.D0.BD.D0.B8.D0.BC.D0.BE.D0.B2"></span>Перенос псевдонимов</h3></div>
<p>Если у вас установлено много псевдонимов, вы могли заметить, что они не переносятся в сеанс sudo. Однако, это легко исправить. Просто добавьте в ваш <code>~/.bashrc</code> или <code>/etc/bash.bashrc</code> строку:
</p>
<pre>alias sudo='sudo '
</pre>
<div class="mw-heading mw-heading3"><h3 id="Один_тайм-аут_на_все_сеансы_терминала">
<span id=".D0.9E.D0.B4.D0.B8.D0.BD_.D1.82.D0.B0.D0.B9.D0.BC-.D0.B0.D1.83.D1.82_.D0.BD.D0.B0_.D0.B2.D1.81.D0.B5_.D1.81.D0.B5.D0.B0.D0.BD.D1.81.D1.8B_.D1.82.D0.B5.D1.80.D0.BC.D0.B8.D0.BD.D0.B0.D0.BB.D0.B0"></span>Один тайм-аут на все сеансы терминала</h3></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Это позволит любому процессу воспользоваться вашим открытым сеансом sudo.</div>
<p>По умолчанию сеанс sudo действует только в пределах текущего терминала; при запуске sudo в новом терминале он запросит пароль заново. Если вас это раздражает, укажите для опции <code>timestamp_type</code> значение <code>global</code>:
</p>
<pre>Defaults timestamp_type=global
</pre>
<div class="mw-heading mw-heading3"><h3 id="Время_действия_введённого_пароля">
<span id=".D0.92.D1.80.D0.B5.D0.BC.D1.8F_.D0.B4.D0.B5.D0.B9.D1.81.D1.82.D0.B2.D0.B8.D1.8F_.D0.B2.D0.B2.D0.B5.D0.B4.D1.91.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D1.8F"></span>Время действия введённого пароля</h3></div>
<p>Возможно, вы захотите изменить промежуток времени, в течение которого sudo действует без ввода пароля. Этого легко добиться добавив опцию <code>timestamp_timeout</code> в <code>/etc/sudoers</code> (по умолчанию 5 минут):
</p>
<pre>Defaults timestamp_timeout=10
</pre>
<p>Если вы запускаете много sudo-команд подряд, возможно, вместо увеличения <code>timestamp_timeout</code> лучше просто периодически обновлять временную метку. Команда <code>sudo -v</code> запустит отсчёт таймаута заново. С помощью команды <code>sudo -K</code> можно удалить временную метку, что приведёт к запросу пароля при следующем запуске <i>sudo</i>.
</p>
<p>Обновление временной метки можно автоматизировать с помощью такого псевдонима (добавьте его в <code>.bashrc</code>):
</p>
<pre>alias sudo='sudo -v; sudo '
</pre>
<p>Также можно сделать bash-функцию: подробнее на <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/584725/expand-certain-aliases-from-within-sudo-bash-function">stackexchange</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Переменные_окружения">
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D0.B5_.D0.BE.D0.BA.D1.80.D1.83.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F"></span>Переменные окружения</h3></div>
<p>Если у вас много переменных окружения или вы экспортировали ваши настройки прокси через <code>export http_proxy="..."</code>, когда вы используете sudo, эти переменные не будут переданы в открытый сеанс, если вы не запустите sudo в опцией <code>-E</code>.
</p>
<pre>$ sudo -E pacman -Syu
</pre>
<p>Рекомендованный способ сохранения переменных окружения - это прописать их в <code>env_keep</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults env_keep += "ftp_proxy http_proxy https_proxy no_proxy"
</pre>
<div class="mw-heading mw-heading3"><h3 id="Пароль_суперпользователя">
<span id=".D0.9F.D0.B0.D1.80.D0.BE.D0.BB.D1.8C_.D1.81.D1.83.D0.BF.D0.B5.D1.80.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span>Пароль суперпользователя</h3></div>
<p>Вы можете сконфигурировать sudo так, чтобы он спрашивал пароль суперпользователя вместо пароля текущего пользователя, добавив <code>targetpw</code> (целевой пользователь, по умолчанию root) или <code>rootpw</code> в список опций Defaults в <code>/etc/sudoers</code>:
</p>
<pre>Defaults targetpw
</pre>
<p>Чтобы не понадобилось разглашать пароль root обычным пользователям, можно указать эту опцию только для определённой группы:
</p>
<pre>Defaults:%wheel targetpw
%wheel ALL=(ALL) ALL
</pre>
<div class="mw-heading mw-heading3"><h3 id="Отключение_учетной_записи_root">
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.83.D1.87.D0.B5.D1.82.D0.BD.D0.BE.D0.B9_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B8_root"></span>Отключение учетной записи root</h3></div>
<p>Вы можете захотеть отключить возможность входа систему пользователя root. Без этого атакующие сначала должны будут угадать имя пользователя, сконфигурированного как sudoer, а также пароль этого пользователя. Смотрите для примера  <a href="../ru/Secure_Shell.html#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5" class="mw-redirect" title="Secure Shell (Русский)">Secure Shell (Русский)#Отключение</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> 
<ul>
<li>Будьте осторожны. Вы можете попасть в свою ловушку, если отключите вход систему пользователя root. Sudo по умолчанию не установлен, и его стандартная конфигурация не позволяет ни получить доступ к правам root без пароля, ни дать такой доступ вам по вашему собственному паролю. Убедитесь, что пользователь правильно сконфигурирован как sudoer <i>перед</i> отключением аккаунта суперпользователя!</li>
<li>Если файл sudoers настроен на использование rootpw по умолчанию, то не отключайте root-вход ни одной из следующих команд!</li>
<li>Если вы уже попали в ловушку, смотрите статью <a href="../en/a7b1e176af3cb2b4018da6a2eedbf017.html" class="mw-redirect" title="Сброс пароля root">Сброс пароля root</a> для получения помощи.</li>
</ul>
</div>
<p>Можно заблокировать аккаунт с помощью <code>passwd</code>:
</p>
<pre># passwd -l root
</pre>
<p>Похожая команда снимает блокировку:
</p>
<pre>$ sudo passwd -u root
</pre>
<p>Также вы можете отредактировать <code>/etc/shadow</code> и заменить зашифрованный пароль root на "!":
</p>
<pre>root:!:12345::::::
</pre>
<p>Тогда, чтобы задать новый пароль и тем самым разблокировать пользователя root:
</p>
<pre>$ sudo passwd root
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Чтобы попасть в командную оболочку root даже после отключения аккаунта, используйте команду <code>sudo -i</code>.</div>
<div class="mw-heading mw-heading4"><h4 id="kdesu">kdesu</h4></div>
<p>kdesu можно использовать в <a href="../ru/KDE.html" title="KDE (Русский)">KDE</a> для запуска графических программ с привилегиями суперпользователя. Вероятно, что kdesu по умолчанию будет пытаться использовать su, даже если аккаунт root отключен. К счастью, можно сказать kdesu использовать sudo вместо su. Создайте/отредактируйте файл <code>~/.config/kdesurc</code>:
</p>
<pre>[super-user-command]
super-user-command=sudo
</pre>
<p>или используйте следующую команду:
</p>
<pre>$ kwriteconfig5 --file kdesurc --group super-user-command --key super-user-command sudo
</pre>
<div class="mw-heading mw-heading3"><h3 id="Еще_один_пример_настройки">
<span id=".D0.95.D1.89.D0.B5_.D0.BE.D0.B4.D0.B8.D0.BD_.D0.BF.D1.80.D0.B8.D0.BC.D0.B5.D1.80_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8"></span>Еще один пример настройки</h3></div>
<p>Допустим, вы создали 3 пользователей: admin, devel и joe. Пользователь "admin" используется для journalctl, systemctl, mount, kill и iptables; "devel" используется для установки пакетов и редактирования настроек; "joe" - пользователь, под которым вы вошли в систему. Чтобы разрешить "joe" перезагружаться, выключать систему и использовать netctl, мы должны сделать следующее:
</p>
<p>Отредактировать <code>/etc/pam.d/su</code> и <code>/etc/pam.d/su-1</code>.
Потребовать, чтобы пользователь был в группе wheel, но никого в неё не добавлять.
</p>
<pre>#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
#auth           sufficient      pam_wheel.so trust use_uid
# Uncomment the following line to require a user to be in the "wheel" group.
auth            required        pam_wheel.so use_uid
auth            required        pam_unix.so
account         required        pam_unix.so
session         required        pam_unix.so
</pre>
<p>Разрешить вход по SSH только для группы 'ssh'. В эту группу будет входить только "joe".
</p>
<pre># groupadd -r ssh
# gpasswd -a joe ssh
# echo 'AllowGroups ssh' &gt;&gt; /etc/ssh/sshd_config
</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">Перезапустите</a> службу <code>sshd.service</code>.
</p>
<p>Добавить пользователей в другие группы.
</p>
<pre># for g in power network ;do ;gpasswd -a joe $g ;done
# for g in network power storage ;do ;gpasswd -a admin $g ;done
</pre>
<p>Установить права на настройки так, чтобы devel мог редактировать их.
</p>
<pre># chown -R devel:root /etc/{http,openvpn,cups,zsh,vim,screenrc}
</pre>
<pre>Cmnd_Alias  POWER       =   /usr/bin/shutdown -h now, /usr/bin/halt, /usr/bin/poweroff, /usr/bin/reboot
Cmnd_Alias  STORAGE     =   /usr/bin/mount -o nosuid\,nodev\,noexec, /usr/bin/umount
Cmnd_Alias  SYSTEMD     =   /usr/bin/journalctl, /usr/bin/systemctl
Cmnd_Alias  KILL        =   /usr/bin/kill, /usr/bin/killall
Cmnd_Alias  PKGMAN      =   /usr/bin/pacman
Cmnd_Alias  NETWORK     =   /usr/bin/netctl
Cmnd_Alias  FIREWALL    =   /usr/bin/iptables, /usr/bin/ip6tables
Cmnd_Alias  SHELL       =   /usr/bin/zsh, /usr/bin/bash
%power      ALL         =   (root)  NOPASSWD: POWER
%network    ALL         =   (root)  NETWORK
%storage    ALL         =   (root)  STORAGE
root        ALL         =   (ALL)   ALL
admin       ALL         =   (root)  SYSTEMD, KILL, FIREWALL
devel	    ALL         =   (root)  PKGMAN
joe	    ALL         =   (devel) SHELL, (admin) SHELL
</pre>
<p>С такими настройками вам практически никогда не понадобится входить как суперпользователь.
</p>
<p>"joe" может подсоединиться к своему домашнему WiFi.
</p>
<pre>$ sudo netctl start home
$ sudo poweroff
</pre>
<p>"joe" не может использовать netctl от имени другого пользователя.
</p>
<pre>$ sudo -u admin -- netctl start home
</pre>
<p>Когда "joe" хочет воспользоваться journalctl или убить зависший процесс, он может переключиться на нужного пользователя:
</p>
<pre>$ sudo -i -u devel
$ sudo -i -u admin
</pre>
<p>Но "joe" не может переключиться на суперпользователя.
</p>
<pre>$ sudo -i -u root
</pre>
<p>Если "joe" хочет начать gnu-screen сессию как admin, он может сделать это следующим образом:
</p>
<pre>$ sudo -i -u admin
[admin]$ chown admin:tty `echo $TTY`
[admin]$ screen
</pre>
<div class="mw-heading mw-heading3"><h3 id="Настройка_sudo_с_помощью_вкладываемых_в_/etc/sudoers.d_файлов">
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_sudo_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D0.B2.D0.BA.D0.BB.D0.B0.D0.B4.D1.8B.D0.B2.D0.B0.D0.B5.D0.BC.D1.8B.D1.85_.D0.B2_.2Fetc.2Fsudoers.d_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span>Настройка sudo с помощью вкладываемых в /etc/sudoers.d файлов</h3></div>
<p><i>sudo</i> обрабатывает файлы, содержащиеся в директории <code>/etc/sudoers.d/</code>. Это означает, что вместо того, чтобы редактировать <code>/etc/sudoers</code>, вы можете менять настройки в отдельных файлах и перемещать их в эту директорию. Это даёт два преимущества:
</p>
<ul>
<li>Вам не понадобится редактировать файл <code>sudoers.pacnew</code>;</li>
<li>Если с новой записью будет проблема, вы можете просто удалить соответствующий файл вместо необходимости редактировать <code>/etc/sudoers</code> (но смотрите предупреждение ниже).</li>
</ul>
<p>Формат записей в этих вкладываемых файлах такой же, как и в самом файле <code>/etc/sudoers</code>. Чтобы редактировать их напрямую, используйте <code>visudo -f /etc/sudoers.d/<i>файл</i></code>. Смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5#Including_other_files_from_within_sudoers">sudoers(5) § Including other files from within sudoers</a></span> для дополнительной информации.
</p>
<p>Файлы из каталога <code>/etc/sudoers.d/</code> обрабатываются в лексикографическом порядке; файлы, содержащие <code>.</code> или <code>~</code> в имени, пропускаются. Чтобы избежать путаницы с сортировкой, рекомендуется начинать имена файлов с двух цифр, например <code>01_foo</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Порядок настроек в файлах имеет значение: убедитесь, что правила не переопределяют сами себя.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Файлы в <code>/etc/sudoers.d/</code> так же хрупки, как и сам <code>/etc/sudoers</code>: любой некорректный файл сделает <code>sudo</code> неработоспособным. Поэтому по той же причине настоятельно рекомендуется использовать <code>visudo</code>
</div>
<div class="mw-heading mw-heading3"><h3 id="Редактирование_файлов">
<span id=".D0.A0.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span>Редактирование файлов</h3></div>
<p><code>sudo -e</code> или <code>sudoedit</code> позволяет редактировать файл от имени другого пользователя, но при этом запускать текстовый редактор от имени вашего пользователя.
</p>
<p>Это полезно для редактирования файлов от имени root без предоставления повышенных привилегий вашему текстовому редактору. Подробнее об этом читайте в <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8#e">sudo(8) § e</a></span>.
</p>
<p>В качестве редактора можно использовать любую программу, поэтому, например, можно использовать <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=meld">meld</a></span> для управления файлами <a href="../ru/Pacman/Pacnew_and_Pacsave.html" title="Pacman (Русский)/Pacnew and Pacsave (Русский)">pacnew</a>:
</p>
<pre>$ SUDO_EDITOR=meld sudo -e /etc/<i>файл</i>{,.pacnew}
</pre>
<div class="mw-heading mw-heading3"><h3 id="Шутливые_оскорбления">
<span id=".D0.A8.D1.83.D1.82.D0.BB.D0.B8.D0.B2.D1.8B.D0.B5_.D0.BE.D1.81.D0.BA.D0.BE.D1.80.D0.B1.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F"></span>Шутливые оскорбления</h3></div>
<p>Вы можете сконфигурировать sudo так, чтобы при вводе неверного пароля он выводил шутливые оскорбления вместо стандартного сообщения "Sorry, try again". Найдите строку <code>Defaults</code> в <code>/etc/sudoers</code> и добавьте <code>insults</code> в список опции, разделяя их запятыми. Конечный результат может выглядеть так:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults insults</pre>
<p>Для проверки, введите <code>sudo -K</code>, чтобы завершить текущий сеанс и позволить sudo заново запросить пароль.
</p>
<div class="mw-heading mw-heading2"><h2 id="Решение_проблем">
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span>Решение проблем</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Проблемы_с_TTY_через_SSH">
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_TTY_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_SSH"></span>Проблемы с TTY через SSH</h3></div>
<p>По умолчанию SSH не выделяет tty при выполнении удалённой команды. Без tty sudo не может отключить отображение пароля при его вводе. Вы можете воспользоваться ssh опцией <code>-t</code>, чтобы заставить его выделять tty.
</p>
<p><code>Defaults</code> опция <code>requiretty</code> всего лишь позволяет запускать sudo пользователям, если они имеют tty.
</p>
<pre># Disable "ssh hostname sudo &lt;cmd&gt;", because it will show the password in clear text. You have to run "ssh -t hostname sudo &lt;cmd&gt;".
#
#Defaults    requiretty
</pre>
<div class="mw-heading mw-heading3"><h3 id="Наложение_umask">
<span id=".D0.9D.D0.B0.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_umask"></span>Наложение umask</h3></div>
<p>Sudo накладывает на значение <a href="../ru/Umask.html" title="Umask (Русский)">umask</a> пользователя свою собственную (которая по умолчанию установлена в 0022). Это предотвращает sudo от создания файлов с более либеральными правами доступа, чем это позволяет umask пользователя. Несмотря на то, что это разумное значение по умолчанию, если не используется измененная umask, это может привести к ситуации, когда программа, запущенная через sudo может создавать файлы с правами доступа отличными от тех, которые создаются при запуске программы непосредственно суперпользователем. Для исправления таких ошибок sudo предоставляет возможность исправить umask, даже если желаемая umask более либеральна, чем установлено в umask пользователя. Добавив такие строки (используйте <code>visudo</code>) вы измените поведение sudo по умолчанию:
</p>
<pre>Defaults umask = 0022
Defaults umask_override
</pre>
<p>Это установит sudo umask в umask суперпользователя по умолчанию (0022) и переопределит поведение по умолчанию, всегда используя указанную umask и независимо от umask пользователя.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:Security.html" title="Category:Security (Русский)">Security (Русский)</a></li>
<li><a href="../ru/Category:Commands.html" title="Category:Commands (Русский)">Commands (Русский)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Sudo_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=849022">https://wiki.archlinux.org/index.php?title=Sudo_(Русский)&amp;oldid=849022</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 14 October 2025, at 16:22.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Sudo (Русский)</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
