<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dhcpcd (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dhcpcd_Русский rootpage-Dhcpcd_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Установка</div>
		</a>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Запуск" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Запуск</div>
		</a>
		
		<ul id="toc-Запуск-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Настройка" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Настройка</div>
		</a>
		
			<button aria-controls="toc-Настройка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка subsection</span>
			</button>
		
		<ul id="toc-Настройка-sublist" class="vector-toc-list">
			<li id="toc-Статические_маршруты" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D1%82%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Статические маршруты</div>
			</a>
			
			<ul id="toc-Статические_маршруты-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Идентификатор_DHCP-клиента" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D0%B4%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D1%80_DHCP-%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Идентификатор DHCP-клиента</div>
			</a>
			
			<ul id="toc-Идентификатор_DHCP-клиента-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Статический_профиль" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D1%82%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D1%8C">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Статический профиль</div>
			</a>
			
			<ul id="toc-Статический_профиль-sublist" class="vector-toc-list">
				<li id="toc-Резервный_профиль" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D0%B7%D0%B5%D1%80%D0%B2%D0%BD%D1%8B%D0%B9_%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D1%8C">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.1</span>Резервный профиль</div>
			</a>
			
			<ul id="toc-Резервный_профиль-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Хуки" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A5%D1%83%D0%BA%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Хуки</div>
		</a>
		
			<button aria-controls="toc-Хуки-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Хуки subsection</span>
			</button>
		
		<ul id="toc-Хуки-sublist" class="vector-toc-list">
			<li id="toc-10-wpa_supplicant" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#10-wpa_supplicant">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>10-wpa_supplicant</div>
			</a>
			
			<ul id="toc-10-wpa_supplicant-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Советы и рекомендации</div>
		</a>
		
			<button aria-controls="toc-Советы_и_рекомендации-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Советы и рекомендации subsection</span>
			</button>
		
		<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
			<li id="toc-Отключение_ARP-зондирования_для_ускорения_DHCP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_ARP-%D0%B7%D0%BE%D0%BD%D0%B4%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D0%B4%D0%BB%D1%8F_%D1%83%D1%81%D0%BA%D0%BE%D1%80%D0%B5%D0%BD%D0%B8%D1%8F_DHCP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Отключение ARP-зондирования для ускорения DHCP</div>
			</a>
			
			<ul id="toc-Отключение_ARP-зондирования_для_ускорения_DHCP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Удаление_DHCP-аренды" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_DHCP-%D0%B0%D1%80%D0%B5%D0%BD%D0%B4%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Удаление DHCP-аренды</div>
			</a>
			
			<ul id="toc-Удаление_DHCP-аренды-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Разные_IP-адреса_на_машине_с_несколькими_ОС" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B7%D0%BD%D1%8B%D0%B5_IP-%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0_%D0%BD%D0%B0_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D0%B5_%D1%81_%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D0%BC%D0%B8_%D0%9E%D0%A1">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Разные IP-адреса на машине с несколькими ОС</div>
			</a>
			
			<ul id="toc-Разные_IP-адреса_на_машине_с_несколькими_ОС-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-/etc/resolv.conf" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#/etc/resolv.conf">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>/etc/resolv.conf</div>
			</a>
			
			<ul id="toc-/etc/resolv.conf-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Решение проблем</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Client_ID" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Client_ID">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Client ID</div>
			</a>
			
			<ul id="toc-Client_ID-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отказ_от_IP-адреса" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%B0%D0%B7_%D0%BE%D1%82_IP-%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Отказ от IP-адреса</div>
			</a>
			
			<ul id="toc-Отказ_от_IP-адреса-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблемы_с_нестандартными_маршрутизаторами" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_%D0%BD%D0%B5%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%BC%D0%B8_%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%82%D0%BE%D1%80%D0%B0%D0%BC%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Проблемы с нестандартными маршрутизаторами</div>
			</a>
			
			<ul id="toc-Проблемы_с_нестандартными_маршрутизаторами-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-dhcpcd_и_сетевые_интерфейсы_systemd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#dhcpcd_%D0%B8_%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B_systemd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>dhcpcd и сетевые интерфейсы systemd</div>
			</a>
			
			<ul id="toc-dhcpcd_и_сетевые_интерфейсы_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отмена_тайм-аута" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BC%D0%B5%D0%BD%D0%B0_%D1%82%D0%B0%D0%B9%D0%BC-%D0%B0%D1%83%D1%82%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Отмена тайм-аута</div>
			</a>
			
			<ul id="toc-Отмена_тайм-аута-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Известные_проблемы" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Известные проблемы</div>
		</a>
		
			<button aria-controls="toc-Известные_проблемы-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Известные проблемы subsection</span>
			</button>
		
		<ul id="toc-Известные_проблемы-sublist" class="vector-toc-list">
			<li id="toc-Медленная_загрузка_из-за_dhcpcd@.service" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%B5%D0%B4%D0%BB%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8%D0%B7-%D0%B7%D0%B0_dhcpcd@.service">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>Медленная загрузка из-за dhcpcd@.service</div>
			</a>
			
			<ul id="toc-Медленная_загрузка_из-за_dhcpcd@.service-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Смотрите также</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">dhcpcd (Русский)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Dhcpcd.html" title="Dhcpcd – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Dhcpcd.html" title="Dhcpcd – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Dhcpcd" title="Dhcpcd – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Dhcpcd" title="Dhcpcd – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="ru" dir="ltr">
<div class="mw-parser-output">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Network_configuration.html" class="mw-redirect" title="Настройка сети">Настройка сети</a></li>
<li><a href="../ru/Network_configuration/Wireless.html" class="mw-redirect" title="Настройка беспроводной сети">Настройка беспроводной сети</a></li>
<li><a href="../ru/Dhcpd.html" title="Dhcpd (Русский)">dhcpd (Русский)</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a>. Дата последней синхронизации: 10 июля 2021. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Dhcpcd&amp;diff=0&amp;oldid=687452">изменения</a>.</div>
<p><i>dhcpcd</i> — DHCP- и DHCPv6-клиент. В настоящий момент является наиболее полнофункциональным DHCP-клиентом с открытым исходным кодом. Подробнее о возможностях см. <a rel="nofollow" class="external text" href="https://roy.marples.name/projects/dhcpcd">домашнюю страницу</a> проекта.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> DHCP-клиент <i>dhcpcd</i> (DHCP <b>client</b> daemon), разработанный Роем Марплесом (Roy Marples), не следует путать с DHCP-сервером <a href="../ru/Dhcpd.html" title="Dhcpd (Русский)">dhcpd</a> (DHCP <b>(server)</b> daemon) производства Internet Systems Consortium.
</div>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcpcd">dhcpcd</a></span>.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dhcpcd-ui/">dhcpcd-ui</a></span><sup><small>AUR</small></sup> — <a href="../ru/GTK.html" title="GTK (Русский)">GTK</a>-интерфейс для <i>dhcpcd</i>; в качестве альтернативы можно использовать <a href="../en/Wpa_supplicant.html" title="Wpa supplicant">wpa_supplicant</a>. Среди возможностей — диалог настройки и выбор кодовой фразы для беспроводной сети.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dhcpcd-ui-patched/">dhcpcd-ui-patched</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">ссылка недействительна</a>: package not found]</sup> — улучшенная версия <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dhcpcd-ui/">dhcpcd-ui</a></span><sup><small>AUR</small></sup>. AppIndicator вместо GtkStatusIcon, поддержка gtk3, иконка трея для <a href="../ru/KDE.html" title="KDE (Русский)">KDE</a>.
</p>
<h2>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA"></span><span class="mw-headline" id="Запуск">Запуск</span>
</h2>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите/включите">Запустите/включите</a> службу <code>dhcpcd.service</code>. Этот демон работает одновременно для <i>всех</i> сетевых интерфейсов.
</p>
<p>Если необходим демон для одного конкретного интерфейса, <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите/включите">запустите/включите</a> юнит-шаблон <code>dhcpcd@<i>интерфейс</i>.service</code>. Узнать имена имеющихся в системе сетевых интерфейсов можно по рекомендациям в <a href="../ru/Network_configuration.html#%D0%9E%D0%B1%D0%BD%D0%B0%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D1%85_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%BE%D0%B2" class="mw-redirect" title="Настройка сети">Настройка сети#Обнаружение сетевых интерфейсов</a>.
</p>
<p>Рекомендуется использовать юниты-шаблоны; подробнее см. <a href="#dhcpcd_%D0%B8_%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B_systemd">#dhcpcd и сетевые интерфейсы systemd</a>. В результате запуска любой из служб интерфейсу присваивается динамический IP-адрес. Привязка статического адреса рассмотрена в разделе <a href="#%D0%A1%D1%82%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D1%8C">#Статический профиль</a>.
</p>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка">Настройка</span>
</h2>
<p>Основной файл настроек — <code>/etc/dhcpcd.conf</code>. Некоторые полезные опции описаны ниже, подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 5 dhcpcd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.conf.5">dhcpcd.conf(5)</a></span>.
</p>
<h3>
<span id=".D0.A1.D1.82.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D0.BC.D0.B0.D1.80.D1.88.D1.80.D1.83.D1.82.D1.8B"></span><span class="mw-headline" id="Статические_маршруты">Статические маршруты</span>
</h3>
<p>Если необходимо создать статический маршрут на клиентской машине, добавьте его в файл <code>/etc/dhcpcd.exit-hook</code>. Ниже приведён пример хук-скрипта, который добавляет маршрут к VPN-подсети <code>10.11.12.0/24</code> через шлюз на адресе <code>192.168.192.5</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpcd.exit-hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ip route add 10.11.12.0/24 via 192.168.192.5
</pre>
<p>В этом файле можно указать несколько машрутов одновременно.
</p>
<h3>
<span id=".D0.98.D0.B4.D0.B5.D0.BD.D1.82.D0.B8.D1.84.D0.B8.D0.BA.D0.B0.D1.82.D0.BE.D1.80_DHCP-.D0.BA.D0.BB.D0.B8.D0.B5.D0.BD.D1.82.D0.B0"></span><span class="mw-headline" id="Идентификатор_DHCP-клиента">Идентификатор DHCP-клиента</span>
</h3>
<p>Сервер опознаёт DHCP-клиент по одному из следующих идентификаторов:
</p>
<ol>
<li>Имя хоста.</li>
<li>MAC-адрес сетевого интерфейса, с которого устанавливается соединение.</li>
<li>Identity Association ID (IAID), который представляет из себя некую абстракцию для удобства работы с различными настройками и/или интерфейсами в пределах конкретного хоста.</li>
<li>DHCP Unique Identifier (DUID).</li>
</ol>
<p>Более подробное описание можно найти в <a href="https://tools.ietf.org/html/rfc3315#section-4.2" class="extiw" title="rfc:3315">RFC 3315</a>.
</p>
<p>В зависимости от настроек DHCP-сервера те или иные параметры являются (не)обязательными в запросе на аренду адреса.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Стандартных настроек <i>dhcpcd</i> обычно вполне достаточно для корректной работы. Перечисленные выше идентификаторы определяются автоматически, и ручная настройка требуется только в случае каких-либо проблем.</div>
<p>Если <i>dhcpcd</i> с настройками по умолчанию не получает IP-адрес, то можно использовать следующие опции в файле <code>dhcpcd.conf</code>:
</p>
<ul>
<li>
<code>hostname</code> — отправить серверу имя хоста, указанное в файле <code>/etc/hostname</code>.</li>
<li>
<code>clientid</code> — отправить серверу MAC-адрес хоста.</li>
<li>
<code>iaid <i>интерфейс</i></code> — вычислить IAID и отправить серверу. Опция указывается в блоке соответствующего интерфейса (начинается с <code>interface <i>интерфейс</i></code>, см. <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1388376#p1388376">[1]</a>). Применяется редко, чаще используется следующая вариант.</li>
<li>
<code>duid</code> — отправить серверу комбинацию DUID и IAID.</li>
</ul>
<p>Значение DUID задаётся в файле <code>/var/lib/dhcpcd/duid</code>. Чтобы DHCP-аренда завершилась успешно, DUID должен быть уникален в пределах системы и применяться ко всем интерфейсам, в то время как IAID задаётся для каждого сетевого интерфейса по отдельности (см. <a href="https://tools.ietf.org/html/rfc4361#section-6.1" class="extiw" title="rfc:4361">RFC 4361</a>).
</p>
<p>Отдельно необходимо упомянуть о сетях с <a href="https://en.wikipedia.org/wiki/ru:%D0%94%D0%B8%D0%BD%D0%B0%D0%BC%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_DNS" class="extiw" title="wikipedia:ru:Динамический DNS">динамическим DNS</a> — убедитесь, что все три идентификатора являются уникальными. Если DNS-сервер получит два одинаковых DUID (например, в виртуальной машине уникальны имя хоста и MAC, но DUID такой же, как и у основной системы), то второй запрос удалит предыдущий из соответствующей DNS-записи.
</p>
<h3>
<span id=".D0.A1.D1.82.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B9_.D0.BF.D1.80.D0.BE.D1.84.D0.B8.D0.BB.D1.8C"></span><span class="mw-headline" id="Статический_профиль">Статический профиль</span>
</h3>
<p>Смысл параметров объясняется в статье <a href="../ru/Network_configuration.html" class="mw-redirect" title="Настройка сети">Настройка сети</a>. Чаще всего используются: название <a href="../ru/Network_configuration.html#%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B" title="Network configuration (Русский)">сетевого интерфейса</a>, IP-адрес хоста, а также адреса сервера имён и маршрутизатора/шлюза.
</p>
<p>Настройки статического профиля хранятся в файле <code>/etc/dhcpcd.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpcd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">interface eth0
static ip_address=192.168.0.10/24	
static routers=192.168.0.1
static domain_name_servers=192.168.0.1 8.8.8.8</pre>
<p>Возможны и более сложные конфигурации, например, с параметром <code>arping</code>. Подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 5 dhcpcd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.conf.5">dhcpcd.conf(5)</a></span>.
</p>
<h4>
<span id=".D0.A0.D0.B5.D0.B7.D0.B5.D1.80.D0.B2.D0.BD.D1.8B.D0.B9_.D0.BF.D1.80.D0.BE.D1.84.D0.B8.D0.BB.D1.8C"></span><span class="mw-headline" id="Резервный_профиль">Резервный профиль</span>
</h4>
<p>Помимо статического профиля можно создать также запасной профиль на случай, если запрос DHCP-аренды завершится неудачно. Это особенно полезно для <a href="https://en.wikipedia.org/wiki/Headless_computer" class="extiw" title="wikipedia:Headless computer">headless-систем</a>, когда статический профиль выступает в качестве профиля "режима восстановления", чтобы гарантировать доступ к машине в любой ситуации.
</p>
<p>В примере ниже сначала настраивается профиль <code>static_eth0</code> для адреса <code>192.168.1.23</code>, с шлюзом и сервером имён <code>192.168.1.1</code>; затем профиль объявляется резервным для интерфейса <code>eth0</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpcd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># настройки статического профиля
profile static_eth0
static ip_address=192.168.1.23/24
static routers=192.168.1.1
static domain_name_servers=192.168.1.1

# резервный профиль для интерфейса eth0
interface eth0
fallback static_eth0</pre>
<h2>
<span id=".D0.A5.D1.83.D0.BA.D0.B8"></span><span class="mw-headline" id="Хуки">Хуки</span>
</h2>
<p><i>dhcpcd</i> исполняет сценарии из каталога <code>/usr/lib/dhcpcd/dhcpcd-hooks/</code> в лексическом порядке. Подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 5 dhcpcd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.conf.5">dhcpcd.conf(5)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 8 dhcpcd-run-hooks"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd-run-hooks.8">dhcpcd-run-hooks(8)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Сценарий можно отключить параметром <code>nohook</code>.</li>
<li>Параметр <code>env</code> позволяет задать переменную окружения для <b>всех</b> хуков одновременно. Например, чтобы hostname-хук всегда устанавливал имя хоста, добавьте строку <code>env force_hostname=YES</code>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="10-wpa_supplicant">10-wpa_supplicant</span></h3>
<p>Создайте символическую ссылку, чтобы хук заработал. Ссылка гарантирует, что даже после обновления пакета будет использоваться последняя версия хука:
</p>
<pre># ln -s /usr/share/dhcpcd/hooks/10-wpa_supplicant /usr/lib/dhcpcd/dhcpcd-hooks/
</pre>
<p>Хук <code>10-wpa_supplicant</code> автоматически запускает <a href="../en/Wpa_supplicant.html" title="Wpa supplicant">wpa_supplicant</a> для беспроводного интерфейса, если:
</p>
<ul>
<li>отсутствует процесс <i>wpa_supplicant</i>, который уже слушает данный интерфейс.</li>
<li>существует файл настроек для <i>wpa_supplicant</i>. По умолчанию <i>dhcpcd</i> проверяет следующие файлы в указанном порядке:</li>
</ul>
<pre>/etc/wpa_supplicant/wpa_supplicant-<i>интерфейс</i>.conf
/etc/wpa_supplicant/wpa_supplicant.conf
/etc/wpa_supplicant-<i>интерфейс</i>.conf
/etc/wpa_supplicant.conf
</pre>
<p>Можно также добавить свой файл настроек параметром <code>env wpa_supplicant_conf=<i>путь_к_файлу_нестроек</i></code> в файле <code>/etc/dhcpcd.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Учитите, что хук воспользуется первым подходящим файлом из списка и не станет проверять остальные.</div>
<p>Если вы предпочитаете управлять беспроводными соединениями непосредственно через <i>wpa_supplicant</i>, хук может создавать нежелательные помехи в работе. Например, если вы остановите <i>wpa_supplicant</i>, хук может снова включить интерфейс. Кроме того, при использовании <a href="../en/Netctl.html#Special_systemd_units" title="Netctl">netctl-auto</a>, <i>wpa_supplicant</i> запускается автоматически с настройками из файла <code>/run/network/wpa_supplicant_<i>интерфейс</i>.conf</code>, поэтому запускать его ещё раз хуком не нужно — во время загрузки это может привести к ошибкам при парсинге файла <code>/etc/wpa_supplicant/wpa_supplicant.conf</code>, который содержит стандартные настройки по умолчанию.
</p>
<p>Чтобы отключить хук, удалите созданную ранее символическую ссылку или добавьте строку <code>nohook wpa_supplicant</code> в файл <code>dhcpcd.conf</code>.
</p>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Советы_и_рекомендации">Советы и рекомендации</span>
</h2>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_ARP-.D0.B7.D0.BE.D0.BD.D0.B4.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.B4.D0.BB.D1.8F_.D1.83.D1.81.D0.BA.D0.BE.D1.80.D0.B5.D0.BD.D0.B8.D1.8F_DHCP"></span><span class="mw-headline" id="Отключение_ARP-зондирования_для_ускорения_DHCP">Отключение ARP-зондирования для ускорения DHCP</span>
</h3>
<p>В <i>dhcpcd</i> реализованы рекомендации из стандарта DHCP (<a href="https://tools.ietf.org/html/rfc2131#section-2.2" class="extiw" title="rfc:2131">RFC 2131</a>) о проверке факта выдачи IP-адреса посредством ARP. В домашних сетях эта возможность по сути бесполезна, поэтому можно сэкономить 5 секунд для каждого соединения, добавив следующую строку в <code>/etc/dhcpcd.conf</code>:
</p>
<pre>noarp
</pre>
<p>Того же можно добиться опцией <code>--noarp</code> при запуске dhcpcd. ARP-зондирование будет отключено и соединения в DHCP-сетях станут создаваться быстрее.
</p>
<h3>
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_DHCP-.D0.B0.D1.80.D0.B5.D0.BD.D0.B4.D1.8B"></span><span class="mw-headline" id="Удаление_DHCP-аренды">Удаление DHCP-аренды</span>
</h3>
<p>Файл <code>/var/lib/dhcpcd/<i>интерфейс</i>.lease</code> содержит текущую аренду, выданную интерфейсу DHCP-сервером. В случае беспроводного интерфейса файл будет называться <code>/var/lib/dhcpcd/<i>интерфейс</i>-<i>ssid</i>.lease</code>, где <code><i>ssid</i></code> — название беспроводной сети. Время предоставления аренды определяется по параметру файла <code>mtime</code> (время последнего изменения). Информация о последней аренде нужна, чтобы заправшивать один и тот же IP-адрес при каждой аренде — при условии, конечно, что он не был выдан другой машине на момент запроса. Если такое поведение DHCP-клиента вам не нужно, просто удалите данный файл.
</p>
<p>Если после удаления файла DHCP-сервер продолжает выдавать тот же IP-адрес, причина может быть в том, что он настроен опознавать клиентские машины по идентификатору DUID (см. <a href="#%D0%98%D0%B4%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D1%80_DHCP-%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%B0">#Идентификатор DHCP-клиента</a>). Чтобы это проверить, остановите <i>dhcpcd</i> и удалите/переименуйте файл <code>/var/lib/dhcpcd/duid</code>. <i>dhcpcd</i> сгенерирует новый при следующем запуске.
</p>
<p>Имейте в виду, что DUID — <i>постоянный</i> идентификатор машины, он не меняется при перезагрузках и даже в случае смены сетевых интерфейсов. Если при переносе системы на другой компьютер скопировать файл <code>/var/lib/dhcpcd/duid</code>, то DHCP-сервер опознает машину как предыдущую.
</p>
<h3>
<span id=".D0.A0.D0.B0.D0.B7.D0.BD.D1.8B.D0.B5_IP-.D0.B0.D0.B4.D1.80.D0.B5.D1.81.D0.B0_.D0.BD.D0.B0_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D0.B5_.D1.81_.D0.BD.D0.B5.D1.81.D0.BA.D0.BE.D0.BB.D1.8C.D0.BA.D0.B8.D0.BC.D0.B8_.D0.9E.D0.A1"></span><span class="mw-headline" id="Разные_IP-адреса_на_машине_с_несколькими_ОС">Разные IP-адреса на машине с несколькими ОС</span>
</h3>
<p>Если на вашей машине помимо Arch установлена OS X или Windows и вы хотите, чтобы IP-адреса в этих операционных системах были разные, то необходимо в каждой ОС задать отдельный DUID.
</p>
<p>В Windows (после XP) DUID хранится в ключе реестра
</p>
<pre>\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip6\Parameters\Dhcpv6DUID 
</pre>
<p>В OS X он доступен непосредственно в <code>Network\adapter\dhcp preferences panel</code>.
</p>
<p>Если вы используете DHCP-сервер <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a>, разные DUID можно настроить правилами <code>dhcp-host=</code> в настройках.
</p>
<h3>
<span id=".2Fetc.2Fresolv.conf"></span><span class="mw-headline" id="/etc/resolv.conf">/etc/resolv.conf</span>
</h3>
<p>Если работает <a href="../ru/Openresolv.html" class="mw-redirect" title="Resolvconf (Русский)">resolvconf</a>, то вся DNS-информация будет пересылаться ему. В противном случае <i>dhcpcd</i> внесёт некоторые изменения в файл <code>/etc/resolv.conf</code>.
</p>
<p>Чтобы предотвратить перезапись файла <code>/etc/resolv.conf</code>, отключите хук <code>/usr/lib/dhcpcd/dhcpcd-hooks/20-resolv.conf</code>. Для этого добавьте следующую строку в конец файла <code>/etc/dhcpcd.conf</code>:
</p>
<pre>nohook resolv.conf
</pre>
<p>В качестве альтернативы можно создать файл <code>/etc/resolv.conf.head</code> со списком необходимых DNS-серверов. <i>dhcpcd</i> вставит этот файл в начало <code>/etc/resolv.conf</code>.
</p>
<p>Также можно настроить dhcpcd на постоянное использование одних и тех же DNS-серверов. Добавьте следующую строку в <code>/etc/dhcpcd.conf</code>, заменив <code><i>ip_адреса_dns_серверов</i></code> списком разделённых пробелами адресов:
</p>
<pre>static domain_name_servers=<i>ip_адреса_dns_серверов</i>
</pre>
<p>Например, DNS-сервера Google:
</p>
<pre>static domain_name_servers=8.8.8.8 8.8.4.4
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> При работе через <a href="../ru/Openresolv.html" title="Openresolv (Русский)">openresolv</a> можно также настроить DNS-сервера в файле <code>/etc/resolvconf.conf</code>. В этом случае они не будут перезаписаны никакими другими программами, использующими <i>resolvconf</i>.</div>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3><span class="mw-headline" id="Client_ID">Client ID</span></h3>
<p>Если вы работаете в DHCPv4-сети с фильтрацией Client ID по MAC-адресам, возможно, придётся изменить строку
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpcd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Связка DUID + IAID (DHCPv6) по RFC4361. 
duid
</pre>
<p>на
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpcd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Client ID на основе аппаратного адреса интерфейса (DHCPv4).
clientid
</pre>
<p>В противном случае вы не получите аренду, поскольку сервер не распознает <a href="https://en.wikipedia.org/wiki/ru:DHCPv6" class="extiw" title="wikipedia:ru:DHCPv6">DHCPv6-идентификатор</a>. Подробнее см. <a href="https://tools.ietf.org/html/rfc4361" class="extiw" title="rfc:4361">RFC 4361</a>.
</p>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.B0.D0.B7_.D0.BE.D1.82_IP-.D0.B0.D0.B4.D1.80.D0.B5.D1.81.D0.B0"></span><span class="mw-headline" id="Отказ_от_IP-адреса">Отказ от IP-адреса</span>
</h3>
<p>В некоторых ситуациях, например, когда два маршрутизатора соединены через VPN, могут возникнуть проблемы при неправильном присвоении IP-адреса. В этом случае необходимо сначала отказаться от IP-адреса
</p>
<pre># dhcpcd -k
</pre>
<p>после чего запросить новый:
</p>
<pre># dhcpcd
</pre>
<p>Возможно, эти две команды придётся повторить несколько раз.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D0.BD.D0.B5.D1.81.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D1.8B.D0.BC.D0.B8_.D0.BC.D0.B0.D1.80.D1.88.D1.80.D1.83.D1.82.D0.B8.D0.B7.D0.B0.D1.82.D0.BE.D1.80.D0.B0.D0.BC.D0.B8"></span><span class="mw-headline" id="Проблемы_с_нестандартными_маршрутизаторами">Проблемы с нестандартными маршрутизаторами</span>
</h3>
<p>Некоторые (нестандартные) маршрутизаторы не смогут устанавливать соединения, если не закомментирована строка
</p>
<pre>require dhcp_server_identifier
</pre>
<p>в файле <code>/etc/dhcpcd.conf</code>. Если в сети несколько DHCP-серверов (что встречается редко), то указанная проблема не проявляется; подробнее см. <a rel="nofollow" class="external text" href="https://technet.microsoft.com/en-us/library/cc977442.aspx">здесь</a>.
</p>
<h3>
<span id="dhcpcd_.D0.B8_.D1.81.D0.B5.D1.82.D0.B5.D0.B2.D1.8B.D0.B5_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.8B_systemd"></span><span class="mw-headline" id="dhcpcd_и_сетевые_интерфейсы_systemd">dhcpcd и сетевые интерфейсы systemd</span>
</h3>
<p>Удобство службы <code>dhcpcd.service</code> заключается в том, что она <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включается</a> не для конкретного указанного интерфейса, а для всех интерфейсов сразу. С другой стороны, это может создать ситуацию гонок при загрузке, если <i>systemd-udevd</i> попытается присвоить предсказуемые имена интерфейсам:
</p>
<pre>error changing net interface name wlan0 to wlp4s0: Device or resource busy" 
</pre>
<p>Чтобы этого избежать, следует запускать <i>dhcpcd</i> для отдельных интерфейсов как описано в разделе <a href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA">#Запуск</a>. Следует помнить, однако, что юнит-шаблон не поддерживает "горячее подключение" проводных соединений и завершится неудачно, если сетевой кабель не воткнут. Обходное решение описано в разделе <a href="#%D0%9E%D1%82%D0%BC%D0%B5%D0%BD%D0%B0_%D1%82%D0%B0%D0%B9%D0%BC-%D0%B0%D1%83%D1%82%D0%B0">#Отмена тайм-аута</a>.
</p>
<p>Кроме того, можно использовать параметры <code>denyinterfaces</code> и <code>allowinterfaces</code> в файле <span class="plainlinks archwiki-template-man" title="$ man 5 dhcpcd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.conf.5">dhcpcd.conf(5)</a></span>, чтобы запретить dhcpcd выполнять привязку к интерфейсам, имена которых установлены ядром, а не udev:
</p>
<pre>denyinterfaces wlan* eth*
</pre>
<h3>
<span id=".D0.9E.D1.82.D0.BC.D0.B5.D0.BD.D0.B0_.D1.82.D0.B0.D0.B9.D0.BC-.D0.B0.D1.83.D1.82.D0.B0"></span><span class="mw-headline" id="Отмена_тайм-аута">Отмена тайм-аута</span>
</h3>
<p>Если <i>dhcpcd</i> был запущен для отдельного интерфейса и не получил аренду в течение 30 секунд после запуска (например, сервер не работает или кабель не воткнут), он завершится с ошибкой.
</p>
<p>Чтобы <i>dhcpcd</i> ожидал бесконечно при каждом запуске, <a href="../ru/Systemd.html#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Отредактируйте">отредактируйте</a> юнит, установив параметр <code>timeout</code> в значение <code>0</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/dhcpcd@.service.d/timeout.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/bin/dhcpcd -w -q <b>-t 0</b> %I</pre>
<p>Чтобы <i>dhcpcd</i> ожидал аренду вообще всегда, настройте перезапуск юнита после завершения работы:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/dhcpcd@.service.d/dhcpcdrestart.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Restart=always</pre>
<h2>
<span id=".D0.98.D0.B7.D0.B2.D0.B5.D1.81.D1.82.D0.BD.D1.8B.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B"></span><span class="mw-headline" id="Известные_проблемы">Известные проблемы</span>
</h2>
<h3>
<span id=".D0.9C.D0.B5.D0.B4.D0.BB.D0.B5.D0.BD.D0.BD.D0.B0.D1.8F_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.B8.D0.B7-.D0.B7.D0.B0_dhcpcd.40.service"></span><span class="mw-headline" id="Медленная_загрузка_из-за_dhcpcd@.service">Медленная загрузка из-за dhcpcd@.service</span>
</h3>
<p>По умолчанию служба <code>dhcpcd@.service</code> ожидает выдачи IP-адреса перед переходом в фоновый режим (флаг <code>-w</code> команды <i>dhcpcd</i>). Если юнит включён, то загрузка системы может затянуться из-за ожидания IP-адреса. Чтобы это исправить, создайте <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" class="mw-redirect" title="Drop-in файл">drop-in файл</a> юнита следующего содержания:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/dhcpcd@.service.d/no-wait.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/bin/dhcpcd -b -q %I</pre>
<p>См. также <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/49685">FS#49685</a>.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 dhcpcd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.8">dhcpcd(8)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 5 dhcpcd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.conf.5">dhcpcd.conf(5)</a></span></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:DHCP.html" title="Category:DHCP (Русский)">DHCP (Русский)</a></li>
<li><a href="../ru/Category:Commands.html" title="Category:Commands (Русский)">Commands (Русский)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dhcpcd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=801571">https://wiki.archlinux.org/index.php?title=Dhcpcd_(Русский)&amp;oldid=801571</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 28 February 2024, at 21:33.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
