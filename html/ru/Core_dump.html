<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Core dump (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Core_dump_Русский rootpage-Core_dump_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Отключение_автоматических_дампов_памяти" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D1%85_%D0%B4%D0%B0%D0%BC%D0%BF%D0%BE%D0%B2_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Отключение автоматических дампов памяти</div>
		</a>
		
			<button aria-controls="toc-Отключение_автоматических_дампов_памяти-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Отключение автоматических дампов памяти subsection</span>
			</button>
		
		<ul id="toc-Отключение_автоматических_дампов_памяти-sublist" class="vector-toc-list">
			<li id="toc-Используя_sysctl" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_sysctl">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Используя sysctl</div>
			</a>
			
			<ul id="toc-Используя_sysctl-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Используя_systemd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_systemd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Используя systemd</div>
			</a>
			
			<ul id="toc-Используя_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Используя_PAM_limits" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_PAM_limits">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Используя PAM limits</div>
			</a>
			
			<ul id="toc-Используя_PAM_limits-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Используя_ulimit" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_ulimit">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.4</span>Используя ulimit</div>
			</a>
			
			<ul id="toc-Используя_ulimit-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Создание_дампа_памяти" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BC%D0%BF%D0%B0_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Создание дампа памяти</div>
		</a>
		
			<button aria-controls="toc-Создание_дампа_памяти-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Создание дампа памяти subsection</span>
			</button>
		
		<ul id="toc-Создание_дампа_памяти-sublist" class="vector-toc-list">
			<li id="toc-Куда_они_попадают?" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D1%83%D0%B4%D0%B0_%D0%BE%D0%BD%D0%B8_%D0%BF%D0%BE%D0%BF%D0%B0%D0%B4%D0%B0%D1%8E%D1%82?">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Куда они попадают?</div>
			</a>
			
			<ul id="toc-Куда_они_попадают?-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Изучение_дампа_памяти" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%98%D0%B7%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BC%D0%BF%D0%B0_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Изучение дампа памяти</div>
		</a>
		
		<ul id="toc-Изучение_дампа_памяти-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Удаление_дампов_памяти" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BC%D0%BF%D0%BE%D0%B2_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Удаление дампов памяти</div>
		</a>
		
		<ul id="toc-Удаление_дампов_памяти-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Смотрите также</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Core dump (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Core_dump.html" title="Core dump – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%82%B3%E3%82%A2%E3%83%80%E3%83%B3%E3%83%97" title="コアダンプ – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Core_dump.html" title="Core dump – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/%E6%A0%B8%E5%BF%83%E8%BD%AC%E5%82%A8" title="核心转储 – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Core_dump.html" title="Core dump">Core dump</a>. Дата последней синхронизации: 15 февраля 2022. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Core_dump&amp;diff=0&amp;oldid=715027">изменения</a>.</div>
<p><a href="https://en.wikipedia.org/wiki/ru:%D0%94%D0%B0%D0%BC%D0%BF_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8" class="extiw" title="wikipedia:ru:Дамп памяти">Дамп памяти</a> (core dump) — это файл, в который записывается адресное пространство (память) процесса при его нештатном завершении. Дампы ядра могут создаваться по требованию (например, <a href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BC%D0%BF%D0%B0_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">отладчиком</a>) или автоматически при завершении процесса. Дампы памяти создаются ядром при сбое программы и могут быть переданы вспомогательной программе (например, <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-coredump"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-coredump.8">systemd-coredump(8)</a></span>) для дальнейшей обработки. Дамп памяти обычно не используется обычным пользователем, но может быть передан разработчикам по их запросу, которым будет очень полезно иметь снимок состояния программы на момент сбоя, особенно если сбой трудно воспроизвести.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B0.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D1.85_.D0.B4.D0.B0.D0.BC.D0.BF.D0.BE.D0.B2_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Отключение_автоматических_дампов_памяти">Отключение автоматических дампов памяти</span>
</h2>
<p>Пользователи могут захотеть отключить автоматические дампы памяти по нескольким причинам:
</p>
<ul>
<li>Производительность: создание дампа для процессов, занимающих много памяти, может привести к трате системных ресурсов и задержке очистки памяти.</li>
<li>Дисковое пространство: дампы процессов, занимающих много памяти, могут занимать место на диске, равное, а то и большее, чем объём памяти процесса, если их не сжимать.</li>
<li>Безопасность: хотя дампы обычно может читать только root, они могут содержать конфиденциальные данные (например, пароли или криптографические ключи), которые записываются на диск после сбоя.</li>
</ul>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_sysctl"></span><span class="mw-headline" id="Используя_sysctl">Используя sysctl</span>
</h3>
<p>Можно использовать <a href="../en/Sysctl.html" title="Sysctl">sysctl</a>, чтобы изменить <code>kernel.core_pattern</code> для отключения дампов. Создайте файл:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/50-coredump.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.core_pattern=/dev/null</pre>
<p>Для немедленного применения изменений используйте команду <code>sysctl</code>:
</p>
<pre># sysctl -p /etc/sysctl.d/50-coredump.conf
</pre>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_systemd"></span><span class="mw-headline" id="Используя_systemd">Используя systemd</span>
</h3>
<p>Поведение <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a> по умолчанию определено в файле <code>/usr/lib/sysctl.d/50-coredump.conf</code>, который прописывает <code>kernel.core_pattern</code> для вызова <code>systemd-coredump</code>. Он сохраняет дампы ядра для всех процессов в <code>/var/lib/systemd/coredump</code>. Поведение <code>systemd-coredump</code> можно переопределить, создав в <code>/etc/systemd/coredump.conf.d/</code> файл (<span class="plainlinks archwiki-template-man" title="$ man 5 coredump.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/coredump.conf.5#DESCRIPTION">coredump.conf(5) § DESCRIPTION</a></span>,, <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=214207">[1]</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/coredump.conf.d/custom.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Coredump]
Storage=none</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Не забудьте прописать имя секции <code>[Coredump]</code>, иначе опция будет проигнорирована.</div>
<p>Затем <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезагрузите">перезагрузите</a> настройки systemd.
</p>
<p>Одного этого метода обычно достаточно для отключения записи дампов, если в системе нет других программ, включающих автоматические дампы, но дамп памяти всё равно генерируется в памяти и systemd-coredump всё равно запускается.
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_PAM_limits"></span><span class="mw-headline" id="Используя_PAM_limits">Используя PAM limits</span>
</h3>
<p>Максимальный размер дампа памяти для пользователей, вошедших в систему через <a href="../en/PAM.html" title="PAM">PAM</a>, задаётся в файле <a href="../en/Limits.conf.html" title="Limits.conf">limits.conf</a>. Установка нулевого значения полностью отключает дампы памяти. <a rel="nofollow" class="external autonumber" href="https://www.cyberciti.biz/faq/linux-disable-core-dumps/">[2]</a>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/security/limits.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">* hard core 0</pre>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_ulimit"></span><span class="mw-headline" id="Используя_ulimit">Используя ulimit</span>
</h3>
<p><a href="../ru/Command-line_shell.html" title="Command-line shell (Русский)">Командные оболочки</a> вроде <i>bash</i> и <i>zsh</i> имеют встроенную команду <i>ulimit</i>, которую можно использовать для просмотра или изменения ограничений на ресурсы оболочки и запускаемых ею процессов. Подробнее смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 bash"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bash.1#SHELL_BUILTIN_COMMANDS">bash(1) § SHELL BUILTIN COMMANDS</a></span> или <span class="plainlinks archwiki-template-man" title="$ man 1 zshbuiltins"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshbuiltins.1">zshbuiltins(1)</a></span>.
</p>
<p>Отключение дампов памяти в текущей командной оболочке:
</p>
<pre>$ ulimit -c 0
</pre>
<h2>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B0.D0.BC.D0.BF.D0.B0_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Создание_дампа_памяти">Создание дампа памяти</span>
</h2>
<p>Чтобы сгенерировать дамп памяти произвольного процесса, сначала <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gdb">gdb</a></span>. Затем найдите PID запущенного процесса, например, с помощью <i>pgrep</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pgrep -f <i>firefox</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">2071 firefox
</pre>
<p>Подключитесь отладчиком к этому процессу:
</p>
<pre>$ gdb -p 2071
</pre>
<p>И затем в отладчике выполните:
</p>
<pre>(gdb) generate-core-file
Saved corefile core.2071
(gdb) quit
</pre>
<p>Теперь у вас есть дамп памяти в файле <code>core.2071</code>.
</p>
<h3>
<span id=".D0.9A.D1.83.D0.B4.D0.B0_.D0.BE.D0.BD.D0.B8_.D0.BF.D0.BE.D0.BF.D0.B0.D0.B4.D0.B0.D1.8E.D1.82.3F"></span><span class="mw-headline" id="Куда_они_попадают?">Куда они попадают?</span>
</h3>
<p>sysctl <code>kernel.core_pattern</code> определяет, куда отправляются автоматические дампы памяти. По умолчанию их принимает <i>systemd-coredump</i>, который настраивается через файл <code>/etc/systemd/coredump.conf</code>. По умолчанию он записывает дампы в <code>/var/lib/systemd/coredump</code> (опция <code>Storage=external</code>), сжимая их с помощью zstd (опция <code>Compress=yes</code>). Кроме того, можно настроить различные ограничения на размер хранилища.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Значение по умолчанию для <code>kernel.core_pattern</code> задаётся в файле <code>/usr/lib/sysctl.d/50-coredump.conf</code>. Этот файл может быть замаскирован или переопределён для использования другого значения в соответствии с обычными правилами <span class="plainlinks archwiki-template-man" title="$ man 5 sysctl.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sysctl.d.5">sysctl.d(5)</a></span>.</div>
<p>Чтобы получить дамп памяти из журнала, смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 coredumpctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/coredumpctl.1">coredumpctl(1)</a></span>.
</p>
<h2>
<span id=".D0.98.D0.B7.D1.83.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B0.D0.BC.D0.BF.D0.B0_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Изучение_дампа_памяти">Изучение дампа памяти</span>
</h2>
<p>Команда <i>coredumpctl</i> покажет список сохранённых дампов, среди которых можно найти нужный:
</p>
<pre># coredumpctl list
</pre>
<p>Для поиска нужного дампа можно использовать PID, имя исполняемого файла, путь к исполняемому файлу или предикат <a href="../ru/Systemd/Journal.html" title="Systemd (Русский)/Journal (Русский)">journalctl</a> (подробнее: <span class="plainlinks archwiki-template-man" title="$ man 1 coredumpctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/coredumpctl.1">coredumpctl(1)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 1 journalctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/journalctl.1">journalctl(1)</a></span>). Просмотр подробностей о дампах ядра:
</p>
<pre># coredumpctl info <i>соответствие</i>
</pre>
<p>Обратите внимание на строку "Signal", она поможет определить причину сбоя. Для более глубокого анализа вы можете изучить backtrace с помощью <i>gdb</i>:
</p>
<pre># coredumpctl gdb <i>соответствие</i>
</pre>
<p>После запуска <i>gdb</i> можно использовать команду <code>bt</code> для получения backtrace:
</p>
<pre>(gdb) bt
</pre>
<p>Если отладочные символы нужны, но не найдены, можно попробовать получить их, как описано в статье <a href="../ru/Debugging/Getting_traces.html" class="mw-redirect" title="Отладка/Трассировка">Отладка/Трассировка</a>.
</p>
<h2>
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B0.D0.BC.D0.BF.D0.BE.D0.B2_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Удаление_дампов_памяти">Удаление дампов памяти</span>
</h2>
<p>Файлы дампов памяти, хранящиеся в <code>/var/lib/systemd/coredump/</code>, будут автоматически очищаться командой <code>systemd-tmpfiles --clean</code>, которая запускается ежедневно с помощью <code>systemd-tmpfiles-clean.timer</code>. Дампы памяти настроены на хранение не менее 3 дней, смотрите <code>systemd-tmpfiles --cat-config</code>.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://lcamtuf.coredump.cx/afl/">american fuzzy lop</a> - Инструмент для автоматизированного тестирования ядра и программ</li>
<li>
<a rel="nofollow" class="external text" href="https://lwn.net/Articles/637151/">Filesystem fuzzing</a> - Статья LWN о тестировании файловых систем на наличие ошибок</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:Development.html" title="Category:Development (Русский)">Development (Русский)</a></li>
<li><a href="../ru/Category:Security.html" title="Category:Security (Русский)">Security (Русский)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Core_dump_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=826061">https://wiki.archlinux.org/index.php?title=Core_dump_(Русский)&amp;oldid=826061</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 28 January 2025, at 06:48.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
