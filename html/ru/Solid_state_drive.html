<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Solid state drive (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Solid_state_drive_Русский rootpage-Solid_state_drive_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Использование" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Использование</div>
		</a>
		
			<button aria-controls="toc-Использование-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Использование subsection</span>
			</button>
		
		<ul id="toc-Использование-sublist" class="vector-toc-list">
			<li id="toc-TRIM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#TRIM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>TRIM</div>
			</a>
			
			<ul id="toc-TRIM-sublist" class="vector-toc-list">
				<li id="toc-Периодический_TRIM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B8%D0%BE%D0%B4%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_TRIM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>Периодический TRIM</div>
			</a>
			
			<ul id="toc-Периодический_TRIM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Непрерывный_TRIM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5%D0%BF%D1%80%D0%B5%D1%80%D1%8B%D0%B2%D0%BD%D1%8B%D0%B9_TRIM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>Непрерывный TRIM</div>
			</a>
			
			<ul id="toc-Непрерывный_TRIM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Выполнение_TRIM_на_устройстве_целиком" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_TRIM_%D0%BD%D0%B0_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B5_%D1%86%D0%B5%D0%BB%D0%B8%D0%BA%D0%BE%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.3</span>Выполнение TRIM на устройстве целиком</div>
			</a>
			
			<ul id="toc-Выполнение_TRIM_на_устройстве_целиком-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-LVM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#LVM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.4</span>LVM</div>
			</a>
			
			<ul id="toc-LVM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-dm-crypt" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#dm-crypt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.5</span>dm-crypt</div>
			</a>
			
			<ul id="toc-dm-crypt-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Максимизация_производительности" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%B0%D0%BA%D1%81%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Максимизация производительности</div>
			</a>
			
			<ul id="toc-Максимизация_производительности-sublist" class="vector-toc-list">
				<li id="toc-Размер_сектора" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B7%D0%BC%D0%B5%D1%80_%D1%81%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.1</span>Размер сектора</div>
			</a>
			
			<ul id="toc-Размер_сектора-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Очистка_ячеек_памяти_SSD" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D1%87%D0%B8%D1%81%D1%82%D0%BA%D0%B0_%D1%8F%D1%87%D0%B5%D0%B5%D0%BA_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8_SSD">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.2</span>Очистка ячеек памяти SSD</div>
			</a>
			
			<ul id="toc-Очистка_ячеек_памяти_SSD-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Безопасность" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%91%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Безопасность</div>
			</a>
			
			<ul id="toc-Безопасность-sublist" class="vector-toc-list">
				<li id='toc-Hdparm_показывает_состояние_"frozen"' class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href='#Hdparm_%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D0%B5%D1%82_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_"frozen"'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.1</span>Hdparm показывает состояние "frozen"</div>
			</a>
			
			<ul id='toc-Hdparm_показывает_состояние_"frozen"-sublist' class="vector-toc-list">
				<li id='toc-Перевод_SSD_в_состояние_"frozen"_после_возвращения_из_ждущего_режима' class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href='#%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4_SSD_%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_"frozen"_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%B2%D0%BE%D0%B7%D0%B2%D1%80%D0%B0%D1%89%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B8%D0%B7_%D0%B6%D0%B4%D1%83%D1%89%D0%B5%D0%B3%D0%BE_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.1.1</span>Перевод SSD в состояние "frozen" после возвращения из ждущего режима</div>
			</a>
			
			<ul id='toc-Перевод_SSD_в_состояние_"frozen"_после_возвращения_из_ждущего_режима-sublist' class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Аппаратное_шифрование" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D0%BF%D0%BF%D0%B0%D1%80%D0%B0%D1%82%D0%BD%D0%BE%D0%B5_%D1%88%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.2</span>Аппаратное шифрование</div>
			</a>
			
			<ul id="toc-Аппаратное_шифрование-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Решение проблем</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Решение_ошибок_NCQ" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA_NCQ">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Решение ошибок NCQ</div>
			</a>
			
			<ul id="toc-Решение_ошибок_NCQ-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Решение_ошибок,_связанных_с_управлением_питанием_SATA" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA,_%D1%81%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D1%81_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_SATA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Решение ошибок, связанных с управлением питанием SATA</div>
			</a>
			
			<ul id="toc-Решение_ошибок,_связанных_с_управлением_питанием_SATA-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Внешний_SSD_с_поддержкой_TRIM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%BD%D0%B5%D1%88%D0%BD%D0%B8%D0%B9_SSD_%D1%81_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%BE%D0%B9_TRIM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Внешний SSD с поддержкой TRIM</div>
			</a>
			
			<ul id="toc-Внешний_SSD_с_поддержкой_TRIM-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Прошивка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Прошивка</div>
		</a>
		
			<button aria-controls="toc-Прошивка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Прошивка subsection</span>
			</button>
		
		<ul id="toc-Прошивка-sublist" class="vector-toc-list">
			<li id="toc-ADATA" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ADATA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>ADATA</div>
			</a>
			
			<ul id="toc-ADATA-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Crucial" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Crucial">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Crucial</div>
			</a>
			
			<ul id="toc-Crucial-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Intel" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Intel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Intel</div>
			</a>
			
			<ul id="toc-Intel-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Kingston" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Kingston">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Kingston</div>
			</a>
			
			<ul id="toc-Kingston-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mushkin" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mushkin">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Mushkin</div>
			</a>
			
			<ul id="toc-Mushkin-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OCZ" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OCZ">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>OCZ</div>
			</a>
			
			<ul id="toc-OCZ-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Samsung" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Samsung">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Samsung</div>
			</a>
			
			<ul id="toc-Samsung-sublist" class="vector-toc-list">
				<li id="toc-Обновление_под_Linux" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%B4_Linux">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7.1</span>Обновление под Linux</div>
			</a>
			
			<ul id="toc-Обновление_под_Linux-sublist" class="vector-toc-list">
				<li id="toc-Старые_SSD" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A1%D1%82%D0%B0%D1%80%D1%8B%D0%B5_SSD">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7.1.1</span>Старые SSD</div>
			</a>
			
			<ul id="toc-Старые_SSD-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-SanDisk" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SanDisk">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>SanDisk</div>
			</a>
			
			<ul id="toc-SanDisk-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Смотрите также</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Solid state drive (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Solid_state_drive.html" title="Solid state drive – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Solid_State_drive.html" title="Solid State drive – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E3%82%BD%E3%83%AA%E3%83%83%E3%83%89%E3%82%B9%E3%83%86%E3%83%BC%E3%83%88%E3%83%89%E3%83%A9%E3%82%A4%E3%83%96" title="ソリッドステートドライブ – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Solid_state_drive" title="Solid state drive – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Solid_state_drive.html" title="Solid state drive">Solid state drive</a>. Дата последней синхронизации: 15 октября 2022. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Solid_state_drive&amp;diff=0&amp;oldid=743048">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../en/Solid_state_drive/NVMe.html" title="Solid state drive/NVMe">Solid state drive/NVMe</a></li>
<li><a href="../ru/Solid_state_drive/Memory_cell_clearing.html" class="mw-redirect" title="Очистка ячеек памяти SSD">Очистка ячеек памяти SSD</a></li>
<li><a href="../ru/Benchmarking.html" title="Benchmarking (Русский)">Benchmarking (Русский)</a></li>
<li><a href="../ru/Improving_performance.html#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F" class="mw-redirect" title="Увеличение производительности">Увеличение производительности#Устройства хранения</a></li>
</ul>
</div>
<p>В этой статье рассматриваются особенности работы с <a href="https://en.wikipedia.org/wiki/ru:%D0%A2%D0%B2%D0%B5%D1%80%D0%B4%D0%BE%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D0%BD%D0%B0%D0%BA%D0%BE%D0%BF%D0%B8%D1%82%D0%B5%D0%BB%D1%8C" class="extiw" title="wikipedia:ru:Твердотельный накопитель">твердотельными накопителями</a> (SSD) и другими устройствами хранения данных на основе флэш-памяти. Если вы хотите разбить SSD на разделы для конкретной цели, возможно, стоит изучить <a href="https://en.wikipedia.org/wiki/List_of_file_systems#File_systems_optimized_for_flash_memory.2C_solid_state_media" class="extiw" title="wikipedia:List of file systems">список файловых систем, оптимизированных для флеш-памяти</a>. Для обычного использования можно использовать любую предпочитаемую вами <a href="../ru/File_systems.html" title="File systems (Русский)">файловую систему</a>.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Использование">Использование</span>
</h2>
<h3><span class="mw-headline" id="TRIM">TRIM</span></h3>
<p>Большинство твердотельных накопителей поддерживает <a href="https://en.wikipedia.org/wiki/ru:Trim_(%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0_%D0%B4%D0%BB%D1%8F_%D0%BD%D0%B0%D0%BA%D0%BE%D0%BF%D0%B8%D1%82%D0%B5%D0%BB%D0%B5%D0%B9)" class="extiw" title="wikipedia:ru:Trim (команда для накопителей)">команду ATA_TRIM</a> для обеспечения стабильной долгосрочной производительности и выравнивания износа. <a rel="nofollow" class="external text" href="https://www.techspot.com/review/737-ocz-vector-150-ssd/page9.html">Статья на TechSpot</a> приводит сравнение производительности до и после заполнения SSD данными.
</p>
<p>Начиная с версии 3.8 ядра Linux, поддержка TRIM постоянно добавлялась для различных <a href="../ru/File_systems.html" title="File systems (Русский)">файловых систем</a>. Ориентировочный обзор приведён в следующей таблице:
</p>
<table class="wikitable sortable">
<tbody>
<tr>
<th>File system</th>
<th>Непрерывный TRIM <br> (опция <code>discard</code>)</th>
<th>Периодический TRIM <br> (<i>fstrim</i>)</th>
<th>Ссылки<br> и примечания
</th>
</tr>
<tr>
<td><a href="../ru/Btrfs.html" title="Btrfs (Русский)">Btrfs</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>
</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/ru:exFAT" class="extiw" title="wikipedia:ru:exFAT">exFAT</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>
<i>fstrim</i> поддерживается с версии ядра 5.13, <a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit?id=654762df2ec7d61b05acc788afbffaba52d658fe">[1]</a>
</td>
</tr>
<tr>
<td><a href="../en/Ext3.html" class="mw-redirect" title="Ext3 (Русский)">ext3</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>
</td>
</tr>
<tr>
<td><a href="../en/Ext4.html" class="mw-redirect" title="Ext4 (Русский)">ext4</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>"discard, nodiscard(*)" в <a rel="nofollow" class="external autonumber" href="https://docs.kernel.org/admin-guide/ext4.html?highlight=discard,%20nodiscard(*)#options">[2]</a>
</td>
</tr>
<tr>
<td><a href="../en/F2FS.html" class="mw-redirect" title="F2FS (Русский)">F2FS</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>
</td>
</tr>
<tr>
<td><a href="../en/JFS.html" class="mw-redirect" title="JFS (Русский)">JFS</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>
<a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/scan.php?page=news_item&amp;px=MTE5ODY">[3]</a>
</td>
</tr>
<tr>
<td><a href="https://en.wikipedia.org/wiki/ru:NILFS" class="extiw" title="wikipedia:ru:NILFS">NILFS2</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>
</td>
</tr>
<tr>
<td><a href="../ru/NTFS-3G.html" title="NTFS-3G (Русский)">NTFS-3G</a></td>
<td data-sort-value="1" style="background: #faa; color: inherit; vertical-align: middle; text-align: center;">Нет</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>с версии 2015.3.14, <a rel="nofollow" class="external autonumber" href="https://www.mail-archive.com/ntfs-3g-devel@lists.sourceforge.net/msg01093.html">[4]</a>
</td>
</tr>
<tr>
<td><a href="../ru/FAT.html" title="FAT (Русский)">VFAT</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>
<i>fstrim</i> поддерживается с версии ядра 4.19, <a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=f663b5b38fffeb31841f8bfaf0ef87a445b0ffee">[5]</a>
</td>
</tr>
<tr>
<td><a href="../ru/XFS.html" title="XFS (Русский)">XFS</a></td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td data-sort-value="5" style="background: #afa; color: inherit; vertical-align: middle; text-align: center;">Да</td>
<td>
<a rel="nofollow" class="external autonumber" href="https://xfs.org/index.php/FITRIM/discard">[6]</a>
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Убедитесь, что ваш SSD поддерживает TRIM, прежде чем пытаться использовать его, иначе возможна потеря данных!</div>
<p>Проверить поддержку TRIM можно с помощью команды:
</p>
<pre>$ lsblk --discard
</pre>
<p>Проверьте значения столбцов DISC-GRAN (discard granularity) и DISC-MAX (discard max bytes). Ненулевые значения означают поддержку TRIM.
</p>
<p>Другой вариант — <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установить">установить</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hdparm">hdparm</a></span> и выполнить команду:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># hdparm -I /dev/sda | grep TRIM</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">        *    Data Set Management TRIM supported (limit 1 block)
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Спецификация определяет различные типы поддержки TRIM. Следовательно, вывод может отличаться в зависимости от того, что поддерживает диск. Смотрите <a href="https://en.wikipedia.org/wiki/Trim_(computing)#ATA" class="extiw" title="wikipedia:Trim (computing)">Wikipedia:Trim (computing)#ATA</a> для более подробной информации.</div>
<h4>
<span id=".D0.9F.D0.B5.D1.80.D0.B8.D0.BE.D0.B4.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B9_TRIM"></span><span class="mw-headline" id="Периодический_TRIM">Периодический TRIM</span>
</h4>
<p>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span> предоставляет systemd-службу <code>fstrim.service</code>, а также таймер <code>fstrim.timer</code>, который вы можете <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включить">включить</a>. Он настроен на еженедельное включение службы. Служба выполняет <span class="plainlinks archwiki-template-man" title="$ man 8 fstrim"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/fstrim.8">fstrim(8)</a></span> на всех смонтированных файловых системах на устройствах, поддерживающих операцию <i>discard</i>.
</p>
<p>Таймер полагается на метку времени <code>/var/lib/systemd/timers/stamp-fstrim.timer</code> (которую он создаст при первом запуске), чтобы проверять, прошла ли неделя с момента его последнего запуска. Поэтому нет необходимости беспокоиться о слишком частых вызовах, как это бывает с <i>anacron</i>.
</p>
<p>Посмотреть статус юнитов можно в <a href="../ru/Systemd/Journal.html" title="Systemd (Русский)/Journal (Русский)">журнале</a>. Чтобы изменить периодичность таймера или выполнения команд, <a href="../ru/Systemd.html#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Отредактируйте">отредактируйте</a> файлы юнитов.
</p>
<h4>
<span id=".D0.9D.D0.B5.D0.BF.D1.80.D0.B5.D1.80.D1.8B.D0.B2.D0.BD.D1.8B.D0.B9_TRIM"></span><span class="mw-headline" id="Непрерывный_TRIM">Непрерывный TRIM</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Нет необходимости включать непрерывный TRIM, если вы периодически запускаете <code>fstrim</code>. Если вы хотите использовать TRIM, используйте либо периодический TRIM, либо непрерывный TRIM.</div>
<p>Вместо того чтобы выдавать команды TRIM время от времени (по умолчанию раз в неделю при использовании <code>fstrim.timer</code>), можно также выдавать команды TRIM при каждом удалении файлов. Этот вариант известен как непрерывный TRIM.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> До <a href="https://en.wikipedia.org/wiki/ru:SATA#SATA_Revision_3.1" class="extiw" title="wikipedia:ru:SATA">SATA 3.1</a> все команды TRIM выполнялись без очереди, поэтому непрерывный TRIM приводил к частым зависаниям системы. В этом случае <a href="#%D0%9F%D0%B5%D1%80%D0%B8%D0%BE%D0%B4%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_TRIM">#Периодический TRIM</a> является более хорошей альтернативой. Аналогичная проблема существует и для ряда устройств (смотрите <code>ata_device_blacklist</code> в <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/ata/libata-core.c">исходном коде Linux</a>), для которых выполнение команд TRIM через очередь было запрещено из-за повреждения данных. На таких устройствах система может быть вынуждена отправлять на SSD команды TRIM без использования очереди. Смотрите <a href="https://en.wikipedia.org/wiki/Trim_(computing)#Disadvantages" class="extiw" title="wikipedia:Trim (computing)">Wikipedia:Trim (computing)#Disadvantages</a> для более подробной информации.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Continuous TRIM не является наиболее предпочтительным способом подачи команд TRIM в сообществе Linux. Например, Ubuntu включает периодический TRIM по умолчанию <a rel="nofollow" class="external autonumber" href="https://askubuntu.com/questions/1034169/is-trim-enabled-on-my-ubuntu-18-04-installation">[7]</a>, Debian не рекомендует использовать <a href="https://wiki.debian.org/SSDOptimization#Mounting_SSD_filesystems" class="extiw" title="debian:SSDOptimization">непрерывный TRIM</a>, а Red Hat рекомендует использовать периодический TRIM вместо непрерывного TRIM, если это возможно <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20160917183831/https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Storage_Administration_Guide/ch02s04.html">[8]</a>.</div>
<p>Использование опции монтирования <code>discard</code> в <code>/etc/fstab</code> включает непрерывный TRIM в операциях с устройствами:
</p>
<pre>/dev/sda1  /           ext4  defaults,<b>discard</b>   0  1
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Использование опции discard в <code>/etc/fstab</code> не работает для раздела <code>/</code> с файловой системой XFS. Согласно <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=143254">этой теме</a>, она должна быть установлена с помощью <a href="../ru/Kernel_parameters.html" title="Kernel parameters (Русский)">параметра ядра</a> <code>rootflags=discard</code>.</div>
<p>В файловой системе ext4 флаг <code>discard</code> также может быть установлен как <a href="../ru/Access_Control_Lists.html#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_ACL" title="Access Control Lists (Русский)">опция монтирования по умолчанию</a> с помощью <i>tune2fs</i>:
</p>
<pre># tune2fs -o discard /dev/sd<b>XY</b>
</pre>
<p>Использование опций монтирования по умолчанию вместо записи в <code>/etc/fstab</code> особенно полезно для внешних дисков, поскольку такой раздел будет монтироваться с опциями по умолчанию и на других машинах. Таким образом, нет необходимости редактировать <code>/etc/fstab</code> на каждой машине.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Опции монтирования, которые используются по умолчанию, не видны в <code>/proc/mounts</code>.</div>
<h4>
<span id=".D0.92.D1.8B.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_TRIM_.D0.BD.D0.B0_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B5_.D1.86.D0.B5.D0.BB.D0.B8.D0.BA.D0.BE.D0.BC"></span><span class="mw-headline" id="Выполнение_TRIM_на_устройстве_целиком">Выполнение TRIM на устройстве целиком</span>
</h4>
<p>Если вы хотите очистить сразу весь SSD, например, перед новой установкой или продажей диска, можно использовать команду <a href="../ru/Solid_state_drive/Memory_cell_clearing.html#%D0%9E%D0%B1%D1%89%D0%B8%D0%B9_%D0%BC%D0%B5%D1%82%D0%BE%D0%B4_%D1%81_blkdiscard" title="Solid state drive (Русский)/Memory cell clearing (Русский)">blkdiscard</a>.
</p>
<h4><span class="mw-headline" id="LVM">LVM</span></h4>
<p>Запросы TRIM, передаваемые из файловой системы на логический том, автоматически передаются на физические томы. Дополнительная настройка не требуется.
</p>
<p>По умолчанию ни одна операция <a href="../en/LVM.html" class="mw-redirect" title="LVM (Русский)">LVM</a> (<i>lvremove</i>, <i>lvreduce</i> и все остальные) не отправляет запросы TRIM на физические томы. Это сделано для того, чтобы можно было восстановить предыдущую конфигурацию группы томов с помощью <span class="plainlinks archwiki-template-man" title="$ man 8 vgcfgrestore"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vgcfgrestore.8">vgcfgrestore(8)</a></span>. Параметр <code>issue_discards</code> в <code>/etc/lvm/lvm.conf</code> управляет тем, посылаются ли запросы TRIM на физические тома, лежащие в основе логического тома, когда логический том больше не использует пространство физических томов.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Внимательно прочитайте комментарий в <code>/etc/lvm/lvm.conf</code> перед изменением параметра <code>issue_discards</code>. Он никак не влияет на запросы TRIM, которые передаются от файловой системы к диску (например, удаление файлов внутри файловой системы), и не влияет на управление пространством в тонком пуле.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Включение <code>issue_discards</code> лишит возможности восстановления метаданных группы томов с помощью <i>vgcfgrestore</i>. Не будет никаких вариантов восстановления в случае ошибочно выполненной команды LVM.</div>
<h4><span class="mw-headline" id="dm-crypt">dm-crypt</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Опция discard позволяет передавать запросы TRIM на зашифрованное блочное устройство. Это может улучшить или не улучшить производительность SSD <a rel="nofollow" class="external autonumber" href="https://lore.kernel.org/linux-raid/508FA2C6.2050800@hesbynett.no/">[9]</a>, но имеет последствия для безопасности. Дополнительную информацию см. ниже:
<ul>
<li><a href="https://wiki.debian.org/SSDOptimization#Mounting_SSD_filesystems" class="extiw" title="debian:SSDOptimization">Debian:SSDOptimization#Mounting SSD filesystems</a></li>
<li><a href="../en/Dm-crypt/Specialties.html#Discard/TRIM_support_for_solid_state_drives_(SSD)" title="Dm-crypt/Specialties">dm-crypt/Specialties#Discard/TRIM support for solid state drives (SSD)</a></li>
</ul>
</div>
<p>Для некорневых файловых систем добавьте опцию <code>discard</code> в файле <code>/etc/crypttab</code> для зашифрованных блочных устройств, расположенных на SSD (смотрите <a href="../en/Dm-crypt/System_configuration.html#crypttab" title="Dm-crypt/System configuration">dm-crypt/System configuration#crypttab</a>).
</p>
<p>Для корневой файловой системы следуйте инструкциям из раздела <a href="../en/Dm-crypt/Specialties.html#Discard/TRIM_support_for_solid_state_drives_(SSD)" title="Dm-crypt/Specialties">dm-crypt/Specialties#Discard/TRIM support for solid state drives (SSD)</a>, чтобы добавить нужный параметр ядра в конфигурацию загрузчика.
</p>
<h3>
<span id=".D0.9C.D0.B0.D0.BA.D1.81.D0.B8.D0.BC.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D1.8F_.D0.BF.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.B4.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.BE.D1.81.D1.82.D0.B8"></span><span class="mw-headline" id="Максимизация_производительности">Максимизация производительности</span>
</h3>
<p>Следуйте советам из раздела <a href="../ru/Improving_performance.html#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F" class="mw-redirect" title="Увеличение производительности">Увеличение производительности#Устройства хранения</a>, чтобы максимально увеличить производительность дисков.
</p>
<h4>
<span id=".D0.A0.D0.B0.D0.B7.D0.BC.D0.B5.D1.80_.D1.81.D0.B5.D0.BA.D1.82.D0.BE.D1.80.D0.B0"></span><span class="mw-headline" id="Размер_сектора">Размер сектора</span>
</h4>
<p>Смотрите <a href="../en/Advanced_Format.html#NVMe_solid_state_drives" title="Advanced Format">Advanced Format#NVMe solid state drives</a>.
</p>
<h4>
<span id=".D0.9E.D1.87.D0.B8.D1.81.D1.82.D0.BA.D0.B0_.D1.8F.D1.87.D0.B5.D0.B5.D0.BA_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8_SSD"></span><span class="mw-headline" id="Очистка_ячеек_памяти_SSD">Очистка ячеек памяти SSD</span>
</h4>
<p>Можно полностью сбросить ячейки SSD до начального состояния, восстановив таким образом <a rel="nofollow" class="external text" href="https://www.anandtech.com/show/2738/8">заводскую производительность записи</a>. Известно, что производительность записи со временем снижается даже на SSD со встроенной поддержкой TRIM: он работает только при удалении файлов, но не при замене, например, инкрементном сохранении.
</p>
<p>Сброс можно выполнить, следуя соответствующей процедуре, описанной в статье <a href="../ru/Solid_state_drive/Memory_cell_clearing.html" class="mw-redirect" title="Очистка ячеек памяти SSD">Очистка ячеек памяти SSD</a>, для <a href="../ru/Solid_state_drive/Memory_cell_clearing.html#%D0%94%D0%B8%D1%81%D0%BA_SATA" title="Solid state drive (Русский)/Memory cell clearing (Русский)">#SATA</a> или <a href="../ru/Solid_state_drive/Memory_cell_clearing.html#%D0%94%D0%B8%D1%81%D0%BA_NVMe" title="Solid state drive (Русский)/Memory cell clearing (Русский)">#NVMe</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если вы выполняете сброс ради очистки данных, вы можете усомниться в том, что контроллер SSD выполнит его безопасно, например, если вы не доверяете производителю или опасаетесь потенциальных ошибок. В этом случае смотрите дополнительную информацию и примеры ручного стирания в разделе <a href="../en/Securely_wipe_disk.html#Flash_memory" title="Securely wipe disk">Securely wipe disk#Flash memory</a>.</div>
<h3>
<span id=".D0.91.D0.B5.D0.B7.D0.BE.D0.BF.D0.B0.D1.81.D0.BD.D0.BE.D1.81.D1.82.D1.8C"></span><span class="mw-headline" id="Безопасность">Безопасность</span>
</h3>
<h4>
<span id="Hdparm_.D0.BF.D0.BE.D0.BA.D0.B0.D0.B7.D1.8B.D0.B2.D0.B0.D0.B5.D1.82_.D1.81.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.B8.D0.B5_.22frozen.22"></span><span class="mw-headline" id='Hdparm_показывает_состояние_"frozen"'>Hdparm показывает состояние "frozen"</span>
</h4>
<p>Прошивки некоторых материнских плат отправляют команду «security freeze» SATA-устройствам при инициализации. Аналогичным образом, прошивки некоторых SSD (и HDD) переходят в состояние «security freeze» уже с завода. В обоих случаях параметры безопасности пароля устройства устанавливаются в состояние <b>frozen</b>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># hdparm -I /dev/sda</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Security: 
 	Master password revision code = 65534
 		supported
 	not	enabled
 	<b>not	locked</b>
 		<b>frozen</b>
 	not	expired: security count
 		supported: enhanced erase
 	4min for SECURITY ERASE UNIT. 2min for ENHANCED SECURITY ERASE UNIT.</pre>
<p>На операции вроде форматирования или установки операционной системы это не влияет.
</p>
<p>Приведённый выше вывод показывает, что устройство не заблокировано паролем HDD при загрузке (<b>not locked</b>), а состояние <b>frozen</b> защищает устройство от вредоносных программ, которые могут попытаться заблокировать его, установив на него пароль во время работы. 
</p>
<p>Если вы хотите установить пароль на устройство в состоянии «frozen», необходимо, чтобы BIOS материнской платы поддерживал эту функцию. Многие ноутбуки имеют такую поддержку, поскольку она требуется для <a href="../en/Self-encrypting_drives.html" title="Self-encrypting drives">аппаратного шифрования</a>, но поддержка может оказаться нетривиальной для настольных/серверных плат. Например, в материнской плате Intel DH67CL/BL для доступа к настройкам необходимо перевести её в «режим обслуживания» с помощью физической перемычки (<a rel="nofollow" class="external autonumber" href="https://sstahlman.blogspot.in/2014/07/hardware-fde-with-intel-ssd-330-on.html?showComment=1411193181867#c4579383928221016762">[10]</a>, <a rel="nofollow" class="external autonumber" href="https://communities.intel.com/message/251978#251978">[11]</a>).
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Не пытайтесь изменить вышеуказанные настройки безопасности с помощью <code>hdparm</code>, если вы точно не знаете, что делаете.</div>
<p>Если вы собираетесь стереть SSD, смотрите статьи <a href="../en/Securely_wipe_disk.html#hdparm" title="Securely wipe disk">Securely wipe disk#hdparm</a> и <a href="../ru/Solid_state_drive/Memory_cell_clearing.html" class="mw-redirect" title="Очистка ячеек памяти SSD">Очистка ячеек памяти SSD</a>.
</p>
<h5>
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D0.B2.D0.BE.D0.B4_SSD_.D0.B2_.D1.81.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.B8.D0.B5_.22frozen.22_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.B2.D0.BE.D0.B7.D0.B2.D1.80.D0.B0.D1.89.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B8.D0.B7_.D0.B6.D0.B4.D1.83.D1.89.D0.B5.D0.B3.D0.BE_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D0.B0"></span><span class="mw-headline" id='Перевод_SSD_в_состояние_"frozen"_после_возвращения_из_ждущего_режима'>Перевод SSD в состояние "frozen" после возвращения из ждущего режима</span>
</h5>
<p>После возвращения из ждущего режима SSD обычно теряет состояние «frozen», что делает его уязвимым для команд <a rel="nofollow" class="external text" href="https://ata.wiki.kernel.org/index.php/ATA_Secure_Erase">ATA SECURE ERASE</a>, подобных тем, что описаны в статье <a href="../ru/Solid_state_drive/Memory_cell_clearing.html" class="mw-redirect" title="Очистка ячеек памяти SSD">Очистка ячеек памяти SSD</a>.
</p>
<p>Чтобы предотвратить эту проблему, можно запустить скрипт <a href="../ru/Power_management.html#%D0%A5%D1%83%D0%BA%D0%B8_%D0%B2_/usr/lib/systemd/system-sleep" title="Power management (Русский)">после пробуждения от сна</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system-sleep/ssd-freeze.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
if [ "$1" = 'post' ]; then
	sleep 1
	if hdparm --security-freeze /dev/disk/by-id/<i>ata-name-of-disk</i>; then
		logger "$0: SSD freeze command executed successfully"
	else
		logger "$0: SSD freeze command failed"
	fi	
fi</pre>
<h4>
<span id=".D0.90.D0.BF.D0.BF.D0.B0.D1.80.D0.B0.D1.82.D0.BD.D0.BE.D0.B5_.D1.88.D0.B8.D1.84.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Аппаратное_шифрование">Аппаратное шифрование</span>
</h4>
<p>Как отмечалось в разделе <a href='#Hdparm_%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D0%B5%D1%82_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_"frozen"'>#Hdparm показывает состояние "frozen"</a>, установка пароля для устройства хранения данных (SSD/HDD) в BIOS может также инициализировать аппаратное шифрование поддерживающих его устройств. Если устройство также соответствует стандарту OPAL, это может быть достигнуто и без соответствующей функции BIOS для установки парольной фразы; смотрите статью <a href="../en/Self-encrypting_drives.html" title="Self-encrypting drives">Self-encrypting drives</a>.
</p>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<p>Возможно, что проблема, с которой вы столкнулись, является ошибкой прошивки, не связанной с Linux, поэтому прежде чем пытаться устранить проблему, затрагивающую SSD-устройство, сначала проверьте, доступны ли обновления для:
</p>
<ul>
<li><a href="#%D0%9F%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B0">Прошивки SSD</a></li>
<li><a href="../en/Flashing_BIOS_from_Linux.html" title="Flashing BIOS from Linux">Прошивки BIOS/UEFI материнской платы</a></li>
</ul>
<p>Даже если это ошибка прошивки, ее можно избежать, поэтому если обновления прошивки нет или вы не решаетесь обновить прошивку, вам может помочь следующее.
</p>
<h3>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BE.D1.88.D0.B8.D0.B1.D0.BE.D0.BA_NCQ"></span><span class="mw-headline" id="Решение_ошибок_NCQ">Решение ошибок NCQ</span>
</h3>
<p>Некоторые SSD и чипсеты SATA не работают должным образом с Linux Native Command Queueing (NCQ). Характерные ошибки выглядят в <a href="../ru/Core_utilities.html#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5" title="Core utilities (Русский)">dmesg</a> следующим образом:
</p>
<pre>[ 9.115544] ata9: exception Emask 0x0 SAct 0xf SErr 0x0 action 0x10 frozen
[ 9.115550] ata9.00: failed command: READ FPDMA QUEUED
[ 9.115556] ata9.00: cmd 60/04:00:d4:82:85/00:00:1f:00:00/40 tag 0 ncq 2048 in
[ 9.115557] res 40/00:18:d3:82:85/00:00:1f:00:00/40 Emask 0x4 (timeout)
</pre>
<p>Чтобы отключить NCQ при загрузке, добавьте <code>libata.force=noncq</code> в командную строку ядра в настройках <a href="../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" title="Arch boot process (Русский)">загрузчика</a>. Чтобы отключить NCQ только для определённого устройства (например, для диска 0 на порту 9), используйте <code>libata.force=9.00:noncq</code>
</p>
<p>Также можно отключить NCQ для определённого диска без перезагрузки через sysfs:
</p>
<pre># echo 1 &gt; /sys/block/sdX/device/queue_depth
</pre>
<p>Если это (а также обновление прошивки) не решит проблему или вызовет другие проблемы, то <a href="../ru/Bug_reporting_guidelines.html" title="Bug reporting guidelines (Русский)">отправьте сообщение об ошибке</a>.
</p>
<h3>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BE.D1.88.D0.B8.D0.B1.D0.BE.D0.BA.2C_.D1.81.D0.B2.D1.8F.D0.B7.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D1.81_.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5.D0.BC_.D0.BF.D0.B8.D1.82.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_SATA"></span><span class="mw-headline" id="Решение_ошибок,_связанных_с_управлением_питанием_SATA">Решение ошибок, связанных с управлением питанием SATA</span>
</h3>
<p>У некоторых SSD (например, Transcend MTS400) возникают проблемы при включенном управлении питанием SATA Active Link Power Management, <a href="https://en.wikipedia.org/wiki/Aggressive_Link_Power_Management" class="extiw" title="wikipedia:Aggressive Link Power Management">ALPM</a>.
ALPM отключен по умолчанию и включается демоном энергосбережения (например, <a href="../en/TLP.html" title="TLP">TLP</a>, <a href="../ru/Laptop_Mode_Tools.html" title="Laptop Mode Tools (Русский)">Laptop Mode Tools</a>).
</p>
<p>Если вы начинаете сталкиваться с ошибками, связанными с SATA, при использовании такого демона, попробуйте отключить ALPM, установив его состояние в <code>max_performance</code> и для профиля работы от батареи, и для профиля работы от сети.
</p>
<h3>
<span id=".D0.92.D0.BD.D0.B5.D1.88.D0.BD.D0.B8.D0.B9_SSD_.D1.81_.D0.BF.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.BE.D0.B9_TRIM"></span><span class="mw-headline" id="Внешний_SSD_с_поддержкой_TRIM">Внешний SSD с поддержкой TRIM</span>
</h3>
<p>Чипы некоторых USB-SATA мостов (например, VL715, VL716 и т.д.), а также USB-PCIe (например, <a rel="nofollow" class="external text" href="https://www.jmicron.com/PDF/brief/jms583.pdf">JMicron JMS583</a>, используемые во внешних NVMe, таких как <a rel="nofollow" class="external text" href="https://icybox.de/en/product.php?id=71">IB-1817M-C31</a>) поддерживают TRIM-подобные команды, которые могут быть отправлены через драйвер <a href="https://en.wikipedia.org/wiki/ru:USB_Attached_SCSI" class="extiw" title="wikipedia:ru:USB Attached SCSI">USB Attached SCSI</a> (под именем «uas» в Linux).
</p>
<p>Но ядро может не обнаружить эту возможность автоматически и из-за этого не использовать её.
Например, если ваше блочное устройство — это /dev/sdX, вы можете узнать, так ли это, выполнив команду
</p>
<pre># sg_readcap -l /dev/sdX
</pre>
<p>Если в её выводе вы найдёте строку «Logical block provisioning: lbpme=0», значит ядро предполагает, что устройство не поддерживает "<a rel="nofollow" class="external text" href="https://www.seagate.com/files/staticfiles/support/docs/manual/Interface%20manuals/100293068k.pdf#G4.1427908">Logical Block Provisioning Management</a>", поскольку бит (LBPME) не установлен.
</p>
<p>Если это так, то вам следует выяснить, есть ли в <a rel="nofollow" class="external text" href="https://www.seagate.com/files/staticfiles/support/docs/manual/Interface%20manuals/100293068k.pdf#G4.3076244">странице «Vital Product Data» (VPD) в разделе «Logical Block Provisioning»</a> вашего устройства информация о поддерживаемых механизмах разметки данных. Это можно сделать с помощью команды:
</p>
<pre># sg_vpd -a /dev/sdX
</pre>
<p>Найдите в выводе строки, которые выглядят следующим образом:
</p>
<pre>Unmap command supported (LBPU): 1
Write same (16) with unmap bit supported (LBPWS): 0
Write same (10) with unmap bit supported (LBPWS10): 0
</pre>
<p>Этот пример говорит о том, что устройство поддерживает команду «UNMAP».
</p>
<p>Взгляните на вывод
</p>
<pre>$ cat /sys/block/sdX/device/scsi_disk/*/provisioning_mode
</pre>
<p>Если ядро не обнаружило поддержку unmap, то, скорее всего, будет возвращено значение «full».
Кроме «full», драйвер накопителей SCSI в настоящее время знает следующие значения для provisioning_mode:
</p>
<pre>unmap
writesame_16
writesame_10
writesame_zero
disabled
</pre>
<p>Для приведённого выше примера теперь можно записать «unmap» в «provisioning_mode», чтобы попросить ядро использовать этот режим:
</p>
<pre># echo "unmap" &gt;/sys/block/sdX/device/scsi_disk/*/provisioning_mode
</pre>
<p>Это сразу же позволит вам использовать такие инструменты, как «blkdiscard» на /dev/sdX или «fstrim» на примонтированных файловых системах, расположенных на /dev/sdX.
</p>
<p>Если вы хотите автоматически включать «provisioning_mode» при подключении внешнего устройства определённого производителя/продукта, это можно автоматизировать с помощью <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>. Сначала найдите идентификаторы производителя и продукта USB:
</p>
<pre>$ cat /sys/block/sdX/../../../../../../idVendor
$ cat /sys/block/sdX/../../../../../../idProduct
</pre>
<p>Затем создайте или добавьте в файл правил <a href="../ru/Udev.html" title="Udev (Русский)">udev</a> (пример здесь использует idVendor 152d и idProduct 0583):
</p>
<pre># echo 'ACTION=="add|change", ATTRS{idVendor}=="152d", ATTRS{idProduct}=="0583", SUBSYSTEM=="scsi_disk", ATTR{provisioning_mode}="unmap"' &gt;&gt;/etc/udev/rules.d/10-uas-discard.rules
</pre>
<p>(Вы также можете использовать команду <code>lsusb</code> для поиска соответствующего idVendor/idProduct).
</p>
<h2>
<span id=".D0.9F.D1.80.D0.BE.D1.88.D0.B8.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Прошивка">Прошивка</span>
</h2>
<p>Если поддерживается производителем устройства, рекомендуется обновить прошивку с помощью утилиты <a href="../en/Fwupd.html" title="Fwupd">fwupd</a>.
</p>
<h3><span class="mw-headline" id="ADATA">ADATA</span></h3>
<p>У ADATA есть утилита, доступная для Linux (i686) на <a rel="nofollow" class="external text" href="http://www.adata.com.tw/index.php?action=ss_main&amp;page=ss_content_driver&amp;lan=en">странице поддержки</a>. Ссылка на последнюю версию прошивки появится после выбора модели. Последняя утилита обновления для Linux упакована вместе с прошивкой и должна быть запущена от имени root. Возможно, сначала потребуется установить правильные права на исполняемый файл.
</p>
<h3><span class="mw-headline" id="Crucial">Crucial</span></h3>
<p>Crucial предоставляет возможность обновления прошивки с помощью ISO-образа. Эти образы можно найти после выбора продукта на <a rel="nofollow" class="external text" href="https://www.crucial.com/usa/en/support-ssd">странице поддержки SSD</a> и загрузки "Manual Boot File".  
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> ISO-образы, предоставляемые компанией Crucial, не являются гибридными. Если вы просто скопируете образ на какое-нибудь устройство с помощью <code>dd</code>, на нём будет отсутствовать <a href="../ru/Partitioning.html#%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D1%8C_(MBR)" title="Partitioning (Русский)">MBR</a> и загрузиться с него не получится.</div>
<p>Владельцы модели M4 Crucial могут проверить необходимость обновления прошивки с помощью команды <code>smartctl</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ smartctl --all /dev/sd<b>X</b></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">==&gt; WARNING: This drive may hang after 5184 hours of power-on time:
<a rel="nofollow" class="external free" href="https://www.tomshardware.com/news/Crucial-m4-Firmware-BSOD,14544.html">https://www.tomshardware.com/news/Crucial-m4-Firmware-BSOD,14544.html</a>
See the following web page for firmware updates:
<a rel="nofollow" class="external free" href="https://www.crucial.com/usa/en/support-ssd">https://www.crucial.com/usa/en/support-ssd</a>
</pre>
<p>Если вы увидели это предупреждение — сделайте резервную копию важных данных и <b>немедленно обновите прошивку</b>. Смотрите <a rel="nofollow" class="external text" href="https://www.rojtberg.net/1008/updating-crucial-mx100-firmware-with-ubuntu/">инструкцию</a>, как обновить прошивку Crucial MX100 с помощью ISO-образа и Grub.
</p>
<h3><span class="mw-headline" id="Intel">Intel</span></h3>
<p>У Intel есть <a rel="nofollow" class="external text" href="https://downloadcenter.intel.com/download/18363">Firmware Update Tool</a> для операционных систем, не совместимых с Windows <a rel="nofollow" class="external text" href="https://downloadcenter.intel.com/download/30380/">Intel® Memory and Storage Tool (GUI)</a>.
</p>
<p>Существует также более новая утилита командной строки для Linux для перепрошивки под названием <a rel="nofollow" class="external text" href="https://downloadcenter.intel.com/download/29337/Intel-Memory-and-Storage-Tool-CLI-Command-Line-Interface-?product=83425">Intel Memory and Storage (MAS) Tool</a>, доступная в AUR как <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/intel-mas-cli-tool/">intel-mas-cli-tool</a></span><sup><small>AUR</small></sup> (<a rel="nofollow" class="external text" href="https://downloadmirror.intel.com/646992/CLI-Intel-MAS-1.10-User-Guide-Public-342245-011US.pdf">документация</a><sup title="Статус последней проверки: 403">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2024-07-30 ⓘ]</sup>).
</p>
<p>Пример проверки состояния прошивки:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># intelmas show -intelssd 0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DevicePath : /dev/nvme0n1
DeviceStatus : Healthy
Firmware : 002C
FirmwareUpdateAvailable : The selected Intel SSD contains current firmware as of this tool release.
</pre>
<p><code>-intelssd 0</code> можно опустить, если в системе только один SSD Intel, или передать <code>1</code> для второго SSD, и так далее.
</p>
<p>Если обновление доступно, оно выполняется путём запуска <code>intelmas load -intelssd 0</code>. В документации указано, что в Linux эту процедуру нужно выполнить дважды, с отключением и повторным включением питания между выполнениями. Последняя версия прошивки для всех устройств распространяется как часть MAS Tool, поэтому её не нужно скачивать отдельно.
</p>
<h3><span class="mw-headline" id="Kingston">Kingston</span></h3>
<p>Для накопителей на базе Sandforce на AUR доступен инструмент KFU, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/kingston_fw_updater/">kingston_fw_updater</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Mushkin">Mushkin</span></h3>
<p>Менее известные твердотельные накопители марки Mushkin также используют контроллеры Sandforce и имеют утилиту Linux (почти идентичную Kingston) для обновления прошивки.
</p>
<h3><span class="mw-headline" id="OCZ">OCZ</span></h3>
<p>У OCZ есть <a rel="nofollow" class="external text" href="https://www.ocz.com/us/download/clout">Command Line Online Update Tool (CLOUT)</a>, доступный для Linux. AUR предоставляет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ocz-ssd-utility/">ocz-ssd-utility</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ocztoolbox/">ocztoolbox</a></span><sup><small>AUR</small></sup> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/oczclout/">oczclout</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Samsung">Samsung</span></h3>
<p>Хотя Samsung считает методы обновления прошивки, не поддерживаемые программным обеспечением Magician, "неподдерживаемыми", они <i>могут</i> работать. Программа Magician может создать загрузочный USB-накопитель, содержащий обновление прошивки, однако Samsung больше не предоставляет это программное обеспечение для потребительских SSD. Samsung также предоставляет готовые <a rel="nofollow" class="external text" href="https://www.samsung.com/semiconductor/minisite/ssd/download/tools.html">загрузочные ISO-образы</a>, которые можно использовать для обновления прошивки. Другой вариант - использовать утилиту Samsung <i>magician</i> (пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/samsung_magician-consumer-ssd/">samsung_magician-consumer-ssd</a></span><sup><small>AUR</small></sup>). Magician поддерживает только SSD под маркой Samsung; SSD, которые производит Samsung для OEM-производителей (например, Lenovo), не поддерживаются.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Samsung вообще не даёт понять, что они действительно предоставляют их. Похоже, что у них есть 4 разные страницы обновления прошивки, и каждая из них ссылается на разные способы выполнения действий.</div>
<p>Пользователи, предпочитающие запускать обновление прошивки с Live USB, созданного через Linux (без использования программы Magician от Samsung на Microsoft Windows), могут обратиться к <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20160322230114/fomori.org/blog/?p=933">[12]</a> за более подробной информацией.
</p>
<h4>
<span id=".D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.B4_Linux"></span><span class="mw-headline" id="Обновление_под_Linux">Обновление под Linux</span>
</h4>
<p>Прошивку твердотельного накопителя можно обновить из обычного Linux (без создания загрузочного USB-накопителя), как показано ниже. Сначала посетите страницу <a rel="nofollow" class="external text" href="https://www.samsung.com/semiconductor/minisite/ssd/download/tools">Samsung downloads page</a>, перейдите в раздел «Samsung SSD Firmware» и загрузите последнюю версию прошивки для вашего SSD - это должен быть ISO-образ.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> В некоторых ISO-образах отсутствует <code>initrd</code> образ Linux, упомянутый ниже. Смотрите раздел <a href="#%D0%A1%D1%82%D0%B0%D1%80%D1%8B%D0%B5_SSD">#Старые SSD</a> вместо этого.</div>
<p>Извлеките <code>initrd</code> образ Linux из ISO-образа:
</p>
<pre>$ bsdtar xf <i>samsung_ssd_firmware</i>.iso initrd
</pre>
<p>Извлеките <code>root/fumagician/</code>. Этот каталог содержит файлы обновления прошивки:
</p>
<pre>$ bsdtar xf initrd root/fumagician
</pre>
<p>Наконец, запустите <code>root/fumagician/fumagician</code> с правами root и перезагрузитесь (если прошивка была успешно обновлена).
</p>
<h5>
<span id=".D0.A1.D1.82.D0.B0.D1.80.D1.8B.D0.B5_SSD"></span><span class="mw-headline" id="Старые_SSD">Старые SSD</span>
</h5>
<p>Некоторые ISO-образы прошивок SSD содержат образ FreeDOS вместо Linux-образа <code>initrd</code>, поэтому шаги, необходимые для обновления прошивки SSD, отличаются от описанных выше. В следующей таблице перечислены эти SSD (и соответствующие пути):
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Модель SSD</th>
<th>Путь к образу FreeDOS</th>
<th>Путь к прошивке
</th>
</tr>
<tr>
<td>470, 830</td>
<td><code>BTDSK.IMG</code></td>
<td>
<code>SSR/</code>
</td>
</tr>
<tr>
<td>840</td>
<td><code>isolinux/btdsk.img</code></td>
<td rowspan="2">
<code>samsung/DSRD/</code>
</td>
</tr>
<tr>
<td>840 EVO (mSATA), Pro</td>
<td>
<code>ISOLINUX/BTDSK.IMG</code>
</td>
</tr>
</tbody>
</table>
<p>Сначала извлеките образ FreeDOS из ISO-образа:
</p>
<pre>$ bsdtar xf <i>samsung_ssd_firmware</i>.iso <i>freedos_image_path</i>.
</pre>
<p>Смонтируйте образ FreeDOS в <code>/mnt/</code>:
</p>
<pre># mount <i>freedos_image_path</i> /mnt
</pre>
<p>Получите номер диска SSD под <i>Disk Number</i> из утилиты управления SSD Magician:
</p>
<pre># magician --list
</pre>
<p>Обновите прошивку SSD для указанного диска, указав путь к пакету прошивки:
</p>
<pre># magician --disk <i>disk_num</i> --firmware-update --fwpackage-path /mnt/<i>firmware_package_path</i>
</pre>
<p>Наконец, убедитесь, что прошивка была успешно обновлена, проверив версию в разделе <i>Firmware</i> из вывода <code>magician --list</code> (запускать с правами root). В случае положительного ответа перезагрузите систему.
</p>
<h3><span class="mw-headline" id="SanDisk">SanDisk</span></h3>
<p>SanDisk создаёт ISO-образы с прошивками, чтобы можно было обновлять прошивку SSD в операционных системах, которые не поддерживает SanDisk SSD Toolkit.
</p>
<p>Нужно выбрать прошивку для правильной <i>модели</i> SSD <b>и</b> правильной <i>ёмкости</i> (например, 60 ГБ, <b>или</b> 256 ГБ). После записи ISO-образа просто загрузитесь с созданного загрузочного диска CD/DVD (может работать и с USB-накопителя).
</p>
<p>Образы iso содержат только ядро linux и initrd. Распакуйте их в раздел <code>/boot</code> и загрузитесь с помощью <a href="../ru/GRUB.html" title="GRUB (Русский)">GRUB</a> или <a href="../ru/Syslinux.html" title="Syslinux (Русский)">Syslinux</a> для обновления прошивки.
</p>
<p>Смотрите также:
</p>
<ul>
<li>SanDisk Extreme SSD <a rel="nofollow" class="external text" href="https://kb.sandisk.com/app/answers/detail/a_id/10127">Заметки о выпуске прошивки</a> и <a rel="nofollow" class="external text" href="https://kb.sandisk.com/app/answers/detail/a_id/10476">Руководство по обновлению прошивки версии R211</a>.</li>
<li>SanDisk Ultra SSD <a rel="nofollow" class="external text" href="https://kb.sandisk.com/app/answers/detail/a_id/10192">Заметки о выпуске прошивки</a> и <a rel="nofollow" class="external text" href="https://kb.sandisk.com/app/answers/detail/a_id/10477">Руководство по обновлению прошивки версии 365A13F0</a>
</li>
<li>SanDisk Ultra+ SSD <a rel="nofollow" class="external text" href="https://kb.sandisk.com/app/answers/detail/a_id/12763">Заметки о выпуске прошивки</a> и <a rel="nofollow" class="external text" href="https://kb.sandisk.com/app/answers/detail/a_id/12762">Руководство по обновлению прошивки версии X2316RL</a> — используйте <code>smartctl -a /dev/sdX</code>, чтобы определить, используется ли модель «H2» или «HP».</li>
</ul>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.reddit.com/r/archlinux/comments/rkwjm/what_should_i_keep_in_mind_when_installing_on_ssd/">Обсуждение на Reddit об установке Arch на SSD</a></li>
<li><a rel="nofollow" class="external text" href="https://lore.kernel.org/linux-btrfs/20120830215008.GB2879@localhost.localdomain/">Re: Варьирование Leafsize и Nodesize в Btrfs</a></li>
<li><a rel="nofollow" class="external text" href="https://lore.kernel.org/linux-btrfs/5052700D.4020003@gmail.com/">Re: Выравнивание SSD и размер сектора в Btrfs</a></li>
<li><a rel="nofollow" class="external text" href="https://forums.anandtech.com/threads/erase-block-alignment-misinformation.2266113/">Erase Block (Alignment) Misinformation?</a></li>
<li><a rel="nofollow" class="external text" href="https://superuser.com/questions/492084/is-alignment-to-erase-block-size-needed-for-modern-ssds">Нужно ли выравнивание по размеру блока стирания для современных SSD?</a></li>
<li><a rel="nofollow" class="external text" href="https://lore.kernel.org/linux-btrfs/jgui4j$th5$1@dough.gmane.org/">Поддержка Btrfs для эффективной работы SSD (выравнивание блоков данных)</a></li>
<li><a rel="nofollow" class="external text" href="https://serverfault.com/questions/356534/ssd-erase-block-size-lvm-pv-on-raw-device-alignment">SSD, Erase Block Size &amp; LVM: PV на raw-устройстве, выравнивание</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Storage.html" title="Category:Storage (Русский)">Storage (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Solid_state_drive_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=813463">https://wiki.archlinux.org/index.php?title=Solid_state_drive_(Русский)&amp;oldid=813463</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 July 2024, at 16:31.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
