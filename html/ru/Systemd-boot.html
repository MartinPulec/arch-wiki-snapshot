<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>systemd-boot (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Systemd-boot_Русский rootpage-Systemd-boot_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Установка</span>
			</div>
		</a>
		
			<button aria-controls="toc-Установка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Установка subsection</span>
			</button>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
			<li id="toc-Установка_менеджера_загрузки_EFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_EFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Установка менеджера загрузки EFI</span>
				</div>
			</a>
			
			<ul id="toc-Установка_менеджера_загрузки_EFI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Установка_с_использованием_XBOOTLDR" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_XBOOTLDR">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Установка с использованием XBOOTLDR</span>
				</div>
			</a>
			
			<ul id="toc-Установка_с_использованием_XBOOTLDR-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Обновление_менеджера_загрузки_EFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_EFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Обновление менеджера загрузки EFI</span>
				</div>
			</a>
			
			<ul id="toc-Обновление_менеджера_загрузки_EFI-sublist" class="vector-toc-list">
				<li id="toc-Вручную" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%92%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3.1</span>
					<span>Вручную</span>
				</div>
			</a>
			
			<ul id="toc-Вручную-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Автоматически" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3.2</span>
					<span>Автоматически</span>
				</div>
			</a>
			
			<ul id="toc-Автоматически-sublist" class="vector-toc-list">
				<li id="toc-Служба_systemd" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A1%D0%BB%D1%83%D0%B6%D0%B1%D0%B0_systemd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3.2.1</span>
					<span>Служба systemd</span>
				</div>
			</a>
			
			<ul id="toc-Служба_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Хук_pacman" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A5%D1%83%D0%BA_pacman">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3.2.2</span>
					<span>Хук pacman</span>
				</div>
			</a>
			
			<ul id="toc-Хук_pacman-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Настройка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Настройка</span>
			</div>
		</a>
		
			<button aria-controls="toc-Настройка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка subsection</span>
			</button>
		
		<ul id="toc-Настройка-sublist" class="vector-toc-list">
			<li id="toc-Настройка_загрузчика" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Настройка загрузчика</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_загрузчика-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Добавление_загрузочных_записей" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D1%8B%D1%85_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B5%D0%B9">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Добавление загрузочных записей</span>
				</div>
			</a>
			
			<ul id="toc-Добавление_загрузочных_записей-sublist" class="vector-toc-list">
				<li id="toc-EFI_Shell_или_другие_EFI-приложения" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#EFI_Shell_%D0%B8%D0%BB%D0%B8_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%B5_EFI-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>EFI Shell или другие EFI-приложения</span>
				</div>
			</a>
			
			<ul id="toc-EFI_Shell_или_другие_EFI-приложения-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Загрузка_с_другого_диска" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D1%81_%D0%B4%D1%80%D1%83%D0%B3%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Загрузка с другого диска</span>
				</div>
			</a>
			
			<ul id="toc-Загрузка_с_другого_диска-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Загрузка_в_настройки_EFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B2_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8_EFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Загрузка в настройки EFI</span>
				</div>
			</a>
			
			<ul id="toc-Загрузка_в_настройки_EFI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Поддержка_спящего_режима" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_%D1%81%D0%BF%D1%8F%D1%89%D0%B5%D0%B3%D0%BE_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Поддержка спящего режима</span>
				</div>
			</a>
			
			<ul id="toc-Поддержка_спящего_режима-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Редактор_параметров_ядра_с_защитой_паролем" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%BE%D1%80_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%BE%D0%B2_%D1%8F%D0%B4%D1%80%D0%B0_%D1%81_%D0%B7%D0%B0%D1%89%D0%B8%D1%82%D0%BE%D0%B9_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>Редактор параметров ядра с защитой паролем</span>
				</div>
			</a>
			
			<ul id="toc-Редактор_параметров_ядра_с_защитой_паролем-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Советы и рекомендации</span>
			</div>
		</a>
		
			<button aria-controls="toc-Советы_и_рекомендации-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Советы и рекомендации subsection</span>
			</button>
		
		<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
			<li id="toc-Клавиши_в_меню_загрузки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B8_%D0%B2_%D0%BC%D0%B5%D0%BD%D1%8E_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Клавиши в меню загрузки</span>
				</div>
			</a>
			
			<ul id="toc-Клавиши_в_меню_загрузки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Выбор_записи_для_следующей_загрузки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%B1%D0%BE%D1%80_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8_%D0%B4%D0%BB%D1%8F_%D1%81%D0%BB%D0%B5%D0%B4%D1%83%D1%8E%D1%89%D0%B5%D0%B9_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Выбор записи для следующей загрузки</span>
				</div>
			</a>
			
			<ul id="toc-Выбор_записи_для_следующей_загрузки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Unified_kernel_image" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Unified_kernel_image">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Unified kernel image</span>
				</div>
			</a>
			
			<ul id="toc-Unified_kernel_image-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Grml_на_ESP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Grml_%D0%BD%D0%B0_ESP">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Grml на ESP</span>
				</div>
			</a>
			
			<ul id="toc-Grml_на_ESP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-systemd-boot_на_системах_BIOS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#systemd-boot_%D0%BD%D0%B0_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D1%85_BIOS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>systemd-boot на системах BIOS</span>
				</div>
			</a>
			
			<ul id="toc-systemd-boot_на_системах_BIOS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Решение проблем</span>
			</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Установка_после_загрузки_в_режиме_BIOS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B2_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5_BIOS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Установка после загрузки в режиме BIOS</span>
				</div>
			</a>
			
			<ul id="toc-Установка_после_загрузки_в_режиме_BIOS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Создание_записи_вручную_с_помощью_efibootmgr" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_efibootmgr">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Создание записи вручную с помощью efibootmgr</span>
				</div>
			</a>
			
			<ul id="toc-Создание_записи_вручную_с_помощью_efibootmgr-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Создание_записи_вручную_с_помощью_bcdedit_из_Windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_bcdedit_%D0%B8%D0%B7_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Создание записи вручную с помощью bcdedit из Windows</span>
				</div>
			</a>
			
			<ul id="toc-Создание_записи_вручную_с_помощью_bcdedit_из_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Меню_не_отображается_после_обновления_Windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%B5%D0%BD%D1%8E_%D0%BD%D0%B5_%D0%BE%D1%82%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Меню не отображается после обновления Windows</span>
				</div>
			</a>
			
			<ul id="toc-Меню_не_отображается_после_обновления_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Добавление_поддержки_разблокировки_TPM_для_Windows_BitLocker" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B8_%D1%80%D0%B0%D0%B7%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8_TPM_%D0%B4%D0%BB%D1%8F_Windows_BitLocker">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Добавление поддержки разблокировки TPM для Windows BitLocker</span>
				</div>
			</a>
			
			<ul id="toc-Добавление_поддержки_разблокировки_TPM_для_Windows_BitLocker-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Смотрите также</span>
			</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">systemd-boot (Русский)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 7 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-7" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">7 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Systemd-boot" title="Systemd-boot – Deutsch" lang="de" hreflang="de" data-title="Systemd-boot" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Systemd-boot.html" title="Systemd-boot – English" lang="en" hreflang="en" data-title="Systemd-boot" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Systemd-boot.html" title="Systemd-boot – español" lang="es" hreflang="es" data-title="Systemd-boot" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Systemd-boot.html" title="Systemd-boot – français" lang="fr" hreflang="fr" data-title="Systemd-boot" data-language-autonym="Français" data-language-local-name="français" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Systemd-boot" title="Systemd-boot – 日本語" lang="ja" hreflang="ja" data-title="Systemd-boot" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Systemd-boot.html" title="Systemd-boot – português" lang="pt" hreflang="pt" data-title="Systemd-boot" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Systemd-boot" title="Systemd-boot – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Systemd-boot" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a>. Дата последней синхронизации: 20 октября 2023. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Systemd-boot&amp;diff=0&amp;oldid=789443">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Arch_boot_process.html" class="mw-redirect" title="Процесс загрузки Arch">Процесс загрузки Arch</a></li>
<li><a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a></li>
<li><a href="../ru/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface (Русский)">Unified Extensible Firmware Interface (Русский)</a></li>
</ul>
</div>
<p><span class="plainlinks archwiki-template-man" title="$ man 7 systemd-boot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-boot.7">systemd-boot(7)</a></span> (ранее известный как <b>gummiboot</b>) — это простой <a href="../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" title="Arch boot process (Русский)">менеджер загрузки</a> для <a href="../ru/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface (Русский)">UEFI</a>. Он предоставляет текстовое меню для выбора загрузочной записи и редактор параметров ядра. Он входит в состав пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span>.
</p>
<p>Имейте в виду, что <i>systemd-boot</i> умеет запускать только EFI-приложения (например, ядро Linux через <a href="../en/EFI_boot_stub.html" class="mw-redirect" title="EFISTUB (Русский)">EFISTUB</a>, <a href="../ru/Unified_Extensible_Firmware_Interface.html#UEFI_Shell" title="Unified Extensible Firmware Interface (Русский)">UEFI Shell</a>, <a href="../ru/GRUB.html" title="GRUB (Русский)">GRUB</a> или <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/bringup/boot-and-uefi#understanding-the-windows-boot-manager">Windows Boot Manager</a>).
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BC.D0.B5.D0.BD.D0.B5.D0.B4.D0.B6.D0.B5.D1.80.D0.B0_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_EFI"></span><span class="mw-headline" id="Установка_менеджера_загрузки_EFI">Установка менеджера загрузки EFI</span>
</h3>
<p>Перед установкой <i>systemd-boot</i> убедитесь, что система загружена в режиме UEFI и что есть доступ к <a href="../ru/Unified_Extensible_Firmware_Interface.html#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_UEFI" title="Unified Extensible Firmware Interface (Русский)">переменным UEFI</a>. Это можно проверить командой <code>efivar --list</code> или, если <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efivar">efivar</a></span> не установлен, командой <code>ls /sys/firmware/efi/efivars</code> (если каталог существует, то система загружена в режиме UEFI).
</p>
<p>В примерах ниже <code><i>esp</i></code> обозначает <a href="../ru/EFI_system_partition.html#%D0%A2%D0%B8%D0%BF%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D1%82%D0%BE%D1%87%D0%BA%D0%B8_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" title="EFI system partition (Русский)">точку монтирования системного раздела EFI</a>, например <code>/efi</code> или <code>/boot</code>. Также предполагается, что вы выполнили <a href="../ru/Chroot.html" title="Chroot (Русский)">chroot</a> в точку монтирования корневого раздела системы.
</p>
<p>Используйте команду <span class="plainlinks archwiki-template-man" title="$ man 1 bootctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bootctl.1">bootctl(1)</a></span> для установки <i>systemd-boot</i> в системный раздел EFI:
</p>
<pre># bootctl install
</pre>
<p>Она скопирует менеджер загрузки EFI <i>systemd-boot</i> в ESP, создаст загрузочную запись в UEFI и изменит порядок загрузки.
</p>
<ul>
<li>На x64 UEFI выполняется копирование <code>/usr/lib/systemd/boot/efi/systemd-bootx64.efi</code> в <code><i>esp</i>/EFI/systemd/systemd-bootx64.efi</code> и <code><i>esp</i>/EFI/BOOT/BOOTX64.EFI</code>.</li>
<li>На IA32 UEFI выполняется копирование <code>/usr/lib/systemd/boot/efi/systemd-bootia32.efi</code> в  <code><i>esp</i>/EFI/systemd/systemd-bootia32.efi</code> и <code><i>esp</i>/EFI/BOOT/BOOTIA32.EFI</code>.</li>
</ul>
<p>Загрузочная запись UEFI будет иметь название «Linux Boot Manager» и указывать, в зависимости от разрядности UEFI, на файл <code>\EFI\systemd\systemd-bootx64.efi</code> или <code>\EFI\systemd\systemd-bootia32.efi</code> в ESP.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>При запуске <code>bootctl install</code> <i>systemd-boot</i> попробует найти системный раздел EFI в <code>/efi</code>, <code>/boot</code> и <code>/boot/efi</code>. Если он примонтирован в другое место, нужно добавить опцию <code>--esp-path=<i>esp</i></code> (смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 bootctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bootctl.1#OPTIONS">bootctl(1) § OPTIONS</a></span>).</li>
<li>Установка <i>systemd-boot</i> перезапишет существующие файлы <code><i>esp</i>/EFI/BOOT/BOOTX64.EFI</code> (или <code><i>esp</i>/EFI/BOOT/BOOTIA32.EFI</code> на IA32 UEFI), в частности, версию файла от Microsoft.</li>
</ul>
</div>
<p>Затем переходите к <a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">настройке</a> <i>systemd-boot</i>.
</p>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.81_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_XBOOTLDR"></span><span class="mw-headline" id="Установка_с_использованием_XBOOTLDR">Установка с использованием XBOOTLDR</span>
</h3>
<p>Для хранения ядра и initramfs отдельно от ESP можно создать отдельный <a href="../ru/Partitioning.html#/boot" title="Partitioning (Русский)">раздел /boot</a> типа «Linux extended boot» (XBOOTLDR). Это особенно удобно при <a href="../en/Dual_boot_with_Windows.html" class="mw-redirect" title="Dual boot with Windows (Русский)">двойной загрузке с Windows</a>, когда уже имеющийся ESP слишком маленький.
</p>
<p>Подготовьте ESP как обычно и создайте на том же физическом диске ещё один раздел для XBOOTLDR. Он должен иметь GUID типа раздела <code>bc13c2ff-59e6-4262-a352-b275fd6f7172</code> <a rel="nofollow" class="external autonumber" href="https://uapi-group.org/specifications/specs/boot_loader_specification/">[1]</a>. Размер раздела XBOOTLDR должен быть достаточно большим для размещения всех устанавливаемых ядер.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>
<i>systemd-boot</i> не выполняет проверку файловой системы, как это делается для ESP. Таким образом, можно использовать любую файловую систему, которую может прочитать ваша реализация UEFI.</li>
<li>При включении быстрой загрузки («fast boot») UEFI может пропустить загрузку разделов, отличных от ESP. Это может привести к тому, что <i>systemd-boot</i> не сможет найти загрузочные записи на разделе XBOOTLDR; в этом случае отключите режим быстрой загрузки.</li>
<li>Раздел XBOOTLDR должен находиться на том же физическом диске, что и ESP, чтобы <i>systemd-boot</i> мог его найти.</li>
</ul>
</div>
<p>В процессе установки примонтируйте ESP в <code>/mnt/efi</code> и XBOOTLDR в <code>/mnt/boot</code>.
</p>
<p>На этапе chroot используйте команду:
</p>
<pre># bootctl --esp-path=/efi --boot-path=/boot install
</pre>
<p>Затем переходите к <a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">настройке</a> <i>systemd-boot</i>.
</p>
<h3>
<span id=".D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B5.D0.BD.D0.B5.D0.B4.D0.B6.D0.B5.D1.80.D0.B0_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_EFI"></span><span class="mw-headline" id="Обновление_менеджера_загрузки_EFI">Обновление менеджера загрузки EFI</span>
</h3>
<p>При выходе новой версии <i>systemd-boot</i> менеджер загрузки EFI можно по желанию переустановить. Это можно сделать вручную или автоматически; ниже описаны оба способа.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Менеджер загрузки EFI — это отдельный исполняемый файл EFI, и для загрузки системы можно использовать любую версию (частичные обновления тут ни при чём, потому что pacman устанавливает только программу установки <i>systemd-boot</i>, а не сам <i>systemd-boot</i>). Однако новые версии могут добавлять новые возможности или исправлять ошибки, поэтому, вероятно, обновить <i>systemd-boot</i> это хорошая идея.</div>
<h4>
<span id=".D0.92.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E"></span><span class="mw-headline" id="Вручную">Вручную</span>
</h4>
<p>Используйте команду <i>bootctl</i> для обновления <i>systemd-boot</i>:
</p>
<pre># bootctl update
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Как и в случае с <code>bootctl install</code>, <i>systemd-boot</i> попробует найти системный раздел EFI в <code>/efi</code>, <code>/boot</code> и <code>/boot/efi</code>. Если он примонтирован в другое место, нужно добавить опцию <code>--esp-path=<i>esp</i></code>.</div>
<h4>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8"></span><span class="mw-headline" id="Автоматически">Автоматически</span>
</h4>
<p>Для автоматического обновления <i>systemd-boot</i> можно использовать <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">службу systemd</a> или <a href="../ru/Pacman.html#%D0%A5%D1%83%D0%BA%D0%B8" title="Pacman (Русский)">хук pacman</a>.
</p>
<h5>
<span id=".D0.A1.D0.BB.D1.83.D0.B6.D0.B1.D0.B0_systemd"></span><span class="mw-headline" id="Служба_systemd">Служба systemd</span>
</h5>
<p>Начиная с версии 250, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span> предоставляет юнит <code>systemd-boot-update.service</code>. <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">Включите</a> его, чтобы при следующей загрузке выполнилось обновление загрузчика.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> При включенном <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a> нужно подписать загрузчик перед обновлением. Пример есть в разделе <a href="#%D0%A5%D1%83%D0%BA_pacman">#Хук pacman</a>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> <code>bootctl install</code> и <code>bootctl update</code> ищут загрузчик в каталоге <code>/usr/lib/systemd/boot/efi/</code>, и файлы <code>.efi.signed</code> имеют более высокий приоритет, чем обычные файлы <code>.efi</code>. Если там есть <code>.efi.signed</code> загрузчик, то <code>systemd-boot-update.service</code> сможет выполнить обновление без обращения к инструментам подписи Secure Boot. Смотрите также <span class="plainlinks archwiki-template-man" title="$ man 1 bootctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bootctl.1#SIGNED_.EFI_FILES">bootctl(1) § SIGNED .EFI FILES</a></span>.</div>
<h5>
<span id=".D0.A5.D1.83.D0.BA_pacman"></span><span class="mw-headline" id="Хук_pacman">Хук pacman</span>
</h5>
<p>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-boot-pacman-hook/">systemd-boot-pacman-hook</a></span><sup><small>AUR</small></sup> предоставляет <a href="../ru/Pacman.html#%D0%A5%D1%83%D0%BA%D0%B8" title="Pacman (Русский)">хук pacman</a>, который будет выполняться при каждом обновлении пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span>.
</p>
<p>В качестве альтернативы, вы можете разместить следующий pacman hook в каталоге /etc/pacman.d/hooks/:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/95-systemd-boot.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Type = Package
Operation = Upgrade
Target = systemd

[Action]
Description = Gracefully upgrading systemd-boot...
When = PostTransaction
Exec = /usr/bin/systemctl restart systemd-boot-update.service</pre>
<p>При включенном <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a> стоит добавить ещё один хук, который автоматически подпишет загрузчик при обновлении пакета:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/80-secureboot.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Install
Operation = Upgrade
Type = Path
Target = usr/lib/systemd/boot/efi/systemd-boot*.efi

[Action]
Description = Signing systemd-boot EFI binary for Secure Boot
When = PostTransaction
Exec = /bin/sh -c 'while read -r i; do sbsign --key <i>/путь/к/keyfile.key</i> --cert <i>/путь/к/certificate.crt</i> "$i"; done;'
Depends = sh
Depends = sbsigntools
NeedsTargets</pre>
<p>Замените <code><i>/путь/к/keyfile.key</i></code> и <code><i>/путь/к/certificate.crt</i></code> на ваши ключ подписи и сертификат соответственно. Для лучшего понимания, как работает этот хук, можно почитать <span class="plainlinks archwiki-template-man" title="$ man 1 sbsign"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sbsign.1">sbsign(1)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Если вы используете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sbctl">sbctl</a></span>, то переподпись файлов, добавленных в его базу данных, происходит автоматически с помощью хука <code>/usr/share/libalpm/hooks/zz-sbctl.hook</code>. Не забудьте сначала добавить в базу файлы, необходимые для вашей цепочки загрузки.</div>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка">Настройка</span>
</h2>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D1.87.D0.B8.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка_загрузчика">Настройка загрузчика</span>
</h3>
<p>Базовая конфигурация хранится в файле <code><i>esp</i>/loader/loader.conf</code>. Полный список опций описан в <span class="plainlinks archwiki-template-man" title="$ man 5 loader.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/loader.conf.5#OPTIONS">loader.conf(5) § OPTIONS</a></span>. Некоторые важные опции:
</p>
<ul><li>
<code>default</code> – выбираемая по умолчанию запись; можно использовать подстановку, например <code>arch-*</code>
</li></ul>
<ul><li>
<code>timeout</code> – задержка меню в секундах. При значении <code>menu-hidden</code> или <code>0</code> (по умолчанию) меню будет скрыто.</li></ul>
<ul><li>
<code>console-mode</code> — разрешение экрана в консоли. Значение <code>keep</code> (по умолчанию) оставляет то разрешение, которое было выбрано прошивкой. Значение <code>max</code> выбирает максимальный доступный режим.</li></ul>
<ul><li>
<code>editor</code> — включение редактора параметров ядра. Значение <code>yes</code> (по умолчанию) — включить, <code>no</code> — отключить. Если к машине имеют физический доступ недоверенные пользователи, редактор лучше отключить (иначе они смогут обойти проверки доступа, например, добавив <code>init=/bin/bash</code> в параметры ядра).</li></ul>
<p>Пример:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/loader.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default  arch.conf
timeout  4
console-mode max
editor   no
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> 
<ul>
<li>Используйте пробелы; systemd-boot не поддерживает символы табуляции.</li>
<li>Опции <code>default</code> и <code>timeout</code> могут быть изменены в само́м меню загрузки, эти изменения будут храниться как переменные EFI <code>LoaderEntryDefault</code> и <code>LoaderConfigTimeout</code>, переопределяя настройки из файла конфигурации.</li>
<li>Можно использовать <code>bootctl set-default ""</code> и <code>bootctl set-timeout ""</code> для сброса переменных EFI, переопределяющих опции <code>default</code> и <code>timeout</code> соответственно.</li>
<li>Если вы указали <code>timeout 0</code>, вы можете получить доступ к меню, удерживая клавишу <code>Space</code>.</li>
<li>Пример базового конфигурационного файла расположен как <code>/usr/share/systemd/bootctl/loader.conf</code>.</li>
<li>Если в загрузчике (во время выбора загрузочной записи) появляются искажения/используется неправильное разрешение, попробуйте установить <code>console-mode</code> в <code>auto</code> (использует эвристику для выбора оптимального разрешения), <code>keep</code> (сохраняет разрешение, предоставленное прошивкой) или <code>2</code> (пытается выбрать первое нестандартное для UEFI разрешение).</li>
</ul>
</div>
<h3>
<span id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D1.8B.D1.85_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B5.D0.B9"></span><span class="mw-headline" id="Добавление_загрузочных_записей">Добавление загрузочных записей</span>
</h3>
<p><i>systemd-boot</i> ищет элементы для загрузочного меню в <code><i>esp</i>/loader/entries/*.conf</code>, а при использовании <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_XBOOTLDR">XBOOTLDR</a> — также в <code><i>boot</i>/loader/entries/*.conf</code>. Имейте в виду, что записи в <code><i>esp</i></code> могут использовать только файлы (ядра, initramfs и т. п.) только из <code><i>esp</i></code>. Аналогично, записи из раздела <code><i>boot</i></code> могут использовать только файлы из <code><i>boot</i></code>.
</p>
<p>Возможными опциями являются:
</p>
<ul>
<li>
<code>title</code> – название операционной системы. <b>Обязательная.</b>
</li>
<li>
<code>version</code> – версия ядра, отображаемая только если существуют несколько записей с одинаковым названием. Не обязательная.</li>
<li>
<code>machine-id</code> – идентификатор машины из <code>/etc/machine-id</code>, отображаемый только если существуют несколько записей с одинаковым названием и одинаковой версией. Не обязательная.</li>
<li>
<code>efi</code> – EFI-приложение для запуска, путь относительно <code><i>esp</i></code>; например, <code>/vmlinuz-linux</code>. Либо это, либо <code>linux</code> (смотрите ниже) является <b>обязательным.</b>
</li>
<li>
<code>options</code> – опции командной строки для передачи в EFI приложение или <a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметры ядра">параметры ядра</a>. Не обязательная, но вам нужно будет передать как минимум <code>root=<i>dev</i> rw</code> для загрузки Linux, где <code><i>dev</i></code> — блочное устройство, содержащее корневую файловую систему (смотрите <a href="../ru/Persistent_block_device_naming.html#%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_%D1%8F%D0%B4%D1%80%D0%B0" class="mw-redirect" title="Постоянные имена для блочных устройств">Постоянные имена для блочных устройств#Параметры ядра</a>). Эту опцию можно опустить, если корневому разделу присвоен правильный Root Partition Type GUID, как определено в <a rel="nofollow" class="external text" href="https://uapi-group.org/specifications/specs/discoverable_partitions_specification/">Discoverable Partitions Specification</a>, и если используется <a href="../ru/Mkinitcpio.html" title="Mkinitcpio (Русский)">mkinitcpio</a>-хук <code>systemd</code>.</li>
</ul>
<p>Для загрузки Linux можно вместо опции <code>efi</code> использовать опцию <code>linux</code>. Или <code>initrd</code> в дополнение к <code>options</code>. Синтаксис такой:
</p>
<ul><li>
<code>linux</code> или <code>initrd</code>, за которыми следует относительный путь к соответствующим файлам в ESP; например, <code>/vmlinuz-linux</code>; это будет автоматически преобразовано в <code>efi <i>путь</i></code> и <code>options initrd=<i>путь</i></code> — данный синтаксис поддерживается только для удобства и не имеет отличий в работе.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> При включенном <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a> и использовании <a href="../en/Unified_kernel_image.html" title="Unified kernel image">unified kernel image</a> с встроенным в него <code>.cmdline</code> переданные из загрузчика параметры ядра будут игнорироваться. Если <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a> отключен, то параметры загрузчика переопределят параметры из встроенного <code>.cmdline</code>.</div>
<p>Пример файлов, запускающих Arch из тома с <a href="../ru/Persistent_block_device_naming.html#by-label" title="Persistent block device naming (Русский)">меткой</a> <code><i>Arch OS</i></code> и загружающих <a href="../ru/Microcode.html" class="mw-redirect" title="Микрокод">микрокод</a> процессора Intel:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/arch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title   Arch Linux
linux   /vmlinuz-linux
initrd  /intel-ucode.img
initrd  /initramfs-linux.img
options root="LABEL=<i>Arch OS</i>" rw</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/arch-fallback.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title   Arch Linux (fallback initramfs)
linux   /vmlinuz-linux
initrd  /intel-ucode.img
initrd  /initramfs-linux-fallback.img
options root="LABEL=<i>Arch OS</i>" rw</pre>
<p><i>systemd-boot</i> при загрузке автоматически проверяет наличие <b>Windows Boot Manager</b> в <code>/EFI/Microsoft/Boot/Bootmgfw.efi</code>, <a href="../ru/Unified_Extensible_Firmware_Interface.html#UEFI_Shell" title="Unified Extensible Firmware Interface (Русский)">UEFI Shell</a> в <code>/shellx64.efi</code> и <b>EFI Default Loader</b> в <code>/EFI/BOOT/bootx64.efi</code>, а также специально подготовленных файлов ядра, находящихся в <code>/EFI/Linux/</code>. При их обнаружении будут сгенерированы записи с названиями <code>auto-windows</code>, <code>auto-efi-shell</code> и <code>auto-efi-default</code> соответственно. Эти записи не требуют ручной настройки загрузчика. Однако автоопределение других EFI-приложений не выполняется (в отличие от <a href="../ru/REFInd.html" title="REFInd (Русский)">rEFInd</a>), поэтому для загрузки ядра Linux необходимо создать загрузочные записи вручную.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> 
<ul>
<li>Доступные загрузочные записи, которые были настроены, можно посмотреть с помощью команды <code>bootctl list</code>.</li>
<li>Пример файла есть в <code>/usr/share/systemd/bootctl/arch.conf</code>.</li>
<li>Необходимые <a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметры ядра">параметры ядра</a> при использовании <a href="../en/LVM.html" class="mw-redirect" title="LVM (Русский)">LVM</a>, <a href="../en/Dm-crypt.html" class="mw-redirect" title="Dm-crypt (Русский)">dm-crypt</a> или <a href="../ru/Btrfs.html" title="Btrfs (Русский)">Btrfs</a> описаны в соответствующих статьях.</li>
</ul>
</div>
<h4>
<span id="EFI_Shell_.D0.B8.D0.BB.D0.B8_.D0.B4.D1.80.D1.83.D0.B3.D0.B8.D0.B5_EFI-.D0.BF.D1.80.D0.B8.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="EFI_Shell_или_другие_EFI-приложения">EFI Shell или другие EFI-приложения</span>
</h4>
<p>Если вы установили <a href="../ru/Unified_Extensible_Firmware_Interface.html#UEFI_Shell" title="Unified Extensible Firmware Interface (Русский)">UEFI Shell</a> с помощью пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=edk2-shell">edk2-shell</a></span>, <i>systemd-boot</i> автоматически найдёт его и добавит загрузочную запись, если есть файл в <code><i>esp</i>/shellx64.efi</code>.
Для этого можно сделать так:
</p>
<pre># cp /usr/share/edk2-shell/x64/Shell.efi /boot/shellx64.efi
</pre>
<p>Если вы установили <a href="../ru/REFInd.html#%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B" title="REFInd (Русский)">другие EFI-приложения</a> в ESP, можно создать для них загрузочные записи, подобные приведённым ниже.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Путь в опции <code>efi</code> задаётся относительно точки монтирования <i>esp</i>. Например, если ESP примонтирован в <code>/boot</code> и EFI-приложения находятся по адресам <code>/boot/EFI/xx.efi</code> и <code>/boot/yy.efi</code>, то вы должны указать опции <code>efi /EFI/xx.efi</code> and <code>efi /yy.efi</code> соответственно.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/fwupd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title  Firmware updator
efi     /EFI/tools/fwupdx64.efi
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/gdisk.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title  GPT fdisk (gdisk)
efi     /EFI/tools/gdisk_x64.efi
</pre>
<h4>
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D1.81_.D0.B4.D1.80.D1.83.D0.B3.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0"></span><span class="mw-headline" id="Загрузка_с_другого_диска">Загрузка с другого диска</span>
</h4>
<p><i>systemd-boot</i> не может запускать исполняемые файлы с разделов, отличных от ESP или XBOOTLDR, но может запустить для этого внешний скрипт.
</p>
<p>Сначала установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=edk2-shell">edk2-shell</a></span> (будет использоваться как интерпретатор). Также нужен PARTUUID раздела, на котором находится целевой EFI-файл, который можно получить с помощью команды <code>blkid</code>. Используя EFI Shell (как описано выше), мы можем с помощью команды <i>map</i> узнать <b>FS alias</b> (например: HD0a66666a2) и полный путь к целевому EFI-файлу (например: EFI\Microsoft\Boot\Bootmgfw.efi). FS alias соответствует PARTUUID раздела, в котором находится целевой EFI-файл.
</p>
<p>Затем с помощью команды <i>exit</i> мы можем загрузиться обратно в Linux, где создадим новую запись.
Для этого необходимо сначала создать в корне <i>esp</i> файл с расширением <i>.nsh</i>, содержащий FS alias, двоеточие и путь к EFI-файлу, например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/windows.nsh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HD0a66666a2:EFI\Microsoft\Boot\Bootmgfw.efi
</pre>
<p>После создания файла можно создать загрузочную запись, запускающую скрипт:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/windows.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title  Windows
efi     /shellx64.efi
options -nointerrupt -noconsolein -noconsoleout windows.nsh
</pre>
<p>Важно, чтобы путь к <i>efi</i> совпадал с местом, куда был скопирован edk2-shell на <i>esp</i>, а последний аргумент в options совпадал с именем файла <i>.nsh</i> в корне <i>esp</i>. Также обратите внимание, что EFI-файл edk2-shell можно переместить в другое место, чтобы избежать автоматического создания загрузочной записи.
</p>
<h3>
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.B2_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8_EFI"></span><span class="mw-headline" id="Загрузка_в_настройки_EFI">Загрузка в настройки EFI</span>
</h3>
<p><i>systemd-boot</i> автоматически добавит запись UEFI Firmware Setup, если прошивка вашего устройства поддерживает перезагрузку в настройки EFI.
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_.D1.81.D0.BF.D1.8F.D1.89.D0.B5.D0.B3.D0.BE_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D0.B0"></span><span class="mw-headline" id="Поддержка_спящего_режима">Поддержка спящего режима</span>
</h3>
<p>Смотрите статью <a href="../ru/Power_management/Suspend_and_hibernate.html" class="mw-redirect" title="Ждущий и спящий режимы">Ждущий и спящий режимы</a>.
</p>
<h3>
<span id=".D0.A0.D0.B5.D0.B4.D0.B0.D0.BA.D1.82.D0.BE.D1.80_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D0.BE.D0.B2_.D1.8F.D0.B4.D1.80.D0.B0_.D1.81_.D0.B7.D0.B0.D1.89.D0.B8.D1.82.D0.BE.D0.B9_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Редактор_параметров_ядра_с_защитой_паролем">Редактор параметров ядра с защитой паролем</span>
</h3>
<p>В качестве альтернативы можете установить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-boot-password/">systemd-boot-password</a></span><sup><small>AUR</small></sup> который поддерживает <code>password</code> опцию базовой конфигурации. Используйте <code>sbpctl generate</code> для генерации значения для этой опции.
</p>
<p>Установка <i>systemd-boot-password</i> следующей командой:
</p>
<pre># sbpctl install <i>esp</i></pre>
<p>С включенным редактором будет запрошен ваш пароль, перед тем как вы сможете редактировать параметры ядра.
</p>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Советы_и_рекомендации">Советы и рекомендации</span>
</h2>
<h3>
<span id=".D0.9A.D0.BB.D0.B0.D0.B2.D0.B8.D1.88.D0.B8_.D0.B2_.D0.BC.D0.B5.D0.BD.D1.8E_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8"></span><span class="mw-headline" id="Клавиши_в_меню_загрузки">Клавиши в меню загрузки</span>
</h3>
<p>Находясь в меню, вы можете использовать клавиши <code>t</code> и <code>T</code> для настройки таймаута меню и <code>e</code> для редактирования параметров ядра для выбранной загрузочной записи. Нажатие <code>h</code> покажет краткий список полезных горячих клавиш. Полный список доступных в меню сочетаний клавиш приведён в <span class="plainlinks archwiki-template-man" title="$ man 7 systemd-boot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-boot.7#KEY_BINDINGS">systemd-boot(7) § KEY BINDINGS</a></span>.
</p>
<h3>
<span id=".D0.92.D1.8B.D0.B1.D0.BE.D1.80_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B8_.D0.B4.D0.BB.D1.8F_.D1.81.D0.BB.D0.B5.D0.B4.D1.83.D1.8E.D1.89.D0.B5.D0.B9_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8"></span><span class="mw-headline" id="Выбор_записи_для_следующей_загрузки">Выбор записи для следующей загрузки</span>
</h3>
<p>Менеджер загрузки интегрирован с командой <i>systemctl</i>, что позволяет выбрать, какой вариант загрузки будет использоваться после перезагрузки. Например, если вы собрали своё ядро и создали загрузочную запись <code><i>esp</i>/loader/entries/arch-custom.conf</code>, для её загрузки можно просто выполнить:
</p>
<pre>$ systemctl reboot --boot-loader-entry=arch-custom.conf
</pre>
<p>и система перезагрузится с использованием указанной записи, но не изменит опцию по умолчанию для последующих загрузок. Для просмотра списка возможных вариантов используйте опцию <code>--boot-loader-entry=help</code>.
</p>
<p>Для перезагрузки в настройки прошивки используйте команду:
</p>
<pre>$ systemctl reboot --firmware-setup
</pre>
<h3><span class="mw-headline" id="Unified_kernel_image">Unified kernel image</span></h3>
<p><i>systemd-boot</i> автоматически находит <a href="../en/Unified_kernel_image.html" title="Unified kernel image">Unified kernel image</a> в каталоге <code><i>esp</i>/EFI/Linux/</code> и добавляет для них загрузочные записи, поэтому создавать их вручную в <code><i>esp</i>/loader/entries/</code> не нужно. (Обратите внимание, что образы должны иметь расширение <code>.efi</code>, чтобы <i>systemd-boot</i> их распознал.)
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Файлы в <code><i>esp</i>/loader/entries/</code> будут загружаться первыми, если в <code><i>esp</i>/loader/loader.conf</code> не задана опция <code>default</code>. Удалите эти записи или укажите значение по умолчанию с полным именем файла, то есть <code>default arch-linux.efi</code>
</div>
<h3>
<span id="Grml_.D0.BD.D0.B0_ESP"></span><span class="mw-headline" id="Grml_на_ESP">Grml на ESP</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Приведённые ниже инструкции не специфичны для Grml. С небольшими правками возможна установка и других программ (например, <a rel="nofollow" class="external text" href="https://www.system-rescue-cd.org/">SystemRescueCD</a>).</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Доступен <code>PKGBUILD</code>: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/grml-systemd-boot/">grml-systemd-boot</a></span><sup><small>AUR</small></sup>.</div>
<p><a rel="nofollow" class="external text" href="https://grml.org/">Grml</a> — это небольшая live-система с набором программ для системного администрирования и восстановления.
</p>
<p>Для установки Grml на ESP достаточно скопировать ядро <code>vmlinuz</code>, initramfs <code>initrd.img</code> и образ <code>grml64-small.squashfs</code> из файла iso в ESP. Для этого сначала скачайте <a rel="nofollow" class="external text" href="https://grml.org/">grml64-small.iso</a> и смонтируйте его (здесь точка монтирования обозначается как <i>mnt</i>); ядро и initramfs находятся в каталоге <code><i>mnt</i>/boot/grml64small/</code>, а образ — в каталоге <code><i>mnt</i>/live/grml64-small/</code>.
</p>
<p>Далее создайте в ESP каталог для Grml:
</p>
<pre># mkdir -p <i>esp</i>/grml
</pre>
<p>И скопируйте в него вышеупомянутые файлы:
</p>
<pre># cp <i>mnt</i>/boot/grml64small/vmlinuz <i>esp</i>/grml
# cp <i>mnt</i>/boot/grml64small/initrd.img <i>esp</i>/grml
# cp <i>mnt</i>/live/grml64-small/grml64-small.squashfs <i>esp</i>/grml
</pre>
<p>Затем создайте загрузочную запись для <i>systemd-boot</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/grml.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title   Grml Live Linux
linux   /grml/vmlinuz
initrd  /grml/initrd.img
options apm=power-off boot=live live-media-path=/grml/ nomce net.ifnames=0</pre>
<p>Список доступных опций можно посмотреть здесь: <a rel="nofollow" class="external text" href="https://git.grml.org/?p=grml-live.git;a=blob_plain;f=templates/GRML/grml-cheatcodes.txt;hb=HEAD">cheatcode for Grml</a>.
</p>
<h3>
<span id="systemd-boot_.D0.BD.D0.B0_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0.D1.85_BIOS"></span><span class="mw-headline" id="systemd-boot_на_системах_BIOS">systemd-boot на системах BIOS</span>
</h3>
<p>Если вам нужен загрузчик для BIOS-систем, соответствующий <a rel="nofollow" class="external text" href="https://uapi-group.org/specifications/specs/boot_loader_specification/">The Boot Loader Specification</a>, то можно использовать <i>systemd-boot</i>. Загрузчик <a href="../en/Clover.html" title="Clover">Clover</a> поддерживает загрузку в режиме BIOS и имитирует среду EFI.
</p>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D0.B2_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D0.B5_BIOS"></span><span class="mw-headline" id="Установка_после_загрузки_в_режиме_BIOS">Установка после загрузки в режиме BIOS</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Это нерекомендованный процесс.</div>
<p>Вы с таким же успехом можете установить systemd-boot, если загружаетесь в режиме BIOS. Тем не менее, от вас всё равно требуется сообщить прошивке запускать EFI файл <i>systemd-boot</i> при загрузке:
</p>
<ul>
<li>у вас есть работающий EFI shell где-нибудь.</li>
<li>ваш интерфейс прошивки предоставляет вам соответствующий способ настройки EFI файла, который будет загружен во время загрузки.</li>
</ul>
<p>Если вы имеете такую возможность, процесс установки будет проще: перейдите в ваш EFI shell или интерфейс настройки вашей прошивки и измените EFI файл по умолчанию вашей машины на <code>esp/EFI/systemd/systemd-bootx64.efi</code> ( или <code>systemd-bootia32.efi</code> если у вас 32 битная системная прошивка).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> интерфейс прошивки в Dell Latitude сериях предоставляет все необходимое, чтобы установить EFI загрузку, но EFI Shell не сможет осуществить запись в ПЗУ компьютера.</div>
<h3>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B8_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_efibootmgr"></span><span class="mw-headline" id="Создание_записи_вручную_с_помощью_efibootmgr">Создание записи вручную с помощью efibootmgr</span>
</h3>
<p>Если команда <code>bootctl install</code> не сработала, вы можете создать загрузочную запись EFI самостоятельно с помощью утилиты <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span>:
</p>
<pre># efibootmgr --create --disk /dev/sd<i>X</i> --part <i>Y</i> --loader "\EFI\systemd\systemd-bootx64.efi" --label "Linux Boot Manager" --unicode
</pre>
<p>где <code>/dev/sd<i>XY</i></code> — это <a href="../ru/EFI_system_partition.html" class="mw-redirect" title="Системный раздел EFI">системный раздел EFI</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Путь к EFI-приложению должен использовать обратную косую черту <code>\</code> в качестве разделителя.</div>
<h3>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B8_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_bcdedit_.D0.B8.D0.B7_Windows"></span><span class="mw-headline" id="Создание_записи_вручную_с_помощью_bcdedit_из_Windows">Создание записи вручную с помощью bcdedit из Windows</span>
</h3>
<p>Если по какой-то причине нужно создать загрузочную запись EFI из Windows, можно выполнить следующие команды в командной строке, запущенной с правами администратора:
</p>
<pre>&gt; bcdedit /copy {bootmgr} /d "Linux Boot Manager"
&gt; bcdedit /set {<i>guid</i>} path \EFI\systemd\systemd-bootx64.efi
</pre>
<p>Замените <code><i>guid</i></code> на id, возвращённый первой командой. Также можно сделать эту запись записью по умолчанию:
</p>
<pre>&gt; bcdedit /default {<i>guid</i>}
</pre>
<h3>
<span id=".D0.9C.D0.B5.D0.BD.D1.8E_.D0.BD.D0.B5_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_Windows"></span><span class="mw-headline" id="Меню_не_отображается_после_обновления_Windows">Меню не отображается после обновления Windows</span>
</h3>
<p>Обратитесь к разделу соответствующей статьи: <a href="../ru/Unified_Extensible_Firmware_Interface.html#Windows_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D1%82_%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8" title="Unified Extensible Firmware Interface (Русский)">Unified Extensible Firmware Interface (Русский)#Windows изменяет порядок загрузки</a>.
</p>
<h3>
<span id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B8_.D1.80.D0.B0.D0.B7.D0.B1.D0.BB.D0.BE.D0.BA.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B8_TPM_.D0.B4.D0.BB.D1.8F_Windows_BitLocker"></span><span class="mw-headline" id="Добавление_поддержки_разблокировки_TPM_для_Windows_BitLocker">Добавление поддержки разблокировки TPM для Windows BitLocker</span>
</h3>
<p>Чтобы BitLocker перестал запрашивать ключ восстановления, добавьте в файл <i>loader.conf</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/loader.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">reboot-for-bitlocker yes
</pre>
<p>Это установит UEFI-переменную <i>BootNext</i>, благодаря которой <i>Windows Boot Manager</i> будет загружаться без необходимости использования ключа восстановления BitLocker. Это однократное изменение, и <i>systemd-boot</i> остается загрузчиком по умолчанию. Нет необходимости добавлять загрузочную запись для Windows, если она была определена автоматически.
</p>
<p>Это экспериментальная функция, поэтому прочитайте <span class="plainlinks archwiki-template-man" title="$ man 5 loader.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/loader.conf.5">loader.conf(5)</a></span>.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><a rel="nofollow" class="external free" href="https://systemd.io/BOOT/">https://systemd.io/BOOT/</a></li>
<li>
<a rel="nofollow" class="external free" href="https://github.com/systemd/systemd/tree/master/src/boot/efi">https://github.com/systemd/systemd/tree/master/src/boot/efi</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2024-12-15 ⓘ]</sup>
</li>
<li><a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=254374">https://bbs.archlinux.org/viewtopic.php?id=254374</a></li>
<li><a rel="nofollow" class="external free" href="https://uapi-group.org/specifications/specs/boot_loader_specification/">https://uapi-group.org/specifications/specs/boot_loader_specification/</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Boot_loaders.html" title="Category:Boot loaders (Русский)">Boot loaders (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Systemd-boot_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=824150">https://wiki.archlinux.org/index.php?title=Systemd-boot_(Русский)&amp;oldid=824150</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 27 December 2024, at 20:51.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
