<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>PulseAudio (Русский)/Examples (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PulseAudio_Русский_Examples_Русский rootpage-PulseAudio_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Настройка_стандартных_устройств_ввода" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D1%85_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2_%D0%B2%D0%B2%D0%BE%D0%B4%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Настройка стандартных устройств ввода</span>
			</div>
		</a>
		
		<ul id="toc-Настройка_стандартных_устройств_ввода-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Установка_стандартного_устройства_вывода" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B3%D0%BE_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Установка стандартного устройства вывода</span>
			</div>
		</a>
		
		<ul id="toc-Установка_стандартного_устройства_вывода-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Одновременный_HDMI_и_аналоговый_вывод" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9E%D0%B4%D0%BD%D0%BE%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_HDMI_%D0%B8_%D0%B0%D0%BD%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2%D1%8B%D0%B9_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Одновременный HDMI и аналоговый вывод</span>
			</div>
		</a>
		
		<ul id="toc-Одновременный_HDMI_и_аналоговый_вывод-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Настройка_HDMI_вывода" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_HDMI_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Настройка HDMI вывода</span>
			</div>
		</a>
		
			<button aria-controls="toc-Настройка_HDMI_вывода-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка HDMI вывода subsection</span>
			</button>
		
		<ul id="toc-Настройка_HDMI_вывода-sublist" class="vector-toc-list">
			<li id="toc-Поиск_HDMI_вывода" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B8%D1%81%D0%BA_HDMI_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Поиск HDMI вывода</span>
				</div>
			</a>
			
			<ul id="toc-Поиск_HDMI_вывода-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проверка_на_правильную_карту" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D0%BD%D0%B0_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D1%8C%D0%BD%D1%83%D1%8E_%D0%BA%D0%B0%D1%80%D1%82%D1%83">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Проверка на правильную карту</span>
				</div>
			</a>
			
			<ul id="toc-Проверка_на_правильную_карту-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ручная_настройка_PulseAudio,_чтобы_он_находил_HDMI_Nvidia" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D1%83%D1%87%D0%BD%D0%B0%D1%8F_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_PulseAudio,_%D1%87%D1%82%D0%BE%D0%B1%D1%8B_%D0%BE%D0%BD_%D0%BD%D0%B0%D1%85%D0%BE%D0%B4%D0%B8%D0%BB_HDMI_Nvidia">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Ручная настройка PulseAudio, чтобы он находил HDMI Nvidia</span>
				</div>
			</a>
			
			<ul id="toc-Ручная_настройка_PulseAudio,_чтобы_он_находил_HDMI_Nvidia-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Автоматическое_переключение_звука_на_HDMI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B2%D1%83%D0%BA%D0%B0_%D0%BD%D0%B0_HDMI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Автоматическое переключение звука на HDMI</span>
				</div>
			</a>
			
			<ul id="toc-Автоматическое_переключение_звука_на_HDMI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Настройка_объёмного_звука" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%BE%D0%B1%D1%8A%D1%91%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B7%D0%B2%D1%83%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Настройка объёмного звука</span>
			</div>
		</a>
		
			<button aria-controls="toc-Настройка_объёмного_звука-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка объёмного звука subsection</span>
			</button>
		
		<ul id="toc-Настройка_объёмного_звука-sublist" class="vector-toc-list">
			<li id='toc-Отключение_UCM/"HiFi"' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_UCM/"HiFi"'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Отключение UCM/"HiFi"</span>
				</div>
			</a>
			
			<ul id='toc-Отключение_UCM/"HiFi"-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Разделение_передний/задний" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%BD%D0%B8%D0%B9/%D0%B7%D0%B0%D0%B4%D0%BD%D0%B8%D0%B9">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Разделение передний/задний</span>
				</div>
			</a>
			
			<ul id="toc-Разделение_передний/задний-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Разделение_7.1_на_5.1+2.0" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_7.1_%D0%BD%D0%B0_5.1+2.0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Разделение 7.1 на 5.1+2.0</span>
				</div>
			</a>
			
			<ul id="toc-Разделение_7.1_на_5.1+2.0-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отключение_ремиксинга_LFE" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B5%D0%BC%D0%B8%D0%BA%D1%81%D0%B8%D0%BD%D0%B3%D0%B0_LFE">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.4</span>
					<span>Отключение ремиксинга LFE</span>
				</div>
			</a>
			
			<ul id="toc-Отключение_ремиксинга_LFE-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Бинауральные_наушники" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%91%D0%B8%D0%BD%D0%B0%D1%83%D1%80%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BD%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.5</span>
					<span>Бинауральные наушники</span>
				</div>
			</a>
			
			<ul id="toc-Бинауральные_наушники-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-PulseAudio_через_сеть" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_%D1%81%D0%B5%D1%82%D1%8C">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>PulseAudio через сеть</span>
			</div>
		</a>
		
			<button aria-controls="toc-PulseAudio_через_сеть-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle PulseAudio через сеть subsection</span>
			</button>
		
		<ul id="toc-PulseAudio_через_сеть-sublist" class="vector-toc-list">
			<li id="toc-Поддержка_TCP_(звук_через_сеть)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_TCP_(%D0%B7%D0%B2%D1%83%D0%BA_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_%D1%81%D0%B5%D1%82%D1%8C)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>Поддержка TCP  (звук через сеть)</span>
				</div>
			</a>
			
			<ul id="toc-Поддержка_TCP_(звук_через_сеть)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Поддержка_TCP_с_анонимными_клиентами" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_TCP_%D1%81_%D0%B0%D0%BD%D0%BE%D0%BD%D0%B8%D0%BC%D0%BD%D1%8B%D0%BC%D0%B8_%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%B0%D0%BC%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>Поддержка TCP с анонимными клиентами</span>
				</div>
			</a>
			
			<ul id="toc-Поддержка_TCP_с_анонимными_клиентами-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Zeroconf_(Avahi)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Zeroconf_(Avahi)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3</span>
					<span>Zeroconf (Avahi)</span>
				</div>
			</a>
			
			<ul id="toc-Zeroconf_(Avahi)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Переключение_PulseAudio_сервера_используя_локальные_клиенты_Х" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_PulseAudio_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D1%8B_%D0%A5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4</span>
					<span>Переключение PulseAudio сервера используя локальные клиенты Х</span>
				</div>
			</a>
			
			<ul id="toc-Переключение_PulseAudio_сервера_используя_локальные_клиенты_Х-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Выбор_сервера" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%B1%D0%BE%D1%80_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.5</span>
					<span>Выбор сервера</span>
				</div>
			</a>
			
			<ul id="toc-Выбор_сервера-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Если_всё_остальное_не_работает" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%95%D1%81%D0%BB%D0%B8_%D0%B2%D1%81%D1%91_%D0%BE%D1%81%D1%82%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.6</span>
					<span>Если всё остальное не работает</span>
				</div>
			</a>
			
			<ul id="toc-Если_всё_остальное_не_работает-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-ALSA_monitor_source" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#ALSA_monitor_source">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>ALSA monitor source</span>
			</div>
		</a>
		
		<ul id="toc-ALSA_monitor_source-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Наблюдение_конкретного_вывода" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D0%B1%D0%BB%D1%8E%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BD%D0%BA%D1%80%D0%B5%D1%82%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Наблюдение конкретного вывода</span>
			</div>
		</a>
		
		<ul id="toc-Наблюдение_конкретного_вывода-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-PulseAudio_через_JACK" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_JACK">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">9</span>
				<span>PulseAudio через JACK</span>
			</div>
		</a>
		
			<button aria-controls="toc-PulseAudio_через_JACK-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle PulseAudio через JACK subsection</span>
			</button>
		
		<ul id="toc-PulseAudio_через_JACK-sublist" class="vector-toc-list">
			<li id="toc-Метод_KXStudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4_KXStudio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1</span>
					<span>Метод KXStudio</span>
				</div>
			</a>
			
			<ul id="toc-Метод_KXStudio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ручная_настройка_устройств_вывода" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D1%83%D1%87%D0%BD%D0%B0%D1%8F_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.2</span>
					<span>Ручная настройка устройств вывода</span>
				</div>
			</a>
			
			<ul id="toc-Ручная_настройка_устройств_вывода-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_с_помощью_скриптов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.3</span>
					<span>Настройка с помощью скриптов</span>
				</div>
			</a>
			
			<ul id="toc-Настройка_с_помощью_скриптов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Путем_остановки_PulseAudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%83%D1%82%D0%B5%D0%BC_%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8_PulseAudio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.4</span>
					<span>Путем остановки PulseAudio</span>
				</div>
			</a>
			
			<ul id="toc-Путем_остановки_PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-PulseAudio_через_OSS" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_OSS">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">10</span>
				<span>PulseAudio через OSS</span>
			</div>
		</a>
		
		<ul id="toc-PulseAudio_через_OSS-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Запуск_PulseAudio_из_chroot" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_PulseAudio_%D0%B8%D0%B7_chroot">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">11</span>
				<span>Запуск PulseAudio из chroot</span>
			</div>
		</a>
		
		<ul id="toc-Запуск_PulseAudio_из_chroot-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Отключение_автоматического_запуска_сервера_PulseAudio" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0_PulseAudio">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">12</span>
				<span>Отключение автоматического запуска сервера PulseAudio</span>
			</div>
		</a>
		
		<ul id="toc-Отключение_автоматического_запуска_сервера_PulseAudio-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Отключение_демона_pulseaudio_полностью" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B5%D0%BC%D0%BE%D0%BD%D0%B0_pulseaudio_%D0%BF%D0%BE%D0%BB%D0%BD%D0%BE%D1%81%D1%82%D1%8C%D1%8E">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">13</span>
				<span>Отключение демона pulseaudio полностью</span>
			</div>
		</a>
		
		<ul id="toc-Отключение_демона_pulseaudio_полностью-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Изменить_стерео_на_моно" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C_%D1%81%D1%82%D0%B5%D1%80%D0%B5%D0%BE_%D0%BD%D0%B0_%D0%BC%D0%BE%D0%BD%D0%BE">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">14</span>
				<span>Изменить стерео на моно</span>
			</div>
		</a>
		
		<ul id="toc-Изменить_стерео_на_моно-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Поменять_левый/правый_каналы" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%BC%D0%B5%D0%BD%D1%8F%D1%82%D1%8C_%D0%BB%D0%B5%D0%B2%D1%8B%D0%B9/%D0%BF%D1%80%D0%B0%D0%B2%D1%8B%D0%B9_%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB%D1%8B">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">15</span>
				<span>Поменять левый/правый каналы</span>
			</div>
		</a>
		
		<ul id="toc-Поменять_левый/правый_каналы-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-PulseAudio_в_качестве_ненавязчивого_проводника_ALSA" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#PulseAudio_%D0%B2_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5_%D0%BD%D0%B5%D0%BD%D0%B0%D0%B2%D1%8F%D0%B7%D1%87%D0%B8%D0%B2%D0%BE%D0%B3%D0%BE_%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D0%B8%D0%BA%D0%B0_ALSA">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">16</span>
				<span>PulseAudio в качестве ненавязчивого проводника ALSA</span>
			</div>
		</a>
		
		<ul id="toc-PulseAudio_в_качестве_ненавязчивого_проводника_ALSA-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Наушники_и_колонки_подключены_одновременно_и_переключаются_приложением_на_лету" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%B8_%D0%B8_%D0%BA%D0%BE%D0%BB%D0%BE%D0%BD%D0%BA%D0%B8_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D1%8B_%D0%BE%D0%B4%D0%BD%D0%BE%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE_%D0%B8_%D0%BF%D0%B5%D1%80%D0%B5%D0%BA%D0%BB%D1%8E%D1%87%D0%B0%D1%8E%D1%82%D1%81%D1%8F_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC_%D0%BD%D0%B0_%D0%BB%D0%B5%D1%82%D1%83">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">17</span>
				<span>Наушники и колонки подключены одновременно и переключаются приложением на лету</span>
			</div>
		</a>
		
		<ul id="toc-Наушники_и_колонки_подключены_одновременно_и_переключаются_приложением_на_лету-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Одновременное_использование_PulseAudio_несколькими_пользователями" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9E%D0%B4%D0%BD%D0%BE%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B5_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_PulseAudio_%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D0%BC%D0%B8_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">18</span>
				<span>Одновременное использование PulseAudio несколькими пользователями</span>
			</div>
		</a>
		
		<ul id="toc-Одновременное_использование_PulseAudio_несколькими_пользователями-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">PulseAudio (Русский)/Examples (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../../en/PulseAudio/Examples.html" title="PulseAudio/Examples – English" lang="en" hreflang="en" data-title="PulseAudio/Examples" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/PulseAudio/%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB" title="PulseAudio/サンプル – 日本語" lang="ja" hreflang="ja" data-title="PulseAudio/サンプル" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <bdi dir="ltr"><a href="../../ru/PulseAudio.html" title="PulseAudio (Русский)">PulseAudio (Русский)</a></bdi>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../../en/PulseAudio/Examples.html" title="PulseAudio/Examples">PulseAudio/Examples</a>. Дата последней синхронизации: 16 февраля 2018. Вы можете <a href="../../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=PulseAudio/Examples&amp;diff=0&amp;oldid=510342">изменения</a>.</div>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D1.8B.D1.85_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2_.D0.B2.D0.B2.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Настройка_стандартных_устройств_ввода">Настройка стандартных устройств ввода</span>
</h2>
<p>Показать доступные устройства ввода:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd list-sources | grep -e device.string -e 'name:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">name: &lt;input&gt;
 device.string = "hw:2"
name: &lt;oss_input.dsp&gt;
 device.string = "/dev/dsp"
name: &lt;alsa_output.pci-0000_04_01.0.analog-stereo.monitor&gt;
name: &lt;combined.monitor&gt;</pre>
<p>Чтобы установить их как устройства по умолчанию для всей системы, добавьте названия источников в файл /etc/pulse/default.pa
</p>
<pre>set-default-source alsa_output.pci-0000_04_01.0.analog-stereo.monitor
</pre>
<p>Для временного использования
</p>
<pre>$ pacmd "set-default-source alsa_output.pci-0000_04_01.0.analog-stereo.monitor"
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> При использовании в командах, имя устройства по умолчанию может быть заменено как <code>@DEFAULT_SOURCE@</code>, например: <code>$ pactl set-source-mute @DEFAULT_SOURCE@ toggle</code>.</div>
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.81.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D0.BE.D0.B3.D0.BE_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Установка_стандартного_устройства_вывода">Установка стандартного устройства вывода</span>
</h2>
<p>Определите правильное имя нового источника, который содержит * в начале индекса:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd list-sinks | grep -e 'name:' -e 'index'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  * index: 0
	name: &lt;alsa_output.pci-0000_04_01.0.analog-stereo&gt;
    index: 1
	name: &lt;combined&gt;
</pre>
<p>Для установки его как устройства по умолчанию для всей системы, добавьте следующее в /etc/pulse/default.pa
</p>
<pre>set-default-sink alsa_output.pci-0000_04_01.0.analog-stereo
</pre>
<p>Когда вы закончите, можете выйти/войти в систему или перезапустить PulseAudio вручную, чтобы изменения вступили в силу.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Устройства вывода, которые установлены по умолчанию отмечены <code>*</code> в начале индекса.</li>
<li>Нумерация устройств вывода не гарантируется быть постоянной, поэтому все устройства вывода в файле <code>default.pa</code> должны быть идентифицированы по имени.</li>
<li>Для быстрой идентификации во время выполнения (например, для управления громкости звука), вы можете использовать индекс устройства вывода вместо имени устройства вывода:<pre>$ pactl set-sink-volume 0 +3%
$ pactl set-sink-volume 0 -- -3%
$ pactl set-sink-mute 0 toggle
</pre>
</li>
<li>Чтобы избежать ненужных изменений в 100% нормальном звуке, лучше использовать альтернативные утилиты менеджмента звука. См. <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=124513">тему на форуме (Англ.)</a> для доп. информации</li>
</ul>
</div>
<h2>
<span id=".D0.9E.D0.B4.D0.BD.D0.BE.D0.B2.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D0.B9_HDMI_.D0.B8_.D0.B0.D0.BD.D0.B0.D0.BB.D0.BE.D0.B3.D0.BE.D0.B2.D1.8B.D0.B9_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4"></span><span class="mw-headline" id="Одновременный_HDMI_и_аналоговый_вывод">Одновременный HDMI и аналоговый вывод</span>
</h2>
<p>PulseAudio позволяет одновременный вывод в множество источников. В этом примере, некоторые приложения настроены использовать HDMI, в то время как некоторые настроены использовать аналоговый вывод. Отправлять звук можно в несколько приложений сразу.
</p>
<pre>$ aplay -l
**** List of PLAYBACK Hardware Devices ****
card 0: Intel [HDA Intel], device 0: ALC889A Analog [ALC889A Analog]
  Subdevices: 0/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 1: ALC889A Digital [ALC889A Digital]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: Intel [HDA Intel], device 3: HDMI 0 [HDMI 0]
  Subdevices: 0/1
  Subdevice #0: subdevice #0</pre>
<p>Или используя команду <code>pacmd</code>: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd list-sinks  | grep -e 'name:'  -e 'alsa.device ' -e 'alsa.subdevice '</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">	name: &lt;alsa_output.pci-0000_00_1b.0.analog-stereo&gt;
		alsa.subdevice = "0"
		alsa.device = "0"</pre>
<p>Главное в файле конфигурации вроде этого - понять, что устройство, выбранное в pavucontrol в <i>Configuration &gt; Internal Audio</i> - стандартное. Используйте <i>pavucontrol &gt; Configuration</i> и выберите HDMI в качестве профиля.
</p>
<p>Чтобы установить аналоговое утройство как вторичное устройство вывода, добавьте следующее в начало конфигурационного фала <code>/etc/pulse/default.pa</code>, перед тем, как начнётся загрузка модулей: 
</p>
<pre>### Загрузите аналогое устройство
load-module module-alsa-sink device=hw:0,0
load-module module-combine-sink sink_name=combined
set-default-sink combined
</pre>
<p>Перезапустите PulseAudio, запустите <i>pavucontrol</i> и выберите пункт "Output Devices". Вы должны увидеть следующие настройки:
</p>
<ol>
<li>Internal Audio Digital Stereo (HDMI)</li>
<li>Internal Audio</li>
<li>Simultaneous output to Internal Audio Digital Stereo (HDMI), Internal Audio</li>
</ol>
<p>Теперь запустите программу, которая будет использовать PulseAudio, такую как MPlayer, VLC, mpd, и т.д. и переключитесь во вкладку "Воспроизведение". Выпадающий список должен предоставить выбор из трёх устройств.
</p>
<p>Так же см. <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=118026">этот пост</a> и <a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/FAQ#Can_I_use_PulseAudio_to_playback_music_on_two_sound_cards_simultaneously.3F">PulseAudio FAQ</a> для вариаций по этой теме.
</p>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_HDMI_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Настройка_HDMI_вывода">Настройка HDMI вывода</span>
</h2>
<p>Как выделено в <a rel="nofollow" class="external free" href="ftp://download.nvidia.com/XFree86/gpu-hdmi-audio-document/gpu-hdmi-audio.html#_issues_in_pulseaudio">ftp://download.nvidia.com/XFree86/gpu-hdmi-audio-document/gpu-hdmi-audio.html#_issues_in_pulseaudio</a>, пока HDMI порт - первое устройство вывода, PulseAudio не сможет использовать любое другое аудио при использовании некоторых видеокарт с поддержкой HDMI. Это происходит из-за бага PulseAudio, из-за которого он может выбрать только первый HDMI, как устройство вывода. Обход этой проблемы, написан ниже - найти, какой HDMI вывод работает с помощью aplay из ALSA.
</p>
<p>Проблема в основном возникает с некоторыми картами от nVidia и некоторыми другими, см. <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=133222">эту тему на форуме</a>
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.B8.D1.81.D0.BA_HDMI_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Поиск_HDMI_вывода">Поиск HDMI вывода</span>
</h3>
<p>Далее найдите рабочий вывод из списка доступных карт
</p>
<pre># aplay -l
</pre>
<pre>примерный вывод:
 **** List of PLAYBACK Hardware Devices ****
 card 0: NVidia [HDA NVidia], device 0: ALC1200 Analog [ALC1200 Analog]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 0: NVidia [HDA NVidia], device 3: ALC1200 Digital [ALC1200 Digital]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 3: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 7: HDMI 0 [HDMI 0]
   Subdevices: 0/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 8: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
 card 1: NVidia_1 [HDA NVidia], device 9: HDMI 0 [HDMI 0]
   Subdevices: 1/1
   Subdevice #0: subdevice #0
</pre>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D0.BD.D0.B0_.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D0.BB.D1.8C.D0.BD.D1.83.D1.8E_.D0.BA.D0.B0.D1.80.D1.82.D1.83"></span><span class="mw-headline" id="Проверка_на_правильную_карту">Проверка на правильную карту</span>
</h3>
<p>Теперь, когда у вас есть список карт, пользователям нужно проверить, какая из них выводит на ТВ/Монитор
</p>
<pre># aplay -D plughw:1,3 /usr/share/sounds/alsa/Front_Right.wav
</pre>
<p>Где 1 - карта, а 3 - устройство-замена в предыдущих разделах. Если звука нет, попробуйте другое устройство-замену (на моей карте пришлось использовать карту 1 устройство 7)
</p>
<h3>
<span id=".D0.A0.D1.83.D1.87.D0.BD.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_PulseAudio.2C_.D1.87.D1.82.D0.BE.D0.B1.D1.8B_.D0.BE.D0.BD_.D0.BD.D0.B0.D1.85.D0.BE.D0.B4.D0.B8.D0.BB_HDMI_Nvidia"></span><span class="mw-headline" id="Ручная_настройка_PulseAudio,_чтобы_он_находил_HDMI_Nvidia">Ручная настройка PulseAudio, чтобы он находил HDMI Nvidia</span>
</h3>
<p>Чтобы заставить PulseAudio находить HDMI, нужно отредактировать <code>/etc/pulse/default.pa</code>:
</p>
<pre># load-module module-alsa-sink device=hw:1,7
</pre>
<p>где 1 - карта, а 7 - устройство,найденное в предыдущем разделе
перезапустите pulse audio
</p>
<pre> $ pulseaudio -k
 $ pulseaudio --start
</pre>
<p>откройте менеджер настройки аудио, убедитесь в том, что во вкладке "hardware" - графическая карта с HDMI установлена как "Digital Stereo (HDMI) Output" (Моя карта называлась "GF100 High Definition Audio Controller")
</p>
<p>Далее, откройте вкладку вывода. Теперь там должно быть два выхода HDMI для графической карты. Проверьте, какой работает, выбрав один из них, а затем воспроизведите любое аудио. Например, запустите фильм с помощью VLC, и если выход не работает, выберите следующий.
</p>
<h3>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B2.D1.83.D0.BA.D0.B0_.D0.BD.D0.B0_HDMI"></span><span class="mw-headline" id="Автоматическое_переключение_звука_на_HDMI">Автоматическое переключение звука на HDMI</span>
</h3>
<p>Создайте скрипт для переключения на желаемый профиль при присоединении кабеля HDMI:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/hdmi_sound_toggle.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
USER_NAME=$(w -hs | awk -v vt=tty$(fgconsole) '$0 ~ vt {print $1}')
USER_ID=$(id -u "$USER_NAME")
HDMI_STATUS=$(&lt;/sys/class/drm/card0/*HDMI*/status)

export PULSE_SERVER="unix:/run/user/"$USER_ID"/pulse/native"

if [[ $HDMI_STATUS == connected ]]
then
   sudo -u "$USER_NAME" pactl --server "$PULSE_SERVER" set-card-profile 0 output:hdmi-stereo+input:analog-stereo
else
   sudo -u "$USER_NAME" pactl --server "$PULSE_SERVER" set-card-profile 0 output:analog-stereo+input:analog-stereo
fi
</pre>
<p>Сделайте скрипт исполняемым:
</p>
<pre>chmod +x /usr/local/bin/hdmi_sound_toggle.sh
</pre>
<p>Создайте правило <a href="../../ru/Udev.html" title="Udev (Русский)">udev</a> для запуска этого сценария, когда статус HDMI изменится:
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> правило udev не может напрямую запустить скрипт, обойдите это воспользовавшись .service для запуска скрипта</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-hdmi_sound.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">KERNEL=="card0", SUBSYSTEM=="drm", ACTION=="change", RUN+="/usr/bin/systemctl start hdmi_sound_toggle.service"</pre>
<p>И, наконец, создайте файл .service требуемый правилом udev:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/hdmi_sound_toggle.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=hdmi sound hotplug

[Service]
Type=simple
RemainAfterExit=no
ExecStart=/usr/local/bin/hdmi_sound_toggle.sh

[Install]
WantedBy=multi-user.target</pre>
<p>Для того чтобы внесённые изменения вступили в силу, не забудьте перезагрузить правила udev:
</p>
<pre>udevadm control --reload-rules
</pre>
<p>Также, вам необходимо перезагрузить компоненты systemd.
</p>
<pre>systemctl daemon-reload
</pre>
<p>Может потребоваться перезагрузка.
</p>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BE.D0.B1.D1.8A.D1.91.D0.BC.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B7.D0.B2.D1.83.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка_объёмного_звука">Настройка объёмного звука</span>
</h2>
<p>У многих людей есть звуковая карта с поддержкой объёмного звука, но устройства воспроизведения поддерживают только 2 канала. PulseAudio не может выставить звуковую настройку для объёмного звука по умолчанию. Чтобы включить все каналы, измените <code>/etc/pulse/daemon.conf</code>: раскомментируйте строку default-sample-channels и выставьте значение <b>6</b> 
для <i>5.1</i> или <b>8</b> для <i>7.1</i> и т.д.
</p>
<pre># Стандартное
default-sample-channels=2
# Для 5.1
default-sample-channels=6
# Для 7.1
default-sample-channels=8
</pre>
<p>Если каналы неправлено назначены или регуляция звука для отдельных каналов в pavucontrol работает неправильно, и у вас есть HDMI и аналоговая звуковая карта, попробуйте добавить эту строку в <code>/etc/pulse/default.pa</code>
</p>
<pre>load-module module-combine channels=6 channel_map=front-left,front-right,rear-left,rear-right,front-center,lfe
</pre>
<p>Обратите внимание, что это пример для настройки 5.1.
</p>
<p>После этого перезапустите PulseAudio
</p>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_UCM.2F.22HiFi.22"></span><span class="mw-headline" id='Отключение_UCM/"HiFi"'>Отключение UCM/"HiFi"</span>
</h3>
<p>В большинстве руководств по настройке объёмного звука в PulseAudio говорится, что нужно выбрать правильный профиль объёмного звука для вашей карты/HDMI-выхода, что можно сделать на вкладке «Конфигурация» в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>. Однако вы можете обнаружить, что единственным профилем для вашей карты является «HiFi: Play HiFi quality Music», который не является профилем для объёмного звука. Из-за этого вы можете потратить кучу времени, пытаясь создать профиль для вашей карты или правильно настроить правила udev, но всё это не поможет.
</p>
<p>На самом деле это связано с тем, что у вас установлен <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-ucm-conf">alsa-ucm-conf</a></span>, поэтому PulseAudio игнорирует свои собственные профили и пытается использовать вместо них профили <a rel="nofollow" class="external text" href="https://www.alsa-project.org/alsa-doc/alsa-lib/group__ucm__conf.html">ALSA Use Case Manager</a>. К сожалению, если ALSA UCM не имеет нужного вам профиля, вы останетесь с 2-канальным «HiFi» по умолчанию. К счастью, это можно исправить, переключившись обратно на профили PulseAudio, которые по умолчанию используют конфигурацию объёмного звука для звуковых карт/HDMI-выходов с поддержкой объёмного звука.
</p>
<p>Самый простой способ сделать это — отредактировать файл <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-udev-detect use_ucm=0
</pre>
<p>После редактирования <a href="../../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезагрузите">перезагрузите</a> пользовательский юнит <code>pulseaudio.service</code>.
</p>
<p>После этого ваша установка PulseAudio будет игнорировать UCM и использовать профили PulseAudio, среди которых, если вы изменили свои default-sample-channels в соответствии с приведёнными выше инструкциями, будет и профиль объёмного звука. Вы можете проверить это на вкладке «Конфигурация» в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span>, где больше не должно быть профиля «HiFi».
</p>
<h3>
<span id=".D0.A0.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4.D0.BD.D0.B8.D0.B9.2F.D0.B7.D0.B0.D0.B4.D0.BD.D0.B8.D0.B9"></span><span class="mw-headline" id="Разделение_передний/задний">Разделение передний/задний</span>
</h3>
<p>Подключите устройство к переднему аналоговому выходу и наушники - к заднему. Будет полезно разделить передний/задний устройства вывода. Добавьте следующее в <code>/etc/pulse/default.pa</code>:
</p>
<pre> load-module module-remap-sink sink_name=speakers remix=no master=alsa_output.pci-0000_05_00.0.analog-surround-40 channels=2 master_channel_map=front-left,front-right channel_map=front-left,front-right
 load-module module-remap-sink sink_name=headphones remix=no master=alsa_output.pci-0000_05_00.0.analog-surround-40 channels=2 master_channel_map=rear-left,rear-right channel_map=front-left,front-right
</pre>
<p>Убедитесь, что заменили alsa_output.pci-0000_05_00.0.analog-surround-40 названием своей звуковой картой, которое можно увидеть в 'pacmd list-sinks'.
Теперь у вас есть 2 дополнительных устройства вывода, которые можно использовать раздельно. Вы можете подобрать название 'sink_name' сами, важно, чтобы оно не совпадало с существующими именами. Параметр 'remix' контролирует, в каком из устройств стоит поднять/опустить стандартный звук для совпадением с каналами устройств вывода.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Если pulseaudio выдаёт ошибку <code>master sink not found</code> - закомментируйте строку переназначения, запустите PulseAudio и проверьте, что выход вашей звуковой карты установлен на тот, что вы указали выше (напр. analog surround 4.0). Вы также можете попробовать <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B3%D0%BE_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0">номер устройства вывода</a> вместо имени.</div>
<h3>
<span id=".D0.A0.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_7.1_.D0.BD.D0.B0_5.1.2B2.0"></span><span class="mw-headline" id="Разделение_7.1_на_5.1+2.0">Разделение 7.1 на 5.1+2.0</span>
</h3>
<p>По примеру выше, вы также можете поделить 7.1 на 5.1 и стерео.
Установите режим карты на 7.1, затем добавьте эти строки в <code>/etc/pulse/default.pa</code>:
</p>
<pre> load-module module-remap-sink sink_name=Surround remix=no master=alsa_output.pci-0000_00_14.2.analog-surround-71 channels=6 master_channel_map=front-left,front-right,rear-left,rear-right,front-center,lfe channel_map=front-left,front-right,rear-left,rear-right,front-center,lfe
 load-module module-remap-sink sink_name=Stereo remix=yes master=alsa_output.pci-0000_00_14.2.analog-surround-71 channels=2 master_channel_map=front-left,front-right channel_map=front-left,front-right
</pre>
<p>Убедитесь, что заменили alsa_output.pci-0000_00_14.2 именем своей звуковой карты, которое можно получить, запустив 'pacmd list-sinks'.
Эта конфигурация будет использовать передние/задние/центральные+lfe(зелёный/черный/оранжевый) разъемы для 5.1 и боковой (серый) разъем для стерео.
Это также уменьшит любое аудио до стерео для стерео выхода, но не затронет 5.1.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Если pulseaudio выдаёт ошибку <code>master sink not found</code> - закомментируйте строку переназначения, запустите PulseAudio и проверьте, что выход вашей звуковой карты установлен на тот, что вы указали выше (напр. analog surround 4.0). Вы также можете попробовать <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B3%D0%BE_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0">номер устройства вывода</a> вместо имени.</div>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.80.D0.B5.D0.BC.D0.B8.D0.BA.D1.81.D0.B8.D0.BD.D0.B3.D0.B0_LFE"></span><span class="mw-headline" id="Отключение_ремиксинга_LFE">Отключение ремиксинга LFE</span>
</h3>
<p>По умолчанию, PusleAudio преобразует число каналов в соответствии с default-sample-channels и, начиная с версии 7, также преобразует канал LFE. Если вы хотите отключить преобразование LFE, раскомментируйте строку:
</p>
<pre>; enable-lfe-remixing = yes
</pre>
<p>и замените yes на no :
</p>
<pre>enable-lfe-remixing = no
</pre>
<p>затем перезапустите PulseAudio.
</p>
<h3>
<span id=".D0.91.D0.B8.D0.BD.D0.B0.D1.83.D1.80.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BD.D0.B0.D1.83.D1.88.D0.BD.D0.B8.D0.BA.D0.B8"></span><span class="mw-headline" id="Бинауральные_наушники">Бинауральные наушники</span>
</h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ladspa-bs2b/">ladspa-bs2b</a></span><sup><small>AUR</small></sup> предоставляет плагин для симуляции объемного стереозвучания в наушниках. Для его использования найдите свои наушники с помощью команды:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacmd list-sinks | grep -e 'name:'</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">	name: &lt;alsa_output.pci-0000_00_1b.0.iec958-ac3-surround-51&gt;
	name: &lt;alsa_output.pci-0000_00_1b.0.iec958-ac3-surround-51.equalizer&gt;
	name: &lt;bluez_sink.00_1F_82_28_93_51&gt;
</pre>
<p>Загрузите плагин (<i>новое</i> sink_name задается произвольно, master=<i>название устройства вывода (наушников)</i>):
</p>
<pre>pacmd load-module module-ladspa-sink sink_name=binaural master=bluez_sink.00_1F_82_28_93_51 plugin=bs2b label=bs2b control=700,4.5
</pre>
<p>Используйте <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pavucontrol">pavucontrol</a></span> для передачи потока на новое устройство вывода или:
</p>
<pre>pactl move-sink-input $INPUTID $BINAURALSINKNAME
</pre>
<h2>
<span id="PulseAudio_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_.D1.81.D0.B5.D1.82.D1.8C"></span><span class="mw-headline" id="PulseAudio_через_сеть">PulseAudio через сеть</span>
</h2>
<p>Одна из уникальных функций PulseAudio - возможность передачи аудио от клиентов через TCP к серверу, запущенному PulseAudio демоном в локальной сети. Убедитесь, что серверная и клиентская системы синхронизированы по времени (например, посредством NTP), в противном случае аудио поток будет 'заикаться' или вовсе не работать.
</p>
<p>Чтобы сделать это доступным, нужно включить module-native-protocol-tcp.
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_TCP_.28.D0.B7.D0.B2.D1.83.D0.BA_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_.D1.81.D0.B5.D1.82.D1.8C.29"></span><span class="mw-headline" id="Поддержка_TCP_(звук_через_сеть)">Поддержка TCP  (звук через сеть)</span>
</h3>
<p>Чтобы включить TCP модуль, добавьте это (или раскомментируйте, если уже есть) в <code>/etc/pulse/default.pa</code> на клиенте и сервере:
</p>
<pre>load-module module-native-protocol-tcp
</pre>
<p>Чтобы это работало, клиент и сервер должны разделять общий cookie. Убедитесь, что клиент и сервер разделяют один cookie файл в <code>~/.config/pulse/cookie</code>. Не важно, чей файл они используют (клиента/сервера), просто удостоверьтесь, что это один и тот же файл.
</p>
<p>Обратите внимание, если с подключением возникают проблемы, используйте (на сервере)
</p>
<pre>pacmd list-modules
</pre>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_TCP_.D1.81_.D0.B0.D0.BD.D0.BE.D0.BD.D0.B8.D0.BC.D0.BD.D1.8B.D0.BC.D0.B8_.D0.BA.D0.BB.D0.B8.D0.B5.D0.BD.D1.82.D0.B0.D0.BC.D0.B8"></span><span class="mw-headline" id="Поддержка_TCP_с_анонимными_клиентами">Поддержка TCP с анонимными клиентами</span>
</h3>
<p>Если отсутствует возможность копировать cookie файл с клиентских машин, анонимные клиенты могут получить доступ к серверу, если добавить следующий параметр в module-native-protocol-tcp на сервере(снова в <code>/etc/pulse/default.pa</code>):
</p>
<pre> load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1;192.168.0.0/24 auth-anonymous=1
</pre>
<p>Измените LAN IP подсети для клиентов, которым вы желаете предоставить доступ.
</p>
<h3>
<span id="Zeroconf_.28Avahi.29"></span><span class="mw-headline" id="Zeroconf_(Avahi)">Zeroconf (Avahi)</span>
</h3>
<p>Чтобы удалённый PulseAudio сервер появился в списке устройств PulseAudio Device Chooser (<code>pasystray</code>), загрузите нужные модули zeroconf и включите <a href="../../en/Avahi.html" title="Avahi">Avahi</a> <a href="../../ru/Daemons.html" title="Daemons (Русский)">daemon</a>.
</p>
<p>Установите на клиенте и сервере <code>pulseaudio-zeroconf</code>.
</p>
<p>На обеих машинах <a href="../../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">запустите</a> и <a href="../../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">включите</a> systemd юнит <code>avahi-daemon</code>.
</p>
<p>На сервере добавьте <code>load-module module-zeroconf-publish</code> в файл <code>/etc/pulse/default.pa</code>, на клиенте - <code>load-module module-zeroconf-discover</code> в <code>/etc/pulse/default.pa</code>. Теперь перенаправьте любой поток или весь аудио выход на удаленный сервер PulseAudio, выбрав соответствующее устройство вывода.
</p>
<p>Если вы испытываете проблемы с удаленной синхронизацией на клиентской машине, попробуйте перезапустить демон Avahi на сервере, чтобы переотправить доступные интерфейсы.
</p>
<h3>
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_PulseAudio_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.B0_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_.D0.BB.D0.BE.D0.BA.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BA.D0.BB.D0.B8.D0.B5.D0.BD.D1.82.D1.8B_.D0.A5"></span><span class="mw-headline" id="Переключение_PulseAudio_сервера_используя_локальные_клиенты_Х">Переключение PulseAudio сервера используя локальные клиенты Х</span>
</h3>
<p>Чтобы переключатся между серверами на клиенте в пределах X, можно использовать команду <code>pax11publish</code>. Например, чтобы переключится со стандартного сервера на хост foo:
</p>
<pre>$ pax11publish -e -S foo
</pre>
<p>И чтобы вернутся обратно:
</p>
<pre>$ pax11publish -e -r
</pre>
<p>Это отредактирует переменные PulseAudio в корневом окне X11, что сообщит клиентским библиотекам PulseAudio о том, что нужно соединяться с сервером PulseAudio, а не с <code>localhost</code>, вместо того чтобы заставлять сервер PulseAudio вещать аудио (как описано выше). Таким образом, программы больше не будут взаимодействовать с локальным процессом <code>pulseaudio</code>, который затем может быть <a href="../../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">остановлен</a>. Такие программы, как <code>pactl</code>, <code>pacmd</code> или <code>pavucontrol</code> также необходимо будет запустить с соответствующим <code>PULSE_SERVER</code> окружением/переменным X, для управления удалённым сервером PulseAudio.
</p>
<p>Обратите внимание, что переключение станет заметным, когда программы использующие Pulse будут перезапущены, или их клиентская библиотека PulseAudio переинициализирована (может быть достаточно полной остановки и перезапуска воспроизведения). Для того чтобы эти изменения оставались постоянными, отредактируйте <code>default-server</code> в <code>~/.config/pulse/client.conf</code> или <code>/etc/pulse/client.conf</code>.
</p>
<h3>
<span id=".D0.92.D1.8B.D0.B1.D0.BE.D1.80_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.B0"></span><span class="mw-headline" id="Выбор_сервера">Выбор сервера</span>
</h3>
<p>Запустите программу PulseAudio Volume Control <code>pavucontrol</code>. Во вкладке <b>Устройства вывода</b> вы должны увидеть список локальных и удаленных устройств вывода. На вкладке <b>Проигрывание</b>, слева от кнопки "X" Заглушить звук (Mute Audio), вы должны увидеть выпадающий список устройств вывода. Список содержит доступные устройства вывода, и в нем выделено текущее устройство. Переключение устройства вывода позволит аудиопотоку сменить сервер PulseAudio, связанный с этим устройством. Данное управление остается неясным до самого момента его использования, и является особенно полезным при работы с удаленным автономным звуковым сервером.
</p>
<p>Аналогично, на вкладке <b>Устройства ввода</b> отображены локальные и удаленные устройства ввода. И на вкладке <b>Запись</b> расположен выпадающий список, содержащий доступные устройства ввода.
</p>
<p>Для направления аудиопотока, запускайте <code>pavucontrol</code> локально или на удаленной машине, в зависимости от его связей. Например, запускайте <code>pavucontrol</code> на удаленной машине для направления аудио вывода на локальную. И запускайте <code>pavucontrol</code> локально для направления аудио вывода на удаленную машину.
</p>
<p>С настройкой одновременных выводов или вводов дело обстоит иначе. Для этого ознакомьтесь с информацией о "monitor" и "module-combine-sink".
</p>
<h3>
<span id=".D0.95.D1.81.D0.BB.D0.B8_.D0.B2.D1.81.D1.91_.D0.BE.D1.81.D1.82.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B5_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82"></span><span class="mw-headline" id="Если_всё_остальное_не_работает">Если всё остальное не работает</span>
</h3>
<p>Это НЕ постоянное решение, лишь временное исправление проблемы
</p>
<p>На сервере:
</p>
<pre> $ paprefs 
</pre>
<p>В Network Access -&gt; Включите доступ к локальным устройствам звука (Также включите 'Allow discover' и 'Don't require authentication').
</p>
<p>На клиенте:
</p>
<pre> $ export PULSE_SERVER=server.ip &amp;&amp; mplayer test.mp3
</pre>
<h2><span class="mw-headline" id="ALSA_monitor_source">ALSA monitor source</span></h2>
<p>Чтобы иметь возможность записывать из monitor source (a.k.a. "What-U-Hear", "Stereo Mix"), используйте <code>pactl list</code> чтобы найти имя источника в PulseAudio (напр.<code>alsa_output.pci-0000_00_1b.0.analog-stereo.monitor</code>). Затем добавьте следующие строки в <code>/etc/asound.conf</code> или <code>~/.asoundrc</code>:
</p>
<pre>pcm.pulse_monitor {
  type pulse
  device alsa_output.pci-0000_00_1b.0.analog-stereo.monitor
}

ctl.pulse_monitor {
  type pulse
  device alsa_output.pci-0000_00_1b.0.analog-stereo.monitor
}
</pre>
<p>Теперь вы можете выбрать <code>pulse_monitor</code> как устройство записи.
</p>
<p>Как альтернативу, вы можете использовать <b>pavucontrol</b>.Чтобы сделать это: убедитесь, что он настроен показывать ВСЕ устройства ввода, затем выберите "Monitor of [ваша звуковая карта]" как устройство записи.
</p>
<h2>
<span id=".D0.9D.D0.B0.D0.B1.D0.BB.D1.8E.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BD.D0.BA.D1.80.D0.B5.D1.82.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Наблюдение_конкретного_вывода">Наблюдение конкретного вывода</span>
</h2>
<p>Есть возможность наблюдать конкретный вывод, например, чтобы передавать аудио из плеера в VOIP-приложение.
Просто создайте пустое устройство вывода:
</p>
<pre>pactl load-module module-null-sink sink_name=&lt;имя&gt;
</pre>
<p>В Настройках Звука Pulseaudio (pavucontrol), во вкладе "Playback", измените устройство вывода приложния на &lt;имя&gt;, и во вкладке записи измените устройство ввода приложения на "Monitor of &lt;имя&gt;". Теперь аудио будет поступать из одного приложения в другое.
</p>
<h2>
<span id="PulseAudio_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_JACK"></span><span class="mw-headline" id="PulseAudio_через_JACK">PulseAudio через JACK</span>
</h2>
<p><a href="../../en/JACK_Audio_Connection_Kit.html" title="JACK Audio Connection Kit">JACK Audio Connection Kit</a> популярен для работы со звуком и широко поддерживается аудиоприложениями Linux. Он занимает совместную с PulseAudio нишу, но с акцентом в сторону профессиональной работы со звуком. Он может предложить аудиомониторинг с низкой временной задержкой вместе с большим контролем за вводом и выводом множественных звуковых устройств ввода-вывода.
</p>
<h3>
<span id=".D0.9C.D0.B5.D1.82.D0.BE.D0.B4_KXStudio"></span><span class="mw-headline" id="Метод_KXStudio">Метод KXStudio</span>
</h3>
<p>Это рекомендуемый способ, так как он был <a rel="nofollow" class="external text" href="https://github.com/jackaudio/jackaudio.github.com/wiki/WalkThrough_User_PulseOnJack">официально одобрен разработчиками JACK</a>.
</p>
<p>Эта настройка работает с обоими пакетами <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jack2-dbus">jack2-dbus</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=jack2">jack2</a></span>.
</p>
<p>В текущий момент JACK обладает способностью переключаться между ALSA, PulseAudio и JACK. Это дает вам возможность одновременно запускать JACK и PulseAudio и получать их вывод без каких-либо дополнительных настроек или команд терминала.
</p>
<p>Перед началом последующих действий рекомендуется удалить пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qjackctl">qjackctl</a></span>, если вы его используете.
</p>
<p>Начните с установки <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cadence/">cadence</a></span><sup><small>AUR</small></sup> из AUR или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-jack">pulseaudio-jack</a></span>. Как только вы установите и запустите его, в нижнем правом углу экрана должен появиться JACK bridge configuration. ALSA audio bridge следует настроить как ALSA -&gt; PulseAudio -&gt; JACK и включить PulseAudio bridge. Убедитесь с помощью <code>pavucontrol</code>, что все устройства ввода и вывода, не относящиеся к JACK, выключены (muted). Воспользуйтесь кнопкой Force Restart для запуска JACK, и, если все запустилось успешно, вывод программ PulseAudio будет перенаправлен через JACK.
</p>
<h3>
<span id=".D0.A0.D1.83.D1.87.D0.BD.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2_.D0.B2.D1.8B.D0.B2.D0.BE.D0.B4.D0.B0"></span><span class="mw-headline" id="Ручная_настройка_устройств_вывода">Ручная настройка устройств вывода</span>
</h3>
<p>Этот способ позволяет обеспечить одновременную работу JACK и PulseAudio и обмен выводом между собой. В этом случае используется ручная настройка систем, которая обеспечивает связь между JACK и PulseAudio. Эта конфигурация не опирается на скрипты или команды, и полностью основана на работе с настройками.
</p>
<p>Рассматриваемый метод работает только с jackdbus (JACK2 скомпилированный с поддержкой D-Bus). Вам также потребуется пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-jack">pulseaudio-jack</a></span>. Убедитесь, что файл <code>/etc/pulse/default.pa</code> содержит строку:
</p>
<pre>load-module module-jackdbus-detect <i>options</i>
</pre>
<p>Где <code><i>options</i></code> может быть любой опцией, поддерживаемой этим модулем, обычно <code>channels=2</code>.
</p>
<p>Как описано на странице <a rel="nofollow" class="external text" href="https://github.com/jackaudio/jackaudio.github.com/wiki/JackDbusPackaging">Jack-DBUS Packaging</a>:
</p>
<p><i>Автозапуск сервера реализован в качестве вызова D-Bus, который автоматически активирует сервис JACK D-Bus, если он еще не был запущен, и запускает сервер JACK. Правильное взаимодействие с PulseAudio обеспечивается механизмом "получения/отдачи" ("acquire/release") звуковой карты, основанным на D-Bus. Когда запускается сервер JACK, он запрашивает получение звуковой карты у данного D-Bus сервиса, и PulseAudio безоговорочно отдает управление над ней. В тот момент, когда сервер JACK заканчивает свою работу, он освобождает звуковую карту, которая вновь может быть занята PulseAudio.</i>
</p>
<p><code>module-jackdbus-detect.so</code> динамически загружает и выгружает модули module-jack-sink и module-jack-source, когда jackdbus запускается и останавливается.
</p>
<p>Если PulseAudio не работает, проверьте с помощью <code>pavucontrol</code>, появились ли соответствующие программы на вкладке воспроизведения. Если нет, то добавьте следующее в файл <code>~/.asoundrc</code> или <code>/etc/asound.conf</code> для перенаправления ALSA на PulseAudio:
</p>
<pre>pcm.pulse {
    type pulse
}

ctl.pulse {
    type pulse
}

pcm.!default {
    type pulse
}
ctl.!default {
    type pulse
}
</pre>
<p>В случае, если он все также не работает, проверьте с помощью <code>pavucontrol</code> вкладку воспроизведения и убедитесь, что соответствующие программы осуществляют вывод через PulseAudio JACK Sink, а не через звуковую карту (которую в текущий момент контролирует JACK, и это не сработает). Также убедитесь, что на графике JACK PulseAudio JACK Source соединен с системным аудио выходом.
</p>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D1.81.D0.BA.D1.80.D0.B8.D0.BF.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Настройка_с_помощью_скриптов">Настройка с помощью скриптов</span>
</h3>
<p>Этот способ позволяет JACK и PulseAudio осуществлять вывод одновременно. Основной упор здесь делается на использование скриптов, автоматически запускаемых QJackCTL, для управления особенностями поведения устройств вывода JACK и PulseAudio.
</p>
<p>Идея данного подхода строится на том, что прерывание PulseAudio - это плохо, так как может повлечь за собой аварийную остановку приложений, которые используют PulseAudio, и сломать весь вывод звука в целом.
</p>
<p>Пошагово наши действия можно расписать так:
</p>
<ol>
<li>PulseAudio освобождает звуковую карту</li>
<li>запускается JACK и принимает управление звуковой картой на себя</li>
<li>скрипт перенаправляет PulseAudio на JACK</li>
<li>приложения PulseAudio вручную направляются на вывод JACK (pavucontrol может помочь справится с данной задачей)</li>
<li>используются требуемые приложения JACK</li>
<li>скриптом происходит остановка перенаправления PulseAudio на JACK</li>
<li>останавливается JACK и освобождается звуковая карта</li>
<li>PulseAudio возвращает управление звуковой картой и перенаправляет звук на нее напрямую</li>
</ol>
<p>С помощью QJackCTL настройте следующие скрипты:
</p>
<p><code>pulse-jack-pre-start.sh</code> скрипт должен быть настроен как исполняемый и выполняться из скрипта запуска системы
</p>
<pre>#!/bin/bash
pacmd suspend true
</pre>
<p><code>pulse-jack-post-start.sh</code> также нужно сделать исполняемым и выполнять после запуска системы
</p>
<pre>#!/bin/bash
pactl load-module module-jack-sink channels=2
pactl load-module module-jack-source channels=2
pacmd set-default-sink jack_out
pacmd set-default-source jack_in
</pre>
<p><code>pulse-jack-pre-stop.sh</code> "должен выполняться при выключении системы"
</p>
<pre>#!/bin/bash
SINKID=$(pactl list | grep -B 1 "Name: module-jack-sink" | grep Module | sed 's/[^0-9]//g')
SOURCEID=$(pactl list | grep -B 1 "Name: module-jack-source" | grep Module | sed 's/[^0-9]//g')
pactl unload-module $SINKID
pactl unload-module $SOURCEID
sleep 5
</pre>
<p><code>pulse-jack-post-stop.sh</code> "должен выполняться после выключения системы"
</p>
<pre>#!/bin/bash
pacmd suspend false
</pre>
<h3>
<span id=".D0.9F.D1.83.D1.82.D0.B5.D0.BC_.D0.BE.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B8_PulseAudio"></span><span class="mw-headline" id="Путем_остановки_PulseAudio">Путем остановки PulseAudio</span>
</h3>
<p>Этот способ основывается на скрипте, который автоматически прерывает выполнение PulseAudio, когда запускается JACK, и автоматически запускает PulseAudio, когда JACK завершает работу. Такой подход дает выигрыш в производительности за счет меньшей нагрузки на ЦПУ, в отличии от вариантов, в которых запущены обе программы. Но он может приводить к ошибкам в запущенных приложениях, использующих PulseAudio, и не позволяет осуществлять одновременный вывод (с JACK и PulseAudio).
</p>
<p>При использовании предыдущего метода, применяется QjackCtl для выполнения скриптов загрузки/выгрузки PulseAudio во время запуска и остановки системы. Это приводит к выключению модулей PulseAudio, которые отвечают за автоматическое распознавание аппаратных устройств, и может стать одной из причин, по которой пользователи могут захотеть воспользоваться текущим вариантом. Рассматриваемая настройка подготовлена для связки PulseAudio и JACK, хотя и может быть изменена для загрузки/выгрузки иных не-JACK конфигураций, но корректный запуск/остановка PulseAudio при использовании его программами может стать проблемой.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> padevchooser в следующем примере устарел. Он был заменен pasystray</div>
<p>Следующий пример можно использовать и изменять, при необходимости, как стартовый скрипт, запускающий демон PulseAudio и загружающий программу <i>padevchooser</i> (при необходимости, требуется сборка из AUR). Назовем его <code>jack_startup</code>:
</p>
<pre>#!/bin/bash	
#Load PulseAudio and PulseAudio Device Chooser
pulseaudio -D
padevchooser&amp;

</pre>
<p>Аналогичный скрипт для остановки PulseAudio и Pulse Audio Device Chooser, который назовем <code>jack_shutdown</code> и также разместим в домашней директории:
</p>
<pre>#!/bin/bash	
#Kill PulseAudio and PulseAudio Device Chooser		
pulseaudio --kill	
killall padevchooser	
</pre>
<p>Оба скрипта сделаем исполняемыми:
</p>
<pre>chmod +x jack_startup jack_shutdown
</pre>
<p>затем запустим QjackCtl, нажмем на кнопку <i>Setup</i> и перейдем на вкладку <i>Options</i>, где отметим обе опции "Execute Script after Startup:" и "Execute Script on Shutdown:", в которые добавим адреса до наших скриптов (с помощью кнопки ... или вписав путь до файлов) <code>~/jack_startup</code> и <code>~/jack_shutdown</code>, при условии, что они располагаются в домашней директории. Сохраним изменения.
</p>
<h2>
<span id="PulseAudio_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_OSS"></span><span class="mw-headline" id="PulseAudio_через_OSS">PulseAudio через OSS</span>
</h2>
<p>Добавьте следующее в <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-oss
</pre>
<p>Затем запустите PulseAudio как обычно, убедитесь что все источники объявлены для OSS усройств.
</p>
<h2>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_PulseAudio_.D0.B8.D0.B7_chroot"></span><span class="mw-headline" id="Запуск_PulseAudio_из_chroot">Запуск PulseAudio из chroot</span>
</h2>
<p>Так как chroot представляет собственный root для запуска/остановки приложений, PulseAudio должен быть установлен из самого chroot (<code>pacman -S pulseaudio</code> в окружении chroot).
</p>
<p>PulseAudio, если не настроен на подключения к конкретному серверу (это можно сделать в <code>/etc/pulse/client.conf</code>, через переменную окружения PULSE_SERVER, или  через локальные настройки X11, используя module-x11-publish), будет пытаться подключится к локальному pulse серверу, если у него не получится - он создаст новый. Каждый pulse сервер имеет уникальный ID, основанный на машинном id значении в <code>/var/lib/dbus</code>. Чтобы дать приложениям из chroot доступ к pulse серверу, следующие директории должны быть смонтированный в chroot:-
</p>
<pre>/run
/var/lib/dbus
/tmp
~/config/.pulse
</pre>
<p><code>/dev/shm</code> также должен быть смонтирован для эффективного использования. Заметьте, что монтирование /home также обычно означает общий доступ к каталогу <code>~/.pulse</code>.
</p>
<p>PulseAduio выберет путь к сокету через XDG_RUNTIME_DIR, так что удостовертесь что перенесли его тоже с помощью sudo, когда используете chroot (см. <a href="../../ru/Sudo.html#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F" title="Sudo (Русский)">Sudo#Environment variables</a>).
</p>
<h2>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B0.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.B0_PulseAudio"></span><span class="mw-headline" id="Отключение_автоматического_запуска_сервера_PulseAudio">Отключение автоматического запуска сервера PulseAudio</span>
</h2>
<p>Некоторые пользователи предпочитают вручную запускать сервер PulseAudio, перед запуском определенных программ, а затем останавливать сервер PulseAudio, когда они завершены. Для достижения такого результата, отредактируйте <code>~/.config/pulse/client.conf</code> или <code>/etc/pulse/client.conf</code> и измените <code>autospawn = yes</code> на <code>autospawn = no</code>. Убедитесь что строка не закомментирована.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autospawn = no
</pre>
<p>Теперь вы можете вручную запустить PulseAudio сервер командой
</p>
<pre>$ pulseaudio --start
</pre>
<p>И остановить его
</p>
<pre>$ pulseaudio --kill
</pre>
<p>Этот параметр также учитывается стандартным скриптом pulseaudio при запуске сеанса рабочего стола <code>start-pulseaudio-x11</code> который выполняется из <code>/etc/xdg/autostart/pulseaudio.desktop</code>.
</p>
<h2>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B5.D0.BC.D0.BE.D0.BD.D0.B0_pulseaudio_.D0.BF.D0.BE.D0.BB.D0.BD.D0.BE.D1.81.D1.82.D1.8C.D1.8E"></span><span class="mw-headline" id="Отключение_демона_pulseaudio_полностью">Отключение демона pulseaudio полностью</span>
</h2>
<p>Чтобы отключить демон PulseAudio полностью, и тем самым предотвратить его запуск, добавьте <code>daemon-binary=/bin/true</code> в файл настроек.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/client.conf #or /etc/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">daemon-binary=/bin/true
</pre>
<h2>
<span id=".D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B8.D1.82.D1.8C_.D1.81.D1.82.D0.B5.D1.80.D0.B5.D0.BE_.D0.BD.D0.B0_.D0.BC.D0.BE.D0.BD.D0.BE"></span><span class="mw-headline" id="Изменить_стерео_на_моно">Изменить стерео на моно</span>
</h2>
<p>Изменить стерео устройство вывода на моно устройство вывода можно путём создания виртуального устройства вывода. Это будет полезно если у вас только один динамик. Добавьте в <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-remap-sink master=alsa_output.pci-0000_00_1f.5.analog-stereo sink_name=mono channels=2 channel_map=mono,mono
# Optional: Select new remap as default
set-default-sink mono
</pre>
<p>(замените имя звуковой карты alsa_output.pci-0000_00_1f.5.analog-stereo показанным в <code>pacmd list-sinks</code>)
</p>
<p>Переключайтесь между виртуальным моно устройством и настоящим стерео устройством.
</p>
<h2>
<span id=".D0.9F.D0.BE.D0.BC.D0.B5.D0.BD.D1.8F.D1.82.D1.8C_.D0.BB.D0.B5.D0.B2.D1.8B.D0.B9.2F.D0.BF.D1.80.D0.B0.D0.B2.D1.8B.D0.B9_.D0.BA.D0.B0.D0.BD.D0.B0.D0.BB.D1.8B"></span><span class="mw-headline" id="Поменять_левый/правый_каналы">Поменять левый/правый каналы</span>
</h2>
<p>Это тоже самое, что инвертировать стерео, когда левый и правый канал меняются местами.
</p>
<p>Во-первых, определите звуковую карту, в которой вы хотите произвести изменение:
</p>
<pre>$ cat /proc/asound/cards
</pre>
<p>и запомните строку с именем для устройства, которое вы хотите использовать (оно заключено в квадратные скобки, например [Intel]).
</p>
<p>Отредактируйте <code>/etc/pulse/default.pa</code> и закомментируйте строки, которые содержат module-hal-detect и module-detect.
</p>
<p>Найдите закомментированную строку, которая начинается с "#load-module module-alsa-sink", раскомментируйте ее и измените на
</p>
<pre>load-module module-alsa-sink device=hw:[device name] channel_map=right,left
</pre>
<p>Перезапустите демон PulseAudio
</p>
<pre>pulseaudio -k; pulseaudio -D
</pre>
<p><a rel="nofollow" class="external text" href="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/Modules/#index12h3">Документация переназначения модуля устройства</a>
</p>
<h2>
<span id="PulseAudio_.D0.B2_.D0.BA.D0.B0.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.B5_.D0.BD.D0.B5.D0.BD.D0.B0.D0.B2.D1.8F.D0.B7.D1.87.D0.B8.D0.B2.D0.BE.D0.B3.D0.BE_.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D0.B8.D0.BA.D0.B0_ALSA"></span><span class="mw-headline" id="PulseAudio_в_качестве_ненавязчивого_проводника_ALSA">PulseAudio в качестве ненавязчивого проводника ALSA</span>
</h2>
<p>Некоторые пользователи по различным причинам не хотят всё время запускать PulseAudio. Этот пример превратит полноценный звуковой сервер в ненавязчивый проводник к устройствам ALSA, который автоматически запускает <b>и</b> останавливает себя, когда дело сделано, позволяя приложениям требующим PulseAudio, полностью функционировать, не трогая настройки ALSA, не устанавливая себя по умолчанию как устройства ALSA.
</p>
<p>Эта настройка позволит клиентам, использующим PA, производить автозапуск демона в тот момент, когда он им понадобится, а также завершать его работу как только все клиенты отсоединяться.
</p>
<p>Сам демон использует простую статическую настройку, которая использует только настроенные вами <code>pcm.!default</code> устройства ALSA. Никаких замен ALSA, никаких игр с уровнями микшера, ничего, кроме записи/воспроизведения. Также убедитесь, что <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-alsa">pulseaudio-alsa</a></span> <b>не</b> установлен, так как стандартные клиенты ALSA по умолчанию не привязаны к Pulse. Функции <code>alsamixer</code> продолжают работать должным образом, как и любые другие клиенты ALSA . Также убедитесь, что общие фрэймворки, как Xine, Gstreamer и Phonon настроены на использование ALSA: по умолчанию, если они обнаружат установленный PulseAudio, они будут пытаться использовать его перед ALSA.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/daemon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Replace these with the proper values
exit-idle-time = 0 # Exit as soon as unneeded
flat-volumes = yes # Prevent messing with the master volume
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Replace these with the proper values

# Applications that uses PulseAudio *directly* will spawn it,
# use it, and pulse will exit itself when done because of the
# exit-idle-time setting in daemon.conf
autospawn = yes
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Replace the *entire* content of this file with these few lines and
# read the comments

.fail
    # Set tsched=0 here if you experience glitchy playback. This will
    # revert back to interrupt-based scheduling and should fix it.
    #
    # Replace the device= part if you want pulse to use a specific device
    # such as "dmix" and "dsnoop" so it doesn't lock an hw: device.
    
    # INPUT/RECORD
    load-module module-alsa-source device="default" tsched=1
    
    # OUTPUT/PLAYBACK
    load-module module-alsa-sink device="default" tsched=1 
    
    # Accept clients -- very important
    load-module module-native-protocol-unix

.nofail
.ifexists module-x11-publish.so
    # Publish to X11 so the clients know how to connect to Pulse. Will
    # clear itself on unload.
    load-module module-x11-publish
.endif
</pre>
<h2>
<span id=".D0.9D.D0.B0.D1.83.D1.88.D0.BD.D0.B8.D0.BA.D0.B8_.D0.B8_.D0.BA.D0.BE.D0.BB.D0.BE.D0.BD.D0.BA.D0.B8_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D1.8B_.D0.BE.D0.B4.D0.BD.D0.BE.D0.B2.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D0.BE_.D0.B8_.D0.BF.D0.B5.D1.80.D0.B5.D0.BA.D0.BB.D1.8E.D1.87.D0.B0.D1.8E.D1.82.D1.81.D1.8F_.D0.BF.D1.80.D0.B8.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5.D0.BC_.D0.BD.D0.B0_.D0.BB.D0.B5.D1.82.D1.83"></span><span class="mw-headline" id="Наушники_и_колонки_подключены_одновременно_и_переключаются_приложением_на_лету">Наушники и колонки подключены одновременно и переключаются приложением на лету</span>
</h2>
<p>Pulseaudio устроен так, что он автоматически отключает Line Out, когда подключены наушники и начинает использовать их ползунок для управления. Подобное поведение вы можете наблюдать в <code>alsamixer</code>. Мы же хотим разделить управление наушников и Line Out, и заставить их работать одновременно. Это очень полезно в том случае, если вы хотите переназначить гнезда Realtek, например, зеленое использовать для наушников, а голубое - для динамиков (при помощи <code>hdajackretask</code> из <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=alsa-tools">alsa-tools</a></span>).
</p>
<p>Для этого вам потребуется отредактировать непосредственно конфигурацию Pulseaudio mixer:
</p>
<p>1. Мы сообщаем pulseaudio, что наушники всегда подключены. Редактируем:
</p>
<p><code>/usr/share/pulseaudio/alsa-mixer/paths/analog-output-lineout.conf</code>
</p>
<p>Находим:
</p>
<pre>[Jack Headphone]
state.plugged = no
state.unplugged = unknown
</pre>
<p>Изменяем <code>no</code> на <code>yes</code>
</p>
<p>2. По умолчанию, громкость Line Out управляется только через Master, а не через ползунок Line Out. Мы хотим соединить Line Out с Master. 
</p>
<p>Добавьте этот блок в конец файла:
</p>
<pre>[Element Line Out]
switch = mute
volume = merge
</pre>
<p>3. Нам нужно полностью отключать Line Out, когда мы используем наушники. Редактируем:
</p>
<p><code>/usr/share/pulseaudio/alsa-mixer/paths/analog-output-headphones.conf</code>
</p>
<p>Добавляем блок в конец файла:
</p>
<pre>[Element Line Out]
switch = off
volume = off
</pre>
<p>4. Как и Pulseaudio, Alsa самостоятельно отключает динамики, когда подключаются наушники. Откройте <code>alsamixer</code> (для Realtek HDA <code>alsamixer -c0</code>) и измените <code>Auto-Mute mode</code> на <code>disabled</code>.
</p>
<p>5. Перезапустите Pulseaudio
</p>
<pre>$ pulseaudio -k
$ pulseaudio --start
</pre>
<p>Теперь у вас есть два порта на одно устройство вывода в pulseaudio. Они заглушают друг друга, таким образом вы можете переключиться на наушники, и это отключит звук в динамиках и наоборот. Для переключения между портами вы можете использовать звуковой микшер Gnome или Plasma, или установить подходящее расширение рабочего стола.
</p>
<h2>
<span id=".D0.9E.D0.B4.D0.BD.D0.BE.D0.B2.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D0.BE.D0.B5_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_PulseAudio_.D0.BD.D0.B5.D1.81.D0.BA.D0.BE.D0.BB.D1.8C.D0.BA.D0.B8.D0.BC.D0.B8_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F.D0.BC.D0.B8"></span><span class="mw-headline" id="Одновременное_использование_PulseAudio_несколькими_пользователями">Одновременное использование PulseAudio несколькими пользователями</span>
</h2>
<p>Иногда желательно запускать программы как другой пользователь, находясь в системе как основной пользователь, например, для изоляции программы. Тем не менее, PulseAudio по умолчанию не будет поддерживать соединения второго пользователя, поскольку демон PulseAudio уже запущен для основного. Но может быть создан сокет PulseAudio UNIX для поддержки соединений других пользователей демоном PulseAudio, запущенным основным пользователем.
</p>
<p>Во-первых, отредактируйте файл <code>/etc/pulse/default.pa</code> или <code>~/.config/pulse/default.pa</code> и добавьте указание для создания unix сокета:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/pulse/default.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">load-module module-native-protocol-unix auth-anonymous=1 socket=/tmp/pulse-socket</pre>
<p>Затем, укажите PulseAudio в качестве клиента для сокета UNIX, только что созданного вторым пользователем:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/home/<i>secondaryuser</i>/.config/pulse/client.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">default-server = unix:/tmp/pulse-socket</pre>
<p>Теперь, после перезапуска демона PulseAudio, приложения, запущенные от имени второго пользователя, должны без проблем проигрывать звук через демон PulseAudio, запущенный основным пользователем.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../ru/Category:Sound.html" title="Category:Sound (Русский)">Sound (Русский)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=PulseAudio_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Examples_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=804241">https://wiki.archlinux.org/index.php?title=PulseAudio_(Русский)/Examples_(Русский)&amp;oldid=804241</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 23 March 2024, at 07:36.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
