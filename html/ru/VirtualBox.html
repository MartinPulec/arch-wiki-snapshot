<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>VirtualBox (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-VirtualBox_Русский rootpage-VirtualBox_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Установка</span>
			</div>
		</a>
		
			<button aria-controls="toc-Установка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Установка subsection</span>
			</button>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
			<li id="toc-Установка_основных_пакетов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Установка основных пакетов</span>
				</div>
			</a>
			
			<ul id="toc-Установка_основных_пакетов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Подписывание_модулей" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D1%8B%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Подписывание модулей</span>
				</div>
			</a>
			
			<ul id="toc-Подписывание_модулей-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Загрузка_модулей_ядра_для_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9_%D1%8F%D0%B4%D1%80%D0%B0_%D0%B4%D0%BB%D1%8F_VirtualBox">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Загрузка модулей ядра для VirtualBox</span>
				</div>
			</a>
			
			<ul id="toc-Загрузка_модулей_ядра_для_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Доступ_к_USB-устройствам_хоста_из_гостевой_ОС" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF_%D0%BA_USB-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0%D0%BC_%D1%85%D0%BE%D1%81%D1%82%D0%B0_%D0%B8%D0%B7_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%9E%D0%A1">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Доступ к USB-устройствам хоста из гостевой ОС</span>
				</div>
			</a>
			
			<ul id="toc-Доступ_к_USB-устройствам_хоста_из_гостевой_ОС-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Диск_с_гостевыми_дополнениями" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%B8%D1%81%D0%BA_%D1%81_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D1%8B%D0%BC%D0%B8_%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%D0%BC%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.5</span>
					<span>Диск с гостевыми дополнениями</span>
				</div>
			</a>
			
			<ul id="toc-Диск_с_гостевыми_дополнениями-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Расширения" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.6</span>
					<span>Расширения</span>
				</div>
			</a>
			
			<ul id="toc-Расширения-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Интерфейсы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.7</span>
					<span>Интерфейсы</span>
				</div>
			</a>
			
			<ul id="toc-Интерфейсы-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Пошаговая_установка_Arch_Linux_как_гостевой_ОС" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9F%D0%BE%D1%88%D0%B0%D0%B3%D0%BE%D0%B2%D0%B0%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_Arch_Linux_%D0%BA%D0%B0%D0%BA_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%9E%D0%A1">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Пошаговая установка Arch Linux как гостевой ОС</span>
			</div>
		</a>
		
			<button aria-controls="toc-Пошаговая_установка_Arch_Linux_как_гостевой_ОС-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Пошаговая установка Arch Linux как гостевой ОС subsection</span>
			</button>
		
		<ul id="toc-Пошаговая_установка_Arch_Linux_как_гостевой_ОС-sublist" class="vector-toc-list">
			<li id="toc-Установка_Arch_Linux_в_виртуальную_машину" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_Arch_Linux_%D0%B2_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%83%D1%8E_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%83">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Установка Arch Linux в виртуальную машину</span>
				</div>
			</a>
			
			<ul id="toc-Установка_Arch_Linux_в_виртуальную_машину-sublist" class="vector-toc-list">
				<li id="toc-Установка_в_режиме_EFI" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B2_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B5_EFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>Установка в режиме EFI</span>
				</div>
			</a>
			
			<ul id="toc-Установка_в_режиме_EFI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Установка_гостевых_дополнений" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D1%8B%D1%85_%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Установка гостевых дополнений</span>
				</div>
			</a>
			
			<ul id="toc-Установка_гостевых_дополнений-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Загрузка_модулей_ядра_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9_%D1%8F%D0%B4%D1%80%D0%B0_VirtualBox">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Загрузка модулей ядра VirtualBox</span>
				</div>
			</a>
			
			<ul id="toc-Загрузка_модулей_ядра_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запуск_гостевых_сервисов_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D1%8B%D1%85_%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BE%D0%B2_VirtualBox">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Запуск гостевых сервисов VirtualBox</span>
				</div>
			</a>
			
			<ul id="toc-Запуск_гостевых_сервисов_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Расшаривание_директорий" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D1%81%D1%88%D0%B0%D1%80%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B8%D1%80%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%B8%D0%B9">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>Расшаривание директорий</span>
				</div>
			</a>
			
			<ul id="toc-Расшаривание_директорий-sublist" class="vector-toc-list">
				<li id="toc-Ручное_монтирование" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A0%D1%83%D1%87%D0%BD%D0%BE%D0%B5_%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.1</span>
					<span>Ручное монтирование</span>
				</div>
			</a>
			
			<ul id="toc-Ручное_монтирование-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Автомонтирование" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.2</span>
					<span>Автомонтирование</span>
				</div>
			</a>
			
			<ul id="toc-Автомонтирование-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Монтирование_при_загрузке" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.3</span>
					<span>Монтирование при загрузке</span>
				</div>
			</a>
			
			<ul id="toc-Монтирование_при_загрузке-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Управление_виртуальными_дисками" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%BC%D0%B8_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0%D0%BC%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Управление виртуальными дисками</span>
			</div>
		</a>
		
			<button aria-controls="toc-Управление_виртуальными_дисками-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Управление виртуальными дисками subsection</span>
			</button>
		
		<ul id="toc-Управление_виртуальными_дисками-sublist" class="vector-toc-list">
			<li id="toc-Форматы,_поддерживаемые_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D1%8B,_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_VirtualBox">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Форматы, поддерживаемые VirtualBox</span>
				</div>
			</a>
			
			<ul id="toc-Форматы,_поддерживаемые_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Преобразование_виртуальных_дисков_разных_форматов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B5%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%B4%D0%B8%D1%81%D0%BA%D0%BE%D0%B2_%D1%80%D0%B0%D0%B7%D0%BD%D1%8B%D1%85_%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Преобразование виртуальных дисков разных форматов</span>
				</div>
			</a>
			
			<ul id="toc-Преобразование_виртуальных_дисков_разных_форматов-sublist" class="vector-toc-list">
				<li id="toc-VMDK_в_VDI_и_VDI_в_VMDK" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#VMDK_%D0%B2_VDI_%D0%B8_VDI_%D0%B2_VMDK">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.1</span>
					<span>VMDK в VDI и VDI в VMDK</span>
				</div>
			</a>
			
			<ul id="toc-VMDK_в_VDI_и_VDI_в_VMDK-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VHD_в_VDI_и_VDI_в_VDH" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#VHD_%D0%B2_VDI_%D0%B8_VDI_%D0%B2_VDH">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.2</span>
					<span>VHD в VDI и VDI в VDH</span>
				</div>
			</a>
			
			<ul id="toc-VHD_в_VDI_и_VDI_в_VDH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-QCOW2_в_VDI_и_VDI_в_QCOW2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#QCOW2_%D0%B2_VDI_%D0%B8_VDI_%D0%B2_QCOW2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.3</span>
					<span>QCOW2 в VDI и VDI в QCOW2</span>
				</div>
			</a>
			
			<ul id="toc-QCOW2_в_VDI_и_VDI_в_QCOW2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Монтирование_виртуальных_дисков" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%B4%D0%B8%D1%81%D0%BA%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Монтирование виртуальных дисков</span>
				</div>
			</a>
			
			<ul id="toc-Монтирование_виртуальных_дисков-sublist" class="vector-toc-list">
				<li id="toc-VDI" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#VDI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3.1</span>
					<span>VDI</span>
				</div>
			</a>
			
			<ul id="toc-VDI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Сжатие_виртуальных_дисков" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%B6%D0%B0%D1%82%D0%B8%D0%B5_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%B4%D0%B8%D1%81%D0%BA%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Сжатие виртуальных дисков</span>
				</div>
			</a>
			
			<ul id="toc-Сжатие_виртуальных_дисков-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Увеличение_размера_виртуальных_дисков" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%B2%D0%B5%D0%BB%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%D0%B0_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%B4%D0%B8%D1%81%D0%BA%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Увеличение размера виртуальных дисков</span>
				</div>
			</a>
			
			<ul id="toc-Увеличение_размера_виртуальных_дисков-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Замена_виртуального_диска_из_файла_.vbox_вручную" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BC%D0%B5%D0%BD%D0%B0_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0_%D0%B8%D0%B7_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0_.vbox_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>Замена виртуального диска из файла .vbox вручную</span>
				</div>
			</a>
			
			<ul id="toc-Замена_виртуального_диска_из_файла_.vbox_вручную-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Клонирование_виртуального_диска_и_назначение_ему_нового_UUID" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D0%BB%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0_%D0%B8_%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B5%D0%BC%D1%83_%D0%BD%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE_UUID">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7</span>
					<span>Клонирование виртуального диска и назначение ему нового UUID</span>
				</div>
			</a>
			
			<ul id="toc-Клонирование_виртуального_диска_и_назначение_ему_нового_UUID-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Советы и рекомендации</span>
			</div>
		</a>
		
			<button aria-controls="toc-Советы_и_рекомендации-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Советы и рекомендации subsection</span>
			</button>
		
		<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
			<li id="toc-Импорт/экспорт_виртуальных_машин_VirtualBox_в/из_других_гипервизоров" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D0%BC%D0%BF%D0%BE%D1%80%D1%82/%D1%8D%D0%BA%D1%81%D0%BF%D0%BE%D1%80%D1%82_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD_VirtualBox_%D0%B2/%D0%B8%D0%B7_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D1%85_%D0%B3%D0%B8%D0%BF%D0%B5%D1%80%D0%B2%D0%B8%D0%B7%D0%BE%D1%80%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Импорт/экспорт виртуальных машин VirtualBox в/из других гипервизоров</span>
				</div>
			</a>
			
			<ul id="toc-Импорт/экспорт_виртуальных_машин_VirtualBox_в/из_других_гипервизоров-sublist" class="vector-toc-list">
				<li id="toc-Удаление_дополнений_гостевой_ОС" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%9E%D0%A1">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.1</span>
					<span>Удаление дополнений гостевой ОС</span>
				</div>
			</a>
			
			<ul id="toc-Удаление_дополнений_гостевой_ОС-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_правильного_формата_виртуального_диска" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE_%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B0_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.2</span>
					<span>Использование правильного формата виртуального диска</span>
				</div>
			</a>
			
			<ul id="toc-Использование_правильного_формата_виртуального_диска-sublist" class="vector-toc-list">
				<li id="toc-Автоматические_инструменты" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.2.1</span>
					<span>Автоматические инструменты</span>
				</div>
			</a>
			
			<ul id="toc-Автоматические_инструменты-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ручное_преобразование" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A0%D1%83%D1%87%D0%BD%D0%BE%D0%B5_%D0%BF%D1%80%D0%B5%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.2.2</span>
					<span>Ручное преобразование</span>
				</div>
			</a>
			
			<ul id="toc-Ручное_преобразование-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Создание_конфигурации_VM_для_гипервизора" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8_VM_%D0%B4%D0%BB%D1%8F_%D0%B3%D0%B8%D0%BF%D0%B5%D1%80%D0%B2%D0%B8%D0%B7%D0%BE%D1%80%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1.3</span>
					<span>Создание конфигурации VM для гипервизора</span>
				</div>
			</a>
			
			<ul id="toc-Создание_конфигурации_VM_для_гипервизора-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Управление_запуском_виртуальной_машины" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA%D0%BE%D0%BC_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Управление запуском виртуальной машины</span>
				</div>
			</a>
			
			<ul id="toc-Управление_запуском_виртуальной_машины-sublist" class="vector-toc-list">
				<li id="toc-Запуск_виртуальных_машин_с_помощью_службы_(автозапуск)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D1%8B_(%D0%B0%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2.1</span>
					<span>Запуск виртуальных машин с помощью службы (автозапуск)</span>
				</div>
			</a>
			
			<ul id="toc-Запуск_виртуальных_машин_с_помощью_службы_(автозапуск)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запуск_виртуальной_машины_по_горячей_клавише" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B_%D0%BF%D0%BE_%D0%B3%D0%BE%D1%80%D1%8F%D1%87%D0%B5%D0%B9_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2.2</span>
					<span>Запуск виртуальной машины по горячей клавише</span>
				</div>
			</a>
			
			<ul id="toc-Запуск_виртуальной_машины_по_горячей_клавише-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Использование_конкретных_устройств_в_виртуальной_машине" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BD%D0%BA%D1%80%D0%B5%D1%82%D0%BD%D1%8B%D1%85_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2_%D0%B2_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Использование конкретных устройств в виртуальной машине</span>
				</div>
			</a>
			
			<ul id="toc-Использование_конкретных_устройств_в_виртуальной_машине-sublist" class="vector-toc-list">
				<li id="toc-Использование_USB_веб-камеры/микрофона" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_USB_%D0%B2%D0%B5%D0%B1-%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B/%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%84%D0%BE%D0%BD%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3.1</span>
					<span>Использование USB веб-камеры/микрофона</span>
				</div>
			</a>
			
			<ul id="toc-Использование_USB_веб-камеры/микрофона-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Обнаружение_веб-камер_и_других_USB-устройств" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D0%BD%D0%B0%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B5%D0%B1-%D0%BA%D0%B0%D0%BC%D0%B5%D1%80_%D0%B8_%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D1%85_USB-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3.2</span>
					<span>Обнаружение веб-камер и других USB-устройств</span>
				</div>
			</a>
			
			<ul id="toc-Обнаружение_веб-камер_и_других_USB-устройств-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Доступ_к_гостевому_серверу" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF_%D0%BA_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%BC%D1%83_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D1%83">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Доступ к гостевому серверу</span>
				</div>
			</a>
			
			<ul id="toc-Доступ_к_гостевому_серверу-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-D3D_ускорение_в_гостевой_Windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#D3D_%D1%83%D1%81%D0%BA%D0%BE%D1%80%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>D3D ускорение в гостевой Windows</span>
				</div>
			</a>
			
			<ul id="toc-D3D_ускорение_в_гостевой_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VirtualBox_c_USB-ключом" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VirtualBox_c_USB-%D0%BA%D0%BB%D1%8E%D1%87%D0%BE%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>VirtualBox c USB-ключом</span>
				</div>
			</a>
			
			<ul id="toc-VirtualBox_c_USB-ключом-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запуск_установленного_Arch_Linux_внутри_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_Arch_Linux_%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B8_VirtualBox">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7</span>
					<span>Запуск установленного Arch Linux внутри VirtualBox</span>
				</div>
			</a>
			
			<ul id="toc-Запуск_установленного_Arch_Linux_внутри_VirtualBox-sublist" class="vector-toc-list">
				<li id="toc-Убедитесь,_что_система_наименования_разделов_не_изменяется" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D0%B1%D0%B5%D0%B4%D0%B8%D1%82%D0%B5%D1%81%D1%8C,_%D1%87%D1%82%D0%BE_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D0%BD%D0%B0%D0%B8%D0%BC%D0%B5%D0%BD%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2_%D0%BD%D0%B5_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D1%82%D1%81%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.1</span>
					<span>Убедитесь, что система наименования разделов не изменяется</span>
				</div>
			</a>
			
			<ul id="toc-Убедитесь,_что_система_наименования_разделов_не_изменяется-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Убедитесь_в_корректности_образа_mkinitcpio" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D0%B1%D0%B5%D0%B4%D0%B8%D1%82%D0%B5%D1%81%D1%8C_%D0%B2_%D0%BA%D0%BE%D1%80%D1%80%D0%B5%D0%BA%D1%82%D0%BD%D0%BE%D1%81%D1%82%D0%B8_%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%B0_mkinitcpio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.2</span>
					<span>Убедитесь в корректности образа mkinitcpio</span>
				</div>
			</a>
			
			<ul id="toc-Убедитесь_в_корректности_образа_mkinitcpio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Создание_конфигурации_виртуальной_машины_для_загрузки_с_физического_диска" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B_%D0%B4%D0%BB%D1%8F_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D1%81_%D1%84%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.3</span>
					<span>Создание конфигурации виртуальной машины для загрузки с физического диска</span>
				</div>
			</a>
			
			<ul id="toc-Создание_конфигурации_виртуальной_машины_для_загрузки_с_физического_диска-sublist" class="vector-toc-list">
				<li id="toc-Создайте_потоковый(raw)_образ_.vmdk" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%B9%D1%82%D0%B5_%D0%BF%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%B2%D1%8B%D0%B9(raw)_%D0%BE%D0%B1%D1%80%D0%B0%D0%B7_.vmdk">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.3.1</span>
					<span>Создайте потоковый(raw) образ .vmdk</span>
				</div>
			</a>
			
			<ul id="toc-Создайте_потоковый(raw)_образ_.vmdk-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Создание_файла_конфигурации_виртуальной_машины" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0_%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.3.2</span>
					<span>Создание файла конфигурации виртуальной машины</span>
				</div>
			</a>
			
			<ul id="toc-Создание_файла_конфигурации_виртуальной_машины-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Установка_дополнений_гостевой_ОС" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%9E%D0%A1">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7.4</span>
					<span>Установка дополнений гостевой ОС</span>
				</div>
			</a>
			
			<ul id="toc-Установка_дополнений_гостевой_ОС-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Физическая_установка_системы_Arch_Linux_из_VirtualBox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A4%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B_Arch_Linux_%D0%B8%D0%B7_VirtualBox">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8</span>
					<span>Физическая установка системы Arch Linux из VirtualBox</span>
				</div>
			</a>
			
			<ul id="toc-Физическая_установка_системы_Arch_Linux_из_VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Перемещение_физически_установленного_Windows_в_виртуальную_машину" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D0%B5_%D1%84%D0%B8%D0%B7%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_Windows_%D0%B2_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%83%D1%8E_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%83">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9</span>
					<span>Перемещение физически установленного Windows в виртуальную машину</span>
				</div>
			</a>
			
			<ul id="toc-Перемещение_физически_установленного_Windows_в_виртуальную_машину-sublist" class="vector-toc-list">
				<li id="toc-Задачи_в_Windows" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B4%D0%B0%D1%87%D0%B8_%D0%B2_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9.1</span>
					<span>Задачи в Windows</span>
				</div>
			</a>
			
			<ul id="toc-Задачи_в_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Задачи_в_GNU/Linux" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B4%D0%B0%D1%87%D0%B8_%D0%B2_GNU/Linux">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9.2</span>
					<span>Задачи в GNU/Linux</span>
				</div>
			</a>
			
			<ul id="toc-Задачи_в_GNU/Linux-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Исправление_MBR_и_загрузчика_Microsoft" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_MBR_%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA%D0%B0_Microsoft">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9.3</span>
					<span>Исправление MBR и загрузчика Microsoft</span>
				</div>
			</a>
			
			<ul id="toc-Исправление_MBR_и_загрузчика_Microsoft-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Известные_ограничения" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9.4</span>
					<span>Известные ограничения</span>
				</div>
			</a>
			
			<ul id="toc-Известные_ограничения-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Решение проблем</span>
			</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-VERR_ACCESS_DENIED" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VERR_ACCESS_DENIED">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>VERR_ACCESS_DENIED</span>
				</div>
			</a>
			
			<ul id="toc-VERR_ACCESS_DENIED-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Клавиатура_и_мышь_заблокированы_виртуальной_машиной" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D0%BB%D0%B0%D0%B2%D0%B8%D0%B0%D1%82%D1%83%D1%80%D0%B0_%D0%B8_%D0%BC%D1%8B%D1%88%D1%8C_%D0%B7%D0%B0%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D1%8B_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D0%BE%D0%B9">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Клавиатура и мышь заблокированы виртуальной машиной</span>
				</div>
			</a>
			
			<ul id="toc-Клавиатура_и_мышь_заблокированы_виртуальной_машиной-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_работают_64-битные_гостевые_ОС" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D1%8E%D1%82_64-%D0%B1%D0%B8%D1%82%D0%BD%D1%8B%D0%B5_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D0%9E%D0%A1">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Не работают 64-битные гостевые ОС</span>
				</div>
			</a>
			
			<ul id="toc-Не_работают_64-битные_гостевые_ОС-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_могу_отправить_комбинацию_CTRL+ALT+Fn_в_виртуальную_машину" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D0%BC%D0%BE%D0%B3%D1%83_%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C_%D0%BA%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B0%D1%86%D0%B8%D1%8E_CTRL+ALT+Fn_%D0%B2_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%83%D1%8E_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%83">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.4</span>
					<span>Не могу отправить комбинацию CTRL+ALT+Fn в виртуальную машину</span>
				</div>
			</a>
			
			<ul id="toc-Не_могу_отправить_комбинацию_CTRL+ALT+Fn_в_виртуальную_машину-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Исправление_проблем_в_ISO-образах" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC_%D0%B2_ISO-%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%B0%D1%85">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.5</span>
					<span>Исправление проблем в ISO-образах</span>
				</div>
			</a>
			
			<ul id="toc-Исправление_проблем_в_ISO-образах-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VirtualBox_GUI_не_видит_мою_тему_GTK_2x/3x" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VirtualBox_GUI_%D0%BD%D0%B5_%D0%B2%D0%B8%D0%B4%D0%B8%D1%82_%D0%BC%D0%BE%D1%8E_%D1%82%D0%B5%D0%BC%D1%83_GTK_2x/3x">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.6</span>
					<span>VirtualBox GUI не видит мою тему GTK 2x/3x</span>
				</div>
			</a>
			
			<ul id="toc-VirtualBox_GUI_не_видит_мою_тему_GTK_2x/3x-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-OpenBSD_не_работает_при_недоступных_инструкциях_виртуализации" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OpenBSD_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82_%D0%BF%D1%80%D0%B8_%D0%BD%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%BD%D1%8B%D1%85_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F%D1%85_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.7</span>
					<span>OpenBSD не работает при недоступных инструкциях виртуализации</span>
				</div>
			</a>
			
			<ul id="toc-OpenBSD_не_работает_при_недоступных_инструкциях_виртуализации-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.8</span>
					<span>VBOX_E_INVALID_OBJECT_STATE (0x80BB0007)</span>
				</div>
			</a>
			
			<ul id="toc-VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Подсистема_USB_не_работает" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_USB_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.9</span>
					<span>Подсистема USB не работает</span>
				</div>
			</a>
			
			<ul id="toc-Подсистема_USB_не_работает-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Ошибка_создания_сетевого_интерфейса_"host-only"' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#%D0%9E%D1%88%D0%B8%D0%B1%D0%BA%D0%B0_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F_%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B3%D0%BE_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0_"host-only"'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.10</span>
					<span>Ошибка создания сетевого интерфейса "host-only"</span>
				</div>
			</a>
			
			<ul id='toc-Ошибка_создания_сетевого_интерфейса_"host-only"-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-WinXP:_глубина_цвета_не_может_превышать_16_цветов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#WinXP:_%D0%B3%D0%BB%D1%83%D0%B1%D0%B8%D0%BD%D0%B0_%D1%86%D0%B2%D0%B5%D1%82%D0%B0_%D0%BD%D0%B5_%D0%BC%D0%BE%D0%B6%D0%B5%D1%82_%D0%BF%D1%80%D0%B5%D0%B2%D1%8B%D1%88%D0%B0%D1%82%D1%8C_16_%D1%86%D0%B2%D0%B5%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.11</span>
					<span>WinXP: глубина цвета не может превышать 16 цветов</span>
				</div>
			</a>
			
			<ul id="toc-WinXP:_глубина_цвета_не_может_превышать_16_цветов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_последовательных_портов_в_гостевой_ОС" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D1%80%D1%82%D0%BE%D0%B2_%D0%B2_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%9E%D0%A1">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.12</span>
					<span>Использование последовательных портов в гостевой ОС</span>
				</div>
			</a>
			
			<ul id="toc-Использование_последовательных_портов_в_гостевой_ОС-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Windows_8.x_ошибка_0x000000C4" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Windows_8.x_%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B0_0x000000C4">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.13</span>
					<span>Windows 8.x ошибка 0x000000C4</span>
				</div>
			</a>
			
			<ul id="toc-Windows_8.x_ошибка_0x000000C4-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Windows_8_VM_вылетает_при_загрузке_с_ошибкой_"ERR_DISK_FULL"' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#Windows_8_VM_%D0%B2%D1%8B%D0%BB%D0%B5%D1%82%D0%B0%D0%B5%D1%82_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5_%D1%81_%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%BE%D0%B9_"ERR_DISK_FULL"'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.14</span>
					<span>Windows 8 VM вылетает при загрузке с ошибкой "ERR_DISK_FULL"</span>
				</div>
			</a>
			
			<ul id='toc-Windows_8_VM_вылетает_при_загрузке_с_ошибкой_"ERR_DISK_FULL"-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Гостевая_ОС_Linux_выдаёт_искажённый_или_запаздывающий_звук" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%93%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%B0%D1%8F_%D0%9E%D0%A1_Linux_%D0%B2%D1%8B%D0%B4%D0%B0%D1%91%D1%82_%D0%B8%D1%81%D0%BA%D0%B0%D0%B6%D1%91%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BB%D0%B8_%D0%B7%D0%B0%D0%BF%D0%B0%D0%B7%D0%B4%D1%8B%D0%B2%D0%B0%D1%8E%D1%89%D0%B8%D0%B9_%D0%B7%D0%B2%D1%83%D0%BA">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.15</span>
					<span>Гостевая ОС Linux выдаёт искажённый или запаздывающий звук</span>
				</div>
			</a>
			
			<ul id="toc-Гостевая_ОС_Linux_выдаёт_искажённый_или_запаздывающий_звук-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Гостевая_ОС_зависает_после_запуска_Xorg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%93%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%B0%D1%8F_%D0%9E%D0%A1_%D0%B7%D0%B0%D0%B2%D0%B8%D1%81%D0%B0%D0%B5%D1%82_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA%D0%B0_Xorg">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.16</span>
					<span>Гостевая ОС зависает после запуска Xorg</span>
				</div>
			</a>
			
			<ul id="toc-Гостевая_ОС_зависает_после_запуска_Xorg-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-Исчезновение_пунктов_меню_и_ошибка_"NS_ERROR_FAILURE"' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#%D0%98%D1%81%D1%87%D0%B5%D0%B7%D0%BD%D0%BE%D0%B2%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%83%D0%BD%D0%BA%D1%82%D0%BE%D0%B2_%D0%BC%D0%B5%D0%BD%D1%8E_%D0%B8_%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B0_"NS_ERROR_FAILURE"'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.17</span>
					<span>Исчезновение пунктов меню и ошибка "NS_ERROR_FAILURE"</span>
				</div>
			</a>
			
			<ul id='toc-Исчезновение_пунктов_меню_и_ошибка_"NS_ERROR_FAILURE"-sublist' class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-"Указанный_путь_не_существует._Проверьте_путь_и_попробуйте_еще_раз."_Ошибка_в_гостевой_ОС_Windows' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#"%D0%A3%D0%BA%D0%B0%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9_%D0%BF%D1%83%D1%82%D1%8C_%D0%BD%D0%B5_%D1%81%D1%83%D1%89%D0%B5%D1%81%D1%82%D0%B2%D1%83%D0%B5%D1%82._%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D1%8C%D1%82%D0%B5_%D0%BF%D1%83%D1%82%D1%8C_%D0%B8_%D0%BF%D0%BE%D0%BF%D1%80%D0%BE%D0%B1%D1%83%D0%B9%D1%82%D0%B5_%D0%B5%D1%89%D0%B5_%D1%80%D0%B0%D0%B7."_%D0%9E%D1%88%D0%B8%D0%B1%D0%BA%D0%B0_%D0%B2_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%9E%D0%A1_Windows'>
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.18</span>
					<span>"Указанный путь не существует. Проверьте путь и попробуйте еще раз." Ошибка в гостевой ОС Windows</span>
				</div>
			</a>
			
			<ul id='toc-"Указанный_путь_не_существует._Проверьте_путь_и_попробуйте_еще_раз."_Ошибка_в_гостевой_ОС_Windows-sublist' class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Смотрите также</span>
			</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">VirtualBox (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/VirtualBox" title="VirtualBox – Deutsch" lang="de" hreflang="de" data-title="VirtualBox" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/VirtualBox.html" title="VirtualBox – English" lang="en" hreflang="en" data-title="VirtualBox" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/VirtualBox.html" title="VirtualBox – español" lang="es" hreflang="es" data-title="VirtualBox" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/VirtualBox" title="VirtualBox – 日本語" lang="ja" hreflang="ja" data-title="VirtualBox" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/VirtualBox.html" title="VirtualBox – português" lang="pt" hreflang="pt" data-title="VirtualBox" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/VirtualBox" title="VirtualBox – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="VirtualBox" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a>. Дата последней синхронизации: 17 ноября 2020. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=VirtualBox&amp;diff=0&amp;oldid=641743">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../en/VirtualBox/Install_Arch_Linux_as_a_guest.html" title="VirtualBox/Install Arch Linux as a guest">VirtualBox/Install Arch Linux as a guest</a></li>
<li><a href="../ru/Category:Hypervisors.html" title="Category:Hypervisors (Русский)">Category:Hypervisors (Русский)</a></li>
<li><a href="../en/PhpVirtualBox.html" title="PhpVirtualBox">PhpVirtualBox</a></li>
<li><a href="../en/RemoteBox.html" title="RemoteBox">RemoteBox</a></li>
<li><a href="../en/Moving_an_existing_install_into_(or_out_of)_a_virtual_machine.html" title="Moving an existing install into (or out of) a virtual machine">Moving an existing install into (or out of) a virtual machine</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.virtualbox.org">VirtualBox</a> — <a href="https://en.wikipedia.org/wiki/ru:%D0%93%D0%B8%D0%BF%D0%B5%D1%80%D0%B2%D0%B8%D0%B7%D0%BE%D1%80" class="extiw" title="wikipedia:ru:Гипервизор">гипервизор</a>, предназначенный для запуска операционных систем в специальной среде, называемой виртуальной машиной, поверх существующей операционной системы. VirtualBox постоянно развивается и внедряет новые возможности. Взаимодействовать с виртуальными машинами можно как через графический интерфейс на базе <a href="../ru/Qt.html" title="Qt (Русский)">Qt</a>, так и с помощью <a href="https://en.wikipedia.org/wiki/Headless_software" class="extiw" title="wikipedia:Headless software">headless</a>- и <a href="https://en.wikipedia.org/wiki/ru:Simple_DirectMedia_Layer" class="extiw" title="wikipedia:ru:Simple DirectMedia Layer">SDL</a>-утилит командной строки.
</p>
<p>Для некоторых гостевых ОС были разработаны <i>гостевые дополнения</i> (guest additions), которые позволяют частично совмещать функциональность хостовой и гостевой операционных систем — совместный доступ к каталогам и буферу обмена, ускорение видео и бесшовная интеграция окон.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p>Установите VirtualBox по указаниям ниже, чтобы создавать и запускать виртуальные машины в Arch Linux.
</p>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BE.D1.81.D0.BD.D0.BE.D0.B2.D0.BD.D1.8B.D1.85_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Установка_основных_пакетов">Установка основных пакетов</span>
</h3>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox">virtualbox</a></span>. Кроме того, необходимо установить host-модули:
</p>
<ul>
<li>для ядра <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-modules-arch">virtualbox-host-modules-arch</a></span>.</li>
<li>для других <a href="../ru/Kernel.html" title="Kernel (Русский)">ядер</a> (включая <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>) установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span>.</li>
</ul>
<p><a href="../ru/Dynamic_Kernel_Module_Support.html" title="Dynamic Kernel Module Support (Русский)">DKMS</a>-хук Pacman автоматически перекомпилирует модули <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span> при каждом обновлении VirtualBox и/или ядра. При компиляции потребуются пакеты с заголовочными файлами для вашего ядра (например, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts-headers">linux-lts-headers</a></span> для ядра <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>) <a rel="nofollow" class="external autonumber" href="https://lists.archlinux.org/archives/list/arch-dev-public@lists.archlinux.org/message/X6D3UNFV6TXYYNF74ES2AX5ETREAIBCG/">[1]</a>.
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.BF.D0.B8.D1.81.D1.8B.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9"></span><span class="mw-headline" id="Подписывание_модулей">Подписывание модулей</span>
</h3>
<p>Если вы используете нестандартное ядро с включённой опцией <code>CONFIG_MODULE_SIG_FORCE</code>, то необходимо подписать ваши модули ключом, сгенерированным во время компиляции ядра.
</p>
<p>Перейдите в дерево каталогов вашего ядра и выполните:
</p>
<pre># for module in `ls /lib/modules/$(uname -r)/kernel/misc/{vboxdrv.ko,vboxnetadp.ko,vboxnetflt.ko}` ; do ./scripts/sign-file sha1 certs/signing_key.pem certs/signing_key.x509 $module ; done
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Алгоритм хэширования может отличаться от указанного, но он должен быть встроен в ядро.</div>
<h3>
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9_.D1.8F.D0.B4.D1.80.D0.B0_.D0.B4.D0.BB.D1.8F_VirtualBox"></span><span class="mw-headline" id="Загрузка_модулей_ядра_для_VirtualBox">Загрузка модулей ядра для VirtualBox</span>
</h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-modules-arch">virtualbox-host-modules-arch</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-host-dkms">virtualbox-host-dkms</a></span> используют службу <code>systemd-modules-load.service</code> для загрузки необходимых VirtualBox модулей ядра при запуске системы. Если необходимо загрузить модуль сразу после установки, то либо перезагрузитесь, либо однократно загрузите его вручную. Список модулей можно найти в файлах <code>/usr/lib/modules-load.d/virtualbox-host-modules-arch.conf</code> или <code>/usr/lib/modules-load.d/virtualbox-host-dkms.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если автоматическая загрузка модулей VirtualBox при запуске системы нежелательна, замаскируйте файлы <code>/usr/lib/modules-load.d/virtualbox-host-modules-arch.conf</code> и <code>/usr/lib/modules-load.d/virtualbox-host-dkms.conf</code>, создав пустой файл (или символическую ссылку на <code>/dev/null</code>) с таким же именем в каталоге <code>/etc/modules-load.d/</code>.</div>
<p>Среди используемых VirtualBox <a href="../ru/Kernel_module.html" title="Kernel module (Русский)">модулей ядра</a> обязательным является <code>vboxdrv</code>. Если он не был загружен, то запустить виртуальные машины не получится.
</p>
<p>Чтобы загрузить модуль вручную, выполните:
</p>
<pre># modprobe vboxdrv
</pre>
<p>Следующие модули необходимы в некоторых сложных конфигурациях:
</p>
<ul><li>
<code>vboxnetadp</code> и <code>vboxnetflt</code> необходимы для сетевых взаимодействий в режимах <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch06.html#network_bridged">bridged</a> и <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch06.html#network_hostonly">host-only</a>. Если точнее, <code>vboxnetadp</code> позволяет через настройки VirtualBox создать в хостовой системе программный сетевой интерфейс, а <code>vboxnetflt</code> даёт виртуальной машине возможность его использовать.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если модули ядра для VirtualBox были загружены, а после этого получили обновления, то необходимо перезагрузить их вручную, чтобы заработала обновлённая версия. Для этого выполните команду <code>vboxreload</code> с правами root.</div>
<h3>
<span id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.BA_USB-.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0.D0.BC_.D1.85.D0.BE.D1.81.D1.82.D0.B0_.D0.B8.D0.B7_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.BE.D0.B9_.D0.9E.D0.A1"></span><span class="mw-headline" id="Доступ_к_USB-устройствам_хоста_из_гостевой_ОС">Доступ к USB-устройствам хоста из гостевой ОС</span>
</h3>
<p>Добавьте пользователя в <a href="../ru/Users_and_groups.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" class="mw-redirect" title="Группы">группу</a> <code>vboxusers</code>, если необходимо предоставить ему доступ к USB-портам хоста из виртуальной машины.
</p>
<h3>
<span id=".D0.94.D0.B8.D1.81.D0.BA_.D1.81_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D1.8B.D0.BC.D0.B8_.D0.B4.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D1.8F.D0.BC.D0.B8"></span><span class="mw-headline" id="Диск_с_гостевыми_дополнениями">Диск с гостевыми дополнениями</span>
</h3>
<p>Если в качестве гостя выступает не Arch Linux, то имеет смысл установить пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-iso">virtualbox-guest-iso</a></span>. Он работает как образ диска, с которого можно установить гостевые дополнения. Файл <i>.iso</i> будет находиться в каталоге <code>/usr/lib/virtualbox/additions/VBoxGuestAdditions.iso</code>. Зайдите в гостевую систему, вручную смонтируйте образ и запустите установщик.
</p>
<h3>
<span id=".D0.A0.D0.B0.D1.81.D1.88.D0.B8.D1.80.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Расширения">Расширения</span>
</h3>
<p>Oracle Extension Pack предоставляет <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch01.html#intro-installing">набор дополнительной функциональности</a>. Набор распространяется под несвободной лицензией <b>только для личного пользования</b>. Расширения доступны в виде пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/virtualbox-ext-oracle/">virtualbox-ext-oracle</a></span><sup><small>AUR</small></sup> в AUR или в скомпилированном виде в неофициальном репозитории <a href="../en/Unofficial_user_repositories.html#seblu" title="Unofficial user repositories">seblu</a>.
</p>
<p>Более "традиционный" способ — скачать расширения с сайта разработчиков и установить их либо через графический интерфейс (<i>File &gt; Preferences &gt; Extensions</i>), либо командой <code>VBoxManage extpack install &lt;.vbox-extpack&gt;</code>. Предварительно убедитесь, что у вас есть инструмент вроде <a href="../ru/Polkit.html" title="Polkit (Русский)">Polkit</a> для выдачи привилегированного доступа к VirtualBox — установка требует <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/8473">прав root</a>.
</p>
<h3>
<span id=".D0.98.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.8B"></span><span class="mw-headline" id="Интерфейсы">Интерфейсы</span>
</h3>
<p>Для VirtualBox разработано три интерфейса:
</p>
<ul>
<li>стандартный графический интерфейс, команда <code>VirtualBox</code>.</li>
<li>интерфейс командной строки, команда <code>VBoxSDL</code>; создаёт окно виртуальной машины без оверлеев.</li>
<li>интерфейс командной строки без отображения окон (например, для ВМ, находящейся на сервере), команда <code>VBoxHeadless</code>. Расширение VRDP позволяет получить доступ к экрану виртеальной машины.</li>
</ul>
<p>Настройки безопасности Wayland (в частности, при использовании GDM) не пропускает ввод с клавиатуры в VirtualBox, что мешает, например, использовать в гостевой ОС комбинации клавиш. Чтобы это обойти, добавьте VirtualBox в белый список:
</p>
<pre>$ gsettings get org.gnome.mutter.wayland xwayland-grab-access-rules
$ gsettings set org.gnome.mutter.wayland xwayland-grab-access-rules "['VirtualBox Machine']"
</pre>
<p>Первая команда выведет текущий список приложений в белом списке. 'VirtualBox Machine' необходимо добавить к этому списку (вторая команда в примере выше не добавляет, а создаёт список из ровно одного элемента).
</p>
<p>Наконец, можно администрировать виртуальные машины через веб-интерфейс с помощью <a href="../en/PhpVirtualBox.html" title="PhpVirtualBox">phpVirtualBox</a>.
</p>
<p>Инструкции по созданиию виртуальных машин можно найти в <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual">руководстве пользователя</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Если вы собираетесь хранить образы виртуальных дисков в файловой системе <a href="../ru/Btrfs.html" title="Btrfs (Русский)">Btrfs</a>, то перед их созданием необходимо отключить <a href="../ru/Btrfs.html#%D0%9A%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8_(CoW)" title="Btrfs (Русский)">copy-on-write</a> для целевого каталога.</div>
<h2>
<span id=".D0.9F.D0.BE.D1.88.D0.B0.D0.B3.D0.BE.D0.B2.D0.B0.D1.8F_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_Arch_Linux_.D0.BA.D0.B0.D0.BA_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.BE.D0.B9_.D0.9E.D0.A1"></span><span class="mw-headline" id="Пошаговая_установка_Arch_Linux_как_гостевой_ОС">Пошаговая установка Arch Linux как гостевой ОС</span>
</h2>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_Arch_Linux_.D0.B2_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.83.D1.8E_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D1.83"></span><span class="mw-headline" id="Установка_Arch_Linux_в_виртуальную_машину">Установка Arch Linux в виртуальную машину</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Хостам с ОС Windows, возможно, придется отключить Hyper-V для того, чтобы использовать возможности виртуализации устройств и создания 64-битных виртуальных машин в VirtualBox. Чтобы узнать, как отключить или снова включить Hyper-V, <a rel="nofollow" class="external text" href="https://superuser.com/questions/684966/switch-off-hyper-v-without-disable-functionality-in-windows-8-1">посмотрите пост на StackOverflow</a>. </div>
<p>Загрузите установочный носитель Arch через один из виртуальных дисков виртуальной машины. Затем совершите установку базовой системы Arch, как описано в <a href="../ru/Installation_guide.html" title="Installation guide (Русский)">руководстве по установке</a>, без установки графических драйверов: мы будем устанавливать драйвера, поставляемые VirtualBox на следующем этапе.
</p>
<h4>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B2_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D0.B5_EFI"></span><span class="mw-headline" id="Установка_в_режиме_EFI">Установка в режиме EFI</span>
</h4>
<p>Если вы хотите установить Arch Linux в режиме EFI внутри VirtualBox, в настройках виртуальной машины, перейдите в закладку <i>Настройки</i>, и установите флажок <i>Enable EFI (special OSes only)</i>. После выбора ядра из меню установочного носителя Arch Linux, установка будут висеть в течение минуты-двух, и после этого будет загружено ядро . Подождите и не прекращайте установку.
</p>
<p>При загрузке в режиме EFI, VirtualBox будет пытаться выполнить <code>/EFI/BOOT/BOOTX64.EFI</code> из ESP. Если первый вариант не удается, VirtualBox будет пытаться выполнить сценарий оболочки EFI <code>startup.nsh</code> из корня ESP. Если вы не хотите вручную запускать загрузчик из оболочки EFI каждый раз, вы должны будете переместить свой загрузчик в этот путь по умолчанию. Не заморачивайтесь с VirtualBox Boot Manager (доступен по <code>F2</code> при загрузке): EFI данные будут добавлены в него вручную при загрузке или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span> будет сохранять их после перезагрузки, <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/11177">но терять после закрытия виртуальной машины</a>.
</p>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D1.8B.D1.85_.D0.B4.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B9"></span><span class="mw-headline" id="Установка_гостевых_дополнений">Установка гостевых дополнений</span>
</h3>
<p>После завершения установки гостевой системы, установите <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html">дополнения гостевой ОС</a>, которые включают драйверы и приложения, оптимизирующие гостевую операционную систему. Они могут быть установлены с помощью <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-utils">virtualbox-guest-utils</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Метод, описанный в <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html#idp54932560">VirtualBox руководстве</a> не работает на гостевой Arch Linux, в результате <code>Unable to determine your Linux distribution</code> несколько раз повторено, как сообщение об ошибке. Если Вы уже попробовали этот первый метод и вы используете правильное описанное выше решение впоследствии, это не удастся. Вы получите ошибку <code>/usr/bin/VBox* exists in filesystem</code> и <code>/usr/lib/VBox* exists in filesystem</code>. Решение заключается в удалении конфликтующих файлов: <code># rm /usr/bin/VBox* /usr/lib/VBox*</code> Эти файлы на самом деле являются символическими ссылками на места, где были установлены гостевые дополнения; По умолчанию, это <code>/opt/VBoxGuestAdditions-<i>номер версии</i></code>. Удалите и эти файлы <code># rm -r /opt/VBoxGuestAdditions-<i>номер версии</i></code>,так как они не нужны. Теперь вы можете перезапустить установку правильным, вышеописанным способом.</div>
<h3>
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9_.D1.8F.D0.B4.D1.80.D0.B0_VirtualBox"></span><span class="mw-headline" id="Загрузка_модулей_ядра_VirtualBox">Загрузка модулей ядра VirtualBox</span>
</h3>
<p>Для автоматической загрузки модулей <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>vboxservice.service</code>, которая загрузит нужные модули и синхронизирует время с хостом.
</p>
<p>Для загрузки модулей вручную выполните:
</p>
<pre># modprobe -a vboxguest vboxsf vboxvideo
</pre>
<h3>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D1.8B.D1.85_.D1.81.D0.B5.D1.80.D0.B2.D0.B8.D1.81.D0.BE.D0.B2_VirtualBox"></span><span class="mw-headline" id="Запуск_гостевых_сервисов_VirtualBox">Запуск гостевых сервисов VirtualBox</span>
</h3>
<p>После довольно непростой установки с модулями ядра VirtualBox, необходимо обеспечить взаимодействие гостевой ОС и хоста посредством сервисов. Гостевой сервис — на самом деле просто исполняемый файл <code>VBoxClient</code>, который будет взаимодействовать с вашей X Window System. <code>VBoxClient</code> управляет следующими функциями:
</p>
<ul>
<li>общий буфер обмена и перетаскивание объектов между хостом и гостевой ОС;</li>
<li>бесшовный оконный режим;</li>
<li>гостевой дисплей автоматически изменяет свой размер в соответствии с размером окна гостевой ОС;</li>
<li>проверка версии VirtualBox, установленной на хосте.</li>
</ul>
<p>Все эти особенности могут быть включены независимо следующими параметрами:
</p>
<pre>$ VBoxClient --clipboard
$ VBoxClient --draganddrop
$ VBoxClient --seamless
$ VBoxClient --checkhostversion
$ VBoxClient --vmsvga
</pre>
<p>Обратите внимание, что <code>VBoxClient</code> принимает только один флаг за раз; каждый вызов запускает отдельный процесс в фоне. Для удобства есть bash-скрипт <code>VBoxClient-all</code>, запускающий все эти функции.
</p>
<p>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-utils">virtualbox-guest-utils</a></span> устанавливает файл <code>/etc/xdg/autostart/vboxclient.desktop</code>, который запускает <code>VBoxClient-all</code> при входе в систему. Если ваша <a href="../ru/Desktop_environment.html" class="mw-redirect" title="Среда рабочего стола">среда рабочего стола</a> или ваш <a href="../ru/Window_manager.html" class="mw-redirect" title="Оконный менеджер">оконный менеджер</a> не поддерживает <a href="../ru/XDG_Autostart.html" title="XDG Autostart (Русский)">XDG Autostart</a>, настройте автозапуск вручную, как описано в разделах <a href="../ru/Autostarting.html#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D1%81%D1%80%D0%B5%D0%B4%D1%8B_%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE_%D1%81%D1%82%D0%BE%D0%BB%D0%B0" class="mw-redirect" title="Автозапуск">Автозапуск#Запуск среды рабочего стола</a> и <a href="../ru/Autostarting.html#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D0%BE%D0%BA%D0%BE%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D0%B0" class="mw-redirect" title="Автозапуск">Автозапуск#Запуск оконного менеджера</a> соответственно.
</p>
<p>VirtualBox также может синхронизировать время между хостом и гостевой ОС. Для этого <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>vboxservice.service</code>.
</p>
<p>Теперь у вас есть рабочая гостевая Arch Linux. Поздравляем!
</p>
<p>Если вы хотите расшарить директории между вашим компьютером и гостевым Arch Linux, читайте дальше.
</p>
<h3>
<span id=".D0.A0.D0.B0.D1.81.D1.88.D0.B0.D1.80.D0.B8.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B8.D1.80.D0.B5.D0.BA.D1.82.D0.BE.D1.80.D0.B8.D0.B9"></span><span class="mw-headline" id="Расшаривание_директорий">Расшаривание директорий</span>
</h3>
<p>Общие папки управляются в хосте через настройки виртуальной машины, доступной через графический интерфейс VirtualBox, на вкладке <i>Shared Folders</i>. Там путь к директории и имя точки монтирования определены как <i>Имя папки</i> и аргументы, такие как <i>Read-only</i>, <i>Auto-mount</i> и <i>Make permanent</i> Эти параметры могут быть определены через утилиту <code>VBoxManage</code>. См. <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html#sharedfolders">для более подробной информации</a>.
</p>
<p>Независимо от того, какой метод вы будете использовать, чтобы смонтировать директорию, требуются некоторые начальные действия.
</p>
<p>Чтобы избежать проблемы <code>/sbin/mount.vboxsf: mounting failed with the error: No such device</code>, убедитесь, что модуль ядра <code>vboxsf</code> загружен правильно. Он должен быть загружен, поскольку мы включили все гостевые модули ядра ранее.
</p>
<p>Два дополнительных шага необходимы для того, чтобы точки монтирования должны быть доступны из пользователей кроме root-а:
</p>
<ul>
<li>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virtualbox-guest-utils">virtualbox-guest-utils</a></span> создает группу <code>vboxsf</code>;</li>
<li>Ваше имя пользователя должно быть в этой группе, используйте команду <code>gpasswd -a $USER vboxsf</code>, чтобы добавить свое имя пользователя и запустите <code>newgrp</code>, чтобы применить изменения немедленно.</li>
</ul>
<h4>
<span id=".D0.A0.D1.83.D1.87.D0.BD.D0.BE.D0.B5_.D0.BC.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Ручное_монтирование">Ручное монтирование</span>
</h4>
<p>Выполните следующую команду для монтирования директории в гостевой Arch Linux:
</p>
<pre># mount -t vboxsf <i>имя_расшариваемой_директории</i> <i>точка_монтирования_в_гостевой_ОС</i>
</pre>
<p>Файловая система <code>vboxsf</code> предоставляет и другие способы, просмотреть которые можно выполнив:
</p>
<pre># mount.vboxsf
</pre>
<p>Например, если пользователь не добавлен в <i>vboxsf</i> группу, мы могли бы использовать эту команду, чтобы смонтировать директорию в гостевой ОС:
</p>
<pre># mount -t vboxsf -o uid=1000,gid=1000 home /mnt/
</pre>
<p>Где <i>UID</i> и <i>GID</i> являются значениями, соответствующими пользователям, которым мы хотим дать доступ к монтированию директории. Эти значения можно узнать из вывода команды <code>id</code>, выполненной из сессии этого пользователя.
</p>
<h4>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Автомонтирование">Автомонтирование</span>
</h4>
<p>Чтобы функция автоматического монтирования заработала, вы должны включить флажок в графическом интерфейсе или использовать дополнительный аргумент <code>--automount</code> при команде <code>VBoxManage общая_директория</code>
</p>
<p>Теперь общая директория должна появиться в <code>/media/sf_<i>имя_расшаренной_директории</i></code>.
</p>
<p>Вы можете использовать символические ссылки, если хотите иметь более удобный доступ:
</p>
<pre>$ ln -s /media/sf_<i>имя_расшаренной_директории</i> ~/<i>мои_документы</i>
</pre>
<h4>
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5"></span><span class="mw-headline" id="Монтирование_при_загрузке">Монтирование при загрузке</span>
</h4>
<p>Вы можете монтировать директории с помощью <a href="../ru/Fstab.html" title="Fstab (Русский)">fstab</a>. Во избежание проблем с systemd, необходимо добавить в <code>/etc/fstab</code> строчку <code>comment=systemd.automount</code>.
Таким образом, общие папки монтируются только тогда, когда доступны точки подключения, а не во время запуска. Это может избежать некоторых проблем, особенно если гостевая ОС еще не загружена, когда systemd уже начал читать fstab и монтировать разделы.
</p>
<pre>desktop   /media/desktop    vboxsf  uid=user,gid=group,rw,dmode=700,fmode=600,comment=systemd.automount 0 0
</pre>
<p>mount.vboxsf <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/10676%7C">может не поддерживать</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2020-08-06 ⓘ]</sup> <i>nofail</i> аргумент:
</p>
<pre>desktop   /media/desktop    vboxsf  uid=user,gid=group,rw,dmode=700,fmode=600,nofail 0 0
</pre>
<h2>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.BC.D0.B8_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0.D0.BC.D0.B8"></span><span class="mw-headline" id="Управление_виртуальными_дисками">Управление виртуальными дисками</span>
</h2>
<h3>
<span id=".D0.A4.D0.BE.D1.80.D0.BC.D0.B0.D1.82.D1.8B.2C_.D0.BF.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.B8.D0.B2.D0.B0.D0.B5.D0.BC.D1.8B.D0.B5_VirtualBox"></span><span class="mw-headline" id="Форматы,_поддерживаемые_VirtualBox">Форматы, поддерживаемые VirtualBox</span>
</h3>
<p>VirtualBox поддерживает следующие форматы виртуальных дисков:
</p>
<ul>
<li>
<b>VDI</b>: Virtual Disk Image — собственный контейнер VirtualBox, используемый по умолчанию, когда вы создаёте виртуальную машину в VirtualBox.</li>
<li>
<b>VMDK</b>: Virtual Machine Disk — изначально разработан VMware для своих продуктов. Изначально спецификация была закрытой, но сейчас это открытый формат, который VirtualBox полностью поддерживает. Этот формат даёт возможность разбивать диск на несколько файлов по 2ГБ. Эта функция особенно полезна, если вы хотите сохранить виртуальную машину на компьютерах, которые не поддерживают очень большие файлы. Другие форматы, за исключением формата HDD от Parallels, не предоставляют подобную функцию.</li>
<li>
<b>VHD</b>: Virtual Hard Disk — формат, который использует Microsoft в Windows Virtual PC и Hyper-V. Если вы собираетесь использовать любой из этих продуктов Microsoft, вам придётся выбрать этот формат.</li>
</ul>
<dl><dd><div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Начиная с Windows 7, этот формат может быть примонтирован непосредственно без каких-либо дополнительных приложений.</div></dd></dl>
<ul>
<li>
<b>VHDX</b> (только для чтения): Это расширенная (eXtended) версия формата Virtual Hard Disk, разработанный в Microsoft и выпущенный в 2012-09-04 с Hyper-V 3.0 при переходе на Windows Server 2012. Эта новая версия имеет повышенную производительность (лучшее расположение блоков), бо́льшие размеры блоков и поддержку журнала. VirtualBox <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch15.html#idp63002176">поддерживает этот формат только для чтения</a>.</li>
<li>
<b>HDD</b> (версия 2): Формат HDD разработан Parallels Inc и используются в их гипервизорах, например Parallels Desktop для Mac. Новые версии этого формата (т.е. 3 и 4) не поддерживаются из-за отсутствия документации для этого формата. <div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Существуют споры в отношении поддержки версии 2 формата. Официальное руководство VirtualBox <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch05.html#vdidetails">сообщает, что поддерживается только 2 версия</a>, авторы Википедии утверждают, что <a href="https://en.wikipedia.org/wiki/Comparison_of_platform_virtual_machines#Image_type_compatibility" class="extiw" title="wikipedia:Comparison of platform virtual machines">частично может работать и первая версия</a>. Приветствуется помощь, если вы можете выполнить некоторые тесты с первой версией формата HDD.</div>
</li>
<li>
<b>QED</b>: QEMU Enhanced Disk — старый формат для QEMU, свободный и открытый. Этот формат был разработан в 2010 году таким образом, чтобы обеспечить превосходную альтернативу qcow2 и другим форматам. Этот формат имеет полностью асинхронный ввод-вывод, хорошую целостность данных, откат файлов и разреженные файлы. Формат QED поддерживается только для совместимости с виртуальными машинами, созданными в старых версиях QEMU.</li>
<li>
<b>QCOW</b>: QEMU Copy On Write — нынешний формат для QEMU. Формат QCOW поддерживает прозрачное сжатие на основе ZLIB и шифрование (однако у шифрования есть проблемы, поэтому использовать его не рекомендуется). QCOW доступен в двух версиях: QCOW и QCOW2. Последний, как правило, заменяет первый. QCOW <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch15.html#idp63002176">в настоящее время полностью поддерживается в VirtualBox</a>. QCOW2 имеет две ревизии: QCOW2 0.10 и QCOW2 1.1 (используемый по умолчанию при создании виртуального диска с QEMU). VirtualBox не поддерживает QCOW2.</li>
<li>
<b>OVF</b>: Open Virtualization Format — открытый формат, который был разработан для обеспечения взаимодействия и распределения виртуальных машин между различными гипервизорами. VirtualBox поддерживает все версии этого формата через <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp55423424">импорт/экспорт в VBoxManage</a>, но с <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch14.html#KnownProblems">известными ограничениями</a>.</li>
<li>
<b>RAW</b>: это режим, когда виртуальный диск непосредственно пробрасывается на диск без определённого формата контейнера. VirtualBox поддерживает эту функцию несколькими способами: преобразование RAW-диска <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp59139136">в определённый формат</a>, или <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#VBoxManage-clonevdi">клонирование диска в формате RAW</a>, или непосредственно через файл VMDK, <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#idp57804112">который указывает на физический диск или просто файл</a>.</li>
</ul>
<h3>
<span id=".D0.9F.D1.80.D0.B5.D0.BE.D0.B1.D1.80.D0.B0.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.B4.D0.B8.D1.81.D0.BA.D0.BE.D0.B2_.D1.80.D0.B0.D0.B7.D0.BD.D1.8B.D1.85_.D1.84.D0.BE.D1.80.D0.BC.D0.B0.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Преобразование_виртуальных_дисков_разных_форматов">Преобразование виртуальных дисков разных форматов</span>
</h3>
<h4>
<span id="VMDK_.D0.B2_VDI_.D0.B8_VDI_.D0.B2_VMDK"></span><span class="mw-headline" id="VMDK_в_VDI_и_VDI_в_VMDK">VMDK в VDI и VDI в VMDK</span>
</h4>
<p>VirtualBox может конвертировать VDI в VMDK и обратно с использованием <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi"><code>VBoxManage clonehd</code></a>.
</p>
<p>VMDK в VDI:
</p>
<pre>$ VBoxManage clonehd <i>source.vmdk</i> <i>destination.vdi</i> --format VDI
</pre>
<p>VDI в VMDK:
</p>
<pre>$ VBoxManage clonehd <i>source.vdi</i> <i>destination.vmdk</i> --format VMDK
</pre>
<h4>
<span id="VHD_.D0.B2_VDI_.D0.B8_VDI_.D0.B2_VDH"></span><span class="mw-headline" id="VHD_в_VDI_и_VDI_в_VDH">VHD в VDI и VDI в VDH</span>
</h4>
<p>VirtualBox также может конвертировать VHD в VDI и наоборот с использованием <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi"><code>VBoxManage clonehd</code></a>:
</p>
<p>VHD в VDI:
</p>
<pre>$ VBoxManage clonehd <i>source.vhd</i> <i>destination.vdi</i> --format VDI
</pre>
<p>VDI в VHD:
</p>
<pre>$ VBoxManage clonehd <i>source.vdi</i> <i>destination.vhd</i> --format VHD
</pre>
<h4>
<span id="QCOW2_.D0.B2_VDI_.D0.B8_VDI_.D0.B2_QCOW2"></span><span class="mw-headline" id="QCOW2_в_VDI_и_VDI_в_QCOW2">QCOW2 в VDI и VDI в QCOW2</span>
</h4>
<p><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi"><code>VBoxManage clonehd</code></a> не может конвертировать QEMU форматы и необходимо воспользоваться иными инструментами. Команда <code>qemu-img</code> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu-desktop">qemu-desktop</a></span> может осуществлять преобразования QCOW2&lt;=&gt;VDI. </p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <code>qemu-img</code> также обрабатывает кучу других форматов. В соответствии выводу <code>qemu-img --help</code>, <code>qemu-img</code> поддерживает данные форматы : "<i>vvfat vpc vmdk vhdx vdi ssh sheepdog sheepdog sheepdog raw host_cdrom host_floppy host_device file qed qcow2 qcow parallels nbd nbd nbd iscsi dmg tftp ftps ftp https http cow cloop bochs blkverify blkdebug'".</i>
</div>
<p>QCOW2 в VDI:
</p>
<pre>$ qemu-img convert -pO vdi <i>source.qcow2</i> <i>destination.vdi</i>
</pre>
<p>VDI в QCOW2:
</p>
<pre>$ qemu-img convert -pO qcow2 <i>source.vdi</i> <i>destination.qcow2</i>
</pre>
<p>Так как QCOW2 предостовляется в двух версиях (0.10 и 1.1) (см. <a href="#%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D1%8B,_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_VirtualBox">форматы, поддерживаемые VirtualBox</a>. Используйте параметр <code>-o compat=</code> для выбора версии.
</p>
<pre>$ qemu-img convert -pO qcow2 <i>source.vdi</i> <i>destination.qcow2</i> -o compat=0.10
</pre>
<p>или
</p>
<pre>$ qemu-img convert -pO qcow2 <i>source.vdi</i> <i>destination.qcow2</i> -o compat=1.1
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Параметр <code>-p</code> отображает прогресс выполнения преобразования.</div>
<h3>
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.B4.D0.B8.D1.81.D0.BA.D0.BE.D0.B2"></span><span class="mw-headline" id="Монтирование_виртуальных_дисков">Монтирование виртуальных дисков</span>
</h3>
<h4><span class="mw-headline" id="VDI">VDI</span></h4>
<p>Монтирование образов VDI работает только с образами фиксированного размера (т.е. статичными образами); динамические образы (динамическое выделение размера) монтируются довольно-таки не просто.
</p>
<p>Если необходимо смещение раздела (в VDI), добавьте значение <code>offData</code> в <code>32256</code> (например, 69632 + 32256 = 101888):
</p>
<pre>$ VBoxManage internalcommands dumphdinfo <i>storage</i>.vdi | grep "offData"
</pre>
<p>Теперь cмонтируем:
</p>
<pre># mount -t ext4 -o rw,noatime,noexec,loop,offset=101888 <i>storage</i>.vdi /mntpoint/
</pre>
<p>Вы также можете использовать скрипт <a rel="nofollow" class="external text" href="https://github.com/pld-linux/VirtualBox/blob/master/mount.vdi">mount.vdi</a> (поместите его в каталог <code>/usr/bin/</code>):
</p>
<pre># mount -t vdi -o fstype=ext4,rw,noatime,noexec <i>vdi_file_location</i> <i>/mnt/</i>
</pre>
<p>Также можно использовать модуль ядра nbd и команду <i>qemu-nbd</i> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu-img">qemu-img</a></span><a rel="nofollow" class="external autonumber" href="https://bethesignal.org/blog/2011/01/05/how-to-mount-virtualbox-vdi-image/">[2]</a>:
</p>
<pre># modprobe nbd max_part=16
# qemu-nbd -c /dev/nbd0 <i>storage</i>.vdi
# mount /dev/nbd0p1 /mnt/dir/
</pre>
<p>Размонтирование:
</p>
<pre># umount /mnt/dir/
# qemu-nbd -d /dev/nbd0
</pre>
<p>Если файлы разделов не появляются, попробуйте использовать <code>partprobe /dev/nbd0</code>; в противном случае, VDI раздел может быть отображён непосредственно в файл с помощью <code>qemu-nbd -P 1 -c /dev/nbd0 <i>storage</i>.vdi</code>.
</p>
<p>Ещё один способ — использовать <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vdfuse/">vdfuse</a></span><sup><small>AUR</small></sup>:
</p>
<pre># vdfuse -a -f <i>storage</i>.vdi <i>mountpoint1</i>
</pre>
<p>Эта команда примонтирует диск в каталог <code><i>mountpoint1</i></code>, внутри которого будут файлы разделов с именами вида <code>PartitionN</code>. Разделы можно примонтировать с помощью loop-устройств:
</p>
<pre># mount -o loop <i>mountpoint1</i>/PartitionN <i>mountpoint2</i>
</pre>
<h3>
<span id=".D0.A1.D0.B6.D0.B0.D1.82.D0.B8.D0.B5_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.B4.D0.B8.D1.81.D0.BA.D0.BE.D0.B2"></span><span class="mw-headline" id="Сжатие_виртуальных_дисков">Сжатие виртуальных дисков</span>
</h3>
<p>Сжатие работает только с файлами <i>.vdi</i> и в основном состоит из следующих действий.
</p>
<p>Загрузите виртуальную машину и удалите всё ненужное вручную или с помощью специальных средств, например <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bleachbit">bleachbit</a></span> (<a rel="nofollow" class="external text" href="http://bleachbit.sourceforge.net/download/windows">доступна для ОС Windows</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2024-07-30 ⓘ]</sup>).
</p>
<p>Затрите свободное место нулями. Это можно сделать следующими инструментами:
</p>
<ul>
<li>Если вы пользовались Bleachbit, просто установите галочку <i>System &gt; Free disk space</i> в графическом интерфейсе или выполните команду <code>bleachbit -c system.free_disk_space</code> в терминале;</li>
<li>В UNIX-based системах выполните команду <code>dd</code> или, предпочтительно, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/dcfldd/">dcfldd</a></span><sup><small>AUR</small></sup> (см. <a rel="nofollow" class="external text" href="https://superuser.com/a/355322">здесь</a> информацию об отличиях):</li>
</ul>
<dl>
<dd><pre># dcfldd if=/dev/zero of=<i>/fillfile</i> bs=4M</pre></dd>
<dd>Когда <code>fillfile</code> займёт всё свободное место, появится сообщение вида <code>1280 blocks (5120Mb) written.dcfldd:: No space left on device</code>. Это означает, что всё доступное пользователю пространство и незарезервированные блоки раздела были затёрты. Используя эту команду от имени суперпользователя, важно убедиться в том, что затёрты все свободные блоки. По умолчанию некий процент блоков ФС зарезервирован для суперпользователя (смотрите аргумент <code>-m</code> команды <code>mkfs.ext4</code> или используйте <code>tune2fs -l</code>, чтобы увидеть, сколько места зарезервировано под приложения, запущенные от имени root).</dd>
<dd>Когда вышеописанный процесс будет завершён, вы можете удалить созданный вами файл <code><i>fillfile</i></code>.</dd>
</dl>
<ul><li>В Windows есть два инструмента:
<ul>
<li>
<code>sdelete</code> из <a rel="nofollow" class="external text" href="https://technet.microsoft.com/en-us/sysinternals/bb842062.aspx">Sysinternals Suite</a>, выполните <code>sdelete -s -z <i>c:</i></code> для каждого виртуального диска;</li>
<li>для любителей скриптов есть <a rel="nofollow" class="external text" href="http://blog.whatsupduck.net/2012/03/powershell-alternative-to-sdelete.html">скрипт на PowerShell</a>. Его также необходимо запускать отдельно для каждого виртуального диска.</li>
</ul>
</li></ul>
<dl><dd><dl>
<dd><pre>PS&gt; ./Write-ZeroesToFreeSpace.ps1 -Root <i>c:\</i> -PercentFree 0</pre></dd>
<dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Этот скрипт должен быть запущен в среде PowerShell от имени администратора. По умолчанию скрипты не запускаются из-за ограничений политик безопасности. Необходимо изменить значение параметра <code>Get-ExecutionPolicy</code> в политиках безопасности: <code>Set-ExecutionPolicy RemoteSigned</code>.</div></dd>
</dl></dd></dl>
<p>После завершения выключите виртуальную машину.
</p>
<p>При следующем включении виртуальной машины рекомендуется провести проверку диска.
</p>
<ul>
<li>в UNIX-based системах можно вручную запустить <code>fsck</code>;
<ul><li>в GNU/Linux, в том числе Arch Linux, вы можете запустить принудительную проверку диска во время загрузки вручную <a href="../ru/Fsck.html#%D0%9F%D1%80%D0%B8%D0%BD%D1%83%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0" title="Fsck (Русский)">через параметры ядра</a>;</li></ul>
</li>
<li>в Windows:
<ul>
<li>
<code>chkdsk <i>c:</i> /F</code>, где <code><i>c:</i></code> заменяется на имя проверяемого диска;</li>
<li>или <code>FsckDskAll</code> <a rel="nofollow" class="external text" href="https://archive.org/details/ChkDskAll">отсюда</a>, который основан на <code>chkdsk</code>, но не требует повторения команды для каждого отдельного диска;</li>
</ul>
</li>
</ul>
<p>Теперь удалите нули из файлов <i>.vdi</i> с помощью <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvdi">VBoxManage modifyhd</a>:
</p>
<pre>$ VBoxManage modifyhd <i>ваш_диск.vdi</i> --compact
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если в вашей виртуальной машине есть снимки, вам необходимо выполнить команду для всех ваших <code>.vdi</code> файлов.</div>
<h3>
<span id=".D0.A3.D0.B2.D0.B5.D0.BB.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D0.B7.D0.BC.D0.B5.D1.80.D0.B0_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.B4.D0.B8.D1.81.D0.BA.D0.BE.D0.B2"></span><span class="mw-headline" id="Увеличение_размера_виртуальных_дисков">Увеличение размера виртуальных дисков</span>
</h3>
<p>Если вы выходите за рамки пространства жесткого диска, которое выбрали при создании виртуальной машины, проблему можно решить по совету из руководства VirtualBox <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#VBoxManage-modifyvdi"><code>VBoxManage modifyhd</code></a>. Эта команда работает только для динамически расширяемых дисков VDI и VHD . Если вы хотите изменить размер фиксированного виртуального диска, можете использовать нижеописанный трюк, который работает и на виртуальной машине Windows, и в UNIX-подобных системах.
</p>
<p>Во-первых, создайте новый виртуальный диск рядом с тем, который вы хотите увеличить:
</p>
<p> $ VBoxManage createhd -filename <i> new.vdi </i> --size <i> 10000 </i>
</p>
<p>где размер указан в MiB, в этом примере 10000MiB ~ = 10GiB, <i>new.vdi</i> - имя создаваемого нового виртуального диска.
</p>
<p>Далее старый виртуальный диск должен быть клонирован в новый(это может занять длительной время):
</p>
<p> $ VBoxManage clonehd <i>old.vdi</i> <i> ew.vdi</i> --existing
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> По умолчанию, эта команда использует <i>Standard</i> (что соответствует динамическому выделению) формату файла диска, и, следовательно, не будет использовать тот же формат в качестве формата исходного виртуального диска. Если ваш <i>old.vdi</i> имеет фиксированный размер, и вы хотите, чтобы новый диск был тоже фиксированным, добавьте параметр <code>--variant Fixed</code>.</div>
<p>Отключите старый диск и установите новый, обязательно заменив все выделенные курсивом аргументы на свои:
</p>
<pre>$ VBoxManage storageattach <i>VM_name</i> --storagectl <i>SATA</i> --port <i>0</i> --medium none
$ VBoxManage storageattach <i>VM_name</i> --storagectl <i>SATA</i> --port <i>0</i> --medium <i>new.vdi</i> --type hdd
</pre>
<p>Чтобы получить имя контроллера диска и номер порта, вы можете использовать команду <code>VBoxManage showvminfo <i>VM_name</i></code>. Среди вывода вы получите такой результат (то, что вы ищете выделено курсивом):
</p>
<pre>[...]
Storage Controller Name (0):            IDE
Storage Controller Type (0):            PIIX4
Storage Controller Instance Number (0): 0
Storage Controller Max Port Count (0):  2
Storage Controller Port Count (0):      2
Storage Controller Bootable (0):        on
Storage Controller Name (1):            SATA
Storage Controller Type (1):            IntelAhci
Storage Controller Instance Number (1): 0
Storage Controller Max Port Count (1):  30
Storage Controller Port Count (1):      1
Storage Controller Bootable (1):        on
IDE (1, 0): Empty
<i>SATA</i> (<i>0</i>, 0): /home/wget/IT/Virtual_machines/GNU_Linux_distributions/ArchLinux_x64_EFI/Snapshots/{6bb17af7-e8a2-4bbf-baac-fbba05ebd704}.vdi (UUID: 6bb17af7-e8a2-4bbf-baac-fbba05ebd704)
[...]</pre>
<p>Скачайте <a rel="nofollow" class="external text" href="https://gparted.org/download.php">GParted LiveCD</a> и установите его в качестве виртуального привода , загрузите вашу виртуальную машину, используйте увеличение / перемещение ваших разделов. По окончании работы отмонтируйте GParted LiveCD и перезагрузите машину.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> На GPT дисках, увеличение размера диска приведет к созданию резервной копии заголовка GPT в месте, отличном от конца устройства. GParted попросит, чтобы исправить проблему, нажать на <i>исправить</i> два раза. На дисках MBR такой проблемы не возникнет.</div>
<p>Наконец, отключите старый виртуальный диск в VirtualBox и удалите его:
</p>
<pre>$ VBoxManage closemedium disk <i>old.vdi</i>
$ rm <i>old.vdi</i>
</pre>
<h3>
<span id=".D0.97.D0.B0.D0.BC.D0.B5.D0.BD.D0.B0_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0_.D0.B8.D0.B7_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0_.vbox_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E"></span><span class="mw-headline" id="Замена_виртуального_диска_из_файла_.vbox_вручную">Замена виртуального диска из файла .vbox вручную</span>
</h3>
<p>Если вы думаете, что редактирование простого <i>XML</i> файла более удобно, чем возня с GUI или <code>VBoxManage</code> и вы хотите заменить (или добавить) виртуальный диск в вашей виртуальной машине, просто замените GUID, местоположение файла и формат для ваших нужд в конфигурационном файле <i>.vbox</i>, соответствующем вашей виртуальной машине:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vbox</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;HardDisk uuid="<i>{670157e5-8bd4-4f7b-8b96-9ee412a712b5}</i>" location="<i>ArchLinux_vm.vdi</i>" format="<i>VDI</i>" type="Normal"/&gt;</pre>
<p>в <code>&lt;AttachedDevice&gt;</code> (суб-тег <code>&lt;StorageController&gt;</code>) замените старый GUID на новый.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vbox</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;AttachedDevice type="HardDisk" port="0" device="0"&gt;
  &lt;Image uuid="<i>{670157e5-8bd4-4f7b-8b96-9ee412a712b5}</i>"/&gt;
&lt;/AttachedDevice&gt;</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если вы не знаете GUID диска который вы хотите добавить, вы можете использовать <code>VBoxManage showhdinfo <i>file</i></code>. Если раньше вы использовали <code>VBoxManage clonehd</code>, для копирования или конвертирования виртуальных дисков, он выводит GUID после завершения копирования / преобразования. Применение случайного GUID не работает, так как каждый <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch05.html#cloningvdis">UUID хранится внутри любого образа диска</a>.</div>
<h3>
<span id=".D0.9A.D0.BB.D0.BE.D0.BD.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0_.D0.B8_.D0.BD.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B5.D0.BC.D1.83_.D0.BD.D0.BE.D0.B2.D0.BE.D0.B3.D0.BE_UUID"></span><span class="mw-headline" id="Клонирование_виртуального_диска_и_назначение_ему_нового_UUID">Клонирование виртуального диска и назначение ему нового UUID</span>
</h3>
<p>UUID широко используются VirtualBox. Каждая виртуальная машина и каждый виртуальный диск виртуальной машины должны иметь разные UUID. Когда вы запускаете виртуальную машину в VirtualBox, он будет отслеживать все UUID. См <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-list"><code>VBoxManage list</code></a>, чтобы просмотреть список элементов, зарегистрированных в VirtualBox.
</p>
<p>Если вы клонировали виртуальный диск вручную путем копирования файла виртуального диска, необходимо будет назначить новый UUID клонированному виртуальному диску. Вы можете использовать этот диск в той же виртуальной машине или даже в другой (если он уже открыт и таким образом зарегистрирован в VirtualBox).
</p>
<p>Вы можете использовать эту команду, чтобы назначить новый UUID для вашего виртуального диска:
</p>
<pre>$ VBoxManage internalcommands sethduuid <i>/path/to/disk.vdi</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> В будущем, чтобы избежать копирования виртуального диска и назначения нового UUID вручную, используйте <code><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-clonevdi">VBoxManage clonehd</a></code>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Все указанные команды поддерживают <a href="#%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D1%8B,_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_VirtualBox">все форматы виртуальных дисков, поддерживаемые VirtualBox</a>.</div>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Советы_и_рекомендации">Советы и рекомендации</span>
</h2>
<h3>
<span id=".D0.98.D0.BC.D0.BF.D0.BE.D1.80.D1.82.2F.D1.8D.D0.BA.D1.81.D0.BF.D0.BE.D1.80.D1.82_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD_VirtualBox_.D0.B2.2F.D0.B8.D0.B7_.D0.B4.D1.80.D1.83.D0.B3.D0.B8.D1.85_.D0.B3.D0.B8.D0.BF.D0.B5.D1.80.D0.B2.D0.B8.D0.B7.D0.BE.D1.80.D0.BE.D0.B2"></span><span class="mw-headline" id="Импорт/экспорт_виртуальных_машин_VirtualBox_в/из_других_гипервизоров">Импорт/экспорт виртуальных машин VirtualBox в/из других гипервизоров</span>
</h3>
<p>Если вы планируете использовать виртуальную машину на другом гипервизоре или хотите импортировать в VirtualBox виртуальную машину, созданную в другом гипервизоре, вы можете быть заинтересованы в чтении следующих шагов.
</p>
<h4>
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B9_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.BE.D0.B9_.D0.9E.D0.A1"></span><span class="mw-headline" id="Удаление_дополнений_гостевой_ОС">Удаление дополнений гостевой ОС</span>
</h4>
<p>Гостевые дополнения доступны в большинстве гипервизоров: VirtualBox поставляется с гостевыми дополнениями, VMware с VMware Tools, Parallels с инструментами Parallels, и т.д. Это дополнительные компоненты, предназначенные для установки внутри виртуальной машины после гостевой операционной системы, состоящие из драйверов устройств и системных приложений, которые оптимизируют гостевую операционной системы для повышения производительности и удобства использования. <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html">Читать подробнее</a>.
</p>
<p>Если у вас установлены дополнения в вашей виртуальной машине - удалите их в первую очередь. Ваша гостевая ОС, особенно если это ОС из семейства Windows, может вести себя странно, аварийно или не загрузиться вообще, если вы используете специальные драйверы одного гипервизора на другом.
</p>
<h4>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D0.BB.D1.8C.D0.BD.D0.BE.D0.B3.D0.BE_.D1.84.D0.BE.D1.80.D0.BC.D0.B0.D1.82.D0.B0_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0"></span><span class="mw-headline" id="Использование_правильного_формата_виртуального_диска">Использование правильного формата виртуального диска</span>
</h4>
<p>От этого шага будет зависеть способность преобразовывать образ диска виртуальной в другие форматы - непосредственно или конвейерным методом.
</p>
<h5>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B"></span><span class="mw-headline" id="Автоматические_инструменты">Автоматические инструменты</span>
</h5>
<p>Некоторые компании предоставляют инструменты, которые предлагают возможность создания виртуальных машин с операционной системой Windows или GNU / Linux, расположенной в виртуальной машине или даже в оригинальной установке. С таким продуктом вам не нужно применять этот и следующие шаги, и можно далее не читать.
</p>
<ul>
<li>
<i><a rel="nofollow" class="external text" href="https://www.parallels.com/products/transporter">Parallels Transporter</a></i> - не бесплатный, продукт от Parallels Inc. Это решение в основном заключается в части программного обеспечения под названием <i>агент</i>, который будет установлен в гостевой ОС, которую вы хотите импортировать / преобразовать. Затем, Parallels Transporter, <i>который работает только на OS X</i> , создаст виртуальную машину с этим <i>агентом</i>, который контактирует либо по USB или по сети Ethernet.</li>
<li>
<i><a rel="nofollow" class="external text" href="Https://www.vmware.com/products/converter/">VMware vCenter Converter</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2024-07-30 ⓘ]</sup></i> - бесплатен при регистрации на Website VMware, работает почти так же, как Parallels Transporter, но часть программного обеспечения, которая собирает данные для создания виртуальной машины работает только на платформе Windows.</li>
</ul>
<h5>
<span id=".D0.A0.D1.83.D1.87.D0.BD.D0.BE.D0.B5_.D0.BF.D1.80.D0.B5.D0.BE.D0.B1.D1.80.D0.B0.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Ручное_преобразование">Ручное преобразование</span>
</h5>
<p>Во-первых, ознакомьтесь с <a href="#%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D1%8B,_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5_VirtualBox">форматами, поддерживаемыми Virtualbox</a> и <a href="https://en.wikipedia.org/wiki/Comparison_of_platform_virtual_machines#Image_type_compatibility" class="extiw" title="wikipedia:Comparison of platform virtual machines">форматами других гипервизоров</a>.
</p>
<ul><li>Импорт и экспорт виртуальной машины из/в формат VMware не является проблемой, если вы используете формат диска VMDK или OVF, в противном случае преобразования <a href="#VMDK_%D0%B2_VDI_%D0%B8_VDI_%D0%B2_VMDK">VMDK в VDI и VDI в VMDK</a> можно осуществить вышеописанным VMware vCenter Converter.</li></ul>
<ul><li>Импорт и экспорт из/в QEMU почти не проблема: некоторые форматы QEMU поддерживает непосредственно VirtualBox и преобразование между <a href="#QCOW2_%D0%B2_VDI_%D0%B8_VDI_%D0%B2_QCOW2">QCOW2 в VDI и VDI в QCOW2</a> по-прежнему доступны в случае необходимости.</li></ul>
<ul><li>Импорт и экспорт из/в Parallels гипервизора является трудный задачей: Parallels поддерживает только свой собственный формат жесткого диска (даже стандартные форматы и портативный формат OVF не поддерживается!).</li></ul>
<dl><dd><ul>
<li>Чтобы экспортировать виртуальную машину для Parallels, вам нужно будет использовать инструмент описанной выше Parallels - Transporter.</li>
<li>Чтобы импортировать виртуальную машину в VirtualBox, вы должны будете использовать VMware vCenter Converter , чтобы преобразовать виртуальную машину в формат VMware в первую очередь - а затем используйте инструмент для миграции с VMware.</li>
</ul></dd></dl>
<h4>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D0.B8_VM_.D0.B4.D0.BB.D1.8F_.D0.B3.D0.B8.D0.BF.D0.B5.D1.80.D0.B2.D0.B8.D0.B7.D0.BE.D1.80.D0.B0"></span><span class="mw-headline" id="Создание_конфигурации_VM_для_гипервизора">Создание конфигурации VM для гипервизора</span>
</h4>
<p>Каждый гипервизор имеет свой собственный файл конфигурации виртуальной машины: <code>.vbox</code> для VirtualBox, <code>.vmx</code> для VMware, <code>config.pvs</code> файл, расположенный в виртуальной машине (<code>.pvm</code> файл), и т.д. Вы можете, таким образом, создать новую виртуальную машину в новом гипервизоре и указать его конфигурацию как можно ближе относительно начальной виртуальной машины.
</p>
<p>Обратите пристальное внимание на интерфейс прошивки (BIOS или UEFI), используемый для установки гостевой операционной системы. В то время как опция доступна выбирать между этими 2 интерфейсов на VirtualBox и на Parallels решений, на VMware, вам придется вручную добавить следующую строку в ваш <i>.vmx</i> файл.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">ArchLinux_vm.vmx</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">firmware = "efi"</pre>
<p>Наконец, настройте ваш гипервизор, для использования существующего виртуального диска, который вы преобразовали и запустите виртуальную машину.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> 
<ul>
<li>В VirtualBox, если вы не хотите просмотривать весь графический интерфейс, чтобы найти нужное место где можно добавить новый виртуальный диск устройства, вы можете <a href="#%D0%97%D0%B0%D0%BC%D0%B5%D0%BD%D0%B0_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0_%D0%B8%D0%B7_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0_.vbox_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">Заменить виртуальный диск вручную из файла .vbox</a>, или использовать <code>VBoxManage storageattach</code>, описанный в <a href="#%D0%A3%D0%B2%D0%B5%D0%BB%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%D0%B0_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%B4%D0%B8%D1%81%D0%BA%D0%BE%D0%B2">увеличении вируального диска</a> или в <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-storageattach">руководстве VirtualBox</a>
</li>
<li>Кроме того, в продуктах VMware, вы можете заменить местоположение текущего местоположения виртуального диска путем адаптации <i>.vmdk</i> местоположения файла в <i>.vmx</i> конфигурационном файле.</li>
</ul>
</div>
<h3>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.BE.D0.BC_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B9_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D1.8B"></span><span class="mw-headline" id="Управление_запуском_виртуальной_машины">Управление запуском виртуальной машины</span>
</h3>
<h4>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D1.81.D0.BB.D1.83.D0.B6.D0.B1.D1.8B_.28.D0.B0.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.29"></span><span class="mw-headline" id="Запуск_виртуальных_машин_с_помощью_службы_(автозапуск)">Запуск виртуальных машин с помощью службы (автозапуск)</span>
</h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/vboxvmservice@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=VBox Virtual Machine %i Service
Requires=systemd-modules-load.service
After=systemd-modules-load.service

[Service]
User=<i>username</i>
Group=vboxusers
ExecStart=/usr/bin/VBoxManage startvm %i --type <i>startmode</i>
ExecStop=/usr/bin/VBoxManage controlvm %i <i>stopmode</i>
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Замените <code><i>username</i></code> на пользователя из группы <code>vboxusers</code>. Убедитесь, что это именно тот пользователь, который управляет виртуальной машиной, иначе ничего не получится.</li>
<li>Замените <code><i>startmode</i></code> на тип фронтенда виртуальной машины, обычно <code>gui</code>, <code>headless</code> или <code>separate</code>.</li>
<li>Замените <code><i>stopmode</i></code> на желаемый переключатель состояния, обычно <code>savestate</code> или <code>acpipowerbutton</code>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если у вас есть несколько машин, управляемых через systemd, и они завершаются некорректно, попробуйте добавить <code>KillMode=none</code> и <code>TimeoutStopSec=40</code> в конец секции <code>[Service]</code>.</div>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">Включите</a> юнит <code>vboxvmservice@<i>название_виртуальной_машины</i></code>, чтобы она запускалась автоматически при загрузке системы. Для запуска вручную просто <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> этот юнит.
</p>
<p>VirtualBox 4.2 <a rel="nofollow" class="external text" href="https://lifeofageekadmin.com/how-to-set-your-virtualbox-vm-to-automatically-startup/">предоставляет</a> для UNIX-like систем также другие способы автозапуска, без использования сервисов systemd.
</p>
<h4>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B9_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D1.8B_.D0.BF.D0.BE_.D0.B3.D0.BE.D1.80.D1.8F.D1.87.D0.B5.D0.B9_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88.D0.B5"></span><span class="mw-headline" id="Запуск_виртуальной_машины_по_горячей_клавише">Запуск виртуальной машины по горячей клавише</span>
</h4>
<p>Может быть полезно запускать виртуальные машины непосредственно с клавиатуры вместо использования интерфейса VirtualBox (GUI или CLI). Для этого, вы можете просто определить ключевые привязки в <code>.xbindkeysrc</code>. Обратитесь к <a href="../ru/Xbindkeys.html" title="Xbindkeys (Русский)">Xbindkeys</a> для более подробной информации.
</p>
<p>Например, запуск по <code>Fn+F3</code>:
</p>
<pre>"VBoxManage startvm 'Windows 7'"
m:0x0 + c:244
XF86Battery
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если у вас есть пробел в имени виртуальной машины, то заключите его в одинарные апострофы как сделано в вышеуказанном примере.</div>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BD.D0.BA.D1.80.D0.B5.D1.82.D0.BD.D1.8B.D1.85_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2_.D0.B2_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B9_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D0.B5"></span><span class="mw-headline" id="Использование_конкретных_устройств_в_виртуальной_машине">Использование конкретных устройств в виртуальной машине</span>
</h3>
<h4>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_USB_.D0.B2.D0.B5.D0.B1-.D0.BA.D0.B0.D0.BC.D0.B5.D1.80.D1.8B.2F.D0.BC.D0.B8.D0.BA.D1.80.D0.BE.D1.84.D0.BE.D0.BD.D0.B0"></span><span class="mw-headline" id="Использование_USB_веб-камеры/микрофона">Использование USB веб-камеры/микрофона</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Вам понадобятся установленные гостевые дополнения, прежде чем следовать приведенному ниже примеру. См. <a href="#%D0%94%D0%B8%D1%81%D0%BA_%D1%81_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D1%8B%D0%BC%D0%B8_%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%D0%BC%D0%B8">Дополнения гостевой ОС</a> для более подробной информации.</div>
<ol>
<li>Убедитесь, что виртуальная машина не запущена, а веб-камера / микрофон не используется.</li>
<li>Откройте главное окно VirtualBox и перейдите к настройкам машины Arch. Перейдите в раздел USB.</li>
<li>Убедитесь, что стоит галочка «Включить контроллер USB». Также убедитесь, что выбран пункт «Контроллер USB 2.0 (OHCI + EHCI)».</li>
<li>Нажмите кнопку добавления фильтра для устройства (кабель со значком «+»).</li>
<li>Выберите USB веб-камеру/микрофон из списка.</li>
<li>Нажмите кнопку OK и запустите виртуальную машину.</li>
</ol>
<h4>
<span id=".D0.9E.D0.B1.D0.BD.D0.B0.D1.80.D1.83.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2.D0.B5.D0.B1-.D0.BA.D0.B0.D0.BC.D0.B5.D1.80_.D0.B8_.D0.B4.D1.80.D1.83.D0.B3.D0.B8.D1.85_USB-.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2"></span><span class="mw-headline" id="Обнаружение_веб-камер_и_других_USB-устройств">Обнаружение веб-камер и других USB-устройств</span>
</h4>
<p>Убедитесь, что вы фильтруете любые устройства, (кроме клавиатур или мышей), чтобы они не запускались при загрузке -это гарантирует, что ОС Windows обнаружит устройство при запуске.
</p>
<h3>
<span id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.BA_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.BE.D0.BC.D1.83_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D1.83"></span><span class="mw-headline" id="Доступ_к_гостевому_серверу">Доступ к гостевому серверу</span>
</h3>
<p>Для доступа к <a href="https://en.wikipedia.org/wiki/ru:Apache_HTTP_Server" class="extiw" title="wikipedia:ru:Apache HTTP Server">HTTP-серверу Apache</a>, запущенному в виртуальной машине, <b>только</b> с хост-машины, выполните:
</p>
<pre>$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/HostPort" <i>8888</i>
$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/GuestPort" <i>80</i>
$ VBoxManage setextradata GuestName "VBoxInternal/Devices/<i>pcnet</i>/0/LUN#0/Config/Apache/Protocol" TCP
</pre>
<p>Где <code><i>8888</i></code> — порт, который будет слушать хост, а <code><i>80</i></code> — порт внутри виртуальной машины, который будет принимать входящие соединения.
</p>
<p>Чтобы использовать на хосте порт ниже 1024, нужно внести изменения в межсетевом экране. Он также может быть настроен на работу с SSH или другими службами путём изменения портов на нужные.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <code>pcnet</code> относится к сетевой карте виртуальной машины. Если вы используете виртуальную сетевую карту Intel, измените <code>pcnet</code> на <code>e1000</code>.</div>
<h3>
<span id="D3D_.D1.83.D1.81.D0.BA.D0.BE.D1.80.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.BE.D0.B9_Windows"></span><span class="mw-headline" id="D3D_ускорение_в_гостевой_Windows">D3D ускорение в гостевой Windows</span>
</h3>
<p>Последние версии Virtualbox имеют поддержку ускорения OpenGL внутри гостевой ОС. Эта функция может быть включена галочкой в настройках машины (при установленных дополнениях гостевой ОС VirtualBox). Тем не менее, большинство игр под Windows используют Direct3D (часть DirectX), а не OpenGL, и, таким образом, этот метод не поможет. Тем не менее возможно получить ускоренное Direct3D в гостевой Windows, за счет заимствования D3D библиотеки из Wine, который переводит инструкции d3d под OpenGL, который и занимается ускорением. Эти библиотеки теперь являются частью дополнений гостевой ОС.
</p>
<p>После включения OpenGL ускорения, как описано выше, перезагрузите гостевую ОС в безопасном режиме (нажмите F8 до появления экрана для Windows, но после исчезновения экрана Virtualbox), и установите дополнения гостевой ОС, во время установки установите галочку <i>Включить поддержку Direct3D</i>. Перезагрузитесь обратно в нормальный режим, и вы получите ускоренный Direct3D.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Этот хак может не работать для некоторых игр в зависимости от того, какие проверки оборудования они делают и какие части D3D они используют.</li>
<li>Хак был проверен на Windows XP, 7 и 8.1. Если метод не работает на вашей версии Windows, пожалуйста, добавьте эту информацию здесь.</li>
</ul>
</div>
<h3>
<span id="VirtualBox_c_USB-.D0.BA.D0.BB.D1.8E.D1.87.D0.BE.D0.BC"></span><span class="mw-headline" id="VirtualBox_c_USB-ключом">VirtualBox c USB-ключом</span>
</h3>
<p>При использовании VirtualBox с USB-ключом, например, для запуска установленной машины с ISO-образа, вы вручную должны создать VMDK-файлы существующих приводов. Тем не менее, как только новые файлы VMDK сохраняться и вы перейдёте на другую машину, у вас могут снова возникнуть проблемы. Чтобы избавиться от этой проблемы, можно использовать следующий скрипт для запуска VirtualBox. Этот сценарий будет убирать старые файлов VMDK и создавать новые:
</p>
<pre>#!/bin/sh
# Erase old VMDK entries
rm ~/.VirtualBox/*.vmdk

# Clean up VBox-Registry
sed -i '/sd/d' ~/.VirtualBox/VirtualBox.xml

# Remove old harddisks from existing machines
find ~/.VirtualBox/Machines -name \*.xml | while read -r file; do
  line=$(grep -e "type\=\"HardDisk\"" -n "$file" | cut -d ':' -f 1)
  if [ -n "$line" ]; then
    sed -i "${line}"d "$file"
    sed -i "${line}"d "$file"
    sed -i "${line}"d "$file"
  fi
  sed -i "/rg/d" "$file"
done

# Delete prev-files created by VirtualBox
find  ~/.VirtualBox/Machines -name \*-prev -exec rm '{}' \;

# Recreate VMDKs
ls -l /dev/disk/by-uuid | cut -d ' ' -f 9,11 | while read -r ln; do
  if [ -n "$ln" ]; then
    uuid=$(echo "$ln" | cut -d ' ' -f 1)
    device=$(echo "$ln" | cut -d ' ' -f 2 | cut -d '/' -f 3 | cut -b 1-3)

    # determine whether drive is mounted already
    checkstr1=$(mount | grep "$uuid")
    checkstr2=$(mount | grep "$device")
    checkstr3=$(ls ~/.VirtualBox/*.vmdk | grep "$device")
    if [ -z "$checkstr1" ] &amp;&amp; [ -z "$checkstr2" ] &amp;&amp; [ -z "$checkstr3" ]; then
      VBoxManage internalcommands createrawvmdk -filename ~/.VirtualBox/"$device".vmdk -rawdisk /dev/"$device" -register
    fi
  fi
done

# Start VirtualBox
VirtualBox
</pre>
<p>Обратите внимание, что ваш пользователь должен быть добавлен в группу <code>disk</code>, чтобы создать VMDK-файлы из существующих дисков.
</p>
<h3>
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_Arch_Linux_.D0.B2.D0.BD.D1.83.D1.82.D1.80.D0.B8_VirtualBox"></span><span class="mw-headline" id="Запуск_установленного_Arch_Linux_внутри_VirtualBox">Запуск установленного Arch Linux внутри VirtualBox</span>
</h3>
<p>Если у вас есть дуалбут системы между Arch Linux и другими операционных системами, он может быстро стать утомительным для переключения туда-сюда, если вам нужно работать в обоих. Кроме того, с помощью виртуальных машин, у вас есть только крошечный фрагмент власти компьютера, который может привести к проблемам при работе на проектах, требующих производительности.
</p>
<p>Это руководство позволит вам использовать в виртуальной машине, вашу родную установку Arch Linux, когда вы используете свою вторую операционную систему. Таким образом, вы сохраняете возможность запуска каждой операционной систему изначально, но есть возможность запустить установленный физически Arch Linux внутри виртуальной машины.
</p>
<h4>
<span id=".D0.A3.D0.B1.D0.B5.D0.B4.D0.B8.D1.82.D0.B5.D1.81.D1.8C.2C_.D1.87.D1.82.D0.BE_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_.D0.BD.D0.B0.D0.B8.D0.BC.D0.B5.D0.BD.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.BE.D0.B2_.D0.BD.D0.B5_.D0.B8.D0.B7.D0.BC.D0.B5.D0.BD.D1.8F.D0.B5.D1.82.D1.81.D1.8F"></span><span class="mw-headline" id="Убедитесь,_что_система_наименования_разделов_не_изменяется">Убедитесь, что система наименования разделов не изменяется</span>
</h4>
<p>В зависимости от настроек вашего жесткого диска, файлы устройств, представляющих свои жесткие диски могут выглядеть по-разному когда вы будете запускать установку Arch Linux - изначально или в виртуальной машине. Эта проблема возникает, например, при использовании <a href="../en/RAID.html#Implementation" title="RAID">FakeRAID</a>. Поддельные RAID устройстве, будут перемещены в <code>/dev/mapper/</code> при запуске дистрибутива GNU/Linux , в то время как будут устройства по-прежнему доступны по отдельности. Тем не менее, в вашей виртуальной машине может оказаться без отображения в <code>/dev/sdaX</code> например, потому что драйвера, управляющие поддельными RAID в вашей локальной операционной системе (например, Windows) абстрагируются под поддельные RAID устройства.
</p>
<p>Чтобы обойти эту проблему, мы должны будем использовать схему адресации, работающую в обеих системах. Это может быть достигнуто использованием <a href="../ru/Persistent_block_device_naming.html#by-uuid" title="Persistent block device naming (Русский)">UUID</a> в файле <code>/etc/fstab</code>. Убедитесь, что ваш <a href="../ru/Fstab.html" title="Fstab (Русский)">fstab</a> использует UUID - в противном случае исправьте это. Читайте статьи <a href="../ru/Fstab.html" title="Fstab (Русский)">fstab (Русский)</a> и <a href="../ru/Persistent_block_device_naming.html" class="mw-redirect" title="Постоянные имена для блочных устройств">Постоянные имена для блочных устройств</a>.
</p>
<p><code>/etc/fstab</code> не является единственным местом, где используются UUID. Менеджеры загрузчиков тоже их используют. Убедитесь, что они действительно используют UUID-ы.
</p>
<dl><dt><a href="../en/GRUB_Legacy.html" class="mw-redirect" title="GRUB Legacy (Русский)">GRUB Legacy</a></dt></dl>
<p>Если вы все еще используете <a href="../en/GRUB_Legacy.html" class="mw-redirect" title="GRUB Legacy (Русский)">GRUB Legacy</a>, может быть настало время его <a href="../en/GRUB_Legacy.html#Upgrading_to_GRUB2" title="GRUB Legacy">обновить</a>, так как этот пакет в настоящее время удален из официальных репозиториев Arch Linux. Если вы хотите сохранить его, отредактируйте <code>/boot/grub/menu.lst</code> и замените <code>root=/dev/sdXX</code> в загрузочной записи Arch Linux на Linux UUID <code>/dev/disk/by-uuid/</code>, соответствующий корневому разделу.
</p>
<pre>title  Arch Linux
root
kernel /vmlinuz-linux root=<i>/dev/disk/by-uuid/0a3407de-014b-458b-b5c1-848e92a327a3</i> ro vga=773
initrd /initramfs-linux-vbox.img
</pre>
<p>Предварительно создайте резервную копию файла на случай ошибок.
</p>
<dl><dt><a href="../ru/GRUB.html" title="GRUB (Русский)">GRUB</a></dt></dl>
<p>Если вы работаете с самой последней версией <a href="../ru/GRUB.html" title="GRUB (Русский)">GRUB</a>; у вас нет проблем. Это ещё одна причина для перехода на GRUB 2.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> 
<ul>
<li>Убедитесь, что ваш хост-раздел доступна только для чтения с вашей виртуальной машины Arch Linux. Это позволит избежать риска повреждения.</li>
<li>Вы никогда не должны позволять VirtualBox загружаться с момента загрузки вашей второй операционной системы, которая используется в качестве хоста для этой виртуальной машины! Возьмите, таким образом, за правило - особенно если ваша загрузка производится по умолчанию в другую операционную систему. Установите более большой тайм-аут или переместите систему ниже в порядке предпочтений.</li>
</ul>
</div>
<h4>
<span id=".D0.A3.D0.B1.D0.B5.D0.B4.D0.B8.D1.82.D0.B5.D1.81.D1.8C_.D0.B2_.D0.BA.D0.BE.D1.80.D1.80.D0.B5.D0.BA.D1.82.D0.BD.D0.BE.D1.81.D1.82.D0.B8_.D0.BE.D0.B1.D1.80.D0.B0.D0.B7.D0.B0_mkinitcpio"></span><span class="mw-headline" id="Убедитесь_в_корректности_образа_mkinitcpio">Убедитесь в корректности образа mkinitcpio</span>
</h4>
<p>Убедитесь, что в конфигурации вашего <a href="../ru/Mkinitcpio.html" title="Mkinitcpio (Русский)">mkinitcpio</a> есть <a href="../ru/Mkinitcpio.html#HOOKS" title="Mkinitcpio (Русский)">хук</a> <code>block</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
HOOKS="base udev autodetect modconf <i>block</i> filesystems keyboard fsck"
[...]</pre>
<p>Если это не так, добавьте хук и <a href="../ru/Mkinitcpio.html#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%B0" title="Mkinitcpio (Русский)">заново сгенерируйте initramfs</a>.
</p>
<h4>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D0.B8_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B9_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D1.8B_.D0.B4.D0.BB.D1.8F_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D1.81_.D1.84.D0.B8.D0.B7.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0"></span><span class="mw-headline" id="Создание_конфигурации_виртуальной_машины_для_загрузки_с_физического_диска">Создание конфигурации виртуальной машины для загрузки с физического диска</span>
</h4>
<h5>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.B9.D1.82.D0.B5_.D0.BF.D0.BE.D1.82.D0.BE.D0.BA.D0.BE.D0.B2.D1.8B.D0.B9.28raw.29_.D0.BE.D0.B1.D1.80.D0.B0.D0.B7_.vmdk"></span><span class="mw-headline" id="Создайте_потоковый(raw)_образ_.vmdk">Создайте потоковый(raw) образ .vmdk</span>
</h5>
<p>Теперь нам нужно создать новую виртуальную машину, которая будет использовать <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">RAW диск</a> в качестве виртуального диска, для этого мы будем использовать файл ~ 1Kib VMDK, которые будет сбрасываться на физический диск. VirtualBox не имеет этой опции в графическом интерфейсе, так что мы должны использовать консоль и внутреннюю команду из <code>VBoxManage</code>.
</p>
<p>Загрузите хост, который будет использовать виртуальную машину Arch Linux.Команда должны быть адаптированы в соответствии с вашей хост-машиной.
</p>
<dl>
<dt>На хосте GNU/Linux</dt>
<dd></dd>
</dl>
<p>Существует 3 способа этого достичь: вход от суперпользователя, изменение прав доступа к устройству командой <code>chmod</code>, добавление пользователя в группу <code>disk</code>. Последний путь является более элегантным. Реализуем таким образом:
</p>
<pre># gpasswd -a <i>your_user</i> disk
</pre>
<p>Применить новые параметры сейчас же:
</p>
<pre>$ newgrp
</pre>
<p>Теперь вы можете использовать следующую команду:
</p>
<pre>$ VBoxManage internalcommands createrawvmdk -filename <i>/path/to/file.vmdk</i> -rawdisk <i>/dev/sdb</i> -register
</pre>
<p>Адаптируйте команду для ваших потребностей.
</p>
<dl>
<dt>На хосте Windows</dt>
<dd></dd>
</dl>
<p>
Откройте окно командной строки (необходимо запускать от имени администратора). </p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> В Windows откройте меню Пуск / стартовый экран, введите <code>cmd</code>, и нажмите <code>Ctrl+Shift+Enter</code>, это ярлык для запуска выбранной программы с правами администратора.</div>
<p>В Windows наименование дисков отлично от UNIX. Используйте эту команду, чтобы определить значения в вашей системе Windows, и их расположение:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># wmic diskdrive get name,size,model</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Model                               Name                Size
WDC WD40EZRX-00SPEB0 ATA Device     \\.\PHYSICALDRIVE1  4000783933440
KINGSTON SVP100S296G ATA Device     \\.\PHYSICALDRIVE0  96024821760
Hitachi HDT721010SLA360 ATA Device  \\.\PHYSICALDRIVE2  1000202273280
Innostor Ext. HDD USB Device        \\.\PHYSICALDRIVE3  1000202273280</pre>
<p>В этом примере Windows называет диски <code>\\.\PhysicalDriveX</code>, Где X представляет собой число от 0, <code>\\.\PHYSICALDRIVE1</code> может быть сопоставим с <code>/dev/sdb</code> из терминологии Linux.
</p>
<p>Для использования в командной строке <code>VBoxManage</code> в Windows, вы должны изменить текущую папку в папку установки VirtualBox, обычно это <code>cd C:\Program Files\Oracle\VirtualBox\</code>
</p>
<pre># .\VBoxManage.exe internalcommands createrawvmdk -filename C:\file.vmdk -rawdisk \\.\PHYSICALDRIVE1
</pre>
<p>или использовать абсолютный путь:
</p>
<pre># "C:\Program Files\Oracle\VirtualBox\VBoxManage.exe" internalcommands createrawvmdk -filename C:\file.vmdk -rawdisk \\.\PHYSICALDRIVE1
</pre>
<dl>
<dt>На другой хостовой ОС</dt>
<dd></dd>
</dl>
<p>Есть и другие ограничения, касающиеся вышеприведенной команды, когда она используется в других операционных системах - таких как OS X. Прочитайте <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">внимательно руководство</a>, если это вас беспокоит.
</p>
<h5>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0_.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D0.B8_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B9_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D1.8B"></span><span class="mw-headline" id="Создание_файла_конфигурации_виртуальной_машины">Создание файла конфигурации виртуальной машины</span>
</h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul><li>Для использования команды VBoxManage в Windows, вам нужно сначало изменить текущую директорию в папку установки VirtualBox:</li></ul>
<pre>cd C:\Program Files\Oracle\VirtualBox\
</pre>
<ul><li>Windows делает использование обратного слеша вместо слеша, пожалуйста, замените все вхождения / на \ в командах, которые вы будете использовать.</li></ul>
</div>
<p>После этого мы должны создать новую машину (замените <i>VM_name</i> ная ваш вариант) и зарегистрировать её в VirtualBox.
</p>
<pre>$ VBoxManage createvm -name <i>VM_name</i> -register
</pre>
<p>Затем виртуальный диск должен быть подключен к машине. Это будет зависеть от того, находится ли корень в вашей оригинальной установке Arch Linux на IDE или контроллере SATA.
</p>
<p>Если вам нужен контроллер IDE:
</p>
<pre>$ VBoxManage storagectl <i>VM_name</i> --name "IDE Controller" --add ide
$ VBoxManage storageattach machineA --storagectl "IDE Controller" --port 0 --device 0 --type hdd --medium /path/to/file.vmdk
</pre>
<p>В противном случае:
</p>
<pre>$ VBoxManage storagectl <i>VM_name</i> --name "SATA Controller" --add sata
$ VBoxManage storageattach machineA --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium /path/to/file.vmdk
</pre>
<p>В то время как вы продолжаете использовать интерфейс командной строки, рекомендуется использовать VirtualBox GUI, чтобы персонализировать настройки виртуальной машины. Необходимо указать аппаратную конфигурацию как можно ближе к родной машине: включение ускорения 3D, увеличение видеопамяти, установка сетевого интерфейса и т.д.
</p>
<h4>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.B4.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B9_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.BE.D0.B9_.D0.9E.D0.A1"></span><span class="mw-headline" id="Установка_дополнений_гостевой_ОС">Установка дополнений гостевой ОС</span>
</h4>
<p>Наконец, вы можете легко интегрировать Arch Linux с хост-системой и синхронизировать буфер обмена между двумя ОС. Обратитесь к <a href="#%D0%94%D0%B8%D1%81%D0%BA_%D1%81_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D1%8B%D0%BC%D0%B8_%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%D0%BC%D0%B8">установке гостевых дополнений</a> для этого.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Для <a href="../ru/Xorg.html" title="Xorg (Русский)">Xorg (Русский)</a>, чтобы работать в родной и в виртуальной машине, так как очевидно, он должен использовать другой драйвер, то лучше, если не будет <code>/etc/X11/xorg.conf</code> - так как Xorg будет собирать все, что необходимо на лету. Однако, если вам действительно нужно свою собственную конфигурацию Xorg, может быть, стоит установить используемые по умолчанию цели Systemd к <code>multi-user.target</code> с <code># systemctl isolate graphical.target</code> (более <a href="../ru/Systemd.html#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B5%D0%B9_%D1%86%D0%B5%D0%BB%D0%B8" title="Systemd (Русский)">подробно</a>). Таким образом, графический интерфейс будет отключен (т.е. Xorg не запустится) и после входа в систему вы сможете выполнить <code>startx</code> вручную с пользовательским <code>xorg.conf</code>.</div>
<h3>
<span id=".D0.A4.D0.B8.D0.B7.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B0.D1.8F_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_Arch_Linux_.D0.B8.D0.B7_VirtualBox"></span><span class="mw-headline" id="Физическая_установка_системы_Arch_Linux_из_VirtualBox">Физическая установка системы Arch Linux из VirtualBox</span>
</h3>
<p>В некоторых случаях это может быть полезно для установки родной системы Arch Linux из другой операционной системы: один из способов достижения этой цели является выполнение установки через VirtualBox на <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch09.html#rawdisk">жёсткий диск</a>. Если существующая операционная система на основе Linux, вы можете рассмотреть <a href="../ru/Install_Arch_Linux_from_existing_Linux.html" class="mw-redirect" title="Install from existing Linux (Русский)">установку из существующего Linux</a> вместо этого.
</p>
<p>Этот сценарий очень похож на <a href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_Arch_Linux_%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B8_VirtualBox">Запуск установленного Arch Linux в VirtualBox</a>, но будет реализовывать эти шаги в другом порядке: начать с создания <a href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%B9%D1%82%D0%B5_%D0%BF%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%B2%D1%8B%D0%B9(raw)_%D0%BE%D0%B1%D1%80%D0%B0%D0%B7_.vmdk">.vmdk образа жёсткого диска</a>, а затем <a href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0_%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B">создавать файл конфигурации виртуальной машины</a>.
</p>
<p>Теперь вы должны иметь рабочую конфигурацию виртуальной машины, чей виртуальный VMDK-диск связан с реальным диском. Процесс установки точно такой же, как и описанный в <a href="#%D0%9F%D0%BE%D1%88%D0%B0%D0%B3%D0%BE%D0%B2%D0%B0%D1%8F_%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_Arch_Linux_%D0%BA%D0%B0%D0%BA_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%9E%D0%A1">пошаговой установке Arch Linux в VirtualBox</a>, но сначала <a href="#%D0%A3%D0%B1%D0%B5%D0%B4%D0%B8%D1%82%D0%B5%D1%81%D1%8C,_%D1%87%D1%82%D0%BE_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D0%BD%D0%B0%D0%B8%D0%BC%D0%B5%D0%BD%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2_%D0%BD%D0%B5_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D1%82%D1%81%D1%8F">убедитесь в постоянной схеме наименования разделов</a> и <a href="#%D0%A3%D0%B1%D0%B5%D0%B4%D0%B8%D1%82%D0%B5%D1%81%D1%8C_%D0%B2_%D0%BA%D0%BE%D1%80%D1%80%D0%B5%D0%BA%D1%82%D0%BD%D0%BE%D1%81%D1%82%D0%B8_%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%B0_mkinitcpio">корректности образа mkinitcpio</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> 
<ul>
<li>Для BIOS и MBR дисков: не устанавливайте загрузчик внутри виртуальной машины - он не будет работать, так как MBR не связан с MBR вашей реальной машины, и виртуальный диск отображается только в реальном разделе без MBR</li>
<li>Для UEFI систем без <a href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface#Compatibility_Support_Module" class="extiw" title="wikipedia:Unified Extensible Firmware Interface">CSM</a> и GPT дискa установка не будет работать вообще, так как:</li>
</ul>
<dl><dd><ul>
<li>
<a href="https://en.wikipedia.org/wiki/EFI_system_partition" class="extiw" title="wikipedia:EFI system partition">ESP</a> не отображается на виртуальный диск и Arch Linux требует, чтобы ядро Linux было на нём, чтобы загрузиться в качестве приложения EFI (смотрите статью <a href="../en/EFI_boot_stub.html" class="mw-redirect" title="EFISTUB (Русский)">EFISTUB (Русский)</a>)</li>
<li>и efivars, если вы устанавливаете Arch Linux через VirtualBox, используя режим EFI, не загрузит ни одну из ваших реальных систем: записи Bootmanager не смогут быть зарегистрированы</li>
</ul></dd></dl>
<ul><li>Вот почему рекомендуется создавать разделы в родной установке. В противном случае разделы не будут приниматься во внимание в MBR / GPT таблице разделов</li></ul>
</div>
<p>После завершения установки загрузите компьютер сперва с установочного носителя GNU/Linux (будь то Arch Linux или нет), выполните <a href="../ru/Installation_guide.html#Chroot" title="Installation guide (Русский)">chroot</a> в установленной Arch Linux и установите и настройте <a href="../ru/Installation_guide.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" title="Installation guide (Русский)">загрузчик</a>.
</p>
<h3>
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D1.89.D0.B5.D0.BD.D0.B8.D0.B5_.D1.84.D0.B8.D0.B7.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8_.D1.83.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_Windows_.D0.B2_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.83.D1.8E_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D1.83"></span><span class="mw-headline" id="Перемещение_физически_установленного_Windows_в_виртуальную_машину">Перемещение физически установленного Windows в виртуальную машину</span>
</h3>
<p>Если вы хотите перенести существующую Windows на виртуальную машину, которая будет использоваться с VirtualBox на GNU/Linux, этот вариант использования для вас. В этом разделе описан перенос только Windows с использованием схемы MSDOS/Intel разделов. Ваш Windows должен находиться на первом после MBR разделе. Работа в других разделах доступна, но были не тестировалась (см <a href="#%D0%98%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D1%8F">Известные ограничения</a> для более подробной информации)
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Если вы используете OEM версию Windows, этот процесс является неправомочным по конечной пользовательской лицензии. Действительно, лицензия OEM, как правило, указывает, что Windows Install связана с аппаратными средствами. Сделайте так, что бы у вас был полный Windows Install или полная лицензия, прежде чем продолжить. Если у вас есть полная лицензию для Windows, но последний не приходит в объеме, ни в качестве специальной лицензии на нескольких компьютерах, это означает, что вы должны будете удалить родную установку после операции клонирования в VM.</div>
<p>Несколько задач необходимо выполнить внутри вашей Windows, а затем в хост-машине GNU/Linux.
</p>
<h4>
<span id=".D0.97.D0.B0.D0.B4.D0.B0.D1.87.D0.B8_.D0.B2_Windows"></span><span class="mw-headline" id="Задачи_в_Windows">Задачи в Windows</span>
</h4>
<p>Первые три следующих моменты происходит от <a rel="nofollow" class="external text" href="https://www.virtualbox.org/wiki/Migrate_Windows#HAL">этой устаревшей вики-страницы VirtualBox</a>, но обновляются здесь.
</p>
<ul><li>Удалите проверку IDE/ATA контроллеров (только Windows XP): Windows запоминает IDE/ATA после установки, и не будет загружаться, если он обнаружит что они изменились.Решение, предложенное Microsoft является повторным использованием того же контроллера или использовать один из той-же серии, что невозможно сделать, поскольку мы используем виртуальную машину. <a rel="nofollow" class="external text" href="https://www.virtualbox.org/wiki/Migrate_Windows#HardDiskSupport">MergeIDE</a>, немецкий инструмент, разработан как другое решением, предложенное Microsoft. Решение в основном состоит в принятии всех IDE/ATA драйверов контроллера IDE, поддерживаемые Windows XP от первоначального архива драйвера, их установке и регистрации в реестре через Regedit.</li></ul>
<ul><li>Используйте правильный тип слоя абстрагирования оборудования (старые 32-битный Windows): Microsoft использует с 3 версии по умолчанию: <code>Hal.dll</code> (Standard PC), <code>Halacpi.dll</code> (ACPI HAL) и <code>halaacpi.dll</code> (ACPI HAL с IO APIC). Ваша Windows-установка могла устанавитmся с первого или второго варианта. В этом случае, пожалуйста, <a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch08.html#idp56927888">отключите <i>Enable IO/APIC </i> в расширенных возможностях VirtualBox</a>.</li></ul>
<ul><li>Отключите драйвер AGP устройства (только устаревшие версии ОС Windows): Если у вас есть файлы <code>agp440.sys</code> или <code>intelppm.sys</code> внутри <code> C:\Windows\System32\drivers\</code>, то удалите его. Так как VirtualBox использует PCI виртуальную графическую карту, это может вызвать проблемы, когда используется драйвер AGP.</li></ul>
<ul><li>Создайте диск восстановления ОС Windows: В следующих шагах, если что-то испортится, вам нужно будет восстановить установку Windows. Убедитесь, что у вас есть установочного носителя под рукой, или создайте через <i>Создать диск восстановления</i> в Vista SP1, <i>Создать диск восстановления системы</i> в Windows 7 или <i>Создать диск восстановления</i> в Windows 8.x).</li></ul>
<h4>
<span id=".D0.97.D0.B0.D0.B4.D0.B0.D1.87.D0.B8_.D0.B2_GNU.2FLinux"></span><span class="mw-headline" id="Задачи_в_GNU/Linux">Задачи в GNU/Linux</span>
</h4>
<ul><li>Уменьшите родной размер раздела Windows, для чего нужен <code>ntfsresize</code> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ntfs-3g">ntfs-3g</a></span>. Вы определяете размер, который будет равен размере VDI, который будет создан на следующем шаге. Если этот размер будет слишком мал, вы можете сломать ваш Windows и он может не загружаться вообще.</li></ul>
<dl>
<dd>Используйте параметр <code>--no-action</code> для тестового запуска:</dd>
<dd><pre># ntfsresize --no-action --size <i>52Gi</i> <i>/dev/sda1</i></pre></dd>
</dl>
<dl><dd>Если тестовый запуск прошёл успешно, только тогда запустите эту команду снова, но уже без параметра <code>--no-action</code>.</dd></dl>
<ul><li>Установите VirtualBox на ваш GNU/Linux хост (смотрите раздел <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">#Установка</a>).</li></ul>
<ul><li>Создайте образ диска для Windows от начала диска до конца первого раздела, на котором находится Windows. Копирование с начала диска необходимо потому, что пространство MBR в начале диска должно быть перенесено на виртуальный диск вместе с самим Windows. В этом примере следующие два раздела <code>sda2</code> и <code>sda3</code> будут позже удалены из таблицы разделов и загрузчик MBR будет обновляться.</li></ul>
<dl>
<dd><pre># sectnum=$(( $(cat /sys/block/<i>sda/sda1</i>/start) + $(cat /sys/block/<i>sda/sda1</i>/size) ))</pre></dd>
<dd>Команда <code>cat /sys/block/<i>sda/sda1</i>/size</code> выведет количество секторов первого раздела диска <code>sda</code>. Адаптируйте команду под ваши нужды.</dd>
</dl>
<dl>
<dd><pre># dd if=<i>/dev/sda</i> bs=512 count=$sectnum | VBoxManage convertfromraw stdin <i>windows.vdi</i> $(( $sectnum * 512 ))</pre></dd>
<dd>Мы должны показать размер в байтах, <code>$(( $sectnum * 512 ))</code> преобразует номера секторов в байты.</dd>
</dl>
<ul><li>Так как вы создали свой образ диска с правами администратора, установите правильного владельца файлу образа диска: <pre># chown <i>ваш_пользователь</i>:<i>ваша_группа</i> windows.vdi</pre>
</li></ul>
<ul><li>Создайте файл настроек виртуальной машины — используйте виртуальный диск, созданный ранее в качестве основного виртуального диска.</li></ul>
<ul><li>Попробуйте загрузиться с виртуальной машины Windows (может заработать). Во-первых, хотя бы отключите восстановление дисков из процесса загрузки, так как это может помешать (и, вероятно, будет мешать) загрузиться в безопасном режиме.</li></ul>
<ul><li>Попытайтесь загрузить виртуальную машину в безопасном режиме (нажмите клавишу F8 до логотипа Windows)... при возникновении проблем с загрузкой смотрите раздел <a href="#%D0%98%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_MBR_%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA%D0%B0_Microsoft">#Исправление MBR и загрузчика Microsoft</a>. В безопасном режиме, вероятно, будут установлены драйверы. Кроме того, установите Дополнения гостевой ОС через меню <i>Устройства</i> &gt; <i>Подключить образ диска Дополнений гостевой ОС...</i>. Если окно действий над подключенным диском не появилось, откройте диск и запустите установку вручную.</li></ul>
<ul><li>Наконец-то у вас есть необходимый Windows в виртуальной машине. Ознакомьтесь с <a href="#%D0%98%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D0%B5_%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D1%8F">известными ограничениями</a>.</li></ul>
<h4>
<span id=".D0.98.D1.81.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_MBR_.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D1.87.D0.B8.D0.BA.D0.B0_Microsoft"></span><span class="mw-headline" id="Исправление_MBR_и_загрузчика_Microsoft">Исправление MBR и загрузчика Microsoft</span>
</h4>
<p>Если ваша виртуальная машина с Windows отказывается загружаться, вам, возможно, потребуется применить следующие изменения в вашей виртуальной машине.
</p>
<ul><li>Начальная загрузка GNU/Live внутри виртуальной машины, прежде чем загрузится ОС Windows .</li></ul>
<ul><li>Удалить другие записи разделы с MBR виртуального диска. В самом деле, так как мы скопировали MBR и только раздел Windows, записи, относящихся к другим разделам по-прежнему присутствуют в MBR, но разделы ведь больше не доступны. Используйте <code>fdisk</code>, чтобы добиться этого, например.</li></ul>
<dl><dd><pre>fdisk ''/dev/sda''
Command (m for help): a
Partition number (''1-3'', default ''3''): ''1''</pre></dd></dl>
<ul><li>Запишите обновленную таблицу разделов на диск (это будет пересозданием MBR) с помощью <code>m</code> команды в окружении <code>fdisk</code>.</li></ul>
<ul><li>Используйте <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=testdisk">testdisk</a></span> (см. <a rel="nofollow" class="external text" href="https://www.cgsecurity.org/index.html?testdisk.html">здесь</a> для более подробной информации), чтобы добавить общий MBR:</li></ul>
<dl><dd><pre># testdisk &gt; <i>Disk /dev/sda...'</i> &gt; [Proceed] &gt; [Intel] Intel/PC partition &gt; [MBR Code] Write TestDisk MBR to first sector &gt; Write a new copy of MBR code to first sector? (Y/n) &gt; Y &gt; Write a new copy of MBR code, confirm? (Y/N) &gt; A new copy of MBR code has been written. You have to reboot for the change to take effect. &gt; [OK]</pre></dd></dl>
<ul><li>С новым MBR и обновленной таблицей разделов, ваша виртуальная машина с Windows должна загрузиться. Если вы все еще сталкиваетесь с вопросами, загрузите диск восстановления Windows с предыдущей стадии, и внутри вашей среды Windows RE, выполняйте команды <a rel="nofollow" class="external text" href="https://support.microsoft.com/kb/927392">описанные здесь</a>.</li></ul>
<h4>
<span id=".D0.98.D0.B7.D0.B2.D0.B5.D1.81.D1.82.D0.BD.D1.8B.D0.B5_.D0.BE.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Известные_ограничения">Известные ограничения</span>
</h4>
<ul>
<li>Ваша виртуальная машина может иногда зависать и забивать оперативную память, это может быть вызвано конфликтующими драйверами , установленными внутри виртуальной машины Windows. Удачи вам найти их!</li>
<li>Дополнительное ПО ожидало драйвер,который не может установиться из-за невозможности отключения / деинсталляции старого драйвера.</li>
<li>Ваша Windows должна находиться в первом разделе для описанного выше процесса, чтобы заработать. Если это требование не выполнено, система может работать, но это не было испытаны. Это потребует либо копирования MBR и редактирования в шестнадцатеричном коде, см. <a rel="nofollow" class="external text" href="https://superuser.com/questions/237782/virtualbox-booting-cloned-disk/253417#253417">VirtualBox: загрузка клонированного диска</a> или потребуется исправить таблицу разделов <a rel="nofollow" class="external text" href="https://gparted.org/h2-fix-msdos-pt.php">вручную</a> или восстанавливать Windows с диска восстановления, созданного в предыдущем шаге. Рассмотрим нашу установку окна на втором раздела; мы скопируем MBR, второму разделу, где лужит образ диска <code>VBoxManage convertfromraw</code> необходимо общее количество байтов, которые будут записаны: Вычислим как сумму размера MBR (начало первого раздела) плюс размер второго (Windows) раздела.<code>{ dd if=/dev/sda bs=512 count=$(cat /sys/block/sda/sda1/start) ; dd if=/dev/sda2 bs=512 count=$(cat /sys/block/sda/sda2/size) ; } | VBoxManage convertfromraw stdin windows.vdi $(( ($(cat /sys/block/sda/sda1/start) + $(cat /sys/block/sda/sda2/size)) * 512 ))</code>.</li>
</ul>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3><span class="mw-headline" id="VERR_ACCESS_DENIED">VERR_ACCESS_DENIED</span></h3>
<p>Чтобы получить доступ к образу VMDK, расположенного на хосте под Windows, запустите VirtualBox GUI от имени администратора.
</p>
<h3>
<span id=".D0.9A.D0.BB.D0.B0.D0.B2.D0.B8.D0.B0.D1.82.D1.83.D1.80.D0.B0_.D0.B8_.D0.BC.D1.8B.D1.88.D1.8C_.D0.B7.D0.B0.D0.B1.D0.BB.D0.BE.D0.BA.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D1.8B_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D0.B9_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D0.BE.D0.B9"></span><span class="mw-headline" id="Клавиатура_и_мышь_заблокированы_виртуальной_машиной">Клавиатура и мышь заблокированы виртуальной машиной</span>
</h3>
<p>Это означает, что ваша виртуальная машина захватила ввод клавиатуры и мыши. Просто нажмите правый <code>Ctrl</code>, и ваши устройства ввода станут доступны в основной системе.
</p>
<p>Для того, чтобы управление мышь возвращалось основной ОС при выходе курсора за границы окна виртуальной машины без нажатия каких-либо клавиш и для возможности бесшовной интеграции установите гостевое дополнение на виртуальную машину. Читайте шаг <a href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B3%D0%BE%D1%81%D1%82%D0%B5%D0%B2%D1%8B%D1%85_%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9">#Установка гостевых дополнений</a>, если вы новичок в Arch Linux, или читайте официальную справку VirtualBox.
</p>
<h3>
<span id=".D0.9D.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D1.8E.D1.82_64-.D0.B1.D0.B8.D1.82.D0.BD.D1.8B.D0.B5_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D1.8B.D0.B5_.D0.9E.D0.A1"></span><span class="mw-headline" id="Не_работают_64-битные_гостевые_ОС">Не работают 64-битные гостевые ОС</span>
</h3>
<p>При запуске клиента VM, если никакие 64-битные варианты не доступны, убедитесь что ваши возможности виртуализации процессора (обычно с именем <code>VT-X</code>) включены в BIOS.
</p>
<h3>
<span id=".D0.9D.D0.B5_.D0.BC.D0.BE.D0.B3.D1.83_.D0.BE.D1.82.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D1.82.D1.8C_.D0.BA.D0.BE.D0.BC.D0.B1.D0.B8.D0.BD.D0.B0.D1.86.D0.B8.D1.8E_CTRL.2BALT.2BFn_.D0.B2_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.83.D1.8E_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D1.83"></span><span class="mw-headline" id="Не_могу_отправить_комбинацию_CTRL+ALT+Fn_в_виртуальную_машину">Не могу отправить комбинацию CTRL+ALT+Fn в виртуальную машину</span>
</h3>
<p>Если в вашей виртуальной машине установлен дистрибутив GNU/Linux и вы хотите открыть новую оболочку TTY нажатием <code>Ctrl+Alt+F2</code> или выйти из X сессии с помощью <code>Ctrl+Alt+Backspace</code>, просто нажав это сочетание клавиш без какой-либо адаптации, гостевая машина его не получит и основная ОС (если это тоже дистрибутив GNU/Linux) распознает это сочетание клавиш. Для отправки <code>Ctrl+Alt+F2</code> на виртуальную машину нужно просто нажать ваш <i>Host Key</i> (обычно это правый <code>Ctrl</code>) и одновременно нажать <code>F2</code>.
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC_.D0.B2_ISO-.D0.BE.D0.B1.D1.80.D0.B0.D0.B7.D0.B0.D1.85"></span><span class="mw-headline" id="Исправление_проблем_в_ISO-образах">Исправление проблем в ISO-образах</span>
</h3>
<p>В то время как VirtualBox монтирует оригинальный образы ISO без проблем, есть такие форматы образов, которые не могут надежно быть преобразованы в ISO. Например, ccd2iso игнорирует .ccd и .sub файлы, что может привести к созданию образа диска с разбитыми файлами.
</p>
<p>В этом случае вам придется использовать <a href="../en/CDemu.html" title="CDemu">CDemu</a> для Linux внутри VirtualBox или любую другую утилиту, предназначенную для монтирования образов дисков.
</p>
<h3>
<span id="VirtualBox_GUI_.D0.BD.D0.B5_.D0.B2.D0.B8.D0.B4.D0.B8.D1.82_.D0.BC.D0.BE.D1.8E_.D1.82.D0.B5.D0.BC.D1.83_GTK_2x.2F3x"></span><span class="mw-headline" id="VirtualBox_GUI_не_видит_мою_тему_GTK_2x/3x">VirtualBox GUI не видит мою тему GTK 2x/3x</span>
</h3>
<p>Смотрите <a href="../ru/Uniform_look_for_Qt_and_GTK_applications.html" title="Uniform look for Qt and GTK applications (Русский)">Единый интерфейс GTK/QT приложений</a> для получения информации о настройке GUI Qt в GTK-окружениях.
</p>
<h3>
<span id="OpenBSD_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82_.D0.BF.D1.80.D0.B8_.D0.BD.D0.B5.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.BD.D1.8B.D1.85_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BA.D1.86.D0.B8.D1.8F.D1.85_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="OpenBSD_не_работает_при_недоступных_инструкциях_виртуализации">OpenBSD не работает при недоступных инструкциях виртуализации</span>
</h3>
<p>В то время как OpenBSD отлично работает на других гипервизорах без включенной виртуализации (VT-х AMD-V), виртуальная машина с OpenBSD работает в VirtualBox без этих инструкций некорректно, выдавая кучу ошибок сегментации. Запуская VirtualBox с аргументом <i>-norawr0</i> <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/3947">можно избавиться от этой проблемы</a>. Вы можете сделать это следующим образом:
</p>
<pre>$ VBoxSDL -norawr0 -vm <i>имя_OpenBSD_VM</i>
</pre>
<h3>
<span id="VBOX_E_INVALID_OBJECT_STATE_.280x80BB0007.29"></span><span class="mw-headline" id="VBOX_E_INVALID_OBJECT_STATE_(0x80BB0007)">VBOX_E_INVALID_OBJECT_STATE (0x80BB0007)</span>
</h3>
<p>Это может произойти при некорректном завершении виртуальной машины. Разблокировка машины тривиальна:
</p>
<pre>$ VBoxManage controlvm <i>virtual_machine_name</i> poweroff
</pre>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0_USB_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82"></span><span class="mw-headline" id="Подсистема_USB_не_работает">Подсистема USB не работает</span>
</h3>
<p>Ваш пользователь должен быть в группе <code>vboxusers</code>, и вы должны установить <a href="#%D0%A0%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D1%8F">пакет дополнений</a>, если хотите иметь поддержку USB 2. Тогда вы сможете включить USB 2 в настройках виртуальной машины и добавить один или несколько фильтров для устройств, которые будут иметь доступ из гостевой ОС.
</p>
<p>Иногда, на старых Linux-хостах, подсистема USB не распознается автоматически и выдает ошибку <code>Could not load the Host USB Proxy service: VERR_NOT_FOUND</code> или при невидимом USB-диске в хост-машине, <a rel="nofollow" class="external text" href="HTTPS://bbs.archlinux.org/viewtopic.php?id=121377,">даже когда пользователь находится в группе <b>vboxusers</b></a>. Эта проблема происходит из-за того, что VirtualBox переключается с <i>usbfs</i> на <i>sysfs</i> с версии 3.0.8. Если хост-машина не распознаёт этого изменения, вы можете вернуться к старому поведению, определив следующую переменную окружения в любом файле, которые конфигурирует вашу оболочку (например, в <code>~/.bashrc</code>, если вы используете <i>bash</i>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.bashrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">VBOX_USB=usbfs</pre>
<p>Затем убедитесь, что, окружающая среда приняла это изменение (перелогиньтесь, запустите новый экземпляр оболочки или перезагрузитесь).
</p>
<p>Также убедитесь, что ваш пользователь состоит в группе <code>storage</code>.
</p>
<h3>
<span id=".D0.9E.D1.88.D0.B8.D0.B1.D0.BA.D0.B0_.D1.81.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D1.8F_.D1.81.D0.B5.D1.82.D0.B5.D0.B2.D0.BE.D0.B3.D0.BE_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D0.B0_.22host-only.22"></span><span class="mw-headline" id='Ошибка_создания_сетевого_интерфейса_"host-only"'>Ошибка создания сетевого интерфейса "host-only"</span>
</h3>
<p>Убедитесь в том, что все модули ядра VirtualBox загружены (см. <a href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9_%D1%8F%D0%B4%D1%80%D0%B0_VirtualBox">Загрузка модулей ядра VirtualBox</a>).
</p>
<h3>
<span id="WinXP:_.D0.B3.D0.BB.D1.83.D0.B1.D0.B8.D0.BD.D0.B0_.D1.86.D0.B2.D0.B5.D1.82.D0.B0_.D0.BD.D0.B5_.D0.BC.D0.BE.D0.B6.D0.B5.D1.82_.D0.BF.D1.80.D0.B5.D0.B2.D1.8B.D1.88.D0.B0.D1.82.D1.8C_16_.D1.86.D0.B2.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="WinXP:_глубина_цвета_не_может_превышать_16_цветов">WinXP: глубина цвета не может превышать 16 цветов</span>
</h3>
<p>Если Вы работаете в 16-битной глубине цвета, то значки будут отображаться некорректно. Тем не менее, при попытке изменить глубину цвета на более высокий уровень, система может ограничить вас с более низким разрешением или просто не позволит вам изменить глубину вообще. Чтобы это исправить, запустите <code>regedit</code> в Windows и добавьте следующий ключ реестра для виртуальной машины Windows XP:
</p>
<pre>[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services]
"ColorDepth"=dword:00000004
</pre>
<p>Затем обновите глубину цвета в "Свойствах рабочего стола". Если ничего не происходит, заставьте экран перерисоваться (например, нажмите<code>Host+f</code>).
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5.D0.B4.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BF.D0.BE.D1.80.D1.82.D0.BE.D0.B2_.D0.B2_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.BE.D0.B9_.D0.9E.D0.A1"></span><span class="mw-headline" id="Использование_последовательных_портов_в_гостевой_ОС">Использование последовательных портов в гостевой ОС</span>
</h3>
<p>Проверьте наличие прав для доступа к последовательным портам:
</p>
<pre>$ /bin/ls -l /dev/ttyS*
crw-rw---- 1 root uucp 4, 64 Feb  3 09:12 /dev/ttyS0
crw-rw---- 1 root uucp 4, 65 Feb  3 09:12 /dev/ttyS1
crw-rw---- 1 root uucp 4, 66 Feb  3 09:12 /dev/ttyS2
crw-rw---- 1 root uucp 4, 67 Feb  3 09:12 /dev/ttyS3
</pre>
<p>Добавьте пользователя в группу <code>uucp</code>
</p>
<pre># gpasswd -a $USER uucp
</pre>
<p>и перелогиньтесь.
</p>
<h3>
<span id="Windows_8.x_.D0.BE.D1.88.D0.B8.D0.B1.D0.BA.D0.B0_0x000000C4"></span><span class="mw-headline" id="Windows_8.x_ошибка_0x000000C4">Windows 8.x ошибка 0x000000C4</span>
</h3>
<p>Если вы получаете этот код ошибки при загрузке, даже при выбранном типе OS Win 8, попробуйте включить инструкцию процессора <code>CMPXCHG16B</code>:
</p>
<pre>$ vboxmanage setextradata <i>virtual_machine_name</i> VBoxInternal/CPUM/CMPXCHG16B 1
</pre>
<h3>
<span id="Windows_8_VM_.D0.B2.D1.8B.D0.BB.D0.B5.D1.82.D0.B0.D0.B5.D1.82_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5_.D1.81_.D0.BE.D1.88.D0.B8.D0.B1.D0.BA.D0.BE.D0.B9_.22ERR_DISK_FULL.22"></span><span class="mw-headline" id='Windows_8_VM_вылетает_при_загрузке_с_ошибкой_"ERR_DISK_FULL"'>Windows 8 VM вылетает при загрузке с ошибкой "ERR_DISK_FULL"</span>
</h3>
<p>Если ваша Windows 8 не запускается, VirtualBox выдаёт ошибку что виртуальный диск заполнен, но тем не менее вы уверены что диск не является заполненным,
откройте настройки виртуальной машины <i>Настройки&gt;Память&gt;Контроллер: SATA</i> и выберите <i>Use Host I/O Cache</i>.
</p>
<h3>
<span id=".D0.93.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.B0.D1.8F_.D0.9E.D0.A1_Linux_.D0.B2.D1.8B.D0.B4.D0.B0.D1.91.D1.82_.D0.B8.D1.81.D0.BA.D0.B0.D0.B6.D1.91.D0.BD.D0.BD.D1.8B.D0.B9_.D0.B8.D0.BB.D0.B8_.D0.B7.D0.B0.D0.BF.D0.B0.D0.B7.D0.B4.D1.8B.D0.B2.D0.B0.D1.8E.D1.89.D0.B8.D0.B9_.D0.B7.D0.B2.D1.83.D0.BA"></span><span class="mw-headline" id="Гостевая_ОС_Linux_выдаёт_искажённый_или_запаздывающий_звук">Гостевая ОС Linux выдаёт искажённый или запаздывающий звук</span>
</h3>
<p>Аудио драйвер AC97 в ядре linux иногда неправильно считывает время из Virtual Box, что приводит к различным искажениям звука. Для исправления проблемы, создайте файл <code>/etc/modprobe.d</code> со следующим содержанием:
</p>
<pre>options snd-intel8x0 ac97_clock=48000
</pre>
<h3>
<span id=".D0.93.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.B0.D1.8F_.D0.9E.D0.A1_.D0.B7.D0.B0.D0.B2.D0.B8.D1.81.D0.B0.D0.B5.D1.82_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0_Xorg"></span><span class="mw-headline" id="Гостевая_ОС_зависает_после_запуска_Xorg">Гостевая ОС зависает после запуска Xorg</span>
</h3>
<p>Неисправные или отсутствующие драйверы могут привести к остановке после запуска Xorg, см., например, <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1167838">[3]</a> и <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.PHP?ID=156079">[4]</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2020-08-06 ⓘ]</sup>. Попробуйте отключить 3D-ускорение в <i>Настройки&gt; Дисплей</i>, и проверьте, все ли драйверы <a href="../ru/Xorg.html" title="Xorg (Русский)">Xorg</a> установлены.
</p>
<h3>
<span id=".D0.98.D1.81.D1.87.D0.B5.D0.B7.D0.BD.D0.BE.D0.B2.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.83.D0.BD.D0.BA.D1.82.D0.BE.D0.B2_.D0.BC.D0.B5.D0.BD.D1.8E_.D0.B8_.D0.BE.D1.88.D0.B8.D0.B1.D0.BA.D0.B0_.22NS_ERROR_FAILURE.22"></span><span class="mw-headline" id='Исчезновение_пунктов_меню_и_ошибка_"NS_ERROR_FAILURE"'>Исчезновение пунктов меню и ошибка "NS_ERROR_FAILURE"</span>
</h3>
<p>Если после первого запуска машины вы столкнулись с такой ошибкой:
</p>
<pre>Failed to open a session for the virtual machine debian.
Could not open the medium '/home/.../VirtualBox VMs/debian/debian.qcow'.
QCow: Reading the L1 table for image '/home/.../VirtualBox VMs/debian/debian.qcow' failed (VERR_EOF).
VD: error VERR_EOF opening image file '/home/.../VirtualBox VMs/debian/debian.qcow' (VERR_EOF).

Result Code:
NS_ERROR_FAILURE (0x80004005)
Component:
Medium
</pre>
<p>Выйдите из VirtualBox, удалите все файлы новой машины и из файла конфигурации VirtualBox удалите последнюю строку в <code>MachineRegistry</code> меню:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/VirtualBox/VirtualBox.xml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
&lt;MachineRegistry&gt;
  &lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/debian/debian.vbox"/&gt;
  &lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/ubuntu/ubuntu.vbox"/&gt;
  <strike>&lt;MachineEntry uuid="{00000000-0000-0000-0000-000000000000}" src="/home/void/VirtualBox VMs/lastvmcausingproblems/lastvmcausingproblems.qcow"/&gt;</strike>
&lt;/MachineRegistry&gt;
...</pre>
<p>Это иногда происходит при выборе <i>QCOW</i>/<i>QCOW2</i>/<i>QED</i> формата виртуального диска.
</p>
<h3>
<span id=".22.D0.A3.D0.BA.D0.B0.D0.B7.D0.B0.D0.BD.D0.BD.D1.8B.D0.B9_.D0.BF.D1.83.D1.82.D1.8C_.D0.BD.D0.B5_.D1.81.D1.83.D1.89.D0.B5.D1.81.D1.82.D0.B2.D1.83.D0.B5.D1.82._.D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D1.8C.D1.82.D0.B5_.D0.BF.D1.83.D1.82.D1.8C_.D0.B8_.D0.BF.D0.BE.D0.BF.D1.80.D0.BE.D0.B1.D1.83.D0.B9.D1.82.D0.B5_.D0.B5.D1.89.D0.B5_.D1.80.D0.B0.D0.B7..22_.D0.9E.D1.88.D0.B8.D0.B1.D0.BA.D0.B0_.D0.B2_.D0.B3.D0.BE.D1.81.D1.82.D0.B5.D0.B2.D0.BE.D0.B9_.D0.9E.D0.A1_Windows"></span><span class="mw-headline" id='"Указанный_путь_не_существует._Проверьте_путь_и_попробуйте_еще_раз."_Ошибка_в_гостевой_ОС_Windows'>"Указанный путь не существует. Проверьте путь и попробуйте еще раз." Ошибка в гостевой ОС Windows</span>
</h3>
<p>Это сообщение об ошибке часто появляется при работе с расширением .exe который требует привелегий администратора из общей папки в гостевой Windows. См. <a rel="nofollow" class="external text" href="https://www.virtualbox.org/ticket/5732">отчет об ошибке</a>.
</p>
<p>Есть несколько способов обойти ошибку:
</p>
<ol>
<li>Отключить UAC с помощью Панель управления -&gt; Центр поддержки -&gt; "Settings Change User Account Control" из левой боковой панели -&gt; Установить ползунок "Никогда не уведомлять» -&gt; OK и перезагрузить ОС</li>
<li>Скопируйте файл из папки общего доступа в гостевую ОС и запустите оттуда</li>
</ol>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/UserManual.html">Руководство пользователя VirtualBox</a></li>
<li><a href="https://en.wikipedia.org/wiki/ru:VirtualBox" class="extiw" title="wikipedia:ru:VirtualBox">Википедия:VirtualBox</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:Hypervisors.html" title="Category:Hypervisors (Русский)">Hypervisors (Русский)</a></li>
<li><a href="../ru/Category:Oracle.html" title="Category:Oracle (Русский)">Oracle (Русский)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=VirtualBox_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=818280">https://wiki.archlinux.org/index.php?title=VirtualBox_(Русский)&amp;oldid=818280</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 12 October 2024, at 09:16.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
