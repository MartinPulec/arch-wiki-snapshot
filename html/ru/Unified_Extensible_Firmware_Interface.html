<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Unified Extensible Firmware Interface (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Unified_Extensible_Firmware_Interface_Русский rootpage-Unified_Extensible_Firmware_Interface_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Версии_UEFI" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%92%D0%B5%D1%80%D1%81%D0%B8%D0%B8_UEFI">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Версии UEFI</span>
			</div>
		</a>
		
		<ul id="toc-Версии_UEFI-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Разрядность_прошивки_UEFI" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B7%D1%80%D1%8F%D0%B4%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B8_UEFI">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Разрядность прошивки UEFI</span>
			</div>
		</a>
		
			<button aria-controls="toc-Разрядность_прошивки_UEFI-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Разрядность прошивки UEFI subsection</span>
			</button>
		
		<ul id="toc-Разрядность_прошивки_UEFI-sublist" class="vector-toc-list">
			<li id="toc-Проверка_разрядности_прошивки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D1%80%D0%B0%D0%B7%D1%80%D1%8F%D0%B4%D0%BD%D0%BE%D1%81%D1%82%D0%B8_%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Проверка разрядности прошивки</span>
				</div>
			</a>
			
			<ul id="toc-Проверка_разрядности_прошивки-sublist" class="vector-toc-list">
				<li id="toc-Из_Linux" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D0%B7_Linux">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>Из Linux</span>
				</div>
			</a>
			
			<ul id="toc-Из_Linux-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Из_macOS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D0%B7_macOS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.2</span>
					<span>Из macOS</span>
				</div>
			</a>
			
			<ul id="toc-Из_macOS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Из_Microsoft_Windows" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D0%B7_Microsoft_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.3</span>
					<span>Из Microsoft Windows</span>
				</div>
			</a>
			
			<ul id="toc-Из_Microsoft_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Конфигурация_ядра_Linux_для_UEFI" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D1%8F%D0%B4%D1%80%D0%B0_Linux_%D0%B4%D0%BB%D1%8F_UEFI">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Конфигурация ядра Linux для UEFI</span>
			</div>
		</a>
		
		<ul id="toc-Конфигурация_ядра_Linux_для_UEFI-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Переменные_UEFI" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_UEFI">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Переменные UEFI</span>
			</div>
		</a>
		
			<button aria-controls="toc-Переменные_UEFI-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Переменные UEFI subsection</span>
			</button>
		
		<ul id="toc-Переменные_UEFI-sublist" class="vector-toc-list">
			<li id="toc-Поддержка_переменных_UEFI_в_ядре_Linux" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_UEFI_%D0%B2_%D1%8F%D0%B4%D1%80%D0%B5_Linux">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Поддержка переменных UEFI в ядре Linux</span>
				</div>
			</a>
			
			<ul id="toc-Поддержка_переменных_UEFI_в_ядре_Linux-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Требования_для_поддержки_переменных_UEFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A2%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D0%B4%D0%BB%D1%8F_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B8_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_UEFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Требования для поддержки переменных UEFI</span>
				</div>
			</a>
			
			<ul id="toc-Требования_для_поддержки_переменных_UEFI-sublist" class="vector-toc-list">
				<li id="toc-Монтирование_efivars" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_efivars">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2.1</span>
					<span>Монтирование efivars</span>
				</div>
			</a>
			
			<ul id="toc-Монтирование_efivars-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Пользовательские_инструменты" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Пользовательские инструменты</span>
				</div>
			</a>
			
			<ul id="toc-Пользовательские_инструменты-sublist" class="vector-toc-list">
				<li id="toc-efibootmgr" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#efibootmgr">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3.1</span>
					<span>efibootmgr</span>
				</div>
			</a>
			
			<ul id="toc-efibootmgr-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Отключение_доступа_к_переменным_UEFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BA_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%BC_UEFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Отключение доступа к переменным UEFI</span>
				</div>
			</a>
			
			<ul id="toc-Отключение_доступа_к_переменным_UEFI-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-UEFI_Shell" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#UEFI_Shell">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>UEFI Shell</span>
			</div>
		</a>
		
			<button aria-controls="toc-UEFI_Shell-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle UEFI Shell subsection</span>
			</button>
		
		<ul id="toc-UEFI_Shell-sublist" class="vector-toc-list">
			<li id="toc-Получение_UEFI_Shell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_UEFI_Shell">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Получение UEFI Shell</span>
				</div>
			</a>
			
			<ul id="toc-Получение_UEFI_Shell-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запуск_UEFI_Shell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%83%D1%81%D0%BA_UEFI_Shell">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Запуск UEFI Shell</span>
				</div>
			</a>
			
			<ul id="toc-Запуск_UEFI_Shell-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Важные_команды_UEFI_Shell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%B0%D0%B6%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B_UEFI_Shell">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Важные команды UEFI Shell</span>
				</div>
			</a>
			
			<ul id="toc-Важные_команды_UEFI_Shell-sublist" class="vector-toc-list">
				<li id="toc-bcfg" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#bcfg">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3.1</span>
					<span>bcfg</span>
				</div>
			</a>
			
			<ul id="toc-bcfg-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-map" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#map">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3.2</span>
					<span>map</span>
				</div>
			</a>
			
			<ul id="toc-map-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-edit" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#edit">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3.3</span>
					<span>edit</span>
				</div>
			</a>
			
			<ul id="toc-edit-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Драйверы_UEFI" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%94%D1%80%D0%B0%D0%B9%D0%B2%D0%B5%D1%80%D1%8B_UEFI">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Драйверы UEFI</span>
			</div>
		</a>
		
		<ul id="toc-Драйверы_UEFI-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Загрузочные_носители_UEFI" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D1%8B%D0%B5_%D0%BD%D0%BE%D1%81%D0%B8%D1%82%D0%B5%D0%BB%D0%B8_UEFI">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>Загрузочные носители UEFI</span>
			</div>
		</a>
		
			<button aria-controls="toc-Загрузочные_носители_UEFI-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Загрузочные носители UEFI subsection</span>
			</button>
		
		<ul id="toc-Загрузочные_носители_UEFI-sublist" class="vector-toc-list">
			<li id="toc-Создание_загрузочного_UEFI_USB_из_ISO" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%BE%D0%B3%D0%BE_UEFI_USB_%D0%B8%D0%B7_ISO">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.1</span>
					<span>Создание загрузочного UEFI USB из ISO</span>
				</div>
			</a>
			
			<ul id="toc-Создание_загрузочного_UEFI_USB_из_ISO-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Удаление_поддержки_UEFI_с_оптического_носителя" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B8_UEFI_%D1%81_%D0%BE%D0%BF%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BD%D0%BE%D1%81%D0%B8%D1%82%D0%B5%D0%BB%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.2</span>
					<span>Удаление поддержки UEFI с оптического носителя</span>
				</div>
			</a>
			
			<ul id="toc-Удаление_поддержки_UEFI_с_оптического_носителя-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Тестирование_UEFI_на_системах_без_его_поддержки" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_UEFI_%D0%BD%D0%B0_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0%D1%85_%D0%B1%D0%B5%D0%B7_%D0%B5%D0%B3%D0%BE_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Тестирование UEFI на системах без его поддержки</span>
			</div>
		</a>
		
			<button aria-controls="toc-Тестирование_UEFI_на_системах_без_его_поддержки-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Тестирование UEFI на системах без его поддержки subsection</span>
			</button>
		
		<ul id="toc-Тестирование_UEFI_на_системах_без_его_поддержки-sublist" class="vector-toc-list">
			<li id="toc-OVMF_для_виртуальных_машин" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#OVMF_%D0%B4%D0%BB%D1%8F_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.1</span>
					<span>OVMF для виртуальных машин</span>
				</div>
			</a>
			
			<ul id="toc-OVMF_для_виртуальных_машин-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-DUET_для_BIOS-систем" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#DUET_%D0%B4%D0%BB%D1%8F_BIOS-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.2</span>
					<span>DUET для BIOS-систем</span>
				</div>
			</a>
			
			<ul id="toc-DUET_для_BIOS-систем-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">9</span>
				<span>Решение проблем</span>
			</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Загрузка_в_Arch_Linux_после_застревания_в_Windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B2_Arch_Linux_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%B7%D0%B0%D1%81%D1%82%D1%80%D0%B5%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D0%B2_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1</span>
					<span>Загрузка в Arch Linux после застревания в Windows</span>
				</div>
			</a>
			
			<ul id="toc-Загрузка_в_Arch_Linux_после_застревания_в_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Открытие_настроек_прошивки_без_функциональных_клавиш" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D1%80%D1%8B%D1%82%D0%B8%D0%B5_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA_%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B8_%D0%B1%D0%B5%D0%B7_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.2</span>
					<span>Открытие настроек прошивки без функциональных клавиш</span>
				</div>
			</a>
			
			<ul id="toc-Открытие_настроек_прошивки_без_функциональных_клавиш-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Пользовательские_инструменты_не_могут_изменить_переменные_UEFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B_%D0%BD%D0%B5_%D0%BC%D0%BE%D0%B3%D1%83%D1%82_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_UEFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.3</span>
					<span>Пользовательские инструменты не могут изменить переменные UEFI</span>
				</div>
			</a>
			
			<ul id="toc-Пользовательские_инструменты_не_могут_изменить_переменные_UEFI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_создать_загрузочные_записи_с_помощью_efibootmgr" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D1%8B%D0%B5_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_efibootmgr">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.4</span>
					<span>Не удаётся создать загрузочные записи с помощью efibootmgr</span>
				</div>
			</a>
			
			<ul id="toc-Не_удаётся_создать_загрузочные_записи_с_помощью_efibootmgr-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Windows_изменяет_порядок_загрузки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Windows_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D1%82_%D0%BF%D0%BE%D1%80%D1%8F%D0%B4%D0%BE%D0%BA_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.5</span>
					<span>Windows изменяет порядок загрузки</span>
				</div>
			</a>
			
			<ul id="toc-Windows_изменяет_порядок_загрузки-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Чёрный_экран_при_загрузке_с_USB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A7%D1%91%D1%80%D0%BD%D1%8B%D0%B9_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5_%D1%81_USB">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.6</span>
					<span>Чёрный экран при загрузке с USB</span>
				</div>
			</a>
			
			<ul id="toc-Чёрный_экран_при_загрузке_с_USB-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Загрузчик_UEFI_не_отображается_в_меню_прошивки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA_UEFI_%D0%BD%D0%B5_%D0%BE%D1%82%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D0%B2_%D0%BC%D0%B5%D0%BD%D1%8E_%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.7</span>
					<span>Загрузчик UEFI не отображается в меню прошивки</span>
				</div>
			</a>
			
			<ul id="toc-Загрузчик_UEFI_не_отображается_в_меню_прошивки-sublist" class="vector-toc-list">
				<li id="toc-Стандартные_пути_загрузки_для_съёмных_носителей" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5_%D0%BF%D1%83%D1%82%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%BB%D1%8F_%D1%81%D1%8A%D1%91%D0%BC%D0%BD%D1%8B%D1%85_%D0%BD%D0%BE%D1%81%D0%B8%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.7.1</span>
					<span>Стандартные пути загрузки для съёмных носителей</span>
				</div>
			</a>
			
			<ul id="toc-Стандартные_пути_загрузки_для_съёмных_носителей-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Расположение_загрузчика_Microsoft_Windows" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A0%D0%B0%D1%81%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA%D0%B0_Microsoft_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.7.2</span>
					<span>Расположение загрузчика Microsoft Windows</span>
				</div>
			</a>
			
			<ul id="toc-Расположение_загрузчика_Microsoft_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Загрузочные_записи,_созданные_с_помощью_efibootmgr,_не_отображаются_в_UEFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D1%8B%D0%B5_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8,_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_efibootmgr,_%D0%BD%D0%B5_%D0%BE%D1%82%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B0%D1%8E%D1%82%D1%81%D1%8F_%D0%B2_UEFI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.8</span>
					<span>Загрузочные записи, созданные с помощью efibootmgr, не отображаются в UEFI</span>
				</div>
			</a>
			
			<ul id="toc-Загрузочные_записи,_созданные_с_помощью_efibootmgr,_не_отображаются_в_UEFI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Загрузочная_запись_UEFI_исчезает_после_удаления_диска,_на_который_она_ссылается" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D1%8C_UEFI_%D0%B8%D1%81%D1%87%D0%B5%D0%B7%D0%B0%D0%B5%D1%82_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0,_%D0%BD%D0%B0_%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D1%8B%D0%B9_%D0%BE%D0%BD%D0%B0_%D1%81%D1%81%D1%8B%D0%BB%D0%B0%D0%B5%D1%82%D1%81%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.9</span>
					<span>Загрузочная запись UEFI исчезает после удаления диска, на который она ссылается</span>
				</div>
			</a>
			
			<ul id="toc-Загрузочная_запись_UEFI_исчезает_после_удаления_диска,_на_который_она_ссылается-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Загрузочные_записи_удаляются_случайным_образом" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D1%8B%D0%B5_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8_%D1%83%D0%B4%D0%B0%D0%BB%D1%8F%D1%8E%D1%82%D1%81%D1%8F_%D1%81%D0%BB%D1%83%D1%87%D0%B0%D0%B9%D0%BD%D1%8B%D0%BC_%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.10</span>
					<span>Загрузочные записи удаляются случайным образом</span>
				</div>
			</a>
			
			<ul id="toc-Загрузочные_записи_удаляются_случайным_образом-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">10</span>
				<span>Смотрите также</span>
			</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Unified Extensible Firmware Interface (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface – English" lang="en" hreflang="en" data-title="Unified Extensible Firmware Interface" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface – español" lang="es" hreflang="es" data-title="Unified Extensible Firmware Interface" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-hu mw-list-item"><a href="../hu/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface – magyar" lang="hu" hreflang="hu" data-title="Unified Extensible Firmware Interface" data-language-autonym="Magyar" data-language-local-name="magyar" class="interlanguage-link-target"><span>Magyar</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Unified_Extensible_Firmware_Interface" title="Unified Extensible Firmware Interface – 日本語" lang="ja" hreflang="ja" data-title="Unified Extensible Firmware Interface" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Unified_Extensible_Firmware_Interface" title="Unified Extensible Firmware Interface – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Unified Extensible Firmware Interface" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface</a>. Дата последней синхронизации: 22 августа 2023. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Unified_Extensible_Firmware_Interface&amp;diff=0&amp;oldid=784579">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/EFI_system_partition.html" class="mw-redirect" title="Системный раздел EFI">Системный раздел EFI</a></li>
<li><a href="../ru/Arch_boot_process.html" class="mw-redirect" title="Процесс загрузки Arch">Процесс загрузки Arch</a></li>
<li><a href="../ru/Partitioning.html#%D0%A2%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2_GUID" class="mw-redirect" title="Таблица разделов GUID">Таблица разделов GUID</a></li>
<li><a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a></li>
<li><a href="../en/Unified_kernel_image.html" title="Unified kernel image">Unified kernel image</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.uefi.org/">Unified Extensible Firmware Interface</a> (UEFI, преемник EFI) — интерфейс между операционной системой и прошивкой устройства. Он обеспечивает стандартную среду для загрузки операционной системы и запуска предзагрузочных приложений.
</p>
<p>Он вводит новый способ загрузки операционных систем, который отличается от обычного «<a href="../ru/Partitioning.html#%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D1%8C_(MBR)_(%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D1%8B%D0%B9_%D0%BA%D0%BE%D0%B4)" title="Partitioning (Русский)">загрузочного кода MBR</a>», который использовался в системах <a href="https://en.wikipedia.org/wiki/ru:BIOS" class="extiw" title="wikipedia:ru:BIOS">BIOS</a>. Различия в процессе загрузки описаны в статье <a href="../ru/Arch_boot_process.html" class="mw-redirect" title="Процесс загрузки Arch">Процесс загрузки Arch</a>. Установка загрузчиков UEFI описана в разделе <a href="../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" class="mw-redirect" title="Процесс загрузки Arch">Процесс загрузки Arch#Загрузчик</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Ранние реализации UEFI могут содержать больше ошибок, чем их BIOS-аналоги. Если вы столкнётесь с неразрешимыми проблемами, подумайте об использовании Legacy BIOS для таких систем.</div>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Версии_UEFI">
<span id=".D0.92.D0.B5.D1.80.D1.81.D0.B8.D0.B8_UEFI"></span>Версии UEFI</h2></div>
<ul>
<li>UEFI начинался как EFI от Intel в версиях 1.x.</li>
<li>Позже группа компаний под названием UEFI Forum взяла на себя его разработку и переименовала в Unified EFI, начиная с версии 2.0.</li>
<li>Если не указано, что имеется в виду EFI 1.x, термины EFI и UEFI используются как взаимозаменяемые для обозначения прошивки UEFI 2.x.</li>
<li>Реализация EFI от Apple не является ни версией EFI 1.x, ни версией UEFI 2.x, а смешивает оба варианта. Этот вид прошивок не подпадает ни под одну из спецификаций (U)EFI и поэтому не является стандартной прошивкой UEFI. Если не указано явно, эти инструкции являются общими, и некоторые из них могут не работать или отличаться на устройствах <a href="../en/Mac.html" title="Mac">Mac</a>.</li>
</ul>
<p>Спецификацию последней версии UEFI можно найти на <a rel="nofollow" class="external free" href="https://uefi.org/specifications">https://uefi.org/specifications</a>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Разрядность_прошивки_UEFI">
<span id=".D0.A0.D0.B0.D0.B7.D1.80.D1.8F.D0.B4.D0.BD.D0.BE.D1.81.D1.82.D1.8C_.D0.BF.D1.80.D0.BE.D1.88.D0.B8.D0.B2.D0.BA.D0.B8_UEFI"></span>Разрядность прошивки UEFI</h2></div>
<p>В UEFI каждая программа, будь то загрузчик ОС или утилита (например, приложение для тестирования памяти или средство восстановления), должна быть EFI-приложением, архитектура которого должна совпадать с архитектурой прошивки UEFI.
</p>
<p>Подавляющее большинство прошивок UEFI, включая последние модели Apple Mac, используют прошивку UEFI x86_64. Единственными известными устройствами, использующими IA32 (32-битный) UEFI, являются старые (до 2008 года) Apple Mac, системы Intel Atom System-on-Chip (по состоянию на 2 ноября 2013 года)<a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20201224150025/https://software.intel.com/content/www/us/en/develop/blogs/why-cheap-systems-run-32-bit-uefi-on-x64-systems.html">[1]</a> и некоторые старые серверные платы Intel, которые, как известно, работают на прошивке Intel EFI 1.10.
</p>
<p>Прошивки x86_64 UEFI не имеют поддержки запуска 32-битных EFI-приложений (в отличие от x86_64 версий Linux и Windows, которые имеют такую поддержку). Поэтому EFI-приложение должно быть скомпилировано для конкретной разрядности/архитектуры процессора, на котором работает прошивка.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Для систем с IA32 UEFI понадобится загрузчик с поддержкой mixed mode booting, например, <a href="../ru/GRUB.html" title="GRUB (Русский)">GRUB</a> с целью <code>i386-efi</code>.</div>
<div class="mw-heading mw-heading3"><h3 id="Проверка_разрядности_прошивки">
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D1.80.D0.B0.D0.B7.D1.80.D1.8F.D0.B4.D0.BD.D0.BE.D1.81.D1.82.D0.B8_.D0.BF.D1.80.D0.BE.D1.88.D0.B8.D0.B2.D0.BA.D0.B8"></span>Проверка разрядности прошивки</h3></div>
<p>Разрядность прошивки можно проверить из загруженной операционной системы.
</p>
<div class="mw-heading mw-heading4"><h4 id="Из_Linux">
<span id=".D0.98.D0.B7_Linux"></span>Из Linux</h4></div>
<p>В дистрибутивах с ядром Linux версии 4.0 или новее разрядность прошивки UEFI можно узнать через интерфейс sysfs. Выполните:
</p>
<pre>$ cat /sys/firmware/efi/fw_platform_size
</pre>
<p>Это вернёт <code>64</code> для 64-битного (x86_64) UEFI или <code>32</code> для 32-битного (IA32) UEFI. Если файл не существует, значит, вы <a href="../ru/Installation_guide.html#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8" title="Installation guide (Русский)">загрузились не в режиме UEFI</a>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Из_macOS">
<span id=".D0.98.D0.B7_macOS"></span>Из macOS</h4></div>
<p><a href="../en/Mac.html" title="Mac">Mac</a>, выпущенные до 2008 года, в основном имеют прошивку IA32 EFI, а выпущенные в 2008 или позднее — x86_64 EFI. Все Mac, способные работать с 64-битным ядром Mac OS X Snow Leopard, имеют прошивку x86_64 EFI 1.x.
</p>
<p>Чтобы узнать разрядность прошивки EFI в Mac, введите следующую команду в терминале Mac OS X:
</p>
<pre>$ ioreg -l -p IODeviceTree | grep firmware-abi
</pre>
<p>Если команда возвращает значение <code>EFI32</code>, то прошивка IA32 EFI (32-битная), а если значение <code>EFI64</code> — прошивка x86_64 EFI (64-битная). Большинство Mac не имеют прошивку UEFI 2.x, так как реализация EFI от Apple не полностью совместима со спецификацией UEFI 2.x.
</p>
<div class="mw-heading mw-heading4"><h4 id="Из_Microsoft_Windows">
<span id=".D0.98.D0.B7_Microsoft_Windows"></span>Из Microsoft Windows</h4></div>
<p>64-битные версии Windows не поддерживают загрузку на 32-битном UEFI. Поэтому, если у вас 32-битная версия Windows, загруженная в режиме UEFI, у вас 32-битный UEFI.
</p>
<p>Для проверки разрядности запустите <code>msinfo32.exe</code>. В разделе <i>Сведения о системе</i> смотрите значения записей «Тип» и «Режим BIOS».
</p>
<p>Для 64-битного Windows и 64-битного UEFI будет <code>Тип: Компьютер на базе x64</code> и <code>Режим BIOS: UEFI</code>. Для 32-битного Windows и 32-битного UEFI — <code>Тип: Компьютер на базе x86</code> и <code>Режим BIOS: UEFI</code>. Если «Режим BIOS» имеет значение не <code>UEFI</code>, значит, Windows загружен не в режиме UEFI.
</p>
<div class="mw-heading mw-heading2"><h2 id="Конфигурация_ядра_Linux_для_UEFI">
<span id=".D0.9A.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_.D1.8F.D0.B4.D1.80.D0.B0_Linux_.D0.B4.D0.BB.D1.8F_UEFI"></span>Конфигурация ядра Linux для UEFI</h2></div>
<p>Необходимая конфигурация для ядра Linux<a rel="nofollow" class="external autonumber" href="https://docs.kernel.org/arch/x86/x86_64/uefi.html">[2]</a> такова:
</p>
<pre>CONFIG_RELOCATABLE=y
CONFIG_EFI=y
CONFIG_EFI_STUB=y
CONFIG_X86_SYSFB=y
CONFIG_FB_SIMPLE=y
CONFIG_FRAMEBUFFER_CONSOLE=y
</pre>
<p>Поддержка UEFI Runtime Variables (файловая система <b>efivarfs</b> — <code>/sys/firmware/efi/efivars</code>). Эта опция важна, так как нужна для работы с переменными времени выполнения UEFI с помощью инструментов вроде <a href="#efibootmgr">efibootmgr</a>. Эта опция появилась в ядре 3.10.
</p>
<pre>CONFIG_EFIVAR_FS=y
</pre>
<p>Поддержка UEFI Runtime Variables (старый интерфейс <b>efivars sysfs</b> — <code>/sys/firmware/efi/vars</code>). Эта опция должна быть отключена, чтобы предотвратить возможные проблемы при одновременно включенных efivarfs и sysfs-efivars.
</p>
<pre>CONFIG_EFI_VARS=n
</pre>
<p><a href="../ru/Partitioning.html#%D0%A2%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2_GUID" class="mw-redirect" title="Таблица разделов GUID">Таблица разделов GUID</a> (GPT) — необходима для поддержки UEFI
</p>
<pre>CONFIG_EFI_PARTITION=y
</pre>
<p>Поддержка EFI mixed-mode — для загрузки 64-битного ядра на 32-битной прошивке UEFI.
</p>
<pre>CONFIG_EFI_MIXED=y
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Все эти опции применяются в <a href="../ru/Kernel.html#%D0%9E%D1%84%D0%B8%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D1%8F%D0%B4%D1%80%D0%B0" title="Kernel (Русский)">официально поддерживаемых ядрах</a>.</div>
<div class="mw-heading mw-heading2"><h2 id="Переменные_UEFI">
<span id=".D0.9F.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D0.B5_UEFI"></span>Переменные UEFI</h2></div>
<p>UEFI определяет переменные, через которые операционная система может взаимодействовать с прошивкой. Переменные загрузки UEFI используются загрузчиком и применяются ОС только для раннего запуска системы. Переменные времени выполнения (runtime variables) позволяют ОС управлять определёнными настройками прошивки, такими как менеджер загрузки UEFI или управление ключами для протокола UEFI Secure Boot и т. д. Вы можете получить список с помощью команды:
</p>
<pre>$ efivar --list
</pre>
<div class="mw-heading mw-heading3"><h3 id="Поддержка_переменных_UEFI_в_ядре_Linux">
<span id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_.D0.BF.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_UEFI_.D0.B2_.D1.8F.D0.B4.D1.80.D0.B5_Linux"></span>Поддержка переменных UEFI в ядре Linux</h3></div>
<p>Ядро Linux даёт пользовательскому пространству доступ к переменным UEFI через интерфейс <b>efivarfs</b> (<b>EFI</b> <b>VAR</b>iable <b>F</b>ile<b>S</b>ystem) (<code>CONFIG_EFIVAR_FS</code>) — монтируется с помощью модуля ядра <code>efivarfs</code> в <code>/sys/firmware/efi/efivars</code> — не имеет ограничений на максимальный размер переменной и поддерживает переменные UEFI Secure Boot. Появилось в ядре 3.8.
</p>
<div class="mw-heading mw-heading3"><h3 id="Требования_для_поддержки_переменных_UEFI">
<span id=".D0.A2.D1.80.D0.B5.D0.B1.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.B4.D0.BB.D1.8F_.D0.BF.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B8_.D0.BF.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D1.85_UEFI"></span>Требования для поддержки переменных UEFI</h3></div>
<ol>
<li>Ядро должно быть загружено в режиме UEFI через <a href="../en/EFI_boot_stub.html" class="mw-redirect" title="EFISTUB (Русский)">EFISTUB</a> (опционально с использованием <a href="../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" title="Arch boot process (Русский)">менеджера загрузки</a>) или <a href="../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" title="Arch boot process (Русский)">загрузчиком</a> UEFI, а не через BIOS или CSM, или Apple Boot Camp, который также является CSM.</li>
<li>Ядро должно иметь поддержку EFI Runtime Services (<code>CONFIG_EFI=y</code>, проверить наличие можно командой <code>zgrep CONFIG_EFI /proc/config.gz</code>).</li>
<li>EFI Runtime Services в ядре не должны быть отключены через <a href="../ru/Kernel_parameters.html" title="Kernel parameters (Русский)">командную строку ядра</a>, то есть параметр <code>noefi</code> должен отсутствовать.</li>
<li>Файловая система <code>efivarfs</code> должна быть смонтирована в <code>/sys/firmware/efi/efivars</code>, иначе следуйте разделу <a href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_efivars">#Монтирование efivars</a> ниже.</li>
<li>
<code>efivar</code> должен отобразить список переменных UEFI (опция <code>-l</code>/<code>--list</code>) без ошибок.</li>
</ol>
<p>Если поддержка переменных UEFI не работает даже после выполнения вышеуказанных условий, попробуйте следующие обходные пути:
</p>
<ol>
<li>Если просмотр списка переменных UEFI (<code>efivar -l</code>) приводит к ошибке <code>efivar: error listing variables: Function not implemented</code> и система загружена в <a href="../en/Realtime_kernel.html" title="Realtime kernel">ядро реального времени</a>, добавьте <code>efi=runtime</code> в <a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметры ядра">параметры ядра</a> и перезагрузитесь (efivarfs отключен по умолчанию на таких ядрах).</li>
<li>Дополнительные шаги по устранению неполадок смотрите в разделе <a href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B_%D0%BD%D0%B5_%D0%BC%D0%BE%D0%B3%D1%83%D1%82_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_UEFI">#Пользовательские инструменты не могут изменить переменные UEFI</a>
</li>
</ol>
<div class="mw-heading mw-heading4"><h4 id="Монтирование_efivars">
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_efivars"></span>Монтирование efivars</h4></div>
<p>Если <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a> не смонтировал <code>efivarfs</code> в <code>/sys/firmware/efi/efivars</code> автоматически, смонтируйте его вручную, чтобы у <a href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">инструментов</a> вроде <i>efibootmgr</i> появился доступ к переменным UEFI:
</p>
<pre># mount -t efivarfs efivarfs /sys/firmware/efi/efivars
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> При использовании <a href="../ru/Chroot.html" title="Chroot (Русский)">chroot</a> нужно выполнить монтирование и снаружи (то есть перед запуском <i>chroot</i>), и внутри него.</div>
<p>Документация ядра доступна здесь: <a rel="nofollow" class="external text" href="https://docs.kernel.org/filesystems/efivarfs.html">efivarfs.html</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Пользовательские_инструменты">
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B8.D0.B5_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B"></span>Пользовательские инструменты</h3></div>
<p>Существует несколько инструментов, работающих в пространстве пользователя (userspace), которые могут взаимодействовать с переменными UEFI:
</p>
<ul><li>
<b>efivar</b> — Библиотека и инструмент для работы с переменными UEFI (используется в efibootmgr)</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/rhboot/efivar">https://github.com/rhboot/efivar</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efivar">efivar</a></span>
</dd></dl>
<ul><li>
<b>efibootmgr</b> — Инструмент для работы с настройками менеджера загрузки прошивки UEFI</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/rhboot/efibootmgr">https://github.com/rhboot/efibootmgr</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span>
</dd></dl>
<ul><li>
<b>uefivars</b> — Выгружает список переменных UEFI с некоторой дополнительной информацией, связанной с PCI (использует код efibootmgr).</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/fpmurphy/Various/tree/master/uefivars-2.0">https://github.com/fpmurphy/Various/tree/master/uefivars-2.0</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/uefivars-git/">uefivars-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>efitools</b> — Инструменты для манипулирования платформами UEFI secure boot</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://git.kernel.org/pub/scm/linux/kernel/git/jejb/efitools.git">https://git.kernel.org/pub/scm/linux/kernel/git/jejb/efitools.git</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efitools">efitools</a></span>
</dd></dl>
<ul><li>
<b>Ubuntu's Firmware Test Suite</b> — Набор тестов, выполняющий проверку исправности прошивок ПК Intel/AMD</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.ubuntu.com/FirmwareTestSuite/">https://wiki.ubuntu.com/FirmwareTestSuite/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fwts-git/">fwts-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<div class="mw-heading mw-heading4"><h4 id="efibootmgr">efibootmgr</h4></div>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> 
<ul>
<li>Если <i>efibootmgr</i> не работает в вашей системе, вы можете перезагрузиться в <a href="#UEFI_Shell">#UEFI Shell</a> и использовать <code>bcfg</code> для создания загрузочной записи для загрузчика.</li>
<li>Если вы не можете использовать <code>efibootmgr</code>, некоторые прошивки UEFI позволяют пользователям напрямую управлять загрузочными записями UEFI из интерфейса времени загрузки. Например, некоторые прошивки имеют опцию "Add New Boot Option", которая позволяет выбрать локальный системный раздел EFI и вручную ввести расположение приложения EFI, например, <code>\EFI\refind\refind_x64.efi</code>.</li>
<li>В приведённых ниже командах в качестве примера используется менеджер загрузки <a href="../ru/REFInd.html" title="REFInd (Русский)">rEFInd</a>.</li>
</ul>
</div>
<p>Чтобы добавить новую загрузочную запись с помощью <i>efibootmgr</i>, необходимо знать три вещи:
</p>
<ul>
<li>Диск, содержащий <a href="../ru/EFI_system_partition.html" class="mw-redirect" title="Системный раздел EFI">системный раздел EFI</a> (ESP). Например: <code>/dev/sda</code>, <code>/dev/nvme0n1</code>.</li>
<li>Номер раздела ESP на этом диске. <code><i>Y</i></code> в <code>/dev/sda<i>Y</i></code> или <code>/dev/nvme0n1p<i>Y</i></code>.</li>
<li>Путь к приложению EFI (относительно корня ESP).</li>
</ul>
<p>Например, если вы хотите добавить запись для <code>/efi/EFI/refind/refind_x64.efi</code>, где <code>/efi</code> — это точка монтирования ESP, выполните
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ findmnt /efi</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TARGET SOURCE    FSTYPE OPTIONS
/efi   /dev/sda1 vfat   rw,flush,tz=UTC</pre>
<p>В данном примере это означает, что ESP находится на диске <code>/dev/sda</code> и имеет номер раздела 1. Путь к EFI-приложению относительно корня ESP — <code>/EFI/refind/refind_x64.efi</code>. Соответственно, можно загрузочную запись так:
</p>
<pre># efibootmgr --create --disk /dev/sda --part 1 --loader /EFI/refind/refind_x64.efi --label "rEFInd Boot Manager" --unicode
</pre>
<pre># efibootmgr --create --disk /dev/nvme0n1p1 --loader /EFI/refind/refind_x64.efi --label "rEFInd Boot Manager" --unicode
</pre>
<p>Смотрите <span class="plainlinks archwiki-template-man" title="$ man 8 efibootmgr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/efibootmgr.8">efibootmgr(8)</a></span> или <a rel="nofollow" class="external text" href="https://raw.githubusercontent.com/rhinstaller/efibootmgr/master/README">efibootmgr README</a> для более подробной информации.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> UEFI использует обратный слэш <code>\</code> в качестве разделителя в путях, но <i>efibootmgr</i> автоматически конвертирует UNIX-разделители <code>/</code>.</div>
<div class="mw-heading mw-heading3"><h3 id="Отключение_доступа_к_переменным_UEFI">
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_.D0.BA_.D0.BF.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D0.BC_UEFI"></span>Отключение доступа к переменным UEFI</h3></div>
<p>Доступ к UEFI потенциально может нанести вред не только на уровне ОС. Иногда возможно даже «окирпичивание» устройства на некоторых забагованных реализациях UEFI. <a rel="nofollow" class="external autonumber" href="https://github.com/systemd/systemd/issues/2402#issuecomment-176806817">[3]</a>
</p>
<p>Так как доступ к переменным UEFI не требуется для ежедневного использования системы, вы можете отключить его, чтобы избежать потенциальных проблем безопасности или случайного вреда.
</p>
<p>Возможные решения:
</p>
<ul>
<li>Монтирование <code>efivars</code> в режиме только для чтения через <a href="../ru/Fstab.html" title="Fstab (Русский)">fstab</a>. Например: <pre>efivarfs /sys/firmware/efi/efivars efivarfs ro,nosuid,nodev,noexec 0 0</pre>
</li>
<li>Использование <a href="../ru/Kernel_parameters.html" title="Kernel parameters (Русский)">параметра ядра</a> <code>noefi</code>, который полностью отключит доступ к UEFI из ОС.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> <a href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">#Пользовательские инструменты</a> UEFI перестанут работать, поэтому выполните все нужные настройки заранее. Команды, связанные с UEFI (например, <code>systemctl reboot --firmware-setup</code>), тоже перестанут работать.</div>
<div class="mw-heading mw-heading2"><h2 id="UEFI_Shell">UEFI Shell</h2></div>
<p>Командная оболочка UEFI (UEFI Shell) — это оболочка/терминал для прошивки, позволяющий запускать EFI-приложения, в том числе загрузчики UEFI. Кроме того, оболочка может использоваться для получения различной информации о системе или прошивке, например, распределение памяти (memmap), изменение переменных менеджера загрузки (bcfg), запуск программ разметки (diskpart), загрузки драйверов UEFI, редактирование текстовых файлов (edit), hexedit и т.д.
</p>
<div class="mw-heading mw-heading3"><h3 id="Получение_UEFI_Shell">
<span id=".D0.9F.D0.BE.D0.BB.D1.83.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_UEFI_Shell"></span>Получение UEFI Shell</h3></div>
<p>Можно получить UEFI Shell из проекта TianoCore EDK2 (лицензия BSD):
</p>
<ul>
<li>Shell v2:
<ul>
<li>На установочном носителе Arch: <code>/shellx64.efi</code> — это копия файла <code>/usr/share/edk2-shell/x64/Shell_Full.efi</code>, доступного на момент сборки ISO.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=edk2-shell">edk2-shell</a></span> предоставляет x86_64 Shell для x86_64 (64-bit) UEFI и IA32 Shell для IA32 (32-bit) UEFI — скомпилировано непосредственно из последнего выпуска TianoCore EDK2.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/uefi-shell-git/">uefi-shell-git</a></span><sup><small>AUR</small></sup> предоставляет x86_64 Shell для x86_64 (64-bit) UEFI и IA32 Shell для IA32 (32-bit) UEFI — компилируется непосредственно из последнего выпуска TianoCore EDK2.</li>
</ul>
</li>
<li>Shell v1:
<ul><li>
<a rel="nofollow" class="external text" href="https://github.com/tianocore/edk2/tree/UDK2018/EdkShellBinPkg">Прекомпилированные файлы UEFI Shell v1</a> от TianoCore (больше не обновляется).</li></ul>
</li>
<li>С патчами:
<ul>
<li>
<a rel="nofollow" class="external text" href="https://drive.google.com/uc?export=download&amp;id=1OBXYj6MEs7VAZbYnjD9FxOYcZYIQoq36">Прекомпилированный UEFI Shell v2 с bcfg, модифицированный для работы с прошивкой UEFI pre-2.3</a><sup title="Статус последней проверки: 403">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-07-30 ⓘ]</sup> - из загрузчика Clover EFI.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/acidanthera/OpenCorePkg/releases">Прекомпилированный UEFI Shell v2, совместимый с широким спектром прошивок</a> - из загрузчика OpenCore. В архиве: <code>EFI/OC/Tools/OpenShell.efi</code>.</li>
</ul>
</li>
</ul>
<p>Shell v2 лучше всего работает в системах UEFI 2.3+ и рекомендуется вместо Shell v1. Shell v1 должен работать во всех системах UEFI независимо от версии спецификации, которой соответствует прошивка. Дополнительная информация доступна на <a rel="nofollow" class="external text" href="https://github.com/tianocore/tianocore.github.io/wiki/ShellPkg">ShellPkg</a> и в теме из списка рассылки EDK2 — <a rel="nofollow" class="external text" href="https://edk2-devel.narkive.com/zCN4CEnb/inclusion-of-uefi-shell-in-linux-distro-iso">Inclusion of UEFI shell in Linux distro iso</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Запуск_UEFI_Shell">
<span id=".D0.97.D0.B0.D0.BF.D1.83.D1.81.D0.BA_UEFI_Shell"></span>Запуск UEFI Shell</h3></div>
<p>Некоторые материнские платы Asus и другие материнские платы, использующие AMI Aptio x86_64 UEFI (начиная с Sandy Bridge и далее), имеют опцию под названием <i>Launch EFI Shell from filesystem device</i>. Для этих материнских плат скопируйте x86_64 UEFI Shell в корень системного раздела EFI с именем <code>shellx64.efi</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> 
<ul>
<li>Установочный носитель Arch Linux имеет <code>shellx64.efi</code> в корне тома.</li>
<li>
<a href="../ru/REFInd.html" title="REFInd (Русский)">rEFInd</a> и <a href="../ru/Systemd-boot.html" title="Systemd-boot (Русский)">systemd-boot</a> автоматически добавляют пункт меню для UEFI Shell, если находят <code>shellx64.efi</code> в корне системного раздела EFI.</li>
</ul>
</div>
<p>Системы с прошивкой Phoenix SecureCore Tiano UEFI имеют встроенный UEFI Shell, которую можно запустить с помощью клавиши <code>F6</code>, <code>F11</code> или <code>F12</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Если вам не удаётся запустить UEFI Shell из прошивки напрямую, используя любой из вышеперечисленных методов, создайте USB-накопитель <a href="../ru/FAT.html" title="FAT (Русский)">FAT32</a> с файлом EFI, скопированным в <code><i>/точка_монтирования_USB</i>/EFI/BOOT/BOOTx64.EFI</code>. Этот USB должен появиться в меню загрузки прошивки, и загрузка с него запустит UEFI Shell.</div>
<div class="mw-heading mw-heading3"><h3 id="Важные_команды_UEFI_Shell">
<span id=".D0.92.D0.B0.D0.B6.D0.BD.D1.8B.D0.B5_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B_UEFI_Shell"></span>Важные команды UEFI Shell</h3></div>
<p>Команды UEFI Shell обычно поддерживают опцию <code>-b</code>, которая приостанавливает вывод после каждой страницы. Выполните команду <code>help -b</code>, чтобы получить список доступных внутренних команд. Доступные команды либо встроены в оболочку, либо являются отдельными приложениями EFI.
</p>
<p>Подробнее можно почитать <a rel="nofollow" class="external text" href="https://software.intel.com/en-us/articles/efi-shells-and-scripting/">Intel Scripting Guide 2008</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-07-30 ⓘ]</sup> и <a rel="nofollow" class="external text" href="https://software.intel.com/en-us/articles/uefi-shell">Intel "Course" 2011</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-07-30 ⓘ]</sup>.
</p>
<div class="mw-heading mw-heading4"><h4 id="bcfg">bcfg</h4></div>
<p><code>bcfg</code> изменяет записи UEFI NVRAM, что позволяет пользователю изменить загрузочные записи или опции драйвера. Эта команда подробно описана на странице 96 (раздел 5.3) документа <a rel="nofollow" class="external text" href="https://uefi.org/sites/default/files/resources/UEFI_Shell_2_2.pdf">UEFI Shell Specification 2.2</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> 
<ul>
<li>Пробуйте <code>bcfg</code> только если <code>efibootmgr</code> не смог создать рабочие загрузочные записи в вашей системе.</li>
<li>Официальный бинарный файл UEFI Shell v1 не поддерживает команду <code>bcfg</code>. В разделе <a href="#%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_UEFI_Shell">#Получение UEFI Shell</a> есть модифицированный бинарный файл UEFI Shell v2, который может работать в прошивках UEFI pre-2.3.</li>
</ul>
</div>
<p>Список текущих загрузочных записей:
</p>
<pre>Shell&gt; bcfg boot dump -v
</pre>
<p>Добавление пункта загрузки для rEFInd (например) как четвёртый (нумерация начинается с нуля) пункт в меню загрузки:
</p>
<pre>Shell&gt; bcfg boot add 3 FS0:\EFI\refind\refind_x64.efi "rEFInd Boot Manager"
</pre>
<p>где <code>FS0:</code> соответствует системному разделу EFI, а <code>FS0:\EFI\refind\refind_x64.efi</code> — запускаемый файл.
</p>
<p>Чтобы добавить запись для загрузки непосредственно в систему без загрузчика, настройте пункт загрузки, используя ваше ядро в качестве <a href="../en/EFI_boot_stub.html#bcfg" class="mw-redirect" title="EFISTUB (Русский)">EFISTUB</a>:
</p>
<pre>Shell&gt; bcfg boot add <b>N</b> fs<b>V</b>:\vmlinuz-linux "Arch Linux"
Shell&gt; bcfg boot -opt <b>N</b> "root=<b>/dev/sdX#</b> initrd=\initramfs-linux.img"
</pre>
<p>где <code>N</code> — приоритет, <code>V</code> — номер тома системного раздела EFI, а <code>/dev/sdX#</code> — корневой раздел.
</p>
<p>Удаление четвёртого пункта загрузки:
</p>
<pre>Shell&gt; bcfg boot rm 3
</pre>
<p>Перемещение четвёртого пункта на место первого пункта (что сделает его записью по умолчанию в загрузочном меню UEFI):
</p>
<pre>Shell&gt; bcfg boot mv 3 0
</pre>
<p>Справка команды bcfg:
</p>
<pre>Shell&gt; help bcfg -v -b
</pre>
<p>или:
</p>
<pre>Shell&gt; bcfg -? -v -b
</pre>
<div class="mw-heading mw-heading4"><h4 id="map">map</h4></div>
<p><code>map</code> отображает список сопоставлений устройств, то есть имена доступных файловых систем (<code>FS0</code>) и устройств хранения (<code>blk0</code>).
</p>
<p>Перед выполнением команд, связанных с файловой системой, таких как <code>cd</code> или <code>ls</code>, нужно переключить оболочку на соответствующую файловую систему, набрав её имя:
</p>
<pre>Shell&gt; FS0:
FS0:\&gt; cd EFI/
</pre>
<div class="mw-heading mw-heading4"><h4 id="edit">edit</h4></div>
<p><code>edit</code> предоставляет базовый текстовый редактор с интерфейсом, похожим на nano, но немного менее функциональный. Он обрабатывает кодировку UTF-8 и поддерживает окончания строк LF и CRLF.
</p>
<p>Например, для редактирования файла <code>refind.conf</code> в системном разделе EFI (доступен в прошивке как <code>FS0:</code>):
</p>
<pre>Shell&gt; edit FS0:\EFI\refind\refind.conf
</pre>
<p>Нажмите <code>Ctrl+e</code> для справки.
</p>
<div class="mw-heading mw-heading2"><h2 id="Драйверы_UEFI">
<span id=".D0.94.D1.80.D0.B0.D0.B9.D0.B2.D0.B5.D1.80.D1.8B_UEFI"></span>Драйверы UEFI</h2></div>
<p>Драйверы UEFI — это программы, поддерживающие определённую функциональность. Например, доступ к NTFS-разделам обычно невозможен через UEFI shell. В пакете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efifs">efifs</a></span> есть драйверы, поддерживающие чтение многих других файловых систем из EFI shell. Для использования можно скопировать такой драйвер на раздел, доступ к которому возможен из UEFI shell, а затем в UEFI shell выполнить такие команды:
</p>
<pre>Shell&gt; load ntfs_x64.efi
Shell&gt; map -r
</pre>
<p>После выполнения команды map у пользователя появится доступ к разделам, отформатированным в формате NTFS, через UEFI shell.
</p>
<div class="mw-heading mw-heading2"><h2 id="Загрузочные_носители_UEFI">
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D1.8B.D0.B5_.D0.BD.D0.BE.D1.81.D0.B8.D1.82.D0.B5.D0.BB.D0.B8_UEFI"></span>Загрузочные носители UEFI</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Создание_загрузочного_UEFI_USB_из_ISO">
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D0.BE.D0.B3.D0.BE_UEFI_USB_.D0.B8.D0.B7_ISO"></span>Создание загрузочного UEFI USB из ISO</h3></div>
<p>Смотрите <a href="../ru/USB_flash_installation_medium.html#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%BE%D0%B3%D0%BE_USB_%D0%B4%D0%BB%D1%8F_BIOS_%D0%B8_UEFI" class="mw-redirect" title="Установочный образ на USB-накопителе">Установочный образ на USB-накопителе#Создание загрузочного USB для BIOS и UEFI</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Удаление_поддержки_UEFI_с_оптического_носителя">
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B8_UEFI_.D1.81_.D0.BE.D0.BF.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B3.D0.BE_.D0.BD.D0.BE.D1.81.D0.B8.D1.82.D0.B5.D0.BB.D1.8F"></span>Удаление поддержки UEFI с оптического носителя</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> 
<ul>
<li>Этот раздел описывает удаление поддержки загрузки UEFI <b>только с CD/DVD</b> (загрузка с оптического носителя через EL Torito), но не с USB-накопителя.</li>
<li>Чтобы скрыть оборудование UEFI на USB-накопителе, используйте редактор разделов после копирования ISO на флэш-накопитель. Удалите раздел типа <code>EF</code>. <b>Не</b> принимайте предложение сконвертировать таблицу разделов в GPT.</li>
</ul>
</div>
<p>Большинство 32-битных компьютеров Mac с EFI и некоторые 64-битные компьютеры Mac с EFI отказываются загружаться с загрузочного CD/DVD с UEFI(X64)+BIOS. Если вы хотите продолжить установку с оптического носителя, возможно, придётся сначала удалить поддержку UEFI.
</p>
<p>Распакуйте ISO, пропуская каталоги, специфичные для UEFI:
</p>
<pre>$ mkdir extracted_iso
$ bsdtar -x --exclude=EFI/ --exclude=loader/ -f archlinux-<i>версия</i>-x86_64.iso -C extracted_iso
</pre>
<p>Затем пересоберите ISO, исключив поддержку загрузки оптических носителей UEFI, используя <span class="plainlinks archwiki-template-man" title="$ man 1 xorriso"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xorriso.1">xorriso(1)</a></span> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libisoburn">libisoburn</a></span>. Обязательно установите правильную метку тома, например <code>ARCH_202103</code>; её можно получить с помощью <span class="plainlinks archwiki-template-man" title="$ man 1 file"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/file.1">file(1)</a></span> на исходном ISO.
</p>
<pre>$ xorriso -as mkisofs \
    -iso-level 3 \
    -full-iso9660-filenames \
    -joliet \
    -joliet-long \
    -rational-rock \
    -volid "ARCH_<i>ГГГГММ</i>" \
    -appid "Arch Linux Live/Rescue CD" \
    -publisher "Arch Linux &lt;<a rel="nofollow" class="external free" href="https://archlinux.org">https://archlinux.org</a>&gt;" \
    -preparer "prepared by $USER" \
    -eltorito-boot syslinux/isolinux.bin \
    -eltorito-catalog syslinux/boot.cat \
    -no-emul-boot -boot-load-size 4 -boot-info-table \
    -isohybrid-mbr "extracted_iso/syslinux/isohdpfx.bin" \
    -output archlinux-<i>версия</i>-x86_64-noUEFI.iso extracted_iso/</pre>
<p>Запишите <code>archlinux-<i>версия</i>-x86_64-noUEFI.iso</code> на оптический носитель, и установка с него должна пройти нормально.
</p>
<div class="mw-heading mw-heading2"><h2 id="Тестирование_UEFI_на_системах_без_его_поддержки">
<span id=".D0.A2.D0.B5.D1.81.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_UEFI_.D0.BD.D0.B0_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B0.D1.85_.D0.B1.D0.B5.D0.B7_.D0.B5.D0.B3.D0.BE_.D0.BF.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B8"></span>Тестирование UEFI на системах без его поддержки</h2></div>
<div class="mw-heading mw-heading3"><h3 id="OVMF_для_виртуальных_машин">
<span id="OVMF_.D0.B4.D0.BB.D1.8F_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BC.D0.B0.D1.88.D0.B8.D0.BD"></span>OVMF для виртуальных машин</h3></div>
<p><a rel="nofollow" class="external text" href="https://github.com/tianocore/tianocore.github.io/wiki/OVMF">OVMF</a> — это проект TianoCore для поддержки UEFI в виртуальных машинах. OVMF содержит образец прошивки UEFI и отдельное энергонезависимое хранилище переменных для <a href="../en/QEMU.html" class="mw-redirect" title="QEMU (Русский)">QEMU</a>.
</p>
<p>Его можно <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установить">установить</a> с помощью пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=edk2-ovmf">edk2-ovmf</a></span>.
</p>
<p><a rel="nofollow" class="external text" href="https://www.linux-kvm.org/downloads/lersek/ovmf-whitepaper-c770f8c.txt">Рекомендуется</a> сделать локальную копию хранилища энергонезависимых переменных для вашей виртуальной машины:
</p>
<pre>$ cp /usr/share/edk2-ovmf/x64/OVMF_VARS.fd my_uefi_vars.fd
</pre>
<p>Чтобы использовать прошивку OVMF и это хранилище переменных, используйте следующие опции QEMU:
</p>
<pre>-drive if=pflash,format=raw,readonly,file=/usr/share/edk2-ovmf/x64/OVMF_CODE.fd \
-drive if=pflash,format=raw,file=my_uefi_vars.fd
</pre>
<p>Например:
</p>
<pre>$ qemu-system-x86_64 -enable-kvm -m 1G -drive if=pflash,format=raw,readonly,file=/usr/share/edk2-ovmf/x64/OVMF_CODE.fd -drive if=pflash,format=raw,file=my_uefi_vars.fd …
</pre>
<div class="mw-heading mw-heading3"><h3 id="DUET_для_BIOS-систем">
<span id="DUET_.D0.B4.D0.BB.D1.8F_BIOS-.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC"></span>DUET для BIOS-систем</h3></div>
<p>DUET был проектом TianoCore, который позволял сделать chainloading полного окружения UEFI из системы BIOS, способом, аналогичным загрузке ОС BIOS. Этот метод подробно <a rel="nofollow" class="external text" href="https://www.insanelymac.com/forum/topic/186440-linux-and-windows-uefi-boot-using-tianocore-duet-firmware/">обсуждается</a>. Собранные образы DUET можно загрузить из одного из <a rel="nofollow" class="external text" href="https://gitlab.com/tianocore_uefi_duet_builds/tianocore_uefi_duet_installer">репозиториев</a><sup title="Статус последней проверки: 404 Page Not Found">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-04-07 ⓘ]</sup>. Смотрите также <a rel="nofollow" class="external text" href="https://gitlab.com/tianocore_uefi_duet_builds/tianocore_uefi_duet_installer/blob/master/Migle_BootDuet_INSTALL.txt">конкретные инструкции по настройке DUET</a><sup title="Статус последней проверки: 404 Page Not Found">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-04-07 ⓘ]</sup>. Однако по состоянию на ноябрь 2018 года код DUET был удалён из git-репозитория TianoCore.
</p>
<p>Вы также можете попробовать <a href="../en/Clover.html" title="Clover">Clover</a>, который предоставляет модифицированные образы DUET, которые могут содержать некоторые специфические для системы исправления и чаще обновляются по сравнению с репозиториями gitlab.
</p>
<div class="mw-heading mw-heading2"><h2 id="Решение_проблем">
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span>Решение проблем</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Загрузка_в_Arch_Linux_после_застревания_в_Windows">
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.B2_Arch_Linux_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.B7.D0.B0.D1.81.D1.82.D1.80.D0.B5.D0.B2.D0.B0.D0.BD.D0.B8.D1.8F_.D0.B2_Windows"></span>Загрузка в Arch Linux после застревания в Windows</h3></div>
<p>Если вы застряли в Windows, то для возвращения в Arch Linux зайдите в расширенные параметры запуска в Windows с помощью команды Windows PowerShell <code>shutdown /r /o</code> или через <i>Параметры &gt; Обновление и безопасность &gt; Восстановление &gt; Расширенные параметры запуска</i> и выберите <i>Перезагрузить сейчас</i>. Когда вы достигнете меню выбора действия, выберите <i>Использовать устройство</i>, которое фактически содержит ваши варианты загрузки UEFI (не ограничивается USB или CD, но может также загружать операционную систему на жёстком диске), и выберите "Arch Linux".
</p>
<div class="mw-heading mw-heading3"><h3 id="Открытие_настроек_прошивки_без_функциональных_клавиш">
<span id=".D0.9E.D1.82.D0.BA.D1.80.D1.8B.D1.82.D0.B8.D0.B5_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA_.D0.BF.D1.80.D0.BE.D1.88.D0.B8.D0.B2.D0.BA.D0.B8_.D0.B1.D0.B5.D0.B7_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.BE.D0.BD.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88"></span>Открытие настроек прошивки без функциональных клавиш</h3></div>
<p>На некоторых ноутбуках, например <a href="../en/Lenovo_XiaoXin_15are_2020.html" title="Lenovo XiaoXin 15are 2020">Lenovo XiaoXin 15are 2020</a>, использование клавиш вроде <code>F2</code> или <code>F12</code> ничего не даёт. Возможно, это можно исправить, вернув ноутбуки OEM-производителю для восстановления информации на материнской плате, но иногда это невозможно или нежелательно. Однако есть и другие способы войти в настройки прошивки:
</p>
<ul>
<li>Через <a href="../ru/Systemd.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC" title="Systemd (Русский)">systemctl</a>: команда <pre>$ systemctl reboot --firmware-setup</pre> перезагрузит компьютер в настройки прошивки.</li>
<li>Через <a href="../ru/GRUB.html" title="GRUB (Русский)">GRUB</a>: нажмите <code>c</code> для открытия командной строки и введите <code>fwsetup</code>.</li>
<li>Через Windows: через расширенные параметры запуска, как описано в разделе <a href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B2_Arch_Linux_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%B7%D0%B0%D1%81%D1%82%D1%80%D0%B5%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F_%D0%B2_Windows">#Загрузка в Arch Linux после застревания в Windows</a>.</li>
</ul>
<div class="mw-heading mw-heading3"><h3 id="Пользовательские_инструменты_не_могут_изменить_переменные_UEFI">
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B8.D0.B5_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B_.D0.BD.D0.B5_.D0.BC.D0.BE.D0.B3.D1.83.D1.82_.D0.B8.D0.B7.D0.BC.D0.B5.D0.BD.D0.B8.D1.82.D1.8C_.D0.BF.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D1.8B.D0.B5_UEFI"></span>Пользовательские инструменты не могут изменить переменные UEFI</h3></div>
<p>Если никакой инструмент пользовательского пространства не может изменить данные переменных UEFI, проверьте существование файлов <code>/sys/firmware/efi/efivars/dump-*</code>. Если они существуют, удалите их, перезагрузитесь и попробуйте ещё раз. Если это не помогло, попробуйте загрузиться с параметром ядра <code>efi_no_storage_paranoia</code>, чтобы отключить проверку пространства хранения переменных UEFI ядра, которая может препятствовать изменению переменных UEFI.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> <code>efi_no_storage_paranoia</code> следует использовать только при необходимости и не оставлять в качестве обычной опции загрузки. Этот параметр отключает защиту, которая была введена, чтобы помочь избежать окирпичивания устройств при переполнении NVRAM. Смотрите <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/34641">FS#34641</a> для подробностей.</div>
<div class="mw-heading mw-heading3"><h3 id="Не_удаётся_создать_загрузочные_записи_с_помощью_efibootmgr">
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D1.81.D0.BE.D0.B7.D0.B4.D0.B0.D1.82.D1.8C_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D1.8B.D0.B5_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B8_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_efibootmgr"></span>Не удаётся создать загрузочные записи с помощью efibootmgr</h3></div>
<p>Некоторые комбинации версий ядра и <i>efibootmgr</i> могут не работать. Это может быть связано с нехваткой свободного места в NVRAM. Проверьте способы, описанные в разделе <a href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B_%D0%BD%D0%B5_%D0%BC%D0%BE%D0%B3%D1%83%D1%82_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_UEFI">#Пользовательские инструменты не могут изменить переменные UEFI</a>.
</p>
<p>Вы также можете попробовать <a href="../en/Downgrading_packages.html" class="mw-redirect" title="Downgrading packages (Русский)">откатить</a> <i>efibootmgr</i> до версии 0.11.0. Она работает с Linux 4.0.6. Смотрите обсуждение <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/34641">FS#34641</a>, в частности <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/34641#comment111365">закрывающий комментарий</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Windows_изменяет_порядок_загрузки">
<span id="Windows_.D0.B8.D0.B7.D0.BC.D0.B5.D0.BD.D1.8F.D0.B5.D1.82_.D0.BF.D0.BE.D1.80.D1.8F.D0.B4.D0.BE.D0.BA_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8"></span>Windows изменяет порядок загрузки</h3></div>
<p>Если при <a href="../en/Dual_boot_with_Windows.html" class="mw-redirect" title="Dual boot with Windows (Русский)">двойной загрузке с Windows</a> материнская плата сразу же загружает Windows вместо выбранного приложения EFI, существует несколько возможных причин и способов их устранения.
</p>
<ul>
<li>Убедитесь, что в настройках Windows отключен быстрый запуск (Fast Startup).</li>
<li>Убедитесь, что <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" class="mw-redirect" title="Secure Boot">Secure Boot</a> в настройках прошивки отключен (если у вас неподписанный загрузчик).</li>
<li>Убедитесь, что Windows Boot Manager не прописывается прошивкой на первое место: например, сравните вывод <a href="#efibootmgr">efibootmgr</a> с тем, что вы видите в настройках UEFI. Некоторые материнские платы автоматически ставят Windows на первое место, если обнаруживают его. В частности, это наблюдалось на ноутбуке Packard Bell.</li>
<li>Если ваша материнская плата загружает путь по умолчанию (<code>\EFI\BOOT\BOOTx64.EFI</code>), этот файл может быть перезаписан загрузчиком Windows. Попробуйте установить правильный путь загрузки, например, с помощью <a href="#efibootmgr">efibootmgr</a>.</li>
<li>Если предыдущие шаги не сработали, можно указать загрузчику Windows запустить другое приложение EFI. В командной строке, запущенной от имени администратора, выполните: <code>bcdedit /set "{bootmgr}" path "\EFI\<i>путь</i>\<i>к</i>\<i>app.efi</i>"</code>
</li>
<li>Как вариант, отключите Windows Boot Manager, выполнив <code>efibootmgr -A -b <i>bootnumber</i></code> от имени root. Замените <code><i>bootnumber</i></code> на фактический номер записи Windows Boot Manager; вы можете узнать его, запустив <code>efibootmgr</code> без опций.</li>
<li>Ещё можно установить скрипт запуска в Windows, который обеспечивает правильную установку порядка загрузки при каждой загрузке Windows.
<ol>
<li>Запустите командную строку от имени администратора. Выполните <code>bcdedit /enum firmware</code> и найдите нужную загрузочную запись.</li>
<li>Скопируйте его идентификатор вместе с фигурными скобками, например <code>{31d0d5f4-22ad-11e5-b30b-806e6f6e6963}</code>
</li>
<li>Создайте bat-файл с командой <code>bcdedit /set "{fwbootmgr}" DEFAULT "<i>{скопированный-идентификатор}</i>"</code>
</li>
<li>Откройте <i>gpedit.msc</i> и в разделе <i>Политика "Локальный компьютер" &gt; Конфигурация компьютера &gt; Конфигурация Windows &gt; Сценарии (запуск/завершение)</i> выберите пункт <i>Автозагрузка</i>.</li>
<li>На вкладке <i>Сценарии</i> нажмите кнопку <i>Добавить</i> и выберите ваш bat-файл.</li>
</ol>
</li>
</ul>
<dl><dd><dl><dd>Примечание: <a rel="nofollow" class="external text" href="https://answers.microsoft.com/en-us/windows/forum/windows_10-performance/how-to-install-gpeditmsc-in-window-10/f5e9c4fa-8d46-444c-acd7-5cabaea9fc71">Windows 10 Home официально не включает в себя gpedit.msc, хотя существуют неподдерживаемые обходные пути для его установки вручную.</a>
</dd></dl></dd></dl>
<ul><li>В качестве альтернативы можно воспользоваться планировщиком заданий:
<ol>
<li>Повторите шаги 1-3, описанные выше, для создания bat-файла.</li>
<li>Запустите <i>taskschd.msc</i> и выберите пункт меню <i>Действие &gt; Создать задачу</i>.</li>
<li>На вкладке <i>Общие</i>:
<dl>
<dd>Введите подходящие <i>Имя</i> и <i>Описание</i>.</dd>
<dd>Убедитесь, что выбранная учётная запись является администратором, а не обычным пользователем.</dd>
<dd>Выберите пункт "<i>Выполнять для всех пользователей</i>".</dd>
<dd>Поставьте галочку "<i>Выполнить с наивысшими правами</i>".</dd>
</dl>
</li>
<li>На вкладке <i>Триггеры</i> создайте триггер <i>При входе в систему</i>.</li>
<li>На вкладке <i>Действия</i> нажмите <i>Создать</i>, затем <i>Обзор</i> и выберите ваш bat-файл, созданный в первом шаге.</li>
<li>На вкладке <i>Условия</i> снимите галочки в секции <i>Питание</i>, чтобы скрипт запускался при работе от батареи (для ноутбуков).</li>
<li>Нажмите <i>OK</i> и по необходимости введите пароль от учётной записи администратора, выбранного в шаге 3.</li>
</ol>
</li></ul>
<div class="mw-heading mw-heading3"><h3 id="Чёрный_экран_при_загрузке_с_USB">
<span id=".D0.A7.D1.91.D1.80.D0.BD.D1.8B.D0.B9_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5_.D1.81_USB"></span>Чёрный экран при загрузке с USB</h3></div>
<p>Возможно, это проблемы с <a href="../ru/Kernel_mode_setting.html" title="Kernel mode setting (Русский)">KMS</a>. Попробуйте <a href="../ru/Kernel_mode_setting.html#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_modesetting" title="Kernel mode setting (Русский)">отключить KMS</a> при загрузке с USB.
</p>
<div class="mw-heading mw-heading3"><h3 id="Загрузчик_UEFI_не_отображается_в_меню_прошивки">
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D1.87.D0.B8.D0.BA_UEFI_.D0.BD.D0.B5_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.B2_.D0.BC.D0.B5.D0.BD.D1.8E_.D0.BF.D1.80.D0.BE.D1.88.D0.B8.D0.B2.D0.BA.D0.B8"></span>Загрузчик UEFI не отображается в меню прошивки</h3></div>
<p>Некоторые прошивки не поддерживают пользовательские загрузочные записи. Вместо этого они загружаются только из жёстко закодированных загрузочных записей.
</p>
<p>Типичное решение — не полагаться на загрузочные записи в NVRAM и установить загрузчик на один из распространённых путей в системном разделе EFI.
</p>
<p>В следующих разделах описаны варианты.
</p>
<div class="mw-heading mw-heading4"><h4 id="Стандартные_пути_загрузки_для_съёмных_носителей">
<span id=".D0.A1.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D1.8B.D0.B5_.D0.BF.D1.83.D1.82.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B8_.D0.B4.D0.BB.D1.8F_.D1.81.D1.8A.D1.91.D0.BC.D0.BD.D1.8B.D1.85_.D0.BD.D0.BE.D1.81.D0.B8.D1.82.D0.B5.D0.BB.D0.B5.D0.B9"></span>Стандартные пути загрузки для съёмных носителей</h4></div>
<p>Спецификация UEFI определяет стандартные пути к файлам EFI для загрузки со съёмных носителей:
</p>
<ul>
<li>
<code><i>esp</i>/EFI/BOOT/BOOTx64.EFI</code> для x86_64 UEFI</li>
<li>
<code><i>esp</i>/EFI/BOOT/BOOTIA.EFI</code> для IA32 UEFI.</li>
</ul>
<p>Хотя спецификация определяет их только для съёмных дисков, большинство прошивок поддерживают их загрузку с любого диска.
</p>
<p>Как установить или перенести загрузчик на нужный путь, смотрите в соответствующей статье об интересующем вас <a href="../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" title="Arch boot process (Русский)">загрузчике</a>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Расположение_загрузчика_Microsoft_Windows">
<span id=".D0.A0.D0.B0.D1.81.D0.BF.D0.BE.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D1.87.D0.B8.D0.BA.D0.B0_Microsoft_Windows"></span>Расположение загрузчика Microsoft Windows</h4></div>
<p>На некоторых материнских платах с UEFI, например, на платах с чипсетом Intel Z77, добавление записей с помощью <code>efibootmgr</code> или <code>bcfg</code> из UEFI Shell не работает, поскольку они не отображаются в списке меню загрузки после добавления в NVRAM.
</p>
<p>Эта проблема вызвана тем, что материнские платы умеют загружать только Microsoft Windows. Чтобы решить эту проблему, необходимо поместить файл <i>.efi</i> в то место, которое использует Windows.
</p>
<p>Скопируйте файл <code>BOOTx64.EFI</code> с установочного носителя Arch Linux (<code>FS0:</code>) в каталог Microsoft вашего раздела <a href="../ru/EFI_system_partition.html" title="EFI system partition (Русский)">ESP</a> на жёстком диске (<code>FS1:</code>). Для этого загрузитесь в UEFI Shell и введите:
</p>
<pre>Shell&gt; mkdir FS1:\EFI\Microsoft
Shell&gt; mkdir FS1:\EFI\Microsoft\Boot
Shell&gt; cp FS0:\EFI\BOOT\BOOTx64.EFI FS1:\EFI\Microsoft\Boot\bootmgfw.efi
</pre>
<p>После перезагрузки все записи, добавленные в NVRAM, должны появиться в меню загрузки.
</p>
<div class="mw-heading mw-heading3"><h3 id="Загрузочные_записи,_созданные_с_помощью_efibootmgr,_не_отображаются_в_UEFI">
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D1.8B.D0.B5_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B8.2C_.D1.81.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D0.B5_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_efibootmgr.2C_.D0.BD.D0.B5_.D0.BE.D1.82.D0.BE.D0.B1.D1.80.D0.B0.D0.B6.D0.B0.D1.8E.D1.82.D1.81.D1.8F_.D0.B2_UEFI"></span>Загрузочные записи, созданные с помощью efibootmgr, не отображаются в UEFI</h3></div>
<p><i>efibootmgr</i> может не обнаружить EDD 3.0 и в результате создать непригодные для использования загрузочные записи в NVRAM. Смотрите <a rel="nofollow" class="external text" href="https://github.com/rhboot/efibootmgr/issues/86">efibootmgr issue 86</a> для подробностей.
</p>
<p>Чтобы обойти эту проблему, при создании загрузочных записей вручную добавьте опцию <code>-e 3</code> к команде <i>efibootmgr</i>. Например:
</p>
<pre># efibootmgr --create --disk /dev/sda --part 1 --loader /EFI/refind/refind_x64.efi --label "rEFInd Boot Manager" --unicode <b>-e 3</b>
</pre>
<p>Для исправления программ установки загрузчиков, таких как <code>grub-install</code> и <code>refind-install</code>, создайте скрипт-обёртку <code>/usr/local/bin/efibootmgr</code> и сделайте его <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/efibootmgr</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

exec /usr/bin/efibootmgr -e 3 "$@"
</pre>
<div class="mw-heading mw-heading3"><h3 id="Загрузочная_запись_UEFI_исчезает_после_удаления_диска,_на_который_она_ссылается">
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D0.B0.D1.8F_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D1.8C_UEFI_.D0.B8.D1.81.D1.87.D0.B5.D0.B7.D0.B0.D0.B5.D1.82_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D1.83.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0.2C_.D0.BD.D0.B0_.D0.BA.D0.BE.D1.82.D0.BE.D1.80.D1.8B.D0.B9_.D0.BE.D0.BD.D0.B0_.D1.81.D1.81.D1.8B.D0.BB.D0.B0.D0.B5.D1.82.D1.81.D1.8F"></span>Загрузочная запись UEFI исчезает после удаления диска, на который она ссылается</h3></div>
<p>Некоторые прошивки удаляют загрузочные записи, относящиеся к дискам, которые недоступны во время загрузки. Это может быть проблемой при частом отсоединении/присоединении дисков или при загрузке со съёмного диска.
</p>
<p>Решением является установка загрузчика в <a href="#%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5_%D0%BF%D1%83%D1%82%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8_%D0%B4%D0%BB%D1%8F_%D1%81%D1%8A%D1%91%D0%BC%D0%BD%D1%8B%D1%85_%D0%BD%D0%BE%D1%81%D0%B8%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">стандартный путь загрузки</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Загрузочные_записи_удаляются_случайным_образом">
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BE.D1.87.D0.BD.D1.8B.D0.B5_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D0.B8_.D1.83.D0.B4.D0.B0.D0.BB.D1.8F.D1.8E.D1.82.D1.81.D1.8F_.D1.81.D0.BB.D1.83.D1.87.D0.B0.D0.B9.D0.BD.D1.8B.D0.BC_.D0.BE.D0.B1.D1.80.D0.B0.D0.B7.D0.BE.D0.BC"></span>Загрузочные записи удаляются случайным образом</h3></div>
<p>Некоторые материнские платы могут удалять загрузочные записи из-за нехватки свободного места в NVRAM вместо того, чтобы выдавать ошибку при их создании. Чтобы этого не происходило, уменьшите количество добавляемых загрузочных записей путём минимизации процесса создания записей, а также уменьшите количество автоматических записей от Compatibility Support Module (CSM), отключив его в настройках UEFI. Смотрите <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1608838#p1608838">BBS#1608838</a>.
</p>
<p>Другой причиной может быть то, что спецификация UEFI позволяет производителям выполнять «обслуживание NVRAM» в процессе загрузки. Эти производители делают это просто: они просто ищут приложения EFI в заранее определённых, жёстко закодированных путях на устройстве. Если таковых не обнаруживается, они делают вывод об отсутствии ОС на устройстве и стирают все загрузочные записи из NVRAM, связанные с ним, поскольку предполагают, что NVRAM содержит повреждённые или устаревшие данные. Если вы не планируете устанавливать Windows, но хотите загрузить ядро Linux непосредственно из прошивки, то одним из возможных обходных путей является создание пустого файла <code><i>esp</i>/EFI/BOOT/BOOTX64.EFI</code>:
</p>
<pre># mkdir -p <i>esp</i>/EFI/BOOT
# touch <i>esp</i>/EFI/BOOT/BOOTX64.EFI
</pre>
<p>После этого восстановите удалённую загрузочную запись. Теперь после перезагрузки материнская плата будет видеть «фальшивую ОС» и не должна стирать другие загрузочные записи из NVRAM. При желании, конечно, можно заменить загрузчик фальшивой ОС на реальное EFI-приложение, если использовать это стандартное имя.
</p>
<div class="mw-heading mw-heading2"><h2 id="Смотрите_также">
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span>Смотрите также</h2></div>
<ul>
<li>
<a href="https://en.wikipedia.org/wiki/ru:UEFI" class="extiw" title="wikipedia:ru:UEFI">UEFI</a> (Википедия)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.uefi.org/home/">UEFI Forum</a> — содержит официальные <a rel="nofollow" class="external text" href="https://uefi.org/specifications">спецификации UEFI</a> — таблица разделов GUID является частью спецификации UEFI</li>
<li><a rel="nofollow" class="external text" href="https://www.happyassassin.net/2014/01/25/uefi-boot-how-does-that-actually-work-then/">UEFI boot: how does that actually work, then? - A blog post by AdamW</a></li>
<li>
<a rel="nofollow" class="external text" href="https://docs.kernel.org/arch/x86/x86_64/uefi.html">x86_64 UEFI</a> — документация ядра</li>
<li><a rel="nofollow" class="external text" href="https://www.intel.com/content/www/us/en/architecture-and-technology/unified-extensible-firmware-interface/efi-homepage-general-technology.html">Intel's page on EFI</a></li>
<li>
<a rel="nofollow" class="external text" href="https://firmware.intel.com/">Intel Architecture Firmware Resource Center</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-07-30 ⓘ]</sup>
</li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20191230095118/https://firmware.intel.com/blog/linux-efi-boot-stub">Matt Fleming - The Linux EFI Boot Stub</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20190319175019/https://firmware.intel.com/blog/accessing-uefi-variables-linux">Matt Fleming - Accessing UEFI Variables from Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://www.rodsbooks.com/linux-uefi/">Rod Smith - Linux on UEFI: A Quick Installation Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://lore.kernel.org/lkml/20110608192950.GA29235@srcf.ucam.org/">UEFI Boot problems on some newer machines (LKML)</a></li>
<li>
<a rel="nofollow" class="external text" href="https://www.tianocore.org/">Intel's TianoCore Project</a> для прошивки UEFI с открытым исходным кодом, которая включает DuetPkg для прямой загрузки на основе BIOS и OvmfPkg, используемый в QEMU и Oracle VirtualBox</li>
<li><a rel="nofollow" class="external text" href="http://jdebp.info/FGA/efi-boot-process.html">FGA: The EFI boot process</a></li>
<li><a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-and-gpt-faq">Microsoft's Windows and GPT FAQ</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/tianocore_uefi_duet_builds/tianocore_uefi_duet_installer/wikis/Windows_x64_BIOS_to_UEFI">Convert Windows x64 from BIOS-MBR mode to UEFI-GPT mode without Reinstall</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/tianocore_uefi_duet_builds/tianocore_uefi_duet_installer/wikis/Linux_Windows_BIOS_UEFI_boot_USB">Create a Linux BIOS+UEFI and Windows x64 BIOS+UEFI bootable USB drive</a></li>
<li><a rel="nofollow" class="external text" href="https://rodsbooks.com/bios2uefi/">Rod Smith - A BIOS to UEFI Transformation</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20190404074007/https://software.intel.com/en-us/articles/efi-shells-and-scripting/">EFI Shells and Scripting - Intel Documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20190117223426/https://software.intel.com/en-us/articles/uefi-shell/">UEFI Shell  - Intel Documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20130929114218/http://www.hpuxtips.es/?q=node/293">UEFI Shell - bcfg command info</a></li>
<li><a rel="nofollow" class="external text" href="https://lwn.net/Articles/632528/">The bootstrap process on EFI systems</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Boot_process.html" title="Category:Boot process (Русский)">Boot process (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Unified_Extensible_Firmware_Interface_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=837721">https://wiki.archlinux.org/index.php?title=Unified_Extensible_Firmware_Interface_(Русский)&amp;oldid=837721</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 18 June 2025, at 04:48.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Unified Extensible Firmware Interface (Русский)</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
