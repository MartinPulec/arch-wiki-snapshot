<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>udev (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Udev_Русский rootpage-Udev_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Установка</div>
		</a>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-О_правилах_udev" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9E_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0%D1%85_udev">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>О правилах udev</div>
		</a>
		
			<button aria-controls="toc-О_правилах_udev-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle О правилах udev subsection</span>
			</button>
		
		<ul id="toc-О_правилах_udev-sublist" class="vector-toc-list">
			<li id="toc-Пример_правила_udev" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0_udev">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Пример правила udev</div>
			</a>
			
			<ul id="toc-Пример_правила_udev-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Список_атрибутов_устройства" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%B0%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D0%BE%D0%B2_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Список атрибутов устройства</div>
			</a>
			
			<ul id="toc-Список_атрибутов_устройства-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проверка_правил_перед_загрузкой" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%BE%D0%B9">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Проверка правил перед загрузкой</div>
			</a>
			
			<ul id="toc-Проверка_правил_перед_загрузкой-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Загрузка_новых_правил" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%BD%D0%BE%D0%B2%D1%8B%D1%85_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Загрузка новых правил</div>
			</a>
			
			<ul id="toc-Загрузка_новых_правил-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-udisks" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#udisks">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>udisks</div>
		</a>
		
		<ul id="toc-udisks-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Советы и рекомендации</div>
		</a>
		
			<button aria-controls="toc-Советы_и_рекомендации-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Советы и рекомендации subsection</span>
			</button>
		
		<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
			<li id="toc-Монтирование_съёмных_устройств" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D1%8A%D1%91%D0%BC%D0%BD%D1%8B%D1%85_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Монтирование съёмных устройств</div>
			</a>
			
			<ul id="toc-Монтирование_съёмных_устройств-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Доступ_к_программаторам_и_виртуальным_COM-портам" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF_%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%D1%82%D0%BE%D1%80%D0%B0%D0%BC_%D0%B8_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%BC_COM-%D0%BF%D0%BE%D1%80%D1%82%D0%B0%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Доступ к программаторам и виртуальным COM-портам</div>
			</a>
			
			<ul id="toc-Доступ_к_программаторам_и_виртуальным_COM-портам-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Выполнение_команд_при_подключении_VGA-монитора" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_%D0%BF%D1%80%D0%B8_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B8_VGA-%D0%BC%D0%BE%D0%BD%D0%B8%D1%82%D0%BE%D1%80%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Выполнение команд при подключении VGA-монитора</div>
			</a>
			
			<ul id="toc-Выполнение_команд_при_подключении_VGA-монитора-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Определение_новых_накопителей_eSATA" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%BE%D0%B2%D1%8B%D1%85_%D0%BD%D0%B0%D0%BA%D0%BE%D0%BF%D0%B8%D1%82%D0%B5%D0%BB%D0%B5%D0%B9_eSATA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Определение новых накопителей eSATA</div>
			</a>
			
			<ul id="toc-Определение_новых_накопителей_eSATA-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Определение_внутренних_портов_SATA_как_внешних" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B5%D0%BD%D0%BD%D0%B8%D1%85_%D0%BF%D0%BE%D1%80%D1%82%D0%BE%D0%B2_SATA_%D0%BA%D0%B0%D0%BA_%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B8%D1%85">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Определение внутренних портов SATA как внешних</div>
			</a>
			
			<ul id="toc-Определение_внутренних_портов_SATA_как_внешних-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Установка_постоянных_имен_устройств" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D1%8B%D1%85_%D0%B8%D0%BC%D0%B5%D0%BD_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>Установка постоянных имен устройств</div>
			</a>
			
			<ul id="toc-Установка_постоянных_имен_устройств-sublist" class="vector-toc-list">
				<li id="toc-Видеоустройства" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%92%D0%B8%D0%B4%D0%B5%D0%BE%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6.1</span>Видеоустройства</div>
			</a>
			
			<ul id="toc-Видеоустройства-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Принтеры" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6.2</span>Принтеры</div>
			</a>
			
			<ul id="toc-Принтеры-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Определение_диска_по_серийному_номеру" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B8%D1%81%D0%BA%D0%B0_%D0%BF%D0%BE_%D1%81%D0%B5%D1%80%D0%B8%D0%B9%D0%BD%D0%BE%D0%BC%D1%83_%D0%BD%D0%BE%D0%BC%D0%B5%D1%80%D1%83">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7</span>Определение диска по серийному номеру</div>
			</a>
			
			<ul id="toc-Определение_диска_по_серийному_номеру-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Пробуждение_при_активности_USB-устройства" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8_%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D0%BE%D1%81%D1%82%D0%B8_USB-%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8</span>Пробуждение при активности USB-устройства</div>
			</a>
			
			<ul id="toc-Пробуждение_при_активности_USB-устройства-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Генерирование_событий" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%93%D0%B5%D0%BD%D0%B5%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D0%BE%D0%B1%D1%8B%D1%82%D0%B8%D0%B9">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9</span>Генерирование событий</div>
			</a>
			
			<ul id="toc-Генерирование_событий-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Уведомления_на_рабочем_столе" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%B2%D0%B5%D0%B4%D0%BE%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BD%D0%B0_%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%BC_%D1%81%D1%82%D0%BE%D0%BB%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10</span>Уведомления на рабочем столе</div>
			</a>
			
			<ul id="toc-Уведомления_на_рабочем_столе-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Создание_долгосрочных_процессов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D0%BB%D0%B3%D0%BE%D1%81%D1%80%D0%BE%D1%87%D0%BD%D1%8B%D1%85_%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11</span>Создание долгосрочных процессов</div>
			</a>
			
			<ul id="toc-Создание_долгосрочных_процессов-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Решение проблем</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Добавление_модулей_в_черный_список" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9_%D0%B2_%D1%87%D0%B5%D1%80%D0%BD%D1%8B%D0%B9_%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Добавление модулей в черный список</div>
			</a>
			
			<ul id="toc-Добавление_модулей_в_черный_список-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Отладочная_печать" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BB%D0%B0%D0%B4%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D1%8C">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Отладочная печать</div>
			</a>
			
			<ul id="toc-Отладочная_печать-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-udevd_вылетает_при_загрузке" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#udevd_%D0%B2%D1%8B%D0%BB%D0%B5%D1%82%D0%B0%D0%B5%D1%82_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>udevd вылетает при загрузке</div>
			</a>
			
			<ul id="toc-udevd_вылетает_при_загрузке-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Устройство_является_съемным,_однако_не_признается_таковым" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D1%8F%D0%B2%D0%BB%D1%8F%D0%B5%D1%82%D1%81%D1%8F_%D1%81%D1%8A%D0%B5%D0%BC%D0%BD%D1%8B%D0%BC,_%D0%BE%D0%B4%D0%BD%D0%B0%D0%BA%D0%BE_%D0%BD%D0%B5_%D0%BF%D1%80%D0%B8%D0%B7%D0%BD%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D1%82%D0%B0%D0%BA%D0%BE%D0%B2%D1%8B%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Устройство является съемным, однако не признается таковым</div>
			</a>
			
			<ul id="toc-Устройство_является_съемным,_однако_не_признается_таковым-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблемы_с_автоматической_загрузкой_модулей_аудиоустройств" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%BE%D0%B9_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B5%D0%B9_%D0%B0%D1%83%D0%B4%D0%B8%D0%BE%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Проблемы с автоматической загрузкой модулей аудиоустройств</div>
			</a>
			
			<ul id="toc-Проблемы_с_автоматической_загрузкой_модулей_аудиоустройств-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Поддержка_дисководов_IDE" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0_%D0%B4%D0%B8%D1%81%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D0%BE%D0%B2_IDE">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>Поддержка дисководов IDE</div>
			</a>
			
			<ul id="toc-Поддержка_дисководов_IDE-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Оптические_дисководы_имеют_неверный_group_ID" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%BF%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%B4%D0%B8%D1%81%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%8B_%D0%B8%D0%BC%D0%B5%D1%8E%D1%82_%D0%BD%D0%B5%D0%B2%D0%B5%D1%80%D0%BD%D1%8B%D0%B9_group_ID">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.7</span>Оптические дисководы имеют неверный group ID</div>
			</a>
			
			<ul id="toc-Оптические_дисководы_имеют_неверный_group_ID-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Смотрите также</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">udev (Русский)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Udev" title="Udev – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Udev.html" title="Udev – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Udev.html" title="Udev – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Udev" title="Udev – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Udev" title="Udev – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Udisks.html" title="Udisks (Русский)">udisks (Русский)</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Udev.html" title="Udev">udev</a>. Дата последней синхронизации: 11 июля 2021. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Udev&amp;diff=0&amp;oldid=687600">изменения</a>.</div>
<p><i>udev</i> — работающая в пространстве пользователя система, с помощью которой системный администратор может создавать обработчики событий. События, получаемые <i>udev</i>, обычно генерируются ядром Linux в ответ на физические события, происходящие с периферийными устройствами. Например, при обнаружении периферийных устройств или "горячем" подключении <i>udev</i> может выполнить определённые действия, в том числе и вернуть управление ядру, если необходима загрузка модулей или прошивок.
</p>
<p>Подобно предшественникам, утилитам <i>devfsd</i> и <i>hotplug</i>, <i>udev</i> управляет файлами устройств в каталоге <code>/dev</code>, добавляя их, переименовывая и создавая символические ссылки. <i>udev</i> полностью замещает функционал <i>hotplug</i> и <i>hwdetect</i>.
</p>
<p>Обработка событий в <i>udev</i> происходит параллельно, что теоретически  улучшает производительность старых систем. С другой стороны, это может усложнить администрирование. Так, при перезапуске системы порядок загрузки модулей ядра может измениться, а при наличии в машине нескольких блочных устройств могут поменяться названия их файлов. Например, для системы с двумя жёсткими дисками файл <code>/dev/sda</code> после перезагрузки может превратиться в <code>/dev/sdb</code>.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p><i>udev</i> входит в состав <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a> и установлен по умолчанию. Подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-udevd.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-udevd.service.8">systemd-udevd.service(8)</a></span>.
</p>
<p>Существует также отдельный от systemd форк, который можно установить с пакетом <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/eudev/">eudev</a></span><sup><small>AUR</small></sup> или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/eudev-git/">eudev-git</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">ссылка недействительна</a>: package not found]</sup>.
</p>
<h2>
<span id=".D0.9E_.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D0.BB.D0.B0.D1.85_udev"></span><span class="mw-headline" id="О_правилах_udev">О правилах udev</span>
</h2>
<p>Создаваемые системным администратором правила <i>udev</i> хранятся в каталоге <code>/etc/udev/rules.d/</code>. Названия файлов правил должны заканчиваться суффиксом <i>.rules</i>. Правила из пакетов программ при установке помещаются в каталог <code>/usr/lib/udev/rules.d/</code>. Если в каталогах <code>/usr/lib</code> и <code>/etc</code> находятся два файла правил с одинаковыми именами, то файл в <code>/etc</code> будет иметь приоритет.
</p>
<p>Правила <i>udev</i> подробно описаны в руководстве <span class="plainlinks archwiki-template-man" title="$ man 7 udev"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/udev.7">udev(7)</a></span>. Также стоит изучить статью <a rel="nofollow" class="external text" href="https://www.reactivated.net/writing_udev_rules.html">Создание правил udev</a> (англ.) и приведённые в ней практические примеры: <a rel="nofollow" class="external text" href="https://www.reactivated.net/writing_udev_rules.html#example-printer">Создание правил udev - Примеры</a> (англ.).
</p>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80_.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D0.BB.D0.B0_udev"></span><span class="mw-headline" id="Пример_правила_udev">Пример правила udev</span>
</h3>
<p>Ниже приведён пример правила, которое создаёт символическую ссылку <code>/dev/video-cam</code>, когда к компьютеру подключается веб-камера.
</p>
<p>Предположим, мы выяснили, что для подключённой камеры создан файл устройства <code>/dev/video2</code>. Причина, по которой мы создаем это правило, заключается в том, что при следующей загрузке веб-камере может быть присвоено другое имя, например, <code>/dev/video0</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ udevadm info --attribute-walk --path=$(udevadm info --query=path --name=/dev/video2)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Udevadm info starts with the device specified by the devpath and then walks up the chain of parent devices.
It prints for every device found, all possible attributes in the udev rules key format.
A rule to match, can be composed by the attributes of the device and the attributes from one single parent device.

looking at device '/devices/pci0000:00/0000:00:04.1/usb3/3-2/3-2:1.0/video4linux/video2':
  KERNEL=="video2"
  SUBSYSTEM=="video4linux"
   ...
looking at parent device '/devices/pci0000:00/0000:00:04.1/usb3/3-2/3-2:1.0':
  KERNELS=="3-2:1.0"
  SUBSYSTEMS=="usb"
  ...
looking at parent device '/devices/pci0000:00/0000:00:04.1/usb3/3-2':
  KERNELS=="3-2"
  SUBSYSTEMS=="usb"
  ATTRS{idVendor}=="05a9"
  ATTRS{manufacturer}=="OmniVision Technologies, Inc."
  ATTRS{removable}=="unknown"
  ATTRS{idProduct}=="4519"
  ATTRS{bDeviceClass}=="00"
  ATTRS{product}=="USB Camera"
  ...
</pre>
<p>Мы используем параметры веб-камеры <code>KERNEL=="video2"</code> и <code>SUBSYSTEM=="video4linux"</code>, затем мы возьмем идентификаторы производителя и изделия родительского USB-устройства <code>SUBSYSTEMS=="usb"</code>, <code>ATTRS{idVendor}=="05a9"</code> и <code>ATTRS{idProduct}=="4519"</code> для сопоставления:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/83-webcam.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">KERNEL=="video[0-9]*", SUBSYSTEM=="video4linux", SUBSYSTEMS=="usb", ATTRS{idVendor}=="05a9", ATTRS{idProduct}=="4519", SYMLINK+="video-cam"
</pre>
<p>В примере мы создали символическую ссылку, используя параметр <code>SYMLINK+="video-cam"</code>. Мы можем также легко задать владельца (<code>OWNER="john"</code>), группу (<code>GROUP="video"</code>), или установить права доступа к файлу ссылки (<code>MODE="0660"</code>).
</p>
<p>Если вы намереваетесь создать правило, которое делает что-нибудь при удалении устройства, имейте в виду, что атрибуты устройства могут стать недоступны. В этом случае вам необходимо использовать специальный набор <a href="../ru/Environment_variables.html" title="Environment variables (Русский)">переменных окружения</a>. Чтобы отобразить эти переменные, выполните следующую команду при отсоединении устройства:
</p>
<pre>$ udevadm monitor --environment --udev
</pre>
<p>В выводе команды вы увидите значения параметров устройства, например, <code>ID_VENDOR_ID</code> и <code>ID_MODEL_ID</code>, которые соответствуют использованным ранее идентификаторам производителя и изделия. Правило, которое использует переменные окружения устройства, может выглядеть следующим образом:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/83-webcam-removed.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="remove", SUBSYSTEM=="usb", ENV{ID_VENDOR_ID}=="05a9", ENV{ID_MODEL_ID}=="4519", RUN+="''/path/to/your/script''"
</pre>
<h3>
<span id=".D0.A1.D0.BF.D0.B8.D1.81.D0.BE.D0.BA_.D0.B0.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.BE.D0.B2_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0"></span><span class="mw-headline" id="Список_атрибутов_устройства">Список атрибутов устройства</span>
</h3>
<p>Чтобы вывести все атрибуты устройства, которые вы можете использовать в написании правил <i>udev</i>, выполните:
</p>
<pre>$ udevadm info --attribute-walk --name=<i>имя_устройства</i>
</pre>
<p>Замените <code><i>имя_устройства</i></code> текущим именем файла устройства, например, <code>/dev/sda</code> или <code>/dev/ttyUSB0</code>.
</p>
<p>Если вы не знаете имя файла устройства, вы можете также вывести все атрибуты по конкретному системному пути:
</p>
<pre>$ udevadm info --attribute-walk --path=/sys/class/backlight/acpi_video0
</pre>
<p>Чтобы сузить поле поиска, определите класс устройства и выполните:
</p>
<pre>$ ls /dev/<i>класс</i>/by-id
</pre>
<p>Найденную символическую ссылку (или файл, на который она указывает) можно использовать в параметре <code>--name</code>:
</p>
<pre>$ udevadm info --attribute-walk --name=/dev/input/by-id/usb-foostan_Corne-event-kbd
</pre>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D0.BB_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.BE.D0.B9"></span><span class="mw-headline" id="Проверка_правил_перед_загрузкой">Проверка правил перед загрузкой</span>
</h3>
<p>Используйте команду:
</p>
<pre># udevadm test $(udevadm info -q path -n <i>имя_устройства</i>) 2&gt;&amp;1
</pre>
<p>Вы можете также указать прямой системный путь до устройства:
</p>
<pre># udevadm test /sys/class/backlight/acpi_video0/
</pre>
<h3>
<span id=".D0.97.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.BD.D0.BE.D0.B2.D1.8B.D1.85_.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D0.BB"></span><span class="mw-headline" id="Загрузка_новых_правил">Загрузка новых правил</span>
</h3>
<p><i>udev</i> способен определять наличие изменений в файлах правил автоматически, поэтому изменения сразу вступают в силу без необходимости перезапуска <i>udev</i>. Однако, новые правила не будут применены сразу к уже подключенным устройствам. Устройства с возможностью горячей замены, например, устройства USB, могут быть просто переподключены для применения к ним новых правил. Также вы можете перезагрузить модули ядра <code>ohci-hcd</code> и <code>ehci-hcd</code>, что автоматически приведет к перезагрузке всех драйверов для каждого USB-устройства.
</p>
<p>Если правила не перезагружаются автоматически, выполните:
</p>
<pre># udevadm control --reload-rules
</pre>
<p>Чтобы вручную заставить <i>udev</i> применить ваши правила, выполните:
</p>
<pre># udevadm trigger
</pre>
<h2><span class="mw-headline" id="udisks">udisks</span></h2>
<p>См. <a href="../ru/Udisks.html" title="Udisks (Русский)">udisks</a>.
</p>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Советы_и_рекомендации">Советы и рекомендации</span>
</h2>
<h3>
<span id=".D0.9C.D0.BE.D0.BD.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D1.8A.D1.91.D0.BC.D0.BD.D1.8B.D1.85_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2"></span><span class="mw-headline" id="Монтирование_съёмных_устройств">Монтирование съёмных устройств</span>
</h3>
<p>Монтировать съёмные устройства с помощью команды <code>mount</code> в правиле <i>udev</i> не стоит по двум причинам: (1) systemd по умолчанию запускает <code>systemd-udevd.service</code> с отдельным "пространством имён монтирования" (см. <span class="plainlinks archwiki-template-man" title="$ man 7 namespaces"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/namespaces.7">namespaces(7)</a></span>), что означает, что данное устройство не будет видно из остальной системы. (2) Чтобы этого не происходило, можно закомментировать параметры <code>PrivateMounts</code> и <code>MountFlags</code> в файле службы, но тогда проявится другая проблема: запускаемые udev процессы система будет убивать по истечении нескольких секунд. В случае файловых систем FUSE, вроде <a href="../en/NTFS.html" title="NTFS">NTFS</a>, "монтирование" запустит в пространстве пользователя процесс для работы с файловой системой; затем процесс будет уничтожен и при попытке доступа к ФС вы получите ошибку <code>Transport endpoint not connected</code>.
</p>
<p>Есть несколько возможных решений:
</p>
<ul>
<li>Из правила udev запускается пользовательская служба systemd; служба запустит сценарий, который, в свою очередь, может породить любое количество долгосрочных процессов (вроде FUSE). В качестве примера можно использовать утилиту <a rel="nofollow" class="external text" href="https://github.com/Ferk/udev-media-automount">udev-media-automount</a>, разработанную для быстрого и надёжного автоматического монтирования устройств. Другой вариант той же идеи предложен в <a rel="nofollow" class="external text" href="http://jasonwryan.com/blog/2014/01/20/udev/">этом сообщении</a>.</li>
<li>В правилах udev вместо команды <code>mount</code> можно использовать <code>systemd-mount</code>, как <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/11982#issuecomment-472529566">рекомендуют разработчики systemd</a>. Пример монтирования USB-дисков в каталоге <code>/media</code>:</li>
</ul>
<dl>
<dd><pre>ACTION=="add", SUBSYSTEMS=="usb", SUBSYSTEM=="block", ENV{ID_FS_USAGE}=="filesystem", RUN{program}+="/usr/bin/systemd-mount --no-block --automount=yes --collect $devnode /media"
</pre></dd>
<dd>Тем не менее, такой подход считается медленным и ненадёжным.</dd>
</dl>
<ul><li>Программы вроде <a href="../ru/Udisks.html" title="Udisks (Русский)">udisks</a> или udiskie. Мощные утилиты, хоть и с довольно сложной настройкой. Нужно учитывать, что они работают для одного пользовательского сеанса: доступ к некоторым файловым системам предоставляется только тому пользователю, сеанс которого активен в данный момент.</li></ul>
<h3>
<span id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.BA_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.BC.D0.B0.D1.82.D0.BE.D1.80.D0.B0.D0.BC_.D0.B8_.D0.B2.D0.B8.D1.80.D1.82.D1.83.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D0.BC_COM-.D0.BF.D0.BE.D1.80.D1.82.D0.B0.D0.BC"></span><span class="mw-headline" id="Доступ_к_программаторам_и_виртуальным_COM-портам">Доступ к программаторам и виртуальным COM-портам</span>
</h3>
<p>Следующий набор правил даст возможность пользователям, входящим в группу <code>users</code>, получить доступ к USB-программаторам микроконтроллеров AVR <a rel="nofollow" class="external text" href="https://learn.adafruit.com/usbtinyisp">USBtinyISP</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-usbtinyisp.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEMS=="usb", ATTRS{idVendor}=="1781", ATTRS{idProduct}=="0c9f", GROUP="users", MODE="0660"
SUBSYSTEMS=="usb", ATTRS{idVendor}=="16c0", ATTRS{idProduct}=="0479", GROUP="users", MODE="0660"</pre>
<p>Идентификаторы производителя и изделия для других устройств можно узнать с помощью утилиты <i>lsusb</i>.
</p>
<h3>
<span id=".D0.92.D1.8B.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4_.D0.BF.D1.80.D0.B8_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B8_VGA-.D0.BC.D0.BE.D0.BD.D0.B8.D1.82.D0.BE.D1.80.D0.B0"></span><span class="mw-headline" id="Выполнение_команд_при_подключении_VGA-монитора">Выполнение команд при подключении VGA-монитора</span>
</h3>
<p>Создайте правило <code>/etc/udev/rules.d/95-monitor-hotplug.rules</code> со следующим содержимым, чтобы запускать <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arandr">arandr</a></span> при каждом подключении VGA-монитора:
</p>
<pre>KERNEL=="card0", SUBSYSTEM=="drm", ENV{DISPLAY}=":0", ENV{XAUTHORITY}="/home/<i>username</i>/.Xauthority", RUN+="/usr/bin/arandr"
</pre>
<p>Некоторые экранные менеджеры размещают файл <code>.Xauthority</code> вне домашнего каталога пользователя. В этом случае параметр <code>ENV{XAUTHORITY}</code> необходимо соответствующим образом изменить. Например, значение переменной <code>XAUTHORITY</code> для <a href="../en/GDM.html" title="GDM">GNOME Display Manager</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ printenv XAUTHORITY</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/run/user/1000/gdm/Xauthority</pre>
<h3>
<span id=".D0.9E.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BD.D0.BE.D0.B2.D1.8B.D1.85_.D0.BD.D0.B0.D0.BA.D0.BE.D0.BF.D0.B8.D1.82.D0.B5.D0.BB.D0.B5.D0.B9_eSATA"></span><span class="mw-headline" id="Определение_новых_накопителей_eSATA">Определение новых накопителей eSATA</span>
</h3>
<p>Если ваш накопитель eSATA не был определен системой при подключении, вы можете перезагрузить систему, не отключая кабель устройства, либо, если перезагрузка нежелательна, выполнить:
</p>
<pre># echo 0 0 0 | tee /sys/class/scsi_host/host*/scan
</pre>
<p>Еще один вариант заключается в использовании утилиты <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/scsiadd/">scsiadd</a></span><sup><small>AUR</small></sup> из <a href="../ru/Arch_User_Repository.html" title="Arch User Repository (Русский)">AUR</a>:
</p>
<pre># scsiadd -s
</pre>
<p>Накопитель должен появиться в <code>/dev</code>. Если это не так, попробуйте выполнить:
</p>
<pre># udevadm monitor
</pre>
<p>до и после вышеприведенных команд и посмотреть, происходит ли что-нибудь.
</p>
<h3>
<span id=".D0.9E.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B2.D0.BD.D1.83.D1.82.D1.80.D0.B5.D0.BD.D0.BD.D0.B8.D1.85_.D0.BF.D0.BE.D1.80.D1.82.D0.BE.D0.B2_SATA_.D0.BA.D0.B0.D0.BA_.D0.B2.D0.BD.D0.B5.D1.88.D0.BD.D0.B8.D1.85"></span><span class="mw-headline" id="Определение_внутренних_портов_SATA_как_внешних">Определение внутренних портов SATA как внешних</span>
</h3>
<p>Если вы подключили eSATA-адаптер, система все еще будет распоздавать его как внутренний SATA-накопитель. <a href="../ru/GNOME.html" title="GNOME (Русский)">GNOME</a> и <a href="../ru/KDE.html" title="KDE (Русский)">KDE</a> будут постоянно запрашивать пароль администратора. Следующее правило помечает все указанные SATA-порты как порты eSATA, благодаря чему обычные пользователи смогут подключать свой накопитель eSATA к этому порту как USB-накопитель без запроса пароля администратора:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/10-esata.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">DEVPATH=="/devices/pci0000:00/0000:00:1f.2/host4/*", ENV{UDISKS_SYSTEM}="0"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Узнать правильное значение параметра <code>DEVPATH</code> вы можете с помощью следующих команд (вместо <code>/dev/sdb</code> укажите ваше устройство):
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ udevadm info --query=path /dev/sdb</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/devices/pci0000:00/0000:00:1f.2/host4/target4:0:0/4:0:0:0/block/sdb
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ find /sys/devices/ -name sdb</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/sys/devices/pci0000:00/0000:00:1f.2/host4/target4:0:0/4:0:0:0/block/sdb
</pre>
</div>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BF.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D1.8B.D1.85_.D0.B8.D0.BC.D0.B5.D0.BD_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2"></span><span class="mw-headline" id="Установка_постоянных_имен_устройств">Установка постоянных имен устройств</span>
</h3>
<p>Из-за асинхронного способа загрузки модулей, они инициализируются в разном порядке от загрузки к загрузке. Это приводит к случайному переименованию устройств при каждом запуске. Чтобы задать постоянные имена вашим устройствам, можно создать специальное правило <i>udev</i>. Смотрите также статьи <a href="../ru/Persistent_block_device_naming.html" class="mw-redirect" title="Постоянные имена для блочных устройств">Постоянные имена для блочных устройств</a> и <a href="../ru/Network_configuration.html#%D0%A1%D0%BC%D0%B5%D0%BD%D0%B0_%D0%B8%D0%BC%D0%B5%D0%BD%D0%B8_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0" class="mw-redirect" title="Настройка сети">Настройка сети#Смена имени интерфейса</a>.
</p>
<h4>
<span id=".D0.92.D0.B8.D0.B4.D0.B5.D0.BE.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0"></span><span class="mw-headline" id="Видеоустройства">Видеоустройства</span>
</h4>
<p>Процедура установки веб-камеры описана в статье <a href="../en/Webcam_setup.html" title="Webcam setup">Webcam setup</a>.
</p>
<p>При загрузке веб-камерам присваиваются случайные имена вида <code>/dev/video*</code>. Рекомендуемое решение состоит в создании символических ссылок с использованием правила <i>udev</i> (подобно правилу в разделе <a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0_udev">#Пример правила udev</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/83-webcam.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">KERNEL=="video[0-9]*", SUBSYSTEM=="video4linux", SUBSYSTEMS=="usb", ATTRS{idVendor}=="05a9", ATTRS{idProduct}=="4519", SYMLINK+="video-cam1"
KERNEL=="video[0-9]*", SUBSYSTEM=="video4linux", SUBSYSTEMS=="usb", ATTRS{idVendor}=="046d", ATTRS{idProduct}=="08f6", SYMLINK+="video-cam2"
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Использование имен, отличных от <code>/dev/video*</code>, может помешать загрузке <code>v4l1compat.so</code>, и, возможно, <code>v4l2convert.so</code>.
</div>
<h4>
<span id=".D0.9F.D1.80.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.8B"></span><span class="mw-headline" id="Принтеры">Принтеры</span>
</h4>
<p>Если у вас несколько принтеров, им будут случайным образом присвоены имена вида <code>/dev/lp[0-9]</code>, что, например, может помешать серверу <a href="../ru/CUPS.html" title="CUPS (Русский)">CUPS</a> правильно настроить устройства. Вы можете создать следующее правило, которое будет создавать постоянные символические ссылки в каталогах <code>/dev/lp/by-id</code> и <code>/dev/lp/by-path</code> подобно схеме, приведенной в статье <a href="../ru/Persistent_block_device_naming.html" class="mw-redirect" title="Постоянные имена для блочных устройств">Постоянные имена для блочных устройств</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/60-persistent-printer.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="remove", GOTO="persistent_printer_end"
# Это не должно понадобиться
#KERNEL!="lp*", GOTO="persistent_printer_end"

SUBSYSTEMS=="usb", IMPORT{builtin}="usb_id"
ENV{ID_TYPE}!="printer", GOTO="persistent_printer_end"

ENV{ID_SERIAL}=="?*", SYMLINK+="lp/by-id/$env{ID_BUS}-$env{ID_SERIAL}"

IMPORT{builtin}="path_id"
ENV{ID_PATH}=="?*", SYMLINK+="lp/by-path/$env{ID_PATH}"

LABEL="persistent_printer_end"
</pre>
<h3>
<span id=".D0.9E.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B8.D1.81.D0.BA.D0.B0_.D0.BF.D0.BE_.D1.81.D0.B5.D1.80.D0.B8.D0.B9.D0.BD.D0.BE.D0.BC.D1.83_.D0.BD.D0.BE.D0.BC.D0.B5.D1.80.D1.83"></span><span class="mw-headline" id="Определение_диска_по_серийному_номеру">Определение диска по серийному номеру</span>
</h3>
<p>Действия с дисковыми устройствами <code>/dev/sd<i>X</i></code> можно выполнять на основании серийного номера <code>ID_SERIAL_SHORT</code>, который можно узнать из вывода команды <code>udevadm info /dev/sd<i>X</i></code>. Примерное правило udev для этого случая приведено ниже. В параметре <code>RUN</code> сценарию передаётся имя устройства; это сделано исключительно в иллюстративных целях:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/69-disk.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", KERNEL=="sd[a-z]", ENV{ID_SERIAL_SHORT}=="<i>СЕРИЙНЫЙ_НОМЕР</i>", RUN+="<i>/путь/к/файлу/сценария</i> /dev/%k"</pre>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D1.83.D0.B6.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.B8_.D0.B0.D0.BA.D1.82.D0.B8.D0.B2.D0.BD.D0.BE.D1.81.D1.82.D0.B8_USB-.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0"></span><span class="mw-headline" id="Пробуждение_при_активности_USB-устройства">Пробуждение при активности USB-устройства</span>
</h3>
<p>С помощью правила udev можно настроить систему выходить из режима сна при активности USB-устройств, например, мыши или клавиатуры.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> По умолчанию в контроллере USB функциональность пробуждения включена. Проверить это можно командой <code>cat /proc/acpi/wakeup</code>. В этом случае правило ниже оказывается ненужным, но его всё же можно использовать в качестве образца для каких-либо других действий, например — для отключения той же wakeup-функциональности.
</div>
<p>Первым делом определите идентификаторы производителя и изделия для вашего устройства:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb | grep Logitech</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Bus 007 Device 002: ID <b>046d</b>:<b>c52b</b> Logitech, Inc. Unifying Receiver
</pre>
<p>Затем найдите, куда данное устройство подключено:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ grep <i>c52b</i> /sys/bus/usb/devices/*/idProduct</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/sys/bus/usb/devices/<b>1-1.1.1.4/</b>idProduct:c52b
</pre>
<p>Наконец, создайте правило, которое при подключении будет изменять атрибут <code>power/wakeup</code> как для устройства, так и для USB-контроллера, к которому оно подключено:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-wake-on-device.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="usb", DRIVERS=="usb", ATTRS{idVendor}=="<b>046d</b>", ATTRS{idProduct}=="<b>c52b</b>", ATTR{power/wakeup}="enabled", ATTR{driver/<b>1-1.1.1.4</b>/power/wakeup}="enabled"</pre>
<h3>
<span id=".D0.93.D0.B5.D0.BD.D0.B5.D1.80.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D0.BE.D0.B1.D1.8B.D1.82.D0.B8.D0.B9"></span><span class="mw-headline" id="Генерирование_событий">Генерирование событий</span>
</h3>
<p>Может быть полезно сгенерировать различные события udev. Например, вы хотите симулировать отключение USB-устройства на удалённой машине. В таких случаях, используйте <code>udevadm trigger</code>:
</p>
<pre># udevadm trigger --verbose --type=subsystems --action=remove --subsystem-match=usb --attr-match="idVendor=abcd"
</pre>
<p>Эта команда симулирует отключение всех USB-устройств с указанным идентификатором поставщика <code>idVendor</code>.
</p>
<h3>
<span id=".D0.A3.D0.B2.D0.B5.D0.B4.D0.BE.D0.BC.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BD.D0.B0_.D1.80.D0.B0.D0.B1.D0.BE.D1.87.D0.B5.D0.BC_.D1.81.D1.82.D0.BE.D0.BB.D0.B5"></span><span class="mw-headline" id="Уведомления_на_рабочем_столе">Уведомления на рабочем столе</span>
</h3>
<p>Заставить правильно работать из правила <i>udev</i> сценарий, содержащий команду <code>notify-send</code>, может оказаться <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=212364">непростой задачей</a>, потому что уведомления не будут выводиться на рабочий стол. Ниже показано, какие файлы, команды и переменные окружения необходимо задйствовать, чтобы <code>notify-send</code> работала как положено.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> В примерах ниже некоторые значения указаны явно. Когда вы будете писать свои правила и сценарии, их лучше делать портируемыми — например, использовать переменную $USER вместо явного указания имени пользователя и т.п.
</div>
<p>1) Следующее правило <i>udev</i> запускает сценарий, создающий графическое и звуковое уведомление, когда яркость экрана меняется в зависимости от способа питания ноутбука:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-backlight_notification.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Правило на случай переключения на работу от батареи
ACTION=="change", SUBSYSTEM=="power_supply", ATTR{type}=="Mains", ATTR{online}=="0", ENV{DISPLAY}=":0", ENV{XAUTHORITY}="/home/USERNAME/.Xauthority" RUN+="/usr/bin/su USERNAME_TO_RUN_SCRIPT_AS -c /usr/local/bin/brightness_notification.sh"
# Правило на случай переключения на работу от кабеля
ACTION=="change", SUBSYSTEM=="power_supply", ATTR{type}=="Mains", ATTR{online}=="1", ENV{DISPLAY}=":0", ENV{XAUTHORITY}="/home/USERNAME/.Xauthority" RUN+="/usr/bin/su USERNAME_TO_RUN_SCRIPT_AS -c /usr/local/bin/brightness_notification.sh"
</pre>
<ul>
<li>
<code>USERNAME_TO_RUN_SCRIPT_AS</code> и <code>USERNAME</code> необходимо заменить на имя пользователя, который запустил графический сеанс;</li>
<li>сценарий должен запускаться командой <code>/usr/bin/su</code>, чтобы его владельцем считался не root, а пользователь, который запустил графический сеанс и для которого будут выводиться уведомления.</li>
</ul>
<p>2) Содержимое сценария, который запускается правилом <i>udev</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/brightness_notification.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/usr/bin/env bash

export XAUTHORITY=/home/USERNAME_TO_RUN_SCRIPT_AS/.Xauthority
export DISPLAY=:0
export DBUS_SESSION_BUS_ADDRESS="unix:path=/run/user/UID_OF_USER_TO_RUN_SCRIPT_AS/bus"

/usr/bin/sudo -u USERNAME_TO_RUN_SCRIPT_AS /usr/bin/paplay --server=/run/user/UID_OF_USER_TO_RUN_SCRIPT_AS/pulse/native /home/USERNAME/.i3/sounds/Click1.wav &gt; /dev/null 2&gt;&amp;1

/usr/bin/notify-send --icon=/usr/share/icons/gnome/256x256/status/battery-full-charging.png 'Changing Power States' --expire-time=4000
</pre>
<ul>
<li>
<code>USERNAME_TO_RUN_SCRIPT_AS</code>, <code>UID_OF_USER_TO_RUN_SCRIPT_AS</code> и <code>USERNAME</code> необходимо заменить на имя и идентификатор пользователя, запустившего графический сеанс;</li>
<li>команда <code>/usr/bin/sudo</code> воспроизводит звуковое уведомление с помощью pulseaudio;</li>
<li>для пользователя, запустившего графический сеанс, в котором будут отображаться уведомления, необходимо определить и экспортировать три переменные окружения (<code>XAUTHORITY</code>, <code>DISPLAY</code> и <code>DBUS_SESSION_BUS_ADDRESS</code>).</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> С помощью <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xpub/">xpub</a></span><sup><small>AUR</small></sup> можно собрать переменные графического окружения пользователя и экспортировать их в правило <i>udev</i> ключом <code>IMPORT</code>.
</div>
<p>3) Загрузите/перезагрузите новое правило <i>udev</i> и проверьте, как оно работает, выдернув или подключив кабель питания ноутбука.
</p>
<h3>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D0.BB.D0.B3.D0.BE.D1.81.D1.80.D0.BE.D1.87.D0.BD.D1.8B.D1.85_.D0.BF.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D0.BE.D0.B2"></span><span class="mw-headline" id="Создание_долгосрочных_процессов">Создание долгосрочных процессов</span>
</h3>
<p>Программы, запущенные udev, блокируют последующие события от данного устройства, а любые процессы, порождённые правилом udev, завершаются сразу после обработки события. Если вы хотите запустить долгосрочный процесс с помощью udev, то либо используйте <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=at">at</a></span> (например, <code><i>ваша_команда</i> | at now</code> или <code>batch</code>), либо создайте юнит <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a>, который можно <a rel="nofollow" class="external text" href="https://blog.fraggod.net/2012/06/16/proper-ish-way-to-start-long-running-systemd-service-on-udev-event-device-hotplug.html">запустить из правила udev</a>.
</p>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3>
<span id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9_.D0.B2_.D1.87.D0.B5.D1.80.D0.BD.D1.8B.D0.B9_.D1.81.D0.BF.D0.B8.D1.81.D0.BE.D0.BA"></span><span class="mw-headline" id="Добавление_модулей_в_черный_список">Добавление модулей в черный список</span>
</h3>
<p>Иногда <i>udev</i> может ошибочно загружать неправильные модули ядра. Чтобы избежать этого, добавьте такие модули в <a href="../ru/Kernel_module.html#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8" class="mw-redirect" title="Модули ядра">чёрный список</a>. Если модуль находится в чёрном списке, <i>udev</i> будет игнорировать его как при загрузке, так и при более позднем "горячем" подключении внешнего устройства (например, USB-носителя).
</p>
<h3>
<span id=".D0.9E.D1.82.D0.BB.D0.B0.D0.B4.D0.BE.D1.87.D0.BD.D0.B0.D1.8F_.D0.BF.D0.B5.D1.87.D0.B0.D1.82.D1.8C"></span><span class="mw-headline" id="Отладочная_печать">Отладочная печать</span>
</h3>
<p>Если задать <a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметр ядра">параметр ядра</a> <code>udev.log-priority=debug</code>, то аппаратное обеспечение будет выдавать <a href="../ru/General_troubleshooting.html" title="General troubleshooting (Русский)">отладочную</a> информацию. Другой способ — задать параметр
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/udev.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">udev_log="debug"</pre>
<p>Чтобы добавить эту опцию в initramfs, укажите файл настроек udev в строке <code>FILES</code>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">FILES="... /etc/udev/udev.conf"</pre>
<p>после чего <a href="../ru/Mkinitcpio.html#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%B0" title="Mkinitcpio (Русский)">сгенерируйте</a> initramfs.
</p>
<h3>
<span id="udevd_.D0.B2.D1.8B.D0.BB.D0.B5.D1.82.D0.B0.D0.B5.D1.82_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5"></span><span class="mw-headline" id="udevd_вылетает_при_загрузке">udevd вылетает при загрузке</span>
</h3>
<p>После миграции на LDAP или обновления системы, использующей LDAP, <i>udevd</i> может начать аварийно завершаться в момент загрузки системы с сообщением "Starting UDev Daemon". Обычно это происходит потому, что <i>udevd</i> пытается определить имя через LDAP, но не может, так как в этот момент еще не установлено подключение к сети.
</p>
<p>Необходимо, чтобы все используемые в LDAP группы были продублированы локально. Получить имена групп, используемых в правилах <i>udev</i>, и имена групп, присутствующих в системе, можно командами:
</p>
<pre># grep -Fr GROUP /etc/udev/rules.d/ /usr/lib/udev/rules.d/ | sed 's:.*GROUP="\([-a-z_]\{1,\}\)".*:\1:' | sort -u &gt;udev_groups
# cut -d: -f1 /etc/gshadow /etc/group | sort -u &gt;present_groups
</pre>
<p>Вывод будет записан в файлы <code>present_groups</code> и <code>udev_groups</code>. Чтобы увидеть различия, выполните построчное сравнение командой <i>diff</i>:
</p>
<pre># diff -y present_groups udev_groups
...
network							      &lt;
nobody							      &lt;
ntp							      &lt;
optical								optical
power							      |	pcscd
rfkill							      &lt;
root								root
scanner								scanner
smmsp							      &lt;
storage								storage
...
</pre>
<p>В данном примере группа <code>pcscd</code> по какой-то причине отсутствует в системе. Все такие группы необходимо <a href="../ru/Users_and_groups.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" title="Users and groups (Русский)">добавить в систему</a>. Также убедитесь, что имена всех локальных ресурсов разрешены, прежде чем возвращаться к LDAP. Файл <code>/etc/nsswitch.conf</code> должен содержать следующую строку:
</p>
<pre>group: files ldap
</pre>
<h3>
<span id=".D0.A3.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE_.D1.8F.D0.B2.D0.BB.D1.8F.D0.B5.D1.82.D1.81.D1.8F_.D1.81.D1.8A.D0.B5.D0.BC.D0.BD.D1.8B.D0.BC.2C_.D0.BE.D0.B4.D0.BD.D0.B0.D0.BA.D0.BE_.D0.BD.D0.B5_.D0.BF.D1.80.D0.B8.D0.B7.D0.BD.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D1.82.D0.B0.D0.BA.D0.BE.D0.B2.D1.8B.D0.BC"></span><span class="mw-headline" id="Устройство_является_съемным,_однако_не_признается_таковым">Устройство является съемным, однако не признается таковым</span>
</h3>
<p>Создайте правило udev для конкретного устройства. Чтобы получить подробную информацию об устройстве вы можете либо использовать <code>ID_SERIAL</code>, либо <code>ID_SERIAL_SHORT</code> (не забудьте поменять <code>/dev/sdb</code> если нужно):
</p>
<pre>$ udevadm info <i>/dev/sdb</i> | grep ID_SERIAL
</pre>
<p>Теперь установите <code>UDISKS_AUTO="1"</code>, чтобы пометить устройство для автоматического монтирования и <code>UDISKS_SYSTEM="0"</code>, чтобы пометить устройство как съёмное. Подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 8 udisks"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/udisks.8">udisks(8)</a></span>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-removable.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ENV{ID_SERIAL_SHORT}=="<i>серийный_номер</i>", ENV{UDISKS_AUTO}="1", ENV{UDISKS_SYSTEM}="0"</pre>
<p>Перезагрузите правила udev командой <code>udevadm control --reload</code>. Теперь ваше устройство будет распознаваться как съёмное.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D0.B0.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B9_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.BE.D0.B9_.D0.BC.D0.BE.D0.B4.D1.83.D0.BB.D0.B5.D0.B9_.D0.B0.D1.83.D0.B4.D0.B8.D0.BE.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2"></span><span class="mw-headline" id="Проблемы_с_автоматической_загрузкой_модулей_аудиоустройств">Проблемы с автоматической загрузкой модулей аудиоустройств</span>
</h3>
<p>Некоторые пользователи испытывают проблемы с загрузкой модулей звуковых устройств, для которых остались старые записи в <code>/etc/modprobe.d/sound.conf</code>. Чистка файла от таких записей может помочь.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Начиная с версии <i>udev</i> 171, модули эмуляции OSS (<code>snd_seq_oss</code>, <code>snd_pcm_oss</code> и <code>snd_mixer_oss</code>) больше не загружаются автоматически.</div>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.B0_.D0.B4.D0.B8.D1.81.D0.BA.D0.BE.D0.B2.D0.BE.D0.B4.D0.BE.D0.B2_IDE"></span><span class="mw-headline" id="Поддержка_дисководов_IDE">Поддержка дисководов IDE</span>
</h3>
<p>Начиная с версии 170, <i>udev</i> не поддерживает устройства CD-ROM/DVD-ROM, загружаемые как обычные IDE дисководы модулем <code>ide_cd_mod</code> и отображаемые в системе как <code>/dev/hd*</code>. Дисковод доступен только программам, которые обращаются к устройству напрямую, таким как <a href="../en/Optical_disc_drive.html#Ripping" title="Optical disc drive">cdparanoia</a>, но невидим для более высокоуровневых программ вроде KDE.
</p>
<p>Причина, по которой загрузка модуля <code>ide_cd_mod</code> имеет приоритет перед другими модулями, например, <code>sr_mod</code>, может заключаться в том, что по какой-либо причине модуль <code>piix</code> загружается в вашем <a href="../ru/Mkinitcpio.html" title="Mkinitcpio (Русский)">initramfs</a>. В этом случае вы можете просто заменить его в файле <code>/etc/mkinitcpio.conf</code> на <code>ata_piix</code>.
</p>
<h3>
<span id=".D0.9E.D0.BF.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D0.B4.D0.B8.D1.81.D0.BA.D0.BE.D0.B2.D0.BE.D0.B4.D1.8B_.D0.B8.D0.BC.D0.B5.D1.8E.D1.82_.D0.BD.D0.B5.D0.B2.D0.B5.D1.80.D0.BD.D1.8B.D0.B9_group_ID"></span><span class="mw-headline" id="Оптические_дисководы_имеют_неверный_group_ID">Оптические дисководы имеют неверный group ID</span>
</h3>
<p>Если значение group ID вашего дисковода установлено как <code>disk</code>, но вы хотите, чтобы оно было <code>optical</code>, вам следует создать такое правило:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># permissions for IDE CD devices
SUBSYSTEMS=="ide", KERNEL=="hd[a-z]", ATTR{removable}=="1", ATTRS{media}=="cdrom*", GROUP="optical"

# permissions for SCSI CD devices
SUBSYSTEMS=="scsi", KERNEL=="s[rg][0-9]*", ATTRS{type}=="5", GROUP="optical"</pre>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><span class="plainlinks archwiki-template-man" title="$ man 7 udev"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/udev.7">udev(7)</a></span></li>
<li>
<a rel="nofollow" class="external text" href="https://opensource.com/article/18/11/udev">Введение в udev</a> (англ.)</li>
<li>
<a rel="nofollow" class="external text" href="http://vger.kernel.org/vger-lists.html#linux-hotplug">Почтовая рассылка udev</a> (англ.)</li>
<li>
<a rel="nofollow" class="external text" href="http://jasonwryan.com/blog/2014/01/20/udev/">Сценарии udev</a> (англ.)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.reactivated.net/writing_udev_rules.html">Правила udev</a> (англ.)</li>
<li>
<a rel="nofollow" class="external text" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter09/udev.html">Организация устройств и модулей в LFS</a> (англ.)</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/Ventto/xpub">GUI и переменные экрана в правилах udev</a> (англ.)</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Hardware_detection_and_troubleshooting.html" title="Category:Hardware detection and troubleshooting (Русский)">Hardware detection and troubleshooting (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Udev_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=822990">https://wiki.archlinux.org/index.php?title=Udev_(Русский)&amp;oldid=822990</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 14 December 2024, at 13:14.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
