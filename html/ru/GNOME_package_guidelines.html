<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>GNOME package guidelines (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-GNOME_package_guidelines_Русский rootpage-GNOME_package_guidelines_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-URL_источников" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#URL_%D0%B8%D1%81%D1%82%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>URL источников</div>
		</a>
		
			<button aria-controls="toc-URL_источников-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle URL источников subsection</span>
			</button>
		
		<ul id="toc-URL_источников-sublist" class="vector-toc-list">
			<li id="toc-Использование_выпущенного_tarball" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B2%D1%8B%D0%BF%D1%83%D1%89%D0%B5%D0%BD%D0%BD%D0%BE%D0%B3%D0%BE_tarball">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Использование выпущенного tarball</div>
			</a>
			
			<ul id="toc-Использование_выпущенного_tarball-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Использование_commit_в_Git-репозитории" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_commit_%D0%B2_Git-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Использование commit в Git-репозитории</div>
			</a>
			
			<ul id="toc-Использование_commit_в_Git-репозитории-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Системы_сборки_Meson_и_GNU" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B_%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B8_Meson_%D0%B8_GNU">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Системы сборки Meson и GNU</div>
		</a>
		
		<ul id="toc-Системы_сборки_Meson_и_GNU-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Схемы_GSettings" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D1%85%D0%B5%D0%BC%D1%8B_GSettings">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Схемы GSettings</div>
		</a>
		
		<ul id="toc-Схемы_GSettings-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Схемы_GConf" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D1%85%D0%B5%D0%BC%D1%8B_GConf">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Схемы GConf</div>
		</a>
		
		<ul id="toc-Схемы_GConf-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Документация_ScrollKeeper" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D1%8F_ScrollKeeper">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Документация ScrollKeeper</div>
		</a>
		
		<ul id="toc-Документация_ScrollKeeper-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Кэш_значков_GTK" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9A%D1%8D%D1%88_%D0%B7%D0%BD%D0%B0%D1%87%D0%BA%D0%BE%D0%B2_GTK">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Кэш значков GTK</div>
		</a>
		
		<ul id="toc-Кэш_значков_GTK-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Файлы_.desktop" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B_.desktop">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Файлы .desktop</div>
		</a>
		
		<ul id="toc-Файлы_.desktop-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Файлы_AppStream_и_metainfo" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B_AppStream_%D0%B8_metainfo">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Файлы AppStream и metainfo</div>
		</a>
		
		<ul id="toc-Файлы_AppStream_и_metainfo-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">GNOME package guidelines (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/GNOME_package_guidelines.html" title="GNOME package guidelines – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/GNOME_%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3" title="GNOME パッケージガイドライン – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/GNOME_package_guidelines.html" title="GNOME package guidelines – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/GNOME_package_guidelines.html" title="GNOME package guidelines">GNOME package guidelines</a>. Дата последней синхронизации: 5 октября 2023. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=GNOME_package_guidelines&amp;diff=0&amp;oldid=781622">изменения</a>.</div>
<div class="toc" style="display:block; text-align: center; margin-bottom: 1em;">
<b><a href="../ru/Arch_package_guidelines.html" title="Arch package guidelines (Русский)">Указания по созданию пакетов</a></b>
<hr>
<p><a href="../en/32-bit_package_guidelines.html" title="32-bit package guidelines">32-bit</a> – <a href="../ru/CLR_package_guidelines.html" title="CLR package guidelines (Русский)">CLR</a> – <a href="../en/CMake_package_guidelines.html" title="CMake package guidelines">CMake</a> – <a href="../ru/Cross-compiling_tools_package_guidelines.html" title="Cross-compiling tools package guidelines (Русский)">Cross</a> – <a href="../en/DKMS_package_guidelines.html" title="DKMS package guidelines">DKMS</a> – <a href="../en/Eclipse_plugin_package_guidelines.html" title="Eclipse plugin package guidelines">Eclipse</a> – <a href="../en/Electron_package_guidelines.html" title="Electron package guidelines">Electron</a> – <a href="../en/Font_package_guidelines.html" title="Font package guidelines">Font</a> – <a href="../en/Free_Pascal_package_guidelines.html" title="Free Pascal package guidelines">Free Pascal</a> – <a class="mw-selflink selflink">GNOME</a> – <a href="../en/Go_package_guidelines.html" title="Go package guidelines">Go</a> – <a href="../en/Haskell_package_guidelines.html" title="Haskell package guidelines">Haskell</a> – <a href="../en/Java_package_guidelines.html" title="Java package guidelines">Java</a> – <a href="../en/KDE_package_guidelines.html" title="KDE package guidelines">KDE</a> – <a href="../en/Kernel_module_package_guidelines.html" title="Kernel module package guidelines">Kernel</a> – <a href="../en/Lisp_package_guidelines.html" title="Lisp package guidelines">Lisp</a> – <a href="../en/Meson_package_guidelines.html" title="Meson package guidelines">Meson</a> – <a href="../en/MinGW_package_guidelines.html" title="MinGW package guidelines">MinGW</a> – <a href="../en/Node.js_package_guidelines.html" title="Node.js package guidelines">Node.js</a> – <a href="../en/Nonfree_applications_package_guidelines.html" title="Nonfree applications package guidelines">Nonfree</a> – <a href="../en/OCaml_package_guidelines.html" title="OCaml package guidelines">OCaml</a> – <a href="../en/Perl_package_guidelines.html" title="Perl package guidelines">Perl</a> – <a href="../en/PHP_package_guidelines.html" title="PHP package guidelines">PHP</a> – <a href="../ru/Python_package_guidelines.html" title="Python package guidelines (Русский)">Python</a> – <a href="../en/R_package_guidelines.html" title="R package guidelines">R</a> – <a href="../en/Ruby_package_guidelines.html" title="Ruby package guidelines">Ruby</a> – <a href="../en/Rust_package_guidelines.html" title="Rust package guidelines">Rust</a> – <a href="../en/Shell_package_guidelines.html" title="Shell package guidelines">Shell</a> – <a href="../en/VCS_package_guidelines.html" title="VCS package guidelines">VCS</a> – <a href="../en/Web_application_package_guidelines.html" title="Web application package guidelines">Web</a> – <a href="../en/Wine_package_guidelines.html" class="mw-redirect" title="Wine package guidelines (Русский)">Wine</a>
</p>
</div>
<p>Пакеты <a href="../ru/GNOME.html" title="GNOME (Русский)">GNOME</a> в Arch Linux следуют определённой схеме.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="URL_.D0.B8.D1.81.D1.82.D0.BE.D1.87.D0.BD.D0.B8.D0.BA.D0.BE.D0.B2"></span><span class="mw-headline" id="URL_источников">URL источников</span>
</h2>
<p>Пакеты GNOME обычно следуют двум схемам URL источника: выпущенный tarball, хранящийся на FTP-сервере GNOME, и конкретный коммит в Git-репозитории программы.
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B2.D1.8B.D0.BF.D1.83.D1.89.D0.B5.D0.BD.D0.BD.D0.BE.D0.B3.D0.BE_tarball"></span><span class="mw-headline" id="Использование_выпущенного_tarball">Использование выпущенного tarball</span>
</h3>
<p>Скачиваемый tarball можно получить с <a rel="nofollow" class="external free" href="https://download.gnome.org">https://download.gnome.org</a> с помощью такого массива source:
</p>
<pre>source=("https://download.gnome.org/sources/$pkgname/${pkgver%.*}/$pkgname-$pkgver.tar.xz")
</pre>
<p>где <code>${pkgver%.*} </code> возвращает <i>major</i>.<i>minor</i> версию пакета путём удаления суффикса у <code>pkgver</code> (который является <i>micro</i> версией пакета). Например, если <i>pkgver=3.28.0</i>, то <code>${pkgver%.*} </code> вернёт <i>3.28</i>.
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_commit_.D0.B2_Git-.D1.80.D0.B5.D0.BF.D0.BE.D0.B7.D0.B8.D1.82.D0.BE.D1.80.D0.B8.D0.B8"></span><span class="mw-headline" id="Использование_commit_в_Git-репозитории">Использование commit в Git-репозитории</span>
</h3>
<p>Другая распространённая практика — использование в качестве источника конкретного коммита из git-репозитория GNOME-программы. Это не будет считаться VCS-пакетом, поскольку установка конкретного коммита (смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 PKGBUILD"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/PKGBUILD.5#USING_VCS_SOURCES">PKGBUILD(5) § USING VCS SOURCES</a></span>) не приводит к использованию самых новых коммитов и обновлению <code>pkgver</code>, вместо этого используются исходники именно из указанного коммита.
</p>
<p>Шаблон:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">PKGBUILD</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">url="https://gitlab.gnome.org/GNOME/$pkgname"
makedepends=(git)
_commit=<i>хэш_коммита</i>  # tags/<i>X.Y.Z</i> 
source=("git+${url}.git#commit=$_commit")
md5sums=('SKIP')

pkgver() {
  cd $pkgname
  git describe --tags | sed 's/-/+/g'
}</pre>
<p>Замените <code><i>хэш_коммита</i></code> на нужый Git-коммит, а <code>pkgver()</code> замените в соответствии с требованиями упаковываемого пакета (смотрите <a href="../en/VCS_package_guidelines.html#Git" title="VCS package guidelines">VCS package guidelines#Git</a>).
</p>
<p>Обратите внимание, что, поскольку исходный текст загружается с помощью <i>git</i>, пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=git">git</a></span> должен быть указан в makedepends, а в checksums должно быть <code>'SKIP'</code>, как и в случае с любым другим VCS-пакетом. Настоятельно рекомендуется использовать функцию <code>pkgver()</code>, так как она позволяет задать <code>pkgver</code>, соответствующий указанному коммиту.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Ранее GNOME использовал домен <a rel="nofollow" class="external free" href="https://git.gnome.org">https://git.gnome.org</a>, но затем перешёл на <a rel="nofollow" class="external free" href="https://gitlab.gnome.org">https://gitlab.gnome.org</a><a rel="nofollow" class="external autonumber" href="https://www.gnome.org/news/2018/05/gnome-moves-to-gitlab-2/">[1]</a>. Старые ссылки должны автоматически перенаправлять на новый домен gitlab.gnome.org, но, возможно, имеет смысл вручную обновить URL источника.</div>
<h2>
<span id=".D0.A1.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_.D1.81.D0.B1.D0.BE.D1.80.D0.BA.D0.B8_Meson_.D0.B8_GNU"></span><span class="mw-headline" id="Системы_сборки_Meson_и_GNU">Системы сборки Meson и GNU</span>
</h2>
<p>Исторически GNOME использовал для сборки своих приложений <a href="../ru/GNU.html#%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B8" title="GNU (Русский)">GNU Build System</a>. Несмотря на то, что некоторые активные и неактивные приложения по-прежнему используют его, большинство активных приложений GNOME перешли на Meson Build System.
</p>
<p>Инструкции по созданию пакетов с использованием Meson, которые подойдут для большинства приложений GNOME, описаны в статье <a href="../en/Meson_package_guidelines.html" title="Meson package guidelines">Meson package guidelines</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Даже несмотря на то, что приложения GNOME написаны на разных языках программирования, следует использовать Meson, если эта система сборки настроена для упаковываемого вами приложения. Например, не используйте <a href="../en/Rust_package_guidelines.html" title="Rust package guidelines">Rust package guidelines</a> для приложений GNOME, написанных на языке Rust, поскольку для их сборки следует использовать <i>meson</i>, а не <i>rustc</i> или <i>cargo</i>.</div>
<h2>
<span id=".D0.A1.D1.85.D0.B5.D0.BC.D1.8B_GSettings"></span><span class="mw-headline" id="Схемы_GSettings">Схемы GSettings</span>
</h2>
<p>GSettings — это текущие схемы, используемые приложениями GNOME, которые можно получить/прочитать/отредактировать с помощью графического инструмента <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dconf">dconf</a></span> или консольного инструмента <i>gsettings</i> (предоставляется пакетом <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=glib2">glib2</a></span>, который, скорее всего, уже установлен в качестве зависимости). Раньше GSettings требовал некоторого внимания со стороны упаковщика, но сейчас вмешательство не требуется.
</p>
<p>Некоторые наблюдения:
</p>
<ul>
<li>Приложения, использующие GSettings, обычно зависят от GTK (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gtk3">gtk3</a></span> или новее), поэтому зависимости, связанные с GSettings, обычно уже удовлетворены.</li>
<li>Раньше требовался флаг <code>--disable-schemas-compile</code> в <code>./configure</code>, чтобы избежать перекомпиляции базы данных GSettings при выполнении функции <code>package()</code>, но уже некоторое время это не относится к GNOME-приложениям, в основном к приложениям, использующим Meson в качестве системы сборки.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Даже для старых GNOME-приложений, не использующих Meson, не вызывайте <i>glib-compile-schemas</i> в файле .install, поскольку базы данных схем GSettings автоматически перекомпилируются с помощью <a href="../ru/Pacman.html#%D0%A5%D1%83%D0%BA%D0%B8" title="Pacman (Русский)">хуков pacman</a>, начиная с версии <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=glib2">glib2</a></span>=2.48.0-2.</div>
<h2>
<span id=".D0.A1.D1.85.D0.B5.D0.BC.D1.8B_GConf"></span><span class="mw-headline" id="Схемы_GConf">Схемы GConf</span>
</h2>
<p>Большинство пакетов GNOME уже используют <a href="#%D0%A1%D1%85%D0%B5%D0%BC%D1%8B_GSettings">#Схемы GSettings</a>, но вы можете столкнуться со старым пакетом GNOME, в котором ещё используются <a href="https://en.wikipedia.org/wiki/GConf#Schemas" class="extiw" title="wikipedia:GConf">схемы GConf</a>. В таком случае нужно добавить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gconf/">gconf</a></span><sup><small>AUR</small></sup> в массив depends.
</p>
<p>Схемы Gconf устанавливаются в системную базу данных GConf, чего следует избегать. Некоторые пакеты предоставляют флаг <code>--disable-schemas-install</code> в <code>./configure</code>, который почти никогда не работает. Однако в <i>gconftool-2</i> есть переменная <code>GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL</code>, которую можно установить, чтобы запретить <i>gconftool-2</i> обновлять какие-либо базы данных.
</p>
<p>При создании пакетов, которые устанавливают файлы схем GConf, используйте
</p>
<pre>make GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR="${pkgdir}" install
</pre>
<p>в функции <code>package()</code> в PKGBUILD.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Не вызывайте <code>gconfpkg</code> в файле .install, так как схемы GConf автоматически устанавливаются/удаляются (при установке/удалении пакета GNOME) с помощью <a href="../ru/Pacman.html#%D0%A5%D1%83%D0%BA%D0%B8" title="Pacman (Русский)">хуков pacman</a>, начиная с версии <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gconf/">gconf</a></span><sup><small>AUR</small></sup>=3.2.6-4.</div>
<h2>
<span id=".D0.94.D0.BE.D0.BA.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.86.D0.B8.D1.8F_ScrollKeeper"></span><span class="mw-headline" id="Документация_ScrollKeeper">Документация ScrollKeeper</span>
</h2>
<p>Приложения GNOME в настоящее время не используют <a rel="nofollow" class="external text" href="https://scrollkeeper.sourceforge.net/">ScrollKeeper</a>, но можно встретить GTK2-приложения с такой документацией.
</p>
<p>Начиная с GNOME 2.20, нет необходимости выполнять какую-либо команду для ScrollKeeper, так как <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/rarian/">rarian</a></span><sup><small>AUR</small></sup> читает его OMF-файлы напрямую. Команда <i>scrollkeeper-update</i> ничего не делает. Единственное требование — добавить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnome-doc-utils/">gnome-doc-utils</a></span><sup><small>AUR</small></sup> в массив makedepends.
</p>
<p>Отключить генерацию документации можно с помощью флага <code>--disable-scrollkeeper</code> в <code>./configure</code>.
</p>
<h2>
<span id=".D0.9A.D1.8D.D1.88_.D0.B7.D0.BD.D0.B0.D1.87.D0.BA.D0.BE.D0.B2_GTK"></span><span class="mw-headline" id="Кэш_значков_GTK">Кэш значков GTK</span>
</h2>
<p>Многие графические приложения GNOME устанавливают в систему значки, которые добавляются в кэш с помощью <i>gtk-update-icon-cache</i>. Каждый раз при добавлении или удалении значка он используется для обновления кэша.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Не вызывайте <i>gtk-update-icon-cache</i> в файле .install, так как кэш значков обновляется с помощью <a href="../ru/Pacman.html#%D0%A5%D1%83%D0%BA%D0%B8" title="Pacman (Русский)">хуков pacman</a>, начиная с версии <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gtk-update-icon-cache">gtk-update-icon-cache</a></span>=3.20.3-2.</li>
<li>Пакет <b>не</b> должен зависеть от <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gtk-update-icon-cache">gtk-update-icon-cache</a></span>, так как эта зависимость будет удовлетворяться пакетами типа <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gtk4">gtk4</a></span> и т. д.</li>
</ul>
</div>
<h2>
<span id=".D0.A4.D0.B0.D0.B9.D0.BB.D1.8B_.desktop"></span><span class="mw-headline" id="Файлы_.desktop">Файлы .desktop</span>
</h2>
<p>Многие пакеты устанавливают совместимые с Freedesktop.org файлы <code>.desktop</code> и регистрируют в них записи MimeType. Эта информация хранится в базе данных, которая должна обновляться при каждом добавлении или удалении. Именно эту функцию выполняет <i>update-desktop-database</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Не вызывайте <i>update-desktop-database</i> в файле .install, так как база данных автоматически обновляется с помощью <a href="../ru/Pacman.html#%D0%A5%D1%83%D0%BA%D0%B8" title="Pacman (Русский)">хуков pacman</a>, начиная с версии <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=desktop-file-utils">desktop-file-utils</a></span>=0.22-2.</li>
<li>Пакет <i>не</i> должен зависеть от <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=desktop-file-utils">desktop-file-utils</a></span>, так как эта зависимость будет удовлетворяться пакетами типа <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gtk4">gtk4</a></span> и т. д.</li>
</ul>
</div>
<h2>
<span id=".D0.A4.D0.B0.D0.B9.D0.BB.D1.8B_AppStream_.D0.B8_metainfo"></span><span class="mw-headline" id="Файлы_AppStream_и_metainfo">Файлы AppStream и metainfo</span>
</h2>
<p>Большинство GNOME-приложений, как и многие другие, придерживается <a rel="nofollow" class="external text" href="https://www.freedesktop.org/software/appstream/docs/">спецификации AppStream</a> от Freedesktop.org и предоставляет файл metainfo, чтобы описание приложения отображалось в центрах приложений, таких как <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-software">gnome-software</a></span> или <a rel="nofollow" class="external text" href="https://flathub.org">Flathub</a>.
</p>
<p>Приложения GNOME обычно выполняют валидацию файлов metainfo при помощи <i>appstream-util</i>, когда в функции <a href="../en/Meson_package_guidelines.html#check()" title="Meson package guidelines">check()</a> вызывается <code>meson test</code>. Если <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=appstream-glib">appstream-glib</a></span> не установлен, то данная проверка будет просто пропущена (то есть процесс сборки не будет прерван).
</p>
<p>Определить, что <i>appstream-util</i> используется приложением, можно двумя способами:
</p>
<ul>
<li>Первый способ — найти <i>appstream-util</i> в исходном коде, выполнив <code>grep -R appstream-util</code> или посмотрев файл <code>data/meson.build</code>;</li>
<li>Другой метод — в логах сборки поискать <pre>Program appstream-util found: NO</pre>
</li>
</ul>
<p>Добавьте <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=appstream-glib">appstream-glib</a></span> в массив checkdepends, чтобы выполнялась валидация файла metainfo.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Arch_package_guidelines.html" title="Category:Arch package guidelines (Русский)">Arch package guidelines (Русский)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=GNOME_package_guidelines_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=813040">https://wiki.archlinux.org/index.php?title=GNOME_package_guidelines_(Русский)&amp;oldid=813040</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 July 2024, at 06:16.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
