<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Zsh (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Zsh_Русский rootpage-Zsh_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Установка</div>
		</a>
		
			<button aria-controls="toc-Установка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Установка subsection</span>
			</button>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
			<li id="toc-Первоначальная_настройка" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Первоначальная настройка</div>
			</a>
			
			<ul id="toc-Первоначальная_настройка-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Установка_Zsh_в_качестве_оболочки_по_умолчанию" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_Zsh_%D0%B2_%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5_%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B8_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Установка Zsh в качестве оболочки по умолчанию</div>
			</a>
			
			<ul id="toc-Установка_Zsh_в_качестве_оболочки_по_умолчанию-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Файлы_запуска/завершения" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA%D0%B0/%D0%B7%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D1%8F">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Файлы запуска/завершения</div>
		</a>
		
		<ul id="toc-Файлы_запуска/завершения-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Настройка_Zsh" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_Zsh">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Настройка Zsh</div>
		</a>
		
			<button aria-controls="toc-Настройка_Zsh-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка Zsh subsection</span>
			</button>
		
		<ul id="toc-Настройка_Zsh-sublist" class="vector-toc-list">
			<li id="toc-Простой_.zshrc" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%81%D1%82%D0%BE%D0%B9_.zshrc">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Простой .zshrc</div>
			</a>
			
			<ul id="toc-Простой_.zshrc-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_переменной_$PATH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9_$PATH">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Настройка переменной $PATH</div>
			</a>
			
			<ul id="toc-Настройка_переменной_$PATH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Автозавершение_команд" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Автозавершение команд</div>
			</a>
			
			<ul id="toc-Автозавершение_команд-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Назначение_клавиш" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Назначение клавиш</div>
			</a>
			
			<ul id="toc-Назначение_клавиш-sublist" class="vector-toc-list">
				<li id="toc-Поиск_по_истории" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B8%D1%81%D0%BA_%D0%BF%D0%BE_%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.1</span>Поиск по истории</div>
			</a>
			
			<ul id="toc-Поиск_по_истории-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Модификаторы_Shift,_Alt,_Ctrl_и_Meta" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D1%80%D1%8B_Shift,_Alt,_Ctrl_%D0%B8_Meta">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.2</span>Модификаторы Shift, Alt, Ctrl и Meta</div>
			</a>
			
			<ul id="toc-Модификаторы_Shift,_Alt,_Ctrl_и_Meta-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Приглашения" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%B3%D0%BB%D0%B0%D1%88%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Приглашения</div>
			</a>
			
			<ul id="toc-Приглашения-sublist" class="vector-toc-list">
				<li id="toc-Темы_строк_приглашений" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A2%D0%B5%D0%BC%D1%8B_%D1%81%D1%82%D1%80%D0%BE%D0%BA_%D0%BF%D1%80%D0%B8%D0%B3%D0%BB%D0%B0%D1%88%D0%B5%D0%BD%D0%B8%D0%B9">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.1</span>Темы строк приглашений</div>
			</a>
			
			<ul id="toc-Темы_строк_приглашений-sublist" class="vector-toc-list">
				<li id="toc-Установка_тем_вручную" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%82%D0%B5%D0%BC_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.1.1</span>Установка тем вручную</div>
			</a>
			
			<ul id="toc-Установка_тем_вручную-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Добавление_темы_без_создания_отдельного_файла" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%82%D0%B5%D0%BC%D1%8B_%D0%B1%D0%B5%D0%B7_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F_%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.1.2</span>Добавление темы без создания отдельного файла</div>
			</a>
			
			<ul id="toc-Добавление_темы_без_создания_отдельного_файла-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Настройка_строки_приглашения" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8_%D0%BF%D1%80%D0%B8%D0%B3%D0%BB%D0%B0%D1%88%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.2</span>Настройка строки приглашения</div>
			</a>
			
			<ul id="toc-Настройка_строки_приглашения-sublist" class="vector-toc-list">
				<li id="toc-Цвета" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A6%D0%B2%D0%B5%D1%82%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.2.1</span>Цвета</div>
			</a>
			
			<ul id="toc-Цвета-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Пример" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.2.2</span>Пример</div>
			</a>
			
			<ul id="toc-Пример-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Примеры_файла_.zshrc" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0_.zshrc">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Примеры файла .zshrc</div>
			</a>
			
			<ul id="toc-Примеры_файла_.zshrc-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Советы и рекомендации</div>
		</a>
		
			<button aria-controls="toc-Советы_и_рекомендации-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Советы и рекомендации subsection</span>
			</button>
		
		<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
			<li id="toc-Автозапуск_X_при_входе_в_систему" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA_X_%D0%BF%D1%80%D0%B8_%D0%B2%D1%85%D0%BE%D0%B4%D0%B5_%D0%B2_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%83">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Автозапуск X при входе в систему</div>
			</a>
			
			<ul id="toc-Автозапуск_X_при_входе_в_систему-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Восстановление_настроек_терминала_после_аварийного_завершения_программы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA_%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB%D0%B0_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%B0%D0%B2%D0%B0%D1%80%D0%B8%D0%B9%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B7%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Восстановление настроек терминала после аварийного завершения программы</div>
			</a>
			
			<ul id="toc-Восстановление_настроек_терминала_после_аварийного_завершения_программы-sublist" class="vector-toc-list">
				<li id="toc-Команда_ttyctl" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0_ttyctl">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.1</span>Команда ttyctl</div>
			</a>
			
			<ul id="toc-Команда_ttyctl-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Сброс_терминала_с_помощью_управляющих_последовательностей" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A1%D0%B1%D1%80%D0%BE%D1%81_%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB%D0%B0_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%8F%D1%8E%D1%89%D0%B8%D1%85_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B5%D0%B9">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.2</span>Сброс терминала с помощью управляющих последовательностей</div>
			</a>
			
			<ul id="toc-Сброс_терминала_с_помощью_управляющих_последовательностей-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Запоминание_недавних_каталогов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D0%BE%D0%BC%D0%B8%D0%BD%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BD%D0%B5%D0%B4%D0%B0%D0%B2%D0%BD%D0%B8%D1%85_%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Запоминание недавних каталогов</div>
			</a>
			
			<ul id="toc-Запоминание_недавних_каталогов-sublist" class="vector-toc-list">
				<li id="toc-Dirstack" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Dirstack">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.1</span>Dirstack</div>
			</a>
			
			<ul id="toc-Dirstack-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-cdr" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#cdr">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.2</span>cdr</div>
			</a>
			
			<ul id="toc-cdr-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-zoxide" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#zoxide">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.3</span>zoxide</div>
			</a>
			
			<ul id="toc-zoxide-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Команда_Help" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0_Help">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Команда Help</div>
			</a>
			
			<ul id="toc-Команда_Help-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Постоянный_rehash" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D1%8B%D0%B9_rehash">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Постоянный rehash</div>
			</a>
			
			<ul id="toc-Постоянный_rehash-sublist" class="vector-toc-list">
				<li id="toc-Выполнение_rehash_по_необходимости" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_rehash_%D0%BF%D0%BE_%D0%BD%D0%B5%D0%BE%D0%B1%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5.1</span>Выполнение rehash по необходимости</div>
			</a>
			
			<ul id="toc-Выполнение_rehash_по_необходимости-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Выполнение_rehash_по_необходимости_с_помощью_SIGUSR1" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_rehash_%D0%BF%D0%BE_%D0%BD%D0%B5%D0%BE%D0%B1%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_SIGUSR1">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5.2</span>Выполнение rehash по необходимости с помощью SIGUSR1</div>
			</a>
			
			<ul id="toc-Выполнение_rehash_по_необходимости_с_помощью_SIGUSR1-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Назначение_клавиши_в_ncurses" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B8_%D0%B2_ncurses">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>Назначение клавиши в ncurses</div>
			</a>
			
			<ul id="toc-Назначение_клавиши_в_ncurses-sublist" class="vector-toc-list">
				<li id="toc-Горячие_клавиши_как_в_файловом_менеджере" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%93%D0%BE%D1%80%D1%8F%D1%87%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B8_%D0%BA%D0%B0%D0%BA_%D0%B2_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%BC_%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6.1</span>Горячие клавиши как в файловом менеджере</div>
			</a>
			
			<ul id="toc-Горячие_клавиши_как_в_файловом_менеджере-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Заголовок_xterm" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BE%D0%BA_xterm">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7</span>Заголовок xterm</div>
			</a>
			
			<ul id="toc-Заголовок_xterm-sublist" class="vector-toc-list">
				<li id="toc-Заголовок_вкладки_в_эмуляторе_терминала" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BE%D0%BA_%D0%B2%D0%BA%D0%BB%D0%B0%D0%B4%D0%BA%D0%B8_%D0%B2_%D1%8D%D0%BC%D1%83%D0%BB%D1%8F%D1%82%D0%BE%D1%80%D0%B5_%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7.1</span>Заголовок вкладки в эмуляторе терминала</div>
			</a>
			
			<ul id="toc-Заголовок_вкладки_в_эмуляторе_терминала-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Определение_окружения" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8</span>Определение окружения</div>
			</a>
			
			<ul id="toc-Определение_окружения-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Эквивалент_/dev/tcp:_ztcp" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%AD%D0%BA%D0%B2%D0%B8%D0%B2%D0%B0%D0%BB%D0%B5%D0%BD%D1%82_/dev/tcp:_ztcp">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9</span>Эквивалент /dev/tcp: ztcp</div>
			</a>
			
			<ul id="toc-Эквивалент_/dev/tcp:_ztcp-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Сочетание_клавиш_для_выхода_из_оболочки_при_введённой_команде" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D1%87%D0%B5%D1%82%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88_%D0%B4%D0%BB%D1%8F_%D0%B2%D1%8B%D1%85%D0%BE%D0%B4%D0%B0_%D0%B8%D0%B7_%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B8_%D0%BF%D1%80%D0%B8_%D0%B2%D0%B2%D0%B5%D0%B4%D1%91%D0%BD%D0%BD%D0%BE%D0%B9_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10</span>Сочетание клавиш для выхода из оболочки при введённой команде</div>
			</a>
			
			<ul id="toc-Сочетание_клавиш_для_выхода_из_оболочки_при_введённой_команде-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Обработка_неизвестных_команд_с_использованием_pacman_-F" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0_%D0%BD%D0%B5%D0%B8%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_pacman_-F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11</span>Обработка неизвестных команд с использованием pacman -F</div>
			</a>
			
			<ul id="toc-Обработка_неизвестных_команд_с_использованием_pacman_-F-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Очистка_буфера_сочетанием_клавиш" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%87%D0%B8%D1%81%D1%82%D0%BA%D0%B0_%D0%B1%D1%83%D1%84%D0%B5%D1%80%D0%B0_%D1%81%D0%BE%D1%87%D0%B5%D1%82%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.12</span>Очистка буфера сочетанием клавиш</div>
			</a>
			
			<ul id="toc-Очистка_буфера_сочетанием_клавиш-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Сторонние_расширения" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D1%82%D0%BE%D1%80%D0%BE%D0%BD%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D1%8F">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Сторонние расширения</div>
		</a>
		
			<button aria-controls="toc-Сторонние_расширения-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Сторонние расширения subsection</span>
			</button>
		
		<ul id="toc-Сторонние_расширения-sublist" class="vector-toc-list">
			<li id="toc-Фреймворки_настроек" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A4%D1%80%D0%B5%D0%B9%D0%BC%D0%B2%D0%BE%D1%80%D0%BA%D0%B8_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Фреймворки настроек</div>
			</a>
			
			<ul id="toc-Фреймворки_настроек-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Менеджеры_плагинов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9C%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D1%8B_%D0%BF%D0%BB%D0%B0%D0%B3%D0%B8%D0%BD%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Менеджеры плагинов</div>
			</a>
			
			<ul id="toc-Менеджеры_плагинов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Подсветка_синтаксиса_как_в_Fish" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D1%81%D0%B2%D0%B5%D1%82%D0%BA%D0%B0_%D1%81%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%81%D0%B0_%D0%BA%D0%B0%D0%BA_%D0%B2_Fish">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Подсветка синтаксиса как в Fish</div>
			</a>
			
			<ul id="toc-Подсветка_синтаксиса_как_в_Fish-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Обработка_неизвестных_команд_с_использованием_pkgfile" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0_%D0%BD%D0%B5%D0%B8%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_pkgfile">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Обработка неизвестных команд с использованием pkgfile</div>
			</a>
			
			<ul id="toc-Обработка_неизвестных_команд_с_использованием_pkgfile-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Смотрите также</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Zsh (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Zsh" title="Zsh – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Zsh.html" title="Zsh – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Zsh.html" title="Zsh – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Zsh" title="Zsh – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Zsh.html" title="Zsh – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Zsh" title="Zsh – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Zsh.html" title="Zsh">Zsh</a>. Дата последней синхронизации: 29 сентября 2023. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Zsh&amp;diff=0&amp;oldid=785160">изменения</a>.</div>
<p><a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/Intro/intro_1.html">Zsh</a> является мощной современной оболочкой, которая работает как в интерактивном режиме, так и в качестве интерпретатора языка сценариев. Он совместим с <a href="../ru/Bash.html" title="Bash (Русский)">bash</a> (не по умолчанию, только в режиме <code>emulate sh</code>), но имеет преимущества, такие как улучшенное <a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/Guide/zshguide06.html">завершение</a> и <a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/Doc/Release/Expansion.html">подстановка</a>.
</p>
<p>Еще больше причин, по которым стоит использовать Zsh, перечислено в <a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/FAQ/zshfaq01.html#l4">Zsh FAQ EN</a>.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p>Перед установкой вы можете посмотреть, какая оболочка используется в данный момент:
</p>
<pre>$ echo $SHELL
</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh">zsh</a></span>. Чтобы значительно расширить возможности автодополнения команд, установите также пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-completions">zsh-completions</a></span>.
</p>
<h3>
<span id=".D0.9F.D0.B5.D1.80.D0.B2.D0.BE.D0.BD.D0.B0.D1.87.D0.B0.D0.BB.D1.8C.D0.BD.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Первоначальная_настройка">Первоначальная настройка</span>
</h3>
<p>Убедитесь, что Zsh был установлен правильно, выполнив следующую команду в терминале:
</p>
<pre>$ zsh
</pre>
<p>После этого вы должны увидеть скрипт <i>zsh-newuser-install</i>, который проведет вас через некоторые основные настройки. Если вы хотите пропустить первичную настройку, нажмите <code>q</code>. Если скрипт не запустился, вы можете вызвать его вручную:
</p>
<pre>$ autoload -Uz zsh-newuser-install
$ zsh-newuser-install -f
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Для работы <i>zsh-newuser-install</i> требуется терминал размером не менее 72×15 символов.</div>
<h3>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_Zsh_.D0.B2_.D0.BA.D0.B0.D1.87.D0.B5.D1.81.D1.82.D0.B2.D0.B5_.D0.BE.D0.B1.D0.BE.D0.BB.D0.BE.D1.87.D0.BA.D0.B8_.D0.BF.D0.BE_.D1.83.D0.BC.D0.BE.D0.BB.D1.87.D0.B0.D0.BD.D0.B8.D1.8E"></span><span class="mw-headline" id="Установка_Zsh_в_качестве_оболочки_по_умолчанию">Установка Zsh в качестве оболочки по умолчанию</span>
</h3>
<p>Вы можете изменить оболочку по умолчанию на <code>/usr/bin/zsh</code>.
Смотрите раздел <a href="../ru/Command-line_shell.html#%D0%92%D1%8B%D0%B1%D0%BE%D1%80_%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B8_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E" class="mw-redirect" title="Командная оболочка">Командная оболочка#Выбор оболочки по умолчанию</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> При замене <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bash">bash</a></span> на Zsh можно перенести некоторые участки кода из <code>~/.bashrc</code> в <code>~/.zshrc</code> (например, приглашение командной строки и <a href="../ru/Bash.html#%D0%9F%D1%81%D0%B5%D0%B2%D0%B4%D0%BE%D0%BD%D0%B8%D0%BC%D1%8B" title="Bash (Русский)">псевдонимы</a>), а также из <code>~/.bash_profile</code> в <code>~/.zprofile</code> (например, <a href="../ru/Xinit.html#%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA_X_%D0%BF%D1%80%D0%B8_%D0%B2%D1%85%D0%BE%D0%B4%D0%B5_%D0%B2_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%83" class="mw-redirect" title="Xinitrc (Русский)">код, который запускает оконную систему X</a>).</div>
<h2>
<span id=".D0.A4.D0.B0.D0.B9.D0.BB.D1.8B_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B0.2F.D0.B7.D0.B0.D0.B2.D0.B5.D1.80.D1.88.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Файлы_запуска/завершения">Файлы запуска/завершения</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> <a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/Guide/zshguide02.html">Руководство пользователя Z-Shell</a> содержит информацию об интерактивных оболочках и оболочках входа и о том, что помещать в файлы запуска.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Если <code>$ZDOTDIR</code> не определена, используется <code>$HOME</code> по умолчанию.</li>
<li>Если опция <code>RCS</code> удаляется в одном из файлов, никакие файлы конфигурации больше не будут прочитаны после этого файла.</li>
<li>Если опция <code>GLOBAL_RCS</code> удаляется в одном из файлов, никакие глобальные файлы конфигурации (<code>/etc/zsh/*</code>) не будут прочитаны после этого файла.</li>
</ul>
</div>
<p>При запуске Zsh по умолчанию он будет загружать следующие файлы в этом порядке:
</p>
<ul>
<li>
<code>/etc/zsh/zshenv</code> — используется для установки <a href="../ru/Environment_variables.html" title="Environment variables (Русский)">переменных окружения</a> для всех пользователей; он не должен содержать команд, которые производят вывод или предполагают, что shell подключен к TTY. Если файл существует, он <i><b>всегда</b></i> будет прочитан, это нельзя переопределить.</li>
<li>
<code>$ZDOTDIR/.zshenv</code> — используется для установки переменных окружения текущего пользователя; он не должен содержать команд, которые производят вывод или предполагают, что shell подключен к TTY. Если файл существует, он <i><b>всегда</b></i> будет прочитан.</li>
<li>
<code>/etc/zsh/zprofile</code> — используется для выполнения команд для всех пользователей, будет прочитан при запуске <i><b>оболочки входа</b></i>. Обратите внимание, что в Arch Linux по умолчанию он содержит <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/zsh/-/blob/main/zprofile">одну строку</a>, считывающую <code>/etc/profile</code>.
<ul><li>
<code>/etc/profile</code> — этот файл должен быть прочитан всеми POSIX sh-совместимыми оболочками при входе в систему: он устанавливает <code>$PATH</code> и другие переменные окружения, а также специфичные для приложения (<code>/etc/profile.d/*.sh</code>) настройки при входе в систему.</li></ul>
</li>
<li>
<code>$ZDOTDIR/.zprofile</code> — используется для выполнения команд текущего пользователя, будет прочитан при запуске <i><b>оболочки входа</b></i>. Обычно используется для автозапуска графического сеанса или установки переменных окружения для сеанса.</li>
<li>
<code>/etc/zsh/zshrc</code> — используется для настройки интерактивной конфигурации оболочки и выполнения команд для всех пользователей, будет прочитан при запуске <i><b>интерактивной оболочки</b></i>.</li>
<li>
<code>$ZDOTDIR/.zshrc</code> — используется для настройки интерактивной конфигурации и выполнения команд текущего пользователя, будет прочитан при запуске <i><b>интерактивной оболочки</b></i>.</li>
<li>
<code>/etc/zsh/zlogin</code> — используется для выполнения команд для всех пользователей при завершении прогресса инициализации, будет прочитан при запуске <i><b>оболочки входа</b></i>.</li>
<li>
<code>$ZDOTDIR/.zlogin</code> — используется для выполнения команд текущего пользователя при завершении прогресса инициализации, будет вызван при запуске <i><b>оболочки входа</b></i>. Не следует использовать для автозапуска графического сеанса, так как в этот момент сеанс может содержать конфигурацию, предназначенную только для интерактивной оболочки.</li>
<li>
<code>$ZDOTDIR/.zlogout</code> — используется для выполнения команд текущего пользователя при завершении работы <i><b>оболочки входа</b></i>.</li>
<li>
<code>/etc/zsh/zlogout</code> — используется для выполнения команд для всех пользователей при завершении работы <i><b>оболочки входа</b></i>.</li>
</ul>
<p>Смотрите также <a rel="nofollow" class="external text" href="https://blog.flowblok.id.au/2013-02/shell-startup-scripts.html#implementation">графическое представление</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <code>$HOME/.profile</code> не относится к файлам запуска Zsh и <b>не используется</b>, если Zsh не запускается как оболочка входа <code>sh</code> или <code>ksh</code>. Более подробную информацию о режимах совместимости sh и ksh смотрите в <span class="plainlinks archwiki-template-man" title="$ man 1 zsh"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zsh.1#COMPATIBILITY">zsh(1) § COMPATIBILITY</a></span>.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Не рекомендуется убирать стандартную <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/zsh/-/blob/main/zprofile">одну строку</a> в <code>/etc/zsh/zprofile</code>, так как это нарушит интеграцию с пакетами, которые устанавливают свои скрипты в <code>/etc/profile.d</code>.</div>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_Zsh"></span><span class="mw-headline" id="Настройка_Zsh">Настройка Zsh</span>
</h2>
<p>Хотя Zsh может использоваться “из коробки”, он настроен не так, как хотело бы большинство пользователей. Из-за наличия огромных возможностей настройки, доступных в Zsh, этот процесс может оказаться сложным и трудоемким.
Для автоматической настройки можно использовать <a href="#%D0%A1%D1%82%D0%BE%D1%80%D0%BE%D0%BD%D0%BD%D0%B8%D0%B5_%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D1%8F">#Сторонние расширения</a>.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D1.81.D1.82.D0.BE.D0.B9_.zshrc"></span><span class="mw-headline" id="Простой_.zshrc">Простой .zshrc</span>
</h3>
<p>Ниже приведён пример файла настроек, который обеспечивает достойный набор опций по умолчанию, а также предоставляет примеры многих вариантов настройки Zsh. Для того, чтобы использовать этот пример, сохраните его в виде файла с именем <code>.zshrc</code>.  
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Чтобы применить изменения не завершая сеанс, выполните команду <code>source ~/.zshrc</code>
</div>
<p>Вот простой <code>.zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz compinit promptinit
compinit
promptinit

# Эта настройка установит тему walters для приглашения командной строки
prompt walters</pre>
<p>Подробности о темах приглашений командной строки описаны в разделе <a href="#%D0%A2%D0%B5%D0%BC%D1%8B_%D1%81%D1%82%D1%80%D0%BE%D0%BA_%D0%BF%D1%80%D0%B8%D0%B3%D0%BB%D0%B0%D1%88%D0%B5%D0%BD%D0%B8%D0%B9">#Темы строк приглашений</a>.
</p>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BF.D0.B5.D1.80.D0.B5.D0.BC.D0.B5.D0.BD.D0.BD.D0.BE.D0.B9_.24PATH"></span><span class="mw-headline" id="Настройка_переменной_$PATH">Настройка переменной $PATH</span>
</h3>
<p>Zsh связывает переменную <code>PATH</code> с массивом <code>path</code>. Это позволяет вам менять <code>PATH</code>, просто изменяя массив <code>path</code>. Подробности смотрите в <a rel="nofollow" class="external text" href="https://zsh.sourceforge.io/Guide/zshguide02.html#l24">руководстве пользователя Z-Shell</a>.
</p>
<p>Чтобы добавить <code>~/.local/bin/</code> в <code>PATH</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshenv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">typeset -U path PATH
path=(~/.local/bin $path)
export PATH</pre>
<h3>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.B2.D0.B5.D1.80.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4"></span><span class="mw-headline" id="Автозавершение_команд">Автозавершение команд</span>
</h3>
<p>Возможно, наиболее убедительной стороной Zsh является его передовые возможности автозавершения. Включите автозавершение в <code>.zshrc</code>. Добавив следующую строку в ваш <code>~/.zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz compinit
compinit
</pre>
<p>Настройки выше включают в себя также автодополнение хостов ssh/scp/sftp, но для того, чтобы эта функция работала, пользователи не должны включать хеширование имён SSH-хостов в <code>~/.ssh/known_hosts</code> (опция <code>HashKnownHosts</code>).
</p>
<p>Для автодополнения с помощью меню, управляемом клавишами-стрелками, добавьте следующую строку:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zstyle ':completion:*' menu select</pre>
<p>Для активации меню нажмите <code>Tab</code> дважды.
</p>
<p>Чтобы автодополнение для привилегированных команд выполнялось в привилегированном окружении (например, если вы вводите команду через <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a>, то скрипты автодополнения тоже будут запущены через sudo), добавьте:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zstyle ':completion::complete:*' gain-privileges 1
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Это означает, что скрипты автодополнения Zsh будут выполнять команды с привилегиями sudo. Не включайте это, если вы используете недоверенные скрипты автодополнения.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Это поддерживается для очень небольшого числа команд.</div>
<h3>
<span id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88"></span><span class="mw-headline" id="Назначение_клавиш">Назначение клавиш</span>
</h3>
<p>Zsh не использует Readline, вместо этого он использует свой собственный и более мощный ZLE. Т.е. не читает <code>/etc/inputrc</code> или <code>~/.inputrc</code>.
Введение в настройку ZLE: <a rel="nofollow" class="external text" href="https://sgeb.io/posts/2014/04/zsh-zle-custom-widgets/">A closer look at the zsh line editor and creating custom widgets</a>.
</p>
<p>ZLE имеет режимы <a href="../en/Emacs.html" title="Emacs">Emacs</a> и <a href="../en/Vi.html" title="Vi">vi</a>. По умолчанию он проверяет <a href="../ru/Environment_variables.html" class="mw-redirect" title="Переменные окружения">переменные окружения</a> <code>VISUAL</code> и <code>EDITOR</code>: если одна из них содержит <code>vi</code>, то будет использоваться режим vi; в противном случае по умолчанию будет Emacs. Переключить режим можно с помощью команд <code>bindkey -e</code> или <code>bindkey -v</code> для режима Emacs или режима vi соответственно. Задержка при нажатии клавиши Esc в режиме vi по умолчанию составляет 0,4 с, но её можно сделать короче (0,05 с) через <code>export KEYTIMEOUT=5</code>.
</p>
<p>Сочетания клавиш назначаются путём сопоставления escape-последовательности, соответствующей нажатию клавиши, виджету ZLE. Доступные виджеты с описанием их действий и привязок по умолчанию перечислены в <span class="plainlinks archwiki-template-man" title="$ man 1 zshzle"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshzle.1#STANDARD_WIDGETS">zshzle(1) § STANDARD WIDGETS</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 1 zshcontrib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshcontrib.1#ZLE_FUNCTIONS">zshcontrib(1) § ZLE FUNCTIONS</a></span>.
</p>
<p>Смотрите также <a rel="nofollow" class="external text" href="https://web.archive.org/web/20180704181216/http://zshwiki.org/home/zle/bindkeys">zshwiki: bindkeys</a>.
</p>
<p>Рекомендуемый способ установки сочетаний клавиш в Zsh — чтение поддерживаемых escape-последовательностей из <span class="plainlinks archwiki-template-man" title="$ man 5 terminfo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/terminfo.5">terminfo(5)</a></span>. Например<a rel="nofollow" class="external autonumber" href="https://www.zsh.org/mla/users/2010/msg00065.html">[1]</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Создание хэш-таблицы, совместимой с zkbd.
# Информацию о всех доступных клавишах можно узнать в man 5 terminfo
typeset -g -A key

key[Home]="${terminfo[khome]}"
key[End]="${terminfo[kend]}"
key[Insert]="${terminfo[kich1]}"
key[Backspace]="${terminfo[kbs]}"
key[Delete]="${terminfo[kdch1]}"
key[Up]="${terminfo[kcuu1]}"
key[Down]="${terminfo[kcud1]}"
key[Left]="${terminfo[kcub1]}"
key[Right]="${terminfo[kcuf1]}"
key[PageUp]="${terminfo[kpp]}"
key[PageDown]="${terminfo[knp]}"
key[Shift-Tab]="${terminfo[kcbt]}"

# Назначение действий поддерживаемым клавишам
[[ -n "${key[Home]}"      ]] &amp;&amp; bindkey -- "${key[Home]}"       beginning-of-line
[[ -n "${key[End]}"       ]] &amp;&amp; bindkey -- "${key[End]}"        end-of-line
[[ -n "${key[Insert]}"    ]] &amp;&amp; bindkey -- "${key[Insert]}"     overwrite-mode
[[ -n "${key[Backspace]}" ]] &amp;&amp; bindkey -- "${key[Backspace]}"  backward-delete-char
[[ -n "${key[Delete]}"    ]] &amp;&amp; bindkey -- "${key[Delete]}"     delete-char
[[ -n "${key[Up]}"        ]] &amp;&amp; bindkey -- "${key[Up]}"         up-line-or-history
[[ -n "${key[Down]}"      ]] &amp;&amp; bindkey -- "${key[Down]}"       down-line-or-history
[[ -n "${key[Left]}"      ]] &amp;&amp; bindkey -- "${key[Left]}"       backward-char
[[ -n "${key[Right]}"     ]] &amp;&amp; bindkey -- "${key[Right]}"      forward-char
[[ -n "${key[PageUp]}"    ]] &amp;&amp; bindkey -- "${key[PageUp]}"     beginning-of-buffer-or-history
[[ -n "${key[PageDown]}"  ]] &amp;&amp; bindkey -- "${key[PageDown]}"   end-of-buffer-or-history
[[ -n "${key[Shift-Tab]}" ]] &amp;&amp; bindkey -- "${key[Shift-Tab]}"  reverse-menu-complete

# Наконец, нужно убедиться, что терминал находится в application mode, когда
# zle активен. Только в этом случае значения из $terminfo будут действительны.
if (( ${+terminfo[smkx]} &amp;&amp; ${+terminfo[rmkx]} )); then
	autoload -Uz add-zle-hook-widget
	function zle_application_mode_start { echoti smkx }
	function zle_application_mode_stop { echoti rmkx }
	add-zle-hook-widget -Uz zle-line-init zle_application_mode_start
	add-zle-hook-widget -Uz zle-line-finish zle_application_mode_stop
fi</pre>
<h4>
<span id=".D0.9F.D0.BE.D0.B8.D1.81.D0.BA_.D0.BF.D0.BE_.D0.B8.D1.81.D1.82.D0.BE.D1.80.D0.B8.D0.B8"></span><span class="mw-headline" id="Поиск_по_истории">Поиск по истории</span>
</h4>
<p>Сперва создайте хэш-таблицу <code>key</code> и переведите ZLE в application mode, как описано в разделе <a href="#%D0%9D%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88">#Назначение клавиш</a>.
</p>
<p>Добавьте эти строки в .zshrc
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz up-line-or-beginning-search down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search

[[ -n "${key[Up]}"   ]] &amp;&amp; bindkey -- "${key[Up]}"   up-line-or-beginning-search
[[ -n "${key[Down]}" ]] &amp;&amp; bindkey -- "${key[Down]}" down-line-or-beginning-search
</pre>
<p>После этого стрелки вверх и вниз будут выводить только те команды из истории, которые начинаются с символов, находящихся перед текущим положением курсора.
</p>
<h4>
<span id=".D0.9C.D0.BE.D0.B4.D0.B8.D1.84.D0.B8.D0.BA.D0.B0.D1.82.D0.BE.D1.80.D1.8B_Shift.2C_Alt.2C_Ctrl_.D0.B8_Meta"></span><span class="mw-headline" id="Модификаторы_Shift,_Alt,_Ctrl_и_Meta">Модификаторы Shift, Alt, Ctrl и Meta</span>
</h4>
<p>В xterm-совместимых терминалах можно использовать расширенные определения клавиш из <span class="plainlinks archwiki-template-man" title="$ man 5 user_caps"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/user_caps.5">user_caps(5)</a></span>. Это комбинации клавиш <code>Shift</code>, <code>Alt</code>, <code>Ctrl</code> и <code>Meta</code> вместе <code>Up</code>, <code>Down</code>, <code>Left</code>, <code>Right</code>, <code>PageUp</code>, <code>PageDown</code>, <code>Home</code>, <code>End</code> или <code>Del</code>. Список рекомендуемых названий клавиш-модификаторов и комбинаций клавиш смотрите в <a rel="nofollow" class="external text" href="https://sourceforge.net/p/zsh/code/ci/master/tree/Functions/Misc/zkbd">zkbd source</a>.
</p>
<p>Например, чтобы <code>Ctrl+Left</code> выполнял переход к началу предыдущего слова, а <code>Ctrl+Right</code> — к началу следующего слова:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">key[Control-Left]="${terminfo[kLFT5]}"
key[Control-Right]="${terminfo[kRIT5]}"

[[ -n "${key[Control-Left]}"  ]] &amp;&amp; bindkey -- "${key[Control-Left]}"  backward-word
[[ -n "${key[Control-Right]}" ]] &amp;&amp; bindkey -- "${key[Control-Right]}" forward-word</pre>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D0.B3.D0.BB.D0.B0.D1.88.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Приглашения">Приглашения</span>
</h3>
<p>Zsh позволяет использовать темы для строк приглашений командной строки или, если не устраивают темы (или хочется расширить их возможности), создать собственную строку приглашения.
</p>
<h4>
<span id=".D0.A2.D0.B5.D0.BC.D1.8B_.D1.81.D1.82.D1.80.D0.BE.D0.BA_.D0.BF.D1.80.D0.B8.D0.B3.D0.BB.D0.B0.D1.88.D0.B5.D0.BD.D0.B8.D0.B9"></span><span class="mw-headline" id="Темы_строк_приглашений">Темы строк приглашений</span>
</h4>
<p>Темы — это быстрый и лёгкий способ создать цветное приглашение в Zsh. Информация о темах и об их создании есть в <span class="plainlinks archwiki-template-man" title="$ man 1 zshcontrib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshcontrib.1#PROMPT_THEMES">zshcontrib(1) § PROMPT THEMES</a></span>.
</p>
<p>Для использования темы убедитесь, что prompt установлен в autoload в файле <code>.zshrc</code>. Это может быть сделано путём добавления этих строк:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz promptinit
promptinit
</pre>
<p>Посмотреть список доступных цветных тем можно с помощью команды:
</p>
<pre>$ prompt -l
</pre>
<p>Для просмотра всех доступных тем (с примерами), используйте команду:
</p>
<pre>$ prompt -p
</pre>
<p>Например, чтобы использовать цветовую схему <code>bigfade</code>, введите:
</p>
<pre>$ prompt bigfade
</pre>
<p>Чтобы использовать цветовую схему с заданным цветом (если доступен в теме), введите:
</p>
<pre>$ prompt elite2 blue
</pre>
<h5>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.82.D0.B5.D0.BC_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E"></span><span class="mw-headline" id="Установка_тем_вручную">Установка тем вручную</span>
</h5>
<p>Существует возможность установки тем вручную, без использования внешних инструментов. Для локальной установки сначала создайте каталог и добавьте его в массив <code>fpath</code>, например:
</p>
<pre>$ mkdir ~/.zprompts
$ fpath=("$HOME/.zprompts" "$fpath[@]")
</pre>
<p>Затем в этом каталоге создайте символическую ссылку на файл темы:
</p>
<pre>$ ln -s mytheme.zsh ~/.zprompts/prompt_mytheme_setup
</pre>
<p>Или если вы хотите установить тему глобально:
</p>
<pre># ln -s mytheme.zsh /usr/share/zsh/functions/Prompts/prompt_mytheme_setup
</pre>
<p>После этого тему можно будет активировать:
</p>
<pre>$ prompt mytheme
</pre>
<p>Если сработает, можно записать это в <code>.zshrc</code>.
</p>
<h5>
<span id=".D0.94.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D1.82.D0.B5.D0.BC.D1.8B_.D0.B1.D0.B5.D0.B7_.D1.81.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D1.8F_.D0.BE.D1.82.D0.B4.D0.B5.D0.BB.D1.8C.D0.BD.D0.BE.D0.B3.D0.BE_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0"></span><span class="mw-headline" id="Добавление_темы_без_создания_отдельного_файла">Добавление темы без создания отдельного файла</span>
</h5>
<p>Помимо создания темы в отдельном файле, можно добавить тему внутри другого файла (например, в вашем <code>.zshrc</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Загрузка promptinit
autoload -Uz promptinit &amp;&amp; promptinit

# Создание темы
prompt_mytheme_setup() {
  PS1="%~%# "
}

# Добавление темы в promptsys
prompt_themes+=( mytheme )

# Загрузка темы
prompt mytheme</pre>
<h4>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D1.81.D1.82.D1.80.D0.BE.D0.BA.D0.B8_.D0.BF.D1.80.D0.B8.D0.B3.D0.BB.D0.B0.D1.88.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Настройка_строки_приглашения">Настройка строки приглашения</span>
</h4>
<p>В дополнение к приглашению слева <code>PS1</code> (<code>PROMPT</code>, <code>prompt</code>), которое используется в большинстве командных оболочек, Zsh также поддерживает приглашение справа <code>RPS1</code> (<code>RPROMPT</code>). Эти две переменные используются для установки произвольного приглашения командной строки.
</p>
<p>Другие приглашения специального назначения, например <code>PS2</code> (<code>PROMPT2</code>), <code>PS3</code> (<code>PROMPT3</code>), <code>PS4</code> (<code>PROMPT4</code>), <code>RPS1</code> (<code>RPROMPT</code>), <code>RPS2</code> (<code>RPROMPT2</code>) и <code>SPROMPT</code>, описаны в <span class="plainlinks archwiki-template-man" title="$ man 1 zshparam"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshparam.1#PARAMETERS_USED_BY_THE_SHELL">zshparam(1) § PARAMETERS USED BY THE SHELL</a></span>.
</p>
<p>Приглашения командной строки поддерживают специальные управляющие последовательности (escapes), которые описаны в <span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#EXPANSION_OF_PROMPT_SEQUENCES">zshmisc(1) § EXPANSION OF PROMPT SEQUENCES</a></span>. Некоторые примеры:
</p>
<p>%n - Имя пользователя
%m - Имя компьютера (до первой точки)
%M - Полное имя компьютера
%~ - Путь к текущему каталогу относительно домашнего
%d - Полный путь к текущей директории ($PWD)
%T - Время в формате HH:MM
%* - Время в формате HH:MM:SS
%D - Дата в формате YY-MM-DD
%B, %b - Начало и конец выделения жирным
</p>
<h5>
<span id=".D0.A6.D0.B2.D0.B5.D1.82.D0.B0"></span><span class="mw-headline" id="Цвета">Цвета</span>
</h5>
<p>Zsh устанавливает цвета иначе, чем <a href="../ru/Bash/Prompt_customization.html" title="Bash (Русский)/Prompt customization (Русский)">Bash</a>; вам не нужно возиться ANSI-кодами или с <span class="plainlinks archwiki-template-man" title="$ man 5 terminfo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/terminfo.5">terminfo(5)</a></span>. Zsh предоставляет удобные управляющие последовательности для установки основного и фонового цветов и других визуальных эффектов; их список и описание приведены в <span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#Visual_effects">zshmisc(1) § Visual effects</a></span>.
</p>
<p><a rel="nofollow" class="external text" href="https://zsh.sourceforge.io/FAQ/zshfaq03.html#l42">Цвет</a> может быть задан десятичным целым числом, названием одного из восьми наиболее широко поддерживаемых цветов или символом #, за которым следует триплет RGB в шестнадцатеричном формате. Подробнее в описании параметра fg=colour в <span class="plainlinks archwiki-template-man" title="$ man 1 zshzle"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshzle.1#CHARACTER_HIGHLIGHTING">zshzle(1) § CHARACTER HIGHLIGHTING</a></span>.
</p>
<p>Большинство терминалов поддерживают следующие цвета по названиям:
</p>
<table class="wikitable">

<tbody>
<tr>
<th>Название</th>
<th>Цвет
</th>
</tr>
<tr>
<td><code>black</code></td>
<td>
<code>0</code>
</td>
</tr>
<tr>
<td><code>red</code></td>
<td>
<code>1</code>
</td>
</tr>
<tr>
<td><code>green</code></td>
<td>
<code>2</code>
</td>
</tr>
<tr>
<td><code>yellow</code></td>
<td>
<code>3</code>
</td>
</tr>
<tr>
<td><code>blue</code></td>
<td>
<code>4</code>
</td>
</tr>
<tr>
<td><code>magenta</code></td>
<td>
<code>5</code>
</td>
</tr>
<tr>
<td><code>cyan</code></td>
<td>
<code>6</code>
</td>
</tr>
<tr>
<td><code>white</code></td>
<td>
<code>7</code>
</td>
</tr>
</tbody>
</table>
<p>Для терминалов, поддерживающих 256 цветов, можно использовать номера 0–255: смотрите <a rel="nofollow" class="external text" href="https://upload.wikimedia.org/wikipedia/commons/1/15/Xterm_256color_chart.svg">xterm-256color chart</a>.
</p>
<p>При правильно заданной переменной окружения <code>TERM</code> поддерживаемое терминалом максимальное количество цветов можно узнать из базы данных <span class="plainlinks archwiki-template-man" title="$ man 5 terminfo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/terminfo.5">terminfo(5)</a></span> с помощью команды <code>echoti colors</code>. Для <a rel="nofollow" class="external text" href="https://github.com/termstandard/colors/blob/master/README.md">24-битных цветов</a> также проверьте переменную окружения <code>COLORTERM</code> командой <code>print $COLORTERM</code>. Если она выведет <code>24bit</code> или <code>truecolor</code>, то ваш терминал поддерживает 16777216 (2<sup>24</sup>) цветов, даже если terminfo показывает меньшее число.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Цвета 0–15 могут быть разными в зависимости от используемого эмулятора терминала и пользовательских настроек.</li>
<li>Многие эмуляторы терминала отображают жирный текст более ярким цветом.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> 
<ul>
<li>Протестировать управляющие последовательности можно командой <code>print -P <i>"строка с escape-последовательностями"</i></code>, например: <pre>$ print -P '%B%F{red}цв%F{green}ет%F{blue}а!%f%b'</pre>
</li>
<li>Если вы используете 24-битные цвета, может быть полезно загрузить модуль <code>zsh/nearcolor</code> для работы в терминалах, которые их не поддерживают. Например: <pre>[[ "$COLORTERM" == (24bit|truecolor) || "${terminfo[colors]}" -eq '16777216' ]] || zmodload zsh/nearcolor</pre> Смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 zshmodules"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmodules.1#THE_ZSH/NEARCOLOR_MODULE">zshmodules(1) § THE ZSH/NEARCOLOR MODULE</a></span> для более подробной информации об этом модуле.</li>
</ul>
</div>
<h5>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80"></span><span class="mw-headline" id="Пример">Пример</span>
</h5>
<p>Пример простого приглашения командной строки без цветов:
</p>
<pre>PROMPT='%n@%m %~ %# '
</pre>
<p>Оно будет отображаться так:
</p>
<div class="mw-no-invert" style="font-family: monospace; white-space: pre; padding: 1em; background-color: #000; border: 1px solid #bcd; color: #c0c0c0; overflow:hidden;"><span style="float:left;">username@host ~ % </span></div>
<p>Пример использования двухстороннего приглашения с цветами:
</p>
<pre>PROMPT='%F{green}%n%f@%F{magenta}%m%f %F{blue}%B%~%b%f %# '
RPROMPT='[%F{yellow}%?%f]'
</pre>
<p>А вот как оно будет отображаться:
</p>
<div class="mw-no-invert" style="font-family: monospace; white-space: pre; padding: 1em; background-color: #000; border: 1px solid #bcd; color: #c0c0c0; overflow: hidden;">
<span style="float:left;"><span style="color: #008000;">username</span>@<span style="color: #800080;">host</span> <span style="color: #0000ff;">~</span> % </span><span style="float:right;">[<span style="color: #808000;">0</span>]</span>
</div>
<p>Для использования цветов из диапазона 16-255 и 24-битного true color можно использовать число от 0 до 255, присвоенное нужному цвету, и его шестнадцатеричный код цвета соответственно:
</p>
<pre>PROMPT='%F{2}%n%f@%F{5}%m%f %F{4}%B%~%b%f %# '
RPROMPT='[%F{3}%?%f]'
</pre>
<pre>PROMPT='%F{#c0c0c0}%n%f@%F{#008000}%m%f %F{#800080}%B%~%b%f %# '
RPROMPT='[%F{#0000ff}%?%f]'
</pre>
<h3>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_.D1.84.D0.B0.D0.B9.D0.BB.D0.B0_.zshrc"></span><span class="mw-headline" id="Примеры_файла_.zshrc">Примеры файла .zshrc</span>
</h3>
<ul>
<li>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=grml-zsh-config">grml-zsh-config</a></span>, доступный в официальном репозитории взятый с <a rel="nofollow" class="external free" href="https://grml.org/zsh">https://grml.org/zsh</a> содержит zshrc файл, который включает в себя множество настроек для Zshell. Эта настройка используется по умолчанию для  <a rel="nofollow" class="external text" href="https://archlinux.org/download/">ежемесячного ISO релиза</a>.</li>
<li>Базовая настройка с динамической строкой приглашения (Prompt) и заголовком окна / Hardinfo =&gt; <a rel="nofollow" class="external free" href="https://github.com/MrElendig/dotfiles-alice/blob/master/.zshrc">https://github.com/MrElendig/dotfiles-alice/blob/master/.zshrc</a>;</li>
<li>
<a rel="nofollow" class="external free" href="https://github.com/slashbeast/conf-mgmt/blob/master/roles/home_files/files/DOTzshrc">https://github.com/slashbeast/conf-mgmt/blob/master/roles/home_files/files/DOTzshrc</a> - zshrc с несколькими функциями, - смотрите комментарии в файле. Известные особенности: подтверждение выключения, если пользователь запустил poweroff, а также запрос подтверждения на reboot или hibernate, поддержка GIT в Prompt (сделано без vcsinfo), завершение по TAB с меню, вывод текущей выполняемой команды в заголовке окна, и многое другое.</li>
</ul>
<p>Смотрите также <a href="../en/Dotfiles.html#User_repositories" title="Dotfiles">dotfiles#User repositories</a>.
</p>
<h2>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Советы_и_рекомендации">Советы и рекомендации</span>
</h2>
<h3>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA_X_.D0.BF.D1.80.D0.B8_.D0.B2.D1.85.D0.BE.D0.B4.D0.B5_.D0.B2_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.83"></span><span class="mw-headline" id="Автозапуск_X_при_входе_в_систему">Автозапуск X при входе в систему</span>
</h3>
<p>Смотрите <a href="../ru/Xinit.html#%D0%90%D0%B2%D1%82%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA_X_%D0%BF%D1%80%D0%B8_%D0%B2%D1%85%D0%BE%D0%B4%D0%B5_%D0%B2_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%83" title="Xinit (Русский)">xinit (Русский)#Автозапуск X при входе в систему</a>.
</p>
<h3>
<span id=".D0.92.D0.BE.D1.81.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA_.D1.82.D0.B5.D1.80.D0.BC.D0.B8.D0.BD.D0.B0.D0.BB.D0.B0_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.B0.D0.B2.D0.B0.D1.80.D0.B8.D0.B9.D0.BD.D0.BE.D0.B3.D0.BE_.D0.B7.D0.B0.D0.B2.D0.B5.D1.80.D1.88.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.BC.D1.8B"></span><span class="mw-headline" id="Восстановление_настроек_терминала_после_аварийного_завершения_программы">Восстановление настроек терминала после аварийного завершения программы</span>
</h3>
<p>Некоторые программы, меняющие состояние терминала, не восстанавливают его изначальные настройки после нештатного завершения (например, при вылете или получении сигнала SIGINT).
</p>
<p>Это обычно решается с помощью <span class="plainlinks archwiki-template-man" title="$ man 1 reset"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/reset.1">reset(1)</a></span>:
</p>
<pre>$ reset
</pre>
<p>В следующих подразделах описаны способы решения, не требующие ручного сброса терминала.
</p>
<h4>
<span id=".D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B0_ttyctl"></span><span class="mw-headline" id="Команда_ttyctl">Команда ttyctl</span>
</h4>
<p>С помощью команды <a rel="nofollow" class="external text" href="https://zsh.sourceforge.io/Doc/Release/Shell-Builtin-Commands.html#index-tty_002c-freezing">ttyctl</a> можно «заморозить» и «разморозить» терминал. Для заморозки интерактивной оболочки при запуске:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ttyctl -f</pre>
<h4>
<span id=".D0.A1.D0.B1.D1.80.D0.BE.D1.81_.D1.82.D0.B5.D1.80.D0.BC.D0.B8.D0.BD.D0.B0.D0.BB.D0.B0_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D1.8F.D1.8E.D1.89.D0.B8.D1.85_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5.D0.B4.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D0.BE.D1.81.D1.82.D0.B5.D0.B9"></span><span class="mw-headline" id="Сброс_терминала_с_помощью_управляющих_последовательностей">Сброс терминала с помощью управляющих последовательностей</span>
</h4>
<p><a rel="nofollow" class="external text" href="https://www.in-ulm.de/~mascheck/various/alternate_charset/">Альтернативный набор символов</a> может испортить работу терминала так, что ttyctl не сможет этого предотвратить.
</p>
<p>Простым решением является вывод escape-последовательностей, сбрасывающих терминал, через хук <code>precmd</code>, чтобы они выполнялись каждый раз перед выводом приглашения. Например, с помощью <a rel="nofollow" class="external text" href="https://www.in-ulm.de/~mascheck/various/alternate_charset/#solution">управляющей последовательности</a> <code>\e[0m\e(B\e)0\017\e[?5l\e7\e[0;0r\e8</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz add-zsh-hook

function reset_broken_terminal () {
	printf '%b' '\e[0m\e(B\e)0\017\e[?5l\e7\e[0;0r\e8'
}

add-zsh-hook -Uz precmd reset_broken_terminal</pre>
<p>Для проверки работоспособности выполните:
</p>
<pre>$ print '\e(0\e)B'
</pre>
<h3>
<span id=".D0.97.D0.B0.D0.BF.D0.BE.D0.BC.D0.B8.D0.BD.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BD.D0.B5.D0.B4.D0.B0.D0.B2.D0.BD.D0.B8.D1.85_.D0.BA.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3.D0.BE.D0.B2"></span><span class="mw-headline" id="Запоминание_недавних_каталогов">Запоминание недавних каталогов</span>
</h3>
<h4><span class="mw-headline" id="Dirstack">Dirstack</span></h4>
<p>Zsh можно настроить, чтобы он помнил DIRSTACKSIZE (последние посещённые каталоги). Это пригодится для более быстрой работы с <i>cd</i>. Вам нужно добавить несколько строк, в файл настройки:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz add-zsh-hook

DIRSTACKFILE="${XDG_CACHE_HOME:-$HOME/.cache}/zsh/dirs"
if [[ -f "$DIRSTACKFILE" ]] &amp;&amp; (( ${#dirstack} == 0 )); then
	dirstack=("${(@f)"$(&lt; "$DIRSTACKFILE")"}")
	[[ -d "${dirstack[1]}" ]] &amp;&amp; cd -- "${dirstack[1]}"
fi
chpwd_dirstack() {
	print -l -- "$PWD" "${(u)dirstack[@]}" &gt; "$DIRSTACKFILE"
}
add-zsh-hook -Uz chpwd chpwd_dirstack

DIRSTACKSIZE='20'

setopt AUTO_PUSHD PUSHD_SILENT PUSHD_TO_HOME

## Удалить повторяющиеся записи
setopt PUSHD_IGNORE_DUPS

## Это Отменяет +/- операторы.
setopt PUSHD_MINUS
</pre>
<p>Теперь используйте
</p>
<pre>dirs -v
</pre>
<p>Для вывода стека директорий. Используйте <code>cd -&lt;NUM&gt;</code> чтобы вернуться к посещённому каталогу. Используйте автозавершение (нажав <code>TAB</code>) после тире.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Это не будет работать, если у вас открыто более одной сессии <i>zsh</i>, и использование <code>cd</code>, приведёт к конфликту в обоих ссессиях пишущих в тот же файл.</div>
<h4><span class="mw-headline" id="cdr">cdr</span></h4>
<p>cdr позволяет сменить рабочий каталог на предыдущий из списка, ведущегося автоматически. Все записи хранятся в файлах, которые синхронизируются между сеансами и (по умолчанию) между эмуляторами терминалов в текущем сеансе.
</p>
<p>Смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 zshcontrib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshcontrib.1#REMEMBERING_RECENT_DIRECTORIES">zshcontrib(1) § REMEMBERING RECENT DIRECTORIES</a></span>.
</p>
<h4><span class="mw-headline" id="zoxide">zoxide</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zoxide">zoxide</a></span> — это более интеллектуальный <i>cd</i>, позволяющий перемещаться в любое место всего за несколько нажатий клавиш. Программа подсчитывает часто используемые каталоги, чтобы угадать, куда вы хотите перейти.
</p>
<h3>
<span id=".D0.9A.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B0_Help"></span><span class="mw-headline" id="Команда_Help">Команда Help</span>
</h3>
<p>В отличие от <a href="../ru/Bash.html" title="Bash (Русский)">bash</a>, в Zsh не предусмотрена встроенная команда <code>help</code>, вместо неё используется <code>run-help</code>. По умолчанию <code>run-help</code> является псевдонимом команды <code>man</code>, её можно либо выполнить вручную, добавив к команде, либо вызвать для текущей команды с помощью сочетаний клавиш <code>Alt+h</code> или <code>Esc</code> <code>h</code>.
</p>
<p>Поскольку по умолчанию это всего лишь псевдоним на <a href="../ru/Man_page.html" title="Man page (Русский)">man</a>, она будет работать только с внешними командами. Для улучшения функциональности, чтобы она работала со встроенными командами оболочки и другими её возможностями, нужно использовать функцию <code>run-help</code>. Более подробная информация о <code>run-help</code> и вспомогательных функциях есть в <span class="plainlinks archwiki-template-man" title="$ man 1 zshcontrib"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshcontrib.1">zshcontrib(1)</a></span>.
</p>
<p>Сначала загрузите функцию <code>run-help</code>, а затем удалите существующий псевдоним <code>run-help</code>. Для удобства можно сделать <code>help</code> псевдонимом <code>run-help</code>. Например, добавьте следующие строки в ваш <code>zshrc</code>:
</p>
<pre>autoload -Uz run-help
(( ${+aliases[run-help]} )) &amp;&amp; unalias run-help
alias help=run-help</pre>
<p>Вспомогательные функции нужно включить отдельно:
</p>
<pre>autoload -Uz run-help-git run-help-ip run-help-openssl run-help-p4 run-help-sudo run-help-svk run-help-svn
</pre>
<p>Теперь, например, команда <code>run-help git commit</code> будет открывать <a href="../ru/Man_page.html" title="Man page (Русский)">man-страницу</a> <span class="plainlinks archwiki-template-man" title="$ man 1 git-commit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git-commit.1">git-commit(1)</a></span>, а не просто <span class="plainlinks archwiki-template-man" title="$ man 1 git"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/git.1">git(1)</a></span>.
</p>
<h3>
<span id=".D0.9F.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D1.8B.D0.B9_rehash"></span><span class="mw-headline" id="Постоянный_rehash">Постоянный rehash</span>
</h3>
<p>Как правило, compinit не будет автоматически находить новые исполняемые файлы в <code>$PATH</code>. Например, после установки нового пакета файлы в каталоге <code>/usr/bin/</code> не появятся в автодополнении сразу. Для их появления нужно выполнить команду:
</p>
<pre>$ rehash
</pre>
<p>Её можно запускать автоматически.<a rel="nofollow" class="external autonumber" href="https://github.com/robbyrussell/oh-my-zsh/issues/3440">[2]</a> Просто добавьте в ваш <code>zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zstyle ':completion:*' rehash true</pre>
<h4>
<span id=".D0.92.D1.8B.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_rehash_.D0.BF.D0.BE_.D0.BD.D0.B5.D0.BE.D0.B1.D1.85.D0.BE.D0.B4.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B8"></span><span class="mw-headline" id="Выполнение_rehash_по_необходимости">Выполнение rehash по необходимости</span>
</h4>
<p>С помощью хуков можно настроить <a href="../ru/Pacman.html" title="Pacman (Русский)">pacman</a> на запуск <code>rehash</code> после установки или удаления пакетов, что позволит избежать снижения производительности из-за постоянного запуска <code>rehash</code> описанным выше способом. Создайте каталоги <code>/etc/pacman.d/hooks</code> и <code>/var/cache/zsh</code>, а затем создайте хук:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/zsh.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Install
Operation = Upgrade
Operation = Remove
Type = Path
Target = usr/bin/*
[Action]
Depends = zsh
When = PostTransaction
Exec = /usr/bin/install -Dm644 /dev/null /var/cache/zsh/pacman</pre>
<p>Он будет обновлять дату изменения файла <code>/var/cache/zsh/pacman</code> каждый раз при установке, обновлении или удалении пакетов. Теперь нужно заставить Zsh обновить свой кэш команд, когда он устареет. Добавьте в <code>~/.zshrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zshcache_time="$(date +%s%N)"

autoload -Uz add-zsh-hook

rehash_precmd() {
  if [[ -a /var/cache/zsh/pacman ]]; then
    local paccache_time="$(date -r /var/cache/zsh/pacman +%s%N)"
    if (( zshcache_time &lt; paccache_time )); then
      rehash
      zshcache_time="$paccache_time"
    fi
  fi
}

add-zsh-hook -Uz precmd rehash_precmd
</pre>
<p>Если хук <code>precmd</code> срабатывает до того, как дата у файла <code>/var/cache/zsh/pacman</code> обновится, то автодополнение может выдавать устаревшие данные до тех пор, пока не будет запущено новое приглашение. Для этого достаточно выполнить пустую команду, например, нажать <code>enter</code>.
</p>
<h4>
<span id=".D0.92.D1.8B.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_rehash_.D0.BF.D0.BE_.D0.BD.D0.B5.D0.BE.D0.B1.D1.85.D0.BE.D0.B4.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B8_.D1.81_.D0.BF.D0.BE.D0.BC.D0.BE.D1.89.D1.8C.D1.8E_SIGUSR1"></span><span class="mw-headline" id="Выполнение_rehash_по_необходимости_с_помощью_SIGUSR1">Выполнение rehash по необходимости с помощью SIGUSR1</span>
</h4>
<p>Аналогично описанному выше, но хук теперь такой:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.d/hooks/zsh-rehash.hook</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Trigger]
Operation = Install
Operation = Upgrade
Operation = Remove
Type = Path
Target = usr/bin/*

[Action]
Depends = zsh
Depends = procps-ng
When = PostTransaction
Exec = /usr/bin/pkill zsh --signal=USR1</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Он отправит SIGUSR1 всем запущенным экземплярам <code>zsh</code>. Обратите внимание, что по умолчанию SIGUSR1 завершает процесс, поэтому при первой настройке все запущенные экземпляры <code>zsh</code> у всех пользователей (в том числе оболочки входа) будут завершены, если они не применили описанную ниже настройку.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">TRAPUSR1() { rehash }
</pre>
<p>Вместо функции можно использовать <code>trap 'rehash' USR1</code>. Об отличиях между этими двумя способами можно почитать в <span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#Trap_Functions">zshmisc(1) § Trap Functions</a></span>.
</p>
<p>Этот метод будет запускать <code>rehash</code> во всех экземплярах <code>zsh</code> сразу, избавляя от необходимости нажимать enter для запуска <code>precmd</code>.
</p>
<h3>
<span id=".D0.9D.D0.B0.D0.B7.D0.BD.D0.B0.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88.D0.B8_.D0.B2_ncurses"></span><span class="mw-headline" id="Назначение_клавиши_в_ncurses">Назначение клавиши в ncurses</span>
</h3>
<p>Привяжите приложение ncurses к keystoke, но оно не будет принимать взаимодействие. Используйте переменную <code>BUFFER</code>, чтобы заставить его работать. Следующий пример позволяет пользователям открывать ncmpcpp, используя <code>Alt+\</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ncmpcppShow() {
  BUFFER="ncmpcpp"
  zle accept-line
}
zle -N ncmpcppShow
bindkey '^[\' ncmpcppShow</pre>
<p>Этот метод будет содержать всё, что вы ввели в строку перед вызовом приложения
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ncmpcppShow() {
  ncmpcpp &lt;$TTY
  zle redisplay
}
zle -N ncmpcppShow
bindkey '^[\' ncmpcppShow</pre>
<h4>
<span id=".D0.93.D0.BE.D1.80.D1.8F.D1.87.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88.D0.B8_.D0.BA.D0.B0.D0.BA_.D0.B2_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2.D0.BE.D0.BC_.D0.BC.D0.B5.D0.BD.D0.B5.D0.B4.D0.B6.D0.B5.D1.80.D0.B5"></span><span class="mw-headline" id="Горячие_клавиши_как_в_файловом_менеджере">Горячие клавиши как в файловом менеджере</span>
</h4>
<p>Могут пригодится настройки клавиш использующиеся в графическом файловом менеджере. Первая комбинация показывает историю каталогов (Alt + Left), вторая позволяет пользователю перейти в родительский каталог (Alt + Up). Они также отображают содержимое каталогов.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">cdUndoKey() {
  popd
  zle       reset-prompt
  print
  ls
  zle       reset-prompt
}

cdParentKey() {
  pushd ..
  zle      reset-prompt
  print
  ls
  zle       reset-prompt
}

zle -N                 cdParentKey
zle -N                 cdUndoKey
bindkey '^[[1;3A'      cdParentKey
bindkey '^[[1;3D'      cdUndoKey
</pre>
<h3>
<span id=".D0.97.D0.B0.D0.B3.D0.BE.D0.BB.D0.BE.D0.B2.D0.BE.D0.BA_xterm"></span><span class="mw-headline" id="Заголовок_xterm">Заголовок xterm</span>
</h3>
<p>Если эмулятор терминала поддерживает такую возможность, то из Zsh можно задать его заголовок. Это позволяет динамически изменять заголовок для отображения нужной информации о состоянии оболочки, например, показывать имя пользователя и текущий каталог или выполняемую в данный момент команду.
</p>
<p>Заголовок xterm задаётся с помощью <a rel="nofollow" class="external text" href="https://www.tldp.org/HOWTO/Xterm-Title-3.html#ss3.1">escape-последовательности OSC</a> <code>\e]2;</code><code>\a</code> или <code>\e]2;</code><code>\e\\</code>. Например:
</p>
<pre>$ print -n '\e]2;Заголовок моего xterm\a'
</pre>
<p>установит заголовок
</p>
<pre>Заголовок моего xterm
</pre>
<p>Простой способ сделать динамический заголовок — менять его с помощью хуков <code>precmd</code> и <code>preexec</code>. Информация о существующих хуках есть в <span class="plainlinks archwiki-template-man" title="$ man 1 zshmisc"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmisc.1#Hook_Functions">zshmisc(1) § Hook Functions</a></span>.
</p>
<p>С помощью <code>print -P</code> можно также использовать управляющие последовательности Zsh.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> 
<ul>
<li>Печать заголовка может быть разделена на несколько команд, если они идут последовательно.</li>
<li>
<a href="../ru/GNU_Screen.html" title="GNU Screen (Русский)">GNU Screen</a> посылает заголовок xterm в hardstatus (<code>%h</code>). Если вы хотите использовать <a rel="nofollow" class="external text" href="https://www.gnu.org/software/screen/manual/html_node/String-Escapes.html">string escapes</a> из Screen (например, для цветов), то вам следует установить hardstatus с помощью управляющей последовательности <code>\e_</code><code>\e\\</code>. В противном случае, если в <code>\e]2;</code><code>\a</code> будут string escapes, эмулятор терминала получит искажённое название, так как не сможет интерпретировать их.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Не используйте опцию <code>-P</code> команды <code>print</code> при печати переменных, чтобы их содержимое не обрабатывалось как управляющие последовательности.</li>
<li>Используйте <a rel="nofollow" class="external text" href="https://zsh.sourceforge.io/Doc/Release/Expansion.html#Parameter-Expansion-Flags">parameter expansion flag</a> <code>q</code> при выводе переменных, чтобы их содержимое не обрабатывалось как управляющие последовательности.</li>
</ul>
</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">autoload -Uz add-zsh-hook

function xterm_title_precmd () {
	print -Pn -- '\e]2;%n@%m %~\a'
	[[ "$TERM" == 'screen'* ]] &amp;&amp; print -Pn -- '\e_\005{g}%n\005{-}@\005{m}%m\005{-} \005{B}%~\005{-}\e\\'
}

function xterm_title_preexec () {
	print -Pn -- '\e]2;%n@%m %~ %# ' &amp;&amp; print -n -- "${(q)1}\a"
	[[ "$TERM" == 'screen'* ]] &amp;&amp; { print -Pn -- '\e_\005{g}%n\005{-}@\005{m}%m\005{-} \005{B}%~\005{-} %# ' &amp;&amp; print -n -- "${(q)1}\e\\"; }
}

if [[ "$TERM" == (Eterm*|alacritty*|aterm*|foot*|gnome*|konsole*|kterm*|putty*|rxvt*|screen*|wezterm*|tmux*|xterm*) ]]; then
	add-zsh-hook -Uz precmd xterm_title_precmd
	add-zsh-hook -Uz preexec xterm_title_preexec
fi
</pre>
<h4>
<span id=".D0.97.D0.B0.D0.B3.D0.BE.D0.BB.D0.BE.D0.B2.D0.BE.D0.BA_.D0.B2.D0.BA.D0.BB.D0.B0.D0.B4.D0.BA.D0.B8_.D0.B2_.D1.8D.D0.BC.D1.83.D0.BB.D1.8F.D1.82.D0.BE.D1.80.D0.B5_.D1.82.D0.B5.D1.80.D0.BC.D0.B8.D0.BD.D0.B0.D0.BB.D0.B0"></span><span class="mw-headline" id="Заголовок_вкладки_в_эмуляторе_терминала">Заголовок вкладки в эмуляторе терминала</span>
</h4>
<p>Некоторые эмуляторы терминалов и мультиплексоры поддерживают установку заголовка вкладки. Используемые escape-последовательности зависят от терминала:
</p>
<table class="wikitable sortable">
<tbody>
<tr>
<th>Терминал
</th>
<th>Escape-последовательности
</th>
<th>Описание
</th>
</tr>
<tr>
<th>
<a href="../ru/GNU_Screen.html" title="GNU Screen (Русский)">GNU Screen</a>
</th>
<td>
<code>\ek</code><code>\e\\</code>
</td>
<td>Заголовок окна Screen (<code>%t</code>).
</td>
</tr>
<tr>
<th>
<a href="../en/Konsole.html" title="Konsole">Konsole</a>
</th>
<td>
<code>\e]30;</code><code>\a</code>
</td>
<td>Заголовок вкладки Konsole.
</td>
</tr>
</tbody>
</table>
<h3>
<span id=".D0.9E.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BE.D0.BA.D1.80.D1.83.D0.B6.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Определение_окружения">Определение окружения</span>
</h3>
<p><a rel="nofollow" class="external text" href="https://gitlab.com/jdorel-documentation/shell-environment-detection">Репозиторий</a> с информацией о том, как определить окружение, в котором работает командная оболочка, в частности: оболочка входа, сеанс Xorg, TTY, сеанс SSH.
</p>
<h3>
<span id=".D0.AD.D0.BA.D0.B2.D0.B8.D0.B2.D0.B0.D0.BB.D0.B5.D0.BD.D1.82_.2Fdev.2Ftcp:_ztcp"></span><span class="mw-headline" id="Эквивалент_/dev/tcp:_ztcp">Эквивалент /dev/tcp: ztcp</span>
</h3>
<p>Используйте модуль <code>zsh/net/tcp</code>:
</p>
<pre>$ zmodload zsh/net/tcp
</pre>
<p>Он позволяет устанавливать TCP-соединения:
</p>
<pre>$ ztcp example.com 80
</pre>
<p>Подробнее: <span class="plainlinks archwiki-template-man" title="$ man 1 zshmodules"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshmodules.1#THE_ZSH/NET/TCP_MODULE">zshmodules(1) § THE_ZSH/NET/TCP_MODULE</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 1 zshtcpsys"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshtcpsys.1">zshtcpsys(1)</a></span>.
</p>
<h3>
<span id=".D0.A1.D0.BE.D1.87.D0.B5.D1.82.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88_.D0.B4.D0.BB.D1.8F_.D0.B2.D1.8B.D1.85.D0.BE.D0.B4.D0.B0_.D0.B8.D0.B7_.D0.BE.D0.B1.D0.BE.D0.BB.D0.BE.D1.87.D0.BA.D0.B8_.D0.BF.D1.80.D0.B8_.D0.B2.D0.B2.D0.B5.D0.B4.D1.91.D0.BD.D0.BD.D0.BE.D0.B9_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D0.B5"></span><span class="mw-headline" id="Сочетание_клавиш_для_выхода_из_оболочки_при_введённой_команде">Сочетание клавиш для выхода из оболочки при введённой команде</span>
</h3>
<p>По умолчанию <code>Ctrl+d</code> не завершает работу оболочки, если в ней что-то введено. Можно исправить это так:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">exit_zsh() { exit }
zle -N exit_zsh
bindkey '^D' exit_zsh
</pre>
<h3>
<span id=".D0.9E.D0.B1.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.BA.D0.B0_.D0.BD.D0.B5.D0.B8.D0.B7.D0.B2.D0.B5.D1.81.D1.82.D0.BD.D1.8B.D1.85_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4_.D1.81_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_pacman_-F"></span><span class="mw-headline" id="Обработка_неизвестных_команд_с_использованием_pacman_-F">Обработка неизвестных команд с использованием pacman -F</span>
</h3>
<p><a href="../ru/Pacman.html" title="Pacman (Русский)">pacman</a> позволяет найти пакет по имени файла, так что можно создать обработчик неизвестных команд, который ищет пакеты, в которых присутствует введённая команда:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
function command_not_found_handler {
    local purple='\e[1;35m' bright='\e[0;1m' green='\e[1;32m' reset='\e[0m'
    printf 'zsh: command not found: %s\n' "$1"
    local entries=(
        ${(f)"$(/usr/bin/pacman -F --machinereadable -- "/usr/bin/$1")"}
    )
    if (( ${#entries[@]} ))
    then
        printf "${bright}$1${reset} may be found in the following packages:\n"
        local pkg
        for entry in "${entries[@]}"
        do
            # (repo package version file)
            local fields=(
                ${(0)entry}
            )
            if [[ "$pkg" != "${fields[2]}" ]]
            then
                printf "${purple}%s/${bright}%s ${green}%s${reset}\n" "${fields[1]}" "${fields[2]}" "${fields[3]}"
            fi
            printf '    /%s\n' "${fields[4]}"
            pkg="${fields[2]}"
        done
    fi
    return 127
}
...</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> База данных файлов в pacman отделена от обычной базы данных синхронизации, и её нужно получать и периодически обновлять командой <code>pacman -Fy</code>. Смотрите <a href="../ru/Pacman.html#%D0%9F%D0%BE%D0%B8%D1%81%D0%BA_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0_%D0%BF%D0%BE_%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D1%8E_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0" title="Pacman (Русский)">pacman (Русский)#Поиск пакета по названию файла</a>.</div>
<p>Вариант, использующий <i>pkgfile</i>: <a href="#%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0_%D0%BD%D0%B5%D0%B8%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_pkgfile">#Обработка неизвестных команд с использованием pkgfile</a>.
</p>
<h3>
<span id=".D0.9E.D1.87.D0.B8.D1.81.D1.82.D0.BA.D0.B0_.D0.B1.D1.83.D1.84.D0.B5.D1.80.D0.B0_.D1.81.D0.BE.D1.87.D0.B5.D1.82.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_.D0.BA.D0.BB.D0.B0.D0.B2.D0.B8.D1.88"></span><span class="mw-headline" id="Очистка_буфера_сочетанием_клавиш">Очистка буфера сочетанием клавиш</span>
</h3>
<p>По умолчанию в большинстве эмуляторов терминала сочетание клавиш, очищающее экран, не очищает backbuffer (ту часть текста, до которой нужно прокрутить вверх, чтобы увидеть её). Решить это можно так:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
function clear-screen-and-scrollback() {
    echoti civis &gt;"$TTY"
    printf '%b' '\e[H\e[2J' &gt;"$TTY"
    zle .reset-prompt
    zle -R
    printf '%b' '\e[3J' &gt;"$TTY"
    echoti cnorm &gt;"$TTY"
}

zle -N clear-screen-and-scrollback
bindkey '^L' clear-screen-and-scrollback
...</pre>
<h2>
<span id=".D0.A1.D1.82.D0.BE.D1.80.D0.BE.D0.BD.D0.BD.D0.B8.D0.B5_.D1.80.D0.B0.D1.81.D1.88.D0.B8.D1.80.D0.B5.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Сторонние_расширения">Сторонние расширения</span>
</h2>
<h3>
<span id=".D0.A4.D1.80.D0.B5.D0.B9.D0.BC.D0.B2.D0.BE.D1.80.D0.BA.D0.B8_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B5.D0.BA"></span><span class="mw-headline" id="Фреймворки_настроек">Фреймворки настроек</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Фреймворки добавляют дополнительный уровень абстракции и сложности. Они могут добавлять (и часто добавляют) неопределённое поведение. В случае проблем с оболочкой первым шагом отладки должен быть возврат к чистой оболочке без расширений.</div>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://github.com/JanDeDobbeleer/oh-my-posh">oh-my-posh</a> (пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/oh-my-posh/">oh-my-posh</a></span><sup><small>AUR</small></sup>) - Движок приглашений для любой оболочки, позволяющий настроить строку приглашения с помощью функции или переменной.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> управляемый сообществом, популярный фреймворк для настройки вашего Zsh. Он поставляется в комплекте с тонной полезных функций, помощников, плагинов, тем.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/sorin-ionescu/prezto">Prezto - мгновенно прекрасный Zsh</a> (доступен в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/prezto-git/">prezto-git</a></span><sup><small>AUR</small></sup>) настроенный фреймворк Zsh. Он поставляется с модулями, разумно расширяющих среду интерфейса командной строки (по умолчанию), псевдонимами (алиасами), функциями, атодополнением, и темами Prompt.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/zimfw/zimfw">ZIM</a> (пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zsh-zim-git/">zsh-zim-git</a></span><sup><small>AUR</small></sup>) - Фреймворк настроек с молниеносной скоростью и модульными расширениями. Zim очень легко настраивается, имеет богатый набор модулей и возможностей без ущерба для скорости и функциональности.</li>
</ul>
<h3>
<span id=".D0.9C.D0.B5.D0.BD.D0.B5.D0.B4.D0.B6.D0.B5.D1.80.D1.8B_.D0.BF.D0.BB.D0.B0.D0.B3.D0.B8.D0.BD.D0.BE.D0.B2"></span><span class="mw-headline" id="Менеджеры_плагинов">Менеджеры плагинов</span>
</h3>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://github.com/mattmc3/antidote">Antidote</a> (пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zsh-antidote/">zsh-antidote</a></span><sup><small>AUR</small></sup>) - Полнофункциональная Zsh-реализация старого менеджера плагинов Antibody.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/zdharma-continuum/zinit">zinit</a> (ранее «zplugin», пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zinit-git/">zinit-git</a></span><sup><small>AUR</small></sup>) - Гибкий менеджер плагинов Zsh с чистым fpath, отчётами, управлением автодополнением, турбо-режимом <a rel="nofollow" class="external text" href="https://github.com/zdharma-continuum/I_WANT_TO_HELP">REVIVED</a>.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/rossmacarthur/sheldon">sheldon</a> (пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sheldon">sheldon</a></span>) - Быстрый, настраиваемый менеджер плагинов оболочки, написанный на Rust.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/zsh-users/antigen">Antigen</a> (дступен в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/antigen-git/">antigen-git</a></span><sup><small>AUR</small></sup>)  - менеджер плагинов для zsh, вдохновлённый oh-my-zsh и vundle.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/tarjoilija/zgen">zgen</a> (пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zgen-git/">zgen-git</a></span><sup><small>AUR</small></sup>) - Лёгкий и простой менеджер плагинов для Zsh. <a rel="nofollow" class="external text" href="https://github.com/tarjoilija/zgen/issues/123">Заброшен</a>.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/zplug/zplug">zplug</a> (пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zplug/">zplug</a></span><sup><small>AUR</small></sup>) - Менеджер плагинов нового поколения для Zsh. <a rel="nofollow" class="external text" href="https://github.com/zplug/zplug/issues/403#issuecomment-477520784">Заброшен</a>.</li>
</ul>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D1.81.D0.B2.D0.B5.D1.82.D0.BA.D0.B0_.D1.81.D0.B8.D0.BD.D1.82.D0.B0.D0.BA.D1.81.D0.B8.D1.81.D0.B0_.D0.BA.D0.B0.D0.BA_.D0.B2_Fish"></span><span class="mw-headline" id="Подсветка_синтаксиса_как_в_Fish">Подсветка синтаксиса как в Fish</span>
</h3>
<p><a href="../ru/Fish.html" title="Fish (Русский)">Fish</a> обеспечивает очень мощную подсветку синтаксиса. Для использования в zsh, вы можете установить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-syntax-highlighting">zsh-syntax-highlighting</a></span> из официального репозитория и обязательно добавьте в ваш <code>~/.zshrc</code> строку:
</p>
<pre>source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</pre>
<p>Также можно добавить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-autosuggestions">zsh-autosuggestions</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh</pre>
<h3>
<span id=".D0.9E.D0.B1.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.BA.D0.B0_.D0.BD.D0.B5.D0.B8.D0.B7.D0.B2.D0.B5.D1.81.D1.82.D0.BD.D1.8B.D1.85_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4_.D1.81_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_pkgfile"></span><span class="mw-headline" id="Обработка_неизвестных_команд_с_использованием_pkgfile">Обработка неизвестных команд с использованием pkgfile</span>
</h3>
<p>В утилиту <a href="../ru/Pkgfile.html" title="Pkgfile (Русский)">pkgfile</a> входит Zsh скрипт, содержащий функцию <code>command_not_found_handler</code>. При вводе неизвестной команды функция автоматически осуществляет поиск в официальных репозиториях.
</p>
<p>Для её включения добавьте:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.zshrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">source /usr/share/doc/pkgfile/command-not-found.zsh</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Чтобы это сработало, базу данных <i>pkgfile</i> нужно <a href="../ru/Pkgfile.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0" title="Pkgfile (Русский)">синхронизировать</a>.</div>
<p>Вариант, использующий <i>pacman</i>: <a href="#%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0_%D0%BD%D0%B5%D0%B8%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%BD%D1%8B%D1%85_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4_%D1%81_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_pacman_-F">#Обработка неизвестных команд с использованием pacman -F</a>.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<p>Рекомендуем обязательно обратится к следующим Русскоязычным статьям, для более полного и лучшего понимания.
</p>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.altlinux.org/DotFiles/Shells/Zsh/%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B#.D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.BF.D1.80.D0.B8.D0.B3.D0.BB.D0.B0.D1.88.D0.B5.D0.BD.D0.B8.D1.8F">Советы по настройке Zsh</a></li>
<li><a rel="nofollow" class="external text" href="https://alexott.net/ru/writings/zsh/zsh-refcard.pdf">Cправочная карта Zsh (PDF)</a></li>
</ul>
<p>Статьи на Английском:
</p>
<ul>
<li><a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/Guide/zshguide.html">A User's Guide to ZSH</a></li>
<li>
<a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/Doc/Release/index-frame.html">The Z Shell Manual</a> (different format available <a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/Doc/">here</a>)</li>
<li><a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/FAQ/zshfaq01.html">Zsh FAQ</a></li>
<li>
<a rel="nofollow" class="external text" href="https://grml.org/zsh/zsh-lovers.html">zsh-lovers(1)</a> (this is also available as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zsh-lovers">zsh-lovers</a></span> in offical repository)</li>
<li><a rel="nofollow" class="external text" href="https://zshwiki.org/home/">Zsh Wiki</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.gentoo.org/wiki/Zsh/HOWTO">Gentoo Wiki: Zsh/HOWTO</a></li>
<li><a rel="nofollow" class="external text" href="https://www.bash2zsh.com/zsh_refcard/refcard.pdf">Bash2Zsh Reference Card</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Command-line_shells.html" title="Category:Command-line shells (Русский)">Command-line shells (Русский)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Zsh_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=813186">https://wiki.archlinux.org/index.php?title=Zsh_(Русский)&amp;oldid=813186</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 July 2024, at 07:05.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
