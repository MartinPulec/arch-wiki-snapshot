<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Users and groups (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Users_and_groups_Русский rootpage-Users_and_groups_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Обзор" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9E%D0%B1%D0%B7%D0%BE%D1%80">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Обзор</span>
			</div>
		</a>
		
		<ul id="toc-Обзор-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Права_и_владельцы" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B0%D0%B2%D0%B0_%D0%B8_%D0%B2%D0%BB%D0%B0%D0%B4%D0%B5%D0%BB%D1%8C%D1%86%D1%8B">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Права и владельцы</span>
			</div>
		</a>
		
		<ul id="toc-Права_и_владельцы-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Shadow" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Shadow">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Shadow</span>
			</div>
		</a>
		
		<ul id="toc-Shadow-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Список_файлов" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Список файлов</span>
			</div>
		</a>
		
		<ul id="toc-Список_файлов-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Управление_пользователями" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Управление пользователями</span>
			</div>
		</a>
		
			<button aria-controls="toc-Управление_пользователями-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Управление пользователями subsection</span>
			</button>
		
		<ul id="toc-Управление_пользователями-sublist" class="vector-toc-list">
			<li id="toc-Пример_добавления_пользователя" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>Пример добавления пользователя</span>
				</div>
			</a>
			
			<ul id="toc-Пример_добавления_пользователя-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Пример_добавления_системного_пользователя" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Пример добавления системного пользователя</span>
				</div>
			</a>
			
			<ul id="toc-Пример_добавления_системного_пользователя-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Смена_имени_пользователя_или_домашнего_каталога" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%B5%D0%BD%D0%B0_%D0%B8%D0%BC%D0%B5%D0%BD%D0%B8_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F_%D0%B8%D0%BB%D0%B8_%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D0%B5%D0%B3%D0%BE_%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Смена имени пользователя или домашнего каталога</span>
				</div>
			</a>
			
			<ul id="toc-Смена_имени_пользователя_или_домашнего_каталога-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Другие_примеры_управления_пользователями" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.4</span>
					<span>Другие примеры управления пользователями</span>
				</div>
			</a>
			
			<ul id="toc-Другие_примеры_управления_пользователями-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-База_данных_пользователей" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>База данных пользователей</span>
			</div>
		</a>
		
		<ul id="toc-База_данных_пользователей-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Автоматическая_проверка_целостности" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0_%D1%86%D0%B5%D0%BB%D0%BE%D1%81%D1%82%D0%BD%D0%BE%D1%81%D1%82%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>Автоматическая проверка целостности</span>
			</div>
		</a>
		
		<ul id="toc-Автоматическая_проверка_целостности-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Управление_группами" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Управление группами</span>
			</div>
		</a>
		
		<ul id="toc-Управление_группами-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Список_групп" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%B3%D1%80%D1%83%D0%BF%D0%BF">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">9</span>
				<span>Список групп</span>
			</div>
		</a>
		
			<button aria-controls="toc-Список_групп-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Список групп subsection</span>
			</button>
		
		<ul id="toc-Список_групп-sublist" class="vector-toc-list">
			<li id="toc-Пользовательские_группы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.1</span>
					<span>Пользовательские группы</span>
				</div>
			</a>
			
			<ul id="toc-Пользовательские_группы-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Системные_группы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.2</span>
					<span>Системные группы</span>
				</div>
			</a>
			
			<ul id="toc-Системные_группы-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Группы,_существовавшие_до_перехода_на_systemd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%93%D1%80%D1%83%D0%BF%D0%BF%D1%8B,_%D1%81%D1%83%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%BE%D0%B2%D0%B0%D0%B2%D1%88%D0%B8%D0%B5_%D0%B4%D0%BE_%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0_%D0%BD%D0%B0_systemd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.3</span>
					<span>Группы, существовавшие до перехода на systemd</span>
				</div>
			</a>
			
			<ul id="toc-Группы,_существовавшие_до_перехода_на_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Неиспользуемые_группы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B5%D0%BC%D1%8B%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">9.4</span>
					<span>Неиспользуемые группы</span>
				</div>
			</a>
			
			<ul id="toc-Неиспользуемые_группы-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Прочие_инструменты_для_работы_с_базами_данных" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%87%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B_%D0%B4%D0%BB%D1%8F_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B_%D1%81_%D0%B1%D0%B0%D0%B7%D0%B0%D0%BC%D0%B8_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">10</span>
				<span>Прочие инструменты для работы с базами данных</span>
			</div>
		</a>
		
		<ul id="toc-Прочие_инструменты_для_работы_с_базами_данных-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Users and groups (Русский)</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../DeveloperWiki:UID_/_GID_Database.html" title="DeveloperWiki:UID / GID Database">DeveloperWiki:UID / GID Database</a></li>
<li><a href="../ru/Sudo.html" title="Sudo (Русский)">Sudo (Русский)</a></li>
<li><a href="../en/Polkit.html" title="Polkit">Polkit</a></li>
<li><a href="../en/47b4ddaa1544bd4624def4deeec71c20.html" class="mw-redirect" title="Права доступа и атрибуты файлов">Права доступа и атрибуты файлов</a></li>
<li><a href="../en/Systemd-homed.html" title="Systemd-homed">systemd-homed</a></li>
<li><a href="../en/a7b1e176af3cb2b4018da6a2eedbf017.html" class="mw-redirect" title="Сброс пароля root">Сброс пароля root</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Users_and_groups.html" title="Users and groups">Users and groups</a>. Дата последней синхронизации: 11 июля 2021. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Users_and_groups&amp;diff=0&amp;oldid=681356">изменения</a>.</div>
<p>Механизм пользвателей и групп используется в GNU/Linux для <a href="https://en.wikipedia.org/wiki/access_control#Computer_security" class="extiw" title="wikipedia:access control">управления доступом</a> к файлам, каталогам и периферийным устройствам. Базовый контроль доступа в Linux прост и не предлагает большого выбора настроек. Некоторые инструменты обеспечивают расширенный набор возможностей, подробнее см. <a href="../ru/Access_Control_Lists.html" title="Access Control Lists (Русский)">ACL</a>, <a href="../en/Capabilities.html" title="Capabilities">Capabilities</a> и <a href="../en/PAM.html#Configuration_How-Tos" title="PAM">PAM#Configuration How-Tos</a>.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Обзор">
<span id=".D0.9E.D0.B1.D0.B7.D0.BE.D1.80"></span>Обзор</h2></div>
<p>Под <i>пользователем</i> понимается любой, кто работает с компьютером. Как правило, для каждого пользователя в системе создаётся отдельный аккаунт, которому присваивается специальное имя. В качестве имени пользователя можно использовать как реальные имена, вроде Mary или Bill, так и псевдонимы — Dragonlady, Pirate  и т.п. С помощью имени пользователь получает доступ к своему аккаунту и, в конечном счёте, к системе. Некоторые системные службы запускаются либо привилегированными аккаунтами, либо строго определёнными аккаунтами пользователей.
</p>
<p>Механизм пользователей был разработан по соображениям безопасности, для ограничения доступа к различным частям системы. <a href="https://en.wikipedia.org/wiki/ru:root" class="extiw" title="wikipedia:ru:root">Суперпользователь</a> (root) имеет полный доступ к операционной системе и её настройкам. Этот аккаунт используется только для целей системного администрирования; обычные пользователи могут временно <a href="../en/List_of_applications/Security.html#Privilege_elevation" title="List of applications/Security">повысить уровень</a> своих прав командами <a href="../en/Su.html" title="Su">su</a> и <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a>.
</p>
<p>Один человек может создать несколько аккаунтов с разными именами. Некоторые специфические имена, вроде того же "root", зарезервированы и запрещены к использованию.
</p>
<p>Пользователи часто объединятся в "группы". Добавление пользователя в определённую группу обычно даёт ему дополнительные права, связанные с этой группой.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Если у вас нет опыта работы с аккаунтами и правами, то используйте указанные в статье инструменты с осторожностью. Не пытайтесь что-либо сделать с <i>существующими</i> аккаутами пользователей, за исключением разве что своего собственного.
</div>
<div class="mw-heading mw-heading2"><h2 id="Права_и_владельцы">
<span id=".D0.9F.D1.80.D0.B0.D0.B2.D0.B0_.D0.B8_.D0.B2.D0.BB.D0.B0.D0.B4.D0.B5.D0.BB.D1.8C.D1.86.D1.8B"></span>Права и владельцы</h2></div>
<p>Из статьи <a rel="nofollow" class="external text" href="https://web.archive.org/web/20190816135930/http://ph7spot.com/musings/in-unix-everything-is-a-file">Всё в UNIX есть файл</a>:
</p>
<dl><dd>В операционной системе UNIX были сформулированы некоторые общие идеи и принципы, которые оказали в дальнейшем сильное влияние на её архитектуру, пользовательский интерфейс, культуру и развитие. В частности, один из основополагающих принципов выражается мантрой "всё есть файл", которую часто называют определяющим пунктом UNIX в целом.</dd></dl>
<dl><dd>Суть данного принципа заключается в создании унифицированного способа доступа к широкому диапазону ресурсов ввода/вывода: к документам, каталогам, жёстким дискам, дискам CD-ROM, модемам, клавиатурам, принтерам, мониторам, терминалам и даже межпроцессным и сетевым взаимодействиям. Цель — предоставление универсальной абстракции для каждого из этих объектов, названных отцами-оснвоателями UNIX общим термином "файл". Поскольку доступ к файлу осуществляется с помощью одного и того же API, стало возможно использовать одинаковый набор базовых команд для чтения и записи таких разнородных устройств, как диск, клавиатура, документ или сетевой интерфейс.</dd></dl>
<p>Из статьи <a rel="nofollow" class="external text" href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.597.4699&amp;rep=rep1&amp;type=pdf">Использование абстракции файла в UNIX для работы с сетью</a><sup title="Статус последней проверки: 401">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2024-01-13 ⓘ]</sup>:
</p>
<dl><dd>Абстракция файла, существующая в операционной системе UNIX и совместимых с ней системах, является основополагающей и всеобъемлющей. Любая системная служба и интерфейс устройства теперь могут реализовываться так, чтобы предоставлять другим приложениям метафору файла или файловой системы. Это открывает новые способы их использования и значительно расширяет возможности существующих приложений — простые инструменты, разработанные для решения узких задач, теперь, вооружившись абстракцией файла UNIX, могут использоваться совершенно по-новому. Небольшая утилита вроде cat, предназначенная для считываения одного или нескольких файлов и вывода их содержимого на стандартный поток вывода, теперь может выполнять чтение с устройств ввода-вывода с помощью специальных файлов устройств, как правило расположенных в каталоге <code>/dev</code>. С другой стороны, во многих системах запись и проигрываение звука теперь выполняется всего лишь командами "<code>cat /dev/audio &gt; myfile</code>" и "<code>cat myfile &gt; /dev/audio</code>" соответственно.</dd></dl>
<p>В GNU/Linux каждый файл принадлежит какому-то пользователю и группе. Существует три типа прав доступа — чтение, запись и исполнение. Права доступа задаются по отдельности для владельца-пользователя, владельца-группы, и для прочих пользователей, которые не входят в первые две категории. Владельцев файла и права доступа можно узнать с помощью "длинного" формата команды <a href="../ru/Core_utilities.html#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5" title="Core utilities (Русский)">ls</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /boot/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">total 13740
drwxr-xr-x 2 root root    4096 Jan 12 00:33 grub
-rw-r--r-- 1 root root 8570335 Jan 12 00:33 initramfs-linux-fallback.img
-rw-r--r-- 1 root root 1821573 Jan 12 00:31 initramfs-linux.img
-rw-r--r-- 1 root root 1457315 Jan  8 08:19 System.map26
-rw-r--r-- 1 root root 2209920 Jan  8 08:19 vmlinuz-linux
</pre>
<p>Первая колонка содержит права доступа к файлу (например, правами файла <code>initramfs-linux.img</code> являются <code>-rw-r--r--</code>). Третья и четвёртая колонки содержат соответственно пользователя и группу, которым принадлежит файл. В этом примере все файлы принадлежат пользователю <i>root</i> и группе <i>root</i>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /media/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">total 16
drwxrwx--- 1 root vboxsf 16384 Jan 29 11:02 sf_Shared
</pre>
<p>В этом примере каталог <code>sf_Shared</code> принадлежит пользователю <i>root</i> и группе <i>vboxsf</i>. Владельца и права доступа можно также определить утилитой <i>stat</i>.
</p>
<p>Пользователь-владелец:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ stat -c %U /media/sf_Shared/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root
</pre>
<p>Группа-владелец:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ stat -c %G /media/sf_Shared/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vboxsf
</pre>
<p>Права доступа:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ stat -c %A /media/sf_Shared/</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">drwxrwx---
</pre>
<p>Права доступа отображаются тремя группами символов, которые являются правами соответственно пользователя, группы и всех остальных. Например, строка <code>-rw-r--r--</code> говорит о том, что владелец файла имеет права на чтение и запись, но не на выполнение (<code>rw-</code>), а пользователи из группы-владельца и прочие пользователи имеют доступ только на чтение (<code>r--</code> и <code>r--</code>). С другой стороны, строка <code>drwxrwx---</code> говорит о том, что у пользователя и группы права на чтение, запись и исполнение (<code>rwx</code> и <code>rwx</code>), а все остальные доступа к файлу не имеют вовсе (<code>---</code>). Первый символ в строке означает тип файла.
</p>
<p>Вывести список всех файлов, принадлежащих пользователю или группе, можно с помощью утилиты <a href="../ru/Core_utilities.html#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5" title="Core utilities (Русский)">find</a>:
</p>
<pre># find / -group <i>имя_группы</i>
</pre>
<pre># find / -group <i>номер_группы</i>
</pre>
<pre># find / -user <i>имя_пользователя</i>
</pre>
<p>Изменить владельцев файла можно командой <a href="../en/File_permissions_and_attributes.html#Changing_ownership" class="mw-redirect" title="Chown">chown</a>, а права доступа меняются командой <a href="../en/File_permissions_and_attributes.html#Changing_permissions" class="mw-redirect" title="Chmod">chmod</a>:
</p>
<p>См. также <span class="plainlinks archwiki-template-man" title="$ man 1 chown"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/chown.1">chown(1)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 1 chmod"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/chmod.1">chmod(1)</a></span> и <a rel="nofollow" class="external text" href="https://www.linux.com/tutorials/understanding-linux-file-permissions">Linux file permissions</a>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Shadow">Shadow</h2></div>
<p>В Arch Linux инструменты для работы с пользователями, группами и паролями собраны в пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=shadow">shadow</a></span>, который являеется зависимостью <a href="../ru/Meta_package_and_package_group.html#%D0%A0%D0%B0%D0%B7%D0%BD%D0%B8%D1%86%D0%B0_%D0%BC%D0%B5%D0%B6%D0%B4%D1%83_%D0%BC%D0%B5%D1%82%D0%B0-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%BC_%D0%B8_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%BE%D0%B9_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Мета-пакета">мета-пакета</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Список_файлов">
<span id=".D0.A1.D0.BF.D0.B8.D1.81.D0.BE.D0.BA_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span>Список файлов</h2></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Ни в коем случае не редактируйте эти файлы вручную. Есть специальные программы, которые обеспечивают правильную работу с базами данных и гарантируют отсутствие ошибок в форматировании. Подробнее см. <a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">#Управление пользователями</a> и <a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8">#Управление группами</a>.
</div>
<table class="wikitable">
<tbody>
<tr>
<th>Файл</th>
<th>Назначение
</th>
</tr>
<tr>
<td><code>/etc/shadow</code></td>
<td>Безопасное хранение информации о пользователях
</td>
</tr>
<tr>
<td><code>/etc/passwd</code></td>
<td>Информация о пользователях
</td>
</tr>
<tr>
<td><code>/etc/gshadow</code></td>
<td>Скрытая информация о группах
</td>
</tr>
<tr>
<td><code>/etc/group</code></td>
<td>Принадлежность пользователей к группам
</td>
</tr>
</tbody>
</table>
<div class="mw-heading mw-heading2"><h2 id="Управление_пользователями">
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F.D0.BC.D0.B8"></span>Управление пользователями</h2></div>
<p>Список пользователей, которые в настоящий момент выполнили вход в систему, можно вывести командой <code>who</code>. Список хранящихся в <a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">базе данных</a> аккаунтов и их характеристик можно вывести командой <code>passwd -Sa</code> с правами root. Описание формата вывода вы найдёте в руководстве <span class="plainlinks archwiki-template-man" title="$ man 1 passwd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/passwd.1">passwd(1)</a></span>.
</p>
<p>Добавление нового пользователя выполняется командой <i>useradd</i>:
</p>
<pre># useradd -m -G <i>дополнительные_группы</i> -s <i>оболочка_входа</i> <i>имя_пользователя</i>
</pre>
<dl>
<dt>
<code>-m</code>/<code>--create-home</code>
</dt>
<dd>указание создать домашний каталог пользователя по адресу <code>/home/<i>имя_пользователя</i></code>. В каталоге создаётся набор стартовых файлов, владельцем которых назначается новый пользователь.</dd>
<dt>
<code>-G</code>/<code>--groups</code>
</dt>
<dd>список дополнительных групп, в которые должен войти новый пользователь. Группы в списке разделяются запятыми. По умолчанию новый пользователь добавляется только в начальную группу (см. ниже в этом разделе).</dd>
<dt>
<code>-s</code>/<code>--shell</code>
</dt>
<dd>путь к файлу оболочки входа (login shell) пользователя. Убедитесь, что пакет с необходимой оболочкой установлен, если указали что-то, отличное от <a href="../ru/Bash.html" title="Bash (Русский)">Bash</a>.</dd>
</dl>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Файл оболочки входа должен совпадать с одним из указанных в файле <code>/etc/shells</code>. В противном случае <a href="../en/PAM.html" title="PAM">PAM</a>-модуль <code>pam_shell</code> отклонит запрос на вход. В частности, нельзя вместо <code>/bin/bash</code> использовать <code>/usr/bin/bash</code>, разве что вы заранее настроили файл <code>/etc/shells</code> соответствующим образом. Подробнее см. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/33677">FS#33677</a>.
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> При создании пользователя необходимо также с помощью утилиты <i>passwd</i> задать пароль. Подробнее см. <a href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80_%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F">#Пример добавления пользователя</a>.
</div>
<p>Группы в параметре <code>-G</code> задаются именами или номерами существующих групп. Если этот парамет не указан, то поведение <i>useradd</i> зависит от переменной <code>USERGROUPS_ENAB</code> в файле <code>/etc/login.defs</code>. Стандартное поведение (<code>USERGROUPS_ENAB yes</code>) — создать группу, название которой совпадает с именем нового пользователя.
</p>
<p>Когда оболочка входа не нужна, например, если аккаунт пользователя создаётся для работы неинтерактивной службы, вместо обычной оболочки можно указать <code>/usr/bin/nologin</code>. В этом случае процедура входа будет корректно отклоняться (см. <span class="plainlinks archwiki-template-man" title="$ man 8 nologin"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nologin.8">nologin(8)</a></span>).
</p>
<p>Другие доступные параметры можно найти в руководстве <span class="plainlinks archwiki-template-man" title="$ man 8 useradd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/useradd.8">useradd(8)</a></span>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Пример_добавления_пользователя">
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80_.D0.B4.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span>Пример добавления пользователя</h3></div>
<p>Команда ниже добавит в систему пользователя <code>archie</code>, попутно создав для него домашний каталог, а также задействует настройки по умолчанию для групп, названий каталогов, используемых оболочек и проч.
</p>
<pre># useradd -m archie
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Узнать используемую по умолчанию оболочку входа можно командой <code>useradd --defaults</code>. Обычно в роли такой оболочки выступает Bash; чтобы это изменить, воспользуйтесь флагом <code>-s</code>/<code>--shell</code>. В файле <code>/etc/shells</code> перечислены доступные оболочки.
</div>
<p>Хотя задавать пароль для защиты нового пользователя не обязательно, всё же рекомендуется это сделать:
</p>
<pre># passwd archie
</pre>
<p>Указанная выше команда <i>useradd</i> автоматически создаст группу <code>archie</code> и сделает её группой по умолчанию для пользователя <code>archie</code>. Считается правильным подходом создавать отдельную группу для каждого нового пользователя.
</p>
<p>Флагом <code>-g</code> можно задать другую исходную группу, но объединять пользователей в одну группу (например, <code>users</code>) в многопользовательских системах не рекомендуется. Причина в том, что  для совместного доступа на запись для группы пользователей значение <a href="../en/Umask.html" title="Umask">umask</a> устанавливается на <code>002</code>; в итоге все члены группы смогут перезаписывать ваши файлы. См. также <a rel="nofollow" class="external text" href="https://web.archive.org/web/20210724233134/https://security.ias.edu/node/441">User Private Groups</a>. Если всё же необходимо добавить пользователя в какую-то группу, то при его создании укажите её как вспомогательную.
</p>
<p>Если следовать рекомендованному подходу, т.е. создать группу, название которой совпадает с именем пользователя, то все файлы по умолчанию доступны на запись только создавшему их пользователю. Если вы хотите сделать некий каталог доступным на запись для всех членов определённой группы, то этому каталогу нужно установаить в правах доступа т.н. "бит setgid". Все создаваемые в этом каталоге файлы и подкаталоги получат в качестве группы-владельца группу родительского каталога, а не группу пользователя, их создавшего. Т.о. эти файлы будут доступны на запись для всех членов группы:
</p>
<pre># chmod g+s <i>каталог_с_совместным_доступом</i>
</pre>
<p>Временно изменить идентификатор группы GID пользователя можно командой <i>newgrp</i>. Например, после команды <code>newgrp <i>название_группы</i></code> создаваемые пользователем файлы будут привязаны к идентификатору группы <code><i>название_группы</i></code>; при этом заново выполнять вход не потребуется. Чтобы изменить GID обратно на исходный, выполните команду <i>newgrp</i> без аргументов.
</p>
<div class="mw-heading mw-heading3"><h3 id="Пример_добавления_системного_пользователя">
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80_.D0.B4.D0.BE.D0.B1.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F"></span>Пример добавления системного пользователя</h3></div>
<p>Системные пользователи чаще всего создаются для запуска процесоов/демонов другими пользователями, для защиты (например, с помощью <a href="../en/File_permissions_and_attributes.html#Changing_ownership" class="mw-redirect" title="Chown">chown</a>) файлов и/или каталогов, а также по другим соображениям безопасности.
</p>
<p>Команда ниже создаст системного пользователя без доступа к командной оболочке и без домашнего каталога (можно также указать флаг <code>-U</code>, чтобы создать группу, название которой совпадает с именем пользователя, и добавить пользователя в эту группу):
</p>
<pre># useradd -r -s /usr/bin/nologin <i>имя_пользователя</i>
</pre>
<p>Если необходимо присвоить новому пользователю конкретные идентификаторы UID и GID, то укажите их флагами <code>-u</code>/<code>--uid</code> и <code>-g</code>/<code>--gid</code>:
</p>
<pre># useradd -r -u 850 -g 850 -s /usr/bin/nologin <i>имя_пользоваетеля</i>
</pre>
<div class="mw-heading mw-heading3"><h3 id="Смена_имени_пользователя_или_домашнего_каталога">
<span id=".D0.A1.D0.BC.D0.B5.D0.BD.D0.B0_.D0.B8.D0.BC.D0.B5.D0.BD.D0.B8_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F_.D0.B8.D0.BB.D0.B8_.D0.B4.D0.BE.D0.BC.D0.B0.D1.88.D0.BD.D0.B5.D0.B3.D0.BE_.D0.BA.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3.D0.B0"></span>Смена имени пользователя или домашнего каталога</h3></div>
<p>Команда для изменения домашнего каталога пользователя:
</p>
<pre># usermod -d <i>/новый/домашний/каталог</i> -m <i>имя_пользователя</i>
</pre>
<p>Флаг <code>-m</code> нужен для автоматического создания нового каталога и переноса в него всего содержимого старого.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Можно создать ссылку из прежнего домашнего каталога на новый. Это позволит программам находить нужные файлы, путь которых задан в исходниках явно.
<pre># ln -s <i>/новый/домашний/каталог/ /старый/домашний/каталог</i>
</pre>
<p>Обратите внимание, что в строке <code>/старый/домашний/каталог</code> отсутствует закрывающй символ <code>/</code>.
</p>
</div>
<p>Команда для изменения имени пользователя:
</p>
<pre># usermod -l <i>новое_имя</i> <i>старое_имя</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> При этом вы не должны быть залогинены пользователем, имя которого собираетесь изменить. Откройте новый терминал (например, комбинацией клавиш <code>Ctrl+Alt+F6</code>), после чего войдите либо в root-аккаунт, либо в аккаунт другого пользователя, <a href="../en/List_of_applications/Security.html#Privilege_elevation" title="List of applications/Security">повысив</a> права до root. <i>usermod</i> не позволит по ошибке изменить имя "самого себя".
</div>
<p>Смена имени пользоваеля проста и безопасна, когда выполняется правильно. Просто используйте <a href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">usermod</a>. Если пользователь входит в "личную" группу с таким же именем, то переименовать её можно командой <a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8">groupmod</a>.
</p>
<p>Альтернативный способ — отредактировать непосредственно файл <code>/etc/passwd</code>. В разделе <a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">#База данных пользователей</a> дано описание его формата.
</p>
<p>Также следует имейть в виду:
</p>
<ul>
<li>При использовании <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a> убедитесь, что не забыли обновить файл <code>/etc/sudoers</code>, добавив в него нового пользователя (используйте для этого утилиту <i>visudo</i> с правами root).</li>
<li>Задачи <a href="../en/Cron.html#Crontab_format" title="Cron">crontab</a> также необходимо отредактировать, переименовав файл пользователя в файле <code>/var/spool/cron</code>. Затем выполните <code>crontab -e</code> и отредактируйте пути к файлам и права доступа к ним.</li>
<li>Содержимое пользовательских файлов и каталогов <a href="../ru/Wine.html" title="Wine (Русский)">Wine</a> (вроде <code>~/.wine/drive_c/users</code> и <code>~/.local/share/applications/wine/Programs</code>) необходимо отредактировать.</li>
<li>Некоторые дополнения Thunderburd, вроде <a rel="nofollow" class="external text" href="https://www.enigmail.net/index.php/en/">Enigmail</a>, возможно придётся переустановить.</li>
<li>Все элементы системы (комбинации клавиш, сценарии оболочки и т.п.), где используются абсолютные пути к файлам в старом домашнем каталоге, необходимо изменить. Чтобы избежать этого в будущем, используйте в скриптах переменные <code>~</code> или <code>$HOME</code> для обозначения домашнего каталога.</li>
<li>Тажке не забудьте отредактировать файлы настроек в каталоге <code>/etc/</code>, которые полагаются на абсолютные пути (например, файлы Samba, CUPS и т.д.). Найти нуждающиеся в редактировании файлы проще всего командой <code>grep -r <i>старое_имя_пользователя</i> *</code>.</li>
</ul>
<div class="mw-heading mw-heading3"><h3 id="Другие_примеры_управления_пользователями">
<span id=".D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BF.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B_.D1.83.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F.D0.BC.D0.B8"></span>Другие примеры управления пользователями</h3></div>
<p>Команда для добавления информации о пользователе (например, настоящего имени) в виде комментария <a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">GECOS</a>:
</p>
<pre># chfn <i>имя_пользователя</i>
</pre>
<p>(здесь <i>chfn</i> запускается в интерактивном режиме).
</p>
<p>Либо же можно добавить более длинный GECOS-комментарий командой:
</p>
<pre># usermod -c "Comment" <i>имя_пользователя</i>
</pre>
<p>Следующая команда пометит пароль пользователя как истёкший и потребует от него при следующем входе создать новый:
</p>
<pre># chage -d 0 <i>имя_пользователя</i>
</pre>
<p>Удаляются аккаунты пользователей командой <i>userdel</i>:
</p>
<pre># userdel -r <i>имя_пользователя</i>
</pre>
<p>Флаг <code>-r</code> указывает на то, что домашний каталог и почтовый ящик тоже должны быть удалены.
</p>
<p>Команда для изменения оболочки входа пользователя:
</p>
<pre># usermod -s <i>/bin/bash</i> <i>имя_пользователя</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет</strong> Скрипт <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/adduser/">adduser</a></span><sup><small>AUR</small></sup> позволяет выполнять действия команд <i>useradd</i>, <i>chfn</i> и <i>passwd</i> интерактивно. См. также <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/32893">FS#32893</a>.
</div>
<div class="mw-heading mw-heading2"><h2 id="База_данных_пользователей">
<span id=".D0.91.D0.B0.D0.B7.D0.B0_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D0.B5.D0.B9"></span>База данных пользователей</h2></div>
<p>Информация о пользователях хранится в открытом виде в файле <code>/etc/passwd</code>: каждая строка в нём представляет собой набор из семи полей, описывающих аккаунт.
</p>
<pre><i>account:password:UID:GID:GECOS:directory:shell</i>
</pre>
<p>По порядку:
</p>
<ul>
<li>
<code><i>account</i></code> — имя пользователя. Это поле не может быть пустым. Применяются стандартные для *NIX правила именования.</li>
<li>
<code><i>password</i></code> — пароль пользователя. <div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Файл <code>passwd</code> доступен на чтение для всех пользователей в системе, поэтому хранить в нём пароли (в виде хэш-сумм или как-то иначе) небезопасно. Вместо этого в Arch Linux используются <a href="../ru/Security.html#%D0%A5%D1%8D%D1%88-%D1%81%D1%83%D0%BC%D0%BC%D1%8B_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9" title="Security (Русский)">shadow-пароли</a>: поле <code>password</code> содержит всего лишь символ <code>x</code>, а хэшированный пароль хранится в файле <code>/etc/shadow</code>, доступ к которому ограничен. По этой причине менять пароли лучше командой <i>passwd</i>.</div>
</li>
<li>
<code><i>UID</i></code> — численное значение идентификатора пользователя. В Arch Linux нумерация обычных пользователей (отличных от root) начинается с UID 1000.</li>
<li>
<code><i>GID</i></code> — численное значение идентификатора основной группы пользователя. Идентификаторы групп можно найти в файле <a href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8">/etc/group</a>.</li>
<li>
<code><i>GECOS</i></code> — необязательное поле, носящее информативный характер; обычно содержит настоящее имя пользователя, но может также использоваться службами вроде <i>finger</i> и изменяться командой <a href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8">chfn</a>. Поскольку поле необязательное, его можно оставить пустым.</li>
<li>
<code><i>directory</i></code> — используется командой входа для задания переменной окружения <code>$HOME</code>. Некоторые службы, для которых создаются специальные пользователи, используют для этого корневой каталог <code>/</code>, но обычные пользователи чаще всего хранят домашний каталог в разделе <code>/home</code>.</li>
<li>
<code><i>shell</i></code> — <a href="../en/b3d756c09ab2047961680194f77eca8b.html" class="mw-redirect" title="Командная оболочка">командная оболочка</a> пользователя. Это поле является необязательным, и если в нём ничего не указано, то используется оболочка <code>/bin/bash</code>.</li>
</ul>
<p>Пример:
</p>
<pre>jack:x:1001:1003:Jack Smith,some comment here,,:/home/jack:/bin/bash
</pre>
<p>Смысл строки следующий: пользователь <code>jack</code>, пароль хранится в <code>/etc/shadow</code>, идентификатор пользователя — 1001, идентификатор его основной группы 1003. Полное имя — Jack Smith, также имеется некоторый комментарий. Домашний каталог <code>/home/jack</code>, используемая командная оболочка — <a href="../ru/Bash.html" title="Bash (Русский)">Bash</a>.
</p>
<p>Команда <i>pwck</i> проверяет корректность базы данных. При этом она может отстортировать список пользоватей по идентификаторам групп, что бывает полезно при сравнении:
</p>
<pre># pwck -s
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Arch Linux при обновлении пакетов создаёт резервные файлы с суффиксом <i>.pacnew</i>. За исключением случая, когда pacman выводит сообщение с требованием что-то предпринять, при появлении файла базы данных с таким суффиксом его необходимо удалить. Добавление новых пользователей и групп должно производиться только утилитой <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-sysusers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sysusers.8">systemd-sysusers(8)</a></span> или сценариями установки пакетов.
</div>
<div class="mw-heading mw-heading2"><h2 id="Автоматическая_проверка_целостности">
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B0.D1.8F_.D0.BF.D1.80.D0.BE.D0.B2.D0.B5.D1.80.D0.BA.D0.B0_.D1.86.D0.B5.D0.BB.D0.BE.D1.81.D1.82.D0.BD.D0.BE.D1.81.D1.82.D0.B8"></span>Автоматическая проверка целостности</h2></div>
<p>Чтобы не запускать <code>pwck</code>/<code>grpck</code> вручную, можно воспользоваться <a href="../ru/Systemd/Timers.html" title="Systemd (Русский)/Timers (Русский)">таймером</a> systemd <code>shadow.timer</code> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=shadow">shadow</a></span>. Он по умолчанию включён и каждый день запускает службу <code>shadow.service</code>, которая, в свою очередь, будет запускать <span class="plainlinks archwiki-template-man" title="$ man 8 pwck"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pwck.8">pwck(8)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 8 grpck"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/grpck.8">grpck(8)</a></span> для проверки целосности файлов групп и пользователей.
</p>
<p>При обнаружении несоответствий группы можно отредактировать с помощью команды <span class="plainlinks archwiki-template-man" title="$ man 8 vigr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vigr.8">vigr(8)</a></span>, а пользователей — командой <span class="plainlinks archwiki-template-man" title="$ man 8 vipw"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/vipw.8">vipw(8)</a></span>. Эти утилиты предоставляют дополнительный слой безопасности, блокируя базы данных на время редактирования. В качестве редактора по умолчанию используется vi, но с помощью <a href="../ru/Environment_variables.html" title="Environment variables (Русский)">переменной окружения</a> <code>EDITOR</code> можно выбрать любой другой.
</p>
<div class="mw-heading mw-heading2"><h2 id="Управление_группами">
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D0.B0.D0.BC.D0.B8"></span>Управление группами</h2></div>
<p>В файле <code>/etc/group</code> перечислены существующие группы (подробнее см. <span class="plainlinks archwiki-template-man" title="$ man 5 group"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/group.5">group(5)</a></span>). Также существует файл <code>gshadow</code>, который используется достаточно редко (см. <span class="plainlinks archwiki-template-man" title="$ man 5 gshadow"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/gshadow.5">gshadow(5)</a></span>).
</p>
<p>Команда для вывода списка групп, в которых состоит пользователь:
</p>
<pre>$ groups <i>пользователь</i>
</pre>
<p>Если <code><i>пользователь</i></code> не указан, то будет выведен список групп текущего пользователя.
</p>
<p>Команда <i>id</i> позволяет узнать дополнительные подробности, вроде UID и GID пользователя:
</p>
<pre>$ id <i>пользователь</i>
</pre>
<p>Команда для вывода списка существующих групп:
</p>
<pre>$ cat /etc/group
</pre>
<p>Команда для создания новой группы:
</p>
<pre># groupadd <i>группа</i>
</pre>
<p>Добавить пользователя в группу можно командой <code>gpasswd</code> (см. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/58262">FS#58262</a> на предмет возможных ошибок):
</p>
<pre># gpasswd -a <i>пользователь</i> <i>группа</i>
</pre>
<p>Также добавить пользователя в группы можно командой <i>usermod</i> (здесь <code><i>доп_группы</i></code> — список групп, разделённых запятыми без пробелов):
</p>
<pre># usermod -aG <i>доп_группы</i> <i>пользователь</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Если не указать флаг <code>-a</code>, то команда удалит пользователя из всех групп, кроме указанных в списке <code><i>доп_группы</i></code>. В итоге пользователь будет числиться только в группах из этого списка и ни в каких более.
</div>
<p>Команда для изменения группы, например, переименования:
</p>
<pre># groupmod -n <i>новая_группа</i> <i>старая_группа</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Изменится название группы, но не численное значение GID. Файлы, принадлеживашие  старой группе, будут теперь принадлежать новой.
</div>
<p>Команда для удаления группы:
</p>
<pre># groupdel <i>группа</i>
</pre>
<p>Команда для удаления пользователя из группы:
</p>
<pre># gpasswd -d <i>пользователь</i> <i>группа</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Если пользователь в этот момент был залогинен, то ему придётся выйти из системы и снова выполнить вход, чтобы изменения вступили в силу.
</div>
<p>Проверить корректность базы данных групп можно командой <i>grpck</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно</strong> Arch Linux при обновлении пакетов создаёт резервные копии файлов с суффиксом <i>.pacnew</i>. За исключением случаев, когда pacman выводит сообщение с требованием что-то предпринять, файл базы данных с таким суффиксом необходимо удалить. Добавление новых пользователей и групп при установке пакетов должно производиться только утилитой <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-sysusers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sysusers.8">systemd-sysusers(8)</a></span> или установочными скриптами.
</div>
<div class="mw-heading mw-heading2"><h2 id="Список_групп">
<span id=".D0.A1.D0.BF.D0.B8.D1.81.D0.BE.D0.BA_.D0.B3.D1.80.D1.83.D0.BF.D0.BF"></span>Список групп</h2></div>
<p>В этом разделе объясняется назначение важнейших групп из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=filesystem">filesystem</a></span>. Существует множество других групп, которые создаются при установке пакетов с присвоением <a href="../DeveloperWiki:UID_/_GID_Database.html" title="DeveloperWiki:UID / GID Database">корректного GID</a>. Подробности вы найдёте на страницах руководств соответствующих программ.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание</strong> Удаление пакета не приводит к удалению автоматически созданных пользователей и групп. Это сделано намеренно, потому что в противном случае созданные в процессе работы программы файлы могут остаться без владельца, что потенциально представляет угрозу безопасности.
</div>
<div class="mw-heading mw-heading3"><h3 id="Пользовательские_группы">
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B8.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B"></span>Пользовательские группы</h3></div>
<p>Часто возникает необходимость добавить обычного (не root) пользователя в одну из групп, обеспечивающих доступ к периферийным устройствам или упрощающих системное администрирование:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Группа</th>
<th>Файлы</th>
<th>Назначение
</th>
</tr>
<tr>
<td>adm</td>
<td></td>
<td>Группа администрирования, обычно используется для чтения файлов защищённых логов. Позволяет читать файлы <a href="../ru/Systemd/Journal.html" class="mw-redirect" title="Systemd/Журнал">журнала</a>.
</td>
</tr>
<tr>
<td>ftp</td>
<td><code>/srv/ftp/</code></td>
<td>Доступ к файлам <a href="../en/List_of_applications/Internet.html#FTP_servers" title="List of applications/Internet">FTP-сервера</a>.
</td>
</tr>
<tr>
<td>games</td>
<td><code>/var/games</code></td>
<td>Доступ к некоторым игровым программам.
</td>
</tr>
<tr>
<td>http</td>
<td><code>/srv/http/</code></td>
<td>Доступ к файлам <a href="../en/List_of_applications/Internet.html#Web_servers" title="List of applications/Internet">HTTP-сервера</a>.
</td>
</tr>
<tr>
<td>log</td>
<td></td>
<td>Доступ к файлам логов в каталоге <code>/var/log/</code>, созданным <a href="../en/Syslog-ng.html" title="Syslog-ng">syslog-ng</a>.
</td>
</tr>
<tr>
<td>rfkill</td>
<td><code>/dev/rfkill</code></td>
<td>Управление питанием беспроводных устройств (используется <a href="../en/6e89d33647a95887a45756a376ed9afb.html#%D0%9F%D1%80%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D0%B5%D1%80%D0%B5%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F_Rfkill" class="mw-redirect" title="Настройка сети/Беспроводная сеть">rfkill</a>).
</td>
</tr>
<tr>
<td>sys</td>
<td></td>
<td>Администрирование принтеров с помощью <a href="../ru/CUPS.html" title="CUPS (Русский)">CUPS</a>.
</td>
</tr>
<tr>
<td>systemd-journal</td>
<td><code>/var/log/journal/*</code></td>
<td>Может использоваться как альтернатива группам <code>adm</code> и <code>wheel</code> для чтения журналов systemd <a rel="nofollow" class="external autonumber" href="https://github.com/systemd/systemd/blob/19aadacf92ad86967ffb678e37b2ff9e83cb9480/README#L161">[1]</a>. В противном случае отображаются только сообщения, созданные пользователем.
</td>
</tr>
<tr>
<td>uucp</td>
<td>
<code>/dev/ttyS[0-9]+</code>, <code>/dev/tts/[0-9]+</code>, <code>/dev/ttyUSB[0-9]+</code>, <code>/dev/ttyACM[0-9]+</code>, <code>/dev/rfcomm[0-9]+</code>
</td>
<td>Последовательные порты <a href="https://en.wikipedia.org/wiki/ru:RS-232" class="extiw" title="wikipedia:ru:RS-232">RS-232</a> и подключенные к ним устройства.
</td>
</tr>
<tr>
<td>wheel</td>
<td></td>
<td>Группа администрирования, даёт необходимые права. Имеет доступ к файлам <a href="../ru/Systemd/Journal.html" class="mw-redirect" title="Systemd/Журнал">журнала</a> и принтерам в <a href="../ru/CUPS.html" title="CUPS (Русский)">CUPS</a>. Также позволяет работать с утилитами <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a> и <a href="../en/Su.html" title="Su">su</a> (по умолчанию их не использует).
</td>
</tr>
</tbody>
</table>
<div class="mw-heading mw-heading3"><h3 id="Системные_группы">
<span id=".D0.A1.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.BD.D1.8B.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B"></span>Системные группы</h3></div>
<p>Следующие группы имеют значение для всей системы, и добавление в них пользователям производится только в указанных целях:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Группа</th>
<th>Файлы</th>
<th>Назначение
</th>
</tr>
<tr>
<td>dbus</td>
<td></td>
<td>Используется в <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dbus">dbus</a></span>
</td>
</tr>
<tr>
<td>kmem</td>
<td>
<code>/dev/port</code>, <code>/dev/mem</code>, <code>/dev/kmem</code>
</td>
<td>
</td>
</tr>
<tr>
<td>locate</td>
<td>
<code>/usr/bin/locate</code>, <code>/var/lib/locate</code>, <code>/var/lib/mlocate</code>, <code>/var/lib/slocate</code>
</td>
<td>См. <a href="../en/Locate.html" title="Locate">locate</a>.
</td>
</tr>
<tr>
<td>lp</td>
<td>
<code>/dev/lp[0-9]*</code>, <code>/dev/parport[0-9]*</code>
</td>
<td>Доступ к устройствам параллельного порта (принтеры и прочие).
</td>
</tr>
<tr>
<td>mail</td>
<td><code>/usr/bin/mail</code></td>
<td>
</td>
</tr>
<tr>
<td>nobody</td>
<td></td>
<td>Непривилегированная группа.
</td>
</tr>
<tr>
<td>proc</td>
<td><code>/proc/<i>pid</i>/</code></td>
<td>Группа для сбора информации о процессах. Должна быть задана явно опцией монтирования <code>gid=</code>, не работает, если смонтировать <a rel="nofollow" class="external text" href="https://docs.kernel.org/filesystems/proc.html">файловую систему proc</a> с опцией <code>hidepid=</code>
</td>
</tr>
<tr>
<td>root</td>
<td><code>/*</code></td>
<td>Полный доступ к администрированию и управлению системой (root, admin).
</td>
</tr>
<tr>
<td>smmsp</td>
<td></td>
<td>Группа <a href="../en/Sendmail.html" title="Sendmail">sendmail</a>.
</td>
</tr>
<tr>
<td>tty</td>
<td>
<code>/dev/tty</code>, <code>/dev/vcc</code>, <code>/dev/vc</code>, <code>/dev/ptmx</code>
</td>
<td>
</td>
</tr>
<tr>
<td>utmp</td>
<td>
<code>/run/utmp</code>, <code>/var/log/btmp</code>, <code>/var/log/wtmp</code>
</td>
<td>
</td>
</tr>
</tbody>
</table>
<div class="mw-heading mw-heading3"><h3 id="Группы,_существовавшие_до_перехода_на_systemd">
<span id=".D0.93.D1.80.D1.83.D0.BF.D0.BF.D1.8B.2C_.D1.81.D1.83.D1.89.D0.B5.D1.81.D1.82.D0.B2.D0.BE.D0.B2.D0.B0.D0.B2.D1.88.D0.B8.D0.B5_.D0.B4.D0.BE_.D0.BF.D0.B5.D1.80.D0.B5.D1.85.D0.BE.D0.B4.D0.B0_.D0.BD.D0.B0_systemd"></span>Группы, существовавшие до перехода на systemd</h3></div>
<p>До перехода Arch Linux на <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a> пользователи должны были вручную добавляться к этим группам, чтобы получить доступ к устройствам. Такой подход был признан устаревшим после перехода на <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>, помечающий устройства <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/blob/main/rules.d/70-uaccess.rules.in">меткой</a> <code>uaccess</code>, и <i>logind</i>, динамически присваивающий пользователям права доступа с помощью <a href="../ru/ACL.html" class="mw-redirect" title="ACL (Русский)">ACL</a> в соответствии с тем, какой сеанс активен на данный момент. Обратите внимание, что чтобы вышеперечисленное работало, сеанс должен быть корректным (см. <a href="../en/General_troubleshooting.html#Session_permissions" title="General troubleshooting">General troubleshooting#Session permissions</a>).
</p>
<p>Есть несколько важных исключений, которые требуют добавления пользователей в группы ниже — например, если вы хотите разрешить неавторизованным пользователям доступ к устройствам. Тем не мнее, имейте в виду, что это может стать причиной определённых проблем (например, группа <code>audio</code> мешает быстрому переключению между пользователями, а также даёт приложениям возможность блокировать програмное микширование).
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Группы</th>
<th>Файлы</th>
<th>Назначение
</th>
</tr>
<tr>
<td>audio</td>
<td>
<code>/dev/audio</code>, <code>/dev/snd/*</code>, <code>/dev/rtc0</code>
</td>
<td>Прямой доступ к звуковому оборудованию для всех сеансов. По-прежнему требуется, чтобы <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> и <a href="../en/Open_Sound_System.html" class="mw-redirect" title="OSS">OSS</a> работали в удаленных сеансах, см. <a href="../en/Advanced_Linux_Sound_Architecture.html#User_privileges" class="mw-redirect" title="ALSA">ALSA#User privileges</a>. Также используется в <a href="../en/JACK_Audio_Connection_Kit.html" class="mw-redirect" title="JACK">JACK</a> для выдачи пользователям разрешений на работу в режиме реального времени.
</td>
</tr>
<tr>
<td>disk</td>
<td><code>/dev/sd[a-zA-Z]*[1-9]</code></td>
<td>Доступ к блочным устройствам, не затронутым другими группами вроде <code>optical</code>, <code>floppy</code> и <code>storage</code>.
</td>
</tr>
<tr>
<td>floppy</td>
<td><code>/dev/fd[0-9]*</code></td>
<td>Доступ к флоппи-дискам.
</td>
</tr>
<tr>
<td>input</td>
<td>
<code>/dev/input/event[0-9]*</code>, <code>/dev/input/mouse[0-9]*</code>
</td>
<td>Доступ к устройствам ввода. Введено в systemd 215 <a rel="nofollow" class="external autonumber" href="https://lists.freedesktop.org/archives/systemd-commits/2014-June/006343.html">[2]</a>.
</td>
</tr>
<tr>
<td>kvm</td>
<td><code>/dev/kvm</code></td>
<td>Доступ к виртуальным машинам с использованием <a href="../ru/KVM.html" title="KVM (Русский)">KVM</a>.
</td>
</tr>
<tr>
<td>optical</td>
<td>
<code>/dev/sr[0-9]</code>, <code>/dev/sg[0-9]</code>
</td>
<td>Доступ к оптическим устройствам, таким как CD- и DVD-приводы.
</td>
</tr>
<tr>
<td>scanner</td>
<td><code>/var/lock/sane</code></td>
<td>Доступ к оборудованию сканера.
</td>
</tr>
<tr>
<td>storage</td>
<td>
<code>/dev/st[0-9]*[lma]*</code>, <code>/dev/nst[0-9]*[lma]*</code>
</td>
<td>Даёт доступ к съёмным носителям вроде USB-дисков, устройств flash/jump, MP3-плееров; позволяет монтировать носители <a rel="nofollow" class="external autonumber" href="https://lists.archlinux.org/archives/list/arch-dev-public@lists.archlinux.org/thread/7ITKMBKKHUB4SUN5SCS7FLSTEILKGIJH/#IEZCAXRIBMXGOMMW7C4Z3ADED32W24ZI">[3]</a>. В настоящее время используется в основном для работы с ленточными носителями без использования правил udev: <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/packaging/packages/systemd/-/blob/main/0001-Use-Arch-Linux-device-access-groups.patch">[4]</a>, <a rel="nofollow" class="external autonumber" href="https://github.com/systemd/systemd/blame/aaaf42cb44d4fcd598fca441a11856f3e8dd06d8/rules.d/50-udev-default.rules.in#L69">[5]</a>, <a rel="nofollow" class="external autonumber" href="https://elixir.bootlin.com/linux/v5.5.6/source/include/scsi/scsi_proto.h#L251">[6]</a>.
</td>
</tr>
<tr>
<td>video</td>
<td>
<code>/dev/fb/0</code>, <code>/dev/misc/agpgart</code>
</td>
<td>Доступ к устройствам захвата видео, аппаратное ускорение 2D/3D, framebuffer (<a href="../ru/X.html" class="mw-redirect" title="X (Русский)">X</a> можно использовать <i>без</i> поддержки этой группы).
</td>
</tr>
</tbody>
</table>
<div class="mw-heading mw-heading3"><h3 id="Неиспользуемые_группы">
<span id=".D0.9D.D0.B5.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D0.B5.D0.BC.D1.8B.D0.B5_.D0.B3.D1.80.D1.83.D0.BF.D0.BF.D1.8B"></span>Неиспользуемые группы</h3></div>
<p>Следующие группы в настоящий момент никак не используются.
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Группа</th>
<th>Файлы</th>
<th>Назначение
</th>
</tr>
<tr>
<td>bin</td>
<td></td>
<td>Историческое наследие.
</td>
</tr>
<tr>
<td>daemon</td>
<td></td>
<td>
</td>
</tr>
<tr>
<td>lock</td>
<td></td>
<td>Использовалась для lockfile-доступа. Требовалась для <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gnokii/">gnokii</a></span><sup><small>AUR</small></sup>.
</td>
</tr>
<tr>
<td>mem</td>
<td></td>
<td>
</td>
</tr>
<tr>
<td>network</td>
<td></td>
<td>Не использовалась по умолчанию. Могла использоваться в NetworkManager (см. <a href="../en/NetworkManager.html#Set_up_PolicyKit_permissions" title="NetworkManager">NetworkManager#Set up PolicyKit permissions</a>).
</td>
</tr>
<tr>
<td>power</td>
<td></td>
<td>
</td>
</tr>
<tr>
<td>uuidd</td>
<td></td>
<td>
</td>
</tr>
<tr>
<td>users</td>
<td></td>
<td>Основная группа для пользователей; использовалась, если приватные группы не были предусмотрены. Например, при создании с опцией <code>USERGROUPS_ENAB no</code> в файле <code>/etc/login.defs</code>, или командой <i>useradd</i> с флагом <code>-N</code>/<code>--no-user-group</code> пользователь помещался именно в эту группу.
</td>
</tr>
</tbody>
</table>
<div class="mw-heading mw-heading2"><h2 id="Прочие_инструменты_для_работы_с_базами_данных">
<span id=".D0.9F.D1.80.D0.BE.D1.87.D0.B8.D0.B5_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B_.D0.B4.D0.BB.D1.8F_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D1.8B_.D1.81_.D0.B1.D0.B0.D0.B7.D0.B0.D0.BC.D0.B8_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span>Прочие инструменты для работы с базами данных</h2></div>
<p>Для просмотра отдельных записей можно использовать <span class="plainlinks archwiki-template-man" title="$ man 1 getent"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/getent.1">getent(1)</a></span>:
</p>
<pre>% getent group tty
</pre>
<p>Как отмечалось в разделе <a href="#%D0%91%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D0%B5%D0%B9">#База данных пользователей</a>, для работы с базами данных лучше использовать специализированные утилиты вроде <code>passwd</code> и <code>chfn</code>. Если же они недоступны, то есть <code>vipw</code> и <code>vigr</code>. Данные редакторы предпочтительней обычных текстовых редакторов, поскольку они могут блокировать базу данных на случай одновременного редактирования, а также не позволяют добавить в базу некорректную запись. Shadow-базы редактируются командами <code>vipw -s</code> и <code>vigr -s</code> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span>, если утилита <i>chage</i> также недоступна. См. также <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/31414">FS#31414</a>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Security.html" title="Category:Security (Русский)">Security (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Users_and_groups_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=854138">https://wiki.archlinux.org/index.php?title=Users_and_groups_(Русский)&amp;oldid=854138</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 26 November 2025, at 06:41.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Users and groups (Русский)</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
