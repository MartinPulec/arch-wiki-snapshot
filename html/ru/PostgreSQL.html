<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>PostgreSQL (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.3">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PostgreSQL_Русский rootpage-PostgreSQL_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Установка</div>
		</a>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Начальная_настройка" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Начальная настройка</div>
		</a>
		
		<ul id="toc-Начальная_настройка-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Создание_первой_базы_данных" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B5%D1%80%D0%B2%D0%BE%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Создание первой базы данных</div>
		</a>
		
		<ul id="toc-Создание_первой_базы_данных-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Знакомство_с_PostgreSQL" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE_%D1%81_PostgreSQL">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Знакомство с PostgreSQL</div>
		</a>
		
			<button aria-controls="toc-Знакомство_с_PostgreSQL-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Знакомство с PostgreSQL subsection</span>
			</button>
		
		<ul id="toc-Знакомство_с_PostgreSQL-sublist" class="vector-toc-list">
			<li id="toc-Доступ_к_оболочке_базы_данных" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF_%D0%BA_%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B5_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Доступ к оболочке базы данных</div>
			</a>
			
			<ul id="toc-Доступ_к_оболочке_базы_данных-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Дополнительные_настройки" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Дополнительные настройки</div>
		</a>
		
			<button aria-controls="toc-Дополнительные_настройки-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Дополнительные настройки subsection</span>
			</button>
		
		<ul id="toc-Дополнительные_настройки-sublist" class="vector-toc-list">
			<li id="toc-Ограничение_доступа_к_суперпользователю_по_умолчанию" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BA_%D1%81%D1%83%D0%BF%D0%B5%D1%80%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8E_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Ограничение доступа к суперпользователю по умолчанию</div>
			</a>
			
			<ul id="toc-Ограничение_доступа_к_суперпользователю_по_умолчанию-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Требование_пароля_при_входе" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A2%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F_%D0%BF%D1%80%D0%B8_%D0%B2%D1%85%D0%BE%D0%B4%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Требование пароля при входе</div>
			</a>
			
			<ul id="toc-Требование_пароля_при_входе-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Доступ_только_через_Unix-сокет" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF_%D1%82%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_Unix-%D1%81%D0%BE%D0%BA%D0%B5%D1%82">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Доступ только через Unix-сокет</div>
			</a>
			
			<ul id="toc-Доступ_только_через_Unix-сокет-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Доступ_с_удалённых_хостов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF_%D1%81_%D1%83%D0%B4%D0%B0%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D1%85_%D1%85%D0%BE%D1%81%D1%82%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Доступ с удалённых хостов</div>
			</a>
			
			<ul id="toc-Доступ_с_удалённых_хостов-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_аутентификации_через_PAM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_PAM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Настройка аутентификации через PAM</div>
			</a>
			
			<ul id="toc-Настройка_аутентификации_через_PAM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Изменение_стандартного_каталога_данных" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>Изменение стандартного каталога данных</div>
			</a>
			
			<ul id="toc-Изменение_стандартного_каталога_данных-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Изменение_кодировки_новых_баз_данных_на_UTF-8" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BE%D0%B4%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8_%D0%BD%D0%BE%D0%B2%D1%8B%D1%85_%D0%B1%D0%B0%D0%B7_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BD%D0%B0_UTF-8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.7</span>Изменение кодировки новых баз данных на UTF-8</div>
			</a>
			
			<ul id="toc-Изменение_кодировки_новых_баз_данных_на_UTF-8-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Включение_подсчёта_контрольных_сумм" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%B4%D1%81%D1%87%D1%91%D1%82%D0%B0_%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D1%81%D1%83%D0%BC%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.8</span>Включение подсчёта контрольных сумм</div>
			</a>
			
			<ul id="toc-Включение_подсчёта_контрольных_сумм-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Графические_инструменты" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%93%D1%80%D0%B0%D1%84%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Графические инструменты</div>
		</a>
		
		<ul id="toc-Графические_инструменты-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Обновление_PostgreSQL" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_PostgreSQL">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Обновление PostgreSQL</div>
		</a>
		
			<button aria-controls="toc-Обновление_PostgreSQL-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Обновление PostgreSQL subsection</span>
			</button>
		
		<ul id="toc-Обновление_PostgreSQL-sublist" class="vector-toc-list">
			<li id="toc-pg_upgrade" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#pg_upgrade">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.1</span>pg_upgrade</div>
			</a>
			
			<ul id="toc-pg_upgrade-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Выгрузка_и_загрузка_вручную" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B8_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">7.2</span>Выгрузка и загрузка вручную</div>
			</a>
			
			<ul id="toc-Выгрузка_и_загрузка_вручную-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Решение проблем</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Ускорение_мелких_транзакций" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D0%BA%D0%BE%D1%80%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%B5%D0%BB%D0%BA%D0%B8%D1%85_%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D0%B9">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>Ускорение мелких транзакций</div>
			</a>
			
			<ul id="toc-Ускорение_мелких_транзакций-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Запретить_запись_на_диск_во_время_бездействия" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82%D0%B8%D1%82%D1%8C_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D1%8C_%D0%BD%D0%B0_%D0%B4%D0%B8%D1%81%D0%BA_%D0%B2%D0%BE_%D0%B2%D1%80%D0%B5%D0%BC%D1%8F_%D0%B1%D0%B5%D0%B7%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D1%8F">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.2</span>Запретить запись на диск во время бездействия</div>
			</a>
			
			<ul id="toc-Запретить_запись_на_диск_во_время_бездействия-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Проблемы_с_pgAdmin_4_после_обновления_до_PostgreSQL_12" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_pgAdmin_4_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B4%D0%BE_PostgreSQL_12">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.3</span>Проблемы с pgAdmin 4 после обновления до PostgreSQL 12</div>
			</a>
			
			<ul id="toc-Проблемы_с_pgAdmin_4_после_обновления_до_PostgreSQL_12-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PostgreSQL_не_может_запуститься_после_обновления_пакета_при_использовании_расширений" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PostgreSQL_%D0%BD%D0%B5_%D0%BC%D0%BE%D0%B6%D0%B5%D1%82_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D1%8C%D1%81%D1%8F_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0_%D0%BF%D1%80%D0%B8_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B8_%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D0%B9">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.4</span>PostgreSQL не может запуститься после обновления пакета при использовании расширений</div>
			</a>
			
			<ul id="toc-PostgreSQL_не_может_запуститься_после_обновления_пакета_при_использовании_расширений-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_запустить_PostgreSQL_со_старой_версией_базы_данных_при_обновлении_до_новой_версии_с_расширениями" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D1%8C_PostgreSQL_%D1%81%D0%BE_%D1%81%D1%82%D0%B0%D1%80%D0%BE%D0%B9_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B5%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D1%80%D0%B8_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8_%D0%B4%D0%BE_%D0%BD%D0%BE%D0%B2%D0%BE%D0%B9_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B8_%D1%81_%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D1%8F%D0%BC%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.5</span>Не удаётся запустить PostgreSQL со старой версией базы данных при обновлении до новой версии с расширениями</div>
			</a>
			
			<ul id="toc-Не_удаётся_запустить_PostgreSQL_со_старой_версией_базы_данных_при_обновлении_до_новой_версии_с_расширениями-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">PostgreSQL (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/PostgreSQL.html" title="PostgreSQL – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/PostgreSQL" title="PostgreSQL – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/PostgreSQL" title="PostgreSQL – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/PostgreSQL.html" title="PostgreSQL">PostgreSQL</a>. Дата последней синхронизации: 21 ноября 2022. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=PostgreSQL&amp;diff=0&amp;oldid=742761">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../en/PhpPgAdmin.html" title="PhpPgAdmin">PhpPgAdmin</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.postgresql.org/">PostgreSQL</a> — это поддерживаемая сообществом система управления базами данных с открытым исходным кодом.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Смотрите раздел <a href="#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_PostgreSQL">#Обновление PostgreSQL</a> для выполнения обязательных шагов перед установкой обновлений пакета PostgreSQL.</div>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql">postgresql</a></span>. Он также создаст системного пользователя <i>postgres</i>.
</p>
<p>Для переключения в пользователя <i>postgres</i> можно использовать <a href="../ru/List_of_applications/Security.html#%D0%9F%D0%BE%D0%B2%D1%8B%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%B2%D0%B8%D0%BB%D0%B5%D0%B3%D0%B8%D0%B9" title="List of applications (Русский)/Security (Русский)">программу для повышения привилегий</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Команды, которые нужно запускать от имени пользователя <i>postgres</i>, в данной статье обозначены префиксом  <code>[postgres]$</code>.</div>
<p>Для переключения в пользователя <i>postgres</i> можно использовать одну из следующих команд:
</p>
<ul>
<li>Если у вас есть <a href="../ru/Sudo.html" title="Sudo (Русский)">sudo</a> и ваш пользователь прописан в <a href="../ru/Sudo.html#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0" title="Sudo (Русский)">sudoers</a>: <pre>$ sudo -iu postgres</pre>
</li>
<li>Или через <a href="../ru/Su.html" title="Su (Русский)">su</a>: <pre>$ su
# su -l postgres
</pre>
</li>
</ul>
<p>Смотрите также документацию <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8">sudo(8)</a></span> или <span class="plainlinks archwiki-template-man" title="$ man 1 su"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/su.1">su(1)</a></span>.
</p>
<h2>
<span id=".D0.9D.D0.B0.D1.87.D0.B0.D0.BB.D1.8C.D0.BD.D0.B0.D1.8F_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Начальная_настройка">Начальная настройка</span>
</h2>
<p>В первую очередь необходимо инициализировать кластер баз данных:
</p>
<pre>[postgres]$ initdb -D /var/lib/postgres/data
</pre>
<p>Где опция <code>-D</code> указывает на стандартное расположение данных кластера (если вы хотите использовать другой каталог, смотрите раздел <a href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85">#Изменение стандартного каталога данных</a>). <code>initdb</code> принимает дополнительные аргументы:
</p>
<ul>
<li>По умолчанию <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/locale.html">локаль и кодировка для кластера баз данных</a> наследуются из вашего текущего окружения (используется значение <a href="../ru/Locale.html#LANG:_%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E" title="Locale (Русский)">$LANG</a>). Если вас это не устраивает, вы можете прописать нужные параметры вручную с помощью опций <code>--locale=<i>локаль</i></code> (где <i>локаль</i> должна быть одной из <a href="../ru/Locale.html#%D0%93%D0%B5%D0%BD%D0%B5%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D0%B5%D0%B9" title="Locale (Русский)">доступных системных локалей</a>) и <code>--encoding=<i>кодировка</i></code> для выбора кодировки (должна соответствовать выбранной локали). (После настройки базы данных вы сможете посмотреть используемые значения командой <code>[postgres]$ psql -l</code>.)</li>
<li>Если каталог с данными расположен на файловой системе без контроля целостности данных, вы можете включить встроенный в PostgreSQL <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/checksums.html">подсчёт контрольных сумм</a> для повышения гарантий целостности — для этого добавьте аргумент <code>--data-checksums</code>. Дополнительная информация описана в разделе <a href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE%D0%B4%D1%81%D1%87%D1%91%D1%82%D0%B0_%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D1%81%D1%83%D0%BC%D0%BC">#Включение подсчёта контрольных сумм</a>. (После настройки базы данных вы сможете посмотреть. включена ли эта функция, командой <code>[postgres]$ psql -c "SHOW data_checksums"</code>.)</li>
<li>Другие доступные опции можно посмотреть в <code>initdb --help</code> или <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/creating-cluster.html">официальной документации</a>.</li>
</ul>
<p>Пример для русской локали:
</p>
<pre>[postgres]$ initdb --locale=ru_RU.UTF-8 --encoding=UTF8 -D /var/lib/postgres/data --data-checksums
</pre>
<p>После инициализации на экране появится много строчек, некоторых из которых оканчиваются на <code>... ок</code>:
</p>
<pre>Файлы, относящиеся к этой СУБД, будут принадлежать пользователю "postgres".
От его имени также будет запускаться процесс сервера.

Кластер баз данных будет инициализирован с локалью "ru_RU.UTF-8".
Кодировка БД по умолчанию, выбранная в соответствии с настройками: "UTF8".
Выбрана конфигурация текстового поиска по умолчанию "russian".

Контроль целостности страниц данных отключён.

исправление прав для существующего каталога /var/lib/postgres/data... ок
создание подкаталогов... ок
выбирается реализация динамической разделяемой памяти... posix
выбирается значение max_connections по умолчанию... 100
выбирается значение shared_buffers по умолчанию... 128MB
выбирается часовой пояс по умолчанию... Europe/Moscow
создание конфигурационных файлов... ок
выполняется подготовительный скрипт... ок
выполняется заключительная инициализация... ок
сохранение данных на диске... ок

initdb: предупреждение: включение метода аутентификации "trust" для локальных подключений
Другой метод можно выбрать, отредактировав pg_hba.conf или используя ключи -A,
--auth-local или --auth-host при следующем выполнении initdb.

Готово. Теперь вы можете запустить сервер баз данных:

    pg_ctl -D /var/lib/postgres/data -l файл_журнала start
</pre>
<p>Если вы видите подобное, значит инициализация прошла успешно. Можно вернуться в обычного пользователя, выполнив команду <code>exit</code> в сеансе пользователя <i>postgres</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Подробнее об этом предупреждении читайте в разделе <a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BA_%D1%81%D1%83%D0%BF%D0%B5%D1%80%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8E_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E">#Ограничение доступа к суперпользователю по умолчанию</a>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Если вы хотите использовать путь отличный от <code>/var/lib/postgres</code>, нужно <a href="../ru/Systemd.html#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">отредактировать</a> файл службы systemd. Если вы помещаете его в <code>/home</code>, не забудьте отключить <code>ProtectHome</code>.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> 
<ul>
<li>Если база данных располагается на файловой системе <a href="../ru/Btrfs.html" title="Btrfs (Русский)">Btrfs</a>, стоит отключить <a href="../ru/Btrfs.html#%D0%9A%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8_(CoW)" title="Btrfs (Русский)">копирование при записи</a> для каталога перед созданием любых баз данных.</li>
<li>Если база данных располагается на файловой системе <a href="../en/ZFS.html" class="mw-redirect" title="ZFS (Русский)">ZFS</a>, прочтите <a href="../en/ZFS.html#Databases" title="ZFS">ZFS#Databases</a> перед созданием любых баз данных.</li>
</ul>
</div>
<p>Наконец, <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">запустите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>postgresql.service</code>.
</p>
<h2>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B5.D1.80.D0.B2.D0.BE.D0.B9_.D0.B1.D0.B0.D0.B7.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Создание_первой_базы_данных">Создание первой базы данных</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Если имя роли/пользователя совпадает с именем вашего пользователя в Linux, вы сможете получить доступ к оболочке PostgreSQL без явного указания имени пользователя (что весьма удобно).</div>
<p>Становимся пользователем postgres.
Добавляем нового пользователя базы данных с помощью команды <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/app-createuser.html">createuser</a>:
</p>
<pre>[postgres]$ createuser --interactive
</pre>
<p>Создаём новую базу данных от имени пользователя, имеющего доступ на чтение-запись, с помощью команды <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/app-createdb.html">createdb</a> (выполните эту команду в оболочке вашего обычного пользователя, если имя будущего владельца базы данных совпадает с вашим именем пользователя в Linux, в ином случае добавьте опцию <code>-O <i>имя-пользователя</i></code>)
</p>
<pre>$ createdb имяМоейБазы
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Если вы не выдали разрешение на создание баз данных вашему свежесозданному пользователю, добавьте опцию <code>-U postgres</code> к этой команде.</div>
<h2>
<span id=".D0.97.D0.BD.D0.B0.D0.BA.D0.BE.D0.BC.D1.81.D1.82.D0.B2.D0.BE_.D1.81_PostgreSQL"></span><span class="mw-headline" id="Знакомство_с_PostgreSQL">Знакомство с PostgreSQL</span>
</h2>
<h3>
<span id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D0.BA_.D0.BE.D0.B1.D0.BE.D0.BB.D0.BE.D1.87.D0.BA.D0.B5_.D0.B1.D0.B0.D0.B7.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Доступ_к_оболочке_базы_данных">Доступ к оболочке базы данных</span>
</h3>
<p>Становимся postgres пользователем.
Запускаем основную оболочку базы данных <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/app-psql.html">psql</a>, в которой мы сможем создавать, удалять базы данных/таблицы, задавать права и запускать команды SQL.
Используйте опцию <code>-d</code>, чтобы указать название базы данных, которую вы создали (если опцию не указать, то <code>psql</code> попытается подключиться к базе, имя которой совпадает с именем пользователя).
</p>
<pre>[postgres]$ psql -d имяМоейБазы
</pre>
<p>Некоторые полезные команды:
</p>
<p>Получение справки:
</p>
<pre>=&gt; \help
</pre>
<p>Подключение к определённой базе данных:
</p>
<pre>=&gt; \c &lt;database&gt;
</pre>
<p>Список всех пользователей и их уровни доступа:
</p>
<pre>=&gt; \du
</pre>
<p>Краткая информация о всех таблицах в текущей базе данных:
</p>
<pre>=&gt; \dt
</pre>
<p>Выход из оболочки <code>psql</code>:
</p>
<pre>=&gt; \q или CTRL+d
</pre>
<p>Есть, конечно, много других мета-команд, но именно эти должны помочь вам начать работу.
Для просмотра всех мета-команд введите:
</p>
<pre>=&gt; \?
</pre>
<h2>
<span id=".D0.94.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D0.BD.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B8"></span><span class="mw-headline" id="Дополнительные_настройки">Дополнительные настройки</span>
</h2>
<p>Файл настроек сервера баз данных PostgreSQL — <code>postgresql.conf</code>. Этот файл находится в папке данных сервера, обычно <code>/var/lib/postgres/data</code>. В этой же папке находятся основные файлы настроек включая и <code>pg_hba.conf</code>, который определяет параметры аутентификации, как для <a href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0_%D0%BA_%D1%81%D1%83%D0%BF%D0%B5%D1%80%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8E_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E">локальных пользователей</a>, так и для <a href="#%D0%94%D0%BE%D1%81%D1%82%D1%83%D0%BF_%D1%81_%D1%83%D0%B4%D0%B0%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D1%85_%D1%85%D0%BE%D1%81%D1%82%D0%BE%D0%B2">пользователей с других хостов</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> По умолчанию эта папка не доступна даже для просмотра (или поиска) от лица обычного пользователя.</div>
<h3>
<span id=".D0.9E.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.BE.D1.81.D1.82.D1.83.D0.BF.D0.B0_.D0.BA_.D1.81.D1.83.D0.BF.D0.B5.D1.80.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8E_.D0.BF.D0.BE_.D1.83.D0.BC.D0.BE.D0.BB.D1.87.D0.B0.D0.BD.D0.B8.D1.8E"></span><span class="mw-headline" id="Ограничение_доступа_к_суперпользователю_по_умолчанию">Ограничение доступа к суперпользователю по умолчанию</span>
</h3>
<p>По умолчанию <code>pg_hba.conf</code> <b>разрешает подключение любого локального пользователя к любому пользователю базы данных</b>, в том числе суперпользователю. Скорее всего это не то, что вам нужно, поэтому, чтобы разрешить подключение только пользователю <i>postgres</i>, измените эту строку:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/pg_hba.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     trust</pre>
<p>На эту:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/pg_hba.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             postgres                                peer</pre>
<p>Можно добавить дополнительные строки в зависимости от ваших потребностей.
</p>
<h3>
<span id=".D0.A2.D1.80.D0.B5.D0.B1.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D1.80.D0.BE.D0.BB.D1.8F_.D0.BF.D1.80.D0.B8_.D0.B2.D1.85.D0.BE.D0.B4.D0.B5"></span><span class="mw-headline" id="Требование_пароля_при_входе">Требование пароля при входе</span>
</h3>
<p>Измените <code>/var/lib/postgres/data/pg_hba.conf</code>, прописав метод аутентификации для каждого пользователя (или «all» для всех пользователей) на <code>scram-sha-256</code> (предпочтительно) или <code>md5</code> (менее безопасно; по возможности стоит его избегать):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/pg_hba.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             <i>пользователь</i>                            scram-sha-256</pre>
<p>Если вы выбрали <code>scram-sha-256</code>, также нужно изменить <code>/var/lib/postgres/data/postgresql.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/postgresql.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">password_encryption = scram-sha-256</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">Перезапустите</a> службу <code>postgresql.service</code> и заново пропишите пароли для пользователей с помощью SQL-запроса <code>ALTER USER <i>пользователь</i> WITH ENCRYPTED PASSWORD '<i>пароль</i>';</code>.
</p>
<h3>
<span id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D1.82.D0.BE.D0.BB.D1.8C.D0.BA.D0.BE_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_Unix-.D1.81.D0.BE.D0.BA.D0.B5.D1.82"></span><span class="mw-headline" id="Доступ_только_через_Unix-сокет">Доступ только через Unix-сокет</span>
</h3>
<p>В разделе «connections and authentication» пропишите:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/postgresql.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">listen_addresses = ''</pre>
<p>Это полностью отключит доступ через сеть.
Не забудьте <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустить">перезапустить</a> службу <code>postgresql.service</code> для применения изменений.
</p>
<h3>
<span id=".D0.94.D0.BE.D1.81.D1.82.D1.83.D0.BF_.D1.81_.D1.83.D0.B4.D0.B0.D0.BB.D1.91.D0.BD.D0.BD.D1.8B.D1.85_.D1.85.D0.BE.D1.81.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Доступ_с_удалённых_хостов">Доступ с удалённых хостов</span>
</h3>
<p>В разделе «connections and authentication» раскомментируйте или исправьте строку <code>listen_addresses</code> по вашему желанию, например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/postgresql.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">listen_addresses = 'localhost,<i>мой_локальный_ip'</i></pre>
<p>Можно использовать <code>'*'</code> для прослушивания всех доступных сетевых интерфейсов.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> PostgreSQL по умолчанию использует TCP-порт <code>5432</code> для удалённого доступа. Убедитесь, что этот порт открыт в вашем <a href="../ru/Category:Firewalls.html" title="Category:Firewalls (Русский)">межсетевом экране</a> и может принимать входящие соединения. Изменить порт можно в этом же файле настроек, под строкой <code>listen_addresses</code>.</div>
<p>Затем измените настройки аутентификации:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/pg_hba.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># TYPE  DATABASE        USER            ADDRESS                 METHOD
# IPv4 local connections:
host    all             all             <i>ip_адрес</i>/32             md5</pre>
<p>где <code><i>ip_адрес</i></code> — IP-адрес удалённого клиента.
</p>
<p>Смотрите также документацию по <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html">pg_hba.conf</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Ни отправка простого пароля, ни отправка md5-хэша (использованный в приведённом выше примере) через интернет не являются безопасными, если это не выполняется через защищенное SSL-соединение. Смотрите <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/ssl-tcp.html">Secure TCP/IP Connections with SSL</a>, чтобы узнать, как настроить PostgreSQL с использованием SSL.</div>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">Перезапустите</a> службу <code>postgresql.service</code> для применения изменений.
</p>
<p>В случае проблем посмотрите журнал сервера:
</p>
<pre># journalctl -u postgresql.service
</pre>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_.D0.B0.D1.83.D1.82.D0.B5.D0.BD.D1.82.D0.B8.D1.84.D0.B8.D0.BA.D0.B0.D1.86.D0.B8.D0.B8_.D1.87.D0.B5.D1.80.D0.B5.D0.B7_PAM"></span><span class="mw-headline" id="Настройка_аутентификации_через_PAM">Настройка аутентификации через PAM</span>
</h3>
<p>PostgreSQL предлагает несколько методов аутентификации. Если вы хотите разрешить пользователям аутентифицироваться с их системным паролем, необходимы дополнительные шаги. Сначала вам нужно включить <a href="../ru/PAM.html" title="PAM (Русский)">PAM</a> для соединения.
</p>
<p>Например, та же конфигурация, что и выше, но с включенным PAM:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/pg_hba.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># IPv4 local connections:
host   all   all   <i>ip_адрес</i>/32   pam</pre>
<p>Однако сервер PostgreSQL работает без прав root и не сможет получить доступ к файлу <code>/etc/shadow</code>. Мы можем обойти это, разрешив группе postgres доступ к этому файлу:
</p>
<pre># setfacl -m g:postgres:r /etc/shadow
</pre>
<h3>
<span id=".D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D1.82.D0.B0.D0.BD.D0.B4.D0.B0.D1.80.D1.82.D0.BD.D0.BE.D0.B3.D0.BE_.D0.BA.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3.D0.B0_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"></span><span class="mw-headline" id="Изменение_стандартного_каталога_данных">Изменение стандартного каталога данных</span>
</h3>
<p>По умолчанию PostgreSQL настроен на использование каталога <code>/var/lib/postgres/data</code> для хранения всех баз данных. Для его изменения выполните следующие шаги:
</p>
<p>Создайте новый каталог и сделайте пользователя postgres его владельцем:
</p>
<pre># mkdir -p /путь/к/pgroot/data
# chown -R postgres:postgres /путь/к/pgroot
</pre>
<p>Войдите в пользователя postgres и выполните инициализацию кластера:
</p>
<pre>[postgres]$ initdb -D /путь/к/pgroot/data
</pre>
<p><a href="../ru/Systemd.html#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Отредактируйте">Отредактируйте</a> службу <code>postgresql.service</code>, создав <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" class="mw-redirect" title="Drop-in файл">drop-in файл</a> и переопределив настройки <code>Environment</code> и <code>PIDFile</code>. Например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/postgresql.service.d/PGROOT.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Environment=PGROOT=<i>/путь/к/pgroot</i>
PIDFile=<i>/путь/к/pgroot/</i>data/postmaster.pid</pre>
<p>Если вы хотите использовать каталог в <code>/home</code>, добавьте ещё одну строку:
</p>
<pre>ProtectHome=false
</pre>
<h3>
<span id=".D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BE.D0.B4.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B8_.D0.BD.D0.BE.D0.B2.D1.8B.D1.85_.D0.B1.D0.B0.D0.B7_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D0.BD.D0.B0_UTF-8"></span><span class="mw-headline" id="Изменение_кодировки_новых_баз_данных_на_UTF-8">Изменение кодировки новых баз данных на UTF-8</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если вы выполнили <code>initdb</code> с опцией <code>--encoding=UTF8</code> или с использованием локали UTF-8, выполнять эти шаги не нужно.</div>
<p>Когда создаётся новая база данных (например, командой <code>createdb blog</code>), PostgreSQL просто копирует шаблон базы данных. Есть два стандартных шаблона: <code>template0</code> — ванильный, и <code>template1</code>, который используется по умолчанию и предназначен для редактирования администратором. Один из вариантов изменения кодировки новой базы данных — изменить шаблон <code>template1</code>. Для этого зайдите в оболочку PostgreSQL (<code>psql</code>) и выполните следующее:
</p>
<p>Сперва нужно удалить <code>template1</code>. Шаблоны нельзя удалять, так что сперва нужно преобразовать его в обычную базу данных:
</p>
<pre>UPDATE pg_database SET datistemplate = FALSE WHERE datname = 'template1';
</pre>
<p>Теперь можно удалить:
</p>
<pre>DROP DATABASE template1;
</pre>
<p>Затем создайте новую базу данных с новой кодировкой по умолчанию, в качестве шаблона используя <code>template0</code>:
</p>
<pre>CREATE DATABASE template1 WITH TEMPLATE = template0 ENCODING = 'UNICODE';
</pre>
<p>Теперь снова сделайте <code>template1</code> шаблоном:
</p>
<pre>UPDATE pg_database SET datistemplate = TRUE WHERE datname = 'template1';
</pre>
<p>По желанию, если вы не хотите, чтобы кто-либо подключался к этому шаблону, присвойте параметру <code>datallowconn</code> значение <code>FALSE</code>:
</p>
<pre>UPDATE pg_database SET datallowconn = FALSE WHERE datname = 'template1';
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Этот шаг может привести к проблемам при обновлении через <code>pg_upgrade</code>.</div>
<p>Теперь вы можете создать базу данных, используя стандартные команды в терминале:
</p>
<pre>[postgres]$ createdb blog
</pre>
<p>Если снова войти в <code>psql</code> и проверить базу данных, вы должны увидеть правильную кодировку новой базы данных:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">\l</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">                              List of databases
  Name    |  Owner   | Encoding  | Collation | Ctype |   Access privileges
-----------+----------+-----------+-----------+-------+----------------------
blog      | postgres | UTF8      | C         | C     |
postgres  | postgres | SQL_ASCII | C         | C     |
template0 | postgres | SQL_ASCII | C         | C     | =c/postgres
                                                     : postgres=CTc/postgres
template1 | postgres | UTF8      | C         | C     |
</pre>
<h3>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.BE.D0.B4.D1.81.D1.87.D1.91.D1.82.D0.B0_.D0.BA.D0.BE.D0.BD.D1.82.D1.80.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D1.81.D1.83.D0.BC.D0.BC"></span><span class="mw-headline" id="Включение_подсчёта_контрольных_сумм">Включение подсчёта контрольных сумм</span>
</h3>
<p>Если файлы вашей базы данных находятся на файловой системе, которая не использует контрольные суммы, то данные в ней могут незаметно повреждаться из-за битфлипов и аппаратных проблем. Хотя такие случаи редки, желательно включить <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/checksums.html">встроенный в PostgreSQL подсчёт контрольных сумм</a>, если вы заботитесь о целостности данных. Эта функция должна быть включена на уровне кластера, а не для отдельных баз данных или таблиц.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Ряд предостережений, которые стоит иметь в виду:
<ul>
<li>Есть <a rel="nofollow" class="external text" href="https://web.archive.org/web/20170218093959/https://blog.endpoint.com/2015/12/postgres-checksum-performance-impact.html">небольшое влияние на производительность</a>, особенно при чтении больших массивов данных с диска. На операции в памяти это не влияет.</li>
<li>PostgreSQL не может исправить повреждённые данные — он только прервёт транзакции, читающие с повреждённых страниц, чтобы предотвратить дальнейшее повреждение или получение некорректных результатов выполнения.</li>
<li>Контрольные суммы охватывают только страницы данных (строк) на диске, но не метаданные или управляющие структуры. Страницы в памяти не проверяются. Хранилища с коррекцией ошибок и память с ECC по-прежнему полезны.</li>
</ul>
</div>
<ul>
<li>Чтобы включить подсчёт контрольных сумм при создании кластера, добавьте аргумент <code>--data-checksums</code> к команде <code>initdb</code>.</li>
<li>Чтобы проверить, включен ли подсчёт контрольных сумм, выполните <code>[postgres]$ psql -c "SHOW data_checksums"</code> (выведется <code>off</code> или <code>on</code>).</li>
<li>Чтобы включить подсчёт контрольных сумм на существующем кластере:</li>
</ul>
<ol>
<li>
<a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Остановите">Остановите</a> службу <code>postgresql.service</code>.</li>
<li>Выполните команду <code>[postgres]$ pg_checksums --pgdata /var/lib/postgres/data --enable</code> (или <code>--disable</code>, если вы хотите наоборот выключить эту функцию). Включение подсчёта контрольных сумм приведёт к перезаписи всех страниц базы данных, что займет некоторое время в больших базах данных.</li>
<li>
<a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">Запустите</a> службу <code>postgresql.service</code>.</li>
</ol>
<h2>
<span id=".D0.93.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B"></span><span class="mw-headline" id="Графические_инструменты">Графические инструменты</span>
</h2>
<ul><li>
<b><a href="../en/PhpPgAdmin.html" title="PhpPgAdmin">phpPgAdmin</a></b> — Веб-интерфейс для администрирования PostgreSQL.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/phppgadmin/phppgadmin">https://github.com/phppgadmin/phppgadmin</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/phppgadmin/">phppgadmin</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>pgAdmin</b> — Комплексный графический интерфейс для управления PostgreSQL.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.pgadmin.org/">https://www.pgadmin.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pgadmin3/">pgadmin3</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">ссылка недействительна</a>: package not found]</sup> или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pgadmin4">pgadmin4</a></span><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">ссылка недействительна</a>: package not found]</sup>
</dd></dl>
<ul><li>
<b>pgModeler</b> — Инструмент для моделирования баз данных PostgreSQL.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://pgmodeler.io/">https://pgmodeler.io/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pgmodeler/">pgmodeler</a></span><sup><small>AUR</small></sup>
</dd></dl>
<p>Список инструментов, поддерживающих несколько разных СУБД, можно посмотреть в статье <a href="../en/List_of_applications/Documents.html#Database_tools" title="List of applications/Documents">List of applications/Documents#Database tools</a>.
</p>
<h2>
<span id=".D0.9E.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_PostgreSQL"></span><span class="mw-headline" id="Обновление_PostgreSQL">Обновление PostgreSQL</span>
</h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> How to upgrade when using third party extensions? (Discuss in <a href="../en/Talk:PostgreSQL.html#pg_upgrade_problem_if_extensions_(like_postgis)_are_used" title="Talk:PostgreSQL">Talk:PostgreSQL#pg_upgrade problem if extensions (like postgis) are used</a>)</div>
</div>
<p>Для обновления до новой мажорной версии PostgreSQL (например, с версии 13.x на версию 14.y) необходима специальная процедура.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Следуйте официальной <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/upgrading.html">документации по обновлению</a>.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Приведённые ниже инструкции потенциально могут привести к потере данных. Не запускайте эти команды вслепую без понимания того, что они делают. <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/backup.html">Сделайте резервную копию</a> перед началом.</div>
<p>Посмотреть текущую версию базы данных можно так:
</p>
<pre># cat /var/lib/postgres/data/PG_VERSION
</pre>
<p>Чтобы случайно не обновиться до несовместимой версии, рекомендуется <a href="../ru/Pacman.html#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%BD%D0%B0_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" title="Pacman (Русский)">запретить обновления</a> пакетов PostgreSQL.
</p>
<p>Минорные обновления вполне безопасны. Однако если вы случайно обновитесь до другой мажорной версии, то не сможете получить доступ к данным. Всегда проверяйте <a rel="nofollow" class="external text" href="https://www.postgresql.org/">домашнюю страницу PostgreSQL</a>, чтобы знать, какие шаги требуются для каждого обновления. Чтобы узнать, почему это так, смотрите <a rel="nofollow" class="external text" href="https://www.postgresql.org/support/versioning">политику управления версиями</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если вы используете расширения, смотрите разделы <a href="#PostgreSQL_%D0%BD%D0%B5_%D0%BC%D0%BE%D0%B6%D0%B5%D1%82_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D1%8C%D1%81%D1%8F_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0_%D0%BF%D1%80%D0%B8_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B8_%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D0%B9">#PostgreSQL не может запуститься после обновления пакета при использовании расширений</a> и <a href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D1%8C_PostgreSQL_%D1%81%D0%BE_%D1%81%D1%82%D0%B0%D1%80%D0%BE%D0%B9_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B5%D0%B9_%D0%B1%D0%B0%D0%B7%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BF%D1%80%D0%B8_%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8_%D0%B4%D0%BE_%D0%BD%D0%BE%D0%B2%D0%BE%D0%B9_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B8_%D1%81_%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D1%8F%D0%BC%D0%B8">#Не удаётся запустить PostgreSQL со старой версией базы данных при обновлении до новой версии с расширениями</a>.</div>
<p>Есть два основных способа обновить базу данных PostgreSQL. Подробности читайте в официальной документации.
</p>
<h3><span class="mw-headline" id="pg_upgrade">pg_upgrade</span></h3>
<p>Утилита <code>pg_upgrade</code> пытается скопировать как можно больше совместимых данных между кластерами и обновить всё остальное. Как правило, это самый быстрый метод обновления большинства экземпляров, хотя он требует доступа к бинарным файлам исходной и целевой версий PostgreSQL. Прочтите справочную страницу <span class="plainlinks archwiki-template-man" title="$ man 1 pg_upgrade"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pg_upgrade.1">pg_upgrade(1)</a></span>, чтобы понять, какие действия он выполняет. Для нетривиальных экземпляров (например, с потоковой репликацией или трансляцией журналов) сперва <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/pgupgrade.html">ознакомьтесь с официальной документацией</a>.
</p>
<p>Для тех, кто хочет использовать <code>pg_upgrade</code>, доступен пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql-old-upgrade">postgresql-old-upgrade</a></span>, который всегда отстаёт на одну мажорную версию от основного пакета PostgreSQL. Его можно установить параллельно с новой версией PostgreSQL. Для обновления более старых версий PostgreSQL доступны пакеты AUR, например <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/postgresql-12-upgrade/">postgresql-12-upgrade</a></span><sup><small>AUR</small></sup>. (Нужно использовать команду <code>pg_upgrade</code> из той версии PostgreSQL, на которую вы хотите обновиться.)
</p>
<p>Обратите внимание, что каталог кластера баз данных не меняется от версии к версии, поэтому перед запуском <code>pg_upgrade</code> необходимо переименовать старый каталог данных и выполнить миграцию в новый каталог. Новый кластер баз данных необходимо инициализировать с теми же параметрами, что и старый.
</p>
<p>Когда вы будете готовы к обновлению, выполните следующие шаги:
</p>
<ol>
<li>Пока старая база данных всё ещё доступна, соберите аргументы для команды <code>initdb</code>, которые использовались при создании базы. Команды для просмотра текущих настроек кластера описаны в разделе <a href="#%D0%9D%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">#Начальная настройка</a>.</li>
<li>
<a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Остановите">Остановите</a> службу <code>postgresql.service</code>. (Проверьте <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">статус юнита</a>, чтобы убедиться, что PostgreSQL завершился корректно, иначе <code>pg_upgrade</code> не сможет отработать корректно.)</li>
<li>
<a href="../ru/System_maintenance.html#%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B" title="System maintenance (Русский)">Обновите</a> пакеты <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql">postgresql</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql-libs">postgresql-libs</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql-old-upgrade">postgresql-old-upgrade</a></span>.</li>
<li>Переименуйте каталог со старым кластером и создайте каталог для нового кластера и временный каталог: <pre># mv /var/lib/postgres/data /var/lib/postgres/olddata
# mkdir /var/lib/postgres/data /var/lib/postgres/tmp
# chown postgres:postgres /var/lib/postgres/data /var/lib/postgres/tmp
[postgres]$ cd /var/lib/postgres/tmp</pre>
</li>
<li>Инициализируйте новый кластер командой <code>initdb</code> с теми же аргументами, которые использовались для старого кластера: <pre>[postgres]$ initdb -D /var/lib/postgres/data --locale=<i>ru_RU.UTF-8</i> --encoding=<i>UTF8</i> --data-checksums</pre>
</li>
<li>Обновите кластер, выполнив эту команду (замените <code><i>PG_VERSION</i></code> на номер старой версии, например <code>13</code>): <pre>[postgres]$ pg_upgrade -b /opt/pgsql-<i>PG_VERSION</i>/bin -B /usr/bin -d /var/lib/postgres/olddata -D /var/lib/postgres/data</pre> <div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Не забудьте обновить файлы конфигурации (например, <code>pg_hba.conf</code> и <code>postgresql.conf</code>) для соответствия старому кластеру.</div> <div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если <code>pg_upgrade</code> завершается с ошибкой <code>The source cluster was not shut down cleanly</code>, значит PostgreSQL не был остановлен перед запуском обновления. Остановите его, затем перезапустите кластер со старыми бинарными файлами, чтобы восстановить старые файлы кластера:  <pre>[postgres]$ /opt/pgsql-<i>PG_VERSION</i>/bin/pg_ctl start -D /var/lib/postgres/olddata &amp;&amp; /opt/pgsql-<i>PG_VERSION</i>/bin/pg_ctl stop -D /var/lib/postgres/olddata</pre> После этого можно снова выполнить <code>pg_upgrade</code>. Если обновиться всё равно не получается, остановите все процессы СУБД, <a href="../en/Downgrading_packages.html" class="mw-redirect" title="Downgrading packages (Русский)">откатитесь</a> на более старую версию PostgreSQL, восстановите предыдущие данные кластера из резервных копий и перезапустите процесс обновления.</div>
</li>
<li>
<a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">Запустите</a> службу <code>postgresql.service</code>.</li>
<li>
<b>Опционально:</b> Выполните <code>[postgres]$ /usr/bin/vacuumdb --all --analyze-in-stages</code> для пересчёта статистики анализатора запросов, что <a rel="nofollow" class="external text" href="https://www.cybertec-postgresql.com/en/postgresql-analyze-and-optimizer-statistics/">должно улучшить производительность запросов</a> вскоре после обновления (добавление аргумента  <code>--jobs=<i>ЧИСЛО_ЯДЕР_ПРОЦЕССОРА</i></code> может улучшить производительность этой команды).</li>
<li>
<b>Опционально:</b> Сделайте резервную копию каталога <code>/var/lib/postgres/olddata</code> на случай, если вдруг понадобится вернуть старую версию PostgreSQL.</li>
<li>Удалите каталог <code>/var/lib/postgres/olddata</code> со старыми данными кластера.</li>
<li>Удалите каталог <code>/var/lib/postgres/tmp</code>.</li>
</ol>
<h3>
<span id=".D0.92.D1.8B.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.B8_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B0_.D0.B2.D1.80.D1.83.D1.87.D0.BD.D1.83.D1.8E"></span><span class="mw-headline" id="Выгрузка_и_загрузка_вручную">Выгрузка и загрузка вручную</span>
</h3>
<p>Ещё можно сделать что-то вроде такого (после обновления и установки <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql-old-upgrade">postgresql-old-upgrade</a></span>):
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>В примере показано обновление с PostgreSQL 13; посмотрите в <code>/opt/</code> установленную у вас версию <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql-old-upgrade">postgresql-old-upgrade</a></span> и исправьте команды по необходимости.</li>
<li>Если вы меняли файл <code>pg_hba.conf</code>, вам может понадобиться временно разрешить полный доступ к старому кластеру с локальной системы. После обновления не забудьте прописать нужные вам настройки в новом кластере и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустить">перезапустить</a> службу <code>postgresql.service</code>.</li>
</ul>
</div>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Остановите">Остановите</a> службу <code>postgresql.service</code>.
</p>
<pre># mv /var/lib/postgres/data /var/lib/postgres/olddata
# mkdir /var/lib/postgres/data
# chown postgres:postgres /var/lib/postgres/data
[postgres]$ initdb -D /var/lib/postgres/data
[postgres]$ /opt/pgsql-13/bin/pg_ctl -D /var/lib/postgres/olddata/ start
# cp /usr/lib/postgresql/postgis-3.so /opt/pgsql-13/lib/ # Только если установлен postgis
[postgres]$ pg_dumpall -h /tmp -f /tmp/old_backup.sql
[postgres]$ /opt/pgsql-13/bin/pg_ctl -D /var/lib/postgres/olddata/ stop
</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">Запустите</a> службу <code>postgresql.service</code>.
</p>
<pre>[postgres]$ psql -f /tmp/old_backup.sql postgres
</pre>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3>
<span id=".D0.A3.D1.81.D0.BA.D0.BE.D1.80.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B5.D0.BB.D0.BA.D0.B8.D1.85_.D1.82.D1.80.D0.B0.D0.BD.D0.B7.D0.B0.D0.BA.D1.86.D0.B8.D0.B9"></span><span class="mw-headline" id="Ускорение_мелких_транзакций">Ускорение мелких транзакций</span>
</h3>
<p>Если вы используете PostgreSQL на своей локальной машине для разработки и он медленный, то можете попробовать <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT">отключить synchronous_commit</a> в конфигурации. Однако, не забывайте про его <a rel="nofollow" class="external text" href="https://www.postgresql.org/docs/current/static/runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT">особенности</a>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/postgresql.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">synchronous_commit = off</pre>
<h3>
<span id=".D0.97.D0.B0.D0.BF.D1.80.D0.B5.D1.82.D0.B8.D1.82.D1.8C_.D0.B7.D0.B0.D0.BF.D0.B8.D1.81.D1.8C_.D0.BD.D0.B0_.D0.B4.D0.B8.D1.81.D0.BA_.D0.B2.D0.BE_.D0.B2.D1.80.D0.B5.D0.BC.D1.8F_.D0.B1.D0.B5.D0.B7.D0.B4.D0.B5.D0.B9.D1.81.D1.82.D0.B2.D0.B8.D1.8F"></span><span class="mw-headline" id="Запретить_запись_на_диск_во_время_бездействия">Запретить запись на диск во время бездействия</span>
</h3>
<p>PostgreSQL периодически обновляет свою статистику, лежащую в файле. По умолчанию этот файл находится на диске, что не даёт отдыхать жёсткому диску (и изнашивает его), заставляя его шуметь. Однако можно легко и безопасно переместить статистику в ОЗУ с помощью такой настройки:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/postgres/data/postgresql.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">stats_temp_directory = '/run/postgresql'</pre>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_pgAdmin_4_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.B4.D0.BE_PostgreSQL_12"></span><span class="mw-headline" id="Проблемы_с_pgAdmin_4_после_обновления_до_PostgreSQL_12">Проблемы с pgAdmin 4 после обновления до PostgreSQL 12</span>
</h3>
<p>Если вы видите ошибки вроде <code>string indices must be integers</code> при навигации по дереву слева или <code>column rel.relhasoids does not exist</code> при просмотре данных, удалите сервер из списка соединений в pgAdmin и добавьте его заново. Без этого pgAdmin продолжает считать его сервером PostgreSQL 11, что и приводит к таким ошибкам.
</p>
<h3>
<span id="PostgreSQL_.D0.BD.D0.B5_.D0.BC.D0.BE.D0.B6.D0.B5.D1.82_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D1.82.D0.B8.D1.82.D1.8C.D1.81.D1.8F_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.B0_.D0.BF.D1.80.D0.B8_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B8_.D1.80.D0.B0.D1.81.D1.88.D0.B8.D1.80.D0.B5.D0.BD.D0.B8.D0.B9"></span><span class="mw-headline" id="PostgreSQL_не_может_запуститься_после_обновления_пакета_при_использовании_расширений">PostgreSQL не может запуститься после обновления пакета при использовании расширений</span>
</h3>
<p>Причина скорее всего в том, что существующий пакет не скомпилирован для новой версии (а она может быть актуальной), решение — пересобрать пакет вручную или дождаться обновления пакета расширения.
</p>
<h3>
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D1.82.D0.B8.D1.82.D1.8C_PostgreSQL_.D1.81.D0.BE_.D1.81.D1.82.D0.B0.D1.80.D0.BE.D0.B9_.D0.B2.D0.B5.D1.80.D1.81.D0.B8.D0.B5.D0.B9_.D0.B1.D0.B0.D0.B7.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85_.D0.BF.D1.80.D0.B8_.D0.BE.D0.B1.D0.BD.D0.BE.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B8_.D0.B4.D0.BE_.D0.BD.D0.BE.D0.B2.D0.BE.D0.B9_.D0.B2.D0.B5.D1.80.D1.81.D0.B8.D0.B8_.D1.81_.D1.80.D0.B0.D1.81.D1.88.D0.B8.D1.80.D0.B5.D0.BD.D0.B8.D1.8F.D0.BC.D0.B8"></span><span class="mw-headline" id="Не_удаётся_запустить_PostgreSQL_со_старой_версией_базы_данных_при_обновлении_до_новой_версии_с_расширениями">Не удаётся запустить PostgreSQL со старой версией базы данных при обновлении до новой версии с расширениями</span>
</h3>
<p>Это происходит потому, что старая версия postgres из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql-old-upgrade">postgresql-old-upgrade</a></span> не имеет необходимых расширений (<i>.so</i> файлов) в своём каталоге lib. Предлагаемое здесь решение грязное и может вызвать много проблем, поэтому сохраните резервную копию базы данных на всякий случай. В целом, скопируйте необходимые <i>.so</i> файлы расширений из <code>/usr/lib/postgresql/</code> в <code>/opt/pgsql-XX/lib/</code> (не забудьте заменить XX на мажорную версию пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=postgresql-old-upgrade">postgresql-old-upgrade</a></span>).
</p>
<p>Например, для timescaledb:
</p>
<pre># cp /usr/lib/postgresql/timescaledb*.so /opt/pgsql-13/lib/
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Хотя копирования <i>.so</i> файлов обычно достаточно, может понадобиться скопировать больше файлов в правильные расположения в  <code>/opt/pgsql-XX/</code>.</div>
<p>Чтобы узнать точные файлы для копирования, посмотрите содержимое пакета расширения с помощью команды:
</p>
<pre>$ pacman -Ql <i>имя_пакета</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Это очень грязное решение, которое может привести к потере данных в базе, поэтому создайте резервную копию перед выполнением этих действий.</div>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Relational_DBMSs.html" title="Category:Relational DBMSs (Русский)">Relational DBMSs (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=PostgreSQL_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=793745">https://wiki.archlinux.org/index.php?title=PostgreSQL_(Русский)&amp;oldid=793745</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 2 December 2023, at 07:30.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
