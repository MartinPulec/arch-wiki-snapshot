<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Arch package guidelines (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Arch_package_guidelines_Русский rootpage-Arch_package_guidelines_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Прототип_PKGBUILD" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D1%82%D0%B8%D0%BF_PKGBUILD">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Прототип PKGBUILD</div>
		</a>
		
		<ul id="toc-Прототип_PKGBUILD-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Этикет_оформления_пакетов" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%AD%D1%82%D0%B8%D0%BA%D0%B5%D1%82_%D0%BE%D1%84%D0%BE%D1%80%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Этикет оформления пакетов</div>
		</a>
		
		<ul id="toc-Этикет_оформления_пакетов-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Именование_пакета" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%98%D0%BC%D0%B5%D0%BD%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Именование пакета</div>
		</a>
		
		<ul id="toc-Именование_пакета-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Версионирование_пакетов" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%92%D0%B5%D1%80%D1%81%D0%B8%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Версионирование пакетов</div>
		</a>
		
		<ul id="toc-Версионирование_пакетов-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Зависимости_пакетов" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B2%D0%B8%D1%81%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D0%B8_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Зависимости пакетов</div>
		</a>
		
		<ul id="toc-Зависимости_пакетов-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Связи_между_пакетами" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A1%D0%B2%D1%8F%D0%B7%D0%B8_%D0%BC%D0%B5%D0%B6%D0%B4%D1%83_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%B0%D0%BC%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Связи между пакетами</div>
		</a>
		
		<ul id="toc-Связи_между_пакетами-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Исходники_пакетов" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%98%D1%81%D1%85%D0%BE%D0%B4%D0%BD%D0%B8%D0%BA%D0%B8_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Исходники пакетов</div>
		</a>
		
		<ul id="toc-Исходники_пакетов-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Работа_с_upstream" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_upstream">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Работа с upstream</div>
		</a>
		
		<ul id="toc-Работа_с_upstream-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Каталоги" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9A%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Каталоги</div>
		</a>
		
		<ul id="toc-Каталоги-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Функции_makepkg" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8_makepkg">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>Функции makepkg</div>
		</a>
		
		<ul id="toc-Функции_makepkg-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Архитектуры" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D1%8B">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">11</span>Архитектуры</div>
		</a>
		
		<ul id="toc-Архитектуры-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Лицензии" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%9B%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">12</span>Лицензии</div>
		</a>
		
		<ul id="toc-Лицензии-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Воспроизводимые_сборки" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%92%D0%BE%D1%81%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%B8%D0%BC%D1%8B%D0%B5_%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">13</span>Воспроизводимые сборки</div>
		</a>
		
		<ul id="toc-Воспроизводимые_сборки-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Дополнительные_рекомендации" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">14</span>Дополнительные рекомендации</div>
		</a>
		
		<ul id="toc-Дополнительные_рекомендации-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Arch package guidelines (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Arch_package_guidelines.html" title="Arch package guidelines – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Arch_package_guidelines.html" title="Arch package guidelines – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Arch_package_guidelines.html" title="Arch package guidelines – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Arch_%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3" title="Arch パッケージガイドライン – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Arch_package_guidelines.html" title="Arch package guidelines – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Arch_package_guidelines" title="Arch package guidelines – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Arch_package_guidelines.html" title="Arch package guidelines">Arch package guidelines</a>. Дата последней синхронизации: 26 августа 2023. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Arch_package_guidelines&amp;diff=0&amp;oldid=785197">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Creating_packages.html" class="mw-redirect" title="Создание пакетов">Создание пакетов</a></li>
<li><a href="../ru/PKGBUILD.html" title="PKGBUILD (Русский)">PKGBUILD (Русский)</a></li>
<li><a href="../ru/Makepkg.html" title="Makepkg (Русский)">makepkg (Русский)</a></li>
<li><a href="../ru/Arch_build_system.html" class="mw-redirect" title="Система сборки Arch">Система сборки Arch</a></li>
<li><a href="../ru/Arch_User_Repository.html" class="mw-redirect" title="Пользовательский репозиторий Arch">Пользовательский репозиторий Arch</a></li>
<li><a href="../en/Arch_package_guidelines/Security.html" title="Arch package guidelines/Security">Arch package guidelines/Security</a></li>
</ul>
</div>
<p>При создании пакетов для Arch Linux <b>придерживайтесь рекомендаций по созданию пакетов</b>, приведённых ниже, особенно если вы собираетесь <b>отправить</b> новый пакет в Arch Linux. Вам также следует ознакомиться с руководствами <span class="plainlinks archwiki-template-man" title="$ man 5 PKGBUILD"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/PKGBUILD.5">PKGBUILD(5)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 8 makepkg"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/makepkg.8">makepkg(8)</a></span>.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.9F.D1.80.D0.BE.D1.82.D0.BE.D1.82.D0.B8.D0.BF_PKGBUILD"></span><span class="mw-headline" id="Прототип_PKGBUILD">Прототип PKGBUILD</span>
</h2>
<pre># Maintainer: Ваше Имя &lt;вашапочта@domain.com&gt;
pkgname=НАЗВАНИЕ
pkgver=ВЕРСИЯ
pkgrel=1
pkgdesc=""
arch=()
url=""
license=('GPL')
groups=()
depends=()
makedepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=($pkgname-$pkgver.tar.gz)
noextract=()
md5sums=() #заполняется автоматически через updpkgsums

build() {
  cd "$pkgname-$pkgver"

  ./configure --prefix=/usr
  make
}

package() {
  cd "$pkgname-$pkgver"

  make DESTDIR="$pkgdir/" install
}</pre>
<p>Другие прототипы можно найти в <code>/usr/share/pacman/</code> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span>.
</p>
<h2>
<span id=".D0.AD.D1.82.D0.B8.D0.BA.D0.B5.D1.82_.D0.BE.D1.84.D0.BE.D1.80.D0.BC.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Этикет_оформления_пакетов">Этикет оформления пакетов</span>
</h2>
<ul>
<li>Пакеты <b>никогда</b> не должны устанавливаться в <code>/usr/local/</code>.</li>
<li>
<b>Не вводите новые переменные или функции</b> в скрипты сборки <code>PKGBUILD</code>, если возможно собрать пакет без них, так как они могут <b>конфликтовать</b> с переменными и функциями, используемыми в само́м makepkg.</li>
<li>Если абсолютно необходима новая переменная или новая функция, <b>добавьте перед её именем подчёркивание</b> (<code>_</code>), например, <pre>_customvariable=</pre>
</li>
<li>
<b>Избегайте</b> использования <code>/usr/libexec/</code> для чего-либо. Вместо этого используйте <code>/usr/lib/$pkgname/</code>.</li>
<li>Поле <code>packager</code> из мета-файла пакета может быть <b>настроено</b> создателем пакета путём изменения соответствующей опции в файле <code>/etc/makepkg.conf</code> или переопределено в файле <code>~/.makepkg.conf</code>.</li>
<li>
<b>Не используйте подпрограммы makepkg</b> (например, <code>error</code>, <code>msg</code>, <code>msg2</code>, <code>plain</code>, <code>warning</code>), так как они могут измениться в любой момент. Для печати данных используйте <code>printf</code> или <code>echo</code>.</li>
<li>Все важные сообщения должны выводиться во время установки с помощью <b>файла .install</b>. Например, если пакет требует дополнительной настройки для работы, следует включить указания.</li>
<li>
<b>Зависимости</b> — самая распространённая ошибка при создании пакета. Пожалуйста, уделите время их тщательной проверке, например, запустив <code>ldd</code> на динамических исполняемых файлах, проверив инструменты, требуемые скриптами, или посмотрев документацию к программе. В этом вам может помочь утилита <a href="../en/Namcap.html" title="Namcap">namcap</a>. Она может анализировать как PKGBUILD, так и готовый пакет и предупредит вас о неправильных разрешениях, отсутствующих или лишних зависимостях и других распространённых ошибках.</li>
<li>Любые <b>необязательные зависимости</b>, которые не нужны для запуска пакета или его общего функционирования, не должны включаться в массив <b>depends</b>; вместо этого информация должна быть добавлена в массив <b>optdepends</b>:</li>
</ul>
<dl>
<dd><pre>optdepends=('cups: printing support'
            'sane: scanners support'
            'libgphoto2: digital cameras support'
            'alsa-lib: sound support'
            'giflib: GIF images support'
            'libjpeg: JPEG images support'
            'libpng: PNG images support')
</pre></dd>
<dd>Приведённый выше пример взят из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine">wine</a></span>. Информация optdepends автоматически выводится при установке/обновлении, поэтому <b>не следует</b> хранить такую информацию в файлах <code>.install</code>.</dd>
</dl>
<ul>
<li>При создании <b>описания пакета</b> не пишите в нём само имя пакета. Например, «Nedit — текстовый редактор для X11» можно упростить до «Текстовый редактор для X11». Также старайтесь, чтобы описания не превышали ~80 символов.</li>
<li>Старайтесь, чтобы <b>длина строки</b> в PKGBUILD не превышала ~100 символов.</li>
<li>По возможности <b>удаляйте пустые строки</b> из <code>PKGBUILD</code> (<code>provides</code>, <code>replaces</code> и т.д.).</li>
<li>Общепринятой практикой является <b>сохранение порядка полей</b> <code>PKGBUILD</code>, как показано выше. Однако это не является обязательным, поскольку единственным требованием в данном контексте является <b>правильный синтаксис bash</b>.</li>
<li>
<b>Оборачивайте в кавычки</b> переменные, которые могут содержать пробелы, такие как <code>"$pkgdir"</code> и <code>"$srcdir"</code>.</li>
<li>Для обеспечения <b>целостности</b> пакетов убедитесь, что <a href="../ru/PKGBUILD.html#%D0%A6%D0%B5%D0%BB%D0%BE%D1%81%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C" title="PKGBUILD (Русский)">переменные целостности</a> содержат правильные значения. Их можно обновить с помощью инструмента <span class="plainlinks archwiki-template-man" title="$ man 8 updpkgsums"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/updpkgsums.8">updpkgsums(8)</a></span>.</li>
</ul>
<h2>
<span id=".D0.98.D0.BC.D0.B5.D0.BD.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.B0"></span><span class="mw-headline" id="Именование_пакета">Именование пакета</span>
</h2>
<ul>
<li>Имена пакетов могут содержать только буквы, цифры и символы <code>@</code>, <code>.</code>, <code>_</code>, <code>+</code>, <code>-</code>. Имена не должны начинаться с дефисов или точек. Все буквы должны быть строчными.</li>
<li>Имена пакетов <b>не</b> должны иметь суффикс с мажорным номером версии (например, нам не нужен libfoo2, если upstream называет его libfoo v2.3.4) в случае, если ожидается, что библиотека и её зависимости будут использовать последнюю версию библиотеки с каждым соответствующим релизом upstream. Однако для некоторых программ или зависимостей этого ожидать нельзя. В прошлом это было особенно верно для наборов инструментов виджетов, таких как GTK и Qt. Программы, зависящие от них, обычно не могут быть тривиально портированы на новую мажорную версию. В таких случаях имена пакетов должны содержать суффикс основной версии (например, gtk2, gtk3, qt4, qt5). Для случаев, когда большинство зависимостей могут обновиться на новую версию, а некоторые не могут (например, программа без исходного кода, требующая libpng12 или что-то подобное), устаревшая версия пакета может называться libfoo1, в то время как текущая версия — просто libfoo.</li>
</ul>
<h2>
<span id=".D0.92.D0.B5.D1.80.D1.81.D0.B8.D0.BE.D0.BD.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Версионирование_пакетов">Версионирование пакетов</span>
</h2>
<ul>
<li>Версии пакетов (то есть <a href="../ru/PKGBUILD.html#pkgver" title="PKGBUILD (Русский)">PKGBUILD#pkgver</a>) <b>должны совпадать с версией, выпущенной автором</b>. Версии могут включать буквы, если это необходимо (например, версия nmap — <code>2.54BETA32</code>). <b>Теги версий не должны включать дефисы!</b>. Только буквы, цифры и точки.</li>
<li>Номера релизов (то есть <a href="../ru/PKGBUILD.html#pkgrel" title="PKGBUILD (Русский)">PKGBUILD#pkgrel</a>) являются <b>специфичными для пакетов Arch Linux</b>. Они позволяют пользователям различать более новые и более старые сборки пакетов. Когда новая версия пакета выпускается впервые, <b>счётчик релизов начинается с 1</b>. Затем, по мере внесения исправлений и оптимизаций, пакет будет <b>перевыпущен</b> для публики Arch Linux, и <b>номер релиза будет увеличиваться</b>. Когда выходит новая версия программы — счётчик релизов пакета обнуляется до 1. Теги номеров релизов пакетов следуют <b>тем же ограничениям именования, что и теги версий</b>.</li>
</ul>
<h2>
<span id=".D0.97.D0.B0.D0.B2.D0.B8.D1.81.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D0.B8_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Зависимости_пакетов">Зависимости пакетов</span>
</h2>
<ul>
<li>
<b>Не полагайтесь на <a href="https://en.wikipedia.org/wiki/Transitive_dependency" class="extiw" title="wikipedia:Transitive dependency">транзитивные зависимости</a></b>, так как они могут сломаться, если одна из зависимостей будет обновлена.</li>
<li>Перечислите все зависимости от библиотек. Чтобы определить их, можно использовать <span class="plainlinks archwiki-template-man" title="$ man 1 find-libdeps"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/find-libdeps.1">find-libdeps(1)</a></span> (часть <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=devtools">devtools</a></span>).</li>
</ul>
<h2>
<span id=".D0.A1.D0.B2.D1.8F.D0.B7.D0.B8_.D0.BC.D0.B5.D0.B6.D0.B4.D1.83_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.B0.D0.BC.D0.B8"></span><span class="mw-headline" id="Связи_между_пакетами">Связи между пакетами</span>
</h2>
<ul>
<li>Не добавляйте <code>$pkgname</code> в <a href="../ru/PKGBUILD.html#provides" title="PKGBUILD (Русский)">PKGBUILD#provides</a>, так как он всегда неявно предоставляется пакетом.</li>
<li>Перечислите все библиотеки, содержащиеся в пакете, в <a href="../ru/PKGBUILD.html#provides" title="PKGBUILD (Русский)">PKGBUILD#provides</a> (например, <code>'libsomething.so'</code>). Для их идентификации можно использовать <span class="plainlinks archwiki-template-man" title="$ man 1 find-libprovides"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/find-libprovides.1">find-libprovides(1)</a></span> (часть <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=devtools">devtools</a></span>).</li>
</ul>
<h2>
<span id=".D0.98.D1.81.D1.85.D0.BE.D0.B4.D0.BD.D0.B8.D0.BA.D0.B8_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2"></span><span class="mw-headline" id="Исходники_пакетов">Исходники пакетов</span>
</h2>
<ul>
<li>По возможности следует использовать HTTPS источники (<code>https://</code> для архивов, <code>git+https://</code> для git).</li>
<li>Исходники должны быть проверены с помощью PGP-подписей везде, где это возможно (это может повлечь за собой сборку из git-тегов вместо архива, если upstream подписывает коммиты и теги, но не архивы)</li>
<li>При сборке из git-тега вместо имени тега используйте хэш объекта, полученный командой <code>git rev-parse</code>:</li>
</ul>
<dl>
<dd><pre>_tag=1234567890123456789012345678901234567890 # git rev-parse "v$pkgver"
source=(git+https://$url.git?signed#tag=$_tag)

pkgver() {
    cd "$pkgname"
    git describe
}
</pre></dd>
<dd>Пример такого подхода можно найти в пакете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gitea">gitea</a></span>. Причина такой практики в том, что теги могут быть изменены через force push, после чего они станут указывать на другой коммит, что повлияет на сборку пакета. Использование хэша обеспечивает целостность исходных текстов, так как force push тега изменяет его хэш. Использование функции <code>pkgver()</code> предотвращает случайное обновление <code>pkgver</code> без обновления <code>_tag</code>.</dd>
</dl>
<ul>
<li>
<b>Не снижайте безопасность или проверку целостности пакета</b> (например, удалением проверки контрольной суммы или проверки подписи PGP) из-за поломки апстрима или исчезновения функции (например, пропавшая в новом релизе подпись PGP).</li>
<li>Исходники должны быть уникальными в <code>srcdir</code> (это может потребовать переименования их при загрузке, например, <code>"${pkgname}-${pkgver}.tar.gz::https://${pkgname}.tld/download/${pkgver}.tar.gz"</code>)</li>
<li>Избегайте использования определённых зеркал (например, на sourceforge) для загрузки, так как они могут стать недоступными.</li>
</ul>
<h2>
<span id=".D0.A0.D0.B0.D0.B1.D0.BE.D1.82.D0.B0_.D1.81_upstream"></span><span class="mw-headline" id="Работа_с_upstream">Работа с upstream</span>
</h2>
<p>Считается лучшей практикой тесно сотрудничать с upstream, когда это возможно. Это подразумевает сообщение о проблемах, связанных со сборкой и тестированием пакета.
</p>
<ul>
<li>Сразу же сообщайте о проблемах в upstream.</li>
<li>По возможности добавляйте исправления.</li>
<li>Добавляйте комментарии со ссылками на соответствующие баг-трекеры апстрима в <a href="../ru/PKGBUILD.html" title="PKGBUILD (Русский)">PKGBUILD</a> (это особенно важно, так как позволяет другим людям, работающим с пакетом, понять смысл внесённых вами изменений).</li>
</ul>
<p>Рекомендуется отслеживать upstream с помощью инструментов вроде <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvchecker">nvchecker</a></span> или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=urlwatch">urlwatch</a></span>, чтобы узнавать о выходе новых версий.
</p>
<h2>
<span id=".D0.9A.D0.B0.D1.82.D0.B0.D0.BB.D0.BE.D0.B3.D0.B8"></span><span class="mw-headline" id="Каталоги">Каталоги</span>
</h2>
<ul>
<li>
<b>Файлы конфигурации</b> должны размещаться в каталоге <code>/etc</code>. Если существует более одного файла конфигурации, обычно принято <b>использовать подкаталог</b>, чтобы сохранить <code>/etc</code> как можно более чистым. Используйте <code>/etc/<i>pkg</i></code>, где <code><i>pkg</i></code> — имя пакета (или подходящая альтернатива, например, apache использует <code>/etc/httpd/</code>).</li>
<li>Файлы пакетов должны следовать этим <b>общим рекомендациям по каталогам</b>:</li>
</ul>
<dl><dd><table class="wikitable">

<tbody>
<tr>
<td>
<code>/etc</code>
</td>
<td>
<b>Системно-значимые</b> файлы конфигурации
</td>
</tr>
<tr>
<td>
<code>/usr/bin</code>
</td>
<td>Бинарные файлы
</td>
</tr>
<tr>
<td>
<code>/usr/lib</code>
</td>
<td>Библиотеки
</td>
</tr>
<tr>
<td>
<code>/usr/include</code>
</td>
<td>Файлы заголовков
</td>
</tr>
<tr>
<td>
<code>/usr/lib/<i>pkg</i></code>
</td>
<td>Модули, плагины и тд.
</td>
</tr>
<tr>
<td>
<code>/usr/share/doc/<i>pkg</i></code>
</td>
<td>Документация приложений
</td>
</tr>
<tr>
<td>
<code>/usr/share/info</code>
</td>
<td>Системные файлы GNU Info
</td>
</tr>
<tr>
<td>
<code>/usr/share/licenses/<i>pkg</i></code>
</td>
<td>Лицензии приложений
</td>
</tr>
<tr>
<td>
<code>/usr/share/man</code>
</td>
<td>Страницы man
</td>
</tr>
<tr>
<td>
<code>/usr/share/<i>pkg</i></code>
</td>
<td>Данные приложений
</td>
</tr>
<tr>
<td>
<code>/var/lib/<i>pkg</i></code>
</td>
<td>Постоянное хранилище приложений
</td>
</tr>
<tr>
<td>
<code>/etc/<i>pkg</i></code>
</td>
<td>Файлы конфигураций для <i>pkg</i>
</td>
</tr>
<tr>
<td>
<code>/opt/<i>pkg</i></code>
</td>
<td>Крупные автономные пакеты
</td>
</tr>
</tbody>
</table></dd></dl>
<ul><li>Пакеты не должны содержать ни одного из следующих каталогов:
<ul>
<li><code>/bin</code></li>
<li><code>/sbin</code></li>
<li><code>/dev</code></li>
<li><code>/home</code></li>
<li><code>/srv</code></li>
<li><code>/media</code></li>
<li><code>/mnt</code></li>
<li><code>/proc</code></li>
<li><code>/root</code></li>
<li><code>/selinux</code></li>
<li><code>/sys</code></li>
<li><code>/tmp</code></li>
<li><code>/var/tmp</code></li>
<li><code>/run</code></li>
</ul>
</li></ul>
<h2>
<span id=".D0.A4.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B8_makepkg"></span><span class="mw-headline" id="Функции_makepkg">Функции makepkg</span>
</h2>
<p>При использовании <a href="../ru/Makepkg.html" title="Makepkg (Русский)">makepkg</a> для сборки пакета он автоматически делает следующее:
</p>
<ol>
<li>Проверяет, установлены ли пакеты из <b>dependencies</b> и <b>makedepends</b>.</li>
<li>
<b>Загружает исходные файлы</b> с серверов</li>
<li>
<b>Проверяет целостность</b> исходных файлов</li>
<li>
<b>Распаковывает</b> исходные файлы</li>
<li>Применяет все необходимые <b>патчи</b>
</li>
<li>
<b>Собирает</b> программное обеспечение и устанавливает его в fake root</li>
<li>
<b>Удаляет</b> символы из двоичных файлов</li>
<li>
<b>Удаляет</b> отладочные символы из библиотек</li>
<li>
<b>Сжимает</b> руководства и/или страницы info.</li>
<li>Генерирует <b>мета-файл пакета</b>, включаемый в каждый пакет.</li>
<li>
<b>Сжимает</b> fake root в файл пакета</li>
<li>
<b>Сохраняет</b> файл пакета в настроенном каталоге назначения (по умолчанию в текущем рабочем каталоге)</li>
</ol>
<h2>
<span id=".D0.90.D1.80.D1.85.D0.B8.D1.82.D0.B5.D0.BA.D1.82.D1.83.D1.80.D1.8B"></span><span class="mw-headline" id="Архитектуры">Архитектуры</span>
</h2>
<p>Массив <code>arch</code> должен содержать <code>'x86_64'</code>, если скомпилированный пакет зависит от архитектуры. В противном случае используйте <code>'any'</code> для независимых от архитектуры пакетов.
</p>
<h2>
<span id=".D0.9B.D0.B8.D1.86.D0.B5.D0.BD.D0.B7.D0.B8.D0.B8"></span><span class="mw-headline" id="Лицензии">Лицензии</span>
</h2>
<p>Смотри <a href="../ru/PKGBUILD.html#license" title="PKGBUILD (Русский)">PKGBUILD (Русский)#license</a>.
</p>
<h2>
<span id=".D0.92.D0.BE.D1.81.D0.BF.D1.80.D0.BE.D0.B8.D0.B7.D0.B2.D0.BE.D0.B4.D0.B8.D0.BC.D1.8B.D0.B5_.D1.81.D0.B1.D0.BE.D1.80.D0.BA.D0.B8"></span><span class="mw-headline" id="Воспроизводимые_сборки">Воспроизводимые сборки</span>
</h2>
<p>Arch работает над тем, чтобы сделать все пакеты <a href="../en/Reproducible_builds.html" title="Reproducible builds">воспроизводимыми</a>. Создатель пакета может проверить, является ли пакет воспроизводимым, с помощью <code>makerepropkg</code> из <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=devtools">devtools</a></span> или <code>repro</code> из <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archlinux-repro">archlinux-repro</a></span>.
</p>
<pre>$ makerepropkg $pkgname-1-1-any.pkg.tar.zst
</pre>
<p>или
</p>
<pre>$ repro -f $pkgname-1-1-any.pkg.tar.zst
</pre>
<p>Если во время сборки требуется временная метка, используйте переменную окружения <code>SOURCE_DATE_EPOCH</code>. Формат описан в <a rel="nofollow" class="external text" href="https://reproducible-builds.org/docs/source-date-epoch/">документации</a>.
</p>
<h2>
<span id=".D0.94.D0.BE.D0.BF.D0.BE.D0.BB.D0.BD.D0.B8.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Дополнительные_рекомендации">Дополнительные рекомендации</span>
</h2>
<p>Сперва обязательно прочитайте приведённые выше рекомендации — там перечислены важные моменты, которые не будут повторяться на приведённых ниже страницах с рекомендациями. Эти конкретные рекомендации предназначены в качестве дополнения к стандартам, перечисленным на этой странице.
</p>
<div class="toc" style="display:block; text-align: center; margin-bottom: 1em;">
<b><a class="mw-selflink selflink">Указания по созданию пакетов</a></b>
<hr>
<p><a href="../en/32-bit_package_guidelines.html" title="32-bit package guidelines">32-bit</a> – <a href="../ru/CLR_package_guidelines.html" title="CLR package guidelines (Русский)">CLR</a> – <a href="../en/CMake_package_guidelines.html" title="CMake package guidelines">CMake</a> – <a href="../ru/Cross-compiling_tools_package_guidelines.html" title="Cross-compiling tools package guidelines (Русский)">Cross</a> – <a href="../en/DKMS_package_guidelines.html" title="DKMS package guidelines">DKMS</a> – <a href="../en/Eclipse_plugin_package_guidelines.html" title="Eclipse plugin package guidelines">Eclipse</a> – <a href="../en/Electron_package_guidelines.html" title="Electron package guidelines">Electron</a> – <a href="../en/Font_package_guidelines.html" title="Font package guidelines">Font</a> – <a href="../en/Free_Pascal_package_guidelines.html" title="Free Pascal package guidelines">Free Pascal</a> – <a href="../ru/GNOME_package_guidelines.html" title="GNOME package guidelines (Русский)">GNOME</a> – <a href="../en/Go_package_guidelines.html" title="Go package guidelines">Go</a> – <a href="../en/Haskell_package_guidelines.html" title="Haskell package guidelines">Haskell</a> – <a href="../en/Java_package_guidelines.html" title="Java package guidelines">Java</a> – <a href="../en/KDE_package_guidelines.html" title="KDE package guidelines">KDE</a> – <a href="../en/Kernel_module_package_guidelines.html" title="Kernel module package guidelines">Kernel</a> – <a href="../en/Lisp_package_guidelines.html" title="Lisp package guidelines">Lisp</a> – <a href="../en/Meson_package_guidelines.html" title="Meson package guidelines">Meson</a> – <a href="../en/MinGW_package_guidelines.html" title="MinGW package guidelines">MinGW</a> – <a href="../en/Node.js_package_guidelines.html" title="Node.js package guidelines">Node.js</a> – <a href="../en/Nonfree_applications_package_guidelines.html" title="Nonfree applications package guidelines">Nonfree</a> – <a href="../en/OCaml_package_guidelines.html" title="OCaml package guidelines">OCaml</a> – <a href="../en/Perl_package_guidelines.html" title="Perl package guidelines">Perl</a> – <a href="../en/PHP_package_guidelines.html" title="PHP package guidelines">PHP</a> – <a href="../ru/Python_package_guidelines.html" title="Python package guidelines (Русский)">Python</a> – <a href="../en/R_package_guidelines.html" title="R package guidelines">R</a> – <a href="../en/Ruby_package_guidelines.html" title="Ruby package guidelines">Ruby</a> – <a href="../en/Rust_package_guidelines.html" title="Rust package guidelines">Rust</a> – <a href="../en/Shell_package_guidelines.html" title="Shell package guidelines">Shell</a> – <a href="../en/VCS_package_guidelines.html" title="VCS package guidelines">VCS</a> – <a href="../en/Web_application_package_guidelines.html" title="Web application package guidelines">Web</a> – <a href="../en/Wine_package_guidelines.html" class="mw-redirect" title="Wine package guidelines (Русский)">Wine</a>
</p>
</div>
<p>Пакеты, представленные в AUR, должны дополнительно соответствовать <a href="../ru/AUR_submission_guidelines.html" title="AUR submission guidelines (Русский)">правилам публикации пакетов в AUR</a>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Arch_package_guidelines.html" title="Category:Arch package guidelines (Русский)">Arch package guidelines (Русский)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Arch_package_guidelines_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=786247">https://wiki.archlinux.org/index.php?title=Arch_package_guidelines_(Русский)&amp;oldid=786247</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 26 August 2023, at 19:25.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
