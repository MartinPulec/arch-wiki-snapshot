<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Bluetooth (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Bluetooth_Русский rootpage-Bluetooth_Русский skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Установка</div>
		</a>
		
			<button aria-controls="toc-Установка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Установка subsection</span>
			</button>
		
		<ul id="toc-Установка-sublist" class="vector-toc-list">
			<li id="toc-Фронтенды" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A4%D1%80%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D0%B4%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Фронтенды</div>
			</a>
			
			<ul id="toc-Фронтенды-sublist" class="vector-toc-list">
				<li id="toc-Консольные" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.1</span>Консольные</div>
			</a>
			
			<ul id="toc-Консольные-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Графические" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%93%D1%80%D0%B0%D1%84%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1.2</span>Графические</div>
			</a>
			
			<ul id="toc-Графические-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Сопряжение" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Сопряжение</div>
		</a>
		
			<button aria-controls="toc-Сопряжение-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Сопряжение subsection</span>
			</button>
		
		<ul id="toc-Сопряжение-sublist" class="vector-toc-list">
			<li id="toc-Сопряжение_при_двойной_загрузке" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8_%D0%B4%D0%B2%D0%BE%D0%B9%D0%BD%D0%BE%D0%B9_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Сопряжение при двойной загрузке</div>
			</a>
			
			<ul id="toc-Сопряжение_при_двойной_загрузке-sublist" class="vector-toc-list">
				<li id="toc-Подготовка" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>Подготовка</div>
			</a>
			
			<ul id="toc-Подготовка-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Для_Windows" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%94%D0%BB%D1%8F_Windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>Для Windows</div>
			</a>
			
			<ul id="toc-Для_Windows-sublist" class="vector-toc-list">
				<li id="toc-Извлечение_ключей_в_Windows" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%B2%D0%BB%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9_%D0%B2_Windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2.1</span>Извлечение ключей в Windows</div>
			</a>
			
			<ul id="toc-Извлечение_ключей_в_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Извлечение_ключей_в_Linux" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%98%D0%B7%D0%B2%D0%BB%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9_%D0%B2_Linux">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2.2</span>Извлечение ключей в Linux</div>
			</a>
			
			<ul id="toc-Извлечение_ключей_в_Linux-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Для_macOS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%94%D0%BB%D1%8F_macOS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.3</span>Для macOS</div>
			</a>
			
			<ul id="toc-Для_macOS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Подготовка_ключей_Bluetooth_5.1" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9_Bluetooth_5.1">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.4</span>Подготовка ключей Bluetooth 5.1</div>
			</a>
			
			<ul id="toc-Подготовка_ключей_Bluetooth_5.1-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Завершение" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%97%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.5</span>Завершение</div>
			</a>
			
			<ul id="toc-Завершение-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Настройка" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Настройка</div>
		</a>
		
			<button aria-controls="toc-Настройка-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Настройка subsection</span>
			</button>
		
		<ul id="toc-Настройка-sublist" class="vector-toc-list">
			<li id="toc-Состояние_питания_адаптера_по_умолчанию" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D1%8F_%D0%B0%D0%B4%D0%B0%D0%BF%D1%82%D0%B5%D1%80%D0%B0_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Состояние питания адаптера по умолчанию</div>
			</a>
			
			<ul id="toc-Состояние_питания_адаптера_по_умолчанию-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Видимость_при_запуске_системы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%B8%D0%B4%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D1%8C_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Видимость при запуске системы</div>
			</a>
			
			<ul id="toc-Видимость_при_запуске_системы-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Пробуждение_из_сна" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B8%D0%B7_%D1%81%D0%BD%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Пробуждение из сна</div>
			</a>
			
			<ul id="toc-Пробуждение_из_сна-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Включение_экспериментальных_функций" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8D%D0%BA%D1%81%D0%BF%D0%B5%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B9">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Включение экспериментальных функций</div>
			</a>
			
			<ul id="toc-Включение_экспериментальных_функций-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Аудио" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%90%D1%83%D0%B4%D0%B8%D0%BE">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Аудио</div>
		</a>
		
			<button aria-controls="toc-Аудио-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Аудио subsection</span>
			</button>
		
		<ul id="toc-Аудио-sublist" class="vector-toc-list">
			<li id="toc-PulseAudio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PulseAudio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>PulseAudio</div>
			</a>
			
			<ul id="toc-PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PipeWire" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PipeWire">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>PipeWire</div>
			</a>
			
			<ul id="toc-PipeWire-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-ALSA" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#ALSA">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>ALSA</div>
			</a>
			
			<ul id="toc-ALSA-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Bluetooth_serial" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Bluetooth_serial">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Bluetooth serial</div>
		</a>
		
		<ul id="toc-Bluetooth_serial-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Решение проблем</div>
		</a>
		
			<button aria-controls="toc-Решение_проблем-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Решение проблем subsection</span>
			</button>
		
		<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
			<li id="toc-Основное" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%BE%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Основное</div>
			</a>
			
			<ul id="toc-Основное-sublist" class="vector-toc-list">
				<li id="toc-Отладка" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BB%D0%B0%D0%B4%D0%BA%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1.1</span>Отладка</div>
			</a>
			
			<ul id="toc-Отладка-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Устаревшие_инструменты_BlueZ" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D1%80%D0%B5%D0%B2%D1%88%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B_BlueZ">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1.2</span>Устаревшие инструменты BlueZ</div>
			</a>
			
			<ul id="toc-Устаревшие_инструменты_BlueZ-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Проблемы_службы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D1%8B">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Проблемы службы</div>
			</a>
			
			<ul id="toc-Проблемы_службы-sublist" class="vector-toc-list">
				<li id="toc-systemd:_Condition_check_resulted_in_Bluetooth_service_being_skipped" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#systemd:_Condition_check_resulted_in_Bluetooth_service_being_skipped">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2.1</span>systemd: Condition check resulted in Bluetooth service being skipped</div>
			</a>
			
			<ul id="toc-systemd:_Condition_check_resulted_in_Bluetooth_service_being_skipped-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth_сразу_пробуждает_систему_из_режима_suspend-to-idle" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth_%D1%81%D1%80%D0%B0%D0%B7%D1%83_%D0%BF%D1%80%D0%BE%D0%B1%D1%83%D0%B6%D0%B4%D0%B0%D0%B5%D1%82_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%83_%D0%B8%D0%B7_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0_suspend-to-idle">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2.2</span>Bluetooth сразу пробуждает систему из режима suspend-to-idle</div>
			</a>
			
			<ul id="toc-Bluetooth_сразу_пробуждает_систему_из_режима_suspend-to-idle-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth_отключается_после_выхода_на_headless-системе_или_сервере" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth_%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%B2%D1%8B%D1%85%D0%BE%D0%B4%D0%B0_%D0%BD%D0%B0_headless-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B5_%D0%B8%D0%BB%D0%B8_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2.3</span>Bluetooth отключается после выхода на headless-системе или сервере</div>
			</a>
			
			<ul id="toc-Bluetooth_отключается_после_выхода_на_headless-системе_или_сервере-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Проблемы_адаптера" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D0%B0%D0%B4%D0%B0%D0%BF%D1%82%D0%B5%D1%80%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Проблемы адаптера</div>
			</a>
			
			<ul id="toc-Проблемы_адаптера-sublist" class="vector-toc-list">
				<li id="toc-hcitool_scan:_Устройство_не_найдено" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#hcitool_scan:_%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%BD%D0%B5_%D0%BD%D0%B0%D0%B9%D0%B4%D0%B5%D0%BD%D0%BE">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.1</span>hcitool scan: Устройство не найдено</div>
			</a>
			
			<ul id="toc-hcitool_scan:_Устройство_не_найдено-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-bluetoothctl:_No_default_controller_available" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#bluetoothctl:_No_default_controller_available">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.2</span>bluetoothctl: No default controller available</div>
			</a>
			
			<ul id="toc-bluetoothctl:_No_default_controller_available-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-rfkill_unblock:_не_происходит_разблокировка" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#rfkill_unblock:_%D0%BD%D0%B5_%D0%BF%D1%80%D0%BE%D0%B8%D1%81%D1%85%D0%BE%D0%B4%D0%B8%D1%82_%D1%80%D0%B0%D0%B7%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.3</span>rfkill unblock: не происходит разблокировка</div>
			</a>
			
			<ul id="toc-rfkill_unblock:_не_происходит_разблокировка-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth_USB_донгл" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth_USB_%D0%B4%D0%BE%D0%BD%D0%B3%D0%BB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.4</span>Bluetooth USB донгл</div>
			</a>
			
			<ul id="toc-Bluetooth_USB_донгл-sublist" class="vector-toc-list">
				<li id="toc-Устройства_аудио_начинают_пропускать_звук_на_небольшом_расстоянии_от_донгла" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_%D0%B0%D1%83%D0%B4%D0%B8%D0%BE_%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%D1%82_%D0%BF%D1%80%D0%BE%D0%BF%D1%83%D1%81%D0%BA%D0%B0%D1%82%D1%8C_%D0%B7%D0%B2%D1%83%D0%BA_%D0%BD%D0%B0_%D0%BD%D0%B5%D0%B1%D0%BE%D0%BB%D1%8C%D1%88%D0%BE%D0%BC_%D1%80%D0%B0%D1%81%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B8_%D0%BE%D1%82_%D0%B4%D0%BE%D0%BD%D0%B3%D0%BB%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.4.1</span>Устройства аудио начинают пропускать звук на небольшом расстоянии от донгла</div>
			</a>
			
			<ul id="toc-Устройства_аудио_начинают_пропускать_звук_на_небольшом_расстоянии_от_донгла-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Донгл_CSR_0a12:0001" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%94%D0%BE%D0%BD%D0%B3%D0%BB_CSR_0a12:0001">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.4.2</span>Донгл CSR 0a12:0001</div>
			</a>
			
			<ul id="toc-Донгл_CSR_0a12:0001-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Logitech_Bluetooth_USB_донгл" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Logitech_Bluetooth_USB_%D0%B4%D0%BE%D0%BD%D0%B3%D0%BB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.5</span>Logitech Bluetooth USB донгл</div>
			</a>
			
			<ul id="toc-Logitech_Bluetooth_USB_донгл-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Foxconn_/_Hon_Hai_/_Lite-On_Broadcom" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Foxconn_/_Hon_Hai_/_Lite-On_Broadcom">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.6</span>Foxconn / Hon Hai / Lite-On Broadcom</div>
			</a>
			
			<ul id="toc-Foxconn_/_Hon_Hai_/_Lite-On_Broadcom-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Комбинированные_WiFi-Bluetooth_карты_Intel" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_WiFi-Bluetooth_%D0%BA%D0%B0%D1%80%D1%82%D1%8B_Intel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.7</span>Комбинированные WiFi-Bluetooth карты Intel</div>
			</a>
			
			<ul id="toc-Комбинированные_WiFi-Bluetooth_карты_Intel-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mediatek_MT7921_или_MT7961_при_двойной_загрузке_с_Windows" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Mediatek_MT7921_%D0%B8%D0%BB%D0%B8_MT7961_%D0%BF%D1%80%D0%B8_%D0%B4%D0%B2%D0%BE%D0%B9%D0%BD%D0%BE%D0%B9_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5_%D1%81_Windows">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.8</span>Mediatek MT7921 или MT7961 при двойной загрузке с Windows</div>
			</a>
			
			<ul id="toc-Mediatek_MT7921_или_MT7961_при_двойной_загрузке_с_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Адаптер_пропадает_после_ждущего_режима" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D0%B4%D0%B0%D0%BF%D1%82%D0%B5%D1%80_%D0%BF%D1%80%D0%BE%D0%BF%D0%B0%D0%B4%D0%B0%D0%B5%D1%82_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D0%B6%D0%B4%D1%83%D1%89%D0%B5%D0%B3%D0%BE_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.9</span>Адаптер пропадает после ждущего режима</div>
			</a>
			
			<ul id="toc-Адаптер_пропадает_после_ждущего_режима-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Проблемы_с_сопряжением_и_соединением" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_%D1%81%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC_%D0%B8_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Проблемы с сопряжением и соединением</div>
			</a>
			
			<ul id="toc-Проблемы_с_сопряжением_и_соединением-sublist" class="vector-toc-list">
				<li id="toc-Мой_компьютер_невидим" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9C%D0%BE%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80_%D0%BD%D0%B5%D0%B2%D0%B8%D0%B4%D0%B8%D0%BC">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.1</span>Мой компьютер невидим</div>
			</a>
			
			<ul id="toc-Мой_компьютер_невидим-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Устройство_подключается_и_затем_отключается_спустя_мгновение" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D0%B8_%D0%B7%D0%B0%D1%82%D0%B5%D0%BC_%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F_%D1%81%D0%BF%D1%83%D1%81%D1%82%D1%8F_%D0%BC%D0%B3%D0%BD%D0%BE%D0%B2%D0%B5%D0%BD%D0%B8%D0%B5">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.2</span>Устройство подключается и затем отключается спустя мгновение</div>
			</a>
			
			<ul id="toc-Устройство_подключается_и_затем_отключается_спустя_мгновение-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Устройство_не_видно_при_сканировании" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%BD%D0%B5_%D0%B2%D0%B8%D0%B4%D0%BD%D0%BE_%D0%BF%D1%80%D0%B8_%D1%81%D0%BA%D0%B0%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.3</span>Устройство не видно при сканировании</div>
			</a>
			
			<ul id="toc-Устройство_не_видно_при_сканировании-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Устройства_BLE_не_видны_на_Intel_Corp._AX200_Bluetooth" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_BLE_%D0%BD%D0%B5_%D0%B2%D0%B8%D0%B4%D0%BD%D1%8B_%D0%BD%D0%B0_Intel_Corp._AX200_Bluetooth">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.4</span>Устройства BLE не видны на Intel Corp. AX200 Bluetooth</div>
			</a>
			
			<ul id="toc-Устройства_BLE_не_видны_на_Intel_Corp._AX200_Bluetooth-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_переподключиться_после_сна" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%BF%D0%B5%D1%80%D0%B5%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%D1%81%D1%8F_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5_%D1%81%D0%BD%D0%B0">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4.5</span>Не удаётся переподключиться после сна</div>
			</a>
			
			<ul id="toc-Не_удаётся_переподключиться_после_сна-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Проблемы_с_определёнными_устройствами" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D0%BC%D0%B8_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0%D0%BC%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Проблемы с определёнными устройствами</div>
			</a>
			
			<ul id="toc-Проблемы_с_определёнными_устройствами-sublist" class="vector-toc-list">
				<li id="toc-Bluetooth-мышь_тормозит_/_отключается_/_зависает" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bluetooth-%D0%BC%D1%8B%D1%88%D1%8C_%D1%82%D0%BE%D1%80%D0%BC%D0%BE%D0%B7%D0%B8%D1%82_/_%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F_/_%D0%B7%D0%B0%D0%B2%D0%B8%D1%81%D0%B0%D0%B5%D1%82">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5.1</span>Bluetooth-мышь тормозит / отключается / зависает</div>
			</a>
			
			<ul id="toc-Bluetooth-мышь_тормозит_/_отключается_/_зависает-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Аудиоустройство_не_может_подключиться_с_ошибкой_br-connection-profile-unavailable" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D1%83%D0%B4%D0%B8%D0%BE%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE_%D0%BD%D0%B5_%D0%BC%D0%BE%D0%B6%D0%B5%D1%82_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%D1%81%D1%8F_%D1%81_%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%BE%D0%B9_br-connection-profile-unavailable">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5.2</span>Аудиоустройство не может подключиться с ошибкой br-connection-profile-unavailable</div>
			</a>
			
			<ul id="toc-Аудиоустройство_не_может_подключиться_с_ошибкой_br-connection-profile-unavailable-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Интерференция_между_наушниками_и_мышью" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D1%80%D0%B5%D0%BD%D1%86%D0%B8%D1%8F_%D0%BC%D0%B5%D0%B6%D0%B4%D1%83_%D0%BD%D0%B0%D1%83%D1%88%D0%BD%D0%B8%D0%BA%D0%B0%D0%BC%D0%B8_%D0%B8_%D0%BC%D1%8B%D1%88%D1%8C%D1%8E">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5.3</span>Интерференция между наушниками и мышью</div>
			</a>
			
			<ul id="toc-Интерференция_между_наушниками_и_мышью-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Постоянное_переподключение_с_TP-LINK_UB400_и_контроллером_Xbox" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D0%BE%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81_TP-LINK_UB400_%D0%B8_%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D0%BE%D0%BC_Xbox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5.4</span>Постоянное переподключение с TP-LINK UB400 и контроллером Xbox</div>
			</a>
			
			<ul id="toc-Постоянное_переподключение_с_TP-LINK_UB400_и_контроллером_Xbox-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Проблемы_с_передачей_файлов" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B_%D1%81_%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%87%D0%B5%D0%B9_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>Проблемы с передачей файлов</div>
			</a>
			
			<ul id="toc-Проблемы_с_передачей_файлов-sublist" class="vector-toc-list">
				<li id="toc-gnome-bluetooth" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#gnome-bluetooth">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6.1</span>gnome-bluetooth</div>
			</a>
			
			<ul id="toc-gnome-bluetooth-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Не_удаётся_получить_файлы_из-за_символической_ссылки" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9D%D0%B5_%D1%83%D0%B4%D0%B0%D1%91%D1%82%D1%81%D1%8F_%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D1%82%D1%8C_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B_%D0%B8%D0%B7-%D0%B7%D0%B0_%D1%81%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6.2</span>Не удаётся получить файлы из-за символической ссылки</div>
			</a>
			
			<ul id="toc-Не_удаётся_получить_файлы_из-за_символической_ссылки-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Смотрите также</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Bluetooth (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Bluetooth" title="Bluetooth – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Bluetooth.html" title="Bluetooth – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Bluetooth.html" title="Bluetooth – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Bluetooth" title="Bluetooth – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Bluetooth" title="Bluetooth – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a>. Дата последней синхронизации: 11 февраля 2024. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Bluetooth&amp;diff=0&amp;oldid=799858">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Bluetooth_mouse.html" class="mw-redirect" title="Bluetooth мышь">Bluetooth мышь</a></li>
<li><a href="../ru/Bluetooth_keyboard.html" class="mw-redirect" title="Bluetooth клавиатура">Bluetooth клавиатура</a></li>
<li><a href="../ru/Bluetooth_headset.html" class="mw-redirect" title="Bluetooth наушники">Bluetooth наушники</a></li>
<li><a href="../en/Blueman.html" title="Blueman">Blueman</a></li>
<li><a href="../en/ObexFTP.html" title="ObexFTP">ObexFTP</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.bluetooth.org/">Bluetooth</a> — стандарт для беспроводного соединения малой дальности сотовых телефонов, компьютеров и других электронных устройств. В Linux канонической реализацией стека протоколов Bluetooth является <a rel="nofollow" class="external text" href="https://www.bluez.org/">BlueZ</a>.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<ol>
<li>
<a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span>, который предоставляет стек протоколов Bluetooth.</li>
<li>Установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>, предоставляющий утилиту <code>bluetoothctl</code>. Также можно установить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>, который содержит <a href="#%D0%A3%D1%81%D1%82%D0%B0%D1%80%D0%B5%D0%B2%D1%88%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B_BlueZ">устаревшие инструменты BlueZ</a>.</li>
<li>Универсальный драйвер Bluetooth находится в модуле ядра <code>btusb</code>. <a href="../ru/Kernel_module.html#%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D0%B8" title="Kernel module (Русский)">Проверьте</a>, что он загружен. Если нет, то <a href="../ru/Kernel_module.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F%D0%BC%D0%B8_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E" title="Kernel module (Русский)">загрузите его вручную</a>.</li>
<li>
<a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите">Запустите</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службу <code>bluetooth.service</code>.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>По умолчанию демон Bluetooth разрешит использовать устройства bnep0 только пользователям, входящим в <a href="../ru/Users_and_groups.html#%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B" title="Users and groups (Русский)">системную группу</a> <code>lp</code>. <a href="../ru/Users_and_groups.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0%D0%BC%D0%B8" title="Users and groups (Русский)">Добавьте себя в эту группу</a>, если вы собираетесь использовать Bluetooth. Вы можете изменить требуемую группу в файле <code>/etc/dbus-1/system.d/bluetooth.conf</code>.</li>
<li>Некоторые адаптеры Bluetooth встроены в платы Wi-Fi (например, <a rel="nofollow" class="external text" href="https://www.intel.com/content/www/us/en/wireless-products/centrino-advanced-n-6235.html">Intel Centrino</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-05-06 ⓘ]</sup>). В этих случаях необходимо, чтобы сперва была включена плата Wi-Fi (обычно при помощи сочетания клавиш на ноутбуке), после чего ядро сможет увидеть адаптер Bluetooth.</li>
<li>Некоторые карты Bluetooth (например, Broadcom) конфликтуют с сетевыми адаптерами. В этом случае вам необходимо удостовериться, что устройство Bluetooth подключается до начала загрузки сетевых служб.</li>
<li>Некоторые утилиты вроде hcitool и hciconfig объявлены устаревшими и больше не поставляются в пакете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>. Так как они не получают обновления, рекомендуется избегать их использования. Если они вам всё ещё нужны, установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>. Подробнее смотрите <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/53110">FS#53110</a> и <a rel="nofollow" class="external text" href="https://lore.kernel.org/linux-bluetooth/20170104133401.3636-1-luiz.dentz@gmail.com/">Bluez mailing list</a>.</li>
<li>Начиная с <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/packaging/packages/bluez/-/commit/3dc43f553660cf4409532b8b0b3c2dc9c6e4f1a9">этого</a> коммита, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-obex">bluez-obex</a></span> и <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-mesh">bluez-mesh</a></span> отделены от пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span>. Поэтому, если вы планируете передавать файлы по Bluetooth, также установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-obex">bluez-obex</a></span>.</li>
</ul>
</div>
<h3>
<span id=".D0.A4.D1.80.D0.BE.D0.BD.D1.82.D0.B5.D0.BD.D0.B4.D1.8B"></span><span class="mw-headline" id="Фронтенды">Фронтенды</span>
</h3>
<h4>
<span id=".D0.9A.D0.BE.D0.BD.D1.81.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5"></span><span class="mw-headline" id="Консольные">Консольные</span>
</h4>
<ul><li>
<b>bluetoothctl</b> — Сопряжение устройств через командную строку является одним из самых простых и надёжных вариантов.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.bluez.org/">https://www.bluez.org/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>
</dd></dl>
<ul><li>
<b>bluetuith</b> — TUI-менеджер bluetooth для облегчения сопряжения и управления устройствами/адаптерами, с передачей файлов OBEX и поддержкой мыши.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.github.com/darkhz/bluetuith">https://www.github.com/darkhz/bluetuith</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bluetuith/">bluetuith</a></span><sup><small>AUR</small></sup>
</dd></dl>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Для автоматизации команд bluetoothctl используйте <code>echo -e "<i>команда1</i>\n<i>команда2</i>\n" | bluetoothctl</code> или <code>bluetoothctl -- <i>команда</i></code>.</div>
<h4>
<span id=".D0.93.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5"></span><span class="mw-headline" id="Графические">Графические</span>
</h4>
<p>Следующие пакеты позволяют настраивать Bluetooth с помощью графического интерфейса.
</p>
<ul><li>
<b>GNOME Bluetooth</b> — Инструмент Bluetooth в <a href="../ru/GNOME.html" title="GNOME (Русский)">GNOME</a>.
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-bluetooth-3.0">gnome-bluetooth-3.0</a></span> предоставляет бэкенд (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-bluetooth">gnome-bluetooth</a></span> — старая версия)</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-shell">gnome-shell</a></span> предоставляет апплет мониторинга статуса</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-control-center">gnome-control-center</a></span> предоставляет графический интерфейс настройки, для открытия которого можно ввести Bluetooth в поиске или выполнить команду <code>gnome-control-center bluetooth</code>.</li>
<li>Также можно использовать команду <code>bluetooth-sendto</code> напрямую для отправки файлов на удалённое устройство.</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nautilus-bluetooth/">nautilus-bluetooth</a></span><sup><small>AUR</small></sup> добавляет пункт отправки по Bluetooth в контекстное меню файлов</li>
<li>Для получения файлов откройте панель настроек Bluetooth; принимать файлы можно только при открытых настройках.</li>
<li>Для добавления пункта отправки файла по Bluetooth в контекстном меню Thunar смотрите инструкции <a rel="nofollow" class="external text" href="https://docs.xfce.org/xfce/thunar/send-to">здесь</a> (укажите команду <code>bluetooth-sendto %F</code>).</li>
</ul>
</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://wiki.gnome.org/Projects/GnomeBluetooth">https://wiki.gnome.org/Projects/GnomeBluetooth</a> ||</dd></dl>
<ul><li>
<b>Bluedevil</b> — Инструмент Bluetooth в <a href="../ru/KDE.html" title="KDE (Русский)">KDE</a>. Если нет иконки в Dolphin и системном трее, включите её в настройках трея или добавьте виджет. Настроить Bluedevel и обнаружить устройства Bluetooth можно кликом по иконке. Интерфейс также доступен через настройки KDE.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://invent.kde.org/plasma/bluedevil">https://invent.kde.org/plasma/bluedevil</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluedevil">bluedevil</a></span>
</dd></dl>
<ul><li>
<b>Blueberry</b> — Инструмент в Linux Mint, надстройка над GNOME Bluetooth, работает во всех средах рабочего стола. <i>Blueberry</i> не поддерживает приём файлов через Obex Object Push.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/linuxmint/blueberry">https://github.com/linuxmint/blueberry</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=blueberry">blueberry</a></span>
</dd></dl>
<ul><li>
<b><a href="../en/Blueman.html" title="Blueman">Blueman</a></b> — Полнофункциональный менеджер Bluetooth.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/blueman-project/blueman">https://github.com/blueman-project/blueman</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=blueman">blueman</a></span>
</dd></dl>
<ul><li>
<b><a href="../en/ObexFTP.html" title="ObexFTP">ObexFTP</a></b> — Инструмент для обмена файлами с устройствами через OBEX.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="http://dev.zuckschwerdt.org/openobex/wiki/ObexFtp">http://dev.zuckschwerdt.org/openobex/wiki/ObexFtp</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/obexftp/">obexftp</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Overskride</b> — Простой, но мощный клиент bluetooth.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/kaii-lb/overskride#overskride">https://github.com/kaii-lb/overskride#overskride</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/overskride/">overskride</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2>
<span id=".D0.A1.D0.BE.D0.BF.D1.80.D1.8F.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Сопряжение">Сопряжение</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Перед использованием устройства Bluetooth убедитесь, что оно не заблокировано через <a href="../ru/Network_configuration/Wireless.html#%D0%9F%D1%80%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D0%B5%D1%80%D0%B5%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F_Rfkill" title="Network configuration (Русский)/Wireless (Русский)">rfkill</a>.</div>
<p>Этот раздел описывает прямую настройку <i>bluez5</i> через утилиту командной строки <i>bluetoothctl</i>. Это необязательно, если вы используете какой-нибудь другой инструмент (например, GNOME Bluetooth).
</p>
<p>Точная процедура зависит от особенностей конкретного устройства; эта инструкция описывает сопряжение с устройством при помощи <code>bluetoothctl</code> лишь в общих чертах.
</p>
<p>Запустите интерактивную команду <code>bluetoothctl</code>. После этого можно ввести <code>help</code> для получения списка доступных команд.
</p>
<ol>
<li>(необязательно) Выберите контроллер по умолчанию командой <code>select <i>MAC-адрес</i></code>.</li>
<li>(необязательно) Включите питание контроллера, введя <code>power on</code>, если он выключен. По умолчанию он включен; смотрите <a href="#%D0%A1%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D1%8F_%D0%B0%D0%B4%D0%B0%D0%BF%D1%82%D0%B5%D1%80%D0%B0_%D0%BF%D0%BE_%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E">#Состояние питания адаптера по умолчанию</a>.</li>
<li>Введите <code>devices</code>, чтобы увидеть MAC-адрес устройства для сопряжения.</li>
<li>Войдите в режим обнаружения устройств при помощи команды <code>scan on</code>, если нужного вам устройства нет в списке.</li>
<li>Включите агент при помощи <code>agent on</code> или выберите конкретный агент: если вы введёте <code>agent</code> и дважды нажмёте Tab, будет отображён список доступных вариантов. Агент Bluetooth управляет кодом сопряжения. <code>default-agent</code> должен подойти в большинстве случаев. <a rel="nofollow" class="external autonumber" href="https://askubuntu.com/questions/763939/bluetoothctl-what-is-a-bluetooth-agent">[1]</a>
</li>
<li>Введите <code>pair <i>MAC-адрес</i></code>, чтобы осуществить сопряжение (работает автодополнение по tab).</li>
<li>При использовании устройства без PIN, возможно, потребуется подтверждение, прежде чем оно сможет успешно переподключиться. Для этого введите <code>trust <i>MAC-адрес</i></code>.</li>
<li>Наконец, используйте <code>connect <i>MAC-адрес</i></code> для установки соединения.</li>
</ol>
<p>Сеанс будет выглядеть примерно так:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ bluetoothctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[NEW] Controller 00:10:20:30:40:50 <i>hostname</i> [default]
[bluetooth]# agent KeyboardOnly
Agent registered

[bluetooth]# default-agent
Default agent request successful

[bluetooth]# power on
Changing power on succeeded
[CHG] Controller 00:10:20:30:40:50 Powered: yes

[bluetooth]# scan on
Discovery started
[CHG] Controller 00:10:20:30:40:50 Discovering: yes
[NEW] Device 00:12:34:56:78:90 <i>device name</i>
[CHG] Device 00:12:34:56:78:90 LegacyPairing: yes

[bluetooth]# pair 00:12:34:56:78:90
Attempting to pair with 00:12:34:56:78:90
[CHG] Device 00:12:34:56:78:90 Connected: yes
[CHG] Device 00:12:34:56:78:90 Connected: no
[CHG] Device 00:12:34:56:78:90 Connected: yes
Request PIN code
[agent] Enter PIN code: 1234
[CHG] Device 00:12:34:56:78:90 Paired: yes
Pairing successful
[CHG] Device 00:12:34:56:78:90 Connected: no

[bluetooth]# connect 00:12:34:56:78:90
Attempting to connect to 00:12:34:56:78:90
[CHG] Device 00:12:34:56:78:90 Connected: yes
Connection successful
</pre>
<h3>
<span id=".D0.A1.D0.BE.D0.BF.D1.80.D1.8F.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.B8_.D0.B4.D0.B2.D0.BE.D0.B9.D0.BD.D0.BE.D0.B9_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5"></span><span class="mw-headline" id="Сопряжение_при_двойной_загрузке">Сопряжение при двойной загрузке</span>
</h3>
<p>Чтобы сопряжение работало во всех установленных операционных системах, необходимо изменить ключи сопряжения так, чтобы они были одинаковыми во всех системах.
</p>
<p>Ниже описан ручной способ изменения. Для автоматизации можно использовать <a rel="nofollow" class="external text" href="https://github.com/x2es/bt-dualboot">bt-dualboot</a>.
</p>
<h4>
<span id=".D0.9F.D0.BE.D0.B4.D0.B3.D0.BE.D1.82.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Подготовка">Подготовка</span>
</h4>
<p>Чтобы сделать это, сперва сделайте сопряжение в вашем Arch Linux. Потом перезагрузитесь в другую ОС и сделайте сопряжение там. Теперь нужно извлечь ключи сопряжения, но сперва отключите Bluetooth-устройства, чтобы не было ненужных попыток подключения до завершения настройки.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Некоторые устройства Logitech, например <a href="../en/Logitech_MX_Master.html" title="Logitech MX Master">Logitech MX Master</a> и Logitech 604 Lightspeed, инкрементируют MAC-адрес при каждом сопряжении. Проверьте, случается ли это у вас, и учтите это при завершении процесса.</div>
<h4>
<span id=".D0.94.D0.BB.D1.8F_Windows"></span><span class="mw-headline" id="Для_Windows">Для Windows</span>
</h4>
<h5>
<span id=".D0.98.D0.B7.D0.B2.D0.BB.D0.B5.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.B9_.D0.B2_Windows"></span><span class="mw-headline" id="Извлечение_ключей_в_Windows">Извлечение ключей в Windows</span>
</h5>
<p>Загрузитесь в Windows.
</p>
<p>Запись реестра, содержащая ключи, доступна только <a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/windows/security/identity-protection/access-control/local-accounts#system">пользователю SYSTEM</a>, в которого нельзя выполнить вход. Поэтому понадобится утилита <a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/sysinternals/downloads/psexec">PsExec</a> с официального сайта Windows Sysinternals для запуска <code>regedit.exe</code> от имени <code>SYSTEM</code>.
</p>
<p>Скачайте архив <a rel="nofollow" class="external text" href="https://download.sysinternals.com/files/PSTools.zip">PsTools</a> и извлеките из него файл <code>PsExec64.exe</code>.
</p>
<p>Запустите командную строку от имени администратора, перейдите в папку с извлечённым exe-файлом и запустите редактор реестра:
</p>
<pre>.\PsExec64.exe -s -i regedit.exe
</pre>
<p>В редакторе перейдите к этому разделу:
</p>
<pre>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\BTHPORT\Parameters\Keys
</pre>
<p>В нём содержатся подразделы для каждого Bluetooth-адаптера, названные по их MAC-адресам. Если их несколько и вы не знаете, какой из них вам нужен, смотрите <a rel="nofollow" class="external text" href="https://www.addictivetips.com/windows-tips/find-bluetooth-mac-address-windows-10/">эту инструкцию</a> для выяснения MAC-адреса нужного вам Bluetooth-адаптера.
</p>
<p>Разделы Bluetooth-адаптеров содержат параметры для каждого сопряжённого устройства, причём имена этих параметров являются MAC-адресами. Также могут присутствовать подразделы, названные по MAC-адресам сопряжённых устройств, и каждый такой подраздел будет содержать ключи с именами вроде <code>LTK</code> или <code>IRK</code>. Эти подразделы (если они есть) соответствуют устройствам Bluetooth 5.1. Если для нужного вам устройства такой подраздел есть, это устройство Bluetooth 5.1. Если подраздела нет, а есть только параметр, это не устройство Bluetooth 5.1.
</p>
<p>Нажмите правой кнопкой мыши на раздел адаптера и экспортируйте его в файл <i>.reg</i>. Это текстовый файл, из которого можно копировать ключи. Как описано выше, он содержит параметры с ключами сопряжения для устройств без Bluetooth 5.1 и подразделы с ключами сопряжения (и другой информацией) для устройств Bluetooth 5.1. Сделайте этот файл доступным для вашей установки Linux и перезагрузитесь в него.
</p>
<p>Если нужное устройство <i>не является</i> устройством Bluetooth 5.1, перейдите к разделу <a href="#%D0%97%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D0%B5">#Завершение</a>. Если устройство <i>является</i> устройством Bluetooth 5.1, нужно внести некоторые изменения в ключи сопряжения и связанную с ними информацию, как описано в разделе <a href="#%D0%9F%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9_Bluetooth_5.1">#Подготовка ключей Bluetooth 5.1</a>.
</p>
<h5>
<span id=".D0.98.D0.B7.D0.B2.D0.BB.D0.B5.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.B9_.D0.B2_Linux"></span><span class="mw-headline" id="Извлечение_ключей_в_Linux">Извлечение ключей в Linux</span>
</h5>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если ваш Windows-раздел зашифрован Bitlocker'ом, то получить к нему доступ через chntpw не получится.</div>
<p>Перезагрузитесь в Arch. Установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=chntpw">chntpw</a></span>. Примонтируйте ваш Windows-раздел.
</p>
<pre>$ cd <i>/путь/к/windows/диску</i>/Windows/System32/config
$ chntpw -e SYSTEM
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Вместо CurrentControlSet вы можете увидеть ControlSet00<i>X</i>, где <i>X</i> — любое число. Проверьте это с помощью команды ls.</div>
<p>В окружении <code>chntpw</code> выполните
</p>
<pre>&gt; cd CurrentControlSet\Services\BTHPORT\Parameters\Keys
</pre>
<p>или
</p>
<pre>&gt; cd ControlSet00<i>X</i>\Services\BTHPORT\Parameters\Keys
</pre>
<p>Затем узнайте MAC-адрес вашего Bluetooth-адаптера и перейдите в соответствующий раздел:
</p>
<pre>&gt; ls
&gt; cd <i>mac-адрес</i>
</pre>
<p>Сделайте то же самое для сопряжённых устройств. Если устройство <i>не является</i> устройством Bluetooth 5.1, вы увидите только ключ сопряжения:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">&gt; ls</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Node has 0 subkeys and 1 values
size  type        value name    [value if type DWORD]
16    REG_BINARY &lt;123456789876&gt;
</pre>
<p>В таком случае можно просто получить ключ устройства командой <code>hex</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">&gt; hex 123456789876</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">:00000 XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX (всякие другие символы)
</pre>
<p>«XX»ы и являются ключом сопряжения. Запомните, какие ключи каким MAC-адресам соответствуют.
</p>
<p>Если устройство <i>является</i> устройством Bluetooth 5.1, вы увидите несколько разных ключей:
</p>
<pre>Node has 0 subkeys and 8 values
  size     type              value name             [value if type DWORD]
    16  3 REG_BINARY         &lt;LTK&gt;
     4  4 REG_DWORD          &lt;KeyLength&gt;               16 [0x10]
     8  b REG_QWORD          &lt;ERand&gt;
     4  4 REG_DWORD          &lt;EDIV&gt;                 37520 [0x9290]
    16  3 REG_BINARY         &lt;IRK&gt;
     8  b REG_QWORD          &lt;Address&gt;
     4  4 REG_DWORD          &lt;AddressType&gt;              1 [0x1]
     4  4 REG_DWORD          &lt;AuthReq&gt;                 45 [0x2d]
</pre>
<p>Их использование описано в разделе <a href="#%D0%9F%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9_Bluetooth_5.1">#Подготовка ключей Bluetooth 5.1</a>. Для получения значений параметров используйте команду <code>hex <i>value_name</i></code>.
</p>
<p>Наконец, импортируйте ключи в вашу установку Linux, как описано в разделе <a href="#%D0%97%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D0%B5">#Завершение</a>.
</p>
<h4>
<span id=".D0.94.D0.BB.D1.8F_macOS"></span><span class="mw-headline" id="Для_macOS">Для macOS</span>
</h4>
<p>Загрузитесь в macOS:
</p>
<ul>
<li>Для macOS Monterey или новее:
<ol>
<li>Откройте «Связку ключей» и в строку поиска введите Bluetooth.</li>
<li>Отсортируйте по дате.</li>
<li>Если переподключение устройства выполнялось недавно, можно просто отсортировать ключи по дате и выбрать самый свежий. Скорее всего он будет иметь название MobileBluetooth (для старых устройств) или просто UUID (для Bluetooth 5.1+).</li>
<li>Дважды щёлкните по записи. Проверьте, что в качестве учётной записи указан MAC-адрес вашего устройства.</li>
<li>Поставьте галочку «Показать пароль». Система попросит вас ввести свой пароль.</li>
<li>Скопируйте показанный пароль, который по сути является XML-файлом (<code>⌘+a</code> <code>⌘+c</code>)</li>
<li>Вставьте и сохраните его в файл <code>bt_keys.txt</code> в вашем домашнем каталоге.</li>
</ol>
</li>
<li>Для High Sierra или новее выполните в терминале: <pre># defaults read /private/var/root/Library/Preferences/com.apple.bluetoothd.plist LinkKeys &gt; ~/bt_keys.txt</pre>
</li>
<li>Для Sierra или более старых систем выполните в терминале: <pre># defaults read /private/var/root/Library/Preferences/blued.plist LinkKeys &gt; ~/bt_keys.txt</pre>
</li>
</ul>
<p>Теперь в файле <code>~/.bt_keys.txt</code> находятся ключи Bluetooth. Для старых версий macOS (High Sierra и старше) нужно перевернуть ключи перед продолжением. Например, <code>98 54 2f aa bb cc dd ee ff gg hh ii jj kk ll mm</code> нужно изменить на <code>MM LL KK JJ GG FF EE DD CC BB AA 2F 54 98</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Это можно сделать таким кодом <a href="../ru/Python.html" title="Python (Русский)">Python</a>:
<pre>&gt;&gt;&gt; key = "98 54 2f aa bb cc dd ee ff gg hh ii jj kk ll mm"
&gt;&gt;&gt; " ".join(reversed(key.strip().split()))</pre>
</div>
<p>Если это устройство Bluetooth 5.1, то у одного устройства будет несколько ключей. Перейдите к разделу <a href="#%D0%9F%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9_Bluetooth_5.1">#Подготовка ключей Bluetooth 5.1</a> для работы с ними.
</p>
<p>Наконец, импортируйте ключи в вашу установку Linux, как описано в разделе <a href="#%D0%97%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D0%B5">#Завершение</a>.
</p>
<h4>
<span id=".D0.9F.D0.BE.D0.B4.D0.B3.D0.BE.D1.82.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.B9_Bluetooth_5.1"></span><span class="mw-headline" id="Подготовка_ключей_Bluetooth_5.1">Подготовка ключей Bluetooth 5.1</span>
</h4>
<p>Если во время выполнения описанных выше шагов вы получили ключи для устройств Bluetooth 5.1, то перед импортом в Linux необходимо преобразовать значения определённым образом для последующего использования на этапе <a href="#%D0%97%D0%B0%D0%B2%D0%B5%D1%80%D1%88%D0%B5%D0%BD%D0%B8%D0%B5">#Завершение</a>. Процесс преобразования зависит от конкретного устройства; примеры для некоторых устройств приведены ниже.
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Устройство</th>
<th>Источник ключа и преобразования (Windows)</th>
<th>Источник ключа и преобразования (macOS)</th>
<th>Название получаемого значения
</th>
</tr>
<tr>
<td rowspan="3">
<ul>
<li>Logitech MX Master 3</li>
<li>Logitech MX Master 3S</li>
<li>Logitech MX Keys</li>
<li>Logitech MX Mechanical</li>
<li>Xbox One S Wireless Controller</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <code>IRK</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>IdentityResolvingKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>LTK</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>SlaveLongTermKey.Key</code> и <code>PeripheralLongTermKey.Key</code>
</td>
</tr>
<tr>
<td>
<code>ERand</code> и <code>EDIV</code> должны быть <code>0</code>
</td>
<td>
<i>Random Number</i> и <i>Encrypted Diversifier</i> должны быть <code>0</code>.
</td>
<td data-sort-value="5" style="background: inherit; color: inherit; vertical-align: middle; text-align: center;">–
</td>
</tr>
<tr>
<td rowspan="6">
<ul><li>Logitech MX Anywhere 2S</li></ul>
</td>
<td>
<ul>
<li>Скопируйте <code>IRK</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>IdentityResolvingKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>CSRK</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LocalSignatureKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>LTK</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LongTermKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>KeyLength</code>.</li>
<li>Преобразуйте число в десятичное.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LongTermKey.EncSize</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>EDIV</code>.</li>
<li>Преобразуйте число в десятичное.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LongTermKey.EDiv</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>ERand</code>.</li>
<li>Измените порядок октетов на обратный.</li>
<li>Преобразуйте число в десятичное.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>LongTermKey.Rand</code>
</td>
</tr>
<tr>
<td rowspan="4">
<ul>
<li>ThinkPad TrackPoint Keyboard II</li>
<li>Pebble M350 mouse</li>
<li>Logitech G604 Lightspeed mouse</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <code>IRK</code>.</li>
<li>Измените порядок октетов на обратный.</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <i>Remote IRK</i>.</li>
<li>Преобразуйте из base64 в hex.</li>
</ul>
</td>
<td>
<code>IdentityResolvingKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>LTK</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <i>Remote Encryption</i> &gt; <i>Long-term Key</i>.</li>
<li>Преобразуйте из base64 в hex.</li>
</ul>
</td>
<td>
<code>LongTermKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>ERand</code>.</li>
<li>Измените порядок октетов на обратный.</li>
<li>Преобразуйте число в десятичное.</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <i>Remote Encryption</i> &gt; <i>Random Number</i>.</li>
<li>Преобразуйте из base64 в little-endian десятичное число (смотрите Python-код ниже).</li>
</ul>
</td>
<td>
<code>LongTermKey.Rand</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>EDIV</code>.</li>
<li>Измените порядок октетов на обратный.</li>
<li>Преобразуйте число в десятичное.</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <i>Remote Encryption</i> &gt; <i>Encrypted Diversifier</i>.</li>
<li>Преобразуйте из base64 в little-endian десятичное число (смотрите Python-код ниже).</li>
</ul>
</td>
<td>
<code>LongTermKey.EDiv</code>
</td>
</tr>
<tr>
<td rowspan="3">Другие устройства
</td>
<td>
<ul>
<li>Скопируйте <code>LTK</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <i>Remote IRK</i>.</li>
<li>Преобразуйте из base64 в hex.</li>
</ul>
</td>
<td>
<code>LongTermKey.Key</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>ERand</code>.</li>
<li>Измените порядок октетов на обратный.</li>
<li>Преобразуйте число в десятичное.</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <i>Remote Encryption</i> &gt; <i>Long-term Key</i>.</li>
<li>Преобразуйте из base64 в hex.</li>
</ul>
</td>
<td>
<code>LongTermKey.Rand</code>
</td>
</tr>
<tr>
<td>
<ul>
<li>Скопируйте <code>EDIV</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td>
<ul>
<li>Скопируйте <i>Remote Encryption</i> &gt; <i>Encrypted Diversifier</i>.</li>
<li>Преобразуйте из base64 в hex.</li>
<li>Измените порядок октетов на обратный.</li>
</ul>
</td>
<td>
<code>LongTermKey.EDiv</code>
</td>
</tr>
<tr>
<td rowspan="1">Xbox wireless controller
</td>
<td>
<ul>
<li>Скопируйте <code>LTK</code>.</li>
<li>Уберите пробелы между октетами.</li>
</ul>
</td>
<td style="background: #ddd; color: inherit; vertical-align: middle; text-align: center;">?
</td>
<td>
<code>SlaveLongTermKey.Key</code>
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul><li>Чтобы просто удалить пробелы из значения, можно использовать <a rel="nofollow" class="external text" href="https://www.browserling.com/tools/remove-all-whitespace">этот онлайн-инструмент</a> или такой код <a href="../ru/Python.html" title="Python (Русский)">Python</a>:</li></ul>
<pre>&gt;&gt;&gt; "<i>значение с пробелами</i>".replace(" ", "")
</pre>
<ul><li>Вот так можно изменить порядок октетов на обратный (обратите внимание, что в итоге получится список строк с октетами):</li></ul>
<pre>&gt;&gt;&gt; ERand=" 63 02 84 B8 5D 40 44 DF   "
&gt;&gt;&gt; ERand=list(reversed(ERand.strip().split()))</pre>
<ul><li>Вот так можно преобразовать этот список в десятичное число, если требуется:</li></ul>
<pre>&gt;&gt;&gt; int("".join(ERand), 16)
16088054540146049635</pre>
<ul><li>Преобразование base64 в hex (перед этим импортируйте модули командой <code>import binascii, base64</code>):</li></ul>
<pre>binascii.hexlify(base64.decodebytes(b'...')).upper()
</pre>
<ul><li>Преобразование macOS Encrypted Diversifier (тоже импортируйте модуль командой <code>import struct</code>):</li></ul>
<pre>struct.unpack('&lt;H', base64.decodebytes(b'...'))
</pre>
<ul><li>Преобразование macOS Random Number:</li></ul>
<pre>struct.unpack('&lt;Q', base64.decodebytes(b'...'))
</pre>
</div>
<p>Примеры в общем случае:
</p>
<ul>
<li>Из <code>LTK</code> со значением <code>48 4D AF CD 0F 92 22 88 0A 52 9A F4 76 DA 8B 94</code> должен получиться <code>LongTermKey.Key</code> со значением <code>484DAFCD0F9222880A529AF476DA8B94</code>.</li>
<li>Из <code>ERand</code> со значением <code>63 02 84 B8 5D 40 44 DF</code> должен получиться <code>Rand</code> со значением <code>16088054540146049635</code>.</li>
<li>Из <code>EDIV</code> со значением <code>37520</code> должен получиться <code>EDiv</code> со значением <code>37520</code>.</li>
</ul>
<h4>
<span id=".D0.97.D0.B0.D0.B2.D0.B5.D1.80.D1.88.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Завершение">Завершение</span>
</h4>
<p>Теперь, когда у вас есть нужные ключи, войдите как root и перейдите в каталог:
</p>
<pre># cd /var/lib/bluetooth/<i>MAC-адрес-адаптера</i></pre>
<p>Здесь вы найдёте подкаталоги для каждого сопряжённого устройства. Для каждого нужного устройства перейдите в его подкаталог:
</p>
<pre># cd <i>MAC-адрес-устройства</i></pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> На этом этапе, если вы используете устройство, которое инкрементирует свой MAC-адрес при каждом сопряжении, вы должны переименовать каталог нужного устройства на актуальный инкрементированный MAC-адрес, получившийся при последнем сопряжении. Либо скопируйте MAC-адрес из другой системы, либо увеличьте его самостоятельно, не забывая о том, что каждый октет — это двузначное <a href="https://en.wikipedia.org/wiki/ru:%D0%A8%D0%B5%D1%81%D1%82%D0%BD%D0%B0%D0%B4%D1%86%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%81%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F" class="extiw" title="wikipedia:ru:Шестнадцатеричная система счисления">шестнадцатеричное</a> число.</div>
<p>Если у вас есть только один ключ сопряжения (то есть устройство не является устройством Bluetooth 5.1), измените файл <code>info</code> и подставьте ключ под <code>[LinkKey]</code>, например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[LinkKey]
Key=XXXXXXXXXXXXXXX</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Все буквы должны быть в верхнем регистре. Уберите все пробелы.</div>
<p>Если у вас несколько ключей, то есть устройство является устройством Bluetooth 5.1, измените файл <code>info</code>, прописав в нём значения, которые вы получили после выполнения описанных выше преобразований. Пример для Xbox One S Wireless Controller:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[IdentityResolvingKey]
Key=&lt;IdentityResolvingKey.Key&gt;

[PeripheralLongTermKey]
Key=&lt;PeripheralLongTermKey.Key&gt;

[SlaveLongTermKey]
Key=&lt;SlaveLongTermKey.Key&gt;</pre>
<p>Затем <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">перезапустите</a> <code>bluetooth.service</code> и <code>pulseaudio</code> (командой <code>pulseaudio -k &amp;&amp; pulseaudio --start</code>).
</p>
<p>Теперь устройство должно успешно подключаться.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> В зависимости от вашего менеджера Bluetooth может понадобиться выполнить полную перезагрузку для переподключения устройств.</div>
<h2>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0"></span><span class="mw-headline" id="Настройка">Настройка</span>
</h2>
<h3>
<span id=".D0.A1.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B8.D1.82.D0.B0.D0.BD.D0.B8.D1.8F_.D0.B0.D0.B4.D0.B0.D0.BF.D1.82.D0.B5.D1.80.D0.B0_.D0.BF.D0.BE_.D1.83.D0.BC.D0.BE.D0.BB.D1.87.D0.B0.D0.BD.D0.B8.D1.8E"></span><span class="mw-headline" id="Состояние_питания_адаптера_по_умолчанию">Состояние питания адаптера по умолчанию</span>
</h3>
<p>С версии <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez">bluez</a></span> 5.65 питание всех Bluetooth-адаптеров по умолчанию включается при запуске службы или после пробуждения из сна. <a rel="nofollow" class="external autonumber" href="https://github.com/bluez/bluez/commit/180cf09933b2d8eb03972c8638063429fe5fece5">[2]</a>
</p>
<p>Если вы хотите, чтобы адаптер не включался автоматически (например, на портативном устройстве, на котором вы хотите сэкономить заряд батареи), в файле <code>/etc/bluetooth/main.conf</code> в разделе <code>[Policy]</code> пропишите <code>AutoEnable=false</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Policy]
AutoEnable=false</pre>
<p>Адаптер можно будет включить вручную командой <code>power on</code>, как упоминалось в разделе <a href="#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5">#Сопряжение</a>.
</p>
<h3>
<span id=".D0.92.D0.B8.D0.B4.D0.B8.D0.BC.D0.BE.D1.81.D1.82.D1.8C_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA.D0.B5_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B"></span><span class="mw-headline" id="Видимость_при_запуске_системы">Видимость при запуске системы</span>
</h3>
<p>Если вы хотите, чтобы ваше устройство всегда было видимо и доступно для подключения:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
DiscoverableTimeout = 0</pre>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D1.83.D0.B6.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B8.D0.B7_.D1.81.D0.BD.D0.B0"></span><span class="mw-headline" id="Пробуждение_из_сна">Пробуждение из сна</span>
</h3>
<p>Чтобы разрешить Bluetooth-клавиатурам, мышам и т. д. пробуждать систему из сна, сначала проверьте настройки BIOS и убедитесь, что функция пробуждения от USB включена. Во многих случаях Bluetooth на материнской плате является USB-устройством.
</p>
<p>Найдите ID производителя и ID устройства для адаптера Bluetooth.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb | grep bluetooth -i</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Bus 001 Device 002: ID 8087:0039 Intel Corp. AX200 Bluetooth
</pre>
<p>Добавьте новое правило <a href="../ru/Udev.html" title="Udev (Русский)">udev</a> для указанных ID производителя и ID устройства, чтобы включить для этого устройства пробуждение из сна.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/91-keyboard-mouse-wakeup.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="usb", ATTRS{idVendor}=="8087", ATTRS{idProduct}=="0039" RUN+="/bin/sh -c 'echo enabled &gt; /sys$env{DEVPATH}/../power/wakeup;'"</pre>
<p>Чтобы автоматически изменить настройки Bluetooth-клавиатуры после пробуждения, например раскладку или частоту повторения зажатых клавиш (смотрите <a href="../ru/Xorg/Keyboard_configuration.html#%D0%A0%D0%B5%D0%B3%D1%83%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B8_%D0%B8_%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D0%B8_%D0%B0%D0%B2%D1%82%D0%BE%D0%BF%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%B0" class="mw-redirect" title="Конфигурация клавиатуры в Xorg">Конфигурация клавиатуры в Xorg#Регулировка задержки и скорости автоповтора</a> и <a href="../ru/Xmodmap.html" title="Xmodmap (Русский)">xmodmap (Русский)</a>), создайте такой скрипт и сделайте его <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">configure_keyboard.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
export DISPLAY=:0
xset r rate 220 30
xmodmap <i>/путь/к/.Xmodmap</i></pre>
<p>И добавьте ещё одно правило, подобное приведённому выше, для запуска этого скрипта:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/92-keyboard-reconfiguration-wakeup.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="usb", ATTRS{idVendor}=="8087", ATTRS{idProduct}=="0039" RUN+="<i>/путь/к/configure_keyboard.sh</i>"</pre>
<h3>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.8D.D0.BA.D1.81.D0.BF.D0.B5.D1.80.D0.B8.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D0.BB.D1.8C.D0.BD.D1.8B.D1.85_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.B9"></span><span class="mw-headline" id="Включение_экспериментальных_функций">Включение экспериментальных функций</span>
</h3>
<p>В стеке Bluez новые функции, потенциально имеющие ошибки, спрятаны за опциями Experimental и KernelExperimental. Набор функций, управляемых этими опциями, меняется со временем; некоторые функции могут стать стабильными и больше не требовать включения этих опций. Пример: включение экспериментальных интерфейсов D-Bus в настоящее время позволяет сообщать об уровне заряда батареи для старых гарнитур. Для включения раскомментируйте соответствующие строки в файле настроек:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...

# Enables D-Bus experimental interfaces
# Possible values: true or false
<b>#Experimental = true</b>

# Enables kernel experimental features, alternatively a list of UUIDs
# can be given.
# Possible values: true,false,&lt;UUID List&gt;
# Possible UUIDS:
...
# Defaults to false.
<b>#KernelExperimental = true</b></pre>
<p>Другой способ — <a href="../ru/Systemd.html#%D0%A0%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">отредактировать</a> юнит <code>bluetooth.service</code>, создав <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" class="mw-redirect" title="Drop-in файл">drop-in файл</a> и добавив флаг <code>--experimental</code> или <code>--kernel</code> для запускаемой команды:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/bluetooth.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/lib/bluetooth/bluetoothd --experimental</pre>
<p>В обоих случаях <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">перезапустите</a> <code>bluetooth.service</code> после внесения изменений.
</p>
<h2>
<span id=".D0.90.D1.83.D0.B4.D0.B8.D0.BE"></span><span class="mw-headline" id="Аудио">Аудио</span>
</h2>
<p>Обычно нужны дополнительные шаги для интеграции аудиосервера с Bluetooth. Подробнее это описано ниже.
</p>
<p>Смотрите также <a href="../ru/Bluetooth_headset.html" class="mw-redirect" title="Bluetooth наушники">Bluetooth наушники</a> для информации о подключении Bluetooth-гарнитуры.
</p>
<h3><span class="mw-headline" id="PulseAudio">PulseAudio</span></h3>
<p>Установите пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pulseaudio-bluetooth">pulseaudio-bluetooth</a></span>. Не забудьте перезапустить PulseAudio после переустановки: <code>pulseaudio -k</code>. При стандартной установке PulseAudio (то есть при использовании пользовательской службы со стандартным <code>default.pa</code>) после этого у вас сразу должна появиться возможность использования Bluetooth-устройств. <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/pulseaudio/pulseaudio/-/blob/stable-16.x/src/daemon/default.pa.in#L84-93">[3]</a>
</p>
<p>Если ваш PulseAudio работает как общесистемная служба, убедитесь, что пользователь, от имени которого запущен демон (обычно <code>pulse</code>), состоит в группе <code>lp</code>, и не забудьте загрузить нужные модули:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pulse/system.pa</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
load-module module-bluetooth-policy
load-module module-bluetooth-discover
...</pre>
<p>Также можно добавить модуль <code>load-module module-switch-on-connect</code>, если вы хотите автоматически переключать все звуки на устройство Bluetooth.
</p>
<h3><span class="mw-headline" id="PipeWire">PipeWire</span></h3>
<p>PipeWire с версии 0.3.19 включает свою поддержку Bluetooth по умолчанию.
</p>
<h3><span class="mw-headline" id="ALSA">ALSA</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Bluez5 прекратил поддержку <a href="../en/Advanced_Linux_Sound_Architecture.html" class="mw-redirect" title="ALSA">ALSA</a> и поддерживает только <a href="../ru/PulseAudio.html" title="PulseAudio (Русский)">PulseAudio</a>. Используйте эту инструкцию, только если вы не можете или не хотите использовать PulseAudio.</div>
<p>Сперва убедитесь, что ваше аудиоустройство Bluetooth подключено и сопряжено с системой.
</p>
<p>Затем установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/bluez-alsa-git/">bluez-alsa-git</a></span><sup><small>AUR</small></sup>, запустите (и включите) службу <code>bluealsa</code> и добавьте своего пользователя в группу <code>audio</code>.
</p>
<p>Выполните следующую команду для проверки, что всё работает (замените <code><i>XX:XX:XX:XX:XX:XX</i></code> и <code><i>ФАЙЛ.wav</i></code> на нужные значения):
</p>
<pre>$ aplay -D bluealsa:SRV=org.bluealsa,DEV=<i>XX:XX:XX:XX:XX:XX</i>,PROFILE=a2dp <i>ФАЙЛ.wav</i>
</pre>
<p>В завершение добавьте эти строки в <code>~/.asoundrc</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.asoundrc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">defaults.bluealsa {
    service "org.bluealsa"
    device "XX:XX:XX:XX:XX:XX"
    profile "a2dp"
}
</pre>
<p>Теперь можно использовать устройство <code>bluealsa</code> для доступа к аудиоустройству Bluetooth. Управление громкостью обычно осуществляется через <code>alsamixer</code> с опцией <code>-D bluealsa</code>.
</p>
<h2><span class="mw-headline" id="Bluetooth_serial">Bluetooth serial</span></h2>
<p>Чтобы получить последовательную связь на Bluetooth-to-Serial модулях (HC-05, HC-06), выполните следующие шаги:
</p>
<p>Выполните сопряжение с вашим устройством Bluetooth с помощью <code>bluetoothctl</code>, как описано в разделе <a href="#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5">#Сопряжение</a>.
</p>
<p>Установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>, поскольку он предоставляет функции, отсутствующие в более новых инструментах.
</p>
<p>Привяжите MAC-адрес сопряжённого устройства к терминула tty:
</p>
<pre># rfcomm bind rfcomm0 <i>MAC-адрес-устройства</i>
</pre>
<p>Теперь можно открыть <code>/dev/rfcomm0</code> для последовательной связи:
</p>
<pre>$ picocom /dev/rfcomm0 -b 115200
</pre>
<h2>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h2>
<h3>
<span id=".D0.9E.D1.81.D0.BD.D0.BE.D0.B2.D0.BD.D0.BE.D0.B5"></span><span class="mw-headline" id="Основное">Основное</span>
</h3>
<h4>
<span id=".D0.9E.D1.82.D0.BB.D0.B0.D0.B4.D0.BA.D0.B0"></span><span class="mw-headline" id="Отладка">Отладка</span>
</h4>
<p>Для отладки сперва <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Остановите">остановите</a> <code>bluetooth.service</code>.
</p>
<p>Затем запустите его напрямую с параметром <code>-d</code>:
</p>
<pre># /usr/lib/bluetooth/bluetoothd -n -d
</pre>
<p>Другой вариант — использовать инструмент <code>btmon</code>.
</p>
<h4>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D1.80.D0.B5.D0.B2.D1.88.D0.B8.D0.B5_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B_BlueZ"></span><span class="mw-headline" id="Устаревшие_инструменты_BlueZ">Устаревшие инструменты BlueZ</span>
</h4>
<p>Восемь инструментов BlueZ <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/commit/?id=b1eb2c4cd057624312e0412f6c4be000f7fc3617">объявлены устаревшими</a> и удалены из <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>, хотя не для всех из них есть замена среди новых инструментов. Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span> предоставляет эти устаревшие инструменты.
</p>
<table class="wikitable" style="max-width: 50em;">

<tbody>
<tr>
<th>Устаревший инструмент
</th>
<th>Ближайшая замена
</th>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/gatttool.1.en.html">gatttool</a></td>
<td>btgatt-client, <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/gatt-api.txt">D-Bus Gatt API</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-10-29 ⓘ]</sup>
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/hciattach.1.en.html">hciattach</a></td>
<td>btattach
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/hciconfig.1.en.html">hciconfig</a></td>
<td>btmgmt (и bluetoothctl?)
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez-hcidump/hcidump.1.en.html">hcidump</a></td>
<td>btmon (и btsnoop)
</td>
</tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/hcitool.1.en.html">hcitool</a></td>
<td>отсутствует, есть <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/device-api.txt">D-Bus Device API</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-10-29 ⓘ]</sup>
</td>
</tr>
<tr>
<td>
<a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/rfcomm.1.en.html">rfcomm</a>
</td>
<td rowspan="2">отсутствует, сделать с <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/profile-api.txt">D-Bus Profile1 API</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-10-29 ⓘ]</sup>?
</td>
</tr>
<tr>
<td>
<a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/ciptool.1.en.html">ciptool</a>
</td>
</tr>
<tr>
<td style="vertical-align: top;">
<a rel="nofollow" class="external text" href="https://manpages.debian.org/latest/bluez/sdptool.1.en.html">sdptool</a>
</td>
<td>отсутствует, функциональность кажется разбросанной по разным объектам DBus: <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/profile-api.txt">Profile</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-10-29 ⓘ]</sup>, <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/advertising-api.txt">Advertising</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-10-29 ⓘ]</sup>, и массивы UUID в <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/device-api.txt">device</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-10-29 ⓘ]</sup> и <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc/adapter-api.txt">adapter</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-10-29 ⓘ]</sup>.
</td>
</tr>
</tbody>
</table>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81.D0.BB.D1.83.D0.B6.D0.B1.D1.8B"></span><span class="mw-headline" id="Проблемы_службы">Проблемы службы</span>
</h3>
<h4><span class="mw-headline" id="systemd:_Condition_check_resulted_in_Bluetooth_service_being_skipped">systemd: Condition check resulted in Bluetooth service being skipped</span></h4>
<p><code>bluetooth.service</code> требует только существование каталога <code>/sys/class/bluetooth</code>, который создаётся модулем ядра <code>bluetooth</code>, который автоматически загружается через <code>systemd-udev</code>, если он находит работающее устройство Bluetooth.
</p>
<p>Если у вас <code>/sys/class/bluetooth</code> не существует, проверьте, что модуль Bluetooth загружен, командой <code>lsmod</code>. Если нет, и вы уверены, что у вас есть устройство Bluetooth, попробуйте <a href="../ru/Kernel_module.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8F%D0%BC%D0%B8_%D0%B2%D1%80%D1%83%D1%87%D0%BD%D1%83%D1%8E" title="Kernel module (Русский)">загрузить его вручную</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустить">перезапустить</a> службу <code>bluetooth.service</code>.
</p>
<p>Также нужно загрузить соответствующий драйвер Bluetooth, чаще всего <code>btusb</code>, но иногда могут понадобиться <code>btrtl,btintel,btbcm,bnep,btusb</code> и т.д.
</p>
<p>Проверьте <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" title="Help:Reading (Русский)">статус</a> службы <code>bluetooth.service</code>, чтобы убедиться, что она запущена.
</p>
<p>Смотрите также <a rel="nofollow" class="external text" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=853207">Debian Bug report logs - #853207</a>.
</p>
<p>Если <code>bluetooth.service</code> успешно запускается, но нормально использовать Bluetooth всё равно не получается (например, <code>bluetoothctl</code> говорит что-то вроде <code>org.Bluez.Error.NotReady</code> при выполнении <code>scan on</code>), попробуйте перезагрузить компьютер и дважды проверьте: каталог <code>/sys/class/bluetooth</code> существует; <code>lsmod</code> содержит нужные модули Bluetooth; сообщения в <a href="../ru/Systemd/Journal.html" title="Systemd (Русский)/Journal (Русский)">журнале</a>; и т.д. <code>systemd-udev</code> должен подхватить ваше устройство Bluetooth автоматически.
</p>
<h4>
<span id="Bluetooth_.D1.81.D1.80.D0.B0.D0.B7.D1.83_.D0.BF.D1.80.D0.BE.D0.B1.D1.83.D0.B6.D0.B4.D0.B0.D0.B5.D1.82_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.83_.D0.B8.D0.B7_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D0.B0_suspend-to-idle"></span><span class="mw-headline" id="Bluetooth_сразу_пробуждает_систему_из_режима_suspend-to-idle">Bluetooth сразу пробуждает систему из режима suspend-to-idle</span>
</h4>
<p>На системах с поддержкой <a href="../ru/Power_management/Suspend_and_hibernate.html" title="Power management (Русский)/Suspend and hibernate (Русский)">suspend-to-idle/S2idle/S0ix/Modern Standby</a> Bluetooth-контроллеры остаются включенными в этом режиме сна. Это обычно приводит к тому, что система <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=200039">просыпается сразу после перехода в сон</a>, если подключено какое-либо устройство Bluetooth.
</p>
<p>Чтобы предотвратить это, вы можете полностью отключить Bluetooth перед переходом в сон. Установите <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span> и создайте файл:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/bluetooth-disable-before-sleep.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Disable Bluetooth before going to sleep
Before=sleep.target
Before=suspend.target
Before=hybrid-sleep.target
Before=suspend-then-hibernate.target
StopWhenUnneeded=yes

[Service]
Type=oneshot
RemainAfterExit=yes

ExecStart=/usr/bin/bluetoothctl power off
ExecStop=/usr/bin/bluetoothctl power on

[Install]
WantedBy=sleep.target
WantedBy=suspend.target
WantedBy=hybrid-sleep.target
WantedBy=suspend-then-hibernate.target</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">Включите</a> эту службу и проверьте, что Bluetooth отключается при переходе в сон и включается обратно после пробуждения.
</p>
<p>При использовании этого обходного решения <a href="#%D0%9F%D1%80%D0%BE%D0%B1%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B8%D0%B7_%D1%81%D0%BD%D0%B0">#Пробуждение из сна</a> с помощью клавиатуры или мыши не будет работать.
</p>
<h4>
<span id="Bluetooth_.D0.BE.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.B2.D1.8B.D1.85.D0.BE.D0.B4.D0.B0_.D0.BD.D0.B0_headless-.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D0.B5_.D0.B8.D0.BB.D0.B8_.D1.81.D0.B5.D1.80.D0.B2.D0.B5.D1.80.D0.B5"></span><span class="mw-headline" id="Bluetooth_отключается_после_выхода_на_headless-системе_или_сервере">Bluetooth отключается после выхода на headless-системе или сервере</span>
</h4>
<p>Это может быть вызвано различными причинами:
</p>
<ul>
<li>И <a href="../ru/PulseAudio.html" title="PulseAudio (Русский)">PulseAudio</a>, и <a href="../ru/PipeWire.html" title="PipeWire (Русский)">PipeWire</a> по умолчанию работают как пользовательские службы, которые завершают работу после завершения последнего сеанса. Чтобы этого не происходило, <a href="../ru/Systemd/User.html#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA_systemd_%D0%BE%D1%82_%D0%B8%D0%BC%D0%B5%D0%BD%D0%B8_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F" title="Systemd (Русский)/User (Русский)">включите lingering</a> для пользователя.</li>
<li>Кроме того, при использовании <a href="../ru/WirePlumber.html" title="WirePlumber (Русский)">WirePlumber</a> с <a href="../ru/PipeWire.html" title="PipeWire (Русский)">PipeWire</a> (что обычно и происходит) WirePlumber запускает «logind-monitor», который включает Bluetooth при входе и отключает его при выходе. Решение описано в разделе <a href="../en/WirePlumber.html#Keep_Bluetooth_running_after_logout_/_Headless_Bluetooth" title="WirePlumber">WirePlumber#Keep Bluetooth running after logout / Headless Bluetooth</a>.</li>
</ul>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D0.B0.D0.B4.D0.B0.D0.BF.D1.82.D0.B5.D1.80.D0.B0"></span><span class="mw-headline" id="Проблемы_адаптера">Проблемы адаптера</span>
</h3>
<h4>
<span id="hcitool_scan:_.D0.A3.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE_.D0.BD.D0.B5_.D0.BD.D0.B0.D0.B9.D0.B4.D0.B5.D0.BD.D0.BE"></span><span class="mw-headline" id="hcitool_scan:_Устройство_не_найдено">hcitool scan: Устройство не найдено</span>
</h4>
<ul><li>На некоторых ноутбуках Dell (например, Studio 15) вы должны переключить режим Bluetooth с HID на HCI. Установите пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-hid2hci">bluez-hid2hci</a></span>, после чего <a href="../ru/Udev.html" title="Udev (Русский)">udev</a> будет делать это автоматически. В качестве альтернативы вы можете выполнить эту команду для переключения на HCI вручную:</li></ul>
<pre># /usr/lib/udev/hid2hci
</pre>
<ul><li>Если устройство не появится, а на вашей машине есть операционная система Windows, попробуйте загрузиться в её и включить адаптер Bluetooth через Windows.</li></ul>
<ul><li>Иногда также помогает эта простая команда:</li></ul>
<pre># bluetoothctl power on
</pre>
<h4><span class="mw-headline" id="bluetoothctl:_No_default_controller_available">bluetoothctl: No default controller available</span></h4>
<p>В Bluetooth-контроллерах некоторых материнских плат есть ошибка. Чтобы проверить, столкнулись ли вы с такой ошибкой, выполните <code>journalctl | grep hci</code>. Если в журнале есть записи вроде «command tx timeout» или «Reading Intel version command failed», выключите компьютер и физически отсоедините кабель питания на несколько секунд. Таким образом прошивка контроллера будет принудительно перезагружена (в то время как стандартная перезагрузка системы этого не сделает). <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1859592">Сообщение об ошибке.</a>
</p>
<p>Эта ошибка может случаться, если устройство заблокировано через <a href="../ru/Network_configuration/Wireless.html#%D0%9F%D1%80%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D0%B5%D1%80%D0%B5%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F_Rfkill" title="Network configuration (Русский)/Wireless (Русский)">rfkill</a>.
</p>
<p>Также это случается с некоторыми картами intel (такими как 8260), которые не распознаются корректно службой Bluetooth. Иногда использование устаревшего <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>, как сообщалось, решает проблему.
</p>
<p>Это также может быть вызвано мерами по энергосбережению, тогда добавление <a href="../ru/Kernel_parameters.html" title="Kernel parameters (Русский)">параметра ядра</a> <code>btusb.enable_autosuspend=n</code> может помочь. Смотрите также <a rel="nofollow" class="external text" href="https://bugzilla.redhat.com/show_bug.cgi?id=1573562">Red Hat Bugzilla – Bug 1573562</a>.
</p>
<p>Иногда выгрузка и загрузка модуля <code>btusb</code> без параметров помогает вернуть контроллер:
</p>
<pre># modprobe -r btusb
# modprobe btusb
</pre>
<p>Это также может случиться с <a href="#%D0%94%D0%BE%D0%BD%D0%B3%D0%BB_CSR_0a12:0001">клоном CSR</a>.
</p>
<h4>
<span id="rfkill_unblock:_.D0.BD.D0.B5_.D0.BF.D1.80.D0.BE.D0.B8.D1.81.D1.85.D0.BE.D0.B4.D0.B8.D1.82_.D1.80.D0.B0.D0.B7.D0.B1.D0.BB.D0.BE.D0.BA.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="rfkill_unblock:_не_происходит_разблокировка">rfkill unblock: не происходит разблокировка</span>
</h4>
<p>Если ваше устройство по-прежнему программно блокируется и у вас запущен <a href="../en/ConnMan.html" title="ConnMan">ConnMan</a>, попробуйте это:
</p>
<pre>$ connmanctl enable bluetooth
</pre>
<h4>
<span id="Bluetooth_USB_.D0.B4.D0.BE.D0.BD.D0.B3.D0.BB"></span><span class="mw-headline" id="Bluetooth_USB_донгл">Bluetooth USB донгл</span>
</h4>
<p>Если вы пользуетесь USB донглом, вы должны проверить, что ваш Bluetooth донгл распознан системой. Это можно сделать с помощью команды <code>journalctl -f</code>, после того как вы воткнёте USB донгл (или заглянув в <code>/var/log/messages.log</code>). Должно появиться что-то вроде следующего (ищите hci):
</p>
<pre>Feb 20 15:00:24 hostname kernel: [ 2661.349823] usb 4-1: new full-speed USB device number 3 using uhci_hcd
Feb 20 15:00:24 hostname bluetoothd[4568]: HCI dev 0 registered
Feb 20 15:00:24 hostname bluetoothd[4568]: Listening for HCI events on hci0
Feb 20 15:00:25 hostname bluetoothd[4568]: HCI dev 0 up
Feb 20 15:00:25 hostname bluetoothd[4568]: Adapter /org/bluez/4568/hci0 has been enabled
</pre>
<p>Если вы получили только первые две строки, значит донгл распознан, но вам необходимо его активировать (поднять).
Пример:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># btmgmt</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[mgmt]# info
Index list with 1 item
hci0:	Primary controller
	addr 00:1A:7D:DA:71:10 version 6 manufacturer 10 class 0x000000
	supported settings: powered connectable fast-connectable discoverable bondable link-security ssp br/edr hs le advertising secure-conn debug-keys privacy static-addr
	<b>current settings:</b> connectable discoverable bondable ssp br/edr le secure-conn
	name Mozart
	short name

[mgmt]# select hci0
Selected index 0

[hci0]# power up
hci0 Set Powered complete, settings: <b>powered</b> connectable discoverable bondable ssp br/edr le secure-conn

[hci0]# info
hci0:	Primary controller
	addr 00:1A:7D:DA:71:10 version 6 manufacturer 10 class 0x1c0104
	supported settings: powered connectable fast-connectable discoverable bondable link-security ssp br/edr hs le advertising secure-conn debug-keys privacy static-addr
	<b>current settings: powered</b> connectable discoverable bondable ssp br/edr le secure-conn
</pre>
<p>Или
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># bluetoothctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[bluetooth]# show
Controller 00:1A:7D:DA:71:10 (public)
	Name: Mozart
	Alias: Mozart
	Class: 0x0000095c
	<b>Powered: no</b>
	Discoverable: yes
	Pairable: yes

[bluetooth]# power on
[CHG] Controller 00:1A:7D:DA:71:10 Class: 0x001c0104
Changing power on succeeded
[CHG] Controller 00:1A:7D:DA:71:10 <b>Powered: yes</b>

[bluetooth]# show
Controller 00:1A:7D:DA:71:10 (public)
	Name: Mozart
	Alias: Mozart
	Class: 0x001c0104
	<b>Powered: yes</b>
	Discoverable: yes
	Pairable: yes
</pre>
<p>Чтобы убедиться, что устройство было определено, вы можете использовать команду <code>btmgmt</code>, являющуюся частью <code>bluez-utils</code>. Получить список доступных устройств, их идентификаторов и MAC-адресов можно так:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ btmgmt info</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Index list with 1 item
hci0:	Primary controller
	addr 00:1A:7D:DA:71:10 <b>version 6</b> manufacturer 10 class 0x1c0104
	supported settings: powered connectable fast-connectable discoverable bondable link-security ssp br/edr hs le advertising secure-conn debug-keys privacy static-addr
	current settings: powered connectable discoverable bondable ssp br/edr le secure-conn
</pre>
<p>Для проверки версии Bluetooth можно сопоставить её с версией HCI по таблице из <a rel="nofollow" class="external text" href="https://www.bluetooth.com/specifications/assigned-numbers/host-controller-interface/">официальной спецификации</a>. Например, в предыдущем выводе HCI <b>version 6</b> означает Bluetooth 4.0.
</p>
<p>Более детальная информация об устройстве может быть получена с помощью устаревшего инструмента <code>hciconfig</code>. (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>)
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ hciconfig -a hci0</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">hci0:   Type: USB
        BD Address: 00:1B:DC:0F:DB:40 ACL MTU: 310:10 SCO MTU: 64:8
        UP RUNNING PSCAN ISCAN
        RX bytes:1226 acl:0 sco:0 events:27 errors:0
        TX bytes:351 acl:0 sco:0 commands:26 errors:0
        Features: 0xff 0xff 0x8f 0xfe 0x9b 0xf9 0x00 0x80
        Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3
        Link policy: RSWITCH HOLD SNIFF PARK
        Link mode: SLAVE ACCEPT
        Name: 'BlueZ (0)'
        Class: 0x000100
        Service Classes: Unspecified
        Device Class: Computer, Uncategorized
        HCI Ver: 2.0 (0x3) HCI Rev: 0xc5c LMP Ver: 2.0 (0x3) LMP Subver: 0xc5c
        Manufacturer: Cambridge Silicon Radio (10)
</pre>
<h5>
<span id=".D0.A3.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0_.D0.B0.D1.83.D0.B4.D0.B8.D0.BE_.D0.BD.D0.B0.D1.87.D0.B8.D0.BD.D0.B0.D1.8E.D1.82_.D0.BF.D1.80.D0.BE.D0.BF.D1.83.D1.81.D0.BA.D0.B0.D1.82.D1.8C_.D0.B7.D0.B2.D1.83.D0.BA_.D0.BD.D0.B0_.D0.BD.D0.B5.D0.B1.D0.BE.D0.BB.D1.8C.D1.88.D0.BE.D0.BC_.D1.80.D0.B0.D1.81.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.B8.D0.B8_.D0.BE.D1.82_.D0.B4.D0.BE.D0.BD.D0.B3.D0.BB.D0.B0"></span><span class="mw-headline" id="Устройства_аудио_начинают_пропускать_звук_на_небольшом_расстоянии_от_донгла">Устройства аудио начинают пропускать звук на небольшом расстоянии от донгла</span>
</h5>
<p>Если другие устройства работают через тот же USB-хост, они могут <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1440161#p1440161">прерывать связь с устройствами аудио</a>. Убедитесь, что к USB-шине, к которой подключен Bluetooth, больше не подключено никаких других устройств. Например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Bus 002 Device 002: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 004: ID 048d:1345 Integrated Technology Express, Inc. Multi Cardreader
Bus 001 Device 003: ID 0424:a700 Standard Microsystems Corp. 2 Port Hub
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</pre>
<h5>
<span id=".D0.94.D0.BE.D0.BD.D0.B3.D0.BB_CSR_0a12:0001"></span><span class="mw-headline" id="Донгл_CSR_0a12:0001">Донгл CSR 0a12:0001</span>
</h5>
<p>С устройством <code>ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)</code> есть баг, и оно сейчас работает только в версиях ядра 5.17 и &lt; 6.0. Подробнее смотрите <a rel="nofollow" class="external text" href="https://bugzilla.kernel.org/show_bug.cgi?id=60824">Kernel Bug 60824</a>.
</p>
<h4>
<span id="Logitech_Bluetooth_USB_.D0.B4.D0.BE.D0.BD.D0.B3.D0.BB"></span><span class="mw-headline" id="Logitech_Bluetooth_USB_донгл">Logitech Bluetooth USB донгл</span>
</h4>
<p>Существуют Logitech донглы (например, Logitech MX5000), которые могут работать в двух режимах: встроенный (Embedded) и HCI. Во встроенном режиме донгл эмулирует устройство USB так, что ваш компьютер думает, что вы используете обычную USB мышь/клавиатуру.
</p>
<p>Если вы зажмёте маленькую красную кнопку на USB BT мини-приёмнике, включится другой режим. Удерживайте красную кнопку на BT донгле и вставьте его в компьютер, и через 3-5 секунд удерживания кнопки в системном трее появится иконка Bluetooth (<a rel="nofollow" class="external text" href="https://ubuntuforums.org/showthread.php?t=1332197">обсуждение</a>).
</p>
<p>В качестве альтернативы вы можете установить пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-hid2hci">bluez-hid2hci</a></span>. Когда вы подключите ваш Logitech донгл, он автоматически переключится.
</p>
<h4>
<span id="Foxconn_.2F_Hon_Hai_.2F_Lite-On_Broadcom"></span><span class="mw-headline" id="Foxconn_/_Hon_Hai_/_Lite-On_Broadcom">Foxconn / Hon Hai / Lite-On Broadcom</span>
</h4>
<p>Некоторые из этих устройств необходимо прошивать при загрузке.
</p>
<p>Некоторые прошивки можно найти в <a href="../ru/Arch_User_Repository.html" title="Arch User Repository (Русский)">AUR</a> по запросу <a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages?K=broadcom">broadcom</a>. В частности, стоит упомянуть <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/broadcom-bt-firmware/">broadcom-bt-firmware</a></span><sup><small>AUR</small></sup>, который содержит файлы для <a rel="nofollow" class="external text" href="https://github.com/winterheart/broadcom-bt-firmware/blob/master/DEVICES.md">большого числа карт</a>.
</p>
<p>Если готовых файлов прошивок не нашлось, их можно сконвертировать из Windows-файлов <i>.hex</i> в <i>.hcd</i> с помощью <a rel="nofollow" class="external text" href="https://github.com/jessesung/hex2hcd">hex2hcd</a> (входит в состав пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-utils">bluez-utils</a></span>).
</p>
<p>Чтобы получить нужный <i>.hex</i> файл, попробуйте поискать vendor:product (производитель:продукт) из <i>lsusb</i>, например:
</p>
<pre>Bus 002 Device 004: ID <b>04ca:2006</b> Lite-On Technology Corp. Broadcom BCM43142A0 Bluetooth Device
</pre>
<p>или
</p>
<pre>Bus 004 Device 004: Id <b>0489:e031</b> Foxconn / Hon Hai
</pre>
<p>В качестве альтернативы можно загрузиться в Windows (виртуальная машина тоже подойдёт) и посмотреть название прошивки в «Диспетчере устройств». Если вы хотите знать модель устройства, но не видите его в <i>lsusb</i>, его можно увидеть в <i>lsusb -v</i> как <code>iProduct</code>.
</p>
<p>Файл <i>.hex</i> можно извлечь из скачанного драйвера Windows без необходимости загружаться в Windows. Скачайте правильный драйвер, например <a rel="nofollow" class="external text" href="http://www.fujitsupc.com/downloads/mobile/BLUETOOTH_WIDCOMM_V6.5.0.3100_WIN7-32_FPC46-1771-01.EXE">Bluetooth Widcomm</a><sup title="Статус последней проверки: domain name not resolved">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-09-16 ⓘ]</sup>. Для извлечения файлов может понадобиться <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=unrar">unrar</a></span> или <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cabextract">cabextract</a></span> в зависимости от формата. Чтобы найти, какой из <i>.hex</i> файлов нужен вам, смотрите <code>Win32/bcbtums-win7x86-brcm.inf</code> и ищите строку <code>[RAMUSB<b>E031</b>.CopyList]</code>, где <code>E031</code> следует заменить на product code вашего устройства (второе hex-число из <i>lsusb</i>) в верхнем регистре. Сразу под этой строкой вы увидите имя нужного <i>.hex</i> файла.
</p>
<p>Когда вы сконвертируете его в <i>.hcd</i>, скопируйте его в <code>/lib/firmware/brcm/BCM.hcd</code> — это имя файла предлагает <a href="../ru/Core_utilities.html#%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5" title="Core utilities (Русский)">dmesg</a> и может быть другим, так что проверьте вывод <i>dmesg</i> у себя. Затем перезагрузите модуль
</p>
<pre># rmmod btusb
# modprobe btusb
</pre>
<p>Теперь устройство должно быть доступно. Смотрите <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=162688">BBS#162688</a> для информации о том, как сделать эти изменения постоянными.
</p>
<h4>
<span id=".D0.9A.D0.BE.D0.BC.D0.B1.D0.B8.D0.BD.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.BD.D1.8B.D0.B5_WiFi-Bluetooth_.D0.BA.D0.B0.D1.80.D1.82.D1.8B_Intel"></span><span class="mw-headline" id="Комбинированные_WiFi-Bluetooth_карты_Intel">Комбинированные WiFi-Bluetooth карты Intel</span>
</h4>
<p>See <a href="../ru/Network_configuration/Wireless.html#Bluetooth_Coexistence" class="mw-redirect" title="Wireless network configuration (Русский)">Wireless network configuration (Русский)#Bluetooth Coexistence</a>.
</p>
<h4>
<span id="Mediatek_MT7921_.D0.B8.D0.BB.D0.B8_MT7961_.D0.BF.D1.80.D0.B8_.D0.B4.D0.B2.D0.BE.D0.B9.D0.BD.D0.BE.D0.B9_.D0.B7.D0.B0.D0.B3.D1.80.D1.83.D0.B7.D0.BA.D0.B5_.D1.81_Windows"></span><span class="mw-headline" id="Mediatek_MT7921_или_MT7961_при_двойной_загрузке_с_Windows">Mediatek MT7921 или MT7961 при двойной загрузке с Windows</span>
</h4>
<p>В системах с двойной загрузкой, если версии прошивок Bluetooth отличаются в Windows и Linux, адаптер Bluetooth не заработает после перезагрузки в Windows.
</p>
<p>Лучший способ предотвратить это — обновить драйверы (и особенно прошивку) Bluetooth до последней версии в каждой ОС.
</p>
<p>Если вы не можете найти свежий драйвер (или прошивку) для Windows, можно скопировать файл прошивки <code>/usr/lib/firmware/mediatek/BT_RAM_CODE_MT7961_1_2_hdr.bin.xz</code> из Arch Linux и распаковать в Windows (например, <code>C:\WINDOWS\system32\DRIVERS\</code>, точный путь к файлу прошивки можно найти в диспетчере устройств).
</p>
<h4>
<span id=".D0.90.D0.B4.D0.B0.D0.BF.D1.82.D0.B5.D1.80_.D0.BF.D1.80.D0.BE.D0.BF.D0.B0.D0.B4.D0.B0.D0.B5.D1.82_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D0.B6.D0.B4.D1.83.D1.89.D0.B5.D0.B3.D0.BE_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D0.B0"></span><span class="mw-headline" id="Адаптер_пропадает_после_ждущего_режима">Адаптер пропадает после ждущего режима</span>
</h4>
<p>Сперва найдите product ID адаптера. Например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsusb -tv</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/12p, 480M
    ID 1d6b:0002 Linux Foundation 2.0 root hub
    ...
    |__ Port 3: Dev 3, If 0, Class=Wireless, Driver=btusb, 12M
        ID 8087:0025 Intel Corp.
    |__ Port 3: Dev 3, If 1, Class=Wireless, Driver=btusb, 12M
        ID 8087:0025 Intel Corp.
    ...
</pre>
<p>В данном случае vendor ID — 8087, product ID — 0025.
</p>
<p>Затем используйте <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usb_modeswitch">usb_modeswitch</a></span> для сброса адаптера:
</p>
<pre># usb_modeswitch -R -v <i>vendor_ID</i> -p <i>product_ID</i>
</pre>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D1.81.D0.BE.D0.BF.D1.80.D1.8F.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5.D0.BC_.D0.B8_.D1.81.D0.BE.D0.B5.D0.B4.D0.B8.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5.D0.BC"></span><span class="mw-headline" id="Проблемы_с_сопряжением_и_соединением">Проблемы с сопряжением и соединением</span>
</h3>
<h4>
<span id=".D0.9C.D0.BE.D0.B9_.D0.BA.D0.BE.D0.BC.D0.BF.D1.8C.D1.8E.D1.82.D0.B5.D1.80_.D0.BD.D0.B5.D0.B2.D0.B8.D0.B4.D0.B8.D0.BC"></span><span class="mw-headline" id="Мой_компьютер_невидим">Мой компьютер невидим</span>
</h4>
<p>Включите режим обнаружения:
</p>
<pre># bluetoothctl discoverable on
</pre>
<p>Убедитесь, что он включен:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># bluetoothctl show</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">	Powered: yes
	Discoverable: yes
	Pairable: yes
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Проверьте <code>DiscoverableTimeout</code> и <code>PairableTimeout</code> в <code>/etc/bluetooth/main.conf</code>.</div>
<p>Если компьютер всё равно невидим, попробуйте изменить класс устройства в <code>/etc/bluetooth/main.conf</code> как показано ниже:
</p>
<pre># Default device class. Only the major and minor device class bits are
# considered.
#Class = 0x000100 # Computer Type (from default config)
Class = 0x100100 # (Object-Transfer Service &amp; Computer Type)
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Иногда <code>Class</code> в файле <code>main.conf</code> оказывается переопределён после инициализации устройства, так что попробуйте установить класс напрямую с помощью <code>hciconfig hci0 class 100100</code>.</div>
<p>Пользователь сообщал, что это было единственное решение, сделавшее его компьютер видимым для телефона. Телевизоры LG (и некоторые другие) видимы с других устройств аудио, так что использование класса <code>000414</code> (soundbar) заставит такие устройства появиться.
</p>
<p>Смотрите <a rel="nofollow" class="external free" href="https://bluetooth-pentest.narod.ru/software/bluetooth_class_of_device-service_generator.html">https://bluetooth-pentest.narod.ru/software/bluetooth_class_of_device-service_generator.html</a> для генерации классов устройств/служб Bluetooth.
</p>
<h4>
<span id=".D0.A3.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D0.B8_.D0.B7.D0.B0.D1.82.D0.B5.D0.BC_.D0.BE.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.D1.81.D0.BF.D1.83.D1.81.D1.82.D1.8F_.D0.BC.D0.B3.D0.BD.D0.BE.D0.B2.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Устройство_подключается_и_затем_отключается_спустя_мгновение">Устройство подключается и затем отключается спустя мгновение</span>
</h4>
<p>Если вы видите в журнале подобные сообщения и устройство не может подключиться или отключается вскоре после подключения:
</p>
<pre>bluetoothd: Unable to get connect data for Headset Voice gateway: getpeername: Transport endpoint is not connected (107)
bluetoothd: connect error: Connection refused (111)
</pre>
<p>Это может быть из-за того, что вы уже настроили сопряжение с этим устройством в другой операционной системе с тем же Bluetooth-адаптером (например, в случае двойной загрузки). Некоторые устройства не могут обрабатывать несколько сопряжений с одним и тем же MAC-адресом. Смотрите <a href="#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8_%D0%B4%D0%B2%D0%BE%D0%B9%D0%BD%D0%BE%D0%B9_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B5">#Сопряжение при двойной загрузке</a> для решения этой проблемы.
</p>
<h4>
<span id=".D0.A3.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE_.D0.BD.D0.B5_.D0.B2.D0.B8.D0.B4.D0.BD.D0.BE_.D0.BF.D1.80.D0.B8_.D1.81.D0.BA.D0.B0.D0.BD.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B8"></span><span class="mw-headline" id="Устройство_не_видно_при_сканировании">Устройство не видно при сканировании</span>
</h4>
<p>Некоторые устройства Bluetooth low energy не отображаются при сканировании в bluetoothctl, например <a href="../en/Logitech_MX_Master.html" title="Logitech MX Master">Logitech MX Master</a>. Для их поиска можно использовать <code>transport le</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># bluetoothctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[bluetooth]# menu scan
[bluetooth]# transport le
[bluetooth]# back
[bluetooth]# scan on
[bluetooth]# devices
...
Device XX:XX:XX:XX:XX:XX DA V2 X &lt;---- low energy device here
</pre>
<p>Другой способ — установить <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bluez-deprecated-tools">bluez-deprecated-tools</a></span>, <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустить">запустить</a> службу <code>bluetooth.service</code> и выполнить:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># bluetoothctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[NEW] Controller (MAC) myhostname [default]

[bluetooth]# power on
[CHG] Controller (MAC) Class: 0x0c010c
Changing power on succeeded
[CHG] Controller (MAC) Powered: yes

[bluetooth]# scan on
Discovery started
[CHG] Controller (MAC) Discovering: yes
</pre>
<p>В другом терминале:
</p>
<pre># hcitool lescan
</pre>
<p>Дождитесь появления устройства и затем прервите hcitool с помощью <code>Ctrl+c</code>. Теперь bluetoothctl должен увидеть ваше устройство и позволить нормально настроить сопряжение.
</p>
<h4>
<span id=".D0.A3.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0_BLE_.D0.BD.D0.B5_.D0.B2.D0.B8.D0.B4.D0.BD.D1.8B_.D0.BD.D0.B0_Intel_Corp._AX200_Bluetooth"></span><span class="mw-headline" id="Устройства_BLE_не_видны_на_Intel_Corp._AX200_Bluetooth">Устройства BLE не видны на Intel Corp. AX200 Bluetooth</span>
</h4>
<p>Похоже, что пассивное сканирование BLE на этом устройстве не работает; смотрите <a rel="nofollow" class="external text" href="https://community.intel.com/t5/Wireless/AX200-Passive-BLE-scan-linux/m-p/1227456">сообщение об ошибке</a>.
</p>
<h4>
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D0.BF.D0.B5.D1.80.D0.B5.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B8.D1.82.D1.8C.D1.81.D1.8F_.D0.BF.D0.BE.D1.81.D0.BB.D0.B5_.D1.81.D0.BD.D0.B0"></span><span class="mw-headline" id="Не_удаётся_переподключиться_после_сна">Не удаётся переподключиться после сна</span>
</h4>
<p>Вы можете заметить, что не удаётся переподключиться к устройству после того, как оно перешло в спящий режим, или после пробуждения компьютера из сна.
</p>
<p>Например, вы можете увидеть в журнале следующие ошибки:
</p>
<pre>bluetoothd[487]: Authentication attempt without agent
bluetoothd[487]: Access denied: org.bluez.Error.Rejected
</pre>
<p>Это может быть связано с тем, что устройство не отмечено как доверенное (<i>trusted</i>). Смотрите раздел <a href="#%D0%A1%D0%BE%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5">#Сопряжение</a>.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D0.BE.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D1.91.D0.BD.D0.BD.D1.8B.D0.BC.D0.B8_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.B0.D0.BC.D0.B8"></span><span class="mw-headline" id="Проблемы_с_определёнными_устройствами">Проблемы с определёнными устройствами</span>
</h3>
<h4>
<span id="Bluetooth-.D0.BC.D1.8B.D1.88.D1.8C_.D1.82.D0.BE.D1.80.D0.BC.D0.BE.D0.B7.D0.B8.D1.82_.2F_.D0.BE.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B0.D0.B5.D1.82.D1.81.D1.8F_.2F_.D0.B7.D0.B0.D0.B2.D0.B8.D1.81.D0.B0.D0.B5.D1.82"></span><span class="mw-headline" id="Bluetooth-мышь_тормозит_/_отключается_/_зависает">Bluetooth-мышь тормозит / отключается / зависает</span>
</h4>
<p>Смотрите <a href="../ru/Bluetooth_mouse.html#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC" class="mw-redirect" title="Bluetooth мышь">Bluetooth мышь#Решение проблем</a>.
</p>
<h4>
<span id=".D0.90.D1.83.D0.B4.D0.B8.D0.BE.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2.D0.BE_.D0.BD.D0.B5_.D0.BC.D0.BE.D0.B6.D0.B5.D1.82_.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B8.D1.82.D1.8C.D1.81.D1.8F_.D1.81_.D0.BE.D1.88.D0.B8.D0.B1.D0.BA.D0.BE.D0.B9_br-connection-profile-unavailable"></span><span class="mw-headline" id="Аудиоустройство_не_может_подключиться_с_ошибкой_br-connection-profile-unavailable">Аудиоустройство не может подключиться с ошибкой br-connection-profile-unavailable</span>
</h4>
<p>Bluetooth-аудио не сможет подключиться, если используется pipewire (вместо pulseaudio-bluetooth), а экземпляр pipewire не запущен. Запустите <a href="../ru/Systemd/User.html" title="Systemd (Русский)/User (Русский)">пользовательскую службу</a> <code>pipewire.service</code> или воспроизведите какой-нибудь звук, чтобы запустился демон pipewire, а затем попробуйте подключить устройство снова.
</p>
<h4>
<span id=".D0.98.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D1.80.D0.B5.D0.BD.D1.86.D0.B8.D1.8F_.D0.BC.D0.B5.D0.B6.D0.B4.D1.83_.D0.BD.D0.B0.D1.83.D1.88.D0.BD.D0.B8.D0.BA.D0.B0.D0.BC.D0.B8_.D0.B8_.D0.BC.D1.8B.D1.88.D1.8C.D1.8E"></span><span class="mw-headline" id="Интерференция_между_наушниками_и_мышью">Интерференция между наушниками и мышью</span>
</h4>
<p>Если аудио заикается при одновременном использовании Bluetooth-мыши и клавиатуры, попробуйте это, как указано на странице <a rel="nofollow" class="external free" href="https://bugs.launchpad.net/ubuntu/+source/bluez/+bug/424215">https://bugs.launchpad.net/ubuntu/+source/bluez/+bug/424215</a> в комментарии #23:
</p>
<pre># hciconfig hci0 lm ACCEPT,MASTER
# hciconfig hci0 lp HOLD,SNIFF,PARK
</pre>
<h4>
<span id=".D0.9F.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D0.BE.D0.B5_.D0.BF.D0.B5.D1.80.D0.B5.D0.BF.D0.BE.D0.B4.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81_TP-LINK_UB400_.D0.B8_.D0.BA.D0.BE.D0.BD.D1.82.D1.80.D0.BE.D0.BB.D0.BB.D0.B5.D1.80.D0.BE.D0.BC_Xbox"></span><span class="mw-headline" id="Постоянное_переподключение_с_TP-LINK_UB400_и_контроллером_Xbox">Постоянное переподключение с TP-LINK UB400 и контроллером Xbox</span>
</h4>
<p>Используйте такие настройки:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/bluetooth/main.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[General]
JustWorksRepairing = always
FastConnectable = true
Class = 0x000100
...
[GATT]
ReconnectIntervals=1,1,2,3,5,8,13,21,34,55
AutoEnable=true
...</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">Перезапустите</a> службу <code>bluetooth.service</code> после внесения изменений.
</p>
<p>Смотрите также <a rel="nofollow" class="external text" href="https://github.com/atar-axis/xpadneo/issues/166">обсуждение в проекте xpadneo</a> (но использовать сам xpadneo не требуется).
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC.D1.8B_.D1.81_.D0.BF.D0.B5.D1.80.D0.B5.D0.B4.D0.B0.D1.87.D0.B5.D0.B9_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Проблемы_с_передачей_файлов">Проблемы с передачей файлов</span>
</h3>
<h4><span class="mw-headline" id="gnome-bluetooth">gnome-bluetooth</span></h4>
<p>Если вы видите это при попытке включить получение файлов в настройках bluetooth:
</p>
<pre>Bluetooth OBEX start failed: Invalid path
Bluetooth FTP start failed: Invalid path
</pre>
<p>То убедитесь, что <a href="../ru/XDG_user_directories.html" title="XDG user directories (Русский)">пользовательские каталоги XDG</a> существуют.
</p>
<h4>
<span id=".D0.9D.D0.B5_.D1.83.D0.B4.D0.B0.D1.91.D1.82.D1.81.D1.8F_.D0.BF.D0.BE.D0.BB.D1.83.D1.87.D0.B8.D1.82.D1.8C_.D1.84.D0.B0.D0.B9.D0.BB.D1.8B_.D0.B8.D0.B7-.D0.B7.D0.B0_.D1.81.D0.B8.D0.BC.D0.B2.D0.BE.D0.BB.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.BE.D0.B9_.D1.81.D1.81.D1.8B.D0.BB.D0.BA.D0.B8"></span><span class="mw-headline" id="Не_удаётся_получить_файлы_из-за_символической_ссылки">Не удаётся получить файлы из-за символической ссылки</span>
</h4>
<p>Если передача файла обрывается, хотя во всём остальном Bluetooth-соединение нормально работает, проблема может быть из-за символических ссылок в пути. В журнале могут появиться примерно такие записи:
</p>
<pre>Jun 18 11:18:13 ember obexd[3338969]: open(/home/me/.cache/obexd/MOC740): Operation not permitted (1)
</pre>
<p>Если показанный здесь путь содержит символическую ссылку, то obexd по умолчанию <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/obexd/plugins/filesystem.c#n90">не примет его</a>. Поведение можно переопределить с помощью <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" class="mw-redirect" title="Drop-in файл">drop-in файла</a> для <a href="../ru/Systemd/User.html" title="Systemd (Русский)/User (Русский)">пользовательской службы</a> <code>obex.service</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/obex.service.d/10-symlink.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=/usr/lib/bluetooth/obexd --symlinks</pre>
<p>Затем выполните <code>systemctl daemon-reload --user</code> от имени нужного пользователя и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">перезапустите</a> пользовательский юнит <code>obex.service</code>.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://averylarsen.com/2019/12/20/keeping-bluetooth-devices-paired-between-linux-and-windows/">Keeping Bluetooth devices paired between Linux and Windows</a></li>
<li><a rel="nofollow" class="external text" href="https://nullroute.eu.org/~grawity/bluetooth-key-sharing.html">Bluetooth link keys on dual-boot systems</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Bluetooth.html" title="Category:Bluetooth (Русский)">Bluetooth (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Bluetooth_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=800253">https://wiki.archlinux.org/index.php?title=Bluetooth_(Русский)&amp;oldid=800253</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 11 February 2024, at 18:13.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
