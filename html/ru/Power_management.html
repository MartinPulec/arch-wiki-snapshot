<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Power management (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Power_management_Русский rootpage-Power_management_Русский skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Пользовательские_инструменты" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Пользовательские инструменты</span>
			</div>
		</a>
		
			<button aria-controls="toc-Пользовательские_инструменты-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Пользовательские инструменты subsection</span>
			</button>
		
		<ul id="toc-Пользовательские_инструменты-sublist" class="vector-toc-list">
			<li id="toc-Консольные" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Консольные</span>
				</div>
			</a>
			
			<ul id="toc-Консольные-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Графические" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%93%D1%80%D0%B0%D1%84%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Графические</span>
				</div>
			</a>
			
			<ul id="toc-Графические-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Управление_питанием" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Управление питанием</span>
			</div>
		</a>
		
			<button aria-controls="toc-Управление_питанием-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Управление питанием subsection</span>
			</button>
		
		<ul id="toc-Управление_питанием-sublist" class="vector-toc-list">
			<li id="toc-События_ACPI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B1%D1%8B%D1%82%D0%B8%D1%8F_ACPI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>События ACPI</span>
				</div>
			</a>
			
			<ul id="toc-События_ACPI-sublist" class="vector-toc-list">
				<li id="toc-Менеджеры_питания" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9C%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D1%8B_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>Менеджеры питания</span>
				</div>
			</a>
			
			<ul id="toc-Менеджеры_питания-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-xss-lock" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#xss-lock">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.2</span>
					<span>xss-lock</span>
				</div>
			</a>
			
			<ul id="toc-xss-lock-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Ждущий_и_спящий_режимы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%96%D0%B4%D1%83%D1%89%D0%B8%D0%B9_%D0%B8_%D1%81%D0%BF%D1%8F%D1%89%D0%B8%D0%B9_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Ждущий и спящий режимы</span>
				</div>
			</a>
			
			<ul id="toc-Ждущий_и_спящий_режимы-sublist" class="vector-toc-list">
				<li id="toc-Отключение_сна" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%BD%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Отключение сна</span>
				</div>
			</a>
			
			<ul id="toc-Отключение_сна-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Хуки" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A5%D1%83%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Хуки</span>
				</div>
			</a>
			
			<ul id="toc-Хуки-sublist" class="vector-toc-list">
				<li id="toc-Файлы_служб" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A4%D0%B0%D0%B9%D0%BB%D1%8B_%D1%81%D0%BB%D1%83%D0%B6%D0%B1">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.1</span>
					<span>Файлы служб</span>
				</div>
			</a>
			
			<ul id="toc-Файлы_служб-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Комбинированный_файл_службы" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9_%D1%84%D0%B0%D0%B9%D0%BB_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.2</span>
					<span>Комбинированный файл службы</span>
				</div>
			</a>
			
			<ul id="toc-Комбинированный_файл_службы-sublist" class="vector-toc-list">
				<li id="toc-Общая_служба-шаблон" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#%D0%9E%D0%B1%D1%89%D0%B0%D1%8F_%D1%81%D0%BB%D1%83%D0%B6%D0%B1%D0%B0-%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.2.1</span>
					<span>Общая служба-шаблон</span>
				</div>
			</a>
			
			<ul id="toc-Общая_служба-шаблон-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Хуки_в_/usr/lib/systemd/system-sleep" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%A5%D1%83%D0%BA%D0%B8_%D0%B2_/usr/lib/systemd/system-sleep">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.3</span>
					<span>Хуки в /usr/lib/systemd/system-sleep</span>
				</div>
			</a>
			
			<ul id="toc-Хуки_в_/usr/lib/systemd/system-sleep-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Решение_проблем" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A0%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Решение проблем</span>
				</div>
			</a>
			
			<ul id="toc-Решение_проблем-sublist" class="vector-toc-list">
				<li id="toc-Отложенное_выполнение_действия_при_закрытии_крышки_ноутбука" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%BD%D0%BE%D0%B5_%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D1%8F_%D0%BF%D1%80%D0%B8_%D0%B7%D0%B0%D0%BA%D1%80%D1%8B%D1%82%D0%B8%D0%B8_%D0%BA%D1%80%D1%8B%D1%88%D0%BA%D0%B8_%D0%BD%D0%BE%D1%83%D1%82%D0%B1%D1%83%D0%BA%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.1</span>
					<span>Отложенное выполнение действия при закрытии крышки ноутбука</span>
				</div>
			</a>
			
			<ul id="toc-Отложенное_выполнение_действия_при_закрытии_крышки_ноутбука-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fn-кнопка_сна_на_ноутбуке_не_работает" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Fn-%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B0_%D1%81%D0%BD%D0%B0_%D0%BD%D0%B0_%D0%BD%D0%BE%D1%83%D1%82%D0%B1%D1%83%D0%BA%D0%B5_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.2</span>
					<span>Fn-кнопка сна на ноутбуке не работает</span>
				</div>
			</a>
			
			<ul id="toc-Fn-кнопка_сна_на_ноутбуке_не_работает-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Компьютер_с_чипсетом_A520I_или_B550I_не_пробуждается" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80_%D1%81_%D1%87%D0%B8%D0%BF%D1%81%D0%B5%D1%82%D0%BE%D0%BC_A520I_%D0%B8%D0%BB%D0%B8_B550I_%D0%BD%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D1%83%D0%B6%D0%B4%D0%B0%D0%B5%D1%82%D1%81%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.3</span>
					<span>Компьютер с чипсетом A520I или B550I не пробуждается</span>
				</div>
			</a>
			
			<ul id="toc-Компьютер_с_чипсетом_A520I_или_B550I_не_пробуждается-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Советы_и_рекомендации" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B2%D0%B5%D1%82%D1%8B_%D0%B8_%D1%80%D0%B5%D0%BA%D0%BE%D0%BC%D0%B5%D0%BD%D0%B4%D0%B0%D1%86%D0%B8%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>Советы и рекомендации</span>
				</div>
			</a>
			
			<ul id="toc-Советы_и_рекомендации-sublist" class="vector-toc-list">
				<li id="toc-Подкачка_только_для_спящего_режима" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D0%BA%D0%B0%D1%87%D0%BA%D0%B0_%D1%82%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE_%D0%B4%D0%BB%D1%8F_%D1%81%D0%BF%D1%8F%D1%89%D0%B5%D0%B3%D0%BE_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.1</span>
					<span>Подкачка только для спящего режима</span>
				</div>
			</a>
			
			<ul id="toc-Подкачка_только_для_спящего_режима-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Энергосбережение" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%AD%D0%BD%D0%B5%D1%80%D0%B3%D0%BE%D1%81%D0%B1%D0%B5%D1%80%D0%B5%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Энергосбережение</span>
			</div>
		</a>
		
			<button aria-controls="toc-Энергосбережение-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Энергосбережение subsection</span>
			</button>
		
		<ul id="toc-Энергосбережение-sublist" class="vector-toc-list">
			<li id="toc-Процессоры_с_поддержкой_Intel_HWP_(Intel_Hardware_P-state)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D1%80%D1%8B_%D1%81_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%BE%D0%B9_Intel_HWP_(Intel_Hardware_P-state)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Процессоры с поддержкой Intel HWP (Intel Hardware P-state)</span>
				</div>
			</a>
			
			<ul id="toc-Процессоры_с_поддержкой_Intel_HWP_(Intel_Hardware_P-state)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Звук" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%97%D0%B2%D1%83%D0%BA">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Звук</span>
				</div>
			</a>
			
			<ul id="toc-Звук-sublist" class="vector-toc-list">
				<li id="toc-Ядро" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%AF%D0%B4%D1%80%D0%BE">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.1</span>
					<span>Ядро</span>
				</div>
			</a>
			
			<ul id="toc-Ядро-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PulseAudio" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#PulseAudio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2.2</span>
					<span>PulseAudio</span>
				</div>
			</a>
			
			<ul id="toc-PulseAudio-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Подсветка_экрана" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%BE%D0%B4%D1%81%D0%B2%D0%B5%D1%82%D0%BA%D0%B0_%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Подсветка экрана</span>
				</div>
			</a>
			
			<ul id="toc-Подсветка_экрана-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bluetooth" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Bluetooth">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Bluetooth</span>
				</div>
			</a>
			
			<ul id="toc-Bluetooth-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Веб-камера" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D0%B5%D0%B1-%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Веб-камера</span>
				</div>
			</a>
			
			<ul id="toc-Веб-камера-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Параметры_ядра" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_%D1%8F%D0%B4%D1%80%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>Параметры ядра</span>
				</div>
			</a>
			
			<ul id="toc-Параметры_ядра-sublist" class="vector-toc-list">
				<li id="toc-Отключение_сторожевого_таймера_с_NMI" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D1%82%D0%BE%D1%80%D0%BE%D0%B6%D0%B5%D0%B2%D0%BE%D0%B3%D0%BE_%D1%82%D0%B0%D0%B9%D0%BC%D0%B5%D1%80%D0%B0_%D1%81_NMI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6.1</span>
					<span>Отключение сторожевого таймера с NMI</span>
				</div>
			</a>
			
			<ul id="toc-Отключение_сторожевого_таймера_с_NMI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Время_Writeback" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%92%D1%80%D0%B5%D0%BC%D1%8F_Writeback">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6.2</span>
					<span>Время Writeback</span>
				</div>
			</a>
			
			<ul id="toc-Время_Writeback-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Laptop_Mode" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Laptop_Mode">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6.3</span>
					<span>Laptop Mode</span>
				</div>
			</a>
			
			<ul id="toc-Laptop_Mode-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Сетевые_интерфейсы" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7</span>
					<span>Сетевые интерфейсы</span>
				</div>
			</a>
			
			<ul id="toc-Сетевые_интерфейсы-sublist" class="vector-toc-list">
				<li id="toc-Беспроводные_карты_Intel_(iwlwifi)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%91%D0%B5%D1%81%D0%BF%D1%80%D0%BE%D0%B2%D0%BE%D0%B4%D0%BD%D1%8B%D0%B5_%D0%BA%D0%B0%D1%80%D1%82%D1%8B_Intel_(iwlwifi)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.7.1</span>
					<span>Беспроводные карты Intel (iwlwifi)</span>
				</div>
			</a>
			
			<ul id="toc-Беспроводные_карты_Intel_(iwlwifi)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Управление_питанием_шин" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC_%D1%88%D0%B8%D0%BD">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.8</span>
					<span>Управление питанием шин</span>
				</div>
			</a>
			
			<ul id="toc-Управление_питанием_шин-sublist" class="vector-toc-list">
				<li id="toc-Active_State_Power_Management" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Active_State_Power_Management">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.8.1</span>
					<span>Active State Power Management</span>
				</div>
			</a>
			
			<ul id="toc-Active_State_Power_Management-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PCI_Runtime_Power_Management" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#PCI_Runtime_Power_Management">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.8.2</span>
					<span>PCI Runtime Power Management</span>
				</div>
			</a>
			
			<ul id="toc-PCI_Runtime_Power_Management-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Автоматическая_приостановка_устройств_USB" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D0%BF%D1%80%D0%B8%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2_USB">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.8.3</span>
					<span>Автоматическая приостановка устройств USB</span>
				</div>
			</a>
			
			<ul id="toc-Автоматическая_приостановка_устройств_USB-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SATA_Active_Link_Power_Management" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#SATA_Active_Link_Power_Management">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.8.4</span>
					<span>SATA Active Link Power Management</span>
				</div>
			</a>
			
			<ul id="toc-SATA_Active_Link_Power_Management-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Жёсткие_диски" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%96%D1%91%D1%81%D1%82%D0%BA%D0%B8%D0%B5_%D0%B4%D0%B8%D1%81%D0%BA%D0%B8">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.9</span>
					<span>Жёсткие диски</span>
				</div>
			</a>
			
			<ul id="toc-Жёсткие_диски-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Инструменты_и_скрипты" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B_%D0%B8_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Инструменты и скрипты</span>
			</div>
		</a>
		
			<button aria-controls="toc-Инструменты_и_скрипты-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Инструменты и скрипты subsection</span>
			</button>
		
		<ul id="toc-Инструменты_и_скрипты-sublist" class="vector-toc-list">
			<li id="toc-Использование_скрипта_с_правилом_udev" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B0_%D1%81_%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%BE%D0%BC_udev">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Использование скрипта с правилом udev</span>
				</div>
			</a>
			
			<ul id="toc-Использование_скрипта_с_правилом_udev-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Вывод_параметров_питания" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%92%D1%8B%D0%B2%D0%BE%D0%B4_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%BE%D0%B2_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D1%8F">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Вывод параметров питания</span>
				</div>
			</a>
			
			<ul id="toc-Вывод_параметров_питания-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Разрешить_пользователям_выключение_системы" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A0%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B8%D1%82%D1%8C_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC_%D0%B2%D1%8B%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Разрешить пользователям выключение системы</span>
			</div>
		</a>
		
			<button aria-controls="toc-Разрешить_пользователям_выключение_системы-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Разрешить пользователям выключение системы subsection</span>
			</button>
		
		<ul id="toc-Разрешить_пользователям_выключение_системы-sublist" class="vector-toc-list">
			<li id="toc-События_нажатия_кнопки_питания_и_закрытия_крышки_ноутбука" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%A1%D0%BE%D0%B1%D1%8B%D1%82%D0%B8%D1%8F_%D0%BD%D0%B0%D0%B6%D0%B0%D1%82%D0%B8%D1%8F_%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B8_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D1%8F_%D0%B8_%D0%B7%D0%B0%D0%BA%D1%80%D1%8B%D1%82%D0%B8%D1%8F_%D0%BA%D1%80%D1%8B%D1%88%D0%BA%D0%B8_%D0%BD%D0%BE%D1%83%D1%82%D0%B1%D1%83%D0%BA%D0%B0">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>События нажатия кнопки питания и закрытия крышки ноутбука</span>
				</div>
			</a>
			
			<ul id="toc-События_нажатия_кнопки_питания_и_закрытия_крышки_ноутбука-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Используя_systemd-logind" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_systemd-logind">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Используя systemd-logind</span>
				</div>
			</a>
			
			<ul id="toc-Используя_systemd-logind-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Используя_sudo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_sudo">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3</span>
					<span>Используя sudo</span>
				</div>
			</a>
			
			<ul id="toc-Используя_sudo-sublist" class="vector-toc-list">
				<li id="toc-Ограничение_привилегий_sudo" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%D0%9E%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B8%D0%B2%D0%B8%D0%BB%D0%B5%D0%B3%D0%B8%D0%B9_sudo">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.3.1</span>
					<span>Ограничение привилегий sudo</span>
				</div>
			</a>
			
			<ul id="toc-Ограничение_привилегий_sudo-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Смотрите_также" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Смотрите также</span>
			</div>
		</a>
		
		<ul id="toc-Смотрите_также-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Power management (Русский)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Power_management.html" title="Power management – English" lang="en" hreflang="en" data-title="Power management" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Power_management.html" title="Power management – español" lang="es" hreflang="es" data-title="Power management" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/%E9%9B%BB%E6%BA%90%E7%AE%A1%E7%90%86" title="電源管理 – 日本語" lang="ja" hreflang="ja" data-title="電源管理" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Power_management.html" title="Power management – português" lang="pt" hreflang="pt" data-title="Power management" data-language-autonym="Português" data-language-local-name="português" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Power_management" title="Power management – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Power management" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Power_management.html" title="Power management">Power management</a>. Дата последней синхронизации: 3 июня 2023. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Power_management&amp;diff=0&amp;oldid=779277">изменения</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Ссылки по теме</p>
<ul>
<li><a href="../ru/Power_management/Suspend_and_hibernate.html" class="mw-redirect" title="Ждущий и спящий режимы">Ждущий и спящий режимы</a></li>
<li><a href="../en/Power_management/Wakeup_triggers.html" title="Power management/Wakeup triggers">Power management/Wakeup triggers</a></li>
<li><a href="../ru/Display_Power_Management_Signaling.html" title="Display Power Management Signaling (Русский)">Display Power Management Signaling (Русский)</a></li>
<li><a href="../en/CPU_frequency_scaling.html" class="mw-redirect" title="Управление частотой процессора">Управление частотой процессора</a></li>
<li><a href="../ru/Hybrid_graphics.html" class="mw-redirect" title="Гибридная графика">Гибридная графика</a></li>
<li><a href="../ru/Kernel_module.html" class="mw-redirect" title="Модули ядра">Модули ядра</a></li>
<li><a href="../ru/Sysctl.html" title="Sysctl (Русский)">sysctl (Русский)</a></li>
<li><a href="../ru/Udev.html" title="Udev (Русский)">udev (Русский)</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/Power_management" class="extiw" title="wikipedia:Power management">Управление питанием</a> — это функция, которая отключает питание или переводит компоненты системы в состояние низкого энергопотребления, когда они неактивны.
</p>
<p>В Arch Linux управление питанием состоит из двух основных частей:
</p>
<ol>
<li>Конфигурация ядра Linux, которое взаимодействует с аппаратным обеспечением.
<ul>
<li><a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметры ядра">Параметры ядра</a></li>
<li><a href="../ru/Kernel_module.html" class="mw-redirect" title="Модули ядра">Модули ядра</a></li>
<li>Правила <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>
</li>
</ul>
</li>
<li>Конфигурация пользовательских инструментов, которые взаимодействуют с ядром и реагируют на его события. Многие инструменты также предоставляют удобные способы изменения конфигурация ядра. Смотрите раздел <a href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">#Пользовательские инструменты</a>.</li>
</ol>
<meta property="mw:PageProp/toc">
<h2>
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D1.81.D0.BA.D0.B8.D0.B5_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B"></span><span class="mw-headline" id="Пользовательские_инструменты">Пользовательские инструменты</span>
</h2>
<p>Эти инструменты являются удобной альтернативой ручной установке многих параметров. Запускайте только один из этих инструментов, чтобы избежать возможных конфликтов, так как все они работают примерно одинаково. Просмотрите <a href="../ru/Category:Power_management.html" title="Category:Power management (Русский)">Category:Power management (Русский)</a>, чтобы получить представление о том, какие возможности управления питанием существуют в Arch Linux.
</p>
<p>Популярные скрипты и инструменты, управляющие энергосбережением:
</p>
<h3>
<span id=".D0.9A.D0.BE.D0.BD.D1.81.D0.BE.D0.BB.D1.8C.D0.BD.D1.8B.D0.B5"></span><span class="mw-headline" id="Консольные">Консольные</span>
</h3>
<ul><li>
<b><a href="../ru/Acpid.html" title="Acpid (Русский)">acpid</a></b> — Демон для доставки событий управления питанием ACPI с поддержкой netlink.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://sourceforge.net/projects/acpid2/">https://sourceforge.net/projects/acpid2/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acpid">acpid</a></span>
</dd></dl>
<ul><li>
<b><a href="../ru/Laptop_Mode_Tools.html" title="Laptop Mode Tools (Русский)">Laptop Mode Tools</a></b> — Инструмент для настройки параметров энергосбережения ноутбука, которую многие считают де-факто утилитой для энергосбережения, хотя она может потребовать некоторой настройки.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/rickysarraf/laptop-mode-tools">https://github.com/rickysarraf/laptop-mode-tools</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/laptop-mode-tools/">laptop-mode-tools</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>libsmbios</b> — Библиотека и инструменты для взаимодействия с таблицами Dell SMBIOS.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/dell/libsmbios">https://github.com/dell/libsmbios</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libsmbios">libsmbios</a></span>
</dd></dl>
<ul><li>
<b><a href="../en/Powertop.html" title="Powertop">powertop</a></b> — Инструмент для диагностики проблем с энергопотреблением и управлением питанием, помогающий установить параметры энергосбережения.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://01.org/powertop/">https://01.org/powertop/</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-09-16 ⓘ]</sup> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=powertop">powertop</a></span>
</dd></dl>
<ul><li>
<b><a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a></b> — Менеджер системы и служб.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://systemd.io/">https://systemd.io/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd">systemd</a></span>
</dd></dl>
<ul><li>
<b><a href="../en/TLP.html" title="TLP">TLP</a></b> — Расширенное управление питанием для Linux.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://linrunner.de/tlp">https://linrunner.de/tlp</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=tlp">tlp</a></span>
</dd></dl>
<h3>
<span id=".D0.93.D1.80.D0.B0.D1.84.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5"></span><span class="mw-headline" id="Графические">Графические</span>
</h3>
<ul><li>
<b>batsignal</b> — Лёгкий монитор батареи, использующий libnotify для предупреждения о низком уровне заряда.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/electrickite/batsignal">https://github.com/electrickite/batsignal</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=batsignal">batsignal</a></span>
</dd></dl>
<ul><li>
<b>cbatticon</b> — Лёгкий и быстрый значок батареи в системном трее.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/valr/cbatticon">https://github.com/valr/cbatticon</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cbatticon">cbatticon</a></span>
</dd></dl>
<ul><li>
<b>GNOME Power Statistics</b> — Информация о питании системы и статистика для среды GNOME.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.gnome.org/GNOME/gnome-power-manager">https://gitlab.gnome.org/GNOME/gnome-power-manager</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gnome-power-manager">gnome-power-manager</a></span>
</dd></dl>
<ul><li>
<b>KDE Power Devil</b> — Модуль управления питанием для Plasma.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://invent.kde.org/plasma/powerdevil">https://invent.kde.org/plasma/powerdevil</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=powerdevil">powerdevil</a></span>
</dd></dl>
<ul><li>
<b>LXQt Power Management</b> — Модуль управления питанием для LXQt.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/lxqt/lxqt-powermanagement">https://github.com/lxqt/lxqt-powermanagement</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lxqt-powermanagement">lxqt-powermanagement</a></span>
</dd></dl>
<ul><li>
<b>MATE Power Management</b> — Инструмент управления питанием для MATE.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/mate-desktop/mate-power-manager">https://github.com/mate-desktop/mate-power-manager</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mate-power-manager">mate-power-manager</a></span>
</dd></dl>
<ul><li>
<b>MATE Power Statistics</b> — Информация о питании системы и статистика для среды MATE.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/mate-desktop/mate-power-manager">https://github.com/mate-desktop/mate-power-manager</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mate-power-manager">mate-power-manager</a></span>
</dd></dl>
<ul><li>
<b>poweralertd</b> — Демон для доставки уведомлений UPower.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://git.sr.ht/~kennylevinsen/poweralertd">https://git.sr.ht/~kennylevinsen/poweralertd</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/poweralertd/">poweralertd</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>powerkit</b> — Менеджер питания, независимый от сред рабочего стола.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/rodlie/powerkit">https://github.com/rodlie/powerkit</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/powerkit/">powerkit</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>Xfce Power Manager</b> — Менеджер питания для Xfce.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://docs.xfce.org/xfce/xfce4-power-manager/start">https://docs.xfce.org/xfce/xfce4-power-manager/start</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xfce4-power-manager">xfce4-power-manager</a></span>
</dd></dl>
<ul><li>
<b>vattery</b> — Приложение, написанное на Vala, которое отображает состояние батареи ноутбука в системном трее.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.jezra.net/projects/vattery.html">https://www.jezra.net/projects/vattery.html</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vattery/">vattery</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h2>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B8.D1.82.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC"></span><span class="mw-headline" id="Управление_питанием">Управление питанием</span>
</h2>
<h3>
<span id=".D0.A1.D0.BE.D0.B1.D1.8B.D1.82.D0.B8.D1.8F_ACPI"></span><span class="mw-headline" id="События_ACPI">События ACPI</span>
</h3>
<p><i>systemd</i> обрабатывает некоторые события <a href="https://en.wikipedia.org/wiki/ru:ACPI" class="extiw" title="wikipedia:ru:ACPI">ACPI</a>, связанные с питанием. Выполняемые при этом действия можно настроить в <code>/etc/systemd/logind.conf</code> или <code>/etc/systemd/logind.conf.d/*.conf</code> — смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 logind.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/logind.conf.5">logind.conf(5)</a></span>. В системах без специального менеджера питания он может заменить демон <a href="../ru/Acpid.html" title="Acpid (Русский)">acpid</a>, который обычно использовался для реагирования на эти события ACPI.
</p>
<p>Возможные действия — <code>ignore</code>, <code>poweroff</code>, <code>reboot</code>, <code>halt</code>, <code>suspend</code>, <code>hibernate</code>, <code>hybrid-sleep</code>, <code>suspend-then-hibernate</code>, <code>lock</code> или <code>kexec</code>. Для использования ждущего (suspend) и спящего (hibernate) режимов требуется <a href="../ru/Power_management/Suspend_and_hibernate.html" title="Power management (Русский)/Suspend and hibernate (Русский)">предварительная настройка</a>. При отсутствии настроек <i>systemd</i> будет выполнять действие по умолчанию.
</p>
<table class="wikitable sortable">
<tbody>
<tr>
<th>Обработчик
</th>
<th>Описание
</th>
<th>Действие по умолчанию
</th>
</tr>
<tr>
<td>
<code>HandlePowerKey</code>
</td>
<td>Срабатывает, когда нажата кнопка питания.
</td>
<td>
<code>poweroff</code>
</td>
</tr>
<tr>
<td>
<code>HandleSuspendKey</code>
</td>
<td>Срабатывает, когда нажата кнопка ждущего режима.
</td>
<td>
<code>suspend</code>
</td>
</tr>
<tr>
<td>
<code>HandleHibernateKey</code>
</td>
<td>Срабатывает, когда нажата кнопка спящего режима.
</td>
<td>
<code>hibernate</code>
</td>
</tr>
<tr>
<td>
<code>HandleLidSwitch</code>
</td>
<td>Срабатывает, когда закрывается крышка (ноутбука), за исключением описанных ниже случаев.
</td>
<td>
<code>suspend</code>
</td>
</tr>
<tr>
<td>
<code>HandleLidSwitchDocked</code>
</td>
<td>Срабатывает, когда закрывается крышка, но система подключена к док-станции или подключено более одного монитора.
</td>
<td>
<code>ignore</code>
</td>
</tr>
<tr>
<td>
<code>HandleLidSwitchExternalPower</code>
</td>
<td>Срабатывает, когда закрывается крышка, но система подключена к внешнему питанию.
</td>
<td>действие, установленное для <code>HandleLidSwitch</code>
</td>
</tr>
</tbody>
</table>
<p>Для применения изменений отправьте процессу <code>systemd-logind</code> сигнал <code>HUP</code>:
</p>
<pre># systemctl kill -s HUP systemd-logind
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <i>systemd</i> не умеет обрабатывать события ACPI, связанные с внешним питанием или батареей, поэтому если вы используете <a href="../ru/Laptop_Mode_Tools.html" title="Laptop Mode Tools (Русский)">Laptop Mode Tools</a> или другие подобные инструменты, то <a href="../ru/Acpid.html" title="Acpid (Русский)">acpid</a> по-прежнему необходим.</div>
<h4>
<span id=".D0.9C.D0.B5.D0.BD.D0.B5.D0.B4.D0.B6.D0.B5.D1.80.D1.8B_.D0.BF.D0.B8.D1.82.D0.B0.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Менеджеры_питания">Менеджеры питания</span>
</h4>
<p>Некоторые <a href="../ru/Desktop_environment.html" title="Desktop environment (Русский)">среды рабочего стола</a> предоставляют менеджеры питания, которые блокируют (<a rel="nofollow" class="external text" href="https://systemd.io/INHIBITOR_LOCKS/">inhibit</a>, временно отключают) некоторые или все настройки <i>systemd</i> ACPI. Если такой менеджер питания запущен, то действия для событий ACPI могут быть настроены только в этом менеджере. Изменения в <code>/etc/systemd/logind.conf</code> или <code>/etc/systemd/logind.conf.d/*.conf</code> нужны только в том случае, если вы хотите настроить поведение для события, которое не блокируется используемым вами менеджером питания.
</p>
<p>Обратите внимание, что если менеджер питания не блокирует соответствующие события в <i>systemd</i>, вы можете оказаться в ситуации, когда <i>systemd</i> уводит систему в сон, а затем, когда система пробуждается, другой менеджер питания снова уводит её в сон. Менеджеры питания <a href="../ru/KDE.html" title="KDE (Русский)">KDE</a>, <a href="../ru/GNOME.html" title="GNOME (Русский)">GNOME</a>, <a href="../ru/Xfce.html" title="Xfce (Русский)">Xfce</a> и <a href="../en/MATE.html" class="mw-redirect" title="MATE (Русский)">MATE</a> выдают необходимые команды <i>inhibited</i>. Если они не выдаются, например, при использовании <a href="../ru/Acpid.html" title="Acpid (Русский)">acpid</a> или других инструментов для обработки событий ACPI, установите в опциях <code>Handle</code> значение <code>ignore</code>. Смотрите также <span class="plainlinks archwiki-template-man" title="$ man 1 systemd-inhibit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-inhibit.1">systemd-inhibit(1)</a></span>.
</p>
<h4><span class="mw-headline" id="xss-lock">xss-lock</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xss-lock">xss-lock</a></span> подписывается на systemd-события <code>suspend</code>, <code>hibernate</code>, <code>lock-session</code> и <code>unlock-session</code> с соответствующими действиями (запустить блокировщик и ждать, пока пользователь разблокирует или убьёт блокировщик). <i>xss-lock</i> также реагирует на события <a href="../ru/Display_Power_Management_Signaling.html" title="Display Power Management Signaling (Русский)">DPMS</a> и в ответ запускает или завершает блокировщик.
</p>
<p>Добавьте xss-lock в <a href="../ru/Autostarting.html" class="mw-redirect" title="Автозапуск">автозапуск</a>, например:
</p>
<pre>xss-lock -- i3lock -n -i <i>фоновая_картинка.png</i> &amp;
</pre>
<h3>
<span id=".D0.96.D0.B4.D1.83.D1.89.D0.B8.D0.B9_.D0.B8_.D1.81.D0.BF.D1.8F.D1.89.D0.B8.D0.B9_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D1.8B"></span><span class="mw-headline" id="Ждущий_и_спящий_режимы">Ждущий и спящий режимы</span>
</h3>
<p><i>systemd</i> предоставляет команды для перехода в ждущий (suspend) или спящий (hibernate) режим, использующие встроенную в ядро функциональность. Также есть механизм хуков для настройки действий до и после сна.
</p>
<p>Команда <code>systemctl suspend</code> должна работать из коробки, а для <code>systemctl hibernate</code> требуется предварительная настройка, описанная в статье <a href="../ru/Power_management/Suspend_and_hibernate.html#%D0%93%D0%B8%D0%B1%D0%B5%D1%80%D0%BD%D0%B0%D1%86%D0%B8%D1%8F" class="mw-redirect" title="Ждущий и спящий режимы">Ждущий и спящий режимы#Гибернация</a>.
</p>
<p>Также есть ещё два режима, комбинирующих ждущий и спящий режимы:
</p>
<ul>
<li>
<code>systemctl hybrid-sleep</code> сохраняет состояние системы одновременно и в оперативной памяти, и на диске, благодаря чему отключение питания не приводит к потере данных. Этот режим также называют <a href="../ru/Power_management/Suspend_and_hibernate.html" title="Power management (Русский)/Suspend and hibernate (Русский)">suspend to both</a>.</li>
<li>
<code>systemctl suspend-then-hibernate</code> изначально уходит в ждущий режим на максимально возможное время, затем по сигналу от аппаратных часов (или по сигналу о низком заряде батареи, если это реализовано в системе) просыпается и уходит в спящий режим. Время срабатывания аппаратных часов указывается в настройке <code>HibernateDelaySec</code> в файле <span class="plainlinks archwiki-template-man" title="$ man 5 systemd-sleep.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sleep.conf.5">systemd-sleep.conf(5)</a></span>. Значение по умолчанию вычисляется на основе скорости разряда батареи так, чтобы к моменту пробуждения оставалось 5% заряда; если батареи нет, то значение по умолчанию 2 часа. Вычисление производится на основе измерения уровня заряда батареи после времени, заданного в настройке <code>SuspendEstimationSec</code> в <span class="plainlinks archwiki-template-man" title="$ man 5 systemd-sleep.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sleep.conf.5">systemd-sleep.conf(5)</a></span>: после истечения указанного времени система ненадолго проснётся для выполнения измерения (измерение также производится при пробуждении пользователем).</li>
</ul>
<h4>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D0.BD.D0.B0"></span><span class="mw-headline" id="Отключение_сна">Отключение сна</span>
</h4>
<p>При использовании устройства в качестве, например, сервера уход в сон может быть не нужен или даже нежелателен.
Можно настроить любое состояние сна:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/sleep.conf.d/disable-suspend.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Sleep]
AllowSuspend=no
AllowHibernation=no
AllowSuspendThenHibernate=no
AllowHybridSleep=no</pre>
<h3>
<span id=".D0.A5.D1.83.D0.BA.D0.B8"></span><span class="mw-headline" id="Хуки">Хуки</span>
</h3>
<h4>
<span id=".D0.A4.D0.B0.D0.B9.D0.BB.D1.8B_.D1.81.D0.BB.D1.83.D0.B6.D0.B1"></span><span class="mw-headline" id="Файлы_служб">Файлы служб</span>
</h4>
<p>Можно запускать службы до или после сна, если связать их с юнитами <i>suspend.target</i>, <i>hibernate.target</i>, <i>sleep.target</i>, <i>hybrid-sleep.target</i> и <i>suspend-then-hibernate.target</i>. Для общесистемных и пользовательских действий нужно создавать отдельные файлы. Ниже приведены примеры таких файлов; <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службы <code>suspend@<i>пользователь</i></code> и <code>resume@<i>пользователь</i></code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/suspend@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=User suspend actions
Before=sleep.target

[Service]
User=%I
Type=forking
Environment=DISPLAY=:0
ExecStartPre= -/usr/bin/pkill -u %u unison ; /usr/local/bin/music.sh stop
ExecStart=/usr/bin/sflock
ExecStartPost=/usr/bin/sleep 1

[Install]
WantedBy=sleep.target</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/resume@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=User resume actions
After=suspend.target

[Service]
User=%I
Type=simple
ExecStart=/usr/local/bin/ssh-connect.sh

[Install]
WantedBy=suspend.target</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Так как процесс, запускающий блокировку экрана, может завершиться до того, как экран реально заблокируется, — есть вероятность, что экран не успеет заблокироваться перед уходом в сон, и после пробуждения на экране может на мгновение отобразиться незаблокированный рабочий стол. Добавление небольшой задержки через <code>ExecStartPost=/usr/bin/sleep 1</code> помогает предотвратить это, позволяя блокировщику экрана успеть заблокировать экран.</div>
<p>Пример для общесистемных действий (<a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">включите</a> службы <code>root-resume</code> и <code>root-suspend</code>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/root-suspend.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Local system suspend actions
Before=sleep.target

[Service]
Type=simple
ExecStart=-/usr/bin/pkill sshfs

[Install]
WantedBy=sleep.target</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/root-resume.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Local system resume actions
After=suspend.target

[Service]
Type=simple
ExecStart=/usr/bin/systemctl restart mnt-media.automount

[Install]
WantedBy=suspend.target</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Несколько советов по поводу этих файлов служб (подробнее в <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.service.5">systemd.service(5)</a></span>):
<ul>
<li>Если указать <code>Type=oneshot</code>, то вы сможете использовать несколько строк <code>ExecStart=</code>. В противном случае допускается только одна строка <code>ExecStart</code>. Вы можете добавлять дополнительные команды либо с помощью <code>ExecStartPre</code>, либо разделяя команды точкой с запятой (смотрите первый пример выше; обратите внимание на пробелы до и после точки с запятой, так как они обязательны).</li>
<li>Если к команде добавить префикс <code>-</code>, то ненулевой статус выхода будет игнорироваться и любое завершение работы команды будет считаться успешным выполнением команды.</li>
<li>Лучшее место для поиска ошибок при решении проблем, связанных с этими файлами, — это, конечно, <a href="../ru/Systemd/Journal.html" title="Systemd (Русский)/Journal (Русский)">journalctl</a>.</li>
</ul>
</div>
<h4>
<span id=".D0.9A.D0.BE.D0.BC.D0.B1.D0.B8.D0.BD.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.BD.D1.8B.D0.B9_.D1.84.D0.B0.D0.B9.D0.BB_.D1.81.D0.BB.D1.83.D0.B6.D0.B1.D1.8B"></span><span class="mw-headline" id="Комбинированный_файл_службы">Комбинированный файл службы</span>
</h4>
<p>При использовании комбинированного файла службы один и тот же хук выполняет всю работу для разных фаз (сон и пробуждение) и для разных целей (ждущий/спящий/гибридный режимы).
</p>
<p>Пример и объяснение:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/wicd-sleep.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Wicd sleep hook
Before=sleep.target
StopWhenUnneeded=yes

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=-/usr/share/wicd/daemon/suspend.py
ExecStop=-/usr/share/wicd/daemon/autoconnect.py

[Install]
WantedBy=sleep.target</pre>
<ul>
<li>
<code>RemainAfterExit=yes</code>: После запуска служба считается активной до тех пор, пока её явно не остановят.</li>
<li>
<code>StopWhenUnneeded=yes</code>: Если служба активна, она будет остановлена, если ни одна другая активная служба не нуждается в ней. В данном конкретном примере она будет остановлена после остановки <i>sleep.target</i>.</li>
<li>Поскольку <i>sleep.target</i> связан с <i>suspend.target</i>, <i>hibernate.target</i> и <i>hybrid-sleep.target</i> и поскольку <i>sleep.target</i> сам является <i>StopWhenUnneeded</i> службой, хук гарантированно запустится/остановится правильно для различных режимов.</li>
</ul>
<h5>
<span id=".D0.9E.D0.B1.D1.89.D0.B0.D1.8F_.D1.81.D0.BB.D1.83.D0.B6.D0.B1.D0.B0-.D1.88.D0.B0.D0.B1.D0.BB.D0.BE.D0.BD"></span><span class="mw-headline" id="Общая_служба-шаблон">Общая служба-шаблон</span>
</h5>
<p>В следующем примере показана <a rel="nofollow" class="external text" href="https://0pointer.net/blog/projects/instances.html">служба-шаблон</a>, которая может быть использована для подключения любой существующей службы systemd к событиям питания:<a rel="nofollow" class="external autonumber" href="https://narkive.com/mYzxSIDN.6">[1]</a>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/sleep@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=%I sleep hook
Before=sleep.target
StopWhenUnneeded=yes

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=-/usr/bin/systemctl stop %i
ExecStop=-/usr/bin/systemctl start %i

[Install]
WantedBy=sleep.target</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Включите">Включите</a> экземпляр этого шаблона, после символа <code>@</code> указав название существующей службы systemd, то есть <code>sleep@<i><b>название-файла-службы</b></i>.service</code>. Смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5#DESCRIPTION">systemd.unit(5) § DESCRIPTION</a></span> для более подробной информации о юнитах-шаблонах.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Шаблоны не ограничены управлением службами systemd и могут использоваться с другими программами. Примеры можно посмотреть здесь: <a rel="nofollow" class="external autonumber" href="https://fedoramagazine.org/systemd-template-unit-files/">[2]</a>
</div>
<h4>
<span id=".D0.A5.D1.83.D0.BA.D0.B8_.D0.B2_.2Fusr.2Flib.2Fsystemd.2Fsystem-sleep"></span><span class="mw-headline" id="Хуки_в_/usr/lib/systemd/system-sleep">Хуки в /usr/lib/systemd/system-sleep</span>
</h4>
<p><i>systemd</i> запускает все исполняемые файлы из каталога <code>/usr/lib/systemd/system-sleep/</code>, передавая им два аргумента:
</p>
<ul>
<li>Аргумент 1: <code>pre</code> или <code>post</code> в зависимости от того, уходит ли система в сон или пробуждается</li>
<li>Аргумент 2: <code>suspend</code>, <code>hibernate</code> или <code>hybrid-sleep</code> в зависимости от конкретного режима сна</li>
</ul>
<p><i>systemd</i> запускает все файлы одновременно, а не последовательно друг за другом.
</p>
<p>Вывод будет записан в журнал службы <i>systemd-suspend.service</i>, <i>systemd-hibernate.service</i> или <i>systemd-hybrid-sleep.service</i>, который можно посмотреть с помощью <a href="../ru/Systemd/Journal.html" title="Systemd (Русский)/Journal (Русский)">journalctl</a>:
</p>
<pre># journalctl -b -u systemd-suspend.service
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Вместо написания скриптов можно связывать юниты systemd с <i>sleep.target</i>, <i>suspend.target</i>, <i>hibernate.target</i> или <i>hybrid-sleep.target</i>.</div>
<p>Пример скрипта:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system-sleep/example.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
case $1/$2 in
  pre/*)
    echo "Going to $2..."
    ;;
  post/*)
    echo "Waking up from $2..."
    ;;
esac
</pre>
<p>Не забудьте сделать скрипт <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a>.
</p>
<p>Смотрите <span class="plainlinks archwiki-template-man" title="$ man 7 systemd.special"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.special.7">systemd.special(7)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-sleep"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sleep.8">systemd-sleep(8)</a></span> для более подробной информации.
</p>
<h3>
<span id=".D0.A0.D0.B5.D1.88.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Решение_проблем">Решение проблем</span>
</h3>
<h4>
<span id=".D0.9E.D1.82.D0.BB.D0.BE.D0.B6.D0.B5.D0.BD.D0.BD.D0.BE.D0.B5_.D0.B2.D1.8B.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B5.D0.B9.D1.81.D1.82.D0.B2.D0.B8.D1.8F_.D0.BF.D1.80.D0.B8_.D0.B7.D0.B0.D0.BA.D1.80.D1.8B.D1.82.D0.B8.D0.B8_.D0.BA.D1.80.D1.8B.D1.88.D0.BA.D0.B8_.D0.BD.D0.BE.D1.83.D1.82.D0.B1.D1.83.D0.BA.D0.B0"></span><span class="mw-headline" id="Отложенное_выполнение_действия_при_закрытии_крышки_ноутбука">Отложенное выполнение действия при закрытии крышки ноутбука</span>
</h4>
<p>Если ноутбук закрывается и открывается несколько раз подряд, <i>logind</i> задержит переход в ждущий режим до 90 секунд, чтобы дать ядру время для обнаружения подключенной док-станции. <a rel="nofollow" class="external autonumber" href="https://lists.freedesktop.org/archives/systemd-devel/2015-January/027131.html">[3]</a> С версии systemd v220 время задержки можно настроить:<a rel="nofollow" class="external autonumber" href="https://github.com/systemd/systemd/commit/9d10cbee89ca7f82d29b9cb27bef11e23e3803ba">[4]</a>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/logind.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
HoldoffTimeoutSec=30s
...</pre>
<h4>
<span id="Fn-.D0.BA.D0.BD.D0.BE.D0.BF.D0.BA.D0.B0_.D1.81.D0.BD.D0.B0_.D0.BD.D0.B0_.D0.BD.D0.BE.D1.83.D1.82.D0.B1.D1.83.D0.BA.D0.B5_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82"></span><span class="mw-headline" id="Fn-кнопка_сна_на_ноутбуке_не_работает">Fn-кнопка сна на ноутбуке не работает</span>
</h4>
<p>Если независимо от настроек в logind.conf кнопка сна не работает (её нажатие даже не приводит к появлению сообщения в syslog), то logind, вероятно, не отслеживает клавиатуру. <a rel="nofollow" class="external autonumber" href="https://lists.freedesktop.org/archives/systemd-devel/2015-February/028325.html">[5]</a> Выполните:
</p>
<pre># journalctl --grep="Watching system buttons"
</pre>
<p>Вы увидите что-то подобное:
</p>
<pre>May 25 21:28:19 vmarch.lan systemd-logind[210]: Watching system buttons on /dev/input/event2 (Power Button)
May 25 21:28:19 vmarch.lan systemd-logind[210]: Watching system buttons on /dev/input/event3 (Sleep Button)
May 25 21:28:19 vmarch.lan systemd-logind[210]: Watching system buttons on /dev/input/event4 (Video Bus)
</pre>
<p>Если здесь нет клавиатуры, то найдите её ATTRS{name} <a rel="nofollow" class="external autonumber" href="https://systemd-devel.freedesktop.narkive.com/Rbi3rjNN/patch-1-2-logind-add-support-for-tps65217-power-button">[6]</a> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># udevadm info -a /dev/input/by-path/*-kbd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
KERNEL=="event0"
...
ATTRS{name}=="AT Translated Set 2 keyboard"</pre>
<p>И напишите правило udev для добавления тега "power-switch":
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/70-power-switch-my.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="remove", GOTO="power_switch_my_end"
SUBSYSTEM=="input", KERNEL=="event*", ATTRS{name}=="AT Translated Set 2 keyboard", TAG+="power-switch"
LABEL="power_switch_my_end"</pre>
<p><a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">Перезапустите</a> службу <code>systemd-udevd.service</code>, перезагрузите правила выполнением команды <code>udevadm trigger</code> от имени root и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Перезапустите">перезапустите</a> службу <code>systemd-logind.service</code>.
</p>
<p>Теперь в журнале должна появиться строка, связанная с клавиатурой: <code>Watching system buttons on /dev/input/event0</code>.
</p>
<h4>
<span id=".D0.9A.D0.BE.D0.BC.D0.BF.D1.8C.D1.8E.D1.82.D0.B5.D1.80_.D1.81_.D1.87.D0.B8.D0.BF.D1.81.D0.B5.D1.82.D0.BE.D0.BC_A520I_.D0.B8.D0.BB.D0.B8_B550I_.D0.BD.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D1.83.D0.B6.D0.B4.D0.B0.D0.B5.D1.82.D1.81.D1.8F"></span><span class="mw-headline" id="Компьютер_с_чипсетом_A520I_или_B550I_не_пробуждается">Компьютер с чипсетом A520I или B550I не пробуждается</span>
</h4>
<p>На некоторых материнских платах с чипсетами A520i и B550i система не полностью входит в состояние сна или выходит из него. Симптомы: система переходит в сон, монитор выключается, а внутренние светодиоды на материнской плате или светодиод питания остаются включенными. Впоследствии система не возвращается из этого состояния и требует полного выключения питания. Если у вас возникли подобные проблемы с AMD, сначала убедитесь, что ваша система полностью обновлена, и проверьте, установлен ли пакет с <a href="../ru/Microcode.html" title="Microcode (Русский)">микрокодом</a> для AMD.
</p>
<p>Убедитесь, что строка, начинающаяся с <code>GPP0</code>, имеет статус enabled:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /proc/acpi/wakeup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Device	S-state	  Status   Sysfs node
GP12	  S4	*enabled   pci:0000:00:07.1
GP13	  S4	*enabled   pci:0000:00:08.1
XHC0	  S4	*enabled   pci:0000:0b:00.3
GP30	  S4	*disabled
GP31	  S4	*disabled
PS2K	  S3	*disabled
<b>GPP0</b>	  S4	<b>*enabled</b>   pci:0000:00:01.1
GPP8	  S4	*enabled   pci:0000:00:03.1
PTXH	  S4	*enabled   pci:0000:05:00.0
PT20	  S4	*disabled
PT24	  S4	*disabled
PT26	  S4	*disabled
PT27	  S4	*disabled
PT28	  S4	*enabled   pci:0000:06:08.0
PT29	  S4	*enabled   pci:0000:06:09.0
</pre>
<p>Если enabled, вы можете выполнить следующую команду:
</p>
<pre># echo GPP0 &gt; /proc/acpi/wakeup
</pre>
<p>Теперь проверьте, запустив <code>systemctl suspend</code> и позволив системе перейти в ждущий режим. Затем попробуйте разбудить систему через несколько секунд. Если это сработает, вы можете сделать этот обходной путь постоянным. Создайте <a href="../ru/Systemd.html#%D0%9D%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">файл юнита systemd</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/toggle-gpp0-to-fix-wakeup.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description="Disable GPP0 to fix suspend issue"

[Service]
ExecStart=/bin/sh -c "/bin/echo GPP0 &gt; /proc/acpi/wakeup"

[Install]
WantedBy=multi-user.target</pre>
<p>Выполните <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">daemon-reload</a> и <a href="../ru/Help:Reading.html#%D0%A3%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%B0%D0%BC%D0%B8_systemd" class="mw-redirect" title="Запустите/включите">запустите/включите</a> этот юнит.
</p>
<h3>
<span id=".D0.A1.D0.BE.D0.B2.D0.B5.D1.82.D1.8B_.D0.B8_.D1.80.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8"></span><span class="mw-headline" id="Советы_и_рекомендации">Советы и рекомендации</span>
</h3>
<h4>
<span id=".D0.9F.D0.BE.D0.B4.D0.BA.D0.B0.D1.87.D0.BA.D0.B0_.D1.82.D0.BE.D0.BB.D1.8C.D0.BA.D0.BE_.D0.B4.D0.BB.D1.8F_.D1.81.D0.BF.D1.8F.D1.89.D0.B5.D0.B3.D0.BE_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D0.B0"></span><span class="mw-headline" id="Подкачка_только_для_спящего_режима">Подкачка только для спящего режима</span>
</h4>
<p>Иногда может потребоваться, чтобы подкачка включалась только для спящего режима и выключалась после пробуждения.
</p>
<p>Хотя это можно реализовать с помощью описанных выше хуков, можно также напрямую настроить юнит подкачки (смотрите <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.swap"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.swap.5">systemd.swap(5)</a></span>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>путь-к-подкачке</i>.swap</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Before=systemd-hibernate.service
StopWhenUnneeded=true

[Swap]
What=<i>/путь/к/подкачке</i>
Options=noauto

[Install]
RequiredBy=systemd-hibernate.service</pre>
<p><i>Обратите внимание, что имя файла юнита должно соответствовать пути подкачки и что юнит должен быть <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">включен</a>, чтобы параметр <code>RequiredBy=</code> вступил в силу.</i>
</p>
<p>Можно также прописать в зависимости <code>hibernate.target</code> вместо <code>systemd-hibernate.service</code>, но тогда прямой запуск <code>systemctl start systemd-hibernate.service</code> не будет работать.
</p>
<p>Обратите внимание, что среды рабочего стола теперь могут не показывать опцию перехода в спящий режим и <code>systemctl hibernate</code> не будет работать, потому что они запрашивают у <code>systemd-logind</code> доступные режимы энергосбережения, а он не будет сообщать о возможности перехода в спящий режим, если нет активной подкачки.
</p>
<p>Это можно обойти, запустив <code>systemd-logind</code> с <a href="../ru/Environment_variables.html" title="Environment variables (Русский)">переменной окружения</a> <code>SYSTEMD_BYPASS_HIBERNATION_MEMORY_CHECK=1</code>, например, создав <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" class="mw-redirect" title="Drop-in файл">drop-in файл</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/systemd-logind.service.d/disable-hibernation-swap-check.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Environment="SYSTEMD_BYPASS_HIBERNATION_MEMORY_CHECK=1"</pre>
<h2>
<span id=".D0.AD.D0.BD.D0.B5.D1.80.D0.B3.D0.BE.D1.81.D0.B1.D0.B5.D1.80.D0.B5.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Энергосбережение">Энергосбережение</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Специфичные для ноутбуков вещи, такие как мониторинг батареи, описаны в статье <a href="../en/Laptop.html#Power_management" title="Laptop">Laptop#Power management</a>. Также посмотрите статьи для ваших моделей процессора или видеокарты (например, <a href="../en/Ryzen.html" title="Ryzen">Ryzen</a> или <a href="../en/AMDGPU.html" class="mw-redirect" title="AMDGPU (Русский)">AMDGPU</a>).</div>
<p>Данный раздел является справочником по созданию скриптов и настроек энергосбережения, например, с помощью правил udev. Убедитесь, что настройки не управляются каким-либо другим <a href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B">пользовательским инструментом</a>, чтобы не было конфликтов.
</p>
<p>Почти все перечисленные здесь функции стоит использовать независимо от того, работает ли компьютер от сети или от батареи. Большинство из них имеют незначительное влияние на производительность и просто не включены по умолчанию из-за распространённых неисправностей оборудования/драйверов. Снижение энергопотребления означает снижение тепловыделения, что может даже привести к повышению производительности современного процессора Intel или AMD благодаря <a href="https://en.wikipedia.org/wiki/ru:Turbo_Boost" class="extiw" title="wikipedia:ru:Turbo Boost">динамическому изменению тактовой частоты</a>.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D1.86.D0.B5.D1.81.D1.81.D0.BE.D1.80.D1.8B_.D1.81_.D0.BF.D0.BE.D0.B4.D0.B4.D0.B5.D1.80.D0.B6.D0.BA.D0.BE.D0.B9_Intel_HWP_.28Intel_Hardware_P-state.29"></span><span class="mw-headline" id="Процессоры_с_поддержкой_Intel_HWP_(Intel_Hardware_P-state)">Процессоры с поддержкой Intel HWP (Intel Hardware P-state)</span>
</h3>
<p>Доступные энергетические предпочтения (energy preferences) процессора, поддерживающего HWP: <code>default</code>, <code>performance</code>, <code>balance_performance</code>, <code>balance_power</code>, <code>power</code>.
</p>
<p>Это можно проверить командой
</p>
<pre>$ cat /sys/devices/system/cpu/cpufreq/policy?/energy_performance_available_preferences
</pre>
<p>Чтобы сэкономить больше энергии, можно создать следующий файл:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/energy_performance_preference.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">w /sys/devices/system/cpu/cpufreq/policy?/energy_performance_preference - - - - balance_power
</pre>
<p>Смотрите <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-tmpfiles"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-tmpfiles.8">systemd-tmpfiles(8)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 5 tmpfiles.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/tmpfiles.d.5">tmpfiles.d(5)</a></span> для более подробной информации.
</p>
<h3>
<span id=".D0.97.D0.B2.D1.83.D0.BA"></span><span class="mw-headline" id="Звук">Звук</span>
</h3>
<h4>
<span id=".D0.AF.D0.B4.D1.80.D0.BE"></span><span class="mw-headline" id="Ядро">Ядро</span>
</h4>
<p>По умолчанию энергосбережение звуковых устройств отключено в большинстве драйверов. Его можно включить, задав параметр <code>power_save</code> — время (в секундах) до перехода в режим ожидания. Чтобы отключить звуковую карту через одну секунду, создайте следующий файл для звуковых карт Intel.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/audio_powersave.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options snd_hda_intel power_save=1</pre>
<p>Для ac97 используйте следующее:
</p>
<pre>options snd_ac97_codec power_save=1
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Чтобы узнать производителя звуковой карты и соответствующий драйвер ядра, выполните <code>lspci -k</code>.</li>
<li>Переключение состояния питания аудиокарты может вызвать щёлкающий звук или заметную задержку на некотором оборудовании.</li>
</ul>
</div>
<p>Также можно ещё больше снизить требования к питанию звука, отключив аудиовыход HDMI, что можно сделать, <a href="../ru/Kernel_module.html#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8" title="Kernel module (Русский)">заблокировав</a> соответствующие модули ядра (например, <code>snd_hda_codec_hdmi</code> для Intel).
</p>
<h4><span class="mw-headline" id="PulseAudio">PulseAudio</span></h4>
<p>По умолчанию PulseAudio приостанавливает работу всех источников звука, которые слишком долго простаивают. При использовании внешнего USB-микрофона запись может начинаться с щелчком. В качестве обходного пути закомментируйте следующую строку в файле <code>/etc/pulse/default.pa</code>:
</p>
<pre>load-module module-suspend-on-idle
</pre>
<p>После этого перезапустите PulseAudio: <code>systemctl restart --user pulseaudio</code>.
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.B4.D1.81.D0.B2.D0.B5.D1.82.D0.BA.D0.B0_.D1.8D.D0.BA.D1.80.D0.B0.D0.BD.D0.B0"></span><span class="mw-headline" id="Подсветка_экрана">Подсветка экрана</span>
</h3>
<p>Смотрите <a href="../ru/Backlight.html" title="Backlight (Русский)">Backlight (Русский)</a>.
</p>
<h3><span class="mw-headline" id="Bluetooth">Bluetooth</span></h3>
<p>Чтобы полностью отключить Bluetooth, <a href="../ru/Kernel_module.html#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8" title="Kernel module (Русский)">заблокируйте</a> модули <code>btusb</code> и <code>bluetooth</code>.
</p>
<p>Для временного отключения используйте <i>rfkill</i>:
</p>
<pre># rfkill block bluetooth
</pre>
<p>Или с помощью правила udev:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-bluetooth.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># disable bluetooth
SUBSYSTEM=="rfkill", ATTR{type}=="bluetooth", ATTR{state}="0"</pre>
<h3>
<span id=".D0.92.D0.B5.D0.B1-.D0.BA.D0.B0.D0.BC.D0.B5.D1.80.D0.B0"></span><span class="mw-headline" id="Веб-камера">Веб-камера</span>
</h3>
<p>Если вы не используете встроенную веб-камеру, <a href="../ru/Kernel_module.html#%D0%97%D0%B0%D0%BF%D1%80%D0%B5%D1%82_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8" title="Kernel module (Русский)">заблокируйте</a> модуль <code>uvcvideo</code>.
</p>
<h3>
<span id=".D0.9F.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B_.D1.8F.D0.B4.D1.80.D0.B0"></span><span class="mw-headline" id="Параметры_ядра">Параметры ядра</span>
</h3>
<p>Этот раздел использует конфигурацию <code>/etc/sysctl.d/</code> — drop-in каталог для sysctl-параметров ядра. Смотрите <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/the-new-configuration-files">The New Configuration Files</a> и <span class="plainlinks archwiki-template-man" title="$ man 5 sysctl.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sysctl.d.5">sysctl.d(5)</a></span> для более подробной информации.
</p>
<h4>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D1.82.D0.BE.D1.80.D0.BE.D0.B6.D0.B5.D0.B2.D0.BE.D0.B3.D0.BE_.D1.82.D0.B0.D0.B9.D0.BC.D0.B5.D1.80.D0.B0_.D1.81_NMI"></span><span class="mw-headline" id="Отключение_сторожевого_таймера_с_NMI">Отключение сторожевого таймера с NMI</span>
</h4>
<p>Сторожевой таймер, использующий немаскируемое прерывание (<a href="https://en.wikipedia.org/wiki/Non-maskable_interrupt" class="extiw" title="wikipedia:Non-maskable interrupt">Non-maskable interrupt</a>), — это отладочная функция, позволяющая отлавливать аппаратные зависания, которые вызывают панику ядра. В некоторых системах он может генерировать большое количество прерываний, вызывая заметное увеличение энергопотребления:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/disable_watchdog.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.nmi_watchdog = 0</pre>
<p>Или добавьте <code>nmi_watchdog=0</code> в <a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметры ядра">параметры ядра</a> для полного отключения с начала загрузки.
</p>
<h4>
<span id=".D0.92.D1.80.D0.B5.D0.BC.D1.8F_Writeback"></span><span class="mw-headline" id="Время_Writeback">Время Writeback</span>
</h4>
<p>Увеличение времени перед записью изменённых данных из памяти на диск помогает сгруппировать операции ввода-вывода, тем самым уменьшая нагрузку на диск и потребление энергии. Чтобы установить значение 60 секунд (по умолчанию 5 секунд):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/dirty.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.dirty_writeback_centisecs = 6000</pre>
<p>Чтобы сделать то же самое для записи журналов на поддерживаемых файловых системах (например, ext4, btrfs...), используйте <code>commit=60</code> в качестве опции в <a href="../ru/Fstab.html" title="Fstab (Русский)">fstab</a>.
</p>
<p>Обратите внимание, что это значение изменяется как побочный эффект настройки Laptop Mode, приведённой ниже. Другие параметры, влияющие на производительность ввода-вывода и энергосбережение, описаны в разделе <a href="../ru/Sysctl.html#%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D1%8C" title="Sysctl (Русский)">sysctl (Русский)#Виртуальная память</a>.
</p>
<h4><span class="mw-headline" id="Laptop_Mode">Laptop Mode</span></h4>
<p>Смотрите <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/laptops/laptop-mode.html">документацию ядра</a>. "A sensible value for the knob is 5 seconds."
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/laptop.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.laptop_mode = 5</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Эта настройка в основном относится к жёстким дискам.</div>
<h3>
<span id=".D0.A1.D0.B5.D1.82.D0.B5.D0.B2.D1.8B.D0.B5_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.8B"></span><span class="mw-headline" id="Сетевые_интерфейсы">Сетевые интерфейсы</span>
</h3>
<p><a href="../en/Wake-on-LAN.html" title="Wake-on-LAN">Wake-on-LAN</a> может быть полезной функцией, но если вы не используете её, то она впустую потребляет дополнительную энергию в режиме сна. Вы можете адаптировать правило <a href="../en/Wake-on-LAN.html#udev" title="Wake-on-LAN">Wake-on-LAN#udev</a>, чтобы отключить эту функцию для всех Ethernet-интерфейсов. Чтобы включить энергосбережение с помощью <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iw">iw</a></span> на всех беспроводных интерфейсах:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/<b>81</b>-wifi-powersave.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="net", KERNEL=="wl*", RUN+="/usr/bin/iw dev $name set power_save on"</pre>
<p>Имя этого файла имеет важное значение. При использовании <a href="../ru/Network_configuration.html#%D0%A1%D0%BC%D0%B5%D0%BD%D0%B0_%D0%B8%D0%BC%D0%B5%D0%BD%D0%B8_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0" title="Network configuration (Русский)">постоянных имён устройств</a> в systemd это правило, которое в лексикографической сортировке находится <b>после</b> <code>80-net-setup-link.rules</code>, применяется после переименования устройства в его постоянное имя, например <code>wlan0</code> переименовывается в <code>wlp3s0</code>. Помните, что команда <code>RUN</code> выполняется после обработки всех правил и в любом случае должна использовать постоянное имя, доступное в <code>$name</code> для сопоставленного устройства.
</p>
<h4>
<span id=".D0.91.D0.B5.D1.81.D0.BF.D1.80.D0.BE.D0.B2.D0.BE.D0.B4.D0.BD.D1.8B.D0.B5_.D0.BA.D0.B0.D1.80.D1.82.D1.8B_Intel_.28iwlwifi.29"></span><span class="mw-headline" id="Беспроводные_карты_Intel_(iwlwifi)">Беспроводные карты Intel (iwlwifi)</span>
</h4>
<p>Дополнительные функции энергосбережения беспроводных карт Intel с драйвером <code>iwlwifi</code> можно включить путём передачи правильных параметров в модуль ядра. Сделать их постоянными можно, добавив следующие строки в файл <code>/etc/modprobe.d/iwlwifi.conf</code>:
</p>
<pre>options iwlwifi power_save=1
</pre>
<p>Эта опция, вероятно, увеличит медианную задержку:
</p>
<pre>options iwlwifi uapsd_disable=0
</pre>
<p>На ядрах &lt; 5.4 вы можете использовать эту опцию, но это, вероятно, снизит максимальную пропускную способность:
</p>
<pre>options iwlwifi d0i3_disable=0
</pre>
<p>В зависимости от вашей беспроводной карты будет применяться один из этих двух вариантов.
</p>
<pre>options iwlmvm power_scheme=3
</pre>
<pre>options iwldvm force_cam=0
</pre>
<p>Вы можете проверить, какой из них является актуальным, проверив, какой из этих модулей запущен, используя
</p>
<pre># lsmod | grep '^iwl.vm'
</pre>
<p>Помните, что эти варианты энергосбережения являются экспериментальными и могут привести к нестабильной работе системы.
</p>
<h3>
<span id=".D0.A3.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D0.B8.D1.82.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_.D1.88.D0.B8.D0.BD"></span><span class="mw-headline" id="Управление_питанием_шин">Управление питанием шин</span>
</h3>
<h4><span class="mw-headline" id="Active_State_Power_Management">Active State Power Management</span></h4>
<p>Если система считает, что компьютер не поддерживает <a href="https://en.wikipedia.org/wiki/Active_State_Power_Management" class="extiw" title="wikipedia:Active State Power Management">ASPM</a>, он будет отключен при загрузке:
</p>
<pre># lspci -vv | grep 'ASPM.*abled;'
</pre>
<p>ASPM управляется через BIOS. Если ASPM отключен, это происходит потому, что <a rel="nofollow" class="external autonumber" href="https://wireless.wiki.kernel.org/en/users/documentation/ASPM">[7]</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2024-10-12 ⓘ]</sup>:
</p>
<ol>
<li>BIOS отключил его по какой-то причине (из-за конфликтов?).</li>
<li>PCIE требует ASPM, но L0s необязательны (поэтому L0s могут быть отключены, а включен только L1).</li>
<li>BIOS мог быть не запрограммирован для этого.</li>
<li>BIOS глючит.</li>
</ol>
<p>Если компьютер точно поддерживает ASPM, его можно принудительно включить с помощью <a href="../ru/Kernel_parameters.html" title="Kernel parameters (Русский)">параметра ядра</a> <code>pcie_aspm=force</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> 
<ul>
<li>Принудительное включение ASPM может вызвать зависание/панику, поэтому убедитесь, что у вас есть возможность удалить этот параметр, если он не сработает.</li>
<li>На системах, которые не поддерживают эту функцию, принудительное включение ASPM может даже увеличить энергопотребление.</li>
<li>Это принудительно включает ASPM в ядре, в то время как в аппаратной части он может оставаться отключенным и не работать. Чтобы проверить, так ли это, выполните <code>dmesg | grep ASPM</code> от имени root. Если да, обратитесь к вики-статье, относящейся к вашему оборудованию.</li>
</ul>
</div>
<p>Чтобы переключиться на <code>powersave</code>, выполните (следующая команда не будет работать, если ASPM не включен):
</p>
<pre># echo powersave &gt; /sys/module/pcie_aspm/parameters/policy
</pre>
<p>По умолчанию этот файл выглядит примерно так:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /sys/module/pcie_aspm/parameters/policy</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[default] performance powersave powersupersave
</pre>
<h4><span class="mw-headline" id="PCI_Runtime_Power_Management">PCI Runtime Power Management</span></h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/pci_pm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="pci", ATTR{power/control}="auto"</pre>
<p>Это правило выключает все неиспользуемые устройства, но некоторые из них не проснутся обратно. Чтобы разрешить Runtime Power Management только для устройств, о которых известно, что они работают нормально, используйте простое сопоставление с идентификаторами производителя и устройства (используйте <code>lspci -nn</code> для получения этих значений):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/pci_pm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># whitelist for pci autosuspend
SUBSYSTEM=="pci", ATTR{vendor}=="0x1234", ATTR{device}=="0x1234", ATTR{power/control}="auto"</pre>
<p>Альтернативный вариант — заблокировать устройства, не работающие с PCI Runtime Power Management, и включить его для всех остальных устройств:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/pci_pm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># blacklist for pci runtime power management
SUBSYSTEM=="pci", ATTR{vendor}=="0x1234", ATTR{device}=="0x1234", ATTR{power/control}="on", GOTO="pci_pm_end"

SUBSYSTEM=="pci", ATTR{power/control}="auto"
LABEL="pci_pm_end"</pre>
<h4>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B0.D1.8F_.D0.BF.D1.80.D0.B8.D0.BE.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2_USB"></span><span class="mw-headline" id="Автоматическая_приостановка_устройств_USB">Автоматическая приостановка устройств USB</span>
</h4>
<p>Ядро Linux может автоматически приостанавливать работу USB-устройств, когда они не используются (USB autosuspend). Иногда это позволяет сэкономить довольно много энергии, однако некоторые USB-устройства не совместимы с функцией энергосбережения и начинают вести себя неадекватно (частое явление среди USB-мышей/клавиатур). Правила <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>, основанные на фильтрации по белым или чёрным спискам, могут помочь смягчить проблему.
</p>
<p>Самый простой и, скорее всего, бесполезный пример — включение автоматической приостановки для всех USB-устройств:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-usb_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="usb", TEST=="power/control", ATTR{power/control}="auto"</pre>
<p>Чтобы разрешить автоотключение только для устройств, о которых известно, что они работают нормально, используйте простое сопоставление с идентификаторами производителя и продукта (используйте <i>lsusb</i> для получения этих значений):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-usb_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># whitelist for usb autosuspend
ACTION=="add", SUBSYSTEM=="usb", TEST=="power/control", ATTR{idVendor}=="05c6", ATTR{idProduct}=="9205", ATTR{power/control}="auto"</pre>
<p>Альтернативный вариант — заблокировать устройства, не работающие с USB autosuspend, и включить его для всех остальных устройств:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-usb_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># blacklist for usb autosuspend
ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="05c6", ATTR{idProduct}=="9205", GOTO="power_usb_rules_end"

ACTION=="add", SUBSYSTEM=="usb", TEST=="power/control", ATTR{power/control}="auto"
LABEL="power_usb_rules_end"</pre>
<p>Время задержки по умолчанию контролируется параметром <code>autosuspend</code> встроенного <a href="../ru/Kernel_module.html" title="Kernel module (Русский)">модуля ядра</a> <code>usbcore</code>. Чтобы установить задержку на 5 секунд вместо стандартных 2 секунд, добавьте следующий <a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметр ядра">параметр ядра</a> в настройках вашего загрузчика:
</p>
<pre>usbcore.autosuspend=5
</pre>
<p>По аналогии с <code>power/control</code>, время задержки можно изменить для отдельного устройства с помощью атрибута <code>power/autosuspend</code>. Установка значения -1 полностью отключит автоматическую приостановку:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-usb_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="usb", ATTR{idVendor}=="05c6", ATTR{idProduct}=="9205", ATTR{power/autosuspend}="-1"</pre>
<p>Дополнительная информации об управлении питанием USB доступна в <a rel="nofollow" class="external text" href="https://docs.kernel.org/driver-api/usb/power-management.html">документации ядра</a>.
</p>
<h4><span class="mw-headline" id="SATA_Active_Link_Power_Management">SATA Active Link Power Management</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> SATA Active Link Power Management может привести к потере данных на некоторых устройствах. Не включайте это, если вы не создаёте резервные копии регулярно.</div>
<p>В Linux 4.15 появилась <a rel="nofollow" class="external text" href="https://hansdegoede.livejournal.com/18412.html">новая настройка</a> <code>med_power_with_dipm</code>, которая соответствует поведению настроек драйвера Windows IRST и не должна приводить к потере данных на последних SSD или HDD. Экономия энергии может быть значительной — <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=ebb82e3c79d2a956366d0848304a53648bd6350b">от 1,0 до 1,5 Вт (в режиме ожидания)</a>. Это станет настройкой по умолчанию для ноутбуков на базе Intel в Linux 4.16 <a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=ebb82e3c79d2a956366d0848304a53648bd6350b">[8]</a>.
</p>
<p>Текущую настройку можно прочитать из <code>/sys/class/scsi_host/host*/link_power_management_policy</code> с помощью команды:
</p>
<pre>$ cat /sys/class/scsi_host/host*/link_power_management_policy
</pre>
<table class="wikitable">
<caption>Доступные настройки ALPM
</caption>
<tbody>
<tr>
<th>Настройка
</th>
<th>Описание
</th>
<th>Энергосбережение
</th>
</tr>
<tr>
<td>max_performance
</td>
<td>текущее значение по умолчанию
</td>
<td>нет
</td>
</tr>
<tr>
<td>medium_power
</td>
<td>-
</td>
<td>~1,0 Вт
</td>
</tr>
<tr>
<td>med_power_with_dipm
</td>
<td>рекомендуемое значение
</td>
<td>~1,5 Вт
</td>
</tr>
<tr>
<td>min_power
</td>
<td>
<b>ВНИМАНИЕ: возможна потеря данных</b>
</td>
<td>~1,5 Вт
</td>
</tr>
</tbody>
</table>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/hd_power_save.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="scsi_host", KERNEL=="host*", ATTR{link_power_management_policy}="med_power_with_dipm"</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Это увеличивает задержку при обращении к диску, который простаивал, поэтому это один из немногих параметров, которые стоит переключать в зависимости от того, подключено ли внешнее питание или нет.</div>
<h3>
<span id=".D0.96.D1.91.D1.81.D1.82.D0.BA.D0.B8.D0.B5_.D0.B4.D0.B8.D1.81.D0.BA.D0.B8"></span><span class="mw-headline" id="Жёсткие_диски">Жёсткие диски</span>
</h3>
<p>Возможные параметры для управления питанием диска описаны в разделе <a href="../ru/Hdparm.html#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BF%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC" title="Hdparm (Русский)">hdparm (Русский)#Настройка управления питанием</a>.
</p>
<p>Сберечь энергию не получится, если много программ часто записывают данные на диск. Отслеживание всех программ, а также того, как и когда они записывают данные на диск, является способом ограничения использования диска. Используйте <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=iotop">iotop</a></span>, чтобы увидеть, какие программы часто используют диск. Другие советы есть в разделе <a href="../ru/Improving_performance.html#%D0%A3%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%B0_%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F" class="mw-redirect" title="Увеличение производительности">Увеличение производительности#Устройства хранения</a>.
</p>
<p>Также могут помочь такие мелочи, как установка опции <a href="../ru/Fstab.html#%D0%9F%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_atime" title="Fstab (Русский)">noatime</a>. Если доступно достаточно оперативной памяти, подумайте об отключении или ограничении <a href="../ru/Swap.html#Swappiness" title="Swap (Русский)">swappiness</a>, так как это может заметно уменьшить запись на диск.
</p>
<p>Для дисков Seagate с технологией <a rel="nofollow" class="external text" href="https://www.seagate.com/files/docs/pdf/en-GB/whitepaper/tp608-powerchoice-tech-provides-gb.pdf">PowerChoice</a> трюки с настройкой APM через <a href="../ru/Hdparm.html" title="Hdparm (Русский)">hdparm</a> не работают. Вместо этого установите пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/seagate-seachest/">seagate-seachest</a></span><sup><small>AUR</small></sup>. Например, для полного отключения EPC на диске можно использовать следующее:
</p>
<pre># SeaChest_PowerControl --scan
# SeaChest_PowerControl -d /dev/sd<i>X</i> -i
# SeaChest_PowerControl -d /dev/sd<i>X</i> --showEPCSettings
# SeaChest_PowerControl -d /dev/sd<i>X</i> --EPCfeature disable
# SeaChest_PowerControl -d /dev/sd<i>X</i> --showEPCSettings
</pre>
<p>Последняя команда выведет информацию:
</p>
<pre>==========================================================================================
 SeaChest_PowerControl - Seagate drive utilities - NVMe Enabled
 Copyright (c) 2014-2022 Seagate Technology LLC and/or its Affiliates, All Rights Reserved
 SeaChest_PowerControl Version: 3.1.10-3_2_1 X86_64
 Build Date: Jul 26 2022
 Today: Sat May 20 15:49:25 2023        User: root
==========================================================================================

/dev/sdc - ST1000NM0008-2F2100 - ZFA19JG2 - SN02 - ATA
.

===EPC Settings===
        * = timer is enabled
        C column = Changeable
        S column = Savable
        All times are in 100 milliseconds

Name       Current Timer Default Timer Saved Timer   Recovery Time C S
Idle A      0            *10           *10           1             Y Y
Idle B      0            *1200         *1200         3             Y Y
Idle C      0             6000          6000         16            Y Y
Standby Z   0             9000          9000         46            Y Y
</pre>
<p>Нули в первом столбце означают, что парковка и остановка вращения были отключены.
</p>
<h2>
<span id=".D0.98.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D1.8B_.D0.B8_.D1.81.D0.BA.D1.80.D0.B8.D0.BF.D1.82.D1.8B"></span><span class="mw-headline" id="Инструменты_и_скрипты">Инструменты и скрипты</span>
</h2>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D1.81.D0.BA.D1.80.D0.B8.D0.BF.D1.82.D0.B0_.D1.81_.D0.BF.D1.80.D0.B0.D0.B2.D0.B8.D0.BB.D0.BE.D0.BC_udev"></span><span class="mw-headline" id="Использование_скрипта_с_правилом_udev">Использование скрипта с правилом udev</span>
</h3>
<p>Поскольку пользователи systemd могут переводить систему в ждущий или спящий режим через <code>systemctl suspend</code> или <code>systemctl hibernate</code> и обрабатывать события acpi с помощью <code>/etc/systemd/logind.conf</code>, может быть интересно удалить <i>pm-utils</i> и <a href="../ru/Acpid.html" title="Acpid (Русский)">acpid</a>. Есть только одна вещь, которую systemd не может сделать (по состоянию на systemd-204): управление питанием в зависимости от того, работает ли система от сети или от батареи. Чтобы заполнить этот пробел, вы можете создать правило <a href="../ru/Udev.html" title="Udev (Русский)">udev</a>, которое запускает скрипт при подключении и отключении внешнего питания:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/powersave.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="power_supply", ATTR{online}=="0", RUN+="/путь/к/вашему/скрипту true"
SUBSYSTEM=="power_supply", ATTR{online}=="1", RUN+="/путь/к/вашему/скрипту false"</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Вы можете использовать тот же скрипт, что и в <i>pm-powersave</i>. Вам просто нужно сделать его <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a> и поместить в другое место (например, <code>/usr/local/bin/</code>).</div>
<p>Примеры powersave скриптов:
</p>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://github.com/supplantr/ftw">ftw</a>, пакет: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/ftw-git/">ftw-git</a></span><sup><small>AUR</small></sup>
</li>
<li><a rel="nofollow" class="external text" href="https://github.com/Unia/powersave">powersave</a></li>
<li>
<a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=180762">throttlectl</a>, из <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/throttlectl/">throttlectl</a></span><sup><small>AUR</small></sup>
</li>
</ul>
<p>Приведённое выше правило udev должно работать как задумано, но если ваши настройки питания не обновляются после пробуждения системы, добавьте такой скрипт в <code>/usr/lib/systemd/system-sleep/</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system-sleep/00powersave</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

case $1 in
    pre) /путь/к/вашему/скрипту false ;;
    post)
	if cat /sys/class/power_supply/AC0/online | grep 0 &gt; /dev/null 2&gt;&amp;1
	then
    		/путь/к/вашему/скрипту true
	else
    		/путь/к/вашему/скрипту false
	fi
    ;;
esac
exit 0
</pre>
<p>Не забудьте сделать его <a href="../ru/Help:Reading.html#%D0%A1%D0%B4%D0%B5%D0%BB%D0%B0%D1%82%D1%8C_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%BC" class="mw-redirect" title="Исполняемым">исполняемым</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Название AC0 может быть другим на вашем ноутбуке, измените его по необходимости.</div>
<h3>
<span id=".D0.92.D1.8B.D0.B2.D0.BE.D0.B4_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D0.BE.D0.B2_.D0.BF.D0.B8.D1.82.D0.B0.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Вывод_параметров_питания">Вывод параметров питания</span>
</h3>
<p>Этот скрипт выводит параметры питания и ряд других свойств для USB и PCI устройств. Обратите внимание, что для просмотра всех настроек необходимы права root.
</p>
<pre>#!/bin/bash

for i in $(find /sys/devices -name "bMaxPower")
do
	busdir=${i%/*}
	busnum=$(&lt;$busdir/busnum)
	devnum=$(&lt;$busdir/devnum)
	title=$(lsusb -s $busnum:$devnum)

	printf "\n\n+++ %s\n  -%s\n" "$title" "$busdir"

	for ff in $(find $busdir/power -type f ! -empty 2&gt;/dev/null)
	do
		v=$(cat $ff 2&gt;/dev/null|tr -d "\n")
		[[ ${#v} -gt 0 ]] &amp;&amp; echo -e " ${ff##*/}=$v";
		v=;
	done | sort -g;
done;

printf "\n\n\n+++ %s\n" "Kernel Modules"
for mod in $(lspci -k | sed -n '/in use:/s,^.*: ,,p' | sort -u)
do
	echo "+ $mod";
	systool -v -m $mod 2&gt; /dev/null | sed -n "/Parameters:/,/^$/p";
done</pre>
<h2>
<span id=".D0.A0.D0.B0.D0.B7.D1.80.D0.B5.D1.88.D0.B8.D1.82.D1.8C_.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F.D0.BC_.D0.B2.D1.8B.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B"></span><span class="mw-headline" id="Разрешить_пользователям_выключение_системы">Разрешить пользователям выключение системы</span>
</h2>
<h3>
<span id=".D0.A1.D0.BE.D0.B1.D1.8B.D1.82.D0.B8.D1.8F_.D0.BD.D0.B0.D0.B6.D0.B0.D1.82.D0.B8.D1.8F_.D0.BA.D0.BD.D0.BE.D0.BF.D0.BA.D0.B8_.D0.BF.D0.B8.D1.82.D0.B0.D0.BD.D0.B8.D1.8F_.D0.B8_.D0.B7.D0.B0.D0.BA.D1.80.D1.8B.D1.82.D0.B8.D1.8F_.D0.BA.D1.80.D1.8B.D1.88.D0.BA.D0.B8_.D0.BD.D0.BE.D1.83.D1.82.D0.B1.D1.83.D0.BA.D0.B0"></span><span class="mw-headline" id="События_нажатия_кнопки_питания_и_закрытия_крышки_ноутбука">События нажатия кнопки питания и закрытия крышки ноутбука</span>
</h3>
<p>События нажатия кнопок ждущего режима, выключения и режима гибернации, а также закрытия крышки ноутбука обрабатываются <i>logind</i>, как описано в разделе <a href="#%D0%A1%D0%BE%D0%B1%D1%8B%D1%82%D0%B8%D1%8F_ACPI">#События ACPI</a>.
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_systemd-logind"></span><span class="mw-headline" id="Используя_systemd-logind">Используя systemd-logind</span>
</h3>
<p>Если вы используете <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=polkit">polkit</a></span>, пользователи через локальный сеанс могут вызывать команды управления режимами электропитания, пока сеанс <a href="../ru/General_troubleshooting.html#%D0%A0%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%B5%D1%81%D1%81%D0%B8%D0%B8" title="General troubleshooting (Русский)">не будет нарушен</a>.
</p>
<p>Чтобы убедиться, что ваш сеанс активен, наберите:
</p>
<pre>$ loginctl show-session $XDG_SESSION_ID --property=Active
</pre>
<p>Пользователь может использовать команды <i>systemctl</i> в командной строке, или добавить их в меню среды рабочего стола:
</p>
<pre>$ systemctl poweroff
$ systemctl reboot
</pre>
<p>Другие команды, такие как <code>systemctl suspend</code> и <code>systemctl hibernate</code> также могут быть использованы. Смотрите раздел <i>System Commands</i> в справочном руководстве <span class="plainlinks archwiki-template-man" title="$ man 1 systemctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemctl.1">systemctl(1)</a></span>.
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_sudo"></span><span class="mw-headline" id="Используя_sudo">Используя sudo</span>
</h3>
<p><a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span> и <a href="../ru/Sudo.html#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA" title="Sudo (Русский)">добавьте</a> текущего пользователя в список <code>sudoers</code>. После этого, текущий пользователь сможет вызывать команды <code>sudo systemctl</code> (например, <code>sudo systemctl poweroff</code>, <code>sudo systemctl reboot</code>, <code>sudo systemctl suspend</code> и <code>sudo systemctl hibernate</code>) через sudo из командной строки. Смотрите раздел <i>System Commands</i> в справочном руководстве <span class="plainlinks archwiki-template-man" title="$ man 1 systemctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemctl.1">systemctl(1)</a></span>.
</p>
<h4>
<span id=".D0.9E.D0.B3.D1.80.D0.B0.D0.BD.D0.B8.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.B8.D0.B2.D0.B8.D0.BB.D0.B5.D0.B3.D0.B8.D0.B9_sudo"></span><span class="mw-headline" id="Ограничение_привилегий_sudo">Ограничение привилегий sudo</span>
</h4>
<p>Если пользователю следует разрешить только, например, использовать команду выключения, добавьте следующее в конец файла <code>/etc/sudoers</code>, используя команду <code>visudo</code>:
</p>
<pre><i>имя_пользователя</i> <i>имя_хоста</i>=NOPASSWD: /usr/bin/systemctl poweroff,/usr/bin/systemctl halt,/usr/bin/systemctl reboot
</pre>
<p>Имя хоста вы можете не указывать (или указать <code>localhost</code>). Теперь пользователь сможет выключить компьютер используя <code>sudo systemctl poweroff</code> или <code>sudo systemctl halt</code>, и перезагрузить его с помощью <code>sudo systemctl reboot</code> без ввода пароля. Удалите <code>NOPASSWD:</code>, если вы хотите, чтобы у пользователя запрашивался его пароль перед продолжением.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.thinkwiki.org/wiki/How_to_reduce_power_consumption">ThinkWiki:How to reduce power consumption</a></li>
<li><a rel="nofollow" class="external text" href="https://ivanvojtko.blogspot.sk/2016/04/how-to-get-longer-battery-life-on-linux.html">How to get longer battery life on Linux</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Power_management.html" title="Category:Power management (Русский)">Power management (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Power_management_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=818595">https://wiki.archlinux.org/index.php?title=Power_management_(Русский)&amp;oldid=818595</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 12 October 2024, at 16:44.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
