<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>zram (Magyar) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Zram_Magyar rootpage-Zram_Magyar skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Használás_swap_területként" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Haszn%C3%A1l%C3%A1s_swap_ter%C3%BCletk%C3%A9nt">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Használás swap területként</span>
			</div>
		</a>
		
			<button aria-controls="toc-Használás_swap_területként-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Használás swap területként subsection</span>
			</button>
		
		<ul id="toc-Használás_swap_területként-sublist" class="vector-toc-list">
			<li id="toc-Manually" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Manually">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Manually</span>
				</div>
			</a>
			
			<ul id="toc-Manually-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_a_udev_rule" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_a_udev_rule">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Using a udev rule</span>
				</div>
			</a>
			
			<ul id="toc-Using_a_udev_rule-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_zram-generator" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_zram-generator">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Using zram-generator</span>
				</div>
			</a>
			
			<ul id="toc-Using_zram-generator-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_zramswap" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_zramswap">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Using zramswap</span>
				</div>
			</a>
			
			<ul id="toc-Using_zramswap-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Tips_and_tricks" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tips_and_tricks">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Tips and tricks</span>
			</div>
		</a>
		
			<button aria-controls="toc-Tips_and_tricks-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Tips and tricks subsection</span>
			</button>
		
		<ul id="toc-Tips_and_tricks-sublist" class="vector-toc-list">
			<li id="toc-Checking_zram_statistics" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Checking_zram_statistics">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Checking zram statistics</span>
				</div>
			</a>
			
			<ul id="toc-Checking_zram_statistics-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Multiple_zram_devices" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Multiple_zram_devices">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Multiple zram devices</span>
				</div>
			</a>
			
			<ul id="toc-Multiple_zram_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Optimizing_swap_on_zram" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Optimizing_swap_on_zram">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Optimizing swap on zram</span>
				</div>
			</a>
			
			<ul id="toc-Optimizing_swap_on_zram-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Enabling_a_backing_device_for_a_zram_block" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enabling_a_backing_device_for_a_zram_block">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Enabling a backing device for a zram block</span>
				</div>
			</a>
			
			<ul id="toc-Enabling_a_backing_device_for_a_zram_block-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_zram_for_non-swap_purposes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_zram_for_non-swap_purposes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>Using zram for non-swap purposes</span>
				</div>
			</a>
			
			<ul id="toc-Using_zram_for_non-swap_purposes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-További_olvasnivaló_a_témában" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Tov%C3%A1bbi_olvasnival%C3%B3_a_t%C3%A9m%C3%A1ban">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>További olvasnivaló a témában</span>
			</div>
		</a>
		
		<ul id="toc-További_olvasnivaló_a_témában-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">zram (Magyar)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Zram.html" title="Zram – English" lang="en" hreflang="en" data-title="Zram" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/zram" title="zram – 日本語" lang="ja" hreflang="ja" data-title="zram" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Zram.html" title="Zram – русский" lang="ru" hreflang="ru" data-title="Zram" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Zram" title="Zram – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Zram" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="hu" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Swap.html" title="Swap">Swap</a></li>
<li><a href="../en/Zswap.html" title="Zswap">zswap</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/blockdev/zram.html">zram</a>, formerly called compcache, is a Linux kernel module for creating a compressed block device in RAM, i.e. a RAM disk with on-the-fly disk compression. The block device created with zram can then be used for swap or as a general-purpose RAM disk. The two most common uses for zram are for the storage of temporary files (<code>/tmp</code>) and as a swap device. Initially, zram had only the latter function, hence the original name "compcache" ("compressed cache").
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Használás_swap_területként">
<span id="Haszn.C3.A1l.C3.A1s_swap_ter.C3.BCletk.C3.A9nt"></span>Használás swap területként</h2></div>
<p>Initially the created zram block device does not reserve or use any RAM. Only as files need or want to be swapped out, they will be compressed and moved into the zram block device. The zram block device will then dynamically grow or shrink as required. 
</p>
<p>Even when assuming that zstd only achieves a conservative 1:2 compression ratio (real world data shows a common ratio of 1:3), zram will offer the advantage of being able to store more content in RAM than without memory compression. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> 
<ul>
<li>When configuring zram, the size of the zram device controls the maximum uncompressed amount of data it can store, <i>not</i> the maximum compressed size. You can configure the zram's size to be equal to or even greater than your system's physical RAM capacity, as long as the compressed size on physical RAM will not exceed your system's physical RAM capacity.</li>
<li>If the related <a href="../en/Zswap.html" title="Zswap">zswap</a> kernel feature remains enabled, it will prevent zram from being used effectively. This is because zswap functions as a swap cache in front of zram, intercepting and compressing evicted memory pages before they can reach zram. Despite the output of <span class="plainlinks archwiki-template-man" title="$ man 8 zramctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zramctl.8">zramctl(8)</a></span>, most of zswap is unused in this circumstance. Therefore, it's recommended to permanently <a href="../en/Zswap.html#Toggling_zswap" title="Zswap">disable zswap</a> using the kernel parameter or sysfs setting before starting.</li>
<li>Hibernating to swap on zram is not supported, even when zram is configured with a backing device on permanent storage. <i>logind</i> will protect against trying to hibernate to a swap space on zram.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> You can specify the maximum amount of memory ZRAM can use to store the compressed data with the <code>mem_limit</code> parameter.</div>
<p>A simple size to start with is half of the total system memory.
</p>
<div class="mw-heading mw-heading3"><h3 id="Manually">Manually</h3></div>
<p>To set up one zstd compressed zram device with half the system memory capacity and a higher-than-normal priority (only for the current session):
</p>
<pre># modprobe zram
# zramctl /dev/zram0 --algorithm zstd --size "$(($(grep -Po 'MemTotal:\s*\K\d+' /proc/meminfo)/2))KiB"
# mkswap -U clear /dev/zram0
# swapon --discard --priority 100 /dev/zram0
</pre>
<p>To disable it again, either reboot or run:
</p>
<pre># swapoff /dev/zram0
# modprobe -r zram
</pre>
<p>A detailed explanation of all steps, options and potential problems is provided in the <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/blockdev/zram.html">official documentation of the zram module</a>.
</p>
<p>For a permanent solution, use a method from one of the following sections.
</p>
<div class="mw-heading mw-heading3"><h3 id="Using_a_udev_rule">Using a udev rule</h3></div>
<p>The example below describes how to set up swap on zram automatically at boot with a single udev rule. No extra package should be needed to make this work.
</p>
<p>Explicitly <a href="../en/Kernel_module.html#Automatic_module_loading" class="mw-redirect" title="Load the module at boot">load the module at boot</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/zram.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zram
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning</strong> Running commands such as mkswap inside udev rules is discouraged as it can lead to race conditions. Consider running mkswap on the zram device later in the boot process, but before swapping it on.</div>
<p>Create the following <a href="../en/Udev.html#Introduction_to_udev_rules" class="mw-redirect" title="Udev rule">udev rule</a> adjusting the <code>disksize</code> attribute as necessary: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-zram.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", KERNEL=="zram0", ATTR{initstate}=="0", ATTR{comp_algorithm}="zstd", ATTR{disksize}="4G", RUN="/usr/bin/mkswap -U clear %N", TAG+="systemd"</pre>
<p>Add <code>/dev/zram</code> to your <a href="../en/Fstab.html" title="Fstab">fstab</a> with a higher than default priority:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/zram0 none swap defaults,discard,pri=100 0 0</pre>
<div class="mw-heading mw-heading3"><h3 id="Using_zram-generator">Using zram-generator</h3></div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zram-generator">zram-generator</a></span> provides <code>systemd-zram-setup@zram<i>N</i>.service</code> units to automatically initialize zram devices without users needing to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable/start">enable/start</a> the template or its instances. See <span class="plainlinks archwiki-template-man" title="$ man 8 zram-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zram-generator.8">zram-generator(8)</a></span>.
</p>
<p>To use it, <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zram-generator">zram-generator</a></span>, and create <code>/etc/systemd/zram-generator.conf</code> with the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/zram-generator.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[zram0]
zram-size = min(ram / 2, 4096)
compression-algorithm = zstd</pre>
<p><code>zram-size</code> is the size (in <code>MiB</code>) of zram device, you can use <code>ram</code> to represent the total memory.
</p>
<p><code>compression-algorithm</code> specifies the algorithm used to compress in zram device. <code>cat /sys/block/zram0/comp_algorithm</code> gives the available compression algorithm (as well as the current one included in brackets).
See <span class="plainlinks archwiki-template-man" title="$ man 5 zram-generator.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zram-generator.conf.5">zram-generator.conf(5)</a></span>.
</p>
<p>Then run <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Daemon-reload">daemon-reload</a>, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> your configured <code>systemd-zram-setup@zram<i>N</i>.service</code> instance (<code><i>N</i></code> matching the numerical instance-ID, in the example it is <code>systemd-zram-setup@zram0.service</code>). 
</p>
<p>You can <a href="../en/Swap.html#Swap_space" title="Swap">check the swap status</a> of your configured <code>/dev/zram<i>N</i></code> device(s) by reading the <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Unit status">unit status</a> of your <code>systemd-zram-setup@zram<i>N</i>.service</code> instance(s), by using <span class="plainlinks archwiki-template-man" title="$ man 8 zramctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zramctl.8">zramctl(8)</a></span>, or by using <span class="plainlinks archwiki-template-man" title="$ man 8 swapon"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/swapon.8">swapon(8)</a></span>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Using_zramswap">Using zramswap</h3></div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zramswap/">zramswap</a></span><sup><small>AUR</small></sup> provides an automated script for setting up a swap with a higher priority and a default size of 20% of the RAM size of your system. To do this automatically on every boot, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>zramswap.service</code>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Tips_and_tricks">Tips and tricks</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Checking_zram_statistics">Checking zram statistics</h3></div>
<p>Use <span class="plainlinks archwiki-template-man" title="$ man 8 zramctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zramctl.8">zramctl(8)</a></span>. Example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ zramctl</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NAME       ALGORITHM DISKSIZE  DATA  COMPR  TOTAL STREAMS MOUNTPOINT
/dev/zram0 zstd           32G  1.9G 318.6M 424.9M      16 [SWAP]
</pre>
<ul>
<li>DISKSIZE = 32G: this zram device will store up to 32 GiB of uncompressed data.</li>
<li>DATA = 1.9G: currently, 1.9 GiB (uncompressed) of data is being stored in this zram device</li>
<li>COMPR = 318.6M: the 1.9 GiB uncompressed data was compressed to 318.6 MiB</li>
<li>TOTAL = 424.9M: including metadata, the 1.9 GiB of uncompressed data is using up 424.9 MiB of physical RAM</li>
</ul>
<div class="mw-heading mw-heading3"><h3 id="Multiple_zram_devices">Multiple zram devices</h3></div>
<p>By default, loading the <code>zram</code> module creates a single <code>/dev/zram0</code> device.
</p>
<p>If you need more than one <code>/dev/zram</code> device, specify the amount using the <code>num_devices</code> <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Kernel module parameter">kernel module parameter</a> or <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/blockdev/zram.html#add-remove-zram-devices">add them as needed afterwards</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Optimizing_swap_on_zram">Optimizing swap on zram</h3></div>
<p>Since zram behaves differently than disk swap, we can configure the system's swap to take full potential of the zram advantages:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/99-vm-zram-parameters.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.swappiness = 180
vm.watermark_boost_factor = 0
vm.watermark_scale_factor = 125
vm.page-cluster = 0</pre>
<p>Explanation of the configuration:
</p>
<p>These values are <a rel="nofollow" class="external text" href="https://github.com/pop-os/default-settings/pull/163">what Pop!_OS uses</a>. That Pop!_OS GitHub pull request also links to <a rel="nofollow" class="external text" href="https://old.reddit.com/r/Fedora/comments/mzun99/new_zram_tuning_benchmarks/">some testing done by users on r/Fedora</a>, which determined that <code>vm.page-cluster = 0</code> is ideal. They also found a high swappiness value to be ideal, which matches what is suggested by <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/sysctl/vm.html">the kernel docs</a>:
</p>
<dl>
<dd>The default value is 60.</dd>
<dd>For in-memory swap, like zram or zswap, as well as hybrid setups that have swap on faster devices than the filesystem, values beyond 100 can be considered. For example, if the random IO against the swap device is on average 2x faster than IO from the filesystem, swappiness should be 133 (x + 2x = 200, 2x = 133.33).</dd>
</dl>
<p>On a system with a hard drive, random I/O against the in-memory device would be orders of magnitude faster than I/O against the filesystem, so swappiness should be ~200. Even on a system with a fast SSD, a high swappiness value may be ideal.
</p>
<div class="mw-heading mw-heading3"><h3 id="Enabling_a_backing_device_for_a_zram_block">Enabling a backing device for a zram block</h3></div>
<p>zram can be configured to push incompressible pages to a specified block device:
</p>
<p>To add a backing device manually:
</p>
<pre># echo /dev/<i>sdX</i> &gt; /sys/block/zram0/backing_dev
</pre>
<p>To add a backing device to your zram block device using <i>zram-generator</i>, update <code>/etc/systemd/zram-generator.conf</code> with the following under your <code>[zram<i>X</i>]</code> device you want the backing device added to:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/zram-generator.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">writeback-device=/dev/disk/by-partuuid/<i>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</i></pre>
<p>Incompressible pages can then be pushed to the block device by executing:
</p>
<pre># echo huge &gt; /sys/block/zramX/writeback
</pre>
<div class="mw-heading mw-heading3"><h3 id="Using_zram_for_non-swap_purposes">Using zram for non-swap purposes</h3></div>
<p>zram can also be used as a generic RAM-backed block device, e.g. a <code>/dev/ram</code> with less physical memory usage, but slightly lower performance. However there are some caveats:
</p>
<ul>
<li>There is no partition table support (no automatic creation of <code>/dev/zram<i>x</i>p<i>y</i></code>).</li>
<li>The block size is fixed to 4 kiB.</li>
</ul>
<p>The obvious way around this is to stack a loop device on-top the zram, using <i>losetup</i>, specifying the desired block size using the <code>-b</code> option and the <code>-P</code> option to process partition tables and automatic creation of the partition loop devices.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># zramctl -f -s <i>N</i>G</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/zram<i>x</i></pre>
<p>Copy the disk image to the new <code>/dev/zram<i>x</i></code>, then create a loop device. If the disk image has a partition table, the block size of the loop device must match the block size used by the partition table, which is typically 512 or 4096 bytes.
</p>
<pre># losetup -f -b 512 -P /dev/zram<i>x</i>
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># ls /dev/loop*</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/loop0 /dev/loop0p1 /dev/loop0p2</pre>
<pre># mount /dev/loop0p1 /mnt/boot
# mount /dev/loop0p2 /mnt/root
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note</strong> 
<ul>
<li>The zram device numbering depends on pre-existing zram devices and its size should be enough to hold the disk image.</li>
<li>The output from <code>ls /dev/loop*</code> depends on the contents of the disk image.</li>
</ul>
</div>
<div class="mw-heading mw-heading2"><h2 id="További_olvasnivaló_a_témában">
<span id="Tov.C3.A1bbi_olvasnival.C3.B3_a_t.C3.A9m.C3.A1ban"></span>További olvasnivaló a témában</h2></div>
<ul>
<li><a href="https://en.wikipedia.org/wiki/zram" class="extiw" title="wikipedia:zram">Wikipedia:zram</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/pop-os/default-settings/pull/163">https://github.com/pop-os/default-settings/pull/163</a></li>
<li><a rel="nofollow" class="external free" href="https://www.reddit.com/r/pop_os/comments/znh9n6/help_test_a_zram_optimization_for_pop_os/">https://www.reddit.com/r/pop_os/comments/znh9n6/help_test_a_zram_optimization_for_pop_os/</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../hu/Category:Kernel.html" title="Category:Kernel (Magyar)">Kernel (Magyar)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Zram_(Magyar)&amp;oldid=838561">https://wiki.archlinux.org/index.php?title=Zram_(Magyar)&amp;oldid=838561</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 June 2025, at 16:51.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true">zram (Magyar)</div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
