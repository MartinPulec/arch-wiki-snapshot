<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dm-crypt (Español)/System configuration (Español) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dm-crypt_Español_System_configuration_Español rootpage-Dm-crypt_Español skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-mkinitcpio" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#mkinitcpio">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>mkinitcpio</div>
		</a>
		
			<button aria-controls="toc-mkinitcpio-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle mkinitcpio subsection</span>
			</button>
		
		<ul id="toc-mkinitcpio-sublist" class="vector-toc-list">
			<li id="toc-Ejemplos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ejemplos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Ejemplos</div>
			</a>
			
			<ul id="toc-Ejemplos-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Cargador_de_arranque" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Cargador_de_arranque">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Cargador de arranque</div>
		</a>
		
			<button aria-controls="toc-Cargador_de_arranque-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Cargador de arranque subsection</span>
			</button>
		
		<ul id="toc-Cargador_de_arranque-sublist" class="vector-toc-list">
			<li id="toc-Parámetros_del_Kernel" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Par%C3%A1metros_del_Kernel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Parámetros del Kernel</div>
			</a>
			
			<ul id="toc-Parámetros_del_Kernel-sublist" class="vector-toc-list">
				<li id="toc-root" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#root">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>root</div>
			</a>
			
			<ul id="toc-root-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-resume" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#resume">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>resume</div>
			</a>
			
			<ul id="toc-resume-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Utilizar_el_hook_encrypt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizar_el_hook_encrypt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Utilizar el hook encrypt</div>
			</a>
			
			<ul id="toc-Utilizar_el_hook_encrypt-sublist" class="vector-toc-list">
				<li id="toc-cryptdevice" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#cryptdevice">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>cryptdevice</div>
			</a>
			
			<ul id="toc-cryptdevice-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-cryptkey" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#cryptkey">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2</span>cryptkey</div>
			</a>
			
			<ul id="toc-cryptkey-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-crypto" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#crypto">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.3</span>crypto</div>
			</a>
			
			<ul id="toc-crypto-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Utilizar_el_hook_sd-encrypt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizar_el_hook_sd-encrypt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Utilizar el hook sd-encrypt</div>
			</a>
			
			<ul id="toc-Utilizar_el_hook_sd-encrypt-sublist" class="vector-toc-list">
				<li id="toc-rd.luks.uuid" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#rd.luks.uuid">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.1</span>rd.luks.uuid</div>
			</a>
			
			<ul id="toc-rd.luks.uuid-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-rd.luks.name" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#rd.luks.name">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.2</span>rd.luks.name</div>
			</a>
			
			<ul id="toc-rd.luks.name-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-rd.luks.options" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#rd.luks.options">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.3</span>rd.luks.options</div>
			</a>
			
			<ul id="toc-rd.luks.options-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-rd.luks.key" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#rd.luks.key">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.4</span>rd.luks.key</div>
			</a>
			
			<ul id="toc-rd.luks.key-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tiempo_de_espera_(«timeout»)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Tiempo_de_espera_(%C2%ABtimeout%C2%BB)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.5</span>Tiempo de espera («<i>timeout</i>»)</div>
			</a>
			
			<ul id="toc-Tiempo_de_espera_(«timeout»)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-crypttab" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#crypttab">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>crypttab</div>
		</a>
		
			<button aria-controls="toc-crypttab-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle crypttab subsection</span>
			</button>
		
		<ul id="toc-crypttab-sublist" class="vector-toc-list">
			<li id="toc-Montaje_en_el_momento_del_arranque" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Montaje_en_el_momento_del_arranque">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Montaje en el momento del arranque</div>
			</a>
			
			<ul id="toc-Montaje_en_el_momento_del_arranque-sublist" class="vector-toc-list">
				<li id="toc-Desbloquear_con_archivo_de_claves" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Desbloquear_con_archivo_de_claves">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.1</span>Desbloquear con archivo de claves</div>
			</a>
			
			<ul id="toc-Desbloquear_con_archivo_de_claves-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Montaje_de_un_dispositivo_de_bloque_apilado" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Montaje_de_un_dispositivo_de_bloque_apilado">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.2</span>Montaje de un dispositivo de bloque apilado</div>
			</a>
			
			<ul id="toc-Montaje_de_un_dispositivo_de_bloque_apilado-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Montaje_bajo_demanda" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Montaje_bajo_demanda">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Montaje bajo demanda</div>
			</a>
			
			<ul id="toc-Montaje_bajo_demanda-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solución_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Soluci%C3%B3n_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Solución de problemas</div>
		</a>
		
			<button aria-controls="toc-Solución_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solución de problemas subsection</span>
			</button>
		
		<ul id="toc-Solución_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-El_espacio_del_sistema_en_el_arranque/solicitud_de_contraseña_no_se_muestra" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#El_espacio_del_sistema_en_el_arranque/solicitud_de_contrase%C3%B1a_no_se_muestra">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>El espacio del sistema en el arranque/solicitud de contraseña no se muestra</div>
			</a>
			
			<ul id="toc-El_espacio_del_sistema_en_el_arranque/solicitud_de_contraseña_no_se_muestra-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">dm-crypt (Español)/System configuration (Español)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../../en/Dm-crypt/System_configuration.html" title="Dm-crypt/System configuration – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/dm-crypt/%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E8%A8%AD%E5%AE%9A" title="dm-crypt/システム設定 – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../../pt/Dm-crypt/System_configuration.html" title="Dm-crypt (Português)/System configuration – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../es/Dm-crypt.html" title="Dm-crypt (Español)">Dm-crypt (Español)</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="es" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">Esta traducción de <a href="../../en/Dm-crypt/System_configuration.html" title="Dm-crypt/System configuration">Dm-crypt/System configuration</a> fue revisada el <b>2018-11-22</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Dm-crypt/System_configuration&amp;diff=0&amp;oldid=555873">cambios</a> puede <a href="../../es/ArchWiki:Translation_Team/Contributing.html" title="ArchWiki:Translation Team (Español)/Contributing (Español)">actualizarla</a> o avisar al <a href="../../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Si necesita desbloquear de forma remota la raíz u otros sistemas de archivos de arranque temprano (máquinas sin encabezados, servidores distantes ...), siga las instrucciones específicas de <a href="../../es/Dm-crypt/Specialties.html#Desbloqueo_remoto_de_la_partici%C3%B3n_(u_otro_volumen)_ra%C3%ADz" class="mw-redirect" title="Dm-crypt/Specialties (Español)">dm-crypt/Specialties (Español)#Desbloqueo remoto de la partición (u otro volumen) raíz</a>.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="mkinitcpio">mkinitcpio</span></h2>
<p>Dependiendo de los escenarios particulares, tendrá que activarse un conjunto de los siguientes hooks de <a href="../../en/Mkinitcpio.html" class="mw-redirect" title="Mkinitcpio (Español)">mkinitcpio (Español)</a>:
</p>
<table class="wikitable">
<tbody>
<tr>
<th>busybox</th>
<th>systemd</th>
<th>Caso de uso
</th>
</tr>
<tr>
<td style="text-align: center;white-space:nowrap;">
<code>encrypt</code>
</td>
<td style="text-align: center;white-space:nowrap;">
<code>sd-encrypt</code>
</td>
<td>Siempre necesario cuando se cifra la partición raíz, o una partición que necesita ser montada <i>antes</i> de la raíz. No es necesario en todos los demás casos, ya que los scripts de inicialización del sistema como <code>/etc/crypttab</code> se encargan de desbloquear otras particiones cifradas. Este enlace debe colocarse <i>después</i> del hook <code>udev</code> o <code>systemd</code>.
</td>
</tr>
<tr>
<td colspan="2" style="text-align: center;white-space:nowrap;">
<code>keyboard</code>
</td>
<td>Necesario para hacer que los teclados funcionen en el espacio temprano del usuario.
</td>
</tr>
<tr>
<td style="text-align: center;white-space:nowrap;">
<code>keymap</code>
</td>
<td rowspan="2" style="text-align: center;white-space:nowrap;">
<code>sd-vconsole</code>
</td>
<td>Proporciona soporte para mapas de teclas no estadounidenses para escribir contraseñas de cifrado; debe colocarse <i>antes</i> del hook <code>encrypt</code>. Configure su mapa de teclas en <code>/etc/vconsole.conf</code>, vea <a href="../../es/Linux_console/Keyboard_configuration.html#Configuraci%C3%B3n_persistente" class="mw-redirect" title="Keyboard configuration in console (Español)">Keyboard configuration in console (Español)#Configuración persistente</a>.
</td>
</tr>
<tr>
<td style="text-align: center;white-space:nowrap;">
<code>consolefont</code>
</td>
<td>Carga un titpo de letra de consola alternativo en el espacio temprano del usuario. Configure su tipo de letra en <code>/etc/vconsole.conf</code>, vea <a href="../../en/Linux_console.html#Persistent_configuration" title="Linux console">Linux console#Persistent configuration</a>.
</td>
</tr>
</tbody>
</table>
<p><a href="../../en/Mkinitcpio.html#Hooks_m%C3%A1s_comunes" class="mw-redirect" title="Mkinitcpio (Español)">Otros hooks</a><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">enlace roto</a>: sección no válida]</sup> necesarios deben quedar limpios en otros pasos manuales seguidos durante la instalación del sistema.
</p>
<p>Recuerde <a href="../../en/Mkinitcpio.html#Creaci%C3%B3n_de_la_imagen_y_activaci%C3%B3n" class="mw-redirect" title="Mkinitcpio (Español)">regenerar initramfs</a><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">enlace roto</a>: sección no válida]</sup> después de guardar los cambios.
</p>
<h3><span class="mw-headline" id="Ejemplos">Ejemplos</span></h3>
<p>He aquí una configuración típica del archivo <code>/etc/mkinitcpio.conf</code> utilizando el hook <code>encrypt</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
HOOKS=(base udev autodetect keyboard keymap consolefont modconf block encrypt lvm2 filesystems fsck)
...</pre>
<p>Aquí una configuración con initramfs basada ​​en systemd utilizando el hook <code>sd-encrypt</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
HOOKS=(base systemd autodetect keyboard sd-vconsole modconf block sd-encrypt sd-lvm2 filesystems fsck)
...</pre>
<h2><span class="mw-headline" id="Cargador_de_arranque">Cargador de arranque</span></h2>
<p>Para activar el arranque de una partición raíz cifrada, es necesario configurar un conjunto de los siguientes parámetros del kernel. Consulte los <a href="../../es/Kernel_parameters.html" title="Kernel parameters (Español)">parámetros del kernel</a> para obtener instrucciones específicas para su <a href="../../es/Arch_boot_process.html#Gestor_de_arranque" class="mw-redirect" title="Boot loader (Español)">cargador de arranque</a>.
</p>
<p>Por ejemplo, si utiliza <a href="../../es/GRUB.html#/boot_cifrado" title="GRUB (Español)">GRUB</a>, los parámetros relevantes se añadirán a <code>/etc/default/grub</code> antes de <a href="../../es/GRUB.html#Generar_el_archivo_de_configuraci%C3%B3n_principal" title="GRUB (Español)">generar el archivo de configuración principal</a>. Vea también <a href="../../es/GRUB.html#Advertencias_cuando_se_instala_en_entorno_chroot" title="GRUB (Español)">GRUB (Español)#Advertencias cuando se instala en entorno chroot</a> como otro punto a tener en cuenta al instalar el cargador GRUB.
</p>
<p>Los parámetros del kernel que necesita especificar dependen de si está utilizando el hook <code>encrypt</code> o  <code>sd-encrypt</code>.
</p>
<h3>
<span id="Par.C3.A1metros_del_Kernel"></span><span class="mw-headline" id="Parámetros_del_Kernel">Parámetros del Kernel</span>
</h3>
<p>Los <a href="../../es/Kernel_parameters.html" title="Kernel parameters (Español)">parámetros del kernel</a> como <code>root</code> y <code>resume</code> se especifican de la misma manera que los hooks <code>encrypt</code> y <code>sd-encrypt</code>.
</p>
<h4><span class="mw-headline" id="root">root</span></h4>
<p>El parámetro <code>root=</code> especifica el <code><i>dispositivo</i></code> del sistema de archivos raíz real (descifrado):
</p>
<pre>root=<i>dispositivo</i>
</pre>
<ul>
<li>Si el sistema de archivos está formateado directamente en el dispositivo descifrado, este será <code>/dev/mapper/<i>nombre_del_dispositivo_mapeado</i></code>.</li>
<li>Si un LVM se activa primero y contiene un <a href="../../en/Dm-crypt/Encrypting_an_entire_system.html#LUKS_on_LVM" title="Dm-crypt/Encrypting an entire system">volumen lógico raíz cifrado</a>, el formato anterior se aplica igual.</li>
<li>Si el sistema de archivos raíz está contenido en un volumen lógico de un <a href="../../en/Dm-crypt/Encrypting_an_entire_system.html#LVM_on_LUKS" class="mw-redirect" title="Encrypted LVM">LVM cifrado</a>, el mapeador de dispositivos para él vendrá formulado de forma general como <code>root=/dev/<i>grupo de volúmenes</i>/<i>volumen lógico</i></code>.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> No es necesario especificar este parámetro manualmente cuando utiliza <a href="../../es/GRUB.html" title="GRUB (Español)">GRUB (Español)</a> y se genera <code>grub.cfg</code> con <i>grub-mkconfig</i>. Al ejecutar el script <i>grub-mkconfig</i>, este determinará el UUID correcto del sistema de archivos descifrado y lo añadirá al archivo <code>grub.cfg</code> automáticamente.</div>
<h4><span class="mw-headline" id="resume">resume</span></h4>
<pre>resume=<i>dispositivo</i>
</pre>
<ul><li>
<code><i>dispositivo</i></code> es el dispositivo del sistema de archivos descifrado (espacio de intercambio) utilizado para <a href="../../en/Power_management/Suspend_and_hibernate.html#Hibernation" title="Power management/Suspend and hibernate">suspender en disco</a>. Si el espacio de intercambio está en una partición separada, lo estará en el formato <code>/dev/mapper/swap</code>. Véase también <a href="../../es/Dm-crypt/Swap_encryption.html" class="mw-redirect" title="Dm-crypt/Swap encryption (Español)">dm-crypt/Swap encryption (Español)</a>.</li></ul>
<h3><span class="mw-headline" id="Utilizar_el_hook_encrypt">Utilizar el hook encrypt</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> comparado con el hook <a href="../../en/Dm-crypt/System_configuration.html#Using_systemd-cryptsetup-generator" class="mw-redirect" title="Sd-encrypt">sd-encrypt</a>, <code>encrypt</code> tiene algunas limitaciones. No es compatible con:
<ul>
<li>desbloquear <a href="../../en/Dm-crypt/Specialties.html#The_encrypt_hook_and_multiple_disks" title="Dm-crypt/Specialties">varios discos cifrados</a> (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/23182">FS#23182</a>). Solo <b>un</b> dispositivo se puede desbloquear en initramfs;</li>
<li>utilizar un <a href="../../en/Dm-crypt/Specialties.html#Encrypted_system_using_a_detached_LUKS_header" title="Dm-crypt/Specialties">encabezado LUKS separado</a> (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/42851">FS#42851</a>).</li>
</ul>
</div>
<h4><span class="mw-headline" id="cryptdevice">cryptdevice</span></h4>
<p>Este parámetro hará que el sistema solicite la contraseña para desbloquear el dispositivo que contiene la raíz cifrada en un <a href="https://en.wikipedia.org/wiki/es:Arranque_en_fr%C3%ADo" class="extiw" title="wikipedia:es:Arranque en frío">arranque en frío</a>. Es analizado mediante el hook <code>encrypt</code> para identificar qué dispositivo contiene el sistema cifrado:
</p>
<pre>cryptdevice=<i>dispositivo</i>:<i>nombre del dipositivo mapeado</i>
</pre>
<ul>
<li>
<code><i>dispositivo</i></code> es la ruta al dispositivo que contiene al dispositivo cifrado. Se recomienda el uso de <a href="../../es/Persistent_block_device_naming.html" title="Persistent block device naming (Español)">nombres de dispositivos de bloques persistentes</a>.</li>
<li>
<code><i> nombre del dipositivo mapeado</i></code> es el nombre del <b>d</b>ispositivo - <b>m</b>apeado dado al dispositivo después de descifrarlo, que estará disponible como <code>/dev/mapper/<i>nombre del dipositivo mapeado</i></code>.</li>
<li>Si un LVM contiene el volúmen <a href="../../es/Dm-crypt/Encrypting_an_entire_system.html#LUKS_sobre_LVM" class="mw-redirect" title="Dm-crypt/Encrypting an entire system (Español)">root cifrado</a>, el LVM se activa primero y el grupo de volúmenes que contiene el volumen lógico de la raíz cifrada sirve como <i>dispositivo</i>. A continuación, lo que sigue al grupo de volúmenes le corresponderá la raíz mapeada. El parámetro sigue el formato siguiente: <code>cryptdevice=<i>/dev/nombre_del_grupo_de_volúmenes/nombre_del_volumen_lógico</i>:<i>nombre_del_dispositivo_mapeado</i></code>
</li>
</ul>
<h4><span class="mw-headline" id="cryptkey">cryptkey</span></h4>
<p>Este parámetro especifica la ubicación de un archivo de claves y es requerido por el hook <code><i>encrypt</i></code> para leer dicho archivo de claves para desbloquear <code><i>cryptdevice</i></code> (a menos que haya una clave en la ubicación por defecto, ver más abajo). Puede tener tres conjuntos de parámetros, dependiendo de si el archivo de claves existe como un archivo en un dispositivo en particular, como un flujo de bits que comienza en una ubicación específica o como un archivo en initramfs.
</p>
<p>Para un archivo en un dispositivo, el formato es:
</p>
<pre>cryptkey=<i>dispositivo</i>:<i>tipo de sistema de archivos</i>:<i>ruta</i>
</pre>
<ul>
<li>
<code><i>dispositivo</i></code> es el dispositivo de bloque sin formato donde existe la clave.</li>
<li>
<code><i>tipo de sistema de archivos</i></code> es el tipo de sistema de archivos del <code><i>dispositivo</i></code> (o auto).</li>
<li>
<code><i>ruta</i></code> es la ruta absoluta del archivo de claves dentro del dispositivo.</li>
</ul>
<p>Ejemplo: <code>cryptkey=/dev/usbstick:vfat:/secretkey</code>
</p>
<p>Para un flujo de bits en un dispositivo, la ubicación de la clave se especifica con el formato siguiente:
</p>
<pre>cryptkey=<i>dispositivo</i>:<i>desplazamiento</i>:<i>tamaño</i> 
</pre>
<p>donde el desplazamiento («<a href="https://en.wikipedia.org/wiki/es:Offset_(inform%C3%A1tica)" class="extiw" title="wikipedia:es:Offset (informática)">offset</a>») y el tamaño («<b>size</b>») están en bytes. Ejemplo: <code>cryptkey=/dev/sdZ:0:512</code> lee un archivo de claves de 512 bytes desde el principio del dispositivo.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Si la ruta del dispositivo al que desea acceder contiene el carácter <code>:</code>, se debe soslayar con una barra invertida <code>\</code>. En ese caso, el parámetro cryptkey sería el siguiente: <code>cryptkey=/dev/disk/by-id/usb-123456-0\:0:0:512</code> para una clave en un usb con el id <code>usb-123456-0:0</code>.</div>
<p>Para un archivo <a href="../../en/Mkinitcpio.html#BINARIOS_y_ARCHIVOS" class="mw-redirect" title="Mkinitcpio (Español)">incrustado</a><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">enlace roto</a>: sección no válida]</sup> en initramfs el formato sería <a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/packaging/packages/cryptsetup/-/blob/main/hooks-encrypt#L14">[1]</a>:
</p>
<pre>cryptkey=rootfs:<i>ruta'</i>
</pre>
<p>Ejemplo: <code>cryptkey=rootfs:/secretkey</code>
</p>
<p>También tenga en cuenta que si <code>cryptkey</code> no se especifica, por defecto es <code>/crypto_keyfile.bin</code> (en initramfs).<a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/packaging/packages/cryptsetup/-/blob/main/hooks-encrypt#L8">[2]</a>
</p>
<p>Véase también <a href="../../es/Dm-crypt/Device_encryption.html#Archivos_de_claves" class="mw-redirect" title="Dm-crypt/Device encryption (Español)">dm-crypt/Device encryption (Español)#Archivos de claves</a>.
</p>
<h4><span class="mw-headline" id="crypto">crypto</span></h4>
<p>Este parámetro es específico para pasar las opciones de la modalidad plain de <i>dm-crypt</i> al hook <i>encrypt</i>.
</p>
<p>Toma el formato siguiente:
</p>
<pre>crypto=&lt;hash&gt;:&lt;algoritmo de cifrado&gt;:&lt;tamaño clave&gt;:&lt;desplazamiento&gt;:&lt;salto&gt;
</pre>
<p>Los argumentos se relacionan directamente con las opciones de <i>cryptsetup</i>. Consulte <a href="../../es/Dm-crypt/Device_encryption.html#Opciones_de_cifrado_para_la_modalidad_plain" class="mw-redirect" title="Dm-crypt/Device encryption (Español)">dm-crypt/Device encryption (Español)#Opciones de cifrado para la modalidad plain</a>
</p>
<p>Para un disco cifrado con solo las opciones predeterminadas de <i>plain</i>, se deben especificar los argumentos de <code>crypto</code>, pero cada entrada se puede dejar en blanco:
</p>
<pre>crypto=::::
</pre>
<p>Un ejemplo específico de argumentos sería:
</p>
<pre>crypto=sha512:twofish-xts-plain64:512:0:
</pre>
<h3><span class="mw-headline" id="Utilizar_el_hook_sd-encrypt">Utilizar el hook sd-encrypt</span></h3>
<p>En todo lo que sigue <code>rd.luks</code> puede reemplazarse con <code>luks</code>. Los parámetros <code>rd.luks</code> solo son respetados por initrd. Los parámetros <code>luks</code> son respetados tanto por el sistema principal como por initrd. A menos que desee controlar dispositivos que se desbloqueen después del inicio desde la línea de órdenes del kernel, use <code>rd.luks</code>. Vea <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-cryptsetup-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-cryptsetup-generator.8">systemd-cryptsetup-generator(8)</a></span> para más opciones y detalles.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<ul>
<li>Si existe el archivo <code>/etc/crypttab.initramfs</code>, <a href="../../en/Mkinitcpio.html" class="mw-redirect" title="Mkinitcpio (Español)">mkinitcpio (Español)</a> lo agregará a initramfs como <code>/etc/crypttab</code>, pudiendo especificar allí los dispositivos que deben desbloquearse en el arranque. La sintaxis está documentada en <a href="#crypttab">#crypttab</a> y <span class="plainlinks archwiki-template-man" title="$ man 5 crypttab"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/crypttab.5">crypttab(5)</a></span>.</li>
<li>
<code>/etc/crypttab.initramfs</code> no se limita a usar solo UUID como <code>rd.luks</code>. Puede usar cualquiera de los <a href="../../es/Persistent_block_device_naming.html#M%C3%A9todos_para_nombrar_los_dispositivos_de_forma_permanente" title="Persistent block device naming (Español)">métodos para asignar nombres permanentes a dispositivos de bloques</a>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Todos los parámetros de <code>rd.luks</code> se pueden especificar reiteradas veces para desbloquear varios volúmenes cifrados con LUKS.</li>
<li>Los parámetros <code>rd.luks</code> solo admiten el desbloqueo de dispositivos LUKS detectables. Para desbloquear un dispositivo dm-crypt sin formato o un dispositivo LUKS con un encabezado separado, debe especificarlo en <code>/etc/crypttab.initramfs</code>. Vea <a href="#crypttab">#crypttab</a> para la sintaxis.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Si está utilizando <code>/etc/crypttab</code> o <code>/etc/crypttab.initramfs</code> junto con parámetros de <code>luks.*</code> o <code>rd.luks.*</code>, solo se activarán los dispositivos especificados en la línea de órdenes del kernel y verá el mensaje <code>Not creating device 'devicename' because it was not specified on the kernel command line.</code>. Para activar todos los dispositivos en <code>/etc/crypttab</code> no especifique ningún parámetro <code>luks.*</code> y utilice <code>rd.luks.*</code>. Para activar todos los dispositivos en <code>/etc/crypttab.initramfs</code> no especifique ningún parámetro <code>luks.*</code> o <code>rd.luks.*</code>.</div>
<h4><span class="mw-headline" id="rd.luks.uuid">rd.luks.uuid</span></h4>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> <code>rd.luks.uuid</code> se puede omitir cuando se utiliza <code>rd.luks.name</code>.</div>
<pre>rd.luks.uuid=<i>UUID</i>
</pre>
<p>Especifique el <a href="../../en/Persistent_block_device_naming.html#by-uuid" class="mw-redirect" title="UUID">UUID</a> del dispositivo que se va a descifrar en el arranque con este indicador. Si el UUID está en <code>/etc/crypttab.initramfs</code>, se usarán las opciones enumeradas allí. Para <code>luks.uuid</code> se usarán las opciones de <code>/etc/crypttab.initramfs</code> o <code>/etc/crypttab</code>.
</p>
<p>De forma predeterminada, el dispositivo mapeado estará ubicado en  <code>/dev/mapper/luks-<i>UUID</i></code> donde <i>UUID</i> es el UUID de la partición LUKS.
</p>
<h4><span class="mw-headline" id="rd.luks.name">rd.luks.name</span></h4>
<pre>rd.luks.name=<i>UUID</i>=<i>nombre</i>
</pre>
<p>Especifique el nombre del dispositivo mapeado después de que la partición LUKS esté abierta. Por ejemplo, al especificar <code><i>UUID</i>=cryptroot</code> indica que el dispositivo desbloqueado se encuentra en <code>/dev/mapper/cryptroot</code>. Si no se especifica nada, el dispositivo mapeado se entenderá ubicado en <code>/dev/mapper/luks-<i>UUID</i></code> donde <i>UUID</i> es el UUID de la partición LUKS. Cuando use este parámetro, puede omitir <code>rd.luks.uuid</code>.
</p>
<p>Esto es equivalente al segundo parámetro de <code>cryptdevice</code> para <code>encrypt</code>.
</p>
<h4><span class="mw-headline" id="rd.luks.options">rd.luks.options</span></h4>
<pre>rd.luks.options=UUID=<i>opciones</i>
</pre>
<p>o
</p>
<pre>rd.luks.options=<i>opciones</i>
</pre>
<p>Especifique las opciones para el dispositivo listado después de <code>UUID</code> o, si no se especifica, para todos los UUID no especificados en otra parte (por ejemplo, crypttab).
</p>
<p>Esto es aproximadamente equivalente al tercer parámetro de <code>cryptdevice</code> para <code>encrypt</code>.
</p>
<p>Sigue un formato similar a las opciones en crypttab: las opciones están separadas por comas, y, a su vez, las opciones con valores se especifican usando <code><i>option</i>=<i>valores</i></code>.
</p>
<p>Por ejemplo:
</p>
<pre>rd.luks.options=timeout=10s,swap,cipher=aes-cbc-essiv:sha256,size=256
</pre>
<h4><span class="mw-headline" id="rd.luks.key">rd.luks.key</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> El hook <code>sd-encrypt</code> solo admite archivos de clave incrustados en initramfs (es decir, especificado en la matriz <code>FILES</code> en <code>/etc/mkinitcpio.conf</code>).<a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/9181">systemd issue 9181</a>.</div>
<pre>rd.luks.key=UUID=<i>archivo de claves</i>
</pre>
<p>o
</p>
<pre>rd.luks.key=<i>archivo de claves</i>
</pre>
<p>Indique la ubicación de un archivo de claves utilizado para descifrar el dispositivo especificado en <code>rd.luks.UUID</code>. No hay una ubicación predeterminada como la que hay con el hook <code>encrypt</code> para el parámetro <code>cryptkey</code>.
</p>
<h4>
<span id="Tiempo_de_espera_.28.C2.ABtimeout.C2.BB.29"></span><span class="mw-headline" id="Tiempo_de_espera_(«timeout»)">Tiempo de espera («<i>timeout</i>»)</span>
</h4>
<p>Hay dos opciones que afectan el tiempo de espera para ingresar la contraseña durante el inicio:
</p>
<ul>
<li>
<code>rd.luks.options=timeout=<i>tiempo de espera</i></code> especifica el tiempo de espera para consultar una contraseña.</li>
<li>
<code>rootflags=x-systemd.device-timeout=<i>tiempo de espera</i></code> especifica cuánto tiempo debe esperar systemd para que se muestre el dispositivo rootfs antes de retirarlo (el valor predeterminado es 90 segundos).</li>
</ul>
<p>Si desea desactivar el tiempo de espera por completo, establezca ambos tiempos en cero:
</p>
<pre>rd.luks.options=timeout=0 rootflags=x-systemd.device-timeout=0
</pre>
<h2><span class="mw-headline" id="crypttab">crypttab</span></h2>
<p>El archivo <code>/etc/crypttab</code> (tabla de dispositivos cifrados) es similar al archivo <a href="../../es/Fstab.html" title="Fstab (Español)">fstab</a> y contiene una lista de dispositivos cifrados que se desbloquearán durante el inicio del sistema. Este archivo se puede utilizar para montar automáticamente dispositivos de intercambio cifrados o sistemas de archivos secundarios.
</p>
<p><code>crypttab</code> se lee <i>antes</i> que <code>fstab</code>, por lo que los contenedores de dm-crypt se pueden desbloquear antes de que se monte el sistema de archivos que contiene en su interior. Tenga en cuenta que <code>crypttab</code> se lee <i>después</i> de que el sistema se haya iniciado, por lo tanto, no reemplaza el desbloqueo de particiones cifradas mediante el uso de hooks de <a href="#mkinitcpio">mkinitcpio</a> y <a href="#Cargador_de_arranque">opciones del cargador de arranque</a> como en el caso de la <a href="../../es/Dm-crypt/Encrypting_an_entire_system.html" class="mw-redirect" title="Dm-crypt/Encrypting an entire system (Español)">partición raíz cifrada</a>. El procesado de <code>crypttab</code> en el momento del arranque se realiza mediante <code>systemd-cryptsetup-generator</code> automáticamente.
</p>
<p>Consulte <span class="plainlinks archwiki-template-man" title="$ man 5 crypttab"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/crypttab.5">crypttab(5)</a></span> para obtener detalles, lea a continuación algunos ejemplos, y la sección <a href="#Montaje_en_el_momento_del_arranque">#Montaje en el momento del arranque</a> para obtener instrucciones sobre cómo usar los UUID para montar un dispositivo cifrado.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Cuando se usa <a href="../../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> y el hook <code>sd-encrypt</code>, si la contraseña de una partición no raíz es la misma que la de la partición raíz, no hay necesidad de poner esa partición que no es raíz en crypttab debido al almacenamiento en caché de la contraseña. Consulte <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=219859">este hilo del foro</a> para obtener más información.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> 
<ul>
<li>Si se especifica la opción <i>nofail</i>, la pantalla de ingreso de la contraseña puede desaparecer mientras se escribe la contraseña. <i>nofail</i>, por lo tanto, solo debe usarse junto con los archivos de claves.</li>
<li>Hay problemas con <a href="../../es/Systemd.html" title="Systemd (Español)">systemd (Español)</a> al procesar la entradas de <code>crypttab</code> para dispositivos cifrados en <a href="../../en/Dm-crypt/Device_encryption.html#Encryption_options_for_plain_mode" title="Dm-crypt/Device encryption">modo plain</a> de <i>dm-crypt</i> (<code>--type plain</code>):
<ul>
<li>Para los dispositivos <code>--type plain</code> con un archivo de claves, es necesario agregar la opción <code>hash=plain</code> a crypttab debido a una <a rel="nofollow" class="external text" href="https://bugs.freedesktop.org/show_bug.cgi?id=52630">incompatibilidad de systemd</a>. <b>No</b> utilice <code>systemd-cryptsetup</code> manualmente para que la creación del dispositivo funcione a su alrededor.</li>
<li>También puede ser necesario agregar la opción <code>plain</code> explícitamente para forzar a <code>systemd-cryptsetup</code> reconocer un dispositivo <code>--type plain</code>) en el arranque. Consulte <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/442">systemd número 442</a>.</li>
</ul>
</li>
</ul>
</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/crypttab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Ejemplo de archivo crypttab. Los campos son: nombre, dispositivo subyacente, contraseña, opciones de cryptsetup.

# Montar /dev/lvm/swap recifrándolo con una clave nueva en cada reinicio.
 swap	/dev/lvm/swap	/dev/urandom	swap,cipher=aes-xts-plain64,size=256

# Montar /dev/lvm/tmp como /dev/mapper/tmp utilizando modalidad plain de dm-crypt con una contraseña aleatoria, haciendo que su contenido no se pueda recuperar después de que se desmonte.
tmp	/dev/lvm/tmp	/dev/urandom	tmp,cipher=aes-xts-plain64,size=256 

# Montar /dev/lvm/home como /dev/mapper/home utilizando LUKS, y solicitar la contraseña en el momento del arranque.
home   /dev/lvm/home

# Montar /dev/sdb1 como /dev/mapper/backup utilizando LUKS, con una contraseña almacenada en un archivo.
backup /dev/sdb1       /home/alice/backup.key</pre>
<h3><span class="mw-headline" id="Montaje_en_el_momento_del_arranque">Montaje en el momento del arranque</span></h3>
<p>Si desea montar una unidad cifrada en el momento del arranque, ingrese el UUID del dispositivo en <code>/etc/crypttab</code>. Obtenga el UUID (de la partición) usando la orden <code>lsblk -f</code> y agregándolo a <code>crypttab</code> como sigue:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/crypttab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">externaldrive         UUID=2f9a8428-ac69-478a-88a2-4aa458565431        none    luks,timeout=180</pre>
<p>El primer parámetro es el nombre que prefiera del dispositivo mapeado para la unidad cifrada. La opción <code>none</code> expondrá un prompt durante el inicio para escribir la contraseña que desbloquee la partición. La opción <code>timeout</code> define un tiempo de espera en segundos para ingresar la contraseña de descifrado durante el arranque.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Tenga en cuenta que la opción <code>timeout</code> en <code>crypttab</code> solo determina el tiempo permitido para <i>ingresar la contraseña</i> del dispositivo cifrado. Además, <a href="../../es/Systemd.html" title="Systemd (Español)">systemd (Español)</a> también tiene un tiempo de espera predeterminado que fija la cantidad de tiempo permitido para que <i>el dispositivo esté disponible</i> (prefijado en 90 segundos), que es independiente del temporizador fijado para la contraseña. En consecuencia, incluso cuando la opción <code>timeout</code> en <code>crypttab</code> fija un valor superior a 90 segundos (o tiene su valor predeterminado a 0, lo que significa tiempo ilimitado), <i>systemd </i> solo esperará un máximo de 90 segundos para que se desbloquee el dispositivo. Para cambiar el tiempo en que <i>systemd</i> mantiene un dispositivo disponible, se puede establacer la opción <code>x-systemd.device-timeout</code> (consulte <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.mount"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.mount.5">systemd.mount(5)</a></span>) en <a href="../../es/Fstab.html" title="Fstab (Español)">fstab</a> para dicho dispositivo. Probablemente sea deseable, entonces, que el tiempo de la opción <code>timeout</code> en <code>crypttab</code> sea igual al tiempo fijado con la opción <code>x-systemd.device-timeout</code> en <code>fstab</code> para cada dispositivo montado al momento del arranque.</div>
<p>También se puede configurar un <a href="../../es/Dm-crypt/Device_encryption.html#Archivos_de_claves" class="mw-redirect" title="Dm-crypt/Device encryption (Español)">archivo de claves</a>  y remitirse a él en lugar de esteblecer <code>none</code>. Esto da como resultado un desbloqueo automático, si se puede acceder al archivo de claves durante el inicio. Dado que LUKS ofrece la opción de tener varias claves, la opción elegida también se puede cambiar más adelante.
</p>
<p>Utilice el nombre que ha definido en <code>/etc/crypttab</code> para el mapeado del dispositivo en <code>/etc/fstab</code> de la siguiente manera:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/mapper/externaldrive      /mnt/backup               ext4    defaults,errors=remount-ro  0  2</pre>
<p>Dado que <code>/dev/mapper/externaldrive</code> ya es el resultado de un mapeado de partición único, no es necesario especificar un UUID para ello. En cualquier caso, el dispositivo mapeado con el sistema de archivos tendrá un UUID diferente al de la partición en la que está cifrado.
</p>
<h4><span class="mw-headline" id="Desbloquear_con_archivo_de_claves">Desbloquear con archivo de claves</span></h4>
<p>If the <a href="../../en/Dm-crypt/Device_encryption.html#Keyfiles" title="Dm-crypt/Device encryption">keyfile</a> for a secondary file system is itself stored inside an encrypted root, it is safe while the system is powered off and can be sourced to automatically unlock the mount during with boot via <a href="../../en/Dm-crypt/System_configuration.html#crypttab" class="mw-redirect" title="Crypttab">crypttab</a>. For example, unlock a crypt specified by <a href="../../en/Persistent_block_device_naming.html#by-uuid" class="mw-redirect" title="UUID">UUID</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/crypttab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">home-crypt    UUID=&lt;UUID identifier&gt;    /etc/mykeyfile
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> If you prefer to use a <code>--plain</code> mode blockdevice, the encryption options necessary to unlock it are specified in <code>/etc/crypttab</code>. Take care to apply the systemd workaround mentioned in <a href="../../en/Dm-crypt/System_configuration.html#crypttab" class="mw-redirect" title="Crypttab">crypttab</a> in this case.</div>
<p>Then use the device mapper's name (defined in <code>/etc/crypttab</code>) to make an entry in <code>/etc/fstab</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/mapper/home-crypt        /home   ext4        defaults        0       2
</pre>
<p>Since <code>/dev/mapper/externaldrive</code> already is the result of a unique partition mapping, there is no need to specify an UUID for it. In any case, the mapper with the filesystem will have a different UUID than the partition it is encrypted in.
</p>
<h4><span class="mw-headline" id="Montaje_de_un_dispositivo_de_bloque_apilado">Montaje de un dispositivo de bloque apilado</span></h4>
<p>Los generadores de systemd también procesan automáticamente los dispositivos de bloque apilados en el arranque.
</p>
<p>Por ejemplo, puede crear una configuración <a href="../../es/RAID.html" title="RAID (Español)">RAID (Español)</a>, utilizar cryptsetup para cifrarlo y crear un volumen lógico <a href="../../es/LVM.html" title="LVM (Español)">LVM (Español)</a> con el sistema de archivos correspondiente dentro del dispositivo de bloque cifrado. El resultado será esto:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsblk -f</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">─sdXX                  linux_raid_member    
│ └─md0                 crypto_LUKS   
│   └─cryptedbackup     LVM2_member 
│     └─vgraid-lvraid   ext4              /mnt/backup
└─sdYY                  linux_raid_member    
  └─md0                 crypto_LUKS       
    └─cryptedbackup     LVM2_member 
      └─vgraid-lvraid   ext4              /mnt/backup
</pre>
<p>que le pedirá la contraseña y se montará automáticamente en el arranque.
</p>
<p>Dado que se han especificado las entradas correctas para crypttab (por ejemplo, UUID para el dispositivo <code>crypto_LUKS</code>) y para fstab (<code>/dev/vgraid/lvraid</code>) respectivametne, no hay necesidad de agregar más configuraciones/hooks de mkinitcpio, porque el procesamiento de <code>/etc/crypttab</code> se aplica solo a montajes no root. Una excepción es cuando el hook <code>mdadm_udev</code> se usa <i>ya</i> (por ejemplo, para el dispositivo raíz). En este caso, <code>/etc/madadm.conf</code> e initramfs necesitan actualizarse para lograr que la correcta raid de la raíz se elija primero.
</p>
<h3><span class="mw-headline" id="Montaje_bajo_demanda">Montaje bajo demanda</span></h3>
<p>Puede <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">iniciar</a> <code>systemd-cryptsetup@externaldrive.service</code> en lugar de usar:
</p>
<pre># cryptsetup luksOpen UUID=... externaldrive
</pre>
<p>cuando tenga una entrada como sigue en su <code>/etc/crypttab</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/crypttab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">externaldrive UUID=... none noauto</pre>
<p>De esa manera no necesita recordar las opciones exactas de crypttab. Le pedirá la contraseña si es necesario.
</p>
<p>El archivo <i>unit</i> correspondiente será generado automáticamente por <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-cryptsetup-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-cryptsetup-generator.8">systemd-cryptsetup-generator(8)</a></span>. Puede listar todos los archivos <i>unit</i> generados usando:
</p>
<pre>$ systemctl list-unit-files | grep systemd-cryptsetup
</pre>
<h2>
<span id="Soluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Solución_de_problemas">Solución de problemas</span>
</h2>
<h3>
<span id="El_espacio_del_sistema_en_el_arranque.2Fsolicitud_de_contrase.C3.B1a_no_se_muestra"></span><span class="mw-headline" id="El_espacio_del_sistema_en_el_arranque/solicitud_de_contraseña_no_se_muestra">El espacio del sistema en el arranque/solicitud de contraseña no se muestra</span>
</h3>
<p>Si está usando <a href="../../es/Plymouth.html" title="Plymouth (Español)">Plymouth (Español)</a>, asegúrese de cargar los módulos correctos (vea: <a href="../../en/Plymouth.html#The_plymouth_hook" title="Plymouth">Plymouth#The plymouth hook</a><sup>[<a href="../../en/Help:Procedures.html#Fix_broken_section_links" title="Help:Procedures">enlace roto</a>: sección no válida]</sup>) o desactívelos. De lo contrario, Plymouth no asumirá la solicitud de contraseña, haciendo imposible el inicio del sistema.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../es/Category:Data-at-rest_encryption.html" title="Category:Data-at-rest encryption (Español)">Data-at-rest encryption (Español)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dm-crypt_(Espa%C3%B1ol)/System_configuration_(Espa%C3%B1ol)&amp;oldid=809064">https://wiki.archlinux.org/index.php?title=Dm-crypt_(Español)/System_configuration_(Español)&amp;oldid=809064</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 23 May 2024, at 05:55.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
