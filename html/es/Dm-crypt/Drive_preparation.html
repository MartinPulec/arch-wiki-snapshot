<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dm-crypt (Español)/Drive preparation (Español) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dm-crypt_Español_Drive_preparation_Español rootpage-Dm-crypt_Español skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Borrar_de_forma_segura_la_unidad_de_disco_duro" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Borrar_de_forma_segura_la_unidad_de_disco_duro">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Borrar de forma segura la unidad de disco duro</div>
		</a>
		
			<button aria-controls="toc-Borrar_de_forma_segura_la_unidad_de_disco_duro-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Borrar de forma segura la unidad de disco duro subsection</span>
			</button>
		
		<ul id="toc-Borrar_de_forma_segura_la_unidad_de_disco_duro-sublist" class="vector-toc-list">
			<li id="toc-Métodos_genéricos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#M%C3%A9todos_gen%C3%A9ricos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Métodos genéricos</div>
			</a>
			
			<ul id="toc-Métodos_genéricos-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Métodos_específicos_de_dm-crypt" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#M%C3%A9todos_espec%C3%ADficos_de_dm-crypt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Métodos específicos de dm-crypt</div>
			</a>
			
			<ul id="toc-Métodos_específicos_de_dm-crypt-sublist" class="vector-toc-list">
				<li id="toc-Limpiar_un_disco_o_partición_vacíos_con_dm-crypt" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Limpiar_un_disco_o_partici%C3%B3n_vac%C3%ADos_con_dm-crypt">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.1</span>Limpiar un disco o partición vacíos con dm-crypt</div>
			</a>
			
			<ul id="toc-Limpiar_un_disco_o_partición_vacíos_con_dm-crypt-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Limpiar_espacio_libre_con_dm-crypt_después_de_la_instalación" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Limpiar_espacio_libre_con_dm-crypt_despu%C3%A9s_de_la_instalaci%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.2</span>Limpiar espacio libre con dm-crypt después de la instalación</div>
			</a>
			
			<ul id="toc-Limpiar_espacio_libre_con_dm-crypt_después_de_la_instalación-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Limpiar_el_encabezado_LUKS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Limpiar_el_encabezado_LUKS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.3</span>Limpiar el encabezado LUKS</div>
			</a>
			
			<ul id="toc-Limpiar_el_encabezado_LUKS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Particionar" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Particionar">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Particionar</div>
		</a>
		
			<button aria-controls="toc-Particionar-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Particionar subsection</span>
			</button>
		
		<ul id="toc-Particionar-sublist" class="vector-toc-list">
			<li id="toc-Particiones_físicas" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Particiones_f%C3%ADsicas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Particiones físicas</div>
			</a>
			
			<ul id="toc-Particiones_físicas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Dispositivos_de_bloques_apilados" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dispositivos_de_bloques_apilados">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Dispositivos de bloques apilados</div>
			</a>
			
			<ul id="toc-Dispositivos_de_bloques_apilados-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Subvolúmenes_Btrfs" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Subvol%C3%BAmenes_Btrfs">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Subvolúmenes Btrfs</div>
			</a>
			
			<ul id="toc-Subvolúmenes_Btrfs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Partición_de_arranque_(GRUB)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Partici%C3%B3n_de_arranque_(GRUB)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Partición de arranque (GRUB)</div>
			</a>
			
			<ul id="toc-Partición_de_arranque_(GRUB)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">dm-crypt (Español)/Drive preparation (Español)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../../en/Dm-crypt/Drive_preparation.html" title="Dm-crypt/Drive preparation – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Dm-crypt/%E3%83%89%E3%83%A9%E3%82%A4%E3%83%96%E3%81%AE%E6%BA%96%E5%82%99" title="Dm-crypt/ドライブの準備 – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pl mw-list-item"><a href="../../pl/Dm-crypt/Drive_preparation.html" title="Dm-crypt (Polski)/Drive preparation – polski" lang="pl" hreflang="pl" class="interlanguage-link-target"><span>Polski</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../../pt/Dm-crypt/Drive_preparation.html" title="Dm-crypt (Português)/Drive preparation – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Dm-crypt/Drive_preparation" title="Dm-crypt/Drive preparation – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../es/Dm-crypt.html" title="Dm-crypt (Español)">Dm-crypt (Español)</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="es" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">Esta traducción de <a href="../../en/Dm-crypt/Drive_preparation.html" title="Dm-crypt/Drive preparation">dm-crypt/Drive preparation</a> fue revisada el <b>2019-09-18</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Dm-crypt/Drive_preparation&amp;diff=0&amp;oldid=582799">cambios</a> puede <a href="../../es/ArchWiki:Translation_Team/Contributing.html" title="ArchWiki:Translation Team (Español)/Contributing (Español)">actualizarla</a> o avisar al <a href="../../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artículos relacionados</p>
<ul>
<li><a href="../../es/Data-at-rest_encryption.html#Preparar_el_disco" class="mw-redirect" title="Disk encryption (Español)">Preparar el disco para el cifrado</a></li>
<li><a href="../../es/Securely_wipe_disk.html" title="Securely wipe disk (Español)">Limpieza segura de disco</a></li>
</ul>
</div>
<p>Antes de cifrar una unidad, es recomendable realizar un borrado seguro del disco, sobrescribiendo toda la unidad con datos aleatorios. Para evitar ataques criptográficos o <a href="../../en/File_recovery.html" title="File recovery">recuperación de archivos</a> no deseados, lo ideal es que estos datos sean indistinguibles de los datos escritos posteriormente por dm-crypt. Para comprender mejor el tema vea <a href="../../es/Data-at-rest_encryption.html#Preparar_el_disco" class="mw-redirect" title="Disk encryption (Español)">Disk encryption (Español)#Preparar el disco</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Borrar_de_forma_segura_la_unidad_de_disco_duro">Borrar de forma segura la unidad de disco duro</span></h2>
<p>Al decidir qué método utilizar para el borrado seguro de una unidad de disco duro, recuerde que esto solo se debe realizar una vez antes de que la unidad sea utilizada como una unidad cifrada.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Haga copias de seguridad apropiadas de aquellos datos importantes antes de comenzar.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Cuando se trate de limpiar gran cantidad de datos, el proceso tardará varias horas o varios días en completarse.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<ul>
<li>El proceso de llenado de una unidad cifrada puede tomar más de un día para completarse en un disco de varios terabytes. Para no dejar la máquina inutilizable durante la operación, puede valer la pena hacerlo desde un sistema ya instalado en otra unidad, en lugar de hacerlo desde el sistema de instalación <i>live</i> de Arch.</li>
<li>Para discos <a href="../../en/Solid_state_drive.html" class="mw-redirect" title="SSD">SSD</a>, a fin de rentabilizar la operación y minimizar los residuos de caché de la <a href="../../en/Securely_wipe_disk.html#Flash_memory" title="Securely wipe disk">memoria flash</a>, considere realizar <a href="../../en/Solid_state_drive/Memory_cell_clearing.html" class="mw-redirect" title="SSD memory cell clearing">un borrado de las celdas de la memoria SSD</a> <i>antes</i> de seguir las instrucciones siguientes.</li>
</ul>
</div>
<h3>
<span id="M.C3.A9todos_gen.C3.A9ricos"></span><span class="mw-headline" id="Métodos_genéricos">Métodos genéricos</span>
</h3>
<p>Para obtener instrucciones detalladas sobre cómo borrar y preparar una unidad, consulte <a href="../../en/Securely_wipe_disk.html" title="Securely wipe disk">Securely wipe disk</a>.
</p>
<h3>
<span id="M.C3.A9todos_espec.C3.ADficos_de_dm-crypt"></span><span class="mw-headline" id="Métodos_específicos_de_dm-crypt">Métodos específicos de dm-crypt</span>
</h3>
<p>Los dos métodos siguientes son específicos para dm-crypt y se mencionan porque son muy rápidos y se pueden realizar después de configurar la partición también.
</p>
<p>Las <a rel="nofollow" class="external text" href="https://gitlab.com/cryptsetup/cryptsetup/wikis/FrequentlyAskedQuestions#5-security-aspects">FAQ de cryptsetup</a> (elemento 2.19 «<i>¿Cómo puedo limpiar un dispositivo con aleatoriedad criptográfica?</i>») mencionan un procedimiento muy sencillo para usar en un volumen existente de dm-crypt para limpiar todo el espacio libre accesible en el bloque subyacente del dispositivo con datos aleatorios al actuar como un simple generador de números pseudoaleatorios. También se afirma que protege contra la divulgación de patrones de uso. Esto se debe a que los datos cifrados son prácticamente indistinguibles de los aleatorios.
</p>
<h4>
<span id="Limpiar_un_disco_o_partici.C3.B3n_vac.C3.ADos_con_dm-crypt"></span><span class="mw-headline" id="Limpiar_un_disco_o_partición_vacíos_con_dm-crypt">Limpiar un disco o partición vacíos con dm-crypt</span>
</h4>
<p>En primer lugar, cree un contenedor temporal cifrado en la partición (<code>sdXY</code>) o en el disco completo (<code>sdX</code>), que va a ser cifrado: 
</p>
<pre># cryptsetup open --type plain -d /dev/urandom /dev/&lt;dispositivo_de_bloque&gt; para_ser_borrado
</pre>
<p>En segundo lugar, compruebe que existe:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lsblk</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NAME                 MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT
sda                    8:0    0  1.8T  0 disk
└─para_ser_borrado   252:0    0  1.8T  0 crypt
</pre>
<p>Limpie el contenedor con ceros. Un uso de <code>if=/dev/urandom</code> no es necesario ya que el cifrado de encriptación se utiliza para enfarruyar.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dd if=/dev/zero of=/dev/mapper/para_ser_borrado status=progress</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dd: writing to ‘/dev/mapper/para_ser_borrado’: No space left on device</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<ul>
<li>La utilización de <i> dd </i> con la opción <code>bs=</code>, por ejemplo <code>bs=1M</code>, se utiliza con frecuencia para aumentar el rendimiento del disco de la operación.</li>
<li>Para realizar una comprobación de la operación, llene de ceros la partición antes de crear el contenedor de limpieza. Después se puede usar la orden de borrado <code>blockdev --getsize64 <i>/dev/mapper/container</i></code> para obtener el tamaño exacto del contenedor como root. Ahora se puede usar 'od' para ver como el borrado sobrescribe los sectores puestos a cero, por ejemplo  <code>od -j <i>containersize - blocksize</i></code> para ver el borrado completo hasta el final.</li>
</ul>
</div>
<p>Finalmente, cierre el contenedor temporal:
</p>
<pre># cryptsetup close para_ser_borrado
</pre>
<p>Al cifrar un sistema completo, el siguiente paso es <a href="#Particionar">#Particionar</a>. Si acaba de cifrar una partición, continúe en  <a href="../../es/Dm-crypt/Encrypting_a_non-root_file_system.html#Partici%C3%B3n" class="mw-redirect" title="Dm-crypt/Encrypting a non-root file system (Español)">Dm-crypt/Encrypting a non-root file system (Español)#Partición</a>.
</p>
<h4>
<span id="Limpiar_espacio_libre_con_dm-crypt_despu.C3.A9s_de_la_instalaci.C3.B3n"></span><span class="mw-headline" id="Limpiar_espacio_libre_con_dm-crypt_después_de_la_instalación">Limpiar espacio libre con dm-crypt después de la instalación</span>
</h4>
<p>Los usuarios que no tuvieron tiempo para realizar el borrado antes de la <a href="../../es/Dm-crypt/Encrypting_an_entire_system.html" title="Dm-crypt (Español)/Encrypting an entire system (Español)">instalación</a>, pueden lograr un efecto similar una vez que se arranque el sistema cifrado y se monten los sistemas de archivos. Sin embargo, considere la posibilidad de que el sistema de archivos afectado haya establecido un espacio reservado, por ejemplo para el usuario root u otro mecanismo de <a href="../../en/Disk_quota.html" title="Disk quota">cuota de disco</a>, que puede limitar el borrado, incluso cuando se realiza por el usuario root: en esos casos, es posible que algunas partes del dispositivo de bloque subyacente no se escriban en absoluto.
</p>
<p>Para ejecutar el borrado, llene temporalmente el espacio libre restante de la partición escribiendo en un archivo presente en el contenedor cifrado:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dd if=/dev/zero of=/archivo/en/contenedor status=progress</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dd: writing to ‘/archivo/en/contenedor’: No space left on device</pre>
<p>Sincronice el caché del disco y luego elimine el archivo para reclamar el espacio libre.
</p>
<pre># sync
# rm /archivo/en/contenedor
</pre>
<p>El proceso anterior debe repetirse para cada partición creada y su sistema de archivos de cada dispositivo de bloque. Por ejemplo, la instalación de <a href="../../es/Dm-crypt/Encrypting_an_entire_system.html#LVM_sobre_LUKS" title="Dm-crypt (Español)/Encrypting an entire system (Español)">LVM sobre LUKS</a>, el proceso debe realizarse para cada volumen lógico.
</p>
<h4><span class="mw-headline" id="Limpiar_el_encabezado_LUKS">Limpiar el encabezado LUKS</span></h4>
<p>Las particiones formateadas con dm-crypt/LUKS contienen un encabezado con las opciones de cifrado y claves utilizadas, al que se remite <code>dm-mod</code> al abrir el dispositivo de bloque. Después del encabezado comienza la aleatoriedad real de los datos de la partición. Por lo tanto, al reinstalar en una unidad ya cifrada, o desarmar una (por ejemplo, la venta de PC, el cambio de unidades, etc.) «puede» ser suficiente limpiar el encabezado de la partición, en lugar de sobrescribir la unidad entera, que puede ser un proceso largo.
</p>
<p>Al borrar el encabezado LUKS se borrará la clave maestra cifrada PBKDF2 (AES), las <a href="https://en.wikipedia.org/wiki/es:Sal" class="extiw" title="wikipedia:es:Sal">sal</a>, y así sucesivamente.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Es importante escribir en la partición cifrada con LUKS (<code>/dev/sda<b>1</b></code> en este ejemplo) y no directamente a los nodos de las particiones del disco. Configuraciones con cifrado como una capa de asignación de dispositivos encima de otras, por ejemplo LVM sobre LUKS sobre RAID debería escribir en RAID, respectivamente.</div>
<p>En un encabezado LUKS1 con un único valor predeterminado de 256 bits, el tamaño de la clave ocupa 1024 KiB. Se aconseja también sobrescribir los primeros 4 KiB escritos por dm-crypt, de modo que se deben borrar los primeros 1028 KiB. Esto es <code>1052672</code> bytes.
</p>
<p>Para poner a cero el encabezado, utilice:
</p>
<pre># head -c 1052672 /dev/urandom &gt; <i>/dev/sdX1</i>; sync
</pre>
<p>Para una longitud de clave de 512 bits (por ejemplo, para aes-xts-plain con clave de 512 bits) el encabezado le dedica 2 MiB. El encabezado LUKS2 será de 4 MiB si se creó con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cryptsetup">cryptsetup</a></span> &lt; 2.1 o 16 MiB si se creó con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cryptsetup">cryptsetup</a></span> ≥ 2.1.
</p>
<p>En caso de duda, basta con ser generoso y sobrescribir los primeros 20 MB o menos.
</p>
<pre># dd if=/dev/urandom of=<i>/dev/sdX1</i> bs=512 count=40960
</pre>
<p>O utilice <code>shred</code>. Por ejemplo, para sobrescribir los primeros 20 MiB por 20 veces:
</p>
<pre> # shred -v -z -s 20MiB -n 20 <i>/dev/sdX1</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Con una copia de seguridad de los datos de cabecera se puede rescatar el sistema, pero el sistema de archivos estará probablemente dañado, dado que los primeros sectores cifrados habrán sido sobrescritos. Vea otras secciones sobre cómo hacer una copia de seguridad de los bloques de cabecera cruciales.</div>
<p>Al limpiar el encabezado con datos aleatorios, todo lo que queda en el dispositivo son datos cifrados. Una excepción a esto puede ocurrir con un disco SSD, debido a los bloques de caché utilizados por los SSD. En teoría, puede suceder que el encabezado se haya almacenado en caché durante un tiempo y que, por consiguiente, la copia puede estar disponible después de limpiar el encabezado original. Para evitar problemas de seguridad serios, debe realizarse un borrado ATA seguro del SSD (proceda consultando la página de cryptsetup <a rel="nofollow" class="external text" href="https://gitlab.com/cryptsetup/cryptsetup/wikis/FrequentlyAskedQuestions#5-security-aspects">FAQ 5.19</a>).
</p>
<h2><span class="mw-headline" id="Particionar">Particionar</span></h2>
<p>Esta sección solo se aplica cuando se cifra un sistema completo. Después de que se haya sobrescrito de forma segura la unidad o los discos, se tendrá que elegir adecuadamente un esquema de particionado, teniendo en cuenta los requisitos de dm-crypt y los efectos que tendrán las diversas opciones en la gestión del sistema resultante.
</p>
<p>Es importante tener en cuenta que en <a href="#Partici%C3%B3n_de_arranque_(GRUB)">casi</a> todos los casos debe haber una partición separada para <code>/boot</code> que debe permanecer sin cifrar, ya que el gestor de arranque necesita acceder al directorio <code>/boot</code> donde se cargarán los módulos de encriptación y de initramfs necesarios para iniciar el resto del sistema (vea <a href="../../en/Mkinitcpio.html" class="mw-redirect" title="Mkinitcpio (Español)">mkinitcpio (Español)</a> para más detalles). Si esto plantea problemas de seguridad, vea <a href="../../es/Dm-crypt/Specialties.html#Asegurar_la_partici%C3%B3n_de_arranque_no_cifrada" title="Dm-crypt (Español)/Specialties (Español)">dm-crypt (Español)/Specialties (Español)#Asegurar la partición de arranque no cifrada</a>.
</p>
<p>Otro factor importante a tener en cuenta es cómo se manejarán el espacio de swap y la suspensión del sistema, vea <a href="../../es/Dm-crypt/Swap_encryption.html" title="Dm-crypt (Español)/Swap encryption (Español)">dm-crypt (Español)/Swap encryption (Español)</a>.
</p>
<h3>
<span id="Particiones_f.C3.ADsicas"></span><span class="mw-headline" id="Particiones_físicas">Particiones físicas</span>
</h3>
<p>En el caso más simple, las capas cifradas pueden hacerse directamente sobre las particiones físicas; vea <a href="../../en/Partitioning.html" class="mw-redirect" title="Partitioning (Español)">Partitioning (Español)</a> para ver los métodos para crearlas. Al igual que en un sistema sin cifrar, será suficiente con una partición raíz, además de otra para <code>/boot</code>, como se indicó anteriormente. Este método permite decidir qué particiones cifrar y cuáles dejar sin cifrar, y funciona igual, independientemente del número de discos implicados. También será posible añadir o eliminar particiones en el futuro, pero el tamaño de una partición estará limitado por el tamaño del disco que lo aloja. Por último, tenga en cuenta que para abrir cada partición encriptada se necesitarán claves o frases de acceso separadas, aunque esto se puede automatizar durante el arranque usando el archivo <code>crypttab</code>, vea <a href="../../es/Dm-crypt/System_configuration.html#crypttab" title="Dm-crypt (Español)/System configuration (Español)">Dm-crypt (Español)/System configuration (Español)#crypttab</a>.
</p>
<h3><span class="mw-headline" id="Dispositivos_de_bloques_apilados">Dispositivos de bloques apilados</span></h3>
<p>Sin embargo, si se necesita más flexibilidad, dm-crypt puede coexistir con otros dispositivos de bloque apilados como <a href="../../es/LVM.html" title="LVM (Español)">LVM (Español)</a> y <a href="../../es/RAID.html" title="RAID (Español)">RAID (Español)</a>. Los contenedores cifrados pueden residir por debajo o por encima de otros dispositivos de bloque apilados:
</p>
<ul>
<li>Si los dispositivos LVM/RAID se crean encima de la capa cifrada, será posible agregar, quitar y cambiar el tamaño de los sistemas de archivos de la misma partición cifrada libremente, y solo se necesitará una clave o frase de acceso para todos ellos. Dado que la capa cifrada reside en una partición física, no será posible, sin embargo, explotar la capacidad de LVM y RAID para abarcar varios discos.</li>
<li>Si la capa cifrada se crea en la parte superior de los dispositivos LVM/RAID, todavía será posible reorganizar los sistemas de archivos en el futuro, pero con mayor complejidad, ya que las capas de cifrado tendrán que ser ajustadas en consecuencia. Además, se requerirán frases secretas o claves separadas para abrir cada dispositivo encriptado. Esta, sin embargo, es la única opción para sistemas que necesitan sistemas de archivos cifrados que abarquen múltiples discos.</li>
</ul>
<h3>
<span id="Subvol.C3.BAmenes_Btrfs"></span><span class="mw-headline" id="Subvolúmenes_Btrfs">Subvolúmenes Btrfs</span>
</h3>
<p>Las <a href="../../es/Btrfs.html#Subvol%C3%BAmenes" title="Btrfs (Español)">características de subvolumes</a> integradas en el sistema de archivos <a href="../../es/Btrfs.html" title="Btrfs (Español)">Btrfs</a> se pueden usar con dm-crypt, reemplazando completamente la necesidad de LVM si no se requieren otros sistemas de archivos. Sin embargo, tenga en cuenta que los archivos de intercambio <a rel="nofollow" class="external text" href="https://btrfs.wiki.kernel.org/index.php/FAQ#Does_btrfs_support_swap_files.3F">no son soportados</a> por brtrfs antes de Linux 5.0, por lo que es necesaria una partición <a href="../../en/Dm-crypt/Swap_encryption.html" class="mw-redirect" title="Encrypted swap">de intercambio</a> cifrada si se desea un espacio de <a href="../../es/Swap.html" title="Swap (Español)">intercambio</a> en Linux &lt;5.0 (por ejemplo <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>). Vea también <a href="../../es/Dm-crypt/Encrypting_an_entire_system.html#Subvol%C3%BAmenes_btrfs_con_espacio_de_intercambio" title="Dm-crypt (Español)/Encrypting an entire system (Español)">Dm-crypt (Español)/Encrypting an entire system (Español)#Subvolúmenes btrfs con espacio de intercambio</a>.
</p>
<h3>
<span id="Partici.C3.B3n_de_arranque_.28GRUB.29"></span><span class="mw-headline" id="Partición_de_arranque_(GRUB)">Partición de arranque (GRUB)</span>
</h3>
<p>Véase <a href="../../es/Dm-crypt/Encrypting_an_entire_system.html#Cifrar_partici%C3%B3n_de_arranque_(GRUB)" title="Dm-crypt (Español)/Encrypting an entire system (Español)">dm-crypt (Español)/Encrypting an entire system (Español)#Cifrar partición de arranque (GRUB)</a>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../es/Category:Data-at-rest_encryption.html" title="Category:Data-at-rest encryption (Español)">Data-at-rest encryption (Español)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dm-crypt_(Espa%C3%B1ol)/Drive_preparation_(Espa%C3%B1ol)&amp;oldid=758346">https://wiki.archlinux.org/index.php?title=Dm-crypt_(Español)/Drive_preparation_(Español)&amp;oldid=758346</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 November 2022, at 07:05.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
