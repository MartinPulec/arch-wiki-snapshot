<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>OpenSSH (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OpenSSH_Español rootpage-OpenSSH_Español skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-OpenSSH" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#OpenSSH">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>OpenSSH</div>
		</a>
		
			<button aria-controls="toc-OpenSSH-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle OpenSSH subsection</span>
			</button>
		
		<ul id="toc-OpenSSH-sublist" class="vector-toc-list">
			<li id="toc-Instalación" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Instalaci%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Instalación</div>
			</a>
			
			<ul id="toc-Instalación-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cliente" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cliente">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Cliente</div>
			</a>
			
			<ul id="toc-Cliente-sublist" class="vector-toc-list">
				<li id="toc-Configuración" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Configuraci%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2.1</span>Configuración</div>
			</a>
			
			<ul id="toc-Configuración-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Servidor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Servidor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Servidor</div>
			</a>
			
			<ul id="toc-Servidor-sublist" class="vector-toc-list">
				<li id="toc-Configuración_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Configuraci%C3%B3n_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.1</span>Configuración</div>
			</a>
			
			<ul id="toc-Configuración_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gestión_del_Demonio" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gesti%C3%B3n_del_Demonio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.2</span>Gestión del Demonio</div>
			</a>
			
			<ul id="toc-Gestión_del_Demonio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Protección" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Protecci%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3</span>Protección</div>
			</a>
			
			<ul id="toc-Protección-sublist" class="vector-toc-list">
				<li id="toc-Forzamiento_de_autenticación_con_claves_públicas" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Forzamiento_de_autenticaci%C3%B3n_con_claves_p%C3%BAblicas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.1</span>Forzamiento de autenticación con claves públicas</div>
			</a>
			
			<ul id="toc-Forzamiento_de_autenticación_con_claves_públicas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Autenticación_de_dos_factores_y_claves_públicas" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Autenticaci%C3%B3n_de_dos_factores_y_claves_p%C3%BAblicas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.2</span>Autenticación de dos factores y claves públicas</div>
			</a>
			
			<ul id="toc-Autenticación_de_dos_factores_y_claves_públicas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Protección_contra_ataques_de_fuerza_bruta" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Protecci%C3%B3n_contra_ataques_de_fuerza_bruta">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.3</span>Protección contra ataques de fuerza bruta</div>
			</a>
			
			<ul id="toc-Protección_contra_ataques_de_fuerza_bruta-sublist" class="vector-toc-list">
				<li id="toc-Usango_ufw" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Usango_ufw">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.3.1</span>Usango ufw</div>
			</a>
			
			<ul id="toc-Usango_ufw-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_iptables" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Usando_iptables">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.3.2</span>Usando iptables</div>
			</a>
			
			<ul id="toc-Usando_iptables-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utilidades_para_prevenir_ataques_de_fuerza_bruta" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Utilidades_para_prevenir_ataques_de_fuerza_bruta">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.3.3</span>Utilidades para prevenir ataques de fuerza bruta</div>
			</a>
			
			<ul id="toc-Utilidades_para_prevenir_ataques_de_fuerza_bruta-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Limitar_el_inicio_de_sesión_como_root" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Limitar_el_inicio_de_sesi%C3%B3n_como_root">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.4</span>Limitar el inicio de sesión como root</div>
			</a>
			
			<ul id="toc-Limitar_el_inicio_de_sesión_como_root-sublist" class="vector-toc-list">
				<li id="toc-Denegar" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Denegar">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.4.1</span>Denegar</div>
			</a>
			
			<ul id="toc-Denegar-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restringir" class="vector-toc-list-item vector-toc-level-5">
			<a class="vector-toc-link" href="#Restringir">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.3.4.2</span>Restringir</div>
			</a>
			
			<ul id="toc-Restringir-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-VirtualBox" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#VirtualBox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3.4</span>VirtualBox</div>
			</a>
			
			<ul id="toc-VirtualBox-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Otros_servidores_y_clientes_SSH" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Otros_servidores_y_clientes_SSH">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Otros servidores y clientes SSH</div>
		</a>
		
			<button aria-controls="toc-Otros_servidores_y_clientes_SSH-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Otros servidores y clientes SSH subsection</span>
			</button>
		
		<ul id="toc-Otros_servidores_y_clientes_SSH-sublist" class="vector-toc-list">
			<li id="toc-Dropbear" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dropbear">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Dropbear</div>
			</a>
			
			<ul id="toc-Dropbear-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-SSH_alternativa:_Mobile_Shell_-_responsive,_survives_disconnects" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#SSH_alternativa:_Mobile_Shell_-_responsive,_survives_disconnects">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>SSH alternativa: Mobile Shell - responsive, survives disconnects</div>
			</a>
			
			<ul id="toc-SSH_alternativa:_Mobile_Shell_-_responsive,_survives_disconnects-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Trucos_y_sugerencias" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Trucos_y_sugerencias">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Trucos y sugerencias</div>
		</a>
		
			<button aria-controls="toc-Trucos_y_sugerencias-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Trucos y sugerencias subsection</span>
			</button>
		
		<ul id="toc-Trucos_y_sugerencias-sublist" class="vector-toc-list">
			<li id="toc-Túneles_SOCKS_cifrados" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#T%C3%BAneles_SOCKS_cifrados">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Túneles SOCKS cifrados</div>
			</a>
			
			<ul id="toc-Túneles_SOCKS_cifrados-sublist" class="vector-toc-list">
				<li id="toc-Paso_1:_Iniciar_la_conexión" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Paso_1:_Iniciar_la_conexi%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.1</span>Paso 1: Iniciar la conexión</div>
			</a>
			
			<ul id="toc-Paso_1:_Iniciar_la_conexión-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Paso_2:_Configurar_tu_navegador_(u_otros_programas)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Paso_2:_Configurar_tu_navegador_(u_otros_programas)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.2</span>Paso 2: Configurar tu navegador (u otros programas)</div>
			</a>
			
			<ul id="toc-Paso_2:_Configurar_tu_navegador_(u_otros_programas)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Redireccionar_X11" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Redireccionar_X11">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Redireccionar X11</div>
			</a>
			
			<ul id="toc-Redireccionar_X11-sublist" class="vector-toc-list">
				<li id="toc-Configuración_3" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Configuraci%C3%B3n_3">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.1</span>Configuración</div>
			</a>
			
			<ul id="toc-Configuración_3-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utilización" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Utilizaci%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.2</span>Utilización</div>
			</a>
			
			<ul id="toc-Utilización-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Redireccionar_otros_puertos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Redireccionar_otros_puertos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Redireccionar otros puertos</div>
			</a>
			
			<ul id="toc-Redireccionar_otros_puertos-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Multiplexación" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Multiplexaci%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Multiplexación</div>
			</a>
			
			<ul id="toc-Multiplexación-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Acelerando_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Acelerando_SSH">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Acelerando SSH</div>
			</a>
			
			<ul id="toc-Acelerando_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Montando_un_Sistema_de_archivos_Remoto_con_SSHFS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Montando_un_Sistema_de_archivos_Remoto_con_SSHFS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Montando un Sistema de archivos Remoto con SSHFS</div>
			</a>
			
			<ul id="toc-Montando_un_Sistema_de_archivos_Remoto_con_SSHFS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mantener_la_sesión_activa" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mantener_la_sesi%C3%B3n_activa">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Mantener la sesión activa</div>
			</a>
			
			<ul id="toc-Mantener_la_sesión_activa-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Guardar_los_datos_de_conexión_en_la_configuración_de_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Guardar_los_datos_de_conexi%C3%B3n_en_la_configuraci%C3%B3n_de_SSH">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>Guardar los datos de conexión en la configuración de SSH</div>
			</a>
			
			<ul id="toc-Guardar_los_datos_de_conexión_en_la_configuración_de_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Autossh_-_reiniciar_automáticamente_las_sesiones_y_túnes_de_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Autossh_-_reiniciar_autom%C3%A1ticamente_las_sesiones_y_t%C3%BAnes_de_SSH">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.9</span>Autossh - reiniciar automáticamente las sesiones y túnes de SSH</div>
			</a>
			
			<ul id="toc-Autossh_-_reiniciar_automáticamente_las_sesiones_y_túnes_de_SSH-sublist" class="vector-toc-list">
				<li id="toc-Ejecutar_Autossh_automáticamente_en_el_arranque_mediante_systemd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ejecutar_Autossh_autom%C3%A1ticamente_en_el_arranque_mediante_systemd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.9.1</span>Ejecutar Autossh automáticamente en el arranque mediante systemd</div>
			</a>
			
			<ul id="toc-Ejecutar_Autossh_automáticamente_en_el_arranque_mediante_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Cambiar_el_número_de_puerto_de_SSH_con_la_activación_del_socket_(sshd.socket)" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Cambiar_el_n%C3%BAmero_de_puerto_de_SSH_con_la_activaci%C3%B3n_del_socket_(sshd.socket)">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Cambiar el número de puerto de SSH con la activación del socket (sshd.socket)</div>
		</a>
		
		<ul id="toc-Cambiar_el_número_de_puerto_de_SSH_con_la_activación_del_socket_(sshd.socket)-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Solución_de_problemas" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Soluci%C3%B3n_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Solución de problemas</div>
		</a>
		
			<button aria-controls="toc-Solución_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solución de problemas subsection</span>
			</button>
		
		<ul id="toc-Solución_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-Lista_de_comprobación" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Lista_de_comprobaci%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Lista de comprobación</div>
			</a>
			
			<ul id="toc-Lista_de_comprobación-sublist" class="vector-toc-list">
				<li id="toc-Limpiar_claves_desactualizadas_(opcional)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Limpiar_claves_desactualizadas_(opcional)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.1</span>Limpiar claves desactualizadas (opcional)</div>
			</a>
			
			<ul id="toc-Limpiar_claves_desactualizadas_(opcional)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Recomendaciones" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Recomendaciones">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1.2</span>Recomendaciones</div>
			</a>
			
			<ul id="toc-Recomendaciones-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-La_conexión_SSH_queda_colgada_después_de_apagar/reiniciar" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#La_conexi%C3%B3n_SSH_queda_colgada_despu%C3%A9s_de_apagar/reiniciar">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>La conexión SSH queda colgada después de apagar/reiniciar</div>
			</a>
			
			<ul id="toc-La_conexión_SSH_queda_colgada_después_de_apagar/reiniciar-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Conexión_denegada_o_problemas_con_timeout" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Conexi%C3%B3n_denegada_o_problemas_con_timeout">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Conexión denegada o problemas con timeout</div>
			</a>
			
			<ul id="toc-Conexión_denegada_o_problemas_con_timeout-sublist" class="vector-toc-list">
				<li id="toc-¿Está_su_router_haciendo_reenvío_de_puertos?" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%C2%BFEst%C3%A1_su_router_haciendo_reenv%C3%ADo_de_puertos?">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.1</span>¿Está su router haciendo reenvío de puertos?</div>
			</a>
			
			<ul id="toc-¿Está_su_router_haciendo_reenvío_de_puertos?-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-¿Está_SSH_corriendo_y_escuchando?" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%C2%BFEst%C3%A1_SSH_corriendo_y_escuchando?">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.2</span>¿Está SSH corriendo y escuchando?</div>
			</a>
			
			<ul id="toc-¿Está_SSH_corriendo_y_escuchando?-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-¿Existen_reglas_de_firewall_que_bloqueen_la_conexión?" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%C2%BFExisten_reglas_de_firewall_que_bloqueen_la_conexi%C3%B3n?">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.3</span>¿Existen reglas de firewall que bloqueen la conexión?</div>
			</a>
			
			<ul id="toc-¿Existen_reglas_de_firewall_que_bloqueen_la_conexión?-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-¿Está_el_tráfico_llegando_a_su_ordenador?" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%C2%BFEst%C3%A1_el_tr%C3%A1fico_llegando_a_su_ordenador?">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.4</span>¿Está el tráfico llegando a su ordenador?</div>
			</a>
			
			<ul id="toc-¿Está_el_tráfico_llegando_a_su_ordenador?-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-¿Su_ISP_o_un_tercero_está_bloqueando_el_puerto_por_defecto?" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#%C2%BFSu_ISP_o_un_tercero_est%C3%A1_bloqueando_el_puerto_por_defecto?">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.5</span>¿Su ISP o un tercero está bloqueando el puerto por defecto?</div>
			</a>
			
			<ul id="toc-¿Su_ISP_o_un_tercero_está_bloqueando_el_puerto_por_defecto?-sublist" class="vector-toc-list">
				<li id="toc-Diagnóstico_con_Wireshark" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Diagn%C3%B3stico_con_Wireshark">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.5.1</span>Diagnóstico con Wireshark</div>
			</a>
			
			<ul id="toc-Diagnóstico_con_Wireshark-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Posible_solución" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Posible_soluci%C3%B3n">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.5.2</span>Posible solución</div>
			</a>
			
			<ul id="toc-Posible_solución-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Leer_del_socket_fallido:_connection_reset_by_peer" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Leer_del_socket_fallido:_connection_reset_by_peer">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3.6</span>Leer del socket fallido: connection reset by peer</div>
			</a>
			
			<ul id="toc-Leer_del_socket_fallido:_connection_reset_by_peer-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-«[your_shell]:_No_such_file_or_directory»_/_ssh_exchange_identification_problem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%C2%AB[your_shell]:_No_such_file_or_directory%C2%BB_/_ssh_exchange_identification_problem">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>«[your shell]: No such file or directory» / ssh_exchange_identification problem</div>
			</a>
			
			<ul id="toc-«[your_shell]:_No_such_file_or_directory»_/_ssh_exchange_identification_problem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mensaje_de_error_«Terminal_unknown»_o_«Error_opening_terminal»" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mensaje_de_error_%C2%ABTerminal_unknown%C2%BB_o_%C2%ABError_opening_terminal%C2%BB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Mensaje de error «Terminal unknown» o  «Error opening terminal»</div>
			</a>
			
			<ul id="toc-Mensaje_de_error_«Terminal_unknown»_o_«Error_opening_terminal»-sublist" class="vector-toc-list">
				<li id="toc-Solución_estableciendo_la_variable_$TERM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Soluci%C3%B3n_estableciendo_la_variable_$TERM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5.1</span>Solución estableciendo la variable $TERM</div>
			</a>
			
			<ul id="toc-Solución_estableciendo_la_variable_$TERM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Solución_usando_el_archivo_terminfo" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Soluci%C3%B3n_usando_el_archivo_terminfo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5.2</span>Solución usando el archivo terminfo</div>
			</a>
			
			<ul id="toc-Solución_usando_el_archivo_terminfo-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Véase_también" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#V%C3%A9ase_tambi%C3%A9n">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Véase también</div>
		</a>
		
		<ul id="toc-Véase_también-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">OpenSSH (Español)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 7 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-7" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">7 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/SSH" title="SSH – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/OpenSSH.html" title="OpenSSH – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/OpenSSH.html" title="OpenSSH – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/OpenSSH" title="OpenSSH – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../pt/Secure_Shell.html" title="Secure Shell – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/OpenSSH.html" title="OpenSSH – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/OpenSSH" title="OpenSSH – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="es" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">Esta traducción de <a href="../en/OpenSSH.html" title="OpenSSH">OpenSSH</a> fue revisada el <b>2018-01-05</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=OpenSSH&amp;diff=0&amp;oldid=352767">cambios</a> puede <a href="../es/ArchWiki:Translation_Team/Contributing.html" title="ArchWiki:Translation Team (Español)/Contributing (Español)">actualizarla</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artículos relacionados</p>
<ul>
<li><a href="../en/SSH_keys.html" class="mw-redirect" title="SSH keys (Español)">SSH keys (Español)</a></li>
<li><a href="../en/Pam_abl.html" title="Pam abl">Pam abl</a></li>
<li><a href="../en/Fail2ban.html" title="Fail2ban">fail2ban</a></li>
<li><a href="../es/Sshguard.html" title="Sshguard (Español)">sshguard (Español)</a></li>
<li><a href="../es/SSHFS.html" title="SSHFS (Español)">SSHFS (Español)</a></li>
<li><a href="../en/Syslog-ng.html" title="Syslog-ng">Syslog-ng</a></li>
<li><a href="../en/SFTP_chroot.html" title="SFTP chroot">SFTP chroot</a></li>
</ul>
</div>
<p><b>S</b>ecure <b>Sh</b>ell o <b>SSH</b> es un protocolo de red que permite el intercambio de datos sobre un canal seguro entre dos computadoras. SSH usa técnicas de cifrado que hacen que la información que viaja por el medio de comunicación vaya de manera no legible y ninguna tercera persona pueda descubrir el usuario y contraseña de la conexión ni lo que se escribe durante toda la sesión. SSH usa criptografía de clave pública para autenticar el equipo remoto y permitir al mismo autenticar al usuario si es necesario.
</p>
<p>SSH se suele utilizar para iniciar una sesión en una máquina remota, donde poder ejecutar órdenes, pero también permite la tunelización, el reenvío de puertos TCP de forma arbitraria y de conexiones X11; también se pueden realizar transferencias de archivos usando protocolos SFTP o SCP asociados.
</p>
<p>Un servidor SSH, por defecto, escucha el puerto TCP 22. Un programa cliente de SSH es utilizado, generalmente, para establecer conexiones a un demonio <i>sshd</i> que acepta conexiones remotas. Ambos se encuentran comúnmente en los sistemas operativos más modernos, incluyendo Mac OS X, Linux, Solaris y OpenVMS. Existen versiones propietarias, freeware y open-source de varios niveles de complejidad y exhaustividad.
</p>
<p>(Source: <a href="https://en.wikipedia.org/wiki/es:Secure_Shell" class="extiw" title="wikipedia:es:Secure Shell">Wikipedia:es:Secure Shell</a>)
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="OpenSSH">OpenSSH</span></h2>
<p>OpenSSH (OpenBSD Secure Shell) es un conjunto de programas de computadora que proveen una sesión de comunicación encriptada en una red informática que utiliza el protocolo SSH. Fue creado como una alternativa de código abierto al software propietario ofrecido por SSH Communications Security. OpenSSH es desarrollado como parte del proyecto OpenBSD, que está a cargo de Theo de Raadt.
</p>
<p>OpenSSH es confundido a veces con OpenSSL por la similitud de nombre, sin embargo, los proyectos tienen objetivos distintos y están desarrollados por equipos diferentes.
</p>
<h3>
<span id="Instalaci.C3.B3n"></span><span class="mw-headline" id="Instalación">Instalación</span>
</h3>
<p><a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" title="Help:Reading (Español)">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssh">openssh</a></span> desde los <a href="../es/Official_repositories.html" title="Official repositories (Español)">repositorios oficiales</a>.
</p>
<h3><span class="mw-headline" id="Cliente">Cliente</span></h3>
<p>Para conectarse a un servidor, ejecuta:
</p>
<pre>$ ssh -p <i>puerto</i> <i>usuario</i>@<i>dirección-servidor</i>
</pre>
<p>Si el servidor solo acepta verificación con claves públicas, siga las instrucciones en <a href="../en/SSH_keys.html" class="mw-redirect" title="SSH keys (Español)">claves SSH</a>.
</p>
<h4>
<span id="Configuraci.C3.B3n"></span><span class="mw-headline" id="Configuración">Configuración</span>
</h4>
<p>El archivo de configuración del cliente SSH se puede encontrar y editar en <code>~/.ssh/config</code>.
</p>
<p>El cliente se puede configurar para guardar servidores y opciones comunes. Todas las opciones se pueden declarar globalmente o se pueden restringir a un servidor especifico. Por ejemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.ssh/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># opciones globales
User <i>usuario</i>

# opciones especificas por servidor
Host miServidor
    HostName <i>direción-servidor</i>
    Port     <i>puerto</i></pre>
<p>Con dicha configuración, los siguientes comando son equivalentes:
</p>
<pre>$ ssh -p <i>puerto</i> <i>usuario</i>@<i>dirección-servidor</i>
$ ssh miServidor
</pre>
<p>Vea <span class="plainlinks archwiki-template-man" title="$ man 5 ssh_config"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh_config.5">ssh_config(5)</a></span> para más información.
</p>
<p>Algunas opciones no tienen parametros equivalentes en al ejecutar un comando directamente, pero se puede especificar opciones en en comando con el parametro <code>-o</code>. Por ejemplo <code>-oKexAlgorithms=+diffie-hellman-group1-sha1</code>.
</p>
<h3><span class="mw-headline" id="Servidor">Servidor</span></h3>
<h4>
<span id="Configuraci.C3.B3n_2"></span><span class="mw-headline" id="Configuración_2">Configuración</span>
</h4>
<p>El archivo de configuración del demonio SSH se puede encontrar y editar en <code>/etc/ssh/ssh<b>d</b>_config</code>.
</p>
<p>Para permitir el acceso sólo a algunos usuarios añadir esta línea:
</p>
<pre>AllowUsers    user1 user2
</pre>
<p>Para permitir el acceso sólo a algunos grupos:
</p>
<pre>AllowGroups group1 group2
</pre>
<p>Para agregar un agradable mensaje de bienvenida edite el archivo <code>/etc/issue</code> y cambie la línea Banner para que luzca así:
</p>
<pre>Banner /etc/issue
</pre>
<p>Claves de acceso del servidor serán generadas automáticamente por los <a href="#Gesti%C3%B3n_del_Demonio">archivos de servicio</a> de <i>sshd</i>. Si se desea usar una clave especifica, previamente creada, se puede configurar manualmente:
</p>
<pre>HostKey /etc/ssh/ssh_host_rsa_key
</pre>
<p>Si el servidor va a estar expuesto a la WAN, es recomendado cambiar el puerto por defecto 22 a algo aleatorio y superior:
</p>
<pre>Port 39901
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> 
<ul>
<li>Es posible que desee cambiar el puerto por defecto de 22 a cualquier puerto superior (ver <a href="https://en.wikipedia.org/wiki/es:Seguridad_por_oscuridad" class="extiw" title="wikipedia:es:Seguridad por oscuridad">seguridad por oscuridad</a>). A pesar de que el puerto ssh que está siendo ejecutado puede ser detectado utilizando un port-scanner o escáner de puertos como <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nmap">nmap</a></span>, cambiarlo reducirá el número de entradas en el log causados por intentos de autentificación automáticos. Para ayudar a seleccionar un puerto, revise la <a href="https://en.wikipedia.org/wiki/es:Anexo:N%C3%BAmeros_de_puerto" class="extiw" title="wikipedia:es:Anexo:Números de puerto">lista de números de puerto TCP y UDP</a>. También puede encontrar información de los puertos a nivel local en <code>/etc/services</code>. Seleccione un puerto alternativo que <b>no</b> esté ya asignado a un servicio común para evitar conflictos.</li>
<li>Desactivar completamente los inicios de sesión con contraseña aumentará en gran medida el nivel seguridad, consulte <a href="#Forzamiento_de_autenticaci%C3%B3n_con_claves_p%C3%BAblicas">#Forzamiento de autenticación con claves públicas</a> para más información.</li>
</ul>
</div>
<h4>
<span id="Gesti.C3.B3n_del_Demonio"></span><span class="mw-headline" id="Gestión_del_Demonio">Gestión del Demonio</span>
</h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssh">openssh</a></span> viene con un archivo de unidad de <a href="../es/Systemd.html" title="Systemd (Español)">systemd</a>:
</p>
<ol><li>
<code>sshd.service</code>, el cual mantendra el demonio de SSH permanentemente activo y bifurcara para cada conexión entrante. <a rel="nofollow" class="external autonumber" href="https://github.com/archlinux/svntogit-packages/blob/packages/openssh/trunk/sshd.service#L16">[1]</a> Es especialmente interesante para sistemas con bastante trafico de SSH. <a rel="nofollow" class="external autonumber" href="https://github.com/archlinux/svntogit-packages/blob/4cadf5dff444e4b7265f8918652f4e6dff733812/trunk/sshd.service#L15">[2]</a>
</li></ol>
<p>Se puede <a href="../es/Systemd.html#Utilizar_las_unidades" title="Systemd (Español)">activar</a> y <a href="../es/Systemd.html#Utilizar_las_unidades" title="Systemd (Español)">activar inicio automático</a> de <code>sshd.service</code> para empezar a usar el demonio.
</p>
<p>Si se desea utilizar un puerto diferente al puerto por defecto 22, tendremos que modificar el fichero de configuración del demonio ubicado en /etc/ssh/sshd_config, buscar la línea Port=* y cambiar por el puerto deseado.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> 
<ul><li>Systemd inicia los procesos de manera asíncrona. Si se amarra el demonio SSH a una dirección IP específica <code>ListenAddress 192.168.1.100</code> puede ser que no cargue al arranque porque por defecto el archivo sshd.service no depende de que se hayan habilitado las interfaces de red. Cuando se amarre a una dirección IP, es necesario agregar <code>After=network.target</code> a un archivo personalizado de sshd.service. Ver <a href="../es/Systemd.html#Modificar_los_archivos_de_unidad_suministrados" title="Systemd (Español)">Systemd (Español)#Modificar los archivos de unidad suministrados</a>.</li></ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Cuando se utiliza la activación del socket, ni <code>sshd.socket</code> ni <code>sshd.service</code> permiten supervisar los intentos de conexión en el registro, pero si lo puede ver al ejecutar <code># journalctl /usr/bin/sshd</code>.</div>
<h4>
<span id="Protecci.C3.B3n"></span><span class="mw-headline" id="Protección">Protección</span>
</h4>
<p>Permitir el acceso remoto al sistema a través de SSH es bueno para fines administrativos, pero puede representar una amenaza para la seguridad de su servidor. A menudo es el blanco de ataques de fuerza bruta, por lo que el acceso SSH necesita ser limitado adecuadamente para evitar que terceros accedan a su servidor.
</p>
<ul>
<li>Utilice nombres de cuenta y contraseñas no estándar .</li>
<li>Permita solo conexiones SSH entrantes desde ubicaciones de confianza.</li>
<li>Utilice <a href="../en/Fail2ban.html" title="Fail2ban">fail2ban</a> o <a href="../en/Sshguard.html" title="Sshguard">sshguard</a> para controlar los ataques de fuerza bruta, y banear las IP que se correspondan con las de los ataques de fuerza bruta.</li>
</ul>
<h5>
<span id="Forzamiento_de_autenticaci.C3.B3n_con_claves_p.C3.BAblicas"></span><span class="mw-headline" id="Forzamiento_de_autenticación_con_claves_públicas">Forzamiento de autenticación con claves públicas</span>
</h5>
<p>Si un cliente no se puede autenticar mediante clave pública, por defecto el servidor de SSH intentará autenticar con contraseña, permitiendo así que un usuario malicioso intente ganar acceso con <a href="#Protecci%C3%B3n_contra_ataques_de_fuerza_bruta">ataques de fuerza bruta</a> en la contraseña. Uno de los métodos más efectivos para proteger el sistema contra esta clase de ataques es desactivando el inicio de sesión con contraseña completamente, forzando así el uso de <a href="../en/SSH_keys.html" class="mw-redirect" title="SSH keys (Español)">claves SSH</a>. Esto se puede lograr modificando la siguiente opción en el archivo <code>sshd_config</code>:
</p>
<pre>PasswordAuthentication no
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Antes de efectuar este ajuste, asegúrese de que todas las cuentas que requieren acceso SSH, tienen configurada la autenticación de la clave pública en los correspondientes archivos <code>authorized_keys</code>. Vea <a href="../en/SSH_keys.html#Copying_the_public_key_to_the_remote_server" title="SSH keys">SSH keys#Copying the public key to the remote server</a> para más información.
</div>
<h5>
<span id="Autenticaci.C3.B3n_de_dos_factores_y_claves_p.C3.BAblicas"></span><span class="mw-headline" id="Autenticación_de_dos_factores_y_claves_públicas">Autenticación de dos factores y claves públicas</span>
</h5>
<p>Desde la versión 6.2 de OpenSSH, se puede agregar su propia utilidad para autenticar usando la opción <code>AuthenticationMethods</code>. Esta opción da la posibilidad de usar sus claves públicas o autenticación de dos factores.
</p>
<p>Vea <a href="../es/Google_Authenticator.html" title="Google Authenticator (Español)">Autenticador de Google</a> para configurar el autenticador de Google.
</p>
<p>Para usar <a href="../es/PAM.html" title="PAM (Español)">PAM</a> son OpenSSH, edite las siguientes lineas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/ssh/sshd_config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ChallengeResponseAuthentication yes
AuthenticationMethods publickey keyboard-interactive:pam
</pre>
<p>Después puede iniciar sesión ya sea con clave pública <b>o</b> con la autenticación del usuario, tal como es requerido en la configuración de PAM.
</p>
<p>Si, por otra parte se quiere autenticar el usuario con la clave pública y la autenticación especificada en la configuración de PAM, use una coma en lugar de un espacio para separar los <code>AuthenticationMethods</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/ssh/sshd_config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ChallengeResponseAuthentication yes
AuthenticationMethods publickey<b>,</b>keyboard-interactive:pam
</pre>
<p>Cuando se requiere autenticación de clave pública <b>y</b> PAM, es deseable desactivar el requisito de contraseña:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/sshd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Desactive inicio de sesión root remoto
auth      required  pam_securetty.so
# Requerido por el authenticator de google
auth      required  pam_google_authenticator.so
# Desactive inicio de sesión con contraseña
#auth      include   system-remote-login
account   include   system-remote-login
password  include   system-remote-login
session   include   system-remote-login
</pre>
<h5>
<span id="Protecci.C3.B3n_contra_ataques_de_fuerza_bruta"></span><span class="mw-headline" id="Protección_contra_ataques_de_fuerza_bruta">Protección contra ataques de fuerza bruta</span>
</h5>
<p>El concepto de <a href="https://en.wikipedia.org/wiki/es:Ataque_de_fuerza_bruta" class="extiw" title="wikipedia:es:Ataque de fuerza bruta">ataques de fuerza bruta</a> es simple: es un mecanismo por el que alguien trata continuamente de iniciar sesión en una página web o un servidor para acceder a un prompt como SSH utilizando un elevado número de combinaciones de nombre de usuario y contraseña aleatorios.
</p>
<h6><span class="mw-headline" id="Usango_ufw">Usango ufw</span></h6>
<p>Vea <a href="../en/Uncomplicated_Firewall.html#Rate_limiting_with_ufw" class="mw-redirect" title="Ufw">ufw#Rate limiting with ufw</a>.
</p>
<h6><span class="mw-headline" id="Usando_iptables">Usando iptables</span></h6>
<p>Si su sistema ya esta usando iptables, se puede proteger fácilmente contra los ataques de fuerza bruta usando la siguientes reglas
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> En este ejemplo el puerto de SSH fue cambiado al puerto TCP 42660.
</div>
<p>Antes de usar las siguientes reglas es necesario crear una nueva regla que registra y descarta demasiados intentos de conexión:
</p>
<pre># iptables -N LOG_AND_DROP
</pre>
<p>La primera regla va a ser aplicada a paquetes que señaalan el comienzo de nuevas conexiones con destino el puert TCP 42660.
</p>
<pre># iptables -A INPUT -p tcp -m tcp --dport 42660 -m state --state NEW -m recent --set --name DEFAULT --rsource
</pre>
<p>Esta regla le permite a iptables buscar por paquetes que coinciden con los parámetros de la regla anterior, y que provienen de servidores que ya están en la lista de vigilancia.
</p>
<pre># iptables -A INPUT -p tcp -m tcp --dport 42660 -m state --state NEW -m recent --update --seconds 90 --hitcount 4 --name DEFAULT --rsource -j LOG_AND_DROP
</pre>
<p>Ahora iptables decide que hacer con trafico con destino al puerto TCP 42660 que no coincide con la regla anterior.
</p>
<pre># iptables -A INPUT -p tcp -m tcp --dport 42660 -j ACCEPT
</pre>
<p>Se adjunta esta regla a la tabla de registro y descarte, y se usa el operador <code>-j</code> (jump), para pasar la información del paquete al registro.
</p>
<pre># iptables -A LOG_AND_DROP -j LOG --log-prefix "iptables deny: " --log-level 7
</pre>
<p>Después que el paquete es registrado por la primera regla, el resto de paquetes sera descartado.
</p>
<pre># iptables -A LOG_AND_DROP -j DROP
</pre>
<h6><span class="mw-headline" id="Utilidades_para_prevenir_ataques_de_fuerza_bruta">Utilidades para prevenir ataques de fuerza bruta</span></h6>
<p>Se pueden prevenir los ataques de fuerza bruta usando un script automatizado que bloquea a cualquiera que intenta usar fuerza bruta, por ejemplo <a href="../en/Fail2ban.html" title="Fail2ban">fail2ban</a> o <a href="../es/Sshguard.html" title="Sshguard (Español)">sshguard</a>.
</p>
<ul>
<li>Solo permite conexiones SSH entrantes de ubicaciones de confianza.</li>
<li>Use <a href="../en/Fail2ban.html" title="Fail2ban">fail2ban</a> o <a href="../es/Sshguard.html" title="Sshguard (Español)">sshguard</a> para bloquear direcciones IP que fallan en la autenticación con contraseña demasiadas veces.</li>
<li>Use <a rel="nofollow" class="external text" href="https://github.com/jtniehof/pam_shield">pam_shield</a> para bloquear direcciones IP que intentan iniciar sesión demasiadas veces en un periodo de tiempo determinado. En comparación con <a href="../en/Fail2ban.html" title="Fail2ban">fail2ban</a> o <a href="../es/Sshguard.html" title="Sshguard (Español)">sshguard</a>, este programa no toma en cuenta si el intento de inicio de sesión fue exitoso o no.</li>
</ul>
<h5>
<span id="Limitar_el_inicio_de_sesi.C3.B3n_como_root"></span><span class="mw-headline" id="Limitar_el_inicio_de_sesión_como_root">Limitar el inicio de sesión como root</span>
</h5>
<p>En general, se considera una mala práctica permitir que el usuario root inicie sesión sin restricciones a través de SSH. Hay dos métodos por los cuales el acceso de root a SSH puede ser restringido para mayor seguridad.
</p>
<h6><span class="mw-headline" id="Denegar">Denegar</span></h6>
<p>Sudo proporciona los derechos de root de forma selectiva para las acciones que requieran de estos derechos, sin necesidad de autenticarse con la cuenta de root. Esto permite el bloqueo de la cuenta root para acceder a través de SSH y funciona como una medida de seguridad frente a los potenciales ataques de fuerza bruta, ya que ahora un atacante debe adivinar, además del nombre de la cuenta, la contraseña.
</p>
<p>SSH se puede configurar para negar las conexiones remotas con el usuario root, editando la sección «Authentication» en <code>/etc/ssh/sshd_config</code>. Basta con cambiar <code>#PermitRootLogin yes</code> a <code>no</code> y descomentar la línea:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/ssh/sshd_config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PermitRootLogin no
...
</pre>
<p>A continuación, reiniciar el demonio de SSH:
</p>
<pre> # systemctl restart sshd
</pre>
<p>Ahora va a ser incapaz de conectarse por SSH como root, pero todavía será capaz de iniciar sesión con su usuario normal y utilizar <a href="../es/Su.html" title="Su (Español)">su (Español)</a> o <a href="../es/Sudo.html" title="Sudo (Español)">sudo (Español)</a> para hacer la administración del sistema.
</p>
<h6><span class="mw-headline" id="Restringir">Restringir</span></h6>
<p>Algunas tareas automatizadas realizadas a distancia, como copia de seguridad de todo el sistema, requieren el acceso de root completo. Para permitir que esto se haga de una manera segura, en lugar de desactivar el inicio de sesión de root a través de SSH, es posible permitir las conexiones de root solo para ciertas órdenes seleccionadas. Esto se puede lograr editando <code>~root/.ssh/authorized_keys</code>, y anteponiendo la clave deseada, por ejemplo, como sigue:
</p>
<pre>command="/usr/lib/rsync/rrsync -ro /" ssh-rsa …
</pre>
<p>Esto permitirá cualquier inicio de sesión con esta clave específica, solo para ejecutar la orden especificada entre las comillas.
</p>
<p>El aumento de la superficie de ataque creado por exponer el nombre de usuario root al iniciar la sesión, se puede compensar añadiendo lo siguiente a <code>sshd_config</code>:
</p>
<pre>PermitRootLogin forced-commands-only
</pre>
<p>Este ajuste no solo restringirá las órdenes que puede ejecutar root a través de SSH, sino que también desactiva el uso de contraseñas, forzando el uso de la autenticación de la clave pública para la cuenta root.
</p>
<p>Hay una alternativa un poco menos restrictiva, que permitirá ejecutar cualquier orden por root, pero hace los ataques de fuerza bruta no factibles mediante la exigencia de la autenticación de la clave pública. Para esta opción, establezca:
</p>
<pre>PermitRootLogin without-password
</pre>
<h4><span class="mw-headline" id="VirtualBox">VirtualBox</span></h4>
<p>Para comunicarse entre huésped y anfitrión de VirtualBox, el puerto del servidor debe ser reenviado en Settings &gt; Network. Al conectarse desde el cliente/anfitrión, conecte a la dirección IP de la máquina del cliente/anfitrión, en oposición a la conexión de la otra máquina. Esto es porque la conexión se realizará a través de un adaptador virtual.
</p>
<h2><span class="mw-headline" id="Otros_servidores_y_clientes_SSH">Otros servidores y clientes SSH</span></h2>
<p>Aparte de OpenSSH, hay otros muchos <a href="https://en.wikipedia.org/wiki/Comparison_of_SSH_clients" class="extiw" title="wikipedia:Comparison of SSH clients">clientes</a> y <a href="https://en.wikipedia.org/wiki/Comparison_of_SSH_servers" class="extiw" title="wikipedia:Comparison of SSH servers">servidores</a> SSH disponibles.
</p>
<h3><span class="mw-headline" id="Dropbear">Dropbear</span></h3>
<p><a href="https://en.wikipedia.org/wiki/Dropbear_(software)" class="extiw" title="wikipedia:Dropbear (software)">Dropbear</a> es un cliente SSH-2  y un servidor. El paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dropbear">dropbear</a></span> está disponible en <a href="../es/Arch_User_Repository.html" title="Arch User Repository (Español)">AUR</a>.
</p>
<p>El cliente ssh en línea de órdenes se llama dbclient.
</p>
<h3>
<span id="SSH_alternativa:_Mobile_Shell_-_responsive.2C_survives_disconnects"></span><span class="mw-headline" id="SSH_alternativa:_Mobile_Shell_-_responsive,_survives_disconnects">SSH alternativa: Mobile Shell - responsive, survives disconnects</span>
</h3>
<p>Del <a rel="nofollow" class="external text" href="https://mosh.mit.edu/">sitio web</a> de Mosh:
</p>
<p>Aplicación de terminal remoto que permite la itinerancia, soporta conectividad intermitente y proporciona echo local inteligente y la edición de línea de keystrokes del usuario. Mosh es un reemplazo para SSH. Es más robusto y sensible, sobre todo a través de Wi-Fi, móvil y enlaces de larga distancia.
</p>
<p><a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" title="Help:Reading (Español)">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mosh">mosh</a></span> desde los <a href="../es/Official_repositories.html" title="Official repositories (Español)">repositorios oficiales</a> o la última revisión <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mosh-git/">mosh-git</a></span><sup><small>AUR</small></sup> desde <a href="../es/Arch_User_Repository.html" class="mw-redirect" title="AUR (Español)">AUR</a>.
</p>
<h2><span class="mw-headline" id="Trucos_y_sugerencias">Trucos y sugerencias</span></h2>
<h3>
<span id="T.C3.BAneles_SOCKS_cifrados"></span><span class="mw-headline" id="Túneles_SOCKS_cifrados">Túneles SOCKS cifrados</span>
</h3>
<p>Este tipo de conexión es muy útil para usuarios de equipos portátiles conectados a varias conexiones inalámbricas no seguras. Lo único que necesitas es un servidor SSH corriendo en algún lugar seguro, como tu casa o tu trabajo. Puede ser útil usar un servicio de DNS dinámico como <a rel="nofollow" class="external text" href="http://www.dyndns.org/">DynDNS</a> para no tener que recordar la dirección IP a la que desea conectarse.
</p>
<h4>
<span id="Paso_1:_Iniciar_la_conexi.C3.B3n"></span><span class="mw-headline" id="Paso_1:_Iniciar_la_conexión">Paso 1: Iniciar la conexión</span>
</h4>
<p>Lo único que tienes que hacer es ejecutar este comando en tu terminal favorita para iniciar la conexión:
</p>
<pre>$ ssh -ND 4711 <i>user</i>@<i>host</i>
</pre>
<p>donde <code><i>user</i></code> es tu nombre de usuario en el servidor SSH que se está ejecutando en el <code><i>host</i></code>. Preguntará por tu contraseña, y luego ¡estarás conectado! El parámetro <code>N</code> desactiva el prompt interactivo, y el <code>D</code> especifica el puerto local en el cual escuchar (puedes elegir el numero de puerto que quieras). El parámetro <code>T</code> desactiva la asignación pseudo-tty.
</p>
<p>Le puede interesar añadir el parámetro <i>verbose</i> (<code>-v</code>), ya que la salida le permite comprobar que está realmente conectado.
</p>
<h4>
<span id="Paso_2:_Configurar_tu_navegador_.28u_otros_programas.29"></span><span class="mw-headline" id="Paso_2:_Configurar_tu_navegador_(u_otros_programas)">Paso 2: Configurar tu navegador (u otros programas)</span>
</h4>
<p>El paso anterior es inútil si no configura el navegador web (u otros programas) para su uso con el túnel que acaba de crear. Debido a que la versión actual de SSH soporta SOCKS4 y SOCKS5, se puede usar cualquiera de ellos.
</p>
<ul><li>Para Firefox: <i>Editar → Preferencias → Avanzadas → Red → Conexión → Configuración</i>:</li></ul>
<dl><dd>Marca la casilla <i>"Configuración manual de proxy"</i> , y escribe <code>localhost</code> en el campo <i>"servidor SOCKS"</i> , y luego escribe tu número de puerto en el siguiente campo de texto (<code>4711</code> en el siguiente ejemplo).</dd></dl>
<p>Firefox no hace automáticamente las peticiones DNS a través del túnel socks. Este potencial problema de privacidad puede ser mitigado por los siguientes pasos:
</p>
<ol>
<li>Escriba «about:config» en la barra de navegación de Firefox.</li>
<li>Busque por «network.proxy.socks_remote_dns»</li>
<li>Ajuste el valor a «true».</li>
<li>Reinicie el navegador.</li>
</ol>
<ul><li>Para Chromium: Se pueden setear las configuraciones de SOCKS como variables de entorno o como opciones en línea de comandos. Es recomendable agregar una de las siguientes funciones a <code>.bashrc</code>:</li></ul>
<pre>function secure_chromium() {
    port=4711
    export SOCKS_SERVER=localhost:$port
    export SOCKS_VERSION=5
    chromium &amp;
    exit
}
</pre>
<p>o
</p>
<pre>function secure_chromium {
    port=4343
    chromium --proxy-server="socks://localhost:$port" &amp;
    exit
}
</pre>
<p>Ahora solo queda abrir una terminal y escribir:
</p>
<pre>$ secure_chromium
</pre>
<p>Listo. ¡Disfruta tu túnel seguro!
</p>
<h3><span class="mw-headline" id="Redireccionar_X11">Redireccionar X11</span></h3>
<p><i>X11 forwarding</i> es un mecanismo que permite a las interfaces gráficas de los programas de X11, que se ejecutan en un sistema remoto, mostrarse en una máquina cliente local. Para reenviar X11 al equipo remoto, este no necesita tener un sistema completo X11 instalado, sin embargo, necesita, al menos, tener <i>xauth</i> instalado. <i>xauth</i> es una utilidad que mantiene las configuraciones de <code>Xauthority</code> utilizadas por el servidor y el cliente para la autenticación de la sesión de X11 (<a rel="nofollow" class="external text" href="https://www.xmodulo.com/how-to-enable-x11-forwarding-using-ssh.html">fuente</a>).
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Redirigir X11 tiene importantes implicaciones de seguridad que aconsejan la lectura de, al menos, las secciones pertinentes de <code>ssh</code>, <code>sshd_config</code> y <code>ssh_config</code> de las páginas del manual. Vea también <a rel="nofollow" class="external text" href="https://security.stackexchange.com/questions/14815/security-concerns-with-x11-forwarding">esta breve nota</a>.</div>
<h4>
<span id="Configuraci.C3.B3n_3"></span><span class="mw-headline" id="Configuración_3">Configuración</span>
</h4>
<p>En el sistema remoto:
</p>
<ul>
<li>
<a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" title="Help:Reading (Español)">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xauth">xorg-xauth</a></span> y <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xhost">xorg-xhost</a></span> desde los <a href="../es/Official_repositories.html" title="Official repositories (Español)">repositorios oficiales</a>
</li>
<li>en <code>/etc/ssh/ssh<b>d</b>_config</code>:
<ul>
<li>verifique que las opciones <code>AllowTcpForwarding</code> y <code>X11UseLocalhost</code> están ajustadas a <i>yes</i>, y que <code>X11DisplayOffset</code> está ajustado a <i>10</i> (esos son los valores por defecto si no se han cambiado, ver <span class="plainlinks archwiki-template-man" title="$ man 5 sshd_config"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sshd_config.5">sshd_config(5)</a></span>)</li>
<li>ajuste <code>X11Forwarding</code> a <i>yes</i>
</li>
</ul>
</li>
<li>a continuación, <a href="../es/Systemd.html#Utilizar_las_unidades" title="Systemd (Español)">reinicie</a> el <a href="#Gesti%C3%B3n_del_Demonio">demonio <i>sshd</i></a>.</li>
</ul>
<p>En el sistema cliente, active la opción <code>ForwardX11</code>,  bien especificando el parámetro <code>-X</code> en la línea de órdenes para las conexiones ocasionales, bien ajustando <code>ForwardX11</code> a <i>yes</i> en el <a href="#Cliente">archivo de configuración del cliente de openSSH</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Puede activar la opción <code>ForwardX11Trusted</code> (<code>-Y</code> en la línea de órdenes) si la interfaz gráfica está llegando mal o recibe errores; esto evitará que las redirecciones de X11 vengan sujetas a los controles de la <a rel="nofollow" class="external text" href="https://www.x.org/wiki/Development/Documentation/Security/">extensión de SEGURIDAD de X11</a>. Asegúrese de haber entendido <a href="#Redireccionar_X11">la advertencia</a> del comienzo de esta sección, si lo hace.</div>
<h4>
<span id="Utilizaci.C3.B3n"></span><span class="mw-headline" id="Utilización">Utilización</span>
</h4>
<p>Inicie sesión en el equipo remoto como de costumbre, especificando el parámetro <code>-X</code> si <i>ForwardX11</i> no se ha activado en el archivo de configuración del cliente:
</p>
<pre>$ ssh -X <i>user@host</i>
</pre>
<p>Si recibe errores tratando de ejecutar aplicaciones gráficas, pruebe <i>ForwardX11Trusted</i> en su lugar:
</p>
<pre>$ ssh -Y <i>user@host</i>
</pre>
<p>Ahora puede iniciar cualquier programa X en el servidor remoto, la salida será enviada a su sesión local:
</p>
<pre>$ xclock
</pre>
<p>Si recibe errores como «Cannot open display», pruebe la siguiente orden como usuario no root:
</p>
<pre>$ xhost +
</pre>
<p>La orden anterior permitirá a cualquiera transmitir aplicaciones X11. Para limitar el reenvío a un tipo de equipo particular:
</p>
<pre>$ xhost +hostname
</pre>
<p>donde hostname es el nombre del equipo en particular al que desea remitirse. Ver <span class="plainlinks archwiki-template-man" title="$ man 1 xhost"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xhost.1">xhost(1)</a></span> para más detalles.
</p>
<p>Tenga cuidado con algunas aplicaciones, ya que hacen un chequeo para ejecutar una instancia en la máquina local. <a href="../en/Firefox.html" title="Firefox">Firefox</a> es un ejemplo: o bien cierre la instancia de Firefox en ejecución o utilice el siguiente parámetro de inicio para poner en marcha una instancia remota en el equipo local:
</p>
<pre>$ firefox -no-remote
</pre>
<p>Si recibe «X11 forwarding request failed on channel 0» cuando se conecta (y el archivo <code>/var/log/errors.log</code> del servidor  muestra «Failed to allocate internet-domain X11 display socket»), asegúrese de que el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xorg-xauth">xorg-xauth</a></span> está instalado. Si su instalación no funciona, pruebe cualquiera de los dos opciones siguientes:
</p>
<ul>
<li>active la opción <code>AddressFamily any</code> en <code>ssh<b>d</b>_config</code> en el <i>server</i>, o</li>
<li>ajuste la opción <code>AddressFamily</code> en <code>ssh<b>d</b>_config</code> en el <i>server</i> a inet.</li>
</ul>
<p>Si establece «inet» puede arreglar los problemas con los clientes de Ubuntu en IPv4.
</p>
<p>Para ejecutar aplicaciones X como otro usuario en el servidor SSH, necesita la línea de autenticación <code>xauth add</code> tomada desde <code>xauth list</code> de la sesión SSH del usuario conectado.
</p>
<h3><span class="mw-headline" id="Redireccionar_otros_puertos">Redireccionar otros puertos</span></h3>
<p>Además del soporte integrado de SSH para redirigir X11, dicho soporte se puede usar también para asegurar el canal de cualquier conexión TCP, mediante su re dirección local o remota.
</p>
<p>El reenvío local abre un puerto en la máquina local, a la que se redirigirán las conexiones para el equipo remoto y de ahí a un destino determinado. Muy a menudo, el destino de reenvío será el mismo que el del equipo remoto, proporcionando así un shell seguro y, por ejemplo, una conexión VNC segura, a la misma máquina. El reenvío local se lleva a cabo por medio del parámetro <code>-L</code> y la especificación de reenvío se acompaña en forma de <code>&lt;tunnel port&gt;:&lt;destination address&gt;:&lt;destination port&gt;</code>.
</p>
<p>Así:
</p>
<pre>$ ssh -L 1000:mail.google.com:25 192.168.0.100
</pre>
<p>utilizará SSH para iniciar sesión y abrir un shell en 192.168.0.100, y también creará un túnel desde el puerto TCP 1000 de la máquina local a mail.google.com en el puerto 25. Una vez establecidas, las conexiones a localhost:1000 conectarán al puerto SMTP de Gmail. Para Google, parecerá que dichas conexiones (aunque no necesariamente los datos transmitidos por la conexión) se originaron en 192.168.0.100, y tales datos estarán seguros entre el equipo local y 192.168.0.100, pero no una vez en 192.168.0.100, a menos que se tomen otras medidas.
</p>
<p>Del mismo modo:
</p>
<pre>$ ssh -L 2000:192.168.0.100:6001 192.168.0.100
</pre>
<p>permitirá conexiones a localhost:2000 que se enviarán de forma transparente al equipo remoto en el puerto 6001. El ejemplo anterior es útil para conexiones VNC mediante la utilidad de vncserver —parte del paquete tightvnc— que, aunque muy útil, es explícita acerca de su falta de seguridad.
</p>
<p>El reenvío remoto permite al equipo remoto conectarse a un equipo de forma arbitraria a través del túnel SSH y la máquina local, proporcionando un cambio funcional de redirecciones locales, y es útil para situaciones en las que, por ejemplo, el equipo remoto ha limitado conectividad debido a los cortafuegos. Se activa con el parámetro <code>-R</code> y utiliza la especificación de reenvío en forma de <code>&lt;tunnel port&gt;:&lt;destination address&gt;:&lt;destination port&gt;</code>.
</p>
<p>Así:
</p>
<pre>$ ssh -R 3000:irc.libera.chat:6667 192.168.0.200
</pre>
<p>abrirá una shell en 192.168.0.200, y las conexiones desde 192.168.0.200 a sí mismo en el puerto 3000 (hablando en terminología remota, localhost:3000) serán enviadas a través del túnel de la máquina local y luego a irc.libera.chat en el puerto 6667, por lo tanto, en este ejemplo, lo que permite es el uso de programas de IRC en el equipo remoto, incluso si el puerto 6667 esté bloqueado por él, como es lo normal.
</p>
<p>Tanto el reenvío local como el remoto se pueden utilizar para ofrecer una «puerta de enlace» segura, lo que permite que otros equipos se aprovechen de un túnel SSH, sin ejecutar SSH o el demonio SSH, proporcionando una dirección de enlace para el inicio del túnel como parte de la especificación de reenvío, por ejemplo <code>&lt;tunnel address&gt;:&lt;tunnel port&gt;:&lt;destination address&gt;:&lt;destination port&gt;</code>. La especificación <code>&lt;tunnel address&gt;</code> puede ser cualquier dirección de la máquina en el inicio del túnel, <code>localhost</code>, (o en blanco) <code>*</code>, que, respectivamente, permiten conexiones a través de la dirección indicada, a través de la interfaz loopback, o a través de cualquier interfaz. De forma predeterminada, el reenvío se limita a las conexiones desde la máquina en el «principio» del túnel, es decir, la especificación <code>&lt;tunnel address&gt;</code> viene asignada a <code>localhost</code>. El reenvío local no requiere ninguna configuración adicional, sin embargo, el reenvío remoto está limitado por la configuración del demonio SSH del servidor remoto. Vea la opción <code>GatewayPorts</code> en <code>sshd_config(5)</code> para más información.
</p>
<h3>
<span id="Multiplexaci.C3.B3n"></span><span class="mw-headline" id="Multiplexación">Multiplexación</span>
</h3>
<p>El demonio SSH normalmente escucha en el puerto 22. Sin embargo, es una práctica común para muchos puntos de acceso público a Internet bloquear todo el tráfico que no pase por los puertos HTTP/S normales (80 y 443, respectivamente), por lo que, efectivamente, bloquean las conexiones SSH. La solución inmediata para esto es tener listado adicionalmente<code>sshd</code> en uno de los puertos de la lista blanca:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/ssh/sshd_config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Port 22
Port 443
</pre>
<p>Sin embargo, es probable que el puerto 443 ya esté en uso por un servidor web que sirve contenidos HTTPS, en cuyo caso es posible utilizar un multiplexor, como <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sslh">sslh</a></span>, que escucha en el puerto multiplexado y puede inteligentemente reenviar paquetes a muchos servicios.
</p>
<h3><span class="mw-headline" id="Acelerando_SSH">Acelerando SSH</span></h3>
<p>Se puede hacer que todas las sesiones al mismo equipo utilicen una conexión única, lo que acelerará enormemente los inicios de sesión posteriores, añadiendo estas líneas bajo el equipo (host) adecuado en <code>/etc/ssh/ssh_config</code>:
</p>
<pre>Host examplehost.com
  ControlMaster auto
  ControlPersist yes
  ControlPath ~/.ssh/socket-%r@%h:%p
</pre>
<p>Vea la página del manual <code>ssh_config(5)</code> para obtener una descripción completa de estas opciones.
</p>
<p>Otra opción para mejorar la velocidad es habilitar la compresión con el sufijo  <code>-C</code>. Una solución permanente es agregar esta línea debajo del host correcto en <code>/etc/ssh/ssh_config</code>:
</p>
<pre>Compression yes
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> <span class="plainlinks archwiki-template-man" title="$ man 1 ssh"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ssh.1">ssh(1)</a></span> establece que «<i>La compresión es deseable en las líneas de módem y otras conexiones lentas, pero ralentizará las cosas en redes rápidas</i>». Este consejo podría ser contraproducente en función de su configuración de red.</div>
<p>El tiempo de inicio de sesión puede ser acortado usando el sufijo <code>-4</code>,que saltea la búsqueda IPv6. Esto puede hacerse permanente añadiendo esta línea bajo el host correcto en <code>/etc/ssh/ssh_config</code>:
</p>
<pre>AddressFamily inet
</pre>
<p>Cambiar los algoritmos de cifrado usados por SSH para demandar menos cpu puede mejorar la velocidad. En este sentido, las mejores opciones son arcfour y blowfish-cbc.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Por favor, no haga esto a menos que sepa lo que está haciendo; arcfour tiene una serie de debilidades conocidas.</div>
<p>Para utilizar sistemas de cifrado alternativos, ejecute SSH con el parámetro <code>-c</code>:
</p>
<pre>$ ssh -c arcfour,blowfish-cbc user@server-address
</pre>
<p>Para usar el cifrado permanentemente, añada esta línea bajo el equipo adecuado en <code>/etc/ssh/ssh_config</code>:
</p>
<pre>Ciphers arcfour,blowfish-cbc
</pre>
<h3><span class="mw-headline" id="Montando_un_Sistema_de_archivos_Remoto_con_SSHFS">Montando un Sistema de archivos Remoto con SSHFS</span></h3>
<p>Por favor, consulte el artículo <a href="../es/SSHFS.html" title="SSHFS (Español)">Sshfs</a> para utilizar sshfs a fin de montar un sistema remoto —accesible a través de SSH— en una carpeta local, de modo que sea capaz de hacer cualquier operación en los archivos montados con cualquier herramienta (copiar, renombrar, editar con vim, etc.). Utilizar sshfs en lugar de shfs es, en general, preferible, como una nueva versión de shfs, ya que esta última no ha sido liberada desde 2004.
</p>
<h3>
<span id="Mantener_la_sesi.C3.B3n_activa"></span><span class="mw-headline" id="Mantener_la_sesión_activa">Mantener la sesión activa</span>
</h3>
<p>Tu sesion ssh sera automáticamente desconectada si ésta se encuentra inactiva. Para mantener activa la conexión agrega esto a <code>~/.ssh/config</code> o a <code>/etc/ssh/ssh_config</code> en el cliente.
</p>
<pre>ServerAliveInterval 120
</pre>
<p>Esto enviará la señal «keep alive» al servidor cada 120 segundos.
</p>
<p>Por el contrario, para mantener activas las conexiones entrantes, puede establecer:
</p>
<pre>ClientAliveInterval 120
</pre>
<p>(o algún otro número mayor que 0) en el archivo <code>/etc/ssh/sshd_config</code> del servidor.
</p>
<h3>
<span id="Guardar_los_datos_de_conexi.C3.B3n_en_la_configuraci.C3.B3n_de_SSH"></span><span class="mw-headline" id="Guardar_los_datos_de_conexión_en_la_configuración_de_SSH">Guardar los datos de conexión en la configuración de SSH</span>
</h3>
<p>Cada vez que desee conectarse a un servidor ssh, por lo general, tiene que escribir, al menos, su dirección y el nombre de usuario. Para ahorrarse tener que reescribirlo, puede guardar los datos de los servidores a los que se conecta regularmente, utilizando el archivo personal <code>~/.ssh/config</code> o el global del sistema <code>/etc/ssh/ssh_config</code>, como se muestra en el siguiente ejemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.ssh/config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Host myserver
    HostName 123.123.123.123
    Port 12345
    User bob
Host other_server
    HostName test.something.org
    User alice
    CheckHostIP no
    Cipher blowfish
</pre>
<p>Ahora solo queda conectarse al servidor utilizando el nombre especificado:
</p>
<pre>$ ssh myserver
</pre>
<p>Para ver una lista completa de las opciones posibles, eche un vistazo a la página del manual de ssh_config en el sistema o a la <a rel="nofollow" class="external text" href="https://www.openbsd.org/cgi-bin/man.cgi?query=ssh_config">ssh_config documentación</a> en el sitio web oficial.
</p>
<h3>
<span id="Autossh_-_reiniciar_autom.C3.A1ticamente_las_sesiones_y_t.C3.BAnes_de_SSH"></span><span class="mw-headline" id="Autossh_-_reiniciar_automáticamente_las_sesiones_y_túnes_de_SSH">Autossh - reiniciar automáticamente las sesiones y túnes de SSH</span>
</h3>
<p>Cuando una sesión o túnel no pueden mantenerse activos, por ejemplo debido a las malas condiciones de la red que provoca desconexiones del cliente, puede utilizar <a rel="nofollow" class="external text" href="https://www.harding.motd.ca/autossh/">Autossh</a> para reiniciar automáticamente. Autossh se puede instalar desde los <a href="../es/Official_repositories.html" title="Official repositories (Español)">repositorios oficiales</a>. 
</p>
<p>Ejemplos de uso:
</p>
<pre>$ autossh -M 0 -o "ServerAliveInterval 45" -o "ServerAliveCountMax 2" username@example.com
</pre>
<p>Combinado con <a href="../es/SSHFS.html" title="SSHFS (Español)">sshfs</a>:
</p>
<pre>$ sshfs -o reconnect,compression=yes,transform_symlinks,ServerAliveInterval=45,ServerAliveCountMax=2,ssh_command='autossh -M 0' username@example.com: /mnt/example 
</pre>
<p>Conexión a través de un conjunto SOCKS-proxy por <a href="../en/Proxy_server.html" class="mw-redirect" title="Proxy settings (Español)">Proxy_settings</a>:
</p>
<pre>$ autossh -M 0 -o "ServerAliveInterval 45" -o "ServerAliveCountMax 2" -NCD 8080 username@example.com 
</pre>
<p>Con el opción <code>-f</code>, autossh puede hacer que se ejecute como un proceso en segundo plano. Ejecutarlo de esta manera, sin embargo, significa que la frase de contraseña no se podrá introducir de forma interactiva.
</p>
<p>La sesión finalizará una vez que se escribe <code>exit</code> en la sesión, o el proceso autossh recibe una señal SIGTERM, SIGINT of SIGKILL.
</p>
<h4>
<span id="Ejecutar_Autossh_autom.C3.A1ticamente_en_el_arranque_mediante_systemd"></span><span class="mw-headline" id="Ejecutar_Autossh_automáticamente_en_el_arranque_mediante_systemd">Ejecutar Autossh automáticamente en el arranque mediante systemd</span>
</h4>
<p>Si desea iniciar automáticamente autossh, ahora es fácil conseguirlo haciendo que systemd maneje esto. Por ejemplo, puede crear un archivo de unidad systemd como este:
</p>
<pre>[Unit]
Description=AutoSSH service for port 2222
After=network.target

[Service]
Environment="AUTOSSH_GATETIME=0"
ExecStart=/usr/bin/autossh -M 0 -NL 2222:localhost:2222 -o TCPKeepAlive=yes foo@bar.com

[Install]
WantedBy=multi-user.target
</pre>
<p>Aquí <code>AUTOSSH_GATETIME=0</code> es una variable de entorno que especifica cuánto tiempo ssh debe estar activo antes de que autossh considere la conexión exitosa, ponerlo a 0 hace que autossh ignore el primer fallo de ejecución de ssh. Esto puede ser útil cuando se ejecuta autossh en el arranque. Otras variables de entorno están disponibles en la página del manual. Por supuesto, se puede hacer esta unidad más compleja si es necesario (consulte la documentación de systemd para más detalles), y, obviamente, puede utilizar sus propias opciones para autossh, pero tenga en cuenta que el parámetro <code>-f</code> implica <code>AUTOSSH_GATETIME=0</code> quen no funciona con systemd.
</p>
<p>Luego coloque esto en, por ejemplo, /etc/systemd/system/autossh.service. Posteriormente, puede activar sus túneles autossh con, por ejemplo:
</p>
<pre>$ systemctl start autossh
</pre>
<p>(o como llame al archivo de servicios)
</p>
<p>Si esto funciona bien para su caso, puede hacer esto permanente ejecutando:
</p>
<pre>$ systemctl enable autossh
</pre>
<p>Eso hace que autossh se inicie automáticamente en el arranque.
</p>
<p>También es fácil mantener varios procesos autossh, para mantener activos varios túneles. Solo tiene que crear varios archivos .service con diferentes nombres.
</p>
<h2>
<span id="Cambiar_el_n.C3.BAmero_de_puerto_de_SSH_con_la_activaci.C3.B3n_del_socket_.28sshd.socket.29"></span><span class="mw-headline" id="Cambiar_el_número_de_puerto_de_SSH_con_la_activación_del_socket_(sshd.socket)">Cambiar el número de puerto de SSH con la activación del socket (sshd.socket)</span>
</h2>
<p>Cree el archivo <code>/etc/systemd/system/sshd.socket.d/port.conf</code> con:
</p>
<pre>[Socket]
# Desactivar puerto por defecto
ListenStream=
# Establecer nuevo puerto
ListenStream=12345
</pre>
<p>systemd escuchará automáticamente en el nuevo puerto después de su recarga:
</p>
<pre>systemctl daemon-reload
</pre>
<h2>
<span id="Soluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Solución_de_problemas">Solución de problemas</span>
</h2>
<h3>
<span id="Lista_de_comprobaci.C3.B3n"></span><span class="mw-headline" id="Lista_de_comprobación">Lista de comprobación</span>
</h3>
<p>Esta es una primera aproximación a la solución de problemas con una lista de comprobación. Se recomienda revisar estos puntos antes de mirar más lejos:
</p>
<p>1. La carpeta <code>~/.ssh</code> del cliente y del servidor y su contenido deben ser accesibles por sus usuarios:
</p>
<pre>  $ chmod 700 /home/USER/.ssh
  $ chmod 600 /home/USER/.ssh/*
</pre>
<p>2. Compruebe que todos los archivos de la carpeta <code>~/.ssh</code> del cliente y del servidor son propiedad de sus usuario:
</p>
<pre>  $ chown -R USER: ~/.ssh
</pre>
<p>3. Compruebe que, por ejemplo, la clave pública <code>id_rsa.pub</code> del cliente está en el archivo <code>authorized_keys</code> del servidor .
</p>
<p>4. Compruebe que no se limitó el acceso a SSH a través de <code>AllowUsers</code> en <code>/etc/ssh/sshd_config</code> (separadas por espacios).
</p>
<h4>
<span id="Limpiar_claves_desactualizadas_.28opcional.29"></span><span class="mw-headline" id="Limpiar_claves_desactualizadas_(opcional)">Limpiar claves desactualizadas (opcional)</span>
</h4>
<p>5. Elimine claves antiguas/no válidas del archivo <code>/.ssh/authorized_keys</code> del servidor.
</p>
<p>6. Elimine claves antiguas/no válidas privadas y públicas dentro de la carpeta <code>~/.ssh</code> de los clientes.
</p>
<h4><span class="mw-headline" id="Recomendaciones">Recomendaciones</span></h4>
<p>7. Mantenga el menor número de claves posibles del archivo <code>~/.ssh/authorized_keys</code> del cliente en el servidor.
</p>
<h3>
<span id="La_conexi.C3.B3n_SSH_queda_colgada_despu.C3.A9s_de_apagar.2Freiniciar"></span><span class="mw-headline" id="La_conexión_SSH_queda_colgada_después_de_apagar/reiniciar">La conexión SSH queda colgada después de apagar/reiniciar</span>
</h3>
<p>La conexión SSH se bloquea después de apagar o reiniciar si systemd detiene la conexión de red antes que sshd. Para solucionar este problema, comente y cambie la declaración <code>After</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system/systemd-user-sessions.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#After=remote-fs.target
After=network.target</pre>
<h3>
<span id="Conexi.C3.B3n_denegada_o_problemas_con_timeout"></span><span class="mw-headline" id="Conexión_denegada_o_problemas_con_timeout">Conexión denegada o problemas con timeout</span>
</h3>
<h4>
<span id=".C2.BFEst.C3.A1_su_router_haciendo_reenv.C3.ADo_de_puertos.3F"></span><span class="mw-headline" id="¿Está_su_router_haciendo_reenvío_de_puertos?">¿Está su router haciendo reenvío de puertos?</span>
</h4>
<p>SALTAR ESTE PASO SI NO ESTÁ DETRÁS DE UNA NAT DE MÓDEM/ROUTER (por ejemplo, un VPS o en otro caso un equipo con direcciones públicas). La mayoría de los hogares y pequeñas empresas tendrán un módem/router con NAT.
</p>
<p>Lo primero es asegurarse de que el router sabe que reenvía cualquier conexión ssh entrante a su máquina. Su IP externa es dada a usted por su proveedor de Internet, y se asocia con cualquier petición que sale de su router. Por lo tanto, el router tiene que saber que cualquier conexión ssh entrante a su IP externa necesita ser reenviada a su máquina donde se ejecuta sshd.
</p>
<p>Encuentre su dirección de red interna.
</p>
<pre>ip a
</pre>
<p>Encuentre la interfaz de su dispositivo y busque el campo inet. Luego acceda a la interfaz web de configuración del router, utilizando la IP del router (encontrará esto en la web). Informe a su router para re-dirigirlo a su IP inet. Vaya a <a rel="nofollow" class="external autonumber" href="https://portforward.com/">[3]</a> para más instrucciones sobre cómo hacerlo para su router en particular.
</p>
<h4>
<span id=".C2.BFEst.C3.A1_SSH_corriendo_y_escuchando.3F"></span><span class="mw-headline" id="¿Está_SSH_corriendo_y_escuchando?">¿Está SSH corriendo y escuchando?</span>
</h4>
<pre>$ ss -tnlp
</pre>
<p>Si la orden anterior no muestra que el puerto SSH está abierto, SSH no se está ejecutando. Compruebe <code>/var/log/messages</code> para conocer errores, etc.
</p>
<h4>
<span id=".C2.BFExisten_reglas_de_firewall_que_bloqueen_la_conexi.C3.B3n.3F"></span><span class="mw-headline" id="¿Existen_reglas_de_firewall_que_bloqueen_la_conexión?">¿Existen reglas de firewall que bloqueen la conexión?</span>
</h4>
<p><a href="../es/Iptables.html" title="Iptables (Español)">Iptables</a> puede bloquear conexiones en el puerto <code>22</code>. Compruebe esto con:
</p>
<pre># iptables -nvL</pre>
<p>y busque las posibles reglas que bloqueen paquetes en la cadena <code>INPUT</code>. Entonces, si es necesario, desbloquee el puerto con una orden como:
</p>
<pre># iptables -I INPUT 1 -p tcp --dport 22 -j ACCEPT
</pre>
<p>Para obtener más ayuda sobre cómo para configurar cortafuegos, consulte <a href="../es/Category:Firewalls.html" class="mw-redirect" title="Firewalls (Español)">Firewalls (Español)</a>.
</p>
<h4>
<span id=".C2.BFEst.C3.A1_el_tr.C3.A1fico_llegando_a_su_ordenador.3F"></span><span class="mw-headline" id="¿Está_el_tráfico_llegando_a_su_ordenador?">¿Está el tráfico llegando a su ordenador?</span>
</h4>
<p>Realice un vuelco de la información del tráfico sobre el equipo que está teniendo problemas con:
</p>
<pre># tcpdump -lnn -i any port ssh and tcp-syn
</pre>
<p>Esto debería mostrar alguna información básica, y luego espere a que todo el tráfico que debería producirse se muestre. Pruebe su conexión ahora. Si no ve ninguna salida cuando se intenta conectar, entonces algo fuera de su ordenador está bloqueando el tráfico (por ejemplo, cortafuegos físicos, NAT del router, etc.).
</p>
<h4>
<span id=".C2.BFSu_ISP_o_un_tercero_est.C3.A1_bloqueando_el_puerto_por_defecto.3F"></span><span class="mw-headline" id="¿Su_ISP_o_un_tercero_está_bloqueando_el_puerto_por_defecto?">¿Su ISP o un tercero está bloqueando el puerto por defecto?</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Pruebe este paso si <b>sabe</b> que no está ejecutando ningún cortafuegos y sabe que ha configurado el router para DMZ o ha redirigido el puerto a su equipo y aún no funciona. Aquí encontrará los pasos de diagnóstico y una posible solución.</div>
<p>En algunos casos, su proveedor de Internet podría bloquear el puerto predeterminado (puerto 22 SSH), así que lo que está intentando (apertura de puertos, endurecimiento del apilamiento, defensa contra ataques de saturación, etc.) es estéril. Para confirmar esto, cree un servidor en todas las interfaces (0.0.0.0) y conéctelo de forma remota.
</p>
<p>Si recibe un mensaje de error similar a este:
</p>
<pre>ssh: connect to host www.inet.hr port 22: Connection refused
</pre>
<p>Eso significa que el puerto <b>no</b> está bloqueado por el ISP, pero el servidor no ejecuta SSH en ese puerto (vea <a href="https://en.wikipedia.org/wiki/es:Seguridad_por_oscuridad" class="extiw" title="wikipedia:es:Seguridad por oscuridad">seguridad por oscuridad</a>).
</p>
<p>Sin embargo, si se recibe un mensaje de error similar a este:
</p>
<pre>ssh: connect to host 111.222.333.444 port 22: Operation timed out 
</pre>
<p>Eso significa que algo está rechazando el tráfico TCP en el puerto 22. Básicamente ese puerto está siendo vigilado, ya sea por el cortafuegos o por la intervención de terceras partes (como un ISP que bloquea y/o rechaza el tráfico entrante en el puerto 22). Si se sabe que no está ejecutando ningún cortafuegos en su ordenador, y está seguro que ningún Gremlins están creciendo en su router y switches, entonces, el ISP está bloqueando el tráfico.
</p>
<p>Para hacer doble verificación, puede ejecutar Wireshark en el servidor y escuchar el tráfico en el puerto 22. Dado que Wireshark es una utilidad que esnifa paquetes de dos niveles, y TCP/UDP tiene 3 niveles y así sucesivamente (ver <a href="https://en.wikipedia.org/wiki/es:Familia_de_protocolos_de_Internet" class="extiw" title="wikipedia:es:Familia de protocolos de Internet">pila de red de IP</a>), si no recibe nada mientras se conecta de forma remota, lo más probable es que un tercero esté bloqueando el tráfico en ese puerto para su servidor.
</p>
<h5>
<span id="Diagn.C3.B3stico_con_Wireshark"></span><span class="mw-headline" id="Diagnóstico_con_Wireshark">Diagnóstico con Wireshark</span>
</h5>
<p><a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" title="Help:Reading (Español)">Instale</a> Wireshark con el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireshark-cli">wireshark-cli</a></span> disponible en los <a href="../es/Official_repositories.html" title="Official repositories (Español)">repositorios oficiales</a>.
</p>
<p>Y luego ejecútelo utilizando,
</p>
<pre>tshark -f "tcp port 22" -i NET_IF
</pre>
<p>donde NET_IF es la interfaz de red para una conexión WAN (ver <code>ip a</code> para comprobar). Si no se está recibiendo ningún paquete al intentar conectarse de forma remota, puede estar muy seguro de que su ISP está bloqueando el tráfico entrante en el puerto 22.
</p>
<h5>
<span id="Posible_soluci.C3.B3n"></span><span class="mw-headline" id="Posible_solución">Posible solución</span>
</h5>
<p>La solución es utilizar algún otro puerto que el ISP no esté bloqueando. Abra el archivo <code>/etc/ssh/sshd_config</code> y configúrelo para utilizar diferentes puertos. Por ejemplo, añada:
</p>
<pre>Port 22
Port 1234
</pre>
<p>Asegúrese también de que otras líneas de configuración del «puerto»  en el archivo están comentadas. Solo comentar «Port 22» y poner «Port 1234» no va a resolver el problema, porque entonces sshd solo escuchará el puerto 1234. Utilice ambas líneas para ejecutar el servidor SSH en ambos puertos.
</p>
<p>Reinicie el servidor <code>systemctl restart sshd.service</code> y todo estará listo. Todavía tiene que configurar su cliente(s) para poder usar el otro puerto, en lugar del puerto predeterminado. Existen numerosas soluciones a ese problema, pero nosotros cubrimos dos de ellas aquí.
</p>
<h4><span class="mw-headline" id="Leer_del_socket_fallido:_connection_reset_by_peer">Leer del socket fallido: connection reset by peer</span></h4>
<p>Las versiones recientes de openssh a veces fallan con el mensaje de error anterior, debido a un error que implica la criptografía de curva elíptica. En este caso, añada la siguiente línea a <code>~/.ssh/config</code>:
</p>
<pre>HostKeyAlgorithms ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-dss-cert-v00@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-rsa,ssh-dss
</pre>
<p>Con openssh 5.9, la solución anterior no funciona. En su lugar, ponga las siguientes líneas en <code>~/.ssh/config</code>:
</p>
<pre>Ciphers aes128-ctr,aes192-ctr,aes256-ctr,aes128-cbc,3des-cbc 
MACs hmac-md5,hmac-sha1,hmac-ripemd160
</pre>
<p>Ver también <a rel="nofollow" class="external text" href="https://www.gossamer-threads.com/lists/openssh/dev/51339">discussion</a> en el foro openssh bug.
</p>
<h3>
<span id=".C2.AB.5Byour_shell.5D:_No_such_file_or_directory.C2.BB_.2F_ssh_exchange_identification_problem"></span><span class="mw-headline" id="«[your_shell]:_No_such_file_or_directory»_/_ssh_exchange_identification_problem">«[your shell]: No such file or directory» / ssh_exchange_identification problem</span>
</h3>
<p>Una posible causa de esto es la necesidad de ciertos clientes SSH de encontrar una ruta absoluta (una devuelta por <code>whereis -b [your shell]</code>, por instancia) en <code>$SHELL</code>, incluso si el binario de la shell se encuentra en una de las entradas <code>$PATH</code>.
</p>
<h3>
<span id="Mensaje_de_error_.C2.ABTerminal_unknown.C2.BB_o_.C2.ABError_opening_terminal.C2.BB"></span><span class="mw-headline" id="Mensaje_de_error_«Terminal_unknown»_o_«Error_opening_terminal»">Mensaje de error «Terminal unknown» o  «Error opening terminal»</span>
</h3>
<p>Con ssh es posible recibir errores como «Terminal unknown» después de iniciar sesión. Iniciar aplicaciones ncurses como nano fallan con el mensaje «Error opening terminal». Hay dos métodos para solucionar este problema, uno rápido, mediante la variable $TERM, y otro más detallado usando el archivo terminfo.
</p>
<h4>
<span id="Soluci.C3.B3n_estableciendo_la_variable_.24TERM"></span><span class="mw-headline" id="Solución_estableciendo_la_variable_$TERM">Solución estableciendo la variable $TERM</span>
</h4>
<p>Después de conectar con el servidor remoto establezca la variable $TERM para «xterm» con la siguiente orden:
</p>
<p><code>TERM=xterm</code>
</p>
<p>Este método es una solución provisional y debe ser utilizado en servidores ssh al que se conecta raramente, ya que puede tener efectos secundarios no deseados. También tiene que repetir la orden después de cada conexión, o bien configurando ~.bashrc .
</p>
<h4>
<span id="Soluci.C3.B3n_usando_el_archivo_terminfo"></span><span class="mw-headline" id="Solución_usando_el_archivo_terminfo">Solución usando el archivo terminfo</span>
</h4>
<p>Una solución con más dedicación consiste en transferir el archivo terminfo del terminal en el equipo cliente al servidor ssh. En este ejemplo explicamos cómo configurar el archivo terminfo para el terminal «rxvt-unicode-256color».
Cree el directorio que contendrá los archivos terminfo en el servidor ssh, mientras se está conectado al servidor, con la orden:
</p>
<p><code> mkdir -p ~/.terminfo/r/</code>
</p>
<p>Ahora copie el archivo terminfo de su terminal en el nuevo directorio. Reemplace <code>rxvt-unicode-256color</code> con el terminal de su cliente en la siguiente orden y <code>ssh-server</code> con el usuario y dirección del servidor correspondiente.
</p>
<p><code>$ scp  /usr/share/terminfo/r/<i>rxvt-unicode-256color</i> ssh-server:~/.terminfo/r/</code>
</p>
<p>Después de salir y entrar en el servidor ssh el problema debe haber sido corregido.
</p>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="http://www.soloport.com/iptables.html">A Cure for the Common SSH Login Attack</a><sup>[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">enlace roto</a> 2023-05-06]</sup>
</li>
<li><a rel="nofollow" class="external text" href="https://www.la-samhna.de/library/brutessh.html">Defending against brute force ssh attacks</a></li>
<li>
<a rel="nofollow" class="external text" href="https://www.ibm.com/developerworks/library/l-keyc/index.html">OpenSSH key management, Part 1</a> and <a rel="nofollow" class="external text" href="https://www.ibm.com/developerworks/library/l-keyc2">Part 2</a> on IBM developerWorks</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../es/Category:Secure_Shell.html" title="Category:Secure Shell (Español)">Secure Shell (Español)</a></li>
<li><a href="../es/Category:Servers.html" title="Category:Servers (Español)">Servers (Español)</a></li>
<li><a href="../es/Category:OpenBSD.html" title="Category:OpenBSD (Español)">OpenBSD (Español)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=OpenSSH_(Espa%C3%B1ol)&amp;oldid=813425">https://wiki.archlinux.org/index.php?title=OpenSSH_(Español)&amp;oldid=813425</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 July 2024, at 15:06.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
