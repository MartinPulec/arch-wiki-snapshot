<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Google Authenticator (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.45.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Google_Authenticator_Español rootpage-Google_Authenticator_Español skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Instalación" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Instalaci%C3%B3n">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Instalación</span>
			</div>
		</a>
		
		<ul id="toc-Instalación-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configurando_PAM" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configurando_PAM">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Configurando PAM</span>
			</div>
		</a>
		
			<button aria-controls="toc-Configurando_PAM-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configurando PAM subsection</span>
			</button>
		
		<ul id="toc-Configurando_PAM-sublist" class="vector-toc-list">
			<li id="toc-Solicitar_OTP_solo_cuando_se_conecte_desde_fuera_de_su_red_local" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Solicitar_OTP_solo_cuando_se_conecte_desde_fuera_de_su_red_local">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Solicitar OTP solo cuando se conecte desde fuera de su red local</span>
				</div>
			</a>
			
			<ul id="toc-Solicitar_OTP_solo_cuando_se_conecte_desde_fuera_de_su_red_local-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Generar_un_archivo_de_clave_secreta" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Generar_un_archivo_de_clave_secreta">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Generar un archivo de clave secreta</span>
			</div>
		</a>
		
		<ul id="toc-Generar_un_archivo_de_clave_secreta-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configurando_su_generador_de_OTP" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configurando_su_generador_de_OTP">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Configurando su generador de OTP</span>
			</div>
		</a>
		
		<ul id="toc-Configurando_su_generador_de_OTP-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Probando" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Probando">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Probando</span>
			</div>
		</a>
		
		<ul id="toc-Probando-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Ubicación_de_almacenamiento" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Ubicaci%C3%B3n_de_almacenamiento">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Ubicación de almacenamiento</span>
			</div>
		</a>
		
		<ul id="toc-Ubicación_de_almacenamiento-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Inicios_de_sesión_del_escritorio" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Inicios_de_sesi%C3%B3n_del_escritorio">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>Inicios de sesión del escritorio</span>
			</div>
		</a>
		
		<ul id="toc-Inicios_de_sesión_del_escritorio-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Generación_de_código" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Generaci%C3%B3n_de_c%C3%B3digo">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Generación de código</span>
			</div>
		</a>
		
			<button aria-controls="toc-Generación_de_código-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Generación de código subsection</span>
			</button>
		
		<ul id="toc-Generación_de_código-sublist" class="vector-toc-list">
			<li id="toc-Gestores_de_código" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Gestores_de_c%C3%B3digo">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.1</span>
					<span>Gestores de código</span>
				</div>
			</a>
			
			<ul id="toc-Gestores_de_código-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-KeePassXC" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#KeePassXC">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.2</span>
					<span>KeePassXC</span>
				</div>
			</a>
			
			<ul id="toc-KeePassXC-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Línea_de_órdenes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#L%C3%ADnea_de_%C3%B3rdenes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">8.3</span>
					<span>Línea de órdenes</span>
				</div>
			</a>
			
			<ul id="toc-Línea_de_órdenes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar no-font-mode-scale">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Google Authenticator (Español)</span></h1>
							
</header>
				<div class="vector-column-end no-font-mode-scale">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="es" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">Esta traducción de <a href="../en/Google_Authenticator.html" title="Google Authenticator">Google Authenticator</a> fue revisada el <b>2020-12-11</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Google_Authenticator&amp;diff=0&amp;oldid=640603">cambios</a> puede <a href="../es/ArchWiki:Translation_Team/Contributing.html" title="ArchWiki:Translation Team (Español)/Contributing (Español)">actualizarla</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artículos relacionados</p>
<ul>
<li><a href="../en/Initiative_for_Open_Authentication.html" class="mw-redirect" title="OATH">OATH</a></li>
<li><a href="../en/Pam_oath.html" title="Pam oath">pam_oath</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://github.com/google/google-authenticator">Google Authenticator</a> proporciona un procedimiento de autenticación de dos pasos que utiliza códigos de acceso de un solo uso (<a href="https://en.wikipedia.org/wiki/One-time_password" class="extiw" title="wikipedia:One-time password">OTP</a>). La aplicación generadora de OTP está disponible para iOS, Android y Blackberry. El mecanismo de autenticación se integra en el sistema <a href="../es/PAM.html" title="PAM (Español)">PAM</a> de Linux. Esta guía muestra la instalación y configuración de este mecanismo.
</p>
<p>Para la operación inversa (generar códigos compatibles con Google Authenticator en Linux), véase <a href="#Generaci%C3%B3n_de_c%C3%B3digo">#Generación de código</a> a continuación.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Instalación">
<span id="Instalaci.C3.B3n"></span>Instalación</h2></div>
<p><a href="../es/Install.html" class="mw-redirect" title="Install (Español)">Instale</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libpam-google-authenticator">libpam-google-authenticator</a></span>, que proporciona el programa cliente <code>google-authenticator</code> y el módulo PAM <code>pam_google_authenticator.so</code>. La versión de desarrollo también está disponible con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/google-authenticator-libpam-git/">google-authenticator-libpam-git</a></span><sup><small>AUR</small></sup>.
</p>
<div class="mw-heading mw-heading2"><h2 id="Configurando_PAM">Configurando PAM</h2></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia</strong> Si realiza toda la configuración a través de <a href="../es/SSH.html" class="mw-redirect" title="SSH (Español)">SSH</a>, no cierre la sesión antes de comprobar que todo funciona, de lo contrario, puede bloquearse. Además, considere generar el archivo de clave antes de activar el PAM.</div>
<p>Por lo general, se requiere una autenticación de dos pasos solo para el inicio de sesión remoto. El archivo de configuración de PAM correspondiente es <code>/etc/pam.d/sshd</code>. En caso de que desee utilizar Google Authenticator globalmente, tendría que cambiar <code>/etc/pam.d/system-auth</code>, sin embargo, en este caso, proceda con extrema precaución para no bloquearse.
En esta guía, procedemos con la edición de <code>/etc/pam.d/sshd</code> que se realiza de forma más segura (pero no necesariamente) en una sesión local.
</p>
<p>Para introducir la contraseña de Unix y su OTP, añada <code>pam_google_authenticator.so</code> por encima de las líneas system-remote-login en <code>/etc/pam.d/sshd</code>:
</p>
<pre> <b>auth            required        pam_google_authenticator.so</b>
 auth            include         system-remote-login
 account         include         system-remote-login
 password        include         system-remote-login
 session         include         system-remote-login
</pre>
<p>Esto le solicitará la OTP antes de su contraseña de Unix. Cambiar el orden de los dos módulos invertirá este orden.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia</strong> Solo los usuarios que hayan generado un archivo de clave secreta (véase a continuación) podrán iniciar sesión usando SSH.</div>
<p>Para permitir el inicio de sesión con OTP o su contraseña de Unix, utilice:
</p>
<pre> auth            <b>sufficient</b>      pam_google_authenticator.so
</pre>
<p>Activar la autenticación desafío-respuesta <i>(challenge-response)</i> en <code>/etc/ssh/<b>sshd_config</b></code>:
</p>
<pre> ChallengeResponseAuthentication yes
</pre>
<p>Finalmente, <a href="../es/Reload.html" class="mw-redirect" title="Reload (Español)">reinicie</a> el servicio <code>sshd</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia</strong> OpenSSH ignorará todo esto si se autentica con un par de claves SSH y tiene los <a href="../es/OpenSSH.html#Forzamiento_de_autenticaci%C3%B3n_con_claves_p%C3%BAblicas" title="OpenSSH (Español)">inicios de sesión de contraseña desactivados</a>. Sin embargo, a partir de OpenSSH 6.2, puede añadir <code>AuthenticationMethods</code> para permitir ambas: la autenticación basada en dos factores y por clave. Véase <a href="../es/OpenSSH.html#Autenticaci%C3%B3n_de_dos_factores_y_claves_p%C3%BAblicas" title="OpenSSH (Español)">Autenticación de dos factores y claves públicas</a>
</div>
<div class="mw-heading mw-heading3"><h3 id="Solicitar_OTP_solo_cuando_se_conecte_desde_fuera_de_su_red_local">Solicitar OTP solo cuando se conecte desde fuera de su red local</h3></div>
<p>A veces, solo queremos activar la capacidad 2FA solo cuando nos conectamos desde fuera de nuestra red local.
Para lograr esto, cree un archivo (por ejemplo, <code>/etc/security/access-local.conf</code>) y añada las redes desde las que desea omitir el 2FA:
</p>
<pre># Permitir solo desde el rango de IP local
+ : ALL : 192.168.20.0/24
# Red adicional: VPN en el túnel IP (en caso de que tenga uno)
+ : ALL : 10.8.0.0/24
+ : ALL : LOCAL
- : ALL : ALL
</pre>
<p>Luego edite su <code>/etc/pam.d/sshd</code> y añada la línea:
</p>
<pre>#%PAM-1.0
#auth     required  pam_securetty.so     #disable remote root
<b>auth [success=1 default=ignore] pam_access.so accessfile=/etc/security/access-local.conf</b>
auth      required  pam_google_authenticator.so
auth      include   system-remote-login
account   include   system-remote-login
password  include   system-remote-login
session   include   system-remote-login
</pre>
<div class="mw-heading mw-heading2"><h2 id="Generar_un_archivo_de_clave_secreta">Generar un archivo de clave secreta</h2></div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia</strong> <a href="../es/Install.html" class="mw-redirect" title="Install (Español)">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qrencode">qrencode</a></span> para generar un código QR escaneable. Escanee el código QR con la aplicación autenticadora para configurar automáticamente la clave.</div>
<p>Todo usuario que quiera usar la autenticación de dos pasos necesita generar un archivo de clave secreta en su carpeta de inicio.
Esto se puede hacer muy fácilmente utilizando <i>google-authenticator</i>:
</p>
<pre>   $ google-authenticator
   Do you want authentication tokens to be time-based (y/n) y
   &lt;Here you will see generated QR code&gt;
   Your new secret key is: ZVZG5UZU4D7MY4DH
   Your verification code is 269371
   Your emergency scratch codes are:
     70058954
     97277505
     99684896
     56514332
     82717798
   
   Do you want me to update your "/home/username/.google_authenticator" file (y/n) y
   
   Do you want to disallow multiple uses of the same authentication
   token? This restricts you to one login about every 30s, but it increases
   your chances to notice or even prevent man-in-the-middle attacks (y/n) y
   
   By default, tokens are good for 30 seconds and in order to compensate for
   possible time-skew between the client and the server, we allow an extra
   token before and after the current time. If you experience problems with poor
   time synchronization, you can increase the window from its default
   size of 1:30min to about 4min. Do you want to do so (y/n) n
   
   If the computer that you are logging into is not hardened against brute-force
   login attempts, you can enable rate-limiting for the authentication module.
   By default, this limits attackers to no more than 3 login attempts every 30s.
   Do you want to enable rate-limiting (y/n) y
</pre>
<p>Se recomienda <b>guardar los códigos de emergencia de manera segura</b> (imprimirlos y guardarlos en un lugar seguro) ya que son su única forma de iniciar sesión (a través de SSH) cuando pierda su teléfono móvil (es decir, su generador de OTP). También se almacenan en <code>~/.google_authenticator</code>, por lo que puede buscarlos en cualquier momento siempre y cuando haya iniciado sesión.
</p>
<div class="mw-heading mw-heading2"><h2 id="Configurando_su_generador_de_OTP">Configurando su generador de OTP</h2></div>
<p>Instale una aplicación generadora en su teléfono móvil (por ejemplo):
</p>
<ul>
<li>
<b>FreeOTP</b> para <a rel="nofollow" class="external text" href="https://play.google.com/store/apps/details?id=org.fedorahosted.freeotp">Android</a>/<a rel="nofollow" class="external text" href="https://itunes.apple.com/es/app/freeotp-authenticator/id872559395">iOS</a>.</li>
<li>
<b>Google Authenticator</b> para <a rel="nofollow" class="external text" href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2">Android</a>/<a rel="nofollow" class="external text" href="https://itunes.apple.com/es/app/google-authenticator/id388497605">iOS</a>.</li>
</ul>
<p>En la aplicación móvil, cree una nueva cuenta y, o bien escanee el código QR de la URL que le indicaron al generar el archivo de clave secreta, o introduzca manualmente la clave secreta (en el ejemplo anterior 'ZVZG5UZU4D7MY4DH').
</p>
<p>Ahora debería ver un nuevo token de código de acceso que se genera cada 30 segundos en su teléfono.
</p>
<div class="mw-heading mw-heading2"><h2 id="Probando">Probando</h2></div>
<p>Conecte por SSH a su host desde otra máquina y/o desde otra ventana de terminal:
</p>
<pre> $ ssh hostname
 login as: &lt;usuario&gt;
 Verification code: &lt;generado/emergencia&gt;
 Password: &lt;contraseña&gt;
 $
</pre>
<div class="mw-heading mw-heading2"><h2 id="Ubicación_de_almacenamiento">
<span id="Ubicaci.C3.B3n_de_almacenamiento"></span>Ubicación de almacenamiento</h2></div>
<p>Si desea cambiar la ruta de almacenamiento de los archivos de clave secreta, puede utilizar la opción <code>--secret</code>:
</p>
<pre>$ google-authenticator --secret="/<b>RUTA_CARPETA</b>/<b>USUARIO</b>"
</pre>
<p>Entonces, no olvide cambiar la ruta de ubicación de PAM, en <code>/etc/pam.d/sshd</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pam.d/sshd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">auth required pam_google_authenticator.so user=root secret=/<b>RUTA_CARPETA</b>/${USER}</pre>
<p><code>user=root</code> se utiliza para forzar a PAM a buscar el archivo utilizando un superusuario.
</p>
<p>Además, tenga cuidado con los permisos del archivo de clave secreta. De hecho, el archivo <b>debe</b> ser solo legible por el propietario (chmod: <code>400</code>). Aquí, el propietario es el superusuario <i>(root)</i>.
</p>
<pre>$ chown root.root /<b>RUTA_ARCHIVO</b>/<b>ARCHIVOS_CLAVE_SECRETA</b>
  chmod 400 /<b>RUTA_ARCHIVO</b>/<b>ARCHIVOS_CLAVE_SECRETA</b>
</pre>
<div class="mw-heading mw-heading2"><h2 id="Inicios_de_sesión_del_escritorio">
<span id="Inicios_de_sesi.C3.B3n_del_escritorio"></span>Inicios de sesión del escritorio</h2></div>
<p>El complemento PAM de Google Authenticator también se puede utilizar para inicios de sesión de consola y con GDM. Simplemente añada lo siguiente a <code>/etc/pam.d/login</code> o al archivo <code>/etc/pam.d/gdm-password</code>:
</p>
<pre>   auth required pam_google_authenticator.so
</pre>
<div class="mw-heading mw-heading2"><h2 id="Generación_de_código">
<span id="Generaci.C3.B3n_de_c.C3.B3digo"></span>Generación de código</h2></div>
<p>Si tiene Google Authenticator configurado con otros sistemas, perder su dispositivo puede impedirle iniciar sesión en estos. Tener formas adicionales de generar los códigos puede ser útil.
</p>
<div class="mw-heading mw-heading3"><h3 id="Gestores_de_código">
<span id="Gestores_de_c.C3.B3digo"></span>Gestores de código</h3></div>
<p>Una script que permite la visualización, generación, almacenamiento y gestión de códigos de autenticación de Google está disponible en AUR (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gashell/">gashell</a></span><sup><small>AUR</small></sup>). Alternativamente, también está auther (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/auther-git/">auther-git</a></span><sup><small>AUR</small></sup>).
</p>
<div class="mw-heading mw-heading3"><h3 id="KeePassXC">KeePassXC</h3></div>
<p>El gestor de contraseñas GUI <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=keepassxc">keepassxc</a></span> permite asociar a sus entradas códigos de Google Authenticator, y luego puede generar códigos OTP y exportar sus claves vía código QR.
</p>
<div class="mw-heading mw-heading3"><h3 id="Línea_de_órdenes">
<span id="L.C3.ADnea_de_.C3.B3rdenes"></span>Línea de órdenes</h3></div>
<p>La forma más fácil de generar códigos es con <code>oath-tool</code>. Está disponible en el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=oath-toolkit">oath-toolkit</a></span>, y se puede utilizar de la siguiente manera:
</p>
<pre>oathtool --totp -b ABC123
</pre>
<p>Donde <code>ABC123</code> es la clave secreta.
</p>
<p>En la mayoría de los sistemas Android con acceso de usuario suficiente, la base de datos de Google Authenticator se puede copiar del dispositivo y acceder directamente, ya que es una base de datos sqlite3. Este script de shell leerá una base de datos de Google Authenticator y generará códigos en vivo para cada clave encontrada:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">google-authenticator.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

# Esta es la ruta al archivo de la aplicación Google Authenticator. Se suele ubicar
# en /data bajo Android. Cópielo en su PC en un lugar seguro y especifique la
# ruta aquí.
DB="/ruta/a/com.google.android.apps.authenticator/databases/databases"

sqlite3 "$DB" 'SELECT email,secret FROM accounts;' | while read A
do
        NAME=`echo "$A" | cut -d '|' -f 1`
        KEY=`echo "$A" | cut -d '|' -f 2`
        CODE=`oathtool --totp -b "$KEY"`
        echo -e "\e[1;32m$CODE\e[0m - \e[1;33m$NAME\e[0m"
done</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../es/Category:Authentication.html" title="Category:Authentication (Español)">Authentication (Español)</a></li>
<li><a href="../es/Category:Google.html" title="Category:Google (Español)">Google (Español)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Google_Authenticator_(Espa%C3%B1ol)&amp;oldid=755169">https://wiki.archlinux.org/index.php?title=Google_Authenticator_(Español)&amp;oldid=755169</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 October 2022, at 23:26.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container no-font-mode-scale">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input mw-searchInput" autocomplete="off" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Google Authenticator (Español)</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only reading-lists-bookmark" id="ca-bookmark-sticky-header" tabindex="-1" data-event-name="watch-sticky-bookmark"><span class="vector-icon mw-ui-icon-wikimedia-bookmarkOutline mw-ui-icon-wikimedia-wikimedia-bookmarkOutline"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
