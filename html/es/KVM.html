<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>KVM (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-KVM_Español rootpage-KVM_Español skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Comprobar_soporte_para_KVM" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Comprobar_soporte_para_KVM">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Comprobar soporte para KVM</div>
		</a>
		
			<button aria-controls="toc-Comprobar_soporte_para_KVM-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Comprobar soporte para KVM subsection</span>
			</button>
		
		<ul id="toc-Comprobar_soporte_para_KVM-sublist" class="vector-toc-list">
			<li id="toc-Soporte_de_hardware" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Soporte_de_hardware">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Soporte de hardware</div>
			</a>
			
			<ul id="toc-Soporte_de_hardware-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Soporte_en_el_kernel" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Soporte_en_el_kernel">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Soporte en el kernel</div>
			</a>
			
			<ul id="toc-Soporte_en_el_kernel-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Paravirtualización_con_Virtio" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Paravirtualizaci%C3%B3n_con_Virtio">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Paravirtualización con Virtio</div>
		</a>
		
			<button aria-controls="toc-Paravirtualización_con_Virtio-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Paravirtualización con Virtio subsection</span>
			</button>
		
		<ul id="toc-Paravirtualización_con_Virtio-sublist" class="vector-toc-list">
			<li id="toc-Soporte_en_el_kernel_2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Soporte_en_el_kernel_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Soporte en el kernel</div>
			</a>
			
			<ul id="toc-Soporte_en_el_kernel_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Lista_de_dispositivos_paravirtualizados" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Lista_de_dispositivos_paravirtualizados">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Lista de dispositivos paravirtualizados</div>
			</a>
			
			<ul id="toc-Lista_de_dispositivos_paravirtualizados-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Como_usar_KVM" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Como_usar_KVM">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Como usar KVM</div>
		</a>
		
		<ul id="toc-Como_usar_KVM-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Consejos_y_trucos" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Consejos_y_trucos">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Consejos y trucos</div>
		</a>
		
			<button aria-controls="toc-Consejos_y_trucos-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Consejos y trucos subsection</span>
			</button>
		
		<ul id="toc-Consejos_y_trucos-sublist" class="vector-toc-list">
			<li id="toc-Virtualización_anidada" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Virtualizaci%C3%B3n_anidada">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Virtualización anidada</div>
			</a>
			
			<ul id="toc-Virtualización_anidada-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Activando_páginas_enormes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Activando_p%C3%A1ginas_enormes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Activando páginas enormes</div>
			</a>
			
			<ul id="toc-Activando_páginas_enormes-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Secure_Boot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Secure_Boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Secure Boot</div>
			</a>
			
			<ul id="toc-Secure_Boot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Véase_también" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#V%C3%A9ase_tambi%C3%A9n">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Véase también</div>
		</a>
		
		<ul id="toc-Véase_también-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">KVM (Español)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/KVM.html" title="KVM – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/KVM" title="KVM – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/KVM" title="KVM – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="es" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">Esta traducción de <a href="../en/KVM.html" title="KVM">KVM</a> fue revisada el <b>2024-02-19</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=KVM&amp;diff=0&amp;oldid=794581">cambios</a> puede <a href="../es/ArchWiki:Translation_Team/Contributing.html" title="ArchWiki:Translation Team (Español)/Contributing (Español)">actualizarla</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artículos relacionados</p>
<ul>
<li><a href="../es/Category:Hypervisors.html" title="Category:Hypervisors (Español)">Categoría:Hipervisores</a></li>
<li><a href="../en/Libvirt.html" title="Libvirt">Libvirt</a></li>
</ul>
</div>
<p><b>KVM</b>, la <a href="https://en.wikipedia.org/wiki/es:Kernel-based_Virtual_Machine" class="extiw" title="wikipedia:es:Kernel-based Virtual Machine">Maquina virtual basada en el kernel <i>(Kernel-based Virtual Machine)</i></a> es un <a href="https://en.wikipedia.org/wiki/es:Hipervisor" class="extiw" title="wikipedia:es:Hipervisor">hipervisor</a> integrado al kernel de Linux. Es parecido en propósito a <a href="../en/Xen.html" class="mw-redirect" title="Xen (Español)">Xen</a> pero es mucho mas fácil de hacer andar. A diferencia <a href="../es/QEMU.html" title="QEMU (Español)">QEMU</a>, el cual ocupa emulación, KVM es un modo de operación especial de QEMU que usa extensiones de CPU (<a href="https://en.wikipedia.org/wiki/Hardware-assisted_virtualization" class="extiw" title="wikipedia:Hardware-assisted virtualization">Virtualización asistida por hardware <i>HVM</i></a>) para la virtualización con el modulo del kernel.
</p>
<p>Al usar KVM, se pueden ejecutar varias maquinas virtuales ejecutando GNU/Linux, Windows o cualquier otro sistema operativo sin ser modificado. (véase el <a rel="nofollow" class="external text" href="https://www.linux-kvm.org/page/Guest_Support_Status">Estatus de Soporte de Sistema Operativo Invitado</a> para mas información). Cada maquina virtual tiene su propio hardware virtualizado: una tarjeta de red, disco, tarjeta grafica, etc.
</p>
<p>Puede encontrar las diferencias entre KVM y <a href="../en/Xen.html" class="mw-redirect" title="Xen (Español)">Xen</a>, <a href="../en/VMware.html" title="VMware">VMware</a> o QEMU en <a rel="nofollow" class="external text" href="https://www.linux-kvm.org/page/FAQ#General_KVM_information">la pagina de preguntas y respuestas frecuentes de KVM</a>.
</p>
<p>Este articulo no cubre las características de distintos emuladores usando KVM como base. Usted debe ver los artículos relacionados para esa información.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Comprobar_soporte_para_KVM">Comprobar soporte para KVM</span></h2>
<h3><span class="mw-headline" id="Soporte_de_hardware">Soporte de hardware</span></h3>
<p>KVM requiere que el procesador del <i>host</i> tenga soporte para virtualización (llamado Vt-x en los procesadores Intel y AMD-V para los AMD). Puede ver su si procesador tiene soporte para virtualización por hardware con el siguiente comando:
</p>
<pre>$ LC_ALL=C lscpu | grep Virtualization
</pre>
<p>Y, alternativamente:
</p>
<pre>$ grep -E --color=auto 'vmx|svm|0xc0f' /proc/cpuinfo
</pre>
<p>Si al ejecutar cualquiera de los dos comandos no obtiene alguna salida, su procesador <b>no</b> soporta virtualización por hardware , y <b>no</b> podrá usar KVM.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Puede que tenga que activar el soporte para virtualizado en su BIOS. Todos los procesadores x86_64 manufacturador por AMD y Intel en los últimos 10 años soportas virtualización. Si pareciera como que su procesador no soporta virtualización, es casi seguro que esta desactivado en la BIOS.</div>
<h3><span class="mw-headline" id="Soporte_en_el_kernel">Soporte en el kernel</span></h3>
<p>Arch Linux provee los <a href="../es/Kernel_module.html" class="mw-redirect" title="Kernel modules (Español)">módulos para el kernel</a> necesarios para soportar KVM.
</p>
<ul><li>Usted puede comprobar si los módulos necesarios (<code>kvm</code> y/o <code>kvm_amd</code> o <code>kvm_intel</code>) están disponibles en el kernel con el siguiente comando:</li></ul>
<pre>$ zgrep CONFIG_KVM= /proc/config.gz
</pre>
<ul><li>Entonces, asegúrese que los módulos sean cargados automáticamente con el comando:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lsmod | grep kvm</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kvm_intel             245760  0
kvmgt                  28672  0
mdev                   20480  2 kvmgt,vfio_mdev
vfio                   32768  3 kvmgt,vfio_mdev,vfio_iommu_type1
kvm                   737280  2 kvmgt,kvm_intel
irqbypass              16384  1 kvm
</pre>
<p>Si el comando no devuelve nada, el modulo necesita ser cargado manualmente; véase <a href="../es/Kernel_module.html#Manejo_manual_de_m%C3%B3dulos" title="Kernel module (Español)">Kernel module (Español)#Manejo manual de módulos</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Sugerencia:</strong> Si falla al intentar cargar <i>(modprobe)</i> <code>kvm_intel</code> o <code>kvm_amd</code>, pero no con <code>kvm</code>, y <code>lscpu</code> dice que la aceleración por hardware si esta soportada, véase la configuración del BIOS. Algunos fabricantes, especialmente los de laptops, desactivan estas extensiones del procesador por defecto. Para determinar si es que no hay soporte hardware o su las extensiones están desactivadas en la BIOS, la salida de <a href="../es/Core_utilities.html#Esenciales" class="mw-redirect" title="Dmesg (Español)">dmesg</a> después de haberlas cargado lo va a confirmar.</div>
<h2>
<span id="Paravirtualizaci.C3.B3n_con_Virtio"></span><span class="mw-headline" id="Paravirtualización_con_Virtio">Paravirtualización con Virtio</span>
</h2>
<p>La paravirtualización provee un medio de comunicación rápido y eficiente para los sistemas huésped <i>(guests)</i> para usar los dispositivos de la maquina anfitriona <i>(host)</i>. KVM provee dispositivos paravirtualizados a las maquinas virtuales usando la <i>API (Application Programming Interfase: Interfaz de Programación de aplicaciones)</i> de Virtio como una capa entre el hipervisor y el invitado.
</p>
<p>Todos los dispositivos Virtio tienen dos partes: el dispositivo anfitrión y el controlador huésped.
</p>
<h3><span class="mw-headline" id="Soporte_en_el_kernel_2">Soporte en el kernel</span></h3>
<p>Use el siguiente comando para ver si los módulos VIRTIO están disponibles en el kernel <b>dentro de la maquina virtual</b>:
</p>
<pre>$ zgrep VIRTIO /proc/config.gz
</pre>
<p>Y, revise si los módulos del kernel son cargados automáticamente con el comando:
</p>
<pre>$ lsmod | grep virtio
</pre>
<p>El en caso de que los comandos anteriores no devuelvan nada, tiene que <a href="../es/Kernel_module.html#Manejo_manual_de_m%C3%B3dulos" title="Kernel module (Español)">cargar los módulos</a> manualmente.
</p>
<h3><span class="mw-headline" id="Lista_de_dispositivos_paravirtualizados">Lista de dispositivos paravirtualizados</span></h3>
<ul>
<li>dispositivo de red (virtio-net)</li>
<li>dispositivo de bloque (virtio-blk)</li>
<li>dispositivo controlador (virtio-scsi)</li>
<li>dispositivo serial (virtio-serial)</li>
<li>dispositivo balón <i>(balloon device)</i> (virtio-balloon)</li>
</ul>
<h2><span class="mw-headline" id="Como_usar_KVM">Como usar KVM</span></h2>
<p>Véase el articulo principal: <a href="../es/QEMU.html" title="QEMU (Español)">QEMU (Español)</a>.
</p>
<h2><span class="mw-headline" id="Consejos_y_trucos">Consejos y trucos</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Véase <a href="../es/QEMU.html#Consejos_y_trucos" title="QEMU (Español)">QEMU (Español)#Consejos y trucos</a> y <a href="../es/QEMU.html#Soluci%C3%B3n_de_problemas" title="QEMU (Español)">QEMU (Español)#Solución de problemas</a> para consejos y trucos generales.</div>
<h3>
<span id="Virtualizaci.C3.B3n_anidada"></span><span class="mw-headline" id="Virtualización_anidada">Virtualización anidada</span>
</h3>
<p>La virtualización anidada permite que maquinas virtuales existentes puedan ser ejecutadas en hipervisores de terceros y en otra nubes sin alguna modificación a la maquina virtual original o su funcionamiento de red.
</p>
<p>Active la función de virtualización anidada en el anfitrión para <code>kvm_intel</code>:
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se puede hacer lo mismo para AMD, solo reemplace <code>intel</code> con <code>amd</code> donde sea necesario.</div>
<pre># modprobe -r kvm_intel
# modprobe kvm_intel nested=1
</pre>
<p>Para hacerlo permanente (Véase <a href="../es/Kernel_module.html#Configurar_las_opciones_del_m%C3%B3dulo" title="Kernel module (Español)">Kernel module (Español)#Configurar las opciones del módulo</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/kvm_intel.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options kvm_intel nested=1</pre>
<p>Verifique que la función este activada:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /sys/module/kvm_intel/parameters/nested</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Y</pre>
<p>Active el modo de "host passthrough" <i>(paso sobre el anfitrión)</i> para enviar todas las características de la CPU al sistema anfitrión:
</p>
<ol>
<li>Si esta usando <a href="../es/QEMU.html" title="QEMU (Español)">QEMU</a>, ejecute la maquina virtual con el siguiente comando: <code>qemu-system-x86_64 -enable-kvm -cpu host</code>.</li>
<li>Si usa <i>virt-manager</i>, cambie el modelo de la CPU a <code>host-passthrough</code>.</li>
<li>Si esta usando <i>virsh</i>, use <code>virsh edit <i>vm-name</i></code> y cambie la linea de CPU a <code>&lt;cpu mode='host-passthrough' check='partial'/&gt;</code>
</li>
</ol>
<p>Inicie la maquina virtual y compruebe que la propiedad <code>vmx</code> este presente:
</p>
<pre>$ grep -E --color=auto 'vmx|svm' /proc/cpuinfo
</pre>
<h3>
<span id="Activando_p.C3.A1ginas_enormes"></span><span class="mw-headline" id="Activando_páginas_enormes">Activando páginas enormes</span>
</h3>
<p>Puede activar las <i>hugepages</i> para mejorar el rendimiento de su maquina virtual.
Con una maquina con Arch Linux actualizado y KVM funcional probablemente ya tiene todo lo que necesita. Compruebe su tiene el directorio <code>/dev/hugepages</code>. Si no lo tiene, creelo. Ahora necesita establecer los permisos apropiados para usar ese directorio. Los permisos por defecto son el <i>uid (User Identifier: Identificador de Usuario)</i> y el <i>gid (Group Identifier: Identificador del Grupo)</i> del usuario <i>root</i> con 0755, pero queremos que cualquiera en el grupo <code>kvm</code> tenga acceso a las <i>hugepages</i>.
</p>
<p>Añada a su <code>/etc/fstab</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">hugetlbfs       /dev/hugepages  hugetlbfs       mode=01770,gid=kvm        0 0</pre>
<p>En lugar de especificar el nombre del grupo directamente, con <code>gid=kvm</code>, puede especificar el gid como un número, pero el <i>gid</i> debe ser igual al del grupo <code>kvm</code>. El modo <code>1770</code> permite que cualquiera en el grupo crear archivos, pero no desenlazar o renombrar los archivos de otros. Asegúrese que <code>/dev/hugepages</code> este correctamente montado:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># umount /dev/hugepages
# mount /dev/hugepages
$ mount | grep huge</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">hugetlbfs on /dev/hugepages type hugetlbfs (rw,relatime,mode=1770,gid=78)</pre>
<p>Ahora puede calcular cuantas <i>hugepages</i> va a necesitar. Véase que tan grandes son sus <i>hugepages</i>:
</p>
<pre>$ grep Hugepagesize /proc/meminfo
</pre>
<p>Normalmente, el tamaño debería ser de 2048 kB (que corresponde a 2 MB). Digamos que quiere ejecutar su maquina virtual con 1024 MB, así que divide 1024 / 2 = 512 y lo aumenta un poco para redondearlo a 550. Ahora establezca la cantidad de <i>hugepages</i> que quiere:
</p>
<pre>echo 550 &gt; /proc/sys/vm/nr_hugepages
</pre>
<p>Si tiene suficiente espacio libre, debería ver lo siguiente:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ grep HugePages_Total /proc/meminfo</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HugesPages_Total:  550
</pre>
<p>Si obtiene un numero menor, cierre algunas aplicaciones o inicie su maquina virtual con menos memoria (numero_de_<i>hugepages</i> x 2):
</p>
<pre>$ qemu-system-x86_64 -enable-kvm -m 1024 -mem-path /dev/hugepages -hda &lt;disk_image&gt; [...]
</pre>
<p>Fíjese en el parámetro <code>-mem-path</code>. Este hará uso de las <i>hugepages</i>.
</p>
<p>Mientras que su maquina virtual se esta ejecutando, puede comprobar cuantas <i>hugepages</i> están siendo usadas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ grep HugePages /proc/meminfo</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HugePages_Total:     550
HugePages_Free:       48
HugePages_Rsvd:        6
HugePages_Surp:        0
</pre>
<p>Ahora que todo parece funcionar, puede activar las <i>hugepages</i> por defecto. Añada a su <code>/etc/sysctl.d/40-hugepage.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/40-hugepage.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.nr_hugepages = 550</pre>
<p>Véase tambien:
</p>
<ul>
<li><a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/mm/hugetlbpage.html">Sumario de soporte de hugetlbpage en el kernel de Linux <i>(en inglés)</i></a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.debian.org/Hugepages">Debian Wiki - Hugepages <i>(en inglés)</i></a></li>
</ul>
<p><br>
</p>
<h3><span class="mw-headline" id="Secure_Boot">Secure Boot</span></h3>
<p>KVM Secure boot tiene algunos requisitos antes de poder activarse: 
</p>
<ol>
<li>Debe utilizar una UEFI con soporte de arranque seguro compilado.</li>
<li>La UEFI debe tener claves registradas.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Actualmente, Arch Linux no tiene una clave de inicio segura a diferencia de distribuciones como Fedora. Si tiene la intención de iniciar de forma segura Arch Linux, debe crear su propia clave de firma y firmar su kernel después de seguir los pasos a continuación. Véase <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html" title="Unified Extensible Firmware Interface/Secure Boot">Unified Extensible Firmware Interface/Secure Boot</a> para más información.</div>
<p>Para activar UEFI con soporte de arranque seguro, instale <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=edk2-ovmf">edk2-ovmf</a></span> y configure su máquina virtual para utilizar UEFI activado para arranque seguro. Si está utilizando <a href="../en/Libvirt.html" title="Libvirt">libvirt</a>, puede hacerlo añadiendo lo siguiente a la configuración XML de su máquina virtual.
</p>
<pre>&lt;os firmware="efi"&gt;
  &lt;loader readonly="yes" secure="yes" type="pflash"&gt;/usr/share/edk2/x64/OVMF_CODE.secboot.4m.fd&lt;/loader&gt;
&lt;/os&gt;</pre>
<p>A continuación, debe registrar algunas claves. En este ejemplo registraremos las claves de inicio seguras de Microsoft y Redhat. Instale <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=virt-firmware">virt-firmware</a></span> y ejecute lo siguiente. Reemplace <code><i>vm_name</i></code> con el nombre de su máquina virtual.
</p>
<pre>$ virt-fw-vars --input /var/lib/libvirt/qemu/nvram/<i>vm_name</i>_VARS.fd --output /var/lib/libvirt/qemu/nvram/<i>vm_name</i>_SECURE_VARS.fd --secure-boot --enroll-redhat
</pre>
<p>Luego edite la configuración XML de libvirt de su máquina virtual para que apunte al nuevo archivo VARS.
</p>
<pre>&lt;os firmware="efi"&gt;
  &lt;loader readonly="yes" secure="yes" type="pflash"&gt;/usr/share/edk2/x64/OVMF_CODE.secboot.4m.fd&lt;/loader&gt;
  &lt;nvram template="/usr/share/edk2/x64/OVMF_VARS.4m.fd"&gt;/var/lib/libvirt/qemu/nvram/<b>{vm-name}</b>_SECURE_VARS.fd&lt;/nvram&gt;
&lt;/os&gt;</pre>
<p>Después de este arranque seguro debería activarse automáticamente. Puede volver a comprobarlo entrando al BIOS de la máquina virtual presionando <code>F2</code> cuando vea el logotipo de inicio UEFI.
</p>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.linux-kvm.org/page/HOWTO">Indice de tutoriales de KVM <i>(en inglés)</i></a></li>
<li><a rel="nofollow" class="external text" href="https://www.linux-kvm.org/page/FAQ#General_KVM_information">Preguntas y respuestas frecuentes de KVM <i>(en inglés)</i></a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../es/Category:Hypervisors.html" title="Category:Hypervisors (Español)">Hypervisors (Español)</a></li>
<li><a href="../es/Category:Kernel.html" title="Category:Kernel (Español)">Kernel (Español)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=KVM_(Espa%C3%B1ol)&amp;oldid=800783">https://wiki.archlinux.org/index.php?title=KVM_(Español)&amp;oldid=800783</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 19 February 2024, at 10:38.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
