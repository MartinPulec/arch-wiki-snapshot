<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>pacman (Español)/Package signing (Español) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pacman_Español_Package_signing_Español rootpage-Pacman_Español skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Configuración" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configuraci%C3%B3n">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Configuración</div>
		</a>
		
			<button aria-controls="toc-Configuración-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuración subsection</span>
			</button>
		
		<ul id="toc-Configuración-sublist" class="vector-toc-list">
			<li id="toc-Configurar_pacman" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configurar_pacman">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Configurar pacman</div>
			</a>
			
			<ul id="toc-Configurar_pacman-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Inicializar_el_depósito_de_claves" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Inicializar_el_dep%C3%B3sito_de_claves">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Inicializar el depósito de claves</div>
			</a>
			
			<ul id="toc-Inicializar_el_depósito_de_claves-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Gestionar_el_depósito_de_claves" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Gestionar_el_dep%C3%B3sito_de_claves">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Gestionar el depósito de claves</div>
		</a>
		
			<button aria-controls="toc-Gestionar_el_depósito_de_claves-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Gestionar el depósito de claves subsection</span>
			</button>
		
		<ul id="toc-Gestionar_el_depósito_de_claves-sublist" class="vector-toc-list">
			<li id="toc-Verificar_las_claves_maestras" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Verificar_las_claves_maestras">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Verificar las claves maestras</div>
			</a>
			
			<ul id="toc-Verificar_las_claves_maestras-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Añadir_las_claves_de_los_desarrolladores" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#A%C3%B1adir_las_claves_de_los_desarrolladores">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Añadir las claves de los desarrolladores</div>
			</a>
			
			<ul id="toc-Añadir_las_claves_de_los_desarrolladores-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Añadir_claves_no_oficiales" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#A%C3%B1adir_claves_no_oficiales">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Añadir claves no oficiales</div>
			</a>
			
			<ul id="toc-Añadir_claves_no_oficiales-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Depurar_errores_con_gpg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Depurar_errores_con_gpg">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Depurar errores con gpg</div>
			</a>
			
			<ul id="toc-Depurar_errores_con_gpg-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solución_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Soluci%C3%B3n_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Solución de problemas</div>
		</a>
		
			<button aria-controls="toc-Solución_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solución de problemas subsection</span>
			</button>
		
		<ul id="toc-Solución_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-No_se_pueden_importar_las_claves" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#No_se_pueden_importar_las_claves">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>No se pueden importar las claves</div>
			</a>
			
			<ul id="toc-No_se_pueden_importar_las_claves-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desactivar_la_comprobación_de_las_firmas" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desactivar_la_comprobaci%C3%B3n_de_las_firmas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Desactivar la comprobación de las firmas</div>
			</a>
			
			<ul id="toc-Desactivar_la_comprobación_de_las_firmas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restablecer_todas_las_claves" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restablecer_todas_las_claves">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Restablecer todas las claves</div>
			</a>
			
			<ul id="toc-Restablecer_todas_las_claves-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Eliminar_paquetes_inservibles" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Eliminar_paquetes_inservibles">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Eliminar paquetes inservibles</div>
			</a>
			
			<ul id="toc-Eliminar_paquetes_inservibles-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-La_firma_es_de_confianza_desconocida" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#La_firma_es_de_confianza_desconocida">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>La firma es de confianza desconocida</div>
			</a>
			
			<ul id="toc-La_firma_es_de_confianza_desconocida-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Actualizar_claves_a_través_de_proxy" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Actualizar_claves_a_trav%C3%A9s_de_proxy">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Actualizar claves a través de proxy</div>
			</a>
			
			<ul id="toc-Actualizar_claves_a_través_de_proxy-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Véase_también" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#V%C3%A9ase_tambi%C3%A9n">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Véase también</div>
		</a>
		
		<ul id="toc-Véase_también-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">pacman (Español)/Package signing (Español)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 8 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-8" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">8 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Pacman-key" title="Pacman-key – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../../en/Pacman/Package_signing.html" title="Pacman/Package signing – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../../fr/Pacman/Package_signing.html" title="Pacman (Français)/Package signing – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-it mw-list-item"><a href="../../it/Pacman/Package_signing.html" title="Pacman (Italiano)/Package signing – italiano" lang="it" hreflang="it" class="interlanguage-link-target"><span>Italiano</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Pacman/%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E7%BD%B2%E5%90%8D" title="Pacman/パッケージの署名 – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-pt mw-list-item"><a href="../../pt/Pacman/Package_signing.html" title="Pacman (Português)/Package signing – português" lang="pt" hreflang="pt" class="interlanguage-link-target"><span>Português</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../../ru/Pacman/Package_signing.html" title="Pacman (Русский)/Package signing – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Pacman/Package_signing" title="Pacman/Package signing – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../es/Pacman.html" title="Pacman (Español)">Pacman (Español)</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="es" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">Esta traducción de <a href="../../en/Pacman/Package_signing.html" title="Pacman/Package signing">Pacman/Package signing</a> fue revisada el <b>2018-11-18</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Pacman/Package_signing&amp;diff=0&amp;oldid=551079">cambios</a> puede <a href="../../es/ArchWiki:Translation_Team/Contributing.html" title="ArchWiki:Translation Team (Español)/Contributing (Español)">actualizarla</a> o avisar al <a href="../../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artículos relacionados</p>
<ul>
<li><a href="../../en/GnuPG.html" class="mw-redirect" title="GnuPG (Español)">GnuPG (Español)</a></li>
<li><a href="../../en/ArchWiki:Archive.html" class="mw-redirect" title="DeveloperWiki:Package signing">DeveloperWiki:Package signing</a></li>
</ul>
</div>
<p><i>pacman</i> se sirve de <a rel="nofollow" class="external text" href="https://www.gnupg.org/">claves GnuPG</a> siguiendo el modelo de la <a rel="nofollow" class="external text" href="https://www.gnupg.org/gph/en/manual.html#AEN385">red de confianza</a> para comprobar la autenticidad de los paquetes. Actualmente hay cinco claves maestras que se encuentran <a rel="nofollow" class="external text" href="https://archlinux.org/master-keys/">aquí</a>. Se usan por lo menos tres de esas Claves Maestras para firmar los paquetes de los desarrolladores oficiales y las subclaves de los usuarios de confianza o TUs —del inglés: <i>trusted user</i>— con las que estos firman sus paquetes. El usuario también posee una clave PGP exclusiva que se genera cuando se configura pacman-key. La clave del usuario queda enlazada por tanto a las cinco Claves Maestras. 
</p>
<p>Ejemplos de redes de confianza:
</p>
<ul>
<li>
<b>paquetes personalizados</b>: el usuario elabora el paquete y lo firma con su clave personal.</li>
<li>
<b>paquetes no oficiales</b>: paquetes creados y firmados por desarrolladores. El usuario usa su clave personal para firmar las de cada uno de esos desarrolladores.</li>
<li>
<b>paquetes oficiales</b>: paquetes creados y firmados por desarrolladores. Las claves de esos desarrolladores se firmaron previamente usando las claves maestras de Arch Linux. El usuario usa su clave para firmar las claves maestras y, por tanto, tiene plena confianza en los desarrolladores.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> El protocolo HKP utiliza el puerto 11371/tcp para establecer la conexión. Este puerto es necesario para obtener las claves firmadas de los servidores mediante pacman-key.</div>
<meta property="mw:PageProp/toc">
<h2>
<span id="Configuraci.C3.B3n"></span><span class="mw-headline" id="Configuración">Configuración</span>
</h2>
<h3><span class="mw-headline" id="Configurar_pacman">Configurar pacman</span></h3>
<p>La opción <code>SigLevel</code> en <code>/etc/pacman.conf</code> será la que determine el nivel de confianza a la hora de instalar un paquete. Para una explicación más detallada de SigLevel, consulte el <a rel="nofollow" class="external text" href="https://archlinux.org/pacman/pacman.conf.5.html#_package_and_database_signature_checking">manual de pacman.conf</a> y los comentarios del mismo. La comprobación del firmado de claves se puede establecer de forma global o por repositorio. En caso de configurar SigLevel globalmente en la sección [options] para exigir que todos los paquetes estén firmados, los paquetes que el usuario compile también tendrán que estar firmados usando <code>makepkg</code>. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Aunque todos los paquetes oficiales están firmados; a fecha de junio de 2012, la firma de la bases de datos de paquetes está todavía en proceso. Si se especifica <code>Required</code> entonces también hay que poner <code>DatabaseOptional</code>.</div>
<p>Se puede usar una configuración predeterminada para instalar únicamente paquetes firmados por claves de confianza:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SigLevel = Required DatabaseOptional</pre>
<p>Esto se debe a que <code>TrustedOnly</code> es un parámetro <i>pacman</i> predeterminado en su compilación. Así que lo anterior conduce al mismo resultado que el ajuste global de:
</p>
<pre>SigLevel = Required DatabaseOptional TrustedOnly
</pre>
<p>Lo anterior también se puede lograr en un nivel más abajo del repositorio  en la configuración del archivo, por ejemplo:
</p>
<pre>[core]
SigLevel = PackageRequired
Include = /etc/pacman.d/mirrorlist
</pre>
<p>agrega explícitamente la comprobación de firmas para los paquetes en cuestión del repositorio, pero no requiere que la base de datos esté firmada. <code>Optional</code> aquí desactivaría un <code>Required</code> global para este repositorio.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> La opción <code>TrustAll</code> de SigLevel solamente existe para fines de depuración de código y hace que sea muy fácil confiar en claves que no se han verificado. Hay que usar <code>TrustedOnly</code> solo para los repositorios oficiales.</div>
<h3>
<span id="Inicializar_el_dep.C3.B3sito_de_claves"></span><span class="mw-headline" id="Inicializar_el_depósito_de_claves">Inicializar el depósito de claves</span>
</h3>
<p>Para configurar el depósito de claves de <i>pacman</i> hay que ejecutar:
</p>
<pre># pacman-key --init
</pre>
<p>Arch Linux necesita <a href="https://en.wikipedia.org/wiki/es:Entrop%C3%ADa_(computaci%C3%B3n)" class="extiw" title="wikipedia:es:Entropía (computación)">entropía</a> para arrancar el archivo de claves de pacman. Mover el ratón, presionar teclas aleatoriamente o ejecutar algún tipo de tarea que haga funcionar a una unidad. He aquí algunos ejemplos de esto último: <code>ls -R /</code>, <code>find / -name foo</code> o <code>dd if=/dev/sda8 of=/dev/tty7</code>. Si el sistema no tiene suficiente entropía, este paso puede durar horas. Generando entropía de forma activa se puede completar este proceso mucho más rápidamente.
</p>
<p>La aleatoriedad que se crea se usa para configurar un archivo de claves (<code>/etc/pacman.d/gnupg</code>) y la firma de la clave GPG del sistema.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si necesita ejecutar  <code>pacman-key --init</code> en un equipo que no genere mucha entropía (por ejemplo, un servidor sin encabezado), la generación de claves puede llevar mucho tiempo. Para generar una pseudo-entropía, instale <a href="../../en/Haveged.html" title="Haveged">haveged</a> o <a href="../../en/Rng-tools.html" title="Rng-tools">rng-tools</a> en el equipo de destino e inicie el servicio correspondiente antes de ejecutar <code>pacman-key --init</code>.</div>
<h2>
<span id="Gestionar_el_dep.C3.B3sito_de_claves"></span><span class="mw-headline" id="Gestionar_el_depósito_de_claves">Gestionar el depósito de claves</span>
</h2>
<h3><span class="mw-headline" id="Verificar_las_claves_maestras">Verificar las claves maestras</span></h3>
<p>Para empezar a configurar las claves hay que ejecutar:
</p>
<pre># pacman-key --populate archlinux
</pre>
<p>No hay que tener prisa a la hora de verificar las <a rel="nofollow" class="external text" href="https://archlinux.org/master-keys/">claves de firmas maestras</a> cuando el sistema pregunte por ellas puesto que son las que se van a usar para firmar y, por ende, validar las claves de todos los demás paquetes.
</p>
<p>Las llaves PGP son demasiado extensas (2048 bits o más) para que las personas trabajen con ellas. Es por esto que normalmente se reducen a un código hash para crear una huella de 40 dígitos hexadecimales que puede usarse para comparar manualmente que dos claves son exactamente iguales. Los últimos 8 dígitos son el «nombre» de la clave y se les conoce como el ID breve de la clave (key ID —short—) (los últimos dieciséis dígitos de la huella digital supondría la «ID larga de la clave»).
</p>
<h3>
<span id="A.C3.B1adir_las_claves_de_los_desarrolladores"></span><span class="mw-headline" id="Añadir_las_claves_de_los_desarrolladores">Añadir las claves de los desarrolladores</span>
</h3>
<p>Las claves oficiales de los desarrolladores y las de los TUs se firman con las claves maestras por lo que no es necesario que el usuario las firme por si mismo haciendo uso de la herramienta pacman-key. Cuando pacman se encuentra con una clave que no reconoce, pedirá descargarla del <code>keyserver</code> establecido en <code>/etc/pacman.d/gnupg/gpg.conf</code> (o usando la opción <code>--keyserver</code> en la consola). En la Wikipedia se puede encontrar una <a href="https://en.wikipedia.org/wiki/Key_server_(cryptographic)" class="extiw" title="wikipedia:Key server (cryptographic)">lista de servidores de claves</a>.
</p>
<p>Una vez que se ha descargado una clave de un desarrollador no es necesario descargarla de nuevo. Además, se puede usar para verificar otros paquetes que ese desarrollador haya firmado.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> El paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archlinux-keyring">archlinux-keyring</a></span>, que figura entre las dependencias de pacman, contiene las claves actualizadas. En cualquier caso, es posible actualizarlas ejecutando <code>pacman-key --refresh-keys</code> (como root). Al ejecutar pacman-key con la opción <code>--refresh-keys</code>, se buscará la clave local en el servidor de claves remoto y aparecerá un mensaje alertando de que no ha sido posible encontrar dicha clave. Esto es normal y no es algo por lo que haya que preocuparse.</div>
<h3>
<span id="A.C3.B1adir_claves_no_oficiales"></span><span class="mw-headline" id="Añadir_claves_no_oficiales">Añadir claves no oficiales</span>
</h3>
<p>Este método se puede utilizar, por ejemplo, para agregar su propia clave al depósito de claves de <i>pacman</i>, o para activar los <a href="../../en/Unofficial_user_repositories.html" title="Unofficial user repositories">unofficial user repositories</a> firmados.
</p>
<p>Primero, obtenga el <b>ID de la clave</b> (<code><i>keyid</i></code>) de su propiedad. Luego agréguelo al depósito de claves usando uno de los dos métodos siguientes:
</p>
<ol>
<li>Si la clave se encuentra en un servidor de claves, impórtela con: <pre># pacman-key --recv-keys <i>keyid</i></pre>
</li>
<li>De lo contrario, será facilitado un enlace a un archivo de claves, descárguelo y ejecute:  <pre># pacman-key --add <i>/path/to/downloaded/keyfile</i></pre>
</li>
</ol>
<p>Se recomienda verificar la huella digital, como con cualquier clave maestra o cualquier otra clave que vaya a firmar:
</p>
<pre>$ pacman-key --finger <i>keyid</i>
</pre>
<p>Por último, debe firmar localmente la clave importada:
</p>
<pre># pacman-key --lsign-key <i>keyid</i>
</pre>
<p>Ahora otórguele el nivel de confianza a esta clave para firmar paquetes.
</p>
<h3><span class="mw-headline" id="Depurar_errores_con_gpg">Depurar errores con gpg</span></h3>
<p>Con el propósito de depurar errores, puede acceder al depósito de claves de <i>pacman</i> directamente con <i>gpg</i>, por ejemplo:
</p>
<pre># gpg --homedir /etc/pacman.d/gnupg --list-keys
</pre>
<h2>
<span id="Soluci.C3.B3n_de_problemas"></span><span class="mw-headline" id="Solución_de_problemas">Solución de problemas</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> pacman-key depende de <a href="../../en/System_time.html" title="System time">system time</a>. Si la hora del sistema no es la correcta, aparecerá lo siguiente: 
<pre>error: PackageName: signature from "User &lt;email@archlinux.org&gt;" is invalid
error: failed to commit transaction (invalid or corrupted package (PGP signature))
Errors occured, no packages were upgraded.
</pre>
</div>
<h3><span class="mw-headline" id="No_se_pueden_importar_las_claves">No se pueden importar las claves</span></h3>
<p>Existen varias causas posibles de este problema:
</p>
<ul>
<li>Un paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archlinux-keyring">archlinux-keyring</a></span> desactualizado.</li>
<li>Fecha incorrecta.</li>
<li>Su ISP bloqueó el puerto utilizado para importar claves PGP.</li>
<li>La memoria caché de <i>pacman</i> contiene copia de paquetes sin firmar de intentos anteriores.</li>
<li>
<code>dirmngr</code> no está configurado correctamente</li>
</ul>
<p>Es posible que se quede bloqueado debido a que el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archlinux-keyring">archlinux-keyring</a></span> no se haya actualizado al realizar una actualización del sistema. Pruebe <a href="../../en/Pacman.html#Upgrading_packages" title="Pacman">actualizar el sistema de nuevo</a> para ver si así se arregla.
Si el problema persiste, asegúrese de que existe el siguiente archivo <code>/root/.gnupg/dirmngr_ldapservers.conf</code> y que puede ejecutar con éxito <code># dirmngr</code>. Cree un archivo vacío si no tiene éxito y ejecute <code>#dirmngr</code> nuevamente.
</p>
<p>Si esto tampoco funciona y la fecha del equipo es correcta, podría intentar cambiar al servidor de claves MIT, que proporciona un puerto alternativo. Para hacer esto, edite <code>/etc/pacman.d/gnupg/gpg.conf</code> y cambie la línea <code>keyserver</code> a:
</p>
<pre>keyserver hkp://pgp.mit.edu:11371
</pre>
<p>Si ni siquiera el puerto 80 funciona (por ejemplo, cuando la empresa utiliza algún tipo de proxy «transparente» solo para http, en lugar de enrutamiento), lo siguiente podría funcionar:
</p>
<pre>keyserver hkps://hkps.pool.sks-keyservers.net:443
</pre>
<p>Si tiene IPv6 desactivada, <i>gpg</i> fallará cuando encuentre alguna dirección IPv6. En este caso, intente con un servidor de claves solo para IPv4, como:
</p>
<pre>keyserver hkp://ipv4.pool.sks-keyservers.net:11371
</pre>
<p>Si olvida ejecutar <code>pacman-key --populate archlinux</code>, es posible que obtenga algunos errores al importar las claves.
</p>
<p>Si nada de lo anterior ayuda, la memoria caché de <i>pacman</i>, ubicada en <code>/var/cache/pacman/pkg/</code> puede contener paquetes sin firmar de intentos anteriores. Intente limpiar la memoria caché manualmente o ejecute:
</p>
<pre># pacman -Sc
</pre>
<p>que elimina todos los paquetes de la caché que no se han instalado.
</p>
<h3>
<span id="Desactivar_la_comprobaci.C3.B3n_de_las_firmas"></span><span class="mw-headline" id="Desactivar_la_comprobación_de_las_firmas">Desactivar la comprobación de las firmas</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Advertencia:</strong> Utilice esta opción con precaución. Desactivar las firmas de los paquetes hará que pacman instale automáticamente paquetes de fuentes no confiables.</div>
<p>Si no se está interesado en el firmado de paquetes, se puede desactivar la comprobación de las claves PGP por completo. Edite el fichero <code>/etc/pacman.conf</code> y descomente la siguiente lína en <code>[options]</code>:
</p>
<pre>SigLevel = Never
</pre>
<p>Hay que descomentar las opciones específicas de SigLevel de cada repositorio también ya que ignoran la configuración global. Esto hará que no haya comprobación alguna de firmas de claves; así es como se procedía habitualmente antes de la llegada de pacman 4. No es necesario configurar el archivo de claves con <i>pacman-key</i> si se decide optar por esta opción. Esta opción se puede modificar más adelante sin problema alguno si se decide activar la verificación de paquetes.
</p>
<h3><span class="mw-headline" id="Restablecer_todas_las_claves">Restablecer todas las claves</span></h3>
<p>Para eliminar o restablecer todas las claves instaladas en el sistema, elimine el directorio <code>/etc/pacman.d/gnupg</code> como root y vuelva a ejecutar <code>pacman-key --init</code>. Una vez hecho esto, se pueden añadir las claves que se consideren necesarias.
</p>
<h3><span class="mw-headline" id="Eliminar_paquetes_inservibles">Eliminar paquetes inservibles</span></h3>
<p>Si hay paquetes que siguen dando error y se está seguro de haber configurado correctamente <i>pacman-key</i>, entonces hay que probar a eliminarlos como por ejemplo con <code>rm /var/cache/pacman/pkg/<i>badpackage</i>*</code> para que se vuelvan a descargar.
</p>
<p>Probablemente esta sea la solución al problema del mensaje que aparece al intentar actualizar (<code>error: linux: signature from "Some Person &lt;Some.Person@example.com&gt;" is invalid</code>, o parecido). Esto no tiene por qué significar que se esté siendo víctima de un ataque <a href="https://en.wikipedia.org/wiki/es:Ataque_de_intermediario" class="extiw" title="wikipedia:es:Ataque de intermediario">MITM</a>, ni mucho menos; indica tan sólo que el archivo descargargado está corrupto.
</p>
<h3><span class="mw-headline" id="La_firma_es_de_confianza_desconocida">La firma es de confianza desconocida</span></h3>
<p>A veces, al ejecutar <code>pacman -Syu</code> puede encontrar este error:
</p>
<pre>error: <i>package-name</i>: signature from "<i>packager</i>" is unknown trust
</pre>
<p>Esto ocurre porque la clave de <code><i>packager</i></code> utilizada en el paquete <code><i>package-name</i></code> no está presente y/o no es de confianza en la base de datos gpg local de pacman-key. Al parecer pacman no siempre puede verificar si la clave fue recibida y marcada como confiable antes de continuar. Mitigue esto <a href="#A%C3%B1adir_claves_no_oficiales">firmando manualmente la clave no confiable localmente</a> o <a href="#Restablecer_todas_las_claves">restableciendo todas las claves</a>.
</p>
<h3>
<span id="Actualizar_claves_a_trav.C3.A9s_de_proxy"></span><span class="mw-headline" id="Actualizar_claves_a_través_de_proxy">Actualizar claves a través de proxy</span>
</h3>
<p>Para usar un proxy al actualizar las claves, la opción <code>honor-http-proxy</code> debe configurarse tanto en <code>/etc/gnupg/dirmngr.conf</code> como en <code>/etc/pacman.d/gnupg/dirmngr.conf</code>. Vea <a href="../../en/GnuPG.html#Use_a_keyserver" title="GnuPG">GnuPG#Use a keyserver</a> para más información.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si se usa <i>pacman-key</i> sin la opción <code>honor-http-proxy</code> y falla, un reinicio puede resolver el problema.</div>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li><a href="../../en/ArchWiki:Archive.html" class="mw-redirect" title="DeveloperWiki:Package Signing Proposal for Pacman">DeveloperWiki:Package Signing Proposal for Pacman</a></li>
<li><a rel="nofollow" class="external text" href="http://allanmcrae.com/2011/08/pacman-package-signing-1-makepkg-and-repo-add/">Pacman Package Signing – 1: Makepkg and Repo-add</a></li>
<li><a rel="nofollow" class="external text" href="http://allanmcrae.com/2011/08/pacman-package-signing-2-pacman-key/">Pacman Package Signing – 2: Pacman-key</a></li>
<li><a rel="nofollow" class="external text" href="http://allanmcrae.com/2011/08/pacman-package-signing-3-pacman/">Pacman Package Signing – 3: Pacman</a></li>
<li><a rel="nofollow" class="external text" href="http://allanmcrae.com/2011/12/pacman-package-signing-4-arch-linux/">Pacman Package Signing – 4: Arch Linux</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../es/Category:Package_management.html" title="Category:Package management (Español)">Package management (Español)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pacman_(Espa%C3%B1ol)/Package_signing_(Espa%C3%B1ol)&amp;oldid=776587">https://wiki.archlinux.org/index.php?title=Pacman_(Español)/Package_signing_(Español)&amp;oldid=776587</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 April 2023, at 09:38.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
