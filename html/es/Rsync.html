<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>rsync (Español) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Rsync_Español rootpage-Rsync_Español skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Instalación" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Instalaci%C3%B3n">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Instalación</div>
		</a>
		
			<button aria-controls="toc-Instalación-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Instalación subsection</span>
			</button>
		
		<ul id="toc-Instalación-sublist" class="vector-toc-list">
			<li id="toc-Interfaces_gráficas" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Interfaces_gr%C3%A1ficas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Interfaces gráficas</div>
			</a>
			
			<ul id="toc-Interfaces_gráficas-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Como_alternativa_de_cp/mv" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Como_alternativa_de_cp/mv">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Como alternativa de cp/mv</div>
		</a>
		
			<button aria-controls="toc-Como_alternativa_de_cp/mv-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Como alternativa de cp/mv subsection</span>
			</button>
		
		<ul id="toc-Como_alternativa_de_cp/mv-sublist" class="vector-toc-list">
			<li id="toc-Lidiar_con_la_barra_diagonal" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Lidiar_con_la_barra_diagonal">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Lidiar con la barra diagonal</div>
			</a>
			
			<ul id="toc-Lidiar_con_la_barra_diagonal-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Como_herramienta_para_realizar_copias_de_seguridad" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Como_herramienta_para_realizar_copias_de_seguridad">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Como herramienta para realizar copias de seguridad</div>
		</a>
		
			<button aria-controls="toc-Como_herramienta_para_realizar_copias_de_seguridad-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Como herramienta para realizar copias de seguridad subsection</span>
			</button>
		
		<ul id="toc-Como_herramienta_para_realizar_copias_de_seguridad-sublist" class="vector-toc-list">
			<li id="toc-Realizar_copia_de_seguridad_automatizada" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realizar_copia_de_seguridad_automatizada">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Realizar copia de seguridad automatizada</div>
			</a>
			
			<ul id="toc-Realizar_copia_de_seguridad_automatizada-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realizar_copia_de_seguridad_automatizada_con_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realizar_copia_de_seguridad_automatizada_con_SSH">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Realizar copia de seguridad automatizada con SSH</div>
			</a>
			
			<ul id="toc-Realizar_copia_de_seguridad_automatizada_con_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realizar_copia_de_seguridad_automatizada_con_NetworkManager" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realizar_copia_de_seguridad_automatizada_con_NetworkManager">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Realizar copia de seguridad automatizada con NetworkManager</div>
			</a>
			
			<ul id="toc-Realizar_copia_de_seguridad_automatizada_con_NetworkManager-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realizar_copia_de_seguridad_automatizada_con_systemd_e_inotify" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realizar_copia_de_seguridad_automatizada_con_systemd_e_inotify">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Realizar copia de seguridad automatizada con systemd e inotify</div>
			</a>
			
			<ul id="toc-Realizar_copia_de_seguridad_automatizada_con_systemd_e_inotify-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realizar_copia_de_seguridad_diferencial_por_semana" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realizar_copia_de_seguridad_diferencial_por_semana">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Realizar copia de seguridad diferencial por semana</div>
			</a>
			
			<ul id="toc-Realizar_copia_de_seguridad_diferencial_por_semana-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realizar_copia_de_seguridad_basada_en_instantáneas" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realizar_copia_de_seguridad_basada_en_instant%C3%A1neas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Realizar copia de seguridad basada en instantáneas</div>
			</a>
			
			<ul id="toc-Realizar_copia_de_seguridad_basada_en_instantáneas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Realizar_copia_de_seguridad_completa_del_sistema" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Realizar_copia_de_seguridad_completa_del_sistema">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Realizar copia de seguridad completa del sistema</div>
			</a>
			
			<ul id="toc-Realizar_copia_de_seguridad_completa_del_sistema-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restaurar_una_copia_de_seguridad" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Restaurar_una_copia_de_seguridad">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>Restaurar una copia de seguridad</div>
			</a>
			
			<ul id="toc-Restaurar_una_copia_de_seguridad-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Clonar_el_sistema_de_archivos" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Clonar_el_sistema_de_archivos">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Clonar el sistema de archivos</div>
		</a>
		
		<ul id="toc-Clonar_el_sistema_de_archivos-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Demonio_rsync" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Demonio_rsync">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Demonio rsync</div>
		</a>
		
		<ul id="toc-Demonio_rsync-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Véase_también" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#V%C3%A9ase_tambi%C3%A9n">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Véase también</div>
		</a>
		
		<ul id="toc-Véase_también-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">rsync (Español)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Rsync" title="Rsync – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Rsync.html" title="Rsync – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Rsync.html" title="Rsync – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Rsync" title="Rsync – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Rsync.html" title="Rsync – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Rsync" title="Rsync – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="es" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">Esta traducción de <a href="../en/Rsync.html" title="Rsync">rsync</a> fue revisada el <b>2019-11-15</b>. Si existen <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Rsync&amp;diff=0&amp;oldid=586256">cambios</a> puede <a href="../es/ArchWiki:Translation_Team/Contributing.html" title="ArchWiki:Translation Team (Español)/Contributing (Español)">actualizarla</a> o avisar al <a href="../es/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Español)">equipo de traducción</a>.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artículos relacionados</p>
<ul>
<li><a href="../en/System_backup.html" title="System backup">System backup</a></li>
<li><a href="../en/Synchronization_and_backup_programs.html" title="Synchronization and backup programs">Synchronization and backup programs</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://rsync.samba.org/">rsync</a> es una utilidad de código abierto que proporciona una transferencia de archivos incremental rápida.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Instalaci.C3.B3n"></span><span class="mw-headline" id="Instalación">Instalación</span>
</h2>
<p><a href="../es/Help:Reading.html#Instalaci%C3%B3n_de_paquetes" class="mw-redirect" title="Install (Español)">Instale</a> el paquete <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=rsync">rsync</a></span>.
</p>
<p><i>rsync</i> debe instalarse en la máquina tanto de origen como de destino.
</p>
<h3>
<span id="Interfaces_gr.C3.A1ficas"></span><span class="mw-headline" id="Interfaces_gráficas">Interfaces gráficas</span>
</h3>
<ul><li>
<b>Grsync</b> — Front-end GTK.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://www.opbyte.it/grsync/">https://www.opbyte.it/grsync/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=grsync">grsync</a></span>
</dd></dl>
<ul><li>
<b>gutback</b> — Wrapper de rsync escrito en Shell.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/gutenye/gutbackup">https://github.com/gutenye/gutbackup</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gutbackup/">gutbackup</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/Help:Procedures.html#Fix_broken_package_links" title="Help:Procedures">enlace roto</a>: package not found]</sup>
</dd></dl>
<ul><li>
<b>JotaSync</b> — Interfaz Java Swing para rsync con planificador integrado.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://trixon.se/projects/jotasync/">https://trixon.se/projects/jotasync/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/jotasync/">jotasync</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>luckyBackup</b> — Front-end Qt escrito en C++.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://luckybackup.sourceforge.net/index.html">https://luckybackup.sourceforge.net/index.html</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/luckybackup/">luckybackup</a></span><sup><small>AUR</small></sup>
</dd></dl>
<p>Otras herramientas que usan rsync son <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/rdiff-backup/">rdiff-backup</a></span><sup><small>AUR</small></sup> y <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/osync/">osync</a></span><sup><small>AUR</small></sup>.
</p>
<h2>
<span id="Como_alternativa_de_cp.2Fmv"></span><span class="mw-headline" id="Como_alternativa_de_cp/mv">Como alternativa de cp/mv</span>
</h2>
<p>rsync se puede usar como una alternativa avanzada para la orden <code>cp</code> o <code>mv</code>, especialmente para copiar archivos más grandes:
</p>
<pre>$ rsync -P source destination
</pre>
<p>La opción <code>-P</code> es la misma que <code>--partial --progress</code>, que mantiene los archivos parcialmente transferidos y muestra una barra de progreso de la transferencia.
</p>
<p>Es posible que desee utilizar la opción <code>-r</code>/<code>--recursive</code> para recoger recursivamente el contenido de los directorios.
</p>
<p>Los archivos se pueden copiar localmente como con cp, pero el propósito motivador de rsync es copiar archivos de forma remota, es decir, entre dos servidores diferentes. Las ubicaciones remotas se pueden especificar con una sintaxis de dos puntos entre servidores:
</p>
<pre>$ rsync source host:destination
</pre>
<p>o
</p>
<pre>$ rsync host:source destination
</pre>
<p>Las transferencias de archivos en red utilizan el protocolo <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a> de forma predeterminada y <code>host</code> puede ser un nombre de equipo real o un perfil/alias predefinido desde <code>.ssh/config</code>.
</p>
<p>Ya sea que transfiera archivos de forma local o remota, rsync primero crea una lista de archivos que contiene información (de manera predeterminada, el tamaño del archivo y la última marca de tiempo de modificación) que luego se utilizará para determinar si el archivo necesita ser construido. Para cada archivo que se construirá, se encuentra una suma de comprobación débil y fuerte para todos los bloques, de modo que cada bloque tenga una longitud de <b>S</b> bytes, que no se superponga y que tenga un desplazamiento que sea divisible por <b>S</b>. Con esta información, se puede construir un archivo grande usando rsync sin tener que transferir todo el archivo. Para obtener una explicación práctica y matemática detallada, remítase a <a rel="nofollow" class="external text" href="https://rsync.samba.org/how-rsync-works.html">how rsync works</a> y <a rel="nofollow" class="external text" href="https://rsync.samba.org/tech_report/tech_report.html">the rsync algorithm</a>, respectivamente.
</p>
<p>Para pasar a rsync valores predeterminados rápidamente, puede usar algunos alias:
</p>
<pre>function cpr() {
  rsync --archive -hh --partial --info=stats1 --info=progress2 --modify-window=1 "$@"
} 
function mvr() {
  rsync --archive -hh --partial --info=stats1 --info=progress2 --modify-window=1 --remove-source-files "$@"
}</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> El uso del término <i>checksum</i> («suma de verificación») <b>no</b> es asimilable al comportamiento de la opción <code>--checksum</code>. La opción <code>--checksum</code> afecta a la heurística del archivo utilizada antes de transferir cualquier archivo. Independientemente de la opción <code>--checksum</code>, siempre se usa una «suma de verificación» (<i>checksum</i>) para la construcción de archivos basada en bloques, que es como rynsc transfiere un archivo.</div>
<h3><span class="mw-headline" id="Lidiar_con_la_barra_diagonal">Lidiar con la barra diagonal</span></h3>
<p>Arch por defecto usa «cp» de GNU (parte de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=coreutils">coreutils</a></span> de GNU). Sin embargo, rsync sigue la convención de BSD para «cp», que da un tratamiento especial a los directorios de origen con una bara diagonal «/». A pesar de que:
</p>
<pre>$ rsync -r source destination
</pre>
<p>crea un directorio «destination/source» con el contenido de «source»;
</p>
<p>y la orden:
</p>
<pre>$ rsync -r source/ destination
</pre>
<p>copia todos los archivos presentes en «source/» directamente a «destination», sin subdirectorio intermedio, como si lo hubiera invocado así:
</p>
<pre>$ rsync -r source/. destination
</pre>
<p>Este comportamiento es diferente al de GNU para cp, que trata «source» y «source/» de forma idéntica (pero no «source/.»). Además, algunos intérpretes de órdenes añaden automáticamente la barra inclinada final cuando se completan los nombres de directorios con el tabulador. Debido a estos factores, puede haber cierta tendencia entre los usuarios de rsync nuevos u ocasionales a olvidarse del comportamiento diferente de rsync, y sin darse cuenta provoquen un desastre o incluso sobrescribir archivos importantes al dejar la barra diagonal en la línea de órdenes.
</p>
<p>Por lo tanto, puede ser prudente usar un script para eliminar automáticamente las barras diagonales finales antes de invocar rsync:
</p>
<pre>#!/bin/zsh
new_args=();
for i in "$@"; do
    case $i in /) i=/;; */) i=${i%/};; esac
    new_args+=$i;
done
exec rsync "${(@)new_args}"
</pre>
<p>Este script se puede colocar en algún lugar de la ruta y crear un alias a rsync en el archivo de inicio de shell.
</p>
<h2><span class="mw-headline" id="Como_herramienta_para_realizar_copias_de_seguridad">Como herramienta para realizar copias de seguridad</span></h2>
<p>El protocolo rsync puede usarse fácilmente para realizar copias de seguridad, transfiriendo solo los archivos que han cambiado desde la última copia de seguridad. Esta sección describe un script para realizar copias de seguridad programada muy simple que utiliza rsync, el cual generalmente se utiliza para realizar copias a medios extraíbles.
</p>
<h3><span class="mw-headline" id="Realizar_copia_de_seguridad_automatizada">Realizar copia de seguridad automatizada</span></h3>
<p>A modo de ejemplo, el script se creará en el directorio <code>/etc/cron.daily</code>, y se ejecutará diariamente si un <a href="../es/Daemons.html" class="mw-redirect" title="Daemon (Español)">daemon</a> cron está instalado y configurado correctamente. Configurar y usar <a href="../en/Cron.html" title="Cron">cron</a> no entra en el ámbito de este artículo.
</p>
<p>Primero, cree un script que contenga las opciones de órdenes apropiadas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cron.daily/backup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
rsync -a --delete --quiet /folder/to/backup /location/of/backup</pre>
<dl>
<dt><code>-a</code></dt>
<dd>indica que los archivos deben archivarse, lo que significa que la mayoría de sus características se conservan (<b>no</b> así las ACL, enlaces duros o atributos extendidos como capacidades)</dd>
<dt><code>--delete</code></dt>
<dd>significa que los archivos eliminados en origen también serán eliminados en la copia de seguridad</dd>
</dl>
<p>Aquí, <code>/folder/to/backup</code> debe cambiarse por aquello que quiere respaldar (<code>/home</code>, por ejemplo) y <code>/location/of/backup</code> es donde se quiere guardar la copia de seguridad (<code>/media/disk</code>, pongamos por caso).
</p>
<p>Por último, el script debe hacerse ejecutable:
</p>
<pre># chmod +x /etc/cron.daily/backup
</pre>
<h3><span class="mw-headline" id="Realizar_copia_de_seguridad_automatizada_con_SSH">Realizar copia de seguridad automatizada con SSH</span></h3>
<p>Si realiza una copia de seguridad en un servidor remoto utilizando <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a>, utilice este script en su lugar:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cron.daily/backup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash
rsync -a --delete --quiet -e ssh /folder/to/backup remoteuser@remotehost:/location/of/backup
</pre>
<dl>
<dt><code>-e ssh</code></dt>
<dd>le dice a rsync que use SSH</dd>
<dt><code>remoteuser</code></dt>
<dd>es el usuario en el servidor <code>remotehost</code>
</dd>
<dt><code>-a</code></dt>
<dd>agrupa todas estas opciones de <code>-rlptgoD</code> (recursivo, enlaces, permisos, tiempos, grupo, propietario, dispositivos)</dd>
</dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Rsync intentará modificar cualquier archivo respaldado previamente en la máquina de destino para que coincida con su estado actual en la máquina de origen, con cada copia de seguridad incremental. Esto significa que al hacer una copia de seguridad de los archivos que son propiedad de root mediante SSH (y al preservar los permisos y las propiedades como con la opción <code>-a</code>), se necesita acceso de root a la máquina de destino. La forma preferida de lograr esto para la automatización es configurar el demonio SSH para permitir que root inicie sesión utilizando una <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/a/92397">clave pública sin contraseña</a> y ejecutar la orden rsync como root.</div>
<h3><span class="mw-headline" id="Realizar_copia_de_seguridad_automatizada_con_NetworkManager">Realizar copia de seguridad automatizada con NetworkManager</span></h3>
<p>Este script inicia una copia de seguridad cuando se establece la conexión de red.
</p>
<p>Primero, cree un script que contenga las opciones de órdenes apropiadas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/backup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

if [ x"$2" = "xup" ] ; then
        rsync --force --ignore-errors -a --delete --bwlimit=2000 --files-from=files.rsync /folder/to/backup /location/to/backup
fi</pre>
<dl>
<dt><code>-a</code></dt>
<dd>agrupa todas estas opciones de <code>-rlptgoD</code> (recursivo, enlaces, permisos, tiempos, grupo, propietario, dispositivos=</dd>
<dt><code>--files-from</code></dt>
<dd>lee la ruta relativa de <i>/folder/to/backup</i> desde este archivo</dd>
<dt><code>--bwlimit</code></dt>
<dd>limita el ancho de banda de E/S; KBytes por segundo</dd>
</dl>
<p>Además, el script debe tener permiso de escritura solo para el propietario (root,  por supuesto) (vea <a href="../en/NetworkManager.html#Network_services_with_NetworkManager_dispatcher" title="NetworkManager">NetworkManager#Network services with NetworkManager dispatcher</a> para más detalles).
</p>
<h3><span class="mw-headline" id="Realizar_copia_de_seguridad_automatizada_con_systemd_e_inotify">Realizar copia de seguridad automatizada con systemd e inotify</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Debido a las limitaciones de inotify y systemd (vea <a rel="nofollow" class="external text" href="https://www.quora.com/Linux-Kernel/Inotify-monitoring-of-directories-is-not-recursive-Is-there-any-specific-reason-for-this-design-in-Linux-kernel">esta pregunta y respuesta</a>), el monitoreo recursivo del sistema de archivos no es posible. Aunque puede observar un directorio y su contenido, no monitoreará recursivamente los subdirectorios ni observará su contenido; debe especificar explícitamente cada directorio a seguir, incluso si ese directorio es hijo de un directorio que está siendo monitoreado.</li>
<li>Esta configuración se basa en una instancia de <a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a>.</li>
</ul>
</div>
<p>En lugar de ejecutar copias de seguridad a intervalos de tiempo según se haya programado, como las implementadas en <a href="../en/Cron.html" title="Cron">cron</a>, es posible ejecutar una copia de seguridad cada vez que uno de los archivos de los que está realizando una copia de seguridad cambia. Las unidades <code>systemd.path</code> usan <code>inotify</code> para monitorear el sistema de archivos, y se pueden usar junto con los archivos <code>systemd.service</code> para iniciar cualquier proceso (en este caso su copia de seguridad con <a href="../en/Rsync.html" title="Rsync">rsync</a>) basado en un evento del sistema de archivos.
</p>
<p>Primero, cree el archivo <code>systemd.path</code> que monitoreará los archivos que está respaldando:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/backup.path</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Comprueba si las rutas que se están copiando actualmente han cambiado

[Path]
PathChanged=%h/documents
PathChanged=%h/music

[Install]
WantedBy=default.target
</pre>
<p>Luego cree un archivo <code>systemd.service</code> que se activará cuando detecte un cambio. De manera predeterminada, se activará un archivo de servicio con el mismo nombre que la unidad de ruta (en este caso, <code>backup.path</code>), salvo por la extensión <code>.service</code> en lugar de <code>.path</code> (en este caso <code>backup.service</code>).
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Si necesita ejecutar múltiples órdenes rsync, utilice <code>Type=oneshot</code>. Esto le permite especificar múltiples parámetros <code>ExecStart=</code>, uno para cada órden <a href="../en/Rsync.html" title="Rsync">rsync</a>, que se ejecutará. Alternativamente, puede simplemente escribir un script para realizar todas sus copias de seguridad, al igual que con los scripts de <a href="../en/Cron.html" title="Cron">cron</a>.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.config/systemd/user/backup.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Backs up files

[Service]
ExecStart=/usr/bin/rsync %h/./documents %h/./music -CERrltm --delete ubuntu:
</pre>
<p>Ahora todo lo que tiene que hacer es <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Start (Español)">iniciar</a>/activar <code>backup.path</code> como un servicio de systemd normal y comenzará a monitorear los cambios de los archivos e iniciará en consecuencia <code>backup.service</code>.
</p>
<h3><span class="mw-headline" id="Realizar_copia_de_seguridad_diferencial_por_semana">Realizar copia de seguridad diferencial por semana</span></h3>
<p>Esta es una opción útil de rsync, que consiste en realizar una copia de seguridad completa (en cada ejecución) y mantener una copia de seguridad diferencial solo de los archivos modificados en un directorio separado para cada día de la semana.
</p>
<p>Primero, cree un script que contenga las opciones de órdenes apropiadas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cron.daily/backup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

DAY=$(date +%A)

if [ -e /location/to/backup/incr/$DAY ] ; then
  rm -fr /location/to/backup/incr/$DAY
fi

rsync -a --delete --quiet --inplace --backup --backup-dir=/location/to/backup/incr/$DAY /folder/to/backup/ /location/to/backup/full/</pre>
<dl>
<dt><code>--inplace</code></dt>
<dd>implica la actualización <code>--partial</code> de los archivos de destino en el lugar</dd>
</dl>
<h3>
<span id="Realizar_copia_de_seguridad_basada_en_instant.C3.A1neas"></span><span class="mw-headline" id="Realizar_copia_de_seguridad_basada_en_instantáneas">Realizar copia de seguridad basada en instantáneas</span>
</h3>
<p>La misma idea se puede utilizar para mantener un árbol de instantáneas de sus archivos. En otras palabras, un directorio con copias de los archivos ordenadas por fecha. Las copias se realizan mediante enlaces, lo que significa que solo los archivos que cambiaron ocuparán espacio. En términos generales, esta es la idea detrás de TimeMachine de Apple.
</p>
<p>Este script básico es fácil de implementar y crea instantáneas incrementales rápidas utilizando la opción <code>--link-dest</code> para enlazar archivos sin cambios:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/snapbackup.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

# Script básico de copia de seguridad con rsync de estilo de instantáneas
# Config
OPT="-aPh"
LINK="--link-dest=/snapshots/username/last/" 
SRC="/home/username/files/"
SNAP="/snapshots/username/"
LAST="/snapshots/username/last"
date=`date "+%Y-%b-%d:_%T"`

# Ejecutar rsync para crear una instantánea
rsync $OPT $LINK $SRC ${SNAP}$date

# Eliminar la instantánea anterior del enlace simbólico
rm -f $LAST

# Crear un nuevo enlace simbólico a la última instantánea
ln -s ${SNAP}$date $LAST
</pre>
<p>Debe existir un enlace simbólico a una copia de seguridad completa como destino para <code>--link-dest</code>. Si se elimina la instantánea más reciente, será necesario volver a crear el enlace simbólico para que apunte a la instantánea más reciente. Si <code>--link-dest</code> no encuentra un enlace simbólico que funcione, rsync procederá a copiar todos los archivos de origen en lugar de solo los cambios.
</p>
<p>Una versión más sofisticada mantiene una copia de seguridad completa actualizada <code>$SNAP/latest</code> y, en caso de que un cierto número de archivos haya cambiado desde la última copia de seguridad completa, crea una instantánea <code>$SNAP/$DATETAG</code> de la copia de seguridad completa actual utilizando <code>cp -al</code> para vincular archivos sin cambios:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/rsnapshot.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash

## mi propio procedimiento de copia de seguridad
## estilo instantánea basado en rsync
## (cc) marcio rps AT gmail.com

# config vars

SRC="/home/username/files/" #no olvidar la barra diagonal final
SNAP="/snapshots/username"
OPTS="-rltgoi --delay-updates --delete --chmod=a-w"
MINCHANGES=20

# ejecutar este proceso con prioridad baja

ionice -c 3 -p $$
renice +12  -p $$

# sincronizar

rsync $OPTS $SRC $SNAP/latest &gt;&gt; $SNAP/rsync.log

# compruebar si ha cambiado lo suficiente y si es así
# hacer una copia enlazada denominada por fecha

COUNT=$( wc -l $SNAP/rsync.log|cut -d" " -f1 )
if [ $COUNT -gt $MINCHANGES ] ; then
        DATETAG=$(date +%Y-%m-%d)
        if [ ! -e $SNAP/$DATETAG ] ; then
                cp -al $SNAP/latest $SNAP/$DATETAG
                chmod u+w $SNAP/$DATETAG
                mv $SNAP/rsync.log $SNAP/$DATETAG
                chmod u-w $SNAP/$DATETAG
        fi
fi
</pre>
<p>Para hacer las cosas realmente simples, este script puede ejecutarse desde una unidad <a href="../en/Systemd/Timers.html" title="Systemd/Timers">systemd/Timers</a>.
</p>
<h3><span class="mw-headline" id="Realizar_copia_de_seguridad_completa_del_sistema">Realizar copia de seguridad completa del sistema</span></h3>
<p>Esta sección trata sobre el uso de <i>rsync</i> para transferir una copia de todo el árbol <code>/</code>, excluyendo algunas carpetas seleccionadas. Se considera que este enfoque es mejor que <a href="../es/Disk_cloning.html" title="Disk cloning (Español)">clonar un disco</a> con <code>dd</code> dado que ello  utilizar un tamaño diferente, una tabla de partición y un sistema de archivos, y mejor que copiar con <code>cp -a</code> también, porque permite un mayor control sobre los permisos de archivos, atributos, <a href="../es/Access_Control_Lists.html" title="Access Control Lists (Español)">Listas de control de acceso</a> y <a href="../es/File_permissions_and_attributes.html#Atributos_extendidos" class="mw-redirect" title="Extended attributes (Español)">Atributos extendidos</a>.
</p>
<p><i>rsync</i> funcionará incluso mientras el sistema se está ejecutando, pero los archivos modificados durante la transferencia pueden o no transferirse, lo que puede causar un comportamiento inesperado de algunos programas que usan los archivos transferidos.
</p>
<p>Este enfoque funciona bien para migrar una instalación existente a un nuevo disco duro o <a href="../en/Solid_state_drive.html" class="mw-redirect" title="SSD">SSD</a>.
</p>
<p>Ejecute la siguiente orden como root para asegurarse de que rsync pueda acceder a todos los archivos del sistema y preservar su propiedad:
</p>
<pre># rsync -aAXv --exclude={"/dev/*","/proc/*","/sys/*","/tmp/*","/run/*","/mnt/*","/media/*","/lost+found"} / <i>/path/to/backup/folder</i>
</pre>
<p>Al utilizar el conjunto de opciones <code>-aAX</code>, los archivos se transfieren en modo de comprimido, lo que garantiza que los enlaces simbólicos, los dispositivos, los permisos, las propiedades, los tiempos de modificación, los <a href="../en/Access_Control_Lists.html" class="mw-redirect" title="ACL">ACL</a> y los atributos extendidos se conserven, suponiendo que el <a href="../en/File_systems.html" class="mw-redirect" title="File system">sistema de archivos</a> de destino dé soporte a esta función.
</p>
<p>La opción <code>--exclude</code> hace que se excluyan los archivos que coinciden con los patrones dados. Se excluye el contenido de <code>/dev</code>, <code>/proc</code>, <code>/sys</code>, <code>/tmp</code> y <code>/run</code> en la orden anterior, porque se rellenan en el arranque, aunque las carpetas <i>no</i> se crean por sí mismas. <code>/lost+found</code> es específico del sistema de archivos. La orden anterior depende de la expansión de llaves disponible tanto en las shells <a rel="nofollow" class="external text" href="https://www.gnu.org/software/bash/manual/html_node/Brace-Expansion.html">bash</a> como <a rel="nofollow" class="external text" href="https://zsh.sourceforge.net/Doc/Release/Expansion.html#Brace-Expansion">zsh</a>.Cuando se utiliza un <a href="../en/Command-line_shell.html" class="mw-redirect" title="Shell">shell</a> diferente, los patrones <code>--exclude</code> deben repetirse manualmente. Citar los patrones de exclusión evitará la expansión por la <a href="../en/Command-line_shell.html" class="mw-redirect" title="Shell">shell</a>, lo cual es necesario, por ejemplo, cuando se realiza una copia de seguridad mediante <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a>. Al terminar las rutas excluidas con <code>*</code> se garantiza que dichos directorios se creen si aún no existen.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Si planea hacer una copia de seguridad de su sistema en otro lugar que no sea <code>/mnt</code> o <code>/media</code>, no olvide agregarlo a la lista de patrones de exclusión para evitar un bucle infinito.</li>
<li>Si hay montajes de enlace en el sistema, también deben excluirse para que el contenido asociado al enlace se copie solo una vez.</li>
<li>Si utiliza un <a href="../es/Swap.html#Archivo_como_espacio_de_intercambio" class="mw-redirect" title="Swap file (Español)">archivo como espacio de intercambio</a>, asegúrese de excluirlo también.</li>
<li>Considere si desea hacer una copia de seguridad de la carpeta <code>/home/</code>. Si contiene sus datos, podría ser considerablemente más grande que el sistema. De lo contrario, considere excluir subdirectorios sin importancia como <code>/home/*/.thumbnails/*</code>, <code>/home/*/.cache/mozilla/*</code>, <code>/home/*/.cache/chromium/*</code> y <code>/home/*/.local/share/Trash/*</code>, dependiendo del software instalado en el sistema. Si <a href="../en/File_manager_functionality.html#Mounting" class="mw-redirect" title="GVFS">GVFS</a> está instalado, <code>/home/*/.gvfs</code> debe excluirse para evitar errores de rsync.</li>
</ul>
</div>
<p>Es posible que desee incluir opciones <a href="../en/Rsync.html" title="Rsync">rsync</a> adicionales, como las siguientes. Consulte  <span class="plainlinks archwiki-template-man" title="$ man 1 rsync"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/rsync.1">rsync(1)</a></span> para ver la lista completa.
</p>
<ul>
<li>Si usa muchos enlaces duros (por ejemplo, si está usando <a href="../en/Flatpak.html" title="Flatpak">Flatpak</a>), considere agregar la opción <code>-H</code>, que está desactivada por defecto debido a su gasto de memoria. Sin embargo, no debería ser un problema en la mayoría de los ordenadores modernos. Muchos enlaces duros residen en el directorio <code>/usr/</code>.</li>
<li>Es posible que desee agregar la opción <code>--delete</code> de rsync si está ejecutando esto varias veces en la misma carpeta de respaldo. En este caso, asegúrese de que la ruta de origen no termine con <code>/*</code>, o esta opción solo tendrá efecto en los archivos dentro de los subdirectorios del directorio de origen, pero no tendrá ningún efecto en los archivos que residen directamente dentro del directorio de origen.</li>
<li>Si utiliza archivos dispersos, como discos virtuales, imágenes <a href="../en/Docker.html" title="Docker">Docker</a> y similares, debe agregar la opción <code>-S</code>.</li>
<li>La opción <code>--numeric-ids</code> desactivará la asignación de nombres de usuarios y grupos; en su lugar, se transferirán las identificaciones numéricas de grupo y de usuario. Esto es útil cuando se realiza una copia de seguridad mediante <a href="../en/Secure_Shell.html" class="mw-redirect" title="SSH">SSH</a> o cuando se utiliza un sistema live para hacer una copia de seguridad de un disco con sistema diferente.</li>
<li>Al elegir la opción <code>--info=progress2</code> en lugar de <code>-v</code>se mostrará la información general del progreso y la velocidad de transferencia, en lugar de la lista de archivos que se están transfiriendo.</li>
<li>To avoid crossing a filesystem boundary when recursing, add the option <code>-x</code>/<code>--one-file-system</code>. This will prevent backing up any mount point in the hierarchy.</li>
</ul>
<h3><span class="mw-headline" id="Restaurar_una_copia_de_seguridad">Restaurar una copia de seguridad</span></h3>
<p>Si desea restaurar una copia de seguridad, use la misma orden de rsync que se ejecutó, pero con el origen y el destino invertidos.
</p>
<h2><span class="mw-headline" id="Clonar_el_sistema_de_archivos">Clonar el sistema de archivos</span></h2>
<p>rsync proporciona una forma de hacer una copia de todos los datos en un sistema de archivos al tiempo que conserva la mayor cantidad de información posible, incluidos los metadatos del sistema de archivos. Es un procedimiento de clonación de datos en un nivel de sistema de archivos donde los sistemas de archivos de origen y de destino no necesitan ser del mismo tipo. Se puede utilizar para realizar copias de seguridad, migrar sistemas de archivos o recuperar datos.
</p>
<p>El modo <i>archive</i> de rsync está cerca de ser apto para el trabajo, pero no realiza una copia de seguridad de los metadatos especiales del sistema de archivos, como listas de control de acceso, atributos extendidos o propiedades de archivos dispersos. Para una clonación exitosa a nivel del sistema de archivos, se deben proporcionar algunas opciones adicionales:
</p>
<pre>rsync -qaHAXS DIRECTORIO_ORIGEN DIRECTORIO_DESTINO
</pre>
<p>Y su significado es (de la página de manual):
</p>
<pre>-H, --hard-links      preserva los enlaces duros
-A, --acls            preserva las ACL (implica -p)
-X, --xattrs          preserva los atributos extendidos
-S, --sparse          manejar archivos dispersos de manera eficiente
</pre>
<p>Además, use <code>-x</code> si tiene otros sistemas de archivos montados bajo el árbol que desea excluir de la copia.
La copia producida se puede volver a leer y verificar (por ejemplo, después de un intento de recuperación de datos) a nivel del sistema de archivos con la opción recursiva de <code>diff</code>:
</p>
<pre>diff -r DIRECTORIO_ORIGEN DIRECTORIO_DESTINO
</pre>
<p>Es posible realizar una migración exitosa del sistema de archivos usando rsync como se describe en este artículo y actualizando <a href="../es/Fstab.html" title="Fstab (Español)">fstab</a> y <a href="../es/Arch_boot_process.html#Gestor_de_arranque" class="mw-redirect" title="Boot loader (Español)">gestor de arranque</a> como se describe en <a href="../en/Migrate_installation_to_new_hardware.html" title="Migrate installation to new hardware">Migrate installation to new hardware</a>.Básicamente, esto proporciona una forma de convertir cualquier sistema de archivos raíz a otro.
</p>
<h2><span class="mw-headline" id="Demonio_rsync">Demonio rsync</span></h2>
<p><i>rsync</i> se puede ejecutar como demonio en un servidor que escucha el puerto <code>873</code>.
</p>
<p>Edite la plantilla <code>/etc/rsyncd.conf</code>, configure un recurso compartido e <a href="../es/Systemd.html#Utilizar_las_unidades" class="mw-redirect" title="Start (Español)">inicie</a> el servicio <code>rsyncd.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> A partir de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=rsync">rsync</a></span>-3.1.2-5 la unidad de systemd <code>rsyncd.service</code>, incluida en el paquete, agrega la función de seguridad <code>ProtectSystem=full</code> (la opción <code>ProtectHome=on</code> se ha deshecho en <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=rsync">rsync</a></span>-3.1.2-8) en la sección <code>[Service]</code>. Esto hace que los directorios <code>/boot/</code>, <code>/etc/</code> y <code>/usr/</code> sean de solo lectura. Si necesita directorios del sistema de escritura de rsyncd, puede <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">editar</a> la unidad y establecer <code>ProtectSystem=off</code> en la sección <code>[Service]</code> del fragmento sobrescrito.</div>
<p>Utilización del cliente, por ejemplo listar el contenido del servidor:
</p>
<pre>$ rsync rsync://<i>server/share</i>
</pre>
<p>Transferir archivo del cliente al servidor:
</p>
<pre>$ rsync <i>local-file</i> rsync://<i>server/share/</i>
</pre>
<p>Tenga en cuenta iptables para abrir el puerto <code>873</code> y la autenticación de usuario.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Todos los datos transferidos, incluida la autenticación del usuario, no están cifrados.</div>
<h2>
<span id="V.C3.A9ase_tambi.C3.A9n"></span><span class="mw-headline" id="Véase_también">Véase también</span>
</h2>
<ul>
<li>Se pueden buscar más ejemplos de uso en los foros <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewforum.php?id=27">Community Contributions</a> y <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewforum.php?id=33">General Programming</a>
</li>
<li>
<a rel="nofollow" class="external text" href="https://www.pointsoftware.ch/2012/09/12/howto-local-and-remote-snapshot-backup-using-rsync-with-hard-links/">Howto – local and remote snapshot backup using rsync with hard links</a> Includes file deduplication with hard-links, MD5 integrity signature, 'chattr' protection, filter rules, disk quota, retention policy with exponential distribution (backups rotation while saving more recent backups than older)</li>
<li><a rel="nofollow" class="external text" href="https://stackoverflow.com/questions/5527068/how-do-you-use-an-identity-file-with-rsync">Using SSH keys/identity files with rsync</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../es/Category:Synchronization.html" title="Category:Synchronization (Español)">Synchronization (Español)</a></li>
<li><a href="../es/Category:Backup.html" title="Category:Backup (Español)">Backup (Español)</a></li>
<li><a href="../es/Category:Commands.html" title="Category:Commands (Español)">Commands (Español)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Rsync_(Espa%C3%B1ol)&amp;oldid=813145">https://wiki.archlinux.org/index.php?title=Rsync_(Español)&amp;oldid=813145</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 July 2024, at 06:35.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
