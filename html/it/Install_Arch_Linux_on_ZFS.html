<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Install Arch Linux on ZFS (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Install_Arch_Linux_on_ZFS_Italiano rootpage-Install_Arch_Linux_on_ZFS_Italiano skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installazione" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installazione">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Installazione</div>
		</a>
		
			<button aria-controls="toc-Installazione-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installazione subsection</span>
			</button>
		
		<ul id="toc-Installazione-sublist" class="vector-toc-list">
			<li id="toc-Precauzioni" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Precauzioni">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Precauzioni</div>
			</a>
			
			<ul id="toc-Precauzioni-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Installare_il_modulo_ZFS_sul_sistema_archiso" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installare_il_modulo_ZFS_sul_sistema_archiso">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Installare il modulo ZFS sul sistema archiso</div>
			</a>
			
			<ul id="toc-Installare_il_modulo_ZFS_sul_sistema_archiso-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Incorporamento_del_modulo_ZFS_in_un_archiso_personalizzato." class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Incorporamento_del_modulo_ZFS_in_un_archiso_personalizzato.">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Incorporamento del modulo ZFS in un archiso personalizzato.</div>
			</a>
			
			<ul id="toc-Incorporamento_del_modulo_ZFS_in_un_archiso_personalizzato.-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Partizionamento_dell'unità_di_destinazione" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Partizionamento_dell'unit%C3%A0_di_destinazione">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Partizionamento dell'unità di destinazione</div>
		</a>
		
			<button aria-controls="toc-Partizionamento_dell'unità_di_destinazione-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Partizionamento dell'unità di destinazione subsection</span>
			</button>
		
		<ul id="toc-Partizionamento_dell'unità_di_destinazione-sublist" class="vector-toc-list">
			<li id="toc-Schema_partizioni" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Schema_partizioni">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Schema partizioni</div>
			</a>
			
			<ul id="toc-Schema_partizioni-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Esempi_di_comandi_per_parted" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Esempi_di_comandi_per_parted">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Esempi di comandi per parted</div>
			</a>
			
			<ul id="toc-Esempi_di_comandi_per_parted-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Formattazione_del_disco_di_destinazione" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Formattazione_del_disco_di_destinazione">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Formattazione del disco di destinazione</div>
		</a>
		
		<ul id="toc-Formattazione_del_disco_di_destinazione-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configurazione_ZFS_filesystem" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configurazione_ZFS_filesystem">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Configurazione ZFS filesystem</div>
		</a>
		
			<button aria-controls="toc-Configurazione_ZFS_filesystem-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configurazione ZFS filesystem subsection</span>
			</button>
		
		<ul id="toc-Configurazione_ZFS_filesystem-sublist" class="vector-toc-list">
			<li id="toc-Creazione_del_pool_di_root" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Creazione_del_pool_di_root">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Creazione del pool di root</div>
			</a>
			
			<ul id="toc-Creazione_del_pool_di_root-sublist" class="vector-toc-list">
				<li id="toc-Compressione_e_crittografia_nativa" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Compressione_e_crittografia_nativa">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.1</span>Compressione e crittografia nativa</div>
			</a>
			
			<ul id="toc-Compressione_e_crittografia_nativa-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Creazione_dei_dataset" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Creazione_dei_dataset">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Creazione dei dataset</div>
			</a>
			
			<ul id="toc-Creazione_dei_dataset-sublist" class="vector-toc-list">
				<li id="toc-Dataset_di_sistema" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Dataset_di_sistema">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.1</span>Dataset di sistema</div>
			</a>
			
			<ul id="toc-Dataset_di_sistema-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Export/Import_dei_pool" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Export/Import_dei_pool">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Export/Import dei pool</div>
			</a>
			
			<ul id="toc-Export/Import_dei_pool-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configurazione_del_root_filesystem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configurazione_del_root_filesystem">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Configurazione del root filesystem</div>
			</a>
			
			<ul id="toc-Configurazione_del_root_filesystem-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Installazione_e_configurazione_Arch_Linux" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installazione_e_configurazione_Arch_Linux">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Installazione e configurazione Arch Linux</div>
		</a>
		
		<ul id="toc-Installazione_e_configurazione_Arch_Linux-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installazione_e_configurazione_del_bootloader" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Installazione_e_configurazione_del_bootloader">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Installazione e configurazione del bootloader</div>
		</a>
		
			<button aria-controls="toc-Installazione_e_configurazione_del_bootloader-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installazione e configurazione del bootloader subsection</span>
			</button>
		
		<ul id="toc-Installazione_e_configurazione_del_bootloader-sublist" class="vector-toc-list">
			<li id="toc-Utilizzando_EFISTUB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizzando_EFISTUB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Utilizzando EFISTUB</div>
			</a>
			
			<ul id="toc-Utilizzando_EFISTUB-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utilizzando_Unified_kernel_image" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizzando_Unified_kernel_image">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Utilizzando Unified kernel image</div>
			</a>
			
			<ul id="toc-Utilizzando_Unified_kernel_image-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utilizzando_GRUB" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizzando_GRUB">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Utilizzando GRUB</div>
			</a>
			
			<ul id="toc-Utilizzando_GRUB-sublist" class="vector-toc-list">
				<li id="toc-bug:_rilevamento_del_pool_root_danneggiato" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#bug:_rilevamento_del_pool_root_danneggiato">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.1</span>bug: rilevamento del pool root danneggiato</div>
			</a>
			
			<ul id="toc-bug:_rilevamento_del_pool_root_danneggiato-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-errore:_impossibile_ottenere_il_percorso_canonico_di" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#errore:_impossibile_ottenere_il_percorso_canonico_di">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.2</span>errore: impossibile ottenere il percorso canonico di</div>
			</a>
			
			<ul id="toc-errore:_impossibile_ottenere_il_percorso_canonico_di-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-errore:_filesystem_sconosciuto" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#errore:_filesystem_sconosciuto">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.3</span>errore: filesystem sconosciuto</div>
			</a>
			
			<ul id="toc-errore:_filesystem_sconosciuto-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Avvio_del_kernel_e_initrd_da_ZFS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Avvio_del_kernel_e_initrd_da_ZFS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.4</span>Avvio del kernel e initrd da ZFS</div>
			</a>
			
			<ul id="toc-Avvio_del_kernel_e_initrd_da_ZFS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Avvio_del_kernel_e_initrd_da_una_partizione_di_avvio_separata" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Avvio_del_kernel_e_initrd_da_una_partizione_di_avvio_separata">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3.5</span>Avvio del kernel e initrd da una partizione di avvio separata</div>
			</a>
			
			<ul id="toc-Avvio_del_kernel_e_initrd_da_una_partizione_di_avvio_separata-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Utilizzo_di_systemd-boot_(solo_per_EFI)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizzo_di_systemd-boot_(solo_per_EFI)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Utilizzo di systemd-boot (solo per EFI)</div>
			</a>
			
			<ul id="toc-Utilizzo_di_systemd-boot_(solo_per_EFI)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utilizzando_rEFInd_per_UEFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizzando_rEFInd_per_UEFI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Utilizzando rEFInd per UEFI</div>
			</a>
			
			<ul id="toc-Utilizzando_rEFInd_per_UEFI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Using_ZFSBootMenu_for_UEFI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Using_ZFSBootMenu_for_UEFI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>Using ZFSBootMenu for UEFI</div>
			</a>
			
			<ul id="toc-Using_ZFSBootMenu_for_UEFI-sublist" class="vector-toc-list">
				<li id="toc-Generazione_immagine_ZFSBootMenu" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Generazione_immagine_ZFSBootMenu">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6.1</span>Generazione immagine ZFSBootMenu</div>
			</a>
			
			<ul id="toc-Generazione_immagine_ZFSBootMenu-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Binari_EFI_ZFSBootMenu" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Binari_EFI_ZFSBootMenu">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6.2</span>Binari EFI ZFSBootMenu</div>
			</a>
			
			<ul id="toc-Binari_EFI_ZFSBootMenu-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Utilizzando_ZFSBootMenu_per_Legacy/CSM" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizzando_ZFSBootMenu_per_Legacy/CSM">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>Utilizzando ZFSBootMenu per Legacy/CSM</div>
			</a>
			
			<ul id="toc-Utilizzando_ZFSBootMenu_per_Legacy/CSM-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Configurazione_di_systemd_ZFS_mounts" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Configurazione_di_systemd_ZFS_mounts">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Configurazione di systemd ZFS mounts</div>
		</a>
		
		<ul id="toc-Configurazione_di_systemd_ZFS_mounts-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Smontare_e_riavvio" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Smontare_e_riavvio">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">8</span>Smontare e riavvio</div>
		</a>
		
			<button aria-controls="toc-Smontare_e_riavvio-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Smontare e riavvio subsection</span>
			</button>
		
		<ul id="toc-Smontare_e_riavvio-sublist" class="vector-toc-list">
			<li id="toc-Caricamento_password_da_USB-Stick" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Caricamento_password_da_USB-Stick">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">8.1</span>Caricamento password da USB-Stick</div>
			</a>
			
			<ul id="toc-Caricamento_password_da_USB-Stick-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Troubleshooting" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Troubleshooting">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">9</span>Troubleshooting</div>
		</a>
		
			<button aria-controls="toc-Troubleshooting-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Troubleshooting subsection</span>
			</button>
		
		<ul id="toc-Troubleshooting-sublist" class="vector-toc-list">
			<li id="toc-Il_sistema_non_si_avvia_a_causa_di:_impossibile_importare_zroot:_nessun_pool_di_questo_tipo_disponibile" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Il_sistema_non_si_avvia_a_causa_di:_impossibile_importare_zroot:_nessun_pool_di_questo_tipo_disponibile">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">9.1</span>Il sistema non si avvia a causa di: impossibile importare zroot: nessun pool di questo tipo disponibile</div>
			</a>
			
			<ul id="toc-Il_sistema_non_si_avvia_a_causa_di:_impossibile_importare_zroot:_nessun_pool_di_questo_tipo_disponibile-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Guarda_anche" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Guarda_anche">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">10</span>Guarda anche</div>
		</a>
		
		<ul id="toc-Guarda_anche-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Install Arch Linux on ZFS (Italiano)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Install_Arch_Linux_on_ZFS.html" title="Install Arch Linux on ZFS – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/ZFS_%E3%81%AB_Arch_Linux_%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" title="ZFS に Arch Linux をインストール – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Install_Arch_Linux_on_ZFS_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)" title="Install Arch Linux on ZFS (简体中文) – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="it" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/ZFS.html" title="ZFS">ZFS</a></li>
<li><a href="../en/ZFS/Virtual_disks.html" class="mw-redirect" title="Experimenting with ZFS">Experimenting with ZFS</a></li>
</ul>
</div>
<p>Questo articolo spiega i passaggi richiesti per installare Arch Linux su una root filesystem ZFS.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Se si copia ciecamente questa wiki non funzionerà. È necessario prendersi il tempo per capire il processo di boot, e cosa viene fatto durante la creazione dei pool e dei dataset. Eccoti i link utili:
<ul>
<li><a rel="nofollow" class="external text" href="https://www.freebsd.org/doc/handbook/zfs.html">FreeBSD ZFS Handbook</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/zfsonlinux/zfs/wiki">ZFSOnLinux wiki</a></li>
<li><a rel="nofollow" class="external text" href="http://open-zfs.org/wiki/System_Administration">OpenZFS wiki</a></li>
<li><a rel="nofollow" class="external text" href="https://pthree.org/2012/04/17/install-zfs-on-debian-gnulinux/">Aaron Toponce Install ZFS on Debian GNU/Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://openzfs.github.io/openzfs-docs/Getting%20Started/Arch%20Linux/">OpenZFS documentation for Arch Linux</a></li>
</ul>
</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Installazione">Installazione</span></h2>
<p>Per installare Arch Linux su ZFS, sarà necessario avviare il sistema con il modulo ZFS.
</p>
<h3><span class="mw-headline" id="Precauzioni">Precauzioni</span></h3>
<p>Il fatto che i moduli Kernel ZFS siano out-of-tree combinato alla natura rolling release come la distribuzione Arch, ci saranno spesso dei momenti (anche se brevi) in cui i pacchetti del kernel nel repository esterno non saranno allineati con quelli Arch, e occasionalmente i moduli ZFS (in versione dkms)  non verranno compilati affato con i kernel piu recenti. Se hai bisogno o vuoi utilizzare sempre i pacchetti Kernel piu recenti, installare Arch su ZFS potrebbe non essere una buona idea. Tuttavia, nella maggior parte dei casi è sensato inserire linux e i relativi linux-* (e linux-*-headers se si utilizza dkms) nel file IgnorePkg e aggiornarli solo manualmente e ripristinarli nel caso in cui ci siano problemi evidenti. In alternativa, si potrebbe usare il pacchetto LTS Kernel, che dovrebbe essere sempre utilizabile con dkms.
</p>
<h3><span class="mw-headline" id="Installare_il_modulo_ZFS_sul_sistema_archiso">Installare il modulo ZFS sul sistema archiso</span></h3>
<p>Esistono due modi per installare il modulo ZFS in archiso.
</p>
<p>Uno di questi è tramite un semplice script che installa e carica il modulo ZFS sul sistema archiso avviato. Questo dovrebbe funzionare su tutte le versioni di archiso.
</p>
<p>Vedi <a rel="nofollow" class="external text" href="https://github.com/eoli3n/archiso-zfs">eoli3n/archiso-zfs</a>.
</p>
<h3><span class="mw-headline" id="Incorporamento_del_modulo_ZFS_in_un_archiso_personalizzato.">Incorporamento del modulo ZFS in un archiso personalizzato.</span></h3>
<p>per creare un archiso personalizzato, leggere questo articolo <a href="../en/ZFS.html#Create_an_Archiso_image_with_ZFS_support" title="ZFS">ZFS</a>.
</p>
<h2>
<span id="Partizionamento_dell.27unit.C3.A0_di_destinazione"></span><span class="mw-headline" id="Partizionamento_dell'unità_di_destinazione">Partizionamento dell'unità di destinazione</span>
</h2>
<p>Rivedersi <a href="../en/Partitioning.html" title="Partitioning">Partitioning</a> per informazioni su come determinare il tipo di tabella partizioni da utilizzare per ZFS. ZFS supporta le tabelle partizioni GPT e MBR.
</p>
<p>ZFS gestise le proprie partizioni, quindì è richiesto solo uno schema di tabella partizioni di base. La partizione che conterrà il filesystem ZFS dovrà essere di tipo <code>bf00</code>, o "Solaris Root".
</p>
<p>I dischi più grandi di 2TB richiedono la tabella partizioni GPT. La configurazione GRUB per BIOS/GPT richiede una partizione di tipo "BIOS GRUB" grande (1-2MiB) per contenere l'immagine del codice di avvio..
</p>
<p>In base al firmware della macchina e alla modalità di avvio scelta, l'avvio potrà richiedere o meno una <a href="../en/EFI_system_partition.html" title="EFI system partition">EFI system partition</a>. Su una macchina BIOS (o una macchina UEFI avvio in modalità legacy), una partizione di sistema EFI non è richiesta. Consulta la pagina <a href="../en/Arch_boot_process.html#Boot_loader" title="Arch boot process">Arch boot process#Boot loader</a> per maggiori informazioni.
</p>
<h3><span class="mw-headline" id="Schema_partizioni">Schema partizioni</span></h3>
<p>Ecco un esempio di uno schema di partizioni base che potrebbe essere utilizzato per l'installazione root ZFS su una macchina con BIOS/MBR e GRUB:
</p>
<pre>Part     Size   Type
----     ----   -------------------------
   1     XXXG   Solaris Root (bf00)
</pre>
<p>Utilizzando GRUB con tipo di avvio della macchina BIOS (o una macchina UEFI in modalità avvio legacy) ma usando lo schema partizioni GPT:
</p>
<pre>Part     Size   Type
----     ----   -------------------------
   1       2M   BIOS boot partition (ef02)
   2     XXXG   Solaris Root (bf00)
</pre>
<p>Utilizzando <a href="../en/Syslinux.html" title="Syslinux">Syslinux</a> con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zfsbootmenu/">zfsbootmenu</a></span><sup><small>AUR</small></sup> su una macchina con modalità avvio BIOS e una tabella partizioni GPT o MBR:
</p>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> The "BIOS boot partition" is GRUB-specific. Syslinux does not use it. (Discuss in <a rel="nofollow" class="external text" href="../it/Talk:Install_Arch_Linux_on_ZFS.html">Talk:Install Arch Linux on ZFS (Italiano)</a>)</div>
</div>
<pre>Part     Size   Type
----     ----   -------------------------
   1     512M   BIOS boot partition (ef02)
   2     XXXG   Solaris Root (bf00)
</pre>
<p>Un altro esempio, questa volta usando un bootloader specifico UEFI (come <a href="../en/REFInd.html" title="REFInd">rEFInd</a>) con tabella partizioni GPT:
</p>
<pre>Part     Size   Type
----     ----   -------------------------
   1       1G   EFI system partition (ef00)
   2     XXXG   Solaris Root (bf00)
</pre>
<p>ZFS non suporta lo swap file. Se si necessita della partizione di swap, visitare <a href="../en/ZFS.html#Swap_volume" title="ZFS">ZFS#Swap volume</a> per creare lo swap ZVOL.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> I bootloaders con supporto per ZFS sono descritti in <a href="#Installazione_e_configurazione_del_bootloader">#Installazione e configurazione del bootloader</a>.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Diversi bug di GRUB (<a rel="nofollow" class="external text" href="https://savannah.gnu.org/bugs/?42861">bug #42861</a>, <a rel="nofollow" class="external text" href="https://github.com/zfsonlinux/grub/issues/5">zfsonlinux/grub/issues/5</a>) complicate installing it on ZFS partitions, see <a href="#Installazione_e_configurazione_del_bootloader">#Installazione e configurazione del bootloader</a> for a workaround</div>
<h3><span class="mw-headline" id="Esempi_di_comandi_per_parted">Esempi di comandi per parted</span></h3>
<p>Ecco alcuni comandi di esempio per partizionare un'unità per il secondo scenario di cui sopra, ovvero utilizzando la modalità di avvio BIOS/legacy con una tabella delle partizioni GPT e una partizione di avvio del BIOS da 1 MB (poco più) per GRUB:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># parted /dev/sd<i>x</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">(parted)mklabel gpt
(parted)mkpart non-fs 0% 2
(parted)mkpart primary 2 100%
(parted)set 1 bios_grub on
(parted)set 2 boot on
(parted)quit
</pre>
<p>è possibile ottenere quanto sopra, in un singolo comando:
</p>
<pre># parted --script /dev/sd<i>x</i> mklabel gpt mkpart non-fs 0% 2 mkpart primary 2 100% set 1 bios_grub on set 2 boot on
</pre>
<p>Se si sta creando un partizione di sistema EFI dovrà essere impostata sotto boot invece che root.
</p>
<h2><span class="mw-headline" id="Formattazione_del_disco_di_destinazione">Formattazione del disco di destinazione</span></h2>
<p>Se si ha optato per una partizione di avvio e per qualsiasi altra partizione di sistema non ZFS, formattala. Non fare nulla alla partizione Solaris né alla partizione alla partizione di avvio BIOS GRUB. ZFS gestirà la prima, mentre il bootloader la seconda.
</p>
<h2><span class="mw-headline" id="Configurazione_ZFS_filesystem">Configurazione ZFS filesystem</span></h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Non usare il carattere '-' nel nome dei datasets. (<a rel="nofollow" class="external text" href="https://github.com/zfsonlinux/zfs/commit/c39b2786ac98ab87d6dda00aa83b399ed175055a">see this "feature"</a>)</div>
<p>Prima, assicurati che il modulo ZFS sia caricato:
</p>
<pre># modprobe zfs
</pre>
<h3><span class="mw-headline" id="Creazione_del_pool_di_root">Creazione del pool di root</span></h3>
<p>Creare il tuo pool e imposta tutte le opzioni del dataset predefinite. Tutti i dataset creati da zpool, erediteranno ciascuno l'opzione <code>-O</code> alla creazione. Le impostazioni di default sono spiegate in <a rel="nofollow" class="external text" href="https://openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Buster%20Root%20on%20ZFS.html#step-2-disk-formatting">Debian Buster Root on ZFS. Step 2: Disk Formatting</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Utilizzare <code>-o ashift=9</code> per dischi con una dimensione dei settori fisici di 512 byte o <code>-o ashift=12</code> per dischi con dimensione fisica dei settori a 4096 byte. Vedi <code>lsblk -S -o NAME,PHY-SEC</code> per verificare la dimensione fisica del settore per ogni disco SCSI/SATA. Rimuovere <code>-S</code> se si vuole lo stesso valore per tutti i dispositivi. Per dischi NVMe, usare <code>nvme id-ns /dev/nvmeXnY -H | grep "LBA Format"</code> per ottenere quale formato LBA è in uso. Molti dischi NVMe sono con dimensione dei settori fisica da 512-byte, Vedi <a rel="nofollow" class="external text" href="https://openzfs.github.io/openzfs-docs/Performance%20and%20Tuning/Hardware.html#nvme-low-level-formatting">OpenZFS: NVMe low level formatting</a> per passare a settori di 4096-byte.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Tieni a presente che la maggior parte dei dispositivi moderni usa settori fisici da 4096 byte, anche se alcuni riportno 512 byte. Questo è specialmentevero per gli SSD. Selezionando <code>ashift=9</code> su una dimensione settori di 4096 byte (anche se viene riportato 512) <b>comporterà</b>  una perdita di prestazioni. Selezionando <code>ashift=12</code> su settori da 512 byte potrebbe comportare ma incorrere in perdita di capacità, ma non in si avrà delle perdite di prestazioni. Se si è in dubbio, per i dischi moderni, sbagliare dalla parte <code>ashift=12</code>, o ricerca il valore appropriato al tuo dispositivo. Fare riferimento a <a rel="nofollow" class="external text" href="https://github.com/openzfs/zfs/issues/967">OpenZFS issue #967</a> for a related discussion, and <a rel="nofollow" class="external text" href="https://github.com/openzfs/zfs/issues/2497">OpenZFS issue #2497</a> fper una conseguenza di un valore di spostamento più elevato.
</div>
<pre># zpool create -f -o ashift=12         \
             -O acltype=posixacl       \
             -O relatime=on            \
             -O xattr=sa               \
             -O dnodesize=legacy       \
             -O normalization=formD    \
             -O mountpoint=none        \
             -O canmount=off           \
             -O devices=off            \
             -R /mnt                   \
             zroot /dev/disk/by-id/<i>id-to-partition-partx</i></pre>
<h4><span class="mw-headline" id="Compressione_e_crittografia_nativa">Compressione e crittografia nativa</span></h4>
<p>Questo abiliterà la compressione e la crittografia nativa per impostazione predefinita su tutti i dataset:
</p>
<pre># zpool create -f -o ashift=12         \
             -O acltype=posixacl       \
             -O relatime=on            \
             -O xattr=sa               \
             -O dnodesize=legacy       \
             -O normalization=formD    \
             -O mountpoint=none        \
             -O canmount=off           \
             -O devices=off            \
             -R /mnt                   \
             -O compression=lz4        \
             -O encryption=aes-256-gcm \
             -O keyformat=passphrase   \
             -O keylocation=prompt     \
             zroot /dev/disk/by-id/<i>id-to-partition-partx</i></pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> 
<ul>
<li>Utilizza sempre i nomi ID quando lavori con ZFS, altrimenti si verificheranno errori di importazione.</li>
<li>Invece di by-id, considera l'utilizzo di by-partuuid o by-uuid, poiché rimarranno coerenti anche se un'unità interna viene spostata in un contenitore USB o viceversa (questo è possibile solo se ZFS viene utilizzato con una partizione, non con un intero disco)</li>
<li>Gli utenti <a href="../en/GRUB.html" title="GRUB">GRUB</a> dovrebbero tenere a mente che il comando <i>zpool-create</i> normalmente abilita tutte le caratteristiche, <b>alcuni dei quali potrebbero non essere supportati da GRUB</b>. Vedi: <a href="../en/ZFS.html#GRUB-compatible_pool_creation" title="ZFS">ZFS#GRUB-compatible pool creation</a>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Creazione_dei_dataset">Creazione dei dataset</span></h3>
<p>Invece di utilizzare le partizioni del disco convenzionali, ZFS utilizza il concetto di dataset per gestire il tuo spazio di archiviazione. A differenza delle partizioni del disco, i dataset non hanno dimensioni fisse e consentono di applicare attributi diversi, come la compressione, a ciascun dataset. I normali dataset ZFS vengono montati automaticamente da ZFS mentre i dataset legacy devono essere montati utilizzando fstab o con il tradizionale comando mount.
</p>
<p>Una delle funzionalità più utili di ZFS sono gli ambienti di avvio. Gli ambienti di boot ti consentono di creare un'istantanea avviabile del tuo sistema a cui puoi ripristinare immediatamente in qualsiasi momento semplicemente riavviando e avviando da quell'ambiente di boot. Ciò può rendere gli aggiornamenti di sistema molto più sicuri ed è anche incredibilmente utile per lo sviluppo e il test del software. Per poter utilizzare un gestore dell'ambiente di boot come <a rel="nofollow" class="external text" href="https://github.com/b333z/beadm">beadm</a>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zectl/">zectl</a></span><sup><small>AUR</small></sup> (systemd-boot), o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zedenv/">zedenv</a></span><sup><small>AUR</small></sup> (GRUB) per gestire gli ambienti di boot, i dataset devono essere configurati correttamente. La chiave è che dividi le tue cartelle di dati (come <code>/home</code>) in dataset distinti dai dataset del tuo sistema e che non inserisci i dati nella radice del pool poiché questo non può essere spostato in seguito.
</p>
<p>Dovresti sempre creare un dataset almeno per il tuo filesystem root e in quasi tutti i casi vorrai che anche <code>/home</code> sia in un dataset separato. Potresti decidere di desiderare che i tuoi registri persistano negli ambienti di avvio. Se stai utilizzando un software che memorizza dati al di fuori di <code>/home</code> (come nel caso dei server di database) dovresti strutturare i tuoi dataset in modo che le cartelle dei dati del software che desideri eseguire siano separate dal dataset root.
</p>
<p><br>
Con questi comandi di esempio, creeremo una configurazione compatibile con l'ambiente di boot di base comprendente solo i dataset root e <code>/home</code>. Eredita le opzioni predefinite da <a href="#Create_the_root_zpool">zpool creation.</a>
</p>
<pre># zfs create -o mountpoint=none zroot/data
# zfs create -o mountpoint=none zroot/ROOT
# zfs create -o mountpoint=/ -o canmount=noauto zroot/ROOT/default
# zfs create -o mountpoint=/home zroot/data/home
</pre>
<p>Puoi anche creare il tuo dataset ROOT senza dover specificare il punto di montaggio su / poiché GRUB lo monterà comunque su /. Ciò ti dà la possibilità di avviare alcune vecchie versioni di root semplicemente clonandole e inserendole come voce di menu di GRUB. In tal modo, puoi creare ROOT con il seguente comando:
</p>
<pre># zfs create -o mountpoint=/roots/default zroot/ROOT/default
</pre>
<p>Puoi memorizzare <code>/root</code> nella tua <code>zroot/data/home</code> dataset.
</p>
<pre># zfs create -o mountpoint=/root zroot/data/home/root
</pre>
<p>Dovrai abilitare alcune opzioni per i dataset che contengono directory specifiche:
</p>
<table class="wikitable" style="text-align: left;">
<caption>Opzioni richieste da directory specifiche
</caption>
<tbody>
<tr>
<th scope="col">Directory
</th>
<th scope="col">Dataset option
</th>
<th scope="col">Details
</th>
</tr>
<tr>
<td>
<code>/</code>
</td>
<td>
<code>canmount=noauto</code>
</td>
<td>
</td>
</tr>

<tr>
<td>
<code>/var/log/journal</code>
</td>
<td>
<code>acltype=posixacl</code>
</td>
<td>
<a href="../it/Systemd.html#systemd-tmpfiles-setup.service_non_si_avvia_al_boot" title="Systemd (Italiano)">systemd (Italiano)#systemd-tmpfiles-setup.service non si avvia al boot</a>
</td>
</tr>
</tbody>
</table>
<h4><span class="mw-headline" id="Dataset_di_sistema">Dataset di sistema</span></h4>
<p>Per creare dataset per il sistema di cartelle, usa <code>canmount=off</code>.
</p>
<p>Per alcuni esempi, puoi leggere <a rel="nofollow" class="external text" href="https://openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Buster%20Root%20on%20ZFS.html#step-3-system-installation">Debian-Buster-Root-on-ZFS#step-3-system-installation</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Considera 'utilizzo di <i>zfs-mount-generator</i> invece di <code>zfs-mount.service</code> se si monta un dataset, ad esempio <code>zroot/var/log</code>, su <code>/var/log</code>. Corregge l'ordine di montaggio del filesystem come descritto in <a rel="nofollow" class="external text" href="https://openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Buster%20Root%20on%20ZFS.html#step-5-grub-installation">Step 5.7 of Debian Buster Root on ZFS</a>.</div>
<pre># zfs create -o mountpoint=/var -o canmount=off     zroot/var
# zfs create                                        zroot/var/log
# zfs create -o mountpoint=/var/lib -o canmount=off zroot/var/lib
# zfs create                                        zroot/var/lib/libvirt
# zfs create                                        zroot/var/lib/docker
</pre>
<h3>
<span id="Export.2FImport_dei_pool"></span><span class="mw-headline" id="Export/Import_dei_pool">Export/Import dei pool</span>
</h3>
<p>Per validare la propria configurazine, esportare e reimportare i propri pool.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Non saltare questo passaggio, Do not skip this, altrimenti sarà richiesto l'utilizzo di <code>-f</code> quando si importa i pool. Questo scarica i pool importati.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Questo potrebbe fallire se si ha aggiunto una partizione di swap. Si dovrà procedere con la disattivazione tramite il comando <i>swapoff</i>.</div>
<pre># zpool export zroot
# zpool import -d /dev/disk/by-id -R /mnt zroot -N
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>-d</code> non è l'attuale ID del dispositivo, ma la cartella contenente i link simbolici.
<p>Se questo comando fallisce e viene chiesto di importare i pool tramite il suo ID numerico, esegui <code>zpool import</code> per scoprire lo ID del tuo pool, quindi utilizza un comando come:
</p>
<pre># zpool import 9876543212345678910 -R /mnt zroot
</pre>
</div>
<p>Se si sta usando la cifratura nativa, caricare la chiave zfs.
</p>
<pre># zfs load-key zroot
</pre>
<p>Montare manualmente il proprio rootfs dataset perché questo ha l'opzione <code>canmount=noauto</code>, poi montare i rimanenti datasets creati.
</p>
<pre># zfs mount zroot/ROOT/default
# zfs mount -a
</pre>
<p>Adesso lo ZFS filesystem è pronto ad essere utilizzato.
</p>
<h3><span class="mw-headline" id="Configurazione_del_root_filesystem">Configurazione del root filesystem</span></h3>
<p>Se hai utilizzato i dataset legacy, saranno elencati in <code>/etc/fstab</code>.
</p>
<p>Imposta la proprietà di bootfs sul filesystem di root, in modo che il boot loader sia in grado di trovare il sistema ooperativo.
</p>
<pre># zpool set bootfs=zroot/ROOT/default zroot
</pre>
<p>Se non si ha <code>/etc/zfs/zpool.cache</code>, crearlo:
</p>
<pre># zpool set cachefile=/etc/zfs/zpool.cache zroot
</pre>
<p>Assicurati di portare il file <code>zpool.cache</code> nel ptoprio sistema. Questo sarà necessario successivamente per l'avvio del demone ZFS.
</p>
<pre># mkdir -p /mnt/etc/zfs
# cp /etc/zfs/zpool.cache /mnt/etc/zfs/zpool.cache
</pre>
<h2><span class="mw-headline" id="Installazione_e_configurazione_Arch_Linux">Installazione e configurazione Arch Linux</span></h2>
<p>Segui i passaggi seguenti usando la <a href="../it/Installation_guide.html" title="Installation guide (Italiano)">Installation guide (Italiano)</a>. Verrà specificato dove sarà necessario prestare più attenzione per ZFSonLinux.
</p>
<ul><li>Per prima cosa montare tutte le partizioni di avvio o di sistema legacy o non-ZFS, usando il comando mount.</li></ul>
<ul><li>Installa il sistema di base.</li></ul>
<ul><li>La procedura descritta in <a href="../it/Installation_guide.html#Fstab" title="Installation guide (Italiano)">Installation guide (Italiano)#Fstab</a> di solito è eccessivo per ZFS. Solitamente ZFS monta automaticamente le proprie partizioni, quindi non abbiamo bisogno delle partizioni ZFS nel file <code>fstab</code>, a meno che l'utente non abbia creato i dataset legacy delle cartelle di sistema. Per generare <code>fstab</code> per i filesystem, usare:</li></ul>
<pre># genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab
</pre>
<ul><li>Cambiare root nel nuovo sistema, per <a href="../it/Installation_guide.html#Chroot" title="Installation guide (Italiano)">Installation guide (Italiano)#Chroot</a>:</li></ul>
<pre># arch-chroot /mnt
</pre>
<ul><li>Modificare il file <code>/etc/fstab</code>:</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Se hai scelto di creare dataset legacy per le cartelle di sistema, mantienili nel file <code>fstab</code>!</li>
<li>Commentare tutti i non-legacy dataset al di fuori di swap file e la partizione di sistema EFI. Questa è una convenzione per sostituire lo UUID dello swap con <code>/dev/zvol/zroot/swap</code>.</li>
</ul>
</div>
<ul><li>Sarà necessario aggiungere <a href="../en/Unofficial_user_repositories.html#archzfs" title="Unofficial user repositories">Arch ZFS</a> repository in <code>/etc/pacman.conf</code>, <a href="../it/Pacman/Package_signing.html#Aggiungere_chiavi_non_ufficiali" title="Pacman (Italiano)/Package signing (Italiano)">firmarne la chiave</a> e <a href="../it/Help:Reading.html#Installazione_di_pacchetti" title="Help:Reading (Italiano)">installare</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zfs-linux/">zfs-linux</a></span><sup><small>AUR</small></sup> (o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zfs-linux-lts/">zfs-linux-lts</a></span><sup><small>AUR</small></sup> se si sta usando il kernel LTS) all'interno di arch-chroot prima di poter aggiornare il ramdisk con il supporto ZFS.</li></ul>
<ul><li>Quando si crea lo initial ramdisk, prima modificare <code>/etc/mkinitcpio.conf</code>. Aggiungere <code>zfs</code> a <code>MODULES</code>:</li></ul>
<pre>MODULES=(zfs)
</pre>
<p>Poi in <code>HOOKS</code>, aggiungere <code>zfs</code> prima di filesystems. Poi, spostare <code>keyboard</code> hook prima di <code>zfs</code> quindi puoi digitare in console se qualcosa va storto. Sarà necessario anche rimuovere fsck (se non si sta usando Ext3 or Ext4). La tua linea di <code>HOOKS</code> dovrà essere simile alla seguente:
</p>
<pre>HOOKS=(base udev autodetect microcode modconf kms keyboard keymap consolefont block zfs filesystems)
</pre>
<ul><li>Quando si utilizza systemd nello initrd, è necessario installare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mkinitcpio-sd-zfs/">mkinitcpio-sd-zfs</a></span><sup><small>AUR</small></sup> e aggiungere lo hook <code>sd-zfs</code> dopo lo hook <code>systemd</code> invece dello hook <code>zfs</code>. Tieni presente che questo hook utilizza parametri del kernel diversi rispetto allo hook predefinito <code>zfs</code>, maggiori informazioni possono essere trovate su <a rel="nofollow" class="external text" href="https://github.com/dasJ/sd-zfs">project page</a>.</li></ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<code>sd-zfs</code> non supporta ancora la crittografia nativa <a rel="nofollow" class="external text" href="https://github.com/dasJ/sd-zfs/issues/4">dasJ/sd-zfs/issues/4</a>.</li>
<li>Se si sta utilizzando un dataset separato per <code>/usr</code> e si ha seguito le istruzioni riportate di seguito, bisognerà assicurarsi di avere lo hook <code>usr</code> abilitato dopo <code>zfs</code>, o il sistema non si avvierà.</li>
<li>Quando si genera lo initramfs, il file <code>zpool.cache</code> viene copiato nello initrd. Se non lo hai generato prima o hai bisogno di rigenerarlo, ricordati di rigenerare nuovamente lo initramfs.</li>
<li>Puoi anche utilizzare il muontpoint <code>legacy</code> per consentire a fstab di montarlo.</li>
</ul>
</div>
<ul><li>
<a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">Regenerate the initramfs</a>.</li></ul>
<h2><span class="mw-headline" id="Installazione_e_configurazione_del_bootloader">Installazione e configurazione del bootloader</span></h2>
<p>In linea di principio, la configurazione del bootloader non differisce molto se il kernel e initrd risiedono in una partizione non-ZFS. Una volta che il kernel ha il modulo zfs e initrd che sono stati compilati con lo hook, e la riga cmd del kernel ha il parametro kernel <code>zfs</code>, il sistema può avviarsi. Ad esempio, <code>zfs=zroot/ROOT/default rw</code> o anche solo <code>zfs=zroot rw</code> (nel caso in cui il parametro bootfs sia stato impostato correttamente come fatto precedentemente) dovrebbe funzionano per la maggior parte dei casi. Non è necessario un parametro <code>root</code> poiché zfs monterà la root. Consulta la documentazione del bootloader su come impostare i parametri del kernel.
</p>
<p>Tuttavia, se è necessario caricare l'immagine del kernel e/o initrd da zfs, è necessario utilizzare un bootloader in grado di leggere zfs e configurare correttamente il bootloader.
</p>
<p>Considerando quanto sopra, configurare il tuo bootloader dovrebbe essere abbastanza semplice. Ecco alcuni esempi, ma l’elenco non è affatto completo.
</p>
<h3><span class="mw-headline" id="Utilizzando_EFISTUB">Utilizzando EFISTUB</span></h3>
<p>Per <a href="../en/EFISTUB.html" title="EFISTUB">EFISTUB</a>, sarà possibile aggiungere una voce al menu di avvio UEFI:
</p>
<pre># efibootmgr --create --disk <i>il_tuo_disco_esp</i> --part <i>il_tuo_numero_di_partizione_esp</i> --label "Arch Linux (ZFS)" --loader /vmlinuz-linux --unicode 'zfs=zroot/ROOT/default rw initrd=\initramfs-linux.img'
</pre>
<h3><span class="mw-headline" id="Utilizzando_Unified_kernel_image">Utilizzando Unified kernel image</span></h3>
<p>Utilizzando una <a href="../en/Unified_kernel_image.html" title="Unified kernel image">Unified kernel image</a> (UKI) è abbastanza semplice. Assicurati solo di avere il parametro zfs da qualche parte in <code>/etc/cmdline.d</code>. Configura manualmente mkinitcpio (moduli e hooks) come fatto in precedenza in questa pagina, o altrimnenti come faresti per una normale UKI. Per esempio:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cmdline.d/root.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zfs=zroot/ROOT/default rw</pre>
<p>Forse zfs=zroot è sufficiente (non testato), poiché zfs dovrebbe montare automaticamente root. Ricorda solo di rieseguire mkinitcpio ogni volta che si apportato modifiche.
</p>
<h3><span class="mw-headline" id="Utilizzando_GRUB">Utilizzando GRUB</span></h3>
<p>Se si usa GRUB, sarà possibile inserire il proprio <code>/boot</code> in uno zpool. Leggere <a rel="nofollow" class="external text" href="https://openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Buster%20Root%20on%20ZFS.html#step-3-system-installation">Debian-Buster-Root-on-ZFS#step-3-system-installation</a>.
</p>
<p>Installa GRUB sul disco come indicato qui: <a href="../en/GRUB.html#BIOS_systems" title="GRUB">GRUB#BIOS systems</a> o <a href="../en/GRUB.html#UEFI_systems" title="GRUB">GRUB#UEFI systems</a>. GRUB <a rel="nofollow" class="external text" href="https://www.gnu.org/software/grub/manual/grub.html#Configuration">manual</a> fornisce informazioni dettagliate sulla configurazione manuale del software che è possibile integrare con <a href="../en/GRUB.html" title="GRUB">GRUB</a> e <a href="../en/GRUB/Tips_and_tricks.html" title="GRUB/Tips and tricks">GRUB/Tips and tricks</a>.
</p>
<h4><span class="mw-headline" id="bug:_rilevamento_del_pool_root_danneggiato">bug: rilevamento del pool root danneggiato</span></h4>
<p>A causa di un <a rel="nofollow" class="external text" href="https://github.com/zfsonlinux/grub/issues/22">bug</a>, <i>grub-mkconfig</i> non riuscirà a rilevare il pool root e ometterà <code>/boot/grub/grub.cfg</code>. Fino a quando il problema non viene risolto, ci sono due possibili soluzioni alternative:
</p>
<ul><li>Soluzione A: Modifica il codice per il rilevamento rpool in <code>/etc/grub.d/10_linux</code>. Sostituisci</li></ul>
<pre>rpool=`${grub_probe} --device ${GRUB_DEVICE} --target=fs_label 2&gt;/dev/null || true`
</pre>
<dl><dd>con</dd></dl>
<pre>rpool=`zdb -l ${GRUB_DEVICE} | grep " name:" | cut -d\' -f2`
</pre>
<dl><dd>Questo di solito è in grado di rilevare il nome corretto del pool root e scrivere il percorso di lavoro su <code>/boot/grub/grub.cfg</code> ogni volta che viene utilizzato <i>grub-mkconfig</i>.</dd></dl>
<ul><li>Soluzione B:  Se la soluzione di cui sopra non riesce a rilevare il percorso corretto, puoi codificarlo in <code>/etc/grub.d/10_linux</code>. Sostituendo</li></ul>
<pre>linux   ${rel_dirname}/${basename} root=${linux_root_device_thisversion} rw ${args}
</pre>
<dl><dd>con</dd></dl>
<pre>linux   ${rel_dirname}/${basename} root=ZFS=zroot/ROOT/default rw ${args}
</pre>
<h4><span class="mw-headline" id="errore:_impossibile_ottenere_il_percorso_canonico_di">errore: impossibile ottenere il percorso canonico di</span></h4>
<p><i>grub-mkconfig</i> non riesce a generare correttamente le voci per i sistemi su ZFS.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># grub-mkconfig -o /boot/grub/grub.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/usr/bin/grub-probe: error: failed to get canonical path of `/dev/bus-Your_Disk_ID-part#'
grub-install: error: failed to get canonical path of `/dev/bus-Your_Disk_ID-part#'
</pre>
<p>Per risolvere questo problema è necessario impostare questa variabile di ambiente: <code>ZPOOL_VDEV_NAME_PATH=1</code>. Per esempio:
</p>
<pre># ZPOOL_VDEV_NAME_PATH=1 grub-mkconfig -o /boot/grub/grub.cfg
</pre>
<h4><span class="mw-headline" id="errore:_filesystem_sconosciuto">errore: filesystem sconosciuto</span></h4>
<p>Gli strumenti GRUB come <i>grub-probe</i> o <i>grub-install</i> potrebbero fallire con l'errore <code>unknown filesystem</code>  quando il rilevamento del filesystem fallisce. Ciò può accadere perché il filesystem non è supportato da GRUB o, nel caso di ZFS, potrebbero essere presenti funzionalità non supportate (fare riferimento <a href="../en/ZFS.html#GRUB-compatible_pool_creation" title="ZFS">ZFS#GRUB-compatible pool creation</a> per le funzionalità appropriate da includere in uno zpool di avvio.)
</p>
<p>Per risolvere l'errore, capire quale filesystem non riesce a identificare (ad esempio, eseguire <i>grub-probe</i> sui sospetti, come <code>grub-probe /</code> o <code>grub-probe /boot</code>). Segue un esempio di interazione:
</p>
<pre># grub-probe /boot
zfs

# grub-probe /
grub-probe: error: unknown filesystem.
</pre>
<p>Dopo aver identificato il filesystem problematico, esegui <code>grub-probe -vvvv /</code> e scansiona lo output per il filesystem che avrebbe dovuto identificare. In questo caso era previsto ZFS, ma è stato generato il seguente output:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">grub-probe -vvvv /</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">(...)
grub-core/kern/fs.c:56: Detecting zfs...
grub-core/osdep/hostdisk.c:420: opening the device `/dev/sda4' in open_device()
grub-core/fs/zfs/zfs.c:1199: label ok 0
grub-core/osdep/hostdisk.c:399: reusing open device `/dev/sda4'
grub-core/fs/zfs/zfs.c:1014: check 2 passed
grub-core/fs/zfs/zfs.c:1025: check 3 passed
grub-core/fs/zfs/zfs.c:1032: check 4 passed
grub-core/fs/zfs/zfs.c:1042: check 6 passed
grub-core/fs/zfs/zfs.c:1050: check 7 passed
grub-core/fs/zfs/zfs.c:1061: check 8 passed
grub-core/fs/zfs/zfs.c:1071: check 9 passed
grub-core/fs/zfs/zfs.c:1093: check 11 passed
grub-core/fs/zfs/zfs.c:1119: check 10 passed
grub-core/fs/zfs/zfs.c:1135: str=com.delphix:hole_birth
grub-core/fs/zfs/zfs.c:1135: str=com.delphix:embedded_data
grub-core/fs/zfs/zfs.c:1144: check 12 passed (feature flags)
grub-core/fs/zfs/zfs.c:1884: zio_read: E 0: size 4096/4096
(...)
grub-core/osdep/hostdisk.c:399: reusing open device `/dev/sda4'
grub-core/fs/zfs/zfs.c:2117: zap: name = com.delphix:extensible_dataset, value = 18, cd = 0
grub-core/fs/zfs/zfs.c:2117: zap: name = com.datto:bookmark_v2, value = 0, cd = 0
grub-core/fs/zfs/zfs.c:2117: zap: name = com.datto:encryption, value = c, cd = 0 # &lt;------------------
grub-core/kern/fs.c:78: zfs detection failed.  # &lt;----------------------------------------------------
grub-core/kern/fs.c:56: Detecting xfs...
grub-core/fs/xfs.c:931: Reading sb
grub-core/fs/xfs.c:270: Validating superblock
grub-core/kern/fs.c:78: xfs detection failed.
grub-core/kern/fs.c:56: Detecting ufs2...
(...)
grub-core/kern/fs.c:56: Detecting affs...
grub-core/kern/fs.c:78: affs detection failed.
grub-probe: error: unknown filesystem.</pre>
<p>Ciò dimostra che il rilevamento ZFS è andato bene finché non è stata rilevata la funzionalità <code>com.datto:encryption</code>. Poiché la crittografia nativa ZFS non è supportata da GRUB (a partire da agosto 2021), il rilevamento di ZFS non è riuscirà. Un secondo zpool compatibile con GRUB potrebbe essere appropriato per l'avvio in un sistema crittografato: a partire da agosto 2021, questo è l'approccio consigliato (fare riferimento a <a rel="nofollow" class="external text" href="https://openzfs.github.io/openzfs-docs/Getting%20Started/Arch%20Linux/index.html#overview">relevant OpenZFS project page</a>).
</p>
<p>Un'esecuzione riuscita <code>grub-probe</code> su uno zpool compatibile con GRUB assomiglia a questo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">grub-probe -vvvv /boot</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">(...)
grub-core/osdep/hostdisk.c:399: reusing open device `/dev/sda3'
grub-core/fs/zfs/zfs.c:2117: zap: name = com.delphix:extensible_dataset, value = 0, cd = 0
grub-core/fs/zfs/zfs.c:2117: zap: name = com.delphix:embedded_data, value = 1, cd = 0
grub-core/fs/zfs/zfs.c:2117: zap: name = com.delphix:hole_birth, value = 1, cd = 0
grub-core/fs/zfs/zfs.c:2117: zap: name = org.open-zfs:large_blocks, value = 0, cd = 0
grub-core/fs/zfs/zfs.c:2117: zap: name = org.illumos:lz4_compress, value = 1, cd = 0
grub-core/fs/zfs/zfs.c:2117: zap: name = , value = 0, cd = 0
grub-core/fs/zfs/zfs.c:2117: zap: name = , value = 0, cd = 0
grub-core/fs/zfs/zfs.c:3285: alive
(...)
grub-core/fs/zfs/zfs.c:1906: endian = 1
grub-core/fs/zfs/zfs.c:597: dva=8, 20008
grub-core/fs/zfs/zfs.c:2697: alive
zfs</pre>
<h4><span class="mw-headline" id="Avvio_del_kernel_e_initrd_da_ZFS">Avvio del kernel e initrd da ZFS</span></h4>
<p>Puoi saltare questa sezione se hai il kernel e initrd su una partizione <code>/boot</code> separata utilizzando qualcosa come ext4 o vfat.
</p>
<p>Altrimenti grub deve caricare il kernel e initrd provenienti da un dataset ZFS, i percorsi del kernel e initrd devono essere nel seguente formato:
</p>
<pre>/dataset/@/actual/path
</pre>
<p>Esempio con Arch installato sul dataset root:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/grub.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">set timeout=5
set default=0

menuentry "Arch Linux" {
    search -u UUID
    linux /@/boot/vmlinuz-linux zfs=zroot rw
    initrd /@/boot/initramfs-linux.img
}</pre>
<p>Esempio con Arch installato su un dataset nidificato:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/grub.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">set timeout=5
set default=0

menuentry "Arch Linux" {
    search -u UUID
    linux /ROOT/default/@/boot/vmlinuz-linux zfs=zroot/ROOT/default rw
    initrd /ROOT/default/@/boot/initramfs-linux.img
}</pre>
<h4><span class="mw-headline" id="Avvio_del_kernel_e_initrd_da_una_partizione_di_avvio_separata">Avvio del kernel e initrd da una partizione di avvio separata</span></h4>
<p>Esempio con una partizione /boot separata non ZFS e Arch installato su un set di dati nidificato:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/grub/grub.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">set timeout=5
set default=0

menuentry "Arch Linux" {
    search -u UUID
    linux /vmlinuz-linux zfs=zroot/ROOT/default rw
    initrd /initramfs-linux.img
}</pre>
<h3>
<span id="Utilizzo_di_systemd-boot_.28solo_per_EFI.29"></span><span class="mw-headline" id="Utilizzo_di_systemd-boot_(solo_per_EFI)">Utilizzo di systemd-boot (solo per EFI)</span>
</h3>
<p>systemd-boot non riesce ad aprire <code>/boot</code> se risiede all'interno di uno zpool, quindi sarà necessario far risiedere <code>/boot</code> in una partizione VFAT o ext4 separata.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Per poter gestire i tuoi ambienti di avvio con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zectl/">zectl</a></span><sup><small>AUR</small></sup>, segui <a rel="nofollow" class="external text" href="https://github.com/johnramsden/zectl/blob/master/docs/plugins/systemdboot.md">zectl/docs/plugins/systemdboot.md</a>.</div>
<p>Installare systemd-boot sulla propria partizione di sistema EFI seguendo <a href="../en/Systemd-boot.html#Installing_the_UEFI_boot_manager" title="Systemd-boot">systemd-boot#Installing the UEFI boot manager</a>.
</p>
<p>Creare una boot entry:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>esp</i>/loader/entries/arch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title   Arch Linux
linux   /vmlinuz-linux
initrd  /initramfs-linux.img
options zfs=zroot/ROOT/default rw</pre>
<h3><span class="mw-headline" id="Utilizzando_rEFInd_per_UEFI">Utilizzando rEFInd per UEFI</span></h3>
<p>Usare <code>EFISTUB</code> e <code>rEFInd</code> per il UEFI boot loader. I parametri kernel in <code>refind_linux.conf</code> per ZFS dovrebbero essere <code>zfs=bootfs</code> o <code>zfs=zroot</code> in modo che il sistema possa avviarsi da ZFS. I parametri <code>root</code> e <code>rootfstype</code> non sono richiesti.
</p>
<h3><span class="mw-headline" id="Using_ZFSBootMenu_for_UEFI">Using ZFSBootMenu for UEFI</span></h3>
<p>Quando si utilizza ZFSBootMenu si deve avere la directory <code>/boot</code> posizionata sul tuo filesystem root (ZFS). Vedi <a rel="nofollow" class="external text" href="https://docs.zfsbootmenu.org/en/latest/guides/general/bootenvs-and-you.html">Boot Environments and You: A Primer</a> per ulteriori informazioni.
</p>
<p>Sarà possibile scegliere tra usare <a href="#Generazione_immagine_ZFSBootMenu">#Generazione immagine ZFSBootMenu</a> o usare <a href="#Binari_EFI_ZFSBootMenu">#Binari EFI ZFSBootMenu</a> precostruito.
</p>
<h4><span class="mw-headline" id="Generazione_immagine_ZFSBootMenu">Generazione immagine ZFSBootMenu</span></h4>
<ul>
<li>Montare la propria partizione <a href="../en/EFI_system_partition.html" class="mw-redirect" title="ESP">ESP</a>
</li>
<li>Installare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zfsbootmenu/">zfsbootmenu</a></span><sup><small>AUR</small></sup> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Per compilare ZFSBootMenu in queto momento non è possibile usare un helper AUR come ad esempio: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/paru/">paru</a></span><sup><small>AUR</small></sup> o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yay/">yay</a></span><sup><small>AUR</small></sup>, Ma sarà ossibile compilare il pacchetto manualmente seguendo questa soluzione <a rel="nofollow" class="external text" href="https://github.com/zbm-dev/zfsbootmenu/issues/588#issuecomment-1925750134">Come descritto qui</a> e spostare manualmente, nelle ripsettive posizioni, tutti i file.
Le seguenti dipendenze sono richieste per il funzionamento di ZFSBootMenu: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/perl-boolean/">perl-boolean</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perl-sort-versions">perl-sort-versions</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perl-yaml-pp">perl-yaml-pp</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kexec-tools">kexec-tools</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fzf">fzf</a></span>.</div>
<ul><li>Configurazione ZFSBootMenu:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/zfsbootmenu/config.yaml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Global:
  ManageImages: true
  BootMountPoint: <i>percorso_del_tuo_ESP</i>
  DracutConfDir: /etc/zfsbootmenu/dracut.conf.d
  PreHooksDir: /etc/zfsbootmenu/generate-zbm.pre.d
  PostHooksDir: /etc/zfsbootmenu/generate-zbm.post.d
  InitCPIO: true
  InitCPIOConfig: /etc/zfsbootmenu/mkinitcpio.conf
Components:
  ImageDir: <i>percorso_del_tuo_ESP</i>/EFI/zbm
  Versions: 3
  Enabled: false
  syslinux:
    Config: /boot/syslinux/syslinux.cfg
    Enabled: false
EFI:
  ImageDir: <i>percorso_del_tuo_ESP</i>/EFI/zbm
  Versions: false
  Enabled: true
Kernel:
  CommandLine: ro quiet loglevel=0</pre>
<ul><li>Generazione immagini ZFSBootMenu:</li></ul>
<pre># generate-zbm

</pre>
<ul><li>Configurazione degli argomenti della riga di comando di avvio zfs:</li></ul>
<pre># zfs set org.zfsbootmenu:commandline="rw" zroot/ROOT

</pre>
<ul><li>Prima di aggiungere ZFSBootMenu dovrai montare lo UEFI variable filesystem:</li></ul>
<pre># mount -t efivarfs efivarfs /sys/firmware/efi/efivars
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Secondo la guida: <a href="../en/Unified_Extensible_Firmware_Interface.html#Mount_efivarfs" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface#Mount_efivarfs</a>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Se questo passaggio viene saltato il sistema non si avvierà</div>
<ul><li>Aggiunta della ZFSBootMenu entry allo EFI boot manager:</li></ul>
<pre># efibootmgr -c -d <i>disco_esp</i> -p <i>numero_partizione_esp</i> -L "ZFSBootMenu" -l '\EFI\zbm\vmlinuz-linux.EFI'
</pre>
<h4><span class="mw-headline" id="Binari_EFI_ZFSBootMenu">Binari EFI ZFSBootMenu</span></h4>
<ul>
<li>Montare la propria partizione <a href="../en/EFI_system_partition.html" class="mw-redirect" title="ESP">ESP</a>
</li>
<li>Installare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zfsbootmenu-efi-bin/">zfsbootmenu-efi-bin</a></span><sup><small>AUR</small></sup> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span>
</li>
</ul>
<ul><li>Configurazione degli argomenti della riga di comando di avvio zfs:</li></ul>
<pre># zfs set org.zfsbootmenu:commandline="rw" zroot/ROOT

</pre>
<ul><li>Prima di aggiungere ZFSBootMenu dovrai montare lo UEFI variable filesystem:</li></ul>
<pre># mount -t efivarfs efivarfs /sys/firmware/efi/efivars
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Secondo la guida: <a href="../en/Unified_Extensible_Firmware_Interface.html#Mount_efivarfs" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface#Mount_efivarfs</a>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Se questo passaggio viene saltato il sistema non si avvierà</div>
<ul><li>Aggiunta della ZFSBootMenu entry allo EFI boot manager:</li></ul>
<pre># efibootmgr -c -d <i>disco_esp</i> -p <i>numero_partizione_esp</i> -L "ZFSBootMenu" -l '\EFI\zbm\zfsbootmenu-release-vmlinuz-x86_64.EFI'
</pre>
<h3>
<span id="Utilizzando_ZFSBootMenu_per_Legacy.2FCSM"></span><span class="mw-headline" id="Utilizzando_ZFSBootMenu_per_Legacy/CSM">Utilizzando ZFSBootMenu per Legacy/CSM</span>
</h3>
<p>Come per UEFI, se si utilizza ZFSBootMenu la directory <code>/boot</code> dovrà esser parte del pool <code>zroot</code>.
Ma a differnza della directory <code>efi</code> si avrà bisogno della directory <code>syslinux</code>.
</p>
<p><a rel="nofollow" class="external text" href="https://docs.zfsbootmenu.org/en/latest/general/uefi-booting.html">Booting explaination ZFSBootMenu</a>
</p>
<p><a rel="nofollow" class="external text" href="https://docs.zfsbootmenu.org/en/latest/general/uefi-booting.html">Installing ZFSBootMenu on MBR</a>
</p>
<p><a href="../en/Syslinux.html" title="Syslinux">Complete guide for Syslinux</a>
</p>
<p>Montare la propria partizione <code>syslinux</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Per eseguire questo passaggio sarà necessario aver seguito lo <a href="#Schema_partizioni">Schema Partizioni</a> relativo a Syslinux e ZFSBootMenu.</div>
<p>Installare il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=syslinux">syslinux</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gptfdisk">gptfdisk</a></span> per supporto a dischi con tabelle partizioni GPT.
</p>
<p>Copiare tutti i file <code>.c32</code> dentro la directory <code>syslinux</code>:
</p>
<pre># cp /usr/lib/syslinux/bios/*.c32 /<i>la_tua_posizione</i>/syslinux
</pre>
<p>Adesso installare il bootloader:
</p>
<pre># extlinux --install /<i>la_tua_posizione</i>/syslinux
</pre>
<p>Una volta fatto, procedere con l'installazione di Syslinux bootstrap code appropriato per la propria tabella partizioni:
</p>
<ul>
<li>
<code>mbr.bin</code> verrà installatio per una <a href="../en/Syslinux.html#MBR_partition_table" title="Syslinux">#MBR partition table</a> or,</li>
<li>
<code>gptmbr.bin</code> verrà installatio per una <a href="../en/Syslinux.html#GUID_partition_table" title="Syslinux">#GUID partition table</a>
</li>
</ul>
<p>Adesso sarà possibile installare <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zfsbootmenu/">zfsbootmenu</a></span><sup><small>AUR</small></sup>
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Per compilare ZFSBootMenu in queto momento non è possibile usare un helper AUR come ad esempio: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/paru/">paru</a></span><sup><small>AUR</small></sup> o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/yay/">yay</a></span><sup><small>AUR</small></sup>, Ma sarà ossibile compilare il pacchetto manualmente seguendo questa soluzione <a rel="nofollow" class="external text" href="https://github.com/zbm-dev/zfsbootmenu/issues/588#issuecomment-1925750134">Come descritto qui</a> e spostare manualmente, nelle ripsettive posizioni, tutti i file.
Le seguenti dipendenze sono richieste per il funzionamento di ZFSBootMenu: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/perl-boolean/">perl-boolean</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perl-sort-versions">perl-sort-versions</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perl-yaml-pp">perl-yaml-pp</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kexec-tools">kexec-tools</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fzf">fzf</a></span>.</div>
<p>Configurazione degli argomenti della riga di comando di avvio zfs:
</p>
<pre># zfs set org.zfsbootmenu:commandline="rw" zroot/ROOT
</pre>
<p>Impostazione della creazione di immagini di ZFSBootMenu mediante modifica di:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/zfsbootmenu/config.yaml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Global:
  ManageImages: true
  BootMountPoint: <i>path_to_your_syslinux_folder</i>
  PreHooksDir: /etc/zfsbootmenu/generate-zbm.pre.d
  PostHooksDir: /etc/zfsbootmenu/generate-zbm.post.d
  InitCPIO: true
  InitCPIOConfig: /etc/zfsbootmenu/mkinitcpio.conf
Components:
  ImageDir: <i>percorso_della_tua_cartella_syslinux</i>/zfsbootmenu
  Versions: false
  Enabled: true
Kernel:
  CommandLine: ro quiet loglevel=0</pre>
<p>Adesso generare l'immagine ZFSBootMenu:
</p>
<pre># generate-zbm
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Se si intende avere una entry di backup su Syslinux, genereare l'immagine personalizzata due volte</div>
<p>Modificare il file sostiuendo il contenuto con:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/syslinux/syslinux.cfg</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">UI menu.c32
PROMPT 0

MENU TITLE ZFSBootMenu
TIMEOUT 50

DEFAULT zfsbootmenu

LABEL zfsbootmenu
  MENU LABEL ZFSBootMenu
  KERNEL /zfsbootmenu/vmlinuz-linux-bootmenu
  INITRD /zfsbootmenu/initramfs-bootmenu.img
  APPEND zfsbootmenu quiet

# The following for the backup entry
LABEL zfsbootmenu-backup
  MENU LABEL ZFSBootMenu (Backup)
  KERNEL /zfsbootmenu/vmlinuz-linux-bootmenu-backup
  INITRD /zfsbootmenu/initramfs-bootmenu-backup.img
  APPEND zfsbootmenu quiet</pre>
<p>Per concludere rigenerare mkinitcpio:
</p>
<pre># mkinitcpio -P
</pre>
<h2><span class="mw-headline" id="Configurazione_di_systemd_ZFS_mounts">Configurazione di systemd ZFS mounts</span></h2>
<p>Affinché il tuo sistema possa riavviarsi senza problemi, devi abilitare <code>zfs.target</code> per montare automaticamente i pool e impostare lo hostid.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> L'istruzioni in questa sezione presuppongono che tu sia sempre in <code>arch-chroot</code>
</div>
<p>Per ogni pool che si desidera montare automaticamente eseguire:
</p>
<pre># zpool set cachefile=/etc/zfs/zpool.cache <i>pool</i>
</pre>
<p><a href="../it/Help:Reading.html#Controllo_delle_unit%C3%A0_systemd" title="Help:Reading (Italiano)">Avviare</a> <code>zfs.target</code>
</p>
<p>Per montare automaticamente i pool zfs all'avvio è necessario <a href="../it/Help:Reading.html#Controllo_delle_unit%C3%A0_systemd" title="Help:Reading (Italiano)">Avviare</a><code>zfs-import-cache.service</code>, <code>zfs-mount.service</code> e <code>zfs-import.target</code>.
</p>
<p>Quando si esegue ZFS su root, lo hostid della macchina non sarà disponibile al momento del montaggio del filesystem di root. Ci sono due soluzioni. Puoi inserire il tuo spl hostid nei <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> del tuo boot loader. Per esempio, aggiungendo <code>spl.spl_hostid=0x00bab10c</code>, per ottenere il tuo numero di hostid digitare il comando <code>hostid</code>.
</p>
<p>L'altra soluzione suggerita è assicurarsi che ci sia un hostid in <code>/etc/hostid</code>, quindi rigenerare l'immagine initramfs che copierà lo hostid nell'immagine initramfs. Per scrivere il file hostid in modo sicuro è necessario utilizzare il coamndo <code>zgenhostid</code>.
</p>
<p>Per utilizzare lo hostid generato da libc (raccomandata):
</p>
<pre># zgenhostid $(hostid)
</pre>
<p>Per utilizzare un hostid personalizzato (deve essere esadecimale e lungo 8 caratteri):
</p>
<pre># zgenhostid deadbeef
</pre>
<p>Per consentire allo strumento di generare un hostid:
</p>
<pre># zgenhostid
</pre>
<p>Non dimenticare di <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h2><span class="mw-headline" id="Smontare_e_riavvio">Smontare e riavvio</span></h2>
<p>Abbiamo quasi finito! Se disponi di una partizione di avvio legacy prima eseguire:
</p>
<pre># umount /mnt/boot
</pre>
<p>poi:
</p>
<pre># zfs umount -a
# zpool export zroot
</pre>
<p>Adesso riavviare.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attenzione:</strong> Se non esporti correttamente zpool, il pool rifiuterà l'importazione nell'ambiente ramdisk e rimarrai bloccato sul terminale busybox.</div>
<h3><span class="mw-headline" id="Caricamento_password_da_USB-Stick">Caricamento password da USB-Stick</span></h3>
<p>È possibile memorizzare la password su una chiavetta USB e caricarla all'avvio:
</p>
<p>Salva la password nei primi bytes della USB-Stick:
</p>
<pre># dd if=<i>il_tuo_password_file</i> bs=32 count=1 of=/dev/disk/by-id/<i>usb_stick</i>
</pre>
<p>Per creare la partizione zfs è possibile utilizzare il metodo descritto in precedenza con la richiesta della password o eseguire il pipe con <a href="../en/Dd.html" title="Dd">dd</a>:
</p>
<pre># dd if=/dev/disk/by-id/<i>usb_stick</i> bs=32 count=1 | zfs create -o encryption=on -o keyformat=<i>passphrase</i> zroot/ROOT
</pre>
<p>Il prossimo passo è modificare lo hook zfs. Per impostazione predefinita zfs richiede la password. Devi cambiarlo per averlo collegato con dd dalla tua pendrive. Per fare ciò modifica <code>/usr/lib/initcpio/hooks/zfs</code> e cambia la seguente riga:
</p>
<pre># ! eval zfs load-key "${encryptionroot}"; do
</pre>
<p>così:
</p>
<pre># ! eval dd if=/dev/disk/by-id/<i>usb_stick</i> bs=32 count=1 | zfs load-key "${encryptionroot}"; do
</pre>
<p>Stai modificando il tuo hook zfs quindi non dimenticare di <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>. Ora zfs dovrebbe caricare la password dalla chiavetta USB all'avvio.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Il_sistema_non_si_avvia_a_causa_di:_impossibile_importare_zroot:_nessun_pool_di_questo_tipo_disponibile">Il sistema non si avvia a causa di: impossibile importare zroot: nessun pool di questo tipo disponibile</span></h3>
<p>Puoi provare i seguenti passaggi e vedere se possono essere d'aiuto.
</p>
<ul>
<li>Utilizza il modulo kernel da <a href="../en/Unofficial_user_repositories.html#archzfs" title="Unofficial user repositories">archzfs repo</a> invece della versione dkms. Si potrà tornare alla versione dkms ad avvio completato.</li>
<li>Rimuovere il file <code>/etc/zfs/zpool.cache</code> e eseguire:</li>
</ul>
<pre># zpool set cachefile=none zroot
</pre>
<ul>
<li>Rimuovere il file <code>/etc/hostid</code>.</li>
<li>
<a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">Regenerate the initramfs</a>.</li>
</ul>
<h2><span class="mw-headline" id="Guarda_anche">Guarda anche</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/dajhorn/pkg-zfs/wiki/HOWTO-install-Ubuntu-to-a-Native-ZFS-Root-Filesystem">HOWTO install Ubuntu to a Native ZFS Root</a></li>
<li><a rel="nofollow" class="external text" href="https://lildude.co.uk/zfs-cheatsheet">ZFS cheatsheet</a></li>
<li><a href="https://www.funtoo.org/ZFS_Install_Guide" class="extiw" title="funtoo:ZFS Install Guide">Funtoo:ZFS Install Guide</a></li>
<li><a rel="nofollow" class="external text" href="https://kiljan.org/2018/09/23/a-reference-guide-to-zfs-on-arch-linux/">A reference guide to ZFS on Arch Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://ramsdenj.com/2016/06/23/arch-linux-on-zfs-part-2-installation.html">Arch Linux On Zfs </a></li>
<li><a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=mLbtJQmfumI">Youtube: Open-ZFS Bootcamp</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../it/Category:Installation_process.html" title="Category:Installation process (Italiano)">Installation process (Italiano)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_on_ZFS_(Italiano)&amp;oldid=813058">https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_on_ZFS_(Italiano)&amp;oldid=813058</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 July 2024, at 06:20.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
