<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Pi-hole (Italiano) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pi-hole_Italiano rootpage-Pi-hole_Italiano skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Panoramica" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Panoramica">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Panoramica</div>
		</a>
		
		<ul id="toc-Panoramica-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Pi-hole_server" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Pi-hole_server">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Pi-hole server</div>
		</a>
		
			<button aria-controls="toc-Pi-hole_server-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Pi-hole server subsection</span>
			</button>
		
		<ul id="toc-Pi-hole_server-sublist" class="vector-toc-list">
			<li id="toc-Installazione" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installazione">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Installazione</div>
			</a>
			
			<ul id="toc-Installazione-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuratione" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuratione">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Configuratione</div>
			</a>
			
			<ul id="toc-Configuratione-sublist" class="vector-toc-list">
				<li id="toc-FTL_(Faster_Than_Light)" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#FTL_(Faster_Than_Light)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.1</span>FTL (Faster Than Light)</div>
			</a>
			
			<ul id="toc-FTL_(Faster_Than_Light)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Interfaccia_web" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Interfaccia_web">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2</span>Interfaccia web</div>
			</a>
			
			<ul id="toc-Interfaccia_web-sublist" class="vector-toc-list">
				<li id="toc-Configurazione_PHP" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Configurazione_PHP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2.1</span>Configurazione PHP</div>
			</a>
			
			<ul id="toc-Configurazione_PHP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Opzionale:_permessi_in_lettura_per_PHP" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Opzionale:_permessi_in_lettura_per_PHP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2.2</span>Opzionale: permessi in lettura per PHP</div>
			</a>
			
			<ul id="toc-Opzionale:_permessi_in_lettura_per_PHP-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configurare_lighttpd" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Configurare_lighttpd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.2.3</span>Configurare lighttpd</div>
			</a>
			
			<ul id="toc-Configurare_lighttpd-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Aggiornare_il_file_hosts" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Aggiornare_il_file_hosts">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2.3</span>Aggiornare il file hosts</div>
			</a>
			
			<ul id="toc-Aggiornare_il_file_hosts-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Configurare_i_dispositivi_per_l'uso_di_Pi-hole" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configurare_i_dispositivi_per_l'uso_di_Pi-hole">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Configurare i dispositivi per l'uso di Pi-hole</div>
			</a>
			
			<ul id="toc-Configurare_i_dispositivi_per_l'uso_di_Pi-hole-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Pi-hole_standalone" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Pi-hole_standalone">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Pi-hole standalone</div>
		</a>
		
			<button aria-controls="toc-Pi-hole_standalone-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Pi-hole standalone subsection</span>
			</button>
		
		<ul id="toc-Pi-hole_standalone-sublist" class="vector-toc-list">
			<li id="toc-Installazione_2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installazione_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Installazione</div>
			</a>
			
			<ul id="toc-Installazione_2-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuratione_2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configuratione_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Configuratione</div>
			</a>
			
			<ul id="toc-Configuratione_2-sublist" class="vector-toc-list">
				<li id="toc-Timer" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Timer">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.1</span>Timer</div>
			</a>
			
			<ul id="toc-Timer-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-FTL" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#FTL">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2.2</span>FTL</div>
			</a>
			
			<ul id="toc-FTL-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Usage" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usage">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Usage</div>
			</a>
			
			<ul id="toc-Usage-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Usage_2" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Usage_2">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Usage</div>
		</a>
		
			<button aria-controls="toc-Usage_2-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Usage subsection</span>
			</button>
		
		<ul id="toc-Usage_2-sublist" class="vector-toc-list">
			<li id="toc-Uso_dell'interfaccia_web" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Uso_dell'interfaccia_web">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Uso dell'interfaccia web</div>
			</a>
			
			<ul id="toc-Uso_dell'interfaccia_web-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Uso_della_linea_di_comando_(CLI)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Uso_della_linea_di_comando_(CLI)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Uso della linea di comando (CLI)</div>
			</a>
			
			<ul id="toc-Uso_della_linea_di_comando_(CLI)-sublist" class="vector-toc-list">
				<li id="toc-Gestione_dei_DNS_di_Pi-hole" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gestione_dei_DNS_di_Pi-hole">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.1</span>Gestione dei DNS di Pi-hole</div>
			</a>
			
			<ul id="toc-Gestione_dei_DNS_di_Pi-hole-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Aggiornamento_forzato_dell'elenco_dei_domini_della_blocklist" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Aggiornamento_forzato_dell'elenco_dei_domini_della_blocklist">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.2</span>Aggiornamento forzato dell'elenco dei domini della blocklist</div>
			</a>
			
			<ul id="toc-Aggiornamento_forzato_dell'elenco_dei_domini_della_blocklist-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disattiva_temporaneamente_Pi-hole" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Disattiva_temporaneamente_Pi-hole">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2.3</span>Disattiva temporaneamente Pi-hole</div>
			</a>
			
			<ul id="toc-Disattiva_temporaneamente_Pi-hole-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Suggerimenti_e_trucchi" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Suggerimenti_e_trucchi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Suggerimenti e trucchi</div>
		</a>
		
			<button aria-controls="toc-Suggerimenti_e_trucchi-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Suggerimenti e trucchi subsection</span>
			</button>
		
		<ul id="toc-Suggerimenti_e_trucchi-sublist" class="vector-toc-list">
			<li id="toc-Interfaccia_web_protetta_da_password" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Interfaccia_web_protetta_da_password">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Interfaccia web protetta da password</div>
			</a>
			
			<ul id="toc-Interfaccia_web_protetta_da_password-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Cloudflare_DoH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cloudflare_DoH">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Cloudflare DoH</div>
			</a>
			
			<ul id="toc-Cloudflare_DoH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ottimizzazione_per_unità_a_stato_solido" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ottimizzazione_per_unit%C3%A0_a_stato_solido">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Ottimizzazione per unità a stato solido</div>
			</a>
			
			<ul id="toc-Ottimizzazione_per_unità_a_stato_solido-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Disabilita_la_registrazione_delle_query" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Disabilita_la_registrazione_delle_query">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Disabilita la registrazione delle query</div>
			</a>
			
			<ul id="toc-Disabilita_la_registrazione_delle_query-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utilizzo_con_server_VPN" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizzo_con_server_VPN">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Utilizzo con server VPN</div>
			</a>
			
			<ul id="toc-Utilizzo_con_server_VPN-sublist" class="vector-toc-list">
				<li id="toc-OpenVPN" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#OpenVPN">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5.1</span>OpenVPN</div>
			</a>
			
			<ul id="toc-OpenVPN-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-WireGuard" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#WireGuard">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5.2</span>WireGuard</div>
			</a>
			
			<ul id="toc-WireGuard-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Nginx_al_posto_di_Lighttpd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Nginx_al_posto_di_Lighttpd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>Nginx al posto di Lighttpd</div>
			</a>
			
			<ul id="toc-Nginx_al_posto_di_Lighttpd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Blocklists_addizionali" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Blocklists_addizionali">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.7</span>Blocklists addizionali</div>
			</a>
			
			<ul id="toc-Blocklists_addizionali-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usare_Unbound_come_server_DNS_a_monte" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usare_Unbound_come_server_DNS_a_monte">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.8</span>Usare Unbound come server DNS a monte</div>
			</a>
			
			<ul id="toc-Usare_Unbound_come_server_DNS_a_monte-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Risoluzione_dei_problemi" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Risoluzione_dei_problemi">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Risoluzione dei problemi</div>
		</a>
		
			<button aria-controls="toc-Risoluzione_dei_problemi-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Risoluzione dei problemi subsection</span>
			</button>
		
		<ul id="toc-Risoluzione_dei_problemi-sublist" class="vector-toc-list">
			<li id="toc-Comportamento_strano_nell'interfaccia_web_dopo_un_aggiornamento" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Comportamento_strano_nell'interfaccia_web_dopo_un_aggiornamento">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Comportamento strano nell'interfaccia web dopo un aggiornamento</div>
			</a>
			
			<ul id="toc-Comportamento_strano_nell'interfaccia_web_dopo_un_aggiornamento-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Perdita_di_dati_al_riavvio" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Perdita_di_dati_al_riavvio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Perdita di dati al riavvio</div>
			</a>
			
			<ul id="toc-Perdita_di_dati_al_riavvio-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Impossibile_avviare_il_motore_Pi-hole_FTLDNS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Impossibile_avviare_il_motore_Pi-hole_FTLDNS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Impossibile avviare il motore Pi-hole FTLDNS</div>
			</a>
			
			<ul id="toc-Impossibile_avviare_il_motore_Pi-hole_FTLDNS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Conflitto_con_il_pacchetto_DNSMasq" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Conflitto_con_il_pacchetto_DNSMasq">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Conflitto con il pacchetto DNSMasq</div>
			</a>
			
			<ul id="toc-Conflitto_con_il_pacchetto_DNSMasq-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Stato_sconosciuto_e_modifiche_non_salvate" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Stato_sconosciuto_e_modifiche_non_salvate">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Stato sconosciuto e modifiche non salvate</div>
			</a>
			
			<ul id="toc-Stato_sconosciuto_e_modifiche_non_salvate-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tempi_di_caricamento_lenti" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tempi_di_caricamento_lenti">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>Tempi di caricamento lenti</div>
			</a>
			
			<ul id="toc-Tempi_di_caricamento_lenti-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Associa_il_servizio_DNS_di_Pihole-FTL_all'indirizzo_IP_effettivo_del_Pi-hole_(invece_di_0.0.0.0)_per_evitare_problemi_di_risoluzione_DNS_per_altri_host_virtuali" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Associa_il_servizio_DNS_di_Pihole-FTL_all'indirizzo_IP_effettivo_del_Pi-hole_(invece_di_0.0.0.0)_per_evitare_problemi_di_risoluzione_DNS_per_altri_host_virtuali">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>Associa il servizio DNS di Pihole-FTL all'indirizzo IP effettivo del Pi-hole (invece di 0.0.0.0) per evitare problemi di risoluzione DNS per altri host virtuali</div>
			</a>
			
			<ul id="toc-Associa_il_servizio_DNS_di_Pihole-FTL_all'indirizzo_IP_effettivo_del_Pi-hole_(invece_di_0.0.0.0)_per_evitare_problemi_di_risoluzione_DNS_per_altri_host_virtuali-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Risorse" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Risorse">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Risorse</div>
		</a>
		
		<ul id="toc-Risorse-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Pi-hole (Italiano)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Pi-hole.html" title="Pi-hole – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Pi-hole" title="Pi-hole – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="it" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Translation Status:</strong> This article is a localized version of <a href="../en/Pi-hole.html" title="Pi-hole">Pi-hole</a>. Last translation date: 2022-10-02. You can help to synchronize the translation, if there were <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Pi-hole&amp;diff=0&amp;oldid=750693">changes</a> in the English version.</div>
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a></li>
<li><a href="../en/Domain_name_resolution.html" title="Domain name resolution">Domain name resolution</a></li>
<li><a href="../en/Lighttpd.html" title="Lighttpd">lighttpd</a></li>
<li><a href="../en/Linux_Containers.html" title="Linux Containers">Linux Containers</a></li>
<li><a href="../en/Nginx.html" title="Nginx">nginx</a></li>
<li><a href="../en/OpenVPN.html" title="OpenVPN">OpenVPN</a></li>
<li><a href="../en/WireGuard.html" title="WireGuard">WireGuard</a></li>
</ul>
</div>
<p>Il progetto <a rel="nofollow" class="external text" href="https://pi-hole.net/">Pi-hole</a> è un <a href="https://en.wikipedia.org/wiki/DNS_sinkhole" class="extiw" title="wikipedia:DNS sinkhole">DNS sinkhole</a> che compila una lista nera di domini attingendo da diverse sorgenti di terze parti. Pi-hole usa <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pi-hole-ftl/">pi-hole-ftl</a></span><sup><small>AUR</small></sup> (un fork di <a href="../en/Dnsmasq.html" title="Dnsmasq">dnsmasq</a>) per filtrare tutte le richieste di domini nella sua blocklist. L'esecuzione distribuisce efficacemente il blocco degli annunci a livello di rete senza la necessità di configurare i singoli client. Il pacchetto viene fornito con un'interfaccia di amministrazione web opzionale.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Pi-hole su Arch Linux non è ufficialmente supportato dal progetto Pi-hole.</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Panoramica">Panoramica</span></h2>
<p>Sono disponibili due versioni per Arch Linux:
</p>
<ul>
<li>
<a href="#Pi-hole_server">#Pi-hole server</a> – Questo è il server Pi-hole predefinito e noto che la maggior parte degli utenti sta cercando. Fornisce un server DNS per altri dispositivi sulla LAN.</li>
<li>
<a href="#Pi-hole_standalone">#Pi-hole standalone</a> – Questa è un'installazione Pi-hole leggera alternativa, progettata per un contesto mobile. È progettato per essere utilizzato sullo stesso dispositivo (ad esempio un laptop), dove non è disponibile un server Pi-hole esterno e centralizzato. Non ha interfaccia web e si aggiorna automaticamente.</li>
</ul>
<h2><span class="mw-headline" id="Pi-hole_server">Pi-hole server</span></h2>
<h3><span class="mw-headline" id="Installazione">Installazione</span></h3>
<p>Installa il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pi-hole-server/">pi-hole-server</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Configuratione">Configuratione</span></h3>
<h4>
<span id="FTL_.28Faster_Than_Light.29"></span><span class="mw-headline" id="FTL_(Faster_Than_Light)">FTL (Faster Than Light)</span>
</h4>
<p>Pi-hole-FTL è un resolver/forwarder DNS e un wrapper/API simile a un database che fornisce l'archiviazione a lungo termine delle richieste che gli utenti possono interrogare attraverso la sezione "long-term data" della WebGUI. I dati sono raccolti e conservati in due luoghi:
</p>
<ol>
<li>I dati giornalieri vengono archiviati nella RAM e acquisiti in tempo reale all'interno di <code>/run/log/pihole/pihole.log</code>
</li>
<li>I dati storici (diversi giorni/settimane/mesi) sono archiviati nel file system <code>/etc/pihole/pihole-FTL.db</code> e scritti a intervalli specificati dall'utente.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Per disabilitare la registrazione, vedere <a href="#Disabilita_la_registrazione_delle_query">#Disabilita la registrazione delle query</a>.</div>
<p><code>pihole-FTL.service</code> è abilitato staticamente; riavviarlo/avviarlo. Per la configurazione FTL, vedere <a rel="nofollow" class="external text" href="https://docs.pi-hole.net/ftldns/configfile/">la documentazione ufficiale</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> L'avvio di <code>pihole-FTL.service</code> potrebbe non riuscire. Vedi <a href="#Impossibile_avviare_il_motore_Pi-hole_FTLDNS">#Impossibile avviare il motore Pi-hole FTLDNS</a>.</div>
<h4><span class="mw-headline" id="Interfaccia_web">Interfaccia web</span></h4>
<p>Pi-hole ha un'interfaccia web potente, facile da usare, ma completamente opzionale. Oltre a modificare le impostazioni, l'utente può analizzare e visualizzare le query DNS gestite da Pi-hole.
</p>
<h5><span class="mw-headline" id="Configurazione_PHP">Configurazione PHP</span></h5>
<p>Installa <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php-sqlite">php-sqlite</a></span> (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php">php</a></span> verrà installato automaticamente) e abilita le estensioni pertinenti descritte qui:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/php/php.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
extension=pdo_sqlite
[...]
extension=sockets
[...]
extension=sqlite3
[...]</pre>
<h5><span class="mw-headline" id="Opzionale:_permessi_in_lettura_per_PHP">Opzionale: permessi in lettura per PHP</span></h5>
<p>In php 7.0 e versioni successive, la direttiva <a href="../en/PHP.html#Configuration" title="PHP">PHP open_basedir</a> è vuota, il che significa che PHP può accedere a ogni directory e file che può essere letto dall'id utente del server web. Per una maggiore sicurezza, decommenta open_basedir in <code>/etc/php/php.ini</code> e aggiungi l'elenco di directory e file a cui si accede dall'interfaccia web di amministrazione di Pi-hole. L'elenco è piuttosto lungo:
</p>
<pre>/srv/http/pihole
/run/pihole-ftl/pihole-FTL.port
/run/log/pihole/pihole.log
/run/log/pihole-ftl/pihole-FTL.log
/etc/pihole
/etc/hosts
/etc/hostname
/etc/dnsmasq.d/02-pihole-dhcp.conf
/etc/dnsmasq.d/03-pihole-wildcard.conf
/etc/dnsmasq.d/04-pihole-static-dhcp.conf
/var/log/lighttpd/error-pihole.log
/proc/cpuinfo
/proc/loadavg
/proc/meminfo
/sys/class/thermal/thermal_zone0/temp
/tmp
</pre>
<p>La direttiva open_basedir prevede un elenco separato da due punti:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/php/php.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">open_basedir = /srv/http/pihole:/run/pihole-ftl/pihole-FTL.port:/run/log/pihole/pihole.log:/run/log/pihole-ftl/pihole-FTL.log:/etc/pihole:/etc/hosts:/etc/hostname:/etc/dnsmasq.d/02-pihole-dhcp.conf:/etc/dnsmasq.d/03-pihole-wildcard.conf:/etc/dnsmasq.d/04-pihole-static-dhcp.conf:/var/log/lighttpd/error.log:/proc/loadavg:/proc/meminfo:/proc/cpuinfo:/sys/class/thermal/thermal_zone0/temp:/tmp</pre>
<h5><span class="mw-headline" id="Configurare_lighttpd">Configurare lighttpd</span></h5>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Gli utenti possono anche eseguire invece il server web Nginx. Vedere <a href="#Nginx_al_posto_di_Lighttpd">#Nginx al posto di Lighttpd</a>.</div>
<p>Installa <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lighttpd">lighttpd</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php-cgi">php-cgi</a></span>.
</p>
<p>Copia la configurazione predefinita fornita dal pacchetto per Pi-hole:
</p>
<pre># cp /usr/share/pihole/configs/lighttpd.example.conf /etc/lighttpd/lighttpd.conf
</pre>
<p>Abilita <code>lighttpd.service</code> e avvialo.
</p>
<h4><span class="mw-headline" id="Aggiornare_il_file_hosts">Aggiornare il file hosts</span></h4>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=filesystem">filesystem</a></span> fornisce un file <code>/etc/hosts</code> vuoto che è noto per impedire a Pi-hole il recupero delle blocklist. È necessario aggiungere quanto segue al file per garantirne il corretto funzionamento, notando che <i>ip.address.of.pihole</i> dovrebbe essere l'indirizzo IP effettivo della macchina che esegue Pi-hole (ad es. 192.168.1.250) e <i>myhostname</i> dovrebbe essere il nome host effettivo della macchina che esegue Pi-hole:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/hosts</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">127.0.0.1              localhost
ip.address.of.pihole   pi.hole myhostname
</pre>
<p>Per ulteriori informazioni, vedere <a rel="nofollow" class="external text" href="https://github.com/pi-hole/pi-hole/issues/1800">Issue#1800</a>.
</p>
<h3>
<span id="Configurare_i_dispositivi_per_l.27uso_di_Pi-hole"></span><span class="mw-headline" id="Configurare_i_dispositivi_per_l'uso_di_Pi-hole">Configurare i dispositivi per l'uso di Pi-hole</span>
</h3>
<p>Per utilizzare Pi-hole, i dispositivi all'interno della rete devono utilizzare l'indirizzo IP di Pi-hole come unico server DNS. Per fare questo, ci sono generalmente due metodi:
</p>
<ol>
<li>Nelle impostazioni DHCP della LAN del router, impostare l'indirizzo IP di Pi-hole come unico server DNS disponibile per i dispositivi collegati.</li>
<li>Configura manualmente ogni dispositivo per utilizzare l'indirizzo IP di Pi-hole come unico server DNS.</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Alcuni router (o anche ISP) non consentono modifiche alle impostazioni DNS LAN, quindi disabilitando il server DHCP del router e utilizzando il <a rel="nofollow" class="external text" href="https://discourse.pi-hole.net/t/how-do-i-use-pi-holes-built-in-dhcp-server-and-why-would-i-want-to">DHCP integrato di Pi-hole</a> potrebbe essere una soluzione.</div>
<p>Maggiori informazioni su come utilizzare Pi-hole per altri dispositivi sono disponibili all'indirizzo <a rel="nofollow" class="external text" href="https://discourse.pi-hole.net/t/how-do-i-configure-my-devices-to-use-pi-hole-as-their-dns-server/245">documentazione a monte</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Il dispositivo che esegue Pi-hole può utilizzare a sua volta Pi-hole. Basta modificare le impostazioni DNS in solo indirizzo IP <code>127.0.0.1</code>.</div>
<h2><span class="mw-headline" id="Pi-hole_standalone">Pi-hole standalone</span></h2>
<h3><span class="mw-headline" id="Installazione_2">Installazione</span></h3>
<p>Installa il pacchetto <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pi-hole-standalone/">pi-hole-standalone</a></span><sup><small>AUR</small></sup>.
</p>
<h3><span class="mw-headline" id="Configuratione_2">Configuratione</span></h3>
<h4><span class="mw-headline" id="Timer">Timer</span></h4>
<p>Il pacchetto standalone Pi-hole installa un timer abilitato staticamente (e relativo servizio) che aggiornerà settimanalmente l'elenco dei server nella lista nera di Pi-hole.
I valori predefiniti possono essere modificati tramite una modifica nel servizio o può essere impedita l'esecuzione impostando un  <a href="../en/Systemd.html#Using_units" title="Systemd">masking</a> su di esso.
Ricordarsi di avviare manualmente <code>pi-hole-gravity.timer</code> o semplicemente riavviare dopo la modifica.
</p>
<h4><span class="mw-headline" id="FTL">FTL</span></h4>
<p>Vedi <a href="#FTL_(Faster_Than_Light)">#FTL (Faster Than Light)</a>.
</p>
<h3><span class="mw-headline" id="Usage">Usage</span></h3>
<p>Modifica le impostazioni di rete del computer in modo che l'unico server DNS in uso sia <code>127.0.0.1</code>.
</p>
<p>Se si utilizza il DHCP da un router esterno per ottenere indirizzi IP, aggiungere <code>bind-interfaces</code> a <code>/etc/dnsmasq.conf</code> per la risoluzione delle query DNS.
</p>
<p>Testare le query DNS indipendentemente dal server dei nomi configurato in <code>/etc/resolv.conf</code> utilizzando <code>drill @127.0.0.1 archlinux.org</code>.
</p>
<h2><span class="mw-headline" id="Usage_2">Usage</span></h2>
<p>Sia la versione standalone che quella server possono essere controllate tramite CLI, ma solo la versione server può essere controllata tramite interfaccia web.
</p>
<h3>
<span id="Uso_dell.27interfaccia_web"></span><span class="mw-headline" id="Uso_dell'interfaccia_web">Uso dell'interfaccia web</span>
</h3>
<p>Vai su <a rel="nofollow" class="external text" href="http://pi.hole/admin/">pi.hole</a> o <code>&lt;Pi-hole IP address&gt;/admin/</code> per accedere all'interfaccia web.
</p>
<h3>
<span id="Uso_della_linea_di_comando_.28CLI.29"></span><span class="mw-headline" id="Uso_della_linea_di_comando_(CLI)">Uso della linea di comando (CLI)</span>
</h3>
<h4><span class="mw-headline" id="Gestione_dei_DNS_di_Pi-hole">Gestione dei DNS di Pi-hole</span></h4>
<p>Per impostazione predefinita, Pi-hole utilizza il server DNS di Google. Modifica i server DNS utilizzati da Pi-hole con:
</p>
<pre>$ pihole -a setdns <i>server</i>
</pre>
<p>Specifica più server DNS separando i loro indirizzi con virgole.
</p>
<h4>
<span id="Aggiornamento_forzato_dell.27elenco_dei_domini_della_blocklist"></span><span class="mw-headline" id="Aggiornamento_forzato_dell'elenco_dei_domini_della_blocklist">Aggiornamento forzato dell'elenco dei domini della blocklist</span>
</h4>
<p>Per aggiornare l'elenco dei domini bloccati, eseguire:
</p>
<pre>$ pihole -g
</pre>
<h4><span class="mw-headline" id="Disattiva_temporaneamente_Pi-hole">Disattiva temporaneamente Pi-hole</span></h4>
<p>Pi-hole può essere messo in pausa tramite CLI eseguendo:
</p>
<pre>$ pihole disable [time]
</pre>
<p>Lasciando vuoto il valore per <code>time</code>, la disabilitazione sarà permanente fino alla successiva riattivazione manuale.
<code>time</code> può essere espresso in secondi o minuti con la sintassi #s e #m. Ad esempio, per disabilitare Pi-hole per 5 minuti:
</p>
<pre>$ pihole disable 5m
</pre>
<p>In qualsiasi momento, riattiva Pi-hole eseguendo:
</p>
<pre>$ pihole enable
</pre>
<h2><span class="mw-headline" id="Suggerimenti_e_trucchi">Suggerimenti e trucchi</span></h2>
<h3><span class="mw-headline" id="Interfaccia_web_protetta_da_password">Interfaccia web protetta da password</span></h3>
<p>Per proteggere con password l'interfaccia Web Pi-hole, eseguire il comando seguente e immettere la password:
</p>
<pre>$ pihole -a -p
</pre>
<p>Per disabilitare la protezione con password, impostare una password vuota.
</p>
<h3><span class="mw-headline" id="Cloudflare_DoH">Cloudflare DoH</span></h3>
<p>Pi-hole può essere configurato per utilizzare <a href="../en/Cloudflared.html" title="Cloudflared">Cloudflared</a> per ottenere la funzionalità <a href="../en/Domain_name_resolution.html#Privacy_and_security" class="mw-redirect" title="DNS over HTTPS">DNS over HTTPS</a>.
</p>
<p>Per far funzionare <a href="../en/Cloudflared.html" title="Cloudflared">Cloudflared</a> con Pi-hole, modifica il file <code>cloudflared.yml</code> e modifica le impostazioni come di seguito:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/cloudflared/cloudflared.yml</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
proxy-dns-port: 53000
proxy-dns-address: 127.0.0.1
</pre>
<p>Quindi riavvia <code>cloudflared@cloudflared.service</code>. Ora usa <code>127.0.0.1#53000</code> come unica voce del server DNS in Pi-hole.
</p>
<h3>
<span id="Ottimizzazione_per_unit.C3.A0_a_stato_solido"></span><span class="mw-headline" id="Ottimizzazione_per_unità_a_stato_solido">Ottimizzazione per unità a stato solido</span>
</h3>
<p>Se Pi-hole è in esecuzione su un <a href="../en/Solid_state_drive.html" title="Solid state drive">solid state drive</a> (scheda SD, SSD ecc..) si consiglia di rimuovere il commento dal valore <code>DBINTERVAL</code> e cambiarlo almeno in <code>60.0</code> per ridurre al minimo le scritture nel database:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pihole/pihole-FTL.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">

...

## Database Interval
## How often do we store queries in FTL's database -minutes-?
## See: https://docs.pi-hole.net/ftldns/database/
## Options: number of minutes
DBINTERVAL=60.0

...

</pre>
<p>Dopo aver eseguito le modifiche, riavvia <code>pihole-FTL.service</code>.
</p>
<h3><span class="mw-headline" id="Disabilita_la_registrazione_delle_query">Disabilita la registrazione delle query</span></h3>
<p>Sia i dati giornalieri che quelli storici raccolti per impostazione predefinita contengono dati di query che potrebbero essere considerati sensibili.
</p>
<p>Per disabilitare il salvataggio su database dei dati storici delle query, impostare il massimo livello di privacy <i>Anonymous mode</i> nell'amministrazione web (Settings &gt; Privacy) o nel file di configurazione <code>/etc/pihole/pihole-FTL.conf</code> modificandolo alla linea:
</p>
<pre>PRIVACYLEVEL=3
</pre>
<p>Per disabilitare anche la registrazione per i dati giornalieri, utilizzare il comando seguente:
</p>
<pre>$ pihole logging off
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Pi-hole cancellerà tutte le statistiche dopo l'esecuzione di questo comando.</div>
<h3><span class="mw-headline" id="Utilizzo_con_server_VPN">Utilizzo con server VPN</span></h3>
<p>Pi-hole può essere utilizzato dai client VPN connessi.
</p>
<h4><span class="mw-headline" id="OpenVPN">OpenVPN</span></h4>
<p>Un server <a href="../en/OpenVPN.html" title="OpenVPN">OpenVPN</a> può essere configurato per utilizzare un'istanza Pi-hole verso i suoi client. Aggiungi le seguenti due righe a <code>/etc/openvpn/server/server.conf</code>:
</p>
<pre>push "redirect-gateway def1 bypass-dhcp"
push "dhcp-option DNS <i>Pi-hole-IP</i>"
</pre>
<p>Se ancora non funziona, prova a creare un file <code>/etc/dnsmasq.d/00-openvpn.conf</code> con il seguente contenuto:
</p>
<pre>interface=tun0
</pre>
<p>Potrebbe essere necessario fare in modo che <code>dnsmasq</code> ascolti su <code>tun0</code>.
</p>
<h4><span class="mw-headline" id="WireGuard">WireGuard</span></h4>
<p>I client <a href="../en/WireGuard.html" title="WireGuard">WireGuard</a> possono essere configurati per utilizzare il server DNS Pi-hole. Nel file di configurazione del client, specificare la riga seguente:
</p>
<pre> DNS = <i>Pi-hole-IP</i>
</pre>
<p>Affinché il DNS sia funzionante dalla VPN, Pi-hole deve ascoltare tutte le interfacce locali:
</p>
<pre> pihole -a -i local
</pre>
<p>Vedere ulteriori informazioni in <a href="../en/WireGuard.html#Client_configuration" title="WireGuard">WireGuard#Client configuration</a>.
</p>
<h3><span class="mw-headline" id="Nginx_al_posto_di_Lighttpd">Nginx al posto di Lighttpd</span></h3>
<p>Questa è <a rel="nofollow" class="external text" href="https://docs.pi-hole.net/guides/nginx-configuration/">configurazione non ufficiale supportata dalla comunità</a>. Assicurati che PHP sia impostato (vedi <a href="#Configurazione_PHP">#Configurazione PHP</a>) e che il server lighttpd sia inattivo.
</p>
<p>Installa <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nginx-mainline">nginx-mainline</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php-fpm">php-fpm</a></span>.
</p>
<p>Modifica <code>/etc/nginx/nginx.conf</code> per contenere quanto segue nella sezione <b>http</b>:
</p>
<pre>gzip            on;
gzip_min_length 1000;
gzip_proxied    expired no-cache no-store private auth;
gzip_types      text/plain application/xml application/json application/javascript application/octet-stream text/css;
include /etc/nginx/conf.d/*.conf;
</pre>
<p>Copia la configurazione predefinita fornita dal pacchetto per Pi-hole:
</p>
<pre># mkdir /etc/nginx/conf.d
# cp /usr/share/pihole/configs/nginx.example.conf /etc/nginx/conf.d/pihole.conf
</pre>
<p>Modifica <code>/etc/nginx/conf.d/pihole.conf</code> e cambia la direttiva <code>fastcgi_pass</code> come segue:
</p>
<pre>fastcgi_pass  unix:/run/php-fpm/php-fpm.sock;  
</pre>
<p>Facoltativamente, imposta <code>VIRTUAL_HOST</code> sul CNAME di Pi-hole se l'intenzione è di eseguire più host virtuali su Nginx.
</p>
<pre>fastcgi_param VIRTUAL_HOST "pihole.example.com";
</pre>
<p>Dalla versione 7.4 php-fpm è protetto per impostazione predefinita e revoca l'accesso in lettura/scrittura su <code>/usr</code> (e sottodirectory).
</p>
<p>Crea un <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a> per <code>php-fpm</code> con il seguente contenuto:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/php-fpm.service.d/pihole.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ReadWritePaths = /srv/http/pihole
ReadWritePaths = /run/pihole-ftl/pihole-FTL.port
ReadWritePaths = /run/log/pihole/pihole.log
ReadWritePaths = /run/log/pihole-ftl/pihole-FTL.log
ReadWritePaths = /etc/pihole
ReadWritePaths = /etc/hosts
ReadWritePaths = /etc/hostname
ReadWritePaths = /etc/dnsmasq.d/01-pihole.conf
ReadWritePaths = /proc/meminfo
ReadWritePaths = /proc/cpuinfo
ReadWritePaths = /sys/class/thermal/thermal_zone0/temp
ReadWritePaths = /tmp</pre>
<p>Quindi avvia e abilita <code>nginx.service</code> e <code>php-fpm.service</code>.
</p>
<h3><span class="mw-headline" id="Blocklists_addizionali">Blocklists addizionali</span></h3>
<p>Pi-hole è inteso con lo scopo di bloccare gli annunci, ma può anche essere utilizzato per bloccare altri contenuti indesiderati:
</p>
<ol>
<li>Domini traccianti</li>
<li>Domini malware</li>
<li>Siti di pirateria</li>
<li>Siti di notizie false</li>
<li>Siti di phishing</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Le liste di blocco Pi-hole devono contenere <b>domini</b>. Alcuni elenchi potrebbero contenere combinazioni di indirizzi IP e 127.0.0.1: questo formato è accettato da Pi-hole.</div>
<p>Ci sono molte fonti che forniscono queste liste di blocco. Alcuni esempi: <a rel="nofollow" class="external text" href="https://firebog.net">firebog.net</a> e <a rel="nofollow" class="external text" href="https://oisd.nl">oisd.nl</a>.
</p>
<h3><span class="mw-headline" id="Usare_Unbound_come_server_DNS_a_monte">Usare Unbound come server DNS a monte</span></h3>
<p>Per impostazione predefinita, Pi-hole inoltra le richieste ai server DNS a monte, il che potrebbe causare problemi di privacy.
Vedere la <a rel="nofollow" class="external text" href="https://docs.pi-hole.net/guides/dns/unbound/">documentatione</a> per una guida sull'impostazione di <a href="../en/Unbound.html" title="Unbound">Unbound</a> in locale per risolvere le richieste DNS.
</p>
<h2><span class="mw-headline" id="Risoluzione_dei_problemi">Risoluzione dei problemi</span></h2>
<h3>
<span id="Comportamento_strano_nell.27interfaccia_web_dopo_un_aggiornamento"></span><span class="mw-headline" id="Comportamento_strano_nell'interfaccia_web_dopo_un_aggiornamento">Comportamento strano nell'interfaccia web dopo un aggiornamento</span>
</h3>
<p>Alcuni problemi di rendering strani / inspiegabili nella GUI Web possono spesso essere risolti svuotando la cache del browser.
</p>
<h3><span class="mw-headline" id="Perdita_di_dati_al_riavvio">Perdita di dati al riavvio</span></h3>
<p>I sistemi senza un <a href="../en/System_time.html#Hardware_clock" class="mw-redirect" title="RTC">RTC</a> come alcuni dispositivi ARM probabilmente subiranno la perdita di dati nel registro delle query al riavvio. Quando i sistemi non dispongono di un avvio <a href="../en/System_time.html#Hardware_clock" class="mw-redirect" title="RTC">RTC</a>, l'ora viene impostata <i>dopo</i> che la rete e il resolver si sono attivati. Alcune parti di Pi-hole possono essere avviati prima che ciò accada portando alla perdita di dati. Anche un <a href="../en/System_time.html#Hardware_clock" class="mw-redirect" title="RTC">RTC</a> impostato in modo errato può causare problemi. Vedere: <a href="../it/Installation_guide.html#Fuso_orario" class="mw-redirect" title="Guida all'installazione">Guida all'installazione#Fuso orario</a> e <a href="../en/System_time.html" title="System time">System time</a>.
</p>
<p>Per i dispositivi privi di <a href="../en/System_time.html#Hardware_clock" class="mw-redirect" title="RTC">RTC</a>:
Una soluzione fantasiosa per questo è usare un <a href="../en/Systemd.html#Drop-in_files" class="mw-redirect" title="Drop-in file">drop-in file</a> su <code>pihole-FTL.service</code> in cui viene aggiunto un ritardo nella chiamata <code>/usr/bin/sleep x</code> in un'istruzione <code>ExecStartPre</code>. Si noti che il valore di "x" nel tempo di sospensione dipende dal tempo impiegato dall'hardware specifico per stabilire la sincronizzazione dell'ora.
</p>
<p><a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/11008">Issue#11008</a> su systemd-timesyncd che sta attualmente impedendo l'uso di <i>time-sync.target</i> per automatizzare questa operazione.
</p>
<h3><span class="mw-headline" id="Impossibile_avviare_il_motore_Pi-hole_FTLDNS">Impossibile avviare il motore Pi-hole FTLDNS</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Controlla quale processo ha aperto la porta 53 con: <code># lsof -i :53</code>.</div>
<p>Potrebbe essere che <code>systemd-resolved.service</code> occupi già la porta 53, richiesta per <code>pihole-FTL.service</code>.
Per risolvere questo problema, disabilitare lo stub listener modificando il file di configurazione <a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/resolved.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Resolve]
DNSStubListener=no</pre>
<p>Quindi riavvia <code>systemd-resolved.service</code> e <code>pihole-FTL.service</code>.
</p>
<p>Per ulteriori informazioni, vedere <span class="plainlinks archwiki-template-man" title="$ man 5 resolved.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/resolved.conf.5">resolved.conf(5)</a></span>.
</p>
<p>In alternativa, indicare a dnsmasq di collegarsi a ciascuna interfaccia in modo esplicito, invece del carattere jolly <code>0.0.0.0:53</code>, decommentando la riga <code>bind-interfaces</code> in <code>/etc/dnsmasq.conf</code>. Ciò eviterà conflitti con <code>systemd-resolved</code> che è in ascolto su <code>127.0.0.53:53</code>.
</p>
<h3><span class="mw-headline" id="Conflitto_con_il_pacchetto_DNSMasq">Conflitto con il pacchetto DNSMasq</span></h3>
<p>A partire da Pi-hole-FTL 4.0, un fork privato di dnsmasq è integrato nel sottoprogetto FTL. Il pacchetto originale <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dnsmasq">dnsmasq</a></span> è ora in conflitto con <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pi-hole-ftl/">pi-hole-ftl</a></span><sup><small>AUR</small></sup> e verrà disinstallato durante l'aggiornamento da una versione precedente. È ancora possibile utilizzare i file di configurazione di dnsmasq precedenti, assicurati solo che <code>conf-dir=/etc/dnsmasq.d/,*.conf</code> nell'originale <code>/etc/dnsmasq.conf</code> non sia commentato.
</p>
<h3><span class="mw-headline" id="Stato_sconosciuto_e_modifiche_non_salvate">Stato sconosciuto e modifiche non salvate</span></h3>
<p>Il problema, come visto in <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/63704">FS#63704</a>, riguarda l'utente creato da systemd-sysusers <code>http</code>, che viene creato in uno stato scaduto. Per risolverlo, esegui:
</p>
<pre># chage --expiredate -1 http
</pre>
<h3><span class="mw-headline" id="Tempi_di_caricamento_lenti">Tempi di caricamento lenti</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Questo problema sembra riguardare la configurazione DNS. Potrebbe non essere una buona idea indicare modifiche dirette a <code>/etc/resolv.conf</code>. (Discuss in <a rel="nofollow" class="external text" href="../it/Talk:Pi-hole.html">Talk:Pi-hole (Italiano)</a>)</div>
</div>
<p>Se i browser segnalano "Risoluzione host" o semplicemente impiegano più tempo del solito per caricare le pagine, assicurati che <code>/etc/resolv.conf</code> appaia <b>esattamente</b> come questo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/resolv.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">nameserver 127.0.0.1
</pre>
<p>Se ci vuole molto tempo per caricare le pagine, può essere un problema con l'esecuzione di <code>lsof</code> nello script di pihole <code>(/usr/bin/pihole)</code> chiamato tramite php. Verificalo durante il caricamento della pagina con: <code>ps -ef | grep lsof</code>. Terminalo e se la pagina viene visualizzata, sostituisci la chiamata di <code>lsof</code> nello script di pihole (ce n'è solo una) con:
</p>
<pre>ss -lnp '( sport = 53 )'</pre>
<h3>
<span id="Associa_il_servizio_DNS_di_Pihole-FTL_all.27indirizzo_IP_effettivo_del_Pi-hole_.28invece_di_0.0.0.0.29_per_evitare_problemi_di_risoluzione_DNS_per_altri_host_virtuali"></span><span class="mw-headline" id="Associa_il_servizio_DNS_di_Pihole-FTL_all'indirizzo_IP_effettivo_del_Pi-hole_(invece_di_0.0.0.0)_per_evitare_problemi_di_risoluzione_DNS_per_altri_host_virtuali">Associa il servizio DNS di Pihole-FTL all'indirizzo IP effettivo del Pi-hole (invece di 0.0.0.0) per evitare problemi di risoluzione DNS per altri host virtuali</span>
</h3>
<p>In maniera predefinita, il servizio DNS (pihole-FTL) viene associato all'indirizzo IP 0.0.0.0:
</p>
<pre># netstat -ltnp | grep 53
tcp        0      0 0.0.0.0:53              0.0.0.0:*               LISTEN      2196/pihole-FTL
tcp6       0      0 :::53                   :::*                    LISTEN      2196/pihole-FTL</pre>
<p>Ciò potrebbe impedire a qualsiasi altro host virtuale sulla stessa macchina che ospita l'istanza pihole (come i contenitori docker) di ottenere le risoluzioni DNS.<br>
Approfondimenti <a rel="nofollow" class="external text" href="https://discourse.pi-hole.net/t/make-pihole-ftl-bind-only-on-certain-ips-v4-0/11883">qui</a> e <a rel="nofollow" class="external text" href="https://discourse.pi-hole.net/t/solve-dns-resolution-in-other-containers-when-using-docker-pihole/31413">qui</a>.
</p>
<p>Per risolvere questo problema, devi creare un file di configurazione in /etc/dnsmasq.d/ con il seguente contenuto (dove X.X.X.X è l'indirizzo IP del tuo pi-hole):
</p>
<pre># cat /etc/dnsmasq.d/99-dns-bind.conf
listen-address=X.X.X.X
bind-interfaces</pre>
<p>Quindi, è necessario riavviare il servizio pihole-FTL per applicare le modifiche
</p>
<pre># systemctl restart pihole-FTL</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Per completare questa configurazione potrebbe essere necessario attivare il servizio di attesa online del proprio gestore di rete</div>
<h2><span class="mw-headline" id="Risorse">Risorse</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://pi-hole.net/">Homepage di Pi-hole</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/pi-hole/pi-hole">GitHub di Pi-hole</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/pi-hole/FTL">GitHub di Pi-hole FTL</a></li>
<li><a rel="nofollow" class="external text" href="https://dlaa.me/blog/post/skyhole">Sky-hole, l'idea dietro Pi-hole standalone</a></li>
<li><a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/304050/how-to-avoid-conflicts-between-dnsmasq-and-systemd-resolved">Impedire a systemd-resolved stub server l'uso della porta 53</a></li>
<li><a rel="nofollow" class="external text" href="https://www.reddit.com/r/pihole/comments/d9j1z6/unbound_as_recursive_dns_server_slow_performance/f1jnuq1/">Problemi di lentezza con Unbound</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../it/Category:Domain_Name_System.html" title="Category:Domain Name System (Italiano)">Domain Name System (Italiano)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Pi-hole_(Italiano)&amp;oldid=777523">https://wiki.archlinux.org/index.php?title=Pi-hole_(Italiano)&amp;oldid=777523</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 8 May 2023, at 12:06.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
