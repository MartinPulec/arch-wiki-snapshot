<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>badblocks (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Badblocks_Português rootpage-Badblocks_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Instalação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Instala%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Instalação</div>
		</a>
		
		<ul id="toc-Instalação-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Fidelidade_do_dispositivo_de_armazenamento" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Fidelidade_do_dispositivo_de_armazenamento">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Fidelidade do dispositivo de armazenamento</div>
		</a>
		
		<ul id="toc-Fidelidade_do_dispositivo_de_armazenamento-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Comparações_com_outros_programas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Compara%C3%A7%C3%B5es_com_outros_programas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Comparações com outros programas</div>
		</a>
		
		<ul id="toc-Comparações_com_outros_programas-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Testando_por_setores_ruins" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Testando_por_setores_ruins">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Testando por setores ruins</div>
		</a>
		
			<button aria-controls="toc-Testando_por_setores_ruins-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Testando por setores ruins subsection</span>
			</button>
		
		<ul id="toc-Testando_por_setores_ruins-sublist" class="vector-toc-list">
			<li id="toc-Teste_de_leitura-gravação_(aviso:destrutivo)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Teste_de_leitura-grava%C3%A7%C3%A3o_(aviso:destrutivo)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Teste de leitura-gravação (aviso:destrutivo)</div>
			</a>
			
			<ul id="toc-Teste_de_leitura-gravação_(aviso:destrutivo)-sublist" class="vector-toc-list">
				<li id="toc-Defina_padrão_de_teste_específico" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Defina_padr%C3%A3o_de_teste_espec%C3%ADfico">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.1</span>Defina padrão de teste específico</div>
			</a>
			
			<ul id="toc-Defina_padrão_de_teste_específico-sublist" class="vector-toc-list">
				<li id="toc-Padrão_aleatório" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Padr%C3%A3o_aleat%C3%B3rio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.1.1</span>Padrão aleatório</div>
			</a>
			
			<ul id="toc-Padrão_aleatório-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Teste_de_leitura-gravação_(não-destrutivo)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Teste_de_leitura-grava%C3%A7%C3%A3o_(n%C3%A3o-destrutivo)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Teste de leitura-gravação (não-destrutivo)</div>
			</a>
			
			<ul id="toc-Teste_de_leitura-gravação_(não-destrutivo)-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Faça_o_sistema_de_arquivos_incorporar_setores_ruins" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Fa%C3%A7a_o_sistema_de_arquivos_incorporar_setores_ruins">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Faça o sistema de arquivos incorporar setores ruins</div>
		</a>
		
			<button aria-controls="toc-Faça_o_sistema_de_arquivos_incorporar_setores_ruins-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Faça o sistema de arquivos incorporar setores ruins subsection</span>
			</button>
		
		<ul id="toc-Faça_o_sistema_de_arquivos_incorporar_setores_ruins-sublist" class="vector-toc-list">
			<li id="toc-Durante_a_verificação_de_sistema_de_arquivos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Durante_a_verifica%C3%A7%C3%A3o_de_sistema_de_arquivos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Durante a verificação de sistema de arquivos</div>
			</a>
			
			<ul id="toc-Durante_a_verificação_de_sistema_de_arquivos-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Antes_da_criação_do_sistema_de_arquivos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Antes_da_cria%C3%A7%C3%A3o_do_sistema_de_arquivos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Antes da criação do sistema de arquivos</div>
			</a>
			
			<ul id="toc-Antes_da_criação_do_sistema_de_arquivos-sublist" class="vector-toc-list">
				<li id="toc-Ext4" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ext4">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.1</span>Ext4</div>
			</a>
			
			<ul id="toc-Ext4-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tamanho_do_bloco" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Tamanho_do_bloco">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2.2</span>Tamanho do bloco</div>
			</a>
			
			<ul id="toc-Tamanho_do_bloco-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Veja também</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">badblocks (Português)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Badblocks.html" title="Badblocks – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Badblocks.html" title="Badblocks – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Badblocks" title="Badblocks – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Badblocks.html" title="Badblocks">Badblocks</a>. Data da última tradução: 2019-10-20. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Badblocks&amp;diff=0&amp;oldid=584714">alterações</a> na versão em inglês.</div>
<p><i>badblocks</i> é um programa para testar dispositivos de armazenamento para blocos defeituosos (em inglês, <i>bad blocks</i>).
</p>
<p>No caso de um HDD, todo o setor deve ser aposentado. Um setor é uma subdivisão de uma faixa em um dispositivo de armazenamento e setores que se tornaram ruins não podem ser usados porque ficaram danificados permanentemente (um setor defeituoso pode ter efeitos adversos variando de alterar uma letra em um arquivo de texto para causar um programa binário tem uma falha de segmentação).
</p>
<p><a href="../en/S.M.A.R.T..html" title="S.M.A.R.T.">S.M.A.R.T.</a> <i>(Self-Monitoring, Analysis, and Reporting Technology)</i> é um recurso de hardware presente em quase todos os HDD ainda em uso hoje em dia e em alguns casos pode automaticamente "aposentar" defeituosos setores de HDD. De qualquer forma, S.M.A.R.T. espera apenas passivamente por erros, enquanto os blocos defeituosos escrevem padrões simples para cada bloco de um dispositivo e, em seguida, os lê e verifica procurando por áreas danificadas. (Assim como o memtest86* faz com a RAM.)
</p>
<p>Isso pode ser feito em um modo de gravação <i>(write-mode)</i> destrutivo que efetivamente <a href="../en/Securely_wipe_disk.html" title="Securely wipe disk">apaga</a> o dispositivo (faça backup!) ou em modos não-destrutivos de leitura-gravação (backup aconselhável também!) e somente leitura.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=e2fsprogs">e2fsprogs</a></span>.
</p>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 8 badblocks"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/badblocks.8">badblocks(8)</a></span> para o uso.
</p>
<h2><span class="mw-headline" id="Fidelidade_do_dispositivo_de_armazenamento">Fidelidade do dispositivo de armazenamento</span></h2>
<p>Embora não exista uma regra firme, é comum pensar que uma nova unidade deve ter zero setores defeituosos. Com o passar do tempo, setores defeituosos se desenvolverão e, embora possam ser definidos para o sistema de arquivos para que sejam evitados, o uso contínuo da unidade geralmente resultará na formação de setores defeituosos adicionais e normalmente é o prenúncio de sua eventual morte. A substituição do dispositivo é recomendada.
</p>
<h2>
<span id="Compara.C3.A7.C3.B5es_com_outros_programas"></span><span class="mw-headline" id="Comparações_com_outros_programas">Comparações com outros programas</span>
</h2>
<p>Prática recomendada típica para testar um dispositivo de armazenamento para setores defeituosos é usar o programa de teste do fabricante. A maioria dos fabricantes possui programas que fazem isso. O principal motivo para isso é que os fabricantes geralmente têm seus padrões embutidos nos programas de teste que lhe dirão se a unidade precisa ser substituída ou não. A ressalva aqui é que alguns programas de teste de fabricantes não imprimem resultados de teste completos e permitem que um certo número de setores defeituosos diga apenas se eles passam ou não. Os programas de fabricantes, no entanto, são geralmente mais rápidos do que os <i>badblocks</i>, por vezes, uma quantidade razoável.
</p>
<h2><span class="mw-headline" id="Testando_por_setores_ruins">Testando por setores ruins</span></h2>
<p>Para testar setores defeituosos no Linux, o programa <i>badblocks</i> é normalmente usado. <i>badblocks</i> tem vários modos diferentes para detectar setores defeituosos.
</p>
<h3>
<span id="Teste_de_leitura-grava.C3.A7.C3.A3o_.28aviso:destrutivo.29"></span><span class="mw-headline" id="Teste_de_leitura-gravação_(aviso:destrutivo)">Teste de leitura-gravação (aviso:destrutivo)</span>
</h3>
<p>Este teste é principalmente para testar novas unidades e é um teste de leitura/gravação. À medida que o padrão é gravado em todos os blocos acessíveis, o dispositivo obtém efetivamente <a href="../en/Securely_wipe_disk.html" title="Securely wipe disk">apagado</a>. O padrão é um teste extensivo com quatro passagens usando quatro padrões diferentes: 0xaa (10101010), 0x55 (01010101), 0xff (11111111) e 0x00 (00000000). Para alguns dispositivos, isso levará alguns dias para ser concluído.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -wsv /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Checking for bad blocks in read-write mode
From block 0 to 488386583
Testing with pattern <b>0xaa</b>: done
Reading and comparing: done
Testing with pattern <b>0x55</b>: done
Reading and comparing: done
Testing with pattern <b>0xff</b>: 22.93% done, 4:09:55 elapsed. (0/0/0 errors)
[...]
Testing with pattern <b>0x00</b>: done
Reading and comparing: done
Pass completed, 0 bad blocks found. (0/0/0 errors)
</pre>
<p>Opções:
</p>
<dl>
<dd>
<code>-b <i>número</i></code>: especifica o tamanho do bloco do disco rígido que pode melhorar significativamente o tempo de teste. (<code># tune2fs -l <i>partição</i></code>)</dd>
<dd>
<code>-w</code>: faz um teste de gravação destrutivo</dd>
<dd>
<code>-s</code>: mostra o progresso</dd>
<dd>
<code>-v</code>: torna a saída "verbosa" e emite setores defeituosos detectados para a <i>stdout</i>
</dd>
</dl>
<p>Opções adicionais que você pode considerar:
</p>
<dl>
<dd>
<code>-p <i>número</i></code>: executa <i>número</i> testes extensos de passagens de iterações sequenciais</dd>
<dd>
<code>-o <i>/caminho/do/arquivo-de-saída</i></code>: emite setores defeituosos para <i>arquivo-de-saída</i> em vez da stdout</dd>
<dd>
<code>-t <i>padrão_de_teste</i></code>: especifica um padrão. Veja abaixo.</dd>
</dl>
<h4>
<span id="Defina_padr.C3.A3o_de_teste_espec.C3.ADfico"></span><span class="mw-headline" id="Defina_padrão_de_teste_específico">Defina padrão de teste específico</span>
</h4>
<p><b>Da página man:</b> "O <i>padrão_de_teste</i> pode ser um valor numérico entre 0 e um ULONG_MAX-1 inclusive [...]."
</p>
<h5>
<span id="Padr.C3.A3o_aleat.C3.B3rio"></span><span class="mw-headline" id="Padrão_aleatório">Padrão aleatório</span>
</h5>
<p>Pode-se fazer com que blocos defeituosos sejam repetidamente gravados com um único "padrão aleatório" com a opção <code>-t random</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -wsv -t random /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Checking for bad blocks in read-write mode
From block 0 to 488386583
Testing with <b>random pattern</b>: done
Reading and comparing: done
Pass completed, 0 bad blocks found. (0/0/0 errors)</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Isso não é seguro para fins criptográficos. Um "padrão aleatório" é uma contradição em si. Como <i>badblocks</i> não (como <a href="https://en.wikipedia.org/wiki/pt:/dev/random" class="extiw" title="wikipedia:pt:/dev/random">/dev/urandom</a>) aplica procedimentos sofisticados para reutilizar a entropia, mas simplesmente repete um "padrão aleatório", ele não deve ser usado onde dados aleatórios seriam necessários, por exemplo, para <a href="../en/Securely_wipe_disk.html#Preparations_for_block_device_encryption" title="Securely wipe disk">criptografia de dispositivos de bloco</a>.</div>
<h3>
<span id="Teste_de_leitura-grava.C3.A7.C3.A3o_.28n.C3.A3o-destrutivo.29"></span><span class="mw-headline" id="Teste_de_leitura-gravação_(não-destrutivo)">Teste de leitura-gravação (não-destrutivo)</span>
</h3>
<p>Este teste foi projetado para dispositivos com dados já existentes. Um teste de leitura-gravação não destrutivo faz um backup do conteúdo original de um setor antes de testar com um único padrão aleatório e, em seguida, restaura o conteúdo do backup. Este é um teste de passagem única e é útil como um teste de manutenção geral.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -nsv /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Checking for bad blocks in non-destructive read-write mode
From block 0 to 488386583
Checking for bad blocks (non-destructive read-write test)
Testing with <b>random pattern</b>: done
Pass completed, 0 bad blocks found. (0/0/0 errors)</pre>
<p>A opção <code>-n</code> significa um teste de leitura-gravação não destrutivo.
</p>
<h2>
<span id="Fa.C3.A7a_o_sistema_de_arquivos_incorporar_setores_ruins"></span><span class="mw-headline" id="Faça_o_sistema_de_arquivos_incorporar_setores_ruins">Faça o sistema de arquivos incorporar setores ruins</span>
</h2>
<p>Para não usar setores defeituosos, eles devem ser conhecidos pelo sistema de arquivos.
</p>
<h3>
<span id="Durante_a_verifica.C3.A7.C3.A3o_de_sistema_de_arquivos"></span><span class="mw-headline" id="Durante_a_verificação_de_sistema_de_arquivos">Durante a verificação de sistema de arquivos</span>
</h3>
<p>A incorporação de setores defeituosos pode ser feita usando o utilitário de verificação do sistema de arquivos (<code>fsck</code>). Pode-se dizer ao <code>fsck</code> para usar <i>badblocks</i> durante um teste. Para fazer um teste <b>leitura-gravação</b> (não destrutivo) e ter os setores defeituosos tornados conhecidos para o sistema de arquivos:
</p>
<pre># fsck -vcck /dev/<i>dispositivo-PARTIÇÃO</i>
</pre>
<p>A opção <code>-cc</code> fala para executar <code>fsck</code> no modo de teste <b>não-destrutivo</b>, o <code>-v</code> diz ao <code>fsck</code> para mostre sua saída, e a opção <code>-k</code> preserva setores defeituosos antigos que foram detectados.
</p>
<p>Para fazer um teste <b>somente leitura</b> (não recomendado):
</p>
<pre># fsck -vck /dev/<i>dispositivo-PARTIÇÃO</i>
</pre>
<h3>
<span id="Antes_da_cria.C3.A7.C3.A3o_do_sistema_de_arquivos"></span><span class="mw-headline" id="Antes_da_criação_do_sistema_de_arquivos">Antes da criação do sistema de arquivos</span>
</h3>
<p>Como alternativa, isso pode ser feito antes da criação do sistema de arquivos.
</p>
<p>Se <i>badblocks</i> for executado sem a opção <code>-o</code>, os setores defeituosos serão impressos apenas no stdout.
</p>
<p>Exemplo de saída para erros de leitura no começo do disco:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -wsv /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[...]
Testing with pattern <b>0xff</b>: done
Reading and comparing:
[...]
37584
37585 0.84% done, 7:31:08 elapsed. (0/0/527405 errors)
37586
[...]
done
Testing with pattern <b>0x00</b>:
Reading and comparing:
[...]
37584
37585
[...]
done
Pass completed, 527405 bad blocks found. (0/0/527405 errors)</pre>
<p>Para passar confortavelmente a saída de erro de <i>badblocks</i> para o sistema de arquivos, deve-se gravar em um arquivo.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># badblocks -wsv <b>-o</b> /root/<i>badblocks.txt</i> /dev/<i>dispositivo</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Checking for bad blocks in read-write mode
From block 0 to 488386583
Testing with pattern <b>0xaa</b>: done
Reading and comparing:   6.36% done, 0:51 elapsed. (0/0/14713 errors)
[...]
Testing with pattern <b>0x00</b>: done
Reading and comparing: done
Pass completed, 527405 bad blocks found. (0/0/527405 errors)</pre>
<p>Então, (re)crie o sistema de arquivos com a informação:
</p>
<pre># mkfs.<i>tipo-sistema-de-arquivos</i> <b>-l</b> /root/<i>badblocks.txt</i> /dev/<i>dispositivo</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O sentido de erros <code>0/0/527405</code> é <i>número_de_erros_de_leitura</i> / <i>número_de_erros_de_escrita</i> / <i>número_de_erros_de_corrupção</i>.</div>
<h4><span class="mw-headline" id="Ext4">Ext4</span></h4>
<p>Da página de manual <span class="plainlinks archwiki-template-man" title="$ man 8 mke2fs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mke2fs.8">mke2fs(8)</a></span>:
</p>
<dl><dd>Note que os números de bloco na lista de blocos defeituosos devem ser gerados usando o mesmo tamanho de bloco usado por <i>mke2fs</i>. Como resultado, a opção <code>-c</code> para <i>mke2fs</i> é um método muito mais simples e menos propenso a erros de verificar um disco em busca de blocos defeituosos antes de formatá-lo.</dd></dl>
<p>Então, o método recomendado é usar:
</p>
<pre># mkfs.ext4 -c /dev/<i>dispositivo</i>
</pre>
<p>Use <code>-cc</code> para fazer um teste de leitura-gravação de blocos defeituosos.
</p>
<h4><span class="mw-headline" id="Tamanho_do_bloco">Tamanho do bloco</span></h4>
<p>Primeiramente, encontre o <b>tamanho de bloco</b> do sistema de arquivos. Por exemplo, para sistemas de arquivos ext#:
</p>
<pre># dumpe2fs /dev/<i>dispositivo-PARTIÇÃO</i> | grep 'Block size'
</pre>
<p>Alimente isso ao <i>badblocks</i>:
</p>
<pre># badblocks -b <i>tamanho de bloco</i>
</pre>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul><li>
<a rel="nofollow" class="external text" href="https://www.pcguide.com/ts/x/comp/hdd/errorsBadSectors-c.html">Meu disco rígido tem setores defeituosos ou está desenvolvendo setores defeituosos ao longo do tempo</a> (em inglês)</li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Hardware_detection_and_troubleshooting.html" title="Category:Hardware detection and troubleshooting (Português)">Hardware detection and troubleshooting (Português)</a></li>
<li><a href="../pt/Category:Commands.html" title="Category:Commands (Português)">Commands (Português)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Badblocks_(Portugu%C3%AAs)&amp;oldid=668502">https://wiki.archlinux.org/index.php?title=Badblocks_(Português)&amp;oldid=668502</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 09:59.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
