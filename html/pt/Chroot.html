<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>chroot (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Chroot_Português rootpage-Chroot_Português skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Motivação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Motiva%C3%A7%C3%A3o">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Motivação</span>
			</div>
		</a>
		
		<ul id="toc-Motivação-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Requisitos" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Requisitos">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Requisitos</span>
			</div>
		</a>
		
		<ul id="toc-Requisitos-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Uso" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Uso">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Uso</span>
			</div>
		</a>
		
			<button aria-controls="toc-Uso-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Uso subsection</span>
			</button>
		
		<ul id="toc-Uso-sublist" class="vector-toc-list">
			<li id="toc-Usando_arch-chroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_arch-chroot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Usando arch-chroot</span>
				</div>
			</a>
			
			<ul id="toc-Usando_arch-chroot-sublist" class="vector-toc-list">
				<li id="toc-Entrar_em_um_chroot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Entrar_em_um_chroot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1</span>
					<span>Entrar em um chroot</span>
				</div>
			</a>
			
			<ul id="toc-Entrar_em_um_chroot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Executar_um_único_comando_e_sair" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Executar_um_%C3%BAnico_comando_e_sair">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.2</span>
					<span>Executar um único comando e sair</span>
				</div>
			</a>
			
			<ul id="toc-Executar_um_único_comando_e_sair-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Usando_chroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_chroot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Usando chroot</span>
				</div>
			</a>
			
			<ul id="toc-Usando_chroot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Executar_aplicativos_gráficos_a_partir_do_chroot" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Executar_aplicativos_gr%C3%A1ficos_a_partir_do_chroot">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Executar aplicativos gráficos a partir do chroot</span>
			</div>
		</a>
		
		<ul id="toc-Executar_aplicativos_gráficos_a_partir_do_chroot-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Sem_privilégios_de_root" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Sem_privil%C3%A9gios_de_root">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Sem privilégios de root</span>
			</div>
		</a>
		
			<button aria-controls="toc-Sem_privilégios_de_root-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Sem privilégios de root subsection</span>
			</button>
		
		<ul id="toc-Sem_privilégios_de_root-sublist" class="vector-toc-list">
			<li id="toc-PRoot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PRoot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.1</span>
					<span>PRoot</span>
				</div>
			</a>
			
			<ul id="toc-PRoot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Fakechroot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Fakechroot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">5.2</span>
					<span>Fakechroot</span>
				</div>
			</a>
			
			<ul id="toc-Fakechroot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Veja também</span>
			</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">chroot (Português)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 8 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-8" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">8 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Chroot" title="Chroot – Deutsch" lang="de" hreflang="de" data-title="Chroot" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Chroot.html" title="Chroot – English" lang="en" hreflang="en" data-title="Chroot" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Chroot.html" title="Chroot – español" lang="es" hreflang="es" data-title="Chroot" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Chroot.html" title="Chroot – français" lang="fr" hreflang="fr" data-title="Chroot" data-language-autonym="Français" data-language-local-name="français" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Chroot" title="Chroot – 日本語" lang="ja" hreflang="ja" data-title="Chroot" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Chroot.html" title="Chroot – русский" lang="ru" hreflang="ru" data-title="Chroot" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-tr mw-list-item"><a href="../tr/Chroot.html" title="Chroot – Türkçe" lang="tr" hreflang="tr" data-title="Chroot" data-language-autonym="Türkçe" data-language-local-name="Türkçe" class="interlanguage-link-target"><span>Türkçe</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Chroot" title="Chroot – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Chroot" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Chroot.html" title="Chroot">chroot</a>. Data da última tradução: 2019-11-11. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Chroot&amp;diff=0&amp;oldid=587612">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../pt/PRoot.html" title="PRoot (Português)">PRoot</a></li>
<li><a href="../pt/Linux_Containers.html" title="Linux Containers (Português)">Linux Containers</a></li>
<li><a href="../en/Systemd-nspawn.html" title="Systemd-nspawn">systemd-nspawn</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/pt:Chroot" class="extiw" title="wikipedia:pt:Chroot">chroot</a> é uma operação que altera o diretório raiz aparente para o processo atual de execução e seus filhos. Um programa que é executado em tal ambiente modificado não consegue acessar os arquivos e comandos fora dessa árvore de diretórios ambiental. Esse ambiente modificado é chamado de um <i>prisão chroot</i> (ou <i>chroot jail</i>).
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Motiva.C3.A7.C3.A3o"></span><span class="mw-headline" id="Motivação">Motivação</span>
</h2>
<p>Alterar a raiz geralmente é feito para executar a manutenção do sistema em sistemas onde a inicialização e/ou a autenticação não são mais possíveis. Exemplos comuns são:
</p>
<ul>
<li>Reinstalação do <a href="../pt/Arch_boot_process.html#Gerenciador_de_boot" class="mw-redirect" title="Gerenciador de boot">gerenciador de boot</a>.</li>
<li>Reconstrução da <a href="../pt/Mkinitcpio.html" title="Mkinitcpio (Português)">imagem de initramfs</a>.</li>
<li>Atualizar ou <a href="../pt/Downgrading_packages.html" class="mw-redirect" title="Fazer downgrade de pacote">fazer downgrade de pacotes</a>.</li>
<li>Redefinir uma <a href="../pt/Reset_lost_root_password.html" class="mw-redirect" title="Recuperação de senha">senha esquecida</a>.</li>
<li>Compilar pacotes em um <i>chroot</i> limpo, veja <a href="../DeveloperWiki:Building_in_a_clean_chroot.html" title="DeveloperWiki:Building in a clean chroot">DeveloperWiki:Building in a clean chroot</a>.</li>
</ul>
<p>Veja também <a href="https://en.wikipedia.org/wiki/Chroot#Limitations" class="extiw" title="wikipedia:Chroot">Wikipedia:Chroot#Limitations</a>.
</p>
<h2><span class="mw-headline" id="Requisitos">Requisitos</span></h2>
<ul>
<li>Privilégio de <i>root</i>.</li>
<li>Outro ambiente Linux, como um LiveCD ou mídia flash USB (ex.: pendrive), ou outra distribuição Linux.</li>
<li>Ambientes com igual arquitetura; i.e. o chroot de e chroot para. A arquitetura do ambiente atual pode ser descoberta com: <code>uname -m</code> (ex.: i686 ou x86_64).</li>
<li>Módulos de kernel carregados que são necessários no ambiente chroot.</li>
<li>
<a href="../pt/Swap.html" title="Swap (Português)">Swap</a> habilitado se necessário: <pre># swapon /dev/sd<i>xY</i></pre>
</li>
<li>Conexão com a Internet estabelecida, se necessário.</li>
</ul>
<h2><span class="mw-headline" id="Uso">Uso</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Algumas ferramentas do <a href="../pt/Systemd.html" title="Systemd (Português)">systemd</a>, tal como <i>hostnamectl</i>, <i>localectl</i> e <i>timedatectl</i>, não podem ser usados dentro de um chroot, pois eles exigem uma conexão <a href="../en/D-Bus.html" class="mw-redirect" title="Dbus">dbus</a> ativa. <a rel="nofollow" class="external autonumber" href="https://github.com/systemd/systemd/issues/798#issuecomment-126568596">[1]</a>
</li>
<li>O sistema de arquivos que vai servir como uma nova raiz (<code>/</code>) de seu chroot deve estar acessível (i.e., descriptografado, montado).</li>
</ul>
</div>
<p>Há duas opções principais para usar chroot, descritas abaixo.
</p>
<h3><span class="mw-headline" id="Usando_arch-chroot">Usando arch-chroot</span></h3>
<p>O script bash <code>arch-chroot</code> é parte do pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=arch-install-scripts">arch-install-scripts</a></span>.  Antes que ele execute <code>/usr/bin/chroot</code>, o script monta sistemas de arquivos de api como <code>/proc</code> e torna o <code>/etc/resolv.conf</code> disponível no chroot.
</p>
<h4><span class="mw-headline" id="Entrar_em_um_chroot">Entrar em um chroot</span></h4>
<p>Execute <i>arch-chroot</i> com o novo diretório raiz como o primeiro argumento:
</p>
<pre># arch-chroot <i>/local/da/nova/raiz</i>
</pre>
<p>Por exemplo, no <a href="../pt/Installation_guide.html" class="mw-redirect" title="Guia de instalação">guia de instalação</a> esse diretório seria o <code>/mnt</code>:
</p>
<pre># arch-chroot /mnt
</pre>
<p>Para sair do chroot, basta usar:
</p>
<pre># exit
</pre>
<h4>
<span id="Executar_um_.C3.BAnico_comando_e_sair"></span><span class="mw-headline" id="Executar_um_único_comando_e_sair">Executar um único comando e sair</span>
</h4>
<p>Para executar um comando a partir do chroot e sair novamente, anexe o comando ao final da linha:
</p>
<pre># arch-chroot <i>/local/da/nova/raiz</i> <i>meucomando</i>
</pre>
<p>Por exemplo, para executar <code>mkinitcpio -p linux</code> para um chroot localizado em <code>/mnt/arch</code> faça:
</p>
<pre># arch-chroot /mnt/arch mkinitcpio -p linux
</pre>
<h3><span class="mw-headline" id="Usando_chroot">Usando chroot</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Ao usar <code>--rbind</code>, alguns subdiretório de <code>dev/</code> e <code>sys/</code> não serão desmontáveis. Tentar desmontar com <code>umount -l</code> nesta situação vai quebrar a sua sessão, exigindo um <i>reboot</i>. Se possível, use <code>-o bind</code>.</div>
<p>No exemplo a seguir, <code>/local/da/nova/raiz</code> é o diretório no qual a nova raiz reside.
</p>
<p>Primeiro, monte os sistemas de arquivos de API temporários:
</p>
<pre># cd <i>/local/da/nova/raiz</i>
# mount -t proc /proc proc/
# mount --rbind /sys sys/
# mount --rbind /dev dev/
</pre>
<p>E opcionalmente:
</p>
<pre># mount --rbind /run run/
</pre>
<p>Em seguida, para usar uma conexão com a internet no ambiente <i>chroot</i> copie os detalhes do DNS:
</p>
<pre># cp /etc/resolv.conf etc/resolv.conf
</pre>
<p>Finalmente, para alterar a raiz para <code>/local/da/nova/raiz</code> usando um shell do bash:
</p>
<pre># chroot <i>/local/da/nova/raiz</i> /bin/bash
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se você vir o erro:
<ul>
<li>
<code>chroot: não foi possível executar o comando '/usr/bin/bash': Erro no formato exec</code>, é provável que as arquiteturas do ambiente hospedeiro e do ambiente <i>chroot</i> não sejam iguais.</li>
<li>
<code>chroot: '/usr/bin/bash': permissão negada</code>, remote com a permissão de execução: <code>mount -o remount,exec <i>/local/da/nova/raiz</i></code>.</li>
</ul>
</div>
<p>Após fazer o <i>chroot</i> pode ser necessário carregar a configuração local do bash:
</p>
<pre># source /etc/profile
# source ~/.bashrc
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Opcionalmente, crie um prompt único ser possível diferenciar seu ambiente <i>chroot</i>:
<pre># export PS1="(chroot) $PS1"</pre>
</div>
<p>Ao finalizar com o <i>chroot</i>, você pode sair dele via:
</p>
<pre># exit
</pre>
<p>Então, desmonte os sistemas de arquivos temporários:
</p>
<pre># cd /
# umount --recursive <i>/local/da/nova/raiz</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se houver um erro mencionando algo como: <code>umount: /caminho: dispositivo está ocupado</code> isso geralmente significa que: um programa (até mesmo um shell) foi mantido em execução no chroot ou que uma submontagem ainda existe. Saia do programa e use <code>findmnt -R /local/da/nova/raiz</code> para localizar e então desmontar (com <code>umount</code>) as submontagens. Pode ser complicado desmontar algumas coisas e pode-se ter sorte com o <code>umount --force</code>. Como um último recurso, use <code>umount --lazy</code> para apenas liberá-los. Em ambos casos, para ter segurança, reinicialize (com <code>reboot</code>) assim que possível se essas coisas ficarem não resolvidas para evitar possíveis conflitos futuros.</div>
<h2>
<span id="Executar_aplicativos_gr.C3.A1ficos_a_partir_do_chroot"></span><span class="mw-headline" id="Executar_aplicativos_gráficos_a_partir_do_chroot">Executar aplicativos gráficos a partir do chroot</span>
</h2>
<p>Se você tiver um <a href="../pt/Xorg.html" class="mw-redirect" title="Servidor X">servidor X</a> funcionando em seu sistema, você pode iniciar aplicativos gráficos a partir do ambiente chroot.
</p>
<p>Para permitir que o ambiente <i>chroot</i> se conecte a um servidor X, abra um terminal virtual dentro do servidor X (i.e. dentro do computador do usuário que está atualmente autenticado), então execute o comando <a href="../pt/Xhost.html" title="Xhost (Português)">xhost</a>, que dá a permissão para qualquer um se conectar ao servidor X do usuário (veja também <a href="../pt/Xhost.html" title="Xhost (Português)">Xhost</a>):
</p>
<pre>$ xhost +local:
</pre>
<p>Então, para direcionar os aplicativos para o servidor X do <i>chroot</i>, defina a variável de ambiente DISPLAY dentro do <i>chroot</i> para corresponder a variável DISPLAY do usuário que possui o servidor X. Então, por exemplo, execute
</p>
<pre>$ echo $DISPLAY
</pre>
<p>como o usuário que possui o servidor X para ver o valor de DISPLAY. Se o valor for ": 0" (por exemplo), em seguida, no ambiente <i>chroot</i> é executado
</p>
<pre># export DISPLAY=:0
</pre>
<h2>
<span id="Sem_privil.C3.A9gios_de_root"></span><span class="mw-headline" id="Sem_privilégios_de_root">Sem privilégios de root</span>
</h2>
<p>O <i>chroot</i> requer privilégios de root, o que pode não ser desejável ou possível para o usuário obter em determinadas situações. Há, no entanto, várias maneiras de simular o comportamento de <i>chroot</i> com implementações alternativas.
</p>
<h3><span class="mw-headline" id="PRoot">PRoot</span></h3>
<p><a href="../pt/PRoot.html" title="PRoot (Português)">PRoot</a> pode ser usado para alterar o diretório raiz aparente e usar <code>mount --bind</code> sem privilégios de root. Isso é útil para confinar aplicativos para um único diretório ou executar programas criados para uma arquitetura de CPU diferente, mas tem limitações devido ao fato de que todos os arquivos são de propriedade do usuário no sistema hospedeiro. O PRoot fornece um argumento <code>--root-id</code> que pode ser usado como uma solução alternativa para algumas dessas limitações de maneira semelhante (embora mais limitada) para <i>fakeroot</i>.
</p>
<h3><span class="mw-headline" id="Fakechroot">Fakechroot</span></h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fakechroot">fakechroot</a></span> é uma camada de biblioteca que intercepta a chamada do <i>chroot</i> e falsifica os resultados. Ele pode ser usado em conjunto com <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=fakeroot">fakeroot</a></span> para simular um <i>chroot</i> como usuário comum.
</p>
<pre># fakechroot fakeroot chroot ~/meu-chroot bash
</pre>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/BasicChroot">Básico de chroot</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:System_recovery.html" title="Category:System recovery (Português)">System recovery (Português)</a></li>
<li><a href="../pt/Category:Sandboxing.html" title="Category:Sandboxing (Português)">Sandboxing (Português)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Chroot_(Portugu%C3%AAs)&amp;oldid=799155">https://wiki.archlinux.org/index.php?title=Chroot_(Português)&amp;oldid=799155</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 February 2024, at 18:03.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
