<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Sudo (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Sudo_Português rootpage-Sudo_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Instalação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Instala%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Instalação</div>
		</a>
		
		<ul id="toc-Instalação-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Uso" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Uso">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Uso</div>
		</a>
		
		<ul id="toc-Uso-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuração" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configura%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Configuração</div>
		</a>
		
			<button aria-controls="toc-Configuração-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuração subsection</span>
			</button>
		
		<ul id="toc-Configuração-sublist" class="vector-toc-list">
			<li id="toc-Estrutura_do_Defaults" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Estrutura_do_Defaults">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Estrutura do Defaults</div>
			</a>
			
			<ul id="toc-Estrutura_do_Defaults-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ver_as_configurações_atuais" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ver_as_configura%C3%A7%C3%B5es_atuais">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Ver as configurações atuais</div>
			</a>
			
			<ul id="toc-Ver_as_configurações_atuais-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_visudo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_visudo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Usando visudo</div>
			</a>
			
			<ul id="toc-Usando_visudo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exemplos_de_entradas" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Exemplos_de_entradas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Exemplos de entradas</div>
			</a>
			
			<ul id="toc-Exemplos_de_entradas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Permissões_padrão_do_arquivo_sudoers" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Permiss%C3%B5es_padr%C3%A3o_do_arquivo_sudoers">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Permissões padrão do arquivo sudoers</div>
			</a>
			
			<ul id="toc-Permissões_padrão_do_arquivo_sudoers-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dicas_e_truques" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Dicas_e_truques">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Dicas e truques</div>
		</a>
		
			<button aria-controls="toc-Dicas_e_truques-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dicas e truques subsection</span>
			</button>
		
		<ul id="toc-Dicas_e_truques-sublist" class="vector-toc-list">
			<li id="toc-Desabilitar_o_tempo_de_solicitação_da_senha" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desabilitar_o_tempo_de_solicita%C3%A7%C3%A3o_da_senha">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Desabilitar o tempo de <i>solicitação</i> da senha</div>
			</a>
			
			<ul id="toc-Desabilitar_o_tempo_de_solicitação_da_senha-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Adicionar_toque_no_terminal_na_solicitação_de_senha" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Adicionar_toque_no_terminal_na_solicita%C3%A7%C3%A3o_de_senha">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Adicionar toque no terminal na solicitação de senha</div>
			</a>
			
			<ul id="toc-Adicionar_toque_no_terminal_na_solicitação_de_senha-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Utilizando_aliases" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Utilizando_aliases">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Utilizando aliases</div>
			</a>
			
			<ul id="toc-Utilizando_aliases-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desabilitar_sudo_por_terminal" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desabilitar_sudo_por_terminal">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Desabilitar sudo por terminal</div>
			</a>
			
			<ul id="toc-Desabilitar_sudo_por_terminal-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reduzir_o_número_de_vezes_que_você_tem_que_digitar_a_senha" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reduzir_o_n%C3%BAmero_de_vezes_que_voc%C3%AA_tem_que_digitar_a_senha">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>Reduzir o número de vezes que você tem que digitar a senha</div>
			</a>
			
			<ul id="toc-Reduzir_o_número_de_vezes_que_você_tem_que_digitar_a_senha-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Variáveis_de_ambiente" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Vari%C3%A1veis_de_ambiente">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>Variáveis de ambiente</div>
			</a>
			
			<ul id="toc-Variáveis_de_ambiente-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Senha_do_root" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Senha_do_root">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7</span>Senha do root</div>
			</a>
			
			<ul id="toc-Senha_do_root-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desabilitar_o_login_do_root" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desabilitar_o_login_do_root">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8</span>Desabilitar o login do root</div>
			</a>
			
			<ul id="toc-Desabilitar_o_login_do_root-sublist" class="vector-toc-list">
				<li id="toc-kdesu" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#kdesu">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8.1</span>kdesu</div>
			</a>
			
			<ul id="toc-kdesu-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Exemplo_de_como_aumentar_a_segurança_com_sudo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Exemplo_de_como_aumentar_a_seguran%C3%A7a_com_sudo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9</span>Exemplo de como aumentar a segurança com sudo</div>
			</a>
			
			<ul id="toc-Exemplo_de_como_aumentar_a_segurança_com_sudo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configurar_o_sudo_usando_arquivos_presentes_no_/etc/sudoers.d" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configurar_o_sudo_usando_arquivos_presentes_no_/etc/sudoers.d">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.10</span>Configurar o sudo usando arquivos presentes no /etc/sudoers.d</div>
			</a>
			
			<ul id="toc-Configurar_o_sudo_usando_arquivos_presentes_no_/etc/sudoers.d-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Editando_arquivos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Editando_arquivos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.11</span>Editando arquivos</div>
			</a>
			
			<ul id="toc-Editando_arquivos-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Habilitar_insultos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Habilitar_insultos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.12</span>Habilitar insultos</div>
			</a>
			
			<ul id="toc-Habilitar_insultos-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Resolução_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Resolu%C3%A7%C3%A3o_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Resolução de problemas</div>
		</a>
		
			<button aria-controls="toc-Resolução_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Resolução de problemas subsection</span>
			</button>
		
		<ul id="toc-Resolução_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-Problema_do_SSH_sem_TTY" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problema_do_SSH_sem_TTY">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Problema do SSH sem TTY</div>
			</a>
			
			<ul id="toc-Problema_do_SSH_sem_TTY-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Umask_permissivo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Umask_permissivo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Umask permissivo</div>
			</a>
			
			<ul id="toc-Umask_permissivo-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Sudo (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 8 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-8" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">8 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/sudo" title="sudo – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Sudo.html" title="Sudo – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Sudo.html" title="Sudo – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Sudo.html" title="Sudo – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Sudo" title="Sudo – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Sudo.html" title="Sudo – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-uk mw-list-item"><a href="../uk/Sudo.html" title="Sudo – українська" lang="uk" hreflang="uk" class="interlanguage-link-target"><span>Українська</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Sudo" title="Sudo – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Sudo.html" title="Sudo">Sudo</a>. Data da última tradução: 2020-06-04. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Sudo&amp;diff=0&amp;oldid=618195">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../pt/Users_and_groups.html" class="mw-redirect" title="Usuários e grupos">Usuários e grupos</a></li>
<li><a href="../en/Su.html" title="Su">su</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.sudo.ws/sudo/">Sudo</a> possibilita que um adminitrador do sistema dê autoridade a certos usuários —ou grupos de usuários— de executar comandos como root ou outro usuário enquanto fornece uma trilha de auditoria dos comandos e seus argumentos.
</p>
<p>Sudo é uma alternativa ao <a href="../en/Su.html" title="Su">su</a> para executar comandos como root. Diferente do <a href="../en/Su.html" title="Su">su</a>, que lança um shell root que faz todos os próximos comandos terem acesso root, sudo garante escalação de privilégio temporária para um único comando. Ao habilitar privilégios root somente quando necessário, o uso do sudo reduz a probabilidade que um erro de digitação ou bug no comando arruine o sistema.
</p>
<p>Sudo também pode ser usado para executar comandos como outros usuários; adicionalmente, sudo faz log de todos os comandos e tentativas de acesso fracassadas para auditoria de segurança.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sudo">sudo</a></span>.
</p>
<h2><span class="mw-headline" id="Uso">Uso</span></h2>
<p>Para começar a usar <code>sudo</code> como um usuário sem privilégios, é necessário configurá-lo apropriadamente. Veja <a href="#Configura%C3%A7%C3%A3o">#Configuração</a>.
</p>
<p>Para usar <i>sudo</i>, simplesmente prefixe o comando e seus argumentos com <code>sudo</code> e um espaço:
</p>
<pre>$ sudo <i>comando</i>
</pre>
<p>Por exemplo, para usar pacman:
</p>
<pre>$ sudo pacman -Syu
</pre>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8">sudo(8)</a></span> para mais informações.
</p>
<h2>
<span id="Configura.C3.A7.C3.A3o"></span><span class="mw-headline" id="Configuração">Configuração</span>
</h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-view-fullscreen.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs expansion.</b></p>
<div>
<b>Reason:</b> Criar uma introdução discutindo <code>Defaults</code>, talvez com uma tabela que lista configurações comuns (Discuss in <a href="../en/Talk:Sudo.html" title="Talk:Sudo">talk:sudo</a>)</div>
</div>
<h3><span class="mw-headline" id="Estrutura_do_Defaults">Estrutura do Defaults</span></h3>
<p>O site do autor tem uma <a rel="nofollow" class="external text" href="https://www.sudo.ws/sudo/sudoers.man.html#x5355444f455253204f5054494f4e53">lista de todas as opções</a> (inglês) que podem ser usadas com o comando <code>Defaults</code> no arquivo <code>/etc/sudoers</code>.
</p>
<p>Veja <a rel="nofollow" class="external autonumber" href="https://gist.github.com/AladW/7eca9799b9ea624eca31">[1]</a> para uma lista de opções (parseada da versão 1.8.7 do código fonte) em um formato otimizado para o <code>sudoers</code>.
</p>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> para mais informações, como configurar o tempo antes de pedir novamente a senha.
</p>
<h3>
<span id="Ver_as_configura.C3.A7.C3.B5es_atuais"></span><span class="mw-headline" id="Ver_as_configurações_atuais">Ver as configurações atuais</span>
</h3>
<p>Execute <code>sudo -ll</code> para mostrar a configuração atual do sudo, ou <code>sudo -lU <i>usuário</i></code> para a configuração específica de um usuário.
</p>
<h3><span class="mw-headline" id="Usando_visudo">Usando visudo</span></h3>
<p>O arquivo de configuração do sudo é o <code>/etc/sudoers</code>. Ele deve <b>sempre</b> ser editado com o comando <span class="plainlinks archwiki-template-man" title="$ man 8 visudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/visudo.8">visudo(8)</a></span>. <code>visudo</code> trava o arquivo <code>sudoers</code>, salva as modificações para um arquivo temporário e verifica se o arquivo foi configurado corretamente antes de copiá-las para o <code>/etc/sudoers</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> 
<ul>
<li>É imperativo que <code>sudoers</code> não tenha erros de sintaxe! Qualquer erro inutiliza o sudo. <b>Sempre</b> edite ele com <code>visudo</code> para evitar erros.</li>
<li>Do <span class="plainlinks archwiki-template-man" title="$ man 8 visudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/visudo.8">visudo(8)</a></span> (traduzido): <i>Note que isto pode ter um buraco na segurança considerando que o usuário pode executar qualquer programa ao simplesmente definir as váriaveis de ambiente VISUAL ou EDITOR.</i>
</li>
</ul>
</div>
<p>O editor padrão do visudo é o <code>vi</code>. O sudo do repositório core é compilado com <code>--with-env-editor</code> por padrão e possibilita o uso das váriaveis <code>VISUAL</code> e <code>EDITOR</code>. <code>EDITOR</code> não é usada quando <code>VISUAL</code> está definida.
</p>
<p>Para usar nano como o editor do <b>visudo</b> durante o shell atual execute <code>export EDITOR=nano</code>; para usar um editor diferente somente uma vez simplesmente defina a váriavel antes de executar o <b>visudo</b>:
</p>
<pre># EDITOR=nano visudo
</pre>
<p>Alternativamente você pode editar uma cópia do arquivo <code>/etc/sudoers</code> e verificá-lo com <code>visudo -c -f <i>/cópia/do/sudoers</i></code>. Isto pode ser útil caso você queira evitar a trava do arquivo com visudo.
</p>
<p>Para mudar o editor permanentemente, veja <a href="../pt/Environment_variables.html#Por_usu%C3%A1rio" class="mw-redirect" title="Variáveis de ambiente">Variáveis de ambiente#Por usuário</a>. Para mudar o editor permanentemente no sistema todo somente para o <code>visudo</code>, adicione o seguinte para o <code>/etc/sudoers</code> (assumindo que <code>nano</code> é o editor escolhido):
</p>
<pre># Reseta o ambiente para o padrão
Defaults      env_reset
# Define EDITOR para o nano, e não permite que o visudo use EDITOR/VISUAL.
Defaults      editor=/usr/bin/nano, !env_editor
</pre>
<h3><span class="mw-headline" id="Exemplos_de_entradas">Exemplos de entradas</span></h3>
<p>Para permitir um usuário à ganhar todos os privilégios root quando precedido com o comando <code>sudo</code>, adicione a seguinte linha:
</p>
<pre>NOME_DO_USUÁRIO   ALL=(ALL) ALL
</pre>
<p>Para permitir que um usuário execute todos os comandos como qualquer usuário mas somente na máquina com o nome <code>NOME_DA_MÁQUINA</code> (hostname):
</p>
<pre>NOME_DO_USUÁRIO   NOME_DA_MÁQUINA=(ALL) ALL
</pre>
<p>Para permitir que membros do grupo <code>wheel</code> usem o sudo:
</p>
<pre>%wheel      ALL=(ALL) ALL
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Quando criar novos administradores, é geralmente desejável habilitar acesso ao sudo pelo grupo <code>wheel</code> e <a href="../pt/Users_and_groups.html#Outros_exemplos_de_gerenciamento_de_usu%C3%A1rio" class="mw-redirect" title="Usuários e grupos">adicionar o usuário nele</a>, considerando que o <a href="../en/Polkit.html#Administrator_identities" title="Polkit">Polkit</a> por padrão trata os membros do grupo <code>wheel</code> como administradores. Se o usuário não é membro do <code>wheel</code>, programas usando Polkit pode pedir autentificação pela senha do root ao invês de pedir a do usuário.</div>
<p>Para desabilitar a solicitação de senha para o usuário <code>NOME_DO_USUÁRIO</code>:
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Isto vai deixar qualquer processo em execução do seu usuário executar o sudo sem pedir permissão.</div>
<pre>Defaults:NOME_DO_USUÁRIO      !authenticate
</pre>
<p>Para habilitar explicitamente comandos definidos somente pelo usuário <code>NOME_DO_USUÁRIO</code> na máquina <code>NOME_DA_MÁQUINA</code>:
</p>
<pre>NOME_DO_USUÁRIO NOME_DA_MÁQUINA=/usr/bin/halt,/usr/bin/poweroff,/usr/bin/reboot,/usr/bin/pacman -Syu
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> A opção mais customizada deve ir para o fim do arquivo, já que as linhas posteriores sobrescrevem as anteriores. Particularmente uma linha deve estar depois da linha do <code>%wheel</code> se seu usuário está nesse grupo.</div>
<p>Para habilitar explicitamente comandos definido somente para o usuário <code>NOME_DO_USUÁRIO</code> na máquina <code>NOME_DA_MÁQUINA</code> sem senha:
</p>
<pre>NOME_DO_USUÁRIO NOME_DA_MÁQUINA= NOPASSWD: /usr/bin/halt,/usr/bin/poweroff,/usr/bin/reboot,/usr/bin/pacman -Syu
</pre>
<p>Um exemplo detalhado do <code>sudoers</code> está disponível em <code>/usr/share/doc/sudo/examples/sudoers</code>. De outro modo, veja <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> para informações detalhadas.
</p>
<h3>
<span id="Permiss.C3.B5es_padr.C3.A3o_do_arquivo_sudoers"></span><span class="mw-headline" id="Permissões_padrão_do_arquivo_sudoers">Permissões padrão do arquivo sudoers</span>
</h3>
<p>O dono e grupo para o arquivo <code>sudoers</code> devem ser ambos 0. As permissões do arquivo devem ser definidas para 0440. Estas permissões são definidas por padrão, mas se você acidentalmente mudá-las, elas devem ser mudadas de volta imediatamente ou sudo vai dar erro.
</p>
<pre># chown -c root:root /etc/sudoers
# chmod -c 0440 /etc/sudoers
</pre>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3>
<span id="Desabilitar_o_tempo_de_solicita.C3.A7.C3.A3o_da_senha"></span><span class="mw-headline" id="Desabilitar_o_tempo_de_solicitação_da_senha">Desabilitar o tempo de <i>solicitação</i> da senha</span>
</h3>
<p>Um incômodo comum é um processo com grande tempo de execução que é executado em segundo plano com permissões normais e as eleva somente quando necessário. Isto leva a solicitação da senha não ser notada e esgotar o tempo dela, fazendo com que o processo morra e o trabalho feito seja perdido, ou no melhor caso, salvo em cache. O conselho comum é habilitar o sudo sem senha, ou extender o tempo que o sudo se lembra da senha. Ambos tem implicações negativas de segurança. O tempo de <b>solicitação</b> pode ser desabilitado e considerando que isto não serve qualquer próposito de maior segurança, esta deve ser a solução aqui:
</p>
<pre>Defaults passwd_timeout=0
</pre>
<h3>
<span id="Adicionar_toque_no_terminal_na_solicita.C3.A7.C3.A3o_de_senha"></span><span class="mw-headline" id="Adicionar_toque_no_terminal_na_solicitação_de_senha">Adicionar toque no terminal na solicitação de senha</span>
</h3>
<p>Para chamar atenção na solicitação de senha do sudo em um terminal no segundo plano, usuários podem simplesmente fazé-lo tocar um caractere bell
</p>
<pre>Defaults passprompt="^G[sudo] password for %p: "
</pre>
<p>Note que ^G é um caractere bell literal. E.x. no vim, insira usando a sequência ^V ^G.
</p>
<h3><span class="mw-headline" id="Utilizando_aliases">Utilizando aliases</span></h3>
<p>Se você usa muitas aliases, você pode ter notado que elas não são levadas a conta root quando o sudo é usado. No entanto, tem uma maneira fácil de fazê-los funcionar. Simplesmente adicione o seguinte para seu <code>~/.bashrc</code> ou <code>/etc/bash.bashrc</code>:
</p>
<pre>alias sudo='sudo '
</pre>
<h3><span class="mw-headline" id="Desabilitar_sudo_por_terminal">Desabilitar sudo por terminal</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Isto vai deixar qualquer processo usar sua sessão sudo.</div>
<p>Se você está incomodado pelo padrão do sudo em solicitar a senha toda vez que você abre um novo terminal, defina <code>timestamp_type</code> para <code>global</code>:
</p>
<pre>Defaults timestamp_type=global
</pre>
<h3>
<span id="Reduzir_o_n.C3.BAmero_de_vezes_que_voc.C3.AA_tem_que_digitar_a_senha"></span><span class="mw-headline" id="Reduzir_o_número_de_vezes_que_você_tem_que_digitar_a_senha">Reduzir o número de vezes que você tem que digitar a senha</span>
</h3>
<p>Se você está incomodado em ter que entrar com sua senha a cada 5 minutos (padrão), você pode mudar isto ao definir um valor maior para <code>timestamp_timeout</code> (em minutos):
</p>
<pre>Defaults timestamp_timeout=10
</pre>
<p>Se você está usando vários comandos sudo em sequência, é mais lógico atualizar o tempo de solicitação da senha toda vez que você usa o sudo do que aumentar <code>timestamp_timeout</code>. Essa atualização pode ser feita com <code>sudo -v</code> (onde <code>sudo -K</code> revoca imediatamente).
</p>
<p>Você pode querer automatizar isto ao adicionar o seguinte para seu <code>.bashrc</code>:
</p>
<pre>alias sudo='sudo -v; sudo '
</pre>
<p>É também possível usar uma função bash; para mais detalhes veja <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/584725/expand-certain-aliases-from-within-sudo-bash-function">stackexchange</a>.
</p>
<h3>
<span id="Vari.C3.A1veis_de_ambiente"></span><span class="mw-headline" id="Variáveis_de_ambiente">Variáveis de ambiente</span>
</h3>
<p>Se você tem várias variáveis de ambiente, ou você exporta suas configurações de proxy com <code>export http_proxy="..."</code>, quando você usar o sudo estas variáveis não vão ser passadas para a conta root a menos que você o execute com a opção <code>-E</code>.
</p>
<pre>$ sudo -E pacman -Syu
</pre>
<p>A maneira recomendada de preservar as variáveis de ambiente é adicioná-las ao <code>env_keep</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults env_keep += "ftp_proxy http_proxy https_proxy no_proxy"
</pre>
<h3><span class="mw-headline" id="Senha_do_root">Senha do root</span></h3>
<p>Usuários podem configurar o sudo para pedir a senha do root ao invês da senha do usuário ao adicionar <code>targetpw</code> (usuário alvo, o padrão é o root) ou <code>rootpw</code> para a linha Defaults em <code>/etc/sudoers</code>:
</p>
<pre>Defaults targetpw
</pre>
<p>Para evitar a exposição da sua senha root para os usuários, você pode restringir isto para um grupo específico:
</p>
<pre>Defaults:%wheel targetpw
%wheel ALL=(ALL) ALL
</pre>
<h3><span class="mw-headline" id="Desabilitar_o_login_do_root">Desabilitar o login do root</span></h3>
<p>Usuários podem desejar desabilitar o login do root. Sem o root, atacantes devem primeiro supor o nome do usuário configurado como um sudoer e também a senha dele. Veja por exemplo <a href="../en/OpenSSH.html#Deny" title="OpenSSH">OpenSSH#Deny</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> 
<ul>
<li>Tenha cuidado, você pode se trancar fora do sistema ao desabilitar o login do root. Sudo não é automaticamente instalado e sua configuração padrão não permite acesso ao root sem senha e nem com a senha do seu usuário. Garanta que um usuário está configurado apropriadamente como um sudoer <i>antes</i> de desabilitar a conta root!</li>
<li>Se você modificou seu arquivo sudoers para usar rootpw por padrão, então não desabilite o login do root com qualquer um dos comandos a seguir!</li>
<li>Se você já está trancado fora do sistema, veja <a href="../pt/Reset_lost_root_password.html" class="mw-redirect" title="Recuperação de senha">Recuperação de senha</a> para ajuda.</li>
</ul>
</div>
<p>A conta pode ser bloqueada com <code>passwd</code>:
</p>
<pre># passwd -l root
</pre>
<p>Um comando similar desbloqueia o root.
</p>
<pre>$ sudo passwd -u root
</pre>
<p>Alternativamente, edite <code>/etc/shadow</code> e troque a senha criptografada do root com "!":
</p>
<pre>root:!:12345::::::
</pre>
<p>Para habilitar o login do root novamente:
</p>
<pre>$ sudo passwd root
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Para ter um shell root interativo, até mesmo depois de desabilitar a conta <i>root</i>, use <code>sudo -i</code>.</div>
<h4><span class="mw-headline" id="kdesu">kdesu</span></h4>
<p>kdesu pode ser usado no <a href="../pt/KDE.html" title="KDE (Português)">KDE</a> para lançar programas gráficos com privilégios root. É possível que por padrão kdesu vai tentar usar su até mesmo se a conta root está desabilitada. Felizmente, você pode configurar o kdesu para usar sudo ao invês do su. Crie/edite o arquivo <code>~/.config/kdesurc</code>:
</p>
<pre>[super-user-command]
super-user-command=sudo
</pre>
<p>ou use o seguinte comando:
</p>
<pre>$ kwriteconfig5 --file kdesurc --group super-user-command --key super-user-command sudo
</pre>
<h3>
<span id="Exemplo_de_como_aumentar_a_seguran.C3.A7a_com_sudo"></span><span class="mw-headline" id="Exemplo_de_como_aumentar_a_segurança_com_sudo">Exemplo de como aumentar a segurança com sudo</span>
</h3>
<p>Vamos supor que você criou 3 usuários: admin, devel, e joe. O usuário "admin" é usado para journalctl, systemctl, mount, kill, e iptables; "devel" é usado para instalar pacotes, e editar arquivos de configuração; e "joe" é o usuário que você entra no sistema. Para permitir que "joe" reinicie e desligue o sistema e use netctl, devemos fazer o seguinte:
</p>
<p>Edite <code>/etc/pam.d/su</code> e <code>/etc/pam.d/su-l</code>
Faça necessário que o usuário esteja no grupo wheel, mas não coloque ninguém nele.
</p>
<pre>#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
#auth           sufficient      pam_wheel.so trust use_uid
# Uncomment the following line to require a user to be in the "wheel" group.
auth            required        pam_wheel.so use_uid
auth            required        pam_unix.so
account         required        pam_unix.so
session         required        pam_unix.so
</pre>
<p>Limite o login pelo SSH para o grupo 'ssh'. Somente "joe" vai ser parte desse grupo.
</p>
<pre>groupadd -r ssh
gpasswd -a joe ssh
echo 'AllowGroups ssh' &gt;&gt; /etc/ssh/sshd_config
</pre>
<p><a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">Reinicie</a> <code>sshd.service</code>.
</p>
<p>Adicione usuários para outros grupos.
</p>
<pre>for g in power network ;do ;gpasswd -a joe $g ;done
for g in network power storage ;do ;gpasswd -a admin $g ;done
</pre>
<p>Defina permissões nos arquivos de configuração para que devel possa editá-los.
</p>
<pre>chown -R devel:root /etc/{http,openvpn,cups,zsh,vim,screenrc}
</pre>
<pre>Cmnd_Alias  POWER       =   /usr/bin/shutdown -h now, /usr/bin/halt, /usr/bin/poweroff, /usr/bin/reboot
Cmnd_Alias  STORAGE     =   /usr/bin/mount -o nosuid\,nodev\,noexec, /usr/bin/umount
Cmnd_Alias  SYSTEMD     =   /usr/bin/journalctl, /usr/bin/systemctl
Cmnd_Alias  KILL        =   /usr/bin/kill, /usr/bin/killall
Cmnd_Alias  PKGMAN      =   /usr/bin/pacman
Cmnd_Alias  NETWORK     =   /usr/bin/netctl
Cmnd_Alias  FIREWALL    =   /usr/bin/iptables, /usr/bin/ip6tables
Cmnd_Alias  SHELL       =   /usr/bin/zsh, /usr/bin/bash
%power      ALL         =   (root)  NOPASSWD: POWER
%network    ALL         =   (root)  NETWORK
%storage    ALL         =   (root)  STORAGE
root        ALL         =   (ALL)   ALL
admin       ALL         =   (root)  SYSTEMD, KILL, FIREWALL
devel	    ALL         =   (root)  PKGMAN
joe	    ALL         =   (devel) SHELL, (admin) SHELL 
</pre>
<p>Com esta configuração, você quase nunca vai precisar logar como o usuário root.
</p>
<p>"joe" pode se conectar ao WiFi de sua casa.
</p>
<pre>sudo netctl start home
sudo poweroff
</pre>
<p>"joe" não pode usar netctl como qualquer outro usuário.
</p>
<pre>sudo -u admin -- netctl start home
</pre>
<p>Quando "joe" precisa usar journalctl ou matar processos ele pode trocar para outro usuário.
</p>
<pre>sudo -i -u devel
sudo -i -u admin
</pre>
<p>Mas "joe" não pode trocar para o usuário root.
</p>
<pre>sudo -i -u root
</pre>
<p>Se "joe" quer iniciar uma sessão do gnu-screen como admin ele pode fazer isto:
</p>
<pre>sudo -i -u admin
admin% chown admin:tty `echo $TTY`
admin% screen
</pre>
<h3>
<span id="Configurar_o_sudo_usando_arquivos_presentes_no_.2Fetc.2Fsudoers.d"></span><span class="mw-headline" id="Configurar_o_sudo_usando_arquivos_presentes_no_/etc/sudoers.d">Configurar o sudo usando arquivos presentes no /etc/sudoers.d</span>
</h3>
<p><i>sudo</i> lê os arquivos contidos no diretório <code>/etc/sudoers.d/</code>. Isto significa que ao invês de editar <code>/etc/sudoers</code>, você pode mudar as configurações em arquivos separados e jogá-los nesse diretório. Isto tem duas vantagens:
</p>
<ul>
<li>Não há necessidade de editar um arquivo <code>sudoers.pacnew</code>;</li>
<li>Se existe um problema com uma nova entrada, você pode remover o respectivo arquivo ao invês de editar o <code>/etc/sudoers</code> (mas veja o aviso abaixo).</li>
</ul>
<p>O formato para entradas nestes arquivos é o mesmo do <code>/etc/sudoers</code>. Para editá-los diretamente, use <code>visudo -f /etc/sudoers.d/<i>algum_arquivo</i></code>. Veja a seção "Including other files from within sudoers" do <span class="plainlinks archwiki-template-man" title="$ man 5 sudoers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudoers.5">sudoers(5)</a></span> para detalhes.
</p>
<p>Os arquivos no diretório <code>/etc/sudoers.d/</code> são lidos em ordem lexicográfica, nomes do arquivos contendo <code>.</code> ou <code>~</code> são ignorados. Para evitar problemas de ordenamento, o nome dos arquivos devem começar com dois dígitos, e.x. <code>01_foo</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> A ordem das entradas nos arquivos é importante: tenha certeza que as declarações não se sobrescrevem.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Os arquivos no <code>/etc/sudoers.d/</code> são tão frágeis quanto o próprio <code>/etc/sudoers</code>: qualquer arquivo com formatação errada vai impedir o funcionamento do <code>sudo</code>. Então, pelo mesmo motivo, é recomendado fortemente o uso do <code>visudo</code>
</div>
<h3><span class="mw-headline" id="Editando_arquivos">Editando arquivos</span></h3>
<p><code>sudo -e</code> ou <code>sudoedit</code> possibilita que você modifique um arquivo como outro usuário enquanto ainda executa o editor de texto com seu usuário.
</p>
<p>Isto é especialmente útil para editar arquivos como root sem elevar o privilégios do seu editor de texto, para mais detalhes leia <span class="plainlinks archwiki-template-man" title="$ man 8 sudo"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sudo.8#e">sudo(8) § e</a></span>.
</p>
<p>Note que você pode definir o editor para qualquer programa, por exemplo, pode usar o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=meld">meld</a></span> para gerenciar arquivos <a href="../pt/Pacman/Pacnew_and_Pacsave.html" class="mw-redirect" title="Pacman/Pacnew e Pacsave">pacnew</a>:
</p>
<pre>$ SUDO_EDITOR=meld sudo -e /etc/<i>file</i>{,.pacnew<i>}</i>
</pre>
<h3><span class="mw-headline" id="Habilitar_insultos">Habilitar insultos</span></h3>
<p>Usuários podem habilitar insultos ao adicionar a seguinte linha no arquivo sudoers com <code>visudo</code>.
</p>
<p>Ao entrar com uma senha incorreta, a mensagem <code>Sorry, try again.</code> (ou <code>Sinto muito, tente novamente.</code>) será trocada por uma com insultos engraçados.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sudoers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Defaults insults</pre>
<h2>
<span id="Resolu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Resolução_de_problemas">Resolução de problemas</span>
</h2>
<h3><span class="mw-headline" id="Problema_do_SSH_sem_TTY">Problema do SSH sem TTY</span></h3>
<p>SSH não aloca uma tty por padrão quando executa um comando remotamente. Sem um tty alocado, o sudo não pode impedir a senha de ser exibida. Você pode executar o ssh com a opção <code>-t</code> para forçá-lo a alocar uma tty.
</p>
<p>A opção <code>requiretty</code> do <code>Defaults</code> somente permite que o usuário execute sudo se ele tiver uma tty.
</p>
<pre># Disable "ssh hostname sudo &lt;cmd&gt;", because it will show the password in clear text. You have to run "ssh -t hostname sudo &lt;cmd&gt;".
#
#Defaults    requiretty
</pre>
<h3><span class="mw-headline" id="Umask_permissivo">Umask permissivo</span></h3>
<p>Sudo vai unir o valor <a href="../pt/Umask.html" title="Umask (Português)">umask</a> do usuário com o seu próprio (que por padrão é 0022). Isto evita que o sudo crie arquivos com permissões mais abertas que o umask do usuário permite. Enquanto isto é um padrão válido se nenhum umask customizado é usado, isto pode levar a situações onde um utilitário executado com sudo crie arquivo com permissões diferentes das que seriam criadas se fosse executado diretamente pelo root. Se erros aparecerem devido a isto, sudo fornece uma forma de  consertar o umask, até mesmo se o umask desejado é mais permissivo que o especificado do usuário. Adicionar isto (usando <code>visudo</code>) vai sobrescrever o comportamento padrão do sudo:
</p>
<pre>Defaults umask = 0022
Defaults umask_override
</pre>
<p>Isto define o umask do sudo para o padrão do root (0022) e sobrescreve o comportamento padrão, sempre usando o umask indicado não importando como o umask do usuário está definido.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Security.html" title="Category:Security (Português)">Security (Português)</a></li>
<li><a href="../pt/Category:Commands.html" title="Category:Commands (Português)">Commands (Português)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Sudo_(Portugu%C3%AAs)&amp;oldid=799367">https://wiki.archlinux.org/index.php?title=Sudo_(Português)&amp;oldid=799367</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 February 2024, at 18:09.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
