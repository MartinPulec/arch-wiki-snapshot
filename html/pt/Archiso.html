<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Archiso (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Archiso_Português rootpage-Archiso_Português skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Instalação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Instala%C3%A7%C3%A3o">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Instalação</span>
			</div>
		</a>
		
		<ul id="toc-Instalação-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Preparar_um_perfil_personalizado" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Preparar_um_perfil_personalizado">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Preparar um perfil personalizado</span>
			</div>
		</a>
		
			<button aria-controls="toc-Preparar_um_perfil_personalizado-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Preparar um perfil personalizado subsection</span>
			</button>
		
		<ul id="toc-Preparar_um_perfil_personalizado-sublist" class="vector-toc-list">
			<li id="toc-Estrutura_do_perfil" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Estrutura_do_perfil">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Estrutura do perfil</span>
				</div>
			</a>
			
			<ul id="toc-Estrutura_do_perfil-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Selecionando_pacotes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Selecionando_pacotes">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Selecionando pacotes</span>
				</div>
			</a>
			
			<ul id="toc-Selecionando_pacotes-sublist" class="vector-toc-list">
				<li id="toc-Repositório_local_personalizado" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Reposit%C3%B3rio_local_personalizado">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Repositório local personalizado</span>
				</div>
			</a>
			
			<ul id="toc-Repositório_local_personalizado-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Pacotes_de_multilib" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Pacotes_de_multilib">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Pacotes de multilib</span>
				</div>
			</a>
			
			<ul id="toc-Pacotes_de_multilib-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Adicionando_arquivos_para_a_imagem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Adicionando_arquivos_para_a_imagem">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Adicionando arquivos para a imagem</span>
				</div>
			</a>
			
			<ul id="toc-Adicionando_arquivos_para_a_imagem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Kernel" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Kernel">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Kernel</span>
				</div>
			</a>
			
			<ul id="toc-Kernel-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Boot_loader" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Boot_loader">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>Boot loader</span>
				</div>
			</a>
			
			<ul id="toc-Boot_loader-sublist" class="vector-toc-list">
				<li id="toc-UEFI_Secure_Boot" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#UEFI_Secure_Boot">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.1</span>
					<span>UEFI Secure Boot</span>
				</div>
			</a>
			
			<ul id="toc-UEFI_Secure_Boot-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-systemd_units" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#systemd_units">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.6</span>
					<span>systemd units</span>
				</div>
			</a>
			
			<ul id="toc-systemd_units-sublist" class="vector-toc-list">
				<li id="toc-Gerir_o_Login" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gerir_o_Login">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.6.1</span>
					<span>Gerir o Login</span>
				</div>
			</a>
			
			<ul id="toc-Gerir_o_Login-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mudança_de_login_automático" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Mudan%C3%A7a_de_login_autom%C3%A1tico">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.6.2</span>
					<span>Mudança de login automático</span>
				</div>
			</a>
			
			<ul id="toc-Mudança_de_login_automático-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usuários_e_senhas" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Usu%C3%A1rios_e_senhas">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.6.3</span>
					<span>Usuários e senhas</span>
				</div>
			</a>
			
			<ul id="toc-Usuários_e_senhas-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Construir_a_ISO" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Construir_a_ISO">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Construir a ISO</span>
			</div>
		</a>
		
			<button aria-controls="toc-Construir_a_ISO-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Construir a ISO subsection</span>
			</button>
		
		<ul id="toc-Construir_a_ISO-sublist" class="vector-toc-list">
			<li id="toc-Remoção_do_diretório_de_trabalho" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Remo%C3%A7%C3%A3o_do_diret%C3%B3rio_de_trabalho">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Remoção do diretório de trabalho</span>
				</div>
			</a>
			
			<ul id="toc-Remoção_do_diretório_de_trabalho-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-usando_a_ISO" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#usando_a_ISO">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>usando a ISO</span>
			</div>
		</a>
		
		<ul id="toc-usando_a_ISO-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Teste_a_ISO_no_QEMU" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Teste_a_ISO_no_QEMU">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Teste a ISO no QEMU</span>
			</div>
		</a>
		
		<ul id="toc-Teste_a_ISO_no_QEMU-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Dicas_e_truques" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Dicas_e_truques">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Dicas e truques</span>
			</div>
		</a>
		
			<button aria-controls="toc-Dicas_e_truques-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dicas e truques subsection</span>
			</button>
		
		<ul id="toc-Dicas_e_truques-sublist" class="vector-toc-list">
			<li id="toc-Criptografia" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Criptografia">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>Criptografia</span>
				</div>
			</a>
			
			<ul id="toc-Criptografia-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Preparar_uma_ISO_para_uma_instalação_via_SSH" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Preparar_uma_ISO_para_uma_instala%C3%A7%C3%A3o_via_SSH">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>Preparar uma ISO para uma instalação via SSH</span>
				</div>
			</a>
			
			<ul id="toc-Preparar_uma_ISO_para_uma_instalação_via_SSH-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Conectar-se_automaticamente_a_uma_rede_Wi-Fi_usando_iwd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Conectar-se_automaticamente_a_uma_rede_Wi-Fi_usando_iwd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3</span>
					<span>Conectar-se automaticamente a uma rede Wi-Fi usando iwd</span>
				</div>
			</a>
			
			<ul id="toc-Conectar-se_automaticamente_a_uma_rede_Wi-Fi_usando_iwd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ajustando_o_tamanho_da_partição_da_root_na_mosca" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ajustando_o_tamanho_da_parti%C3%A7%C3%A3o_da_root_na_mosca">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4</span>
					<span>Ajustando o tamanho da partição da root na mosca</span>
				</div>
			</a>
			
			<ul id="toc-Ajustando_o_tamanho_da_partição_da_root_na_mosca-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solução_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Solu%C3%A7%C3%A3o_de_problemas">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">7</span>
				<span>Solução de problemas</span>
			</div>
		</a>
		
			<button aria-controls="toc-Solução_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solução de problemas subsection</span>
			</button>
		
		<ul id="toc-Solução_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-O_window_manager_congela" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#O_window_manager_congela">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">7.1</span>
					<span>O window manager congela</span>
				</div>
			</a>
			
			<ul id="toc-O_window_manager_congela-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">8</span>
				<span>Veja também</span>
			</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Archiso (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Archiso.html" title="Archiso – English" lang="en" hreflang="en" data-title="Archiso" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Archiso.html" title="Archiso – español" lang="es" hreflang="es" data-title="Archiso" data-language-autonym="Español" data-language-local-name="español" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Archiso.html" title="Archiso – français" lang="fr" hreflang="fr" data-title="Archiso" data-language-autonym="Français" data-language-local-name="français" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/archiso" title="archiso – 日本語" lang="ja" hreflang="ja" data-title="archiso" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Archiso.html" title="Archiso – русский" lang="ru" hreflang="ru" data-title="Archiso" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/archiso" title="archiso – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="archiso" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Archiso.html" title="Archiso">Archiso</a>. Data da última tradução: 2021-12-25. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Archiso&amp;diff=0&amp;oldid=586811">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../en/Archiso.html" class="mw-redirect" title="Remastering the Install ISO">Remasterizando a ISO de Instalação</a></li>
<li><a href="../pt/Preboot_Execution_Environment.html" class="mw-redirect" title="Archiso como servidor pxe">Archiso como servidor pxe</a></li>
<li><a href="../pt/Offline_installation.html" class="mw-redirect" title="Instalação offline">Instalação offline</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso">Archiso</a> é uma ferramenta altamente customizável para construir imagens ISO do Arch Linux live CD/USB. As <a rel="nofollow" class="external text" href="https://archlinux.org/download/">imagens oficiais</a> são construídas com Archiso. Ele pode ser usado como base para sistemas de resgate, instaladores de linux ou outros sistemas. Este artigo wiki explica como instalar o Archiso, e como configurá-lo para controlar aspectos da imagem ISO resultante, tais como pacotes e arquivos incluídos. Requisitos técnicos e etapas de construção podem ser encontrados na <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/tree/master/docs">documentação oficial do projeto</a>. O Archiso é implementado com uma série de scripts bash. O componente central do Archiso é o comando <i>mkarchiso</i>. Suas opções estão documentadas em <i>mkarchiso -h</i> e não são cobertas aqui.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> O pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=archiso">archiso</a></span> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/archiso-git/">archiso-git</a></span><sup><small>AUR</small></sup>.
</p>
<h2><span class="mw-headline" id="Preparar_um_perfil_personalizado">Preparar um perfil personalizado</span></h2>
<p>Archiso vem com dois perfis, <b>releng</b> e <b>baseline</b>.
</p>
<ul>
<li>
<b>releng</b> é utilizado para criar a ISO oficial de instalação mensal. Ela pode ser usada como ponto de partida para a criação de uma imagem ISO personalizada.</li>
<li>
<b>baseline</b> é uma configuração minimalista, que inclui apenas os pacotes mínimos necessários para arrancar o ambiente vivo a partir do meio.</li>
</ul>
<p>Para construir uma versão não modificada dos perfis, pule para <a href="#Construir_a_ISO">#Construir a ISO</a>. Caso contrário, se você desejar adaptar ou personalizar um dos perfis enviados pela Archiso, copie-o de <code>/usr/share/archiso/configs/<i>profile-name</i>/</code> para um diretório gravável com um nome à sua escolha. Por exemplo:
</p>
<pre>$ cp -r /usr/share/archiso/configs/<i>profile</i>/ <i>archlive</i>
</pre>
<p>Proceder às seções seguintes para personalizar e construir o perfil personalizado.
</p>
<h3><span class="mw-headline" id="Estrutura_do_perfil">Estrutura do perfil</span></h3>
<p>Um perfil archiso contém uma configuração que define a imagem ISO resultante. A estrutura do perfil é documentada em <code>/usr/share/doc/archiso/README.profile.rst</code><a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/docs/README.profile.rst">[1]</a>.
</p>
<h3><span class="mw-headline" id="Selecionando_pacotes">Selecionando pacotes</span></h3>
<p>Edite <code>packages.x86_64</code> para selecionar quais pacotes devem ser instalados na imagem live do sistema, listando os pacotes linha por linha.
</p>
<h4>
<span id="Reposit.C3.B3rio_local_personalizado"></span><span class="mw-headline" id="Repositório_local_personalizado">Repositório local personalizado</span>
</h4>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[<i>customrepo</i>]
SigLevel = Optional TrustAll
Server = file://<i>/path/to/customrepo</i>
...</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> O ordenamento dentro de <code>pacman.conf</code> importa. Para dar prioridade máxima ao seu repositório personalizado, coloque-o acima das outras entradas do repositório.</div>
<h4><span class="mw-headline" id="Pacotes_de_multilib">Pacotes de multilib</span></h4>
<p>Para instalar pacotes do repositório <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a>, simplesmente descomente esse repositório em <code>pacman.conf</code>.
</p>
<h3><span class="mw-headline" id="Adicionando_arquivos_para_a_imagem">Adicionando arquivos para a imagem</span></h3>
<p>O diretório airootfs é usado como ponto de partida para o <a href="https://en.wikipedia.org/wiki/Root_directory" class="extiw" title="wikipedia:Root directory">diretório root</a> (<code>/</code>) do sistema live da imagem. Todo o seu conteúdo será copiado para o diretório de trabalho antes que os pacotes sejam instalados.
</p>
<p>Coloque quaisquer arquivos e/ou diretórios personalizados no local desejado sob <code>airootfs/</code>. Por exemplo, se você tiver um conjunto de scripts iptables em seu sistema atual que você deseja utilizar em sua imagem live, copie-os tal como:
</p>
<pre>$ cp -r /etc/iptables <i>archlive</i>/airootfs/etc
</pre>
<p>Da mesma forma, é necessário algum cuidado com arquivos de configuração especiais que residem em algum lugar abaixo da hierarquia. Partes em falta da estrutura do diretório podem ser simplesmente criadas com <span class="plainlinks archwiki-template-man" title="$ man 1 mkdir"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkdir.1">mkdir(1)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Para adicionar um arquivo ao diretório home do usuário instalador, coloque-o em <code><i>archlive</i>/airootfs/root/</code>. Para adicionar um arquivo a todos os outros diretórios residenciais dos usuários, coloque-o em <code><i>archlive</i>/airootfs/etc/skel/</code>.</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Arquivos personalizados que entrem em conflito com aqueles fornecidos por pacotes serão sobrescritos, a menos que um pacote os especifique como <a href="../en/Pacman/Pacnew_and_Pacsave.html#Package_backup_files" title="Pacman/Pacnew and Pacsave">arquivos de backup</a>.</div>
<p>Por padrão, <a href="../en/File_permissions_and_attributes.html" class="mw-redirect" title="Permissions">permissions</a> será <code>644</code> para arquivos e <code>755</code> para diretórios. Todos eles serão de propriedade do usuário root.  Para definir diferentes permissões ou propriedade para arquivos e/ou pastas específicos, use a matriz associativa <code>file_permissions</code> em <code>profiledef.sh</code>. Veja <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/master/docs/README.profile.rst">README.profile.rst</a> para detalhes.
</p>
<h3><span class="mw-headline" id="Kernel">Kernel</span></h3>
<p>Embora ambos os perfis incluídos no Archiso tenham apenas <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>, as ISOs podem ser feitas para incluir outros ou mesmo múltiplos <a href="../en/Kernel.html" class="mw-redirect" title="Kernels">kernels</a>.
</p>
<p>Primeiro, edite <code>packages.x86_64</code> para incluir os nomes dos pacotes do kernel que você deseja. Quando <i>mkarchiso</i> for executado, incluirá todos os arquivos <code><i>work_dir</i>/airootfs/boot/vmlinuz-*</code> e <code><i>work_dir</i>/boot/initramfs-*.img</code> no arquivo ISO (e adicionalmente na imagem FAT usada para inicialização da UEFI).
</p>
<p><a href="../en/Mkinitcpio.html" title="Mkinitcpio">mkinitcpio</a> predefinidos por padrão construirão imagens de initramas de recurso. Para uma ISO, a imagem principal do initramfs não incluiria normalmente o gancho <code>autodetect</code> tornando assim desnecessária uma imagem adicional de fallback. Para evitar a criação de uma imagem de fallback initramfs, para que ela não tome espaço ou retarde o processo de construção, coloque um preset personalizado em <code><i>archlive</i>/airootfs/etc/mkinitcpio.d/<i>pkgbase</i>.preset</code> por exemplo, para <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/mkinitcpio.d/linux-lts.preset</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PRESETS=('archiso')

ALL_kver='/boot/vmlinuz-linux-lts'
ALL_config='/etc/mkinitcpio.conf'

archiso_image="/boot/initramfs-linux-lts.img"</pre>
<p>Finalmente criar <a href="#Boot_loader">configuração do boot loader</a> para permitir a inicialização do(s) kernel(s).
</p>
<h3><span class="mw-headline" id="Boot_loader">Boot loader</span></h3>
<p>Archiso suporta <a href="../en/Syslinux.html" title="Syslinux">syslinux</a> para a inicialização da BIOS e <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> para a inicialização da UEFI.
Consulte os artigos dos boot loaders para obter informações sobre sua sintaxe de configuração.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>O perfil <b>releng</b> por padrão é construído em uma ISO que suporta tanto BIOS quanto UEFI boot quando gravado em um disco óptico usando El Torito, ou quando gravado em um disco rígido (ou unidade flash USB, ou similar) usando <a rel="nofollow" class="external text" href="https://wiki.syslinux.org/wiki/index.php?title=Isohybrid">Isohybrid</a>.</li>
<li>Devido à natureza modular do isolinux, você é capaz de usar muitos addons uma vez que todos os arquivos <i>.c32</i> são copiados e estão disponíveis para você. Dê uma olhada no <a rel="nofollow" class="external text" href="https://wiki.syslinux.org/wiki/index.php/SYSLINUX">site oficial do syslinux</a> e no <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/tree/master/configs/releng/syslinux">archiso git repo</a>. Usando esses addons, é possível tornar os menus visualmente atraentes e complexos. Veja <a rel="nofollow" class="external autonumber" href="https://wiki.syslinux.org/wiki/index.php/Comboot/menu.c32">[2]</a>.</li>
</ul>
</div>
<p>mkarchiso espera que a configuração <a href="../en/Systemd-boot.html" title="Systemd-boot">systemd-boot</a> esteja no diretório <code>efiboot</code>, e a configuração <a href="../en/Syslinux.html" title="Syslinux">syslinux</a> nos diretórios <code>syslinux</code> e <code>isolinux</code>.
</p>
<h4><span class="mw-headline" id="UEFI_Secure_Boot">UEFI Secure Boot</span></h4>
<p>Se você quiser tornar seu Archiso inicializável em um ambiente UEFI Secure Boot habilitado, você deve usar um boot loader assinado. Você pode seguir as instruções em <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#Booting_an_installation_medium" class="mw-redirect" title="Secure Boot">Secure Boot#Booting an installation medium</a>.
</p>
<h3><span class="mw-headline" id="systemd_units">systemd units</span></h3>
<p>Para <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> systemd services/sockets/timers para o ambiente live você precisa criar manualmente os links simbólicos, assim como o <code>systemctl enable</code> o faz.
</p>
<p>Por exemplo, para ativar <code>gpm.service</code>, que contém <code>WantedBy=multi-user.target</code>, execute:
</p>
<pre>$ mkdir -p <i>archlive</i>/airootfs/etc/systemd/system/multi-user.target.wants
$ ln -s /usr/lib/systemd/system/gpm.service <i>archlive</i>/airootfs/etc/systemd/system/multi-user.target.wants/
</pre>
<p>Os links simbólicos necessários podem ser enconrados lendo a unidade do systemd, ou se você tem o serviço instalado, <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enabling">enabling</a> e observando a saída do systemctl.
</p>
<h4><span class="mw-headline" id="Gerir_o_Login">Gerir o Login</span></h4>
<p>O início do X na inicialização é feito habilitando o serviço <a href="../en/Systemd.html" title="Systemd">systemd</a> de seu login manager.Se você não souber qual <i>.service</i> habilita, você pode facilmente descobrir caso esteja usando o mesmo programa no sistema em que você constrói sua ISO. Basta usar:
</p>
<pre>$ ls -l /etc/systemd/system/display-manager.service
</pre>
<p>Agora crie o mesmo link simbólico em <code><i>archlive</i>/airootfs/etc/systemd/system/</code>. Para LXDM:
</p>
<pre>$ ln -s /usr/lib/systemd/system/lxdm.service <i>archlive</i>/airootfs/etc/systemd/system/display-manager.service
</pre>
<p>Isto permitirá o LXDM no início do sistema em seu sistema live.
</p>
<h4>
<span id="Mudan.C3.A7a_de_login_autom.C3.A1tico"></span><span class="mw-headline" id="Mudança_de_login_automático">Mudança de login automático</span>
</h4>
<p>A configuração para o login automático da getty está localizada em <code>airootfs/etc/systemd/system/getty@tty1.service.d/autologin.conf</code>.
</p>
<p>Você pode modificar este arquivo para mudar o usuário do login automático:
</p>
<pre>[Service]
ExecStart=
ExecStart=-/sbin/agetty --autologin <i><b>username</b></i> --noclear %I 38400 linux
</pre>
<p>Ou removê-lo completamente para desativar o login automático.
</p>
<h4>
<span id="Usu.C3.A1rios_e_senhas"></span><span class="mw-headline" id="Usuários_e_senhas">Usuários e senhas</span>
</h4>
<p>Para criar um <a href="../pt/Users_and_groups.html" class="mw-redirect" title="Usuário">usuário</a> que estará disponível no ambiente live, você deve editar manualmente <code><i>archlive</i>/airootfs/etc/passwd</code>, <code><i>archlive</i>/airootfs/etc/shadow</code>, <code><i>archlive</i>/airootfs/etc/group</code> e <code><i>archlive</i>/airootfs/etc/gshadow</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Se esses arquivos existirem, eles devem conter o usuário root e o grupo.</div>
<p>Por exemplo, para adicionar um usuário <code>archie</code>. Adicioná-los ao <code><i>archlive</i>/airootfs/etc/passwd</code> seguindo a sintaxe <span class="plainlinks archwiki-template-man" title="$ man 5 passwd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/passwd.5">passwd(5)</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/passwd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root:x:0:0:root:/root:/usr/bin/zsh
archie:x:1000:1000::/home/archie:/usr/bin/zsh
</pre>
<p>Gerar um hash de senha com <code>openssl passwd -6</code> e adicioná-lo ao <code><i>archlive</i>/airootfs/etc/shadow</code> seguindo a sintaxe de <span class="plainlinks archwiki-template-man" title="$ man 5 shadow"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/shadow.5">shadow(5)</a></span>. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/shadow</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root::14871::::::
archie:$6$randomsalt$cij4/pJREFQV/NgAgh9YyBIoCRRNq2jp5l8lbnE5aLggJnzIRmNVlogAg8N6hEEecLwXHtMQIl2NX2HlDqhCU1:14871::::::</pre>
<p>Adicionar o grupo do usuário e os grupos dos quais farão parte ao <code><i>archlive</i>/airootfs/etc/group</code> de acordo com <span class="plainlinks archwiki-template-man" title="$ man 5 group"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/group.5">group(5)</a></span>. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/group</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root:x:0:root
adm:x:4:archie
wheel:x:10:archie
uucp:x:14:archie
archie:x:1000:</pre>
<p>Criar o apropriado <code><i>archlive</i>/airootfs/etc/gshadow</code> de acordo com <span class="plainlinks archwiki-template-man" title="$ man 5 gshadow"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/gshadow.5">gshadow(5)</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/airootfs/etc/gshadow</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">root:!*::root
archie:!*::</pre>
<p>Certifique-se de que <code>/etc/shadow</code> e <code>/etc/gshadow</code> tenham as permissões corretas:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"><i>archlive</i>/profiledef.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
file_permissions=(
  ...
  ["/etc/shadow"]="0:0:0400"
  ["/etc/gshadow"]="0:0:0400"
)</pre>
<p>Após a instalação do pacote, <i>mkarchiso</i> criará todos os diretórios home especificados para os usuários listados em <code><i>archlive</i>/airootfs/etc/passwd</code> e copiará <code><i>work_directory</i>/x86_64/airootfs/etc/skel/*</code> para eles. Os arquivos copiados terão a propriedade apropriada do usuário e do grupo.
</p>
<h2><span class="mw-headline" id="Construir_a_ISO">Construir a ISO</span></h2>
<p>Construa uma ISO que você pode então gravar em CD ou USB, executando:
</p>
<pre># mkarchiso -v -w <i>/path/to/work_dir</i> -o <i>/path/to/out_dir</i> <i>/path/to/profile/</i>
</pre>
<ul>
<li>
<code>-w</code> especifica o diretório de trabalho. Se a opção não for especificada, por padrão será <code>work</code> no diretório atual.</li>
<li>
<code>-o</code> especifica o diretório onde a imagem ISO construída será colocada. Se a opção não for especificada, por padrão será <code>out</code> no diretório atual.</li>
<li>Deve-se notar que o arquivo de perfil <code>profiledef.sh</code> não pode ser especificado ao executar mkarchiso, apenas o caminho para o arquivo</li>
</ul>
<p>Substitua <code><i>/path/to/profile/</i></code> pelo caminho para seu perfil personalizado, ou por <code>/usr/share/archiso/configs/releng/</code> se você estiver construindo um perfil não modificado.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Se a memória permitir, é preferível colocar o diretório de trabalho em <a href="../en/Tmpfs.html" title="Tmpfs">tmpfs</a>. Ex.:
<pre># mkarchiso -v -w /tmp/archiso-tmp <i>/path/to/profile/</i>
</pre>
</div>
<p>Quando executado, o script irá baixar e instalar os pacotes que você especificou para <code><i>work_directory</i>/x86_64/airootfs</code>, criar o kernel e as imagens init, aplicar suas customizações e finalmente construir a ISO no diretório de saída.
</p>
<h3>
<span id="Remo.C3.A7.C3.A3o_do_diret.C3.B3rio_de_trabalho"></span><span class="mw-headline" id="Remoção_do_diretório_de_trabalho">Remoção do diretório de trabalho</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Se <i>mkarchiso</i> for interrompido, execute <span class="plainlinks archwiki-template-man" title="$ man 8 findmnt"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/findmnt.8">findmnt(8)</a></span> para ter certeza de que não há amarras de montagem antes de apagá-lo - caso contrário, <b>você pode perder dados</b> (por exemplo, um dispositivo externo montado em <code>/run/media/<i>user</i>/<i>label</i></code>} fica preso dentro de <code>work/x86_64/airootfs/run/media/<i>user</i>/<i>label</i></code> durante o processo de construção).</div>
<p>Os arquivos temporários são copiados para o diretório de trabalho. Após a construção bem sucedida da ISO, o diretório de trabalho e seu conteúdo podem ser excluídos. Por exemplo:
</p>
<pre># rm -rf <i>/path/to/work_dir</i>
</pre>
<h2><span class="mw-headline" id="usando_a_ISO">usando a ISO</span></h2>
<p>Ver <a href="../pt/Installation_guide.html#Preparar_uma_m%C3%ADdia_de_instala%C3%A7%C3%A3o" title="Installation guide (Português)">Installation guide (Português)#Preparar uma mídia de instalação</a> para várias opções.
</p>
<h2><span class="mw-headline" id="Teste_a_ISO_no_QEMU">Teste a ISO no QEMU</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> as dependências opcionais <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=qemu-desktop">qemu-desktop</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=edk2-ovmf">edk2-ovmf</a></span>.
</p>
<p>Use o script de conveniência <code>run_archiso</code> para executar uma imagem construída usando <a href="../en/QEMU.html" title="QEMU">QEMU</a>.
</p>
<pre>$ run_archiso -i <i>/path/to/</i>archlinux-<i>yyyy.mm.dd</i>-x86_64.iso
</pre>
<p>A máquina virtual também pode ser executada utilizando a emulação UEFI:
</p>
<pre>$ run_archiso -u -i <i>/path/to/</i>archlinux-<i>yyyy.mm.dd</i>-x86_64.iso
</pre>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3><span class="mw-headline" id="Criptografia">Criptografia</span></h3>
<p>Para gerar uma imagem encriptada, você pode usar o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/archiso-encryption/">archiso-encryption</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">link quebrado</a>: package not found]</sup>.
</p>
<p>Para construir o perfil incluído <code>releng</code>, voce tem que configurar um repositório personalizado contendo o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cryptsetup-archiso/">cryptsetup-archiso</a></span><sup><small>AUR</small></sup><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">link quebrado</a>: package not found]</sup>.
</p>
<p>Se você tiver problemas para encontrar o dispositivo raiz em tempo de execução, ajuste o <code>encrypt</code> gancho do pacote acima.
</p>
<h3>
<span id="Preparar_uma_ISO_para_uma_instala.C3.A7.C3.A3o_via_SSH"></span><span class="mw-headline" id="Preparar_uma_ISO_para_uma_instalação_via_SSH">Preparar uma ISO para uma instalação via SSH</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Desde <code>archlinux-2021.02.01-x86_64.iso</code>, <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/tree/bd2b861aa39167e4fc658a354071b95fbd050c0f/configs/releng/airootfs/etc/systemd/system/cloud-init.target.wants">cloud-init support</a> é fornecido, e <code>sshd.service</code> é <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/blob/bd2b861aa39167e4fc658a354071b95fbd050c0f/configs/releng/airootfs/etc/systemd/system/multi-user.target.wants/sshd.service">habilitado por padrão</a>.</div>
<p>Para <a href="../pt/Install_Arch_Linux_via_SSH.html" title="Install Arch Linux via SSH (Português)">Install Arch Linux via SSH (Português)</a> sem qualquer interação com o sistema, uma chave pública SSH deve ser colocada em <code>authorized_keys</code>.
</p>
<p>A adição da chave SSH pode ser feita manualmente (explicada aqui), ou <a href="../en/Install_Arch_Linux_via_SSH.html#Installation_on_a_headless_server" title="Install Arch Linux via SSH">por cloud-init</a>.
</p>
<p>Para adicionar a chave manualmente, primeiro <a href="#Preparar_um_perfil_personalizado">copiar o perfil releng do Archiso</a> a um diretório gravável. O seguinte exemplo usa <code>archlive</code>.
</p>
<pre>$ cp -r /usr/share/archiso/configs/<i>profile/</i> archlive
</pre>
<p>Criar um diretório <code>.ssh</code> no diretório home do usuário que será usado para fazer o login. O exemplo a seguir será a utilização do usuário root.
</p>
<pre>$ mkdir archlive/airootfs/root/.ssh
</pre>
<p>Adicionar a(s) chave(s) pública(s) SSH, que será(ão) usada(s) para fazer o login, a <code>authorized_keys</code>:
</p>
<pre>$ cat ~/.ssh/<i>key1</i>.pub &gt;&gt; archlive/airootfs/root/.ssh/authorized_keys
$ cat ~/.ssh/<i>key2</i>.pub &gt;&gt; archlive/airootfs/root/.ssh/authorized_keys
</pre>
<p>Definir as <a href="../pt/File_permissions_and_attributes.html" class="mw-redirect" title="Permissões">permissões</a> corretas e a propriedade para o diretório <code>.ssh</code> e o arquivo <code>authorized_keys</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">archlive/profiledef.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
file_permissions=(
  ...
  ["/root"]="0:0:0750"
  ["/root/.ssh"]="0:0:0700"
  ["/root/.ssh/authorized_keys"]="0:0:0600"
)</pre>
<p>Finalmente <a href="#Construir_a_ISO">construa a ISO</a>. Ao inicializar a ISO, <a href="../en/OpenSSH.html" title="OpenSSH">OpenSSH</a> começará e será possível fazer o log in usando a(s) chave(s) privada(s) SSH correspondente(s).
</p>
<p><br>
</p>
<h3><span class="mw-headline" id="Conectar-se_automaticamente_a_uma_rede_Wi-Fi_usando_iwd">Conectar-se automaticamente a uma rede Wi-Fi usando iwd</span></h3>
<p>Crie <code>/var/lib/iwd/</code> dentro do diretório <code>airootfs</code> do perfil e defina as permissões corretas::
</p>
<pre>$ mkdir -p <i>archlive</i>/airootfs/var/lib/iwd
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">archlive/profiledef.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
file_permissions=(
  ...
  ["/var/lib/iwd"]="0:0:0700"
)</pre>
<p>Siga as instruções em <a href="../pt/Iwd.html#Configura%C3%A7%C3%A3o_de_rede" title="Iwd (Português)">iwd (Português)#Configuração de rede</a> e <span class="plainlinks archwiki-template-man" title="$ man 5 iwd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/iwd.network.5">iwd.network(5)</a></span> para criar um arquivo de configuração de rede para sua rede Wi-Fi.
</p>
<p>Salve o arquivo de configuração dentro de <code><i>archlive</i>/airootfs/var/lib/iwd/</code>.
</p>
<h3>
<span id="Ajustando_o_tamanho_da_parti.C3.A7.C3.A3o_da_root_na_mosca"></span><span class="mw-headline" id="Ajustando_o_tamanho_da_partição_da_root_na_mosca">Ajustando o tamanho da partição da root na mosca</span>
</h3>
<p>Se você receber a seguinte mensagem de erro ao baixar arquivos ou instalar pacotes no ambiente ISO inicializado, você pode precisar desligar e ajustar o tamanho da partição root enquanto inicializa o Archiso novamente.
</p>
<pre>error: partition / too full: 63256 blocks needed, 61450 blocks free
error: not enough free disk space
error: failed to commit transaction (not enough free disk space) 
Errors occurred: no packages were upgraded.
</pre>
<p>Para ajustar o tamanho da partição root no sistema Arch Linux live, pressione a tecla <code>Tab</code> para editar os parâmetros do kernel.
Anexe <code>spaço_de_vaca=2G</code> no final para obter o tamanho 2G para a partição root.
Pressione <code>Enter</code> para continuar a inicialização no sistema live.
Você pode verificar o tamanho dos sistemas de arquivos executando:
</p>
<pre>$ df -h
</pre>
<p>Você também pode ajustar o tamanho da partição root na hora, executando este comando:
</p>
<pre># mount -o remount,size=2G /run/archiso/cowspace
</pre>
<p>Veja mais parâmetros de inicialização <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/mkinitcpio/mkinitcpio-archiso/blob/master/docs/README.bootparams">aqui</a>
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3><span class="mw-headline" id="O_window_manager_congela">O window manager congela</span></h3>
<p>Se você quiser usar um <a href="../en/Window_manager.html" title="Window manager">window manager</a> no Live CD, então você deve adicionar os necessários e os corretos <a href="../en/Xorg.html#Driver_installation" class="mw-redirect" title="Video drivers">video drivers</a>, ou a WM pode congelar no carregamento.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso">Página do projeto Archiso</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/archiso/-/tree/master/docs">Documentação oficial</a></li>
<li><a rel="nofollow" class="external text" href="https://lists.archlinux.org/mailman3/lists/arch-releng.lists.archlinux.org/">Lista de discussão Arch Linux Release Engineering</a></li>
<li><a rel="nofollow" class="external text" href="ircs://irc.libera.chat/archlinux-releng">#archlinux-releng — Arch Linux Release Engineering Canal IRC</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/pierres/archiso-manager">archiso-manager — a ferramenta utilizada para a construção das ISOs mensais oficiais</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Live_Arch_systems.html" title="Category:Live Arch systems (Português)">Live Arch systems (Português)</a></li>
<li><a href="../pt/Category:Installation_process.html" title="Category:Installation process (Português)">Installation process (Português)</a></li>
<li><a href="../pt/Category:Arch_projects.html" title="Category:Arch projects (Português)">Arch projects (Português)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Archiso_(Portugu%C3%AAs)&amp;oldid=808939">https://wiki.archlinux.org/index.php?title=Archiso_(Português)&amp;oldid=808939</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 21 May 2024, at 15:44.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
