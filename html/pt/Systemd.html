<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>systemd (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Systemd_Português rootpage-Systemd_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Uso_básico_do_systemctl" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Uso_b%C3%A1sico_do_systemctl">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Uso básico do systemctl</div>
		</a>
		
			<button aria-controls="toc-Uso_básico_do_systemctl-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Uso básico do systemctl subsection</span>
			</button>
		
		<ul id="toc-Uso_básico_do_systemctl-sublist" class="vector-toc-list">
			<li id="toc-Usando_units" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_units">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Usando units</div>
			</a>
			
			<ul id="toc-Usando_units-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Gerenciamento_de_energia" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Gerenciamento_de_energia">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Gerenciamento de energia</div>
			</a>
			
			<ul id="toc-Gerenciamento_de_energia-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Escrevendo_arquivos_unit" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Escrevendo_arquivos_unit">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Escrevendo arquivos unit</div>
		</a>
		
			<button aria-controls="toc-Escrevendo_arquivos_unit-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Escrevendo arquivos unit subsection</span>
			</button>
		
		<ul id="toc-Escrevendo_arquivos_unit-sublist" class="vector-toc-list">
			<li id="toc-Manuseando_dependências" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Manuseando_depend%C3%AAncias">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Manuseando dependências</div>
			</a>
			
			<ul id="toc-Manuseando_dependências-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tipos_de_serviços" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tipos_de_servi%C3%A7os">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Tipos de serviços</div>
			</a>
			
			<ul id="toc-Tipos_de_serviços-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Editando_units_fornecidas" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Editando_units_fornecidas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Editando units fornecidas</div>
			</a>
			
			<ul id="toc-Editando_units_fornecidas-sublist" class="vector-toc-list">
				<li id="toc-Arquivos_unit_de_substituição" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Arquivos_unit_de_substitui%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.1</span>Arquivos unit de substituição</div>
			</a>
			
			<ul id="toc-Arquivos_unit_de_substituição-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Arquivos_drop-in" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Arquivos_drop-in">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.2</span>Arquivos drop-in</div>
			</a>
			
			<ul id="toc-Arquivos_drop-in-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Reverter_para_versão_do_vendor" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Reverter_para_vers%C3%A3o_do_vendor">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.3</span>Reverter para versão do vendor</div>
			</a>
			
			<ul id="toc-Reverter_para_versão_do_vendor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exemplos" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Exemplos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.4</span>Exemplos</div>
			</a>
			
			<ul id="toc-Exemplos-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Targets" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Targets">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Targets</div>
		</a>
		
			<button aria-controls="toc-Targets-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Targets subsection</span>
			</button>
		
		<ul id="toc-Targets-sublist" class="vector-toc-list">
			<li id="toc-Obter_targets_atuais" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Obter_targets_atuais">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Obter targets atuais</div>
			</a>
			
			<ul id="toc-Obter_targets_atuais-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Criar_target_personalizado" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Criar_target_personalizado">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Criar target personalizado</div>
			</a>
			
			<ul id="toc-Criar_target_personalizado-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mapeamento_entre_níveis_do_SysV_e_targets_do_systemd" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mapeamento_entre_n%C3%ADveis_do_SysV_e_targets_do_systemd">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Mapeamento entre níveis do SysV e targets do systemd</div>
			</a>
			
			<ul id="toc-Mapeamento_entre_níveis_do_SysV_e_targets_do_systemd-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alterar_target_atual" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Alterar_target_atual">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Alterar target atual</div>
			</a>
			
			<ul id="toc-Alterar_target_atual-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alterar_target_padrão_para_inicializar" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Alterar_target_padr%C3%A3o_para_inicializar">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Alterar target padrão para inicializar</div>
			</a>
			
			<ul id="toc-Alterar_target_padrão_para_inicializar-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ordem_de_target_padrão" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ordem_de_target_padr%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Ordem de target padrão</div>
			</a>
			
			<ul id="toc-Ordem_de_target_padrão-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Componentes_do_systemd" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Componentes_do_systemd">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Componentes do systemd</div>
		</a>
		
			<button aria-controls="toc-Componentes_do_systemd-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Componentes do systemd subsection</span>
			</button>
		
		<ul id="toc-Componentes_do_systemd-sublist" class="vector-toc-list">
			<li id="toc-systemd.mount_-_montagem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#systemd.mount_-_montagem">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>systemd.mount - montagem</div>
			</a>
			
			<ul id="toc-systemd.mount_-_montagem-sublist" class="vector-toc-list">
				<li id="toc-Montagem_automática_de_partição_GPT" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Montagem_autom%C3%A1tica_de_parti%C3%A7%C3%A3o_GPT">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.1</span>Montagem automática de partição GPT</div>
			</a>
			
			<ul id="toc-Montagem_automática_de_partição_GPT-sublist" class="vector-toc-list">
				<li id="toc-/var" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#/var">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1.1.1</span>/var</div>
			</a>
			
			<ul id="toc-/var-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-systemd-sysvcompat" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#systemd-sysvcompat">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>systemd-sysvcompat</div>
			</a>
			
			<ul id="toc-systemd-sysvcompat-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-systemd-tmpfiles_-_arquivos_temporários" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#systemd-tmpfiles_-_arquivos_tempor%C3%A1rios">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>systemd-tmpfiles - arquivos temporários</div>
			</a>
			
			<ul id="toc-systemd-tmpfiles_-_arquivos_temporários-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dicas_e_truques" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Dicas_e_truques">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Dicas e truques</div>
		</a>
		
			<button aria-controls="toc-Dicas_e_truques-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dicas e truques subsection</span>
			</button>
		
		<ul id="toc-Dicas_e_truques-sublist" class="vector-toc-list">
			<li id="toc-Ferramentas_de_configuração_GUI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ferramentas_de_configura%C3%A7%C3%A3o_GUI">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Ferramentas de configuração GUI</div>
			</a>
			
			<ul id="toc-Ferramentas_de_configuração_GUI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Executando_serviços_após_a_rede_estar_ativa" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Executando_servi%C3%A7os_ap%C3%B3s_a_rede_estar_ativa">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>Executando serviços após a rede estar ativa</div>
			</a>
			
			<ul id="toc-Executando_serviços_após_a_rede_estar_ativa-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Habilitar_units_instaladas_por_padrão" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Habilitar_units_instaladas_por_padr%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.3</span>Habilitar units instaladas por padrão</div>
			</a>
			
			<ul id="toc-Habilitar_units_instaladas_por_padrão-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_ambientes_de_aplicativos_em_sandbox" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_ambientes_de_aplicativos_em_sandbox">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.4</span>Usando ambientes de aplicativos em <i>sandbox</i>
</div>
			</a>
			
			<ul id="toc-Usando_ambientes_de_aplicativos_em_sandbox-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Notificação_sobre_serviços_com_falha" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Notifica%C3%A7%C3%A3o_sobre_servi%C3%A7os_com_falha">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.5</span>Notificação sobre serviços com falha</div>
			</a>
			
			<ul id="toc-Notificação_sobre_serviços_com_falha-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desliga_automaticamente_um_HDD_externo_ao_desligar" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desliga_automaticamente_um_HDD_externo_ao_desligar">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.6</span>Desliga automaticamente um HDD externo ao desligar</div>
			</a>
			
			<ul id="toc-Desliga_automaticamente_um_HDD_externo_ao_desligar-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solução_de_problemas" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Solu%C3%A7%C3%A3o_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Solução de problemas</div>
		</a>
		
			<button aria-controls="toc-Solução_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solução de problemas subsection</span>
			</button>
		
		<ul id="toc-Solução_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-Investigar_serviços_que_falharam" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Investigar_servi%C3%A7os_que_falharam">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Investigar serviços que falharam</div>
			</a>
			
			<ul id="toc-Investigar_serviços_que_falharam-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Diagnosticar_problemas_de_inicialização" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Diagnosticar_problemas_de_inicializa%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Diagnosticar problemas de inicialização</div>
			</a>
			
			<ul id="toc-Diagnosticar_problemas_de_inicialização-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Diagnosticar_um_serviço" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Diagnosticar_um_servi%C3%A7o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Diagnosticar um serviço</div>
			</a>
			
			<ul id="toc-Diagnosticar_um_serviço-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desligamento/reinicialização_demora_demais" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desligamento/reinicializa%C3%A7%C3%A3o_demora_demais">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Desligamento/reinicialização demora demais</div>
			</a>
			
			<ul id="toc-Desligamento/reinicialização_demora_demais-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Processos_de_curta_duração_não_parecem_registrar_qualquer_saída" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Processos_de_curta_dura%C3%A7%C3%A3o_n%C3%A3o_parecem_registrar_qualquer_sa%C3%ADda">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Processos de curta duração não parecem registrar qualquer saída</div>
			</a>
			
			<ul id="toc-Processos_de_curta_duração_não_parecem_registrar_qualquer_saída-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tempo_de_inicialização_aumentando_com_o_tempo" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tempo_de_inicializa%C3%A7%C3%A3o_aumentando_com_o_tempo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.6</span>Tempo de inicialização aumentando com o tempo</div>
			</a>
			
			<ul id="toc-Tempo_de_inicialização_aumentando_com_o_tempo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-systemd-tmpfiles-setup.service_não_inicia_na_inicialização_do_sistema" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#systemd-tmpfiles-setup.service_n%C3%A3o_inicia_na_inicializa%C3%A7%C3%A3o_do_sistema">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.7</span>systemd-tmpfiles-setup.service não inicia na inicialização do sistema</div>
			</a>
			
			<ul id="toc-systemd-tmpfiles-setup.service_não_inicia_na_inicialização_do_sistema-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desabilitar_modo_de_emergência_em_máquina_remota" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desabilitar_modo_de_emerg%C3%AAncia_em_m%C3%A1quina_remota">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.8</span>Desabilitar modo de emergência em máquina remota</div>
			</a>
			
			<ul id="toc-Desabilitar_modo_de_emergência_em_máquina_remota-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Veja também</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">systemd (Português)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 9 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-9" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">9 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Systemd" title="Systemd – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Systemd.html" title="Systemd – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Systemd.html" title="Systemd – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fi mw-list-item"><a href="../fi/Systemd.html" title="Systemd – suomi" lang="fi" hreflang="fi" class="interlanguage-link-target"><span>Suomi</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Systemd.html" title="Systemd – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-it mw-list-item"><a href="../it/Systemd.html" title="Systemd – italiano" lang="it" hreflang="it" class="interlanguage-link-target"><span>Italiano</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Systemd" title="Systemd – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Systemd.html" title="Systemd – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Systemd" title="Systemd – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Systemd.html" title="Systemd">Systemd</a>. Data da última tradução: 2022-12-31. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Systemd&amp;diff=0&amp;oldid=762117">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../en/Systemd/User.html" title="Systemd/User">systemd/User</a></li>
<li><a href="../pt/Systemd/Timers.html" title="Systemd (Português)/Timers (Português)">systemd/Timers</a></li>
<li><a href="../pt/Systemd/Journal.html" title="Systemd (Português)/Journal (Português)">systemd/Journal</a></li>
<li><a href="../en/Systemd/FAQ.html" class="mw-redirect" title="Systemd FAQ">systemd FAQ</a></li>
<li><a href="../pt/Init.html" title="Init (Português)">init</a></li>
<li><a href="../pt/Daemons.html" title="Daemons (Português)">Daemons</a></li>
<li><a href="../en/Udev.html" title="Udev">udev</a></li>
<li><a href="../pt/Improving_performance/Boot_process.html" class="mw-redirect" title="Melhorando o desempenho/Processo de inicialização">Melhorando o desempenho/Processo de inicialização</a></li>
<li><a href="../pt/Power_management.html#Permitir_usu%C3%A1rios_que_desliguem_o_sistema" title="Power management (Português)">Permitir desligamento por usuários</a></li>
</ul>
</div>
<p>Da <a rel="nofollow" class="external text" href="https://systemd.io/">página web do projeto</a>:
</p>
<dl><dd>
<i>systemd</i> é um conjunto de softwares que fornecem blocos de construção básicos para um sistema Linux. Ele fornece um gerenciador de sistema e serviços que é executado como PID 1 e inicia o resto do sistema. <i>systemd</i> fornece capacidades agressivas de paralelização, usa a ativação de soquetes e <a href="../en/D-Bus.html" title="D-Bus">D-Bus</a> para iniciar serviços, oferece partida sob demanda de daemons, mantém o controle de processos usando <a href="../pt/Cgroups.html" title="Cgroups (Português)">grupos de controle</a> Linux, mantém pontos de montagem e montagem automática e implementa uma elaborada lógica de controle de serviços baseada em dependência transacional. O <i>systemd</i> suporta scripts de inicialização SysV e LSB e funciona como um substituto para o sysvinit. Outras partes incluem um daemon de registro, utilitários para controlar a configuração básica do sistema como hostname, date, locale, mantem uma lista de usuários logados e rodando containers e máquinas virtuais, contas do sistema, diretórios e configurações de tempo de execução e daemons para gerenciar a configuração simples da rede, sincronização de tempo de rede, encaminhamento de log e resolução de nomes.</dd></dl>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Para uma explicação detalhada do porquê Arch migrou para o <i>systemd</i>, consulte <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1149530#p1149530">esta mensagem do fórum internacional</a>.</div>
<meta property="mw:PageProp/toc">
<h2>
<span id="Uso_b.C3.A1sico_do_systemctl"></span><span class="mw-headline" id="Uso_básico_do_systemctl">Uso básico do systemctl</span>
</h2>
<p>O principal comando usado para introspecção e controle <i>systemd</i> é <i>systemctl</i>. Alguns de seus usos são examinando o estado do sistema e gerenciando o sistema e serviços. Consulte <span class="plainlinks archwiki-template-man" title="$ man 1 systemctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemctl.1">systemctl(1)</a></span> para mais detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>Você pode usar todos os comandos de <i>systemctl</i> abaixo com a opção <code>-H <i>usuário</i>@<i>host</i></code> para controlar uma instância de <i>systemd</i> em uma máquina remota. Isso usará <a href="../pt/Secure_Shell.html" class="mw-redirect" title="SSH (Português)">SSH</a> para se conectar uma instância remota <i>systemd</i>.</li>
<li>Usuários de <a href="../pt/KDE.html#Plasma" class="mw-redirect" title="Plasma (Português)">Plasma</a> podem instalar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemdgenie">systemdgenie</a></span> como um frontend gráfico para <i>systemctl</i>. Após a instalação, o módulo será adicionado sob "Sistema".</li>
</ul>
</div>
<h3><span class="mw-headline" id="Usando_units">Usando units</span></h3>
<p>As units geralmente incluem, mas não estão limitadas a, serviços (<i>.service</i>), pontos de montagem (<i>.mount</i>), dispositivos (<i>.device</i>) ou soquetes (<i>.socket</i>).
</p>
<p>Ao utilizar <i>systemctl</i>, geralmente é necessário especificar o nome completo do arquivo unit, incluindo seu sufixo, por exemplo <code>sshd.socket</code>}. No entanto, existem algumas formas curtas de especificar a unit nos seguintes comandos <i>systemctl</i>:
</p>
<ul>
<li>Se você não especificar o sufixo, systemctl presumirá <i>.service</i>. Por exemplo, <code>netctl</code> e <code>netctl.service</code> são equivalentes.</li>
<li>Os pontos de montagem serão automaticamente convertidos para a unit <i>.mount</i> adequada. Por exemplo, especificar <code>/home</code> equivale a <code>home.mount</code>.</li>
<li>Similar aos pontos de montagem, dispositivos são automaticamente convertidos para a unit <i>.device</i> adequada, portanto, especificar <code>/dev/sda2</code> equivale a <code>dev-sda2.device</code>.</li>
</ul>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5">systemd.unit(5)</a></span> para detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Alguns nomes de unit contêm um sinal <code>@</code> (por exemplo, <code>nome@<i>string</i>.service</code>): isso significa que eles são <a rel="nofollow" class="external text" href="https://0pointer.net/blog/projects/instances.html">instâncias</a> de uma unit <i>modelo</i> (em inglês, <i>template</i>), cujo nome real do arquivo não contém a parte <code><i>string</i></code> (por exemplo, <code>nome@.service</code>). <code><i>string</i></code> é chamado de <i>identificador de instância</i> (em inglês, <i>instance identifier</i>) e é semelhante a um argumento que é passado para a unit modelo quando chamado com o comando <i>systemctl</i>: no arquivo unit, ele irá substituir o especificador <code>%i</code>. Para ser mais preciso, <i>antes</i> de tentar instanciar a unit modelo <code>name@.suffix</code>, o <i>systemd</i> procurará, na verdade, uma unit com o nome exato do arquivo <code>name@string.suffix</code>, embora por convenção tal "conflito" aconteça raramente, ou seja, a maioria dos arquivos unit contendo um sinal <code>@</code> são destinados a serem um modelo. Além disso, se uma unit modelo for chamada sem um identificador de instância, ela geralmente falhará (exceto com certos comandos <i>systemctl</i>, como <code>cat</code>).</div>
<p>Os comandos da tabela abaixo operam sobre <b>units do sistema</b>, pois <code>--system</code> é o padrão implícito para <i>systemctl</i>. Em vez disso, para operar em <b>units de usuário</b> (para o <i>usuário chamador</i>), use <a href="../en/Systemd/User.html#How_it_works" class="mw-redirect" title="Systemctl --user">systemctl --user</a> sem privilégios de root. Veja também <a href="../en/Systemd/User.html#Basic_setup" title="Systemd/User">systemd/User#Basic setup</a> para habilitar/desabilitar units de usuário para <i>todos os usuários</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>A maioria dos comandos também funcionam se várias units forem especificadas, veja <span class="plainlinks archwiki-template-man" title="$ man 1 systemctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemctl.1">systemctl(1)</a></span> para obter mais informações.</li>
<li>A opção <code>--now</code> pode ser usada em conjunto com <code>enable</code>, <code>disable</code> e <code>mask</code> para iniciar, parar ou mascarar, respectivamente, <i>imediatamente</i> a unit em vez de após reinicializar.</li>
<li>Um pacote pode oferecer units para diferentes finalidades. Se você acabou de instalar um pacote, <code>pacman -Qql <i>pacote</i> | grep -Fe .service -e .socket</code> pode ser usado para verificar e localizá-las.</li>
</ul>
</div>
<table class="wikitable">
<tbody>
<tr>
<th>Ação</th>
<th>Comando</th>
<th>Nota
</th>
</tr>
<tr>
<th colspan="3">Analisando o status do sistema
</th>
</tr>
<tr>
<td><b>Mostrar status do sistema</b></td>
<td><code>systemctl status</code></td>
<td>
</td>
</tr>
<tr>
<td><b>Lista units em execução</b></td>
<td>
<code>systemctl</code> or<br><code>systemctl list-units</code>
</td>
<td>
</td>
</tr>
<tr>
<td><b>Lista units com falhas</b></td>
<td><code>systemctl --failed</code></td>
<td>
</td>
</tr>
<tr>
<td><b>Listar arquivos de unit<sup>1</sup> instalados</b></td>
<td><code>systemctl list-unit-files</code></td>
<td>
</td>
</tr>
<tr>
<td>
<b>Mostra status do processo</b> para um PID</td>
<td><code>systemctl status <i>pid</i></code></td>
<td>
<a href="../pt/Cgroups.html" title="Cgroups (Português)">parte dos grupos de controle</a> ("cgroups"), memória e pais
</td>
</tr>
<tr>
<th colspan="3">Verificando o status unit
</th>
</tr>
<tr>
<td>
<b>Mostra uma página do manual</b> associada a uma unit</td>
<td><code>systemctl help <i>unit</i></code></td>
<td>como suportado pela unit
</td>
</tr>
<tr>
<td>
<b>Status</b> de uma unit</td>
<td><code>systemctl status <i>unit</i></code></td>
<td>incluindo se está em execução ou não
</td>
</tr>
<tr>
<td>
<b>Checa</b> se uma unit está habilitada</td>
<td><code>systemctl is-enabled <i>unit</i></code></td>
<td>
</td>
</tr>
<tr>
<th colspan="3">Iniciando, reiniciando e recarregando um unit
</th>
</tr>
<tr>
<td>
<b>Iniciar</b> imediatamente uma unit</td>
<td>
<code>systemctl start <i>unit</i></code> como root</td>
<td>
</td>
</tr>
<tr>
<td>
<b>Parar</b> imediatamente uma unit</td>
<td>
<code>systemctl stop <i>unit</i></code> como root</td>
<td>
</td>
</tr>
<tr>
<td>
<b>Reiniciar</b> uma unit</td>
<td>
<code>systemctl restart <i>unit</i></code> como root</td>
<td>
</td>
</tr>
<tr>
<td>
<b>Recarregar</b> uma unit e sua configuração</td>
<td>
<code>systemctl reload <i>unit</i></code> como root</td>
<td>
</td>
</tr>
<tr>
<td><b>Recarregar a configuração<sup>2</sup> do gerenciador do systemd</b></td>
<td>
<code>systemctl daemon-reload</code> como root</td>
<td>procura por units novas ou alteradas
</td>
</tr>
<tr>
<th colspan="3">Habilitando um unit
</th>
</tr>
<tr>
<td>
<b>Habilitar</b> uma unit para iniciá-la automaticamente no boot</td>
<td>
<code>systemctl enable <i>unit</i></code> como root</td>
<td>
</td>
</tr>
<tr>
<td>
<b>Habilitar</b> uma unit para iniciá-la automaticamente no boot e <b>iniciá-la</b> imediatamente</td>
<td>
<code>systemctl enable --now <i>unit</i></code> como root</td>
<td>
</td>
</tr>
<tr>
<td>
<b>Desabilitar</b> uma unit para não iniciar mais no boot</td>
<td>
<code>systemctl disable <i>unit</i></code> como root</td>
<td>
</td>
</tr>
<tr>
<td>
<b>Reabilitar</b> uma unit<sup>3</sup>
</td>
<td>
<code>systemctl reenable <i>unit</i></code> como root</td>
<td>ou seja, desabilita e habilita novamente
</td>
</tr>
<tr>
<th colspan="3">Mascarando um unit
</th>
</tr>
<tr>
<td>
<b>Mascarar</b> uma unit para tonar impossível o seu início<sup>4</sup>
</td>
<td>
<code>systemctl mask <i>unit</i></code> como root</td>
<td>
</td>
</tr>
<tr>
<td>
<b>Desmascarar</b> uma unit</td>
<td>
<code>systemctl unmask} <i>unit</i></code> como root</td>
<td>
</td>
</tr>
</tbody>
</table>
<ol>
<li>Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5#UNIT_FILE_LOAD_PATH">systemd.unit(5) § UNIT FILE LOAD PATH</a></span> para os diretórios onde os arquivos das units disponíveis podem ser encontrados.</li>
<li>Isso não solicita às units alteradas que recarreguem suas próprias configurações (veja <b>Recarregar</b>).</li>
<li>Por exemplo, no caso de sua seção <code>[Install]</code> tenha mudado desde a última vez que foi habilitada.</li>
<li>Tanto manualmente quanto como dependência, o que torna o mascaramento perigoso. Verifique a existência de units mascarados com: <pre>$ systemctl list-unit-files --state=masked</pre>
</li>
</ol>
<h3><span class="mw-headline" id="Gerenciamento_de_energia">Gerenciamento de energia</span></h3>
<p><a href="../en/Polkit.html" title="Polkit">polkit</a> é necessário para o gerenciamento de energia como um usuário sem privilégios. Se você está em uma sessão de usuário local <i>systemd-logind</i> e nenhuma outra sessão está ativa, os seguintes comandos funcionarão sem privilégios de root. Se não (por exemplo, porque outro usuário está conectado em um tty), <i>systemd</i> vai automaticamente pedir a senha de root.
</p>
<table class="wikitable">
<tbody>
<tr>
<th>Ação</th>
<th>Comando
</th>
</tr>
<tr>
<td>Desliga e reinicia o sistema</td>
<td>
<code>systemctl reboot</code>
</td>
</tr>
<tr>
<td>Desliga e encerra o sistema</td>
<td>
<code>systemctl poweroff</code>
</td>
</tr>
<tr>
<td>Suspende o sistema</td>
<td>
<code>systemctl suspend</code>
</td>
</tr>
<tr>
<td>Coloca o sistema em hibernação</td>
<td>
<code>systemctl hibernate</code>
</td>
</tr>
<tr>
<td>Coloca o sistema em estado de suspensão híbrida (ou suspender-para-ambos)</td>
<td>
<code>systemctl hybrid-sleep</code>
</td>
</tr>
</tbody>
</table>
<h2><span class="mw-headline" id="Escrevendo_arquivos_unit">Escrevendo arquivos unit</span></h2>
<p>A sintaxe de arquivos unit do <i>systemd</i> (<span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5">systemd.unit(5)</a></span>) é inspirada nos <a href="../en/Desktop_entries.html" class="mw-redirect" title="Desktop entries (Português)">arquivos .desktop da XDG Desktop Entry Specification </a>, que por sua vez são inspirados nos <a href="https://en.wikipedia.org/wiki/pt:INI_(formato_de_arquivo)" class="extiw" title="wikipedia:pt:INI (formato de arquivo)">arquivos .ini do Microsoft Windows</a>. Os arquivos unit são carregados de vários localizações (para ver a lista completa, execute <code>systemctl show --property=UnitPath</code>), mas os principais são (listados da menor para a mais alta precedência):
</p>
<ul>
<li>
<code>/usr/lib/systemd/system/</code>: units fornecidas por pacotes instalados</li>
<li>
<code>/etc/systemd/system/</code>: units instaladas pelo administrador do sistema</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Os caminhos de carregamento são completamente diferentes quando se está executando <i>systemd</i> em <a href="../en/Systemd/User.html#How_it_works" title="Systemd/User">modo usuário</a>.</li>
<li>Nomes de unit do <i>systemd</i> só podem conter caracteres alfanuméricos, sublinhados e pontos. Todos outros caracteres devem ser substituídos por escapes no estilo C "\x2d" ou deve-se empregar suas semânticas predefinidas ('@', '-'). Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5">systemd.unit(5)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 1 systemd-escape"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-escape.1">systemd-escape(1)</a></span> para mais informações.</li>
</ul>
</div>
<p>Veja as units instaladas por seus pacotes para exemplos, bem como em <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.service.5#EXAMPLES">systemd.service(5) § EXAMPLES</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Comentários prefixados com <code>#</code> também podem ser usados em arquivos units, mas apenas em novas linhas. Não use comentários em fim de linha após parâmetros do <i>systemd</i> ou a unidade não conseguirá ativar.</div>
<h3>
<span id="Manuseando_depend.C3.AAncias"></span><span class="mw-headline" id="Manuseando_dependências">Manuseando dependências</span>
</h3>
<p>Com o <i>systemd</i>, dependências podem ser resolvidas através da concepção de arquivos unit corretamente. O caso mais típico é quando a unit <i>A</i> requer a unit <i>B</i> para ser executada antes da <i>A</i> ser iniciada. Nesse caso, adicione <code>Requires=<i>B</i></code> e <code>After=<i>B</i></code> para a seção <code>[Unit]</code> de <i>A</i>. Se a dependência for opcional, então adicione <code>Wants=<i>B</i></code> e <code>After=<i>B</i></code>. Nota que <code>Wants=</code> e <code>Requires=</code> não implicam <code>After=</code>, significando que se <code>After=</code> não for especificado, as duas units serão iniciada em paralelo.
</p>
<p>Dependências são normalmente colocadas em serviços e não em <a href="#Targets">#Targets</a>. Por exemplo, o <code>network.target</code> é obtido por qualquer serviço que configure suas interfaces de rede, portanto, ordenando a sua unit personalizada depois disso é o bastante desde que <code>network.target</code> é iniciado de qualquer maneira.
</p>
<h3>
<span id="Tipos_de_servi.C3.A7os"></span><span class="mw-headline" id="Tipos_de_serviços">Tipos de serviços</span>
</h3>
<p>Há vários tipos de execução diferentes a considerar quando se escreve um arquivo de serviço personalizado. Isso é definido com o parâmetro <code>Type=</code> na seção <code>[Service]</code>:
</p>
<ul>
<li>
<code>Type=simple</code> (padrão): <i>systemd</i> considera que o serviço seja iniciado imediatamente. O processo não deve fazer <i>fork</i>. Não use este tipo se outros serviços precisarem ser ordenados neste serviço, a menos que seja socket ativado.</li>
<li>
<code>Type=forking</code>: <i>systemd</i> considera que o serviço iniciou uma vez que o processo fez <i>fork</i> e o pai encerrou. Para daemons clássicos, use este tipo a menos que você saiba que ele não é necessário. Você deve especificar <code>PIDFile=</code> também, de forma que o <i>systemd</i> possa acompanhar o processo principal.</li>
<li>
<code>Type=oneshot</code>: este é útil para os scripts que fazem um trabalho único e, em seguida, saem. Você pode querer definir <code>RemainAfterExit=yes</code> também para que <i>systemd</i> ainda considere o serviço como ativo depois que o processo foi encerrado. Definindo <code>RemainAfterExit=yes</code> é apropriado para as units que mudam o estado do sistema (por exemplo, montar alguma partição).</li>
<li>
<code>Type=notify</code>: idêntico ao <code>Type=simple</code>, mas com a condição de que o servidor enviará um sinal para <i>systemd</i> quando estiver pronto. A implementação de referência para essa notificação é fornecida por <i>libsystemd-daemon.so</i>.</li>
<li>
<code>Type=dbus</code>: o serviço é considerado pronto quando o <code>BusName</code> especificado aparece no barramento do sistema do DBus.</li>
<li>
<code>Type=idle</code>: <i>systemd</i>vai atrasar a execução do binário do serviço até todos os trabalhos serem despachados. Além desse comportamento, é muito similar a <code>Type=simple</code>.</li>
</ul>
<p>Veja a página man <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.service"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.service.5#OPTIONS">systemd.service(5) § OPTIONS</a></span> para uma explicação mais detalhada dos valores de <code>Type</code>.
</p>
<h3><span class="mw-headline" id="Editando_units_fornecidas">Editando units fornecidas</span></h3>
<p>Para evitar conflitos com o pacman, arquivos unit fornecidos por pacotes não devem ser editados diretamente. Há duas formas seguras de modificar um unit sem tocar no arquivo original: crie um novo arquivo unit que <a href="#Arquivos_unit_de_substitui%C3%A7%C3%A3o">se sobreponha ao unit original</a> ou crie <a href="#Arquivos_drop-in">trechos drop-in</a> que são aplicados sobre o unit original. Para ambos métodos, você deve recarregar o unit em seguida para aplicar suas alterações. Isso pode ser feito editando o unit com <code>systemctl edit</code> (que recarrega o unit automaticamente) ou recarregando todos os units com:
</p>
<pre># systemctl daemon-reload
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>Você pode usar <i>systemd-delta</i> para ver quais arquivos units foram sobrepostos ou estendidos e o que exatamente foi alterado.</li>
<li>Use <code>systemctl cat <i>unit</i></code> para ver o conteúdo de um arquivo unit e todos os trechos <i>drop-in</i> associados.</li>
</ul>
</div>
<h4>
<span id="Arquivos_unit_de_substitui.C3.A7.C3.A3o"></span><span class="mw-headline" id="Arquivos_unit_de_substituição">Arquivos unit de substituição</span>
</h4>
<p>Para substituir o arquivo unit <code>/usr/lib/systemd/system/<i>unit</i></code>, crie o arquivo <code>/etc/systemd/system/<i>unit</i></code> e <a href="#Usando_units">reabilite</a> o unit para atualizar os links simbólicos.
</p>
<p>Alternativamente, execute:
</p>
<pre># systemctl edit --full <i>unit</i>
</pre>
<p>Isso abre <code>/etc/systemd/system/<i>unit</i></code> em seu editor (copiando a versão instalada se ela não existir ainda) e automaticamente a recarrega quando você finaliza a edição.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> As units de substituição continuarão sendo usadas mesmo que o Pacman atualize as units originais no futuro. Esse método dificulta a manutenção do sistema e, portanto, a próxima abordagem é a preferível.</div>
<h4><span class="mw-headline" id="Arquivos_drop-in">Arquivos drop-in</span></h4>
<p>Para criar arquivos <i>drop-in</i> para o arquivo de unidade <code>/usr/lib/systemd/system/<i>unit</i></code>, crie o diretório <code>/etc/systemd/system/<i>unit</i>.d/</code> e coloque arquivos <i>.conf</i> para substituir ou adicionar novas opções. <i>systemd</i> analisará e aplicará esses arquivos sobre a unit original.
</p>
<p>A forma mais fácil de fazer isso é executar:
</p>
<pre># systemctl edit <i>unit</i>
</pre>
<p>Isso abre o arquivo <code>/etc/systemd/system/<i>unit</i>.d/override.conf</code> em seu editor de texto (criando-o, se necessário) e recarrega automaticamente a unit quando você finalizar a edição.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>A chave ainda deve ser colocada na seção apropriada no arquivo de substituição.</li>
<li>Nem todas as chaves podem ser substituídas por arquivos drop-in. Por exemplo, para alterar <code>Conflicts=</code> um arquivo de substituição <a rel="nofollow" class="external text" href="https://lists.freedesktop.org/archives/systemd-devel/2017-June/038976.html">é necessário</a>.</li>
</ul>
</div>
<h4>
<span id="Reverter_para_vers.C3.A3o_do_vendor"></span><span class="mw-headline" id="Reverter_para_versão_do_vendor">Reverter para versão do vendor</span>
</h4>
<p>Para reverter quaisquer alterações a uma unit feita usando <code>systemctl edit</code> faça:
</p>
<pre># systemctl revert <i>unit</i>
</pre>
<h4><span class="mw-headline" id="Exemplos">Exemplos</span></h4>
<p>Por exemplo, se você só quiser adicionar uma dependência adicional a uma unit, basta criar o seguinte arquivo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>unit</i>.d/dependenciapesonalizada.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Requires=<i>nova dependência</i>
After=<i>nova dependência</i></pre>
<p>Como outro exemplo, para substituir a diretiva <code>ExecStart</code>, crie o seguinte arquivo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>unit</i>.d/execpersonalizado</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ExecStart=
ExecStart=<i>novo comando</i></pre>
<p>Note como <code>ExecStart</code> deve ser limpado antes de reatribuir <a rel="nofollow" class="external autonumber" href="https://bugzilla.redhat.com/show_bug.cgi?id=756787#c9">[1]</a>. O mesmo ocorre para todo item que pode ser especificado várias vezes, como <code>OnCalendar</code> para <i>timers</i>.
</p>
<p>Mais um exemplo para reiniciar automaticamente um serviço:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>unit</i>.d/reiniciar.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
Restart=always
RestartSec=30</pre>
<h2><span class="mw-headline" id="Targets">Targets</span></h2>
<p>O <i>systemd</i> usa <i>targets</i> para agrupar units por meio de dependências e como pontos de sincronização padronizada. Eles servem a um propósito semelhante, como <a href="https://en.wikipedia.org/wiki/pt:N%C3%ADvel_de_execu%C3%A7%C3%A3o" class="extiw" title="wikipedia:pt:Nível de execução">níveis de execução</a>, mas agem um pouco diferente. Cada <i>target</i> é nomeado em vez de numerado e destina-se a servir uma finalidade específica com a possibilidade de ter múltiplos ativos ao mesmo tempo. Alguns <i>target</i>s são implementados herdando todos os serviços de outro <i>target</i> e adicionando serviços adicionais a ele. Há <i>target</i>s do <i>systemd</i>  que imitam os níveis de execução SystemVinit comuns para que possa mudar <i>target</i>s usando o comando familiar <code>telinit RUNLEVEL</code>.
</p>
<h3><span class="mw-headline" id="Obter_targets_atuais">Obter targets atuais</span></h3>
<p>O comando deve ser no <i>systemd</i> em vez de executar <code>runlevel</code>:
</p>
<pre>$ systemctl list-units --type=target
</pre>
<h3><span class="mw-headline" id="Criar_target_personalizado">Criar target personalizado</span></h3>
<p>Os níveis de execução que tinham um significado definido no sysvinit (ex.: 0, 1, 3, 5 e 6) têm um mapeamento 1:1 com um <i>target</i> de <i>systemd</i> específico. Infelizmente, não há nenhuma boa forma de fazer o mesmo com os níveis de execução definidos pelo usuário, como 2 e 4. Se você fizer uso deles é sugerido que você faça um <i>target</i> de <i>systemd</i> com um novo nome como <code>/etc/systemd/system/<i>seu target</i></code> que leva um dos níveis de execução existentes como base (você pode examinar <code>/usr/lib/systemd/system/graphical.target</code> como um exemplo), crie um diretório <code>/etc/systemd/system/<i>seu target</i>.wants</code>, e então faça um link simbólico dos serviços adicionais de <code>/usr/lib/systemd/system/</code> que você deseja ativar.
</p>
<h3>
<span id="Mapeamento_entre_n.C3.ADveis_do_SysV_e_targets_do_systemd"></span><span class="mw-headline" id="Mapeamento_entre_níveis_do_SysV_e_targets_do_systemd">Mapeamento entre níveis do SysV e targets do systemd</span>
</h3>
<table class="wikitable">
<tbody>
<tr>
<th>Nível de execução do SysV</th>
<th>Target do systemd</th>
<th>Notas
</th>
</tr>
<tr>
<td>0</td>
<td>runlevel0.target, poweroff.target</td>
<td>Interrrompe o sistema.
</td>
</tr>
<tr>
<td>1, s, único</td>
<td>runlevel1.target, rescue.target</td>
<td>Modo de usuário único.
</td>
</tr>
<tr>
<td>2, 4</td>
<td>runlevel2.target, runlevel4.target, multi-user.target</td>
<td>Níveis de execução User-defined/Site-specific. Por padrão, idêntico ao 3.
</td>
</tr>
<tr>
<td>3</td>
<td>runlevel3.target, multi-user.target</td>
<td>Multi-usuário, não-gráfico. Os usuários geralmente podem acessar através de múltiplos consoles ou via rede.
</td>
</tr>
<tr>
<td>5</td>
<td>runlevel5.target, graphical.target</td>
<td>Multi-usuário, gráfico. Normalmente tem todos os serviços do nível de execução 3, mais um login gráfico.
</td>
</tr>
<tr>
<td>6</td>
<td>runlevel6.target, reboot.target</td>
<td>Reiniciar
</td>
</tr>
<tr>
<td>emergência</td>
<td>emergency.target</td>
<td>Shell de emergência
</td>
</tr>
</tbody>
</table>
<h3><span class="mw-headline" id="Alterar_target_atual">Alterar target atual</span></h3>
<p>No <i>systemd</i>, targets são expostos via <i>units de targets</i>. Você pode alterá-los assim:
</p>
<pre># systemctl isolate graphical.target
</pre>
<p>Isso só vai mudar o target atual, e não tem nenhum efeito na próxima inicialização. É equivalente aos comandos como <code>telinit 3</code> ou <code>telinit 5</code> no Sysvinit.
</p>
<h3>
<span id="Alterar_target_padr.C3.A3o_para_inicializar"></span><span class="mw-headline" id="Alterar_target_padrão_para_inicializar">Alterar target padrão para inicializar</span>
</h3>
<p>O target padrão é <code>default.target</code>, que é um link simbólico para <code>graphical.target</code>. Basicamente, ele corresponde ao antigo nível de execução 5.
</p>
<p>Para verificar o target atual com <i>systemctl</i>:
</p>
<pre>$ systemctl get-default
</pre>
<p>Para alterar o target padrão a ser inicializado, altere o link simbólico <code>default.target</code>. Com <i>systemctl</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># systemctl set-default multi-user.target</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Removed /etc/systemd/system/default.target.
Created symlink /etc/systemd/system/default.target -&gt; /usr/lib/systemd/system/multi-user.target.</pre>
<p>Alternativamente, acrescente um dos seguintes <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetros do kernel">parâmetros do kernel</a> a seu gerenciador de boot:
</p>
<ul>
<li>
<code>systemd.unit=multi-user.target</code> (que basicamente corresponde ao antigo nível de execução 3),</li>
<li>
<code>systemd.unit=rescue.target</code> (que basicamente corresponde ao antigo nível de execução 1).</li>
</ul>
<h3>
<span id="Ordem_de_target_padr.C3.A3o"></span><span class="mw-headline" id="Ordem_de_target_padrão">Ordem de target padrão</span>
</h3>
<p>O <i>systemd</i> escolhe o <code>default.target</code> conforme a ordem a seguir:
</p>
<ol>
<li>Parâmetro de kernel mostrado acima</li>
<li>Link simbólico de <code>/etc/systemd/system/default.target</code>
</li>
<li>Link simbólico de <code>/usr/lib/systemd/system/default.target</code>
</li>
</ol>
<h2><span class="mw-headline" id="Componentes_do_systemd">Componentes do systemd</span></h2>
<p>Alguns componentes (não exaustivos) do <i>systemd</i> são:
</p>
<ul>
<li>
<a href="../pt/Systemd-boot.html" title="Systemd-boot (Português)">systemd-boot</a> — simples <a href="../pt/Arch_boot_process.html#Gerenciador_de_boot" class="mw-redirect" title="Gerenciador de boot">gerenciador de boot</a> UEFI;</li>
<li>
<a href="../en/Systemd-firstboot.html" title="Systemd-firstboot">systemd-firstboot</a> — inicialização da configuração básica do sistema antes da primeira inicialização;</li>
<li>
<a href="../pt/Systemd-homed.html" title="Systemd-homed (Português)">systemd-homed</a> — <a href="../pt/Users_and_groups.html" title="Users and groups (Português)">contas</a> portáteis de usuário humano;</li>
<li>
<a rel="nofollow" class="external text" href="https://dvdhrm.wordpress.com/2013/08/24/session-management-on-linux/">systemd-logind</a> — gerenciamento de sessão;</li>
<li>
<a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a> — gerenciamento de <a href="../pt/Network_configuration.html" class="mw-redirect" title="Configuração de rede">configuração de rede</a>;</li>
<li>
<a href="../en/Systemd-nspawn.html" title="Systemd-nspawn">systemd-nspawn</a> — contêiner de namespace leve;</li>
<li>
<a href="../en/Systemd-resolved.html" title="Systemd-resolved">systemd-resolved</a> — <a href="../pt/Domain_name_resolution.html" title="Domain name resolution (Português)">resolução de nome</a> de rede;</li>
<li>
<span class="plainlinks archwiki-template-man" title="$ man 8 systemd-sysusers"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sysusers.8">systemd-sysusers(8)</a></span> — cria usuários e grupos do sistema e adiciona usuários a grupos na instalação do pacote ou na inicialização;</li>
<li>
<a href="../en/Systemd-timesyncd.html" title="Systemd-timesyncd">systemd-timesyncd</a> — sincronização da <a href="../en/System_time.html" title="System time">hora do sistema</a> na rede;</li>
<li>
<a href="../pt/Systemd/Journal.html" title="Systemd (Português)/Journal (Português)">systemd/Journal</a> — registro do sistema;</li>
<li>
<a href="../pt/Systemd/Timers.html" title="Systemd (Português)/Timers (Português)">systemd/Timers</a> — cronômetros monotônicos ou em tempo real para controlar arquivos ou eventos <code>.service</code>, alternativa razoável ao <a href="../en/Cron.html" title="Cron">cron</a>.</li>
<li>
<span class="plainlinks archwiki-template-man" title="$ man 7 systemd-stub"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-stub.7">systemd-stub(7)</a></span> — um stub de boot UEFI usado para criar <a href="../pt/Unified_kernel_image.html" title="Unified kernel image (Português)">imagens de kernel unificadas</a>.</li>
</ul>
<h3><span class="mw-headline" id="systemd.mount_-_montagem">systemd.mount - montagem</span></h3>
<p>O <i>systemd</i> é responsável pela montagem das partições e sistemas de arquivos especificados em <code>/etc/fstab</code>. O <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-fstab-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-fstab-generator.8">systemd-fstab-generator(8)</a></span> converte todas as entradas em <code>/etc/fstab</code> em unidades do systemd, isso é executado no momento da inicialização e sempre que a configuração do gerenciador de sistema é recarregada.
</p>
<p>O <i>systemd</i> estende as capacidades usuais do <a href="../pt/Fstab.html" title="Fstab (Português)">fstab</a> e oferece opções adicionais de montagem. Eles afetam as dependências da unidade de montagem, eles podem, por exemplo, garantir que uma montagem seja realizada apenas quando a rede estiver ativa ou apenas quando outra partição for montada. A lista completa de opções de montagem específicas do <i>systemd</i>, normalmente prefixadas com <code>x-systemd.</code>, é detalhada em <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.mount"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.mount.5#FSTAB">systemd.mount(5) § FSTAB</a></span>.
</p>
<p>Um exemplo dessas opções de montagem no contexto de <i>montagem automática</i>, que significa montagem apenas quando o recurso é necessário, em vez de automaticamente no momento da inicialização, é fornecido em <a href="../pt/Fstab.html#Automontagem_com_systemd" title="Fstab (Português)">fstab (Português)#Automontagem com systemd</a>.
</p>
<h4>
<span id="Montagem_autom.C3.A1tica_de_parti.C3.A7.C3.A3o_GPT"></span><span class="mw-headline" id="Montagem_automática_de_partição_GPT">Montagem automática de partição GPT</span>
</h4>
<p>Em sistemas inicializados por UEFI, se condições específicas forem atendidas, <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-gpt-auto-generator"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-gpt-auto-generator.8">systemd-gpt-auto-generator(8)</a></span> montará automaticamente as partições GPT seguindo a <a rel="nofollow" class="external text" href="https://uapi-group.org/specifications/specs/discoverable_partitions_specification/">Especificação de Partições Detectáveis</a> e elas podem, portanto, ser omitidas do <a href="../pt/Fstab.html" title="Fstab (Português)">fstab</a>.
</p>
<p>Os pré-requisitos são:
</p>
<ul>
<li>O carregador de boot deve definir a variável EFI <a rel="nofollow" class="external text" href="https://systemd.io/BOOT_LOADER_INTERFACE/">LoaderDevicePartUUID</a> para que a partição do sistema EFI usada possa ser identificada. Isso é suportado pelo <a href="../pt/Systemd-boot.html" title="Systemd-boot (Português)">systemd-boot</a>, <span class="plainlinks archwiki-template-man" title="$ man 7 systemd-stub"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-stub.7">systemd-stub(7)</a></span> e <a href="../en/REFInd.html#LoaderDevicePartUUID" title="REFInd">rEFInd (não habilitado por padrão)</a>. Isso pode ser verificado executando <code>bootctl</code> e checando o status de <code>Boot loader sets ESP information</code>.</li>
<li>A partição do root deve estar no mesmo disco físico que a partição do sistema EFI utilizado. Outras partições que serão montadas automaticamente devem estar no mesmo disco físico que a partição raiz. Isto significa basicamente que todas as partições montadas automaticamente devem compartilhar o mesmo disco físico com o ESP.</li>
<li>O ponto de montagem <code>/efi</code> deve ser criado manualmente (se desejado), caso contrário <code>systemd-gpt-auto-generator</code> usará <code>/boot</code>.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Tenha muito cuidado ao criar <code>/efi</code> em um sistema existente ao usar a montagem automática GPT. <code>/efi</code> será usado como ponto de montagem padrão no próximo boot, o que pode deixar seu sistema em um estado inconsistente com um diretório <code>/boot</code> vazio. Você provavelmente precisará reinstalar seu(s) kernel(s) e/ou microcode, regenerar seu initramfs, etc...</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> A montagem automática de uma partição pode ser desabilitada alterando o <a href="https://en.wikipedia.org/wiki/pt:Tabela_de_Parti%C3%A7%C3%A3o_GUID#Tipos_de_parti.C3.A7.C3.A3o_GUID" class="extiw" title="wikipedia:pt:Tabela de Partição GUID">tipo GUID</a> da partição ou definindo o atributo de partição bit 63 "não montar automaticamente", veja <a href="../en/GPT_fdisk.html#Prevent_GPT_partition_automounting" class="mw-redirect" title="Gdisk">Impedir a montagem automática da partição GPT</a>.</div>
<h5>
<span id=".2Fvar"></span><span class="mw-headline" id="/var">/var</span>
</h5>
<p>Para a montagem automática do <code>/var</code> funcionar, a PARTUUID deve corresponder ao hash SHA256 HMAC do tipo de partição UUID (<code>4d21b016-b534-45c2-a9fb-5c16e091fd2d</code>) codificado pelo ID da máquina. O PARTUUID necessário pode ser obtido usando:
</p>
<pre>$ systemd-id128 -u --app-specific=4d21b016-b534-45c2-a9fb-5c16e091fd2d machine-id
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <span class="plainlinks archwiki-template-man" title="$ man 1 systemd-id128"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-id128.1">systemd-id128(1)</a></span> lê o ID da máquina de <code>/etc/machine-id</code>, isso torna impossível saber o PARTUUID necessário antes que o sistema seja instalado.</div>
<h3><span class="mw-headline" id="systemd-sysvcompat">systemd-sysvcompat</span></h3>
<p>A função principal do <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd-sysvcompat">systemd-sysvcompat</a></span> (requerido por <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base">base</a></span>) é fornecer o binário tradicional do linux <a href="../pt/Init.html" title="Init (Português)">init</a>. Para sistemas controlados pelo <i>systemd</i>, <code>init</code> é apenas um link simbólico para seu executável <code>systemd</code>.
</p>
<p>Além disso, ele também fornece 4 atalhos de conveniência aos quais os usuários do <a href="../en/SysVinit.html" title="SysVinit">SysVinit</a> podem estar acostumados. Os atalhos de conveniência são <span class="plainlinks archwiki-template-man" title="$ man 8 halt"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/halt.8">halt(8)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 8 poweroff"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/poweroff.8">poweroff(8)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 8 reboot"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/reboot.8">reboot(8)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 8 shutdown"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/shutdown.8">shutdown(8)</a></span>. Cada um desses 4 comandos é um link simbólico para <code>systemctl</code>, e governado pelo comportamento do <i>systemd</i>. Portanto, a discussão em <a href="#Gerenciamento_de_energia">#Gerenciamento de energia</a> se aplica.
</p>
<p>Os sistemas baseados em <i>Systemd</i> podem desistir dos métodos de compatibilidade do System V usando o <a href="../pt/Kernel_parameters.html#Lista_de_par%C3%A2metros" title="Kernel parameters (Português)">parâmetro de boot</a> <code>init=</code> (consulte, por exemplo, <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=233387">[solved] /bin/init is in systemd-sysvcompat ?</a>) e argumentos de comando do <code>systemctl</code>, nativo do <i>systemd</i>.
</p>
<h3>
<span id="systemd-tmpfiles_-_arquivos_tempor.C3.A1rios"></span><span class="mw-headline" id="systemd-tmpfiles_-_arquivos_temporários">systemd-tmpfiles - arquivos temporários</span>
</h3>
<p>O "<i>systemd-tmpfiles</i> cria, apaga e limpa arquivos e diretórios temporários e voláteis." Ele lê os arquivos de configuração em <code>/etc/tmpfiles.d/</code> e <code>/usr/lib/tmpfiles.d/</code> para descobrir quais ações executar. Os arquivos de configuração do diretório anterior têm precedência sobre os do diretório anterior.
</p>
<p>Os arquivos de configuração geralmente são fornecidos junto com os arquivos de serviço e são nomeados no estilo de <code>/usr/lib/tmpfiles.d/<i>programa</i>.conf</code>. Por exemplo, o daemon <a href="../pt/Samba.html" title="Samba (Português)">Samba</a> espera que o diretório <code>/run/samba</code> exista e tenha as permissões corretas. Portanto, o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span> vem com esta configuração:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/tmpfiles.d/samba.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">D /run/samba 0755 root root
</pre>
<p>Os arquivos de configuração também podem ser usados para gravar valores em certos arquivos na inicialização. Por exemplo, se você usou <code>/etc/rc.local</code> para desativar a ativação de dispositivos USB com <code>echo USBE &gt; /proc/acpi/wakeup</code>, você pode usar o seguinte arquivo tmp:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/tmpfiles.d/disable-usb-wake.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#    Caminho               Modo UID  GID  Age Argumento
w    /proc/acpi/wakeup     -    -    -    -   USBE
</pre>
<p>Veja as páginas do manual <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-tmpfiles"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-tmpfiles.8">systemd-tmpfiles(8)</a></span> e <span class="plainlinks archwiki-template-man" title="$ man 5 tmpfiles.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/tmpfiles.d.5">tmpfiles.d(5)</a></span> para detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Este método pode não funcionar para definir opções em <code>/sys</code> uma vez que o serviço <i>systemd-tmpfiles-setup</i> pode ser executado antes que os módulos de dispositivo apropriados sejam carregados. Neste caso, você pode verificar se o módulo tem um parâmetro para a opção que você deseja definir com <code>modinfo <i>módulo</i></code> e definir esta opção com um <a href="../pt/Kernel_module.html#Op%C3%A7%C3%B5es_de_configura%C3%A7%C3%A3o_de_m%C3%B3dulos" title="Kernel module (Português)">arquivo de configuração em /etc/modprobe.d</a>. Caso contrário, você terá que escrever uma <a href="../en/Udev.html#About_udev_rules" title="Udev">regra do udev</a> para definir o atributo apropriado assim que o dispositivo aparecer.</div>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3>
<span id="Ferramentas_de_configura.C3.A7.C3.A3o_GUI"></span><span class="mw-headline" id="Ferramentas_de_configuração_GUI">Ferramentas de configuração GUI</span>
</h3>
<ul><li>
<b>systemadm</b> — Navegador gráfico para as units do systemd. Ele pode mostrar a lista de units, possivelmente filtradas por tipo.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://cgit.freedesktop.org/systemd/systemd-ui/">https://cgit.freedesktop.org/systemd/systemd-ui/</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd-ui">systemd-ui</a></span>
</dd></dl>
<ul><li>
<b>SystemdGenie</b> — Utilitário de gerenciamento systemd baseado em tecnologias KDE.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://invent.kde.org/system/systemdgenie">https://invent.kde.org/system/systemdgenie</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemdgenie">systemdgenie</a></span>
</dd></dl>
<h3>
<span id="Executando_servi.C3.A7os_ap.C3.B3s_a_rede_estar_ativa"></span><span class="mw-headline" id="Executando_serviços_após_a_rede_estar_ativa">Executando serviços após a rede estar ativa</span>
</h3>
<p>Para atrasar um serviço até depois que a rede está ativa, inclua as seguintes dependências no arquivo <i>.service</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>foo</i>.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
...
Wants=network-online.target
After=network-online.target
...</pre>
<p>O serviço de espera de rede do <a href="../pt/Network_configuration.html#Gerenciadores_de_rede" class="mw-redirect" title="Gerenciador de rede">gerenciador de rede</a> em uso também deve ser ativado para que <code>network-online.target</code> reflita adequadamente o status da rede.
</p>
<ul>
<li>Se estiver usando o <a href="../pt/NetworkManager.html" title="NetworkManager (Português)">NetworkManager</a>, o <code>NetworkManager-wait-online.service</code> deve ser habilitado junto com o <code>NetworkManager.service</code>. Verifque se neste caso com <code>systemctl is-enabled NetworkManager-wait-online.service</code>. Se ele não estiver habilitado, então <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reabilite">reabilite</a> <code>NetworkManager.service</code>.</li>
<li>No caso do <a href="../en/Netctl.html" title="Netctl">netctl</a>, <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Habilite">habilite</a> o <code>netctl-wait-online.service</code> (a menos que esteja usando <i>netctl-auto</i>; veja <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/75836">FS#75836</a>).</li>
<li>Se estiver usando <a href="../en/Systemd-networkd.html" title="Systemd-networkd">systemd-networkd</a>, o <code>systemd-networkd-wait-online.service</code>  deve ser habilitado junto com o <code>systemd-networkd.service</code>. Verifique se este é o caso com <code>systemctl is-enabled systemd-networkd-wait-online.service</code>. Se ele não estiver habilitado, então <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reabilite">reabilite</a> <code>systemd-networkd.service</code>.</li>
</ul>
<p>Para explicações mais detalhadas, veja <a rel="nofollow" class="external text" href="https://systemd.io/NETWORK_ONLINE/#discussion">Network configuration synchronization points</a>.
</p>
<p>Se um serviço precisar realizar consultas DNS, ele também deve ser solicitado após <code>nss-lookup.target</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/<i>foo</i>.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
...
Wants=network-online.target
After=network-online.target nss-lookup.target
...</pre>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 7 systemd.special"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.special.7#Special_Passive_System_Units">systemd.special(7) § Special Passive System Units</a></span>.
</p>
<p>Para que <code>nss-lookup.target</code> tenha algum efeito, ele precisa de um serviço que o extraia via <code>Wants=nss-lookup.target</code> e se ordena antes dele com <code>Before=nss-lookup.target</code>. Normalmente, isso é feito por <a href="../pt/Domain_name_resolution.html#Servidores_DNS" class="mw-redirect" title="Resolvedor de DNS">Resolvedores de DNS</a> locais.
</p>
<p>Verifique qual serviço ativo, se houver, está puxando <code>nss-lookup.target</code> com:
</p>
<pre>$ systemctl list-dependencies --reverse nss-lookup.target
</pre>
<h3>
<span id="Habilitar_units_instaladas_por_padr.C3.A3o"></span><span class="mw-headline" id="Habilitar_units_instaladas_por_padrão">Habilitar units instaladas por padrão</span>
</h3>
<p>O Arch Linux vem com <code>/usr/lib/systemd/system-preset/99-default.preset</code> contendo <code>disable *</code>. Isso faz com que o <i>systemctl preset</i> desabilite todas as unidades por padrão, de forma que quando um novo pacote é instalado, o usuário deve habilitar manualmente a unit.
</p>
<p>Se este comportamento não for desejado, basta criar um link simbólico de <code>/etc/systemd/system-preset/99-default.preset</code> para <code>/dev/null</code> para sobrescrever o arquivo de configuração. Isso fará com que o <i>systemctl preset</i> habilite todas as units que forem instaladas – independentemente do tipo de unit – a menos que especificado em outro arquivo em um dos diretórios de configuração do <i>systemctl preset</i>. Units de usuário não são afetadas. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.preset"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.preset.5">systemd.preset(5)</a></span> para mais informações.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Habilitar todas as units por padrão pode causar problemas com pacotes que contêm duas ou mais unidades mutuamente exclusivas. O <i>systemctl preset</i> é projetado para ser usado por distribuições ou administradores de sistema. No caso em que duas units conflitantes seriam habilitadas, você deve especificar explicitamente qual delas deve ser desabilitada em um arquivo de configuração predefinido, conforme especificado em <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.preset"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.preset.5">systemd.preset(5)</a></span>.</div>
<h3><span class="mw-headline" id="Usando_ambientes_de_aplicativos_em_sandbox">Usando ambientes de aplicativos em <i>sandbox</i></span></h3>
<p>Um arquivo de unit pode ser criado como uma <i>sandbox</i> para isolar aplicativos e seus processos em um ambiente virtual reforçado. O systemd alavanca <a href="https://en.wikipedia.org/wiki/Linux_namespaces" class="extiw" title="wikipedia:Linux namespaces">espaços de nomes</a>, lista de permitidos/negados de <a href="../pt/Capabilities.html" class="mw-redirect" title="Capacidades">capacidades</a> e <a href="../pt/Cgroups.html" title="Cgroups (Português)">grupos de controle</a> ("cgroups") para processos contêineres através de uma extensa configuração do ambiente de execução—<span class="plainlinks archwiki-template-man" title="$ man 5 systemd.exec"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.exec.5">systemd.exec(5)</a></span>.
</p>
<p>O aprimoramento de um arquivo existente de unit do systemd com um aplicativo de <i>sandboxing</i> normalmente requer testes de tentativa e erro acompanhados pelo uso generoso de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=strace">strace</a></span>, <a href="https://en.wikipedia.org/wiki/pt:Fluxos_padr%C3%A3o#Erro_padr.C3.A3o_.28stderr.29" class="extiw" title="wikipedia:pt:Fluxos padrão">stderr</a> e facilidades de saída e registro de erro do <span class="plainlinks archwiki-template-man" title="$ man 1 journalctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/journalctl.1">journalctl(1)</a></span>. Você pode querer pesquisar primeiro a documentação original para testes já feitos para basear os testes. Para obter um ponto de partida para as possível opções de segurança, execute
</p>
<pre>$ systemd-analyze security <i>unit</i>
</pre>
<p>Alguns exemplos de como o <i>sandboxing</i> com systemd pode ser implementado:
</p>
<ul><li>
<code>CapabilityBoundingSet</code> define uma lista de capacidades (<span class="plainlinks archwiki-template-man" title="$ man 7 capabilities"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/capabilities.7">capabilities(7)</a></span>) que são permitidas ou negadas para uma unit. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.exec"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.exec.5#CAPABILITIES">systemd.exec(5) § CAPABILITIES</a></span>.
<ul><li>A capacidade <code>CAP_SYS_ADM</code>, por exemplo, que deve ser um dos <a rel="nofollow" class="external text" href="https://lwn.net/Articles/486306/">objetivos de um sandbox seguro</a>: <code>CapabilityBoundingSet=~ CAP_SYS_ADM</code>
</li></ul>
</li></ul>
<h3>
<span id="Notifica.C3.A7.C3.A3o_sobre_servi.C3.A7os_com_falha"></span><span class="mw-headline" id="Notificação_sobre_serviços_com_falha">Notificação sobre serviços com falha</span>
</h3>
<p>Para notificar sobre falhas de serviço, uma diretiva <code>OnFailure=</code> precisa ser adicionada ao arquivo de serviço correspondente, por exemplo, usando um <a href="#Arquivos_drop-in">arquivo de configuração drop-in</a>. A adição desta diretiva a cada unit de serviço pode ser obtido com um arquivo de configuração drop-in de nível superior. Para obter detalhes sobre drop-ins de nível superior, consulte <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.unit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.unit.5">systemd.unit(5)</a></span>.
</p>
<p>Cria um drop-in de nível superior para serviços:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/service.d/toplevel-override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
OnFailure=failure-notification@%n</pre>
<p>Isso adiciona <code>OnFailure=failure-notification@%n</code> a cada arquivo de serviço. Se <i>some_service_unit</i> falhar, o <code>failure-notification@<i>some_service_unit</i></code> será iniciado para lidar com a entrega da notificação (ou qualquer tarefa para a qual ela esteja configurada).
</p>
<p>Cria o modelo unit <code>failure-notification@</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/failure-notification@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Send a notification about a failed systemd unit
After=network.target

[Service]
Type=simple
ExecStart=/<i>caminho</i>/<i>para</i>/failure-notification.sh %i</pre>
<p>Você pode criar o script <code>failure-notification.sh</code> e definir o que fazer ou como notificar (mail, gotify, xmpp, etc.). O <code>%i</code> será o nome da unit de serviço com falha e será passado como um argumento para o script.
</p>
<p>Para evitar uma regressão para instâncias de <code>failure-notification@.service</code>, crie um arquivo de configuração drop-in vazio com o mesmo nome do drop-in de nível superior (o arquivo de configuração vazio drop-in de nível de serviço tem precedência sobre o drop-in de nível superior e substitui o último):
</p>
<pre># mkdir -p /etc/systemd/system/failure-notification@.service.d
# touch /etc/systemd/system/failure-notification@.service.d/toplevel-override.conf
</pre>
<h3><span class="mw-headline" id="Desliga_automaticamente_um_HDD_externo_ao_desligar">Desliga automaticamente um HDD externo ao desligar</span></h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Merge-arrows-2.svg" decoding="async" width="36" height="40" class="mw-file-element"></span></span><b>This article or section is a candidate for merging with <a href="../en/Udisks.html#Troubleshooting" title="Udisks">Udisks#Troubleshooting</a>.</b></p>
<div>
<b>Notes:</b> Isto se concentra principalmente no uso do <a href="../en/Udisks.html" title="Udisks">udisks</a>, provavelmente é mais adequado para este conteúdo em vez de colocá-lo dentro da página do <i>systemd</i>. (Discuss in <a rel="nofollow" class="external text" href="../pt/Talk:Systemd.html">Talk:Systemd (Português)</a>)</div>
</div>
<p>Se um HDD externo não for desligado corretamente no desligamento do sistema, pode ser desejável corrigir o problema. A maneira mais conveniente de fazer isso é usando <a href="../en/Udisks.html" title="Udisks">udisks</a>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Habilite</a> <code>udisks2.service</code>.
</p>
<p>Um serviço para invocar nosso script pode ser assim:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/handle_external_hdds.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Requires=udisks2.service
Requires=graphical.target
After=graphical.target

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStop=/usr/local/bin/handle_external_hdds.sh

[Install]
WantedBy=graphical.target</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Habilite</a> <code>handle_external_hdds.service</code>
</p>
<p>Faça um systemd <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Daemon-reload">daemon-reload</a> para aplicar a nova configuração.
</p>
<p>Reinicie o sistema ou reinice o <code>graphical.target</code> para verificar se funciona.
</p>
<p>Um script de exemplo para lidar com uma quantidade arbitrária de partições em um único disco se parece com isso:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/handle_external_hdds.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/bash -u

declare -a uuids=(<i>uuid_list</i>)
	
# Only proceed if the drive is present.
if [[ ! -L "/dev/disk/by-uuid/${uuids[0]}" ]]; then
  exit 0
fi
	
for uuid in "${uuids[@]}"; do
  if findmnt "/dev/disk/by-uuid/$uuid"; then
    umount "/dev/disk/by-uuid/$uuid"
  fi
done
	
# udisksctl powers off proper drive even if its partition is supplied
udisksctl power-off -b "/dev/disk/by-uuid/${uuids[0]}"</pre>
<p><i>uuid_list</i> é uma lista de UUIDs delimitadas por espaço correspondente às partições do dispositivo a ser verificado, por exemplo, <code>"<i>uuid_1</i>" "<i>uuid_2</i>"</code>.
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3>
<span id="Investigar_servi.C3.A7os_que_falharam"></span><span class="mw-headline" id="Investigar_serviços_que_falharam">Investigar serviços que falharam</span>
</h3>
<p>Para encontrar os serviços <i>systemd</i> que falharam em iniciar:
</p>
<pre>$ systemctl --state=failed
</pre>
<p>Para encontrar o porquê de eles terem falhado, examine a saída do log. Consulte <a href="../pt/Systemd/Journal.html#Filtrando_sa%C3%ADda" title="Systemd (Português)/Journal (Português)">systemd/Journal#Filtrando saída</a> para detalhes.
</p>
<h3>
<span id="Diagnosticar_problemas_de_inicializa.C3.A7.C3.A3o"></span><span class="mw-headline" id="Diagnosticar_problemas_de_inicialização">Diagnosticar problemas de inicialização</span>
</h3>
<p>O <i>systemd</i> tem várias opções para diagnosticar problemas com o processo de inicialização. Veja <a href="../pt/General_troubleshooting.html#Problemas_de_inicializa%C3%A7%C3%A3o" class="mw-redirect" title="Depuração de inicialização">Depuração de inicialização</a> para instruções mais gerais e opções para capturar mensagens de inicialização antes que o <i>systemd</i> assuma o <a href="../pt/Arch_boot_process.html" class="mw-redirect" title="Processo de inicialização">processo de inicialização</a>. Veja também a <a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/systemd/Debugging/">documentação de depuração do systemd</a> do freedesktop.org.
</p>
<h3>
<span id="Diagnosticar_um_servi.C3.A7o"></span><span class="mw-headline" id="Diagnosticar_um_serviço">Diagnosticar um serviço</span>
</h3>
<p>Se algum serviço do <i>systemd</i> se comportar mal ou você quiser obter mais informações sobre o que está acontecendo, defina a <a href="../pt/Environment_variables.html" class="mw-redirect" title="Variável de ambiente">variável de ambiente</a> <code>SYSTEMD_LOG_LEVEL</code> com <code>debug</code>. Por exemplo, para executar o daemon <i>systemd-networkd</i> no modo de depuração:
</p>
<p>Adicione um <a href="#Arquivos_drop-in">arquivo <i>drop-in</i></a> para o serviço adicionando as duas linhas:
</p>
<pre>[Service]
Environment=SYSTEMD_LOG_LEVEL=debug
</pre>
<p>Ou, de forma equivalente, defina a variável de ambiente manualmente:
</p>
<pre># SYSTEMD_LOG_LEVEL=debug /lib/systemd/systemd-networkd
</pre>
<p>então, <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">reinicie</a> <i>systemd-networkd</i> e monitore o journal para o serviço com a opção <code>-f</code>/<code>--follow</code>.
</p>
<h3>
<span id="Desligamento.2Freinicializa.C3.A7.C3.A3o_demora_demais"></span><span class="mw-headline" id="Desligamento/reinicialização_demora_demais">Desligamento/reinicialização demora demais</span>
</h3>
<p>Se o processo de desligamento demorar muito (ou parecer estar congelado), provavelmente um serviço que não foi encerrado é o responsável. O <i>systemd</i> espera um tempo para cada serviço encerrar antes de tentar matá-lo. Para descobrir se você foi afetado, veja <a rel="nofollow" class="external text" href="https://freedesktop.org/wiki/Software/systemd/Debugging/#shutdowncompleteseventually">este artigo</a> na wiki do <i>systemd</i>.
</p>
<p>Um problema comum é um desligamento interrompido ou um processo de suspensão. Para verificar qual é o seu caso, você pode executar qualquer um desses comandos e verificar as saídas
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># systemctl poweroff
</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Failed to power off system via logind: There's already a shutdown or sleep operation in progress
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># systemctl list-jobs
</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">  JOB UNIT                    TYPE  STATE  
...
21593 systemd-suspend.service start running
21592 suspend.target          start waiting
...
</pre>
<p>A <a rel="nofollow" class="external text" href="https://unix.stackexchange.com/a/579531">solução</a> para isso seria cancelar os trabalhos em execução
</p>
<pre># systemctl cancel
# systemctl stop systemd-suspend.service
</pre>
<p>e, em seguida, tentar desligar ou reiniciar novamente.
</p>
<h3>
<span id="Processos_de_curta_dura.C3.A7.C3.A3o_n.C3.A3o_parecem_registrar_qualquer_sa.C3.ADda"></span><span class="mw-headline" id="Processos_de_curta_duração_não_parecem_registrar_qualquer_saída">Processos de curta duração não parecem registrar qualquer saída</span>
</h3>
<p>Se <code>journalctl -u foounit</code> não mostra nenhuma saída para um serviço de curta duração, veja o PID em vez disso. Por exemplo, se <code>systemd-modules-load.service</code> falha, e <code>systemctl status systemd-modules-load</code> mostra que executou com PID 123, então você talvez possa ver uma saída no journal por esse PID, ou seja, executando <code>journalctl -b _PID=123</code> como root. Campos de metadados para o journal como <code>_SYSTEMD_UNIT</code> e <code>_COMM</code> são coletados de forma assíncrona e invocam o diretório <code>/proc</code> para o processo existente. A solução deste problema requer fixar o kernel para fornecer esses dados através de uma conexão de socket, semelhante ao <code>SCM_CREDENTIALS</code>. Em resumo, é um <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/issues/2913">erro</a>. Tenha em mente que os serviços imediatamente falhos podem não imprimir nada para o journal conforme o design do <i>systemd</i>.
</p>
<h3>
<span id="Tempo_de_inicializa.C3.A7.C3.A3o_aumentando_com_o_tempo"></span><span class="mw-headline" id="Tempo_de_inicialização_aumentando_com_o_tempo">Tempo de inicialização aumentando com o tempo</span>
</h3>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Os problemas do NetworkManager não são culpa do <i>systemd</i>, os supostos relatórios estão faltando. A lentidão do <code>systemctl status</code> ou do <code>journalctl</code> não afeta o tempo de inicialização. (Discuss in <a rel="nofollow" class="external text" href="../pt/Talk:Systemd.html">Talk:Systemd (Português)</a>)</div>
</div>
<p>Depois de usar o <code>systemd-analyze</code>, vários usuários notaram que o tempo de inicialização aumentou significativamente em comparação com o que costumava ser. Depois de usar <code>systemd-analyse blame</code>, o <a href="../pt/NetworkManager.html" title="NetworkManager (Português)">NetworkManager</a> está sendo relatado como tendo uma quantidade anormalmente grande de tempo para iniciar.
</p>
<p>O problema para alguns usuários foi devido a <code>/var/log/journal</code> se tornar muito grande. Isso pode ter outros impactos no desempenho, como <code>systemctl status</code> ou <code>journalctl</code>. Como tal, a solução é remover todos os arquivos dentro da pasta (idealmente fazendo um backup em algum lugar, pelo menos temporariamente) e, em seguida, definindo um limite de tamanho de arquivo de diário conforme descrito em <a href="../pt/Systemd/Journal.html#Limite_no_tamanho_do_journal" class="mw-redirect" title="Systemd/Journal (Português)">systemd/Journal (Português)#Limite no tamanho do journal</a>.
</p>
<h3>
<span id="systemd-tmpfiles-setup.service_n.C3.A3o_inicia_na_inicializa.C3.A7.C3.A3o_do_sistema"></span><span class="mw-headline" id="systemd-tmpfiles-setup.service_não_inicia_na_inicialização_do_sistema">systemd-tmpfiles-setup.service não inicia na inicialização do sistema</span>
</h3>
<p>A partir do <i>systemd</i> 219, <code>/usr/lib/tmpfiles.d/systemd.conf</code> especifica os atributos da ACL para os diretórios sob <code>/var/log/journal</code> e, portanto, requer que o suporte da ACL seja ativada para o sistema de arquivos em que o journal reside.
</p>
<p>Veja <a href="../pt/Access_Control_Lists.html#Habilitar_ACL" class="mw-redirect" title="Listas de Controle de Acesso">Listas de Controle de Acesso#Habilitar ACL</a> para instruções sobre como habilitar ACL no sistema de arquivos que hospeda <code>/var/log/journal</code>.
</p>
<h3>
<span id="Desabilitar_modo_de_emerg.C3.AAncia_em_m.C3.A1quina_remota"></span><span class="mw-headline" id="Desabilitar_modo_de_emergência_em_máquina_remota">Desabilitar modo de emergência em máquina remota</span>
</h3>
<p>Você pode querer desabilitar o modo de emergência em uma máquina remota, por exemplo, uma máquina virtual hospedada no Azure ou no Google Cloud. É porque se o modo de emergência for acionado, a máquina será bloqueada da conexão à rede.  
</p>
<p>Para desativá-lo, <a href="#Usando_units">mascare</a> <code>emergency.service</code> e <code>emergency.target</code>.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/pt:systemd" class="extiw" title="wikipedia:pt:systemd">Wikipedia:pt:systemd</a></li>
<li>
<a rel="nofollow" class="external text" href="https://systemd.io/">Site oficial do systemd</a>
<ul>
<li><a rel="nofollow" class="external text" href="https://systemd.io/OPTIMIZATIONS/">Otimizações do systemd</a></li>
<li><a rel="nofollow" class="external text" href="https://systemd.io/FAQ/">FAQ do systemd</a></li>
<li><a rel="nofollow" class="external text" href="https://systemd.io/TIPS_AND_TRICKS/">Dicas e truques do systemd</a></li>
</ul>
</li>
<li><span class="plainlinks archwiki-template-man" title="$ man 1 systemd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.1">systemd(1)</a></span></li>
<li>Outras distribuições:
<ul>
<li><a href="https://wiki.gentoo.org/wiki/Systemd" class="extiw" title="gentoo:Systemd">Gentoo:Systemd</a></li>
<li><a href="https://fedoraproject.org/wiki/Systemd" class="extiw" title="fedora:Systemd">Fedora:Systemd</a></li>
<li><a href="https://fedoraproject.org/wiki/How_to_debug_Systemd_problems" class="extiw" title="fedora:How to debug Systemd problems">Fedora:How to debug Systemd problems</a></li>
<li><a href="https://fedoraproject.org/wiki/SysVinit_to_Systemd_Cheatsheet" class="extiw" title="fedora:SysVinit to Systemd Cheatsheet">Fedora:SysVinit to Systemd Cheatsheet</a></li>
<li><a href="https://wiki.debian.org/systemd" class="extiw" title="debian:systemd">Debian:systemd</a></li>
</ul>
</li>
<li>
<a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/systemd.html">História do blogue do Lennart</a>, <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/systemd-update.html">atualização 1</a>, <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/systemd-update-2.html">atualização 2</a>, <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/systemd-update-3.html">atualização 3</a>, <a rel="nofollow" class="external text" href="http://0pointer.de/blog/projects/why.html">resumo</a>
</li>
<li><a rel="nofollow" class="external text" href="https://containersolutions.github.io/runbooks/posts/linux/debug-systemd-service-units">Depurar Serviços Systemd</a></li>
<li><a rel="nofollow" class="external text" href="http://0pointer.de/public/systemd-ebook-psankar.pdf">systemd para administradores (PDF)</a></li>
<li><a rel="nofollow" class="external text" href="https://www.digitalocean.com/community/tutorials/how-to-use-systemctl-to-manage-systemd-services-and-units">Como usar o systemctl para gerenciar serviços e units do systemd</a></li>
<li><a rel="nofollow" class="external text" href="https://dvdhrm.wordpress.com/2013/08/24/session-management-on-linux/">Gerenciamento de sessão com systemd-logind</a></li>
<li><a href="../en/Emacs.html#Syntax_highlighting_for_systemd_Files" title="Emacs">Realce de sintaxe do Emacs para arquivos do systemd</a></li>
<li>Artigo introdutório em <a rel="nofollow" class="external text" href="http://www.h-online.com/open/features/Control-Centre-The-systemd-Linux-init-system-1565543.html">duas</a> <a rel="nofollow" class="external text" href="http://www.h-online.com/open/features/Booting-up-Tools-and-tips-for-systemd-1570630.html">partes</a> na revista <i>The H Open</i>.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../pt/Category:Init.html" title="Category:Init (Português)">Init (Português)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Systemd_(Portugu%C3%AAs)&amp;oldid=807026">https://wiki.archlinux.org/index.php?title=Systemd_(Português)&amp;oldid=807026</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 April 2024, at 12:09.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
