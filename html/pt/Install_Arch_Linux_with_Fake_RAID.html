<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Install Arch Linux with Fake RAID (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Install_Arch_Linux_with_Fake_RAID_Português rootpage-Install_Arch_Linux_with_Fake_RAID_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id='toc-O_que_é_"Fake_RAID"' class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href='#O_que_%C3%A9_"Fake_RAID"'>
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>O que é "Fake RAID"</div>
		</a>
		
		<ul id='toc-O_que_é_"Fake_RAID"-sublist' class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-História" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Hist%C3%B3ria">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>História</div>
		</a>
		
		<ul id="toc-História-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Preparação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Prepara%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Preparação</div>
		</a>
		
			<button aria-controls="toc-Preparação-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Preparação subsection</span>
			</button>
		
		<ul id="toc-Preparação-sublist" class="vector-toc-list">
			<li id="toc-Configure_conjuntos_de_RAID" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configure_conjuntos_de_RAID">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Configure conjuntos de RAID</div>
			</a>
			
			<ul id="toc-Configure_conjuntos_de_RAID-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Inicialize_o_instalador" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Inicialize_o_instalador">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Inicialize o instalador</div>
		</a>
		
		<ul id="toc-Inicialize_o_instalador-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Exemplo_de_instalação_do_MBR_usando_mdadm_e_Intel_FakeRAID" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Exemplo_de_instala%C3%A7%C3%A3o_do_MBR_usando_mdadm_e_Intel_FakeRAID">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Exemplo de instalação do MBR usando mdadm e Intel FakeRAID</div>
		</a>
		
			<button aria-controls="toc-Exemplo_de_instalação_do_MBR_usando_mdadm_e_Intel_FakeRAID-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Exemplo de instalação do MBR usando mdadm e Intel FakeRAID subsection</span>
			</button>
		
		<ul id="toc-Exemplo_de_instalação_do_MBR_usando_mdadm_e_Intel_FakeRAID-sublist" class="vector-toc-list">
			<li id="toc-Inicie_o_dmraid" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Inicie_o_dmraid">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Inicie o dmraid</div>
			</a>
			
			<ul id="toc-Inicie_o_dmraid-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-GRUB2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#GRUB2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>GRUB2</div>
			</a>
			
			<ul id="toc-GRUB2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solução_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Solu%C3%A7%C3%A3o_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Solução de problemas</div>
		</a>
		
			<button aria-controls="toc-Solução_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solução de problemas subsection</span>
			</button>
		
		<ul id="toc-Solução_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-Iniciando_com_um_arranjo_corrompido" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Iniciando_com_um_arranjo_corrompido">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Iniciando com um arranjo corrompido</div>
			</a>
			
			<ul id="toc-Iniciando_com_um_arranjo_corrompido-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Erro:_Não_foi_possível_determinar_o_número_principal/menor_do_dispositivo_raiz" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Erro:_N%C3%A3o_foi_poss%C3%ADvel_determinar_o_n%C3%BAmero_principal/menor_do_dispositivo_raiz">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Erro: Não foi possível determinar o número principal/menor do dispositivo raiz</div>
			</a>
			
			<ul id="toc-Erro:_Não_foi_possível_determinar_o_número_principal/menor_do_dispositivo_raiz-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Espelho_dmraid_falha_ao_ativar" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Espelho_dmraid_falha_ao_ativar">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Espelho dmraid falha ao ativar</div>
			</a>
			
			<ul id="toc-Espelho_dmraid_falha_ao_ativar-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Nenhum_dispositivo_de_bloco_para_partições_na_matriz_RAID_existente" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Nenhum_dispositivo_de_bloco_para_parti%C3%A7%C3%B5es_na_matriz_RAID_existente">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Nenhum dispositivo de bloco para partições na matriz RAID existente</div>
			</a>
			
			<ul id="toc-Nenhum_dispositivo_de_bloco_para_partições_na_matriz_RAID_existente-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Veja também</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Install Arch Linux with Fake RAID (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 3 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-3" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">3 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Install_Arch_Linux_with_Fake_RAID.html" title="Install Arch Linux with Fake RAID – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Fake_RAID_%E3%81%A7%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" title="Fake RAID でインストール – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Install_Arch_Linux_with_Fake_RAID" title="Install Arch Linux with Fake RAID – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Install_Arch_Linux_with_Fake_RAID.html" title="Install Arch Linux with Fake RAID">Install Arch Linux with Fake RAID</a>. Data da última tradução: 2022-08-26. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_with_Fake_RAID&amp;diff=0&amp;oldid=704676">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../en/LVM_on_software_RAID.html" class="mw-redirect" title="Installing with Software RAID or LVM">Instalando com Software RAID ou LVM</a></li>
<li><a href="../en/Convert_a_single_drive_system_to_RAID.html" title="Convert a single drive system to RAID">Converter um sistema de unidade única para RAID</a></li>
<li><a href="../pt/Installation_guide.html" class="mw-redirect" title="Guia de instalação">Guia de instalação</a></li>
</ul>
</div>
<p>O objetivo deste guia é permitir o uso de um conjunto RAID criado pelo controlador RAID BIOS integrado e, assim, permitir a inicialização dupla do Linux e do Windows a partir de partições <b>dentro</b> do conjunto RAID usando o GRUB. Ao usar o chamado <i>fake RAID</i> ou <i>host RAID</i>, os conjuntos de discos são alcançados em <code>/dev/mapper/nome-do-chipset_nome-aleatório</code> e não em <code>/dev/sd<i>X</i></code> .
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="O_que_.C3.A9_.22Fake_RAID.22"></span><span class="mw-headline" id='O_que_é_"Fake_RAID"'>O que é "Fake RAID"</span>
</h2>
<p>Segundo a <a href="https://en.wikipedia.org/wiki/pt:RAID" class="extiw" title="wikipedia:pt:RAID">Wikipedia</a>:
</p>
<dl><dd>O RAID baseado em sistema operacional nem sempre protege o processo de inicialização e geralmente é impraticável em versões de desktop do Windows. Os controladores RAID de hardware são caros e proprietários. Para preencher essa lacuna, foram introduzidos "controladores RAID" baratos que não contêm um chip controlador RAID, mas simplesmente um chip controlador de disco padrão com firmware e drivers especiais. Durante a inicialização do estágio inicial, o RAID é implementado pelo firmware. Quando um kernel de sistema operacional em modo protegido, como Linux ou uma versão moderna do Microsoft Windows, é carregado, os drivers assumem o controle.</dd></dl>
<dl><dd>Esses controladores são descritos por seus fabricantes como controladores RAID, e raramente fica claro para os compradores que o ônus do processamento RAID é suportado pela unidade de processamento central do computador host - e não pelo próprio controlador RAID - introduzindo assim a sobrecarga de CPU acima mencionada que controladores de hardware não sofrem. Os controladores de firmware geralmente só podem usar certos tipos de discos rígidos em suas matrizes RAID (por exemplo, SATA para Intel Matrix RAID, pois não há suporte SCSI nem PATA em pontes sul Intel ICH modernas; no entanto, os fabricantes de placas-mãe implementam controladores RAID fora da ponte sul em alguns placas-mãe). Antes de sua introdução, um "controlador RAID" implicava que o controlador fazia o processamento, e o novo tipo tornou-se conhecido em círculos com conhecimento técnico como "fake RAID", embora o próprio RAID seja implementado corretamente. Adaptec os chama de "host RAID".</dd></dl>
<p>Veja também <a rel="nofollow" class="external text" href="https://help.ubuntu.com/community/FakeRaidHowto">Guia de FakeRaid - Documentação Comunitária do Ubuntu</a> para mais informações.
</p>
<p>Apesar da terminologia, "fake RAID" via <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dmraid">dmraid</a></span> é uma implementação robusta de software RAID que oferece um sistema sólido para espelhar ou distribuir dados em vários discos com sobrecarga insignificante para qualquer sistema moderno. <i>dmraid</i> é comparável a <i>mdadm</i> (RAID de software Linux puro) com o benefício adicional de poder reconstruir completamente uma unidade após uma falha <b>antes</b> do sistema ser inicializado. No entanto, esteja ciente de que nem todas as implementações de BIOS RAID suportam a reconstrução de unidade. Em vez disso, eles contam com software não-linux para realizar a reconstrução. Se o seu sistema não puder reconstruir uma unidade no utilitário de configuração do BIOS RAID, você é fortemente encorajado a usar mdraid (puro Linux Software Raid via mdadm - veja <a href="../en/RAID.html" title="RAID">RAID</a>) em vez de dmraid, ou você não conseguirá reconstruir uma matriz em caso de uma falha de unidade - ou incapaz de recuperar informações de sua matriz em caso de falha de placa-mãe sem muito trabalho adicional.
</p>
<h2>
<span id="Hist.C3.B3ria"></span><span class="mw-headline" id="História">História</span>
</h2>
<p>No Linux 2.4, a estrutura do kernel ATARAID forneceu suporte para fake RAID (RAID de software assistido pelo BIOS). Para Linux 2.6, o framework device-mapper pode, entre outras coisas legais como <a href="../en/LVM.html" title="LVM">LVM</a> e EVMS, fazer o mesmo tipo de trabalho que ATARAID em 2.4. Embora o novo código que lida com a E/S RAID ainda seja executado no kernel, o mapeador de dispositivos geralmente é configurado por um aplicativo de espaço do usuário. Ficou claro que ao usar o mapeador de dispositivos para RAID, a detecção iria para o espaço do usuário.
</p>
<p>Heinz Maulshagen criou a ferramenta dmraid para detectar conjuntos RAID e criar mapeamentos para eles. Os controladores suportados são (na maioria baratos) controladores RAID IDE/SATA falsos que contêm funções do BIOS. Exemplos comuns incluem: controladores Promise FastTrak; High Point HPT37x; Intel Matriz RAID; Silicon Image Medley; e NVIDIA nForce.
</p>
<h2>
<span id="Prepara.C3.A7.C3.A3o"></span><span class="mw-headline" id="Preparação">Preparação</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Faça backup de todos os dados antes de mexer com RAID. O que você faz com seu hardware é apenas sua própria culpa. Os dados em faixas RAID são altamente vulneráveis a falhas de disco. Crie backups regulares ou considere usar conjuntos de espelhos. <b>Considere-se avisado!</b>
</div>
<ul>
<li>Abra quaisquer guias necessários do (<a href="../pt/Installation_guide.html" class="mw-redirect" title="Guia de instalação">Guia de instalação</a>) em outra máquina. Se você não tiver acesso a outra máquina, imprima-os.</li>
<li>Baixe a imagem de instalação do Arch Linux mais recente.</li>
<li>Faça backup de todos os arquivos importantes, pois tudo nas partições de destino será destruído.</li>
</ul>
<h4><span class="mw-headline" id="Configure_conjuntos_de_RAID">Configure conjuntos de RAID</span></h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Se suas unidades ainda não estiverem configuradas como RAID e o Windows já estiver instalado, alternar para "RAID" pode fazer com que o Windows fique em tela azul durante a inicialização.<a rel="nofollow" class="external autonumber" href="https://support.microsoft.com/en-us/topic/error-message-occurs-after-you-change-the-sata-mode-of-the-boot-drive-0e3ab9b8-99aa-c2b3-1f27-dc9eaf58a14b">[1]</a>
</div>
<ul>
<li>Entre na configuração do BIOS e ative o controlador RAID.
<ul><li>O BIOS pode conter uma opção para configurar unidades SATA como "IDE", "AHCI" ou "RAID"; certifique-se de que "RAID" esteja selecionado.</li></ul>
</li>
<li>Salve e saia da configuração do BIOS. Durante a inicialização, entre no utilitário de configuração RAID.
<ul><li>O utilitário RAID geralmente é acessível através do menu de inicialização (geralmente F8, F10 ou CTRL+I) ou enquanto o controlador RAID está inicializando.</li></ul>
</li>
<li>Use o utilitário de configuração RAID para criar conjuntos de faixas/espelhos (<i>stripe/mirror</i>) preferidos.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Consulte a documentação da sua placa-mãe para obter detalhes. O procedimento exato pode variar.</div>
<h2><span class="mw-headline" id="Inicialize_o_instalador">Inicialize o instalador</span></h2>
<p>Consulte <a href="../pt/Installation_guide.html#Pr%C3%A9-instala%C3%A7%C3%A3o" class="mw-redirect" title="Guia de instalação">Guia de instalação#Pré-instalação</a> para obter detalhes.
</p>
<h2>
<span id="Exemplo_de_instala.C3.A7.C3.A3o_do_MBR_usando_mdadm_e_Intel_FakeRAID"></span><span class="mw-headline" id="Exemplo_de_instalação_do_MBR_usando_mdadm_e_Intel_FakeRAID">Exemplo de instalação do MBR usando mdadm e Intel FakeRAID</span>
</h2>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Tango-edit-clear.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b></p>
<div>
<b>Reason:</b> Veja <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> (Discuss in <a href="../en/Talk:Install_Arch_Linux_with_Fake_RAID.html" title="Talk:Install Arch Linux with Fake RAID">Talk:Install Arch Linux with Fake RAID</a>)</div>
</div>
<p>Isso aqui porque passei horas fazendo isso funcionar, porque há muita informação por aí sobre diferentes maneiras de fazê-lo, além de informações desatualizadas. Ele pode precisar ser integrado a esta página melhor, com mais explicações e sintaxe da wiki do Arch, mas estou encerrando isso neste momento. Este é um dump de linha de comando básico que mostra uma configuração RAID bem-sucedida usando a estrutura de partição MBR.
</p>
<p>Parece que, uma vez que você cria o array no Intel util, ele grava os metadados do raid. Portanto, a montagem/criação de um array não precisa acontecer. Chamei meu array de ZERO no Intel util e você pode vê-lo neste exemplo.
</p>
<p>Estou deixando todo o exemplo de instalação, pois mostra quando configurar as coisas durante a instalação. Você vai ter que modificar algumas coisas para que funcionem, não copie e cole!
</p>
<pre>ls /dev/md/
parted /dev/md/ZERO_0
mklabel msdos
mkpart primary ext4 1MiB 100MiB
set 1 boot on
mkpart primary ext4 100MiB 16.5GiB
mkpart primary linux-swap 16.5GiB 100%
</pre>
<p>Só para ver as mudanças:
</p>
<pre>fdisk -l /dev/md/ZERO_0
</pre>
<p>Crie o sistema de arquivos, o swap e ative-o
</p>
<pre>mkfs.ext4 /dev/md/ZERO_0p1
mkfs.ext4 /dev/md/ZERO_0p2
mkswap /dev/md/ZERO_0p3
swapon /dev/md/ZERO_0p3
mount /dev/md/ZERO_0p2 /mnt
mkdir -p /mnt/boot
mount /dev/md/ZERO_0p1 /mnt/boot/
nano /etc/pacman.conf
</pre>
<p>Descomente multilib em x64 (por que não) (faça depois do chroot também)
</p>
<pre>pacstrap -i /mnt base base-devel
genfstab -U /mnt &gt; /mnt/etc/fstab
cat /mnt/etc/fstab
nano /mnt/etc/fstab
</pre>
<p>Substitua UUIDs por (isso pode ser opcional):
</p>
<pre>/dev/md/ZERO_0p1
/dev/md/ZERO_0p2
/dev/md/ZERO_0p3
mdadm --detail --scan &gt;&gt; /mnt/etc/mdadm.conf
</pre>
<p>Entre em chroot para configuração
</p>
<pre>arch-chroot /mnt /bin/bash
nano /etc/locale.gen
</pre>
<p>pt_BR.UTF-8 UTF-8
</p>
<pre>nano /etc/locale.conf
</pre>
<p>LANG=pt_BR.UTF-8
</p>
<pre>locale-gen pt-BR pt_BR.UTF-8
tzselect
ln -sf /usr/share/zoneinfo/America/Sao_Paulo /etc/localtime
</pre>
<p>Trabalhe em algumas coisas do GRUB
</p>
<pre>pacman -Sv grub
nano /etc/default/grub 
</pre>
<ul><li>Descomente GRUB_DISABLE_LINUX_UUID=true</li></ul>
<p>Coisas do RAID
</p>
<pre>cat /etc/mdadm.conf
nano /etc/mkinitcpio.conf
</pre>
<p>Adicione mdadm_udev em HOOKS
</p>
<pre>HOOKS="base udev autodetect modconf block <b>mdadm_udev</b> filesystems keyboard fsck"
</pre>
<p>Adicione /sbin/mdmon em BINARIES&lt;ref&gt;<a rel="nofollow" class="external free" href="https://bbs.archlinux.org/viewtopic.php?id=137058">https://bbs.archlinux.org/viewtopic.php?id=137058</a>&lt;/ref&gt;
</p>
<pre>BINARIES="/sbin/mdmon"
</pre>
<p>Regenere-o
</p>
<pre>mkinitcpio -p linux
</pre>
<pre>grub-install --recheck /dev/md/ZERO_0
grub-mkconfig -o /boot/grub/grub.cfg
</pre>
<pre>cat /boot/grub/grub.cfg
</pre>
<pre>echo <i>seu_hostname</i> &gt; /etc/hostname
nano /etc/hosts
systemctl enable dhcpcd@enp13s0.service
exit
umount -R /mnt
reboot
</pre>
<p>Remova o CD live
</p>
<h3><span class="mw-headline" id="Inicie_o_dmraid">Inicie o dmraid</span></h3>
<p>Inicie o "device-mapper" e procure os arranjos RAID:
</p>
<pre># modprobe dm_mod
# dmraid -ay
# ls -la /dev/mapper/
</pre>
<p>Exemplo de saída:
</p>
<pre>/dev/mapper/control            &lt;- Criado pelo device-mapper; se presente, o mapeador de dispositivo provavelmente está funcionando
/dev/mapper/sil_aiageicechah   &lt;- O arranjo RAID na controladora Silicon Image
/dev/mapper/sil_aiageicechah1  &lt;- Primeira partição nesse arranjo RAID
</pre>
<p>Se houver apenas um arquivo (<code>/dev/mapper/control</code>), verifique se o módulo do seu chipset está carregado com <code>lsmod</code>. Se estiver carregado, então o <i>dmraid</i> não suporta essa controladora, ou não existem arranjos RAID no sistema (verifique a BIOS RAID novamente). Se tudo estiver correto, então você será forçado a utilizar <a href="../en/LVM_on_software_RAID.html" class="mw-redirect" title="Installing with Software RAID or LVM">Software RAID</a> (não será possível fazer Dual Boot com essa controladora).
</p>
<p>Se o módulo do seu chipset não foi carregado, faça-o agora. Como no exemplo:
</p>
<pre># modprobe sata_sil
</pre>
<p>Veja <code>/lib/modules/`uname -r`/kernel/drivers/ata/</code> para os drivers disponíveis.
</p>
<p>Para testar os arranjos raid:
</p>
<pre># dmraid -tay
</pre>
<h3><span class="mw-headline" id="GRUB2">GRUB2</span></h3>
<p>Consulte <a href="../en/GRUB.html" class="mw-redirect" title="GRUB2">GRUB2</a> para obter detalhes sobre como configurar o GRUB2. <i>grub-bios</i> funciona fora da caixa com partições dm-raid:
</p>
<pre>$ grub-install --target=i386-pc --recheck --debug /dev/mapper/sil_aiageicechah
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se <code>GRUB_DISABLE_LINUX_UUID=true</code> não estiver definido, GRUB2 irá gerar linhas com <code>root=UUID=...</code> resultando na montagem de um lado de um array RAID 1 espelhado.</div>
<p>(Opcional) Instale o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=os-prober">os-prober</a></span> se você tiver outro sistema operacional como o Windows.
</p>
<pre>$ grub-mkconfig -o /boot/grub/grub.cfg
</pre>
<p>Isso é tudo, <i>grub-mkconfig</i> irá gerar o configure automaticamente. Você pode editar <code>/etc/default/grub</code> para modificar a configuração (tempo limite, cor, etc) antes do grub-mkconfig.
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3><span class="mw-headline" id="Iniciando_com_um_arranjo_corrompido">Iniciando com um arranjo corrompido</span></h3>
<p>Uma desvantagem do uso de Fake RAID no GNU/Linux é que o <b>dmraid</b> é, atualmente, incapaz de lidar com arranjos degradados e se recusa a ativar. Nesse cenário, é preciso resolver o problema através de outro sistema operacional (por exemplo o Windows) ou através do utilitário do chipset RAID.
</p>
<p>Como alternativa, se estiver usando um array espelhado (RAID 1), os usuários podem ignorar temporariamente o <i>dmraid</i> durante o processo de inicialização e inicializar a partir de uma única unidade:
</p>
<ol>
<li>Edite a linhe <b>kernel</b> no menu do <a href="../pt/GRUB.html" title="GRUB (Português)">GRUB</a>
<ol>
<li>Remova as referencias aos dispositivos dmriad (exemplo mude <code>/dev/mapper/raidSet1</code> para <code>/dev/sda1</code>)</li>
<li>Acrescente <code>disablehooks=dmraid</code> para prevenir um <i>kernel panic</i> se o dmraid descobrir o arranjo degradado</li>
</ol>
</li>
<li>Inicie o sistema</li>
</ol>
<h3>
<span id="Erro:_N.C3.A3o_foi_poss.C3.ADvel_determinar_o_n.C3.BAmero_principal.2Fmenor_do_dispositivo_raiz"></span><span class="mw-headline" id="Erro:_Não_foi_possível_determinar_o_número_principal/menor_do_dispositivo_raiz">Erro: Não foi possível determinar o número principal/menor do dispositivo raiz</span>
</h3>
<p>Se ocorrer uma falha de inicialização após a atualização do kernel, onde o processo de inicialização não consegue determinar o número principal/menor do dispositivo raiz, isso pode ser apenas um problema de tempo (ou seja, <code>dmraid -ay</code> pode ser chamado antes de /dev/sd* estar totalmente configurado e detectado). Isso pode afetar as imagens de kernel normal e LTS. A inicialização da imagem do kernel 'Fallback' deve funcionar. O erro será algo assim:
</p>
<pre>Activating dmraid arrays...
no block devices found
Waiting 10 seconds for device /dev/mapper/nvidia_baaccajap5
Root device '/dev/mapper/nvidia_baaccajap5' doesn't exist attempting to create it.
Error: Unable to determine major/minor number of root device '/dev/mapper/nvidia_baaccajap5'
</pre>
<p>Para contornar este problema:
</p>
<dl><dd><ul>
<li>inicialize o kernel Fallback</li>
<li>insira o hook <code>sleep</code> na linha <code>HOOKS</code> de <code>/etc/mkinitcpio.conf</code> após o hook <code>udev</code>, assim:</li>
</ul></dd></dl>
<pre>HOOKS="base udev <b>sleep</b> autodetect block dmraid filesystems"
</pre>
<dl><dd><ul><li>reconstrua a imagem do kernel e reinicie.</li></ul></dd></dl>
<h3><span class="mw-headline" id="Espelho_dmraid_falha_ao_ativar">Espelho dmraid falha ao ativar</span></h3>
<p>Tudo acima funciona corretamente na primeira vez, mas quando você reinicia o <i>dmraid</i> não consegue encontrar o array?
</p>
<p>Isso ocorre porque o software raid do Linux (<i>mdadm</i>) já tentou montar o array fake RAID durante a inicialização do sistema e o deixou em um estado desmontável. Para evitar que <i>mdadm</i> seja executado, remova a regra do udev responsável:
</p>
<pre># cd /lib/udev/rules.d
# mkdir disabled
# mv 64-md-raid.rules disabled/
# reboot
</pre>
<h3>
<span id="Nenhum_dispositivo_de_bloco_para_parti.C3.A7.C3.B5es_na_matriz_RAID_existente"></span><span class="mw-headline" id="Nenhum_dispositivo_de_bloco_para_partições_na_matriz_RAID_existente">Nenhum dispositivo de bloco para partições na matriz RAID existente</span>
</h3>
<p>Se o seu array existente, configurado antes de tentar instalar o Arch, aparece em <code>/dev/mapper/nome_do_raid</code>, mas não tem partições (<code>nome_do_raid1</code>, etc) verifique novamente o status de suas partições RAID.
</p>
<p>O Arch pode não criar dispositivos de bloco para partições <i>que funcionem em outro sistema operacional</i> se houver certos problemas, mesmo pequenos.
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gparted">gparted</a></span> é útil para diagnosticar e reparar a maioria dos problemas. Infelizmente, você pode ter que reparticionar do zero.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=22038">Tópico do fórum relacionado</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Installation_process.html" title="Category:Installation process (Português)">Installation process (Português)</a></li>
<li><a href="../pt/Category:Storage_virtualization.html" title="Category:Storage virtualization (Português)">Storage virtualization (Português)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_with_Fake_RAID_(Portugu%C3%AAs)&amp;oldid=765442">https://wiki.archlinux.org/index.php?title=Install_Arch_Linux_with_Fake_RAID_(Português)&amp;oldid=765442</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 28 January 2023, at 01:18.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
