<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Makepkg (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Makepkg_Português rootpage-Makepkg_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Configuração" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configura%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Configuração</div>
		</a>
		
			<button aria-controls="toc-Configuração-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuração subsection</span>
			</button>
		
		<ul id="toc-Configuração-sublist" class="vector-toc-list">
			<li id="toc-Informação_do_empacotador" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Informa%C3%A7%C3%A3o_do_empacotador">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.1</span>Informação do empacotador</div>
			</a>
			
			<ul id="toc-Informação_do_empacotador-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Saída_de_pacote" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Sa%C3%ADda_de_pacote">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.2</span>Saída de pacote</div>
			</a>
			
			<ul id="toc-Saída_de_pacote-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Verificação_de_assinatura" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Verifica%C3%A7%C3%A3o_de_assinatura">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">1.3</span>Verificação de assinatura</div>
			</a>
			
			<ul id="toc-Verificação_de_assinatura-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Uso" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Uso">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Uso</div>
		</a>
		
		<ul id="toc-Uso-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Dicas_e_truques" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Dicas_e_truques">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Dicas e truques</div>
		</a>
		
			<button aria-controls="toc-Dicas_e_truques-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dicas e truques subsection</span>
			</button>
		
		<ul id="toc-Dicas_e_truques-sublist" class="vector-toc-list">
			<li id="toc-Reduzir_tempos_de_download_e_extração_de_fontes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Reduzir_tempos_de_download_e_extra%C3%A7%C3%A3o_de_fontes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Reduzir tempos de download e extração de fontes</div>
			</a>
			
			<ul id="toc-Reduzir_tempos_de_download_e_extração_de_fontes-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Compilando_binários_otimizados" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Compilando_bin%C3%A1rios_otimizados">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Compilando binários otimizados</div>
			</a>
			
			<ul id="toc-Compilando_binários_otimizados-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Melhorando_os_tempos_de_compilação" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Melhorando_os_tempos_de_compila%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Melhorando os tempos de compilação</div>
			</a>
			
			<ul id="toc-Melhorando_os_tempos_de_compilação-sublist" class="vector-toc-list">
				<li id="toc-Compilação_paralela" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Compila%C3%A7%C3%A3o_paralela">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.1</span>Compilação paralela</div>
			</a>
			
			<ul id="toc-Compilação_paralela-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Compilando_de_arquivos_na_memória" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Compilando_de_arquivos_na_mem%C3%B3ria">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.2</span>Compilando de arquivos na memória</div>
			</a>
			
			<ul id="toc-Compilando_de_arquivos_na_memória-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_cache_de_compilação" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Usando_cache_de_compila%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3.3</span>Usando cache de compilação</div>
			</a>
			
			<ul id="toc-Usando_cache_de_compilação-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Gerar_novos_checksums" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Gerar_novos_checksums">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Gerar novos checksums</div>
			</a>
			
			<ul id="toc-Gerar_novos_checksums-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usar_outros_algoritmos_de_compressão" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usar_outros_algoritmos_de_compress%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Usar outros algoritmos de compressão</div>
			</a>
			
			<ul id="toc-Usar_outros_algoritmos_de_compressão-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_vários_núcleos_na_compressão" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_v%C3%A1rios_n%C3%BAcleos_na_compress%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Usando vários núcleos na compressão</div>
			</a>
			
			<ul id="toc-Usando_vários_núcleos_na_compressão-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mostrar_pacotes_com_um_empacotador_específico" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mostrar_pacotes_com_um_empacotador_espec%C3%ADfico">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Mostrar pacotes com um empacotador específico</div>
			</a>
			
			<ul id="toc-Mostrar_pacotes_com_um_empacotador_específico-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Compilar_pacotes_32_bits_em_um_sistema_64_bits" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Compilar_pacotes_32_bits_em_um_sistema_64_bits">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.8</span>Compilar pacotes 32 bits em um sistema 64 bits</div>
			</a>
			
			<ul id="toc-Compilar_pacotes_32_bits_em_um_sistema_64_bits-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Assinatura_autônoma_de_pacote" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Assinatura_aut%C3%B4noma_de_pacote">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.9</span>Assinatura autônoma de pacote</div>
			</a>
			
			<ul id="toc-Assinatura_autônoma_de_pacote-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-URIs_magnéticos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#URIs_magn%C3%A9ticos">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.10</span>URIs magnéticos</div>
			</a>
			
			<ul id="toc-URIs_magnéticos-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solução_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Solu%C3%A7%C3%A3o_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Solução de problemas</div>
		</a>
		
			<button aria-controls="toc-Solução_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solução de problemas subsection</span>
			</button>
		
		<ul id="toc-Solução_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-Especificando_diretório_de_instalação_para_pacotes_baseados_em_QMAKE" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Especificando_diret%C3%B3rio_de_instala%C3%A7%C3%A3o_para_pacotes_baseados_em_QMAKE">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Especificando diretório de instalação para pacotes baseados em QMAKE</div>
			</a>
			
			<ul id="toc-Especificando_diretório_de_instalação_para_pacotes_baseados_em_QMAKE-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-AVISO:_O_pacote_contém_referência_para_$srcdir" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#AVISO:_O_pacote_cont%C3%A9m_refer%C3%AAncia_para_$srcdir">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>AVISO: O pacote contém referência para $srcdir</div>
			</a>
			
			<ul id="toc-AVISO:_O_pacote_contém_referência_para_$srcdir-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Makepkg_falha_em_baixar_dependências_quando_por_trás_de_um_proxy" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Makepkg_falha_em_baixar_depend%C3%AAncias_quando_por_tr%C3%A1s_de_um_proxy">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Makepkg falha em baixar dependências quando por trás de um proxy</div>
			</a>
			
			<ul id="toc-Makepkg_falha_em_baixar_dependências_quando_por_trás_de_um_proxy-sublist" class="vector-toc-list">
				<li id="toc-Habilitar_proxy_definindo_sua_URL_no_XferCommand" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Habilitar_proxy_definindo_sua_URL_no_XferCommand">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.1</span>Habilitar proxy definindo sua URL no XferCommand</div>
			</a>
			
			<ul id="toc-Habilitar_proxy_definindo_sua_URL_no_XferCommand-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Habilitar_proxy_via_env_keep_do_sudoers" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Habilitar_proxy_via_env_keep_do_sudoers">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3.2</span>Habilitar proxy via env_keep do sudoers</div>
			</a>
			
			<ul id="toc-Habilitar_proxy_via_env_keep_do_sudoers-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Makepkg_falha,_mas_make_obtém_sucesso" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Makepkg_falha,_mas_make_obt%C3%A9m_sucesso">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Makepkg falha, mas make obtém sucesso</div>
			</a>
			
			<ul id="toc-Makepkg_falha,_mas_make_obtém_sucesso-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Veja também</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Makepkg (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Makepkg.html" title="Makepkg – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Makepkg.html" title="Makepkg – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/Makepkg.html" title="Makepkg – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Makepkg" title="Makepkg – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Makepkg.html" title="Makepkg – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Makepkg" title="Makepkg – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="pt" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Makepkg.html" title="Makepkg">Makepkg</a>. Data da última tradução: 2022-08-05. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Makepkg&amp;diff=0&amp;oldid=738997">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../pt/Creating_packages.html" class="mw-redirect" title="Criando pacotes">Criando pacotes</a></li>
<li><a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILD</a></li>
<li><a href="../pt/Arch_User_Repository.html" title="Arch User Repository (Português)">Arch User Repository</a></li>
<li><a href="../pt/Pacman.html" title="Pacman (Português)">pacman</a></li>
<li><a href="../pt/Official_repositories.html" class="mw-redirect" title="Repositórios oficiais">Repositórios oficiais</a></li>
<li><a href="../pt/Arch_build_system.html" class="mw-redirect" title="Arch Build System (Português)">Arch Build System</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/blob/master/scripts/makepkg.sh.in">makepkg</a> é um script usado para automatizar a compilação de pacotes. Os requisitos para usar o script são uma plataforma tipo Unix capaz de compilar e um <a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILD</a>. 
</p>
<p>O <i>makepkg</i> é fornecido pelo pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman">pacman</a></span>.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Configura.C3.A7.C3.A3o"></span><span class="mw-headline" id="Configuração">Configuração</span>
</h2>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 5 makepkg.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/makepkg.conf.5">makepkg.conf(5)</a></span> para detalhes sobre as opções de configuração do <i>makepkg</i>.
</p>
<p>A configuração do sistema está disponível em <code>/etc/makepkg.conf</code>, mas alterações específicas para cada usu[ario podem ser feitas em <code>$XDG_CONFIG_HOME/pacman/makepkg.conf</code> ou <code>~/.makepkg.conf</code>. É recomendado revisar a configuração antes de compilar pacotes.
</p>
<h3>
<span id="Informa.C3.A7.C3.A3o_do_empacotador"></span><span class="mw-headline" id="Informação_do_empacotador">Informação do empacotador</span>
</h3>
<p>Cada pacote é marcado com metadados identificando, entre outros, também o <i>empacotador</i>. Por padrão, os pacotes compilados pelo usuário são marcados com <code>Empacotador desconhecido</code>. Se vários usuários estiverem compilando pacotes em um sistema, ou de outra forma estiverem distribuindo os pacotes para outros usuários, é conveniente fornecer contato real. Isso pode ser feito configurando a variável <code>PACKAGER</code> em <code>makepkg.conf</code>.
</p>
<p>Para verificar isso em um pacote instalado:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pacman -Qi <i>pacote</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
Empacotador       : John Doe &lt;john@doe.com&gt;
...
</pre>
<p>Para automaticamente produzir pacotes assinados, defina também a variável <code>GPGKEY</code> em <code>makepkg.conf</code>.
</p>
<h3>
<span id="Sa.C3.ADda_de_pacote"></span><span class="mw-headline" id="Saída_de_pacote">Saída de pacote</span>
</h3>
<p>Por padrão, <i>makepkg</i> cria os <i>tarballs</i> de pacote no diretório atual de trabalho e baixa os dados fonte diretamente para o diretório <code>src/</code>. Caminhos personalizados podem ser configurados, por exemplo, para manter todos os pacotes compilados em <code>~/build/pacotes/</code> e todos os fontes em <code>~/build/fontes/</code>.
</p>
<p>Configure as seguintes variáveis do <code>makepkg.conf</code>, se necessário:
</p>
<ul>
<li>
<code>PKGDEST</code> – diretório para armazenar pacotes resultantes</li>
<li>
<code>SRCDEST</code> – diretório para armazenar dados <a href="../pt/PKGBUILD.html#source" title="PKGBUILD (Português)">fonte</a> (links simbólicos serão colocados em <code>src/</code> se ele aponta para outro lugar)</li>
<li>
<code>SRCPKGDEST</code> – diretório para armazenar os pacotes fontes (compilado com <code>makepkg -S</code>)</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> O diretório <code>PKGDEST</code> pode ser limpado com, p. ex., <code>paccache -c ~/build/pacotes/</code> como descrito em <a href="../pt/Pacman.html#Limpando_o_cache_de_pacotes" title="Pacman (Português)">pacman (Português)#Limpando o cache de pacotes</a>.</div>
<h3>
<span id="Verifica.C3.A7.C3.A3o_de_assinatura"></span><span class="mw-headline" id="Verificação_de_assinatura">Verificação de assinatura</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> A verificação de assinatura implementada no <i>makepkg</i> não usa o chaveiro do pacman; em vez disso, depende do chaveiro do usuário.<a rel="nofollow" class="external autonumber" href="http://allanmcrae.com/2015/01/two-pgp-keyrings-for-package-management-in-arch-linux/">[1]</a>
</div>
<p>Se um arquivo de assinatura na forma de <i>.sig</i> ou <i>.asc</i> é parte do vetor fonte do <a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILD</a>, o <i>makepkg</i> tenta automaticamente <a href="../en/GnuPG.html#Verify_a_signature" title="GnuPG">verificá-la</a>. No caso do chaveiro do usuário não contém a chave pública necessária para verificação de assinatura, o <i>makepkg</i> vai abortar a instalação com uma mensagem de que a chave PGP não pôde ser verificada.
</p>
<p>Se uma chave pública necessária para um pacote está faltando, o <a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILD</a> muito provavelmente vai conter uma entrada <a href="../pt/PKGBUILD.html#validpgpkeys" title="PKGBUILD (Português)">validpgpkeys</a> com os IDs de chaves necessárias. <a href="../en/GnuPG.html#Import_a_public_key" title="GnuPG">Importe-a</a> manualmente, ou localize-a <a href="../en/GnuPG.html#Use_a_keyserver" title="GnuPG">em um servidor de chaves</a> e importe-a de lá. Para temporariamente desabilitar verificação de assinatura, execute o <i>makepkg</i>  com a opção <code>--skippgpcheck</code>.
</p>
<h2><span class="mw-headline" id="Uso">Uso</span></h2>
<p>Antes de continuar, <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">instale</a> o grupo <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=base-devel">base-devel</a></span>. Os pacotes que pertencem a este grupo <b>não</b> são exigidos na lista de dependência de compilação (<i>makedepends</i>) nos arquivos <a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILD</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Certifique-se de que o <a href="../pt/Sudo.html" title="Sudo (Português)">sudo</a> está configurado corretamente para comandos passados para o <a href="../pt/Pacman.html" title="Pacman (Português)">pacman</a>.</li>
<li>Executar <i>makepkg</i> em si como root <a rel="nofollow" class="external text" href="https://lists.archlinux.org/archives/list/pacman-dev@lists.archlinux.org/message/ZLRXMUGXULDHLTGSRYVGVWG3BVATV3OY/">não é permitido</a>.<a rel="nofollow" class="external autonumber" href="https://gitlab.archlinux.org/pacman/pacman/blob/master/NEWS">[2]</a> Além disso, como um <code>PKGBUILD</code> pode conter comandos arbitrários, compilar como root geralmente é considerado inseguro.<a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=67561">[3]</a> Usuários que não possuem acesso a uma conta de usuário comum devem executar o makepkg como o <a rel="nofollow" class="external text" href="http://allanmcrae.com/2015/01/replacing-makepkg-asroot/">usuário <i>nobody</i></a>.</li>
</ul>
</div>
<p>Para compilar um pacote, deve-se primeiro criar um <a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILD</a>, ou um script de compilação, como descrito em <a href="../pt/Creating_packages.html" class="mw-redirect" title="Criando pacotes">Criando pacotes</a>. Scripts existentes estão disponíveis na árvore do <a href="../pt/Arch_build_system.html" title="Arch build system (Português)">Arch Build System</a> <i>(ABS)</i> ou do <a href="../pt/Arch_User_Repository.html" class="mw-redirect" title="AUR (Português)">AUR</a>. Uma vez em posse de um <code>PKGBUILD</code>, altere o diretório no qual está salvo e execute o seguinte comando para compilar o pacote:
</p>
<pre>$ makepkg
</pre>
<p>Se estiverem faltando dependências necessárias, o <i>makepkg</i> emitirá um aviso antes de falhar. Para compilar o pacote e instalar as dependências necessárias, adicione a opção <code>-s/--syncdeps</code>:
</p>
<pre>$ makepkg --syncdeps
</pre>
<p>Adicionar as opções <code>-r</code>/<code>--rmdeps</code> faz com que o <i>makepkg</i> remova as dependências de compilação logo em seguida, já que não são mais necessárias. Se estiver compilando pacotes constantemente, considere usar <a href="../pt/Pacman/Tips_and_tricks.html#Removendo_pacotes_n%C3%A3o_usados_(%C3%B3rf%C3%A3os)" class="mw-redirect" title="Pacman/Dicas e truques">Pacman/Dicas e truques#Removendo pacotes não usados (órfãos)</a> de vez em quando.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Essas dependências devem estar disponíveis nos repositórios configurados; veja <a href="../pt/Pacman.html#Reposit%C3%B3rios_e_espelhos" title="Pacman (Português)">pacman (Português)#Repositórios e espelhos</a> para detalhes. Alternativamente, pode-se instalar manualmente as dependências antes de compilar (<code>pacman -S --asdeps <i>dep1</i> <i>dep2</i></code>).</li>
<li>Apenas valores globais são usados ao instalar dependências, ou seja, qualquer sobrescrita feita em uma função de empacotamento de pacotes divididos não serão sadas.</li>
</ul>
</div>
<p>Uma vez que todas as dependências estejam satisfeitas e os pacotes compilados com sucesso, um arquivo de pacote (<code><i>pkgname</i>-<i>pkgver</i>.pkg.tar.zst</code>) será criado no diretório. Para instalar, use <code>-i</code>/<code>--install</code> (o mesmo que <code>pacman -U <i>pkgname</i>-<i>pkgver</i>.pkg.tar.zst</code>):
</p>
<pre># pacman --install
</pre>
<p>Para limpar arquivos e diretórios restantes, tais como arquivos extraídos para $<code>$srcdir</code>, adicione a opção <code>-c</code>/<code>--clean</code>. Isso é útil para várias compilações do mesmo pacote ou ao atualizar a versão do pacote, enquanto usa o mesmo diretório de compilação. Isso evita arquivos obsoletos e remanescentes de serem carregados para novas compilações:
</p>
<pre>$ makepkg --clean
</pre>
<p>Para mais informações, veja <span class="plainlinks archwiki-template-man" title="$ man 8 makepkg"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/makepkg.8">makepkg(8)</a></span>.
</p>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3>
<span id="Reduzir_tempos_de_download_e_extra.C3.A7.C3.A3o_de_fontes"></span><span class="mw-headline" id="Reduzir_tempos_de_download_e_extração_de_fontes">Reduzir tempos de download e extração de fontes</span>
</h3>
<p>Faça uso de <code>SRCDEST</code>, especialmente ao compilar <a href="../pt/VCS_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes VCS">pacotes VCS</a>, para economizar tempo ao adquirir e desempacotar fontes em recompilações subsequentes.
</p>
<h3>
<span id="Compilando_bin.C3.A1rios_otimizados"></span><span class="mw-headline" id="Compilando_binários_otimizados">Compilando binários otimizados</span>
</h3>
<p>Uma melhoria de desempenho do software empacotado pode ser conseguida ao habilitar otimizações do compilador para a máquina host. A desvantagem é que os binários compilados para uma arquitetura de processador específica não serão executados corretamente em outras máquinas. Nas máquinas x86_64, raramente existem ganhos de desempenho reais significativos que justificariam investir o tempo para reconstruir pacotes oficiais.
</p>
<p>No entanto, é muito fácil reduzir o desempenho usando <i>flags</i> de compilação "não padronizadas". Muitas otimizações de compilação só são úteis em certas situações e não devem ser aplicadas indiscriminadamente em cada pacote. A menos que dados de <i>benchmark</i> estejam disponíveis para provar que algo é mais rápido, há uma chance muito boa de não ser! Os artigos da wiki do Gentoo <a href="https://wiki.gentoo.org/wiki/GCC_optimization" class="extiw" title="gentoo:GCC optimization">otimização do GCC</a> e <a href="https://wiki.gentoo.org/wiki/Safe_CFLAGS" class="extiw" title="gentoo:Safe CFLAGS">CFLAGS seguras</a> (ambos em inglês) fornecem mais informações detalhadas sobre a otimização do compilador.
</p>
<p>As opções passadas para um compilador C/C++ (ex.: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gcc">gcc</a></span> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=clang">clang</a></span>) são controladas pelas variáveis de ambiente <code>CFLAGS</code>, <code>CXXFLAGS</code> e<code>CPPFLAGS</code>. Para usar o sistema de compilação do Arch, o <i>makepkg</i> expõe essas variáveis de ambiente como opções de configuração no <code>makepkg.conf</code>. Os valores padrão são configurados para produzir binários genéricos que podem ser instalados em uma ampla gama de máquinas.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> * Tenha em mente que nem todos os sistemas de compilação usam as variáveis configuradas no <code>makepkg.conf</code>. Por exemplo, <i>cmake</i> ignora a variável de ambiente das opções de pré-processador, <code>CPPFLAGS</code>. Consequentemente, muitos <a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILD</a> contêm soluções alternativas com opções específicas para o sistema de compilação usado pelo software empacotado.
<ul><li>A configuração fornecida com o código fonte no <code>Makefile</code> ou em um argumento específico na linha de comando de compilação tem a preferência e pode potencialmente sobrescrever aquela no <code>makepkg.conf</code>.</li></ul>
</div>
<p>O GCC pode detectar e habilitar automaticamente otimizações seguras específicas para cada arquitetura. Para usar esse recurso, primeiro remova os sinalizadores <code>-march</code> e <code>-mtune</code>, então adicione <code>-march = native</code>. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/makepkg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">CFLAGS="<b>-march=native</b> -O2 -pipe -fno-plt"
CXXFLAGS="${CFLAGS}"</pre>
<p>Para ver quais sinalizadores isso habilita, execute:
</p>
<pre>$ gcc -march=native -v -Q --help=target
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Especificar valores diferentes de <code>-march=native</code> e, então, <code>-Q --help=target</code> <b>não vai</b> funcionar como esperado.<a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1616694#p1616694">[4]</a> Para descobrir quais opções estão realmente habilitadas, passe por uma fase de compilação. Veja <a href="https://wiki.gentoo.org/wiki/Safe_CFLAGS#Manual" class="extiw" title="gentoo:Safe CFLAGS">Gentoo:Safe CFLAGS#Manual</a> para instruções.</div>
<p>A partir do <code>pacman</code> versão 5.2.2, <code>makepkg.conf</code> também inclui substituições para a variável de ambiente <code>RUSTFLAGS</code>, para sinalizadores fornecidos ao compilador Rust. O compilador Rust também pode detectar e habilitar otimizações específicas de arquitetura adicionando <code>-C target-cpu=native</code> ao valor <code>RUSTFLAGS</code> fornecido:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/makepkg.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">RUSTFLAGS="-C opt-level=2 <b>-C target-cpu=native</b>"</pre>
<p>Para ver quais recursos de CPU isso vai habilitar, execute:
</p>
<pre>$ rustc -C target-cpu=native --print cfg
</pre>
<p>Executar <code>--print cfg</code> sem <code>-C target-cpu=native</code> irá imprimir a configuração padrão. O parâmetro <code>opt-level</code> pode ser alterado para <code>3</code>, <code>s</code> ou <code>z</code> conforme desejado. Consulte <a rel="nofollow" class="external text" href="https://doc.rust-lang.org/rustc/codegen-options/index.html#opt-level">a documentação do compilador Rust</a> para obter detalhes.
</p>
<h3>
<span id="Melhorando_os_tempos_de_compila.C3.A7.C3.A3o"></span><span class="mw-headline" id="Melhorando_os_tempos_de_compilação">Melhorando os tempos de compilação</span>
</h3>
<h4>
<span id="Compila.C3.A7.C3.A3o_paralela"></span><span class="mw-headline" id="Compilação_paralela">Compilação paralela</span>
</h4>
<p>O sistema de compilação do <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=make">make</a></span> usa a <a href="../pt/Environment_variables.html" class="mw-redirect" title="Variável de ambiente">variável de ambiente</a> <code>MAKEFLAGS</code> para especificar opções adicionais para o <i>make</i>. A variável também pode ser definida no arquivo <code>makepkg.conf</code>.
</p>
<p>Os usuários com sistemas multi-core/multiprocessados podem especificar o número de trabalhos a serem executados simultaneamente. Isso pode ser realizado com o uso de <i>nproc</i> para determinar o número de processadores disponíveis, ex. <code>MAKEFLAGS="-j$(nproc)"</code>. Alguns <a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILD</a> substituem especificamente isso com <code>-j1</code>, devido a condições de corrida em certas versões ou simplesmente porque não é suportado em primeiro lugar. Os pacotes que não conseguem ser compilados devido a isso devem ser <a href="../pt/Bug_reporting_guidelines.html" class="mw-redirect" title="Diretrizes de relatórios de erro">relatados</a> no rastreador de erros (ou no caso dos pacotes do <a href="../pt/Arch_User_Repository.html" class="mw-redirect" title="AUR (Português)">AUR</a>, ao mantenedor do pacote) depois de ter certeza de que o erro está sendo realmente causado pelo <code>MAKEFLAGS</code>.
</p>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 1 make"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/make.1">make(1)</a></span> para uma lista completa de opções disponíveis.
</p>
<h4>
<span id="Compilando_de_arquivos_na_mem.C3.B3ria"></span><span class="mw-headline" id="Compilando_de_arquivos_na_memória">Compilando de arquivos na memória</span>
</h4>
<p>Como a compilação requer muitas operações de E/S e lidar com arquivos pequenos, mover o diretório de trabalhos para um <a href="../en/Tmpfs.html" title="Tmpfs">tmpfs</a> pode trazer melhorias em tempos de compilação.
</p>
<p>A variável <code>BUILDDIR</code> pode ser temporariamente exportada para <i>makepkg</i> para definir o diretório de compilação para um tmpfs existente. Por exemplo:
</p>
<pre>$ BUILDDIR=/tmp/makepkg makepkg
</pre>
<p>Uma configuração persistente pode ser feita no <code>makepkg.conf</code> descomentando a opção <code>BUILDDIR</code>, que é encontrada no fim da seção <code>BUILD ENVIRONMENT</code> no arquivo padrão <code>/etc/makepkg.conf</code>. Definir esses valores para, por exemplo, <code>BUILDDIR=/tmp/makepkg</code> fará uso do sistema de arquivos temporário <code>/tmp</code> padrão do Arch.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Evite compilar pacotes grandes no tmpfs para evitar ficar sem memória.</li>
<li>O diretório tmpfs deve ser montado sem a opção <code>noexec</code>; do contrário, ele vai impedir que binários sejam executados.</li>
<li>Tenha em mente que pacotes compilados no tmpfs não persistirá após reinicialização. Considere configurar a opção <a href="#Sa%C3%ADda_de_pacote">PKGDEST</a> apropriadamente para mover o pacote compilado automaticamente para um diretório persistente.</li>
</ul>
</div>
<h4>
<span id="Usando_cache_de_compila.C3.A7.C3.A3o"></span><span class="mw-headline" id="Usando_cache_de_compilação">Usando cache de compilação</span>
</h4>
<p>O uso de <a href="../pt/Ccache.html" title="Ccache (Português)">ccache</a> pode melhorar os tempos de compilação ao armazenar em cache os resultados de compilações para uso sucessivo.
</p>
<h3><span class="mw-headline" id="Gerar_novos_checksums">Gerar novos checksums</span></h3>
<p>Instale <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pacman-contrib">pacman-contrib</a></span> e execute o seguinte comando no mesmo diretório que o arquivo PKGBUILD para gerar novas somas de verificação <i>(checksums)</i>:
</p>
<pre>$ updpkgsums
</pre>
<p><code>updpkgsums</code> usa <code>makepkg --geninteg</code> para gerar as somas de verificação. Veja <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1933763#p1933763">esta discussão de fórum</a> para obter mais detalhes.
</p>
<p>As somas de verificação também podem ser obtidos com, por exemplo, <code>sha256sum</code> e adicionados ao vetor <code>sha256sums</code> manualmente.
</p>
<h3>
<span id="Usar_outros_algoritmos_de_compress.C3.A3o"></span><span class="mw-headline" id="Usar_outros_algoritmos_de_compressão">Usar outros algoritmos de compressão</span>
</h3>
<p>Para acelerar o empacotamento e a instalação, com a consequência de ter arquivos de pacotes maiores, altere <code>PKGEXT</code>.
</p>
<p>Por exemplo, o seguinte pula a compressão do arquivo de pacote, o qual vai, por sua vez, não ter a necessidade de descompressão na <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instala">instala</a>ção:
</p>
<pre>$ PKGEXT='.pkg.tar' makepkg
</pre>
<p>Um outro exemplo abaixo mostra o uso do algoritmo lzop, com o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lzop">lzop</a></span> necessário:
</p>
<pre>$ PKGEXT='.pkg.tar.lzo' makepkg
</pre>
<p>Para fazer uma dessas configurações permanentes, configure <code>PKGEXT</code> em <code>/etc/makepkg.conf</code>.
</p>
<h3>
<span id="Usando_v.C3.A1rios_n.C3.BAcleos_na_compress.C3.A3o"></span><span class="mw-headline" id="Usando_vários_núcleos_na_compressão">Usando vários núcleos na compressão</span>
</h3>
<p>O <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xz">xz</a></span> oferece suporte a <a href="https://en.wikipedia.org/wiki/pt:Multiprocessamento_sim%C3%A9trico" class="extiw" title="wikipedia:pt:Multiprocessamento simétrico">multiprocessamento simétrico (SMP)</a> por meio do sinalizador <code>--threads</code> para acelerar a compressão. Por exemplo, para deixar o makepkg usar quantos núcleos de CPU for possível para comprimir os pacotes, edite o vetor <code>COMPRESSXZ</code> em <code>/etc/makepkg.conf</code>:
</p>
<pre>COMPRESSXZ=(xz -c -z <b>--threads=0</b> -)
</pre>
<p>O <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pigz">pigz</a></span> é uma implementação paralela para o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gzip">gzip</a></span> que, por padrão, usa todos os núcleos disponíveis na CPU (o sinalizador <code>-p/--processes</code> pode ser usado para empregar menos núcleos):
</p>
<pre>COMPRESSGZ=(<b>pigz</b> -c -f -n)
</pre>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=pbzip2">pbzip2</a></span> é um <i>drop-in</i>, implementação paralela para <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bzip2">bzip2</a></span> que também usa todos os núcleos de CPU disponíveis por padrão. A opção <code>-p#</code> pode ser usado para empregar menos núcleos (note: nenhum espaço entre o <code>-p</code> e número de núcleos).
</p>
<pre>COMPRESSBZ2 =(<b>pbzip2</b> -c -f)
</pre>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zstd">zstd</a></span> possui suporte a <a href="https://en.wikipedia.org/wiki/pt:Multiprocessamento_sim%C3%A9trico" class="extiw" title="wikipedia:pt:Multiprocessamento simétrico">multiprocessamento simétrico (SMP)</a> por meio do sinalizador <code>--threads</code> para acelerar compressão. Por exemplo, para deixar o makepkg usar o máximo possível de núcleos de CPU para comprimir pacotes, edite o vetor <code>COMPRESSZST</code> em <code>/etc/makepkg.conf</code>:
</p>
<pre>COMPRESSZST=(zstd -c -z -q <b>--threads=0</b> -)
</pre>
<h3>
<span id="Mostrar_pacotes_com_um_empacotador_espec.C3.ADfico"></span><span class="mw-headline" id="Mostrar_pacotes_com_um_empacotador_específico">Mostrar pacotes com um empacotador específico</span>
</h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=expac">expac</a></span> é um utilitário de extração de base de dados do pacman. Este comando mostra todos os pacotes instalados no sistema com o empacotador chamado <i>nome-empacotador</i>:
</p>
<pre>$ expac "%n %p" | grep "<i>nome-empacotador</i>" | column -t
</pre>
<p>Isso mostra todos os pacotes instalados no sistema com o empacotador definido na variável <code>PACKAGER</code> do <code>/etc/makepkg</code>. Isso mostra apenas pacotes que estão em um repositório definido em <code>/etc/pacman.conf</code>.
</p>
<pre>$ . /etc/makepkg.conf; grep -xvFf &lt;(pacman -Qqm) &lt;(expac "%n\t%p" | grep "$PACKAGER$" | cut -f1)
</pre>
<h3><span class="mw-headline" id="Compilar_pacotes_32_bits_em_um_sistema_64_bits">Compilar pacotes 32 bits em um sistema 64 bits</span></h3>
<p>Veja <a href="../pt/32-bit_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes 32-bit">Diretrizes de pacotes 32-bit</a>.
</p>
<h3>
<span id="Assinatura_aut.C3.B4noma_de_pacote"></span><span class="mw-headline" id="Assinatura_autônoma_de_pacote">Assinatura autônoma de pacote</span>
</h3>
<p>Uma pessoa pode não estar disponível para fornecer a senha para a chave privada gpg usada para fazer login em ambientes de compilação automatizados, como <a href="../en/Jenkins.html" title="Jenkins">Jenkins</a>. É desaconselhável armazenar uma chave gpg privada em um sistema sem uma senha.
</p>
<p>Um pacote zst resultante feito com makepkg ainda pode ser assinado após a criação:
</p>
<pre>$ gpg --detach-sign --pinentry-mode loopback --passphrase --passphrase-fd 0 --output <i>RecémCompilado.pkg.tar.zst.sig</i> --sign <i>RecémCompilado.pkg.tar.zst</i> 
</pre>
<p>onde a senha GPG é fornecida com segurança e obscurecida pelo seu conjunto de automação de escolha.
</p>
<p>O arquivo <code>zst</code> e <code>sig</code> resultante pode ser referenciado por clientes <a href="../pt/Pacman.html" title="Pacman (Português)">pacman</a> esperando uma assinatura válida e repositórios criados com <code>repo-add --sign</code> ao hospedar seu próprio repositório.
</p>
<h3>
<span id="URIs_magn.C3.A9ticos"></span><span class="mw-headline" id="URIs_magnéticos">URIs magnéticos</span>
</h3>
<p>Suporte para recursos de URIs magnéticos (com prefixo <code>magnet://</code>) no campo <code>source</code> pode ser adicionado usando o agente de download <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/transmission-dlagent/">transmission-dlagent</a></span><sup><small>AUR</small></sup>.
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3>
<span id="Especificando_diret.C3.B3rio_de_instala.C3.A7.C3.A3o_para_pacotes_baseados_em_QMAKE"></span><span class="mw-headline" id="Especificando_diretório_de_instalação_para_pacotes_baseados_em_QMAKE">Especificando diretório de instalação para pacotes baseados em QMAKE</span>
</h3>
<p>O makefile gerado pelo qmake usa a variável de ambiente <code>INSTALL_ROOT</code> para especificar onde o programa deve ser instalado. Então, essa função <i>package</i> deve funcionar:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">PKGBUILD</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
package() {
	cd "$srcdir/${pkgname%-git}"
	make INSTALL_ROOT="$pkgdir" install
}
...</pre>
<p>Note que o qmake também tem que ser configurado adequadamente. Por exemplo, coloque isso no arquivo <i>.pro</i> correspondente:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">SeuProjeto.pro</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
target.path = /usr/local/bin
INSTALLS += target
...</pre>
<h3>
<span id="AVISO:_O_pacote_cont.C3.A9m_refer.C3.AAncia_para_.24srcdir"></span><span class="mw-headline" id="AVISO:_O_pacote_contém_referência_para_$srcdir">AVISO: O pacote contém referência para $srcdir</span>
</h3>
<p>De alguma forma, as strings literais contidas nas variáveis <code>$srcdir</code> ou <code>$pkgdir</code> acabaram em um dos arquivos instalados no pacote.
</p>
<p>Para identificar quais arquivos, execute o seguinte do diretório de compilação makepkg:
</p>
<pre>$ grep -R "$PWD/src" pkg/
</pre>
<p>Uma causa possível seria pelo uso da macro <code>__FILE__</code> no código C/C++ com caminho completo passado para o compilador.
</p>
<h3>
<span id="Makepkg_falha_em_baixar_depend.C3.AAncias_quando_por_tr.C3.A1s_de_um_proxy"></span><span class="mw-headline" id="Makepkg_falha_em_baixar_dependências_quando_por_trás_de_um_proxy">Makepkg falha em baixar dependências quando por trás de um proxy</span>
</h3>
<p>Quando o <i>makepkg</i> chama dependências, ele chama o pacman para instalar os pacotes, o que requer privilégios administrativos via <i>sudo</i>. No entanto, o <i>sudo</i> não passa nenhuma <a href="../pt/Environment_variables.html" class="mw-redirect" title="Variável de ambiente">variável de ambiente</a> para o ambiente privilegiado, e inclui as variáveis relacionadas ao proxy <code>ftp_proxy</code>, <code>http_proxy</code>, <code>https_proxy</code> e <code>no_proxy</code>.
</p>
<p>Para que ter o <i>makepkg</i> funcionando por trás de um proxy, Use um dos métodos a seguir.
</p>
<h4><span class="mw-headline" id="Habilitar_proxy_definindo_sua_URL_no_XferCommand">Habilitar proxy definindo sua URL no XferCommand</span></h4>
<p>O XferCommand pode ser definido para usar a URL de proxy desejada no <code>/etc/pacman.conf</code>. Adicione ou descomente a linha a seguir no <code>pacman.conf</code><a rel="nofollow" class="external autonumber" href="https://www.mail-archive.com/arch-general@archlinux.org/msg15561.html">[5]</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/pacman.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
XferCommand = /usr/bin/curl -x http://usuário:senha@proxy.proxyhost.com:80 -L -C - -f -o %o %u
...
</pre>
<h4><span class="mw-headline" id="Habilitar_proxy_via_env_keep_do_sudoers">Habilitar proxy via env_keep do sudoers</span></h4>
<p>Alternativamente, pode-se usar a opção <code>env_keep</code> do sudoers, a qual permite preservar as variáveis de ambiente dadas no ambiente privilegiado. Veja <a href="../pt/Sudo.html#Vari%C3%A1veis_de_ambiente" title="Sudo (Português)">sudo#Variáveis de ambiente</a> para mais informações.
</p>
<h3>
<span id="Makepkg_falha.2C_mas_make_obt.C3.A9m_sucesso"></span><span class="mw-headline" id="Makepkg_falha,_mas_make_obtém_sucesso">Makepkg falha, mas make obtém sucesso</span>
</h3>
<p>Se algo compilar com sucesso usando <i>make</i>, mas falhar através do <i>makepkg</i>, é quase certo que seja porque o <code>/etc/makepkg.conf</code> define uma variável de compilação incompatível. Tente adicionar esses sinalizadores ao array <code>options</code> do PKGBUILD:
</p>
<p><code>!buildflags</code>, para evitar seu <code>CPPFLAGS</code>, <code>CFLAGS</code>, <code>CXXFLAGS</code> e <code>LDFLAGS</code> padrão.
</p>
<p><code>!makeflags</code>, para evitar seu <code>MAKEFLAGS</code> padrão.
</p>
<p><code>!debug</code>, para evitar seu <code>DEBUG_CFLAGS</code> e <code>DEBUG_CXXFLAGS</code> padrão, no caso do PKGBUILD ser uma compilação de depuração.
</p>
<p>Se alguma dessas corrigir o problema, isso pode merecer um relatório de bug ao upstream, presumindo que o sinalizador ofensivo foi identificado.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><span class="plainlinks archwiki-template-man" title="$ man 8 makepkg"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/makepkg.8">makepkg(8)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 5 makepkg.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/makepkg.conf.5">makepkg.conf(5)</a></span></li>
<li><a rel="nofollow" class="external text" href="https://gist.github.com/Earnestly/bebad057f40a662b5cc3">Um breve passeio no processo do makepkg</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/pacman/pacman/blob/master/scripts/makepkg.sh.in">Código fonte do makepkg</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Package_development.html" title="Category:Package development (Português)">Package development (Português)</a></li>
<li><a href="../pt/Category:About_Arch.html" title="Category:About Arch (Português)">About Arch (Português)</a></li>
<li><a href="../pt/Category:Commands.html" title="Category:Commands (Português)">Commands (Português)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Makepkg_(Portugu%C3%AAs)&amp;oldid=799296">https://wiki.archlinux.org/index.php?title=Makepkg_(Português)&amp;oldid=799296</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 February 2024, at 18:07.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
