<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Apache HTTP Server (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Apache_HTTP_Server_Português rootpage-Apache_HTTP_Server_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Instalação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Instala%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Instalação</div>
		</a>
		
		<ul id="toc-Instalação-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuração" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configura%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuração</div>
		</a>
		
			<button aria-controls="toc-Configuração-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuração subsection</span>
			</button>
		
		<ul id="toc-Configuração-sublist" class="vector-toc-list">
			<li id="toc-Opções_avançadas" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Op%C3%A7%C3%B5es_avan%C3%A7adas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Opções avançadas</div>
			</a>
			
			<ul id="toc-Opções_avançadas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Diretórios_do_usuário" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Diret%C3%B3rios_do_usu%C3%A1rio">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Diretórios do usuário</div>
			</a>
			
			<ul id="toc-Diretórios_do_usuário-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-TLS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#TLS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>TLS</div>
			</a>
			
			<ul id="toc-TLS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hosts_virtuais" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hosts_virtuais">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Hosts virtuais</div>
			</a>
			
			<ul id="toc-Hosts_virtuais-sublist" class="vector-toc-list">
				<li id="toc-Gerenciando_vários_hosts_virtuais" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gerenciando_v%C3%A1rios_hosts_virtuais">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4.1</span>Gerenciando vários hosts virtuais</div>
			</a>
			
			<ul id="toc-Gerenciando_vários_hosts_virtuais-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Extensões" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Extens%C3%B5es">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Extensões</div>
		</a>
		
			<button aria-controls="toc-Extensões-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Extensões subsection</span>
			</button>
		
		<ul id="toc-Extensões-sublist" class="vector-toc-list">
			<li id="toc-PHP" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PHP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>PHP</div>
			</a>
			
			<ul id="toc-PHP-sublist" class="vector-toc-list">
				<li id="toc-Usando_libphp" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Usando_libphp">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.1</span>Usando libphp</div>
			</a>
			
			<ul id="toc-Usando_libphp-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_apache2-mpm-worker_e_mod_fcgid" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Usando_apache2-mpm-worker_e_mod_fcgid">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.2</span>Usando apache2-mpm-worker e mod_fcgid</div>
			</a>
			
			<ul id="toc-Usando_apache2-mpm-worker_e_mod_fcgid-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_php-fpm_e_mod_proxy_fcgi" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Usando_php-fpm_e_mod_proxy_fcgi">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.3</span>Usando php-fpm e mod_proxy_fcgi</div>
			</a>
			
			<ul id="toc-Usando_php-fpm_e_mod_proxy_fcgi-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Teste_a_instalação_do_PHP" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Teste_a_instala%C3%A7%C3%A3o_do_PHP">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1.4</span>Teste a instalação do PHP</div>
			</a>
			
			<ul id="toc-Teste_a_instalação_do_PHP-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-HTTP/2" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#HTTP/2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>HTTP/2</div>
			</a>
			
			<ul id="toc-HTTP/2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Soluções_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Solu%C3%A7%C3%B5es_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Soluções de problemas</div>
		</a>
		
			<button aria-controls="toc-Soluções_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Soluções de problemas subsection</span>
			</button>
		
		<ul id="toc-Soluções_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-Logs_e_Status_do_Apache" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Logs_e_Status_do_Apache">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Logs e Status do Apache</div>
			</a>
			
			<ul id="toc-Logs_e_Status_do_Apache-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Error:_PID_file_/run/httpd/httpd.pid_not_readable_(yet?)_após_inicializar" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Error:_PID_file_/run/httpd/httpd.pid_not_readable_(yet?)_ap%C3%B3s_inicializar">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Error: PID file /run/httpd/httpd.pid not readable (yet?) após inicializar</div>
			</a>
			
			<ul id="toc-Error:_PID_file_/run/httpd/httpd.pid_not_readable_(yet?)_após_inicializar-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Diretório_/run/httpd_não_é_criado_durante_o_boot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Diret%C3%B3rio_/run/httpd_n%C3%A3o_%C3%A9_criado_durante_o_boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Diretório /run/httpd não é criado durante o boot</div>
			</a>
			
			<ul id="toc-Diretório_/run/httpd_não_é_criado_durante_o_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Apache_is_running_a_threaded_MPM,_but_your_PHP_Module_is_not_compiled_to_be_threadsafe." class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Apache_is_running_a_threaded_MPM,_but_your_PHP_Module_is_not_compiled_to_be_threadsafe.">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.4</span>Apache is running a threaded MPM, but your PHP Module is not compiled to be threadsafe.</div>
			</a>
			
			<ul id="toc-Apache_is_running_a_threaded_MPM,_but_your_PHP_Module_is_not_compiled_to_be_threadsafe.-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-AH00534:_httpd:_Configuration_error:_No_MPM_loaded." class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#AH00534:_httpd:_Configuration_error:_No_MPM_loaded.">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.5</span>AH00534: httpd: Configuration error: No MPM loaded.</div>
			</a>
			
			<ul id="toc-AH00534:_httpd:_Configuration_error:_No_MPM_loaded.-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-AH00072:_make_sock:_could_not_bind_to_address" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#AH00072:_make_sock:_could_not_bind_to_address">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.6</span>AH00072: make_sock: could not bind to address</div>
			</a>
			
			<ul id="toc-AH00072:_make_sock:_could_not_bind_to_address-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-AH01071:_Got_error_'Primary_script_unknown'" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#AH01071:_Got_error_'Primary_script_unknown'">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.7</span>AH01071: Got error 'Primary script unknown'</div>
			</a>
			
			<ul id="toc-AH01071:_Got_error_'Primary_script_unknown'-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alterar_max_execution_time_no_php.ini_não_surte_qualquer_efeito" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Alterar_max_execution_time_no_php.ini_n%C3%A3o_surte_qualquer_efeito">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.8</span>Alterar max_execution_time no php.ini não surte qualquer efeito</div>
			</a>
			
			<ul id="toc-Alterar_max_execution_time_no_php.ini_não_surte_qualquer_efeito-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-PHP-FPM:_erros_não_estão_sendo_registrados_individualmente_para_cada_host_virtual" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#PHP-FPM:_erros_n%C3%A3o_est%C3%A3o_sendo_registrados_individualmente_para_cada_host_virtual">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.9</span>PHP-FPM: erros não estão sendo registrados individualmente para cada host virtual</div>
			</a>
			
			<ul id="toc-PHP-FPM:_erros_não_estão_sendo_registrados_individualmente_para_cada_host_virtual-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Veja também</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Apache HTTP Server (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/LAMP_Installation" title="LAMP Installation – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Apache_HTTP_Server.html" title="Apache HTTP Server – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/Apache_HTTP_Server.html" title="Apache HTTP Server – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Apache_HTTP_Server" title="Apache HTTP Server – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Apache_HTTP_Server" title="Apache HTTP Server – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="pt" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../en/XAMPP.html" title="XAMPP">XAMPP</a></li>
<li><a href="../en/Apache_HTTP_Server/mod_perl.html" title="Apache HTTP Server/mod perl">/mod_perl</a></li>
<li><a href="../en/Apache_HTTP_Server/mod_fcgid.html" title="Apache HTTP Server/mod fcgid">/mod_fcgid</a></li>
<li><a href="../en/Apache_HTTP_Server/mod_gnutls.html" title="Apache HTTP Server/mod gnutls">/mod_gnutls</a></li>
<li><a href="../en/Apache_HTTP_Server/mod_wsgi.html" class="mw-redirect" title="Apache HTTP Server/mod python">/mod_python</a></li>
<li><a href="../en/Apache_HTTP_Server/mod_wsgi.html" title="Apache HTTP Server/mod wsgi">/mod_wsgi</a></li>
</ul>
</div>
<p>O <a href="https://en.wikipedia.org/wiki/pt:Servidor_Apache" class="extiw" title="wikipedia:pt:Servidor Apache">Apache HTTP Server</a>, ou simplesmente Apache, é um web server muito popular desenvolvido por Apache Software Foundation.
</p>
<p>Este artigo descreve como configurar o Apache e como opcionalmente integrá-lo com <a href="../en/PHP.html" title="PHP">PHP</a>.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=apache">apache</a></span>.
</p>
<h2>
<span id="Configura.C3.A7.C3.A3o"></span><span class="mw-headline" id="Configuração">Configuração</span>
</h2>
<p>Os arquivos de configuração do Apache estão localizados em <code>/etc/httpd/conf</code>. O principal arquivo de configuração é <code>/etc/httpd/conf/httpd.conf</code>, que inclui vários outros arquivos de configuração. O principal arquivo de configuração deve ser o suficiente para uma configuração simples. Por padrão, será fornecido o diretório <code>/srv/http</code> para qualquer um que queira acessar seu website.
</p>
<p>Para iniciar o Apache, inicie <code>httpd.service</code> usando o <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">systemd</a>.
</p>
<p>O Apache deverá estar executando agora. Teste-o visitando o endereço <a rel="nofollow" class="external free" href="http://localhost/">http://localhost/</a> em um navegador da web. Isto deverá exibir uma simples página web inicial.
</p>
<p>Para configurações adicionais, veja as seções a seguir.
</p>
<h3>
<span id="Op.C3.A7.C3.B5es_avan.C3.A7adas"></span><span class="mw-headline" id="Opções_avançadas">Opções avançadas</span>
</h3>
<p>Veja a <a rel="nofollow" class="external text" href="https://httpd.apache.org/docs/trunk/mod/directives.html">lista completa de diretivas de configuração do Apache</a> e o <a rel="nofollow" class="external text" href="https://httpd.apache.org/docs/trunk/mod/quickreference.html">guia de referência rápido</a>.
</p>
<p>Estas opções em <code>/etc/httpd/conf/httpd.conf</code> poderão ser interessantes:
</p>
<pre>User http
</pre>
<dl><dd>Por razões de segurança, assim que o Apache é iniciado pelo usuário root (diretamente ou via scripts de inicialização) ele altera para este identificador de usuário. A identificação padrão é <i>http</i>, a qual é automaticamente criada durante a instalação.</dd></dl>
<pre>Listen 80
</pre>
<dl><dd>Esta é a porta a qual o Apache irá monitorar. Para acesso da internet através de roteador, você terá que fazer um encaminhamento de porta.</dd></dl>
<dl><dd>Se desejar configurar Apache para desenvolvimento local, talvez queira que somente o seu computador seja capaz de acessá-lo. Para isso, altere esta linha para <code>Listen 127.0.0.1:80</code>.</dd></dl>
<pre>ServerAdmin you@example.com
</pre>
<dl><dd>Este será o endereço de email apresentado em, por exemplo, páginas de erro.</dd></dl>
<pre>DocumentRoot "/srv/http"
</pre>
<dl><dd>Este é o endereço onde deverão ser localizadas suas páginas web..</dd></dl>
<dl><dd>Altere, se desejar, mas não se esqueça de também alterar <code>&lt;Directory "/srv/http"&gt;</code> para onde você apontou seu <code>DocumentRoot</code>, caso contrário você irá obter um erro <b>403</b> (que é de falta de privilégios) ao tentar acessar sua nova raiz de páginas. Não se esqueça de alterar a linha <code>Require all denied</code> para <code>Require all granted</code>, caso contrário você obterá um erro <b>403</b>. Lembre-se de que o diretório e seus diretórios-pai devem ter permissão de execução para outros (o que pode ser alterado com <code>chmod o+x /path/to/DocumentRoot</code>), do contrário também obterá um erro <b>403</b>.</dd></dl>
<pre>AllowOverride None
</pre>
<dl><dd>Esta diretiva na seção <code>&lt;Directory&gt;</code> faz com que o Apache completamente ignore arquivos <code>.htaccess</code>. Perceba que este é o comportamento padrão para o Apache 2.4, então você deverá explicitamente permitir sobreposições caso planeje usar arquivos <code>.htaccess</code>. Caso planeje usar <code>mod_rewrite</code> ou outras configurações em <code>.htaccess</code> files, você será capaz de permitir tais diretivas declaradas em cada arquivo que irá sobrepor as configurações do servidor. Para mais informações, consulte a <a rel="nofollow" class="external text" href="https://httpd.apache.org/docs/current/mod/core.html#allowoverride">documentação do Apache</a>.</dd></dl>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Se houver problemas com suas configurações do Apache, você poderá checá-las com: <code>apachectl configtest</code>
</div>
<p>Mais configurações que podem ser encontradas em <code>/etc/httpd/conf/extra/httpd-default.conf</code>:
</p>
<p>Desativar a assinatura do servidor:
</p>
<pre>ServerSignature Off
</pre>
<p>Para ocultar informações do servidor e versão do PHP:
</p>
<pre>ServerTokens Prod
</pre>
<h3>
<span id="Diret.C3.B3rios_do_usu.C3.A1rio"></span><span class="mw-headline" id="Diretórios_do_usuário">Diretórios do usuário</span>
</h3>
<p>Diretórios do usuário estão disponíveis por padrão através de <a rel="nofollow" class="external free" href="http://localhost/~yourusername/">http://localhost/~yourusername/</a> e exibem o conteúdo de <code>~/public_html</code> (isto pode ser alterado em <code>/etc/httpd/conf/extra/httpd-userdir.conf</code>).
</p>
<p>Se não desejar que diretórios do usuário estejam disponíveis através da web, apenas comente a seguinte linha em <code>/etc/httpd/conf/httpd.conf</code>:
</p>
<pre>Include conf/extra/httpd-userdir.conf
</pre>
<p>Você deverá ter certeza de que seu diretório home está com suas permissões configuradas corretamente para que o Apache possa alcançá-lo. Seu diretório home e <code>~/public_html</code> devem ser executáveis para outros ("para todo o mundo"):
</p>
<pre>$ chmod o+x ~
$ chmod o+x ~/public_html
$ chmod -R o+r ~/public_html
</pre>
<p>Reinicie <code>httpd.service</code> para aplicar quaisquer alterações. Veja também <a href="../pt/Umask.html#Definir_o_valor_da_m%C3%A1scara" title="Umask (Português)">umask (Português)#Definir o valor da máscara</a>.
</p>
<h3><span class="mw-headline" id="TLS">TLS</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Se você for implantar <a href="https://en.wikipedia.org/wiki/pt:Transport_Layer_Security" class="extiw" title="wikipedia:pt:Transport Layer Security">TLS</a>, certifique-se de seguir <a rel="nofollow" class="external text" href="https://weakdh.org/sysadmin.html">o guia de weakdh.org</a> para evitar vulnerabilidades. Para mais informações, veja <a href="../en/Transport_Layer_Security.html#Server-side_recommendations" class="mw-redirect" title="Server-side TLS">Server-side TLS</a>.</div>
<p>Primeiramente, <a href="../en/Transport_Layer_Security.html#Obtaining_a_certificate" class="mw-redirect" title="Obtain a certificate">obtain a certificate</a>. Caso tenha seu próprio domínio público, você poderá usar <a href="../en/Transport_Layer_Security.html#ACME_clients" title="Transport Layer Security">Transport Layer Security#ACME clients</a>.
</p>
<p>Em <code>/etc/httpd/conf/httpd.conf</code>, descomente as três linhas a seguir:
</p>
<pre>LoadModule ssl_module modules/mod_ssl.so
LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
Include conf/extra/httpd-ssl.conf
</pre>
<p>Se estiver usando <code>certbot --apache</code>, a linha a seguir também deverá ser descomentada:
</p>
<pre>LoadModule rewrite_module modules/mod_rewrite.so
</pre>
<p>Após obter uma chave e um certificado, certifique-se que as linhas <code>SSLCertificateFile</code> e <code>SSLCertificateKeyFile</code> em <code>/etc/httpd/conf/extra/httpd-ssl.conf</code> apontam para a chave e o certificado. Se uma cadeia de certificados CA também foi gerada, adicione seu nome de arquivo em <code>SSLCertificateChainFile</code>.
</p>
<p>Finalmente, reinicie <code>httpd.service</code> para aplicar quaisquer alteralções.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> A Mozilla tem um artigo chamado <a href="https://wiki.mozilla.org/Security/Server_Side_TLS" class="extiw" title="mozillawiki:Security/Server Side TLS">SSL/TLS article</a> muito útil bem como uma ferramenta chamada <a rel="nofollow" class="external text" href="https://mozilla.github.io/server-side-tls/ssl-config-generator/">automated tool</a> para ajudar a criar uma configuração segura.</div>
<h3><span class="mw-headline" id="Hosts_virtuais">Hosts virtuais</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Você precisará adicionar uma seção <code>&lt;VirtualHost *:443&gt;</code> para suporte ao SSL em hosts virtuais.
Veja <a href="#Gerenciando_v%C3%A1rios_hosts_virtuais">#Gerenciando vários hosts virtuais</a> para um exemplo de arquivo.</div>
<p>Se desejar ter mais de um host, descomente a seguinte linha em <code>/etc/httpd/conf/httpd.conf</code>:
</p>
<pre>Include conf/extra/httpd-vhosts.conf
</pre>
<p>Em <code>/etc/httpd/conf/extra/httpd-vhosts.conf</code> configure seus hosts virtuais. O arquivo padrão contém um exemplo elaborado que o ajudará.
</p>
<p>Para testar os hosts virtuais em sua máquina local, adicione seus respectivos nomes no arquivo <code>/etc/hosts</code>:
</p>
<pre>127.0.0.1 nomedodominio1.dom
127.0.0.1 nomedodominio2.dom
</pre>
<p>Reinicie <code>httpd.service</code> para aplicar as alterações.
</p>
<h4>
<span id="Gerenciando_v.C3.A1rios_hosts_virtuais"></span><span class="mw-headline" id="Gerenciando_vários_hosts_virtuais">Gerenciando vários hosts virtuais</span>
</h4>
<p>Caso tenha uma grande quantidade de hosts virtuais, você poderá querer facilmente desativá-los e ativá-los. Para isso, é recomendado criar um arquivo de configuração para cada host virtual e armazená-los em uma pasta, por exemplo: <code>/etc/httpd/conf/vhosts</code>.
</p>
<p>Primeiro, crie a pasta:
</p>
<pre># mkdir /etc/httpd/conf/vhosts
</pre>
<p>Então coloque cada arquivo de configuração nela:
</p>
<pre># nano /etc/httpd/conf/vhosts/nomedodominio1.dom
# nano /etc/httpd/conf/vhosts/nomedodominio2.dom
...
</pre>
<p>No último passo, use <code>Include</code> para incluir cada arquivo de configuração em seu <code>/etc/httpd/conf/httpd.conf</code>:
</p>
<pre>#Enabled Vhosts:
Include conf/vhosts/nomedodominio1.dom
Include conf/vhosts/nomedodominio2.dom
</pre>
<p>Você poderá ativar e desativar seus hosts virtuais apenas comentando ou descomentando-os.
</p>
<p>Um arquivo muito simples de um host virtual é semelhante a este:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/vhosts/nomedodominio1.dom</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">&lt;VirtualHost *:80&gt;
    ServerAdmin webmaster@nomedodominio1.dom
    DocumentRoot "/home/user/http/nomedodominio1.dom"
    ServerName nomedodominio1.dom
    ServerAlias nomedodominio1.dom
    ErrorLog "/var/log/httpd/nomedodominio1.dom-error_log"
    CustomLog "/var/log/httpd/nomedodominio1.dom-access_log" common

    &lt;Directory "/home/user/http/nomedodominio1.dom"&gt;
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;

&lt;VirtualHost *:443&gt;
    ServerAdmin webmaster@nomedodominio1.dom
    DocumentRoot "/home/user/http/nomedodominio1.dom"
    ServerName nomedodominio1.dom:443
    ServerAlias nomedodominio1.dom:443
    SSLEngine on
    SSLCertificateFile "/etc/httpd/conf/server.crt"
    SSLCertificateKeyFile "/etc/httpd/conf/server.key"
    ErrorLog "/var/log/httpd/nomedodominio1.dom-error_log"
    CustomLog "/var/log/httpd/nomedodominio1.dom-access_log" common

    &lt;Directory "/home/user/http/nomedodominio1.dom"&gt;
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;</pre>
<h2>
<span id="Extens.C3.B5es"></span><span class="mw-headline" id="Extensões">Extensões</span>
</h2>
<h3><span class="mw-headline" id="PHP">PHP</span></h3>
<p>Primeiro, <a href="../en/PHP.html#Installation" title="PHP">instale o PHP</a>, então siga uma das próximas subseções abaixo. Finalmente, teste a instalação como descrito no final da subseção.
</p>
<h4><span class="mw-headline" id="Usando_libphp">Usando libphp</span></h4>
<p>Este método é provavelmente o mais fácil, mas também o menos escalável: é adequado para um baixo número de requisições. Ele também requer que você altere o módulo mpm, o que poderá causar problemas com outras extensões (por exemplo, não é compatível com <a href="#HTTP/2">#HTTP/2</a>).
</p>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php7-apache">php7-apache</a></span><sup>[<a href="../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">link quebrado</a>: package not found]</sup> para PHP 7 ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php-apache">php-apache</a></span> para PHP 8, o que for apropriado.
</p>
<p>Em <code>/etc/httpd/conf/httpd.conf</code>, comente a linha:
</p>
<pre>#LoadModule mpm_event_module modules/mod_mpm_event.so
</pre>
<p>e descomente a linha:
</p>
<pre>LoadModule mpm_prefork_module modules/mod_mpm_prefork.so
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> O passo acima é requerido, porque <code>libphp.so</code> incluído com o pacote não funciona com <code>mod_mpm_event</code>, mas em vez disso, irá funcionar apenas com <code>mod_mpm_prefork</code>. (<a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/39218">FS#39218</a>)
<p>Do contrário, você obterá o seguinte erro:
</p>
<pre>Apache is running a threaded MPM, but your PHP Module is not compiled to be threadsafe.  You need to recompile PHP.
AH00013: Pre-configuration failed
httpd.service: control process exited, code=exited status=1</pre>
Como alternativa, você pode usar <code>mod_proxy_fcgi</code> (veja <a href="#Usando_php-fpm_e_mod_proxy_fcgi">#Usando php-fpm e mod_proxy_fcgi</a> abaixo).</div>
<p>Para habilitar o PHP, adicione as seguintes linhas ao <code>/etc/httpd/conf/httpd.conf</code>:
</p>
<ul><li>Adicione esta ao final da lista <code>LoadModule</code>:</li></ul>
<pre>LoadModule php_module modules/libphp.so
AddHandler php-script .php
</pre>
<ul><li>Adicione esta ao final da lista <code>Include</code>:</li></ul>
<pre>Include conf/extra/php_module.conf
</pre>
<p>Reinicie <code>httpd.service</code> usando <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">systemd</a>.
</p>
<h4><span class="mw-headline" id="Usando_apache2-mpm-worker_e_mod_fcgid">Usando apache2-mpm-worker e mod_fcgid</span></h4>
<p>Este método fornece uma melhor performance e melhor consumo de memória ao lidar com múltiplas requisições.
</p>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mod_fcgid/">mod_fcgid</a></span><sup><small>AUR</small></sup> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php-cgi">php-cgi</a></span>.
</p>
<p>Crie o diretório necessário e um link simbólico para o wrapper PHP:
</p>
<pre># mkdir /srv/http/fcgid-bin
# ln -s /usr/bin/php-cgi /srv/http/fcgid-bin/php-fcgid-wrapper
</pre>
<p>Crie <code>/etc/httpd/conf/extra/php-fcgid.conf</code> com o seguinte conteúdo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/extra/php-fcgid.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Required modules: fcgid_module

&lt;IfModule fcgid_module&gt;
    AddHandler php-fcgid .php
    AddType application/x-httpd-php .php
    Action php-fcgid /fcgid-bin/php-fcgid-wrapper
    ScriptAlias /fcgid-bin/ /srv/http/fcgid-bin/
    SocketPath /var/run/httpd/fcgidsock
    SharememPath /var/run/httpd/fcgid_shm
        # If you don't allow bigger requests many applications may fail (such as WordPress login)
        FcgidMaxRequestLen 536870912
        # Path to php.ini – defaults to /etc/phpX/cgi
        DefaultInitEnv PHPRC=/etc/php/
        # Number of PHP childs that will be launched. Leave undefined to let PHP decide.
        #DefaultInitEnv PHP_FCGI_CHILDREN 3
        # Maximum requests before a process is stopped and a new one is launched
        #DefaultInitEnv PHP_FCGI_MAX_REQUESTS 5000
    &lt;Location /fcgid-bin/&gt;
        SetHandler fcgid-script
        Options +ExecCGI
    &lt;/Location&gt;
&lt;/IfModule&gt;
</pre>
<p>Altere <code>/etc/httpd/conf/httpd.conf</code>:
</p>
<ul>
<li>Descomente o carregamento de actions_module: <pre>LoadModule actions_module modules/mod_actions.so</pre>
</li>
<li>Carregue o módulo FCGID <i>após</i> o carregamento do módulo unixd (do qual é dependente) - você talvez queira colocá-lo dentro do bloco <code>&lt;IfModule unixd_module&gt;</code>: <pre>LoadModule fcgid_module modules/mod_fcgid.so</pre>
</li>
<li>Certifique-se de que a inclusão da configuração do MPM está descomentada (não vem comentado na versão padrão instalada deste arquivo): <pre>Include conf/extra/httpd-mpm.conf</pre>
</li>
<li>Adicione uma inclusão para a sua nova configuração do FCGID: <pre>Include conf/extra/php-fcgid.conf</pre>
</li>
</ul>
<p><a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">Reinicie</a> <code>httpd.service</code>.
</p>
<h4><span class="mw-headline" id="Usando_php-fpm_e_mod_proxy_fcgi">Usando php-fpm e mod_proxy_fcgi</span></h4>
<p>Este método fornece "uma implementação alternativa do PHP FastCGI com alguns recursos adicionais (geralmente) úteis para sites com alto nível de requisições" <a rel="nofollow" class="external autonumber" href="https://www.php.net/manual/en/install.fpm.php">[1]</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Diferente da configuração difundida com ProxyPass, a configuração do proxy com SetHandler respeita outras diretivas do Apache, como DirectoryIndex. Isto garante uma melhor compatibilidade com software desenvolvido para libphp, mod_fastcgi e mod_fcgid.
Caso queira testar com ProxyPass, experimente com uma linha semelhante a esta: <pre>ProxyPassMatch ^/(.*\.php(/.*)?)$ unix:/run/php-fpm/php-fpm.sock|fcgi://localhost/srv/http/$1</pre>
</div>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=php-fpm">php-fpm</a></span>.
</p>
<p>Habilite os módulos de proxy:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/httpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so
</pre>
<p>Crie <code>/etc/httpd/conf/extra/php-fpm.conf</code> com o seguinte conteúdo:
</p>
<pre>DirectoryIndex index.php index.html
&lt;FilesMatch \.php$&gt;
    SetHandler "proxy:unix:/run/php-fpm/php-fpm.sock|fcgi://localhost/"
&lt;/FilesMatch&gt;
</pre>
<p>E inclua-o no final de <code>/etc/httpd/conf/httpd.conf</code>:
</p>
<pre>Include conf/extra/php-fpm.conf
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> O pipe entre <code>sock</code> e <code>fcgi</code> não admite espaços ao seu redor! <code>localhost</code> pode ser substituído por qualquer string. Mais informações <a rel="nofollow" class="external text" href="https://httpd.apache.org/docs/2.4/mod/mod_proxy_fcgi.html">aqui</a>
</div>
<p>Você pode configurar o PHP-FPM em <code>/etc/php/php-fpm.d/www.conf</code>, mas a configuração padrão deverá funcionar adequadamente.
</p>
<p>Inicie e habilite <code>php-fpm.service</code>. <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">Reinicie</a> <code>httpd.service</code>.
</p>
<h4>
<span id="Teste_a_instala.C3.A7.C3.A3o_do_PHP"></span><span class="mw-headline" id="Teste_a_instalação_do_PHP">Teste a instalação do PHP</span>
</h4>
<p>Para testar se o PHP foi configurado corretamente, crie um arquivo chamado <code>test.php</code> no diretório <code>DocumentRoot</code> de seu Apache (por exemplo, <code>/srv/http/</code> ou <code>~&lt;username&gt;/public_html/</code>) com o seguinte conteúdo:
</p>
<pre>&lt;?php phpinfo(); ?&gt;
</pre>
<p>Então vá para <a rel="nofollow" class="external free" href="http://localhost/test.php">http://localhost/test.php</a> ou http://localhost/~&lt;username&gt;/test.php conforme o caso.
</p>
<h3>
<span id="HTTP.2F2"></span><span class="mw-headline" id="HTTP/2">HTTP/2</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Enquanto Apache suporta HTTP/2 não-criptografado sobre TCP (<code>h2c</code>), navegadores comuns <a rel="nofollow" class="external text" href="https://stackoverflow.com/a/46789195">não o fazem</a>. Portanto, para uso com o último, <a href="#TLS">#TLS</a> precisa ser ativado primeiro.</li>
<li>Se os clientes de suporte não usam HTTP/2 em vez de HTTP/1.1 e o gerador de configurações da Mozilla (o qual já tem incluída a linha <code>Protocols</code> abaixo) foi utilizado para realizar a configuração do <a href="#TLS">#TLS</a>, tente usar <code>Include</code> para incluí-lo em <code>httpd-ssl.conf</code> <i>após</i> a saída do último.</li>
<li>Maneiras de testar a inclusão <code>curl -sI https://your.website</code> ou <a rel="nofollow" class="external text" href="https://chrome.google.com/webstore/detail/http2-and-spdy-indicator/mpbpobfflnpcgagjijhmgnchggcjblin">esta extensão do Chrome</a><sup title="Status da última verificação: 404">[<a href="https://en.wikipedia.org/wiki/pt:Wikip%C3%A9dia:Liga%C3%A7%C3%A3o_inativa" class="extiw" title="wikipedia:pt:Wikipédia:Ligação inativa">link inativo</a> 2022-09-17 ⓘ]</sup>.</li>
</ul>
</div>
<p>Para habilitar o suporte ao HTTP/2 sobre TLS, descomente a seguinte linha em <code>httpd.conf</code>:
</p>
<pre>LoadModule http2_module modules/mod_http2.so
</pre>
<p>E adicione a seguinte linha:
</p>
<pre>Protocols h2 http/1.1
</pre>
<p>Para depuração, você poderá definir apenas o módulo (em vez de todo o servidor) usando <code>debug</code> ou <code>info</code>:
</p>
<pre>&lt;IfModule http2_module&gt;
    LogLevel http2:info
&lt;/IfModule&gt;
</pre>
<p>Para mais informações – incluindo configurações adicionais do HTTP/2 – veja a <a rel="nofollow" class="external text" href="https://httpd.apache.org/docs/2.4/mod/mod_http2.html">mod_http2</a> documentação.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> O módulo <code>http2_module</code> não é compatível com o módulo <code>mpm_prefork_module</code> cujas configurações antigas são largamente usadas para configurar o PHP. Considere usar <a href="#Usando_php-fpm_e_mod_proxy_fcgi">php-fpm</a> em vez disso.</div>
<h2>
<span id="Solu.C3.A7.C3.B5es_de_problemas"></span><span class="mw-headline" id="Soluções_de_problemas">Soluções de problemas</span>
</h2>
<h3><span class="mw-headline" id="Logs_e_Status_do_Apache">Logs e Status do Apache</span></h3>
<p>Veja o status do Apache usando o <a href="../pt/Systemd.html#Uso_b%C3%A1sico_do_systemctl" title="Systemd (Português)">systemctl</a>.
</p>
<p>Logs do Apache podem ser encontrados em <code>/var/log/httpd/</code>
</p>
<h3>
<span id="Error:_PID_file_.2Frun.2Fhttpd.2Fhttpd.pid_not_readable_.28yet.3F.29_ap.C3.B3s_inicializar"></span><span class="mw-headline" id="Error:_PID_file_/run/httpd/httpd.pid_not_readable_(yet?)_após_inicializar">Error: PID file /run/httpd/httpd.pid not readable (yet?) após inicializar</span>
</h3>
<p>Comente a linha <code>unique_id_module</code> em <code>httpd.conf</code>: <code>#LoadModule unique_id_module modules/mod_unique_id.so</code>
</p>
<h3>
<span id="Diret.C3.B3rio_.2Frun.2Fhttpd_n.C3.A3o_.C3.A9_criado_durante_o_boot"></span><span class="mw-headline" id="Diretório_/run/httpd_não_é_criado_durante_o_boot">Diretório /run/httpd não é criado durante o boot</span>
</h3>
<p>Se <code>systemd-tmpfiles --create</code> como usuário root resulta em algo como "unsafe path transition", verifique as definições de propriedade de seu diretório root.
</p>
<pre>ls -la /
chown root:root /
</pre>
<h3>
<span id="Apache_is_running_a_threaded_MPM.2C_but_your_PHP_Module_is_not_compiled_to_be_threadsafe."></span><span class="mw-headline" id="Apache_is_running_a_threaded_MPM,_but_your_PHP_Module_is_not_compiled_to_be_threadsafe.">Apache is running a threaded MPM, but your PHP Module is not compiled to be threadsafe.</span>
</h3>
<p>Se durante o carregamento de <code>php_module</code> o serviço <code>httpd.service</code> falha e você obtém um erro como este no log diário (journal) do sistema:
</p>
<pre>Apache is running a threaded MPM, but your PHP Module is not compiled to be threadsafe.  You need to recompile PHP.
</pre>
<p>Isto ocorre porque o PHP inclui suporte para um módulo que não é threadsafe, e você está tentando usar um MPM em modo threaded. Uma solução para corrigir isto é usar um módulo MPM non-threaded. Tente substituir <code>mpm_event_module</code> com <code>mpm_prefork_module</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/httpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"><s>LoadModule mpm_event_module modules/mod_mpm_event.so</s>
LoadModule mpm_prefork_module modules/mod_mpm_prefork.so
</pre>
<p>e reinicie <code>httpd.service</code>.
</p>
<h3><span class="mw-headline" id="AH00534:_httpd:_Configuration_error:_No_MPM_loaded.">AH00534: httpd: Configuration error: No MPM loaded.</span></h3>
<p>Você poderá encontrar este erro após uma atualização recente. Trata-se apenas de uma recente alteração em <code>httpd.conf</code> que você pode não ter reproduzido em sua configuração local.
Para corrigir, descomente a seguinte linha:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/httpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">LoadModule mpm_prefork_module modules/mod_mpm_prefork.so
</pre>
<p>E reinicie <code>httpd.service</code>.
</p>
<h3><span class="mw-headline" id="AH00072:_make_sock:_could_not_bind_to_address">AH00072: make_sock: could not bind to address</span></h3>
<p>Isto pode ser causado por várias razões. A mais comum delas é devido a algo estar já usando a porta fornecida, verifique via <a href="../pt/Network_configuration.html#Investigar_soquetes" title="Network configuration (Português)">netstat</a> se isto não está ocorrendo:
</p>
<pre># netstat -lnp | grep -e :80 -e :443
</pre>
<p>Se você obtiver alguma saída, pare o serviço indicado que está usando a porta ou encerre o processo que está causando o limite da porta e tente novamente.
</p>
<p>Outra possível causa é o fato do Apache não puder ser iniciado como root por alguma razão - tente iniciá-lo manualmente e veja se você continua obtendo o erro AH00072.
</p>
<pre># httpd -k start
</pre>
<p>Finalmente, você tembém pode obter um erro com sua configuração por comandar <code>Listen</code> duas vezes sobre a mesma porta. A configuração a seguir é um exemplo de uma configuração incorreta que irá ocasionar o problema:
</p>
<pre>Listen 0.0.0.0:80
Listen [::]:80
</pre>
<h3>
<span id="AH01071:_Got_error_.27Primary_script_unknown.27"></span><span class="mw-headline" id="AH01071:_Got_error_'Primary_script_unknown'">AH01071: Got error 'Primary script unknown'</span>
</h3>
<p>Isto pode ser causado por <code>ProtectHome=true</code> no arquivo unit do systemd relacionado ao php-fpm se você estiver usando arquivos fornecidos em <code>/home</code>, como ocorre em um ambiente de host virtual. Você pode desabilitar este recurso <a href="../pt/Systemd.html#Arquivos_drop-in" title="Systemd (Português)">editando o arquivo de unit do php-fpm</a> e reiniciando php-fpm. Alternativamente, mova seu <code>DocumentRoot</code>.
</p>
<h3>
<span id="Alterar_max_execution_time_no_php.ini_n.C3.A3o_surte_qualquer_efeito"></span><span class="mw-headline" id="Alterar_max_execution_time_no_php.ini_não_surte_qualquer_efeito">Alterar max_execution_time no php.ini não surte qualquer efeito</span>
</h3>
<p>Se você alterou <code>max_execution_time</code> no arquivo <code>php.ini</code> para um valor superior a 30 (segundos), você acabará obtendo uma resposta <code>503 Service Unavailable</code> do Apache após 30 segundos. Para solucionar isto, adicione uma diretiva <code>ProxyTimeout</code> no <code>httpd.conf</code> antes do bloco <code>&lt;FilesMatch \.php$&gt;</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/httpd/conf/httpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ProxyTimeout 300
</pre>
<p>e reinicie <code>httpd.service</code>.
</p>
<h3>
<span id="PHP-FPM:_erros_n.C3.A3o_est.C3.A3o_sendo_registrados_individualmente_para_cada_host_virtual"></span><span class="mw-headline" id="PHP-FPM:_erros_não_estão_sendo_registrados_individualmente_para_cada_host_virtual">PHP-FPM: erros não estão sendo registrados individualmente para cada host virtual</span>
</h3>
<p>Caso tenha múltiplos hosts virtuais, você talvez queira que cada um tenha seu próprio log de erros em arquivos separados (usando a diretiva ErrorLog do Apache). Se isto não funcionar para você, confirme que PHP-FPM está configurado para registrar erros em seu syslog:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/php/php-fpm.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">error_log = syslog</pre>
<p>Também é possível que a configuração do pool esteja sobrepondo. Verifique se a seguinte linha está comentada:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/php/php-fpm.d/www.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">;php_admin_value[error_log] = /var/log/fpm-php.www.log</pre>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.apache.org/">Apache Official Website</a></li>
<li><a rel="nofollow" class="external text" href="https://httpd.apache.org/docs/2.4/">Apache documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.apache.org/httpd/">Apache wiki</a></li>
<li><a rel="nofollow" class="external text" href="https://httpd.apache.org/docs/current/misc/security_tips.html">Apache documentation - Security Tips</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.apache.org/httpd/CommonMisconfigurations">Apache Wiki - Troubleshooting</a></li>
<li>
<a href="https://wiki.debian.org/Apache" class="extiw" title="debian:Apache">Apache</a> on wiki.debian.org</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Web_server.html" title="Category:Web server (Português)">Web server (Português)</a></li>
<li><a href="../pt/Category:Apache.html" title="Category:Apache (Português)">Apache (Português)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Apache_HTTP_Server_(Portugu%C3%AAs)&amp;oldid=799088">https://wiki.archlinux.org/index.php?title=Apache_HTTP_Server_(Português)&amp;oldid=799088</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 February 2024, at 17:58.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
