<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>systemd (Português)/Timers (Português) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Systemd_Português_Timers_Português rootpage-Systemd_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Units_de_timer" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Units_de_timer">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Units de timer</div>
		</a>
		
		<ul id="toc-Units_de_timer-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Unit_de_serviço" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Unit_de_servi%C3%A7o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Unit de serviço</div>
		</a>
		
		<ul id="toc-Unit_de_serviço-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Gerenciamento" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Gerenciamento">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Gerenciamento</div>
		</a>
		
		<ul id="toc-Gerenciamento-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Exemplos" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Exemplos">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Exemplos</div>
		</a>
		
			<button aria-controls="toc-Exemplos-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Exemplos subsection</span>
			</button>
		
		<ul id="toc-Exemplos-sublist" class="vector-toc-list">
			<li id="toc-Timer_monotônico" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Timer_monot%C3%B4nico">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Timer monotônico</div>
			</a>
			
			<ul id="toc-Timer_monotônico-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Timer_de_tempo_real" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Timer_de_tempo_real">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Timer de tempo real</div>
			</a>
			
			<ul id="toc-Timer_de_tempo_real-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Units_.timer_transientes" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Units_.timer_transientes">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Units .timer transientes</div>
		</a>
		
		<ul id="toc-Units_.timer_transientes-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Como_um_substituto_do_cron" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Como_um_substituto_do_cron">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Como um substituto do cron</div>
		</a>
		
			<button aria-controls="toc-Como_um_substituto_do_cron-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Como um substituto do cron subsection</span>
			</button>
		
		<ul id="toc-Como_um_substituto_do_cron-sublist" class="vector-toc-list">
			<li id="toc-Benefícios" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Benef%C3%ADcios">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Benefícios</div>
			</a>
			
			<ul id="toc-Benefícios-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ressalvas" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ressalvas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Ressalvas</div>
			</a>
			
			<ul id="toc-Ressalvas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-MAILTO" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#MAILTO">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>MAILTO</div>
			</a>
			
			<ul id="toc-MAILTO-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_um_crontab" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_um_crontab">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Usando um crontab</div>
			</a>
			
			<ul id="toc-Usando_um_crontab-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">7</span>Veja também</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">systemd (Português)/Timers (Português)</h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 7 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-7" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">7 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Systemd/Timers" title="Systemd/Timers – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../../en/Systemd/Timers.html" title="Systemd/Timers – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../../es/Systemd/Timers.html" title="Systemd (Español)/Timers – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../../fr/Systemd/Timers.html" title="Systemd (Français)/Timers – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Systemd/%E3%82%BF%E3%82%A4%E3%83%9E%E3%83%BC" title="Systemd/タイマー – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../../ru/Systemd/Timers.html" title="Systemd (Русский)/Timers – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Systemd/Timers" title="Systemd/Timers – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"><div class="subpages">&lt; <a href="../../pt/Systemd.html" title="Systemd (Português)">Systemd (Português)</a>
</div></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../../en/Systemd/Timers.html" title="Systemd/Timers">Systemd/Timers</a>. Data da última tradução: 2020-04-07. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Systemd/Timers&amp;diff=0&amp;oldid=601345">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../../pt/Systemd.html" title="Systemd (Português)">systemd</a></li>
<li><a href="../../en/Systemd/User.html" title="Systemd/User">systemd/User</a></li>
<li><a href="../../en/Systemd/FAQ.html" class="mw-redirect" title="Systemd FAQ">systemd FAQ</a></li>
<li><a href="../../en/Cron.html" title="Cron">cron</a></li>
</ul>
</div>
<p><i>Timers</i> são arquivos de unit do <a href="../../pt/Systemd.html" title="Systemd (Português)">systemd</a> cujo nome termina em <code>.timer</code> que controla arquivos <code>.service</code> ou seus eventos. Timers podem ser usados como uma alternativa ao <a href="../../en/Cron.html" title="Cron">cron</a> (leia <a href="#Como_um_substituto_do_cron">#Como um substituto do cron</a>). Os timers têm suporte interno para eventos de tempo do calendário, eventos de tempo monotônicos e podem ser executados de forma assíncrona.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Units_de_timer">Units de timer</span></h2>
<p>Timers são arquivos unit do <i>systemd</i> com um sufixo de <code>.timer</code>. Timers são como outros <a href="../../pt/Systemd.html#Escrevendo_arquivos_unit" title="Systemd (Português)">arquivos de configuração units</a> e são carregados dos mesmos caminhos, mas incluem uma seção <code>[Timer]</code> que define quando e como o timer é ativado. Timers são definidos como um dos dois tipos:
</p>
<ul>
<li>
<b>Timers de tempo real</b> (ou <i>wallclock timers</i>, relógios de parede) são ativados em um evento de calendário, da mesma forma que os <i>cronjobs</i>. A opção <code>OnCalendar=</code> é usada para defini-los.</li>
<li>
<b>Timers monotônicos</b> são ativados após um período de tempo relativo a um ponto inicial variável. Eles param se o computador é temporariamente suspenso ou desligado. Há vários timers monotônicos diferentes, mas todos têm a forma: <code>On<i>Tipo</i>Sec=</code>.  Timers monotônicos comuns incluem <code>OnBootSec</code> e <code>OnActiveSec</code>.</li>
</ul>
<p>Para uma explicação completa das opções de timers, veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.timer"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.timer.5">systemd.timer(5)</a></span>. A sintaxe de argumentos para eventos de calendário e períodos de tempo está definida em <span class="plainlinks archwiki-template-man" title="$ man 7 systemd.time"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.time.7">systemd.time(7)</a></span>.
</p>
<h2>
<span id="Unit_de_servi.C3.A7o"></span><span class="mw-headline" id="Unit_de_serviço">Unit de serviço</span>
</h2>
<p>Para cada arquivo <code>.timer</code>, um arquivo <code>.service</code> correspondente existe (p.ex., <code>foo.timer</code> e <code>foo.service</code>). O arquivo <code>.timer</code> ativa e controla o arquivo <code>.service</code>.  O <code>.service</code> não exige uma seção <code>[Install]</code>, pois os units <i>timer</i> que são habilitados. Se necessário, é possível controlar uma unit com nome diferente usando a opção <code>Unit=</code> na seção <code>[Timer]</code> do timer.
</p>
<h2><span class="mw-headline" id="Gerenciamento">Gerenciamento</span></h2>
<p>Para usar uma unit de <i>timer</i>, <a href="../../pt/Systemd.html#Usando_units" class="mw-redirect" title="Habilite">habilite</a> e <a href="../../pt/Systemd.html#Usando_units" class="mw-redirect" title="Inicie">inicie</a>-a como qualquer outra unit unit (lembre-se de adicionar o sufixo <code>.timer</code>). Para ver todos os timers iniciados, execute:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ systemctl list-timers</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NEXT                          LEFT        LAST                          PASSED     UNIT                         ACTIVATES
Thu 2014-07-10 19:37:03 CEST  11h left    Wed 2014-07-09 19:37:03 CEST  12h ago    systemd-tmpfiles-clean.timer systemd-tmpfiles-clean.service
Fri 2014-07-11 00:00:00 CEST  15h left    Thu 2014-07-10 00:00:13 CEST  8h ago     logrotate.timer              logrotate.service
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Para listar todos os timers (incluindo inativos), use <code>systemctl list-timers --all</code>.</li>
<li>O status de um serviço iniciado por um timer provavelmente ficará inativo, a menos que esteja sendo acionado no momento.</li>
<li>Se um timer ficar fora de sincronia, pode ajudar a excluir seu arquivo <code>stamp-*</code> em <code>/var/lib/systemd/timers</code> (ou <code>~/.local/share/systemd/</code> no caso de timers do usuário). Estes são arquivos de comprimento zero que marcam a última vez que cada timer foi executado. Se excluídos, eles serão reconstruídos no próximo início do temporizador.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Exemplos">Exemplos</span></h2>
<p>Um arquivo unit de serviço pode ser agendado com um temporizador pronto para uso. Os exemplos a seguir agendam o <code>foo.service</code> para ser executado com um timer correspondente chamado <code>foo.timer</code>.
</p>
<h3>
<span id="Timer_monot.C3.B4nico"></span><span class="mw-headline" id="Timer_monotônico">Timer monotônico</span>
</h3>
<p>Um timer que será iniciado 15 minutos após a inicialização e novamente toda semana enquanto o sistema estiver em execução.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/foo.timer</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Executa foo semanalmente e na inicialização

[Timer]
OnBootSec=15min
OnUnitActiveSec=1w 

[Install]
WantedBy=timers.target
</pre>
<h3><span class="mw-headline" id="Timer_de_tempo_real">Timer de tempo real</span></h3>
<p>Um timer que começa uma vez por semana (às 00:00 da segunda-feira). Quando ativado, aciona o serviço imediatamente se perdeu a última hora de início (opção <code>Persistent=true</code>), por exemplo, devido ao sistema estar desligado:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/foo.timer</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Executa foo semanalmente

[Timer]
OnCalendar=weekly
Persistent=true

[Install]
WantedBy=timers.target</pre>
<p>Quando datas e horas mais específicas são necessárias, os eventos de <code>OnCalendar</code> usam o seguinte formato:
</p>
<pre><code>DiaDaSemana Ano-Mês-Dia Hora:Minuto:Segundo</code>
</pre>
<p>Um asterisco pode ser usado para especificar qualquer valor e vírgulas podem ser usadas para listar possíveis valores. Dois valores separados por <code>..</code> indicam um intervalo contíguo.
</p>
<p>No exemplo abaixo, o serviço é executado nos primeiros quatro dias de cada mês às 12:00, mas <i>somente</i> se esse dia for uma segunda-feira ou uma terça-feira.
</p>
<pre>OnCalendar=Mon,Tue *-*-01..04 12:00:00
</pre>
<p>Para executar um serviço no primeiro sábado de cada mês, use:
</p>
<pre> OnCalendar=Sat *-*-1..7 18:00:00
</pre>
<p>Ao usar a parte <code>DiaDaSemana</code>, pelo menos um dia da semana deve ser especificado. Se você quer que algo seja executado todos os dias às 4h da manhã, use:
</p>
<pre> OnCalendar=*-*-* 4:00:00
</pre>
<p>Para executar um serviço em momentos diferentes, <code>OnCalendar</code> pode ser especificado mais de uma vez. No exemplo abaixo, o serviço funciona às 22:30 durante a semana e às 20:00 nos finais de semana.
</p>
<pre> OnCalendar=Mon..Fri 22:30
 OnCalendar=Sat,Sun 20:00
</pre>
<p>Mais informações estão disponíveis em <span class="plainlinks archwiki-template-man" title="$ man 7 systemd.time"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.time.7">systemd.time(7)</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>Especificações de tempo no <code>OnCalendar</code> pode ser testado para verificar sua validade e calcular a próxima vez que a condição decorrerá quando usada em um arquivo unit de timer com a opção <code>calendar</code> do utilitário <i>systemd-analyse</i>. Por exemplo, pode-se usar o <code>systemd-analyze calendar weekly</code> ou o <code>systemd-analyze calendar "Mon,Tue *-*-01..04 12:00:00"</code>.</li>
<li>Expressões de eventos especiais como <code>daily</code> e <code>weekly</code> referem-se a <i>horários de início específicos</i> e, assim, todos os timers que compartilham esses eventos de calendário serão iniciados simultaneamente. Os timers que compartilham eventos iniciais podem causar um desempenho ruim do sistema se os serviços dos timers competirem pelos recursos do sistema. A opção <code>RandomizedDelaySec</code> na seção <code>[Timer]</code> evita esse problema, escalonando aleatoriamente a hora de início de cada timer. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.timer"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.timer.5">systemd.timer(5)</a></span>.</li>
<li>Adicione a opção <code>AccuracySec=1us</code> à seção <code>[Timer]</code>, para evitar a imprecisão do valor padrão <i>1m</i> de <code>AccuracySec</code>. Consulte também <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.timer"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.timer.5">systemd.timer(5)</a></span>.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Units_.timer_transientes">Units .timer transientes</span></h2>
<p>Pode-se usar <code>systemd-run</code> para criar unidades <code>.timer</code> transitórias. Ou seja, é possível definir um comando para ser executado em um horário especificado sem ter um arquivo de serviço. Por exemplo, o seguinte comando toca um arquivo após 30 segundos:
</p>
<pre># systemd-run --on-active=30 /bin/touch /tmp/foo
</pre>
<p>Também é possível especificar um arquivo de serviço pré-existente que não tenha um arquivo de cronômetro. Por exemplo, o seguinte inicia a unit systemd denominada <code><i>algumaunit</i>.service</code> após 12,5 horas:
</p>
<pre># systemd-run --on-active="12h 30m" --unit <i>algumaunit</i>.service
</pre>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 1 systemd-run"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-run.1">systemd-run(1)</a></span> para mais informações e exemplos.
</p>
<h2><span class="mw-headline" id="Como_um_substituto_do_cron">Como um substituto do cron</span></h2>
<p>Embora o <a href="../../en/Cron.html" title="Cron">cron</a> seja indiscutivelmente o agendador de tarefas mais conhecido, os temporizadores <i>systemd</i> podem ser uma alternativa.
</p>
<h3>
<span id="Benef.C3.ADcios"></span><span class="mw-headline" id="Benefícios">Benefícios</span>
</h3>
<p>Os principais benefícios do uso de timers vêm de cada job ter seu próprio serviço <i>systemd</i>. Alguns desses benefícios são:
</p>
<ul>
<li>Os trabalhos podem ser facilmente iniciados independentemente de seus timers. Isso simplifica a depuração.</li>
<li>Cada trabalho pode ser configurado para ser executado em um ambiente específico (consulte <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.exec"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.exec.5">systemd.exec(5)</a></span>).</li>
<li>Os trabalhos podem ser anexados a <a href="../../pt/Cgroups.html" title="Cgroups (Português)">cgroups</a>.</li>
<li>Os trabalhos podem ser configurados para depender de outras units <i>systemd</i>.</li>
<li>Os trabalhos são registrados no diário <i> systemd </i> para facilitar a depuração.</li>
</ul>
<h3><span class="mw-headline" id="Ressalvas">Ressalvas</span></h3>
<p>Algumas coisas que são fáceis de fazer com o cron são difíceis de fazer apenas com units de timers:
</p>
<ul>
<li>Criação: para configurar um trabalho com timer com <i>systemd</i>, você precisa criar dois arquivos e executar comandos <code>systemctl</code>, em comparação com a adição de uma única linha a um crontab.</li>
<li>E-mails: não há um equivalente interno ao <code>MAILTO</code> do cron para enviar e-mails em caso de falha no trabalho. Veja a próxima seção para um exemplo de configuração de uma funcionalidade similar usando <code>OnFailure=</code>.</li>
</ul>
<h3><span class="mw-headline" id="MAILTO">MAILTO</span></h3>
<p>Você pode configurar o systemd para enviar um e-mail quando uma unit falhar. Cron envia um e-mail para <code>MAILTO</code> se o trabalho é gerado para stdout ou stderr, mas muitos trabalhos são configurados para serem emitidos somente com erro. Primeiro você precisa de dois arquivos: um executável para enviar o e-mail e um <i>.service</i> para iniciar o executável. Para este exemplo, o executável é apenas um script de shell usando <code>sendmail</code>, que está em pacotes que fornecem <code>smtp-forwarder</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/local/bin/systemd-email</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

/usr/bin/sendmail -t &lt;&lt;ERRMAIL
To: $1
From: systemd &lt;root@$HOSTNAME&gt;
Subject: $2
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=UTF-8

$(systemctl status --full "$2")
ERRMAIL</pre>
<p>Seja qual for o executável que você usa, ele provavelmente deve ter pelo menos dois argumentos, como o script de shell: o endereço para enviar e o arquivo de unit para obter o status. O <i>.service</i> que criamos passará esses argumentos:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/status-email-<i>usuário</i>@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=e-mail de estado de %i para <i>usuário</i>

[Service]
Type=oneshot
ExecStart=/usr/local/bin/systemd-email <i>endereço</i> %i
User=nobody
Group=systemd-journal</pre>
<p>sendo <code><i>usuário</i></code> o usuário que está sendo enviado por e-mail e o <code><i>endereço</i></code> o endereço de e-mail desse usuário. Embora o destinatário esteja embutido em código, o arquivo unit a ser relatado é passado como um parâmetro de instância, portanto, esse serviço pode enviar emails para muitas outras units. Neste ponto, você pode <a href="../../pt/Systemd.html#Usando_units" class="mw-redirect" title="Inicia">iniciar</a> <code>status-email-<i>usuário</i>@dbus.service</code> para verificar se você pode receber os e-mails.
</p>
<p>Em seguida, basta <a href="../../pt/Systemd.html#Editando_units_fornecidas" class="mw-redirect" title="Editar">editar</a> o serviço para o qual você deseja receber e-mails <code>OnFailure=status-email-<i>usuário</i>@%n.service</code> para o <code>[Unit]</code> seção. <code>%n</code> passa o nome da unit para o modelo.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> 
<ul>
<li>Se você configurar a segurança do sSMTP de acordo com <a href="../../en/SSMTP.html#Security" title="SSMTP">sSMTP#Security</a>, o usuário <code>nobody</code> não terá acesso a <code>/etc/ssmtp/ssmtp.conf</code> e o comando <code>systemctl start status-email-<i>usuário</i>@dbus.service</code> falhará. Uma solução é usar <code>root</code> como o usuário da unit <code>status-email-<i>usuário</i>@.service</code>.</li>
<li>Se você tentar usar o <code>mail -s algunslogs <i>endereço</i></code> no seu script de e-mail, <code>mail</code> fará um <i>fork</i> e o systemd eliminará o processo de e-mail quando vir sua saída de script. Certifique-se que o e-mail não faça um "fork" fazendo <code>mail -Ssendwait -s algunslogs <i>endereços</i></code>.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Usando_um_crontab">Usando um crontab</span></h3>
<p>Várias das ressalvas podem ser contornadas instalando um pacote que analisa um crontab tradicional para configurar os timers. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-cron-next/">systemd-cron-next</a></span><sup><small>AUR</small></sup><sup>[<a href="../../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">link quebrado</a>: package not found]</sup> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-cron/">systemd-cron</a></span><sup><small>AUR</small></sup> são dois desses pacotes. Eles podem fornecer o recurso <code>MAILTO</code> ausente.
</p>
<p>Além disso, assim como no crontabs, uma visão unificada de todos os trabalhos agendados pode ser obtida com <code>systemctl</code>. Veja <a href="#Gerenciamento">#Gerenciamento</a>.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><span class="plainlinks archwiki-template-man" title="$ man 5 systemd.timer"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.timer.5">systemd.timer(5)</a></span></li>
<li>
<a rel="nofollow" class="external text" href="https://fedoraproject.org/wiki/Features/SystemdCalendarTimers">Página wiki do Projeto Fedora</a> sobre timers de calendário do <i>systemd</i>
</li>
<li>
<a rel="nofollow" class="external text" href="https://wiki.gentoo.org/wiki/Systemd#Timer_services">Seção no wiki do Gentoo</a> sobre serviços de timer do <i>systemd</i>
</li>
<li>
<b>systemd-cron-next</b> — Ferramenta para gerar timers/serviços a partir de arquivos crontab e anacrontab</li>
</ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/systemd-cron/systemd-cron-next">https://github.com/systemd-cron/systemd-cron-next</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-cron-next/">systemd-cron-next</a></span><sup><small>AUR</small></sup><sup>[<a href="../../en/ArchWiki:Requests.html#Broken_package_links" class="mw-redirect" title="ArchWiki:Requests">link quebrado</a>: package not found]</sup>
</dd></dl>
<ul><li>
<b>systemd-cron</b> — Fornece units de systemd para executar scripts do cron; usando <i>systemd-crontab-generator</i> para converter crontabs</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/systemd-cron/systemd-cron">https://github.com/systemd-cron/systemd-cron</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/systemd-cron/">systemd-cron</a></span><sup><small>AUR</small></sup>
</dd></dl>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../pt/Category:System_administration.html" title="Category:System administration (Português)">System administration (Português)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_with_broken_package_links.html" title="Category:Pages with broken package links">Pages with broken package links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Systemd_(Portugu%C3%AAs)/Timers_(Portugu%C3%AAs)&amp;oldid=792799">https://wiki.archlinux.org/index.php?title=Systemd_(Português)/Timers_(Português)&amp;oldid=792799</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 19 November 2023, at 07:21.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
