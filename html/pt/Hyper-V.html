<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Hyper-V (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Hyper-V_Português rootpage-Hyper-V_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Instalação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Instala%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Instalação</div>
		</a>
		
		<ul id="toc-Instalação-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuração_de_rede" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configura%C3%A7%C3%A3o_de_rede">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Configuração de rede</div>
		</a>
		
			<button aria-controls="toc-Configuração_de_rede-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Configuração de rede subsection</span>
			</button>
		
		<ul id="toc-Configuração_de_rede-sublist" class="vector-toc-list">
			<li id="toc-Configurar_um_comutador_virtual" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configurar_um_comutador_virtual">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Configurar um comutador virtual</div>
			</a>
			
			<ul id="toc-Configurar_um_comutador_virtual-sublist" class="vector-toc-list">
				<li id="toc-Comutador_externo" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Comutador_externo">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.1</span>Comutador externo</div>
			</a>
			
			<ul id="toc-Comutador_externo-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Comutador_interno" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Comutador_interno">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1.2</span>Comutador interno</div>
			</a>
			
			<ul id="toc-Comutador_interno-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Criação_de_máquina_virtual" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Cria%C3%A7%C3%A3o_de_m%C3%A1quina_virtual">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Criação de máquina virtual</div>
		</a>
		
		<ul id="toc-Criação_de_máquina_virtual-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Configuração_da_máquina_virtual" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Configura%C3%A7%C3%A3o_da_m%C3%A1quina_virtual">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Configuração da máquina virtual</div>
		</a>
		
		<ul id="toc-Configuração_da_máquina_virtual-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Instalação_do_Arch" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Instala%C3%A7%C3%A3o_do_Arch">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Instalação do Arch</div>
		</a>
		
		<ul id="toc-Instalação_do_Arch-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Pós-instalação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#P%C3%B3s-instala%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Pós-instalação</div>
		</a>
		
			<button aria-controls="toc-Pós-instalação-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Pós-instalação subsection</span>
			</button>
		
		<ul id="toc-Pós-instalação-sublist" class="vector-toc-list">
			<li id="toc-Compartilhamento_de_diretórios" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Compartilhamento_de_diret%C3%B3rios">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.1</span>Compartilhamento de diretórios</div>
			</a>
			
			<ul id="toc-Compartilhamento_de_diretórios-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Xorg" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Xorg">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.2</span>Xorg</div>
			</a>
			
			<ul id="toc-Xorg-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuração_da_resolução" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configura%C3%A7%C3%A3o_da_resolu%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.3</span>Configuração da resolução</div>
			</a>
			
			<ul id="toc-Configuração_da_resolução-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Modo_de_sessão_aprimorado" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Modo_de_sess%C3%A3o_aprimorado">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.4</span>Modo de sessão aprimorado</div>
			</a>
			
			<ul id="toc-Modo_de_sessão_aprimorado-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Dicas_e_truques" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dicas_e_truques">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">6.5</span>Dicas e truques</div>
			</a>
			
			<ul id="toc-Dicas_e_truques-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Hyper-V (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 2 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-2" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">2 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Hyper-V.html" title="Hyper-V – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Hyper-V" title="Hyper-V – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<p>Hyper-V é um hipervisor incluso em algumas versões do Microsoft Windows. É capaz de executar uma máquina virtual contendo Arch Linux. Hyper-V é geralmente mais orientado ao uso empresarial do que doméstico, e não fornece uma interface tão conveniente e simples de virtualização quanto a de programas como <a href="../en/VirtualBox.html" title="VirtualBox">VirtualBox</a>, <a href="../en/Parallels_Desktop.html" class="mw-redirect" title="Parallels">Parallels</a>, ou <a href="../en/VMware.html" title="VMware">VMware</a>. Entretanto, versões mais recentes e compilações do Windows 10 e Windows Server 2016 incluem opções de configuração mais fáceis e melhor compatibilidade com Arch Linux. Recursos de rede tais como NAT para comutadores internos, NATs múltiplos e encaminhamento de portas foram adicionados sem a necessidade de configurar um Compartilhamento de Conexão com a Internet. Máquinas virtuais de segunda geração agora também funcionam adequadamente para Arch Linux.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Instalação">Instalação</span>
</h2>
<p>Hyper-V é incluso com Windows desde Windows Server 2008, bem como Windows 8, 8.1 e 10 nas suas versões Pro.  Pode ser ativado via Painel de Controle em "Ativar ou desativar recursos do Windows" sob "Programas e Recursos". Ative "Hyper-V", aplique a alteração e siga as instruções na tela.
</p>
<h2>
<span id="Configura.C3.A7.C3.A3o_de_rede"></span><span class="mw-headline" id="Configuração_de_rede">Configuração de rede</span>
</h2>
<p>Primeiro, deve-se configurar um novo comutador virtual First, você deve configurar um novo comutador virtual para que sua máquina virtual possa se conectar à Internet. Uma vez que Hyper-V esteja ativo, inicie o Gerenciador do Hyper-V: procure por ele ou inicie-o a partir do Prompt de comando com o seguinte comando:
</p>
<pre>%windir%\system32\mmc.exe "%windir%\system32\virtmgmt.msc"
</pre>
<h3><span class="mw-headline" id="Configurar_um_comutador_virtual">Configurar um comutador virtual</span></h3>
<p>Para conectar sua máquina virtual em uma rede existente, use um comutador de rede interno ou externo (adaptador de rede virtual). Um comutador externo deve ser vinculado (em ponte) a um dos adaptadores de rede existentes do host (por exemplo, Ethernet ou Wi-Fi). Um comutador interno pode ser usado para comunicação de rede entre o host e as máquinas virtuais, sem que as máquinas virtuais tenham acesso à rede externa. Adicionar a funcionalidade NAT a um comutador interno faz com que o host atue como um roteador para as máquinas virtuais, permitindo que as máquinas virtuais acessem a rede externa.
</p>
<p>Nem todos os recursos de rede (por exemplo, configuração NAT) podem ser configurados por meio da interface gráfica do Gerenciador do Hyper-V. Executar o PowerShell como administrador permite um melhor controle sobre a configuração.
</p>
<h4><span class="mw-headline" id="Comutador_externo">Comutador externo</span></h4>
<p>Para criar um comutador externo, na barra lateral direita, selecione "Gerenciar comutadores virtuais...". Na barra lateral esquerda da caixa de diálogo que se abre, escolha "Novo comutador de rede virtual". Em "Que tipo de comutador virtual você deseja criar?", selecione "Externo" e depois "Criar comutador virtual". Digite um novo nome para o comutador virtual. Em "Rede externa", escolha o adaptador de rede a ser vinculado ao comutador externo.
</p>
<p>Você será avisado sobre a interrupção da rede; continue e sua rede será desconectada brevemente enquanto o comutador é configurado.
</p>
<p>Usando o PowerShell (executado como administrador), as etapas acima podem ser feitas da seguinte forma:
</p>
<pre># Obtém uma lista dos adaptadores de rede no host. Em um laptop, você normalmente deve ver 'Ethernet' e 'Wi-Fi'
PS C:\WINDOWS\system32&gt; Get-NetAdapter

# Cria o comutador externo com o nome de VM-External-Switch, vinculado ao adaptador de rede chamado <code>Wi-Fi</code> obtido a partir do comando anterior
PS C:\WINDOWS\system32&gt; New-VMSwitch -Name "VM-External-Switch" -AllowManagementOS $True -NetAdapterName "Wi-Fi"
</pre>
<p>Em uma máquina virtual Arch Linux, ao escolher um comutador externo como seu adaptador de rede efetivamente conecta o adaptador de rede do host Windows com a interface <code>eth0</code> da máquina virtual. A interface pode ser configurada dentro do Arch Linux pelos meios usuais (systemd-networkd, netctl, etc.) com um IP estático ou com DHCP. A máquina virtual agirá como outro host na rede externa.
</p>
<p>Por exemplo, se você deseja que a máquina virtual Arch Linux use um IP estático e o host Windows está configurado como <code>192.168.0.100/24</code>, então a máquina virtual Arch Linux deverá ser configurada em algo como <code>192.168.0.101/24</code>, com o mesmo gateway e servidores DNS configurados no host.
</p>
<p>Se estiver usando DHCP na máquina virtual, o endereço IP será atribuído pelo servidor DHCP na rede externa.
</p>
<h4><span class="mw-headline" id="Comutador_interno">Comutador interno</span></h4>
<p>A partir da versão 1803 ("Fall Creators Update"), o Windows 10 tem um comutador NAT incorporado (chamado de "Default Switch") que lhe dá instantâneo acesso à Internet após a instalação da sua máquina virtual caso você a configure para usar DHCP, veja <a rel="nofollow" class="external text" href="https://techcommunity.microsoft.com/t5/Virtualization/What-s-new-in-Hyper-V-for-Windows-10-Fall-Creators-Update/ba-p/382399">este post no blog Technet</a>, portanto você não precisará das instruções a seguir para obter um comutador NAT funcional.
</p>
<p>Para criar um comutador interno, siga os mesmos passos usados para criar um comutador externo, apenas substituindo as escolhas relevantes para 'comutador interno'. A partir do Windows 10 Anniversary Update (Version 1607, OS Build 14393), o suporte nativo a NAT para comutadores internos foi adicionado ao Hyper-V. Para versões anteriores, o Compartilhamento de Conexão com a Internet (ICS) pode ser usado para habilitar o acesso à rede para máquinas virtuais em comutadores internos.
</p>
<p>Para descobrir qual versão e compilação do Windows você está usando, em um prompt de comando ou PowerShell, execute:
</p>
<pre>&gt; winver
</pre>
<p>Usando PowerShell (execute como Administrador), um comutador interno pode ser criado com os seguintes comandos:
</p>
<pre># Cria o comutador interno com o nome de VM-Internal-Switch
PS C:\WINDOWS\system32&gt; New-VMSwitch -Name "VM-Internal-Switch" -SwitchType Internal

# Verifica se o comutador interno foi criado
PS C:\WINDOWS\system32&gt; Get-VMSwitch

# Obtém o índice de interface do comutador interno recentemente criado, normalmente com o nome de 'vEthernet (nome)'
PS C:\WINDOWS\system32&gt; Get-NetAdapter

# Configura o endereço IP do commutador interno, observando o índice de interface recuperado do comando anterior.
# Neste exemplo, o endereço de rede do comutador interno é 192.168.3.0/24 e seu índice de interface é 50.
PS C:\WINDOWS\system32&gt; New-NetIPAddress -IPAddress 192.168.3.1 -PrefixLength 24 -InterfaceIndex 50

# As máquinas virtuais usando o comutador interno devem usar endereços IP estáticos, tal como 192.168.3.2/24.
# O suporte para DHCP em comutadores internos não foi incluído nas versões atuais do Windows (a partir da versão 1703, compilação 15063).
</pre>
<p>Com os passos acima, o host e máquinas virtuais já podem comunicar-se uns com os outros desde que estejam na mesma rede virtual (<code>192.168.3.0/24</code>). As máquinas virtuais, entretanto, não serão capazes de acessar a rede externa até que um NAT ou ICS seja configurado.
</p>
<p>Na compilação 14393 ou mais recente do Windows 10, comutadores internos podem ser configurados para NAT e encaminhamento de porta:
</p>
<pre># Cria o NAT com endereço IP no comutador interno
PS C:\WINDOWS\system32&gt; New-NetNat -Name "VM-NAT-Network" -InternalIPInterfaceAddressPrefix 192.168.3.1/24

# Verifica se o NAT foi criado
PS C:\WINDOWS\system32&gt; Get-NetNat

# Ativa o encaminhamento de porta para SSH na porta 2222 de qualquer interface no host para uma máquina virtual com endereço IP 192.168.3.2/24
PS C:\WINDOWS\system32&gt; Add-NetNatStaticMapping -NatName "VM-NAT-Network" -Protocol TCP -ExternalIPAddress 0.0.0.0 -ExternalPort 2222 -InternalIPAddress 192.168.3.2 -InternalPort 22

# Verifica se o encaminhamento de portas está ativo
PS C:\WINDOWS\system32&gt; Get-NetNatStaticMapping
</pre>
<p>Consulte a documentação da Microsoft <a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/powershell/module/netnat/">NetNat</a> para uma lista completa de comandos.
</p>
<p>Para versões e compilações anteriores do Windows, o Compartilhamento de Conexão com a Internet pode ser usado. Abra Configurações de Rede e Compartilhamento, Configurações do Adaptador, onde você precisará habilitar o compartilhamento de conexão com a Internet para o seu adaptador de Internet que você normalmente usa. Uma vez que a conexão puder ser compartilhada, adicione-a a uma ponte junto com o comutador virtual que você criou na etapa anterior.
</p>
<h2>
<span id="Cria.C3.A7.C3.A3o_de_m.C3.A1quina_virtual"></span><span class="mw-headline" id="Criação_de_máquina_virtual">Criação de máquina virtual</span>
</h2>
<p>Na barra lateral esquerda, selecione seu computador abaixo de "Gerenciador do Hyper-V". Na barra lateral direita, selecione "Novo" &gt; "Máquina virtual...". No Assistente de nova máquina virtual, você pode, em geral, especificar as configurações que desejar, mas algumas devem ser obrigatoriamente configuradas.
</p>
<p>Sob "Especificar geração", você pode escolher "Geração 1" ou "Geração 2". Máquinas virtuais de geração 1 emulam uma máquina baseada em BIOS e portas legadas. Já a geração 2, provê uma máquina baseada em UEFI. Em geral, Em geral, use a Geração 2, a menos que por motivos de compatibilidade ou portabilidade você precise usar a Geração 1. Além disso, ao usar a Geração 2 para uma máquina virtual com Arch Linux, certifique-se de desabilitar o Secure Boot nas configurações da máquina virtual em Hardware -&gt; Segurança.
</p>
<p>Em "Memória de inicialização" sob "Atribuir memória", selecione o suficiente para que Arch e programas possam executar adequadamente.
</p>
<p>Em "Conexão" sob "Configurar rede", selecione o comutador virtual criado anteriormente.
</p>
<p>Em "Conectar disco rígido virtual", selecione "Criar um disco rígido virtual", e certifique-se de que "Tamanho" está apropriado para o seu uso. O disco rígido virtual é esparso, portanto, o disco rígido virtual usará apenas o armazenamento real necessário para armazenar o que o sistema operacional virtual gravou nele.
</p>
<p>Em "Opções de instalação", selecione "Instalar um sistema operacional inicializável a partir de um CD/DVD-ROM". Caso esteja instalando Arch a partir de um disco ou dispositivo USB, selecione "Unidade de CD/DVD física" em "Mídia", e selecione a letra apropriada. Caso esteja instalando Arch a partir de uma imagem em um arquivo ISO, selecione "Arquivo de imagem (.iso)", e selecione o arquivo na caixa de diálogo "Procurar...". Para máquinas de Geração 2, inicializar a partir de uma unidade de CD/DVD física não é suportado.
</p>
<h2>
<span id="Configura.C3.A7.C3.A3o_da_m.C3.A1quina_virtual"></span><span class="mw-headline" id="Configuração_da_máquina_virtual">Configuração da máquina virtual</span>
</h2>
<p>O próximo passo é ajustar as configurações da máquina virtual.
</p>
<p>Se preferir, é possível adicionar mais processadores virtuais em sua máquina virtual. Isto permite que a máquina virtual use mais de um dos núcleos do processador, o que irá aumentar o desempenho em muitos casos. Se pretende usar a máquina virtual intensivamente, talvez queira alocar até metade de seus núcleos de processador. Para alterar o número de processadores virtuais, selecione "Processador" na barra lateral esquerda, então faça o ajuste "Número de processadores virtuais".
</p>
<p>Altere quaisquer configurações que desejar, então selecione "OK" para aplicá-las e fechar a caixa de diálogo de configurações.
</p>
<h2>
<span id="Instala.C3.A7.C3.A3o_do_Arch"></span><span class="mw-headline" id="Instalação_do_Arch">Instalação do Arch</span>
</h2>
<p>Uma vez que a máquina virtual esteja completamente configurada, você estará pronto para instalar Arch. Na barra lateral direita, selecione "Iniciar", então "Conectar...", e uma janela de conexão abrirá. A rede deverá funcionar automaticamente quando a mídia de instalação do Arch estiver executando; verifique usando  <code>ping</code> em um endereço que você tem conhecimento de que responderá, por exemplo
</p>
<pre>ping archlinux.org
</pre>
<p>Se não houver resposta, a conexão não está funcionando. Se este é o caso, você estará provavelmente experienciando <a rel="nofollow" class="external text" href="https://support.microsoft.com/kb/974909">um bug reconhecido pela Microsoft</a>. Você pode tentar solucioná-lo instalando o hotfix a partir da página Knowledge Base, ou simplesmente aguardar um pouco e tentar novamente.
</p>
<p>Em geral, agora você pode instalar o Arch como faria em qualquer outro sistema. As máquinas virtuais de geração 1 têm suporte somente para BIOS (sem UEFI), portanto você deve seguir as instruções específicas para BIOS para um dos vários <a href="../en/Arch_boot_process.html#Boot_loader" class="mw-redirect" title="Boot loader">boot loaders</a>.
</p>
<h2>
<span id="P.C3.B3s-instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Pós-instalação">Pós-instalação</span>
</h2>
<p>Após a instalação do Arch, você pode continuar a configurar recursos.
</p>
<p>Para usar <a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/manage/manage-hyper-v-integration-services">serviços de integração do Hyper-V</a>, <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" title="Help:Reading (Português)">instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hyperv">hyperv</a></span> e <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">inicie</a>/<a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">ative</a> os serviços <code>hv_fcopy_daemon.service</code>, <code>hv_kvp_daemon.service</code> e <code>hv_vss_daemon.service</code>.
</p>
<p>Desligue a máquina virtual, abra a caixa de diálogo "Configurações" novamente, e na barra lateral esquerda, selecione "Unidade de DVD" sob "Controlador IDE" ou "SCSI". Em "Mídia", escolha "Nenhum". Isto fará com que a máquina virtual pare de tentar inicializar a partir da mídia de instalação a cada inicialização.
</p>
<h3>
<span id="Compartilhamento_de_diret.C3.B3rios"></span><span class="mw-headline" id="Compartilhamento_de_diretórios">Compartilhamento de diretórios</span>
</h3>
<p>Arquivos podem ser compartilhados entre host e guest  com muito pouco esforço. Primeiro, no host, escolha a pasta que deseka compartilhar com o guest ou crie-a. Abra a caixa de diálogo "Propriedades" da pasta (<code>alt</code> + <code>Enter</code> ou clique com o botão direito e escolha "Propriedades..."). Vá para a guia "Compartilhamento" e selecione "Compartilhamento avançado...". Marque a caixa "Compartilhar esta pasta". Por padrão, a pasta terá permissões de somente leitura, o que significa que a máquina virtual poderá lê-la mas não poderá gravar nada dentro dela. Se desejar alterar estas permissões, selecione "Permissões". Aqui, você poderá escolher quais usuários poderão acessar a pasta compartilhada e quais permissões eles têm. No geral, você provavelmente estará compartilhando em ambas as direções e deve marcar "Permitir" para "Alterar" e "Ler".
Antes de fechar a caixa de diálogo "Propriedades" da pasta compartilhada, anote seu "Caminho de rede", o qual deve estar na forma <code>\\<i>nome do computador</i>\<i>nome da pasta</i></code>.
</p>
<p>Depois, você precisará encontrar o endereço IP do host. Feche a caixa de diálogo "Propriedades", e abra o prompt de cmando ou PowerShell. Execute <code>ipconfig</code>. Você deverá ver uma entrada cujo nome termina com o nome do comutador virtual que você criou (por exemplo <code>Ethernet adapter vEthernet (Novo Comutador Virtual)</code>). Abaixo desta entrada, procure por <code>Endereço IPv4</code> e anote-o.
</p>
<p>Depois, você precisará montar a pasta compartilhada de dentro do Arch. Inicialize a máquina virtual. Uma vez que esteja executando, você irá primeiro instalar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cifs-utils">cifs-utils</a></span>, o qual irá permitir que você monte compartilhamentos CIFS (CIFS é o protocolo que o Windows usa para pastas compartilhadas). Então, você precisará decidir onde a pasta compartilhada será montada. Uma boa escolha seria algum lugar em <code>/mnt</code>, como <code>/mnt/Hyper-V</code>.
</p>
<p>No comando para montar o compartilhamento, substitua quaisquer barras invertidas no "Caminho de rede" que você anotou por barras normais.
</p>
<pre># mount -t cifs [<i>Caminho de rede com barras normais</i>] <i>mountpoint</i> -o user=[<i>usuário o qual deseja autenticar</i>],ip=[<i>endereço IP do host anotado anteriormente</i>]
</pre>
<p>Será pedida uma senha para o usuário que você estará autenticando. Você pode especificá-la nas opções do comando, com <code>password=<i>senha</i></code>, embora esta não seja uma boa idéia em termos de segurança já que a senha estará, agora, em seu arquivo de histórico de comandos; ou caso esteja executando o comando a partir de um script, salva no script indefinidamente. Em vez disso, você pode usar um arquivo de credenciais, o qual permitirá que seja especificado seu usuário e senha em um arquivo com direitos de acesso restritos. Ele poderá ter qualquer nome; por exemplo, se ele for nomeado como  <code>.credentials</code> e salvo em seu diretório home, seria da seguinte forma:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.credentials</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">username=<i>usuário</i>
password=<i>senha</i></pre>
<p>Depois de criar o arquivo, altere as permissões para restringir acesso de leitura:
</p>
<pre>chmod 600 ~/.credentials
</pre>
<p>Então você poderá adicionar outra opção ao comando <code>mount</code>: <code>credentials=~/.credentials</code>. Agora, ao montar o compartilhamento, seu nome de usuário e senha serão automaticamente aplicados.
</p>
<p>Para mais um exemplo concreto, digamos que esteja montando um compartilhamento com o caminho de rede <code>\\PC\share</code> em <code>/mnt/Hyper-V</code>, onde seu usuário no host é "John" e o endereço IP do host é 198.123.151.23. O comando de montagem deveria ser
</p>
<pre># mount -t cifs //PC/share /mnt/Hyper-V -o credentials=~/.credentials,ip=198.123.151.23
</pre>
<p>Um problema com este método é que caso o endereço IP do host sempre mude (por exemplo, se um IP dinâmico seja atribuído via  DHCP, ou caso seja movido para uma nova rede), cada instância do endereço IP do host no guest deverá ser substituída. Entretanto, o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span> provê <code>nmblookup</code>, um utilitário que encontra um endereço IP associado a um host SMB. Portanto, no caso do exemplo acima, você deveria executar
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nmblookup PC</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">198.123.151.23 PC&lt;00&gt;</pre>
<p>Você somente quer o endereço IP, então você pode usar <code>head</code> e <code>cut</code> para processá-lo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">nmblookup PC | head -n 1 | cut -d ' ' -f 1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">192.123.151.23</pre>
<p>Então você pode simplesmente substituir o endereço IP no comando <code>mount</code>:
</p>
<pre># mount -t cifs //PC/share /mnt/Hyper-V -o credentials=~/.credentials,ip="$(nmblookup PC | head -n 1 | cut -d ' ' -f 1)"
</pre>
<p>Mais formas de montar pastas compartilhadas, incluindo montagem automática na inicialização, estão detalhados no artigo <a href="../pt/Samba.html" title="Samba (Português)">Samba</a>.
</p>
<h3><span class="mw-headline" id="Xorg">Xorg</span></h3>
<p>Programas gráficos podem facilmente ser executados em Xorg pelo pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-fbdev">xf86-video-fbdev</a></span>. Simplesmente instale-o juntamente com o gerenciador de janelas ou ambiente desktop que deseja usar, e você poderá iniciar o X sem qualquer problema.
</p>
<h3>
<span id="Configura.C3.A7.C3.A3o_da_resolu.C3.A7.C3.A3o"></span><span class="mw-headline" id="Configuração_da_resolução">Configuração da resolução</span>
</h3>
<p>A resolução de tela é corrigida após a inicialização. Pode ser ajustada alterando parâmetros de inicialização, até o tamanho máximo de 1920x1080 (a atual limitação é de 8MB de memória de framebuffer). Quando inicializando com GRUB, isto pode ser feito editando <code>/etc/default/grub</code> e adicionando <code>video=hyperv_fb:[<i>resolução desejada</i>]</code> ao final da linha <code>GRUB_CMDLINE_LINUX_DEFAULT</code>. Depois, execute <code>update-grub</code> para gravar as alterações. Um exemplo de como ficaria a linha, seria algo como:
</p>
<pre>GRUB_CMDLINE_LINUX_DEFAULT="quiet splash video=hyperv_fb:1920x1080"</pre>
<p>Se você está usando systemd-boot para diretamente inicializar o kernel, em vez disso, simplesmente adicione <code>video=hyperv_fb:1920x1080</code> às opções de entrada. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/boot/loader/entries/arch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">title Arch Linux
linux /vmlinuz-linux
initrd /initramfs-linux.img
options video=hyperv_fb:1920x1080 root=PARTUUID=xxxx-xxxx rw</pre>
<h3>
<span id="Modo_de_sess.C3.A3o_aprimorado"></span><span class="mw-headline" id="Modo_de_sessão_aprimorado">Modo de sessão aprimorado</span>
</h3>
<p>Por padrão, você pode sofrer com a experiência ruim do mouse e da área de trabalho. <a rel="nofollow" class="external text" href="https://blogs.technet.microsoft.com/virtualization/2018/02/28/sneak-peek-taking-a-spin-with-enhanced-linux-vms/">Recursos do modo de sessão aprimorado</a> melhoram a experiência de video e tem área de transferência integrada. Este modo utiliza o <a href="../en/Xrdp.html" title="Xrdp">Xrdp</a> e o módulo <code>hv_sock</code> do kernel. Execute o seguinte código para ativar este modo no guest:
</p>
<pre>git clone https://github.com/Microsoft/linux-vm-tools
cd linux-vm-tools/arch
./makepkg.sh
./install-config.sh
</pre>
<p>Edite <code>~/.xinitrc</code> para iniciar seu <a href="../pt/Desktop_environment.html" title="Desktop environment (Português)">ambiente desktop</a> preferido ao fazer logon em uma sessão Xrdp. Leia <a href="../pt/Xinit.html" title="Xinit (Português)">xinit</a> para configurar <code>~/.xinitrc</code>. 
</p>
<p>Então desligue sua máquina virtual Arch e, usando PowerShell (execute como Administrador), você precisará ativar <code>hv_sock</code> em sua máquina:
</p>
<pre>Set-VM -VMName __Sua_máquina_Arch__ -EnhancedSessionTransportType HvSocket
</pre>
<p>Após ativar o modo de sessão aprimorado, o cliente Hyper-V automaticamente conecta a uma sessão Xrdp após a inicialização.
</p>
<p>Você pode permanentemente desativar o mode de sessão aprimorado executando o seguinte comando no Powershell (execute como Administrador):
</p>
<pre>Set-VM -VMName __Sua_máquina_Arch__ -EnhancedSessionTransportType VMBus
</pre>
<p>Para conectar a um console virtual TTY, você pode temporariamente desativar o <a rel="nofollow" class="external text" href="https://blogs.technet.microsoft.com/virtualization/2018/02/28/sneak-peek-taking-a-spin-with-enhanced-linux-vms/">modo de sessão parimorado</a>. O <a rel="nofollow" class="external text" href="https://blogs.technet.microsoft.com/virtualization/2018/02/28/sneak-peek-taking-a-spin-with-enhanced-linux-vms/">recurso do modo de sessão aprimorado</a> pode ser ativado ou desativado individualmente para uma máquina virtual a partir de seu menu "Visualizar".
</p>
<h3><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h3>
<p>Você pode também fazer um encaminhamento do X para obter uma melhor experiência do que com o cliente padrão do Hyper-V. Uma forma de fazer isto é usando um servidor VNC como <a href="../en/TigerVNC.html" title="TigerVNC">TigerVNC</a> e conectar-se a ele a partir do Windows. Uma opção ainda melhor de se fazer isto é instalar um servidor do Windows X como <a rel="nofollow" class="external text" href="https://sourceforge.net/projects/vcxsrv/">VcXsrv</a> (gratuito) ou <a rel="nofollow" class="external text" href="https://token2shell.com/x410/">x410</a> (comercial) e fazer encaminhamento do X para obter uma experiência da interface gráfica mais rápida. X410 tem suporte para <a rel="nofollow" class="external text" href="https://token2shell.com/news/pull-your-linux-gui-apps-out-of-hyper-v-consoles-run-them-like-windows-apps-with-x410-over-vsock/">vsock</a>, que é mais confiável do que a conexão TCP/IP.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../pt/Category:Hypervisors.html" title="Category:Hypervisors (Português)">Hypervisors (Português)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Hyper-V_(Portugu%C3%AAs)&amp;oldid=759798">https://wiki.archlinux.org/index.php?title=Hyper-V_(Português)&amp;oldid=759798</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 10 December 2022, at 18:24.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
