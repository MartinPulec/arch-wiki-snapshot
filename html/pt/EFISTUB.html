<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled vector-feature-typography-survey-disabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>EFISTUB (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.41.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-EFISTUB_Português rootpage-EFISTUB_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-main-menu-container">
		</div>
	<input type="checkbox" id="vector-toc-collapsed-checkbox" class="vector-menu-checkbox">
			<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark vector-sticky-pinned-container">
				<div id="vector-toc-pinned-container" class="vector-pinned-container">
				<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Preparando_para_EFISTUB" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Preparando_para_EFISTUB">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Preparando para EFISTUB</div>
		</a>
		
		<ul id="toc-Preparando_para_EFISTUB-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Inicializando_EFISTUB" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Inicializando_EFISTUB">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Inicializando EFISTUB</div>
		</a>
		
			<button aria-controls="toc-Inicializando_EFISTUB-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Inicializando EFISTUB subsection</span>
			</button>
		
		<ul id="toc-Inicializando_EFISTUB-sublist" class="vector-toc-list">
			<li id="toc-Usando_um_gerenciador_de_boot" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_um_gerenciador_de_boot">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Usando um gerenciador de boot</div>
			</a>
			
			<ul id="toc-Usando_um_gerenciador_de_boot-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_UEFI_Shell" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_UEFI_Shell">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Usando UEFI Shell</div>
			</a>
			
			<ul id="toc-Usando_UEFI_Shell-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_UEFI_diretamente" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_UEFI_diretamente">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Usando UEFI diretamente</div>
			</a>
			
			<ul id="toc-Usando_UEFI_diretamente-sublist" class="vector-toc-list">
				<li id="toc-efibootmgr" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#efibootmgr">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.1</span>efibootmgr</div>
			</a>
			
			<ul id="toc-efibootmgr-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-efibootmgr_com_arquivo_.efi" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#efibootmgr_com_arquivo_.efi">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.2</span>efibootmgr com arquivo .efi</div>
			</a>
			
			<ul id="toc-efibootmgr_com_arquivo_.efi-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-UEFI_Shell" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#UEFI_Shell">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.3</span>UEFI Shell</div>
			</a>
			
			<ul id="toc-UEFI_Shell-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mais_ferramentas" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Mais_ferramentas">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.4</span>Mais ferramentas</div>
			</a>
			
			<ul id="toc-Mais_ferramentas-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_um_script_startup.nsh" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Usando_um_script_startup.nsh">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3.5</span>Usando um script startup.nsh</div>
			</a>
			
			<ul id="toc-Usando_um_script_startup.nsh-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solução_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Solu%C3%A7%C3%A3o_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Solução de problemas</div>
		</a>
		
			<button aria-controls="toc-Solução_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solução de problemas subsection</span>
			</button>
		
		<ul id="toc-Solução_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-Não_foi_possível_criar_uma_entrada_de_inicialização_com_efibootmgr" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#N%C3%A3o_foi_poss%C3%ADvel_criar_uma_entrada_de_inicializa%C3%A7%C3%A3o_com_efibootmgr">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Não foi possível criar uma entrada de inicialização com efibootmgr</div>
			</a>
			
			<ul id="toc-Não_foi_possível_criar_uma_entrada_de_inicialização_com_efibootmgr-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Veja também</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

				</div>
	</nav>
		
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<label id="vector-toc-collapsed-button" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet vector-button-flush-left cdx-button--icon-only" for="vector-toc-collapsed-checkbox" role="button" aria-controls="vector-toc" tabindex="0" title="Table of Contents">
						<span class="vector-icon mw-ui-icon-wikimedia-listBullet"></span>
						<span>Toggle the table of contents</span>
					</label>
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">EFISTUB (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 5 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-5" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">5 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/EFISTUB" title="EFISTUB – Deutsch" lang="de" hreflang="de" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/EFISTUB.html" title="EFISTUB – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-es mw-list-item"><a href="../es/EFISTUB.html" title="EFISTUB – español" lang="es" hreflang="es" class="interlanguage-link-target"><span>Español</span></a></li>
<li class="interlanguage-link interwiki-fr mw-list-item"><a href="../fr/EFISTUB.html" title="EFISTUB – français" lang="fr" hreflang="fr" class="interlanguage-link-target"><span>Français</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/EFISTUB" title="EFISTUB – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<nav class="vector-page-tools-landmark vector-sticky-pinned-container" aria-label="Page tools">
						<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
			
						</div>
	</nav>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="pt" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/EFISTUB.html" title="EFISTUB">EFISTUB</a>. Data da última tradução: 2019-09-18. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=EFISTUB&amp;diff=0&amp;oldid=580648">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../pt/Arch_boot_process.html" class="mw-redirect" title="Processo de inicialização do Arch">Processo de inicialização do Arch</a></li>
<li><a href="../en/Unified_Extensible_Firmware_Interface.html" title="Unified Extensible Firmware Interface">Unified Extensible Firmware Interface</a></li>
</ul>
</div>
<p>O kernel Linux suporta a inicialização EFISTUB, que permite que o firmware <a href="../en/Unified_Extensible_Firmware_Interface.html" class="mw-redirect" title="EFI">EFI</a> carregue o kernel como um executável EFI. A opção é ativada por padrão nos kernels do Arch Linux ou, se você estiver compilando o kernel, pode ativá-lo, definindo <code>CONFIG_EFI_STUB=y</code> na configuração do Kernel. Veja <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/efi-stub.html">The EFI Boot Stub</a> para mais informações.
</p>
<p>Com EFISTUB, um kernel pode ser inicializado diretamente por uma placa-mãe UEFI ou indiretamente usando um <a href="../pt/Arch_boot_process.html#Gerenciador_de_boot" class="mw-redirect" title="Gerenciador de boot">gerenciador de boot</a>. Recomenda-se o uso de um gerenciador de boot se você tiver vários pares kernel/initramfs e o menu de inicialização UEFI da sua placa-mãe não for fácil de usar.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Preparando_para_EFISTUB">Preparando para EFISTUB</span></h2>
<p>Primeiro, você deve criar uma <a href="../pt/EFI_system_partition.html" class="mw-redirect" title="Partição de sistema EFI">partição de sistema EFI</a> e escolher como ela é montada. Consulte <a href="../pt/EFI_system_partition.html#Montar_a_parti%C3%A7%C3%A3o" class="mw-redirect" title="Partição de sistema EFI">Partição de sistema EFI#Montar a partição</a> para todas as opções de montagem ESP disponíveis.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>O <a href="../pt/Pacman.html" title="Pacman (Português)">pacman</a> vai atualizar diretamente o kernel que o firmware EFI vai ler se você montar a ESP para <code>/boot</code>.</li>
<li>Você pode manter o kernel e o initramfs fora da ESP se você usar um gerenciador de inicialização que tenha um driver do sistema de arquivos para a partição onde eles residem, por exemplo, <a href="../en/REFInd.html" title="REFInd">rEFInd</a>.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Inicializando_EFISTUB">Inicializando EFISTUB</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O caminho do initramfs do Linux Kernel EFISTUB deve ser relativo à raiz da Partição do Sistema EFI e deve usar barras invertidas (de acordo com os padrões EFI). Por exemplo, se o initramfs estiver localizado em <code><i>esp</i>/EFI/arch/initramfs-linux.img</code>, a linha formatada com UEFI correspondente deverá ser <code>initrd=\EFI\arch\initramfs-linux.img</code>. Nos exemplos a seguir, vamos assumir que tudo está sob <code><i>esp</i>/</code>.</div>
<h3><span class="mw-headline" id="Usando_um_gerenciador_de_boot">Usando um gerenciador de boot</span></h3>
<p>Existem vários gerenciadores de boot UEFI que podem fornecer opções adicionais ou simplificar o processo de inicialização via UEFI - especialmente se você tiver vários kernels/sistemas operacionais. Veja <a href="../pt/Arch_boot_process.html#Gerenciador_de_boot" class="mw-redirect" title="Processo de inicialização do Arch">Processo de inicialização do Arch#Gerenciador de boot</a> para mais informações.
</p>
<h3><span class="mw-headline" id="Usando_UEFI_Shell">Usando UEFI Shell</span></h3>
<p>É possível iniciar um kernel EFISTUB a partir do UEFI Shell como se fosse um aplicativo UEFI normal. Neste caso, os parâmetros do kernel são passados como parâmetros normais para o arquivo de kernel EFISTUB lançado.
</p>
<pre>&gt; fs0:
&gt; \vmlinuz-linux root=PARTUUID=3518bb68-d01e-45c9-b973-0b5d918aae96 rw initrd=\initramfs-linux.img
</pre>
<p>Para evitar a necessidade de lembrar de todos os seus parâmetros do kernel, você pode salvar o comando executável em um script de shell como <code>archlinux.nsh</code> na sua partição de sistema UEFI e executá-lo com:
</p>
<pre>&gt; fs0:
&gt; archlinux
</pre>
<h3><span class="mw-headline" id="Usando_UEFI_diretamente">Usando UEFI diretamente</span></h3>
<p>O UEFI foi projetado para remover a necessidade de um bootloader intermediário, como o <a href="../pt/GRUB.html" title="GRUB (Português)">GRUB</a>. Se a sua placa-mãe tiver uma boa implementação de UEFI, é possível embutir os parâmetros do kernel dentro de uma entrada de boot UEFI e para a placa-mãe inicializar o Arch diretamente. Você pode usar o <a href="../en/Unified_Extensible_Firmware_Interface.html#efibootmgr" class="mw-redirect" title="Efibootmgr">efibootmgr</a> ou o UEFI Shell v2 para modificar as entradas de inicialização da sua placa-mãe.
</p>
<h4><span class="mw-headline" id="efibootmgr">efibootmgr</span></h4>
<p>Para criar uma entrada de inicialização que carregue o kernel usando o <i>efibootmgr</i>, execute um comando similar a este:
</p>
<pre># efibootmgr --disk <i>/dev/sdX</i> --part <i>Y</i> --create --label "Arch Linux" --loader /vmlinuz-linux --unicode 'root=PARTUUID=<i>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</i> rw initrd=\initramfs-linux.img' --verbose
</pre>
<p>sendo <code><i>/dev/sdX</i></code> e <code><i>Y</i></code> a unidade e o número da partição onde a ESP está localizada. Altere o parâmetro <code>root=</code> para refletir sua partição raiz do Linux, consulte os <a href="../pt/Kernel_parameters.html#Lista_de_par%C3%A2metros" class="mw-redirect" title="Parâmetros do kernel">parâmetros do kernel</a> para formatos de nome de dispositivo suportados e <a href="../pt/Persistent_block_device_naming.html" class="mw-redirect" title="Nomeação persistente de dispositivo de bloco">nomeação persistente de dispositivo de bloco</a> para obter o valor correspondente.
</p>
<p>Note que o argumento <code>-u</code>/<code>--unicode</code> entre aspas é apenas a lista de <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetros do kernel">parâmetros do kernel</a>, então você pode precisar adicionar parâmetros adicionais (por exemplo, para <a href="../pt/Power_management/Suspend_and_hibernate.html#Definindo_o_local_de_hiberna%C3%A7%C3%A3o_para_o_initramfs" class="mw-redirect" title="Suspender e hibernar">suspender para o disco</a> ou <a href="../en/Microcode.html" title="Microcode">microcódigo</a>).
</p>
<p>Após adicionar a entrada de inicialização, você pode verificar que a entrada foi adiciona corretamente com:
</p>
<pre># efibootmgr --verbose
</pre>
<p>Para definir a ordem de inicialização, execute:
</p>
<pre># efibootmgr --bootorder <i>XXXX</i>,<i>XXXX</i> --verbose
</pre>
<p>sendo <i>XXXX</i> o número que aparece na saída do comando <i>efibootmgr</i> para cada entrada.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> É conveniente salvar o comando para criar a entrada de inicialização em um script de shell, o que facilita a modificação, por exemplo, ao alterar os parâmetros do kernel.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> A publicação de fórum com título <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1090040#p1090040">The linux kernel with build in bootloader?</a> também pode ser de seu interesse.</div>
<h4><span class="mw-headline" id="efibootmgr_com_arquivo_.efi">efibootmgr com arquivo .efi</span></h4>
<p>Se estiver usando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/cryptboot/">cryptboot</a></span><sup><small>AUR</small></sup> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sbupdate-git/">sbupdate-git</a></span><sup><small>AUR</small></sup> para gerar suas próprias chaves para <a href="../en/Unified_Extensible_Firmware_Interface/Secure_Boot.html#Using_your_own_keys" class="mw-redirect" title="Secure Boot">Secure Boot</a> e assinar o initramfs e o kernel para, então, criar uma imagem <i>.efi</i> inicializável, o <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=efibootmgr">efibootmgr</a></span> pode ser usado diretamente para inicializar o arquivo <i>.efi</i>:
</p>
<pre># efibootmgr --create --disk /dev/sdX --part <i>número_partição</i> --label "<i>rótulo</i>" --loader "EFI\<i>pasta</i>\<i>arquivo</i>.efi" --verbose
</pre>
<p>Consulte <span class="plainlinks archwiki-template-man" title="$ man 8 efibootmgr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/efibootmgr.8">efibootmgr(8)</a></span> para uma explicação das opções.
</p>
<h4><span class="mw-headline" id="UEFI_Shell">UEFI Shell</span></h4>
<p>Algumas implementações de UEFI dificultam a modificação do NVRAM usando o <i>efibootmgr</i>. Se o <i>efibootmgr</i> não conseguir criar uma entrada com êxito, você poderá usar o comando <a href="../en/Unified_Extensible_Firmware_Interface.html#bcfg" class="mw-redirect" title="UEFI">bcfg</a> no UEFI Shell v2 (isto é, a partir da <a rel="nofollow" class="external text" href="https://archlinux.org/download/">iso live do Arch Linux</a>).
</p>
<p>Primeiro, descubra o número do dispositivo onde sua <a href="../pt/EFI_system_partition.html" class="mw-redirect" title="ESP (Português)">ESP</a> reside usando:
</p>
<pre>Shell&gt; map
</pre>
<p>Neste exemplo, <code>1</code> é usado como o número do dispositivo. Para listar o conteúdo da <a href="../pt/EFI_system_partition.html" class="mw-redirect" title="ESP (Português)">ESP</a>:
</p>
<pre>Shell&gt; ls fs1:
</pre>
<p>Para ver as entradas de inicialização atuais:
</p>
<pre>Shell&gt; bcfg boot dump
</pre>
<p>Para adicionar uma entrada para o seu kernel, use:
</p>
<pre>Shell&gt; bcfg boot add <i>N</i> fs1:\vmlinuz-linux "Arch Linux"
</pre>
<p>sendo <code><i>N</i></code> o local onde a entrada será adicionada no menu de inicialização. 0 é o primeiro item de menu. Os itens de menu já existentes serão deslocados no menu sem serem descartados.
</p>
<p>Para adicionar as opções de kernel necessárias, primeiro crie um arquivo na sua ESP:
</p>
<pre>Shell&gt; edit fs1:\options.txt
</pre>
<p>No arquivo, adicione a linha de inicialização. Por exemplo:
</p>
<pre>root=/dev/sda2 ro initrd=\initramfs-linux.img
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Adicione espaços extras no início da linha no arquivo. Existe uma <a href="https://en.wikipedia.org/wiki/pt:Marca_de_ordem_de_byte" class="extiw" title="wikipedia:pt:Marca de ordem de byte">marca de ordem de byte</a> no início da linha que irá esmagar qualquer caractere próximo a ele, o que causará um erro ao inicializar.</div>
<p>Pressione <code>F2</code> para salvar e, então, <code>F3</code> para sair.
</p>
<p>Para adicionar essas opções à sua entrada anterior, faça:
</p>
<pre>Shell&gt; bcfg boot -opt <i>N</i> fs1:\options.txt
</pre>
<p>Repita este processo para quaisquer entradas adicionais.
</p>
<p>Para remover um item adicionado anteriormente, faça:
</p>
<pre>Shell&gt; bcfg boot rm <i>N</i>
</pre>
<h4><span class="mw-headline" id="Mais_ferramentas">Mais ferramentas</span></h4>
<p>Algumas das ferramentas acima, e mais, são brevemente discutidas em <a href="../en/REFInd.html#Tools" title="REFInd">rEFInd#Tools</a>.
</p>
<h4><span class="mw-headline" id="Usando_um_script_startup.nsh">Usando um script startup.nsh</span></h4>
<p>Algumas implementações de UEFI não mantêm variáveis EFI entre inicializações "a frio" (por exemplo, <a href="../pt/VirtualBox.html" title="VirtualBox (Português)">VirtualBox</a>) e qualquer coisa definida pela interface de firmware UEFI é perdida no desligamento.
</p>
<p>O <a rel="nofollow" class="external text" href="https://www.uefi.org/sites/default/files/resources/UEFI_Shell_Spec_2_0.pdf">UEFI Shell Specification 2.0</a> estabelece que um script chamado <code>startup.nsh</code> na raiz da partição ESP sempre ser interpretado e pode conter instruções arbitrárias; entre aquelas que você pode definir uma linha de inicialização. Certifique-se de montar a partição ESP em <code>/boot</code> e crie um script <code>startup.nsh</code> que contenha uma linha de inicialização do kernel. Por exemplo:
</p>
<pre>vmlinuz-linux rw root=/dev/sd<i>X</i> [rootfs=<i>meufs</i>] [rootflags=<i>minhasopçõesraiz</i>] \
 [kernel.flag=<i>foo</i>] [<i>meumódulo</i>.flag=<i>bar</i>] \
 [initrd=\intel-ucode.img] initrd=\initramfs-linux.img
</pre>
<p>Este método funcionará com quase todas as versões de firmware UEFI que você pode encontrar em hardware real, você pode usá-lo como último recurso. <b>O script deve ser uma única linha longa.</b> As seções entre colchetes são opcionais e são fornecidas apenas como um guia. As quebras de linha estilo shell são apenas para esclarecimento visual. Os sistemas de arquivos FAT usam a barra invertida como separador de caminho e, nesse caso, a barra invertida declara que o initramfs está localizado na raiz da partição ESP. Apenas o microcódigo da Intel é carregado na linha de parâmetros de inicialização; O microcódigo da AMD é lido do disco posteriormente durante o processo de inicialização; isso é feito automaticamente pelo kernel.
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3>
<span id="N.C3.A3o_foi_poss.C3.ADvel_criar_uma_entrada_de_inicializa.C3.A7.C3.A3o_com_efibootmgr"></span><span class="mw-headline" id="Não_foi_possível_criar_uma_entrada_de_inicialização_com_efibootmgr">Não foi possível criar uma entrada de inicialização com efibootmgr</span>
</h3>
<p>Algumas combinações de versões do kernel e do <i>efibootmgr</i> podem se recusar a criar novas entradas de inicialização. Isso pode ser devido à falta de espaço livre na NVRAM. Você pode tentar excluir quaisquer arquivos de despejo EFI:
</p>
<pre># rm /sys/firmware/efi/efivars/dump-*
</pre>
<p>Ou, como último recurso, inicialize com o parâmetro do kernel <code>efi_no_storage_paranoia</code>. Você também pode tentar <a href="../pt/Downgrading_packages.html" class="mw-redirect" title="Downgrade (Português)">fazer downgrade</a> de sua instalação do <i>efibootmgr</i> para a versão 0.11.0. Esta versão funciona com o Linux versão 4.0.6. Veja a discussão no relatório de erro <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/34641">FS#34641</a>, em particular o <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/34641#comment111365">comentário final</a>, para mais informações.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/efi-stub.html">Documentação do kernel Linux sobre EFISTUB</a></li>
<li><a rel="nofollow" class="external text" href="https://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=commitdiff;h=291f36325f9f252bd76ef5f603995f37e453fc60;hp=55839d515495e766605d7aaabd9c2758370a8d27">Commit Git do EFISTUB no kernel Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://www.rodsbooks.com/efi-bootloaders/efistub.html">Página do Rod Smith sobre EFISTUB</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../pt/Category:Boot_loaders.html" title="Category:Boot loaders (Português)">Boot loaders (Português)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=EFISTUB_(Portugu%C3%AAs)&amp;oldid=803588">https://wiki.archlinux.org/index.php?title=EFISTUB_(Português)&amp;oldid=803588</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 16 March 2024, at 13:42.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
