<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>XFS (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.42.1">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-XFS_Português rootpage-XFS_Português skin-vector-2022 action-view skin--responsive">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" role="navigation" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Preparação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Prepara%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">1</span>Preparação</div>
		</a>
		
		<ul id="toc-Preparação-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Criação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Cria%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">2</span>Criação</div>
		</a>
		
			<button aria-controls="toc-Criação-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Criação subsection</span>
			</button>
		
		<ul id="toc-Criação-sublist" class="vector-toc-list">
			<li id="toc-Soma_de_verificação" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Soma_de_verifica%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.1</span>Soma de verificação</div>
			</a>
			
			<ul id="toc-Soma_de_verificação-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Árvore_b_de_inodes_livres" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%C3%81rvore_b_de_inodes_livres">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.2</span>Árvore b de inodes livres</div>
			</a>
			
			<ul id="toc-Árvore_b_de_inodes_livres-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Árvore_b_inversa_de_mapeamento" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#%C3%81rvore_b_inversa_de_mapeamento">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.3</span>Árvore b inversa de mapeamento</div>
			</a>
			
			<ul id="toc-Árvore_b_inversa_de_mapeamento-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Carimbos_de_data/hora_grandes" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Carimbos_de_data/hora_grandes">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">2.4</span>Carimbos de data/hora grandes</div>
			</a>
			
			<ul id="toc-Carimbos_de_data/hora_grandes-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Desempenho" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Desempenho">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">3</span>Desempenho</div>
		</a>
		
			<button aria-controls="toc-Desempenho-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Desempenho subsection</span>
			</button>
		
		<ul id="toc-Desempenho-sublist" class="vector-toc-list">
			<li id="toc-Tamanho_e_largura_de_faixa_(stripe)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tamanho_e_largura_de_faixa_(stripe)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.1</span>Tamanho e largura de faixa (stripe)</div>
			</a>
			
			<ul id="toc-Tamanho_e_largura_de_faixa_(stripe)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tempo_de_acesso" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Tempo_de_acesso">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.2</span>Tempo de acesso</div>
			</a>
			
			<ul id="toc-Tempo_de_acesso-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Descarte" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Descarte">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.3</span>Descarte</div>
			</a>
			
			<ul id="toc-Descarte-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desfragmentação" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Desfragmenta%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4</span>Desfragmentação</div>
			</a>
			
			<ul id="toc-Desfragmentação-sublist" class="vector-toc-list">
				<li id="toc-Inspecionar_níveis_de_fragmentação" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Inspecionar_n%C3%ADveis_de_fragmenta%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.1</span>Inspecionar níveis de fragmentação</div>
			</a>
			
			<ul id="toc-Inspecionar_níveis_de_fragmentação-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Rodar_a_desfragmentação" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Rodar_a_desfragmenta%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.4.2</span>Rodar a desfragmentação</div>
			</a>
			
			<ul id="toc-Rodar_a_desfragmentação-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Deduplicação" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Deduplica%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5</span>Deduplicação</div>
			</a>
			
			<ul id="toc-Deduplicação-sublist" class="vector-toc-list">
				<li id="toc-Cópias_com_reflink" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#C%C3%B3pias_com_reflink">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.1</span>Cópias com reflink</div>
			</a>
			
			<ul id="toc-Cópias_com_reflink-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Deduplicação_2" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Deduplica%C3%A7%C3%A3o_2">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.5.2</span>Deduplicação</div>
			</a>
			
			<ul id="toc-Deduplicação_2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Journal_externo_do_XFS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Journal_externo_do_XFS">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.6</span>Journal externo do XFS</div>
			</a>
			
			<ul id="toc-Journal_externo_do_XFS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Intervalo_de_sincronização" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Intervalo_de_sincroniza%C3%A7%C3%A3o">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">3.7</span>Intervalo de sincronização</div>
			</a>
			
			<ul id="toc-Intervalo_de_sincronização-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Administração" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Administra%C3%A7%C3%A3o">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">4</span>Administração</div>
		</a>
		
			<button aria-controls="toc-Administração-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Administração subsection</span>
			</button>
		
		<ul id="toc-Administração-sublist" class="vector-toc-list">
			<li id="toc-Redimensionamento" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Redimensionamento">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.1</span>Redimensionamento</div>
			</a>
			
			<ul id="toc-Redimensionamento-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Verificação_online_de_metadados_(varredura)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Verifica%C3%A7%C3%A3o_online_de_metadados_(varredura)">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.2</span>Verificação online de metadados (varredura)</div>
			</a>
			
			<ul id="toc-Verificação_online_de_metadados_(varredura)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Conserto" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Conserto">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">4.3</span>Conserto</div>
			</a>
			
			<ul id="toc-Conserto-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solução_de_problemas" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Solu%C3%A7%C3%A3o_de_problemas">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">5</span>Solução de problemas</div>
		</a>
		
			<button aria-controls="toc-Solução_de_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon vector-icon--x-small mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solução de problemas subsection</span>
			</button>
		
		<ul id="toc-Solução_de_problemas-sublist" class="vector-toc-list">
			<li id="toc-Cota_no_sistema_de_arquivos_raiz" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Cota_no_sistema_de_arquivos_raiz">
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.1</span>Cota no sistema de arquivos raiz</div>
			</a>
			
			<ul id="toc-Cota_no_sistema_de_arquivos_raiz-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id='toc-xfs_scrub_all_falha_se_o_usuário_"nobody"_não_pode_acessar_o_ponto_de_montagem' class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href='#xfs_scrub_all_falha_se_o_usu%C3%A1rio_"nobody"_n%C3%A3o_pode_acessar_o_ponto_de_montagem'>
				<div class="vector-toc-text">
				<span class="vector-toc-numb">5.2</span>xfs_scrub_all falha se o usuário "nobody" não pode acessar o ponto de montagem</div>
			</a>
			
			<ul id='toc-xfs_scrub_all_falha_se_o_usuário_"nobody"_não_pode_acessar_o_ponto_de_montagem-sublist' class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
			<span class="vector-toc-numb">6</span>Veja também</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav role="navigation" aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">XFS (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/XFS.html" title="XFS – English" lang="en" hreflang="en" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/XFS" title="XFS – 日本語" lang="ja" hreflang="ja" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/XFS.html" title="XFS – русский" lang="ru" hreflang="ru" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/XFS" title="XFS – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-client-prefs-landmark" aria-label="Appearance">
						</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Artigos relacionados</p>
<ul>
<li><a href="../pt/File_systems.html" class="mw-redirect" title="Sistema de arquivos">Sistema de arquivos</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/XFS.html" title="XFS">XFS</a>. Data da última tradução: 2021-08-27. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=XFS&amp;diff=0&amp;oldid=693066">alterações</a> na versão em inglês.</div>
<p>XFS é um sistema de arquivos de alto desempenho com journal criado pela Silicon Graphics, Inc. XFS é particularmente proficiente em paralelizar E/S devido ao seu modelo baseado em alocação de grupo. Isto permite escalabilidade extrema de processamento de E/S, largura de banda do sistema de arquivos, arquivo e tamanho do sistema de arquivos quando abrange múltiplos dispositivos de armazenamento.
</p>
<meta property="mw:PageProp/toc">
<h2>
<span id="Prepara.C3.A7.C3.A3o"></span><span class="mw-headline" id="Preparação">Preparação</span>
</h2>
<p>Para utilitários em espaço de usuário, <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xfsprogs">xfsprogs</a></span>. Ele contém as ferramentas necessárias para gerenciar um sistema de arquivos XFS.
</p>
<h2>
<span id="Cria.C3.A7.C3.A3o"></span><span class="mw-headline" id="Criação">Criação</span>
</h2>
<p>Para criar um novo sistema de arquivos em <i>dispositivo</i>, use:
</p>
<pre># mkfs.xfs <i>dispositivo</i>
</pre>
<p><q>No geral, as opções padrões são otimizadas para uso comum.</q> <a rel="nofollow" class="external autonumber" href="https://access.redhat.com/documentation/en_us/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs#xfscreating">[1]</a> (conteúdo em inglês) <a rel="nofollow" class="external autonumber" href="https://xfs.org/index.php/XFS_FAQ#Q:_I_want_to_tune_my_XFS_filesystems_for_.3Csomething.3E">[2]</a> (conteúdo em inglês).
</p>
<p>Amostra de saída:
</p>
<pre>meta-data=/dev/device            isize=256    agcount=4, agsize=3277258 blks
         =                       sectsz=512   attr=2
data     =                       bsize=4096   blocks=13109032, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0
log      =internal log           bsize=4096   blocks=6400, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Pode-se opcionalmente atribuir um rótulo ao sistema de arquivos usando a opção <code>-L <i>rótulo</i></code>.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Ao usar <i>mkfs.xfs</i> em um dispositivo de bloco que já contenha um sistema de arquivos, use a opção <code>-f</code> para sobrescrever aquele sistema de arquivos. <a rel="nofollow" class="external autonumber" href="https://access.redhat.com/documentation/en_us/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs#xfscreating">[3]</a> (conteúdo em inglês). <i><b>Esta opção destruirá todos os dados contidos no sistema de arquivos anterior.</b></i>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <q>Depois que um sistema de arquivos XFS é criado, seu tamanho não pode ser reduzido. No entanto, ainda pode ser aumentado usando o comando <code>xfs_growfs</code></q> <a rel="nofollow" class="external autonumber" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-xfs#xfscreating">[4]</a> (conteúdo em inglês). Veja <a href="#Redimensionamento">#Redimensionamento</a>.</div>
<h3>
<span id="Soma_de_verifica.C3.A7.C3.A3o"></span><span class="mw-headline" id="Soma_de_verificação">Soma de verificação</span>
</h3>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xfsprogs">xfsprogs</a></span> 3.2.0 introduziu um novo formato em disco (v5) que inclui um esquema de soma de verificação de metadados chamado <a rel="nofollow" class="external text" href="https://docs.kernel.org/filesystems/xfs-self-describing-metadata.html">Metadados auto-descritivos</a><sup title="Status da última verificação: 404">[<a href="https://en.wikipedia.org/wiki/pt:Wikip%C3%A9dia:Liga%C3%A7%C3%A3o_inativa" class="extiw" title="wikipedia:pt:Wikipédia:Ligação inativa">link inativo</a> 2024-03-03 ⓘ]</sup> (conteúdo em inglês).
Baseado no CRC32, fornece por exemplo, proteção adicional contra corrupção de metadados durante perda de energia inesperada. Soma de verificação é habilitada por padrão ao usar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xfsprogs">xfsprogs</a></span> 3.2.3 ou posterior. Se você precisa de um XFS montável com leitura e escrita em um kernel mais antigo, é possível facilmente desabilitar usando a opção <code>-m crc=0</code> ao chamar <span class="plainlinks archwiki-template-man" title="$ man 8 mkfs.xfs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkfs.xfs.8">mkfs.xfs(8)</a></span>:
</p>
<pre># mkfs.xfs -m crc=0 /dev/<i>partição_alvo</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Desabilitar os CRCs de metadados também terá o efeito de desabilitar o suporte para as opções <a href="#%C3%81rvore_b_de_inodes_livres">#Árvore b de inodes livres</a>, <a href="#%C3%81rvore_b_inversa_de_mapeamento">#Árvore b inversa de mapeamento</a> e <a href="#Carimbos_de_data/hora_grandes">#Carimbos de data/hora grandes</a> abaixo, assim como "árvores b para contagem de referência" (veja <span class="plainlinks archwiki-template-man" title="$ man 8 mkfs.xfs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkfs.xfs.8#OPTIONS">mkfs.xfs(8) § OPTIONS</a></span> para detalhes).</div>
<p>O formato v5 de XFS em disco é considerado estável para cargas de produção á partir do Kernel Linux 3.15.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Ao contrário do <a href="../pt/Btrfs.html" title="Btrfs (Português)">BTRFS</a> e <a href="../pt/ZFS.html" title="ZFS (Português)">ZFS</a>, a soma de validação do CRC32 apenas se aplica aos metadados, e não aos dados.</div>
<h3>
<span id=".C3.81rvore_b_de_inodes_livres"></span><span class="mw-headline" id="Árvore_b_de_inodes_livres">Árvore b de inodes livres</span>
</h3>
<p>Começando na versão do Linux 3.16, XFS adicionou uma árvore b que rastreia inodes livres. É equivalente à alocação de inodes existente na árvore b, com a exceção que a árvore b de inodes livres rastreia pedaços com pelo menos um inode livre. O propósito é melhorar consultas por grupos de inodes que contenha um inode livre para ser alocado. Isto melhora o desempenho em sistemas de arquivos mais XFS usados a mais tempo, ex: usado por meses ou anos, quando você já adicionou/removeu milhões de arquivos no/do sistema de arquivos. Usar esta opção não impacta no geral no nível de confiabilidade ou capacidade de recuperação do sistema.
</p>
<p>Este recurso depende do novo formato em disco v5 que foi considerado estável para cargas de trabalho de produção a partir do Linux Kernel 3.15. Ele não muda as estruturas em disco, mas adiciona uma nova que deve permanecer consistente com a árvore b de alocação de inodes; por esta razão, os kernels mais antigos só serão capazes de montar sistemas de arquivos como somente-leitura com o recurso da árvore b de inodes livres.
</p>
<p>A opção é habilitada por padrão ao usar xfsprogs 3.2.3 ou posterior. Se você precisa de um sistema de arquivo com capacidade de escrita em um kernel mais antigo, é possível desabilitar com a opção <code>finobt=0</code> ao formatar uma partição com XFS. Você também precisará usar <code>crc=0</code> junto:
</p>
<pre># mkfs.xfs -m crc=0,finobt=0 /dev/<i>partição_alvo</i>
</pre>
<p>Ou de uma maneira mais curta (pois <code>finobt</code> depende de <code>crc</code>).
</p>
<pre># mkfs.xfs -m crc=0 /dev/<i>partição_alvo</i>
</pre>
<h3>
<span id=".C3.81rvore_b_inversa_de_mapeamento"></span><span class="mw-headline" id="Árvore_b_inversa_de_mapeamento">Árvore b inversa de mapeamento</span>
</h3>
<p>A árvore b inversa de mapeamento é, em seu núcleo, <q>um índice secundário de use de espaço de armazenamento que efetivamente fornece uma cópia redundante dos metadados de uso de espaço. Isto adiciona uma sobrecarga em operações no sistema de arquivos, mas esta inclusão em um sistema de arquivos faz com que referências cruzadas sejam bem rápidas. É um recurso essencial para consertar sistemas de arquivo durante o uso pois é possível reconstruir metadados primários danificados a partir da cópia secundária.</q> <a rel="nofollow" class="external autonumber" href="https://blogs.oracle.com/linux/xfs-online-filesystem-checking">[5]</a> (conteúdo em inglês).
</p>
<p><q>O recurso passou do status EXPERIMENTAL no Linux 4.16 e está pronto para produção. No entanto, verificação e conserto do sistema de arquivo durante o uso é (até o momento) o único caso de uso para este recurso, então a pessoa poderá optar por usar pelo menos até que a verificação durante o uso esteja pronta para uso em produção.</q>
</p>
<p>Do <span class="plainlinks archwiki-template-man" title="$ man 8 mkfs.xfs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkfs.xfs.8#OPTIONS">mkfs.xfs(8) § OPTIONS</a></span>:
</p>
<p><q>A árvore b inversa de mapeamento mapeia blocos do sistema de arquivo para o dono do bloco do sistema de arquivos. A maioria dos mapeamentos será para um número de inode e um deslocamento, embora também haja mapeamentos para metadados do sistema de arquivos. Este metadado secundário pode ser usado para validar o metadado primário ou para localizar exatamente qual dado foi perdido quando um erro no disco ocorrer.</q>
</p>
<p>Veja também <a rel="nofollow" class="external autonumber" href="https://kernelnewbies.org/Linux_4.16#XFS_reverse_mapping_and_reflink_features_are_now_stable">[6]</a> (conteúdo em inglês) e <a rel="nofollow" class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=35a891be96f1f8e1227e6ad3ca827b8a08ce47ea">[7]</a> (conteúdo em inglês) para mais informação.
</p>
<p>Para testar esta opção ou testar o futuro do sistema de arquivos, passe a opção <code>-m rmapbt=1</code> durante a criação do sistema de arquivos.
</p>
<pre># mkfs.xfs -m rmapbt=1 <i>dispositivo</i>
</pre>
<h3>
<span id="Carimbos_de_data.2Fhora_grandes"></span><span class="mw-headline" id="Carimbos_de_data/hora_grandes">Carimbos de data/hora grandes</span>
</h3>
<p>Começando na versão do Linux 5.10, XFS suporta com seu refatoramento, <q>funções de carimbo de data/hora e codificação de inode para lidar com carimbos de data e hora como um contador de nanossegundos de 64 bits e deslocamento de bits para aumentar o tamanho efetivo. Isto agora permite ao XFS rodar muito além do Problema do Ano 2038 (armazenar o tempo desde 1970 em segundos não mais caberia em um inteiro positivo de 32 bits e então, começaria a contagem novamente) até o Ano 2486. Criar um novo sistema de arquivos XFS com <i>bigtime</i> habilitado permite carimbos de data e hora que vão de Dezembro de 1901 até Julho de 2486, em vez de Dezembro de 1901 até Janeiro de 2038. Para preservar a compatibilidade com versões anteriores, o recurso não está habilitado por padrão</q> <a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/scan.php?page=news_item&amp;px=XFS-Linux-5.10">[8]</a> (conteúdo em inglês).
</p>
<p>O recurso também permitirá expirações de cronômetro de cota de Janeiro de 1970 a Julho de 2486, em vez de Janeiro de 1970 a Fevereiro de 2106.
</p>
<p>Para testar esta opção ou testar o futuro do sistema de arquivos, passe a opção <code>-m bigtime=1</code> durante a criação do sistema de arquivos.
</p>
<pre># mkfs.xfs -m bigtime=1 <i>dispositivo</i>
</pre>
<p>A partir da versão 5.11 do XFS, isto também pode ser desabilitado em sistema de arquivos existentes (não montados) com:
</p>
<pre># xfs_admin -O bigtime=1 <i>dispositivo</i>
</pre>
<h2><span class="mw-headline" id="Desempenho">Desempenho</span></h2>
<p>Da página de <a rel="nofollow" class="external text" href="https://xfs.org/index.php/XFS_FAQ#Q:_I_want_to_tune_my_XFS_filesystems_for_.3Csomething.3E">perguntas frequentes do XFS</a> (conteúdo em inglês):
</p>
<p><q>Os valores padrões já usados são otimizados para melhor desempenho em primeiro lugar. mkfs.xfs detectará a diferença entre as configurações de disco único e RAID MD/DM e mudará os valores padrão que usa para configurar o sistema de arquivos apropriadamente.</q>
</p>
<p><q>Na maioria dos casos, a única coisa que você precisa considerar para <code>mkfs.xfs</code> é especificar a unidade e largura da faixa para dispositivos em RAID.</q> (veja <a href="#Tamanho_e_largura_de_faixa_(stripe)">#Tamanho e largura de faixa (stripe)</a>).
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Quando usando o sistema de arquivos XFS em dispositivos <a href="../pt/RAID.html" title="RAID (Português)">RAID</a>, melhorias de desempenho podem ser obtidas usando <code>largeio</code>, <code>swalloc</code>, tamanho maior de <code>logbsize</code> e <code>allocsize</code>, etc. Os seguintes artigos podem fornecer detalhes adicionais sobre estas opções:
<ul>
<li><a rel="nofollow" class="external free" href="https://www.beegfs.io/wiki/StorageServerTuning">https://www.beegfs.io/wiki/StorageServerTuning</a></li>
<li><a rel="nofollow" class="external free" href="https://help.marklogic.com/Knowledgebase/Article/View/505/0/recommended-xfs-settings-for-marklogic-server">https://help.marklogic.com/Knowledgebase/Article/View/505/0/recommended-xfs-settings-for-marklogic-server</a></li>
</ul>
</div>
<p><q>Para opções de montagem, a única coisa que irá mudar o desempenho de metadados consideravelmente são as opções de montagem <code>logbsize</code> e <code>delaylog</code>. Aumentar <code>logbsize</code> reduz o número de E/S do journal para uma determinada carga, e <code>delaylog</code> reduzirá ainda mais. A troca para este aumento no desempenho de metadados é que mais operações podem estar incompletas depois de uma recuperação se o sistema travar enquanto fazendo modificações ativamente.</q>
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Veja <span class="plainlinks archwiki-template-man" title="$ man 5 xfs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xfs.5">xfs(5)</a></span> para detalhes de todas as opções de montagem.</div>
<p><q>A partir do kernel 3.2.12, o agendador de E/S padrão, CFQ, derrotará grande parte da paralelização no XFS.</q>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Arch é configurado para não usar o agendador de E/S quando um <a href="../en/Solid_state_drive.html" class="mw-redirect" title="SSD">SSD</a> SATA ou <a href="../en/Solid_state_drive/NVMe.html" class="mw-redirect" title="NVMe">NVMe</a> é detectado; é possível confirmar isto lendo o conteúdo de <code>/sys/block/nvme*n*/queue/scheduler</code>.</div>
<p>Portanto, para desempenho otimizado, na maioria dos casos você pode seguir o que está em <a href="#Cria%C3%A7%C3%A3o">#Criação</a>.
</p>
<h3>
<span id="Tamanho_e_largura_de_faixa_.28stripe.29"></span><span class="mw-headline" id="Tamanho_e_largura_de_faixa_(stripe)">Tamanho e largura de faixa (stripe)</span>
</h3>
<p>Se o sistema de arquivos for usado em um RAID com faixas, você pode ganhar melhorias de velocidade significativas especificando o tamanho da faixa no comando <span class="plainlinks archwiki-template-man" title="$ man 8 mkfs.xfs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkfs.xfs.8">mkfs.xfs(8)</a></span>.
</p>
<p>As vezes, o XFS pode detectar a geometria do RAID por software, mas caso você mude a forma ou utilize RAID por hardware, veja <a rel="nofollow" class="external text" href="https://xfs.org/index.php/XFS_FAQ#Q:_How_to_calculate_the_correct_sunit.2Cswidth_values_for_optimal_performance">Como calcular os valores sunit e swidth para melhor desempenho</a> (conteúdo em inglês).
</p>
<h3><span class="mw-headline" id="Tempo_de_acesso">Tempo de acesso</span></h3>
<p>Em alguns sistemas de arquivo, você pode aumentar o desempenho adicionando a opção de montagem <code>noatime</code> no arquivo <code>/etc/fstab</code>. Para sistemas de arquivo XFS <q>o comportamento padrão de atime é <code>relatime</code>, que quase não possui sobrecarga comparado com noatime mas ainda mantém valores de atime sãos. Todos os sistemas de arquivos do Linux usam isto como padrão agora (desde aproximadamente 2.6.30), mas o XFS usou comportamento similar ao relatime desde 2006, então ninguém deve precisar usar noatime no XFS por questões de desempenho.</q> <a rel="nofollow" class="external autonumber" href="https://xfs.org/index.php/XFS_FAQ#Q:_Is_using_noatime_or.2Fand_nodiratime_at_mount_time_giving_any_performance_benefits_in_xfs_.28or_not_using_them_performance_decrease.29.3F">[9]</a> (conteúdo em inglês).
</p>
<p>Veja <a href="../pt/Fstab.html#Op%C3%A7%C3%B5es_atime" title="Fstab (Português)">opções atime</a> para mais detalhes neste tópico.
</p>
<h3><span class="mw-headline" id="Descarte">Descarte</span></h3>
<p>Mesmo com o XFS suportando descarte assíncrono <a rel="nofollow" class="external autonumber" href="https://lwn.net/Articles/787272/">[10]</a> (conteúdo em inglês) desde o kernel 4.7 <a rel="nofollow" class="external autonumber" href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Async-Discard-Linux-4.7">[11]</a> (conteúdo em inglês) <a rel="nofollow" class="external autonumber" href="https://events.static.linuxfound.org/sites/events/files/slides/discard_0.pdf">[12]</a> (conteúdo em inglês), o <span class="plainlinks archwiki-template-man" title="$ man 5 xfs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xfs.5">xfs(5)</a></span> ainda recomenda <q>que você use a aplicação <a href="../en/Solid_state_drive.html#Periodic_TRIM" class="mw-redirect" title="Fstrim">fstrim</a> para descartar blocos não utilizados em vez da opção de montagem <code>discard</code> pois o impacto no desempenho desta opção é bem severo.</q>
</p>
<p>Veja <a href="../en/Solid_state_drive.html#Periodic_TRIM" title="Solid state drive">Solid state drive#Periodic TRIM</a>.
</p>
<h3>
<span id="Desfragmenta.C3.A7.C3.A3o"></span><span class="mw-headline" id="Desfragmentação">Desfragmentação</span>
</h3>
<p>Apesar da natureza baseada em extensões do XFS e a estratégia de alocação utilizada significativamente melhorarem a resistência do sistema de arquivo contra problemas de fragmentação, XFS fornece um utilitário para desfragmentação do sistema de arquivos (<i>xfs_fsr</i>, abreviação de XFS FileSystem Reorganizer - reorganizador de sistema de arquivos do XFS) que pode desfragmentar os arquivos em um sistema de arquivos montado e ativo. Pode ser útil ver a fragmentação do XFS periodicamente.
</p>
<p><span class="plainlinks archwiki-template-man" title="$ man 8 xfs_fsr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xfs_fsr.8">xfs_fsr(8)</a></span> melhora a organização de sistemas de arquivos montados. O algoritmo de reorganização opera em um arquivo por vez, compactando ou de alguma outra maneira melhorando o leiaute de extensões (blocos de dados de arquivos contíguos) de arquivos.
</p>
<h4>
<span id="Inspecionar_n.C3.ADveis_de_fragmenta.C3.A7.C3.A3o"></span><span class="mw-headline" id="Inspecionar_níveis_de_fragmentação">Inspecionar níveis de fragmentação</span>
</h4>
<p>Para ver quanta fragmentação seu sistema de arquivos atualmente tem:
</p>
<pre># xfs_db -c frag -r /dev/<i>partição</i>
</pre>
<h4>
<span id="Rodar_a_desfragmenta.C3.A7.C3.A3o"></span><span class="mw-headline" id="Rodar_a_desfragmentação">Rodar a desfragmentação</span>
</h4>
<p>Para iniciar a desfragmentação, use o comando <span class="plainlinks archwiki-template-man" title="$ man 8 xfs_fsr"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xfs_fsr.8">xfs_fsr(8)</a></span>:
</p>
<pre># xfs_fsr /dev/<i>partição</i>
</pre>
<h3>
<span id="Deduplica.C3.A7.C3.A3o"></span><span class="mw-headline" id="Deduplicação">Deduplicação</span>
</h3>
<p>O recurso <i>reflink</i>, disponível desde a versão do kernel 4.9 e habilitada por padrão desde a versão do <code>mkfs.xfs</code> 5.1.0, permite criar cópias rápidas com reflink, assim como a deduplicação após o fato, da mesma forma que o <a href="../pt/Btrfs.html" title="Btrfs (Português)">BTRFS</a>:
</p>
<h4>
<span id="C.C3.B3pias_com_reflink"></span><span class="mw-headline" id="Cópias_com_reflink">Cópias com reflink</span>
</h4>
<p>Cópias com reflink inicialmente não utilizam espaço adicional:
</p>
<pre>$ cp --reflink arquivo-grande-1 arquivo-grande-2
</pre>
<p>Até que um dos arquivos seja editado, então uma cópia-durante-escrita ocorre. Isto pode ser muito útil para criar um snapshot de arquivos (grandes).
</p>
<h4>
<span id="Deduplica.C3.A7.C3.A3o_2"></span><span class="mw-headline" id="Deduplicação_2">Deduplicação</span>
</h4>
<p>Sistemas de arquivos podem ser deduplicados usando ferramentas como <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=duperemove">duperemove</a></span>.
</p>
<h3><span class="mw-headline" id="Journal_externo_do_XFS">Journal externo do XFS</span></h3>
<p>Usando um log externo (journal de metadados) em por exemplo um <a href="../en/Solid_state_drive.html" class="mw-redirect" title="SSD">SSD</a> pode ser útil para melhorar o desempenho <a rel="nofollow" class="external autonumber" href="https://docs.oracle.com/en/operating-systems/oracle-linux/9/fsadmin/fsadmin-ManagingtheXFSFileSystem.html#extjnl-xfs">[13]</a> (conteúdo em inglês). Veja <span class="plainlinks archwiki-template-man" title="$ man 8 mkfs.xfs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkfs.xfs.8">mkfs.xfs(8)</a></span> para mais detalhes no parâmetro <code>logdev</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Usar a memória flash pode desgastar o dispositivo. Veja <a href="../pt/Improving_performance.html#Reduzir_leituras/escritas_no_disco" title="Improving performance (Português)">Reduzir leituras/escritas no disco</a> para detalhes sobre desgaste de SSDs.</div>
<p>Para reservar um journal externo com um tamanho específico quando você cria um sistema de arquivos XFS, especifique as opções <code>-l logdev=<i>dispositivo</i>,size=<i>tamanho</i></code> no comando <code>mkfs.xfs</code>. Se você omitir o parâmetro <code>size</code>, um journal é usado baseado no tamanho do sistema de arquivos. Para montar o sistema de arquivos XFS para que use o journal externo, especifique a opção <code>logdev=<i>dispositivo</i></code> no comando <a href="../pt/File_systems.html#Montar_um_sistema_de_arquivos" title="File systems (Português)">mount</a>.
</p>
<h3>
<span id="Intervalo_de_sincroniza.C3.A7.C3.A3o"></span><span class="mw-headline" id="Intervalo_de_sincronização">Intervalo de sincronização</span>
</h3>
<p>XFS possui uma variável dedicada de <a href="../en/Sysctl.html" title="Sysctl">sysctl</a> para definir o "<a href="../pt/Improving_performance.html#Intervalo_de_writeback_e_tamanho_do_buffer" title="Improving performance (Português)">Intervalo de writeback e tamanho do buffer</a>". Arch possui o valor padrão de 3000, é possível definir valores maiores, mas esteja ciente que valores muito altos podem resultar em perda de dados em alguns casos:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/20-xfs-sync-interval.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">fs.xfs.xfssyncd_centisecs = 10000</pre>
<h2>
<span id="Administra.C3.A7.C3.A3o"></span><span class="mw-headline" id="Administração">Administração</span>
</h2>
<h3><span class="mw-headline" id="Redimensionamento">Redimensionamento</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Atualmente, <a rel="nofollow" class="external text" href="https://xfs.org/index.php/Shrinking_Support">não é possível</a> (conteúdo em inglês) encolher um XFS.</div>
<p>XFS pode ser redimensionado durante o uso, depois que a partição foi alterada. Apenas rode <code>xfs_growfs</code> com o ponto de montagem como primeiro parâmetro para crescer o sistema de arquivos para o máximo tamanho possível.
</p>
<pre># xfs_growfs <i>/caminho/pro/ponto/de/montagem</i>
</pre>
<h3>
<span id="Verifica.C3.A7.C3.A3o_online_de_metadados_.28varredura.29"></span><span class="mw-headline" id="Verificação_online_de_metadados_(varredura)">Verificação online de metadados (varredura)</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Este programa é <b>experimental</b>, significando que seu comportamento e interface podem mudar a qualquer hora. Veja <span class="plainlinks archwiki-template-man" title="$ man 8 xfs_scrub"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xfs_scrub.8">xfs_scrub(8)</a></span>.</div>
<p><code>xfs_scrub</code> pede ao kernel para varrer todos os objetos de metadados do sistema de arquivos XFS. Os logs de metadados são verificados busca de valores obviamente inválidos e, em seguida, fazem referência cruzada com outros metadados. O objetivo é estabelecer uma confiança razoável sobre a consistência do sistema de arquivos em geral examinando a consistência de logs individuais de metadados em relação a outros metadados no sistema de arquivos. Metadados danificados podem ser reconstruídos à partir de outros metadados se existirem estruturas de dados redundantes intactas.
</p>
<p><a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Habilite">Habilite</a>/<a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Inicie">Inicie</a> <code>xfs_scrub_all.timer</code> para periodicamente verificar metadados para todos os sistemas de arquivos XFS durante o uso.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Pode-se <a href="../pt/Systemd.html#Editando_units_fornecidas" class="mw-redirect" title="Editar">editar</a> <code>xfs_scrub_all.timer</code>: o timer executa a cada Domingo, às 03:10 da manhã e será <a href="../pt/Systemd/Timers.html#Timer_de_tempo_real" title="Systemd (Português)/Timers (Português)">ativado imediatamente</a> se sua janela de inicialização não tiver ocorrido, como por exemplo, devido ao sistema estar desligado.</div>
<h3><span class="mw-headline" id="Conserto">Conserto</span></h3>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> <q>Ao contrário de outros sistemas de arquivo Linux, <i>xfs_repair</i> não executa durante a inicialização, mesmo quando um sistema de arquivos XFS não foi montado de maneira limpa. No evento de uma desmontagem não limpa, <i>xfs_repair</i> simplesmente reproduz o log durante a montagem, garantindo um sistema de arquivos consistente</q> <a rel="nofollow" class="external autonumber" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/xfsrepair">[14]</a> (conteúdo em inglês).</div>
<p>De <a rel="nofollow" class="external text" href="https://docs.oracle.com/en/operating-systems/oracle-linux/6/adminsg/ol_repair_xfs.html">Verificando e consertando um sistema de arquivos XFS (conteúdo em inglês)</a>:
</p>
<p><q>Se você não pode montar um sistema de arquivos XFS, você pode usar o comando <b>xfs_repair -n</b> para verificar sua consistência. Geralmente, você apenas precisa rodar este comando no arquivo de dispositivo de um sistema de arquivos que você acredita que tem um problema. O comando <b>xfs_repair -n</b> mostra a saída para indicar mudanças que seriam feitas no sistema de arquivos caso fosse necessária realizar uma operação de conserto completa, mas não iria modificar o sistema de arquivos diretamente.</q>
</p>
<p><q>Se você pode montar o sistema de arquivos e você não possui um backup adequado, você pode usar <b>xfsdump</b> para tentar fazer backup dos dados do sistema de arquivos existentes, No entanto, o comando pode falhar se os metadados do sistema de arquivos estiverem muito corrompidos.</q>
</p>
<p><q>Você pode usar o comando <b>xfs_repair</b> para tentar consertar um sistema de arquivos XFS especificando seu arquivo de dispositivo. O comando reproduz o log do journal para consertar quaisquer inconsistências que podem ter resultado do sistema de arquivos não ter sido desmontado de maneira limpa. A não ser que o sistema de arquivos tenha uma inconsistência geralmente não é necessário usar o comando, pois o journal é reproduzido cada vez que você monta o sistema de arquivos.</q>
</p>
<p>Primeiro <a href="../pt/File_systems.html#Desmontar_um_sistema_de_arquivos" title="File systems (Português)">desmonte</a> o sistema de arquivos, então, execute a ferramente <span class="plainlinks archwiki-template-man" title="$ man 8 xfs_repair"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xfs_repair.8">xfs_repair(8)</a></span>:
</p>
<pre># xfs_repair <i>dispositivo</i>
</pre>
<p><q>Se o log no journal foi corrompido, você pode reiniciar o log especificando a opção <b>-L</b> no <b>xfs_repair</b>.</q>
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> <q>O utilitário <i>xfs_repair</i> não pode consertar um sistema de arquivos XFS com um log sujo. Para limpar o log, monte e desmonte o sistema de arquivos XFS. Se o log estiver corrompido e não puder ser reproduzido, use a opção <code>-L</code> ("forçar zeramento do log") para limpar o log, ou seja, <code>xfs_repair -L /dev/dispositivo</code>. Esteja ciente que isto pode resultar em ainda maiores corrupção e perda de dados.</q> <a rel="nofollow" class="external autonumber" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/xfsrepair">[15]</a> (conteúdo em inglês).</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> <q>Reiniciar o log pode deixar o sistema de arquivos em um estado inconsistente, resultando em perda de dados e corrupção de dados. A não ser que você tenha experiência em depuração e conserto de sistemas de arquivos XFS usando o <b>xfs_db</b>, é recomendado, em vez disso, recriar o sistema de arquivos e restaurar seu conteúdo a partir de um backup.</q> <a rel="nofollow" class="external autonumber" href="https://docs.oracle.com/en/operating-systems/oracle-linux/6/adminsg/ol_repair_xfs.html">[16]</a> (conteúdo em inglês).</div>
<p><q>Se você não puder montar o sistema de arquivos ou não tiver um backup adequado, executar <b>xfs_repair</b> é a única opção viável, a menos que você tenha experiência no uso de <b>xfs_db</b>.</q>
</p>
<p><q><b>xfs_db</b> fornece um conjunto de comandos interno que permite depurar e consertar um sistema de arquivos XFS manualmente. Os comandos permitem que você execute varreduras no sistema de arquivos e navegue e exiba suas estruturas de dados. Se você especificar a opção <b>-x</b> para habilitar o modo especialista, você pode modificar as estruturas de dados.</q>
</p>
<p><br>
</p>
<pre># xfs_db [-x] dispositivo
</pre>
<p><q>Para mais informações, veja <span class="plainlinks archwiki-template-man" title="$ man 8 xfs_db"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xfs_db.8">xfs_db(8)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 8 xfs_repair"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/xfs_repair.8">xfs_repair(8)</a></span>, e o comando <b>help</b> do <b>xfs_db</b>.</q>
</p>
<p>Veja também <a rel="nofollow" class="external text" href="https://xfs.org/index.php/XFS_FAQ#Q:_Which_factors_influence_the_memory_usage_of_xfs_repair.3F">Quais fatores influenciam o uso de memória do xfs_repair?</a>  (conteúdo em inglês) e <a rel="nofollow" class="external text" href="https://xfs.org/docs/xfsdocs-xml-dev/XFS_User_Guide/tmp/en-US/html/xfs-repair.html">Conserto de XFS</a><sup title="Status da última verificação: 404">[<a href="https://en.wikipedia.org/wiki/pt:Wikip%C3%A9dia:Liga%C3%A7%C3%A3o_inativa" class="extiw" title="wikipedia:pt:Wikipédia:Ligação inativa">link inativo</a> 2024-07-30 ⓘ]</sup> (conteúdo em inglês).
</p>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3><span class="mw-headline" id="Cota_no_sistema_de_arquivos_raiz">Cota no sistema de arquivos raiz</span></h3>
<p>As opções de montagem de cota XFS (<code>uquota</code>, <code>gquota</code>, <code>prjquota</code>, etc.) falham durante a remontagem do sistema de arquivos. Para habilitar a cota para o sistema de arquivos raiz, a opção de montagem deve ser passada ao initramfs como um <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetro do kernel">parâmetro do kernel</a> <code>rootflags=</code>. Subsequentemente, ele não deve ser listado entre as opções de montagem em <code>/etc/fstab</code> para o sistema de arquivos raiz <code>/</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Existem algumas diferenças de cota XFS em comparação com o Linux padrão <a href="../en/Disk_quota.html" title="Disk quota">Disk quota</a>, o artigo <a rel="nofollow" class="external free" href="https://inai.de/linux/adm_quota">https://inai.de/linux/adm_quota</a> (conteúdo em inglês) pode valer a pena ler.</div>
<h3>
<span id="xfs_scrub_all_falha_se_o_usu.C3.A1rio_.22nobody.22_n.C3.A3o_pode_acessar_o_ponto_de_montagem"></span><span class="mw-headline" id='xfs_scrub_all_falha_se_o_usuário_"nobody"_não_pode_acessar_o_ponto_de_montagem'>xfs_scrub_all falha se o usuário "nobody" não pode acessar o ponto de montagem</span>
</h3>
<p>Ao executar <code>xfs_scrub_all</code>, será lançado <code>xfs_scrub@.service</code> para cada sistema de arquivos XFS montado. O serviço roda com o usuário <code>nobody</code>, então, se <code>nobody</code> não puder navegar até o diretório, haverá uma falha com o erro:
</p>
<pre>xfs_scrub@<i>ponto de montagem</i>.service: Changing to the requested working directory failed: Permission denied
xfs_scrub@<i>ponto de montagem</i>.service: Failed at step CHDIR spawning /usr/bin/xfs_scrub: Permission denied
xfs_scrub@<i>ponto de montagem</i>.service: Main process exited, code=exited, status=200/CHDIR
</pre>
<p>Para permitir que o serviço ocorra, mude as <a href="../pt/File_permissions_and_attributes.html" class="mw-redirect" title="Permissões">permissões</a> do ponto de montagem para que o usuário <code>nobody</code> tenha permissões de execução.
</p>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://xfs.org/index.php/XFS_FAQ">Perguntas frequentes do XFS</a> (conteúdo em inglês).</li>
<li>
<a rel="nofollow" class="external text" href="https://xfs.org/index.php/Improving_Metadata_Performance_By_Reducing_Journal_Overhead">Melhorando desempenho de metadados ao reduzir sobrecarga no journal</a> (conteúdo em inglês).</li>
<li>
<a href="https://en.wikipedia.org/wiki/pt:XFS" class="extiw" title="wikipedia:pt:XFS">Página sobre XFS da Wikipedia</a>.</li>
<li>
<a rel="nofollow" class="external text" href="https://xfs.org/docs/xfsdocs-xml-dev/XFS_User_Guide//tmp/en-US/html/index.html">Guia de usuário do XFS</a><sup title="Status da última verificação: 404">[<a href="https://en.wikipedia.org/wiki/pt:Wikip%C3%A9dia:Liga%C3%A7%C3%A3o_inativa" class="extiw" title="wikipedia:pt:Wikipédia:Ligação inativa">link inativo</a> 2024-07-30 ⓘ]</sup> (conteúdo em inglês).</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../pt/Category:File_systems.html" title="Category:File systems (Português)">File systems (Português)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=XFS_(Portugu%C3%AAs)&amp;oldid=813512">https://wiki.archlinux.org/index.php?title=XFS_(Português)&amp;oldid=813512</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 July 2024, at 20:57.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki_88x31.png" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul>
		<li>
		<button class="cdx-button cdx-button--icon-only vector-limited-width-toggle" id=""><span class="vector-icon mw-ui-icon-fullScreen mw-ui-icon-wikimedia-fullScreen"></span>

<span>Toggle limited content width</span>
</button>
</li>
	</ul>
</div>
</body>
</html>
