<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Python package guidelines (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Python_package_guidelines_Português rootpage-Python_package_guidelines_Português skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Nome_do_pacote" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Nome_do_pacote">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Nome do pacote</span>
			</div>
		</a>
		
		<ul id="toc-Nome_do_pacote-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Arquitetura" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Arquitetura">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Arquitetura</span>
			</div>
		</a>
		
		<ul id="toc-Arquitetura-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Fonte" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Fonte">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Fonte</span>
			</div>
		</a>
		
		<ul id="toc-Fonte-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Métodos_de_instalação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#M%C3%A9todos_de_instala%C3%A7%C3%A3o">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Métodos de instalação</span>
			</div>
		</a>
		
			<button aria-controls="toc-Métodos_de_instalação-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Métodos de instalação subsection</span>
			</button>
		
		<ul id="toc-Métodos_de_instalação-sublist" class="vector-toc-list">
			<li id="toc-Baseado_em_padrões_(PEP_517)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Baseado_em_padr%C3%B5es_(PEP_517)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Baseado em padrões (PEP 517)</span>
				</div>
			</a>
			
			<ul id="toc-Baseado_em_padrões_(PEP_517)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-setuptools_ou_distutils" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#setuptools_ou_distutils">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>setuptools ou distutils</span>
				</div>
			</a>
			
			<ul id="toc-setuptools_ou_distutils-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Verificação" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Verifica%C3%A7%C3%A3o">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Verificação</span>
			</div>
		</a>
		
		<ul id="toc-Verificação-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Dicas_e_truques" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Dicas_e_truques">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">6</span>
				<span>Dicas e truques</span>
			</div>
		</a>
		
			<button aria-controls="toc-Dicas_e_truques-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dicas e truques subsection</span>
			</button>
		
		<ul id="toc-Dicas_e_truques-sublist" class="vector-toc-list">
			<li id="toc-Descobrindo_assinaturas_PGP_desanexadas_no_PyPI" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Descobrindo_assinaturas_PGP_desanexadas_no_PyPI">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.1</span>
					<span>Descobrindo assinaturas PGP desanexadas no PyPI</span>
				</div>
			</a>
			
			<ul id="toc-Descobrindo_assinaturas_PGP_desanexadas_no_PyPI-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_versão_do_Python" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_vers%C3%A3o_do_Python">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.2</span>
					<span>Usando versão do Python</span>
				</div>
			</a>
			
			<ul id="toc-Usando_versão_do_Python-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_site-packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Usando_site-packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.3</span>
					<span>Usando site-packages</span>
				</div>
			</a>
			
			<ul id="toc-Usando_site-packages-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Diretório_de_teste_em_site-package" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Diret%C3%B3rio_de_teste_em_site-package">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">6.4</span>
					<span>Diretório de teste em site-package</span>
				</div>
			</a>
			
			<ul id="toc-Diretório_de_teste_em_site-package-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Python package guidelines (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 4 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-4" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">4 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Python_package_guidelines.html" title="Python package guidelines – English" lang="en" hreflang="en" data-title="Python package guidelines" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Python_%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3" title="Python パッケージガイドライン – 日本語" lang="ja" hreflang="ja" data-title="Python パッケージガイドライン" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Python_package_guidelines.html" title="Python package guidelines – русский" lang="ru" hreflang="ru" data-title="Python package guidelines" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Python_package_guidelines" title="Python package guidelines – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Python package guidelines" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Python_package_guidelines.html" title="Python package guidelines">Python package guidelines</a>. Data da última tradução: 2024-02-27. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Python_package_guidelines&amp;diff=0&amp;oldid=801377">alterações</a> na versão em inglês.</div>
<div class="toc" style="display:block; text-align: center; margin-bottom: 1em;">
<b><a href="../pt/Arch_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes do Arch">Diretrizes de pacotes do Arch</a></b>
<hr>
<p><a href="../pt/32-bit_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes 32-bit">32-bit</a> – <a href="../pt/CLR_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes CLR">CLR</a> – <a href="../pt/CMake_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes CMake">CMake</a> – <a href="../pt/Cross-compiling_tools_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes de ferramentas de compilação cruzada">Cross</a> – <a href="../pt/DKMS_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes DKMS">DKMS</a> – <a href="../pt/Eclipse_plugin_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes de plugin do Eclipse">Eclipse</a> – <a href="../pt/Electron_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Electron">Electron</a> – <a href="../pt/Font_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes de fontes">Fonte</a> – <a href="../pt/Free_Pascal_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Free Pascal">Free Pascal</a> – <a href="../pt/GNOME_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes GNOME">GNOME</a> – <a href="../pt/Go_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Go">Go</a> – <a href="../pt/Haskell_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Haskell">Haskell</a> – <a href="../pt/Java_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Java">Java</a> – <a href="../pt/KDE_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes KDE">KDE</a> – <a href="../pt/Kernel_module_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes de módulos de kernel">Kernel</a> – <a href="../pt/Lisp_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Lisp">Lisp</a> – <a href="../pt/Meson_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Meson">Meson</a> – <a href="../pt/MinGW_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes MinGW">MinGW</a> – <a href="../pt/Node.js_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Node.js">Node.js</a> – <a href="../pt/Nonfree_applications_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes de aplicativos não livres">Nonfree</a> – <a href="../pt/OCaml_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes OCaml">OCaml</a> – <a href="../pt/Perl_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Perl">Perl</a> – <a href="../pt/PHP_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes PHP">PHP</a> – <a href="../pt/Python_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Python">Python</a> – <a href="../pt/R_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes R">R</a> – <a href="../pt/Ruby_Gem_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Ruby Gem">Ruby</a> – <a href="../pt/Rust_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Rust">Rust</a> – <a href="../pt/Shell_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes de shell">Shell</a> – <a href="../pt/VCS_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes VCS">VCS</a> – <a href="../pt/Web_application_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes de aplicativos da Web">Web</a> – <a href="../pt/Wine_package_guidelines.html" class="mw-redirect" title="Diretrizes de pacotes Wine">Wine</a>
</p>
</div>
<p>Esse documento cobre padrões e diretrizes na escrita de <a href="../pt/PKGBUILD.html" title="PKGBUILD (Português)">PKGBUILDs</a> para softwares <a href="../pt/Python.html" title="Python (Português)">Python</a>.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Nome_do_pacote">Nome do pacote</span></h2>
<p>Para módulos de biblioteca do <a href="../pt/Python.html#Instala%C3%A7%C3%A3o" title="Python (Português)">Python 3</a>, use <code>python-<i>nomemódulo</i></code>. Também use o prefixo se o pacote fornece um programa fortemente atrelado ao ecossistema do Python (p. ex. <i>pip</i> or <i>tox</i>). Para outros aplicativos, use apenas o nome do programa.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O nome do pacote deve estar todo em minúsculo.</div>
<h2><span class="mw-headline" id="Arquitetura">Arquitetura</span></h2>
<p>Veja <a href="../pt/PKGBUILD.html#arch" title="PKGBUILD (Português)">PKGBUILD (Português)#arch</a>.
</p>
<p>Um pacote Python que contenha extensões C é dependente de arquitetura. Do contrário, muito provavelmente terá nenhuma dependência de arquitetura.
</p>
<p>Pacotes compilados usando <a rel="nofollow" class="external text" href="https://setuptools.pypa.io/">setuptools</a> definem suas extensões C usando a palavra-chave <code>ext_modules</code> no <code>setup.py</code>.
</p>
<h2><span class="mw-headline" id="Fonte">Fonte</span></h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Com <a rel="nofollow" class="external text" href="https://rfc.archlinux.page/0020-sources-for-python-packaging/">RFC0020</a>, o padrão é usar tarballs fonte fornecidas pelo upstream, em vez dos tarballs sdist fornecidos pelo PyPI.</div>
<p>As URLs de download vinculadas do site do PyPI incluem um hash imprevisível que precisa ser obtido no site do PyPI sempre que um pacote precisar ser atualizado. Isso os torna inadequados para uso em um PKGBUILD. PyPI <a rel="nofollow" class="external text" href="https://github.com/pypa/pypi-legacy/issues/438#issuecomment-226940730">fornece</a> um esquema estável alternativo: array <a href="../pt/PKGBUILD.html#source" title="PKGBUILD (Português)">PKGBUILD (Português)#source</a> <code>source=()</code> deve usar os seguintes modelos de URL:
</p>
<dl>
<dt>Pacote fonte</dt>
<dd></dd>
<dd><code>https://files.pythonhosted.org/packages/source/${_name::1}/$_name/$_name-$pkgver.tar.gz</code></dd>
<dt>Pacote wheel Python puro</dt>
<dd>
<code>https://files.pythonhosted.org/packages/py2.py3/${_name::1}/$_name/${_name//-/_}-$pkgver-py2.py3-none-any.whl</code> (Bilíngue compatível com Python 2 e Python 3):<code>https://files.pythonhosted.org/packages/py3/${_name::1}/$_name/${_name//-/_}-$pkgver-py3-none-any.whl</code> (Python 3 apenas)</dd>
<dd>Note que o nome da distribuição pode conter traços, enquanto sua representação em um nome de arquivo wheel não pode (eles são convertidos em sublinhados).</dd>
<dt>Pacote wheel específico para arquitetura</dt>
<dd>Arrays adicionais específicos para arquiteturas podem ser adicionados adicionando ao final um underscore e o nome da arquitetura, por exemplo, <code>source_x86_64=('...')</code>. Também <code>_py=cp310</code> pode ser usado para não repetir a versão do Python:</dd>
<dd><code>https://files.pythonhosted.org/packages/$_py/${_name::1}/$_name/{_name//-/_}-$pkgver-$_py-${_py}m-manylinux1_x86_64.whl</code></dd>
</dl>
<p>Note que uma variável personalizada <code><b>$_name</b></code> é usada em vez de <code>pkgname</code> já que nomes de pacotes python são geralmente prefixados com <code>python-</code>. Essa variável pode ser definida genericamente da seguinte forma:
</p>
<pre>_name=${pkgname#python-}
</pre>
<h2>
<span id="M.C3.A9todos_de_instala.C3.A7.C3.A3o"></span><span class="mw-headline" id="Métodos_de_instalação">Métodos de instalação</span>
</h2>
<p>Os pacotes Python geralmente são instalados usando um gerenciador de pacotes específico da linguagem, como o <a rel="nofollow" class="external text" href="https://pip.pypa.io/">pip</a>, o qual busca pacotes de um repositório online (geralmente <a rel="nofollow" class="external text" href="https://pypi.org/">PyPI</a>, o Python Package Index) e rastreia os arquivos relevantes.
</p>
<p>No entanto, para gerenciar pacotes Python de dentro de <code>PKGBUILD</code>s, é necessário "instalar" o pacote Python no local temporário <code><i>$pkgdir</i>/usr/lib/python<i>&lt;versão do Python&gt;</i>/site-packages/<i>$pkgname</i></code>.
</p>
<p>Para pacotes Python usando <a rel="nofollow" class="external text" href="https://www.python.org/dev/peps/pep-0517/">metadados padrão</a> para especificar seu back-end de compilação em <code>pyproject.toml</code>, isso pode ser alcançado mais facilmente usando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-build">python-build</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-installer">python-installer</a></span>.
Pacotes antigos podem não especificar que usam <i>setuptools</i> e oferecer apenas um <code>setup.py</code> que deve ser invocado manualmente.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> As dependências dos metadados do pacote devem ser definidas no array <code>depends</code> caso contrário elas não serão instaladas.</div>
<h3>
<span id="Baseado_em_padr.C3.B5es_.28PEP_517.29"></span><span class="mw-headline" id="Baseado_em_padrões_(PEP_517)">Baseado em padrões (PEP 517)</span>
</h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Ao construir a partir de tarballs fonte fornecidos pelo upstream e o upstream depende do git para derivar uma string de versão para o projeto, é necessário definir variáveis de ambiente específicas da ferramenta para <code>$pkgver</code> antes de construir uma wheel:
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-setuptools-scm">python-setuptools-scm</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-hatch-vcs">python-hatch-vcs</a></span>: <code>SETUPTOOLS_SCM_PRETEND_VERSION</code>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-pbr">python-pbr</a></span>: <code>PBR_VERSION</code>
</li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-pdm-backend">python-pdm-backend</a></span>: <code>PDM_BUILD_SCM_VERSION</code>
</li>
</ul>
</div>
<p>Um fluxo de trabalho baseado em padrões é simples: gere um wheel usando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-build">python-build</a></span> e instale-o em <code>$pkgdir</code> usando <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-installer">python-installer</a></span>:
</p>
<pre>makedepends=(python-build python-installer python-wheel)

build() {
    cd "$_name-$pkgver"
    python -m build --wheel --no-isolation
}

package() {
    cd "$_name-$pkgver"
    python -m installer --destdir="$pkgdir" dist/*.whl
}</pre>
<p>sendo:
</p>
<ul>
<li>
<code>--wheel</code> resulta em apenas um arquivo wheel a ser construído, sem distribuição de código-fonte.</li>
<li>
<code>--no-isolation</code> significa que o pacote é compilado usando o que está instalado em seu sistema (que inclui pacotes que você especificou em <code>depends</code>), por padrão a ferramenta cria um pacote isolado ambiente virtual e executa a construção lá.</li>
<li>
<code>--destdir="$pkgdir"</code> evita a tentativa de instalar diretamente  no sistema hospedeiro em vez do arquivo de pacote, que resultaria em um erro de permissão</li>
<li>
<code>--compile-bytecode=...</code> ou <code>--no-compile-bytecode</code> pode ser passado para <code>installer</code>, mas o padrão é escolhido com sensatez, então isso não deve ser necessário.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Ignorar <code>build</code> e colocar o arquivo <code>.whl</code> em seu array <code>source</code> é desencorajado em favor da compilação a partir do código-fonte e só deve ser usado quando o esta última não é uma opção viável (por exemplo, pacotes que <b>apenas</b> vêm com fontes wheel e, portanto, não podem ser compilados a partir do código-fonte).</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Se o seu pacote for um <a href="../en/VCS_package_guidelines.html" title="VCS package guidelines">pacote VCS</a> (<code>python-…-git</code>), inclua o comando <code>git -C "${srcdir}/${pkgname}" clean -dfx</code> em sua função <code>prepare</code>. Isso remove wheels obsoletos junto com outros artefatos de compilação e ajuda a evitar problemas futuros. Consulte também problemas upstream para <a rel="nofollow" class="external text" href="https://github.com/pypa/setuptools/issues/1347">setuptools</a> e <a rel="nofollow" class="external text" href="https://github.com/python-poetry/poetry/issues/1329">Poetry</a>.</div>
<h3><span class="mw-headline" id="setuptools_ou_distutils">setuptools ou distutils</span></h3>
<p>Se nenhum <code>pyproject.toml</code> puder ser encontrado ou não contiver uma tabela <code>[build-system]</code>, significa que o projeto está usando o antigo formato legado, que usa um <i>setup.py</i> arquivo que invoca <i>setuptools</i> ou <i>distutils</i>. Observe que embora <i>distutils</i> esteja incluído na biblioteca padrão do Python, ter <i>setuptools</i> instalado significa que você usa uma versão corrigida de <i>distutils</i>.
</p>
<pre>makedepends=('python-setuptools')  # a menos que exiga somente distutils

build() {
    cd "$_name-$pkgver"
    python setup.py build
}

package() {
    cd "$_name-$pkgver"
    python setup.py install --root="$pkgdir" --optimize=1
}</pre>
<p>sendo:
</p>
<ul>
<li>
<code>--root="$pkgdir"</code> funciona igual ao <code>--destdir</code> acima</li>
<li>
<code>--optimize=1</code> compila arquivos de bytecode otimizados (<i>.opt-1.pyc</i>) para que possam ser rastreados pelo <a href="../pt/Pacman.html" title="Pacman (Português)">pacman</a> em vez de serem criados no sistema host em demanda.</li>
<li>Adicionar <code>--skip-build</code> otimiza a tentativa desnecessária de executar novamente as etapas de construção já executadas na função <code>build()</code>, se for esse o caso.</li>
</ul>
<p>Alguns pacotes tentam usar <i>setuptools</i> e voltam para <i>distutils</i> se <i>setuptools</i> não puder ser importado. Neste caso, <i>setuptools</i> deve ser adicionado como <code>makedepends</code>, para que os metadados Python resultantes sejam melhores.
</p>
<p>Se um pacote precisar que <i>setuptools</i> seja compilado devido à inclusão de executáveis (o que não é suportado por <i>distutils</i>), mas apenas importa <i>distutils</i>, então a compilação gerará um aviso, e o pacote resultante estará quebrado (não conterá os executáveis):
</p>
<pre>/usr/lib/python3.8/distutils/dist.py:274: UserWarning: Unknown distribution option: 'entry_points'
  warnings.warn(msg)</pre>
<p>Neste caso, deve-se relatar um bug no upstream. Para contornar o problema, um recurso de ferramentas de configuração não documentado pode ser usado:
</p>
<pre># fails because of distutils
python setup.py build

# works by using a setuptools shim
python -m setuptools.launch setup.py build</pre>
<p>Se um pacote usar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-setuptools-scm">python-setuptools-scm</a></span>, o pacote provavelmente não será compilado com um erro como:
</p>
<pre>LookupError: setuptools-scm was unable to detect version for /build/python-jsonschema/src/jsonschema-3.2.0.

Make sure you're either building from a fully intact git repository or PyPI tarballs. Most other sources (such as GitHub's tarballs, a git checkout without the .git folder) don't contain the necessary metadata and will not work.</pre>
<p>Para corrigir a compilação, <code>SETUPTOOLS_SCM_PRETEND_VERSION</code> deve ser exportado como uma variável de ambiente com <code>$pkgver</code> como valor:
</p>
<pre>export SETUPTOOLS_SCM_PRETEND_VERSION=$pkgver
</pre>
<h2>
<span id="Verifica.C3.A7.C3.A3o"></span><span class="mw-headline" id="Verificação">Verificação</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Evite usar o <code>tox</code> para executar os <i>testsuites</i>, pois ele é projetado explicitamente para testar as configurações repetidas baixadas do PyPI enquanto <code>tox</code> está sendo executado, e não testa a versão que será instalado pelo pacote. Isso anula o propósito de ter uma função <i>check</i>.</div>
<p>A maioria dos projetos Python que fornecem <i>testsuites</i> (que são conjunto ou coleção de testes) usam <i>nosetests</i> ou <i>pytest</i> para executar os testes com <code>test</code> no nome do arquivo ou diretório contendo a <i>testsuite</i>. Em geral, só executar <code>nosetests</code> ou <code>pytest</code> é o suficiente para executar a <i>testsuite</i>.
</p>
<pre>check(){
    cd "$srcdir/foo-$pkgver"

    # Para nosetests
    nosetests

    # Para pytest
    pytest
}
</pre>
<p>Se houver uma extensão C compilada, os testes precisam ser executados usando um <code>$PYTHONPATH</code>, que reflete a versão maior e menor do Python, para localizá-la e carregá-la.
</p>
<pre>check(){
  cd "$pkgname-$pkgver"
  local python_version=$(python -c 'import sys; print("".join(map(str, sys.version_info[:2])))')
  # Para nosetests
  PYTHONPATH="$PWD/build/lib.linux-$CARCH-cpython-${python_version}" nosetests

  # Para pytest
  PYTHONPATH="$PWD/build/lib.linux-$CARCH-cpython-${python_version}" pytest
}</pre>
<p>Alguns projetos fornecem pontos de entrada no <code>setup.py</code> para executar o teste. Isso funciona para <code>pytest</code> e <code>nosetests</code>.
</p>
<pre>check(){
    cd "$srcdir/foo-$pkgver"

    # para nosetests
    python setup.py nosetests

    # Para pytest - precisa de python-pytest-runner
    python setup.py pytest
}
</pre>
<h2><span class="mw-headline" id="Dicas_e_truques">Dicas e truques</span></h2>
<h3><span class="mw-headline" id="Descobrindo_assinaturas_PGP_desanexadas_no_PyPI">Descobrindo assinaturas PGP desanexadas no PyPI</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Em <a rel="nofollow" class="external text" href="https://blog.pypi.org/posts/2023-05-23-removing-pgp/">2023-05-23</a>, o PyPI removeu a funcionalidade para fornecer assinaturas <a href="../en/OpenPGP.html" title="OpenPGP">OpenPGP</a> desanexadas.</div>
<p>Se existirem assinaturas PGP desanexadas para um determinado tarball sdist do Python, elas deverão ser usadas para verificar o tarball. No entanto, os arquivos de assinatura não aparecem diretamente na seção de download de arquivos de qualquer projeto em pypi.org. Para descobrir os tarballs sdist e seus possíveis arquivos de assinatura, é possível usar este serviço para obter uma visão geral por projeto: <a rel="nofollow" class="external free" href="https://pypi.debian.net/">https://pypi.debian.net/</a>
</p>
<p>Para <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-requests">python-requests</a></span>, seria <a rel="nofollow" class="external free" href="https://pypi.debian.net/requests">https://pypi.debian.net/requests</a>.
</p>
<h3>
<span id="Usando_vers.C3.A3o_do_Python"></span><span class="mw-headline" id="Usando_versão_do_Python">Usando versão do Python</span>
</h3>
<p>Às vezes, durante a preparação, compilação, teste ou instalação, é necessário consultar a versão principal e secundária do Python do sistema. Não codifique isso (por exemplo, <code>3.9</code> ou <code>3.10</code>) e, em vez disso, use uma chamada ao interpretador Python para recuperar as informações e armazená-las em uma variável local:
</p>
<pre>check(){
  local python_version=$(python -c 'import sys; print(".".join(map(str, sys.version_info[:2])))')
  ...
}</pre>
<h3><span class="mw-headline" id="Usando_site-packages">Usando site-packages</span></h3>
<p>Às vezes, durante a compilação, o teste ou a instalação, é necessário consultar o diretório <code>site-packages</code> do sistema. Não adicione este diretório literalmente (<i>hardcoded</i>) e, em vez disso, use uma chamada para o interpretador Python para recuperar o caminho e armazená-lo em uma variável local:
</p>
<pre>check(){
  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
  ...
}</pre>
<h3>
<span id="Diret.C3.B3rio_de_teste_em_site-package"></span><span class="mw-headline" id="Diretório_de_teste_em_site-package">Diretório de teste em site-package</span>
</h3>
<p>Certifique-se de não instalar um diretório de nome <code>tests</code> ao <code>site-packages</code> (ou seja, <code>/usr/lib/pythonX.Y/site-packages/tests/</code>). Projetos de pacotes Python que usam <i>setuptools</i> às vezes são configurados incorretamente para incluir o diretório que contém seus testes como um pacote Python de nível superior. Se você encontrar isso, você pode ajudar registrando um problema no projeto do pacote e pedindo que eles corrijam isso. Por exemplo, <a rel="nofollow" class="external text" href="https://github.com/Lightning-AI/lightning/issues/10335">assim</a>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../pt/Category:Arch_package_guidelines.html" title="Category:Arch package guidelines (Português)">Arch package guidelines (Português)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Python_package_guidelines_(Portugu%C3%AAs)&amp;oldid=814739">https://wiki.archlinux.org/index.php?title=Python_package_guidelines_(Português)&amp;oldid=814739</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 18 August 2024, at 18:10.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><img src="/resources/assets/poweredby_mediawiki.svg" width="88" height="31" loading="lazy"></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
