<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-os vector-sticky-header-enabled vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Samba (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.44.2">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Samba_Português rootpage-Samba_Português skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Servidor" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Servidor">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Servidor</span>
			</div>
		</a>
		
			<button aria-controls="toc-Servidor-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Servidor subsection</span>
			</button>
		
		<ul id="toc-Servidor-sublist" class="vector-toc-list">
			<li id="toc-Instalação" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Instala%C3%A7%C3%A3o">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Instalação</span>
				</div>
			</a>
			
			<ul id="toc-Instalação-sublist" class="vector-toc-list">
				<li id="toc-Ativando_e_iniciando_serviços" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ativando_e_iniciando_servi%C3%A7os">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.1</span>
					<span>Ativando e iniciando serviços</span>
				</div>
			</a>
			
			<ul id="toc-Ativando_e_iniciando_serviços-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Tornar_a_rede_detectável" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Tornar_a_rede_detect%C3%A1vel">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.2</span>
					<span>Tornar a rede detectável</span>
				</div>
			</a>
			
			<ul id="toc-Tornar_a_rede_detectável-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configurar_firewall" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Configurar_firewall">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.3</span>
					<span>Configurar firewall</span>
				</div>
			</a>
			
			<ul id="toc-Configurar_firewall-sublist" class="vector-toc-list">
				<li id="toc-Regra_UFW" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Regra_UFW">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.3.1</span>
					<span>Regra UFW</span>
				</div>
			</a>
			
			<ul id="toc-Regra_UFW-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Serviço_firewalld" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Servi%C3%A7o_firewalld">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1.3.2</span>
					<span>Serviço firewalld</span>
				</div>
			</a>
			
			<ul id="toc-Serviço_firewalld-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Uso" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Uso">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Uso</span>
				</div>
			</a>
			
			<ul id="toc-Uso-sublist" class="vector-toc-list">
				<li id="toc-Gerenciamento_de_usuários" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Gerenciamento_de_usu%C3%A1rios">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.1</span>
					<span>Gerenciamento de usuários</span>
				</div>
			</a>
			
			<ul id="toc-Gerenciamento_de_usuários-sublist" class="vector-toc-list">
				<li id="toc-Adicionando_um_usuário" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Adicionando_um_usu%C3%A1rio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.1.1</span>
					<span>Adicionando um usuário</span>
				</div>
			</a>
			
			<ul id="toc-Adicionando_um_usuário-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Listando_usuários" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Listando_usu%C3%A1rios">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.1.2</span>
					<span>Listando usuários</span>
				</div>
			</a>
			
			<ul id="toc-Listando_usuários-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Alterando_senha_do_usuário" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Alterando_senha_do_usu%C3%A1rio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.1.3</span>
					<span>Alterando senha do usuário</span>
				</div>
			</a>
			
			<ul id="toc-Alterando_senha_do_usuário-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Criando_um_compartilhamento_anônimo" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Criando_um_compartilhamento_an%C3%B4nimo">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2.2</span>
					<span>Criando um compartilhamento anônimo</span>
				</div>
			</a>
			
			<ul id="toc-Criando_um_compartilhamento_anônimo-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Ativar_seguimento_de_links_simbólicos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Ativar_seguimento_de_links_simb%C3%B3licos">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>Ativar seguimento de links simbólicos</span>
				</div>
			</a>
			
			<ul id="toc-Ativar_seguimento_de_links_simbólicos-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Configuração_avançada" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configura%C3%A7%C3%A3o_avan%C3%A7ada">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4</span>
					<span>Configuração avançada</span>
				</div>
			</a>
			
			<ul id="toc-Configuração_avançada-sublist" class="vector-toc-list">
				<li id="toc-Ativar_compartilhamentos_de_usuário" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ativar_compartilhamentos_de_usu%C3%A1rio">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.1</span>
					<span>Ativar compartilhamentos de usuário</span>
				</div>
			</a>
			
			<ul id="toc-Ativar_compartilhamentos_de_usuário-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ajustar_e_forçar_permissões" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ajustar_e_for%C3%A7ar_permiss%C3%B5es">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.2</span>
					<span>Ajustar e forçar permissões</span>
				</div>
			</a>
			
			<ul id="toc-Ajustar_e_forçar_permissões-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Restringir_protocolos_para_maior_segurança" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Restringir_protocolos_para_maior_seguran%C3%A7a">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.3</span>
					<span>Restringir protocolos para maior segurança</span>
				</div>
			</a>
			
			<ul id="toc-Restringir_protocolos_para_maior_segurança-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Usar_criptografia_de_transporte_SMB_nativa" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Usar_criptografia_de_transporte_SMB_nativa">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.4</span>
					<span>Usar criptografia de transporte SMB nativa</span>
				</div>
			</a>
			
			<ul id="toc-Usar_criptografia_de_transporte_SMB_nativa-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Desativar_compartilhamento_de_impressora" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Desativar_compartilhamento_de_impressora">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.5</span>
					<span>Desativar compartilhamento de impressora</span>
				</div>
			</a>
			
			<ul id="toc-Desativar_compartilhamento_de_impressora-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Bloquear_certas_extensões_de_arquivo_em_um_compartilhamento_do_Samba" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Bloquear_certas_extens%C3%B5es_de_arquivo_em_um_compartilhamento_do_Samba">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.6</span>
					<span>Bloquear certas extensões de arquivo em um compartilhamento do Samba</span>
				</div>
			</a>
			
			<ul id="toc-Bloquear_certas_extensões_de_arquivo_em_um_compartilhamento_do_Samba-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Melhorar_o_desempenho" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Melhorar_o_desempenho">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.7</span>
					<span>Melhorar o desempenho</span>
				</div>
			</a>
			
			<ul id="toc-Melhorar_o_desempenho-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ativar_acesso_para_dispositivos/clientes_antigos" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ativar_acesso_para_dispositivos/clientes_antigos">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.8</span>
					<span>Ativar acesso para dispositivos/clientes antigos</span>
				</div>
			</a>
			
			<ul id="toc-Ativar_acesso_para_dispositivos/clientes_antigos-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Ativar_busca_Spotlight" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Ativar_busca_Spotlight">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.4.9</span>
					<span>Ativar busca Spotlight</span>
				</div>
			</a>
			
			<ul id="toc-Ativar_busca_Spotlight-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Cliente" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Cliente">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Cliente</span>
			</div>
		</a>
		
			<button aria-controls="toc-Cliente-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Cliente subsection</span>
			</button>
		
		<ul id="toc-Cliente-sublist" class="vector-toc-list">
			<li id="toc-Listar_compartilhamentos_públicos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Listar_compartilhamentos_p%C3%BAblicos">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Listar compartilhamentos públicos</span>
				</div>
			</a>
			
			<ul id="toc-Listar_compartilhamentos_públicos-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Hostnames_NetBIOS/WINS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Hostnames_NetBIOS/WINS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Hostnames NetBIOS/WINS</span>
				</div>
			</a>
			
			<ul id="toc-Hostnames_NetBIOS/WINS-sublist" class="vector-toc-list">
				<li id="toc-Desativar_o_suporte_a_NetBIOS/WINS" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Desativar_o_suporte_a_NetBIOS/WINS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Desativar o suporte a NetBIOS/WINS</span>
				</div>
			</a>
			
			<ul id="toc-Desativar_o_suporte_a_NetBIOS/WINS-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Montagem_manual" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Montagem_manual">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Montagem manual</span>
				</div>
			</a>
			
			<ul id="toc-Montagem_manual-sublist" class="vector-toc-list">
				<li id="toc-Armazenando_senhas_de_compartilhamentos" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Armazenando_senhas_de_compartilhamentos">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3.1</span>
					<span>Armazenando senhas de compartilhamentos</span>
				</div>
			</a>
			
			<ul id="toc-Armazenando_senhas_de_compartilhamentos-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Montagem_automática" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Montagem_autom%C3%A1tica">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4</span>
					<span>Montagem automática</span>
				</div>
			</a>
			
			<ul id="toc-Montagem_automática-sublist" class="vector-toc-list">
				<li id="toc-Using_NetworkManager_and_GIO/gvfs" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Using_NetworkManager_and_GIO/gvfs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.1</span>
					<span>Using NetworkManager and GIO/gvfs</span>
				</div>
			</a>
			
			<ul id="toc-Using_NetworkManager_and_GIO/gvfs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Como_uma_entrada_de_montagem" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Como_uma_entrada_de_montagem">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.2</span>
					<span>Como uma entrada de montagem</span>
				</div>
			</a>
			
			<ul id="toc-Como_uma_entrada_de_montagem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Como_unit_do_systemd" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Como_unit_do_systemd">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.3</span>
					<span>Como unit do systemd</span>
				</div>
			</a>
			
			<ul id="toc-Como_unit_do_systemd-sublist" class="vector-toc-list">
				<li id="toc-Montagem_automática_2" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Montagem_autom%C3%A1tica_2">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.3.1</span>
					<span>Montagem automática</span>
				</div>
			</a>
			
			<ul id="toc-Montagem_automática_2-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-smbnetfs" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#smbnetfs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.4</span>
					<span>smbnetfs</span>
				</div>
			</a>
			
			<ul id="toc-smbnetfs-sublist" class="vector-toc-list">
				<li id="toc-Daemon" class="vector-toc-list-item vector-toc-level-4">
			<a class="vector-toc-link" href="#Daemon">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.4.1</span>
					<span>Daemon</span>
				</div>
			</a>
			
			<ul id="toc-Daemon-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-autofs" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#autofs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.4.5</span>
					<span>autofs</span>
				</div>
			</a>
			
			<ul id="toc-autofs-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Configuração_do_gerenciador_de_arquivos" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Configura%C3%A7%C3%A3o_do_gerenciador_de_arquivos">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5</span>
					<span>Configuração do gerenciador de arquivos</span>
				</div>
			</a>
			
			<ul id="toc-Configuração_do_gerenciador_de_arquivos-sublist" class="vector-toc-list">
				<li id="toc-GNOME_Files,_Nemo,_Caja,_Thunar_e_PCManFM" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#GNOME_Files,_Nemo,_Caja,_Thunar_e_PCManFM">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.1</span>
					<span>GNOME Files, Nemo, Caja, Thunar e PCManFM</span>
				</div>
			</a>
			
			<ul id="toc-GNOME_Files,_Nemo,_Caja,_Thunar_e_PCManFM-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-KDE" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#KDE">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.2</span>
					<span>KDE</span>
				</div>
			</a>
			
			<ul id="toc-KDE-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Outros_ambientes_gráficos" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Outros_ambientes_gr%C3%A1ficos">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.5.3</span>
					<span>Outros ambientes gráficos</span>
				</div>
			</a>
			
			<ul id="toc-Outros_ambientes_gráficos-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Dicas_e_truques" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Dicas_e_truques">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Dicas e truques</span>
			</div>
		</a>
		
			<button aria-controls="toc-Dicas_e_truques-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Dicas e truques subsection</span>
			</button>
		
		<ul id="toc-Dicas_e_truques-sublist" class="vector-toc-list">
			<li id="toc-Descobrindo_compartilhamentos_de_rede" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Descobrindo_compartilhamentos_de_rede">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Descobrindo compartilhamentos de rede</span>
				</div>
			</a>
			
			<ul id="toc-Descobrindo_compartilhamentos_de_rede-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Controle_remoto_de_um_computador_Windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Controle_remoto_de_um_computador_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Controle remoto de um computador Windows</span>
				</div>
			</a>
			
			<ul id="toc-Controle_remoto_de_um_computador_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Solucionando_problemas" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Solucionando_problemas">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Solucionando problemas</span>
			</div>
		</a>
		
			<button aria-controls="toc-Solucionando_problemas-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Solucionando problemas subsection</span>
			</button>
		
		<ul id="toc-Solucionando_problemas-sublist" class="vector-toc-list">
			<li id="toc-Falha_ao_iniciar_o_servidor_Samba_SMB/CIFS" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Falha_ao_iniciar_o_servidor_Samba_SMB/CIFS">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Falha ao iniciar o servidor Samba SMB/CIFS</span>
				</div>
			</a>
			
			<ul id="toc-Falha_ao_iniciar_o_servidor_Samba_SMB/CIFS-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problemas_de_permissão_com_SELinux" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problemas_de_permiss%C3%A3o_com_SELinux">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Problemas de permissão com SELinux</span>
				</div>
			</a>
			
			<ul id="toc-Problemas_de_permissão_com_SELinux-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problemas_de_permissão_com_AppArmor" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problemas_de_permiss%C3%A3o_com_AppArmor">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Problemas de permissão com AppArmor</span>
				</div>
			</a>
			
			<ul id="toc-Problemas_de_permissão_com_AppArmor-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Dialeto_não_especificado_na_montagem" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Dialeto_n%C3%A3o_especificado_na_montagem">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.4</span>
					<span>Dialeto não especificado na montagem</span>
				</div>
			</a>
			
			<ul id="toc-Dialeto_não_especificado_na_montagem-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Impossível_sobrescrever_arquivos,_erros_de_permissão" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Imposs%C3%ADvel_sobrescrever_arquivos,_erros_de_permiss%C3%A3o">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.5</span>
					<span>Impossível sobrescrever arquivos, erros de permissão</span>
				</div>
			</a>
			
			<ul id="toc-Impossível_sobrescrever_arquivos,_erros_de_permissão-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Os_clientes_Windows_continuam_pedindo_senha_mesmo_quando_os_compartilhamentos_do_Samba_são_criados_com_permissões_de_convidado" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Os_clientes_Windows_continuam_pedindo_senha_mesmo_quando_os_compartilhamentos_do_Samba_s%C3%A3o_criados_com_permiss%C3%B5es_de_convidado">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.6</span>
					<span>Os clientes Windows continuam pedindo senha mesmo quando os compartilhamentos do Samba são criados com permissões de convidado</span>
				</div>
			</a>
			
			<ul id="toc-Os_clientes_Windows_continuam_pedindo_senha_mesmo_quando_os_compartilhamentos_do_Samba_são_criados_com_permissões_de_convidado-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problemas_de_conectividade_com_Windows_7_-_mount_error(12):_cannot_allocate_memory" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problemas_de_conectividade_com_Windows_7_-_mount_error(12):_cannot_allocate_memory">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.7</span>
					<span>Problemas de conectividade com Windows 7 - mount error(12): cannot allocate memory</span>
				</div>
			</a>
			
			<ul id="toc-Problemas_de_conectividade_com_Windows_7_-_mount_error(12):_cannot_allocate_memory-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problemas_de_conectividade_com_Windows_10_1709_e_superiores_-_&quot;Windows_cannot_access&quot;_0x80004005" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problemas_de_conectividade_com_Windows_10_1709_e_superiores_-_&quot;Windows_cannot_access&quot;_0x80004005">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.8</span>
					<span>Problemas de conectividade com Windows 10 1709 e superiores - "Windows cannot access" 0x80004005</span>
				</div>
			</a>
			
			<ul id="toc-Problemas_de_conectividade_com_Windows_10_1709_e_superiores_-_&quot;Windows_cannot_access&quot;_0x80004005-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Erro:_Failed_to_retrieve_printer_list:_NT_STATUS_UNSUCCESSFUL" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Erro:_Failed_to_retrieve_printer_list:_NT_STATUS_UNSUCCESSFUL">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.9</span>
					<span>Erro: Failed to retrieve printer list: NT_STATUS_UNSUCCESSFUL</span>
				</div>
			</a>
			
			<ul id="toc-Erro:_Failed_to_retrieve_printer_list:_NT_STATUS_UNSUCCESSFUL-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Falha_ao_compartilhar_uma_pasta" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Falha_ao_compartilhar_uma_pasta">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.10</span>
					<span>Falha ao compartilhar uma pasta</span>
				</div>
			</a>
			
			<ul id="toc-Falha_ao_compartilhar_uma_pasta-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-&quot;Nevagação&quot;_da_rede_falha_com_&quot;Failed_to_retrieve_share_list_from_server&quot;" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#&quot;Nevaga%C3%A7%C3%A3o&quot;_da_rede_falha_com_&quot;Failed_to_retrieve_share_list_from_server&quot;">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.11</span>
					<span>"Nevagação" da rede falha com "Failed to retrieve share list from server"</span>
				</div>
			</a>
			
			<ul id="toc-&quot;Nevagação&quot;_da_rede_falha_com_&quot;Failed_to_retrieve_share_list_from_server&quot;-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Protocolo_de_negociação_falhou:_NT_STATUS_INVALID_NETWORK_RESPONSE" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Protocolo_de_negocia%C3%A7%C3%A3o_falhou:_NT_STATUS_INVALID_NETWORK_RESPONSE">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.12</span>
					<span>Protocolo de negociação falhou: NT_STATUS_INVALID_NETWORK_RESPONSE</span>
				</div>
			</a>
			
			<ul id="toc-Protocolo_de_negociação_falhou:_NT_STATUS_INVALID_NETWORK_RESPONSE-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Falha_na_conexão_com_o_servidor:_(Erro_NT_STATUS_UNSUCCESSFUL)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Falha_na_conex%C3%A3o_com_o_servidor:_(Erro_NT_STATUS_UNSUCCESSFUL)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.13</span>
					<span>Falha na conexão com o servidor: (Erro NT_STATUS_UNSUCCESSFUL)</span>
				</div>
			</a>
			
			<ul id="toc-Falha_na_conexão_com_o_servidor:_(Erro_NT_STATUS_UNSUCCESSFUL)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Falha_na_conexão_com_o_servidor:_(Erro_NT_STATUS_CONNECTION_REFUSED)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Falha_na_conex%C3%A3o_com_o_servidor:_(Erro_NT_STATUS_CONNECTION_REFUSED)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.14</span>
					<span>Falha na conexão com o servidor: (Erro NT_STATUS_CONNECTION_REFUSED)</span>
				</div>
			</a>
			
			<ul id="toc-Falha_na_conexão_com_o_servidor:_(Erro_NT_STATUS_CONNECTION_REFUSED)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Falha_com_o_protocolo_de_negociação:_NT_STATUS_CONNECTION_RESET" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Falha_com_o_protocolo_de_negocia%C3%A7%C3%A3o:_NT_STATUS_CONNECTION_RESET">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.15</span>
					<span>Falha com o protocolo de negociação: NT_STATUS_CONNECTION_RESET</span>
				</div>
			</a>
			
			<ul id="toc-Falha_com_o_protocolo_de_negociação:_NT_STATUS_CONNECTION_RESET-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Erro_de_senha_quando_as_credenciais_corretas_são_informadas_(error_1326)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Erro_de_senha_quando_as_credenciais_corretas_s%C3%A3o_informadas_(error_1326)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.16</span>
					<span>Erro de senha quando as credenciais corretas são informadas (error 1326)</span>
				</div>
			</a>
			
			<ul id="toc-Erro_de_senha_quando_as_credenciais_corretas_são_informadas_(error_1326)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Mapeando_com_caracteres_reservador_do_Windows" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mapeando_com_caracteres_reservador_do_Windows">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.17</span>
					<span>Mapeando com caracteres reservador do Windows</span>
				</div>
			</a>
			
			<ul id="toc-Mapeando_com_caracteres_reservador_do_Windows-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Pasta_compartilhada_dentro_do_ambiente_gráfico_não_está_disponível_para_convidados" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Pasta_compartilhada_dentro_do_ambiente_gr%C3%A1fico_n%C3%A3o_est%C3%A1_dispon%C3%ADvel_para_convidados">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.18</span>
					<span>Pasta compartilhada dentro do ambiente gráfico não está disponível para convidados</span>
				</div>
			</a>
			
			<ul id="toc-Pasta_compartilhada_dentro_do_ambiente_gráfico_não_está_disponível_para_convidados-sublist" class="vector-toc-list">
				<li id="toc-Verifique_a_correta_configuração_do_samba" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Verifique_a_correta_configura%C3%A7%C3%A3o_do_samba">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.18.1</span>
					<span>Verifique a correta configuração do samba</span>
				</div>
			</a>
			
			<ul id="toc-Verifique_a_correta_configuração_do_samba-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Verifique_a_criação_correta_da_pasta_compartilhada" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Verifique_a_cria%C3%A7%C3%A3o_correta_da_pasta_compartilhada">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.18.2</span>
					<span>Verifique a criação correta da pasta compartilhada</span>
				</div>
			</a>
			
			<ul id="toc-Verifique_a_criação_correta_da_pasta_compartilhada-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Verifique_o_acesso_à_pasta_pelo_convidado" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Verifique_o_acesso_%C3%A0_pasta_pelo_convidado">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.18.3</span>
					<span>Verifique o acesso à pasta pelo convidado</span>
				</div>
			</a>
			
			<ul id="toc-Verifique_o_acesso_à_pasta_pelo_convidado-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Mount_error:_Host_is_down" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Mount_error:_Host_is_down">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.19</span>
					<span>Mount error: Host is down</span>
				</div>
			</a>
			
			<ul id="toc-Mount_error:_Host_is_down-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Software_caused_connection_abort" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Software_caused_connection_abort">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.20</span>
					<span>Software caused connection abort</span>
				</div>
			</a>
			
			<ul id="toc-Software_caused_connection_abort-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Problemas_de_conexão_(devido_a_erros_de_autenticação)" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Problemas_de_conex%C3%A3o_(devido_a_erros_de_autentica%C3%A7%C3%A3o)">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.21</span>
					<span>Problemas de conexão (devido a erros de autenticação)</span>
				</div>
			</a>
			
			<ul id="toc-Problemas_de_conexão_(devido_a_erros_de_autenticação)-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Windows_1709_ou_mais_recente_não_mostra_o_servidor_Samba_na_rede" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Windows_1709_ou_mais_recente_n%C3%A3o_mostra_o_servidor_Samba_na_rede">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.22</span>
					<span>Windows 1709 ou mais recente não mostra o servidor Samba na rede</span>
				</div>
			</a>
			
			<ul id="toc-Windows_1709_ou_mais_recente_não_mostra_o_servidor_Samba_na_rede-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Arquivos_IOS_não_podem_mais_ser_copiados_para_o_compartilhamento_Samba_no_Arch_Linux_começando_com_IOS_14.5" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Arquivos_IOS_n%C3%A3o_podem_mais_ser_copiados_para_o_compartilhamento_Samba_no_Arch_Linux_come%C3%A7ando_com_IOS_14.5">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.23</span>
					<span>Arquivos IOS não podem mais ser copiados para o compartilhamento Samba no Arch Linux começando com IOS 14.5</span>
				</div>
			</a>
			
			<ul id="toc-Arquivos_IOS_não_podem_mais_ser_copiados_para_o_compartilhamento_Samba_no_Arch_Linux_começando_com_IOS_14.5-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Veja_também" class="vector-toc-list-item vector-toc-level-1">
		<a class="vector-toc-link" href="#Veja_tamb%C3%A9m">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>Veja também</span>
			</div>
		</a>
		
		<ul id="toc-Veja_também-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar vector-feature-custom-font-size-clientpref--excluded">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left" title="Table of Contents">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Samba (Português)</span></h1>
							
<div id="p-lang-btn" class="vector-dropdown mw-portlet mw-portlet-lang">
	<input type="checkbox" id="p-lang-btn-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-lang-btn" class="vector-dropdown-checkbox mw-interlanguage-selector" aria-label="Go to an article in another language. Available in 6 languages">
	<label id="p-lang-btn-label" for="p-lang-btn-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive mw-portlet-lang-heading-6" aria-hidden="true"><span class="vector-icon mw-ui-icon-language-progressive mw-ui-icon-wikimedia-language-progressive"></span>

<span class="vector-dropdown-label-text">6 languages</span>
	</label>
	<div class="vector-dropdown-content">

		<div class="vector-menu-content">
			
			<ul class="vector-menu-content-list">
				
				<li class="interlanguage-link interwiki-de mw-list-item"><a href="https://wiki.archlinux.de/title/Samba" title="Samba – Deutsch" lang="de" hreflang="de" data-title="Samba" data-language-autonym="Deutsch" data-language-local-name="Deutsch" class="interlanguage-link-target"><span>Deutsch</span></a></li>
<li class="interlanguage-link interwiki-en mw-list-item"><a href="../en/Samba.html" title="Samba – English" lang="en" hreflang="en" data-title="Samba" data-language-autonym="English" data-language-local-name="English" class="interlanguage-link-target"><span>English</span></a></li>
<li class="interlanguage-link interwiki-hu mw-list-item"><a href="../hu/Samba.html" title="Samba – magyar" lang="hu" hreflang="hu" data-title="Samba" data-language-autonym="Magyar" data-language-local-name="magyar" class="interlanguage-link-target"><span>Magyar</span></a></li>
<li class="interlanguage-link interwiki-ja mw-list-item"><a href="https://wiki.archlinux.jp/index.php/Samba" title="Samba – 日本語" lang="ja" hreflang="ja" data-title="Samba" data-language-autonym="日本語" data-language-local-name="日本語" class="interlanguage-link-target"><span>日本語</span></a></li>
<li class="interlanguage-link interwiki-ru mw-list-item"><a href="../ru/Samba.html" title="Samba – русский" lang="ru" hreflang="ru" data-title="Samba" data-language-autonym="Русский" data-language-local-name="русский" class="interlanguage-link-target"><span>Русский</span></a></li>
<li class="interlanguage-link interwiki-zh-hans mw-list-item"><a href="https://wiki.archlinuxcn.org/wiki/Samba" title="Samba – 中文（简体）" lang="zh-Hans" hreflang="zh-Hans" data-title="Samba" data-language-autonym="中文（简体）" data-language-local-name="中文（简体）" class="interlanguage-link-target"><span>中文（简体）</span></a></li>
			</ul>
			
		</div>

	</div>
</div>
</header>
				<div class="vector-column-end vector-feature-custom-font-size-clientpref--excluded">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="pt" dir="ltr">
<div class="archwiki-template-meta-related-articles">
<p>Related articles</p>
<ul>
<li><a href="../en/Active_Directory_integration.html" class="mw-redirect" title="Active Directory Integration">Active Directory Integration</a></li>
<li><a href="../en/Samba/Active_Directory_domain_controller.html" title="Samba/Active Directory domain controller">Samba/Active Directory domain controller</a></li>
<li><a href="../en/NFS.html" title="NFS">NFS</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.samba.org/">Samba</a> é a suíte de programas padrão de interoperabilidade do Windows com Linux e Unix. Desde 1992, Samba vem provendo seguros, estáveis e rápidos serviços de arquivo e impressão para todos os clientes usando o protocolo <a href="https://en.wikipedia.org/wiki/Server_Message_Block" class="extiw" title="wikipedia:Server Message Block">SMB/CIFS</a>, como todas as versões do DOS e Windows, OS/2, Linux e muitos outros.
</p>
<p>Para compartilhar arquivos através do Samba, veja a seção <a href="#Servidor">#Servidor</a>; para acessar arquivos compartilhados através do Samba em outras máquinas, veja a seção <a href="#Cliente">#Cliente</a>.
</p>
<meta property="mw:PageProp/toc">
<div class="mw-heading mw-heading2"><h2 id="Servidor">Servidor</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Instalação">
<span id="Instala.C3.A7.C3.A3o"></span>Instalação</h3></div>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span>.
</p>
<p>Samba é configurado pelo arquivo de configuração <code>/etc/samba/smb.conf</code>, o qual é extensivamente documentado em <span class="plainlinks archwiki-template-man" title="$ man 5 smb.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smb.conf.5">smb.conf(5)</a></span>.
</p>
<p>Pelo fato do pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span> não prover este arquivo, um deverá ser criado <b>antes</b> de iniciar o serviço <code>smb.service</code>.
</p>
<p>Um exemplo documentado <code>smb.conf.default</code> do <a rel="nofollow" class="external text" href="https://git.samba.org/samba.git/?p=samba.git;a=blob_plain;f=examples/smb.conf.default;hb=HEAD">repositório git do Samba</a> pode ser usado para configurar <code>/etc/samba/smb.conf</code>. 
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> 
<ul>
<li>A configuração padrão ajusta <code>log file</code> para uma localização não gravável, o que irá causar erros - aplica-se uma das seguintes soluções:
<ul>
<li>Altere a localização do arquivo de log para um caminho gravável: <code>log file = /var/log/samba/%m.log</code>
</li>
<li>Altere o log para uma solução de back-end sem arquivo: <code>logging = syslog</code> com <code>syslog only = yes</code>, ou use <code>logging = systemd</code>
</li>
</ul>
</li>
<li>Se necessário; o <code>workgroup</code> especificado na seção <code>[global]</code> precisa equivaler ao grupo de trabalho do Windows (por padrão <code>WORKGROUP</code>).</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica</strong> Sempre que você modificar o arquivo <code>smb.conf</code>, execute o comando <span class="plainlinks archwiki-template-man" title="$ man 1 testparm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/testparm.1">testparm(1)</a></span> para verificar por erros de sintaxe.</div>
<div class="mw-heading mw-heading4"><h4 id="Ativando_e_iniciando_serviços">
<span id="Ativando_e_iniciando_servi.C3.A7os"></span>Ativando e iniciando serviços</h4></div>
<p>Para prover compartilhamento básico de arquivos via SMB, <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">ative/inicie</a> <code>smb.service</code>. Veja <span class="plainlinks archwiki-template-man" title="$ man 8 smbd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smbd.8">smbd(8)</a></span> para mais detalhes.
</p>
<p>Se você deseja tornar o seu servidor acessível via NetBIOS hostname, ajuste o nome desejado através da opção <code>netbios name</code> em <code>smb.conf</code> e <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">ative/inicie</a> <code>nmb.service</code>. Veja <span class="plainlinks archwiki-template-man" title="$ man 8 nmbd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmbd.8">nmbd(8)</a></span> para detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> <code>nmb.service</code> não é requerido. Entretanto, é necessário para acessar servidores Samba pelo hostname (por exemplo, <code>smb://hostname/</code>) para alguns hosts. Se sua rede é composta somente por máquinas executando Windows 10 ou mais recente, considere <a href="#Windows_1709_ou_mais_recente_n%C3%A3o_mostra_o_servidor_Samba_na_rede">instalar também um daemon WSD</a> para que seu servidor apareça ao visualizar o componente "Rede".</div>
<div class="mw-heading mw-heading4"><h4 id="Tornar_a_rede_detectável">
<span id="Tornar_a_rede_detect.C3.A1vel"></span>Tornar a rede detectável</h4></div>
<p><a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">Instale</a> o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=avahi">avahi</a></span>, então <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">ative/inicie</a> <code>avahi-daemon.service</code> para tornar o servidor samba detectável com <a href="../en/Avahi.html" class="mw-redirect" title="Zeroconf">Zeroconf</a>. Isto deve funcionar para a maioria dos gerenciadores de arquivos não-Windws (como Finder do macOS, vários gerenciadores de arquivos baseados em interface gráfica do Linux e BSD etc.)
</p>
<p>Se <code>avahi-daemon.service</code> não estiver em execução, o servidor continuará acessível, apenas não detectável, isto é, não aparecerá nos gerenciadores de arquivos, mas você poderá conectar-se ao servidor diretamente pelo IP ou domínio.
</p>
<p>O Windows Explorer depende do protocolo WS-Discovery; veja <a href="#Windows_1709_ou_mais_recente_n%C3%A3o_mostra_o_servidor_Samba_na_rede">#Windows 1709 ou mais recente não mostra o servidor Samba na rede</a>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Configurar_firewall">Configurar firewall</h4></div>
<p>Se você estiver usando um <a href="../en/Category:Firewalls.html" class="mw-redirect" title="Firewall">firewall</a>, não se esqueça de abrir as portas necessárias (normalmente 137-139 + 445). Para uma lista completa, veja <a rel="nofollow" class="external text" href="https://www.samba.org/~tpot/articles/firewall.html">uso de portas pelo Samba</a>.
</p>
<div class="mw-heading mw-heading5"><h5 id="Regra_UFW">Regra UFW</h5></div>
<p>Um perfil de aplicativo <a href="../en/Uncomplicated_Firewall.html" class="mw-redirect" title="Ufw">Ufw</a> para SMB/CIFS é incluído por padrão com a instalação padrão do UFW em <code>ufw-fileserver</code>.
</p>
<p>Permita ao Samba executar <code>ufw allow CIFS</code> como root.
</p>
<p>Caso tenha excluído o perfil, crie/edite <code>/etc/ufw/applications.d/samba</code> e adicione o seguinte conteúdo:
</p>
<pre>[Samba]
title=LanManager-like file and printer server for Unix
description=The Samba software suite is a collection of programs that implements the SMB/CIFS protocol for unix systems, allowing you to serve files and printers to Windows, NT, OS/2 and DOS clients. This protocol is sometimes also referred to as the LanManager or NetBIOS protocol.
ports=137,138/udp|139,445/tcp
</pre>
<p>Em seguida, carregue o perfil no UFW executando <code>ufw app update Samba</code> como root.
</p>
<p>Então finalmente dê permissão ao Samba executando <code>ufw allow Samba</code> como root.
</p>
<div class="mw-heading mw-heading5"><h5 id="Serviço_firewalld">
<span id="Servi.C3.A7o_firewalld"></span>Serviço firewalld</h5></div>
<p>Para configurar <a href="../en/Firewalld.html" title="Firewalld">firewalld</a> para permitir Samba na zona <b>home</b>, execute:
</p>
<pre># firewall-cmd --permanent --add-service={samba,samba-client,samba-dc} --zone=home
</pre>
<p>Os três serviços listados são:
</p>
<ul>
<li>
<code>samba</code>: para compartilhar arquivos com terceiros.</li>
<li>
<code>samba-client</code>: para navegar por compartilhamentos em outras máquinas na rede.</li>
<li>
<code>samba-dc</code>: para <a href="../en/Samba/Active_Directory_domain_controller.html" title="Samba/Active Directory domain controller">Samba/Active Directory domain controller</a>.</li>
</ul>
<p><code>--permanent</code> garante que as mudanças continuem após o reinício do serviço <code>firewalld.service</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Uso">Uso</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Gerenciamento_de_usuários">
<span id="Gerenciamento_de_usu.C3.A1rios"></span>Gerenciamento de usuários</h4></div>
<p>A seguinte seção descreve como criar um banco de dados local (tdbsam) de usuários do Samba. Para autenticação de usuários e outros propósitos, Samba também pode ser vinculado a um domínio do Active Directory, pode servir como um controlador de domínio do Active Directory ou pode ser usado com um servidor LDAP.
</p>
<div class="mw-heading mw-heading5"><h5 id="Adicionando_um_usuário">
<span id="Adicionando_um_usu.C3.A1rio"></span>Adicionando um usuário</h5></div>
<p>Samba requer uma conta de usuário Linux - você poderá usar uma existente ou criar <a href="../pt/Users_and_groups.html#Gerenciamento_de_usu%C3%A1rio" title="Users and groups (Português)">uma nova</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> O <a href="../pt/Users_and_groups.html" class="mw-redirect" title="Usuário">usuário</a>/<a href="../pt/Users_and_groups.html#Gerenciamento_de_grupo" title="Users and groups (Português)">grupo</a> <i>nobody</i> já deve existir no sistema, é usado como padrão <code>guest account</code> e poderá ser usado para compartilhamentos contendo <code>guest ok = yes</code>, evitando assim a necessidade de login do usuário nesse compartilhamento.</div>
<p>Embora o nome de usuário seja compartilhado com o sistema Linux, o Samba usa uma senha separada daquela das contas de usuário do Linux. Substitua <code>samba_user</code> com a conta de usuário Samba escolhida:
</p>
<pre># smbpasswd -a <i>samba_user</i>
</pre>
<p>Dependendo da <a rel="nofollow" class="external text" href="https://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html#SERVERROLE">função do servidor</a>, <a href="../pt/File_permissions_and_attributes.html" title="File permissions and attributes (Português)">permissões de arquivo e atributos</a> existentes podem precisar ser alterados para a conta de usuário do Samba.
</p>
<p>Se você deseja que o novo usuário tenha permissão apenas para acessar remotamente os compartilhamentos do servidor de arquivos através do Samba, você pode restringir outras opções de login：
</p>
<ul>
<li>disabling shell - <code>usermod --shell /usr/bin/nologin --lock <i>samba_user</i></code>
</li>
<li>disabling SSH logons - edit <code>/etc/ssh/sshd_config</code>, change option <code>AllowUsers</code>
</li>
</ul>
<p>Veja também <a href="../pt/Security.html" title="Security (Português)">segurança</a> para aumentar a segurança do seu sistema.
</p>
<div class="mw-heading mw-heading5"><h5 id="Listando_usuários">
<span id="Listando_usu.C3.A1rios"></span>Listando usuários</h5></div>
<p>Usuários do Samba podem ser listados usando o comando <span class="plainlinks archwiki-template-man" title="$ man 8 pdbedit"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/pdbedit.8">pdbedit(8)</a></span>:
</p>
<pre># pdbedit -L -v
</pre>
<div class="mw-heading mw-heading5"><h5 id="Alterando_senha_do_usuário">
<span id="Alterando_senha_do_usu.C3.A1rio"></span>Alterando senha do usuário</h5></div>
<p>Para alterar uma senha do usuário, use <code>smbpasswd</code>:
</p>
<pre># smbpasswd <i>samba_user</i>
</pre>
<div class="mw-heading mw-heading4"><h4 id="Criando_um_compartilhamento_anônimo">
<span id="Criando_um_compartilhamento_an.C3.B4nimo"></span>Criando um compartilhamento anônimo</h4></div>
<p>1. Crie um usuário Linux para o qual os usuários anônimos do Samba serão mapeados.
</p>
<pre># useradd guest -s /bin/nologin
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> O nome de usuário pode ser qualquer username válido em Linux, não apenas "guest". Este usuário não precisa ser um usuário do Samba.</div>
<p>2. Adicione o seguinte ao <code>/etc/samba/smb.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[global]
security = user
map to guest = bad user
guest account = guest

[guest_share]
    comment = guest share
    path = /tmp/
    public = yes
    only guest = yes
    writable = yes
    printable = no</pre>
<p>Usuários anônimos serão agora mapeados ao usuário Linux <code>guest</code> e terão a capacidade de acessar quaisquer diretórios definidos em <code>guest_share.path</code>, o qual é configurado para ser <code>/tmp/</code> no exemplo acima.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> O nome de compartilhamento não precisa ter "guest" nele. Pode ser qualquer nome de compartilhamento válido para o Samba.</div>
<p>Certifique-se de que o usuário Linux <code>guest</code> possui as permissões apropriadas para acessar arquivos em <code>guest_share.path</code>.
</p>
<p>Além disso, certifique-se de que os compartilhamentos foram definidos adequadamente de acordo com a seção <i>Share Definitions</i> de <a rel="nofollow" class="external text" href="https://git.samba.org/samba.git/?p=samba.git;a=blob_plain;f=examples/smb.conf.default;hb=HEAD">smb.conf.default</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Ativar_seguimento_de_links_simbólicos">
<span id="Ativar_seguimento_de_links_simb.C3.B3licos"></span>Ativar seguimento de links simbólicos</h3></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção</strong> Ativar a opção <code>follow symlinks</code> pode ser um risco de segurança.</div>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[global]
   follow symlinks = yes
   wide links = yes
   unix extensions = no</pre>
<p>Então, <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">reinicie</a> <code>smb.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Ao usar <a href="../en/AppArmor.html" title="AppArmor">AppArmor</a>, caso o link simólico aponte para um diretório fora do diretório home do usuário ou ao diretório <a href="#Ativar_compartilhamentos_de_usu%C3%A1rio">usershare</a>, então você precisará <a href="#Problemas_de_permiss%C3%A3o_com_AppArmor">modificar as permissões do perfil AppArmor</a>.</div>
<div class="mw-heading mw-heading3"><h3 id="Configuração_avançada">
<span id="Configura.C3.A7.C3.A3o_avan.C3.A7ada"></span>Configuração avançada</h3></div>
<div class="mw-heading mw-heading4"><h4 id="Ativar_compartilhamentos_de_usuário">
<span id="Ativar_compartilhamentos_de_usu.C3.A1rio"></span>Ativar compartilhamentos de usuário</h4></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Este recurso é opcional. Pule esta seção caso você não necessite dela.</div>
<p>Compartilhamentos de usuário é um recurso que dá a usuários não-root a capacidade de adicionar, modificar e excluir suas próprias definições de compartilhamento. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 smb.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smb.conf.5#USERSHARES">smb.conf(5) § USERSHARES</a></span>.
</p>
<ol>
<li>Crie um diretório para compartilhamentos de usuário: <pre># mkdir /var/lib/samba/usershares</pre>
</li>
<li>Crie um <a href="../pt/Users_and_groups.html#Gerenciamento_de_grupo" class="mw-redirect" title="Grupo de usuários">grupo de usuários</a>: <pre># groupadd -r sambashare</pre>
</li>
<li>Altere o proprietário do diretório para <code>root</code> e o grupo para <code>sambashare</code>: <pre># chown root:sambashare /var/lib/samba/usershares</pre>
</li>
<li>Altere as permissões do diretório <code>usershares</code> para que os usuários do grupo <code>sambashare</code> possam criar arquivos. Este comando também ajusta o <a href="https://en.wikipedia.org/wiki/Sticky_bit" class="extiw" title="wikipedia:Sticky bit">sticky bit</a>, o qual é importante para prevenir que usuários excluam compartilhamentos de outros usuários: <pre># chmod 1770 /var/lib/samba/usershares</pre>
</li>
</ol>
<p>Ajuste os seguintes parâmetros no arquivo de configuração <code>smb.conf</code>: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  usershare path = /var/lib/samba/usershares
  usershare max shares = 100
  usershare allow guests = yes
  usershare owner only = yes</pre>
<p>Adicione o usuário ao grupo <i>sambashare</i>. Substitua <code><i>your_username</i></code> pelo nome de seu usuário:
</p>
<pre># gpasswd sambashare -a <i>your_username</i>
</pre>
<p><a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">Reinicie</a> os serviços <code>smb.service</code> e <code>nmb.service</code>.
</p>
<p>Faça logout e login novamente.
</p>
<p>Se desejar compartilhar caminhos dentro de seu diretório home, você deve torná-lo acessível para o grupo <i>others</i>.
</p>
<p>Na interface gráfica, você pode usar <a href="../en/Thunar.html" title="Thunar">Thunar</a> ou <a href="../en/Dolphin.html" title="Dolphin">Dolphin</a> - clique com o botão direito em qualquer diretório e compartilhe-o na rede. 
</p>
<p>Na linha de comando, use um dos seguintes comandos, substituindo o que está em itálico <i>sharename</i>, <i>user</i>, ... :
</p>
<pre># net usershare add <i>sharename</i> <i>abspath</i> [<i>comment</i>] [<i>user</i>:{R|D|F}] [guest_ok={y|n}]
# net usershare delete <i>sharename</i>
# net usershare list <i>wildcard-sharename</i>
# net usershare info <i>wildcard-sharename</i>
</pre>
<div class="mw-heading mw-heading4"><h4 id="Ajustar_e_forçar_permissões">
<span id="Ajustar_e_for.C3.A7ar_permiss.C3.B5es"></span>Ajustar e forçar permissões</h4></div>
<p>Permissões podem ser aplicadas para ambos servidor e compartilhamentos:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  ;inherit owner = unix only ; Inherit ownership of the parent directory for new files and directories
  ;inherit permissions = yes ; Inherit permissions of the parent directory for new files and directories
  create mask = 0664
  directory mask = 2755
  force create mode = 0644
  force directory mode = 2755
  ...

[media]
  comment = Media share accessible by <i>greg</i> and <i>pcusers</i>
  path = <i>/path/to/media</i>
  valid users = <i>greg @pcusers</i>
  force group = <i>+pcusers</i>
  public = no
  writable = yes
  create mask = 0664
  directory mask = 2775
  force create mode = 0664
  force directory mode = 2775

[public]
  comment = Public share where <i>archie</i> has write access
  path = <i>/path/to/public</i>
  public = yes
  read only = yes
  write list = <i>archie</i>
  printable = no

[guests]
  comment = Allow all users to read/write
  path = <i>/path/to/guests</i>
  public = yes
  only guest = yes
  writable = yes
  printable = no</pre>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 5 smb.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smb.conf.5">smb.conf(5)</a></span> para uma visão geral de possíveis bandeiras de permissão e configurações.
</p>
<div class="mw-heading mw-heading4"><h4 id="Restringir_protocolos_para_maior_segurança">
<span id="Restringir_protocolos_para_maior_seguran.C3.A7a"></span>Restringir protocolos para maior segurança</h4></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção</strong> Por padrão, versões do Samba anteriores a 4.11 permitem conexões usando o desatualizado e inseguro protocolo SMB1. Ao usar uma dessas versões do Samba, é altamente recomendável configurar <code>server min protocol = SMB2_02</code> para proteger seu sistema de ataques de ransonware. Em versões do Samba 4.11 e mais novas, SMB2 é o protocolo padrão, portanto nenhuma alteração será necessária.</div>
<p><a href="../pt/Help:Reading.html#Acrescentar,_adicionar,_criar,_editar" title="Help:Reading (Português)">Acrescente</a> <code>server min protocol</code> e <code>server max protocol</code> em <code>/etc/samba/smb.conf</code> para forçar o uso de um protocolo mínimo e máximo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  server min protocol = SMB2_02
  ; server max protocol = SMB3</pre>
<p>Veja <code>server max protocol</code> em <span class="plainlinks archwiki-template-man" title="$ man 5 smb.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smb.conf.5">smb.conf(5)</a></span> para uma visão geral de protocolos suportados.
</p>
<p>Para compatibilidade com clientes e/ou servidores mais antigos, você pode precisar definir <code>client min protocol = CORE</code> ou <code>server min protocol = CORE</code>, mas observe que isto torna o seu sistema mais vulnerável a <i>exploits</i> no SMB1 incluindo ataques de ransonware.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica</strong> Use <code>server min protocol = SMB3_00</code> quando clientes devem apenas conectar-se usando o mais recente protocolo SMB3, por exemplo, clientes usando Windows 8 e mais recentes.</div>
<p><a href="#Montagem_manual">Clientes</a> usando <code>mount.cifs</code> podem necessitar que seja especificado o <code>vers=*</code> correto, por exemplo:
</p>
<pre># mount -t cifs //<i>SERVER</i>/<i>sharename</i> /mnt/<i>mountpoint</i> -o username=<i>username</i>,password=<i>password</i>,iocharset=<i>utf8</i>,vers=<i>3.1.1</i>
</pre>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 8 mount.cifs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mount.cifs.8">mount.cifs(8)</a></span> para mais informações.
</p>
<div class="mw-heading mw-heading4"><h4 id="Usar_criptografia_de_transporte_SMB_nativa">Usar criptografia de transporte SMB nativa</h4></div>
<p>A criptografia de transporte SMB nativa está disponível na versão SMB 3.0 ou mais recente. Os clientes que oferecem suporte a esse tipo de criptografia incluem Windows 8 e mais recente, Windows server 2012 e mais recente e smbclient do Samba 4.1 e mais recente.
</p>
<p>Para usar a criptografia de transporte SMB nativa por padrão, defina o parâmetro <code>server smb encrypt</code> globalmente e/ou por compartilhamento. Valores possíveis são <code>off</code>, <code>enabled</code> (valor padrão), <code>desired</code>, ou <code>required</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  server smb encrypt = desired</pre>
<p>Para configurar a criptografia no lado do cliente, use a opção <code>client smb encrypt</code>.
</p>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 5 smb.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smb.conf.5">smb.conf(5)</a></span> para maiores informações, especialmente os parágrafos <i>Effects for SMB1</i> e <i>Effects for SMB2</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica</strong> Ao <a href="#Montagem_manual">montar</a> um compartilhamento, especifique a opção de montagem <code>seal</code> para forçaro uso de criptografia.</div>
<div class="mw-heading mw-heading4"><h4 id="Desativar_compartilhamento_de_impressora">Desativar compartilhamento de impressora</h4></div>
<p>Por padrão, o Samba compartilha impressoras configuradas usando <a href="../en/CUPS.html" title="CUPS">CUPS</a>.
</p>
<p>Se você não quiser que as impressoras sejam compartilhadas, use as seguintes configurações:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  load printers = no
  printing = bsd
  printcap name = /dev/null
  disable spoolss = yes
  show add printer wizard = no</pre>
<div class="mw-heading mw-heading4"><h4 id="Bloquear_certas_extensões_de_arquivo_em_um_compartilhamento_do_Samba">
<span id="Bloquear_certas_extens.C3.B5es_de_arquivo_em_um_compartilhamento_do_Samba"></span>Bloquear certas extensões de arquivo em um compartilhamento do Samba</h4></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Definir este parâmetro afetará o desempenho do Samba, pois ele será forçado a verificar todos os arquivos e diretórios para uma correspondência à medida que são verificados.</div>
<p>O Samba oferece uma opção para bloquear arquivos com determinados padrões, como extensões de arquivo. Esta opção pode ser usada para evitar a disseminação de vírus ou para dissuadir os usuários de desperdiçar espaço com determinados arquivos. Mais informações sobre esta opção podem ser encontradas em <span class="plainlinks archwiki-template-man" title="$ man 5 smb.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smb.conf.5">smb.conf(5)</a></span>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[myshare]
  comment = Private
  path = /mnt/data
  read only = no
  veto files = /*.exe/*.com/*.dll/*.bat/*.vbs/*.tmp/*.mp3/*.avi/*.mp4/*.wmv/*.wma/</pre>
<div class="mw-heading mw-heading4"><h4 id="Melhorar_o_desempenho">Melhorar o desempenho</h4></div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção</strong> Cuidado, isso pode levar a problemas de corrupção/conexão e potencialmente prejudicar sua pilha TCP/IP.</div>
<p>As configurações padrão devem ser suficientes para a maioria dos usuários. No entanto, definir 'socket options' corretamente poderá melhorar o desempenho, mas errar pode torná-lo mais lento. Teste o efeito antes de fazer grandes alterações.
</p>
<p>Leia <span class="plainlinks archwiki-template-man" title="$ man 5 smb.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smb.conf.5">smb.conf(5)</a></span> no manual antes de aplicar quaisquer opções listadas abaixo.
</p>
<p>As seguintes configurações deverão ser <a href="../pt/Help:Reading.html#Acrescentar,_adicionar,_criar,_editar" title="Help:Reading (Português)">acrescentadas</a> à seção <code>[global]</code> de <code>/etc/samba/smb.conf</code>.
</p>
<p>Definir <i>deadtime</i> é útil para impedir que os recursos de um servidor sejam esgotados por um grande número de conexões inativas:
</p>
<pre>deadtime = 30
</pre>
<p>O uso de <i>sendfile</i> pode tornar o uso mais eficiente das CPUs do sistema e fazer com que o Samba seja mais rápido:
</p>
<pre>use sendfile = yes
</pre>
<p>Definir um tamanho mínimo de <i>receivefile</i>  permite gravações de cópia zero diretamente dos buffers de soquete de rede no cache de buffer do sistema de arquivos (se disponível). Pode melhorar o desempenho, mas o teste do usuário é recomendado:
</p>
<pre>min receivefile size = 16384
</pre>
<p>Aumentar o tamanho dos buffers de recebimento/envio e as bandeiras de otimização de soquete podem ser úteis para melhorar o rendimento. Recomenda-se testar cada bandeira separadamente, pois pode causar problemas em algumas redes:
</p>
<pre>socket options = IPTOS_LOWDELAY TCP_NODELAY IPTOS_THROUGHPUT SO_RCVBUF=131072 SO_SNDBUF=131072
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Ajustes na interface de rede podem ser necessários para que algumas opções funcionem, consulte <a href="../en/Sysctl.html#Networking" title="Sysctl">Sysctl#Networking</a>.</div>
<div class="mw-heading mw-heading4"><h4 id="Ativar_acesso_para_dispositivos/clientes_antigos">
<span id="Ativar_acesso_para_dispositivos.2Fclientes_antigos"></span>Ativar acesso para dispositivos/clientes antigos</h4></div>
<p>Últimas versões do Samba oferecem métodos de autenticação mais antigos e protocolos que continuam sendo usados por clientes antigos (câmeras de vigilância , etc). Estes dispositivos normalmente requerem que o servidor do Samba permita autenticação NTMLv1 e a versão do protocolo NT1, conhecida como CIFS. Para que estes dispositivos trabalhem com a última versão do Samba, você precisa adicionar estes dois parâmetros de configuração dentro da seção <code>[global]</code>:
</p>
<pre>server min protocol = NT1
ntlm auth = yes
</pre>
<p>O acesso anônimo/convidado a um comopartilhamento requer apenas o primeiro parâmetro. Se o dispositivo antigo irá acessar com usuário e senha, você precisará também adicionar a segunda linha.
</p>
<div class="mw-heading mw-heading4"><h4 id="Ativar_busca_Spotlight">Ativar busca Spotlight</h4></div>
<p>Spotlight permite que os clientes suportados (por exemplo, MacOS Finder) para rapidamente procurar por arquivos compartilhados.
</p>
<p>Instale e inicie/ative <a href="../en/OpenSearch.html" title="OpenSearch">OpenSearch</a>. Instale <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/fs2es-indexer/">fs2es-indexer</a></span><sup><small>AUR</small></sup>, configure os diretórios que deseja que sejam indexados  em <code>/etc/fs2es-indexer/config.yml</code> e inicie/ative <code>fs2es-indexer.service</code> para indexação periódica.
</p>
<p>Edite <code>smb.conf</code> como descrito na <a rel="nofollow" class="external text" href="https://wiki.samba.org/index.php/Spotlight_with_Elasticsearch_Backend#Samba">wiki do Samba</a> para ativar Spotlight por compartilhamento, e reinicie <code>smb.service</code> para aplicar as alterações.
</p>
<div class="mw-heading mw-heading2"><h2 id="Cliente">Cliente</h2></div>
<p>Instale <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span> para uma interface de linha de comando <code>ftp</code>. Veja <span class="plainlinks archwiki-template-man" title="$ man 1 smbclient"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smbclient.1">smbclient(1)</a></span> para os comandos comumente usados.
</p>
<p>Para uma alternativa leve (sem suporte para listar ações públicas, etc.), <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cifs-utils">cifs-utils</a></span> que provê <code>/usr/bin/mount.cifs</code>.
</p>
<p>Dependendo do <a href="../pt/Desktop_environment.html" title="Desktop environment (Português)">ambiente desktop</a>, métodos de interface gráfica estarão disponíveis. Veja <a href="#Configura%C3%A7%C3%A3o_do_gerenciador_de_arquivos">#Configuração do gerenciador de arquivos</a> para uso com um gerenciador de arquivos.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> 
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span> requer um arquivo <code>/etc/samba/smb.conf</code> (veja <a href="#Instala%C3%A7%C3%A3o">#Instalação</a>), o qual você pode criar como um arquivo vazio usando o utilitário <code>touch</code>.</li>
<li>Após a instalação de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cifs-utils">cifs-utils</a></span> ou <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span>, carregue o <a href="../pt/Kernel_module.html" title="Kernel module (Português)">módulo do kernel</a> <code>cifs</code> ou reinicie o sistema para prevenir falhas na montagem.</li>
</ul>
</div>
<div class="mw-heading mw-heading3"><h3 id="Listar_compartilhamentos_públicos">
<span id="Listar_compartilhamentos_p.C3.BAblicos"></span>Listar compartilhamentos públicos</h3></div>
<p>O seguinte comando lista compartilhamentos públicos em um servidor:
</p>
<pre>$ smbclient -L <i>hostname</i> -U%
</pre>
<p>Alternativamente, executar <code>$ smbtree -N</code> irá exibir um diagrama de árvore de todos os compartilhamentos. Ele usa consultas de transmissão e, portanto, não é aconselhável em uma rede com muitos computadores, mas pode ser útil para diagnosticar se você tiver o nome de compartilhamento correto. A opção <code>-N</code> (<code>-no-pass</code>) suprime a solicitação de senha.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> <code>smbtree</code> usa SMB1 e NetBIOS, o que significa que eles devem estar habilitados nos servidores e você precisa definir <code>client min protocol = NT1</code> em <code>smb.conf</code> no cliente. Caso contrário, <code>smbtree</code> emitirá uma saída vazia.</div>
<div class="mw-heading mw-heading3"><h3 id="Hostnames_NetBIOS/WINS">
<span id="Hostnames_NetBIOS.2FWINS"></span>Hostnames NetBIOS/WINS</h3></div>
<p>Clientes Samba lidam com hostnames NetBIOS automaticamente por padrão (o comportamento é controlado pela opção <code>name resolve order</code> em <code>smb.conf</code>). Outros programas (incluindo <code>mount.cifs</code>) tipicamente usam <a href="../pt/Domain_name_resolution.html#Name_Service_Switch" title="Domain name resolution (Português)">Name Service Switch</a>, o qual não lida com NetBIOS por padrão.
</p>
<p>O pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span> fornece um controlador libnss para resolver hostnames NetBIOS. Para usa-lo, <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">instale</a> juntamente com o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=samba">samba</a></span> (o qual fornece a daemon <i>winbindd</i>), <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">inicie/ative</a> <code>winbind.service</code> e adicione <code>wins</code> à linha <code>hosts</code> em <span class="plainlinks archwiki-template-man" title="$ man 5 nsswitch.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nsswitch.conf.5">nsswitch.conf(5)</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nsswitch.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
hosts: mymachines resolve [!UNAVAIL=return] files myhostname dns <b>wins</b>
...</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Devido a um erro em <code>winbind.service</code>, você pode ter que modificar o arquivo de unidade conforme descrito neste <a rel="nofollow" class="external text" href="https://bugs.launchpad.net/ubuntu/+source/samba/+bug/1789097">bug-report</a>
</div>
<p>Agora, durante a resolução de host (por exemplo, ao usar <code>mount.cifs</code> ou simplesmente <code>ping <i>netbios-name</i></code>), <i>winbindd</i> irá resolver o nome do host enviando consultas usando Serviço de Nomes NetBIOS (NBNS, também conhecido como protocolo WINS).
</p>
<p>Por padrão, ele envia uma consulta de transmissão para sua rede local. Caso tenha um servidor WINS, você poderá adicionar <code>wins server = <i>wins-server-ip</i></code> ao <code>smb.conf</code> e <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">reiniciar</a> <code>winbind.service</code>, então <i>winbindd</i> e outros clientes Samba irão enviar consultas unicast para o IP especificado.
</p>
<p>Se desejar resolver sou nome de host local (especificado na opção <code>netbios name</code> em <code>smb.conf</code>), <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">inicie/ative</a> <code>nmb.service</code>, o qual lidará com as consultas recebidas.
</p>
<p>Você pode testar a resolução WINS com <code>nmblookup</code>. Por padrão, ela transmite consultas para sua rede local independentemente da opção <code>wins server</code>.
</p>
<p>Observe que a resolução WINS exige tráfego de entrada oriundo da porta 137.
</p>
<div class="mw-heading mw-heading4"><h4 id="Desativar_o_suporte_a_NetBIOS/WINS">
<span id="Desativar_o_suporte_a_NetBIOS.2FWINS"></span>Desativar o suporte a NetBIOS/WINS</h4></div>
<p>Quando não se usa resolução de nome de host NetBIOS/WINS, pode ser preferível desativar este protocolo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  disable netbios = yes
  dns proxy = no</pre>
<p>Finalmente <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">desative</a>/<a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Pare">pare</a> <code>winbind.service</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Montagem_manual">Montagem manual</h3></div>
<p>Monte o compartilhamento usando <code>mount.cifs</code> como <code>type</code>. Nem todas as opções listadas abaixo são necessárias ou desejáveis:
</p>
<pre># mount --mkdir -t cifs //<i>SERVER</i>/<i>sharename</i> /mnt/<i>mountpoint</i> -o username=<i>username</i>,password=<i>password</i>,workgroup=<i>workgroup</i>,iocharset=<i>utf8</i>,uid=<i>username</i>,gid=<i>group</i>
</pre>
<p>As opções <code>uid</code> e <code>gid</code> correspondem ao local (por exemplo, cliente) <a href="../pt/Users_and_groups.html" class="mw-redirect" title="Usuário">usuário</a>/<a href="../pt/Users_and_groups.html#Gerenciamento_de_grupo" class="mw-redirect" title="Grupo de usuários">grupo de usuários</a> que terão acesso de leitura/gravação no caminho fornecido.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> 
<ul>
<li>Caso <code>uid</code> e <code>gid</code> usados não equivalham ao usuário do servidor, as opções <code>forceuid</code> e <code>forcegid</code> poderão ser úteis. No entanto, observe que as permissões atribuídas a um arquivo quando <code>forceuid</code> ou <code>forcegid</code> que estão em vigor podem não refletir as permissões reais (do servidor). Veja a seção <i>File And Directory Ownership And Permissions</i> em <span class="plainlinks archwiki-template-man" title="$ man 8 mount.cifs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mount.cifs.8#FILE_AND_DIRECTORY_OWNERSHIP_AND_PERMISSIONS">mount.cifs(8) § FILE AND DIRECTORY OWNERSHIP AND PERMISSIONS</a></span> para mais informações.</li>
<li>Para montar um compartilhamento Windows sem autenticação, use <code>"username=*"</code>.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção</strong> Usar <code>uid</code> e/ou <code>gid</code> como opções de montagem podem causar erros de I/O, portanto, em vez disso, é recomendável definir/verificar as <a href="../pt/File_permissions_and_attributes.html" title="File permissions and attributes (Português)">permissões e atributos de arquivos</a> corretas.</div>
<ul>
<li>
<code><i>SERVER</i></code> — O nome do servidor.</li>
<li>
<code><i>sharename</i></code> — O diretório compartilhado.</li>
<li>
<code><i>mountpoint</i></code> — O diretório local onde o compartilhamento será montado.</li>
<li>
<code>[-o <i>options</i>]</code> — Veja <span class="plainlinks archwiki-template-man" title="$ man 8 mount.cifs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mount.cifs.8">mount.cifs(8)</a></span> para mais informações.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> 
<ul>
<li>Abstenha-se de usar uma <code>/</code> seguinte. <code>//<i>SERVER</i>/<i>sharename</i><b>/</b></code> não irá funcionar.</li>
<li>Se sua montagem não ficar estável, com engasgos e travamentos, tente ativar uma versão diferente do protocolo SMB com a opção <code>vers=</code>. Por exemplo, <code>vers=2.0</code> para uma montagem do Windows Vista.</li>
<li>Se estiver excedendo o tempo limite em um compartilhamento de rede montado com cifs em um desligamento, veja <a href="../en/Wpa_supplicant.html#Problem_with_mounted_network_shares_(cifs)_and_shutdown" title="Wpa supplicant">wpa_supplicant#Problem with mounted network shares (cifs) and shutdown</a>.</li>
</ul>
</div>
<div class="mw-heading mw-heading4"><h4 id="Armazenando_senhas_de_compartilhamentos">Armazenando senhas de compartilhamentos</h4></div>
<p>Armazenar senhas em um arquivo legível por todos não é recomendado. Um método mais seguro é usar um arquivo de credenciais, por exemplo, dentro de <code>/etc/samba/credentials</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/credentials/share</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">username=<i>myuser</i>
password=<i>mypass</i></pre>
<p>Para o comando de montagem, substitua <code>username=myuser,password=mypass</code> por <code>credentials=/etc/samba/credentials/share</code>.
</p>
<p>O arquivo de credencial deve ser explicitamente legível/gravável por root:
</p>
<pre># chown root:root /etc/samba/credentials
# chmod 700 /etc/samba/credentials
# chmod 600 /etc/samba/credentials/share
</pre>
<div class="mw-heading mw-heading3"><h3 id="Montagem_automática">
<span id="Montagem_autom.C3.A1tica"></span>Montagem automática</h3></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Talvez seja necessário <a href="../pt/Systemd.html#Usando_units" title="Systemd (Português)">ativar</a> <code>systemd-networkd-wait-online.service</code> ou <code> NetworkManager-wait-online.service</code> (dependendo das suas configurações) para habilitar corretamente durante a inicialização.</div>
<div class="mw-heading mw-heading4"><h4 id="Using_NetworkManager_and_GIO/gvfs">
<span id="Using_NetworkManager_and_GIO.2Fgvfs"></span>Using NetworkManager and GIO/gvfs</h4></div>
<p><a href="../pt/NetworkManager.html#Servi%C3%A7os_de_rede_com_o_NetworkManager_dispatcher" title="NetworkManager (Português)">NetworkManager</a> pode ser configurado para executar um script quando ocorrerem alterações no status de rede do sistema. Este script usa o comando <i>gio</i> para que ele monte os compartilhamentos do Samba automaticamente, da mesma forma que seu gerenciador de arquivos faz, conforme explicado <a href="#Configura%C3%A7%C3%A3o_do_gerenciador_de_arquivos">abaixo</a>. O script também desmonta com segurança os compartilhamentos do Samba antes que a conexão de rede relevante seja desabilitada, ouvindo os eventos <code>pre-down</code> e <code>vpn-pre-down</code>. Torne o script executável <a href="../en/Help:Reading.html#Make_executable" class="mw-redirect" title="Executable">executable</a> após criá-lo.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/dispatcher.d/30-samba.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

# Find the connection UUID with "nmcli con show" in terminal.
# All NetworkManager connection types are supported: wireless, VPN, wired...
WANTED_CON_UUID="CHANGE-ME-NOW-9c7eff15-010a-4b1c-a786-9b4efa218ba9"

# The user the share will be mounted under
USER="yourusername"
# The path that appears in your file manager when you manually mount the share you want
SMB_URL="smb://servername/share"

# Get runtime user directory. If it does not exist, do nothing and just exit
XDG_RUNTIME_DIR=$(loginctl show-user --property=RuntimePath --value "$USER") || exit 0

if [ "$CONNECTION_UUID" = "$WANTED_CON_UUID" ]; then
    
    # Script parameter $1: network interface name, not used
    # Script parameter $2: dispatched event
    
    case "$2" in
        "up"|"vpn-up")
            su $USER -c "DBUS_SESSION_BUS_ADDRESS=unix:path=$XDG_RUNTIME_DIR/bus gio mount $SMB_URL"
            ;;
        "pre-down"|"vpn-pre-down")
            su $USER -c "DBUS_SESSION_BUS_ADDRESS=unix:path=$XDG_RUNTIME_DIR/bus gio mount -uf $SMB_URL"
            ;;
    esac
fi
</pre>
<p>Cria um link simbólico dentro de <code>/etc/NetworkManager/dispatcher.d/pre-down</code> para capturar os eventos <code>pre-down</code>:
</p>
<pre># ln -s /etc/NetworkManager/dispatcher.d/30-samba.sh /etc/NetworkManager/dispatcher.d/pre-down.d/30-samba.sh
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Como este script usa o barramento do usuário, ele só funcionará se o usuário tiver sessões ativas. Isso significa que o compartilhamento não será montado automaticamente após a inicialização se a conexão for estabelecida antes de você estar logado.</div>
<div class="mw-heading mw-heading4"><h4 id="Como_uma_entrada_de_montagem">Como uma entrada de montagem</h4></div>
<p>Este á um simples exemplo de uma <a href="../pt/Fstab.html" title="Fstab (Português)">entrada de montagem no fstab</a> do tipo <code>cifs</code> que requer autenticação:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">//<i>SERVER</i>/<i>sharename</i> /mnt/<i>mountpoint</i> cifs _netdev,nofail,username=<i>myuser</i>,password=<i>mypass</i> 0 0</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> 
<ul>
<li>Espaços no nome do compartilhamento deverão ser substituídos por <code>\040</code> (código ASCII para espaços, em octal). Por exemplo, <code>//<i>SERVER</i>/nome do compartilhamento</code> na linha de comando deve ser <code>//<i>SERVER</i>/nome\040do\040compartilhamento</code> em <code>/etc/fstab</code>.</li>
<li>Para permitir que os usuários o montem desde que o ponto de montagem resida em um diretório controlado pelo usuário; ou seja, dentro do diretório home, acrescente a opção de montagem <code>users</code>. A opção é user<b>s</b> (no plural). Para outros tipos de sistema de arquivos manipulados pelo mount, esta opção geralmente é <i>user</i>; sem o "<b>s</b>".</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip</strong> Use <code>x-systemd.automount</code> caso queira que eles sejam montados apenas após o acesso. Veja <a href="../pt/Fstab.html#Sistema_de_arquivos_remoto" title="Fstab (Português)">fstab (Português)#Sistema de arquivos remoto</a> para detalhes.</div>
<div class="mw-heading mw-heading4"><h4 id="Como_unit_do_systemd">Como unit do systemd</h4></div>
<p>Crie um novo arquivo <code>.mount</code> dentro de <code>/etc/systemd/system</code>, por exemplo <code>mnt-myshare.mount</code>. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.mount"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.mount.5">systemd.mount(5)</a></span> para detalhes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Certifique-se de que o nome do arquivo corresponda ao ponto de montagem que queira usar.
Por exemplo, o nome de unit <code>mnt-myshare.mount</code> somente pode ser usado se estiver montando o compartilhamento sob <code>/mnt/myshare</code>. Caso contrário, o seguinte erro ocorrerá: <code>systemd[1]: mnt-myshare.mount: Where= setting does not match unit name. Refusing.</code>.</div>
<p><code>What=</code> caminho para o compartilhamento
</p>
<p><code>Where=</code> caminho para montar o compartilhamento
</p>
<p><code>Options=</code> opções de montagem do compartilhamento
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> 
<ul>
<li>Unidades de montagem em rede adquirem automaticamente dependências <code>After</code> em <code>remote-fs-pre.target</code>, <code>network.target</code> e <code>network-online.target</code>, e ganham uma dependência <code>Before</code> em <code>remote-fs.target</code>, a menos que a opção de montagem <code>nofail</code> esteja definida. Para este último, uma unidade <code>Wants</code> é adicionada também.</li>
<li>
<a href="../pt/Help:Reading.html#Acrescentar,_adicionar,_criar,_editar" title="Help:Reading (Português)">Acrescente</a> <code>noauto</code> em <code>Options</code> para impedir a montagem automática durante a inicialização (a menos que seja puxado por alguma outra unidade).</li>
<li>Caso queira usar um nome de host para o servidor que deseja compartilhar (em vez de um endereço IP), adicione <code>nss-lookup.target</code> a <code>After</code>. Isso pode evitar erros de montagem no momento da inicialização que não surgem ao testar a unidade.</li>
</ul>
</div> 
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/mnt-myshare.mount</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Mount Share at boot

[Mount]
What=//server/share
Where=/mnt/myshare
Options=_netdev,credentials=/etc/samba/credentials/myshare,iocharset=utf8,rw
Type=cifs
TimeoutSec=30

[Install]
WantedBy=multi-user.target</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica</strong> 
<ul>
<li>Caso o sistema fique inalcançável, <a href="../pt/Help:Reading.html#Acrescentar,_adicionar,_criar,_editar" title="Help:Reading (Português)">acrescente</a> <code>ForceUnmount=true</code> em <code>[Mount]</code>, permitendo que a montagem seja forçada.</li>
<li>Se seu compartilhamento tiver grupos com acesso somente leitura, <a href="../pt/Help:Reading.html#Acrescentar,_adicionar,_criar,_editar" title="Help:Reading (Português)">acrescente</a> <code>uid=<i>username</i></code> ou <code>gid=<i>group</i></code> em <code>Options=</code>, para especificar seu usuário/grupo permitindo escrita no compartilhamento.</li>
</ul>
</div>
<p>Para usar <code>mnt-myshare.mount</code>, <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Inicie">inicie</a> a unit e <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Ative">ative</a> a mesma para que execute durante a inicialização do sistema.
</p>
<div class="mw-heading mw-heading5"><h5 id="Montagem_automática_2">
<span id="Montagem_autom.C3.A1tica_2"></span>Montagem automática</h5></div>
<p>Para automaticamente montar um compartilhamento (quando acessado, como autofs), uma maneira é usar a seguinte unit de de montagem automática:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/mnt-myshare.automount</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Automount myshare

[Automount]
Where=/mnt/myshare

[Install]
WantedBy=multi-user.target</pre>
<p><a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Desative">Desative</a>/<a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Pare">pare</a> a unit <code>mnt-myshare.mount</code> e <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Ative">ative</a>/<a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Inicie">inicie</a> <code>mnt-myshare.automount</code> para montagem automática do compartilhamento quando o caminho de montagem estiver sendo acessado.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica</strong> <a href="../pt/Help:Reading.html#Acrescentar,_adicionar,_criar,_editar" title="Help:Reading (Português)">Acrescente</a> <code>TimeoutIdleSec</code> para ativar a desmontagem automática. Veja <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.automount"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.automount.5">systemd.automount(5)</a></span> para detalhes.</div>
<div class="mw-heading mw-heading4"><h4 id="smbnetfs">smbnetfs</h4></div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> smbnetfs precisa de uma configuração de servidor Samba intacta.
Veja acima como fazer isso.</div>
<p>Primeiro, verifique se você consegue visualizar todos os compartilhamentos que você está interessado em montar:
</p>
<pre>$ smbtree -U <i>remote_user</i>
</pre>
<p>Se isso não funcionar, localize e modifique apropriadamente a seguinte linha
em <code>/etc/samba/smb.conf</code>:
</p>
<pre>domain master = auto
</pre>
<p>Agora <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">reinicie</a> <code>smb.service</code> e <code>nmb.service</code>.
</p>
<p>Se tudo funcionar como esperado, <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">instale</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbnetfs">smbnetfs</a></span>.
</p>
<p>Então, adicione a seguinte linha ao <code>/etc/fuse.conf</code>:
</p>
<pre>user_allow_other
</pre>
<p>Agora copie o diretório <code>/etc/smbnetfs/.smb</code> para o seu diretório home:
</p>
<pre>$ cp -a /etc/smbnetfs/.smb ~
</pre>
<p>Então crie um link para <code>smb.conf</code>:
</p>
<pre>$ ln -sf /etc/samba/smb.conf ~/.smb/smb.conf
</pre>
<p>Caso um usuário e senha sejam solicitados para acessar alguma das pastas do compartilhamento, edite <code>~/.smb/smbnetfs.auth</code>
para incluir uma ou mais entradas, assim:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.smb/smbnetfs.auth</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">auth			"hostname" "username" "password"
</pre>
<p>Também é possível adicionar entradas para hosts específicos a serem montados pelo smbnetfs, se necessário.
Mais detalhes podem ser encontrados em <code>~/.smb/smbnetfs.conf</code>.
</p>
<p>Se estiver usando <a href="../en/Dolphin.html" title="Dolphin">Dolphin</a> ou <a href="../en/GNOME/Files.html" class="mw-redirect" title="GNOME Files">GNOME Files</a>, talvez queira adicionar o seguinte ao <code>~/.smb/smbnetfs.conf</code> para evitar erros "disco cheio" já que smbnetfs por padrão relatará 0 bytes de espaço livre:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.smb/smbnetfs.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">free_space_size 1073741824
</pre>
<p>Ao terminar a configuração, será necessário executar
</p>
<pre>$ chmod 600 ~/.smb/smbnetfs.*
</pre>
<p>Caso contrário, smbnetfs reclamará de 'permissões de arquivo de configuração inseguras'.
</p>
<p>Finalmente, para montar sua vizinhança de rede Samba em um diretório de sua escolha, chame
</p>
<pre>$ smbnetfs <i>mount_point</i>
</pre>
<div class="mw-heading mw-heading5"><h5 id="Daemon">Daemon</h5></div>
<p>O pacote Arch Linux também mantém um modo de operação adicional em todo o sistema para smbnetfs. Para habilitá-lo, você precisa fazer as referidas modificações no diretório <code>/etc/smbnetfs/.smb</code>.
</p>
<p>Então, você podera iniciar/ativar a <a href="../pt/Daemons.html" title="Daemons (Português)">daemon</a> <code>smbnetfs</code> como o usual. O ponto de montagem de todo o sistema está em <code>/mnt/smbnet/</code>.
</p>
<div class="mw-heading mw-heading4"><h4 id="autofs">autofs</h4></div>
<p>Veja <a href="../en/Autofs.html" title="Autofs">Autofs</a> para informações sobre montagem automática baseada em kernel para Linux.
</p>
<div class="mw-heading mw-heading3"><h3 id="Configuração_do_gerenciador_de_arquivos">
<span id="Configura.C3.A7.C3.A3o_do_gerenciador_de_arquivos"></span>Configuração do gerenciador de arquivos</h3></div>
<div class="mw-heading mw-heading4"><h4 id="GNOME_Files,_Nemo,_Caja,_Thunar_e_PCManFM">
<span id="GNOME_Files.2C_Nemo.2C_Caja.2C_Thunar_e_PCManFM"></span>GNOME Files, Nemo, Caja, Thunar e PCManFM</h4></div>
<p>Para acessar compartilhamentos samba pelos gerenciadores de arquivos GNOME Files, Nemo, Caja, Thunar ou PCManFM, instale o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gvfs-smb">gvfs-smb</a></span>.
</p>
<p>Pressione <code>Ctrl+l</code> e insira <code>smb://<i>nome_do_servidor</i>/<i>compartilhamento</i></code> na barra de locais para acessar seu compartilhamento.
</p>
<p>O compartilhamento montado estará provavelmente em <code>/run/user/<i>seu_UID</i>/gvfs</code> ou <code>~/.gvfs</code> no sistema de arquivos.
</p>
<div class="mw-heading mw-heading4"><h4 id="KDE">KDE</h4></div>
<p>Aplicações do KDE (como Dolphin) tem a capacidade de navegar por compartilhamentos do Samba embutida. Use o caminho <code>smb://<i>nome_do_servidor</i>/<i>compartilhamento</i></code> para navegar pelos arquivos. Caso deseje acessar arquivos por uma aplicação que não seja do KDE, você pode instalar <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kio-fuse">kio-fuse</a></span>.
</p>
<p>Para usar uma interface gráfica nas Configurações do Sistema KDE, você precisará instalar o pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kdenetwork-filesharing">kdenetwork-filesharing</a></span>.
</p>
<div class="mw-heading mw-heading4"><h4 id="Outros_ambientes_gráficos">
<span id="Outros_ambientes_gr.C3.A1ficos"></span>Outros ambientes gráficos</h4></div>
<p>Existem vários programas úteis, mas eles podem precisar ter pacotes criados para eles. Isso pode ser feito com o sistema de compilação do pacote Arch. Uma vantagem desses outros é que eles não exigem que um ambiente específico seja instalado para suportá-los e, portanto, trazem menos bagagem.
</p>
<ul>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pyneighborhood/">pyneighborhood</a></span><sup><small>AUR</small></sup>
</li>
<li>LinNeighborhood, RUmba, xffm-samba plugin para Xffm não estão disponíveis nos repositórios oficiais ou no AUR. Como eles não são oficialmente (nem mesmo extraoficialmente suportados), eles podem estar obsoletos e poderão sequer funcionar.</li>
</ul>
<div class="mw-heading mw-heading2"><h2 id="Dicas_e_truques">Dicas e truques</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Descobrindo_compartilhamentos_de_rede">Descobrindo compartilhamentos de rede</h3></div>
<p>Se nada for conhecido sobre outros sistemas na rede local e ferramentas automatizadas como <a href="#smbnetfs">smbnetfs</a> não estiverem disponíveis, você poderá investigar manualmente os compartilhamentos do Samba.
</p>
<p>Primeiro, <a href="../pt/Help:Reading.html#Instala%C3%A7%C3%A3o_de_pacotes" class="mw-redirect" title="Instale">instale</a> os pacotes <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nmap">nmap</a></span> e <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=smbclient">smbclient</a></span>.
</p>
<p>Use <a href="../en/Nmap.html" title="Nmap">nmap</a> para varrer sua rede local para encontrar sistemas com a porta TCP 445 aberta, que é a porta usada pelo protocolo SMB. Observe que talvez seja necessário usar <code>-Pn</code> ou definir um tipo de <a href="../en/Nmap.html#Ping_scan_types" title="Nmap">varredura ping</a> personalizada (por exemplo, <code>-PS445</code>) porque sistemas Windows são geralmente protegidos por firewall.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nmap -p 445 "192.168.1.*"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Starting Nmap 7.92 ( https://nmap.org ) at 2022-03-13 12:00 UTC
Nmap scan report for 192.168.1.1
Host is up (0.0011s latency).

PORT    STATE  SERVICE
445/tcp open  microsoft-ds

Nmap scan report for 192.168.1.2
Host is up (0.00011s latency).

PORT    STATE SERVICE
445/tcp open  microsoft-ds

Nmap done: 256 IP addresses (2 hosts up) scanned in 2.45 seconds
</pre>
<p>O primeiro resultado é o outro sistema; o segundo é o cliente de onde esta verificação foi realizada.
</p>
<p>Agora você pode se conectar a esses endereços IP diretamente, mas se quiser usar nomes de host NetBIOS, você pode usar <span class="plainlinks archwiki-template-man" title="$ man 1 nmblookup"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nmblookup.1">nmblookup(1)</a></span> para verificar os nomes NetBIOS. Observe que isso não funcionará se o NetBIOS estiver desabilitado no servidor.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ nmblookup -A 192.168.1.1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Looking up status of 192.168.1.1
        PUTER           &lt;00&gt; -         B &lt;ACTIVE&gt;
        HOMENET         &lt;00&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;
        PUTER           &lt;03&gt; -         B &lt;ACTIVE&gt;
        <b>PUTER           &lt;20&gt; -         B &lt;ACTIVE&gt;</b>
        HOMENET         &lt;1e&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;
        USERNAME        &lt;03&gt; -         B &lt;ACTIVE&gt;
        HOMENET         &lt;1d&gt; -         B &lt;ACTIVE&gt;
        MSBROWSE        &lt;01&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;
</pre>
<p>Independentemente da saída, obser em <b>&lt;20&gt;</b>, que corresponde ao host com serviços abertos.
</p>
<p>Use <span class="plainlinks archwiki-template-man" title="$ man 1 smbclient"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/smbclient.1">smbclient(1)</a></span> para listar quais serviços são compartilhados nesses sistemas. Você pode usar o nome do host NetBIOS (<code>PUTER</code> neste exemplo) em vez do IP quando disponível. Se for solicitada uma senha, pressionar enter ainda deve exibir a lista:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ smbclient -L \\192.168.1.1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Sharename       Type      Comment
---------       ----      -------
MY_MUSIC        Disk
SHAREDDOCS      Disk
PRINTER$        Disk
PRINTER         Printer
IPC$            IPC       Remote Inter Process Communication

Server               Comment
---------            -------
PUTER

Workgroup            Master
---------            -------
HOMENET               PUTER
</pre>
<div class="mw-heading mw-heading3"><h3 id="Controle_remoto_de_um_computador_Windows">Controle remoto de um computador Windows</h3></div>
<p>Samba oferece uma coletânea de ferramentas para comunicação com Windows. Isso pode ser útil se o acesso a um computador Windows por meio da área de trabalho remota não for uma opção, como mostrado em alguns exemplos.
</p>
<p>Enviar o comando shutdown com comentário:
</p>
<pre>$ net rpc shutdown -C "comment" -I IPADDRESS -U USERNAME%PASSWORD
</pre>
<p>Em vez disso, um desligamento forçado pode ser invocado alterando -C com comentário por um simples -f. Para um reinício, somente adicione -r, seguida de um -C ou -f.
</p>
<p>Parar e reiniciar serviços:
</p>
<pre>$ net rpc service stop SERVICENAME -I IPADDRESS -U USERNAME%PASSWORD
</pre>
<p>Para ver todos os possíveis comandos da gama net rpc:
</p>
<pre>$ net rpc
</pre>
<div class="mw-heading mw-heading2"><h2 id="Solucionando_problemas">Solucionando problemas</h2></div>
<div class="mw-heading mw-heading3"><h3 id="Falha_ao_iniciar_o_servidor_Samba_SMB/CIFS">
<span id="Falha_ao_iniciar_o_servidor_Samba_SMB.2FCIFS"></span>Falha ao iniciar o servidor Samba SMB/CIFS</h3></div>
<p>Possíveis soluções:
</p>
<ul>
<li>Verifique erros de sintaxe no arquivo <code>smb.conf</code> com <span class="plainlinks archwiki-template-man" title="$ man 1 testparm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/testparm.1">testparm(1)</a></span>.</li>
<li>Defina permissões corretas para <code>/var/cache/samba/</code> e <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">reinicie</a> <code>smb.service</code>:</li>
</ul>
<pre># chmod 0755 /var/cache/samba/msg
</pre>
<div class="mw-heading mw-heading3"><h3 id="Problemas_de_permissão_com_SELinux">
<span id="Problemas_de_permiss.C3.A3o_com_SELinux"></span>Problemas de permissão com SELinux</h3></div>
<p><a href="../en/SELinux.html" title="SELinux">SELinux</a> não permite que o samba acesse os diretórios pessoais do usuário por padrão, para resolver isso, execute:
</p>
<pre># setsebool -P samba_enable_home_dirs 1
</pre>
<p>Similarmente, <code>samba_export_all_ro</code> e <code>samba_export_all_rw</code> fazem com que Samba seja capaz de ler ou "ler e gravar" todos os arquivos.
</p>
<div class="mw-heading mw-heading3"><h3 id="Problemas_de_permissão_com_AppArmor">
<span id="Problemas_de_permiss.C3.A3o_com_AppArmor"></span>Problemas de permissão com AppArmor</h3></div>
<p>Se estiver usando um <a href="#Criando_um_compartilhamento_an%C3%B4nimo">caminho de compartilhamento</a> localizado fora de um diretório home ou de compartilhamentos do usuário, coloque-o na lista de permissões em <code>/etc/apparmor.d/local/usr.sbin.smbd</code>. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/apparmor.d/local/usr.sbin.smbd</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">"/data/" rk,
"/data/**" lrwk,
</pre>
<div class="mw-heading mw-heading3"><h3 id="Dialeto_não_especificado_na_montagem">
<span id="Dialeto_n.C3.A3o_especificado_na_montagem"></span>Dialeto não especificado na montagem</h3></div>
<p>O cliente está usando uma versão não suportada do SMB/CIFS que é requerida pelo servidor.
</p>
<p>Veja <a href="#Restringir_protocolos_para_maior_seguran%C3%A7a">#Restringir protocolos para maior segurança</a> para mais informações.
</p>
<div class="mw-heading mw-heading3"><h3 id="Impossível_sobrescrever_arquivos,_erros_de_permissão">
<span id="Imposs.C3.ADvel_sobrescrever_arquivos.2C_erros_de_permiss.C3.A3o"></span>Impossível sobrescrever arquivos, erros de permissão</h3></div>
<div class="noprint archwiki-template-message">
<p><span class="mw-default-size" typeof="mw:File"><span><img src="../File:Inaccurate.svg" decoding="async" width="48" height="48" class="mw-file-element"></span></span><b>The factual accuracy of this article or section is disputed.</b></p>
<div>
<b>Reason:</b> Um usuário deve definir/verificar as permissões do servidor/cliente, em vez de usar sinalizadores incorretos/possivelmente inseguros. (Discuss in <a rel="nofollow" class="external text" href="../pt/Talk:Samba.html">Talk:Samba (Português)</a>)</div>
</div>
<p>Possíveis soluções:
</p>
<ul>
<li>Acrescente a opção de montagem <code>nodfs</code> à <a href="#Como_uma_entrada_de_montagem">entrada</a> no <code>/etc/fstab</code>.</li>
<li>Adicione <code>msdfs root = no</code> à seção <code>[global]</code> do <code>/etc/samba/smb.conf</code>, no servidor.</li>
</ul>
<div class="mw-heading mw-heading3"><h3 id="Os_clientes_Windows_continuam_pedindo_senha_mesmo_quando_os_compartilhamentos_do_Samba_são_criados_com_permissões_de_convidado">
<span id="Os_clientes_Windows_continuam_pedindo_senha_mesmo_quando_os_compartilhamentos_do_Samba_s.C3.A3o_criados_com_permiss.C3.B5es_de_convidado"></span>Os clientes Windows continuam pedindo senha mesmo quando os compartilhamentos do Samba são criados com permissões de convidado</h3></div>
<p>Defina <code>map to guest</code> dentro da seção <code>global</code> de <code>/etc/samba/smb.conf</code>:
</p>
<pre>map to guest = Bad Password
</pre>
<p>Se estiver usando Samba inferior a 4.10.10, use <code>Bad User</code> em vez de <code>Bad Password</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Problemas_de_conectividade_com_Windows_7_-_mount_error(12):_cannot_allocate_memory">
<span id="Problemas_de_conectividade_com_Windows_7_-_mount_error.2812.29:_cannot_allocate_memory"></span>Problemas de conectividade com Windows 7 - mount error(12): cannot allocate memory</h3></div>
<p>Um bug conhecido do Windows 7 que causa "mount error(12): cannot allocate memory" em um compartilhamento cifs perfeito no Linux, no fim das contas pode ser corrigido definindo algumas chaves de registro na caixa do Windows da seguinte maneira:
</p>
<ul>
<li>
<code>HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\LargeSystemCache</code> (set to <code>1</code>)</li>
<li>
<code>HKLM\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters\Size</code> (set to <code>3</code>)</li>
</ul>
<p>Como alternativa, inicie o prompt de comando no modo administrador e execute o seguinte:
</p>
<pre>reg add "HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management" /v "LargeSystemCache" /t REG_DWORD /d 1 /f
reg add "HKLM\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters" /v "Size" /t REG_DWORD /d 3 /f
</pre>
<p>Siga um destes procedimentos para que as configurações tenham efeito:
</p>
<ul>
<li>Reinicie o Windows</li>
<li>Reinicie o serviço de servidor via services.msc</li>
<li>A partir de um prompt de comando, execute: 'net stop lanmanserver' e 'net start lanmanserver' - O servidor irá reiniciar automaticamente depois de pará-lo.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> Uma pesquisa no Google irá revelar outro ajuste recomendando aos usuários que é adicionar uma chave modificando o tamanho "IRPStackSize". Isso é incorreto para corrigir esse problema no Windows 7. Não faça isso.</div>
<p><a rel="nofollow" class="external text" href="https://web.archive.org/web/20150819153712/http://alan.lamielle.net/2009/09/03/windows-7-nonpaged-pool-srv-error-2017/">Artigo original</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Problemas_de_conectividade_com_Windows_10_1709_e_superiores_-_&quot;Windows_cannot_access&quot;_0x80004005">
<span id="Problemas_de_conectividade_com_Windows_10_1709_e_superiores_-_.22Windows_cannot_access.22_0x80004005"></span>Problemas de conectividade com Windows 10 1709 e superiores - "Windows cannot access" 0x80004005</h3></div>
<p>Este erro afeta algumas máquinas que executam o Windows 10 versão 1709 e posterior. Não está relacionado à desativação do SMB1 nesta versão, mas ao fato de a Microsoft desabilitar logons inseguros para convidados nesta versão para alguns, mas não para outros.
</p>
<p>Para corrigir, abra o editor de Diretivas de Grupo (<code>gpedit.msc</code>). Navegue até <i>Configuração do computador\modelos administrativos\rede\Estação de trabalho Lanman &gt; Habilitar logons de convidados inseguros</i> e habilite-o.
Como alternativa, altere o seguinte valor no registro:
</p>
<pre>[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanWorkstation\Parameters]
"AllowInsecureGuestAuth"=dword:1
</pre>
<div class="mw-heading mw-heading3"><h3 id="Erro:_Failed_to_retrieve_printer_list:_NT_STATUS_UNSUCCESSFUL">Erro: Failed to retrieve printer list: NT_STATUS_UNSUCCESSFUL</h3></div>
<p>Se você é um usuário doméstico e usa o samba apenas para compartilhamento de arquivos de um servidor ou NAS, provavelmente não está interessado em compartilhar impressoras por meio dele. Nesse caso, você pode evitar que esse erro ocorra adicionando as seguintes linhas ao seu <code>/etc/samba/smb.conf</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  load printers = No
  printing = bsd
  printcap name = /dev/null
  disable spoolss = Yes</pre>
<p><a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">Reinicie</a> o serviço do samba, <code>smb.service</code>, e então verifique os logs:
</p>
<pre># cat /var/log/samba/smbd.log
</pre>
<p>e o erro não deverá mais estar aparecendo.
</p>
<div class="mw-heading mw-heading3"><h3 id="Falha_ao_compartilhar_uma_pasta">Falha ao compartilhar uma pasta</h3></div>
<p>Isso significa que enquanto você está compartilhando uma pasta do <i>Dolphin</i> (gerenciador de arquivos) e tudo parece bem no início, depois de reiniciar o <i>Dolphin</i> o ícone de compartilhamento desapareceu da pasta compartilhada, e também algumas saídas como esta do terminal (<i>Konsole</i>):
</p>
<pre>‘net usershare’ returned error 255: net usershare: usershares are currently disabled
</pre>
<p>Para corrigir isto, ative o compartilhamento do usuário conforme descrito em <a href="#Ativar_compartilhamentos_de_usu%C3%A1rio">#Ativar compartilhamentos de usuário</a>.
</p>
<div class="mw-heading mw-heading3"><h3 id="&quot;Nevagação&quot;_da_rede_falha_com_&quot;Failed_to_retrieve_share_list_from_server&quot;">
<span id=".22Nevaga.C3.A7.C3.A3o.22_da_rede_falha_com_.22Failed_to_retrieve_share_list_from_server.22"></span>"Nevagação" da rede falha com "Failed to retrieve share list from server"</h3></div>
<p>E você está usando um firewall (iptables) porque não confia na sua rede local (escola, universidade, hotel). Isso pode ser devido ao seguinte: Quando o smbclient está navegando na rede local, ele envia uma solicitação de transmissão na porta udp 137. Os servidores na rede respondem ao seu cliente, mas como o endereço de origem desta resposta é diferente do destino endereço que o iptables viu ao enviar a solicitação para a listagem, o iptables não reconhecerá a resposta como "ESTABLISHED" ou "RELATED" e, portanto, o pacote será descartado. Uma possível solução é adicionar:
</p>
<pre>iptables -t raw -A OUTPUT -p udp -m udp --dport 137 -j CT --helper netbios-ns
</pre>
<p>às definições de seu iptables.
</p>
<p>Para <a href="../en/Uncomplicated_Firewall.html" title="Uncomplicated Firewall">Uncomplicated Firewall</a>, será preciso adicionar <code>nf_conntrack_netbios_ns</code> ao final da seguinte linha em <code>/etc/default/ufw</code>
</p>
<pre>IPT_MODULES="nf_conntrack_ftp nf_nat_ftp nf_conntrack_irc nf_nat_irc"
</pre>
<p>e então executar o seguinte comando como root:
</p>
<pre>echo 1 &gt; /proc/sys/net/netfilter/nf_conntrack_helper
ufw allow CIFS
ufw reload
</pre>
<p>Para tornar esta alteração persistente às reinicializações, adicione a seguinte linha ao final de <code>/etc/ufw/sysctl.conf</code>:
</p>
<pre>net.netfilter.nf_conntrack_helper=1
</pre>
<div class="mw-heading mw-heading3"><h3 id="Protocolo_de_negociação_falhou:_NT_STATUS_INVALID_NETWORK_RESPONSE">
<span id="Protocolo_de_negocia.C3.A7.C3.A3o_falhou:_NT_STATUS_INVALID_NETWORK_RESPONSE"></span>Protocolo de negociação falhou: NT_STATUS_INVALID_NETWORK_RESPONSE</h3></div>
<p>O cliente provavelmente não tem acesso a compartilhamentos. Certifique-se de que o endereço IP dos clientes esteja na linha <code>hosts allow =</code> em <code>/etc/samba/smb.conf</code>.
</p>
<p>Um outro problema pode ser o fato de que o cliente usa uma versão de protocolo inválida. Para verificar isso, tente conectar com o <code>smbclient</code> onde você especifica a versão máxima do protocolo manualmente:
</p>
<pre>$ smbclient -U &lt;user name&gt; -L //&lt;server name&gt; -m &lt;protocol version: e. g. SMB2&gt; -W &lt;domain name&gt;
</pre>
<p>Se o comando foi bem-sucedido, crie um arquivo de configuração:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.smb/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  workgroup = &lt;domain name&gt;
  client max protocol = SMB2</pre>
<div class="mw-heading mw-heading3"><h3 id="Falha_na_conexão_com_o_servidor:_(Erro_NT_STATUS_UNSUCCESSFUL)">
<span id="Falha_na_conex.C3.A3o_com_o_servidor:_.28Erro_NT_STATUS_UNSUCCESSFUL.29"></span>Falha na conexão com o servidor: (Erro NT_STATUS_UNSUCCESSFUL)</h3></div>
<p>Você provavelmente está passando um nome de servidor errado para <code>smbclient</code>. Para descobrir o nome do servidor, execute <code>hostnamectl</code> no servidor e veja a linha "Transient hostname"
</p>
<div class="mw-heading mw-heading3"><h3 id="Falha_na_conexão_com_o_servidor:_(Erro_NT_STATUS_CONNECTION_REFUSED)">
<span id="Falha_na_conex.C3.A3o_com_o_servidor:_.28Erro_NT_STATUS_CONNECTION_REFUSED.29"></span>Falha na conexão com o servidor: (Erro NT_STATUS_CONNECTION_REFUSED)</h3></div>
<p>Certifique-se de que o servidor foi iniciado. Os diretórios compartilhados devem existir e ser acessíveis.
</p>
<div class="mw-heading mw-heading3"><h3 id="Falha_com_o_protocolo_de_negociação:_NT_STATUS_CONNECTION_RESET">
<span id="Falha_com_o_protocolo_de_negocia.C3.A7.C3.A3o:_NT_STATUS_CONNECTION_RESET"></span>Falha com o protocolo de negociação: NT_STATUS_CONNECTION_RESET</h3></div>
<p>Provavelmente o servidor está configurado para não aceitar o protocolo SMB1. Adicione a opção <code>client max protocol = SMB2</code> em <code>/etc/samba/smb.conf</code>.
Ou simplesmente passe o argumento <code>-m SMB2</code> para <code>smbclient</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Erro_de_senha_quando_as_credenciais_corretas_são_informadas_(error_1326)">
<span id="Erro_de_senha_quando_as_credenciais_corretas_s.C3.A3o_informadas_.28error_1326.29"></span>Erro de senha quando as credenciais corretas são informadas (error 1326)</h3></div>
<p><a rel="nofollow" class="external text" href="https://www.samba.org/samba/history/samba-4.5.0.html">Samba 4.5</a> possui autenticação NTLMv1 desativada por padrão. É recomendável instalar as atualizações mais recentes disponíveis em clientes e negar acesso a clientes não suportados.
</p>
<p>Se você ainda precisar de suporte para clientes muito antigos sem suporte ao NTLMV2 (por exemplo, Windows XP), é possível forçar a ativação do NTLMV1, embora isso não seja recomendável, por razões de segurança:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  lanman auth = yes
  ntlm auth = yes</pre>
<p>Se os clientes NTLMV2 não conseguirem autenticar quando o NTLMV1 tiver sido ativado, crie o seguinte arquivo no cliente:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/home/user/.smb/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  sec = ntlmv2
  client ntlmv2 auth = yes</pre>
<p>Esta mudança também afeta os compartilhamentos de samba montados com <b>mount.cifs</b>. Se após a atualização para o Samba 4.5 sua montagem falhar, adicione a opção <b>sec=ntlmssp</b> ao seu comando de montagem, por exemplo.
</p>
<pre>mount.cifs //server/share /mnt/point -o sec=ntlmssp,...
</pre>
<p>Veja a página de manual do <span class="plainlinks archwiki-template-man" title="$ man 8 mount.cifs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mount.cifs.8">mount.cifs(8)</a></span>: <b>ntlmssp</b> - Use o hash de senha NTLMv2 encapsulado como mensagem Raw NTLMSSP. O padrão nas versões principais do kernel anteriores à v3.8 era <b>sec=ntlm</b>. Na v3.8, o padrão foi alterado para <b>sec=ntlmssp</b>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Mapeando_com_caracteres_reservador_do_Windows">Mapeando com caracteres reservador do Windows</h3></div>
<p>Iniciando com o kernel 3.18, o módulo cifs usa a <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=2baa2682531ff02928e2d3904800696d9e7193db">opção "mapposix" por padrão</a>.
Ao montar um compartilhamento usando extensões unix e uma configuração padrão do Samba, arquivos e diretórios contendo um dos sete caracteres reservados do Windows <code>: \ * &lt; &gt; ? </code> estão listados, mas não podem ser acessados.
</p>
<p>Possíveis soluções são:
</p>
<ul><li>Usar a não documentada opção de montagem <code>nomapposix</code> para cifs</li></ul>
<pre># mount.cifs //server/share /mnt/point -o nomapposix
</pre>
<ul><li>Configurar o Samba para remapear o estilo de caracteres <code>mapposix</code> ("SFM", Services for Mac) para os nativos corretos usando <a rel="nofollow" class="external text" href="https://www.mankier.com/8/vfs_fruit">fruit</a>
</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  vfs objects = catia fruit
  fruit:encoding = native</pre>
<ul><li>Manualmente remapear os caracteres proibidos usando <a rel="nofollow" class="external text" href="https://www.mankier.com/8/vfs_catia">catia</a>
</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
  vfs objects = catia
  catia:mappings = 0x22:0xf022, 0x2a:0xf02a, 0x2f:0xf02f, 0x3a:0xf03a, 0x3c:0xf03c, 0x3e:0xf03e, 0x3f:0xf03f, 0x5c:0xf05c, 0x7c:0xf07c, 0x20:0xf020</pre>
<p>A última abordagem (usando catia ou fruit) tem a desvantagem de filtrar arquivos com caracteres não imprimíveis.
</p>
<div class="mw-heading mw-heading3"><h3 id="Pasta_compartilhada_dentro_do_ambiente_gráfico_não_está_disponível_para_convidados">
<span id="Pasta_compartilhada_dentro_do_ambiente_gr.C3.A1fico_n.C3.A3o_est.C3.A1_dispon.C3.ADvel_para_convidados"></span>Pasta compartilhada dentro do ambiente gráfico não está disponível para convidados</h3></div>
<p>Esta seção pressupõe:
</p>
<ol>
<li>Compartilhamentos do usuário são configurados seguindo a <a href="#Ativar_compartilhamentos_de_usu%C3%A1rio">seção anterior</a>
</li>
<li>Uma pasta compartilhada foi criada como um usuário não root da interface gráfica</li>
<li>O acesso de convidados foi definido para a pasta compartilhada durante a criação</li>
<li>O serviço Samba foi reiniciado pelo menos uma vez desde a última modificação do arquivo <code>/etc/samba/smb.conf</code>
</li>
</ol>
<p>Apenas para fins de esclarecimento, nas seguintes subseções assume-se:
</p>
<ul>
<li>A pasta compartilhada está localizada dentro do caminho do diretório inicial do usuário (<code>/home/yourUser/Shared</code>)</li>
<li>O nome da pasta compartilhada é <i>MySharedFiles</i>
</li>
<li>O acesso de convidado é somente leitura.</li>
<li>Os usuários do Windows acessarão o conteúdo da pasta compartilhada sem o prompt de login</li>
</ul>
<div class="mw-heading mw-heading4"><h4 id="Verifique_a_correta_configuração_do_samba">
<span id="Verifique_a_correta_configura.C3.A7.C3.A3o_do_samba"></span>Verifique a correta configuração do samba</h4></div>
<p>Execute o seguinte comando em um terminal para testar a correção do arquivo de configuração:
</p>
<pre>$ testparm
</pre>
<div class="mw-heading mw-heading4"><h4 id="Verifique_a_criação_correta_da_pasta_compartilhada">
<span id="Verifique_a_cria.C3.A7.C3.A3o_correta_da_pasta_compartilhada"></span>Verifique a criação correta da pasta compartilhada</h4></div>
<p>Execute os seguintes comandos a partir de um terminal:
</p>
<pre>$ cd /var/lib/samba/usershare
$ ls
</pre>
<p>Se tudo estiver bem, você notará um arquivo chamado <code>mysharedfiles</code>
</p>
<p>Leia o conteúdo do arquivo usando o seguinte comando:
</p>
<pre>$ cat mysharedfiles
</pre>
<p>A saída do terminal deve exibir algo assim:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/var/lib/samba/usershare/mysharedfiles</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">path=/home/yourUser/Shared
comment=
usershare_acl=S-1-1-0:r
guest_ok=y
sharename=MySharedFiles</pre>
<div class="mw-heading mw-heading4"><h4 id="Verifique_o_acesso_à_pasta_pelo_convidado">
<span id="Verifique_o_acesso_.C3.A0_pasta_pelo_convidado"></span>Verifique o acesso à pasta pelo convidado</h4></div>
<p>Execute o seguinte comando a partir de um terminal. Se for solicitada uma senha, basta pressionar Enter:
</p>
<pre>$ smbclient -L localhost
</pre>
<p>Se tudo estiver bem, MySharedFiles deve ser exibido na coluna <code>Sharename</code>
</p>
<p>Execute o seguinte comando para acessar a pasta compartilhada como convidado (login anônimo)
</p>
<pre>$ smbclient -N //localhost/MySharedFiles
</pre>
<p>Se tudo estiver bem, o prompt do cliente samba será exibido:
</p>
<pre>smb: \&gt;
</pre>
<p>No prompt do samba, verifique se o convidado pode listar o conteúdo do diretório:
</p>
<pre>smb: \&gt; ls
</pre>
<p>Se o erro <code>NTFS_STATUS_ACCESS_DENIED</code> for exibido, o problema provavelmente está nas permissões do diretório Unix. Certifique-se de que seu usuário do samba tenha acesso à pasta e a todas as pastas pai. Você pode testar isso usando sudo no usuário e tentar listar o diretório de montagem e todos os seus pais.
</p>
<div class="mw-heading mw-heading3"><h3 id="Mount_error:_Host_is_down">Mount error: Host is down</h3></div>
<p>Este erro pode ser visto ao montar compartilhamentos de servidores Synology NAS. Use a opção de montagem <code>vers=1.0</code> para resolvê-lo.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota</strong> A versão 1 do SMB é conhecida por ter vulnerabilidades de segurança e foi usada em ataques de ransomware bem-sucedidos.</div>
<div class="mw-heading mw-heading3"><h3 id="Software_caused_connection_abort">Software caused connection abort</h3></div>
<p>Os gerenciadores de arquivos que utilizam <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gvfs-smb">gvfs-smb</a></span> podem mostrar o erro <code>Software caused connection abort</code> ao gravar um arquivo em um compartilhamento/servidor. Isso pode ser devido ao servidor executando SMB/CIFS versão 1, que muitos roteadores usam para compartilhamento de unidade USB (por exemplo, roteadores Belkin). Para gravar nesses compartilhamentos, especifique a versão CIFS com a opção <code>vers=1.0</code>. Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">//SERVER/sharename /mnt/mountpoint cifs _netdev,guest,file_mode=0777,dir_mode=0777,vers=1.0 0 0</pre>
<p>Isso também pode acontecer após atualizar o Samba para a versão 4.11, que desativa o SMB1 como padrão, e acessar qualquer compartilhamento do Samba. Você pode reativá-lo adicionando
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/samba/smb.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[global]
client min protocol = CORE</pre>
<div class="mw-heading mw-heading3"><h3 id="Problemas_de_conexão_(devido_a_erros_de_autenticação)">
<span id="Problemas_de_conex.C3.A3o_.28devido_a_erros_de_autentica.C3.A7.C3.A3o.29"></span>Problemas de conexão (devido a erros de autenticação)</h3></div>
<p>Certifique-se de não deixar nenhum caractere de espaço antes de seu nome de usuário no arquivo de configuração do cliente Samba da seguinte forma:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.samba</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">username= user
password=pass</pre>
<p>O formato correto é o seguinte:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.samba</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">username=user
password=pass</pre>
<div class="mw-heading mw-heading3"><h3 id="Windows_1709_ou_mais_recente_não_mostra_o_servidor_Samba_na_rede">
<span id="Windows_1709_ou_mais_recente_n.C3.A3o_mostra_o_servidor_Samba_na_rede"></span>Windows 1709 ou mais recente não mostra o servidor Samba na rede</h3></div>
<p>Com o Windows 10 versão 1511, o suporte para SMBv1 e, portanto, a descoberta de dispositivos NetBIOS foi desabilitado por padrão. Dependendo da edição real, as versões posteriores do Windows a partir da versão 1709 ("Fall Creators Update") não permitem mais a instalação do cliente SMBv1. Isso faz com que os hosts que executam o Samba não sejam listados nas visualizações "Rede (Vizinhança)" do Explorer. Embora não haja problemas de conectividade e o Samba ainda funcione bem, os usuários podem querer que seus hosts Samba sejam listados pelo Windows automaticamente. <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wsdd">wsdd</a></span> implementa uma daemon de host do Web Service Discovery. Isso permite que hosts (Samba), como seu dispositivo NAS local, sejam encontrados por Clientes de Descoberta de Serviços da Web, como o Windows. As configurações padrão devem funcionar para a maioria das instalações, tudo o que você precisa fazer é ativar o <code>wsdd.service</code>.
</p>
<p>Se estiver com a configuração padrão, anunciar-se na rede com o nome do host da máquina no grupo "WORKGROUP" deve ser tudo o que você precisa na maioria dos casos. Caso seja necessário, você pode alterar as opções de configuração passando argumentos adicionais para wsdd adicionando-os em <code>/etc/conf.d/wsdd</code> (consulte a página de manual para wsdd para obter detalhes).
</p>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/wsdd2/">wsdd2</a></span><sup><small>AUR</small></sup> faz a mesma coisa, mas é escrito em C em vez de Python. Por padrão, ele procurará os valores <code>netbios name</code> e <code>workgroup</code> em <code>smb.conf</code>.
</p>
<div class="mw-heading mw-heading3"><h3 id="Arquivos_IOS_não_podem_mais_ser_copiados_para_o_compartilhamento_Samba_no_Arch_Linux_começando_com_IOS_14.5">
<span id="Arquivos_IOS_n.C3.A3o_podem_mais_ser_copiados_para_o_compartilhamento_Samba_no_Arch_Linux_come.C3.A7ando_com_IOS_14.5"></span>Arquivos IOS não podem mais ser copiados para o compartilhamento Samba no Arch Linux começando com IOS 14.5</h3></div>
<p>Começando com o IOS 14.5 tentando transferir de um dispositivo executando o IOS usando o aplicativo "Files" para um compartilhamento de samba no Arch Linux resultará no erro:
</p>
<pre>The operation couldn't be completed
Operation canceled
</pre>
<p>Para corrigir esse problema, adicione o seguinte à seção global do seu <code>smb.conf</code> e <a href="../pt/Systemd.html#Usando_units" class="mw-redirect" title="Reinicie">reinicie</a> <code>smb.service</code>.
Comentário opcional:
</p>
<pre>## addition for IOS Files transfer-to server
vfs object = fruit streams_xattr
</pre>
<p>Veja <a rel="nofollow" class="external free" href="https://apple.stackexchange.com/q/424681">https://apple.stackexchange.com/q/424681</a> Apple.Stackexchange.com - "The operation couldn't be completed"/"Operation canceled" error message when saving to a Samba share via Files app.
</p>
<div class="mw-heading mw-heading2"><h2 id="Veja_também">
<span id="Veja_tamb.C3.A9m"></span>Veja também</h2></div>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.samba.org/">Official website</a></li>
<li><a rel="nofollow" class="external text" href="https://www.samba.org/samba/docs/SambaIntro.html">Samba: An Introduction</a></li>
<li>
<a rel="nofollow" class="external text" href="https://www.samba.org/samba/docs/Samba-HOWTO-Collection.pdf">Samba 3.2.x HOWTO and Reference Guide</a> (outdated but still most extensive documentation)</li>
<li><a href="https://en.wikipedia.org/wiki/Samba_(software)" class="extiw" title="wikipedia:Samba (software)">Wikipedia</a></li>
<li><a href="https://wiki.gentoo.org/wiki/Samba/Guide" class="extiw" title="gentoo:Samba/Guide">Gentoo:Samba/Guide</a></li>
<li><a href="https://wiki.debian.org/Samba/ServerSimple" class="extiw" title="debian:Samba/ServerSimple">Debian:Samba/ServerSimple</a></li>
<li>
<a rel="nofollow" class="external text" href="https://docs.kernel.org//filesystems/cifs/ksmbd.html">KSMBD</a><sup title="Status da última verificação: 404">[<a href="https://en.wikipedia.org/wiki/pt:Wikip%C3%A9dia:Liga%C3%A7%C3%A3o_inativa" class="extiw" title="wikipedia:pt:Wikipédia:Ligação inativa">link inativo</a> 2023-06-17 ⓘ]</sup> - A linux kernel server which implements SMB3 protocol in kernel space for sharing files over network.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Network_sharing.html" title="Category:Network sharing (Português)">Network sharing (Português)</a></li>
<li><a href="../pt/Category:Servers.html" title="Category:Servers (Português)">Servers (Português)</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Samba_(Portugu%C3%AAs)&amp;oldid=839249">https://wiki.archlinux.org/index.php?title=Samba_(Português)&amp;oldid=839249</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 June 2025, at 20:13.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
	<li id="footer-places-archwiki-code-of-conduct"><a href="https://terms.archlinux.org/docs/code-of-conduct/" class="extiw" title="archlinux-service-agreements:code-of-conduct">Code of conduct</a></li>
	<li id="footer-places-archwiki-terms-of-service"><a href="https://terms.archlinux.org/docs/terms-of-service/" class="extiw" title="archlinux-service-agreements:terms-of-service">Terms of service</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://www.gnu.org/copyleft/fdl.html" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/resources/assets/licenses/gnu-fdl.png" alt="GNU Free Documentation License 1.3 or later" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><picture><source media="(min-width: 500px)" srcset="/resources/assets/poweredby_mediawiki.svg" width="88" height="31"><img src="/resources/assets/mediawiki_compact.svg" width="25" height="25" loading="lazy"></picture></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-header-container vector-sticky-header-container">
	<div id="vector-sticky-header" class="vector-sticky-header">
		<div class="vector-sticky-header-start">
			<div class="vector-sticky-header-icon-start vector-button-flush-left vector-button-flush-right" aria-hidden="true">
				<button class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-sticky-header-search-toggle" tabindex="-1" data-event-name="ui.vector-sticky-search-form.icon"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
			</button>
		</div>
			
		<div role="search" class="vector-search-box-vue vector-search-box">
			<div class="vector-typeahead-search-container">
				<div class="cdx-typeahead-search">
					<form action="/index.php" id="vector-sticky-search-form" class="cdx-search-input cdx-search-input--has-end-button">
						<div class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
							<div class="cdx-text-input cdx-text-input--has-start-icon">
								<input class="cdx-text-input__input" type="search" name="search" placeholder="Search ArchWiki">
								<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
							</div>
							<input type="hidden" name="title" value="Special:Search">
						</div>
						<button class="cdx-button cdx-search-input__end-button">Search</button>
					</form>
				</div>
			</div>
		</div>
		<div class="vector-sticky-header-context-bar">
				<nav aria-label="Contents" class="vector-toc-landmark">
						
					<div id="vector-sticky-header-toc" class="vector-dropdown mw-portlet mw-portlet-sticky-header-toc vector-sticky-header-toc vector-button-flush-left">
						<input type="checkbox" id="vector-sticky-header-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-sticky-header-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
						<label id="vector-sticky-header-toc-label" for="vector-sticky-header-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
						</label>
						<div class="vector-dropdown-content">
					
						<div id="vector-sticky-header-toc-unpinned-container" class="vector-unpinned-container">
						</div>
					
						</div>
					</div>
			</nav>
				<div class="vector-sticky-header-context-bar-primary" aria-hidden="true"><span class="mw-page-title-main">Samba (Português)</span></div>
			</div>
		</div>
		<div class="vector-sticky-header-end" aria-hidden="true">
			<div class="vector-sticky-header-icons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-talk-sticky-header" tabindex="-1" data-event-name="talk-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbles mw-ui-icon-wikimedia-speechBubbles"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-subject-sticky-header" tabindex="-1" data-event-name="subject-sticky-header"><span class="vector-icon mw-ui-icon-article mw-ui-icon-wikimedia-article"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-history-sticky-header" tabindex="-1" data-event-name="history-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-history mw-ui-icon-wikimedia-wikimedia-history"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only mw-watchlink" id="ca-watchstar-sticky-header" tabindex="-1" data-event-name="watch-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-star mw-ui-icon-wikimedia-wikimedia-star"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-edit-sticky-header" tabindex="-1" data-event-name="wikitext-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-wikiText mw-ui-icon-wikimedia-wikimedia-wikiText"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-ve-edit-sticky-header" tabindex="-1" data-event-name="ve-edit-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-edit mw-ui-icon-wikimedia-wikimedia-edit"></span>

<span></span>
			</a>
			<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only" id="ca-viewsource-sticky-header" tabindex="-1" data-event-name="ve-edit-protected-sticky-header"><span class="vector-icon mw-ui-icon-wikimedia-editLock mw-ui-icon-wikimedia-wikimedia-editLock"></span>

<span></span>
			</a>
		</div>
			<div class="vector-sticky-header-buttons">
				<a href="#" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--action-progressive" id="ca-addsection-sticky-header" tabindex="-1" data-event-name="addsection-sticky-header"><span class="vector-icon mw-ui-icon-speechBubbleAdd-progressive mw-ui-icon-wikimedia-speechBubbleAdd-progressive"></span>

<span>Add topic</span>
			</a>
		</div>
			<div class="vector-sticky-header-icon-end">
				<div class="vector-user-links">
				</div>
			</div>
		</div>
	</div>
</div>
<div class="mw-portlet mw-portlet-dock-bottom emptyPortlet" id="p-dock-bottom">
	<ul>
		
	</ul>
</div>
</body>
</html>
